<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LLVM: lib/Analysis/MLInlineAdvisor.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">LLVM
   &#160;<span id="projectnumber">17.0.0git</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a class="el" href="dir_a25db018342d3ae6c7e6779086c18378.html">Analysis</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">MLInlineAdvisor.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="MLInlineAdvisor_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//===- MLInlineAdvisor.cpp - machine learned InlineAdvisor ----------------===//</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">// See https://llvm.org/LICENSE.txt for license information.</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">// This file implements the interface between the inliner and a learned model.</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">// It delegates model evaluation to either the AOT compiled model (the</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">// &#39;release&#39; mode) or a runtime-loaded model (the &#39;development&#39; case).</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MLInlineAdvisor_8h.html">llvm/Analysis/MLInlineAdvisor.h</a>&quot;</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SCCIterator_8h.html">llvm/ADT/SCCIterator.h</a>&quot;</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="AssumptionCache_8h.html">llvm/Analysis/AssumptionCache.h</a>&quot;</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CallGraph_8h.html">llvm/Analysis/CallGraph.h</a>&quot;</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="FunctionPropertiesAnalysis_8h.html">llvm/Analysis/FunctionPropertiesAnalysis.h</a>&quot;</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="InlineCost_8h.html">llvm/Analysis/InlineCost.h</a>&quot;</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="InlineModelFeatureMaps_8h.html">llvm/Analysis/InlineModelFeatureMaps.h</a>&quot;</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="InteractiveModelRunner_8h.html">llvm/Analysis/InteractiveModelRunner.h</a>&quot;</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LazyCallGraph_8h.html">llvm/Analysis/LazyCallGraph.h</a>&quot;</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LoopInfo_8h.html">llvm/Analysis/LoopInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MLModelRunner_8h.html">llvm/Analysis/MLModelRunner.h</a>&quot;</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="OptimizationRemarkEmitter_8h.html">llvm/Analysis/OptimizationRemarkEmitter.h</a>&quot;</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ReleaseModeModelRunner_8h.html">llvm/Analysis/ReleaseModeModelRunner.h</a>&quot;</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="TargetTransformInfo_8h.html">llvm/Analysis/TargetTransformInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Dominators_8h.html">llvm/IR/Dominators.h</a>&quot;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="InstIterator_8h.html">llvm/IR/InstIterator.h</a>&quot;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="PassManager_8h.html">llvm/IR/PassManager.h</a>&quot;</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CommandLine_8h.html">llvm/Support/CommandLine.h</a>&quot;</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160; </div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespacellvm.html">llvm</a>;</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160; </div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;std::string&gt;</a> <a class="code" href="MLInlineAdvisor_8cpp.html#aefe5a4e2c29d60f8c84f64c633936588">InteractiveChannelBaseName</a>(</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;    <span class="stringliteral">&quot;inliner-interactive-channel-base&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;        <span class="stringliteral">&quot;Base file path for the interactive mode. The incoming filename should &quot;</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;        <span class="stringliteral">&quot;have the name &lt;inliner-interactive-channel-base&gt;.in, while the &quot;</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;        <span class="stringliteral">&quot;outgoing name should be &lt;inliner-interactive-channel-base&gt;.out&quot;</span>));</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160; </div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#if defined(LLVM_HAVE_TF_AOT_INLINERSIZEMODEL)</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="comment">// codegen-ed file</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#include &quot;InlinerSizeModel.h&quot;</span> <span class="comment">// NOLINT</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="keyword">using</span> <a class="code" href="classllvm_1_1NoopSavedModelImpl.html">CompiledModelType</a> = llvm::InlinerSizeModel;</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00047"></a><span class="lineno"><a class="line" href="MLInlineAdvisor_8cpp.html#a8359d29906d99e83b704f1583b96db94">   47</a></span>&#160;<span class="keyword">using</span> <a class="code" href="classllvm_1_1NoopSavedModelImpl.html">CompiledModelType</a> = <a class="code" href="classllvm_1_1NoopSavedModelImpl.html">NoopSavedModelImpl</a>;</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160; </div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;std::unique_ptr&lt;InlineAdvisor&gt;</div>
<div class="line"><a name="l00051"></a><span class="lineno"><a class="line" href="namespacellvm.html#ac000e0ebfe8c07d74ff922790f150c10">   51</a></span>&#160;<a class="code" href="namespacellvm.html#ac000e0ebfe8c07d74ff922790f150c10">llvm::getReleaseModeAdvisor</a>(<a class="code" href="classllvm_1_1Module.html">Module</a> &amp;M, <a class="code" href="classllvm_1_1AnalysisManager.html">ModuleAnalysisManager</a> &amp;<a class="code" href="PassBuilderBindings_8cpp.html#a85bddafa659a93a7a67c9094648259be">MAM</a>) {</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;  <span class="keywordflow">if</span> (!llvm::isEmbeddedModelEvaluatorValid&lt;CompiledModelType&gt;() &amp;&amp;</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;      <a class="code" href="MLInlineAdvisor_8cpp.html#aefe5a4e2c29d60f8c84f64c633936588">InteractiveChannelBaseName</a>.empty())</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;  std::unique_ptr&lt;MLModelRunner&gt; AOTRunner;</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="MLInlineAdvisor_8cpp.html#aefe5a4e2c29d60f8c84f64c633936588">InteractiveChannelBaseName</a>.empty())</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    AOTRunner = std::make_unique&lt;ReleaseModeModelRunner&lt;CompiledModelType&gt;&gt;(</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;        <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getContext(), <a class="code" href="namespacellvm.html#a8ac326bbf3910d5f456f0b3bbf8de06f">FeatureMap</a>, <a class="code" href="namespacellvm.html#a74754af06fcdbb71b2ddbfaa75ed09c5">DecisionName</a>);</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    AOTRunner = std::make_unique&lt;InteractiveModelRunner&gt;(</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;        <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getContext(), <a class="code" href="namespacellvm.html#a8ac326bbf3910d5f456f0b3bbf8de06f">FeatureMap</a>, <a class="code" href="namespacellvm.html#aa22d2826f4a9ac07e8c53cad3f0178a6">InlineDecisionSpec</a>,</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;        <a class="code" href="MLInlineAdvisor_8cpp.html#aefe5a4e2c29d60f8c84f64c633936588">InteractiveChannelBaseName</a> + <span class="stringliteral">&quot;.out&quot;</span>,</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;        <a class="code" href="MLInlineAdvisor_8cpp.html#aefe5a4e2c29d60f8c84f64c633936588">InteractiveChannelBaseName</a> + <span class="stringliteral">&quot;.in&quot;</span>);</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;  <span class="keywordflow">return</span> std::make_unique&lt;MLInlineAdvisor&gt;(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>, <a class="code" href="PassBuilderBindings_8cpp.html#a85bddafa659a93a7a67c9094648259be">MAM</a>, <a class="code" href="lib_2Target_2ARM_2README_8txt.html#ad3a99906764c35b2694ae90fa57744a5">std::move</a>(AOTRunner));</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;}</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160; </div>
<div class="line"><a name="l00067"></a><span class="lineno"><a class="line" href="MLInlineAdvisor_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">   67</a></span>&#160;<span class="preprocessor">#define DEBUG_TYPE &quot;inline-ml&quot;</span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160; </div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;float&gt;</a> <a class="code" href="MLInlineAdvisor_8cpp.html#a747ab7fb8a109ac4fae2950cffa8a034">SizeIncreaseThreshold</a>(</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    <span class="stringliteral">&quot;ml-advisor-size-increase-threshold&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Maximum factor by which expected native size may increase before &quot;</span></div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;             <span class="stringliteral">&quot;blocking any further inlining.&quot;</span>),</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(2.0));</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160; </div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="MLInlineAdvisor_8cpp.html#a8349122852680cf71ac1aa1b24334272">KeepFPICache</a>(</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    <span class="stringliteral">&quot;ml-advisor-keep-fpi-cache&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;        <span class="stringliteral">&quot;For test - keep the ML Inline advisor&#39;s FunctionPropertiesInfo cache&quot;</span>),</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">false</span>));</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160; </div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="comment">// clang-format off</span></div>
<div class="line"><a name="l00082"></a><span class="lineno"><a class="line" href="namespacellvm.html#a8ac326bbf3910d5f456f0b3bbf8de06f">   82</a></span>&#160;<span class="keyword">const</span> std::vector&lt;TensorSpec&gt; <a class="code" href="namespacellvm.html#a8ac326bbf3910d5f456f0b3bbf8de06f">llvm::FeatureMap</a>{</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="preprocessor">#define POPULATE_NAMES(_, NAME) TensorSpec::createSpec&lt;int64_t&gt;(NAME, {1} ),</span></div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="comment">// InlineCost features - these must come first</span></div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;  <a class="code" href="InlineModelFeatureMaps_8h.html#a148e00f4bc4841ecfe54c4134b8f20bd">INLINE_COST_FEATURE_ITERATOR</a>(<a class="code" href="MLInlineAdvisor_8cpp.html#a0eedfcd61840c8918b5f499d43e531fb">POPULATE_NAMES</a>)</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="preprocessor">#undef POPULATE_NAMES</span></div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160; </div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="comment">// Non-cost features</span></div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="preprocessor">#define POPULATE_NAMES(_, NAME, __) TensorSpec::createSpec&lt;int64_t&gt;(NAME, {1} ),</span></div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;  <a class="code" href="InlineModelFeatureMaps_8h.html#a5eabd85b6152d544f9752fe1efbda021">INLINE_FEATURE_ITERATOR</a>(<a class="code" href="MLInlineAdvisor_8cpp.html#a0eedfcd61840c8918b5f499d43e531fb">POPULATE_NAMES</a>)</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="preprocessor">#undef POPULATE_NAMES</span></div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;};</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="comment">// clang-format on</span></div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160; </div>
<div class="line"><a name="l00095"></a><span class="lineno"><a class="line" href="namespacellvm.html#a74754af06fcdbb71b2ddbfaa75ed09c5">   95</a></span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">const</span> <a class="code" href="namespacellvm.html#a74754af06fcdbb71b2ddbfaa75ed09c5">llvm::DecisionName</a> = <span class="stringliteral">&quot;inlining_decision&quot;</span>;</div>
<div class="line"><a name="l00096"></a><span class="lineno"><a class="line" href="namespacellvm.html#aa22d2826f4a9ac07e8c53cad3f0178a6">   96</a></span>&#160;<span class="keyword">const</span> <a class="code" href="classllvm_1_1TensorSpec.html">TensorSpec</a> <a class="code" href="namespacellvm.html#aa22d2826f4a9ac07e8c53cad3f0178a6">llvm::InlineDecisionSpec</a> =</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    TensorSpec::createSpec&lt;int64_t&gt;(<a class="code" href="namespacellvm.html#a74754af06fcdbb71b2ddbfaa75ed09c5">DecisionName</a>, {1});</div>
<div class="line"><a name="l00098"></a><span class="lineno"><a class="line" href="namespacellvm.html#a09f08b747caff737ade6a58ada02d2bf">   98</a></span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">const</span> <a class="code" href="namespacellvm.html#a09f08b747caff737ade6a58ada02d2bf">llvm::DefaultDecisionName</a> = <span class="stringliteral">&quot;inlining_default&quot;</span>;</div>
<div class="line"><a name="l00099"></a><span class="lineno"><a class="line" href="namespacellvm.html#aa497b131be7719a15bde7cb3192d9bf8">   99</a></span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">const</span> <a class="code" href="namespacellvm.html#aa497b131be7719a15bde7cb3192d9bf8">llvm::RewardName</a> = <span class="stringliteral">&quot;delta_size&quot;</span>;</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160; </div>
<div class="line"><a name="l00101"></a><span class="lineno"><a class="line" href="MLInlineAdvisor_8cpp.html#a57923de5737d94a3d7b4f3bcb58c9405">  101</a></span>&#160;<a class="code" href="classllvm_1_1CallBase.html">CallBase</a> *<a class="code" href="MLInlineAdvisor_8cpp.html#a57923de5737d94a3d7b4f3bcb58c9405">getInlinableCS</a>(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *CS = dyn_cast&lt;CallBase&gt;(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="AMDGPULibCalls_8cpp.html#a537c835c34f0b44b6ad2696643754390">Callee</a> = CS-&gt;getCalledFunction()) {</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="AMDGPULibCalls_8cpp.html#a537c835c34f0b44b6ad2696643754390">Callee</a>-&gt;isDeclaration()) {</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;        <span class="keywordflow">return</span> CS;</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;      }</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    }</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;}</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160; </div>
<div class="line"><a name="l00111"></a><span class="lineno"><a class="line" href="classllvm_1_1MLInlineAdvisor.html#a1047d7ffced1000f34f54500346f3f7b">  111</a></span>&#160;<a class="code" href="classllvm_1_1MLInlineAdvisor.html#a1047d7ffced1000f34f54500346f3f7b">MLInlineAdvisor::MLInlineAdvisor</a>(<a class="code" href="classllvm_1_1Module.html">Module</a> &amp;M, <a class="code" href="classllvm_1_1AnalysisManager.html">ModuleAnalysisManager</a> &amp;<a class="code" href="PassBuilderBindings_8cpp.html#a85bddafa659a93a7a67c9094648259be">MAM</a>,</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;                                 std::unique_ptr&lt;MLModelRunner&gt; Runner)</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    : <a class="code" href="classllvm_1_1InlineAdvisor.html">InlineAdvisor</a>(</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;          <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>, <a class="code" href="PassBuilderBindings_8cpp.html#a85bddafa659a93a7a67c9094648259be">MAM</a>.getResult&lt;<a class="code" href="classllvm_1_1InnerAnalysisManagerProxy.html">FunctionAnalysisManagerModuleProxy</a>&gt;(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>).getManager()),</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;      ModelRunner(<a class="code" href="namespacestd.html">std</a>::<a class="code" href="namespacellvm.html#abfc9c7ecf70f66901e439f7c04ef3dbb">move</a>(Runner)),</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;      CG(<a class="code" href="PassBuilderBindings_8cpp.html#a85bddafa659a93a7a67c9094648259be">MAM</a>.getResult&lt;<a class="code" href="classllvm_1_1LazyCallGraphAnalysis.html">LazyCallGraphAnalysis</a>&gt;(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>)),</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;      InitialIRSize(getModuleIRSize()), CurrentIRSize(InitialIRSize) {</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="classllvm_1_1MLInlineAdvisor.html#a33dfb3ef81bda64ebcbc766046c701c6">ModelRunner</a>);</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;  <a class="code" href="classllvm_1_1MLInlineAdvisor.html#a33dfb3ef81bda64ebcbc766046c701c6">ModelRunner</a>-&gt;switchContext(<span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;  <span class="comment">// Extract the &#39;call site height&#39; feature - the position of a call site</span></div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;  <span class="comment">// relative to the farthest statically reachable SCC node. We don&#39;t mutate</span></div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;  <span class="comment">// this value while inlining happens. Empirically, this feature proved</span></div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;  <span class="comment">// critical in behavioral cloning - i.e. training a model to mimic the manual</span></div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;  <span class="comment">// heuristic&#39;s decisions - and, thus, equally important for training for</span></div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;  <span class="comment">// improvement.</span></div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;  <a class="code" href="classllvm_1_1CallGraph.html">CallGraph</a> CGraph(<a class="code" href="classllvm_1_1InlineAdvisor.html#ab63e90899ab78f60bf47256071c0a48b">M</a>);</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = <a class="code" href="namespacellvm.html#a71882a8257c58a4d9401db39622871a6">scc_begin</a>(&amp;CGraph); !<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.isAtEnd(); ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    <span class="keyword">const</span> std::vector&lt;CallGraphNode *&gt; &amp;CGNodes = *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    <span class="keywordtype">unsigned</span> Level = 0;</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> *CGNode : CGNodes) {</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;      <a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> = CGNode-&gt;getFunction();</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> || <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;isDeclaration())</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : <a class="code" href="namespacellvm.html#a7e3e687ddfdcbacd404bcf17b917dd88">instructions</a>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>)) {</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;        <span class="keywordflow">if</span> (<span class="keyword">auto</span> *CS = <a class="code" href="MLInlineAdvisor_8cpp.html#a57923de5737d94a3d7b4f3bcb58c9405">getInlinableCS</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;          <span class="keyword">auto</span> *Called = CS-&gt;getCalledFunction();</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;          <span class="keyword">auto</span> Pos = FunctionLevels.find(&amp;CG.<a class="code" href="classllvm_1_1LazyCallGraph.html#a2e0002cac27faad0015b4fa7e5a3eb50">get</a>(*Called));</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;          <span class="comment">// In bottom up traversal, an inlinable callee is either in the</span></div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;          <span class="comment">// same SCC, or to a function in a visited SCC. So not finding its</span></div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;          <span class="comment">// level means we haven&#39;t visited it yet, meaning it&#39;s in this SCC.</span></div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;          <span class="keywordflow">if</span> (Pos == FunctionLevels.end())</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;          Level = <a class="code" href="namespacellvm.html#ab4d4bc901fedd8857f647dcc2c0d71de">std::max</a>(Level, Pos-&gt;second + 1);</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;        }</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;      }</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    }</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> *CGNode : CGNodes) {</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;      <a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> = CGNode-&gt;getFunction();</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> &amp;&amp; !<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;isDeclaration())</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;        FunctionLevels[&amp;CG.<a class="code" href="classllvm_1_1LazyCallGraph.html#a2e0002cac27faad0015b4fa7e5a3eb50">get</a>(*<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>)] = Level;</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    }</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;  }</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> KVP : FunctionLevels) {</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    AllNodes.insert(KVP.first);</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    EdgeCount += <a class="code" href="classllvm_1_1MLInlineAdvisor.html#abdcccbb9d3934f1685accebaf51f5aef">getLocalCalls</a>(KVP.first-&gt;getFunction());</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;  }</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;  NodeCount = AllNodes.size();</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;}</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160; </div>
<div class="line"><a name="l00160"></a><span class="lineno"><a class="line" href="classllvm_1_1MLInlineAdvisor.html#af89cb65bd8bca0c28b1a0b7cd0bcff89">  160</a></span>&#160;<span class="keywordtype">unsigned</span> <a class="code" href="classllvm_1_1MLInlineAdvisor.html#af89cb65bd8bca0c28b1a0b7cd0bcff89">MLInlineAdvisor::getInitialFunctionLevel</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;  <span class="keywordflow">return</span> CG.<a class="code" href="classllvm_1_1LazyCallGraph.html#af92b067e8f6295042dc6544e1df18825">lookup</a>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>) ? FunctionLevels.at(CG.<a class="code" href="classllvm_1_1LazyCallGraph.html#af92b067e8f6295042dc6544e1df18825">lookup</a>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>)) : 0;</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;}</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160; </div>
<div class="line"><a name="l00164"></a><span class="lineno"><a class="line" href="classllvm_1_1MLInlineAdvisor.html#aaaec1d89794dccf1f6d02c0e46258796">  164</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1MLInlineAdvisor.html#aaaec1d89794dccf1f6d02c0e46258796">MLInlineAdvisor::onPassEntry</a>(<a class="code" href="classllvm_1_1LazyCallGraph_1_1SCC.html">LazyCallGraph::SCC</a> *LastSCC) {</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;  <span class="keywordflow">if</span> (!LastSCC || ForceStop)</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;  FPICache.clear();</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;  <span class="comment">// Function passes executed between InlinerPass runs may have changed the</span></div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;  <span class="comment">// module-wide features.</span></div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;  <span class="comment">// The cgscc pass manager rules are such that:</span></div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;  <span class="comment">// - if a pass leads to merging SCCs, then the pipeline is restarted on the</span></div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;  <span class="comment">// merged SCC</span></div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;  <span class="comment">// - if a pass leads to splitting the SCC, then we continue with one of the</span></div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;  <span class="comment">// splits</span></div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;  <span class="comment">// This means that the NodesInLastSCC is a superset (not strict) of the nodes</span></div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;  <span class="comment">// that subsequent passes would have processed</span></div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;  <span class="comment">// - in addition, if new Nodes were created by a pass (e.g. CoroSplit),</span></div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;  <span class="comment">// they&#39;d be adjacent to Nodes in the last SCC. So we just need to check the</span></div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;  <span class="comment">// boundary of Nodes in NodesInLastSCC for Nodes we haven&#39;t seen. We don&#39;t</span></div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;  <span class="comment">// care about the nature of the Edge (call or ref).</span></div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;  NodeCount -= <span class="keyword">static_cast&lt;</span>int64_t<span class="keyword">&gt;</span>(NodesInLastSCC.size());</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;  <span class="keywordflow">while</span> (!NodesInLastSCC.empty()) {</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> *<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a> = *NodesInLastSCC.begin();</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    NodesInLastSCC.erase(<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>);</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    <span class="comment">// The Function wrapped by N could have been deleted since we last saw it.</span></div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;isDead()) {</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;getFunction().isDeclaration());</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    }</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    ++NodeCount;</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    EdgeCount += <a class="code" href="classllvm_1_1MLInlineAdvisor.html#abdcccbb9d3934f1685accebaf51f5aef">getLocalCalls</a>(<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;getFunction());</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> : *(*<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>)) {</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;      <span class="keyword">const</span> <span class="keyword">auto</span> *AdjNode = &amp;<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>.getNode();</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!AdjNode-&gt;isDead() &amp;&amp; !AdjNode-&gt;getFunction().isDeclaration());</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;      <span class="keyword">auto</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = AllNodes.insert(AdjNode);</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.second)</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;        NodesInLastSCC.insert(AdjNode);</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    }</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;  }</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160; </div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;  EdgeCount -= EdgesOfLastSeenNodes;</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;  EdgesOfLastSeenNodes = 0;</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160; </div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;  <span class="comment">// (Re)use NodesInLastSCC to remember the nodes in the SCC right now,</span></div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;  <span class="comment">// in case the SCC is split before onPassExit and some nodes are split out</span></div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(NodesInLastSCC.empty());</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a> : *LastSCC)</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    NodesInLastSCC.insert(&amp;<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>);</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;}</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160; </div>
<div class="line"><a name="l00211"></a><span class="lineno"><a class="line" href="classllvm_1_1MLInlineAdvisor.html#a42079a872d9a000c124cef0d38723741">  211</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1MLInlineAdvisor.html#a42079a872d9a000c124cef0d38723741">MLInlineAdvisor::onPassExit</a>(<a class="code" href="classllvm_1_1LazyCallGraph_1_1SCC.html">LazyCallGraph::SCC</a> *LastSCC) {</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;  <span class="comment">// No need to keep this around - function passes will invalidate it.</span></div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="MLInlineAdvisor_8cpp.html#a8349122852680cf71ac1aa1b24334272">KeepFPICache</a>)</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    FPICache.clear();</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;  <span class="keywordflow">if</span> (!LastSCC || ForceStop)</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;  <span class="comment">// Keep track of the nodes and edges we last saw. Then, in onPassEntry,</span></div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;  <span class="comment">// we update the node count and edge count from the subset of these nodes that</span></div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;  <span class="comment">// survived.</span></div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;  EdgesOfLastSeenNodes = 0;</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160; </div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;  <span class="comment">// Check on nodes that were in SCC onPassEntry</span></div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = NodesInLastSCC.begin(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != NodesInLastSCC.end();) {</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    <span class="keywordflow">if</span> ((*I)-&gt;isDead())</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;      NodesInLastSCC.erase(*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>++);</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;      EdgesOfLastSeenNodes += <a class="code" href="classllvm_1_1MLInlineAdvisor.html#abdcccbb9d3934f1685accebaf51f5aef">getLocalCalls</a>((*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>++)-&gt;<a class="code" href="Evaluator_8cpp.html#a0b9941c7c78b50f1f303fa0c6403b199">getFunction</a>());</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;  }</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160; </div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;  <span class="comment">// Check on nodes that may have got added to SCC</span></div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a> : *LastSCC) {</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>.isDead());</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    <span class="keyword">auto</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = NodesInLastSCC.insert(&amp;<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>);</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.second)</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;      EdgesOfLastSeenNodes += <a class="code" href="classllvm_1_1MLInlineAdvisor.html#abdcccbb9d3934f1685accebaf51f5aef">getLocalCalls</a>(<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>.getFunction());</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;  }</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(NodeCount &gt;= NodesInLastSCC.size());</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(EdgeCount &gt;= EdgesOfLastSeenNodes);</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;}</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160; </div>
<div class="line"><a name="l00241"></a><span class="lineno"><a class="line" href="classllvm_1_1MLInlineAdvisor.html#abdcccbb9d3934f1685accebaf51f5aef">  241</a></span>&#160;int64_t <a class="code" href="classllvm_1_1MLInlineAdvisor.html#abdcccbb9d3934f1685accebaf51f5aef">MLInlineAdvisor::getLocalCalls</a>(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>) {</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1MLInlineAdvisor.html#a3b7f1071fac3720a2f1d4bd7da91625d">getCachedFPI</a>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>).<a class="code" href="classllvm_1_1FunctionPropertiesInfo.html#afa568a5b2ab440f02bbc9eef3863a619">DirectCallsToDefinedFunctions</a>;</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;}</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160; </div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;<span class="comment">// Update the internal state of the advisor, and force invalidate feature</span></div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;<span class="comment">// analysis. Currently, we maintain minimal (and very simple) global state - the</span></div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;<span class="comment">// number of functions and the number of static calls. We also keep track of the</span></div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;<span class="comment">// total IR size in this module, to stop misbehaving policies at a certain bloat</span></div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;<span class="comment">// factor (SizeIncreaseThreshold)</span></div>
<div class="line"><a name="l00250"></a><span class="lineno"><a class="line" href="classllvm_1_1MLInlineAdvisor.html#a8116ffdfb54f7d195eb185c8bf7c060c">  250</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1MLInlineAdvisor.html#a8116ffdfb54f7d195eb185c8bf7c060c">MLInlineAdvisor::onSuccessfulInlining</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MLInlineAdvice.html">MLInlineAdvice</a> &amp;Advice,</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;                                           <span class="keywordtype">bool</span> CalleeWasDeleted) {</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!ForceStop);</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *Caller = Advice.<a class="code" href="classllvm_1_1MLInlineAdvice.html#a57f4e6c4a7e854d09fd11326982d608b">getCaller</a>();</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="AMDGPULibCalls_8cpp.html#a537c835c34f0b44b6ad2696643754390">Callee</a> = Advice.<a class="code" href="classllvm_1_1MLInlineAdvice.html#ad1612ebc252d6070cdac48dff8468158">getCallee</a>();</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;  <span class="comment">// The caller features aren&#39;t valid anymore.</span></div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;  {</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    <a class="code" href="classllvm_1_1PreservedAnalyses.html">PreservedAnalyses</a> PA = <a class="code" href="classllvm_1_1PreservedAnalyses.html#a1258a1ff55557c27684010ebd7283712">PreservedAnalyses::all</a>();</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    PA.<a class="code" href="classllvm_1_1PreservedAnalyses.html#ac8a842a601c470fa22db443ac34d0a67">abandon</a>&lt;<a class="code" href="classllvm_1_1FunctionPropertiesAnalysis.html">FunctionPropertiesAnalysis</a>&gt;();</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    PA.<a class="code" href="classllvm_1_1PreservedAnalyses.html#ac8a842a601c470fa22db443ac34d0a67">abandon</a>&lt;<a class="code" href="classllvm_1_1DominatorTreeAnalysis.html">DominatorTreeAnalysis</a>&gt;();</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    PA.<a class="code" href="classllvm_1_1PreservedAnalyses.html#ac8a842a601c470fa22db443ac34d0a67">abandon</a>&lt;<a class="code" href="classllvm_1_1LoopAnalysis.html">LoopAnalysis</a>&gt;();</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    <a class="code" href="classllvm_1_1InlineAdvisor.html#a1b1b99bc0fe39cbe400f49bbd65f01c3">FAM</a>.<a class="code" href="classllvm_1_1AnalysisManager.html#a64b2a209a16bcd41375b5cae12690eaa">invalidate</a>(*Caller, PA);</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;  }</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;  Advice.<a class="code" href="classllvm_1_1MLInlineAdvice.html#a19a31f34d91bfcdfa8c16f9a16079461">updateCachedCallerFPI</a>(<a class="code" href="classllvm_1_1InlineAdvisor.html#a1b1b99bc0fe39cbe400f49bbd65f01c3">FAM</a>);</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;  int64_t IRSizeAfter =</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;      <a class="code" href="classllvm_1_1MLInlineAdvisor.html#ad64807412969a3708f691675898a58c0">getIRSize</a>(*Caller) + (CalleeWasDeleted ? 0 : Advice.<a class="code" href="classllvm_1_1MLInlineAdvice.html#a6330d9efb13139a5058e3ee2d240c81d">CalleeIRSize</a>);</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;  CurrentIRSize += IRSizeAfter - (Advice.<a class="code" href="classllvm_1_1MLInlineAdvice.html#a367c676bd322e75aad02114a0763d955">CallerIRSize</a> + Advice.<a class="code" href="classllvm_1_1MLInlineAdvice.html#a6330d9efb13139a5058e3ee2d240c81d">CalleeIRSize</a>);</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;  <span class="keywordflow">if</span> (CurrentIRSize &gt; <a class="code" href="MLInlineAdvisor_8cpp.html#a747ab7fb8a109ac4fae2950cffa8a034">SizeIncreaseThreshold</a> * InitialIRSize)</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    ForceStop = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160; </div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;  <span class="comment">// We can delta-update module-wide features. We know the inlining only changed</span></div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;  <span class="comment">// the caller, and maybe the callee (by deleting the latter).</span></div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;  <span class="comment">// Nodes are simple to update.</span></div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;  <span class="comment">// For edges, we &#39;forget&#39; the edges that the caller and callee used to have</span></div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;  <span class="comment">// before inlining, and add back what they currently have together.</span></div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;  int64_t NewCallerAndCalleeEdges =</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;      <a class="code" href="classllvm_1_1MLInlineAdvisor.html#a3b7f1071fac3720a2f1d4bd7da91625d">getCachedFPI</a>(*Caller).<a class="code" href="classllvm_1_1FunctionPropertiesInfo.html#afa568a5b2ab440f02bbc9eef3863a619">DirectCallsToDefinedFunctions</a>;</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160; </div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;  <a class="code" href="include_2llvm_2Support_2CMakeLists_8txt.html#aef9367eb0b7430eaf70b1f2725488f2a">if</a> (CalleeWasDeleted)</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    --NodeCount;</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    NewCallerAndCalleeEdges +=</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;        <a class="code" href="classllvm_1_1MLInlineAdvisor.html#a3b7f1071fac3720a2f1d4bd7da91625d">getCachedFPI</a>(*Callee).<a class="code" href="classllvm_1_1FunctionPropertiesInfo.html#afa568a5b2ab440f02bbc9eef3863a619">DirectCallsToDefinedFunctions</a>;</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;  EdgeCount += (NewCallerAndCalleeEdges - Advice.<a class="code" href="classllvm_1_1MLInlineAdvice.html#ac2fa94d7c9401db9a42cee3a9e7a4416">CallerAndCalleeEdges</a>);</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(CurrentIRSize &gt;= 0 &amp;&amp; EdgeCount &gt;= 0 &amp;&amp; NodeCount &gt;= 0);</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;}</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160; </div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;int64_t MLInlineAdvisor::getModuleIRSize()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;  int64_t <a class="code" href="namespacellvm_1_1MipsISD.html#a422daf9aa810935178671306b651d69ba366e1eac31eeb1a1892d62ccfc0c8cf8">Ret</a> = 0;</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> : <a class="code" href="classllvm_1_1InlineAdvisor.html#ab63e90899ab78f60bf47256071c0a48b">M</a>)</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.isDeclaration())</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;      <a class="code" href="namespacellvm_1_1MipsISD.html#a422daf9aa810935178671306b651d69ba366e1eac31eeb1a1892d62ccfc0c8cf8">Ret</a> += <a class="code" href="classllvm_1_1MLInlineAdvisor.html#ad64807412969a3708f691675898a58c0">getIRSize</a>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1MipsISD.html#a422daf9aa810935178671306b651d69ba366e1eac31eeb1a1892d62ccfc0c8cf8">Ret</a>;</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;}</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160; </div>
<div class="line"><a name="l00295"></a><span class="lineno"><a class="line" href="classllvm_1_1MLInlineAdvisor.html#a3b7f1071fac3720a2f1d4bd7da91625d">  295</a></span>&#160;<a class="code" href="classllvm_1_1FunctionPropertiesInfo.html">FunctionPropertiesInfo</a> &amp;<a class="code" href="classllvm_1_1MLInlineAdvisor.html#a3b7f1071fac3720a2f1d4bd7da91625d">MLInlineAdvisor::getCachedFPI</a>(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;  <span class="keyword">auto</span> InsertPair =</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;      FPICache.insert(std::make_pair(&amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, <a class="code" href="classllvm_1_1FunctionPropertiesInfo.html">FunctionPropertiesInfo</a>()));</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;  <span class="keywordflow">if</span> (!InsertPair.second)</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    <span class="keywordflow">return</span> InsertPair.first-&gt;second;</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;  InsertPair.first-&gt;second = <a class="code" href="classllvm_1_1InlineAdvisor.html#a1b1b99bc0fe39cbe400f49bbd65f01c3">FAM</a>.<a class="code" href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">getResult</a>&lt;<a class="code" href="classllvm_1_1FunctionPropertiesAnalysis.html">FunctionPropertiesAnalysis</a>&gt;(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;  <span class="keywordflow">return</span> InsertPair.first-&gt;second;</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;}</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160; </div>
<div class="line"><a name="l00304"></a><span class="lineno"><a class="line" href="classllvm_1_1MLInlineAdvisor.html#adb44b65867ce48eee9d2d49cbdc60333">  304</a></span>&#160;std::unique_ptr&lt;InlineAdvice&gt; <a class="code" href="classllvm_1_1MLInlineAdvisor.html#adb44b65867ce48eee9d2d49cbdc60333">MLInlineAdvisor::getAdviceImpl</a>(<a class="code" href="classllvm_1_1CallBase.html">CallBase</a> &amp;CB) {</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> Skip = getSkipAdviceIfUnreachableCallsite(CB))</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    <span class="keywordflow">return</span> Skip;</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160; </div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;  <span class="keyword">auto</span> &amp;Caller = *CB.<a class="code" href="classllvm_1_1CallBase.html#afac5b39bcbb90d660f83d9b4bd8c6d95">getCaller</a>();</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;  <span class="keyword">auto</span> &amp;<a class="code" href="AMDGPULibCalls_8cpp.html#a537c835c34f0b44b6ad2696643754390">Callee</a> = *CB.<a class="code" href="classllvm_1_1CallBase.html#a83b8c9e572130f403445c0b0f69b837c">getCalledFunction</a>();</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160; </div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;  <span class="keyword">auto</span> GetAssumptionCache = [&amp;](<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>) -&gt; <a class="code" href="classllvm_1_1AssumptionCache.html">AssumptionCache</a> &amp; {</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1InlineAdvisor.html#a1b1b99bc0fe39cbe400f49bbd65f01c3">FAM</a>.<a class="code" href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">getResult</a>&lt;<a class="code" href="classllvm_1_1AssumptionAnalysis.html">AssumptionAnalysis</a>&gt;(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;  };</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;  <span class="keyword">auto</span> &amp;TIR = <a class="code" href="classllvm_1_1InlineAdvisor.html#a1b1b99bc0fe39cbe400f49bbd65f01c3">FAM</a>.<a class="code" href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">getResult</a>&lt;<a class="code" href="classllvm_1_1TargetIRAnalysis.html">TargetIRAnalysis</a>&gt;(<a class="code" href="AMDGPULibCalls_8cpp.html#a537c835c34f0b44b6ad2696643754390">Callee</a>);</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;  <span class="keyword">auto</span> &amp;ORE = <a class="code" href="classllvm_1_1InlineAdvisor.html#a1b1b99bc0fe39cbe400f49bbd65f01c3">FAM</a>.<a class="code" href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">getResult</a>&lt;<a class="code" href="classllvm_1_1OptimizationRemarkEmitterAnalysis.html">OptimizationRemarkEmitterAnalysis</a>&gt;(Caller);</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160; </div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;  <span class="keyword">auto</span> MandatoryKind = <a class="code" href="classllvm_1_1InlineAdvisor.html#a2610d24c389789284bb8c8b616ab5e43">InlineAdvisor::getMandatoryKind</a>(CB, <a class="code" href="classllvm_1_1InlineAdvisor.html#a1b1b99bc0fe39cbe400f49bbd65f01c3">FAM</a>, ORE);</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;  <span class="comment">// If this is a &quot;never inline&quot; case, there won&#39;t be any changes to internal</span></div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;  <span class="comment">// state we need to track, so we can just return the base InlineAdvice, which</span></div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;  <span class="comment">// will do nothing interesting.</span></div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;  <span class="comment">// Same thing if this is a recursive case.</span></div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;  <span class="keywordflow">if</span> (MandatoryKind == <a class="code" href="classllvm_1_1InlineAdvisor.html#a6659e9fe3450059147033d140cd8496ea6e7b34fa59e1bd229b207892956dc41c">InlineAdvisor::MandatoryInliningKind::Never</a> ||</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;      &amp;Caller == &amp;<a class="code" href="AMDGPULibCalls_8cpp.html#a537c835c34f0b44b6ad2696643754390">Callee</a>)</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1MLInlineAdvisor.html#adca0f8d16629001e04b5f4d1cbae214b">getMandatoryAdvice</a>(CB, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160; </div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;  <span class="keywordtype">bool</span> Mandatory =</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;      MandatoryKind == <a class="code" href="classllvm_1_1InlineAdvisor.html#a6659e9fe3450059147033d140cd8496ea68eec46437c384d8dad18d5464ebc35c">InlineAdvisor::MandatoryInliningKind::Always</a>;</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160; </div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;  <span class="comment">// If we need to stop, we won&#39;t want to track anymore any state changes, so</span></div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;  <span class="comment">// we just return the base InlineAdvice, which acts as a noop.</span></div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;  <span class="keywordflow">if</span> (ForceStop) {</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    ORE.emit([&amp;] {</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1OptimizationRemarkMissed.html">OptimizationRemarkMissed</a>(<a class="code" href="MLInlineAdvisor_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">DEBUG_TYPE</a>, <span class="stringliteral">&quot;ForceStop&quot;</span>, &amp;CB)</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;             &lt;&lt; <span class="stringliteral">&quot;Won&#39;t attempt inlining because module size grew too much.&quot;</span>;</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    });</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    <span class="keywordflow">return</span> std::make_unique&lt;InlineAdvice&gt;(<span class="keyword">this</span>, CB, ORE, Mandatory);</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;  }</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160; </div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;  <span class="keywordtype">int</span> CostEstimate = 0;</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;  <span class="keywordflow">if</span> (!Mandatory) {</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    <span class="keyword">auto</span> IsCallSiteInlinable =</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;        <a class="code" href="namespacellvm.html#ac25d98957a825ee699d9b11ee836cc19">llvm::getInliningCostEstimate</a>(CB, TIR, GetAssumptionCache);</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    <span class="keywordflow">if</span> (!IsCallSiteInlinable) {</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;      <span class="comment">// We can&#39;t inline this for correctness reasons, so return the base</span></div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;      <span class="comment">// InlineAdvice, as we don&#39;t care about tracking any state changes (which</span></div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;      <span class="comment">// won&#39;t happen).</span></div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;      <span class="keywordflow">return</span> std::make_unique&lt;InlineAdvice&gt;(<span class="keyword">this</span>, CB, ORE, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    }</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    CostEstimate = *IsCallSiteInlinable;</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;  }</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160; </div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span> CostFeatures =</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;      <a class="code" href="namespacellvm.html#a31965ae9b8c0a53197f6a2dcc9205bd7">llvm::getInliningCostFeatures</a>(CB, TIR, GetAssumptionCache);</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;  <span class="keywordflow">if</span> (!CostFeatures) {</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    <span class="keywordflow">return</span> std::make_unique&lt;InlineAdvice&gt;(<span class="keyword">this</span>, CB, ORE, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;  }</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160; </div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;  <span class="keywordflow">if</span> (Mandatory)</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1MLInlineAdvisor.html#adca0f8d16629001e04b5f4d1cbae214b">getMandatoryAdvice</a>(CB, <span class="keyword">true</span>);</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160; </div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;  <span class="keyword">auto</span> NrCtantParams = 0;</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = CB.<a class="code" href="classllvm_1_1CallBase.html#a4fb513d744ca72275932b2c7003f16f6">arg_begin</a>(), <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = CB.<a class="code" href="classllvm_1_1CallBase.html#ac0f11b96f81b2769dd23d028e3189075">arg_end</a>(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;    NrCtantParams += (isa&lt;Constant&gt;(*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>));</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;  }</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160; </div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;  <span class="keyword">auto</span> &amp;CallerBefore = <a class="code" href="classllvm_1_1MLInlineAdvisor.html#a3b7f1071fac3720a2f1d4bd7da91625d">getCachedFPI</a>(Caller);</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;  <span class="keyword">auto</span> &amp;CalleeBefore = <a class="code" href="classllvm_1_1MLInlineAdvisor.html#a3b7f1071fac3720a2f1d4bd7da91625d">getCachedFPI</a>(<a class="code" href="AMDGPULibCalls_8cpp.html#a537c835c34f0b44b6ad2696643754390">Callee</a>);</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160; </div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;  *<a class="code" href="classllvm_1_1MLInlineAdvisor.html#a33dfb3ef81bda64ebcbc766046c701c6">ModelRunner</a>-&gt;getTensor&lt;int64_t&gt;(FeatureIndex::CalleeBasicBlockCount) =</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;      CalleeBefore.BasicBlockCount;</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;  *<a class="code" href="classllvm_1_1MLInlineAdvisor.html#a33dfb3ef81bda64ebcbc766046c701c6">ModelRunner</a>-&gt;getTensor&lt;int64_t&gt;(FeatureIndex::CallSiteHeight) =</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;      <a class="code" href="classllvm_1_1MLInlineAdvisor.html#af89cb65bd8bca0c28b1a0b7cd0bcff89">getInitialFunctionLevel</a>(Caller);</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;  *<a class="code" href="classllvm_1_1MLInlineAdvisor.html#a33dfb3ef81bda64ebcbc766046c701c6">ModelRunner</a>-&gt;getTensor&lt;int64_t&gt;(FeatureIndex::NodeCount) = NodeCount;</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;  *<a class="code" href="classllvm_1_1MLInlineAdvisor.html#a33dfb3ef81bda64ebcbc766046c701c6">ModelRunner</a>-&gt;getTensor&lt;int64_t&gt;(FeatureIndex::NrCtantParams) = NrCtantParams;</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;  *<a class="code" href="classllvm_1_1MLInlineAdvisor.html#a33dfb3ef81bda64ebcbc766046c701c6">ModelRunner</a>-&gt;getTensor&lt;int64_t&gt;(FeatureIndex::EdgeCount) = EdgeCount;</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;  *<a class="code" href="classllvm_1_1MLInlineAdvisor.html#a33dfb3ef81bda64ebcbc766046c701c6">ModelRunner</a>-&gt;getTensor&lt;int64_t&gt;(FeatureIndex::CallerUsers) =</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;      CallerBefore.Uses;</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;  *<a class="code" href="classllvm_1_1MLInlineAdvisor.html#a33dfb3ef81bda64ebcbc766046c701c6">ModelRunner</a>-&gt;getTensor&lt;int64_t&gt;(</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;      FeatureIndex::CallerConditionallyExecutedBlocks) =</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;      CallerBefore.BlocksReachedFromConditionalInstruction;</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;  *<a class="code" href="classllvm_1_1MLInlineAdvisor.html#a33dfb3ef81bda64ebcbc766046c701c6">ModelRunner</a>-&gt;getTensor&lt;int64_t&gt;(FeatureIndex::CallerBasicBlockCount) =</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;      CallerBefore.BasicBlockCount;</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;  *<a class="code" href="classllvm_1_1MLInlineAdvisor.html#a33dfb3ef81bda64ebcbc766046c701c6">ModelRunner</a>-&gt;getTensor&lt;int64_t&gt;(</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;      FeatureIndex::CalleeConditionallyExecutedBlocks) =</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;      CalleeBefore.BlocksReachedFromConditionalInstruction;</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;  *<a class="code" href="classllvm_1_1MLInlineAdvisor.html#a33dfb3ef81bda64ebcbc766046c701c6">ModelRunner</a>-&gt;getTensor&lt;int64_t&gt;(FeatureIndex::CalleeUsers) =</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;      CalleeBefore.Uses;</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;  *<a class="code" href="classllvm_1_1MLInlineAdvisor.html#a33dfb3ef81bda64ebcbc766046c701c6">ModelRunner</a>-&gt;getTensor&lt;int64_t&gt;(FeatureIndex::CostEstimate) = CostEstimate;</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160; </div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;  <span class="comment">// Add the cost features</span></div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0;</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;       I &lt; static_cast&lt;size_t&gt;(<a class="code" href="namespacellvm.html#a7ef78f96e07a124af3b346d8df9010cca67f61322a0f693e8ff8200717ec6adde">InlineCostFeatureIndex::NumberOfFeatures</a>); ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    *<a class="code" href="classllvm_1_1MLInlineAdvisor.html#a33dfb3ef81bda64ebcbc766046c701c6">ModelRunner</a>-&gt;getTensor&lt;int64_t&gt;(<a class="code" href="namespacellvm.html#a087651f2fd9aa01317b1380f4fb896a2">inlineCostFeatureToMlFeature</a>(</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;        <span class="keyword">static_cast&lt;</span><a class="code" href="namespacellvm.html#a7ef78f96e07a124af3b346d8df9010cc">InlineCostFeatureIndex</a><span class="keyword">&gt;</span>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))) = CostFeatures-&gt;at(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;  }</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160; </div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1MLInlineAdvisor.html#ad29d86e8f62a35997fcc2f48d72653b2">getAdviceFromModel</a>(CB, ORE);</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;}</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160; </div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;std::unique_ptr&lt;MLInlineAdvice&gt;</div>
<div class="line"><a name="l00401"></a><span class="lineno"><a class="line" href="classllvm_1_1MLInlineAdvisor.html#ad29d86e8f62a35997fcc2f48d72653b2">  401</a></span>&#160;<a class="code" href="classllvm_1_1MLInlineAdvisor.html#ad29d86e8f62a35997fcc2f48d72653b2">MLInlineAdvisor::getAdviceFromModel</a>(<a class="code" href="classllvm_1_1CallBase.html">CallBase</a> &amp;CB,</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;                                    <a class="code" href="classllvm_1_1OptimizationRemarkEmitter.html">OptimizationRemarkEmitter</a> &amp;ORE) {</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;  <span class="keywordflow">return</span> std::make_unique&lt;MLInlineAdvice&gt;(</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;      <span class="keyword">this</span>, CB, ORE, <span class="keyword">static_cast&lt;</span><span class="keywordtype">bool</span><span class="keyword">&gt;</span>(<a class="code" href="classllvm_1_1MLInlineAdvisor.html#a33dfb3ef81bda64ebcbc766046c701c6">ModelRunner</a>-&gt;evaluate&lt;int64_t&gt;()));</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;}</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160; </div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;std::unique_ptr&lt;InlineAdvice&gt;</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;MLInlineAdvisor::getSkipAdviceIfUnreachableCallsite(<a class="code" href="classllvm_1_1CallBase.html">CallBase</a> &amp;CB) {</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classllvm_1_1InlineAdvisor.html#a1b1b99bc0fe39cbe400f49bbd65f01c3">FAM</a>.<a class="code" href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">getResult</a>&lt;<a class="code" href="classllvm_1_1DominatorTreeAnalysis.html">DominatorTreeAnalysis</a>&gt;(*CB.<a class="code" href="classllvm_1_1CallBase.html#afac5b39bcbb90d660f83d9b4bd8c6d95">getCaller</a>())</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;           .isReachableFromEntry(CB.<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>()))</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;    <span class="keywordflow">return</span> std::make_unique&lt;InlineAdvice&gt;(<span class="keyword">this</span>, CB, <a class="code" href="classllvm_1_1InlineAdvisor.html#a14528ae0117f755bc5a74a7683c0722d">getCallerORE</a>(CB), <span class="keyword">false</span>);</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;}</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160; </div>
<div class="line"><a name="l00415"></a><span class="lineno"><a class="line" href="classllvm_1_1MLInlineAdvisor.html#adca0f8d16629001e04b5f4d1cbae214b">  415</a></span>&#160;std::unique_ptr&lt;InlineAdvice&gt; <a class="code" href="classllvm_1_1MLInlineAdvisor.html#adca0f8d16629001e04b5f4d1cbae214b">MLInlineAdvisor::getMandatoryAdvice</a>(<a class="code" href="classllvm_1_1CallBase.html">CallBase</a> &amp;CB,</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;                                                                  <span class="keywordtype">bool</span> Advice) {</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;  <span class="comment">// Make sure we track inlinings in all cases - mandatory or not.</span></div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> Skip = getSkipAdviceIfUnreachableCallsite(CB))</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;    <span class="keywordflow">return</span> Skip;</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;  <span class="keywordflow">if</span> (Advice &amp;&amp; !ForceStop)</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1MLInlineAdvisor.html#aa64517193ce5ce41b3a4902fcece379e">getMandatoryAdviceImpl</a>(CB);</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160; </div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;  <span class="comment">// If this is a &quot;never inline&quot; case, there won&#39;t be any changes to internal</span></div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;  <span class="comment">// state we need to track, so we can just return the base InlineAdvice, which</span></div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;  <span class="comment">// will do nothing interesting.</span></div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;  <span class="comment">// Same if we are forced to stop - we don&#39;t track anymore.</span></div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;  <span class="keywordflow">return</span> std::make_unique&lt;InlineAdvice&gt;(<span class="keyword">this</span>, CB, <a class="code" href="classllvm_1_1InlineAdvisor.html#a14528ae0117f755bc5a74a7683c0722d">getCallerORE</a>(CB), Advice);</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;}</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160; </div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;std::unique_ptr&lt;MLInlineAdvice&gt;</div>
<div class="line"><a name="l00431"></a><span class="lineno"><a class="line" href="classllvm_1_1MLInlineAdvisor.html#aa64517193ce5ce41b3a4902fcece379e">  431</a></span>&#160;<a class="code" href="classllvm_1_1MLInlineAdvisor.html#aa64517193ce5ce41b3a4902fcece379e">MLInlineAdvisor::getMandatoryAdviceImpl</a>(<a class="code" href="classllvm_1_1CallBase.html">CallBase</a> &amp;CB) {</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;  <span class="keywordflow">return</span> std::make_unique&lt;MLInlineAdvice&gt;(<span class="keyword">this</span>, CB, <a class="code" href="classllvm_1_1InlineAdvisor.html#a14528ae0117f755bc5a74a7683c0722d">getCallerORE</a>(CB), <span class="keyword">true</span>);</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;}</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160; </div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;<span class="keywordtype">void</span> MLInlineAdvisor::print(<a class="code" href="classllvm_1_1raw__ostream.html">raw_ostream</a> &amp;<a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;  <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; <span class="stringliteral">&quot;[MLInlineAdvisor] Nodes: &quot;</span> &lt;&lt; NodeCount &lt;&lt; <span class="stringliteral">&quot; Edges: &quot;</span> &lt;&lt; EdgeCount</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;     &lt;&lt; <span class="stringliteral">&quot; EdgesOfLastSeenNodes: &quot;</span> &lt;&lt; EdgesOfLastSeenNodes &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;  <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; <span class="stringliteral">&quot;[MLInlineAdvisor] FPI:\n&quot;</span>;</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : FPICache) {</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.first-&gt;getName() &lt;&lt; <span class="stringliteral">&quot;:\n&quot;</span>;</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.second.print(<a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a>);</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;  }</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;  <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;}</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160; </div>
<div class="line"><a name="l00447"></a><span class="lineno"><a class="line" href="classllvm_1_1MLInlineAdvice.html#a413e5428e006570e79370b033a107dec">  447</a></span>&#160;<a class="code" href="classllvm_1_1MLInlineAdvice.html#a413e5428e006570e79370b033a107dec">MLInlineAdvice::MLInlineAdvice</a>(<a class="code" href="classllvm_1_1MLInlineAdvisor.html">MLInlineAdvisor</a> *Advisor, <a class="code" href="classllvm_1_1CallBase.html">CallBase</a> &amp;CB,</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;                               <a class="code" href="classllvm_1_1OptimizationRemarkEmitter.html">OptimizationRemarkEmitter</a> &amp;ORE,</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;                               <span class="keywordtype">bool</span> Recommendation)</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;    : <a class="code" href="classllvm_1_1InlineAdvice.html">InlineAdvice</a>(Advisor, CB, ORE, Recommendation),</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;      CallerIRSize(Advisor-&gt;isForcedToStop() ? 0 : Advisor-&gt;getIRSize(*Caller)),</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;      CalleeIRSize(Advisor-&gt;isForcedToStop() ? 0 : Advisor-&gt;getIRSize(*<a class="code" href="AMDGPULibCalls_8cpp.html#a537c835c34f0b44b6ad2696643754390">Callee</a>)),</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;      CallerAndCalleeEdges(Advisor-&gt;isForcedToStop()</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;                               ? 0</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;                               : (Advisor-&gt;getLocalCalls(*Caller) +</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;                                  Advisor-&gt;getLocalCalls(*<a class="code" href="AMDGPULibCalls_8cpp.html#a537c835c34f0b44b6ad2696643754390">Callee</a>))),</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;      PreInlineCallerFPI(Advisor-&gt;getCachedFPI(*Caller)) {</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;  <span class="keywordflow">if</span> (Recommendation)</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;    FPU.emplace(<a class="code" href="classllvm_1_1InlineAdvice.html#a840ff172791c81e7277a6fcf89c91dbe">Advisor</a>-&gt;getCachedFPI(*<a class="code" href="classllvm_1_1MLInlineAdvice.html#a57f4e6c4a7e854d09fd11326982d608b">getCaller</a>()), CB);</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;}</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160; </div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;<span class="keywordtype">void</span> MLInlineAdvice::reportContextForRemark(</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;    <a class="code" href="classllvm_1_1DiagnosticInfoOptimizationBase.html">DiagnosticInfoOptimizationBase</a> &amp;<a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a7415ab9f2172c59a2ee7c7a02afa56a4">OR</a>) {</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;  <span class="keyword">using namespace </span>ore;</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;  <a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a7415ab9f2172c59a2ee7c7a02afa56a4">OR</a> &lt;&lt; <a class="code" href="namespacellvm_1_1ore.html#a8f5533240c6722d987a2443cba42019d">NV</a>(<span class="stringliteral">&quot;Callee&quot;</span>, <a class="code" href="classllvm_1_1InlineAdvice.html#a00ec8d01596f9885f6303a98fbc8197b">Callee</a>-&gt;<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>());</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> &lt; <a class="code" href="namespacellvm.html#a299d467a34db1328efc3b8279e1f435f">NumberOfFeatures</a>; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;    <a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a7415ab9f2172c59a2ee7c7a02afa56a4">OR</a> &lt;&lt; <a class="code" href="namespacellvm_1_1ore.html#a8f5533240c6722d987a2443cba42019d">NV</a>(<a class="code" href="namespacellvm.html#a8ac326bbf3910d5f456f0b3bbf8de06f">FeatureMap</a>[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>].<a class="code" href="SMEABIPass_8cpp.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>(),</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;             *getAdvisor()-&gt;getModelRunner().getTensor&lt;int64_t&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>));</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;  <a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a7415ab9f2172c59a2ee7c7a02afa56a4">OR</a> &lt;&lt; <a class="code" href="namespacellvm_1_1ore.html#a8f5533240c6722d987a2443cba42019d">NV</a>(<span class="stringliteral">&quot;ShouldInline&quot;</span>, <a class="code" href="classllvm_1_1InlineAdvice.html#ad7abcbeaf6e8ebe6acac592b6cdaaad0">isInliningRecommended</a>());</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;}</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160; </div>
<div class="line"><a name="l00472"></a><span class="lineno"><a class="line" href="classllvm_1_1MLInlineAdvice.html#a19a31f34d91bfcdfa8c16f9a16079461">  472</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1MLInlineAdvice.html#a19a31f34d91bfcdfa8c16f9a16079461">MLInlineAdvice::updateCachedCallerFPI</a>(<a class="code" href="classllvm_1_1AnalysisManager.html">FunctionAnalysisManager</a> &amp;<a class="code" href="PassBuilderBindings_8cpp.html#a83c7e5ca51099e4efa895791a02fb0ed">FAM</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;  FPU-&gt;finish(<a class="code" href="PassBuilderBindings_8cpp.html#a83c7e5ca51099e4efa895791a02fb0ed">FAM</a>);</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;}</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160; </div>
<div class="line"><a name="l00476"></a><span class="lineno"><a class="line" href="classllvm_1_1MLInlineAdvice.html#a79fede4389dbc2b630710e3c09787a20">  476</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1MLInlineAdvice.html#a79fede4389dbc2b630710e3c09787a20">MLInlineAdvice::recordInliningImpl</a>() {</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;  <a class="code" href="classllvm_1_1InlineAdvice.html#a52090ce3aedce0b4004ca443c193b110">ORE</a>.<a class="code" href="classllvm_1_1OptimizationRemarkEmitter.html#aae6a98aea85aa3af87357cc5448db499">emit</a>([&amp;]() {</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;    <a class="code" href="classllvm_1_1OptimizationRemark.html">OptimizationRemark</a> R(<a class="code" href="MLInlineAdvisor_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">DEBUG_TYPE</a>, <span class="stringliteral">&quot;InliningSuccess&quot;</span>, <a class="code" href="classllvm_1_1InlineAdvice.html#aadc3866d7b0ecd242180fb85d3b0e748">DLoc</a>, <a class="code" href="classllvm_1_1InlineAdvice.html#a314b23a57d33b1ca800c2a273b7116ff">Block</a>);</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;    reportContextForRemark(R);</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;    <span class="keywordflow">return</span> R;</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;  });</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;  getAdvisor()-&gt;<a class="code" href="classllvm_1_1MLInlineAdvisor.html#a8116ffdfb54f7d195eb185c8bf7c060c">onSuccessfulInlining</a>(*<span class="keyword">this</span>, <span class="comment">/*CalleeWasDeleted*/</span> <span class="keyword">false</span>);</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;}</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160; </div>
<div class="line"><a name="l00485"></a><span class="lineno"><a class="line" href="classllvm_1_1MLInlineAdvice.html#af08e89bee7499bc47dbc39d981c5c436">  485</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1MLInlineAdvice.html#af08e89bee7499bc47dbc39d981c5c436">MLInlineAdvice::recordInliningWithCalleeDeletedImpl</a>() {</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;  <a class="code" href="classllvm_1_1InlineAdvice.html#a52090ce3aedce0b4004ca443c193b110">ORE</a>.<a class="code" href="classllvm_1_1OptimizationRemarkEmitter.html#aae6a98aea85aa3af87357cc5448db499">emit</a>([&amp;]() {</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;    <a class="code" href="classllvm_1_1OptimizationRemark.html">OptimizationRemark</a> R(<a class="code" href="MLInlineAdvisor_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">DEBUG_TYPE</a>, <span class="stringliteral">&quot;InliningSuccessWithCalleeDeleted&quot;</span>, <a class="code" href="classllvm_1_1InlineAdvice.html#aadc3866d7b0ecd242180fb85d3b0e748">DLoc</a>,</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;                         <a class="code" href="classllvm_1_1InlineAdvice.html#a314b23a57d33b1ca800c2a273b7116ff">Block</a>);</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;    reportContextForRemark(R);</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;    <span class="keywordflow">return</span> R;</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;  });</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;  getAdvisor()-&gt;<a class="code" href="classllvm_1_1MLInlineAdvisor.html#a8116ffdfb54f7d195eb185c8bf7c060c">onSuccessfulInlining</a>(*<span class="keyword">this</span>, <span class="comment">/*CalleeWasDeleted*/</span> <span class="keyword">true</span>);</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;}</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160; </div>
<div class="line"><a name="l00495"></a><span class="lineno"><a class="line" href="classllvm_1_1MLInlineAdvice.html#ac725e56738dcc1fc8de94a7554491456">  495</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1MLInlineAdvice.html#ac725e56738dcc1fc8de94a7554491456">MLInlineAdvice::recordUnsuccessfulInliningImpl</a>(</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1InlineResult.html">InlineResult</a> &amp;Result) {</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;  getAdvisor()-&gt;<a class="code" href="classllvm_1_1MLInlineAdvisor.html#a3b7f1071fac3720a2f1d4bd7da91625d">getCachedFPI</a>(*<a class="code" href="classllvm_1_1InlineAdvice.html#a078183205dd7f49738ba34f1586e9620">Caller</a>) = PreInlineCallerFPI;</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;  <a class="code" href="classllvm_1_1InlineAdvice.html#a52090ce3aedce0b4004ca443c193b110">ORE</a>.<a class="code" href="classllvm_1_1OptimizationRemarkEmitter.html#aae6a98aea85aa3af87357cc5448db499">emit</a>([&amp;]() {</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;    <a class="code" href="classllvm_1_1OptimizationRemarkMissed.html">OptimizationRemarkMissed</a> R(<a class="code" href="MLInlineAdvisor_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">DEBUG_TYPE</a>, <span class="stringliteral">&quot;InliningAttemptedAndUnsuccessful&quot;</span>,</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;                               <a class="code" href="classllvm_1_1InlineAdvice.html#aadc3866d7b0ecd242180fb85d3b0e748">DLoc</a>, <a class="code" href="classllvm_1_1InlineAdvice.html#a314b23a57d33b1ca800c2a273b7116ff">Block</a>);</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;    reportContextForRemark(R);</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    <span class="keywordflow">return</span> R;</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;  });</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;}</div>
<div class="line"><a name="l00505"></a><span class="lineno"><a class="line" href="classllvm_1_1MLInlineAdvice.html#afab4dde8e888e2564c2108a9c149f12d">  505</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1MLInlineAdvice.html#afab4dde8e888e2564c2108a9c149f12d">MLInlineAdvice::recordUnattemptedInliningImpl</a>() {</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!FPU);</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;  <a class="code" href="classllvm_1_1InlineAdvice.html#a52090ce3aedce0b4004ca443c193b110">ORE</a>.<a class="code" href="classllvm_1_1OptimizationRemarkEmitter.html#aae6a98aea85aa3af87357cc5448db499">emit</a>([&amp;]() {</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;    <a class="code" href="classllvm_1_1OptimizationRemarkMissed.html">OptimizationRemarkMissed</a> R(<a class="code" href="MLInlineAdvisor_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">DEBUG_TYPE</a>, <span class="stringliteral">&quot;IniningNotAttempted&quot;</span>, <a class="code" href="classllvm_1_1InlineAdvice.html#aadc3866d7b0ecd242180fb85d3b0e748">DLoc</a>, <a class="code" href="classllvm_1_1InlineAdvice.html#a314b23a57d33b1ca800c2a273b7116ff">Block</a>);</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;    reportContextForRemark(R);</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;    <span class="keywordflow">return</span> R;</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;  });</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;}</div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="aclassllvm_1_1PreservedAnalyses_html"><div class="ttname"><a href="classllvm_1_1PreservedAnalyses.html">llvm::PreservedAnalyses</a></div><div class="ttdoc">A set of analyses that are preserved following a run of a transformation pass.</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00152">PassManager.h:152</a></div></div>
<div class="ttc" id="aMLInlineAdvisor_8cpp_html_a747ab7fb8a109ac4fae2950cffa8a034"><div class="ttname"><a href="MLInlineAdvisor_8cpp.html#a747ab7fb8a109ac4fae2950cffa8a034">SizeIncreaseThreshold</a></div><div class="ttdeci">static cl::opt&lt; float &gt; SizeIncreaseThreshold(&quot;ml-advisor-size-increase-threshold&quot;, cl::Hidden, cl::desc(&quot;Maximum factor by which expected native size may increase before &quot; &quot;blocking any further inlining.&quot;), cl::init(2.0))</div></div>
<div class="ttc" id="aAssumptionCache_8h_html"><div class="ttname"><a href="AssumptionCache_8h.html">AssumptionCache.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetIRAnalysis_html"><div class="ttname"><a href="classllvm_1_1TargetIRAnalysis.html">llvm::TargetIRAnalysis</a></div><div class="ttdoc">Analysis pass providing the TargetTransformInfo.</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l02626">TargetTransformInfo.h:2626</a></div></div>
<div class="ttc" id="aInlineModelFeatureMaps_8h_html_a148e00f4bc4841ecfe54c4134b8f20bd"><div class="ttname"><a href="InlineModelFeatureMaps_8h.html#a148e00f4bc4841ecfe54c4134b8f20bd">INLINE_COST_FEATURE_ITERATOR</a></div><div class="ttdeci">#define INLINE_COST_FEATURE_ITERATOR(M)</div><div class="ttdef"><b>Definition:</b> <a href="InlineModelFeatureMaps_8h_source.html#l00024">InlineModelFeatureMaps.h:24</a></div></div>
<div class="ttc" id="aclassllvm_1_1OptimizationRemarkMissed_html"><div class="ttname"><a href="classllvm_1_1OptimizationRemarkMissed.html">llvm::OptimizationRemarkMissed</a></div><div class="ttdoc">Diagnostic information for missed-optimization remarks.</div><div class="ttdef"><b>Definition:</b> <a href="DiagnosticInfo_8h_source.html#l00734">DiagnosticInfo.h:734</a></div></div>
<div class="ttc" id="anamespacellvm_html"><div class="ttname"><a href="namespacellvm.html">llvm</a></div><div class="ttdoc">This is an optimization pass for GlobalISel generic memory operations.</div><div class="ttdef"><b>Definition:</b> <a href="AddressRanges_8h_source.html#l00018">AddressRanges.h:18</a></div></div>
<div class="ttc" id="alib_2Target_2X86_2README_8txt_html_ac88fe1d3a61b056a4f64fbbb156a62ff"><div class="ttname"><a href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a></div><div class="ttdeci">We currently emits eax Perhaps this is what we really should generate is Is imull three or four cycles eax eax The current instruction priority is based on pattern complexity The former is more complex because it folds a load so the latter will not be emitted Perhaps we should use AddedComplexity to give LEA32r a higher priority We should always try to match LEA first since the LEA matching code does some estimate to determine whether the match is profitable if we care more about code then imull is better It s two bytes shorter than movl leal On a Pentium M</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2X86_2README_8txt_source.html#l00252">README.txt:252</a></div></div>
<div class="ttc" id="anamespacellvm_1_1ISD_html_a22ea9cec080dd5f4f47ba234c2f59110a7415ab9f2172c59a2ee7c7a02afa56a4"><div class="ttname"><a href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a7415ab9f2172c59a2ee7c7a02afa56a4">llvm::ISD::OR</a></div><div class="ttdeci">@ OR</div><div class="ttdef"><b>Definition:</b> <a href="ISDOpcodes_8h_source.html#l00667">ISDOpcodes.h:667</a></div></div>
<div class="ttc" id="anamespacellvm_html_a087651f2fd9aa01317b1380f4fb896a2"><div class="ttname"><a href="namespacellvm.html#a087651f2fd9aa01317b1380f4fb896a2">llvm::inlineCostFeatureToMlFeature</a></div><div class="ttdeci">constexpr FeatureIndex inlineCostFeatureToMlFeature(InlineCostFeatureIndex Feature)</div><div class="ttdef"><b>Definition:</b> <a href="InlineModelFeatureMaps_8h_source.html#l00125">InlineModelFeatureMaps.h:125</a></div></div>
<div class="ttc" id="aclassllvm_1_1MLInlineAdvisor_html_abdcccbb9d3934f1685accebaf51f5aef"><div class="ttname"><a href="classllvm_1_1MLInlineAdvisor.html#abdcccbb9d3934f1685accebaf51f5aef">llvm::MLInlineAdvisor::getLocalCalls</a></div><div class="ttdeci">int64_t getLocalCalls(Function &amp;F)</div><div class="ttdef"><b>Definition:</b> <a href="MLInlineAdvisor_8cpp_source.html#l00241">MLInlineAdvisor.cpp:241</a></div></div>
<div class="ttc" id="aclassllvm_1_1InlineAdvisor_html_ab63e90899ab78f60bf47256071c0a48b"><div class="ttname"><a href="classllvm_1_1InlineAdvisor.html#ab63e90899ab78f60bf47256071c0a48b">llvm::InlineAdvisor::M</a></div><div class="ttdeci">Module &amp; M</div><div class="ttdef"><b>Definition:</b> <a href="InlineAdvisor_8h_source.html#l00210">InlineAdvisor.h:210</a></div></div>
<div class="ttc" id="aSCCIterator_8h_html"><div class="ttname"><a href="SCCIterator_8h.html">SCCIterator.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisManager_html_ab9d3d5412c20747fd0110a046604f09a"><div class="ttname"><a href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">llvm::AnalysisManager::getResult</a></div><div class="ttdeci">PassT::Result &amp; getResult(IRUnitT &amp;IR, ExtraArgTs... ExtraArgs)</div><div class="ttdoc">Get the result of an analysis pass for a given IR unit.</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00774">PassManager.h:774</a></div></div>
<div class="ttc" id="aInstIterator_8h_html"><div class="ttname"><a href="InstIterator_8h.html">InstIterator.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html"><div class="ttname"><a href="classllvm_1_1Function.html">llvm::Function</a></div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00059">Function.h:59</a></div></div>
<div class="ttc" id="aEvaluator_8cpp_html_a0b9941c7c78b50f1f303fa0c6403b199"><div class="ttname"><a href="Evaluator_8cpp.html#a0b9941c7c78b50f1f303fa0c6403b199">getFunction</a></div><div class="ttdeci">static Function * getFunction(Constant *C)</div><div class="ttdef"><b>Definition:</b> <a href="Evaluator_8cpp_source.html#l00236">Evaluator.cpp:236</a></div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisManager_html_a64b2a209a16bcd41375b5cae12690eaa"><div class="ttname"><a href="classllvm_1_1AnalysisManager.html#a64b2a209a16bcd41375b5cae12690eaa">llvm::AnalysisManager::invalidate</a></div><div class="ttdeci">void invalidate(IRUnitT &amp;IR, const PreservedAnalyses &amp;PA)</div><div class="ttdoc">Invalidate cached analyses for an IR unit.</div><div class="ttdef"><b>Definition:</b> <a href="PassManagerImpl_8h_source.html#l00089">PassManagerImpl.h:89</a></div></div>
<div class="ttc" id="aMLInlineAdvisor_8cpp_html_aefe5a4e2c29d60f8c84f64c633936588"><div class="ttname"><a href="MLInlineAdvisor_8cpp.html#aefe5a4e2c29d60f8c84f64c633936588">InteractiveChannelBaseName</a></div><div class="ttdeci">static cl::opt&lt; std::string &gt; InteractiveChannelBaseName(&quot;inliner-interactive-channel-base&quot;, cl::Hidden, cl::desc(&quot;Base file path for the interactive mode. The incoming filename should &quot; &quot;have the name &lt;inliner-interactive-channel-base&gt;.in, while the &quot; &quot;outgoing name should be &lt;inliner-interactive-channel-base&gt;.out&quot;))</div></div>
<div class="ttc" id="aMLModelRunner_8h_html"><div class="ttname"><a href="MLModelRunner_8h.html">MLModelRunner.h</a></div></div>
<div class="ttc" id="aMLInlineAdvisor_8cpp_html_a57923de5737d94a3d7b4f3bcb58c9405"><div class="ttname"><a href="MLInlineAdvisor_8cpp.html#a57923de5737d94a3d7b4f3bcb58c9405">getInlinableCS</a></div><div class="ttdeci">CallBase * getInlinableCS(Instruction &amp;I)</div><div class="ttdef"><b>Definition:</b> <a href="MLInlineAdvisor_8cpp_source.html#l00101">MLInlineAdvisor.cpp:101</a></div></div>
<div class="ttc" id="aSMEABIPass_8cpp_html_a8f8f80d37794cde9472343e4487ba3eb"><div class="ttname"><a href="SMEABIPass_8cpp.html#a8f8f80d37794cde9472343e4487ba3eb">name</a></div><div class="ttdeci">static const char * name</div><div class="ttdef"><b>Definition:</b> <a href="SMEABIPass_8cpp_source.html#l00049">SMEABIPass.cpp:49</a></div></div>
<div class="ttc" id="aclassllvm_1_1InlineAdvice_html_a078183205dd7f49738ba34f1586e9620"><div class="ttname"><a href="classllvm_1_1InlineAdvice.html#a078183205dd7f49738ba34f1586e9620">llvm::InlineAdvice::Caller</a></div><div class="ttdeci">Function *const Caller</div><div class="ttdoc">Caller and Callee are pre-inlining.</div><div class="ttdef"><b>Definition:</b> <a href="InlineAdvisor_8h_source.html#l00124">InlineAdvisor.h:124</a></div></div>
<div class="ttc" id="aInteractiveModelRunner_8h_html"><div class="ttname"><a href="InteractiveModelRunner_8h.html">InteractiveModelRunner.h</a></div></div>
<div class="ttc" id="aOptimizationRemarkEmitter_8h_html"><div class="ttname"><a href="OptimizationRemarkEmitter_8h.html">OptimizationRemarkEmitter.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallGraph_html"><div class="ttname"><a href="classllvm_1_1CallGraph.html">llvm::CallGraph</a></div><div class="ttdoc">The basic data container for the call graph of a Module of IR.</div><div class="ttdef"><b>Definition:</b> <a href="CallGraph_8h_source.html#l00072">CallGraph.h:72</a></div></div>
<div class="ttc" id="aclassllvm_1_1PreservedAnalyses_html_ac8a842a601c470fa22db443ac34d0a67"><div class="ttname"><a href="classllvm_1_1PreservedAnalyses.html#ac8a842a601c470fa22db443ac34d0a67">llvm::PreservedAnalyses::abandon</a></div><div class="ttdeci">void abandon()</div><div class="ttdoc">Mark an analysis as abandoned.</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00206">PassManager.h:206</a></div></div>
<div class="ttc" id="aPassBuilderBindings_8cpp_html_a83c7e5ca51099e4efa895791a02fb0ed"><div class="ttname"><a href="PassBuilderBindings_8cpp.html#a83c7e5ca51099e4efa895791a02fb0ed">FAM</a></div><div class="ttdeci">FunctionAnalysisManager FAM</div><div class="ttdef"><b>Definition:</b> <a href="PassBuilderBindings_8cpp_source.html#l00059">PassBuilderBindings.cpp:59</a></div></div>
<div class="ttc" id="anamespacellvm_1_1cl_html_a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6"><div class="ttname"><a href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">llvm::cl::Hidden</a></div><div class="ttdeci">@ Hidden</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00138">CommandLine.h:138</a></div></div>
<div class="ttc" id="aclassllvm_1_1LazyCallGraph_html_af92b067e8f6295042dc6544e1df18825"><div class="ttname"><a href="classllvm_1_1LazyCallGraph.html#af92b067e8f6295042dc6544e1df18825">llvm::LazyCallGraph::lookup</a></div><div class="ttdeci">Node * lookup(const Function &amp;F) const</div><div class="ttdoc">Lookup a function in the graph which has already been scanned and added.</div><div class="ttdef"><b>Definition:</b> <a href="LazyCallGraph_8h_source.html#l00973">LazyCallGraph.h:973</a></div></div>
<div class="ttc" id="aclassllvm_1_1InlineAdvisor_html_a6659e9fe3450059147033d140cd8496ea68eec46437c384d8dad18d5464ebc35c"><div class="ttname"><a href="classllvm_1_1InlineAdvisor.html#a6659e9fe3450059147033d140cd8496ea68eec46437c384d8dad18d5464ebc35c">llvm::InlineAdvisor::MandatoryInliningKind::Always</a></div><div class="ttdeci">@ Always</div></div>
<div class="ttc" id="aMLInlineAdvisor_8cpp_html_a0eedfcd61840c8918b5f499d43e531fb"><div class="ttname"><a href="MLInlineAdvisor_8cpp.html#a0eedfcd61840c8918b5f499d43e531fb">POPULATE_NAMES</a></div><div class="ttdeci">#define POPULATE_NAMES(_, NAME)</div></div>
<div class="ttc" id="anamespacellvm_1_1ore_html_a8f5533240c6722d987a2443cba42019d"><div class="ttname"><a href="namespacellvm_1_1ore.html#a8f5533240c6722d987a2443cba42019d">llvm::ore::NV</a></div><div class="ttdeci">DiagnosticInfoOptimizationBase::Argument NV</div><div class="ttdef"><b>Definition:</b> <a href="OptimizationRemarkEmitter_8h_source.html#l00136">OptimizationRemarkEmitter.h:136</a></div></div>
<div class="ttc" id="aclassllvm_1_1InlineAdvisor_html_a6659e9fe3450059147033d140cd8496ea6e7b34fa59e1bd229b207892956dc41c"><div class="ttname"><a href="classllvm_1_1InlineAdvisor.html#a6659e9fe3450059147033d140cd8496ea6e7b34fa59e1bd229b207892956dc41c">llvm::InlineAdvisor::MandatoryInliningKind::Never</a></div><div class="ttdeci">@ Never</div></div>
<div class="ttc" id="aclassllvm_1_1MLInlineAdvisor_html_a33dfb3ef81bda64ebcbc766046c701c6"><div class="ttname"><a href="classllvm_1_1MLInlineAdvisor.html#a33dfb3ef81bda64ebcbc766046c701c6">llvm::MLInlineAdvisor::ModelRunner</a></div><div class="ttdeci">std::unique_ptr&lt; MLModelRunner &gt; ModelRunner</div><div class="ttdef"><b>Definition:</b> <a href="MLInlineAdvisor_8h_source.html#l00065">MLInlineAdvisor.h:65</a></div></div>
<div class="ttc" id="anamespacellvm_html_ab4d4bc901fedd8857f647dcc2c0d71de"><div class="ttname"><a href="namespacellvm.html#ab4d4bc901fedd8857f647dcc2c0d71de">llvm::max</a></div><div class="ttdeci">Expected&lt; ExpressionValue &gt; max(const ExpressionValue &amp;Lhs, const ExpressionValue &amp;Rhs)</div><div class="ttdef"><b>Definition:</b> <a href="FileCheck_8cpp_source.html#l00337">FileCheck.cpp:337</a></div></div>
<div class="ttc" id="anamespacellvm_1_1MipsISD_html_a422daf9aa810935178671306b651d69ba366e1eac31eeb1a1892d62ccfc0c8cf8"><div class="ttname"><a href="namespacellvm_1_1MipsISD.html#a422daf9aa810935178671306b651d69ba366e1eac31eeb1a1892d62ccfc0c8cf8">llvm::MipsISD::Ret</a></div><div class="ttdeci">@ Ret</div><div class="ttdef"><b>Definition:</b> <a href="MipsISelLowering_8h_source.html#l00119">MipsISelLowering.h:119</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallBase_html_a4fb513d744ca72275932b2c7003f16f6"><div class="ttname"><a href="classllvm_1_1CallBase.html#a4fb513d744ca72275932b2c7003f16f6">llvm::CallBase::arg_begin</a></div><div class="ttdeci">User::op_iterator arg_begin()</div><div class="ttdoc">Return the iterator pointing to the beginning of the argument list.</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l01326">InstrTypes.h:1326</a></div></div>
<div class="ttc" id="aclassllvm_1_1MLInlineAdvice_html_a6330d9efb13139a5058e3ee2d240c81d"><div class="ttname"><a href="classllvm_1_1MLInlineAdvice.html#a6330d9efb13139a5058e3ee2d240c81d">llvm::MLInlineAdvice::CalleeIRSize</a></div><div class="ttdeci">const int64_t CalleeIRSize</div><div class="ttdef"><b>Definition:</b> <a href="MLInlineAdvisor_8h_source.html#l00109">MLInlineAdvisor.h:109</a></div></div>
<div class="ttc" id="aclassllvm_1_1DiagnosticInfoOptimizationBase_html"><div class="ttname"><a href="classllvm_1_1DiagnosticInfoOptimizationBase.html">llvm::DiagnosticInfoOptimizationBase</a></div><div class="ttdoc">Common features for diagnostics dealing with optimization remarks that are used by both IR and MIR pa...</div><div class="ttdef"><b>Definition:</b> <a href="DiagnosticInfo_8h_source.html#l00413">DiagnosticInfo.h:413</a></div></div>
<div class="ttc" id="anamespacellvm_html_aa22d2826f4a9ac07e8c53cad3f0178a6"><div class="ttname"><a href="namespacellvm.html#aa22d2826f4a9ac07e8c53cad3f0178a6">llvm::InlineDecisionSpec</a></div><div class="ttdeci">const TensorSpec InlineDecisionSpec</div><div class="ttdef"><b>Definition:</b> <a href="MLInlineAdvisor_8cpp_source.html#l00096">MLInlineAdvisor.cpp:96</a></div></div>
<div class="ttc" id="aclassllvm_1_1MLInlineAdvice_html_a79fede4389dbc2b630710e3c09787a20"><div class="ttname"><a href="classllvm_1_1MLInlineAdvice.html#a79fede4389dbc2b630710e3c09787a20">llvm::MLInlineAdvice::recordInliningImpl</a></div><div class="ttdeci">void recordInliningImpl() override</div><div class="ttdef"><b>Definition:</b> <a href="MLInlineAdvisor_8cpp_source.html#l00476">MLInlineAdvisor.cpp:476</a></div></div>
<div class="ttc" id="aMD5_8cpp_html_a96d73bbd7af15cb1fc38c3f4a3bd82e9"><div class="ttname"><a href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a></div><div class="ttdeci">#define F(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00055">MD5.cpp:55</a></div></div>
<div class="ttc" id="aclassllvm_1_1MLInlineAdvice_html_ad1612ebc252d6070cdac48dff8468158"><div class="ttname"><a href="classllvm_1_1MLInlineAdvice.html#ad1612ebc252d6070cdac48dff8468158">llvm::MLInlineAdvice::getCallee</a></div><div class="ttdeci">Function * getCallee() const</div><div class="ttdef"><b>Definition:</b> <a href="MLInlineAdvisor_8h_source.html#l00106">MLInlineAdvisor.h:106</a></div></div>
<div class="ttc" id="aclassllvm_1_1InlineAdvisor_html_a14528ae0117f755bc5a74a7683c0722d"><div class="ttname"><a href="classllvm_1_1InlineAdvisor.html#a14528ae0117f755bc5a74a7683c0722d">llvm::InlineAdvisor::getCallerORE</a></div><div class="ttdeci">OptimizationRemarkEmitter &amp; getCallerORE(CallBase &amp;CB)</div><div class="ttdef"><b>Definition:</b> <a href="InlineAdvisor_8cpp_source.html#l00623">InlineAdvisor.cpp:623</a></div></div>
<div class="ttc" id="aCommandLine_8h_html"><div class="ttname"><a href="CommandLine_8h.html">CommandLine.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1LazyCallGraph_1_1SCC_html"><div class="ttname"><a href="classllvm_1_1LazyCallGraph_1_1SCC.html">llvm::LazyCallGraph::SCC</a></div><div class="ttdoc">An SCC of the call graph.</div><div class="ttdef"><b>Definition:</b> <a href="LazyCallGraph_8h_source.html#l00419">LazyCallGraph.h:419</a></div></div>
<div class="ttc" id="anamespacellvm_html_a74754af06fcdbb71b2ddbfaa75ed09c5"><div class="ttname"><a href="namespacellvm.html#a74754af06fcdbb71b2ddbfaa75ed09c5">llvm::DecisionName</a></div><div class="ttdeci">const char *const DecisionName</div><div class="ttdef"><b>Definition:</b> <a href="MLInlineAdvisor_8cpp_source.html#l00095">MLInlineAdvisor.cpp:95</a></div></div>
<div class="ttc" id="aclassllvm_1_1MLInlineAdvice_html_af08e89bee7499bc47dbc39d981c5c436"><div class="ttname"><a href="classllvm_1_1MLInlineAdvice.html#af08e89bee7499bc47dbc39d981c5c436">llvm::MLInlineAdvice::recordInliningWithCalleeDeletedImpl</a></div><div class="ttdeci">void recordInliningWithCalleeDeletedImpl() override</div><div class="ttdef"><b>Definition:</b> <a href="MLInlineAdvisor_8cpp_source.html#l00485">MLInlineAdvisor.cpp:485</a></div></div>
<div class="ttc" id="aBuiltinGCs_8cpp_html_a6742d2e0a668baf1196ec69e158d5f15"><div class="ttname"><a href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a></div><div class="ttdeci">static GCRegistry::Add&lt; CoreCLRGC &gt; E(&quot;coreclr&quot;, &quot;CoreCLR-compatible GC&quot;)</div></div>
<div class="ttc" id="aclassllvm_1_1InlineAdvice_html_a52090ce3aedce0b4004ca443c193b110"><div class="ttname"><a href="classllvm_1_1InlineAdvice.html#a52090ce3aedce0b4004ca443c193b110">llvm::InlineAdvice::ORE</a></div><div class="ttdeci">OptimizationRemarkEmitter &amp; ORE</div><div class="ttdef"><b>Definition:</b> <a href="InlineAdvisor_8h_source.html#l00132">InlineAdvisor.h:132</a></div></div>
<div class="ttc" id="anamespacellvm_html_a31965ae9b8c0a53197f6a2dcc9205bd7"><div class="ttname"><a href="namespacellvm.html#a31965ae9b8c0a53197f6a2dcc9205bd7">llvm::getInliningCostFeatures</a></div><div class="ttdeci">std::optional&lt; InlineCostFeatures &gt; getInliningCostFeatures(CallBase &amp;Call, TargetTransformInfo &amp;CalleeTTI, function_ref&lt; AssumptionCache &amp;(Function &amp;)&gt; GetAssumptionCache, function_ref&lt; BlockFrequencyInfo &amp;(Function &amp;)&gt; GetBFI=nullptr, ProfileSummaryInfo *PSI=nullptr, OptimizationRemarkEmitter *ORE=nullptr)</div><div class="ttdoc">Get the expanded cost features.</div><div class="ttdef"><b>Definition:</b> <a href="InlineCost_8cpp_source.html#l02873">InlineCost.cpp:2873</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallBase_html_a83b8c9e572130f403445c0b0f69b837c"><div class="ttname"><a href="classllvm_1_1CallBase.html#a83b8c9e572130f403445c0b0f69b837c">llvm::CallBase::getCalledFunction</a></div><div class="ttdeci">Function * getCalledFunction() const</div><div class="ttdoc">Returns the function called, or null if this is an indirect function invocation or the function signa...</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l01406">InstrTypes.h:1406</a></div></div>
<div class="ttc" id="aPassBuilderBindings_8cpp_html_a85bddafa659a93a7a67c9094648259be"><div class="ttname"><a href="PassBuilderBindings_8cpp.html#a85bddafa659a93a7a67c9094648259be">MAM</a></div><div class="ttdeci">ModuleAnalysisManager MAM</div><div class="ttdef"><b>Definition:</b> <a href="PassBuilderBindings_8cpp_source.html#l00061">PassBuilderBindings.cpp:61</a></div></div>
<div class="ttc" id="aclassllvm_1_1MLInlineAdvice_html_ac725e56738dcc1fc8de94a7554491456"><div class="ttname"><a href="classllvm_1_1MLInlineAdvice.html#ac725e56738dcc1fc8de94a7554491456">llvm::MLInlineAdvice::recordUnsuccessfulInliningImpl</a></div><div class="ttdeci">void recordUnsuccessfulInliningImpl(const InlineResult &amp;Result) override</div><div class="ttdef"><b>Definition:</b> <a href="MLInlineAdvisor_8cpp_source.html#l00495">MLInlineAdvisor.cpp:495</a></div></div>
<div class="ttc" id="anamespacellvm_html_ac000e0ebfe8c07d74ff922790f150c10"><div class="ttname"><a href="namespacellvm.html#ac000e0ebfe8c07d74ff922790f150c10">llvm::getReleaseModeAdvisor</a></div><div class="ttdeci">std::unique_ptr&lt; InlineAdvisor &gt; getReleaseModeAdvisor(Module &amp;M, ModuleAnalysisManager &amp;MAM)</div><div class="ttdef"><b>Definition:</b> <a href="MLInlineAdvisor_8cpp_source.html#l00051">MLInlineAdvisor.cpp:51</a></div></div>
<div class="ttc" id="anamespacellvm_html_a7ef78f96e07a124af3b346d8df9010cc"><div class="ttname"><a href="namespacellvm.html#a7ef78f96e07a124af3b346d8df9010cc">llvm::InlineCostFeatureIndex</a></div><div class="ttdeci">InlineCostFeatureIndex</div><div class="ttdef"><b>Definition:</b> <a href="InlineModelFeatureMaps_8h_source.html#l00051">InlineModelFeatureMaps.h:51</a></div></div>
<div class="ttc" id="aMLInlineAdvisor_8cpp_html_a8349122852680cf71ac1aa1b24334272"><div class="ttname"><a href="MLInlineAdvisor_8cpp.html#a8349122852680cf71ac1aa1b24334272">KeepFPICache</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; KeepFPICache(&quot;ml-advisor-keep-fpi-cache&quot;, cl::Hidden, cl::desc(&quot;For test - keep the ML Inline advisor's FunctionPropertiesInfo cache&quot;), cl::init(false))</div></div>
<div class="ttc" id="anamespacellvm_html_a09f08b747caff737ade6a58ada02d2bf"><div class="ttname"><a href="namespacellvm.html#a09f08b747caff737ade6a58ada02d2bf">llvm::DefaultDecisionName</a></div><div class="ttdeci">const char *const DefaultDecisionName</div><div class="ttdef"><b>Definition:</b> <a href="MLInlineAdvisor_8cpp_source.html#l00098">MLInlineAdvisor.cpp:98</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html"><div class="ttname"><a href="classllvm_1_1Instruction.html">llvm::Instruction</a></div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00041">Instruction.h:41</a></div></div>
<div class="ttc" id="aclassllvm_1_1raw__ostream_html"><div class="ttname"><a href="classllvm_1_1raw__ostream.html">llvm::raw_ostream</a></div><div class="ttdoc">This class implements an extremely fast bulk output stream that can only output to a stream.</div><div class="ttdef"><b>Definition:</b> <a href="raw__ostream_8h_source.html#l00052">raw_ostream.h:52</a></div></div>
<div class="ttc" id="aclassllvm_1_1MLInlineAdvice_html_a57f4e6c4a7e854d09fd11326982d608b"><div class="ttname"><a href="classllvm_1_1MLInlineAdvice.html#a57f4e6c4a7e854d09fd11326982d608b">llvm::MLInlineAdvice::getCaller</a></div><div class="ttdeci">Function * getCaller() const</div><div class="ttdef"><b>Definition:</b> <a href="MLInlineAdvisor_8h_source.html#l00105">MLInlineAdvisor.h:105</a></div></div>
<div class="ttc" id="aLazyCallGraph_8h_html"><div class="ttname"><a href="LazyCallGraph_8h.html">LazyCallGraph.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallBase_html_afac5b39bcbb90d660f83d9b4bd8c6d95"><div class="ttname"><a href="classllvm_1_1CallBase.html#afac5b39bcbb90d660f83d9b4bd8c6d95">llvm::CallBase::getCaller</a></div><div class="ttdeci">Function * getCaller()</div><div class="ttdoc">Helper to get the caller (the parent function).</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l00293">Instructions.cpp:293</a></div></div>
<div class="ttc" id="aLoopInfo_8h_html"><div class="ttname"><a href="LoopInfo_8h.html">LoopInfo.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1MLInlineAdvisor_html_aa64517193ce5ce41b3a4902fcece379e"><div class="ttname"><a href="classllvm_1_1MLInlineAdvisor.html#aa64517193ce5ce41b3a4902fcece379e">llvm::MLInlineAdvisor::getMandatoryAdviceImpl</a></div><div class="ttdeci">virtual std::unique_ptr&lt; MLInlineAdvice &gt; getMandatoryAdviceImpl(CallBase &amp;CB)</div><div class="ttdef"><b>Definition:</b> <a href="MLInlineAdvisor_8cpp_source.html#l00431">MLInlineAdvisor.cpp:431</a></div></div>
<div class="ttc" id="aclassllvm_1_1LazyCallGraph_html_a2e0002cac27faad0015b4fa7e5a3eb50"><div class="ttname"><a href="classllvm_1_1LazyCallGraph.html#a2e0002cac27faad0015b4fa7e5a3eb50">llvm::LazyCallGraph::get</a></div><div class="ttdeci">Node &amp; get(Function &amp;F)</div><div class="ttdoc">Get a graph node for a given function, scanning it to populate the graph data as necessary.</div><div class="ttdef"><b>Definition:</b> <a href="LazyCallGraph_8h_source.html#l00994">LazyCallGraph.h:994</a></div></div>
<div class="ttc" id="anamespacellvm_html_a71882a8257c58a4d9401db39622871a6"><div class="ttname"><a href="namespacellvm.html#a71882a8257c58a4d9401db39622871a6">llvm::scc_begin</a></div><div class="ttdeci">scc_iterator&lt; T &gt; scc_begin(const T &amp;G)</div><div class="ttdoc">Construct the begin iterator for a deduced graph type T.</div><div class="ttdef"><b>Definition:</b> <a href="SCCIterator_8h_source.html#l00232">SCCIterator.h:232</a></div></div>
<div class="ttc" id="aclassllvm_1_1InlineAdvice_html"><div class="ttname"><a href="classllvm_1_1InlineAdvice.html">llvm::InlineAdvice</a></div><div class="ttdoc">Capture state between an inlining decision having had been made, and its impact being observable.</div><div class="ttdef"><b>Definition:</b> <a href="InlineAdvisor_8h_source.html#l00076">InlineAdvisor.h:76</a></div></div>
<div class="ttc" id="aclassllvm_1_1cl_1_1opt_html"><div class="ttname"><a href="classllvm_1_1cl_1_1opt.html">llvm::cl::opt</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l01410">CommandLine.h:1410</a></div></div>
<div class="ttc" id="anamespacellvm_html_a7e3e687ddfdcbacd404bcf17b917dd88"><div class="ttname"><a href="namespacellvm.html#a7e3e687ddfdcbacd404bcf17b917dd88">llvm::instructions</a></div><div class="ttdeci">inst_range instructions(Function *F)</div><div class="ttdef"><b>Definition:</b> <a href="InstIterator_8h_source.html#l00133">InstIterator.h:133</a></div></div>
<div class="ttc" id="aclassllvm_1_1MLInlineAdvisor_html_a1047d7ffced1000f34f54500346f3f7b"><div class="ttname"><a href="classllvm_1_1MLInlineAdvisor.html#a1047d7ffced1000f34f54500346f3f7b">llvm::MLInlineAdvisor::MLInlineAdvisor</a></div><div class="ttdeci">MLInlineAdvisor(Module &amp;M, ModuleAnalysisManager &amp;MAM, std::unique_ptr&lt; MLModelRunner &gt; ModelRunner)</div><div class="ttdef"><b>Definition:</b> <a href="MLInlineAdvisor_8cpp_source.html#l00111">MLInlineAdvisor.cpp:111</a></div></div>
<div class="ttc" id="aclassllvm_1_1NoopSavedModelImpl_html"><div class="ttname"><a href="classllvm_1_1NoopSavedModelImpl.html">llvm::NoopSavedModelImpl</a></div><div class="ttdoc">A mock class satisfying the interface expected by ReleaseModeModelRunner for its TGen parameter.</div><div class="ttdef"><b>Definition:</b> <a href="ReleaseModeModelRunner_8h_source.html#l00074">ReleaseModeModelRunner.h:74</a></div></div>
<div class="ttc" id="aclassllvm_1_1AssumptionAnalysis_html"><div class="ttname"><a href="classllvm_1_1AssumptionAnalysis.html">llvm::AssumptionAnalysis</a></div><div class="ttdoc">A function analysis which provides an AssumptionCache.</div><div class="ttdef"><b>Definition:</b> <a href="AssumptionCache_8h_source.html#l00173">AssumptionCache.h:173</a></div></div>
<div class="ttc" id="alib_2Target_2ARM_2README_8txt_html_ad3a99906764c35b2694ae90fa57744a5"><div class="ttname"><a href="lib_2Target_2ARM_2README_8txt.html#ad3a99906764c35b2694ae90fa57744a5">move</a></div><div class="ttdeci">compiles ldr LCPI1_0 ldr ldr mov lsr tst moveq r1 ldr LCPI1_1 and r0 bx lr It would be better to do something like to fold the shift into the conditional move</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2ARM_2README_8txt_source.html#l00546">README.txt:546</a></div></div>
<div class="ttc" id="aReleaseModeModelRunner_8h_html"><div class="ttname"><a href="ReleaseModeModelRunner_8h.html">ReleaseModeModelRunner.h</a></div></div>
<div class="ttc" id="aMD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00058">MD5.cpp:58</a></div></div>
<div class="ttc" id="aclassllvm_1_1InlineAdvice_html_a314b23a57d33b1ca800c2a273b7116ff"><div class="ttname"><a href="classllvm_1_1InlineAdvice.html#a314b23a57d33b1ca800c2a273b7116ff">llvm::InlineAdvice::Block</a></div><div class="ttdeci">const BasicBlock *const Block</div><div class="ttdef"><b>Definition:</b> <a href="InlineAdvisor_8h_source.html#l00131">InlineAdvisor.h:131</a></div></div>
<div class="ttc" id="anamespacellvm_1_1cl_html_a10a041239ae1870cfcc064bfaa79fb65"><div class="ttname"><a href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">llvm::cl::init</a></div><div class="ttdeci">initializer&lt; Ty &gt; init(const Ty &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00445">CommandLine.h:445</a></div></div>
<div class="ttc" id="aclassllvm_1_1MLInlineAdvisor_html_adca0f8d16629001e04b5f4d1cbae214b"><div class="ttname"><a href="classllvm_1_1MLInlineAdvisor.html#adca0f8d16629001e04b5f4d1cbae214b">llvm::MLInlineAdvisor::getMandatoryAdvice</a></div><div class="ttdeci">std::unique_ptr&lt; InlineAdvice &gt; getMandatoryAdvice(CallBase &amp;CB, bool Advice) override</div><div class="ttdef"><b>Definition:</b> <a href="MLInlineAdvisor_8cpp_source.html#l00415">MLInlineAdvisor.cpp:415</a></div></div>
<div class="ttc" id="aclassllvm_1_1MLInlineAdvice_html_ac2fa94d7c9401db9a42cee3a9e7a4416"><div class="ttname"><a href="classllvm_1_1MLInlineAdvice.html#ac2fa94d7c9401db9a42cee3a9e7a4416">llvm::MLInlineAdvice::CallerAndCalleeEdges</a></div><div class="ttdeci">const int64_t CallerAndCalleeEdges</div><div class="ttdef"><b>Definition:</b> <a href="MLInlineAdvisor_8h_source.html#l00110">MLInlineAdvisor.h:110</a></div></div>
<div class="ttc" id="aSILowerControlFlow_8cpp_html_a4868c5d81c5ccc98c47aeab6244346a0"><div class="ttname"><a href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a></div><div class="ttdeci">assert(ImpDefSCC.getReg()==AMDGPU::SCC &amp;&amp;ImpDefSCC.isDef())</div></div>
<div class="ttc" id="anamespacellvm_html_abfc9c7ecf70f66901e439f7c04ef3dbb"><div class="ttname"><a href="namespacellvm.html#abfc9c7ecf70f66901e439f7c04ef3dbb">llvm::move</a></div><div class="ttdeci">OutputIt move(R &amp;&amp;Range, OutputIt Out)</div><div class="ttdoc">Provide wrappers to std::move which take ranges instead of having to pass begin/end explicitly.</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l01862">STLExtras.h:1862</a></div></div>
<div class="ttc" id="aclassllvm_1_1OptimizationRemarkEmitter_html_aae6a98aea85aa3af87357cc5448db499"><div class="ttname"><a href="classllvm_1_1OptimizationRemarkEmitter.html#aae6a98aea85aa3af87357cc5448db499">llvm::OptimizationRemarkEmitter::emit</a></div><div class="ttdeci">void emit(DiagnosticInfoOptimizationBase &amp;OptDiag)</div><div class="ttdoc">Output the remark via the diagnostic handler and to the optimization record file.</div><div class="ttdef"><b>Definition:</b> <a href="OptimizationRemarkEmitter_8cpp_source.html#l00079">OptimizationRemarkEmitter.cpp:79</a></div></div>
<div class="ttc" id="aclassllvm_1_1InlineAdvice_html_aadc3866d7b0ecd242180fb85d3b0e748"><div class="ttname"><a href="classllvm_1_1InlineAdvice.html#aadc3866d7b0ecd242180fb85d3b0e748">llvm::InlineAdvice::DLoc</a></div><div class="ttdeci">const DebugLoc DLoc</div><div class="ttdef"><b>Definition:</b> <a href="InlineAdvisor_8h_source.html#l00130">InlineAdvisor.h:130</a></div></div>
<div class="ttc" id="aInlineCost_8h_html"><div class="ttname"><a href="InlineCost_8h.html">InlineCost.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1Module_html"><div class="ttname"><a href="classllvm_1_1Module.html">llvm::Module</a></div><div class="ttdoc">A Module instance is used to store all the information related to an LLVM module.</div><div class="ttdef"><b>Definition:</b> <a href="Module_8h_source.html#l00065">Module.h:65</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallBase_html_ac0f11b96f81b2769dd23d028e3189075"><div class="ttname"><a href="classllvm_1_1CallBase.html#ac0f11b96f81b2769dd23d028e3189075">llvm::CallBase::arg_end</a></div><div class="ttdeci">User::op_iterator arg_end()</div><div class="ttdoc">Return the iterator pointing to the end of the argument list.</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l01332">InstrTypes.h:1332</a></div></div>
<div class="ttc" id="aclassllvm_1_1MLInlineAdvisor_html_a3b7f1071fac3720a2f1d4bd7da91625d"><div class="ttname"><a href="classllvm_1_1MLInlineAdvisor.html#a3b7f1071fac3720a2f1d4bd7da91625d">llvm::MLInlineAdvisor::getCachedFPI</a></div><div class="ttdeci">FunctionPropertiesInfo &amp; getCachedFPI(Function &amp;) const</div><div class="ttdef"><b>Definition:</b> <a href="MLInlineAdvisor_8cpp_source.html#l00295">MLInlineAdvisor.cpp:295</a></div></div>
<div class="ttc" id="aclassllvm_1_1InlineAdvice_html_ad7abcbeaf6e8ebe6acac592b6cdaaad0"><div class="ttname"><a href="classllvm_1_1InlineAdvice.html#ad7abcbeaf6e8ebe6acac592b6cdaaad0">llvm::InlineAdvice::isInliningRecommended</a></div><div class="ttdeci">bool isInliningRecommended() const</div><div class="ttdoc">Get the inlining recommendation.</div><div class="ttdef"><b>Definition:</b> <a href="InlineAdvisor_8h_source.html#l00112">InlineAdvisor.h:112</a></div></div>
<div class="ttc" id="aclassllvm_1_1FunctionPropertiesAnalysis_html"><div class="ttname"><a href="classllvm_1_1FunctionPropertiesAnalysis.html">llvm::FunctionPropertiesAnalysis</a></div><div class="ttdef"><b>Definition:</b> <a href="FunctionPropertiesAnalysis_8h_source.html#l00082">FunctionPropertiesAnalysis.h:82</a></div></div>
<div class="ttc" id="aclassllvm_1_1OptimizationRemarkEmitter_html"><div class="ttname"><a href="classllvm_1_1OptimizationRemarkEmitter.html">llvm::OptimizationRemarkEmitter</a></div><div class="ttdoc">The optimization diagnostic interface.</div><div class="ttdef"><b>Definition:</b> <a href="OptimizationRemarkEmitter_8h_source.html#l00033">OptimizationRemarkEmitter.h:33</a></div></div>
<div class="ttc" id="aclassllvm_1_1MLInlineAdvisor_html_af89cb65bd8bca0c28b1a0b7cd0bcff89"><div class="ttname"><a href="classllvm_1_1MLInlineAdvisor.html#af89cb65bd8bca0c28b1a0b7cd0bcff89">llvm::MLInlineAdvisor::getInitialFunctionLevel</a></div><div class="ttdeci">unsigned getInitialFunctionLevel(const Function &amp;F) const</div><div class="ttdef"><b>Definition:</b> <a href="MLInlineAdvisor_8cpp_source.html#l00160">MLInlineAdvisor.cpp:160</a></div></div>
<div class="ttc" id="aclassllvm_1_1AssumptionCache_html"><div class="ttname"><a href="classllvm_1_1AssumptionCache.html">llvm::AssumptionCache</a></div><div class="ttdoc">A cache of @llvm.assume calls within a function.</div><div class="ttdef"><b>Definition:</b> <a href="AssumptionCache_8h_source.html#l00042">AssumptionCache.h:42</a></div></div>
<div class="ttc" id="aclassllvm_1_1InlineAdvisor_html"><div class="ttname"><a href="classllvm_1_1InlineAdvisor.html">llvm::InlineAdvisor</a></div><div class="ttdoc">Interface for deciding whether to inline a call site or not.</div><div class="ttdef"><b>Definition:</b> <a href="InlineAdvisor_8h_source.html#l00165">InlineAdvisor.h:165</a></div></div>
<div class="ttc" id="ainclude_2llvm_2Support_2CMakeLists_8txt_html_aef9367eb0b7430eaf70b1f2725488f2a"><div class="ttname"><a href="include_2llvm_2Support_2CMakeLists_8txt.html#aef9367eb0b7430eaf70b1f2725488f2a">if</a></div><div class="ttdeci">if(llvm_vc STREQUAL &quot;&quot;) set(fake_version_inc &quot;$</div><div class="ttdef"><b>Definition:</b> <a href="include_2llvm_2Support_2CMakeLists_8txt_source.html#l00014">CMakeLists.txt:14</a></div></div>
<div class="ttc" id="aclassllvm_1_1MLInlineAdvice_html_a413e5428e006570e79370b033a107dec"><div class="ttname"><a href="classllvm_1_1MLInlineAdvice.html#a413e5428e006570e79370b033a107dec">llvm::MLInlineAdvice::MLInlineAdvice</a></div><div class="ttdeci">MLInlineAdvice(MLInlineAdvisor *Advisor, CallBase &amp;CB, OptimizationRemarkEmitter &amp;ORE, bool Recommendation)</div><div class="ttdef"><b>Definition:</b> <a href="MLInlineAdvisor_8cpp_source.html#l00447">MLInlineAdvisor.cpp:447</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_adb5c319f5905c1d3ca9eb5df546388c5"><div class="ttname"><a href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">llvm::Value::getName</a></div><div class="ttdeci">StringRef getName() const</div><div class="ttdoc">Return a constant reference to the value's name.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00308">Value.cpp:308</a></div></div>
<div class="ttc" id="aSampleProfWriter_8cpp_html_ac5f3689931c7238da06ba00cf1002c62"><div class="ttname"><a href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a></div><div class="ttdeci">raw_pwrite_stream &amp; OS</div><div class="ttdef"><b>Definition:</b> <a href="SampleProfWriter_8cpp_source.html#l00053">SampleProfWriter.cpp:53</a></div></div>
<div class="ttc" id="aAMDGPULibCalls_8cpp_html_a537c835c34f0b44b6ad2696643754390"><div class="ttname"><a href="AMDGPULibCalls_8cpp.html#a537c835c34f0b44b6ad2696643754390">Callee</a></div><div class="ttdeci">amdgpu Simplify well known AMD library false FunctionCallee Callee</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULibCalls_8cpp_source.html#l00187">AMDGPULibCalls.cpp:187</a></div></div>
<div class="ttc" id="aFunctionPropertiesAnalysis_8h_html"><div class="ttname"><a href="FunctionPropertiesAnalysis_8h.html">FunctionPropertiesAnalysis.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1MLInlineAdvice_html_a19a31f34d91bfcdfa8c16f9a16079461"><div class="ttname"><a href="classllvm_1_1MLInlineAdvice.html#a19a31f34d91bfcdfa8c16f9a16079461">llvm::MLInlineAdvice::updateCachedCallerFPI</a></div><div class="ttdeci">void updateCachedCallerFPI(FunctionAnalysisManager &amp;FAM) const</div><div class="ttdef"><b>Definition:</b> <a href="MLInlineAdvisor_8cpp_source.html#l00472">MLInlineAdvisor.cpp:472</a></div></div>
<div class="ttc" id="aclassllvm_1_1InlineAdvisor_html_a1b1b99bc0fe39cbe400f49bbd65f01c3"><div class="ttname"><a href="classllvm_1_1InlineAdvisor.html#a1b1b99bc0fe39cbe400f49bbd65f01c3">llvm::InlineAdvisor::FAM</a></div><div class="ttdeci">FunctionAnalysisManager &amp; FAM</div><div class="ttdef"><b>Definition:</b> <a href="InlineAdvisor_8h_source.html#l00211">InlineAdvisor.h:211</a></div></div>
<div class="ttc" id="anamespacestd_html"><div class="ttname"><a href="namespacestd.html">std</a></div><div class="ttdef"><b>Definition:</b> <a href="BitVector_8h_source.html#l00851">BitVector.h:851</a></div></div>
<div class="ttc" id="aclassllvm_1_1PreservedAnalyses_html_a1258a1ff55557c27684010ebd7283712"><div class="ttname"><a href="classllvm_1_1PreservedAnalyses.html#a1258a1ff55557c27684010ebd7283712">llvm::PreservedAnalyses::all</a></div><div class="ttdeci">static PreservedAnalyses all()</div><div class="ttdoc">Construct a special preserved set that preserves all passes.</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00158">PassManager.h:158</a></div></div>
<div class="ttc" id="aclassllvm_1_1MLInlineAdvisor_html_a42079a872d9a000c124cef0d38723741"><div class="ttname"><a href="classllvm_1_1MLInlineAdvisor.html#a42079a872d9a000c124cef0d38723741">llvm::MLInlineAdvisor::onPassExit</a></div><div class="ttdeci">void onPassExit(LazyCallGraph::SCC *SCC) override</div><div class="ttdoc">This must be called when the Inliner pass is exited, as function passes may be run subsequently.</div><div class="ttdef"><b>Definition:</b> <a href="MLInlineAdvisor_8cpp_source.html#l00211">MLInlineAdvisor.cpp:211</a></div></div>
<div class="ttc" id="aclassllvm_1_1LazyCallGraphAnalysis_html"><div class="ttname"><a href="classllvm_1_1LazyCallGraphAnalysis.html">llvm::LazyCallGraphAnalysis</a></div><div class="ttdoc">An analysis pass which computes the call graph for a module.</div><div class="ttdef"><b>Definition:</b> <a href="LazyCallGraph_8h_source.html#l01257">LazyCallGraph.h:1257</a></div></div>
<div class="ttc" id="anamespacellvm_html_a8ac326bbf3910d5f456f0b3bbf8de06f"><div class="ttname"><a href="namespacellvm.html#a8ac326bbf3910d5f456f0b3bbf8de06f">llvm::FeatureMap</a></div><div class="ttdeci">const std::vector&lt; TensorSpec &gt; FeatureMap</div><div class="ttdef"><b>Definition:</b> <a href="MLInlineAdvisor_8cpp_source.html#l00082">MLInlineAdvisor.cpp:82</a></div></div>
<div class="ttc" id="aPassManager_8h_html"><div class="ttname"><a href="PassManager_8h.html">PassManager.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1MLInlineAdvice_html_a367c676bd322e75aad02114a0763d955"><div class="ttname"><a href="classllvm_1_1MLInlineAdvice.html#a367c676bd322e75aad02114a0763d955">llvm::MLInlineAdvice::CallerIRSize</a></div><div class="ttdeci">const int64_t CallerIRSize</div><div class="ttdef"><b>Definition:</b> <a href="MLInlineAdvisor_8h_source.html#l00108">MLInlineAdvisor.h:108</a></div></div>
<div class="ttc" id="aMLInlineAdvisor_8cpp_html_ad78e062f62e0d6e453941fb4ca843e4d"><div class="ttname"><a href="MLInlineAdvisor_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">DEBUG_TYPE</a></div><div class="ttdeci">#define DEBUG_TYPE</div><div class="ttdef"><b>Definition:</b> <a href="MLInlineAdvisor_8cpp_source.html#l00067">MLInlineAdvisor.cpp:67</a></div></div>
<div class="ttc" id="anamespacellvm_html_a7ef78f96e07a124af3b346d8df9010cca67f61322a0f693e8ff8200717ec6adde"><div class="ttname"><a href="namespacellvm.html#a7ef78f96e07a124af3b346d8df9010cca67f61322a0f693e8ff8200717ec6adde">llvm::InlineCostFeatureIndex::NumberOfFeatures</a></div><div class="ttdeci">@ NumberOfFeatures</div></div>
<div class="ttc" id="aMLInlineAdvisor_8h_html"><div class="ttname"><a href="MLInlineAdvisor_8h.html">MLInlineAdvisor.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1MLInlineAdvisor_html_ad64807412969a3708f691675898a58c0"><div class="ttname"><a href="classllvm_1_1MLInlineAdvisor.html#ad64807412969a3708f691675898a58c0">llvm::MLInlineAdvisor::getIRSize</a></div><div class="ttdeci">int64_t getIRSize(Function &amp;F) const</div><div class="ttdef"><b>Definition:</b> <a href="MLInlineAdvisor_8h_source.html#l00038">MLInlineAdvisor.h:38</a></div></div>
<div class="ttc" id="aclassllvm_1_1MLInlineAdvisor_html_a8116ffdfb54f7d195eb185c8bf7c060c"><div class="ttname"><a href="classllvm_1_1MLInlineAdvisor.html#a8116ffdfb54f7d195eb185c8bf7c060c">llvm::MLInlineAdvisor::onSuccessfulInlining</a></div><div class="ttdeci">void onSuccessfulInlining(const MLInlineAdvice &amp;Advice, bool CalleeWasDeleted)</div><div class="ttdef"><b>Definition:</b> <a href="MLInlineAdvisor_8cpp_source.html#l00250">MLInlineAdvisor.cpp:250</a></div></div>
<div class="ttc" id="aCallGraph_8h_html"><div class="ttname"><a href="CallGraph_8h.html">CallGraph.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1InlineAdvisor_html_a2610d24c389789284bb8c8b616ab5e43"><div class="ttname"><a href="classllvm_1_1InlineAdvisor.html#a2610d24c389789284bb8c8b616ab5e43">llvm::InlineAdvisor::getMandatoryKind</a></div><div class="ttdeci">static MandatoryInliningKind getMandatoryKind(CallBase &amp;CB, FunctionAnalysisManager &amp;FAM, OptimizationRemarkEmitter &amp;ORE)</div><div class="ttdef"><b>Definition:</b> <a href="InlineAdvisor_8cpp_source.html#l00591">InlineAdvisor.cpp:591</a></div></div>
<div class="ttc" id="aclassllvm_1_1DominatorTreeAnalysis_html"><div class="ttname"><a href="classllvm_1_1DominatorTreeAnalysis.html">llvm::DominatorTreeAnalysis</a></div><div class="ttdoc">Analysis pass which computes a DominatorTree.</div><div class="ttdef"><b>Definition:</b> <a href="Dominators_8h_source.html#l00279">Dominators.h:279</a></div></div>
<div class="ttc" id="aclassllvm_1_1OptimizationRemark_html"><div class="ttname"><a href="classllvm_1_1OptimizationRemark.html">llvm::OptimizationRemark</a></div><div class="ttdoc">Diagnostic information for applied optimization remarks.</div><div class="ttdef"><b>Definition:</b> <a href="DiagnosticInfo_8h_source.html#l00689">DiagnosticInfo.h:689</a></div></div>
<div class="ttc" id="aclassllvm_1_1MLInlineAdvisor_html"><div class="ttname"><a href="classllvm_1_1MLInlineAdvisor.html">llvm::MLInlineAdvisor</a></div><div class="ttdef"><b>Definition:</b> <a href="MLInlineAdvisor_8h_source.html#l00028">MLInlineAdvisor.h:28</a></div></div>
<div class="ttc" id="aDominators_8h_html"><div class="ttname"><a href="Dominators_8h.html">Dominators.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1MLInlineAdvisor_html_adb44b65867ce48eee9d2d49cbdc60333"><div class="ttname"><a href="classllvm_1_1MLInlineAdvisor.html#adb44b65867ce48eee9d2d49cbdc60333">llvm::MLInlineAdvisor::getAdviceImpl</a></div><div class="ttdeci">std::unique_ptr&lt; InlineAdvice &gt; getAdviceImpl(CallBase &amp;CB) override</div><div class="ttdef"><b>Definition:</b> <a href="MLInlineAdvisor_8cpp_source.html#l00304">MLInlineAdvisor.cpp:304</a></div></div>
<div class="ttc" id="aregcomp_8c_html_a0240ac851181b84ac374872dc5434ee4"><div class="ttname"><a href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a></div><div class="ttdeci">#define N</div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a1a7f07aaef6a3bee130bf0e0f0536802"><div class="ttname"><a href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">llvm::Instruction::getParent</a></div><div class="ttdeci">const BasicBlock * getParent() const</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00090">Instruction.h:90</a></div></div>
<div class="ttc" id="aTargetTransformInfo_8h_html"><div class="ttname"><a href="TargetTransformInfo_8h.html">TargetTransformInfo.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallBase_html"><div class="ttname"><a href="classllvm_1_1CallBase.html">llvm::CallBase</a></div><div class="ttdoc">Base class for all callable instructions (InvokeInst and CallInst) Holds everything related to callin...</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l01184">InstrTypes.h:1184</a></div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisManager_html"><div class="ttname"><a href="classllvm_1_1AnalysisManager.html">llvm::AnalysisManager</a></div><div class="ttdoc">A container for analyses that lazily runs them and caches their results.</div><div class="ttdef"><b>Definition:</b> <a href="InstructionSimplify_8h_source.html#l00042">InstructionSimplify.h:42</a></div></div>
<div class="ttc" id="aclassllvm_1_1InnerAnalysisManagerProxy_html"><div class="ttname"><a href="classllvm_1_1InnerAnalysisManagerProxy.html">llvm::InnerAnalysisManagerProxy</a></div><div class="ttdoc">An analysis over an &quot;outer&quot; IR unit that provides access to an analysis manager over an &quot;inner&quot; IR un...</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00931">PassManager.h:931</a></div></div>
<div class="ttc" id="aInlineModelFeatureMaps_8h_html"><div class="ttname"><a href="InlineModelFeatureMaps_8h.html">InlineModelFeatureMaps.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1MLInlineAdvisor_html_ad29d86e8f62a35997fcc2f48d72653b2"><div class="ttname"><a href="classllvm_1_1MLInlineAdvisor.html#ad29d86e8f62a35997fcc2f48d72653b2">llvm::MLInlineAdvisor::getAdviceFromModel</a></div><div class="ttdeci">virtual std::unique_ptr&lt; MLInlineAdvice &gt; getAdviceFromModel(CallBase &amp;CB, OptimizationRemarkEmitter &amp;ORE)</div><div class="ttdef"><b>Definition:</b> <a href="MLInlineAdvisor_8cpp_source.html#l00401">MLInlineAdvisor.cpp:401</a></div></div>
<div class="ttc" id="astructllvm_1_1cl_1_1desc_html"><div class="ttname"><a href="structllvm_1_1cl_1_1desc.html">llvm::cl::desc</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00411">CommandLine.h:411</a></div></div>
<div class="ttc" id="anamespacellvm_html_a299d467a34db1328efc3b8279e1f435f"><div class="ttname"><a href="namespacellvm.html#a299d467a34db1328efc3b8279e1f435f">llvm::NumberOfFeatures</a></div><div class="ttdeci">constexpr size_t NumberOfFeatures</div><div class="ttdef"><b>Definition:</b> <a href="InlineModelFeatureMaps_8h_source.html#l00129">InlineModelFeatureMaps.h:129</a></div></div>
<div class="ttc" id="aInlineModelFeatureMaps_8h_html_a5eabd85b6152d544f9752fe1efbda021"><div class="ttname"><a href="InlineModelFeatureMaps_8h.html#a5eabd85b6152d544f9752fe1efbda021">INLINE_FEATURE_ITERATOR</a></div><div class="ttdeci">#define INLINE_FEATURE_ITERATOR(M)</div><div class="ttdef"><b>Definition:</b> <a href="InlineModelFeatureMaps_8h_source.html#l00083">InlineModelFeatureMaps.h:83</a></div></div>
<div class="ttc" id="aclassllvm_1_1FunctionPropertiesInfo_html"><div class="ttname"><a href="classllvm_1_1FunctionPropertiesInfo.html">llvm::FunctionPropertiesInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="FunctionPropertiesAnalysis_8h_source.html#l00026">FunctionPropertiesAnalysis.h:26</a></div></div>
<div class="ttc" id="aclassllvm_1_1MLInlineAdvice_html"><div class="ttname"><a href="classllvm_1_1MLInlineAdvice.html">llvm::MLInlineAdvice</a></div><div class="ttdoc">InlineAdvice that tracks changes post inlining.</div><div class="ttdef"><b>Definition:</b> <a href="MLInlineAdvisor_8h_source.html#l00094">MLInlineAdvisor.h:94</a></div></div>
<div class="ttc" id="aclassllvm_1_1InlineAdvice_html_a840ff172791c81e7277a6fcf89c91dbe"><div class="ttname"><a href="classllvm_1_1InlineAdvice.html#a840ff172791c81e7277a6fcf89c91dbe">llvm::InlineAdvice::Advisor</a></div><div class="ttdeci">InlineAdvisor *const Advisor</div><div class="ttdef"><b>Definition:</b> <a href="InlineAdvisor_8h_source.html#l00122">InlineAdvisor.h:122</a></div></div>
<div class="ttc" id="aclassllvm_1_1OptimizationRemarkEmitterAnalysis_html"><div class="ttname"><a href="classllvm_1_1OptimizationRemarkEmitterAnalysis.html">llvm::OptimizationRemarkEmitterAnalysis</a></div><div class="ttdef"><b>Definition:</b> <a href="OptimizationRemarkEmitter_8h_source.html#l00164">OptimizationRemarkEmitter.h:164</a></div></div>
<div class="ttc" id="aclassllvm_1_1InlineResult_html"><div class="ttname"><a href="classllvm_1_1InlineResult.html">llvm::InlineResult</a></div><div class="ttdoc">InlineResult is basically true or false.</div><div class="ttdef"><b>Definition:</b> <a href="InlineCost_8h_source.html#l00179">InlineCost.h:179</a></div></div>
<div class="ttc" id="anamespacellvm_html_ac25d98957a825ee699d9b11ee836cc19"><div class="ttname"><a href="namespacellvm.html#ac25d98957a825ee699d9b11ee836cc19">llvm::getInliningCostEstimate</a></div><div class="ttdeci">std::optional&lt; int &gt; getInliningCostEstimate(CallBase &amp;Call, TargetTransformInfo &amp;CalleeTTI, function_ref&lt; AssumptionCache &amp;(Function &amp;)&gt; GetAssumptionCache, function_ref&lt; BlockFrequencyInfo &amp;(Function &amp;)&gt; GetBFI=nullptr, ProfileSummaryInfo *PSI=nullptr, OptimizationRemarkEmitter *ORE=nullptr)</div><div class="ttdoc">Get the cost estimate ignoring thresholds.</div><div class="ttdef"><b>Definition:</b> <a href="InlineCost_8cpp_source.html#l02848">InlineCost.cpp:2848</a></div></div>
<div class="ttc" id="anamespacellvm_html_aa497b131be7719a15bde7cb3192d9bf8"><div class="ttname"><a href="namespacellvm.html#aa497b131be7719a15bde7cb3192d9bf8">llvm::RewardName</a></div><div class="ttdeci">const char *const RewardName</div><div class="ttdef"><b>Definition:</b> <a href="MLInlineAdvisor_8cpp_source.html#l00099">MLInlineAdvisor.cpp:99</a></div></div>
<div class="ttc" id="aclassllvm_1_1InlineAdvice_html_a00ec8d01596f9885f6303a98fbc8197b"><div class="ttname"><a href="classllvm_1_1InlineAdvice.html#a00ec8d01596f9885f6303a98fbc8197b">llvm::InlineAdvice::Callee</a></div><div class="ttdeci">Function *const Callee</div><div class="ttdef"><b>Definition:</b> <a href="InlineAdvisor_8h_source.html#l00125">InlineAdvisor.h:125</a></div></div>
<div class="ttc" id="aclassllvm_1_1TensorSpec_html"><div class="ttname"><a href="classllvm_1_1TensorSpec.html">llvm::TensorSpec</a></div><div class="ttdef"><b>Definition:</b> <a href="TensorSpec_8h_source.html#l00054">TensorSpec.h:54</a></div></div>
<div class="ttc" id="aclassllvm_1_1MLInlineAdvice_html_afab4dde8e888e2564c2108a9c149f12d"><div class="ttname"><a href="classllvm_1_1MLInlineAdvice.html#afab4dde8e888e2564c2108a9c149f12d">llvm::MLInlineAdvice::recordUnattemptedInliningImpl</a></div><div class="ttdeci">void recordUnattemptedInliningImpl() override</div><div class="ttdef"><b>Definition:</b> <a href="MLInlineAdvisor_8cpp_source.html#l00505">MLInlineAdvisor.cpp:505</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopAnalysis_html"><div class="ttname"><a href="classllvm_1_1LoopAnalysis.html">llvm::LoopAnalysis</a></div><div class="ttdoc">Analysis pass that exposes the LoopInfo for a function.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l01268">LoopInfo.h:1268</a></div></div>
<div class="ttc" id="aclassllvm_1_1FunctionPropertiesInfo_html_afa568a5b2ab440f02bbc9eef3863a619"><div class="ttname"><a href="classllvm_1_1FunctionPropertiesInfo.html#afa568a5b2ab440f02bbc9eef3863a619">llvm::FunctionPropertiesInfo::DirectCallsToDefinedFunctions</a></div><div class="ttdeci">int64_t DirectCallsToDefinedFunctions</div><div class="ttdoc">Number of direct calls made from this function to other functions defined in this module.</div><div class="ttdef"><b>Definition:</b> <a href="FunctionPropertiesAnalysis_8h_source.html#l00063">FunctionPropertiesAnalysis.h:63</a></div></div>
<div class="ttc" id="aclassllvm_1_1MLInlineAdvisor_html_aaaec1d89794dccf1f6d02c0e46258796"><div class="ttname"><a href="classllvm_1_1MLInlineAdvisor.html#aaaec1d89794dccf1f6d02c0e46258796">llvm::MLInlineAdvisor::onPassEntry</a></div><div class="ttdeci">void onPassEntry(LazyCallGraph::SCC *SCC) override</div><div class="ttdoc">This must be called when the Inliner pass is entered, to allow the InlineAdvisor update internal stat...</div><div class="ttdef"><b>Definition:</b> <a href="MLInlineAdvisor_8cpp_source.html#l00164">MLInlineAdvisor.cpp:164</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Aug 7 2023 09:49:30 for LLVM by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LLVM: lib/Analysis/CGSCCPassManager.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">LLVM
   &#160;<span id="projectnumber">17.0.0git</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a class="el" href="dir_a25db018342d3ae6c7e6779086c18378.html">Analysis</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">CGSCCPassManager.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="CGSCCPassManager_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//===- CGSCCPassManager.cpp - Managing &amp; running CGSCC passes -------------===//</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">// See https://llvm.org/LICENSE.txt for license information.</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160; </div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CGSCCPassManager_8h.html">llvm/Analysis/CGSCCPassManager.h</a>&quot;</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ArrayRef_8h.html">llvm/ADT/ArrayRef.h</a>&quot;</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="PriorityWorklist_8h.html">llvm/ADT/PriorityWorklist.h</a>&quot;</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="STLExtras_8h.html">llvm/ADT/STLExtras.h</a>&quot;</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SetVector_8h.html">llvm/ADT/SetVector.h</a>&quot;</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SmallPtrSet_8h.html">llvm/ADT/SmallPtrSet.h</a>&quot;</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SmallVector_8h.html">llvm/ADT/SmallVector.h</a>&quot;</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="iterator__range_8h.html">llvm/ADT/iterator_range.h</a>&quot;</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LazyCallGraph_8h.html">llvm/Analysis/LazyCallGraph.h</a>&quot;</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Constant_8h.html">llvm/IR/Constant.h</a>&quot;</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="InstIterator_8h.html">llvm/IR/InstIterator.h</a>&quot;</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="IR_2Instruction_8h.html">llvm/IR/Instruction.h</a>&quot;</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="PassManager_8h.html">llvm/IR/PassManager.h</a>&quot;</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="PassManagerImpl_8h.html">llvm/IR/PassManagerImpl.h</a>&quot;</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ValueHandle_8h.html">llvm/IR/ValueHandle.h</a>&quot;</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Casting_8h.html">llvm/Support/Casting.h</a>&quot;</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CommandLine_8h.html">llvm/Support/CommandLine.h</a>&quot;</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Debug_8h.html">llvm/Support/Debug.h</a>&quot;</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Support_2ErrorHandling_8h.html">llvm/Support/ErrorHandling.h</a>&quot;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="TimeProfiler_8h.html">llvm/Support/TimeProfiler.h</a>&quot;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="raw__ostream_8h.html">llvm/Support/raw_ostream.h</a>&quot;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &lt;cassert&gt;</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &lt;iterator&gt;</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &lt;optional&gt;</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160; </div>
<div class="line"><a name="l00034"></a><span class="lineno"><a class="line" href="CGSCCPassManager_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">   34</a></span>&#160;<span class="preprocessor">#define DEBUG_TYPE &quot;cgscc&quot;</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160; </div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespacellvm.html">llvm</a>;</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160; </div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="comment">// Explicit template instantiations and specialization definitions for core</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="comment">// template typedefs.</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespacellvm.html">llvm</a> {</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="namespacellvm.html#a4c5e36e7ef4a6ce711850dbc37ebcbd1">AbortOnMaxDevirtIterationsReached</a>(</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;    <span class="stringliteral">&quot;abort-on-max-devirt-iterations-reached&quot;</span>,</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Abort when the max iterations for devirtualization CGSCC repeat &quot;</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;             <span class="stringliteral">&quot;pass is reached&quot;</span>));</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160; </div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<a class="code" href="structllvm_1_1AnalysisKey.html">AnalysisKey</a> <a class="code" href="classllvm_1_1ShouldNotRunFunctionPassesAnalysis.html#abde8dd9ec00a754efca918461b8c7835">ShouldNotRunFunctionPassesAnalysis::Key</a>;</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160; </div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="comment">// Explicit instantiations for the core proxy templates.</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="keyword">template</span> <span class="keyword">class </span><a class="code" href="classllvm_1_1AllAnalysesOn.html">AllAnalysesOn&lt;LazyCallGraph::SCC&gt;</a>;</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="keyword">template</span> <span class="keyword">class </span><a class="code" href="classllvm_1_1AnalysisManager.html">AnalysisManager&lt;LazyCallGraph::SCC, LazyCallGraph &amp;&gt;</a>;</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="keyword">template</span> <span class="keyword">class </span><a class="code" href="classllvm_1_1PassManager.html">PassManager</a>&lt;<a class="code" href="namespacellvm_1_1AMDGPU_1_1CPol.html#a7d79a4b341da8ac60b91c1f4b1ea42c4aca1659af59093b2b14c2f8aad41e8e2a">LazyCallGraph::SCC</a>, <a class="code" href="namespacellvm.html#abd17dd16e74c968cf01d3d32ea486696">CGSCCAnalysisManager</a>,</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;                           <a class="code" href="classllvm_1_1LazyCallGraph.html">LazyCallGraph</a> &amp;, <a class="code" href="structllvm_1_1CGSCCUpdateResult.html">CGSCCUpdateResult</a> &amp;&gt;;</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="keyword">template</span> <span class="keyword">class </span><a class="code" href="classllvm_1_1InnerAnalysisManagerProxy.html">InnerAnalysisManagerProxy&lt;CGSCCAnalysisManager, Module&gt;</a>;</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="keyword">template</span> <span class="keyword">class </span><a class="code" href="classllvm_1_1OuterAnalysisManagerProxy.html">OuterAnalysisManagerProxy</a>&lt;<a class="code" href="namespacellvm.html#a45d5ebd4319006101352c5ee7cc16581">ModuleAnalysisManager</a>,</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;                                         <a class="code" href="namespacellvm_1_1AMDGPU_1_1CPol.html#a7d79a4b341da8ac60b91c1f4b1ea42c4aca1659af59093b2b14c2f8aad41e8e2a">LazyCallGraph::SCC</a>, <a class="code" href="classllvm_1_1LazyCallGraph.html">LazyCallGraph</a> &amp;&gt;;</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="keyword">template</span> <span class="keyword">class </span><a class="code" href="classllvm_1_1OuterAnalysisManagerProxy.html">OuterAnalysisManagerProxy&lt;CGSCCAnalysisManager, Function&gt;</a>;</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="comment">/// Explicitly specialize the pass manager run method to handle call graph</span></div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="comment">/// updates.</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="comment"></span><span class="keyword">template</span> &lt;&gt;</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<a class="code" href="classllvm_1_1PreservedAnalyses.html">PreservedAnalyses</a></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<a class="code" href="classllvm_1_1PassManager.html">PassManager</a>&lt;<a class="code" href="namespacellvm_1_1AMDGPU_1_1CPol.html#a7d79a4b341da8ac60b91c1f4b1ea42c4aca1659af59093b2b14c2f8aad41e8e2a">LazyCallGraph::SCC</a>, <a class="code" href="namespacellvm.html#abd17dd16e74c968cf01d3d32ea486696">CGSCCAnalysisManager</a>, <a class="code" href="classllvm_1_1LazyCallGraph.html">LazyCallGraph</a> &amp;,</div>
<div class="line"><a name="l00063"></a><span class="lineno"><a class="line" href="classllvm_1_1PassManager.html#a6d74effaad77f6ecb91e1806993cda8f">   63</a></span>&#160;            <a class="code" href="structllvm_1_1CGSCCUpdateResult.html">CGSCCUpdateResult</a> &amp;&gt;<a class="code" href="namespacellvm_1_1dxil_1_1PointerTypeAnalysis.html#ae574a4c1d84b9e67bc94489f356805b4">::run</a>(<a class="code" href="classllvm_1_1LazyCallGraph_1_1SCC.html">LazyCallGraph::SCC</a> &amp;InitialC,</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;                                      <a class="code" href="classllvm_1_1AnalysisManager.html">CGSCCAnalysisManager</a> &amp;AM,</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;                                      <a class="code" href="classllvm_1_1LazyCallGraph.html">LazyCallGraph</a> &amp;<a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>, <a class="code" href="structllvm_1_1CGSCCUpdateResult.html">CGSCCUpdateResult</a> &amp;UR) {</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;  <span class="comment">// Request PassInstrumentation from analysis manager, will use it to run</span></div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;  <span class="comment">// instrumenting callbacks for the passes later.</span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;  <a class="code" href="classllvm_1_1PassInstrumentation.html">PassInstrumentation</a> PI =</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;      AM.<a class="code" href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">getResult</a>&lt;<a class="code" href="classllvm_1_1PassInstrumentationAnalysis.html">PassInstrumentationAnalysis</a>&gt;(InitialC, <a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>);</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160; </div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;  <a class="code" href="classllvm_1_1PreservedAnalyses.html">PreservedAnalyses</a> PA = <a class="code" href="classllvm_1_1PreservedAnalyses.html#a1258a1ff55557c27684010ebd7283712">PreservedAnalyses::all</a>();</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160; </div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;  <span class="comment">// The SCC may be refined while we are running passes over it, so set up</span></div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;  <span class="comment">// a pointer that we can update.</span></div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;  <a class="code" href="classllvm_1_1LazyCallGraph_1_1SCC.html">LazyCallGraph::SCC</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = &amp;InitialC;</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160; </div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;  <span class="comment">// Get Function analysis manager from its proxy.</span></div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;  <a class="code" href="classllvm_1_1AnalysisManager.html">FunctionAnalysisManager</a> &amp;<a class="code" href="PassBuilderBindings_8cpp.html#a83c7e5ca51099e4efa895791a02fb0ed">FAM</a> =</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;      AM.<a class="code" href="classllvm_1_1AnalysisManager.html#a90a202de107720c5c6af3a5bc275d8f5">getCachedResult</a>&lt;<a class="code" href="classllvm_1_1FunctionAnalysisManagerCGSCCProxy.html">FunctionAnalysisManagerCGSCCProxy</a>&gt;(*C)-&gt;getManager();</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160; </div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;<a class="code" href="classllvm_1_1Pass.html">Pass</a> : <a class="code" href="PassBuilderBindings_8cpp.html#ae0d075136095c7ea6db40715be638cf3">Passes</a>) {</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    <span class="comment">// Check the PassInstrumentation&#39;s BeforePass callbacks before running the</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    <span class="comment">// pass, skip its execution completely if asked to (callback returns false).</span></div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    <span class="keywordflow">if</span> (!PI.<a class="code" href="classllvm_1_1PassInstrumentation.html#aead32b9af4b66a742d37585c6d6b4cbc">runBeforePass</a>(*<a class="code" href="classllvm_1_1Pass.html">Pass</a>, *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>))</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160; </div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    <a class="code" href="classllvm_1_1PreservedAnalyses.html">PreservedAnalyses</a> PassPA = <a class="code" href="classllvm_1_1Pass.html">Pass</a>-&gt;run(*<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, AM, <a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>, UR);</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160; </div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    <span class="keywordflow">if</span> (UR.<a class="code" href="structllvm_1_1CGSCCUpdateResult.html#a6822f3e4bf1d3a55c967bf74b7419704">InvalidatedSCCs</a>.count(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>))</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;      PI.<a class="code" href="classllvm_1_1PassInstrumentation.html#a055d7d34f26a121bd6cd03073cda6529">runAfterPassInvalidated</a>&lt;<a class="code" href="classllvm_1_1LazyCallGraph_1_1SCC.html">LazyCallGraph::SCC</a>&gt;(*<a class="code" href="LazyValueInfo_8cpp.html#a739511554e31b02d233401957fd86f44">Pass</a>, PassPA);</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;      PI.<a class="code" href="classllvm_1_1PassInstrumentation.html#acec038dce9072b64301f6e5226c5579a">runAfterPass</a>&lt;<a class="code" href="classllvm_1_1LazyCallGraph_1_1SCC.html">LazyCallGraph::SCC</a>&gt;(*<a class="code" href="LazyValueInfo_8cpp.html#a739511554e31b02d233401957fd86f44">Pass</a>, *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, PassPA);</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160; </div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    <span class="comment">// Update the SCC if necessary.</span></div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = UR.<a class="code" href="structllvm_1_1CGSCCUpdateResult.html#ab4eb37646445da693553b9728143f31c">UpdatedC</a> ? UR.<a class="code" href="structllvm_1_1CGSCCUpdateResult.html#ab4eb37646445da693553b9728143f31c">UpdatedC</a> : <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>;</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    <span class="keywordflow">if</span> (UR.<a class="code" href="structllvm_1_1CGSCCUpdateResult.html#ab4eb37646445da693553b9728143f31c">UpdatedC</a>) {</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;      <span class="comment">// If C is updated, also create a proxy and update FAM inside the result.</span></div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;      <span class="keyword">auto</span> *ResultFAMCP =</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;          &amp;AM.<a class="code" href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">getResult</a>&lt;<a class="code" href="classllvm_1_1FunctionAnalysisManagerCGSCCProxy.html">FunctionAnalysisManagerCGSCCProxy</a>&gt;(*<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, <a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>);</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;      ResultFAMCP-&gt;updateFAM(<a class="code" href="PassBuilderBindings_8cpp.html#a83c7e5ca51099e4efa895791a02fb0ed">FAM</a>);</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    }</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160; </div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <span class="comment">// Intersect the final preserved analyses to compute the aggregate</span></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    <span class="comment">// preserved set for this pass manager.</span></div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    PA.intersect(PassPA);</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160; </div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    <span class="comment">// If the CGSCC pass wasn&#39;t able to provide a valid updated SCC, the</span></div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    <span class="comment">// current SCC may simply need to be skipped if invalid.</span></div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    <span class="keywordflow">if</span> (UR.<a class="code" href="structllvm_1_1CGSCCUpdateResult.html#a6822f3e4bf1d3a55c967bf74b7419704">InvalidatedSCCs</a>.count(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)) {</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Skipping invalidated root or island SCC!\n&quot;</span>);</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    }</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160; </div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    <span class="comment">// Check that we didn&#39;t miss any update scenario.</span></div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;begin() != <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;end() &amp;&amp; <span class="stringliteral">&quot;Cannot have an empty SCC!&quot;</span>);</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160; </div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    <span class="comment">// Update the analysis manager as each pass runs and potentially</span></div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    <span class="comment">// invalidates analyses.</span></div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    AM.<a class="code" href="classllvm_1_1AnalysisManager.html#a64b2a209a16bcd41375b5cae12690eaa">invalidate</a>(*<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, PassPA);</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;  }</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160; </div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;  <span class="comment">// Before we mark all of *this* SCC&#39;s analyses as preserved below, intersect</span></div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;  <span class="comment">// this with the cross-SCC preserved analysis set. This is used to allow</span></div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;  <span class="comment">// CGSCC passes to mutate ancestor SCCs and still trigger proper invalidation</span></div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;  <span class="comment">// for them.</span></div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;  UR.<a class="code" href="structllvm_1_1CGSCCUpdateResult.html#ac113dcaae09e52d6da7235e0757757f0">CrossSCCPA</a>.<a class="code" href="classllvm_1_1PreservedAnalyses.html#a5f5dc18d0b2c71cba501f12975188e40">intersect</a>(PA);</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160; </div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;  <span class="comment">// Invalidation was handled after each pass in the above loop for the current</span></div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;  <span class="comment">// SCC. Therefore, the remaining analysis results in the AnalysisManager are</span></div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;  <span class="comment">// preserved. We mark this with a set so that we don&#39;t need to inspect each</span></div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;  <span class="comment">// one individually.</span></div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;  PA.preserveSet&lt;<a class="code" href="classllvm_1_1AllAnalysesOn.html">AllAnalysesOn&lt;LazyCallGraph::SCC&gt;</a>&gt;();</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160; </div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;  <span class="keywordflow">return</span> PA;</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;}</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160; </div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;<a class="code" href="classllvm_1_1PreservedAnalyses.html">PreservedAnalyses</a></div>
<div class="line"><a name="l00138"></a><span class="lineno"><a class="line" href="classllvm_1_1ModuleToPostOrderCGSCCPassAdaptor.html#a0ff99def687659818bdb4a25afd82c94">  138</a></span>&#160;<a class="code" href="classllvm_1_1ModuleToPostOrderCGSCCPassAdaptor.html#a0ff99def687659818bdb4a25afd82c94">ModuleToPostOrderCGSCCPassAdaptor::run</a>(<a class="code" href="classllvm_1_1Module.html">Module</a> &amp;M, <a class="code" href="classllvm_1_1AnalysisManager.html">ModuleAnalysisManager</a> &amp;AM) {</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;  <span class="comment">// Setup the CGSCC analysis manager from its proxy.</span></div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;  <a class="code" href="classllvm_1_1AnalysisManager.html">CGSCCAnalysisManager</a> &amp;<a class="code" href="PassBuilderBindings_8cpp.html#a13293a681188ed79fb799b7f9c173b83">CGAM</a> =</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;      AM.<a class="code" href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">getResult</a>&lt;<a class="code" href="classllvm_1_1InnerAnalysisManagerProxy.html">CGSCCAnalysisManagerModuleProxy</a>&gt;(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>).getManager();</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160; </div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;  <span class="comment">// Get the call graph for this module.</span></div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;  <a class="code" href="classllvm_1_1LazyCallGraph.html">LazyCallGraph</a> &amp;CG = AM.<a class="code" href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">getResult</a>&lt;<a class="code" href="classllvm_1_1LazyCallGraphAnalysis.html">LazyCallGraphAnalysis</a>&gt;(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>);</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160; </div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;  <span class="comment">// Get Function analysis manager from its proxy.</span></div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;  <a class="code" href="classllvm_1_1AnalysisManager.html">FunctionAnalysisManager</a> &amp;<a class="code" href="PassBuilderBindings_8cpp.html#a83c7e5ca51099e4efa895791a02fb0ed">FAM</a> =</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;      AM.<a class="code" href="classllvm_1_1AnalysisManager.html#a90a202de107720c5c6af3a5bc275d8f5">getCachedResult</a>&lt;<a class="code" href="classllvm_1_1InnerAnalysisManagerProxy.html">FunctionAnalysisManagerModuleProxy</a>&gt;(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>)-&gt;getManager();</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160; </div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;  <span class="comment">// We keep worklists to allow us to push more work onto the pass manager as</span></div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;  <span class="comment">// the passes are run.</span></div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;  <a class="code" href="classllvm_1_1SmallPriorityWorklist.html">SmallPriorityWorklist&lt;LazyCallGraph::RefSCC *, 1&gt;</a> RCWorklist;</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;  <a class="code" href="classllvm_1_1SmallPriorityWorklist.html">SmallPriorityWorklist&lt;LazyCallGraph::SCC *, 1&gt;</a> CWorklist;</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160; </div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;  <span class="comment">// Keep sets for invalidated SCCs and RefSCCs that should be skipped when</span></div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;  <span class="comment">// iterating off the worklists.</span></div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;LazyCallGraph::RefSCC *, 4&gt;</a> InvalidRefSCCSet;</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;LazyCallGraph::SCC *, 4&gt;</a> InvalidSCCSet;</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160; </div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;  <a class="code" href="classllvm_1_1SmallDenseSet.html">SmallDenseSet&lt;std::pair&lt;LazyCallGraph::Node *, LazyCallGraph::SCC *&gt;</a>, 4&gt;</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;      InlinedInternalEdges;</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160; </div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;  <a class="code" href="structllvm_1_1CGSCCUpdateResult.html">CGSCCUpdateResult</a> UR = {</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;      RCWorklist,           CWorklist, InvalidRefSCCSet,</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;      InvalidSCCSet,        <span class="keyword">nullptr</span>,   <a class="code" href="classllvm_1_1PreservedAnalyses.html#a1258a1ff55557c27684010ebd7283712">PreservedAnalyses::all</a>(),</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;      InlinedInternalEdges, {}};</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160; </div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;  <span class="comment">// Request PassInstrumentation from analysis manager, will use it to run</span></div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;  <span class="comment">// instrumenting callbacks for the passes later.</span></div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;  <a class="code" href="classllvm_1_1PassInstrumentation.html">PassInstrumentation</a> PI = AM.<a class="code" href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">getResult</a>&lt;<a class="code" href="classllvm_1_1PassInstrumentationAnalysis.html">PassInstrumentationAnalysis</a>&gt;(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>);</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160; </div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;  <a class="code" href="classllvm_1_1PreservedAnalyses.html">PreservedAnalyses</a> PA = <a class="code" href="classllvm_1_1PreservedAnalyses.html#a1258a1ff55557c27684010ebd7283712">PreservedAnalyses::all</a>();</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;  CG.<a class="code" href="classllvm_1_1LazyCallGraph.html#a72787ab6acfbe504a11ca1d927513356">buildRefSCCs</a>();</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1LazyCallGraph_1_1RefSCC.html">LazyCallGraph::RefSCC</a> &amp;RC :</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;       <a class="code" href="namespacellvm.html#a8154638df88e4eaa568b67b23d463dac">llvm::make_early_inc_range</a>(CG.<a class="code" href="classllvm_1_1LazyCallGraph.html#a9e7736a620a28815327d9fae9387092c">postorder_ref_sccs</a>())) {</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(RCWorklist.<a class="code" href="classllvm_1_1PriorityWorklist.html#adc2ef5f0964becc28dfa58a7abc2f1e7">empty</a>() &amp;&amp;</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;           <span class="stringliteral">&quot;Should always start with an empty RefSCC worklist&quot;</span>);</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    <span class="comment">// The postorder_ref_sccs range we are walking is lazily constructed, so</span></div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    <span class="comment">// we only push the first one onto the worklist. The worklist allows us</span></div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    <span class="comment">// to capture *new* RefSCCs created during transformations.</span></div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    <span class="comment">// We really want to form RefSCCs lazily because that makes them cheaper</span></div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    <span class="comment">// to update as the program is simplified and allows us to have greater</span></div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    <span class="comment">// cache locality as forming a RefSCC touches all the parts of all the</span></div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    <span class="comment">// functions within that RefSCC.</span></div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    <span class="comment">// We also eagerly increment the iterator to the next position because</span></div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    <span class="comment">// the CGSCC passes below may delete the current RefSCC.</span></div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    RCWorklist.<a class="code" href="classllvm_1_1PriorityWorklist.html#af74058cc2f8163b1d7128b467432a09b">insert</a>(&amp;RC);</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160; </div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;      <a class="code" href="classllvm_1_1LazyCallGraph_1_1RefSCC.html">LazyCallGraph::RefSCC</a> *RC = RCWorklist.<a class="code" href="classllvm_1_1PriorityWorklist.html#ab89ceb7695256590499de818b5360c54">pop_back_val</a>();</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;      <span class="keywordflow">if</span> (InvalidRefSCCSet.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a1f475b0df44ebd7169e720fa1bf9169e">count</a>(RC)) {</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;        <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Skipping an invalid RefSCC...\n&quot;</span>);</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;      }</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160; </div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(CWorklist.<a class="code" href="classllvm_1_1PriorityWorklist.html#adc2ef5f0964becc28dfa58a7abc2f1e7">empty</a>() &amp;&amp;</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;             <span class="stringliteral">&quot;Should always start with an empty SCC worklist&quot;</span>);</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160; </div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Running an SCC pass across the RefSCC: &quot;</span> &lt;&lt; *RC</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;                        &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160; </div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;      <span class="comment">// The top of the worklist may *also* be the same SCC we just ran over</span></div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;      <span class="comment">// (and invalidated for). Keep track of that last SCC we processed due</span></div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;      <span class="comment">// to SCC update to avoid redundant processing when an SCC is both just</span></div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;      <span class="comment">// updated itself and at the top of the worklist.</span></div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;      <a class="code" href="classllvm_1_1LazyCallGraph_1_1SCC.html">LazyCallGraph::SCC</a> *LastUpdatedC = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160; </div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;      <span class="comment">// Push the initial SCCs in reverse post-order as we&#39;ll pop off the</span></div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;      <span class="comment">// back and so see this in post-order.</span></div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1LazyCallGraph_1_1SCC.html">LazyCallGraph::SCC</a> &amp;<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> : <a class="code" href="namespacellvm.html#a6b0ac1fa4f05de76413c5e0ca6334035">llvm::reverse</a>(*RC))</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;        CWorklist.<a class="code" href="classllvm_1_1PriorityWorklist.html#af74058cc2f8163b1d7128b467432a09b">insert</a>(&amp;<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160; </div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;      <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;        <a class="code" href="classllvm_1_1LazyCallGraph_1_1SCC.html">LazyCallGraph::SCC</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = CWorklist.<a class="code" href="classllvm_1_1PriorityWorklist.html#ab89ceb7695256590499de818b5360c54">pop_back_val</a>();</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;        <span class="comment">// Due to call graph mutations, we may have invalid SCCs or SCCs from</span></div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;        <span class="comment">// other RefSCCs in the worklist. The invalid ones are dead and the</span></div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;        <span class="comment">// other RefSCCs should be queued above, so we just need to skip both</span></div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;        <span class="comment">// scenarios here.</span></div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;        <span class="keywordflow">if</span> (InvalidSCCSet.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a1f475b0df44ebd7169e720fa1bf9169e">count</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)) {</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;          <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Skipping an invalid SCC...\n&quot;</span>);</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;        }</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;        <span class="keywordflow">if</span> (LastUpdatedC == <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>) {</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;          <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Skipping redundant run on SCC: &quot;</span> &lt;&lt; *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;        }</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;        <span class="comment">// We used to also check if the current SCC is part of the current</span></div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;        <span class="comment">// RefSCC and bail if it wasn&#39;t, since it should be in RCWorklist.</span></div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;        <span class="comment">// However, this can cause compile time explosions in some cases on</span></div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;        <span class="comment">// modules with a huge RefSCC. If a non-trivial amount of SCCs in the</span></div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;        <span class="comment">// huge RefSCC can become their own child RefSCC, we create one child</span></div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;        <span class="comment">// RefSCC, bail on the current RefSCC, visit the child RefSCC, revisit</span></div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;        <span class="comment">// the huge RefSCC, and repeat. By visiting all SCCs in the original</span></div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;        <span class="comment">// RefSCC we create all the child RefSCCs in one pass of the RefSCC,</span></div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;        <span class="comment">// rather one pass of the RefSCC creating one child RefSCC at a time.</span></div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160; </div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;        <span class="comment">// Ensure we can proxy analysis updates from the CGSCC analysis manager</span></div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;        <span class="comment">// into the the Function analysis manager by getting a proxy here.</span></div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;        <span class="comment">// This also needs to update the FunctionAnalysisManager, as this may be</span></div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;        <span class="comment">// the first time we see this SCC.</span></div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;        <a class="code" href="PassBuilderBindings_8cpp.html#a13293a681188ed79fb799b7f9c173b83">CGAM</a>.<a class="code" href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">getResult</a>&lt;<a class="code" href="classllvm_1_1FunctionAnalysisManagerCGSCCProxy.html">FunctionAnalysisManagerCGSCCProxy</a>&gt;(*<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, CG).updateFAM(</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;            <a class="code" href="PassBuilderBindings_8cpp.html#a83c7e5ca51099e4efa895791a02fb0ed">FAM</a>);</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160; </div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;        <span class="comment">// Each time we visit a new SCC pulled off the worklist,</span></div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;        <span class="comment">// a transformation of a child SCC may have also modified this parent</span></div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;        <span class="comment">// and invalidated analyses. So we invalidate using the update record&#39;s</span></div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;        <span class="comment">// cross-SCC preserved set. This preserved set is intersected by any</span></div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;        <span class="comment">// CGSCC pass that handles invalidation (primarily pass managers) prior</span></div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;        <span class="comment">// to marking its SCC as preserved. That lets us track everything that</span></div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;        <span class="comment">// might need invalidation across SCCs without excessive invalidations</span></div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;        <span class="comment">// on a single SCC.</span></div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;        <span class="comment">// This essentially allows SCC passes to freely invalidate analyses</span></div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;        <span class="comment">// of any ancestor SCC. If this becomes detrimental to successfully</span></div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;        <span class="comment">// caching analyses, we could force each SCC pass to manually</span></div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;        <span class="comment">// invalidate the analyses for any SCCs other than themselves which</span></div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;        <span class="comment">// are mutated. However, that seems to lose the robustness of the</span></div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;        <span class="comment">// pass-manager driven invalidation scheme.</span></div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;        <a class="code" href="PassBuilderBindings_8cpp.html#a13293a681188ed79fb799b7f9c173b83">CGAM</a>.<a class="code" href="classllvm_1_1AnalysisManager.html#a64b2a209a16bcd41375b5cae12690eaa">invalidate</a>(*<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, UR.<a class="code" href="structllvm_1_1CGSCCUpdateResult.html#ac113dcaae09e52d6da7235e0757757f0">CrossSCCPA</a>);</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160; </div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;        <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;          <span class="comment">// Check that we didn&#39;t miss any update scenario.</span></div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;          <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!InvalidSCCSet.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a1f475b0df44ebd7169e720fa1bf9169e">count</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>) &amp;&amp; <span class="stringliteral">&quot;Processing an invalid SCC!&quot;</span>);</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;          <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;begin() != <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;end() &amp;&amp; <span class="stringliteral">&quot;Cannot have an empty SCC!&quot;</span>);</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160; </div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;          LastUpdatedC = UR.<a class="code" href="structllvm_1_1CGSCCUpdateResult.html#ab4eb37646445da693553b9728143f31c">UpdatedC</a>;</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;          UR.<a class="code" href="structllvm_1_1CGSCCUpdateResult.html#ab4eb37646445da693553b9728143f31c">UpdatedC</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160; </div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;          <span class="comment">// Check the PassInstrumentation&#39;s BeforePass callbacks before</span></div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;          <span class="comment">// running the pass, skip its execution completely if asked to</span></div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;          <span class="comment">// (callback returns false).</span></div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;          <span class="keywordflow">if</span> (!PI.<a class="code" href="classllvm_1_1PassInstrumentation.html#aead32b9af4b66a742d37585c6d6b4cbc">runBeforePass</a>&lt;<a class="code" href="classllvm_1_1LazyCallGraph_1_1SCC.html">LazyCallGraph::SCC</a>&gt;(*<a class="code" href="classllvm_1_1Pass.html">Pass</a>, *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>))</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160; </div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;          <a class="code" href="classllvm_1_1PreservedAnalyses.html">PreservedAnalyses</a> PassPA = <a class="code" href="classllvm_1_1Pass.html">Pass</a>-&gt;run(*<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, <a class="code" href="PassBuilderBindings_8cpp.html#a13293a681188ed79fb799b7f9c173b83">CGAM</a>, CG, UR);</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160; </div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;          <span class="keywordflow">if</span> (UR.<a class="code" href="structllvm_1_1CGSCCUpdateResult.html#a6822f3e4bf1d3a55c967bf74b7419704">InvalidatedSCCs</a>.count(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>))</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;            PI.<a class="code" href="classllvm_1_1PassInstrumentation.html#a055d7d34f26a121bd6cd03073cda6529">runAfterPassInvalidated</a>&lt;<a class="code" href="classllvm_1_1LazyCallGraph_1_1SCC.html">LazyCallGraph::SCC</a>&gt;(*<a class="code" href="classllvm_1_1Pass.html">Pass</a>, PassPA);</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;          <span class="keywordflow">else</span></div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;            PI.<a class="code" href="classllvm_1_1PassInstrumentation.html#acec038dce9072b64301f6e5226c5579a">runAfterPass</a>&lt;<a class="code" href="classllvm_1_1LazyCallGraph_1_1SCC.html">LazyCallGraph::SCC</a>&gt;(*<a class="code" href="classllvm_1_1Pass.html">Pass</a>, *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, PassPA);</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160; </div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;          <span class="comment">// Update the SCC and RefSCC if necessary.</span></div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;          <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = UR.<a class="code" href="structllvm_1_1CGSCCUpdateResult.html#ab4eb37646445da693553b9728143f31c">UpdatedC</a> ? UR.<a class="code" href="structllvm_1_1CGSCCUpdateResult.html#ab4eb37646445da693553b9728143f31c">UpdatedC</a> : <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>;</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160; </div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;          <span class="keywordflow">if</span> (UR.<a class="code" href="structllvm_1_1CGSCCUpdateResult.html#ab4eb37646445da693553b9728143f31c">UpdatedC</a>) {</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;            <span class="comment">// If we&#39;re updating the SCC, also update the FAM inside the proxy&#39;s</span></div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;            <span class="comment">// result.</span></div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;            <a class="code" href="PassBuilderBindings_8cpp.html#a13293a681188ed79fb799b7f9c173b83">CGAM</a>.<a class="code" href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">getResult</a>&lt;<a class="code" href="classllvm_1_1FunctionAnalysisManagerCGSCCProxy.html">FunctionAnalysisManagerCGSCCProxy</a>&gt;(*<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, CG).updateFAM(</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;                <a class="code" href="PassBuilderBindings_8cpp.html#a83c7e5ca51099e4efa895791a02fb0ed">FAM</a>);</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;          }</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160; </div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;          <span class="comment">// Intersect with the cross-SCC preserved set to capture any</span></div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;          <span class="comment">// cross-SCC invalidation.</span></div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;          UR.<a class="code" href="structllvm_1_1CGSCCUpdateResult.html#ac113dcaae09e52d6da7235e0757757f0">CrossSCCPA</a>.<a class="code" href="classllvm_1_1PreservedAnalyses.html#a5f5dc18d0b2c71cba501f12975188e40">intersect</a>(PassPA);</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;          <span class="comment">// Intersect the preserved set so that invalidation of module</span></div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;          <span class="comment">// analyses will eventually occur when the module pass completes.</span></div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;          PA.intersect(PassPA);</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160; </div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;          <span class="comment">// If the CGSCC pass wasn&#39;t able to provide a valid updated SCC,</span></div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;          <span class="comment">// the current SCC may simply need to be skipped if invalid.</span></div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;          <span class="keywordflow">if</span> (UR.<a class="code" href="structllvm_1_1CGSCCUpdateResult.html#a6822f3e4bf1d3a55c967bf74b7419704">InvalidatedSCCs</a>.count(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)) {</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;            <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Skipping invalidated root or island SCC!\n&quot;</span>);</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;          }</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160; </div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;          <span class="comment">// Check that we didn&#39;t miss any update scenario.</span></div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;          <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;begin() != <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;end() &amp;&amp; <span class="stringliteral">&quot;Cannot have an empty SCC!&quot;</span>);</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160; </div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;          <span class="comment">// We handle invalidating the CGSCC analysis manager&#39;s information</span></div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;          <span class="comment">// for the (potentially updated) SCC here. Note that any other SCCs</span></div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;          <span class="comment">// whose structure has changed should have been invalidated by</span></div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;          <span class="comment">// whatever was updating the call graph. This SCC gets invalidated</span></div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;          <span class="comment">// late as it contains the nodes that were actively being</span></div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;          <span class="comment">// processed.</span></div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;          <a class="code" href="PassBuilderBindings_8cpp.html#a13293a681188ed79fb799b7f9c173b83">CGAM</a>.<a class="code" href="classllvm_1_1AnalysisManager.html#a64b2a209a16bcd41375b5cae12690eaa">invalidate</a>(*<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, PassPA);</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160; </div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;          <span class="comment">// The pass may have restructured the call graph and refined the</span></div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;          <span class="comment">// current SCC and/or RefSCC. We need to update our current SCC and</span></div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;          <span class="comment">// RefSCC pointers to follow these. Also, when the current SCC is</span></div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;          <span class="comment">// refined, re-run the SCC pass over the newly refined SCC in order</span></div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;          <span class="comment">// to observe the most precise SCC model available. This inherently</span></div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;          <span class="comment">// cannot cycle excessively as it only happens when we split SCCs</span></div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;          <span class="comment">// apart, at most converging on a DAG of single nodes.</span></div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;          <span class="comment">// FIXME: If we ever start having RefSCC passes, we&#39;ll want to</span></div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;          <span class="comment">// iterate there too.</span></div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;          <span class="keywordflow">if</span> (UR.<a class="code" href="structllvm_1_1CGSCCUpdateResult.html#ab4eb37646445da693553b9728143f31c">UpdatedC</a>)</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;            <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>()</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;                       &lt;&lt; <span class="stringliteral">&quot;Re-running SCC passes after a refinement of the &quot;</span></div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;                          <span class="stringliteral">&quot;current SCC: &quot;</span></div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;                       &lt;&lt; *UR.<a class="code" href="structllvm_1_1CGSCCUpdateResult.html#ab4eb37646445da693553b9728143f31c">UpdatedC</a> &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160; </div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;          <span class="comment">// Note that both `C` and `RC` may at this point refer to deleted,</span></div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;          <span class="comment">// invalid SCC and RefSCCs respectively. But we will short circuit</span></div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;          <span class="comment">// the processing when we check them in the loop above.</span></div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;        } <span class="keywordflow">while</span> (UR.<a class="code" href="structllvm_1_1CGSCCUpdateResult.html#ab4eb37646445da693553b9728143f31c">UpdatedC</a>);</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;      } <span class="keywordflow">while</span> (!CWorklist.<a class="code" href="classllvm_1_1PriorityWorklist.html#adc2ef5f0964becc28dfa58a7abc2f1e7">empty</a>());</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160; </div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;      <span class="comment">// We only need to keep internal inlined edge information within</span></div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;      <span class="comment">// a RefSCC, clear it to save on space and let the next time we visit</span></div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;      <span class="comment">// any of these functions have a fresh start.</span></div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;      InlinedInternalEdges.<a class="code" href="classllvm_1_1detail_1_1DenseSetImpl.html#a1fbf4d66a9eeaa9ade03e8febee097ee">clear</a>();</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    } <span class="keywordflow">while</span> (!RCWorklist.<a class="code" href="classllvm_1_1PriorityWorklist.html#adc2ef5f0964becc28dfa58a7abc2f1e7">empty</a>());</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;  }</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160; </div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;  <span class="comment">// By definition we preserve the call garph, all SCC analyses, and the</span></div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;  <span class="comment">// analysis proxies by handling them above and in any nested pass managers.</span></div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;  PA.preserveSet&lt;<a class="code" href="classllvm_1_1AllAnalysesOn.html">AllAnalysesOn&lt;LazyCallGraph::SCC&gt;</a>&gt;();</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;  PA.preserve&lt;<a class="code" href="classllvm_1_1LazyCallGraphAnalysis.html">LazyCallGraphAnalysis</a>&gt;();</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;  PA.preserve&lt;<a class="code" href="classllvm_1_1InnerAnalysisManagerProxy.html">CGSCCAnalysisManagerModuleProxy</a>&gt;();</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;  PA.preserve&lt;<a class="code" href="classllvm_1_1InnerAnalysisManagerProxy.html">FunctionAnalysisManagerModuleProxy</a>&gt;();</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;  <span class="keywordflow">return</span> PA;</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;}</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160; </div>
<div class="line"><a name="l00356"></a><span class="lineno"><a class="line" href="classllvm_1_1DevirtSCCRepeatedPass.html#a11597e1847c3156c4866aa0a43a1b71b">  356</a></span>&#160;<a class="code" href="classllvm_1_1PreservedAnalyses.html">PreservedAnalyses</a> <a class="code" href="classllvm_1_1DevirtSCCRepeatedPass.html#a11597e1847c3156c4866aa0a43a1b71b">DevirtSCCRepeatedPass::run</a>(<a class="code" href="classllvm_1_1LazyCallGraph_1_1SCC.html">LazyCallGraph::SCC</a> &amp;InitialC,</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;                                             <a class="code" href="classllvm_1_1AnalysisManager.html">CGSCCAnalysisManager</a> &amp;AM,</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;                                             <a class="code" href="classllvm_1_1LazyCallGraph.html">LazyCallGraph</a> &amp;CG,</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;                                             <a class="code" href="structllvm_1_1CGSCCUpdateResult.html">CGSCCUpdateResult</a> &amp;UR) {</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;  <a class="code" href="classllvm_1_1PreservedAnalyses.html">PreservedAnalyses</a> PA = <a class="code" href="classllvm_1_1PreservedAnalyses.html#a1258a1ff55557c27684010ebd7283712">PreservedAnalyses::all</a>();</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;  <a class="code" href="classllvm_1_1PassInstrumentation.html">PassInstrumentation</a> PI =</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;      AM.<a class="code" href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">getResult</a>&lt;<a class="code" href="classllvm_1_1PassInstrumentationAnalysis.html">PassInstrumentationAnalysis</a>&gt;(InitialC, CG);</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160; </div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;  <span class="comment">// The SCC may be refined while we are running passes over it, so set up</span></div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;  <span class="comment">// a pointer that we can update.</span></div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;  <a class="code" href="classllvm_1_1LazyCallGraph_1_1SCC.html">LazyCallGraph::SCC</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = &amp;InitialC;</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160; </div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;  <span class="comment">// Struct to track the counts of direct and indirect calls in each function</span></div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;  <span class="comment">// of the SCC.</span></div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;  <span class="keyword">struct </span>CallCount {</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    <span class="keywordtype">int</span> Direct;</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;    <span class="keywordtype">int</span> Indirect;</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;  };</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160; </div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;  <span class="comment">// Put value handles on all of the indirect calls and return the number of</span></div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;  <span class="comment">// direct calls for each function in the SCC.</span></div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;  <span class="keyword">auto</span> ScanSCC = [](<a class="code" href="classllvm_1_1LazyCallGraph_1_1SCC.html">LazyCallGraph::SCC</a> &amp;<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>,</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;                    <a class="code" href="structllvm_1_1SmallMapVector.html">SmallMapVector&lt;Value *, WeakTrackingVH, 16&gt;</a> &amp;CallHandles) {</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(CallHandles.empty() &amp;&amp; <span class="stringliteral">&quot;Must start with a clear set of handles.&quot;</span>);</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160; </div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    <a class="code" href="classllvm_1_1SmallDenseMap.html">SmallDenseMap&lt;Function *, CallCount&gt;</a> CallCounts;</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    CallCount CountLocal = {0, 0};</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1LazyCallGraph_1_1Node.html">LazyCallGraph::Node</a> &amp;<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a> : <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>) {</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;      CallCount &amp;Count =</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;          CallCounts.<a class="code" href="classllvm_1_1DenseMapBase.html#a99f811d53704275b4158c62a2dd138d9">insert</a>(std::make_pair(&amp;<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>.getFunction(), CountLocal))</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;              .first-&gt;second;</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : <a class="code" href="namespacellvm.html#a7e3e687ddfdcbacd404bcf17b917dd88">instructions</a>(<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>.getFunction()))</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;        <span class="keywordflow">if</span> (<span class="keyword">auto</span> *CB = dyn_cast&lt;CallBase&gt;(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;          <span class="keywordflow">if</span> (CB-&gt;getCalledFunction()) {</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;            ++Count.Direct;</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;          } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;            ++Count.Indirect;</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;            CallHandles.insert({CB, <a class="code" href="classllvm_1_1WeakTrackingVH.html">WeakTrackingVH</a>(CB)});</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;          }</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;        }</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    }</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160; </div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    <span class="keywordflow">return</span> CallCounts;</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;  };</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160; </div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;  UR.<a class="code" href="structllvm_1_1CGSCCUpdateResult.html#a0a4386bac07827eaf6916d7da69a1cd4">IndirectVHs</a>.clear();</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;  <span class="comment">// Populate the initial call handles and get the initial call counts.</span></div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;  <span class="keyword">auto</span> CallCounts = ScanSCC(*<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, UR.<a class="code" href="structllvm_1_1CGSCCUpdateResult.html#a0a4386bac07827eaf6916d7da69a1cd4">IndirectVHs</a>);</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160; </div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> Iteration = 0;; ++Iteration) {</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;    <span class="keywordflow">if</span> (!PI.<a class="code" href="classllvm_1_1PassInstrumentation.html#aead32b9af4b66a742d37585c6d6b4cbc">runBeforePass</a>&lt;<a class="code" href="classllvm_1_1LazyCallGraph_1_1SCC.html">LazyCallGraph::SCC</a>&gt;(*<a class="code" href="classllvm_1_1Pass.html">Pass</a>, *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>))</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160; </div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;    <a class="code" href="classllvm_1_1PreservedAnalyses.html">PreservedAnalyses</a> PassPA = <a class="code" href="classllvm_1_1Pass.html">Pass</a>-&gt;run(*<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, AM, CG, UR);</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160; </div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;    <span class="keywordflow">if</span> (UR.<a class="code" href="structllvm_1_1CGSCCUpdateResult.html#a6822f3e4bf1d3a55c967bf74b7419704">InvalidatedSCCs</a>.count(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>))</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;      PI.<a class="code" href="classllvm_1_1PassInstrumentation.html#a055d7d34f26a121bd6cd03073cda6529">runAfterPassInvalidated</a>&lt;<a class="code" href="classllvm_1_1LazyCallGraph_1_1SCC.html">LazyCallGraph::SCC</a>&gt;(*<a class="code" href="classllvm_1_1Pass.html">Pass</a>, PassPA);</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;      PI.<a class="code" href="classllvm_1_1PassInstrumentation.html#acec038dce9072b64301f6e5226c5579a">runAfterPass</a>&lt;<a class="code" href="classllvm_1_1LazyCallGraph_1_1SCC.html">LazyCallGraph::SCC</a>&gt;(*<a class="code" href="classllvm_1_1Pass.html">Pass</a>, *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, PassPA);</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160; </div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;    PA.<a class="code" href="classllvm_1_1PreservedAnalyses.html#a5f5dc18d0b2c71cba501f12975188e40">intersect</a>(PassPA);</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160; </div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;    <span class="comment">// If the SCC structure has changed, bail immediately and let the outer</span></div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;    <span class="comment">// CGSCC layer handle any iteration to reflect the refined structure.</span></div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;    <span class="keywordflow">if</span> (UR.<a class="code" href="structllvm_1_1CGSCCUpdateResult.html#ab4eb37646445da693553b9728143f31c">UpdatedC</a> &amp;&amp; UR.<a class="code" href="structllvm_1_1CGSCCUpdateResult.html#ab4eb37646445da693553b9728143f31c">UpdatedC</a> != <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160; </div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    <span class="comment">// If the CGSCC pass wasn&#39;t able to provide a valid updated SCC, the</span></div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    <span class="comment">// current SCC may simply need to be skipped if invalid.</span></div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    <span class="keywordflow">if</span> (UR.<a class="code" href="structllvm_1_1CGSCCUpdateResult.html#a6822f3e4bf1d3a55c967bf74b7419704">InvalidatedSCCs</a>.count(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)) {</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Skipping invalidated root or island SCC!\n&quot;</span>);</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    }</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160; </div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;begin() != <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;end() &amp;&amp; <span class="stringliteral">&quot;Cannot have an empty SCC!&quot;</span>);</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160; </div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    <span class="comment">// Check whether any of the handles were devirtualized.</span></div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    <span class="keywordtype">bool</span> Devirt = <a class="code" href="namespacellvm.html#a61d13d6824ec46c31260a4fd0997eda0">llvm::any_of</a>(UR.<a class="code" href="structllvm_1_1CGSCCUpdateResult.html#a0a4386bac07827eaf6916d7da69a1cd4">IndirectVHs</a>, [](<span class="keyword">auto</span> &amp;<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>) -&gt; <span class="keywordtype">bool</span> {</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;      if (P.second) {</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;        if (CallBase *CB = dyn_cast&lt;CallBase&gt;(P.second)) {</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;          if (CB-&gt;getCalledFunction()) {</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;            LLVM_DEBUG(dbgs() &lt;&lt; <span class="stringliteral">&quot;Found devirtualized call: &quot;</span> &lt;&lt; *CB &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;            return true;</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;          }</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;        }</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;      }</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;    });</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160; </div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;    <span class="comment">// Rescan to build up a new set of handles and count how many direct</span></div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;    <span class="comment">// calls remain. If we decide to iterate, this also sets up the input to</span></div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    <span class="comment">// the next iteration.</span></div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;    UR.<a class="code" href="structllvm_1_1CGSCCUpdateResult.html#a0a4386bac07827eaf6916d7da69a1cd4">IndirectVHs</a>.clear();</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;    <span class="keyword">auto</span> NewCallCounts = ScanSCC(*<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, UR.<a class="code" href="structllvm_1_1CGSCCUpdateResult.html#a0a4386bac07827eaf6916d7da69a1cd4">IndirectVHs</a>);</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160; </div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;    <span class="comment">// If we haven&#39;t found an explicit devirtualization already see if we</span></div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;    <span class="comment">// have decreased the number of indirect calls and increased the number</span></div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;    <span class="comment">// of direct calls for any function in the SCC. This can be fooled by all</span></div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;    <span class="comment">// manner of transformations such as DCE and other things, but seems to</span></div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;    <span class="comment">// work well in practice.</span></div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;    <span class="keywordflow">if</span> (!Devirt)</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;      <span class="comment">// Iterate over the keys in NewCallCounts, if Function also exists in</span></div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;      <span class="comment">// CallCounts, make the check below.</span></div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;Pair : NewCallCounts) {</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;        <span class="keyword">auto</span> &amp;CallCountNew = Pair.second;</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;        <span class="keyword">auto</span> CountIt = CallCounts.find(Pair.first);</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;        <span class="keywordflow">if</span> (CountIt != CallCounts.end()) {</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;          <span class="keyword">const</span> <span class="keyword">auto</span> &amp;CallCountOld = CountIt-&gt;second;</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;          <span class="keywordflow">if</span> (CallCountOld.Indirect &gt; CallCountNew.Indirect &amp;&amp;</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;              CallCountOld.Direct &lt; CallCountNew.Direct) {</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;            Devirt = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;          }</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;        }</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;      }</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160; </div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;    <span class="keywordflow">if</span> (!Devirt) {</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;    }</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160; </div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;    <span class="comment">// Otherwise, if we&#39;ve already hit our max, we&#39;re done.</span></div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;    <span class="keywordflow">if</span> (Iteration &gt;= MaxIterations) {</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a4c5e36e7ef4a6ce711850dbc37ebcbd1">AbortOnMaxDevirtIterationsReached</a>)</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;        <a class="code" href="namespacellvm.html#a7f2a3d4dcfee70225988aec53ff1e173">report_fatal_error</a>(<span class="stringliteral">&quot;Max devirtualization iterations reached&quot;</span>);</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;          <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Found another devirtualization after hitting the max &quot;</span></div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;                    <span class="stringliteral">&quot;number of repetitions (&quot;</span></div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;                 &lt;&lt; MaxIterations &lt;&lt; <span class="stringliteral">&quot;) on SCC: &quot;</span> &lt;&lt; *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;    }</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160; </div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;        <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Repeating an SCC pass after finding a devirtualization in: &quot;</span></div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;               &lt;&lt; *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160; </div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;    <span class="comment">// Move over the new call counts in preparation for iterating.</span></div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;    CallCounts = <a class="code" href="lib_2Target_2ARM_2README_8txt.html#ad3a99906764c35b2694ae90fa57744a5">std::move</a>(NewCallCounts);</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160; </div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;    <span class="comment">// Update the analysis manager with each run and intersect the total set</span></div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;    <span class="comment">// of preserved analyses so we&#39;re ready to iterate.</span></div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;    AM.<a class="code" href="classllvm_1_1AnalysisManager.html#a64b2a209a16bcd41375b5cae12690eaa">invalidate</a>(*<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, PassPA);</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;  }</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160; </div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;  <span class="comment">// Note that we don&#39;t add any preserved entries here unlike a more normal</span></div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;  <span class="comment">// &quot;pass manager&quot; because we only handle invalidation *between* iterations,</span></div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;  <span class="comment">// not after the last iteration.</span></div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;  <span class="keywordflow">return</span> PA;</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;}</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160; </div>
<div class="line"><a name="l00505"></a><span class="lineno"><a class="line" href="classllvm_1_1CGSCCToFunctionPassAdaptor.html#a44a083f826f2f2a189d3979eb43dd5ed">  505</a></span>&#160;<a class="code" href="classllvm_1_1PreservedAnalyses.html">PreservedAnalyses</a> <a class="code" href="namespacellvm_1_1dxil_1_1PointerTypeAnalysis.html#ae574a4c1d84b9e67bc94489f356805b4">CGSCCToFunctionPassAdaptor::run</a>(<a class="code" href="classllvm_1_1LazyCallGraph_1_1SCC.html">LazyCallGraph::SCC</a> &amp;<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>,</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;                                                  <a class="code" href="classllvm_1_1AnalysisManager.html">CGSCCAnalysisManager</a> &amp;AM,</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;                                                  <a class="code" href="classllvm_1_1LazyCallGraph.html">LazyCallGraph</a> &amp;CG,</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;                                                  <a class="code" href="structllvm_1_1CGSCCUpdateResult.html">CGSCCUpdateResult</a> &amp;UR) {</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;  <span class="comment">// Setup the function analysis manager from its proxy.</span></div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;  <a class="code" href="classllvm_1_1AnalysisManager.html">FunctionAnalysisManager</a> &amp;<a class="code" href="PassBuilderBindings_8cpp.html#a83c7e5ca51099e4efa895791a02fb0ed">FAM</a> =</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;      AM.<a class="code" href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">getResult</a>&lt;<a class="code" href="classllvm_1_1FunctionAnalysisManagerCGSCCProxy.html">FunctionAnalysisManagerCGSCCProxy</a>&gt;(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, CG).getManager();</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160; </div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;LazyCallGraph::Node *, 4&gt;</a> Nodes;</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1LazyCallGraph_1_1Node.html">LazyCallGraph::Node</a> &amp;<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a> : <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;    Nodes.push_back(&amp;<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>);</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160; </div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;  <span class="comment">// The SCC may get split while we are optimizing functions due to deleting</span></div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;  <span class="comment">// edges. If this happens, the current SCC can shift, so keep track of</span></div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;  <span class="comment">// a pointer we can overwrite.</span></div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;  <a class="code" href="classllvm_1_1LazyCallGraph_1_1SCC.html">LazyCallGraph::SCC</a> *CurrentC = &amp;<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>;</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160; </div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Running function passes across an SCC: &quot;</span> &lt;&lt; <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160; </div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;  <a class="code" href="classllvm_1_1PreservedAnalyses.html">PreservedAnalyses</a> PA = <a class="code" href="classllvm_1_1PreservedAnalyses.html#a1258a1ff55557c27684010ebd7283712">PreservedAnalyses::all</a>();</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1LazyCallGraph_1_1Node.html">LazyCallGraph::Node</a> *<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a> : Nodes) {</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;    <span class="comment">// Skip nodes from other SCCs. These may have been split out during</span></div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;    <span class="comment">// processing. We&#39;ll eventually visit those SCCs and pick up the nodes</span></div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;    <span class="comment">// there.</span></div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;    <span class="keywordflow">if</span> (CG.<a class="code" href="classllvm_1_1LazyCallGraph.html#a2aa26a48970b4c22a7d85cb0e7fff842">lookupSCC</a>(*<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>) != CurrentC)</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160; </div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;    <a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> = <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;getFunction();</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160; </div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;    <span class="keywordflow">if</span> (NoRerun &amp;&amp; <a class="code" href="PassBuilderBindings_8cpp.html#a83c7e5ca51099e4efa895791a02fb0ed">FAM</a>.<a class="code" href="classllvm_1_1AnalysisManager.html#a90a202de107720c5c6af3a5bc275d8f5">getCachedResult</a>&lt;<a class="code" href="classllvm_1_1ShouldNotRunFunctionPassesAnalysis.html">ShouldNotRunFunctionPassesAnalysis</a>&gt;(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>))</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160; </div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;    <a class="code" href="classllvm_1_1PassInstrumentation.html">PassInstrumentation</a> PI = <a class="code" href="PassBuilderBindings_8cpp.html#a83c7e5ca51099e4efa895791a02fb0ed">FAM</a>.<a class="code" href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">getResult</a>&lt;<a class="code" href="classllvm_1_1PassInstrumentationAnalysis.html">PassInstrumentationAnalysis</a>&gt;(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;    <span class="keywordflow">if</span> (!PI.<a class="code" href="classllvm_1_1PassInstrumentation.html#aead32b9af4b66a742d37585c6d6b4cbc">runBeforePass</a>&lt;<a class="code" href="classllvm_1_1Function.html">Function</a>&gt;(*<a class="code" href="classllvm_1_1Pass.html">Pass</a>, <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>))</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160; </div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;    <a class="code" href="classllvm_1_1PreservedAnalyses.html">PreservedAnalyses</a> PassPA = <a class="code" href="classllvm_1_1Pass.html">Pass</a>-&gt;run(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, <a class="code" href="PassBuilderBindings_8cpp.html#a83c7e5ca51099e4efa895791a02fb0ed">FAM</a>);</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;    PI.<a class="code" href="classllvm_1_1PassInstrumentation.html#acec038dce9072b64301f6e5226c5579a">runAfterPass</a>&lt;<a class="code" href="classllvm_1_1Function.html">Function</a>&gt;(*<a class="code" href="classllvm_1_1Pass.html">Pass</a>, <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, PassPA);</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160; </div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;    <span class="comment">// We know that the function pass couldn&#39;t have invalidated any other</span></div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;    <span class="comment">// function&#39;s analyses (that&#39;s the contract of a function pass), so</span></div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;    <span class="comment">// directly handle the function analysis manager&#39;s invalidation here.</span></div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;    <a class="code" href="PassBuilderBindings_8cpp.html#a83c7e5ca51099e4efa895791a02fb0ed">FAM</a>.<a class="code" href="classllvm_1_1AnalysisManager.html#a64b2a209a16bcd41375b5cae12690eaa">invalidate</a>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, EagerlyInvalidate ? <a class="code" href="classllvm_1_1PreservedAnalyses.html#a03797a73044a81cbc6a3409d6c72ee8f">PreservedAnalyses::none</a>() : PassPA);</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;    <span class="keywordflow">if</span> (NoRerun)</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;      (void)<a class="code" href="PassBuilderBindings_8cpp.html#a83c7e5ca51099e4efa895791a02fb0ed">FAM</a>.<a class="code" href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">getResult</a>&lt;<a class="code" href="classllvm_1_1ShouldNotRunFunctionPassesAnalysis.html">ShouldNotRunFunctionPassesAnalysis</a>&gt;(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160; </div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;    <span class="comment">// Then intersect the preserved set so that invalidation of module</span></div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;    <span class="comment">// analyses will eventually occur when the module pass completes.</span></div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;    PA.<a class="code" href="classllvm_1_1PreservedAnalyses.html#a5f5dc18d0b2c71cba501f12975188e40">intersect</a>(<a class="code" href="lib_2Target_2ARM_2README_8txt.html#ad3a99906764c35b2694ae90fa57744a5">std::move</a>(PassPA));</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160; </div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;    <span class="comment">// If the call graph hasn&#39;t been preserved, update it based on this</span></div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;    <span class="comment">// function pass. This may also update the current SCC to point to</span></div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;    <span class="comment">// a smaller, more refined SCC.</span></div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;    <span class="keyword">auto</span> PAC = PA.<a class="code" href="classllvm_1_1PreservedAnalyses.html#aa7a1b769f9c57010cc41d9c3bb9d39c6">getChecker</a>&lt;<a class="code" href="classllvm_1_1LazyCallGraphAnalysis.html">LazyCallGraphAnalysis</a>&gt;();</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;    <span class="keywordflow">if</span> (!PAC.preserved() &amp;&amp; !PAC.preservedSet&lt;<a class="code" href="classllvm_1_1AllAnalysesOn.html">AllAnalysesOn&lt;Module&gt;</a>&gt;()) {</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;      CurrentC = &amp;<a class="code" href="namespacellvm.html#a2a035e8c90cdcf756260ddd5ed0e9a26">updateCGAndAnalysisManagerForFunctionPass</a>(CG, *CurrentC, *<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>,</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;                                                            AM, UR, <a class="code" href="PassBuilderBindings_8cpp.html#a83c7e5ca51099e4efa895791a02fb0ed">FAM</a>);</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(CG.<a class="code" href="classllvm_1_1LazyCallGraph.html#a2aa26a48970b4c22a7d85cb0e7fff842">lookupSCC</a>(*<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>) == CurrentC &amp;&amp;</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;             <span class="stringliteral">&quot;Current SCC not updated to the SCC containing the current node!&quot;</span>);</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;    }</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;  }</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160; </div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;  <span class="comment">// By definition we preserve the proxy. And we preserve all analyses on</span></div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;  <span class="comment">// Functions. This precludes *any* invalidation of function analyses by the</span></div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;  <span class="comment">// proxy, but that&#39;s OK because we&#39;ve taken care to invalidate analyses in</span></div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;  <span class="comment">// the function analysis manager incrementally above.</span></div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;  PA.<a class="code" href="classllvm_1_1PreservedAnalyses.html#a937c42f77e161349ce0f999e448c7027">preserveSet</a>&lt;<a class="code" href="classllvm_1_1AllAnalysesOn.html">AllAnalysesOn&lt;Function&gt;</a>&gt;();</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;  PA.<a class="code" href="classllvm_1_1PreservedAnalyses.html#ad966bea18aa62ffb9e040509adc7c99f">preserve</a>&lt;<a class="code" href="classllvm_1_1FunctionAnalysisManagerCGSCCProxy.html">FunctionAnalysisManagerCGSCCProxy</a>&gt;();</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160; </div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;  <span class="comment">// We&#39;ve also ensured that we updated the call graph along the way.</span></div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;  PA.<a class="code" href="classllvm_1_1PreservedAnalyses.html#ad966bea18aa62ffb9e040509adc7c99f">preserve</a>&lt;<a class="code" href="classllvm_1_1LazyCallGraphAnalysis.html">LazyCallGraphAnalysis</a>&gt;();</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160; </div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;  <span class="keywordflow">return</span> PA;</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;}</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160; </div>
<div class="line"><a name="l00580"></a><span class="lineno"><a class="line" href="classllvm_1_1CGSCCAnalysisManagerModuleProxy_1_1Result.html#a0e5728ec78bc4596393912985f0d2c57">  580</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1InnerAnalysisManagerProxy_1_1Result.html#a47dfb02025fa19252d966afc602e6d5d">CGSCCAnalysisManagerModuleProxy::Result::invalidate</a>(</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;    <a class="code" href="classllvm_1_1Module.html">Module</a> &amp;M, <span class="keyword">const</span> <a class="code" href="classllvm_1_1PreservedAnalyses.html">PreservedAnalyses</a> &amp;PA,</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;    <a class="code" href="classllvm_1_1AnalysisManager_1_1Invalidator.html">ModuleAnalysisManager::Invalidator</a> &amp;Inv) {</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;  <span class="comment">// If literally everything is preserved, we&#39;re done.</span></div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;  <span class="keywordflow">if</span> (PA.<a class="code" href="classllvm_1_1PreservedAnalyses.html#a0eb77e2d868c69bebc48c07b49675748">areAllPreserved</a>())</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="comment">// This is still a valid proxy.</span></div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160; </div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;  <span class="comment">// If this proxy or the call graph is going to be invalidated, we also need</span></div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;  <span class="comment">// to clear all the keys coming from that analysis.</span></div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;  <span class="comment">// We also directly invalidate the FAM&#39;s module proxy if necessary, and if</span></div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;  <span class="comment">// that proxy isn&#39;t preserved we can&#39;t preserve this proxy either. We rely on</span></div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;  <span class="comment">// it to handle module -&gt; function analysis invalidation in the face of</span></div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;  <span class="comment">// structural changes and so if it&#39;s unavailable we conservatively clear the</span></div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;  <span class="comment">// entire SCC layer as well rather than trying to do invalidation ourselves.</span></div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;  <span class="keyword">auto</span> PAC = PA.<a class="code" href="classllvm_1_1PreservedAnalyses.html#aa7a1b769f9c57010cc41d9c3bb9d39c6">getChecker</a>&lt;<a class="code" href="classllvm_1_1InnerAnalysisManagerProxy.html">CGSCCAnalysisManagerModuleProxy</a>&gt;();</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;  <span class="keywordflow">if</span> (!(PAC.preserved() || PAC.preservedSet&lt;<a class="code" href="classllvm_1_1AllAnalysesOn.html">AllAnalysesOn&lt;Module&gt;</a>&gt;()) ||</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;      Inv.<a class="code" href="classllvm_1_1AnalysisManager_1_1Invalidator.html#a5e8e9230fa677542877d1f3c6ff95ae2">invalidate</a>&lt;<a class="code" href="classllvm_1_1LazyCallGraphAnalysis.html">LazyCallGraphAnalysis</a>&gt;(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>, PA) ||</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;      Inv.<a class="code" href="classllvm_1_1AnalysisManager_1_1Invalidator.html#a5e8e9230fa677542877d1f3c6ff95ae2">invalidate</a>&lt;<a class="code" href="classllvm_1_1InnerAnalysisManagerProxy.html">FunctionAnalysisManagerModuleProxy</a>&gt;(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>, PA)) {</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;    InnerAM-&gt;clear();</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160; </div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;    <span class="comment">// And the proxy itself should be marked as invalid so that we can observe</span></div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;    <span class="comment">// the new call graph. This isn&#39;t strictly necessary because we cheat</span></div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;    <span class="comment">// above, but is still useful.</span></div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;  }</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160; </div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;  <span class="comment">// Directly check if the relevant set is preserved so we can short circuit</span></div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;  <span class="comment">// invalidating SCCs below.</span></div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;  <span class="keywordtype">bool</span> AreSCCAnalysesPreserved =</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;      PA.<a class="code" href="classllvm_1_1PreservedAnalyses.html#a2de5aab2964e0b9266423d5f6c375051">allAnalysesInSetPreserved</a>&lt;<a class="code" href="classllvm_1_1AllAnalysesOn.html">AllAnalysesOn&lt;LazyCallGraph::SCC&gt;</a>&gt;();</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160; </div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;  <span class="comment">// Ok, we have a graph, so we can propagate the invalidation down into it.</span></div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;  <a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>-&gt;buildRefSCCs();</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;RC : <a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>-&gt;postorder_ref_sccs())</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> : RC) {</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;      std::optional&lt;PreservedAnalyses&gt; InnerPA;</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160; </div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;      <span class="comment">// Check to see whether the preserved set needs to be adjusted based on</span></div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;      <span class="comment">// module-level analysis invalidation triggering deferred invalidation</span></div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;      <span class="comment">// for this SCC.</span></div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> *OuterProxy =</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;              InnerAM-&gt;getCachedResult&lt;<a class="code" href="classllvm_1_1OuterAnalysisManagerProxy.html">ModuleAnalysisManagerCGSCCProxy</a>&gt;(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>))</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;        <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;OuterInvalidationPair :</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;             OuterProxy-&gt;getOuterInvalidations()) {</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;          <a class="code" href="structllvm_1_1AnalysisKey.html">AnalysisKey</a> *OuterAnalysisID = OuterInvalidationPair.first;</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;          <span class="keyword">const</span> <span class="keyword">auto</span> &amp;InnerAnalysisIDs = OuterInvalidationPair.second;</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;          <span class="keywordflow">if</span> (Inv.<a class="code" href="classllvm_1_1AnalysisManager_1_1Invalidator.html#a5e8e9230fa677542877d1f3c6ff95ae2">invalidate</a>(OuterAnalysisID, <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>, PA)) {</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;            <span class="keywordflow">if</span> (!InnerPA)</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;              InnerPA = PA;</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;            <span class="keywordflow">for</span> (<a class="code" href="structllvm_1_1AnalysisKey.html">AnalysisKey</a> *InnerAnalysisID : InnerAnalysisIDs)</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;              InnerPA-&gt;<a class="code" href="classllvm_1_1PreservedAnalyses.html#ac8a842a601c470fa22db443ac34d0a67">abandon</a>(InnerAnalysisID);</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;          }</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;        }</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160; </div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;      <span class="comment">// Check if we needed a custom PA set. If so we&#39;ll need to run the inner</span></div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;      <span class="comment">// invalidation.</span></div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;      <span class="keywordflow">if</span> (InnerPA) {</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;        InnerAM-&gt;invalidate(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, *InnerPA);</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;      }</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160; </div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;      <span class="comment">// Otherwise we only need to do invalidation if the original PA set didn&#39;t</span></div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;      <span class="comment">// preserve all SCC analyses.</span></div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;      <span class="keywordflow">if</span> (!AreSCCAnalysesPreserved)</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;        InnerAM-&gt;invalidate(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, PA);</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;    }</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160; </div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;  <span class="comment">// Return false to indicate that this result is still a valid proxy.</span></div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;}</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160; </div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;<span class="keyword">template</span> &lt;&gt;</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;<a class="code" href="classllvm_1_1InnerAnalysisManagerProxy_1_1Result.html">CGSCCAnalysisManagerModuleProxy::Result</a></div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;<a class="code" href="classllvm_1_1InnerAnalysisManagerProxy.html#a3add1957ddf106ee6dc26ce921d8efd4">CGSCCAnalysisManagerModuleProxy::run</a>(<a class="code" href="classllvm_1_1Module.html">Module</a> &amp;M, <a class="code" href="classllvm_1_1AnalysisManager.html">ModuleAnalysisManager</a> &amp;AM) {</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;  <span class="comment">// Force the Function analysis manager to also be available so that it can</span></div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;  <span class="comment">// be accessed in an SCC analysis and proxied onward to function passes.</span></div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;  <span class="comment">// FIXME: It is pretty awkward to just drop the result here and assert that</span></div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;  <span class="comment">// we can find it again later.</span></div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;  (void)AM.<a class="code" href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">getResult</a>&lt;<a class="code" href="classllvm_1_1InnerAnalysisManagerProxy.html">FunctionAnalysisManagerModuleProxy</a>&gt;(M);</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160; </div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1CGSCCAnalysisManagerModuleProxy_1_1Result.html">Result</a>(*InnerAM, AM.<a class="code" href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">getResult</a>&lt;<a class="code" href="classllvm_1_1LazyCallGraphAnalysis.html">LazyCallGraphAnalysis</a>&gt;(M));</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;}</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160; </div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;<a class="code" href="structllvm_1_1AnalysisKey.html">AnalysisKey</a> FunctionAnalysisManagerCGSCCProxy::Key;</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160; </div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;<a class="code" href="classllvm_1_1FunctionAnalysisManagerCGSCCProxy_1_1Result.html">FunctionAnalysisManagerCGSCCProxy::Result</a></div>
<div class="line"><a name="l00667"></a><span class="lineno"><a class="line" href="classllvm_1_1FunctionAnalysisManagerCGSCCProxy.html#a0b67cd81e4ea0371cae072a28008e469">  667</a></span>&#160;<a class="code" href="classllvm_1_1FunctionAnalysisManagerCGSCCProxy.html#a0b67cd81e4ea0371cae072a28008e469">FunctionAnalysisManagerCGSCCProxy::run</a>(<a class="code" href="classllvm_1_1LazyCallGraph_1_1SCC.html">LazyCallGraph::SCC</a> &amp;<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>,</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;                                       <a class="code" href="classllvm_1_1AnalysisManager.html">CGSCCAnalysisManager</a> &amp;AM,</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;                                       <a class="code" href="classllvm_1_1LazyCallGraph.html">LazyCallGraph</a> &amp;CG) {</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;  <span class="comment">// Note: unconditionally getting checking that the proxy exists may get it at</span></div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;  <span class="comment">// this point. There are cases when this is being run unnecessarily, but</span></div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;  <span class="comment">// it is cheap and having the assertion in place is more valuable.</span></div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;  <span class="keyword">auto</span> &amp;MAMProxy = AM.<a class="code" href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">getResult</a>&lt;<a class="code" href="classllvm_1_1OuterAnalysisManagerProxy.html">ModuleAnalysisManagerCGSCCProxy</a>&gt;(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, CG);</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;  <a class="code" href="classllvm_1_1Module.html">Module</a> &amp;<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a> = *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.begin()-&gt;getFunction().getParent();</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;  <span class="keywordtype">bool</span> ProxyExists =</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;      MAMProxy.cachedResultExists&lt;<a class="code" href="classllvm_1_1InnerAnalysisManagerProxy.html">FunctionAnalysisManagerModuleProxy</a>&gt;(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>);</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(ProxyExists &amp;&amp;</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;         <span class="stringliteral">&quot;The CGSCC pass manager requires that the FAM module proxy is run &quot;</span></div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;         <span class="stringliteral">&quot;on the module prior to entering the CGSCC walk&quot;</span>);</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;  (void)ProxyExists;</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160; </div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;  <span class="comment">// We just return an empty result. The caller will use the updateFAM interface</span></div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;  <span class="comment">// to correctly register the relevant FunctionAnalysisManager based on the</span></div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;  <span class="comment">// context in which this proxy is run.</span></div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1FunctionAnalysisManagerCGSCCProxy_1_1Result.html">Result</a>();</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;}</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160; </div>
<div class="line"><a name="l00688"></a><span class="lineno"><a class="line" href="classllvm_1_1FunctionAnalysisManagerCGSCCProxy_1_1Result.html#a1d080c4ca8dd19e09237ac942b78acc7">  688</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1FunctionAnalysisManagerCGSCCProxy_1_1Result.html#a1d080c4ca8dd19e09237ac942b78acc7">FunctionAnalysisManagerCGSCCProxy::Result::invalidate</a>(</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;    <a class="code" href="classllvm_1_1LazyCallGraph_1_1SCC.html">LazyCallGraph::SCC</a> &amp;<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, <span class="keyword">const</span> <a class="code" href="classllvm_1_1PreservedAnalyses.html">PreservedAnalyses</a> &amp;PA,</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;    <a class="code" href="classllvm_1_1AnalysisManager_1_1Invalidator.html">CGSCCAnalysisManager::Invalidator</a> &amp;Inv) {</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;  <span class="comment">// If literally everything is preserved, we&#39;re done.</span></div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;  <span class="keywordflow">if</span> (PA.<a class="code" href="classllvm_1_1PreservedAnalyses.html#a0eb77e2d868c69bebc48c07b49675748">areAllPreserved</a>())</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="comment">// This is still a valid proxy.</span></div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160; </div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;  <span class="comment">// All updates to preserve valid results are done below, so we don&#39;t need to</span></div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;  <span class="comment">// invalidate this proxy.</span></div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;  <span class="comment">// Note that in order to preserve this proxy, a module pass must ensure that</span></div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;  <span class="comment">// the FAM has been completely updated to handle the deletion of functions.</span></div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;  <span class="comment">// Specifically, any FAM-cached results for those functions need to have been</span></div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;  <span class="comment">// forcibly cleared. When preserved, this proxy will only invalidate results</span></div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;  <span class="comment">// cached on functions *still in the module* at the end of the module pass.</span></div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;  <span class="keyword">auto</span> PAC = PA.<a class="code" href="classllvm_1_1PreservedAnalyses.html#aa7a1b769f9c57010cc41d9c3bb9d39c6">getChecker</a>&lt;<a class="code" href="classllvm_1_1FunctionAnalysisManagerCGSCCProxy.html">FunctionAnalysisManagerCGSCCProxy</a>&gt;();</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;  <span class="keywordflow">if</span> (!PAC.preserved() &amp;&amp; !PAC.preservedSet&lt;<a class="code" href="classllvm_1_1AllAnalysesOn.html">AllAnalysesOn&lt;LazyCallGraph::SCC&gt;</a>&gt;()) {</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1LazyCallGraph_1_1Node.html">LazyCallGraph::Node</a> &amp;<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a> : <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;      <a class="code" href="PassBuilderBindings_8cpp.html#a83c7e5ca51099e4efa895791a02fb0ed">FAM</a>-&gt;<a class="code" href="classllvm_1_1AnalysisManager.html#a64b2a209a16bcd41375b5cae12690eaa">invalidate</a>(<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>.getFunction(), PA);</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160; </div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;  }</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160; </div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;  <span class="comment">// Directly check if the relevant set is preserved.</span></div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;  <span class="keywordtype">bool</span> AreFunctionAnalysesPreserved =</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;      PA.<a class="code" href="classllvm_1_1PreservedAnalyses.html#a2de5aab2964e0b9266423d5f6c375051">allAnalysesInSetPreserved</a>&lt;<a class="code" href="classllvm_1_1AllAnalysesOn.html">AllAnalysesOn&lt;Function&gt;</a>&gt;();</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160; </div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;  <span class="comment">// Now walk all the functions to see if any inner analysis invalidation is</span></div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;  <span class="comment">// necessary.</span></div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1LazyCallGraph_1_1Node.html">LazyCallGraph::Node</a> &amp;<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a> : <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>) {</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;    <a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> = <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>.getFunction();</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;    std::optional&lt;PreservedAnalyses&gt; FunctionPA;</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160; </div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;    <span class="comment">// Check to see whether the preserved set needs to be pruned based on</span></div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;    <span class="comment">// SCC-level analysis invalidation that triggers deferred invalidation</span></div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;    <span class="comment">// registered with the outer analysis manager proxy for this function.</span></div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> *OuterProxy =</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;            <a class="code" href="PassBuilderBindings_8cpp.html#a83c7e5ca51099e4efa895791a02fb0ed">FAM</a>-&gt;<a class="code" href="classllvm_1_1AnalysisManager.html#a90a202de107720c5c6af3a5bc275d8f5">getCachedResult</a>&lt;<a class="code" href="classllvm_1_1OuterAnalysisManagerProxy.html">CGSCCAnalysisManagerFunctionProxy</a>&gt;(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>))</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;OuterInvalidationPair :</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;           OuterProxy-&gt;getOuterInvalidations()) {</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;        <a class="code" href="structllvm_1_1AnalysisKey.html">AnalysisKey</a> *OuterAnalysisID = OuterInvalidationPair.first;</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;        <span class="keyword">const</span> <span class="keyword">auto</span> &amp;InnerAnalysisIDs = OuterInvalidationPair.second;</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;        <span class="keywordflow">if</span> (Inv.<a class="code" href="classllvm_1_1AnalysisManager_1_1Invalidator.html#a5e8e9230fa677542877d1f3c6ff95ae2">invalidate</a>(OuterAnalysisID, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, PA)) {</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;          <span class="keywordflow">if</span> (!FunctionPA)</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;            FunctionPA = PA;</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;          <span class="keywordflow">for</span> (<a class="code" href="structllvm_1_1AnalysisKey.html">AnalysisKey</a> *InnerAnalysisID : InnerAnalysisIDs)</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;            FunctionPA-&gt;<a class="code" href="classllvm_1_1PreservedAnalyses.html#ac8a842a601c470fa22db443ac34d0a67">abandon</a>(InnerAnalysisID);</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;        }</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;      }</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160; </div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;    <span class="comment">// Check if we needed a custom PA set, and if so we&#39;ll need to run the</span></div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;    <span class="comment">// inner invalidation.</span></div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;    <span class="keywordflow">if</span> (FunctionPA) {</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;      <a class="code" href="PassBuilderBindings_8cpp.html#a83c7e5ca51099e4efa895791a02fb0ed">FAM</a>-&gt;<a class="code" href="classllvm_1_1AnalysisManager.html#a64b2a209a16bcd41375b5cae12690eaa">invalidate</a>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, *FunctionPA);</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;    }</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160; </div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;    <span class="comment">// Otherwise we only need to do invalidation if the original PA set didn&#39;t</span></div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;    <span class="comment">// preserve all function analyses.</span></div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;    <span class="keywordflow">if</span> (!AreFunctionAnalysesPreserved)</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;      <a class="code" href="PassBuilderBindings_8cpp.html#a83c7e5ca51099e4efa895791a02fb0ed">FAM</a>-&gt;<a class="code" href="classllvm_1_1AnalysisManager.html#a64b2a209a16bcd41375b5cae12690eaa">invalidate</a>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, PA);</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;  }</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160; </div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;  <span class="comment">// Return false to indicate that this result is still a valid proxy.</span></div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;}</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160; </div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;} <span class="comment">// end namespace llvm</span></div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;<span class="comment">/// When a new SCC is created for the graph we first update the</span></div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;<span class="comment">/// FunctionAnalysisManager in the Proxy&#39;s result.</span></div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;<span class="comment">/// As there might be function analysis results cached for the functions now in</span></div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;<span class="comment">/// that SCC, two forms of  updates are required.</span></div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;<span class="comment">/// First, a proxy from the SCC to the FunctionAnalysisManager needs to be</span></div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;<span class="comment">/// created so that any subsequent invalidation events to the SCC are</span></div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;<span class="comment">/// propagated to the function analysis results cached for functions within it.</span></div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;<span class="comment">/// Second, if any of the functions within the SCC have analysis results with</span></div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;<span class="comment">/// outer analysis dependencies, then those dependencies would point to the</span></div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;<span class="comment">/// *wrong* SCC&#39;s analysis result. We forcibly invalidate the necessary</span></div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;<span class="comment">/// function analyses so that they don&#39;t retain stale handles.</span></div>
<div class="line"><a name="l00770"></a><span class="lineno"><a class="line" href="CGSCCPassManager_8cpp.html#ab31c9b14b5bd6245b789fb6ed28a7aeb">  770</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="CGSCCPassManager_8cpp.html#ab31c9b14b5bd6245b789fb6ed28a7aeb">updateNewSCCFunctionAnalyses</a>(<a class="code" href="classllvm_1_1LazyCallGraph_1_1SCC.html">LazyCallGraph::SCC</a> &amp;<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>,</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;                                         <a class="code" href="classllvm_1_1LazyCallGraph.html">LazyCallGraph</a> &amp;<a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>,</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;                                         <a class="code" href="classllvm_1_1AnalysisManager.html">CGSCCAnalysisManager</a> &amp;AM,</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;                                         <a class="code" href="classllvm_1_1AnalysisManager.html">FunctionAnalysisManager</a> &amp;<a class="code" href="PassBuilderBindings_8cpp.html#a83c7e5ca51099e4efa895791a02fb0ed">FAM</a>) {</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;  AM.<a class="code" href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">getResult</a>&lt;<a class="code" href="classllvm_1_1FunctionAnalysisManagerCGSCCProxy.html">FunctionAnalysisManagerCGSCCProxy</a>&gt;(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, <a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>).updateFAM(<a class="code" href="PassBuilderBindings_8cpp.html#a83c7e5ca51099e4efa895791a02fb0ed">FAM</a>);</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160; </div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;  <span class="comment">// Now walk the functions in this SCC and invalidate any function analysis</span></div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;  <span class="comment">// results that might have outer dependencies on an SCC analysis.</span></div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1LazyCallGraph_1_1Node.html">LazyCallGraph::Node</a> &amp;<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a> : <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>) {</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;    <a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> = <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>.getFunction();</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160; </div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;    <span class="keyword">auto</span> *OuterProxy =</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;        <a class="code" href="PassBuilderBindings_8cpp.html#a83c7e5ca51099e4efa895791a02fb0ed">FAM</a>.<a class="code" href="classllvm_1_1AnalysisManager.html#a90a202de107720c5c6af3a5bc275d8f5">getCachedResult</a>&lt;<a class="code" href="classllvm_1_1OuterAnalysisManagerProxy.html">CGSCCAnalysisManagerFunctionProxy</a>&gt;(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;    <span class="keywordflow">if</span> (!OuterProxy)</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;      <span class="comment">// No outer analyses were queried, nothing to do.</span></div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160; </div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;    <span class="comment">// Forcibly abandon all the inner analyses with dependencies, but</span></div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;    <span class="comment">// invalidate nothing else.</span></div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;    <span class="keyword">auto</span> PA = <a class="code" href="classllvm_1_1PreservedAnalyses.html#a1258a1ff55557c27684010ebd7283712">PreservedAnalyses::all</a>();</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;OuterInvalidationPair :</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;         OuterProxy-&gt;getOuterInvalidations()) {</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;      <span class="keyword">const</span> <span class="keyword">auto</span> &amp;InnerAnalysisIDs = OuterInvalidationPair.second;</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="structllvm_1_1AnalysisKey.html">AnalysisKey</a> *InnerAnalysisID : InnerAnalysisIDs)</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;        PA.abandon(InnerAnalysisID);</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;    }</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160; </div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;    <span class="comment">// Now invalidate anything we found.</span></div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;    <a class="code" href="PassBuilderBindings_8cpp.html#a83c7e5ca51099e4efa895791a02fb0ed">FAM</a>.<a class="code" href="classllvm_1_1AnalysisManager.html#a64b2a209a16bcd41375b5cae12690eaa">invalidate</a>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, PA);</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;  }</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;}</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;<span class="comment">/// Helper function to update both the \c CGSCCAnalysisManager \p AM and the \c</span></div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;<span class="comment">/// CGSCCPassManager&#39;s \c CGSCCUpdateResult \p UR based on a range of newly</span></div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;<span class="comment">/// added SCCs.</span></div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;<span class="comment">/// The range of new SCCs must be in postorder already. The SCC they were split</span></div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;<span class="comment">/// out of must be provided as \p C. The current node being mutated and</span></div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;<span class="comment">/// triggering updates must be passed as \p N.</span></div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;<span class="comment">/// This function returns the SCC containing \p N. This will be either \p C if</span></div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;<span class="comment">/// no new SCCs have been split out, or it will be the new SCC containing \p N.</span></div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;<span class="comment"></span><span class="keyword">template</span> &lt;<span class="keyword">typename</span> SCCRangeT&gt;</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1LazyCallGraph_1_1SCC.html">LazyCallGraph::SCC</a> *</div>
<div class="line"><a name="l00814"></a><span class="lineno"><a class="line" href="CGSCCPassManager_8cpp.html#a6ce7a37da9e388fd7cd8cc8fe53d3fc3">  814</a></span>&#160;<a class="code" href="CGSCCPassManager_8cpp.html#a6ce7a37da9e388fd7cd8cc8fe53d3fc3">incorporateNewSCCRange</a>(<span class="keyword">const</span> SCCRangeT &amp;NewSCCRange, <a class="code" href="classllvm_1_1LazyCallGraph.html">LazyCallGraph</a> &amp;<a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>,</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;                       <a class="code" href="classllvm_1_1LazyCallGraph_1_1Node.html">LazyCallGraph::Node</a> &amp;<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>, <a class="code" href="classllvm_1_1LazyCallGraph_1_1SCC.html">LazyCallGraph::SCC</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>,</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;                       <a class="code" href="classllvm_1_1AnalysisManager.html">CGSCCAnalysisManager</a> &amp;AM, <a class="code" href="structllvm_1_1CGSCCUpdateResult.html">CGSCCUpdateResult</a> &amp;UR) {</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;  <span class="keyword">using</span> <a class="code" href="namespacellvm_1_1AMDGPU_1_1CPol.html#a7d79a4b341da8ac60b91c1f4b1ea42c4aca1659af59093b2b14c2f8aad41e8e2a">SCC</a> = <a class="code" href="namespacellvm_1_1AMDGPU_1_1CPol.html#a7d79a4b341da8ac60b91c1f4b1ea42c4aca1659af59093b2b14c2f8aad41e8e2a">LazyCallGraph::SCC</a>;</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160; </div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;  <span class="keywordflow">if</span> (NewSCCRange.empty())</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>;</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160; </div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;  <span class="comment">// Add the current SCC to the worklist as its shape has changed.</span></div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;  UR.<a class="code" href="structllvm_1_1CGSCCUpdateResult.html#a277c9d45b3b20308e166249fd56598ed">CWorklist</a>.insert(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Enqueuing the existing SCC in the worklist:&quot;</span> &lt;&lt; *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a></div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;                    &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160; </div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;  <a class="code" href="namespacellvm_1_1AMDGPU_1_1CPol.html#a7d79a4b341da8ac60b91c1f4b1ea42c4aca1659af59093b2b14c2f8aad41e8e2a">SCC</a> *OldC = <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>;</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160; </div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;  <span class="comment">// Update the current SCC. Note that if we have new SCCs, this must actually</span></div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;  <span class="comment">// change the SCC.</span></div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> != &amp;*NewSCCRange.begin() &amp;&amp;</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;         <span class="stringliteral">&quot;Cannot insert new SCCs without changing current SCC!&quot;</span>);</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;  <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = &amp;*NewSCCRange.begin();</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>.lookupSCC(<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>) == <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> &amp;&amp; <span class="stringliteral">&quot;Failed to update current SCC!&quot;</span>);</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160; </div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;  <span class="comment">// If we had a cached FAM proxy originally, we will want to create more of</span></div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;  <span class="comment">// them for each SCC that was split off.</span></div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;  <a class="code" href="classllvm_1_1AnalysisManager.html">FunctionAnalysisManager</a> *<a class="code" href="PassBuilderBindings_8cpp.html#a83c7e5ca51099e4efa895791a02fb0ed">FAM</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *FAMProxy =</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;          AM.<a class="code" href="classllvm_1_1AnalysisManager.html#a90a202de107720c5c6af3a5bc275d8f5">getCachedResult</a>&lt;<a class="code" href="classllvm_1_1FunctionAnalysisManagerCGSCCProxy.html">FunctionAnalysisManagerCGSCCProxy</a>&gt;(*OldC))</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;    <a class="code" href="PassBuilderBindings_8cpp.html#a83c7e5ca51099e4efa895791a02fb0ed">FAM</a> = &amp;FAMProxy-&gt;getManager();</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160; </div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;  <span class="comment">// We need to propagate an invalidation call to all but the newly current SCC</span></div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;  <span class="comment">// because the outer pass manager won&#39;t do that for us after splitting them.</span></div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;  <span class="comment">// FIXME: We should accept a PreservedAnalysis from the CG updater so that if</span></div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;  <span class="comment">// there are preserved analysis we can avoid invalidating them here for</span></div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;  <span class="comment">// split-off SCCs.</span></div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;  <span class="comment">// We know however that this will preserve any FAM proxy so go ahead and mark</span></div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;  <span class="comment">// that.</span></div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;  <span class="keyword">auto</span> PA = PreservedAnalyses::allInSet&lt;AllAnalysesOn&lt;Function&gt;&gt;();</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;  PA.preserve&lt;<a class="code" href="classllvm_1_1FunctionAnalysisManagerCGSCCProxy.html">FunctionAnalysisManagerCGSCCProxy</a>&gt;();</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;  AM.<a class="code" href="classllvm_1_1AnalysisManager.html#a64b2a209a16bcd41375b5cae12690eaa">invalidate</a>(*OldC, PA);</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160; </div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;  <span class="comment">// Ensure the now-current SCC&#39;s function analyses are updated.</span></div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="PassBuilderBindings_8cpp.html#a83c7e5ca51099e4efa895791a02fb0ed">FAM</a>)</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;    <a class="code" href="CGSCCPassManager_8cpp.html#ab31c9b14b5bd6245b789fb6ed28a7aeb">updateNewSCCFunctionAnalyses</a>(*<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, <a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>, AM, *<a class="code" href="PassBuilderBindings_8cpp.html#a83c7e5ca51099e4efa895791a02fb0ed">FAM</a>);</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160; </div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="namespacellvm_1_1AMDGPU_1_1CPol.html#a7d79a4b341da8ac60b91c1f4b1ea42c4aca1659af59093b2b14c2f8aad41e8e2a">SCC</a> &amp;NewC : <a class="code" href="namespacellvm.html#a6b0ac1fa4f05de76413c5e0ca6334035">llvm::reverse</a>(<a class="code" href="namespacellvm.html#a02981de53fb6ffd384d39addc4d25f37">llvm::drop_begin</a>(NewSCCRange))) {</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> != &amp;NewC &amp;&amp; <span class="stringliteral">&quot;No need to re-visit the current SCC!&quot;</span>);</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(OldC != &amp;NewC &amp;&amp; <span class="stringliteral">&quot;Already handled the original SCC!&quot;</span>);</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;    UR.<a class="code" href="structllvm_1_1CGSCCUpdateResult.html#a277c9d45b3b20308e166249fd56598ed">CWorklist</a>.insert(&amp;NewC);</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Enqueuing a newly formed SCC:&quot;</span> &lt;&lt; NewC &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160; </div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;    <span class="comment">// Ensure new SCCs&#39; function analyses are updated.</span></div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="PassBuilderBindings_8cpp.html#a83c7e5ca51099e4efa895791a02fb0ed">FAM</a>)</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;      <a class="code" href="CGSCCPassManager_8cpp.html#ab31c9b14b5bd6245b789fb6ed28a7aeb">updateNewSCCFunctionAnalyses</a>(NewC, <a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>, AM, *<a class="code" href="PassBuilderBindings_8cpp.html#a83c7e5ca51099e4efa895791a02fb0ed">FAM</a>);</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160; </div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;    <span class="comment">// Also propagate a normal invalidation to the new SCC as only the current</span></div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;    <span class="comment">// will get one from the pass manager infrastructure.</span></div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;    AM.<a class="code" href="classllvm_1_1AnalysisManager.html#a64b2a209a16bcd41375b5cae12690eaa">invalidate</a>(NewC, PA);</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;  }</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>;</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;}</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160; </div>
<div class="line"><a name="l00875"></a><span class="lineno"><a class="line" href="CGSCCPassManager_8cpp.html#aa91915937eba4e815464954f5a7cca7b">  875</a></span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1LazyCallGraph_1_1SCC.html">LazyCallGraph::SCC</a> &amp;<a class="code" href="CGSCCPassManager_8cpp.html#aa91915937eba4e815464954f5a7cca7b">updateCGAndAnalysisManagerForPass</a>(</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;    <a class="code" href="classllvm_1_1LazyCallGraph.html">LazyCallGraph</a> &amp;<a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>, <a class="code" href="classllvm_1_1LazyCallGraph_1_1SCC.html">LazyCallGraph::SCC</a> &amp;InitialC, <a class="code" href="classllvm_1_1LazyCallGraph_1_1Node.html">LazyCallGraph::Node</a> &amp;<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>,</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;    <a class="code" href="classllvm_1_1AnalysisManager.html">CGSCCAnalysisManager</a> &amp;AM, <a class="code" href="structllvm_1_1CGSCCUpdateResult.html">CGSCCUpdateResult</a> &amp;UR,</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;    <a class="code" href="classllvm_1_1AnalysisManager.html">FunctionAnalysisManager</a> &amp;<a class="code" href="PassBuilderBindings_8cpp.html#a83c7e5ca51099e4efa895791a02fb0ed">FAM</a>, <span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1FunctionPass.html">FunctionPass</a>) {</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;  <span class="keyword">using</span> Node = <a class="code" href="classllvm_1_1LazyCallGraph_1_1Node.html">LazyCallGraph::Node</a>;</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;  <span class="keyword">using</span> Edge = <a class="code" href="classllvm_1_1LazyCallGraph_1_1Edge.html">LazyCallGraph::Edge</a>;</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;  <span class="keyword">using</span> <a class="code" href="namespacellvm_1_1AMDGPU_1_1CPol.html#a7d79a4b341da8ac60b91c1f4b1ea42c4aca1659af59093b2b14c2f8aad41e8e2a">SCC</a> = <a class="code" href="namespacellvm_1_1AMDGPU_1_1CPol.html#a7d79a4b341da8ac60b91c1f4b1ea42c4aca1659af59093b2b14c2f8aad41e8e2a">LazyCallGraph::SCC</a>;</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;  <span class="keyword">using</span> RefSCC = <a class="code" href="classllvm_1_1LazyCallGraph_1_1RefSCC.html">LazyCallGraph::RefSCC</a>;</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160; </div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;  RefSCC &amp;InitialRC = InitialC.<a class="code" href="classllvm_1_1LazyCallGraph_1_1SCC.html#aeaf5e7e3c29093d1493826491653cc6d">getOuterRefSCC</a>();</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;  <a class="code" href="namespacellvm_1_1AMDGPU_1_1CPol.html#a7d79a4b341da8ac60b91c1f4b1ea42c4aca1659af59093b2b14c2f8aad41e8e2a">SCC</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = &amp;InitialC;</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;  RefSCC *RC = &amp;InitialRC;</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> = <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>.getFunction();</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160; </div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;  <span class="comment">// Walk the function body and build up the set of retained, promoted, and</span></div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;  <span class="comment">// demoted edges.</span></div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Constant *, 16&gt;</a> Worklist;</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;Constant *, 16&gt;</a> Visited;</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;Node *, 16&gt;</a> RetainedEdges;</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;  <a class="code" href="classllvm_1_1SmallSetVector.html">SmallSetVector&lt;Node *, 4&gt;</a> PromotedRefTargets;</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;  <a class="code" href="classllvm_1_1SmallSetVector.html">SmallSetVector&lt;Node *, 4&gt;</a> DemotedCallTargets;</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;  <a class="code" href="classllvm_1_1SmallSetVector.html">SmallSetVector&lt;Node *, 4&gt;</a> NewCallEdges;</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;  <a class="code" href="classllvm_1_1SmallSetVector.html">SmallSetVector&lt;Node *, 4&gt;</a> NewRefEdges;</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160; </div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;  <span class="comment">// First walk the function and handle all called functions. We do this first</span></div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;  <span class="comment">// because if there is a single call edge, whether there are ref edges is</span></div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;  <span class="comment">// irrelevant.</span></div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : <a class="code" href="namespacellvm.html#a7e3e687ddfdcbacd404bcf17b917dd88">instructions</a>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>)) {</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> *CB = dyn_cast&lt;CallBase&gt;(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="AMDGPULibCalls_8cpp.html#a537c835c34f0b44b6ad2696643754390">Callee</a> = CB-&gt;getCalledFunction()) {</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;        <span class="keywordflow">if</span> (Visited.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(<a class="code" href="AMDGPULibCalls_8cpp.html#a537c835c34f0b44b6ad2696643754390">Callee</a>).second &amp;&amp; !<a class="code" href="AMDGPULibCalls_8cpp.html#a537c835c34f0b44b6ad2696643754390">Callee</a>-&gt;isDeclaration()) {</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;          Node *CalleeN = <a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>.lookup(*<a class="code" href="AMDGPULibCalls_8cpp.html#a537c835c34f0b44b6ad2696643754390">Callee</a>);</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;          <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(CalleeN &amp;&amp;</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;                 <span class="stringliteral">&quot;Visited function should already have an associated node&quot;</span>);</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;          Edge *<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;lookup(*CalleeN);</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;          <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> || !<a class="code" href="classllvm_1_1FunctionPass.html">FunctionPass</a>) &amp;&amp;</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;                 <span class="stringliteral">&quot;No function transformations should introduce *new* &quot;</span></div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;                 <span class="stringliteral">&quot;call edges! Any new calls should be modeled as &quot;</span></div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;                 <span class="stringliteral">&quot;promoted existing ref edges!&quot;</span>);</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;          <span class="keywordtype">bool</span> Inserted = RetainedEdges.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(CalleeN).second;</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;          (void)Inserted;</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;          <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Inserted &amp;&amp; <span class="stringliteral">&quot;We should never visit a function twice.&quot;</span>);</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;          <span class="keywordflow">if</span> (!<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>)</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;            NewCallEdges.<a class="code" href="classllvm_1_1SetVector.html#a72d928b7fc2c5f2d56c6ac0265fd9c6e">insert</a>(CalleeN);</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;          <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>-&gt;isCall())</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;            PromotedRefTargets.<a class="code" href="classllvm_1_1SetVector.html#a72d928b7fc2c5f2d56c6ac0265fd9c6e">insert</a>(CalleeN);</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;        }</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;        <span class="comment">// We can miss devirtualization if an indirect call is created then</span></div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;        <span class="comment">// promoted before updateCGAndAnalysisManagerForPass runs.</span></div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;        <span class="keyword">auto</span> *Entry = UR.<a class="code" href="structllvm_1_1CGSCCUpdateResult.html#a0a4386bac07827eaf6916d7da69a1cd4">IndirectVHs</a>.find(CB);</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;        <span class="keywordflow">if</span> (Entry == UR.<a class="code" href="structllvm_1_1CGSCCUpdateResult.html#a0a4386bac07827eaf6916d7da69a1cd4">IndirectVHs</a>.end())</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;          UR.<a class="code" href="structllvm_1_1CGSCCUpdateResult.html#a0a4386bac07827eaf6916d7da69a1cd4">IndirectVHs</a>.insert({CB, <a class="code" href="classllvm_1_1WeakTrackingVH.html">WeakTrackingVH</a>(CB)});</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!Entry-&gt;second)</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;          Entry-&gt;second = <a class="code" href="classllvm_1_1WeakTrackingVH.html">WeakTrackingVH</a>(CB);</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;      }</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;    }</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;  }</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160; </div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;  <span class="comment">// Now walk all references.</span></div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : <a class="code" href="namespacellvm.html#a7e3e687ddfdcbacd404bcf17b917dd88">instructions</a>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>))</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a> : <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.operand_values())</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> *OpC = dyn_cast&lt;Constant&gt;(<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>))</div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;        <span class="keywordflow">if</span> (Visited.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(OpC).second)</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;          Worklist.push_back(OpC);</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160; </div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;  <span class="keyword">auto</span> VisitRef = [&amp;](<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;Referee) {</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;    Node *RefereeN = <a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>.lookup(Referee);</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(RefereeN &amp;&amp;</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;           <span class="stringliteral">&quot;Visited function should already have an associated node&quot;</span>);</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;    Edge *<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;lookup(*RefereeN);</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> || !<a class="code" href="classllvm_1_1FunctionPass.html">FunctionPass</a>) &amp;&amp;</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;           <span class="stringliteral">&quot;No function transformations should introduce *new* ref &quot;</span></div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;           <span class="stringliteral">&quot;edges! Any new ref edges would require IPO which &quot;</span></div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;           <span class="stringliteral">&quot;function passes aren&#39;t allowed to do!&quot;</span>);</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;    <span class="keywordtype">bool</span> Inserted = RetainedEdges.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(RefereeN).second;</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;    (void)Inserted;</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Inserted &amp;&amp; <span class="stringliteral">&quot;We should never visit a function twice.&quot;</span>);</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>)</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;      NewRefEdges.<a class="code" href="classllvm_1_1SetVector.html#a72d928b7fc2c5f2d56c6ac0265fd9c6e">insert</a>(RefereeN);</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>-&gt;isCall())</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;      DemotedCallTargets.<a class="code" href="classllvm_1_1SetVector.html#a72d928b7fc2c5f2d56c6ac0265fd9c6e">insert</a>(RefereeN);</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;  };</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;  <a class="code" href="classllvm_1_1LazyCallGraph.html#a778d0494c2f8dec95d60160b1ce89a07">LazyCallGraph::visitReferences</a>(Worklist, Visited, VisitRef);</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160; </div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;  <span class="comment">// Handle new ref edges.</span></div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;  <span class="keywordflow">for</span> (Node *RefTarget : NewRefEdges) {</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;    <a class="code" href="namespacellvm_1_1AMDGPU_1_1CPol.html#a7d79a4b341da8ac60b91c1f4b1ea42c4aca1659af59093b2b14c2f8aad41e8e2a">SCC</a> &amp;TargetC = *<a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>.lookupSCC(*RefTarget);</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;    RefSCC &amp;TargetRC = TargetC.getOuterRefSCC();</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;    (void)TargetRC;</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;    <span class="comment">// TODO: This only allows trivial edges to be added for now.</span></div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;<span class="preprocessor">#ifdef EXPENSIVE_CHECKS</span></div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((RC == &amp;TargetRC ||</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;           RC-&gt;isAncestorOf(TargetRC)) &amp;&amp; <span class="stringliteral">&quot;New ref edge is not trivial!&quot;</span>);</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;    RC-&gt;insertTrivialRefEdge(<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>, *RefTarget);</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;  }</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160; </div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;  <span class="comment">// Handle new call edges.</span></div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;  <span class="keywordflow">for</span> (Node *CallTarget : NewCallEdges) {</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;    <a class="code" href="namespacellvm_1_1AMDGPU_1_1CPol.html#a7d79a4b341da8ac60b91c1f4b1ea42c4aca1659af59093b2b14c2f8aad41e8e2a">SCC</a> &amp;TargetC = *<a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>.lookupSCC(*CallTarget);</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;    RefSCC &amp;TargetRC = TargetC.getOuterRefSCC();</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;    (void)TargetRC;</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;    <span class="comment">// TODO: This only allows trivial edges to be added for now.</span></div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;<span class="preprocessor">#ifdef EXPENSIVE_CHECKS</span></div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((RC == &amp;TargetRC ||</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;           RC-&gt;isAncestorOf(TargetRC)) &amp;&amp; <span class="stringliteral">&quot;New call edge is not trivial!&quot;</span>);</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;    <span class="comment">// Add a trivial ref edge to be promoted later on alongside</span></div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;    <span class="comment">// PromotedRefTargets.</span></div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;    RC-&gt;insertTrivialRefEdge(<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>, *CallTarget);</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;  }</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160; </div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;  <span class="comment">// Include synthetic reference edges to known, defined lib functions.</span></div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> *LibFn : <a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>.getLibFunctions())</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;    <span class="comment">// While the list of lib functions doesn&#39;t have repeats, don&#39;t re-visit</span></div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;    <span class="comment">// anything handled above.</span></div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;    <span class="keywordflow">if</span> (!Visited.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a1f475b0df44ebd7169e720fa1bf9169e">count</a>(LibFn))</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;      VisitRef(*LibFn);</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160; </div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;  <span class="comment">// First remove all of the edges that are no longer present in this function.</span></div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;  <span class="comment">// The first step makes these edges uniformly ref edges and accumulates them</span></div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;  <span class="comment">// into a separate data structure so removal doesn&#39;t invalidate anything.</span></div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Node *, 4&gt;</a> DeadTargets;</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;  <span class="keywordflow">for</span> (Edge &amp;<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> : *<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>) {</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;    <span class="keywordflow">if</span> (RetainedEdges.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a1f475b0df44ebd7169e720fa1bf9169e">count</a>(&amp;<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>.getNode()))</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160; </div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;    <a class="code" href="namespacellvm_1_1AMDGPU_1_1CPol.html#a7d79a4b341da8ac60b91c1f4b1ea42c4aca1659af59093b2b14c2f8aad41e8e2a">SCC</a> &amp;TargetC = *<a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>.lookupSCC(<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>.getNode());</div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;    RefSCC &amp;TargetRC = TargetC.getOuterRefSCC();</div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;    <span class="keywordflow">if</span> (&amp;TargetRC == RC &amp;&amp; <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>.isCall()) {</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> != &amp;TargetC) {</div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;        <span class="comment">// For separate SCCs this is trivial.</span></div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;        RC-&gt;switchTrivialInternalEdgeToRef(<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>, <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>.getNode());</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;        <span class="comment">// Now update the call graph.</span></div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;        <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = <a class="code" href="CGSCCPassManager_8cpp.html#a6ce7a37da9e388fd7cd8cc8fe53d3fc3">incorporateNewSCCRange</a>(RC-&gt;switchInternalEdgeToRef(<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>, <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>.getNode()),</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;                                   <a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>, <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, AM, UR);</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;      }</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;    }</div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160; </div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;    <span class="comment">// Now that this is ready for actual removal, put it into our list.</span></div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;    DeadTargets.push_back(&amp;<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>.getNode());</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;  }</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;  <span class="comment">// Remove the easy cases quickly and actually pull them out of our list.</span></div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;  <a class="code" href="namespacellvm.html#ac9a7de5a04920954ac964059cfc428ad">llvm::erase_if</a>(DeadTargets, [&amp;](Node *TargetN) {</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;    <a class="code" href="namespacellvm_1_1AMDGPU_1_1CPol.html#a7d79a4b341da8ac60b91c1f4b1ea42c4aca1659af59093b2b14c2f8aad41e8e2a">SCC</a> &amp;TargetC = *<a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>.lookupSCC(*TargetN);</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;    RefSCC &amp;TargetRC = TargetC.getOuterRefSCC();</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160; </div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;    <span class="comment">// We can&#39;t trivially remove internal targets, so skip</span></div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;    <span class="comment">// those.</span></div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;    <span class="keywordflow">if</span> (&amp;TargetRC == RC)</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160; </div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Deleting outgoing edge from &#39;&quot;</span> &lt;&lt; <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a> &lt;&lt; <span class="stringliteral">&quot;&#39; to &#39;&quot;</span></div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;                      &lt;&lt; *TargetN &lt;&lt; <span class="stringliteral">&quot;&#39;\n&quot;</span>);</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;    RC-&gt;removeOutgoingEdge(<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>, *TargetN);</div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;  });</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160; </div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;  <span class="comment">// Now do a batch removal of the internal ref edges left.</span></div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;  <span class="keyword">auto</span> NewRefSCCs = RC-&gt;removeInternalRefEdge(<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>, DeadTargets);</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;  <span class="keywordflow">if</span> (!NewRefSCCs.empty()) {</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;    <span class="comment">// The old RefSCC is dead, mark it as such.</span></div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;    UR.<a class="code" href="structllvm_1_1CGSCCUpdateResult.html#a8a7665cb19a44a44646cde774c253352">InvalidatedRefSCCs</a>.insert(RC);</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160; </div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;    <span class="comment">// Note that we don&#39;t bother to invalidate analyses as ref-edge</span></div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;    <span class="comment">// connectivity is not really observable in any way and is intended</span></div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;    <span class="comment">// exclusively to be used for ordering of transforms rather than for</span></div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;    <span class="comment">// analysis conclusions.</span></div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160; </div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;    <span class="comment">// Update RC to the &quot;bottom&quot;.</span></div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>.lookupSCC(<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>) == <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> &amp;&amp; <span class="stringliteral">&quot;Changed the SCC when splitting RefSCCs!&quot;</span>);</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;    RC = &amp;<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;getOuterRefSCC();</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>.lookupRefSCC(<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>) == RC &amp;&amp; <span class="stringliteral">&quot;Failed to update current RefSCC!&quot;</span>);</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160; </div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;    <span class="comment">// The RC worklist is in reverse postorder, so we enqueue the new ones in</span></div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;    <span class="comment">// RPO except for the one which contains the source node as that is the</span></div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;    <span class="comment">// &quot;bottom&quot; we will continue processing in the bottom-up walk.</span></div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(NewRefSCCs.front() == RC &amp;&amp;</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;           <span class="stringliteral">&quot;New current RefSCC not first in the returned list!&quot;</span>);</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;    <span class="keywordflow">for</span> (RefSCC *NewRC : <a class="code" href="namespacellvm.html#a6b0ac1fa4f05de76413c5e0ca6334035">llvm::reverse</a>(<a class="code" href="namespacellvm.html#a02981de53fb6ffd384d39addc4d25f37">llvm::drop_begin</a>(NewRefSCCs))) {</div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(NewRC != RC &amp;&amp; <span class="stringliteral">&quot;Should not encounter the current RefSCC further &quot;</span></div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;                            <span class="stringliteral">&quot;in the postorder list of new RefSCCs.&quot;</span>);</div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;      UR.<a class="code" href="structllvm_1_1CGSCCUpdateResult.html#a08a47f71dcda17bd2f5617fda09ce8e1">RCWorklist</a>.insert(NewRC);</div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Enqueuing a new RefSCC in the update worklist: &quot;</span></div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;                        &lt;&lt; *NewRC &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;    }</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;  }</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160; </div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;  <span class="comment">// Next demote all the call edges that are now ref edges. This helps make</span></div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;  <span class="comment">// the SCCs small which should minimize the work below as we don&#39;t want to</span></div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;  <span class="comment">// form cycles that this would break.</span></div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;  <span class="keywordflow">for</span> (Node *RefTarget : DemotedCallTargets) {</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;    <a class="code" href="namespacellvm_1_1AMDGPU_1_1CPol.html#a7d79a4b341da8ac60b91c1f4b1ea42c4aca1659af59093b2b14c2f8aad41e8e2a">SCC</a> &amp;TargetC = *<a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>.lookupSCC(*RefTarget);</div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;    RefSCC &amp;TargetRC = TargetC.getOuterRefSCC();</div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160; </div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;    <span class="comment">// The easy case is when the target RefSCC is not this RefSCC. This is</span></div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;    <span class="comment">// only supported when the target RefSCC is a child of this RefSCC.</span></div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;    <span class="keywordflow">if</span> (&amp;TargetRC != RC) {</div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;<span class="preprocessor">#ifdef EXPENSIVE_CHECKS</span></div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(RC-&gt;isAncestorOf(TargetRC) &amp;&amp;</div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;             <span class="stringliteral">&quot;Cannot potentially form RefSCC cycles here!&quot;</span>);</div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;      RC-&gt;switchOutgoingEdgeToRef(<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>, *RefTarget);</div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Switch outgoing call edge to a ref edge from &#39;&quot;</span> &lt;&lt; <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a></div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;                        &lt;&lt; <span class="stringliteral">&quot;&#39; to &#39;&quot;</span> &lt;&lt; *RefTarget &lt;&lt; <span class="stringliteral">&quot;&#39;\n&quot;</span>);</div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;    }</div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160; </div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;    <span class="comment">// We are switching an internal call edge to a ref edge. This may split up</span></div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;    <span class="comment">// some SCCs.</span></div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> != &amp;TargetC) {</div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;      <span class="comment">// For separate SCCs this is trivial.</span></div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;      RC-&gt;switchTrivialInternalEdgeToRef(<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>, *RefTarget);</div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;    }</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160; </div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;    <span class="comment">// Now update the call graph.</span></div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;    <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = <a class="code" href="CGSCCPassManager_8cpp.html#a6ce7a37da9e388fd7cd8cc8fe53d3fc3">incorporateNewSCCRange</a>(RC-&gt;switchInternalEdgeToRef(<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>, *RefTarget), <a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>, <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>,</div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;                               <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, AM, UR);</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;  }</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160; </div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;  <span class="comment">// We added a ref edge earlier for new call edges, promote those to call edges</span></div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;  <span class="comment">// alongside PromotedRefTargets.</span></div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;  <span class="keywordflow">for</span> (Node *<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> : NewCallEdges)</div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;    PromotedRefTargets.<a class="code" href="classllvm_1_1SetVector.html#a72d928b7fc2c5f2d56c6ac0265fd9c6e">insert</a>(<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>);</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160; </div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;  <span class="comment">// Now promote ref edges into call edges.</span></div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;  <span class="keywordflow">for</span> (Node *CallTarget : PromotedRefTargets) {</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;    <a class="code" href="namespacellvm_1_1AMDGPU_1_1CPol.html#a7d79a4b341da8ac60b91c1f4b1ea42c4aca1659af59093b2b14c2f8aad41e8e2a">SCC</a> &amp;TargetC = *<a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>.lookupSCC(*CallTarget);</div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;    RefSCC &amp;TargetRC = TargetC.getOuterRefSCC();</div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160; </div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;    <span class="comment">// The easy case is when the target RefSCC is not this RefSCC. This is</span></div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;    <span class="comment">// only supported when the target RefSCC is a child of this RefSCC.</span></div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;    <span class="keywordflow">if</span> (&amp;TargetRC != RC) {</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;<span class="preprocessor">#ifdef EXPENSIVE_CHECKS</span></div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(RC-&gt;isAncestorOf(TargetRC) &amp;&amp;</div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;             <span class="stringliteral">&quot;Cannot potentially form RefSCC cycles here!&quot;</span>);</div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;      RC-&gt;switchOutgoingEdgeToCall(<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>, *CallTarget);</div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Switch outgoing ref edge to a call edge from &#39;&quot;</span> &lt;&lt; <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a></div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;                        &lt;&lt; <span class="stringliteral">&quot;&#39; to &#39;&quot;</span> &lt;&lt; *CallTarget &lt;&lt; <span class="stringliteral">&quot;&#39;\n&quot;</span>);</div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;    }</div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Switch an internal ref edge to a call edge from &#39;&quot;</span></div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;                      &lt;&lt; <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a> &lt;&lt; <span class="stringliteral">&quot;&#39; to &#39;&quot;</span> &lt;&lt; *CallTarget &lt;&lt; <span class="stringliteral">&quot;&#39;\n&quot;</span>);</div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160; </div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;    <span class="comment">// Otherwise we are switching an internal ref edge to a call edge. This</span></div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;    <span class="comment">// may merge away some SCCs, and we add those to the UpdateResult. We also</span></div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;    <span class="comment">// need to make sure to update the worklist in the event SCCs have moved</span></div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;    <span class="comment">// before the current one in the post-order sequence</span></div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;    <span class="keywordtype">bool</span> HasFunctionAnalysisProxy = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;    <span class="keyword">auto</span> InitialSCCIndex = RC-&gt;find(*<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>) - RC-&gt;begin();</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;    <span class="keywordtype">bool</span> FormedCycle = RC-&gt;switchInternalEdgeToCall(</div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;        <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>, *CallTarget, [&amp;](<a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;SCC *&gt;</a> MergedSCCs) {</div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;          <span class="keywordflow">for</span> (<a class="code" href="namespacellvm_1_1AMDGPU_1_1CPol.html#a7d79a4b341da8ac60b91c1f4b1ea42c4aca1659af59093b2b14c2f8aad41e8e2a">SCC</a> *MergedC : MergedSCCs) {</div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;            <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(MergedC != &amp;TargetC &amp;&amp; <span class="stringliteral">&quot;Cannot merge away the target SCC!&quot;</span>);</div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160; </div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;            HasFunctionAnalysisProxy |=</div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;                AM.<a class="code" href="classllvm_1_1AnalysisManager.html#a90a202de107720c5c6af3a5bc275d8f5">getCachedResult</a>&lt;<a class="code" href="classllvm_1_1FunctionAnalysisManagerCGSCCProxy.html">FunctionAnalysisManagerCGSCCProxy</a>&gt;(</div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;                    *MergedC) != <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160; </div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;            <span class="comment">// Mark that this SCC will no longer be valid.</span></div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;            UR.<a class="code" href="structllvm_1_1CGSCCUpdateResult.html#a6822f3e4bf1d3a55c967bf74b7419704">InvalidatedSCCs</a>.insert(MergedC);</div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160; </div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;            <span class="comment">// FIXME: We should really do a &#39;clear&#39; here to forcibly release</span></div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;            <span class="comment">// memory, but we don&#39;t have a good way of doing that and</span></div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;            <span class="comment">// preserving the function analyses.</span></div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;            <span class="keyword">auto</span> PA = PreservedAnalyses::allInSet&lt;AllAnalysesOn&lt;Function&gt;&gt;();</div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;            PA.preserve&lt;<a class="code" href="classllvm_1_1FunctionAnalysisManagerCGSCCProxy.html">FunctionAnalysisManagerCGSCCProxy</a>&gt;();</div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;            AM.<a class="code" href="classllvm_1_1AnalysisManager.html#a64b2a209a16bcd41375b5cae12690eaa">invalidate</a>(*MergedC, PA);</div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;          }</div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;        });</div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160; </div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;    <span class="comment">// If we formed a cycle by creating this call, we need to update more data</span></div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;    <span class="comment">// structures.</span></div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;    <span class="keywordflow">if</span> (FormedCycle) {</div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;      <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = &amp;TargetC;</div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>.lookupSCC(<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>) == <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> &amp;&amp; <span class="stringliteral">&quot;Failed to update current SCC!&quot;</span>);</div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160; </div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;      <span class="comment">// If one of the invalidated SCCs had a cached proxy to a function</span></div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;      <span class="comment">// analysis manager, we need to create a proxy in the new current SCC as</span></div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;      <span class="comment">// the invalidated SCCs had their functions moved.</span></div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;      <span class="keywordflow">if</span> (HasFunctionAnalysisProxy)</div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;        AM.<a class="code" href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">getResult</a>&lt;<a class="code" href="classllvm_1_1FunctionAnalysisManagerCGSCCProxy.html">FunctionAnalysisManagerCGSCCProxy</a>&gt;(*<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, <a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>).updateFAM(<a class="code" href="PassBuilderBindings_8cpp.html#a83c7e5ca51099e4efa895791a02fb0ed">FAM</a>);</div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160; </div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;      <span class="comment">// Any analyses cached for this SCC are no longer precise as the shape</span></div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;      <span class="comment">// has changed by introducing this cycle. However, we have taken care to</span></div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;      <span class="comment">// update the proxies so it remains valide.</span></div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;      <span class="keyword">auto</span> PA = PreservedAnalyses::allInSet&lt;AllAnalysesOn&lt;Function&gt;&gt;();</div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;      PA.preserve&lt;<a class="code" href="classllvm_1_1FunctionAnalysisManagerCGSCCProxy.html">FunctionAnalysisManagerCGSCCProxy</a>&gt;();</div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;      AM.<a class="code" href="classllvm_1_1AnalysisManager.html#a64b2a209a16bcd41375b5cae12690eaa">invalidate</a>(*<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, PA);</div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;    }</div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;    <span class="keyword">auto</span> NewSCCIndex = RC-&gt;find(*<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>) - RC-&gt;begin();</div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;    <span class="comment">// If we have actually moved an SCC to be topologically &quot;below&quot; the current</span></div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;    <span class="comment">// one due to merging, we will need to revisit the current SCC after</span></div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;    <span class="comment">// visiting those moved SCCs.</span></div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;    <span class="comment">// It is critical that we *do not* revisit the current SCC unless we</span></div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;    <span class="comment">// actually move SCCs in the process of merging because otherwise we may</span></div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;    <span class="comment">// form a cycle where an SCC is split apart, merged, split, merged and so</span></div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;    <span class="comment">// on infinitely.</span></div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;    <span class="keywordflow">if</span> (InitialSCCIndex &lt; NewSCCIndex) {</div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;      <span class="comment">// Put our current SCC back onto the worklist as we&#39;ll visit other SCCs</span></div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;      <span class="comment">// that are now definitively ordered prior to the current one in the</span></div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;      <span class="comment">// post-order sequence, and may end up observing more precise context to</span></div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;      <span class="comment">// optimize the current SCC.</span></div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;      UR.<a class="code" href="structllvm_1_1CGSCCUpdateResult.html#a277c9d45b3b20308e166249fd56598ed">CWorklist</a>.insert(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Enqueuing the existing SCC in the worklist: &quot;</span> &lt;&lt; *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a></div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;                        &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;      <span class="comment">// Enqueue in reverse order as we pop off the back of the worklist.</span></div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="namespacellvm_1_1AMDGPU_1_1CPol.html#a7d79a4b341da8ac60b91c1f4b1ea42c4aca1659af59093b2b14c2f8aad41e8e2a">SCC</a> &amp;MovedC : <a class="code" href="namespacellvm.html#a6b0ac1fa4f05de76413c5e0ca6334035">llvm::reverse</a>(<a class="code" href="namespacellvm.html#ad1a91b49e0c092818a0b82f6cc130a1b">make_range</a>(RC-&gt;begin() + InitialSCCIndex,</div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;                                                  RC-&gt;begin() + NewSCCIndex))) {</div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;        UR.<a class="code" href="structllvm_1_1CGSCCUpdateResult.html#a277c9d45b3b20308e166249fd56598ed">CWorklist</a>.insert(&amp;MovedC);</div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;        <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Enqueuing a newly earlier in post-order SCC: &quot;</span></div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;                          &lt;&lt; MovedC &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;      }</div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;    }</div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;  }</div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160; </div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!UR.<a class="code" href="structllvm_1_1CGSCCUpdateResult.html#a6822f3e4bf1d3a55c967bf74b7419704">InvalidatedSCCs</a>.count(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>) &amp;&amp; <span class="stringliteral">&quot;Invalidated the current SCC!&quot;</span>);</div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!UR.<a class="code" href="structllvm_1_1CGSCCUpdateResult.html#a8a7665cb19a44a44646cde774c253352">InvalidatedRefSCCs</a>.count(RC) &amp;&amp; <span class="stringliteral">&quot;Invalidated the current RefSCC!&quot;</span>);</div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(&amp;<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;getOuterRefSCC() == RC &amp;&amp; <span class="stringliteral">&quot;Current SCC not in current RefSCC!&quot;</span>);</div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160; </div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;  <span class="comment">// Record the current SCC for higher layers of the CGSCC pass manager now that</span></div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;  <span class="comment">// all the updates have been applied.</span></div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> != &amp;InitialC)</div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;    UR.<a class="code" href="structllvm_1_1CGSCCUpdateResult.html#ab4eb37646445da693553b9728143f31c">UpdatedC</a> = <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>;</div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160; </div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;  <span class="keywordflow">return</span> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>;</div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;}</div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160; </div>
<div class="line"><a name="l01208"></a><span class="lineno"><a class="line" href="namespacellvm.html#a2a035e8c90cdcf756260ddd5ed0e9a26"> 1208</a></span>&#160;<a class="code" href="classllvm_1_1LazyCallGraph_1_1SCC.html">LazyCallGraph::SCC</a> &amp;<a class="code" href="namespacellvm.html#a2a035e8c90cdcf756260ddd5ed0e9a26">llvm::updateCGAndAnalysisManagerForFunctionPass</a>(</div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;    <a class="code" href="classllvm_1_1LazyCallGraph.html">LazyCallGraph</a> &amp;<a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>, <a class="code" href="classllvm_1_1LazyCallGraph_1_1SCC.html">LazyCallGraph::SCC</a> &amp;InitialC, <a class="code" href="classllvm_1_1LazyCallGraph_1_1Node.html">LazyCallGraph::Node</a> &amp;<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>,</div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;    <a class="code" href="classllvm_1_1AnalysisManager.html">CGSCCAnalysisManager</a> &amp;AM, <a class="code" href="structllvm_1_1CGSCCUpdateResult.html">CGSCCUpdateResult</a> &amp;UR,</div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;    <a class="code" href="classllvm_1_1AnalysisManager.html">FunctionAnalysisManager</a> &amp;<a class="code" href="PassBuilderBindings_8cpp.html#a83c7e5ca51099e4efa895791a02fb0ed">FAM</a>) {</div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="CGSCCPassManager_8cpp.html#aa91915937eba4e815464954f5a7cca7b">updateCGAndAnalysisManagerForPass</a>(<a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>, InitialC, <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>, AM, UR, <a class="code" href="PassBuilderBindings_8cpp.html#a83c7e5ca51099e4efa895791a02fb0ed">FAM</a>,</div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;                                           <span class="comment">/* FunctionPass */</span> <span class="keyword">true</span>);</div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;}</div>
<div class="line"><a name="l01215"></a><span class="lineno"><a class="line" href="namespacellvm.html#a2e739fb4907159062aacbbafea669592"> 1215</a></span>&#160;<a class="code" href="classllvm_1_1LazyCallGraph_1_1SCC.html">LazyCallGraph::SCC</a> &amp;<a class="code" href="namespacellvm.html#a2e739fb4907159062aacbbafea669592">llvm::updateCGAndAnalysisManagerForCGSCCPass</a>(</div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;    <a class="code" href="classllvm_1_1LazyCallGraph.html">LazyCallGraph</a> &amp;<a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>, <a class="code" href="classllvm_1_1LazyCallGraph_1_1SCC.html">LazyCallGraph::SCC</a> &amp;InitialC, <a class="code" href="classllvm_1_1LazyCallGraph_1_1Node.html">LazyCallGraph::Node</a> &amp;<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>,</div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;    <a class="code" href="classllvm_1_1AnalysisManager.html">CGSCCAnalysisManager</a> &amp;AM, <a class="code" href="structllvm_1_1CGSCCUpdateResult.html">CGSCCUpdateResult</a> &amp;UR,</div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;    <a class="code" href="classllvm_1_1AnalysisManager.html">FunctionAnalysisManager</a> &amp;<a class="code" href="PassBuilderBindings_8cpp.html#a83c7e5ca51099e4efa895791a02fb0ed">FAM</a>) {</div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="CGSCCPassManager_8cpp.html#aa91915937eba4e815464954f5a7cca7b">updateCGAndAnalysisManagerForPass</a>(<a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>, InitialC, <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>, AM, UR, <a class="code" href="PassBuilderBindings_8cpp.html#a83c7e5ca51099e4efa895791a02fb0ed">FAM</a>,</div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;                                           <span class="comment">/* FunctionPass */</span> <span class="keyword">false</span>);</div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;}</div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="aclassllvm_1_1PreservedAnalyses_html"><div class="ttname"><a href="classllvm_1_1PreservedAnalyses.html">llvm::PreservedAnalyses</a></div><div class="ttdoc">A set of analyses that are preserved following a run of a transformation pass.</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00152">PassManager.h:152</a></div></div>
<div class="ttc" id="aclassllvm_1_1OuterAnalysisManagerProxy_html"><div class="ttname"><a href="classllvm_1_1OuterAnalysisManagerProxy.html">llvm::OuterAnalysisManagerProxy</a></div><div class="ttdoc">An analysis over an &quot;inner&quot; IR unit that provides access to an analysis manager over a &quot;outer&quot; IR uni...</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l01056">PassManager.h:1056</a></div></div>
<div class="ttc" id="anamespacellvm_html"><div class="ttname"><a href="namespacellvm.html">llvm</a></div><div class="ttdoc">This is an optimization pass for GlobalISel generic memory operations.</div><div class="ttdef"><b>Definition:</b> <a href="AddressRanges_8h_source.html#l00018">AddressRanges.h:18</a></div></div>
<div class="ttc" id="aclassllvm_1_1LazyCallGraph_html_a72787ab6acfbe504a11ca1d927513356"><div class="ttname"><a href="classllvm_1_1LazyCallGraph.html#a72787ab6acfbe504a11ca1d927513356">llvm::LazyCallGraph::buildRefSCCs</a></div><div class="ttdeci">void buildRefSCCs()</div><div class="ttdef"><b>Definition:</b> <a href="LazyCallGraph_8cpp_source.html#l01922">LazyCallGraph.cpp:1922</a></div></div>
<div class="ttc" id="alib_2Target_2X86_2README_8txt_html_ac88fe1d3a61b056a4f64fbbb156a62ff"><div class="ttname"><a href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a></div><div class="ttdeci">We currently emits eax Perhaps this is what we really should generate is Is imull three or four cycles eax eax The current instruction priority is based on pattern complexity The former is more complex because it folds a load so the latter will not be emitted Perhaps we should use AddedComplexity to give LEA32r a higher priority We should always try to match LEA first since the LEA matching code does some estimate to determine whether the match is profitable if we care more about code then imull is better It s two bytes shorter than movl leal On a Pentium M</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2X86_2README_8txt_source.html#l00252">README.txt:252</a></div></div>
<div class="ttc" id="aLazyValueInfo_8cpp_html_a739511554e31b02d233401957fd86f44"><div class="ttname"><a href="LazyValueInfo_8cpp.html#a739511554e31b02d233401957fd86f44">Pass</a></div><div class="ttdeci">print lazy value Lazy Value Info Printer Pass</div><div class="ttdef"><b>Definition:</b> <a href="LazyValueInfo_8cpp_source.html#l02067">LazyValueInfo.cpp:2067</a></div></div>
<div class="ttc" id="anamespacellvm_html_ad1a91b49e0c092818a0b82f6cc130a1b"><div class="ttname"><a href="namespacellvm.html#ad1a91b49e0c092818a0b82f6cc130a1b">llvm::make_range</a></div><div class="ttdeci">iterator_range&lt; T &gt; make_range(T x, T y)</div><div class="ttdoc">Convenience function for iterating over sub-ranges.</div><div class="ttdef"><b>Definition:</b> <a href="iterator__range_8h_source.html#l00053">iterator_range.h:53</a></div></div>
<div class="ttc" id="anamespacellvm_html_a02981de53fb6ffd384d39addc4d25f37"><div class="ttname"><a href="namespacellvm.html#a02981de53fb6ffd384d39addc4d25f37">llvm::drop_begin</a></div><div class="ttdeci">auto drop_begin(T &amp;&amp;RangeOrContainer, size_t N=1)</div><div class="ttdoc">Return a range covering RangeOrContainer with the first N elements excluded.</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l00386">STLExtras.h:386</a></div></div>
<div class="ttc" id="aclassllvm_1_1WeakTrackingVH_html"><div class="ttname"><a href="classllvm_1_1WeakTrackingVH.html">llvm::WeakTrackingVH</a></div><div class="ttdoc">Value handle that is nullable, but tries to track the Value.</div><div class="ttdef"><b>Definition:</b> <a href="ValueHandle_8h_source.html#l00204">ValueHandle.h:204</a></div></div>
<div class="ttc" id="astructllvm_1_1CGSCCUpdateResult_html_a6822f3e4bf1d3a55c967bf74b7419704"><div class="ttname"><a href="structllvm_1_1CGSCCUpdateResult.html#a6822f3e4bf1d3a55c967bf74b7419704">llvm::CGSCCUpdateResult::InvalidatedSCCs</a></div><div class="ttdeci">SmallPtrSetImpl&lt; LazyCallGraph::SCC * &gt; &amp; InvalidatedSCCs</div><div class="ttdoc">The set of invalidated SCCs which should be skipped if they are found in CWorklist.</div><div class="ttdef"><b>Definition:</b> <a href="CGSCCPassManager_8h_source.html#l00273">CGSCCPassManager.h:273</a></div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisManager_html_ab9d3d5412c20747fd0110a046604f09a"><div class="ttname"><a href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">llvm::AnalysisManager::getResult</a></div><div class="ttdeci">PassT::Result &amp; getResult(IRUnitT &amp;IR, ExtraArgTs... ExtraArgs)</div><div class="ttdoc">Get the result of an analysis pass for a given IR unit.</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00774">PassManager.h:774</a></div></div>
<div class="ttc" id="aInstIterator_8h_html"><div class="ttname"><a href="InstIterator_8h.html">InstIterator.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html"><div class="ttname"><a href="classllvm_1_1Function.html">llvm::Function</a></div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00059">Function.h:59</a></div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisManager_1_1Invalidator_html_a5e8e9230fa677542877d1f3c6ff95ae2"><div class="ttname"><a href="classllvm_1_1AnalysisManager_1_1Invalidator.html#a5e8e9230fa677542877d1f3c6ff95ae2">llvm::AnalysisManager::Invalidator::invalidate</a></div><div class="ttdeci">bool invalidate(IRUnitT &amp;IR, const PreservedAnalyses &amp;PA)</div><div class="ttdoc">Trigger the invalidation of some other analysis pass if not already handled and return whether it was...</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00679">PassManager.h:679</a></div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisManager_html_a64b2a209a16bcd41375b5cae12690eaa"><div class="ttname"><a href="classllvm_1_1AnalysisManager.html#a64b2a209a16bcd41375b5cae12690eaa">llvm::AnalysisManager::invalidate</a></div><div class="ttdeci">void invalidate(IRUnitT &amp;IR, const PreservedAnalyses &amp;PA)</div><div class="ttdoc">Invalidate cached analyses for an IR unit.</div><div class="ttdef"><b>Definition:</b> <a href="PassManagerImpl_8h_source.html#l00089">PassManagerImpl.h:89</a></div></div>
<div class="ttc" id="aREADME-SSE_8txt_html_a63d206a063eefcdf8c318ded97b65020"><div class="ttname"><a href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a></div><div class="ttdeci">This currently compiles esp xmm0 movsd esp eax eax esp ret We should use not the dag combiner This is because dagcombine2 needs to be able to see through the X86ISD::Wrapper which DAGCombine can t really do The code for turning x load into a single vector load is target independent and should be moved to the dag combiner The code for turning x load into a vector load can only handle a direct load from a global or a direct load from the stack It should be generalized to handle any load from P</div><div class="ttdef"><b>Definition:</b> <a href="README-SSE_8txt_source.html#l00411">README-SSE.txt:411</a></div></div>
<div class="ttc" id="anamespacellvm_html_a4c5e36e7ef4a6ce711850dbc37ebcbd1"><div class="ttname"><a href="namespacellvm.html#a4c5e36e7ef4a6ce711850dbc37ebcbd1">llvm::AbortOnMaxDevirtIterationsReached</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; AbortOnMaxDevirtIterationsReached(&quot;abort-on-max-devirt-iterations-reached&quot;, cl::desc(&quot;Abort when the max iterations for devirtualization CGSCC repeat &quot; &quot;pass is reached&quot;))</div></div>
<div class="ttc" id="aclassllvm_1_1PriorityWorklist_html_af74058cc2f8163b1d7128b467432a09b"><div class="ttname"><a href="classllvm_1_1PriorityWorklist.html#af74058cc2f8163b1d7128b467432a09b">llvm::PriorityWorklist&lt; T, SmallVector&lt; T, N &gt;, SmallDenseMap&lt; T, ptrdiff_t &gt; &gt;::insert</a></div><div class="ttdeci">bool insert(const T &amp;X)</div><div class="ttdoc">Insert a new element into the PriorityWorklist.</div><div class="ttdef"><b>Definition:</b> <a href="PriorityWorklist_8h_source.html#l00090">PriorityWorklist.h:90</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVector_html"><div class="ttname"><a href="classllvm_1_1SmallVector.html">llvm::SmallVector</a></div><div class="ttdoc">This is a 'vector' (really, a variable-sized array), optimized for the case when the array is small.</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l01199">SmallVector.h:1199</a></div></div>
<div class="ttc" id="aSupport_2ErrorHandling_8h_html"><div class="ttname"><a href="Support_2ErrorHandling_8h.html">ErrorHandling.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallDenseSet_html"><div class="ttname"><a href="classllvm_1_1SmallDenseSet.html">llvm::SmallDenseSet</a></div><div class="ttdoc">Implements a dense probed hash-table based set with some number of buckets stored inline.</div><div class="ttdef"><b>Definition:</b> <a href="DenseSet_8h_source.html#l00286">DenseSet.h:286</a></div></div>
<div class="ttc" id="aclassllvm_1_1InnerAnalysisManagerProxy_1_1Result_html"><div class="ttname"><a href="classllvm_1_1InnerAnalysisManagerProxy_1_1Result.html">llvm::InnerAnalysisManagerProxy::Result</a></div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00935">PassManager.h:935</a></div></div>
<div class="ttc" id="aclassllvm_1_1AllAnalysesOn_html"><div class="ttname"><a href="classllvm_1_1AllAnalysesOn.html">llvm::AllAnalysesOn</a></div><div class="ttdoc">This templated class represents &quot;all analyses that operate over &lt;a particular IR unit&gt;&quot; (e....</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00090">PassManager.h:90</a></div></div>
<div class="ttc" id="anamespacellvm_html_ac9a7de5a04920954ac964059cfc428ad"><div class="ttname"><a href="namespacellvm.html#ac9a7de5a04920954ac964059cfc428ad">llvm::erase_if</a></div><div class="ttdeci">void erase_if(Container &amp;C, UnaryPredicate P)</div><div class="ttdoc">Provide a container algorithm similar to C++ Library Fundamentals v2's erase_if which is equivalent t...</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l01998">STLExtras.h:1998</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallDenseMap_html"><div class="ttname"><a href="classllvm_1_1SmallDenseMap.html">llvm::SmallDenseMap</a></div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00880">DenseMap.h:880</a></div></div>
<div class="ttc" id="aclassllvm_1_1FunctionAnalysisManagerCGSCCProxy_html_a0b67cd81e4ea0371cae072a28008e469"><div class="ttname"><a href="classllvm_1_1FunctionAnalysisManagerCGSCCProxy.html#a0b67cd81e4ea0371cae072a28008e469">llvm::FunctionAnalysisManagerCGSCCProxy::run</a></div><div class="ttdeci">Result run(LazyCallGraph::SCC &amp;C, CGSCCAnalysisManager &amp;AM, LazyCallGraph &amp;)</div><div class="ttdoc">Computes the FunctionAnalysisManager and stores it in the result proxy.</div><div class="ttdef"><b>Definition:</b> <a href="CGSCCPassManager_8cpp_source.html#l00667">CGSCCPassManager.cpp:667</a></div></div>
<div class="ttc" id="aclassllvm_1_1PreservedAnalyses_html_ac8a842a601c470fa22db443ac34d0a67"><div class="ttname"><a href="classllvm_1_1PreservedAnalyses.html#ac8a842a601c470fa22db443ac34d0a67">llvm::PreservedAnalyses::abandon</a></div><div class="ttdeci">void abandon()</div><div class="ttdoc">Mark an analysis as abandoned.</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00206">PassManager.h:206</a></div></div>
<div class="ttc" id="aPassBuilderBindings_8cpp_html_a83c7e5ca51099e4efa895791a02fb0ed"><div class="ttname"><a href="PassBuilderBindings_8cpp.html#a83c7e5ca51099e4efa895791a02fb0ed">FAM</a></div><div class="ttdeci">FunctionAnalysisManager FAM</div><div class="ttdef"><b>Definition:</b> <a href="PassBuilderBindings_8cpp_source.html#l00059">PassBuilderBindings.cpp:59</a></div></div>
<div class="ttc" id="aPassBuilderBindings_8cpp_html_ae0d075136095c7ea6db40715be638cf3"><div class="ttname"><a href="PassBuilderBindings_8cpp.html#ae0d075136095c7ea6db40715be638cf3">Passes</a></div><div class="ttdeci">const char * Passes</div><div class="ttdef"><b>Definition:</b> <a href="PassBuilderBindings_8cpp_source.html#l00046">PassBuilderBindings.cpp:46</a></div></div>
<div class="ttc" id="aclassllvm_1_1ShouldNotRunFunctionPassesAnalysis_html"><div class="ttname"><a href="classllvm_1_1ShouldNotRunFunctionPassesAnalysis.html">llvm::ShouldNotRunFunctionPassesAnalysis</a></div><div class="ttdef"><b>Definition:</b> <a href="CGSCCPassManager_8h_source.html#l00528">CGSCCPassManager.h:528</a></div></div>
<div class="ttc" id="aclassllvm_1_1PreservedAnalyses_html_a03797a73044a81cbc6a3409d6c72ee8f"><div class="ttname"><a href="classllvm_1_1PreservedAnalyses.html#a03797a73044a81cbc6a3409d6c72ee8f">llvm::PreservedAnalyses::none</a></div><div class="ttdeci">static PreservedAnalyses none()</div><div class="ttdoc">Convenience factory function for the empty preserved set.</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00155">PassManager.h:155</a></div></div>
<div class="ttc" id="anamespacellvm_html_a45d5ebd4319006101352c5ee7cc16581"><div class="ttname"><a href="namespacellvm.html#a45d5ebd4319006101352c5ee7cc16581">llvm::ModuleAnalysisManager</a></div><div class="ttdeci">AnalysisManager&lt; Module &gt; ModuleAnalysisManager</div><div class="ttdoc">Convenience typedef for the Module analysis manager.</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00907">PassManager.h:907</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSet_html"><div class="ttname"><a href="classllvm_1_1SmallPtrSet.html">llvm::SmallPtrSet</a></div><div class="ttdoc">SmallPtrSet - This class implements a set which is optimized for holding SmallSize or less elements.</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00450">SmallPtrSet.h:450</a></div></div>
<div class="ttc" id="aSTLExtras_8h_html"><div class="ttname"><a href="STLExtras_8h.html">STLExtras.h</a></div></div>
<div class="ttc" id="aDebug_8h_html_a08efc68d15935eb8889400a46c3749ba"><div class="ttname"><a href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a></div><div class="ttdeci">#define LLVM_DEBUG(X)</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8h_source.html#l00101">Debug.h:101</a></div></div>
<div class="ttc" id="aMD5_8cpp_html_a96d73bbd7af15cb1fc38c3f4a3bd82e9"><div class="ttname"><a href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a></div><div class="ttdeci">#define F(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00055">MD5.cpp:55</a></div></div>
<div class="ttc" id="aclassllvm_1_1FunctionAnalysisManagerCGSCCProxy_1_1Result_html"><div class="ttname"><a href="classllvm_1_1FunctionAnalysisManagerCGSCCProxy_1_1Result.html">llvm::FunctionAnalysisManagerCGSCCProxy::Result</a></div><div class="ttdef"><b>Definition:</b> <a href="CGSCCPassManager_8h_source.html#l00395">CGSCCPassManager.h:395</a></div></div>
<div class="ttc" id="aclassllvm_1_1PreservedAnalyses_html_a5f5dc18d0b2c71cba501f12975188e40"><div class="ttname"><a href="classllvm_1_1PreservedAnalyses.html#a5f5dc18d0b2c71cba501f12975188e40">llvm::PreservedAnalyses::intersect</a></div><div class="ttdeci">void intersect(const PreservedAnalyses &amp;Arg)</div><div class="ttdoc">Intersect this set with another in place.</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00224">PassManager.h:224</a></div></div>
<div class="ttc" id="anamespacellvm_html_a7c46c742c31be54870e2038048e6b391"><div class="ttname"><a href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">llvm::dbgs</a></div><div class="ttdeci">raw_ostream &amp; dbgs()</div><div class="ttdoc">dbgs() - This returns a reference to a raw_ostream for debugging messages.</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8cpp_source.html#l00163">Debug.cpp:163</a></div></div>
<div class="ttc" id="aPriorityWorklist_8h_html"><div class="ttname"><a href="PriorityWorklist_8h.html">PriorityWorklist.h</a></div></div>
<div class="ttc" id="aIR_2Instruction_8h_html"><div class="ttname"><a href="IR_2Instruction_8h.html">Instruction.h</a></div></div>
<div class="ttc" id="aCommandLine_8h_html"><div class="ttname"><a href="CommandLine_8h.html">CommandLine.h</a></div></div>
<div class="ttc" id="astructllvm_1_1CGSCCUpdateResult_html_a0a4386bac07827eaf6916d7da69a1cd4"><div class="ttname"><a href="structllvm_1_1CGSCCUpdateResult.html#a0a4386bac07827eaf6916d7da69a1cd4">llvm::CGSCCUpdateResult::IndirectVHs</a></div><div class="ttdeci">SmallMapVector&lt; Value *, WeakTrackingVH, 16 &gt; IndirectVHs</div><div class="ttdoc">Weak VHs to keep track of indirect calls for the purposes of detecting devirtualization.</div><div class="ttdef"><b>Definition:</b> <a href="CGSCCPassManager_8h_source.html#l00317">CGSCCPassManager.h:317</a></div></div>
<div class="ttc" id="aclassllvm_1_1LazyCallGraph_1_1SCC_html"><div class="ttname"><a href="classllvm_1_1LazyCallGraph_1_1SCC.html">llvm::LazyCallGraph::SCC</a></div><div class="ttdoc">An SCC of the call graph.</div><div class="ttdef"><b>Definition:</b> <a href="LazyCallGraph_8h_source.html#l00419">LazyCallGraph.h:419</a></div></div>
<div class="ttc" id="aPassManagerImpl_8h_html"><div class="ttname"><a href="PassManagerImpl_8h.html">PassManagerImpl.h</a></div></div>
<div class="ttc" id="aBuiltinGCs_8cpp_html_a6742d2e0a668baf1196ec69e158d5f15"><div class="ttname"><a href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a></div><div class="ttdeci">static GCRegistry::Add&lt; CoreCLRGC &gt; E(&quot;coreclr&quot;, &quot;CoreCLR-compatible GC&quot;)</div></div>
<div class="ttc" id="aREADME__ALTIVEC_8txt_html_a9aacd9146afe44bf656cd664e2a88c8c"><div class="ttname"><a href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a></div><div class="ttdeci">(vector float) vec_cmpeq(*A, *B) C</div><div class="ttdef"><b>Definition:</b> <a href="README__ALTIVEC_8txt_source.html#l00086">README_ALTIVEC.txt:86</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html"><div class="ttname"><a href="classllvm_1_1Instruction.html">llvm::Instruction</a></div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00041">Instruction.h:41</a></div></div>
<div class="ttc" id="anamespacellvm_html_a7f2a3d4dcfee70225988aec53ff1e173"><div class="ttname"><a href="namespacellvm.html#a7f2a3d4dcfee70225988aec53ff1e173">llvm::report_fatal_error</a></div><div class="ttdeci">void report_fatal_error(Error Err, bool gen_crash_diag=true)</div><div class="ttdoc">Report a serious error, calling any installed error handler.</div><div class="ttdef"><b>Definition:</b> <a href="Testing_2Support_2Error_8cpp_source.html#l00145">Error.cpp:145</a></div></div>
<div class="ttc" id="aclassllvm_1_1LazyCallGraph_1_1RefSCC_html"><div class="ttname"><a href="classllvm_1_1LazyCallGraph_1_1RefSCC.html">llvm::LazyCallGraph::RefSCC</a></div><div class="ttdoc">A RefSCC of the call graph.</div><div class="ttdef"><b>Definition:</b> <a href="LazyCallGraph_8h_source.html#l00544">LazyCallGraph.h:544</a></div></div>
<div class="ttc" id="aSmallPtrSet_8h_html"><div class="ttname"><a href="SmallPtrSet_8h.html">SmallPtrSet.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1LazyCallGraph_html_a2aa26a48970b4c22a7d85cb0e7fff842"><div class="ttname"><a href="classllvm_1_1LazyCallGraph.html#a2aa26a48970b4c22a7d85cb0e7fff842">llvm::LazyCallGraph::lookupSCC</a></div><div class="ttdeci">SCC * lookupSCC(Node &amp;N) const</div><div class="ttdoc">Lookup a function's SCC in the graph.</div><div class="ttdef"><b>Definition:</b> <a href="LazyCallGraph_8h_source.html#l00979">LazyCallGraph.h:979</a></div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisManager_1_1Invalidator_html"><div class="ttname"><a href="classllvm_1_1AnalysisManager_1_1Invalidator.html">llvm::AnalysisManager::Invalidator</a></div><div class="ttdoc">API to communicate dependencies between analyses during invalidation.</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00661">PassManager.h:661</a></div></div>
<div class="ttc" id="aLazyCallGraph_8h_html"><div class="ttname"><a href="LazyCallGraph_8h.html">LazyCallGraph.h</a></div></div>
<div class="ttc" id="anamespacellvm_1_1dxil_1_1PointerTypeAnalysis_html_ae574a4c1d84b9e67bc94489f356805b4"><div class="ttname"><a href="namespacellvm_1_1dxil_1_1PointerTypeAnalysis.html#ae574a4c1d84b9e67bc94489f356805b4">llvm::dxil::PointerTypeAnalysis::run</a></div><div class="ttdeci">PointerTypeMap run(const Module &amp;M)</div><div class="ttdoc">Compute the PointerTypeMap for the module M.</div><div class="ttdef"><b>Definition:</b> <a href="PointerTypeAnalysis_8cpp_source.html#l00189">PointerTypeAnalysis.cpp:189</a></div></div>
<div class="ttc" id="aclassllvm_1_1FunctionAnalysisManagerCGSCCProxy_1_1Result_html_a1d080c4ca8dd19e09237ac942b78acc7"><div class="ttname"><a href="classllvm_1_1FunctionAnalysisManagerCGSCCProxy_1_1Result.html#a1d080c4ca8dd19e09237ac942b78acc7">llvm::FunctionAnalysisManagerCGSCCProxy::Result::invalidate</a></div><div class="ttdeci">bool invalidate(LazyCallGraph::SCC &amp;C, const PreservedAnalyses &amp;PA, CGSCCAnalysisManager::Invalidator &amp;Inv)</div><div class="ttdef"><b>Definition:</b> <a href="CGSCCPassManager_8cpp_source.html#l00688">CGSCCPassManager.cpp:688</a></div></div>
<div class="ttc" id="aRDFGraph_8cpp_html_af153ca0eadca8bc464492b7aba7feb00"><div class="ttname"><a href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a></div><div class="ttdeci">const DataFlowGraph &amp; G</div><div class="ttdef"><b>Definition:</b> <a href="RDFGraph_8cpp_source.html#l00200">RDFGraph.cpp:200</a></div></div>
<div class="ttc" id="astructllvm_1_1SmallMapVector_html"><div class="ttname"><a href="structllvm_1_1SmallMapVector.html">llvm::SmallMapVector</a></div><div class="ttdoc">A MapVector that performs no allocations if smaller than a certain size.</div><div class="ttdef"><b>Definition:</b> <a href="MapVector_8h_source.html#l00233">MapVector.h:233</a></div></div>
<div class="ttc" id="aclassllvm_1_1cl_1_1opt_html"><div class="ttname"><a href="classllvm_1_1cl_1_1opt.html">llvm::cl::opt&lt; bool &gt;</a></div></div>
<div class="ttc" id="anamespacellvm_html_a7e3e687ddfdcbacd404bcf17b917dd88"><div class="ttname"><a href="namespacellvm.html#a7e3e687ddfdcbacd404bcf17b917dd88">llvm::instructions</a></div><div class="ttdeci">inst_range instructions(Function *F)</div><div class="ttdef"><b>Definition:</b> <a href="InstIterator_8h_source.html#l00133">InstIterator.h:133</a></div></div>
<div class="ttc" id="astructllvm_1_1CGSCCUpdateResult_html_ab4eb37646445da693553b9728143f31c"><div class="ttname"><a href="structllvm_1_1CGSCCUpdateResult.html#ab4eb37646445da693553b9728143f31c">llvm::CGSCCUpdateResult::UpdatedC</a></div><div class="ttdeci">LazyCallGraph::SCC * UpdatedC</div><div class="ttdoc">If non-null, the updated current SCC being processed.</div><div class="ttdef"><b>Definition:</b> <a href="CGSCCPassManager_8h_source.html#l00283">CGSCCPassManager.h:283</a></div></div>
<div class="ttc" id="anamespacellvm_html_a2a035e8c90cdcf756260ddd5ed0e9a26"><div class="ttname"><a href="namespacellvm.html#a2a035e8c90cdcf756260ddd5ed0e9a26">llvm::updateCGAndAnalysisManagerForFunctionPass</a></div><div class="ttdeci">LazyCallGraph::SCC &amp; updateCGAndAnalysisManagerForFunctionPass(LazyCallGraph &amp;G, LazyCallGraph::SCC &amp;C, LazyCallGraph::Node &amp;N, CGSCCAnalysisManager &amp;AM, CGSCCUpdateResult &amp;UR, FunctionAnalysisManager &amp;FAM)</div><div class="ttdoc">Helper to update the call graph after running a function pass.</div><div class="ttdef"><b>Definition:</b> <a href="CGSCCPassManager_8cpp_source.html#l01208">CGSCCPassManager.cpp:1208</a></div></div>
<div class="ttc" id="aclassllvm_1_1PassInstrumentation_html_acec038dce9072b64301f6e5226c5579a"><div class="ttname"><a href="classllvm_1_1PassInstrumentation.html#acec038dce9072b64301f6e5226c5579a">llvm::PassInstrumentation::runAfterPass</a></div><div class="ttdeci">void runAfterPass(const PassT &amp;Pass, const IRUnitT &amp;IR, const PreservedAnalyses &amp;PA) const</div><div class="ttdoc">AfterPass instrumentation point - takes Pass instance that has just been executed and constant refere...</div><div class="ttdef"><b>Definition:</b> <a href="PassInstrumentation_8h_source.html#l00254">PassInstrumentation.h:254</a></div></div>
<div class="ttc" id="aclassllvm_1_1PreservedAnalyses_html_ad966bea18aa62ffb9e040509adc7c99f"><div class="ttname"><a href="classllvm_1_1PreservedAnalyses.html#ad966bea18aa62ffb9e040509adc7c99f">llvm::PreservedAnalyses::preserve</a></div><div class="ttdeci">void preserve()</div><div class="ttdoc">Mark an analysis as preserved.</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00173">PassManager.h:173</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPriorityWorklist_html"><div class="ttname"><a href="classllvm_1_1SmallPriorityWorklist.html">llvm::SmallPriorityWorklist</a></div><div class="ttdoc">A version of PriorityWorklist that selects small size optimized data structures for the vector and ma...</div><div class="ttdef"><b>Definition:</b> <a href="PriorityWorklist_8h_source.html#l00255">PriorityWorklist.h:255</a></div></div>
<div class="ttc" id="alib_2Target_2ARM_2README_8txt_html_ad3a99906764c35b2694ae90fa57744a5"><div class="ttname"><a href="lib_2Target_2ARM_2README_8txt.html#ad3a99906764c35b2694ae90fa57744a5">move</a></div><div class="ttdeci">compiles ldr LCPI1_0 ldr ldr mov lsr tst moveq r1 ldr LCPI1_1 and r0 bx lr It would be better to do something like to fold the shift into the conditional move</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2ARM_2README_8txt_source.html#l00546">README.txt:546</a></div></div>
<div class="ttc" id="aCGSCCPassManager_8h_html"><div class="ttname"><a href="CGSCCPassManager_8h.html">CGSCCPassManager.h</a></div></div>
<div class="ttc" id="astructllvm_1_1AnalysisKey_html"><div class="ttname"><a href="structllvm_1_1AnalysisKey.html">llvm::AnalysisKey</a></div><div class="ttdoc">A special type used by analysis passes to provide an address that identifies that particular analysis...</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00069">PassManager.h:69</a></div></div>
<div class="ttc" id="aMD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00058">MD5.cpp:58</a></div></div>
<div class="ttc" id="astructllvm_1_1CGSCCUpdateResult_html_a277c9d45b3b20308e166249fd56598ed"><div class="ttname"><a href="structllvm_1_1CGSCCUpdateResult.html#a277c9d45b3b20308e166249fd56598ed">llvm::CGSCCUpdateResult::CWorklist</a></div><div class="ttdeci">SmallPriorityWorklist&lt; LazyCallGraph::SCC *, 1 &gt; &amp; CWorklist</div><div class="ttdoc">Worklist of the SCCs queued for processing.</div><div class="ttdef"><b>Definition:</b> <a href="CGSCCPassManager_8h_source.html#l00257">CGSCCPassManager.h:257</a></div></div>
<div class="ttc" id="anamespacellvm_html_a8154638df88e4eaa568b67b23d463dac"><div class="ttname"><a href="namespacellvm.html#a8154638df88e4eaa568b67b23d463dac">llvm::make_early_inc_range</a></div><div class="ttdeci">iterator_range&lt; early_inc_iterator_impl&lt; detail::IterOfRange&lt; RangeT &gt; &gt; &gt; make_early_inc_range(RangeT &amp;&amp;Range)</div><div class="ttdoc">Make a range that does early increment to allow mutation of the underlying range without disrupting i...</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l00721">STLExtras.h:721</a></div></div>
<div class="ttc" id="aclassllvm_1_1PassInstrumentation_html_a055d7d34f26a121bd6cd03073cda6529"><div class="ttname"><a href="classllvm_1_1PassInstrumentation.html#a055d7d34f26a121bd6cd03073cda6529">llvm::PassInstrumentation::runAfterPassInvalidated</a></div><div class="ttdeci">void runAfterPassInvalidated(const PassT &amp;Pass, const PreservedAnalyses &amp;PA) const</div><div class="ttdoc">AfterPassInvalidated instrumentation point - takes Pass instance that has just been executed.</div><div class="ttdef"><b>Definition:</b> <a href="PassInstrumentation_8h_source.html#l00265">PassInstrumentation.h:265</a></div></div>
<div class="ttc" id="aArrayRef_8h_html"><div class="ttname"><a href="ArrayRef_8h.html">ArrayRef.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1PriorityWorklist_html_adc2ef5f0964becc28dfa58a7abc2f1e7"><div class="ttname"><a href="classllvm_1_1PriorityWorklist.html#adc2ef5f0964becc28dfa58a7abc2f1e7">llvm::PriorityWorklist&lt; T, SmallVector&lt; T, N &gt;, SmallDenseMap&lt; T, ptrdiff_t &gt; &gt;::empty</a></div><div class="ttdeci">bool empty() const</div><div class="ttdoc">Determine if the PriorityWorklist is empty or not.</div><div class="ttdef"><b>Definition:</b> <a href="PriorityWorklist_8h_source.html#l00067">PriorityWorklist.h:67</a></div></div>
<div class="ttc" id="aclassllvm_1_1InnerAnalysisManagerProxy_1_1Result_html_a47dfb02025fa19252d966afc602e6d5d"><div class="ttname"><a href="classllvm_1_1InnerAnalysisManagerProxy_1_1Result.html#a47dfb02025fa19252d966afc602e6d5d">llvm::InnerAnalysisManagerProxy::Result::invalidate</a></div><div class="ttdeci">bool invalidate(IRUnitT &amp;IR, const PreservedAnalyses &amp;PA, typename AnalysisManager&lt; IRUnitT, ExtraArgTs... &gt;::Invalidator &amp;Inv)</div><div class="ttdoc">Handler for invalidation of the outer IR unit, IRUnitT.</div></div>
<div class="ttc" id="aSILowerControlFlow_8cpp_html_a4868c5d81c5ccc98c47aeab6244346a0"><div class="ttname"><a href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a></div><div class="ttdeci">assert(ImpDefSCC.getReg()==AMDGPU::SCC &amp;&amp;ImpDefSCC.isDef())</div></div>
<div class="ttc" id="anamespacellvm_html_abd17dd16e74c968cf01d3d32ea486696"><div class="ttname"><a href="namespacellvm.html#abd17dd16e74c968cf01d3d32ea486696">llvm::CGSCCAnalysisManager</a></div><div class="ttdeci">AnalysisManager&lt; LazyCallGraph::SCC, LazyCallGraph &amp; &gt; CGSCCAnalysisManager</div><div class="ttdoc">The CGSCC analysis manager.</div><div class="ttdef"><b>Definition:</b> <a href="CGSCCPassManager_8h_source.html#l00123">CGSCCPassManager.h:123</a></div></div>
<div class="ttc" id="aclassllvm_1_1PassInstrumentation_html"><div class="ttname"><a href="classllvm_1_1PassInstrumentation.html">llvm::PassInstrumentation</a></div><div class="ttdoc">This class provides instrumentation entry points for the Pass Manager, doing calls to callbacks regis...</div><div class="ttdef"><b>Definition:</b> <a href="PassInstrumentation_8h_source.html#l00192">PassInstrumentation.h:192</a></div></div>
<div class="ttc" id="aiterator__range_8h_html"><div class="ttname"><a href="iterator__range_8h.html">iterator_range.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1PreservedAnalyses_html_a2de5aab2964e0b9266423d5f6c375051"><div class="ttname"><a href="classllvm_1_1PreservedAnalyses.html#a2de5aab2964e0b9266423d5f6c375051">llvm::PreservedAnalyses::allAnalysesInSetPreserved</a></div><div class="ttdeci">bool allAnalysesInSetPreserved() const</div><div class="ttdoc">Directly test whether a set of analyses is preserved.</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00335">PassManager.h:335</a></div></div>
<div class="ttc" id="aclassllvm_1_1Module_html"><div class="ttname"><a href="classllvm_1_1Module.html">llvm::Module</a></div><div class="ttdoc">A Module instance is used to store all the information related to an LLVM module.</div><div class="ttdef"><b>Definition:</b> <a href="Module_8h_source.html#l00065">Module.h:65</a></div></div>
<div class="ttc" id="aclassllvm_1_1LazyCallGraph_1_1Node_html"><div class="ttname"><a href="classllvm_1_1LazyCallGraph_1_1Node.html">llvm::LazyCallGraph::Node</a></div><div class="ttdoc">A node in the call graph.</div><div class="ttdef"><b>Definition:</b> <a href="LazyCallGraph_8h_source.html#l00315">LazyCallGraph.h:315</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSetImpl_html_a1f475b0df44ebd7169e720fa1bf9169e"><div class="ttname"><a href="classllvm_1_1SmallPtrSetImpl.html#a1f475b0df44ebd7169e720fa1bf9169e">llvm::SmallPtrSetImpl::count</a></div><div class="ttdeci">size_type count(ConstPtrType Ptr) const</div><div class="ttdoc">count - Return 1 if the specified pointer is in the set, 0 otherwise.</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00383">SmallPtrSet.h:383</a></div></div>
<div class="ttc" id="aCGSCCPassManager_8cpp_html_aa91915937eba4e815464954f5a7cca7b"><div class="ttname"><a href="CGSCCPassManager_8cpp.html#aa91915937eba4e815464954f5a7cca7b">updateCGAndAnalysisManagerForPass</a></div><div class="ttdeci">static LazyCallGraph::SCC &amp; updateCGAndAnalysisManagerForPass(LazyCallGraph &amp;G, LazyCallGraph::SCC &amp;InitialC, LazyCallGraph::Node &amp;N, CGSCCAnalysisManager &amp;AM, CGSCCUpdateResult &amp;UR, FunctionAnalysisManager &amp;FAM, bool FunctionPass)</div><div class="ttdef"><b>Definition:</b> <a href="CGSCCPassManager_8cpp_source.html#l00875">CGSCCPassManager.cpp:875</a></div></div>
<div class="ttc" id="aclassllvm_1_1SetVector_html_a72d928b7fc2c5f2d56c6ac0265fd9c6e"><div class="ttname"><a href="classllvm_1_1SetVector.html#a72d928b7fc2c5f2d56c6ac0265fd9c6e">llvm::SetVector&lt; T, SmallVector&lt; T, N &gt;, SmallDenseSet&lt; T, N &gt; &gt;::insert</a></div><div class="ttdeci">bool insert(const value_type &amp;X)</div><div class="ttdoc">Insert a new element into the SetVector.</div><div class="ttdef"><b>Definition:</b> <a href="SetVector_8h_source.html#l00141">SetVector.h:141</a></div></div>
<div class="ttc" id="aclassllvm_1_1detail_1_1DenseSetImpl_html_a1fbf4d66a9eeaa9ade03e8febee097ee"><div class="ttname"><a href="classllvm_1_1detail_1_1DenseSetImpl.html#a1fbf4d66a9eeaa9ade03e8febee097ee">llvm::detail::DenseSetImpl&lt; ValueT, SmallDenseMap&lt; ValueT, detail::DenseSetEmpty, 4, DenseMapInfo&lt; ValueT &gt;, detail::DenseSetPair&lt; ValueT &gt; &gt;, DenseMapInfo&lt; ValueT &gt; &gt;::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdef"><b>Definition:</b> <a href="DenseSet_8h_source.html#l00092">DenseSet.h:92</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AMDGPU_1_1CPol_html_a7d79a4b341da8ac60b91c1f4b1ea42c4aca1659af59093b2b14c2f8aad41e8e2a"><div class="ttname"><a href="namespacellvm_1_1AMDGPU_1_1CPol.html#a7d79a4b341da8ac60b91c1f4b1ea42c4aca1659af59093b2b14c2f8aad41e8e2a">llvm::AMDGPU::CPol::SCC</a></div><div class="ttdeci">@ SCC</div><div class="ttdef"><b>Definition:</b> <a href="SIDefines_8h_source.html#l00316">SIDefines.h:316</a></div></div>
<div class="ttc" id="aclassllvm_1_1LazyCallGraph_1_1Edge_html"><div class="ttname"><a href="classllvm_1_1LazyCallGraph_1_1Edge.html">llvm::LazyCallGraph::Edge</a></div><div class="ttdoc">A class used to represent edges in the call graph.</div><div class="ttdef"><b>Definition:</b> <a href="LazyCallGraph_8h_source.html#l00131">LazyCallGraph.h:131</a></div></div>
<div class="ttc" id="aclassllvm_1_1ArrayRef_html"><div class="ttname"><a href="classllvm_1_1ArrayRef.html">llvm::ArrayRef</a></div><div class="ttdoc">ArrayRef - Represent a constant reference to an array (0 or more elements consecutively in memory),...</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00033">APInt.h:33</a></div></div>
<div class="ttc" id="astructllvm_1_1CGSCCUpdateResult_html_ac113dcaae09e52d6da7235e0757757f0"><div class="ttname"><a href="structllvm_1_1CGSCCUpdateResult.html#ac113dcaae09e52d6da7235e0757757f0">llvm::CGSCCUpdateResult::CrossSCCPA</a></div><div class="ttdeci">PreservedAnalyses CrossSCCPA</div><div class="ttdoc">Preserved analyses across SCCs.</div><div class="ttdef"><b>Definition:</b> <a href="CGSCCPassManager_8h_source.html#l00298">CGSCCPassManager.h:298</a></div></div>
<div class="ttc" id="anamespacellvm_html_a61d13d6824ec46c31260a4fd0997eda0"><div class="ttname"><a href="namespacellvm.html#a61d13d6824ec46c31260a4fd0997eda0">llvm::any_of</a></div><div class="ttdeci">bool any_of(R &amp;&amp;range, UnaryPredicate P)</div><div class="ttdoc">Provide wrappers to std::any_of which take ranges instead of having to pass begin/end explicitly.</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l01742">STLExtras.h:1742</a></div></div>
<div class="ttc" id="aclassllvm_1_1PreservedAnalyses_html_a0eb77e2d868c69bebc48c07b49675748"><div class="ttname"><a href="classllvm_1_1PreservedAnalyses.html#a0eb77e2d868c69bebc48c07b49675748">llvm::PreservedAnalyses::areAllPreserved</a></div><div class="ttdeci">bool areAllPreserved() const</div><div class="ttdoc">Test whether all analyses are preserved (and none are abandoned).</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00327">PassManager.h:327</a></div></div>
<div class="ttc" id="aclassllvm_1_1DevirtSCCRepeatedPass_html_a11597e1847c3156c4866aa0a43a1b71b"><div class="ttname"><a href="classllvm_1_1DevirtSCCRepeatedPass.html#a11597e1847c3156c4866aa0a43a1b71b">llvm::DevirtSCCRepeatedPass::run</a></div><div class="ttdeci">PreservedAnalyses run(LazyCallGraph::SCC &amp;InitialC, CGSCCAnalysisManager &amp;AM, LazyCallGraph &amp;CG, CGSCCUpdateResult &amp;UR)</div><div class="ttdoc">Runs the wrapped pass up to MaxIterations on the SCC, iterating whenever an indirect call is refined.</div><div class="ttdef"><b>Definition:</b> <a href="CGSCCPassManager_8cpp_source.html#l00356">CGSCCPassManager.cpp:356</a></div></div>
<div class="ttc" id="aCGSCCPassManager_8cpp_html_a6ce7a37da9e388fd7cd8cc8fe53d3fc3"><div class="ttname"><a href="CGSCCPassManager_8cpp.html#a6ce7a37da9e388fd7cd8cc8fe53d3fc3">incorporateNewSCCRange</a></div><div class="ttdeci">static LazyCallGraph::SCC * incorporateNewSCCRange(const SCCRangeT &amp;NewSCCRange, LazyCallGraph &amp;G, LazyCallGraph::Node &amp;N, LazyCallGraph::SCC *C, CGSCCAnalysisManager &amp;AM, CGSCCUpdateResult &amp;UR)</div><div class="ttdoc">Helper function to update both the CGSCCAnalysisManager AM and the CGSCCPassManager's CGSCCUpdateResu...</div><div class="ttdef"><b>Definition:</b> <a href="CGSCCPassManager_8cpp_source.html#l00814">CGSCCPassManager.cpp:814</a></div></div>
<div class="ttc" id="aValueHandle_8h_html"><div class="ttname"><a href="ValueHandle_8h.html">ValueHandle.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseMapBase_html_a99f811d53704275b4158c62a2dd138d9"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#a99f811d53704275b4158c62a2dd138d9">llvm::DenseMapBase&lt; SmallDenseMap&lt; KeyT, ValueT, 4, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;, KeyT, ValueT, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;::insert</a></div><div class="ttdeci">std::pair&lt; iterator, bool &gt; insert(const std::pair&lt; KeyT, ValueT &gt; &amp;KV)</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00207">DenseMap.h:207</a></div></div>
<div class="ttc" id="aclassllvm_1_1PassManager_html"><div class="ttname"><a href="classllvm_1_1PassManager.html">llvm::PassManager</a></div><div class="ttdoc">Manages a sequence of passes over a particular unit of IR.</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00469">PassManager.h:469</a></div></div>
<div class="ttc" id="aAMDGPULibCalls_8cpp_html_a537c835c34f0b44b6ad2696643754390"><div class="ttname"><a href="AMDGPULibCalls_8cpp.html#a537c835c34f0b44b6ad2696643754390">Callee</a></div><div class="ttdeci">amdgpu Simplify well known AMD library false FunctionCallee Callee</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULibCalls_8cpp_source.html#l00187">AMDGPULibCalls.cpp:187</a></div></div>
<div class="ttc" id="aConstant_8h_html"><div class="ttname"><a href="Constant_8h.html">Constant.h</a></div></div>
<div class="ttc" id="astructllvm_1_1CGSCCUpdateResult_html"><div class="ttname"><a href="structllvm_1_1CGSCCUpdateResult.html">llvm::CGSCCUpdateResult</a></div><div class="ttdoc">Support structure for SCC passes to communicate updates the call graph back to the CGSCC pass manager...</div><div class="ttdef"><b>Definition:</b> <a href="CGSCCPassManager_8h_source.html#l00232">CGSCCPassManager.h:232</a></div></div>
<div class="ttc" id="aclassllvm_1_1PassInstrumentation_html_aead32b9af4b66a742d37585c6d6b4cbc"><div class="ttname"><a href="classllvm_1_1PassInstrumentation.html#aead32b9af4b66a742d37585c6d6b4cbc">llvm::PassInstrumentation::runBeforePass</a></div><div class="ttdeci">bool runBeforePass(const PassT &amp;Pass, const IRUnitT &amp;IR) const</div><div class="ttdoc">BeforePass instrumentation point - takes Pass instance to be executed and constant reference to IR it...</div><div class="ttdef"><b>Definition:</b> <a href="PassInstrumentation_8h_source.html#l00229">PassInstrumentation.h:229</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AMDGPU_1_1SendMsg_html_a8594419a4ddfad2c9a79279c490e466d"><div class="ttname"><a href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">llvm::AMDGPU::SendMsg::Op</a></div><div class="ttdeci">Op</div><div class="ttdef"><b>Definition:</b> <a href="SIDefines_8h_source.html#l00357">SIDefines.h:357</a></div></div>
<div class="ttc" id="aclassllvm_1_1PreservedAnalyses_html_a1258a1ff55557c27684010ebd7283712"><div class="ttname"><a href="classllvm_1_1PreservedAnalyses.html#a1258a1ff55557c27684010ebd7283712">llvm::PreservedAnalyses::all</a></div><div class="ttdeci">static PreservedAnalyses all()</div><div class="ttdoc">Construct a special preserved set that preserves all passes.</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00158">PassManager.h:158</a></div></div>
<div class="ttc" id="aclassllvm_1_1LazyCallGraphAnalysis_html"><div class="ttname"><a href="classllvm_1_1LazyCallGraphAnalysis.html">llvm::LazyCallGraphAnalysis</a></div><div class="ttdoc">An analysis pass which computes the call graph for a module.</div><div class="ttdef"><b>Definition:</b> <a href="LazyCallGraph_8h_source.html#l01257">LazyCallGraph.h:1257</a></div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisManager_html_a90a202de107720c5c6af3a5bc275d8f5"><div class="ttname"><a href="classllvm_1_1AnalysisManager.html#a90a202de107720c5c6af3a5bc275d8f5">llvm::AnalysisManager::getCachedResult</a></div><div class="ttdeci">PassT::Result * getCachedResult(IRUnitT &amp;IR) const</div><div class="ttdoc">Get the cached result of an analysis pass for a given IR unit.</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00793">PassManager.h:793</a></div></div>
<div class="ttc" id="aCasting_8h_html"><div class="ttname"><a href="Casting_8h.html">Casting.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1ModuleToPostOrderCGSCCPassAdaptor_html_a0ff99def687659818bdb4a25afd82c94"><div class="ttname"><a href="classllvm_1_1ModuleToPostOrderCGSCCPassAdaptor.html#a0ff99def687659818bdb4a25afd82c94">llvm::ModuleToPostOrderCGSCCPassAdaptor::run</a></div><div class="ttdeci">PreservedAnalyses run(Module &amp;M, ModuleAnalysisManager &amp;AM)</div><div class="ttdoc">Runs the CGSCC pass across every SCC in the module.</div><div class="ttdef"><b>Definition:</b> <a href="CGSCCPassManager_8cpp_source.html#l00138">CGSCCPassManager.cpp:138</a></div></div>
<div class="ttc" id="aPassManager_8h_html"><div class="ttname"><a href="PassManager_8h.html">PassManager.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1ShouldNotRunFunctionPassesAnalysis_html_abde8dd9ec00a754efca918461b8c7835"><div class="ttname"><a href="classllvm_1_1ShouldNotRunFunctionPassesAnalysis.html#abde8dd9ec00a754efca918461b8c7835">llvm::ShouldNotRunFunctionPassesAnalysis::Key</a></div><div class="ttdeci">static AnalysisKey Key</div><div class="ttdef"><b>Definition:</b> <a href="CGSCCPassManager_8h_source.html#l00531">CGSCCPassManager.h:531</a></div></div>
<div class="ttc" id="anamespacellvm_html_a2e739fb4907159062aacbbafea669592"><div class="ttname"><a href="namespacellvm.html#a2e739fb4907159062aacbbafea669592">llvm::updateCGAndAnalysisManagerForCGSCCPass</a></div><div class="ttdeci">LazyCallGraph::SCC &amp; updateCGAndAnalysisManagerForCGSCCPass(LazyCallGraph &amp;G, LazyCallGraph::SCC &amp;C, LazyCallGraph::Node &amp;N, CGSCCAnalysisManager &amp;AM, CGSCCUpdateResult &amp;UR, FunctionAnalysisManager &amp;FAM)</div><div class="ttdoc">Helper to update the call graph after running a CGSCC pass.</div><div class="ttdef"><b>Definition:</b> <a href="CGSCCPassManager_8cpp_source.html#l01215">CGSCCPassManager.cpp:1215</a></div></div>
<div class="ttc" id="aclassllvm_1_1PriorityWorklist_html_ab89ceb7695256590499de818b5360c54"><div class="ttname"><a href="classllvm_1_1PriorityWorklist.html#ab89ceb7695256590499de818b5360c54">llvm::PriorityWorklist&lt; T, SmallVector&lt; T, N &gt;, SmallDenseMap&lt; T, ptrdiff_t &gt; &gt;::pop_back_val</a></div><div class="ttdeci">T pop_back_val()</div><div class="ttdef"><b>Definition:</b> <a href="PriorityWorklist_8h_source.html#l00153">PriorityWorklist.h:153</a></div></div>
<div class="ttc" id="aclassllvm_1_1CGSCCAnalysisManagerModuleProxy_1_1Result_html"><div class="ttname"><a href="classllvm_1_1CGSCCAnalysisManagerModuleProxy_1_1Result.html">llvm::CGSCCAnalysisManagerModuleProxy::Result</a></div><div class="ttdoc">We need a specialized result for the CGSCCAnalysisManagerModuleProxy so it can have access to the cal...</div><div class="ttdef"><b>Definition:</b> <a href="CGSCCPassManager_8h_source.html#l00173">CGSCCPassManager.h:173</a></div></div>
<div class="ttc" id="aclassllvm_1_1Pass_html"><div class="ttname"><a href="classllvm_1_1Pass.html">llvm::Pass</a></div><div class="ttdoc">Pass interface - Implemented by all 'passes'.</div><div class="ttdef"><b>Definition:</b> <a href="Pass_8h_source.html#l00091">Pass.h:91</a></div></div>
<div class="ttc" id="aclassllvm_1_1PreservedAnalyses_html_a937c42f77e161349ce0f999e448c7027"><div class="ttname"><a href="classllvm_1_1PreservedAnalyses.html#a937c42f77e161349ce0f999e448c7027">llvm::PreservedAnalyses::preserveSet</a></div><div class="ttdeci">void preserveSet()</div><div class="ttdoc">Mark an analysis set as preserved.</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00188">PassManager.h:188</a></div></div>
<div class="ttc" id="aSmallVector_8h_html"><div class="ttname"><a href="SmallVector_8h.html">SmallVector.h</a></div></div>
<div class="ttc" id="aregcomp_8c_html_a0240ac851181b84ac374872dc5434ee4"><div class="ttname"><a href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a></div><div class="ttdeci">#define N</div></div>
<div class="ttc" id="aclassllvm_1_1LazyCallGraph_1_1SCC_html_aeaf5e7e3c29093d1493826491653cc6d"><div class="ttname"><a href="classllvm_1_1LazyCallGraph_1_1SCC.html#aeaf5e7e3c29093d1493826491653cc6d">llvm::LazyCallGraph::SCC::getOuterRefSCC</a></div><div class="ttdeci">RefSCC &amp; getOuterRefSCC() const</div><div class="ttdef"><b>Definition:</b> <a href="LazyCallGraph_8h_source.html#l00482">LazyCallGraph.h:482</a></div></div>
<div class="ttc" id="aclassllvm_1_1LazyCallGraph_html_a9e7736a620a28815327d9fae9387092c"><div class="ttname"><a href="classllvm_1_1LazyCallGraph.html#a9e7736a620a28815327d9fae9387092c">llvm::LazyCallGraph::postorder_ref_sccs</a></div><div class="ttdeci">iterator_range&lt; postorder_ref_scc_iterator &gt; postorder_ref_sccs()</div><div class="ttdef"><b>Definition:</b> <a href="LazyCallGraph_8h_source.html#l00968">LazyCallGraph.h:968</a></div></div>
<div class="ttc" id="anamespacellvm_html_a6b0ac1fa4f05de76413c5e0ca6334035"><div class="ttname"><a href="namespacellvm.html#a6b0ac1fa4f05de76413c5e0ca6334035">llvm::reverse</a></div><div class="ttdeci">auto reverse(ContainerTy &amp;&amp;C)</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l00484">STLExtras.h:484</a></div></div>
<div class="ttc" id="aCGSCCPassManager_8cpp_html_ab31c9b14b5bd6245b789fb6ed28a7aeb"><div class="ttname"><a href="CGSCCPassManager_8cpp.html#ab31c9b14b5bd6245b789fb6ed28a7aeb">updateNewSCCFunctionAnalyses</a></div><div class="ttdeci">static void updateNewSCCFunctionAnalyses(LazyCallGraph::SCC &amp;C, LazyCallGraph &amp;G, CGSCCAnalysisManager &amp;AM, FunctionAnalysisManager &amp;FAM)</div><div class="ttdoc">When a new SCC is created for the graph we first update the FunctionAnalysisManager in the Proxy's re...</div><div class="ttdef"><b>Definition:</b> <a href="CGSCCPassManager_8cpp_source.html#l00770">CGSCCPassManager.cpp:770</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallSetVector_html"><div class="ttname"><a href="classllvm_1_1SmallSetVector.html">llvm::SmallSetVector</a></div><div class="ttdoc">A SetVector that performs no allocations if smaller than a certain size.</div><div class="ttdef"><b>Definition:</b> <a href="SetVector_8h_source.html#l00300">SetVector.h:300</a></div></div>
<div class="ttc" id="aclassllvm_1_1PreservedAnalyses_html_aa7a1b769f9c57010cc41d9c3bb9d39c6"><div class="ttname"><a href="classllvm_1_1PreservedAnalyses.html#aa7a1b769f9c57010cc41d9c3bb9d39c6">llvm::PreservedAnalyses::getChecker</a></div><div class="ttdeci">PreservedAnalysisChecker getChecker() const</div><div class="ttdoc">Build a checker for this PreservedAnalyses and the specified analysis type.</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00310">PassManager.h:310</a></div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisManager_html"><div class="ttname"><a href="classllvm_1_1AnalysisManager.html">llvm::AnalysisManager</a></div><div class="ttdoc">A container for analyses that lazily runs them and caches their results.</div><div class="ttdef"><b>Definition:</b> <a href="InstructionSimplify_8h_source.html#l00042">InstructionSimplify.h:42</a></div></div>
<div class="ttc" id="aclassllvm_1_1PassInstrumentationAnalysis_html"><div class="ttname"><a href="classllvm_1_1PassInstrumentationAnalysis.html">llvm::PassInstrumentationAnalysis</a></div><div class="ttdoc">Pseudo-analysis pass that exposes the PassInstrumentation to pass managers.</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00594">PassManager.h:594</a></div></div>
<div class="ttc" id="aclassllvm_1_1InnerAnalysisManagerProxy_html"><div class="ttname"><a href="classllvm_1_1InnerAnalysisManagerProxy.html">llvm::InnerAnalysisManagerProxy</a></div><div class="ttdoc">An analysis over an &quot;outer&quot; IR unit that provides access to an analysis manager over an &quot;inner&quot; IR un...</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00931">PassManager.h:931</a></div></div>
<div class="ttc" id="aclassllvm_1_1FunctionPass_html"><div class="ttname"><a href="classllvm_1_1FunctionPass.html">llvm::FunctionPass</a></div><div class="ttdoc">FunctionPass class - This class is used to implement most global optimizations.</div><div class="ttdef"><b>Definition:</b> <a href="Pass_8h_source.html#l00308">Pass.h:308</a></div></div>
<div class="ttc" id="astructllvm_1_1cl_1_1desc_html"><div class="ttname"><a href="structllvm_1_1cl_1_1desc.html">llvm::cl::desc</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00411">CommandLine.h:411</a></div></div>
<div class="ttc" id="aclassllvm_1_1LazyCallGraph_html"><div class="ttname"><a href="classllvm_1_1LazyCallGraph.html">llvm::LazyCallGraph</a></div><div class="ttdoc">A lazily constructed view of the call graph of a module.</div><div class="ttdef"><b>Definition:</b> <a href="LazyCallGraph_8h_source.html#l00110">LazyCallGraph.h:110</a></div></div>
<div class="ttc" id="araw__ostream_8h_html"><div class="ttname"><a href="raw__ostream_8h.html">raw_ostream.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1LazyCallGraph_html_a778d0494c2f8dec95d60160b1ce89a07"><div class="ttname"><a href="classllvm_1_1LazyCallGraph.html#a778d0494c2f8dec95d60160b1ce89a07">llvm::LazyCallGraph::visitReferences</a></div><div class="ttdeci">static void visitReferences(SmallVectorImpl&lt; Constant * &gt; &amp;Worklist, SmallPtrSetImpl&lt; Constant * &gt; &amp;Visited, function_ref&lt; void(Function &amp;)&gt; Callback)</div><div class="ttdoc">Recursively visits the defined functions whose address is reachable from every constant in the Workli...</div><div class="ttdef"><b>Definition:</b> <a href="LazyCallGraph_8cpp_source.html#l01960">LazyCallGraph.cpp:1960</a></div></div>
<div class="ttc" id="aclassllvm_1_1FunctionAnalysisManagerCGSCCProxy_html"><div class="ttname"><a href="classllvm_1_1FunctionAnalysisManagerCGSCCProxy.html">llvm::FunctionAnalysisManagerCGSCCProxy</a></div><div class="ttdoc">A proxy from a FunctionAnalysisManager to an SCC.</div><div class="ttdef"><b>Definition:</b> <a href="CGSCCPassManager_8h_source.html#l00392">CGSCCPassManager.h:392</a></div></div>
<div class="ttc" id="astructllvm_1_1CGSCCUpdateResult_html_a8a7665cb19a44a44646cde774c253352"><div class="ttname"><a href="structllvm_1_1CGSCCUpdateResult.html#a8a7665cb19a44a44646cde774c253352">llvm::CGSCCUpdateResult::InvalidatedRefSCCs</a></div><div class="ttdeci">SmallPtrSetImpl&lt; LazyCallGraph::RefSCC * &gt; &amp; InvalidatedRefSCCs</div><div class="ttdoc">The set of invalidated RefSCCs which should be skipped if they are found in RCWorklist.</div><div class="ttdef"><b>Definition:</b> <a href="CGSCCPassManager_8h_source.html#l00265">CGSCCPassManager.h:265</a></div></div>
<div class="ttc" id="aclassllvm_1_1InnerAnalysisManagerProxy_html_a3add1957ddf106ee6dc26ce921d8efd4"><div class="ttname"><a href="classllvm_1_1InnerAnalysisManagerProxy.html#a3add1957ddf106ee6dc26ce921d8efd4">llvm::InnerAnalysisManagerProxy::run</a></div><div class="ttdeci">Result run(IRUnitT &amp;IR, AnalysisManager&lt; IRUnitT, ExtraArgTs... &gt; &amp;AM, ExtraArgTs...)</div><div class="ttdoc">Run the analysis pass and create our proxy result object.</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00994">PassManager.h:994</a></div></div>
<div class="ttc" id="aPassBuilderBindings_8cpp_html_a13293a681188ed79fb799b7f9c173b83"><div class="ttname"><a href="PassBuilderBindings_8cpp.html#a13293a681188ed79fb799b7f9c173b83">CGAM</a></div><div class="ttdeci">CGSCCAnalysisManager CGAM</div><div class="ttdef"><b>Definition:</b> <a href="PassBuilderBindings_8cpp_source.html#l00060">PassBuilderBindings.cpp:60</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html"><div class="ttname"><a href="classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00074">Value.h:74</a></div></div>
<div class="ttc" id="aTimeProfiler_8h_html"><div class="ttname"><a href="TimeProfiler_8h.html">TimeProfiler.h</a></div></div>
<div class="ttc" id="aDebug_8h_html"><div class="ttname"><a href="Debug_8h.html">Debug.h</a></div></div>
<div class="ttc" id="aSetVector_8h_html"><div class="ttname"><a href="SetVector_8h.html">SetVector.h</a></div></div>
<div class="ttc" id="astructllvm_1_1CGSCCUpdateResult_html_a08a47f71dcda17bd2f5617fda09ce8e1"><div class="ttname"><a href="structllvm_1_1CGSCCUpdateResult.html#a08a47f71dcda17bd2f5617fda09ce8e1">llvm::CGSCCUpdateResult::RCWorklist</a></div><div class="ttdeci">SmallPriorityWorklist&lt; LazyCallGraph::RefSCC *, 1 &gt; &amp; RCWorklist</div><div class="ttdoc">Worklist of the RefSCCs queued for processing.</div><div class="ttdef"><b>Definition:</b> <a href="CGSCCPassManager_8h_source.html#l00242">CGSCCPassManager.h:242</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSetImpl_html_a6bc6fb89fe2e91c25559a8631f56e27e"><div class="ttname"><a href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">llvm::SmallPtrSetImpl::insert</a></div><div class="ttdeci">std::pair&lt; iterator, bool &gt; insert(PtrType Ptr)</div><div class="ttdoc">Inserts Ptr if and only if there is no element in the container equal to Ptr.</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00365">SmallPtrSet.h:365</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Aug 7 2023 09:48:29 for LLVM by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LLVM: lib/WindowsDriver/MSVCPaths.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">LLVM
   &#160;<span id="projectnumber">17.0.0git</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a class="el" href="dir_2d1fc91862e015421d72becd83b72c51.html">WindowsDriver</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">MSVCPaths.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="MSVCPaths_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//===-- MSVCPaths.cpp - MSVC path-parsing helpers -------------------------===//</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">// See https://llvm.org/LICENSE.txt for license information.</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160; </div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MSVCPaths_8h.html">llvm/WindowsDriver/MSVCPaths.h</a>&quot;</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SmallString_8h.html">llvm/ADT/SmallString.h</a>&quot;</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SmallVector_8h.html">llvm/ADT/SmallVector.h</a>&quot;</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="StringRef_8h.html">llvm/ADT/StringRef.h</a>&quot;</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Twine_8h.html">llvm/ADT/Twine.h</a>&quot;</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Path_8h.html">llvm/Support/Path.h</a>&quot;</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Process_8h.html">llvm/Support/Process.h</a>&quot;</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Program_8h.html">llvm/Support/Program.h</a>&quot;</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="VersionTuple_8h.html">llvm/Support/VersionTuple.h</a>&quot;</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="VirtualFileSystem_8h.html">llvm/Support/VirtualFileSystem.h</a>&quot;</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="TargetParser_2Host_8h.html">llvm/TargetParser/Host.h</a>&quot;</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Triple_8h.html">llvm/TargetParser/Triple.h</a>&quot;</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &lt;optional&gt;</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &lt;string&gt;</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160; </div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#ifdef _WIN32</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ConvertUTF_8h.html">llvm/Support/ConvertUTF.h</a>&quot;</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160; </div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#ifdef _WIN32</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#define WIN32_LEAN_AND_MEAN</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#define NOGDI</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#ifndef NOMINMAX</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#define NOMINMAX</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &lt;windows.h&gt;</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160; </div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#ifdef _MSC_VER</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="comment">// Don&#39;t support SetupApi on MinGW.</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#define USE_MSVC_SETUP_API</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160; </div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="comment">// Make sure this comes before MSVCSetupApi.h</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &lt;comdef.h&gt;</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160; </div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="COM_8h.html">llvm/Support/COM.h</a>&quot;</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="preprocessor">#ifdef __clang__</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="preprocessor">#pragma clang diagnostic push</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="preprocessor">#pragma clang diagnostic ignored &quot;-Wnon-virtual-dtor&quot;</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MSVCSetupApi_8h.html">llvm/WindowsDriver/MSVCSetupApi.h</a>&quot;</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="preprocessor">#ifdef __clang__</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="preprocessor">#pragma clang diagnostic pop</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;_COM_SMARTPTR_TYPEDEF(<a class="code" href="MSVCSetupApi_8h.html#a7a9c6a8d3ca5df83b7df4fb481840c3b">ISetupConfiguration</a>, __uuidof(<a class="code" href="MSVCSetupApi_8h.html#a7a9c6a8d3ca5df83b7df4fb481840c3b">ISetupConfiguration</a>));</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;_COM_SMARTPTR_TYPEDEF(<a class="code" href="MSVCSetupApi_8h.html#aab1a1cfa49072adfc4b6353f2b5fce6f">ISetupConfiguration2</a>, __uuidof(<a class="code" href="MSVCSetupApi_8h.html#aab1a1cfa49072adfc4b6353f2b5fce6f">ISetupConfiguration2</a>));</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;_COM_SMARTPTR_TYPEDEF(<a class="code" href="MSVCSetupApi_8h.html#a8a5291ca7d37ee54d9d22ef3ee8adf29">ISetupHelper</a>, __uuidof(<a class="code" href="MSVCSetupApi_8h.html#a8a5291ca7d37ee54d9d22ef3ee8adf29">ISetupHelper</a>));</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;_COM_SMARTPTR_TYPEDEF(<a class="code" href="MSVCSetupApi_8h.html#ae680e261da24c8b71e1c6e9bb9036897">IEnumSetupInstances</a>, __uuidof(<a class="code" href="MSVCSetupApi_8h.html#ae680e261da24c8b71e1c6e9bb9036897">IEnumSetupInstances</a>));</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;_COM_SMARTPTR_TYPEDEF(<a class="code" href="MSVCSetupApi_8h.html#a24d28eb24421e5760e94785a4c52ba30">ISetupInstance</a>, __uuidof(<a class="code" href="MSVCSetupApi_8h.html#a24d28eb24421e5760e94785a4c52ba30">ISetupInstance</a>));</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;_COM_SMARTPTR_TYPEDEF(<a class="code" href="MSVCSetupApi_8h.html#a14a8d64b457ab2c1e4978ca1847b7784">ISetupInstance2</a>, __uuidof(<a class="code" href="MSVCSetupApi_8h.html#a14a8d64b457ab2c1e4978ca1847b7784">ISetupInstance2</a>));</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160; </div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="keyword">static</span> std::string</div>
<div class="line"><a name="l00062"></a><span class="lineno"><a class="line" href="MSVCPaths_8cpp.html#aceedb180a9ae58c316577d97c5850392">   62</a></span>&#160;<a class="code" href="MSVCPaths_8cpp.html#aceedb180a9ae58c316577d97c5850392">getHighestNumericTupleInDirectory</a>(<a class="code" href="classllvm_1_1vfs_1_1FileSystem.html">llvm::vfs::FileSystem</a> &amp;VFS,</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;                                  <a class="code" href="classllvm_1_1StringRef.html">llvm::StringRef</a> Directory) {</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;  std::string <a class="code" href="namespacellvm_1_1MipsISD.html#a422daf9aa810935178671306b651d69ba230674684da59830e4af773e6393d1dd">Highest</a>;</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;  <a class="code" href="classllvm_1_1VersionTuple.html">llvm::VersionTuple</a> HighestTuple;</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160; </div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;  std::error_code EC;</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1vfs_1_1directory__iterator.html">llvm::vfs::directory_iterator</a> DirIt = VFS.<a class="code" href="classllvm_1_1vfs_1_1FileSystem.html#a864ab0cadce5efa12c143f4f1429b22d">dir_begin</a>(Directory, EC),</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;                                     DirEnd;</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;       !EC &amp;&amp; DirIt != DirEnd; DirIt.increment(EC)) {</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    <span class="keyword">auto</span> <a class="code" href="structStatus.html">Status</a> = VFS.<a class="code" href="classllvm_1_1vfs_1_1FileSystem.html#a7cce577eaf23af960a4c6fdcc2415ef8">status</a>(DirIt-&gt;path());</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="structStatus.html">Status</a> || !<a class="code" href="structStatus.html">Status</a>-&gt;isDirectory())</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    <a class="code" href="classllvm_1_1StringRef.html">llvm::StringRef</a> CandidateName = <a class="code" href="namespacellvm_1_1sys_1_1path.html#a5ab6bf136f12ce0bfe2a9754cf1644c7">llvm::sys::path::filename</a>(DirIt-&gt;path());</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    <a class="code" href="classllvm_1_1VersionTuple.html">llvm::VersionTuple</a> Tuple;</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    <span class="keywordflow">if</span> (Tuple.<a class="code" href="classllvm_1_1VersionTuple.html#a6b61483aaba059f71022975a37737e15">tryParse</a>(CandidateName)) <span class="comment">// tryParse() returns true on error.</span></div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    <span class="keywordflow">if</span> (Tuple &gt; HighestTuple) {</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;      HighestTuple = Tuple;</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;      <a class="code" href="namespacellvm_1_1MipsISD.html#a422daf9aa810935178671306b651d69ba230674684da59830e4af773e6393d1dd">Highest</a> = CandidateName.<a class="code" href="classllvm_1_1StringRef.html#a223dd14e7d12bc5cea01889b972a98b2">str</a>();</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    }</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;  }</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160; </div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1MipsISD.html#a422daf9aa810935178671306b651d69ba230674684da59830e4af773e6393d1dd">Highest</a>;</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;}</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160; </div>
<div class="line"><a name="l00087"></a><span class="lineno"><a class="line" href="MSVCPaths_8cpp.html#aaab71b93eca9d982bc9970e71076230f">   87</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="MSVCPaths_8cpp.html#aaab71b93eca9d982bc9970e71076230f">getWindows10SDKVersionFromPath</a>(<a class="code" href="classllvm_1_1vfs_1_1FileSystem.html">llvm::vfs::FileSystem</a> &amp;VFS,</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;                                           <span class="keyword">const</span> std::string &amp;SDKPath,</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;                                           std::string &amp;SDKVersion) {</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;  <a class="code" href="classllvm_1_1SmallString.html">llvm::SmallString&lt;128&gt;</a> IncludePath(SDKPath);</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;  <a class="code" href="namespacellvm_1_1sys_1_1path.html#acb80894344c78dacf8d5ff8c23be697d">llvm::sys::path::append</a>(IncludePath, <span class="stringliteral">&quot;Include&quot;</span>);</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;  SDKVersion = <a class="code" href="MSVCPaths_8cpp.html#aceedb180a9ae58c316577d97c5850392">getHighestNumericTupleInDirectory</a>(VFS, IncludePath);</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;  <span class="keywordflow">return</span> !SDKVersion.empty();</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;}</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160; </div>
<div class="line"><a name="l00096"></a><span class="lineno"><a class="line" href="MSVCPaths_8cpp.html#a8805ce08308a58e2e99c8ab39d4ebdc2">   96</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="MSVCPaths_8cpp.html#a8805ce08308a58e2e99c8ab39d4ebdc2">getWindowsSDKDirViaCommandLine</a>(</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    <a class="code" href="classllvm_1_1vfs_1_1FileSystem.html">llvm::vfs::FileSystem</a> &amp;VFS, std::optional&lt;llvm::StringRef&gt; WinSdkDir,</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    std::optional&lt;llvm::StringRef&gt; WinSdkVersion,</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    std::optional&lt;llvm::StringRef&gt; WinSysRoot, std::string &amp;Path, <span class="keywordtype">int</span> &amp;Major,</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    std::string &amp;<a class="code" href="namespacellvm_1_1IndexedInstrProf.html#a3890d6a47a6ff8b8c4ecc8a1f9040a04">Version</a>) {</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;  <span class="keywordflow">if</span> (WinSdkDir || WinSysRoot) {</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    <span class="comment">// Don&#39;t validate the input; trust the value supplied by the user.</span></div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <span class="comment">// The motivation is to prevent unnecessary file and registry access.</span></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    <a class="code" href="classllvm_1_1VersionTuple.html">llvm::VersionTuple</a> SDKVersion;</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    <span class="keywordflow">if</span> (WinSdkVersion)</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;      SDKVersion.<a class="code" href="classllvm_1_1VersionTuple.html#a6b61483aaba059f71022975a37737e15">tryParse</a>(*WinSdkVersion);</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160; </div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    <span class="keywordflow">if</span> (WinSysRoot) {</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;      <a class="code" href="classllvm_1_1SmallString.html">llvm::SmallString&lt;128&gt;</a> SDKPath(*WinSysRoot);</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;      <a class="code" href="namespacellvm_1_1sys_1_1path.html#acb80894344c78dacf8d5ff8c23be697d">llvm::sys::path::append</a>(SDKPath, <span class="stringliteral">&quot;Windows Kits&quot;</span>);</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;      <span class="keywordflow">if</span> (!SDKVersion.<a class="code" href="classllvm_1_1VersionTuple.html#ad07e5841d788dc29bdda972b3f92be6b">empty</a>())</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;        <a class="code" href="namespacellvm_1_1sys_1_1path.html#acb80894344c78dacf8d5ff8c23be697d">llvm::sys::path::append</a>(SDKPath, <a class="code" href="classllvm_1_1Twine.html">llvm::Twine</a>(SDKVersion.<a class="code" href="classllvm_1_1VersionTuple.html#a56a72b8793b8e0df7217c9b19a83320b">getMajor</a>()));</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;        <a class="code" href="namespacellvm_1_1sys_1_1path.html#acb80894344c78dacf8d5ff8c23be697d">llvm::sys::path::append</a>(</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;            SDKPath, <a class="code" href="MSVCPaths_8cpp.html#aceedb180a9ae58c316577d97c5850392">getHighestNumericTupleInDirectory</a>(VFS, SDKPath));</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;      Path = std::string(SDKPath.<a class="code" href="classllvm_1_1SmallString.html#af5dd7241878be5eed07736eb156bb10b">str</a>());</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;      Path = WinSdkDir-&gt;str();</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    }</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160; </div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    <span class="keywordflow">if</span> (!SDKVersion.<a class="code" href="classllvm_1_1VersionTuple.html#ad07e5841d788dc29bdda972b3f92be6b">empty</a>()) {</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;      Major = SDKVersion.<a class="code" href="classllvm_1_1VersionTuple.html#a56a72b8793b8e0df7217c9b19a83320b">getMajor</a>();</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;      <a class="code" href="namespacellvm_1_1IndexedInstrProf.html#a3890d6a47a6ff8b8c4ecc8a1f9040a04">Version</a> = SDKVersion.<a class="code" href="classllvm_1_1VersionTuple.html#a87d3c6e7d460d48dfe0ddd2c31793fa7">getAsString</a>();</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="MSVCPaths_8cpp.html#aaab71b93eca9d982bc9970e71076230f">getWindows10SDKVersionFromPath</a>(VFS, Path, <a class="code" href="namespacellvm_1_1IndexedInstrProf.html#a3890d6a47a6ff8b8c4ecc8a1f9040a04">Version</a>)) {</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;      Major = 10;</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    }</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;  }</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;}</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160; </div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;<span class="preprocessor">#ifdef _WIN32</span></div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> readFullStringValue(HKEY hkey, <span class="keyword">const</span> <span class="keywordtype">char</span> *valueName,</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;                                std::string &amp;value) {</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;  std::wstring WideValueName;</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm.html#ab1193fb2b9530fcfa3442d1f9d2abb46">llvm::ConvertUTF8toWide</a>(valueName, WideValueName))</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160; </div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;  <a class="code" href="namespacellvm_1_1AMDGPU_1_1SDWA.html#a487d59303b94fbf4adddd9a08c30da0aaddbc3f8d705f646af626fd73cdf3618b">DWORD</a> <a class="code" href="README__P9_8txt.html#ae070adaf1b4bf0e7c12fcae2b9c5ae67">result</a> = 0;</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;  <a class="code" href="namespacellvm_1_1AMDGPU_1_1SDWA.html#a487d59303b94fbf4adddd9a08c30da0aaddbc3f8d705f646af626fd73cdf3618b">DWORD</a> valueSize = 0;</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;  <a class="code" href="namespacellvm_1_1AMDGPU_1_1SDWA.html#a487d59303b94fbf4adddd9a08c30da0aaddbc3f8d705f646af626fd73cdf3618b">DWORD</a> <a class="code" href="README-X86-64_8txt.html#aac3add0badd5c39bebc02df0b5d9bdcf">type</a> = 0;</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;  <span class="comment">// First just query for the required size.</span></div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;  <a class="code" href="README__P9_8txt.html#ae070adaf1b4bf0e7c12fcae2b9c5ae67">result</a> = RegQueryValueExW(hkey, WideValueName.c_str(), NULL, &amp;<a class="code" href="README-X86-64_8txt.html#aac3add0badd5c39bebc02df0b5d9bdcf">type</a>, NULL,</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;                            &amp;valueSize);</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="README__P9_8txt.html#ae070adaf1b4bf0e7c12fcae2b9c5ae67">result</a> != ERROR_SUCCESS || <a class="code" href="README-X86-64_8txt.html#aac3add0badd5c39bebc02df0b5d9bdcf">type</a> != REG_SZ || !valueSize)</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;  std::vector&lt;BYTE&gt; buffer(valueSize);</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;  <a class="code" href="README__P9_8txt.html#ae070adaf1b4bf0e7c12fcae2b9c5ae67">result</a> = RegQueryValueExW(hkey, WideValueName.c_str(), NULL, NULL, &amp;buffer[0],</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;                            &amp;valueSize);</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="README__P9_8txt.html#ae070adaf1b4bf0e7c12fcae2b9c5ae67">result</a> == ERROR_SUCCESS) {</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    std::wstring WideValue(<span class="keyword">reinterpret_cast&lt;</span><span class="keyword">const </span><span class="keywordtype">wchar_t</span> *<span class="keyword">&gt;</span>(buffer.data()),</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;                           valueSize / <span class="keyword">sizeof</span>(<span class="keywordtype">wchar_t</span>));</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <span class="keywordflow">if</span> (valueSize &amp;&amp; WideValue.back() == L<span class="charliteral">&#39;\0&#39;</span>) {</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;      WideValue.pop_back();</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    }</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <span class="comment">// The destination buffer must be empty as an invariant of the conversion</span></div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    <span class="comment">// function; but this function is sometimes called in a loop that passes in</span></div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    <span class="comment">// the same buffer, however. Simply clear it out so we can overwrite it.</span></div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    value.clear();</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#a632e8458ae307eeaa12c092cb27c689f">llvm::convertWideToUTF8</a>(WideValue, value);</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;  }</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;}</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;<span class="comment">/// Read registry string.</span></div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;<span class="comment">/// This also supports a means to look for high-versioned keys by use</span></div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;<span class="comment">/// of a $VERSION placeholder in the key path.</span></div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;<span class="comment">/// $VERSION in the key path is a placeholder for the version number,</span></div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;<span class="comment">/// causing the highest value path to be searched for and used.</span></div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;<span class="comment">/// I.e. &quot;SOFTWARE\\Microsoft\\VisualStudio\\$VERSION&quot;.</span></div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;<span class="comment">/// There can be additional characters in the component.  Only the numeric</span></div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;<span class="comment">/// characters are compared.  This function only searches HKLM.</span></div>
<div class="line"><a name="l00174"></a><span class="lineno"><a class="line" href="MSVCPaths_8cpp.html#a721a1e2b9fcfe5e633cb413a6eabed8b">  174</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="MSVCPaths_8cpp.html#a721a1e2b9fcfe5e633cb413a6eabed8b">getSystemRegistryString</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *keyPath, <span class="keyword">const</span> <span class="keywordtype">char</span> *valueName,</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;                                    std::string &amp;value, std::string *phValue) {</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;<span class="preprocessor">#ifndef _WIN32</span></div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;  HKEY hRootKey = HKEY_LOCAL_MACHINE;</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;  HKEY hKey = NULL;</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;  <span class="keywordtype">long</span> lResult;</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;  <span class="keywordtype">bool</span> returnValue = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160; </div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *placeHolder = strstr(keyPath, <span class="stringliteral">&quot;$VERSION&quot;</span>);</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;  std::string bestName;</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;  <span class="comment">// If we have a $VERSION placeholder, do the highest-version search.</span></div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;  <span class="keywordflow">if</span> (placeHolder) {</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> *keyEnd = placeHolder - 1;</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> *nextKey = placeHolder;</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    <span class="comment">// Find end of previous key.</span></div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    <span class="keywordflow">while</span> ((keyEnd &gt; keyPath) &amp;&amp; (*keyEnd != <span class="charliteral">&#39;\\&#39;</span>))</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;      keyEnd--;</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    <span class="comment">// Find end of key containing $VERSION.</span></div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    <span class="keywordflow">while</span> (*nextKey &amp;&amp; (*nextKey != <span class="charliteral">&#39;\\&#39;</span>))</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;      nextKey++;</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    <span class="keywordtype">size_t</span> partialKeyLength = keyEnd - keyPath;</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    <span class="keywordtype">char</span> partialKey[256];</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    <span class="keywordflow">if</span> (partialKeyLength &gt;= <span class="keyword">sizeof</span>(partialKey))</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;      partialKeyLength = <span class="keyword">sizeof</span>(partialKey) - 1;</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    strncpy(partialKey, keyPath, partialKeyLength);</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    partialKey[partialKeyLength] = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    HKEY hTopKey = NULL;</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    lResult = RegOpenKeyExA(hRootKey, partialKey, 0, KEY_READ | KEY_WOW64_32KEY,</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;                            &amp;hTopKey);</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    <span class="keywordflow">if</span> (lResult == ERROR_SUCCESS) {</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;      <span class="keywordtype">char</span> keyName[256];</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;      <span class="keywordtype">double</span> bestValue = 0.0;</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;      <a class="code" href="namespacellvm_1_1AMDGPU_1_1SDWA.html#a487d59303b94fbf4adddd9a08c30da0aaddbc3f8d705f646af626fd73cdf3618b">DWORD</a> <a class="code" href="README__ALTIVEC_8txt.html#a98586ea01a32ff5046b0868b036a1849">index</a>, <a class="code" href="lib_2Target_2README_8txt.html#a02def7c594e9f19ff247ed0bf33d1c30">size</a> = <span class="keyword">sizeof</span>(keyName) - 1;</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="README__ALTIVEC_8txt.html#a98586ea01a32ff5046b0868b036a1849">index</a> = 0; RegEnumKeyExA(hTopKey, <a class="code" href="README__ALTIVEC_8txt.html#a98586ea01a32ff5046b0868b036a1849">index</a>, keyName, &amp;<a class="code" href="lib_2Target_2README_8txt.html#a02def7c594e9f19ff247ed0bf33d1c30">size</a>, NULL, NULL,</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;                                    NULL, NULL) == ERROR_SUCCESS;</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;           <a class="code" href="README__ALTIVEC_8txt.html#a98586ea01a32ff5046b0868b036a1849">index</a>++) {</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="lib_2Target_2ARM_2README_8txt.html#ac9fd45f4cffd55a5adfc964b8858d794">sp</a> = keyName;</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;        <span class="keywordflow">while</span> (*<a class="code" href="lib_2Target_2ARM_2README_8txt.html#ac9fd45f4cffd55a5adfc964b8858d794">sp</a> &amp;&amp; !<a class="code" href="RustDemangle_8cpp.html#a12d4f37888b638bcbd9fc0201492c776">llvm::isDigit</a>(*<a class="code" href="lib_2Target_2ARM_2README_8txt.html#ac9fd45f4cffd55a5adfc964b8858d794">sp</a>))</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;          <a class="code" href="lib_2Target_2ARM_2README_8txt.html#ac9fd45f4cffd55a5adfc964b8858d794">sp</a>++;</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;        <span class="keywordflow">if</span> (!*<a class="code" href="lib_2Target_2ARM_2README_8txt.html#ac9fd45f4cffd55a5adfc964b8858d794">sp</a>)</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">char</span> *ep = <a class="code" href="lib_2Target_2ARM_2README_8txt.html#ac9fd45f4cffd55a5adfc964b8858d794">sp</a> + 1;</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;        <span class="keywordflow">while</span> (*ep &amp;&amp; (<a class="code" href="RustDemangle_8cpp.html#a12d4f37888b638bcbd9fc0201492c776">llvm::isDigit</a>(*ep) || (*ep == <span class="charliteral">&#39;.&#39;</span>)))</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;          ep++;</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;        <span class="keywordtype">char</span> numBuf[32];</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;        strncpy(numBuf, <a class="code" href="lib_2Target_2ARM_2README_8txt.html#ac9fd45f4cffd55a5adfc964b8858d794">sp</a>, <span class="keyword">sizeof</span>(numBuf) - 1);</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;        numBuf[<span class="keyword">sizeof</span>(numBuf) - 1] = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;        <span class="keywordtype">double</span> dvalue = strtod(numBuf, NULL);</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;        <span class="keywordflow">if</span> (dvalue &gt; bestValue) {</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;          <span class="comment">// Test that InstallDir is indeed there before keeping this index.</span></div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;          <span class="comment">// Open the chosen key path remainder.</span></div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;          bestName = keyName;</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;          <span class="comment">// Append rest of key.</span></div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;          bestName.append(nextKey);</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;          lResult = RegOpenKeyExA(hTopKey, bestName.c_str(), 0,</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;                                  KEY_READ | KEY_WOW64_32KEY, &amp;hKey);</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;          <span class="keywordflow">if</span> (lResult == ERROR_SUCCESS) {</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;            <span class="keywordflow">if</span> (readFullStringValue(hKey, valueName, value)) {</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;              bestValue = dvalue;</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;              <span class="keywordflow">if</span> (phValue)</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;                *phValue = bestName;</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;              returnValue = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;            }</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;            RegCloseKey(hKey);</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;          }</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;        }</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;        <a class="code" href="lib_2Target_2README_8txt.html#a02def7c594e9f19ff247ed0bf33d1c30">size</a> = <span class="keyword">sizeof</span>(keyName) - 1;</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;      }</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;      RegCloseKey(hTopKey);</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    }</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    lResult =</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;        RegOpenKeyExA(hRootKey, keyPath, 0, KEY_READ | KEY_WOW64_32KEY, &amp;hKey);</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    <span class="keywordflow">if</span> (lResult == ERROR_SUCCESS) {</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;      <span class="keywordflow">if</span> (readFullStringValue(hKey, valueName, value))</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;        returnValue = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;      <span class="keywordflow">if</span> (phValue)</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;        phValue-&gt;clear();</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;      RegCloseKey(hKey);</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    }</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;  }</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;  <span class="keywordflow">return</span> returnValue;</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;<span class="preprocessor">#endif // _WIN32</span></div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;}</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160; </div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespacellvm.html">llvm</a> {</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160; </div>
<div class="line"><a name="l00263"></a><span class="lineno"><a class="line" href="namespacellvm.html#a051d4c63744860fd69753642b3e04507">  263</a></span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="namespacellvm.html#a051d4c63744860fd69753642b3e04507">archToWindowsSDKArch</a>(<a class="code" href="classllvm_1_1Triple.html#a547abd13f7a3c063aa72c8192a868154">Triple::ArchType</a> Arch) {</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;  <span class="keywordflow">switch</span> (Arch) {</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="lib_2Target_2README_8txt.html#a2352e45658fc7292aa209a94baa095e9">Triple::ArchType::x86</a>:</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    <span class="keywordflow">return</span> <span class="stringliteral">&quot;x86&quot;</span>;</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;  <span class="keywordflow">case</span> Triple::ArchType::x86_64:</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    <span class="keywordflow">return</span> <span class="stringliteral">&quot;x64&quot;</span>;</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;  <span class="keywordflow">case</span> Triple::ArchType::arm:</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    <span class="keywordflow">return</span> <span class="stringliteral">&quot;arm&quot;</span>;</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;  <span class="keywordflow">case</span> Triple::ArchType::aarch64:</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    <span class="keywordflow">return</span> <span class="stringliteral">&quot;arm64&quot;</span>;</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;  <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;  }</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;}</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160; </div>
<div class="line"><a name="l00278"></a><span class="lineno"><a class="line" href="namespacellvm.html#a80f0cb629c76b63ad31f32f01bb1bd45">  278</a></span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="namespacellvm.html#a80f0cb629c76b63ad31f32f01bb1bd45">archToLegacyVCArch</a>(<a class="code" href="classllvm_1_1Triple.html#a547abd13f7a3c063aa72c8192a868154">Triple::ArchType</a> Arch) {</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;  <span class="keywordflow">switch</span> (Arch) {</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="lib_2Target_2README_8txt.html#a2352e45658fc7292aa209a94baa095e9">Triple::ArchType::x86</a>:</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    <span class="comment">// x86 is default in legacy VC toolchains.</span></div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    <span class="comment">// e.g. x86 libs are directly in /lib as opposed to /lib/x86.</span></div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;  <span class="keywordflow">case</span> Triple::ArchType::x86_64:</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    <span class="keywordflow">return</span> <span class="stringliteral">&quot;amd64&quot;</span>;</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;  <span class="keywordflow">case</span> Triple::ArchType::arm:</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    <span class="keywordflow">return</span> <span class="stringliteral">&quot;arm&quot;</span>;</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;  <span class="keywordflow">case</span> Triple::ArchType::aarch64:</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    <span class="keywordflow">return</span> <span class="stringliteral">&quot;arm64&quot;</span>;</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;  <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;  }</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;}</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160; </div>
<div class="line"><a name="l00295"></a><span class="lineno"><a class="line" href="namespacellvm.html#ab829a8dd53413b3328994f77fdf2b47f">  295</a></span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="namespacellvm.html#ab829a8dd53413b3328994f77fdf2b47f">archToDevDivInternalArch</a>(<a class="code" href="classllvm_1_1Triple.html#a547abd13f7a3c063aa72c8192a868154">Triple::ArchType</a> Arch) {</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;  <span class="keywordflow">switch</span> (Arch) {</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="lib_2Target_2README_8txt.html#a2352e45658fc7292aa209a94baa095e9">Triple::ArchType::x86</a>:</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    <span class="keywordflow">return</span> <span class="stringliteral">&quot;i386&quot;</span>;</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;  <span class="keywordflow">case</span> Triple::ArchType::x86_64:</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    <span class="keywordflow">return</span> <span class="stringliteral">&quot;amd64&quot;</span>;</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;  <span class="keywordflow">case</span> Triple::ArchType::arm:</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    <span class="keywordflow">return</span> <span class="stringliteral">&quot;arm&quot;</span>;</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;  <span class="keywordflow">case</span> Triple::ArchType::aarch64:</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    <span class="keywordflow">return</span> <span class="stringliteral">&quot;arm64&quot;</span>;</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;  <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;  }</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;}</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160; </div>
<div class="line"><a name="l00310"></a><span class="lineno"><a class="line" href="namespacellvm.html#ae4bae58c61ecb36efa5d563c745b9d53">  310</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="namespacellvm.html#ae4bae58c61ecb36efa5d563c745b9d53">appendArchToWindowsSDKLibPath</a>(<span class="keywordtype">int</span> SDKMajor, <a class="code" href="classllvm_1_1SmallString.html">SmallString&lt;128&gt;</a> LibPath,</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;                                   <a class="code" href="classllvm_1_1Triple.html#a547abd13f7a3c063aa72c8192a868154">Triple::ArchType</a> Arch, std::string &amp;path) {</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;  <span class="keywordflow">if</span> (SDKMajor &gt;= 8) {</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    <a class="code" href="namespacellvm_1_1sys_1_1path.html#acb80894344c78dacf8d5ff8c23be697d">sys::path::append</a>(LibPath, <a class="code" href="namespacellvm.html#a051d4c63744860fd69753642b3e04507">archToWindowsSDKArch</a>(Arch));</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    <span class="keywordflow">switch</span> (Arch) {</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    <span class="comment">// In Windows SDK 7.x, x86 libraries are directly in the Lib folder.</span></div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1Triple.html#a547abd13f7a3c063aa72c8192a868154a0eefa3e53db25b90828e42c64b138648">Triple::x86</a>:</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1Triple.html#a547abd13f7a3c063aa72c8192a868154a13d8ce5e71051718a537277c6a594062">Triple::x86_64</a>:</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;      <a class="code" href="namespacellvm_1_1sys_1_1path.html#acb80894344c78dacf8d5ff8c23be697d">sys::path::append</a>(LibPath, <span class="stringliteral">&quot;x64&quot;</span>);</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1Triple.html#a547abd13f7a3c063aa72c8192a868154a8b312a985e2504366d24a2200faf37ff">Triple::arm</a>:</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;      <span class="comment">// It is not necessary to link against Windows SDK 7.x when targeting ARM.</span></div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    }</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;  }</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160; </div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;  path = std::string(LibPath.<a class="code" href="classllvm_1_1SmallString.html#af5dd7241878be5eed07736eb156bb10b">str</a>());</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;}</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160; </div>
<div class="line"><a name="l00334"></a><span class="lineno"><a class="line" href="namespacellvm.html#abf156ed576f5bcdb93911b50b775c8ac">  334</a></span>&#160;std::string <a class="code" href="namespacellvm.html#abf156ed576f5bcdb93911b50b775c8ac">getSubDirectoryPath</a>(<a class="code" href="namespacellvm.html#a372f87e2cac1c83389c98554dc44806d">SubDirectoryType</a> <a class="code" href="classllvm_1_1Type.html">Type</a>, <a class="code" href="namespacellvm.html#aa1f26fe15566118837302706870c1a7e">ToolsetLayout</a> VSLayout,</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;                                <span class="keyword">const</span> std::string &amp;VCToolChainPath,</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;                                <a class="code" href="classllvm_1_1Triple.html#a547abd13f7a3c063aa72c8192a868154">Triple::ArchType</a> TargetArch,</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;                                <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> SubdirParent) {</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *SubdirName;</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *IncludeName;</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;  <span class="keywordflow">switch</span> (VSLayout) {</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm.html#aa1f26fe15566118837302706870c1a7eaf1eb5a67fac38ebe2cc267a1b9dbd014">ToolsetLayout::OlderVS</a>:</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    SubdirName = <a class="code" href="namespacellvm.html#a80f0cb629c76b63ad31f32f01bb1bd45">archToLegacyVCArch</a>(TargetArch);</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    IncludeName = <span class="stringliteral">&quot;include&quot;</span>;</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm.html#aa1f26fe15566118837302706870c1a7eaa44980fa6b2ec45d446f35771799ad7e">ToolsetLayout::VS2017OrNewer</a>:</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    SubdirName = <a class="code" href="namespacellvm.html#a051d4c63744860fd69753642b3e04507">archToWindowsSDKArch</a>(TargetArch);</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    IncludeName = <span class="stringliteral">&quot;include&quot;</span>;</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm.html#aa1f26fe15566118837302706870c1a7eaaaacfa5380d075af7238c6c88301b333">ToolsetLayout::DevDivInternal</a>:</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    SubdirName = <a class="code" href="namespacellvm.html#ab829a8dd53413b3328994f77fdf2b47f">archToDevDivInternalArch</a>(TargetArch);</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    IncludeName = <span class="stringliteral">&quot;inc&quot;</span>;</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;  }</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160; </div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;  <a class="code" href="classllvm_1_1SmallString.html">SmallString&lt;256&gt;</a> Path(VCToolChainPath);</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;  <span class="keywordflow">if</span> (!SubdirParent.<a class="code" href="classllvm_1_1StringRef.html#a2dc80c585ad5882da8cae7b5968f7e74">empty</a>())</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    <a class="code" href="namespacellvm_1_1sys_1_1path.html#acb80894344c78dacf8d5ff8c23be697d">sys::path::append</a>(Path, SubdirParent);</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160; </div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;  <span class="keywordflow">switch</span> (<a class="code" href="classllvm_1_1Type.html">Type</a>) {</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm.html#a372f87e2cac1c83389c98554dc44806da807dbe7d1c25a633894d4a231b1c76d3">SubDirectoryType::Bin</a>:</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    <span class="keywordflow">if</span> (VSLayout == <a class="code" href="namespacellvm.html#aa1f26fe15566118837302706870c1a7eaa44980fa6b2ec45d446f35771799ad7e">ToolsetLayout::VS2017OrNewer</a>) {</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;      <span class="comment">// MSVC ships with two linkers: a 32-bit x86 and 64-bit x86 linker.</span></div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;      <span class="comment">// On x86, pick the linker that corresponds to the current process.</span></div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;      <span class="comment">// On ARM64, pick the 32-bit x86 linker; the 64-bit one doesn&#39;t run</span></div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;      <span class="comment">// on Windows 10.</span></div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;      <span class="comment">//</span></div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;      <span class="comment">// FIXME: Consider using IsWow64GuestMachineSupported to figure out</span></div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;      <span class="comment">// if we can invoke the 64-bit linker. It&#39;s generally preferable</span></div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;      <span class="comment">// because it won&#39;t run out of address-space.</span></div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">bool</span> HostIsX64 =</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;          <a class="code" href="classllvm_1_1Triple.html">Triple</a>(<a class="code" href="namespacellvm_1_1sys.html#aab375071f641a086c0d7067635ccd3dc">sys::getProcessTriple</a>()).<a class="code" href="classllvm_1_1Triple.html#a5fc23559f17bbe5ff83ec0fed0a5fdcf">getArch</a>() == <a class="code" href="classllvm_1_1Triple.html#a547abd13f7a3c063aa72c8192a868154a13d8ce5e71051718a537277c6a594062">Triple::x86_64</a>;</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">const</span> HostName = HostIsX64 ? <span class="stringliteral">&quot;Hostx64&quot;</span> : <span class="stringliteral">&quot;Hostx86&quot;</span>;</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;      <a class="code" href="namespacellvm_1_1sys_1_1path.html#acb80894344c78dacf8d5ff8c23be697d">sys::path::append</a>(Path, <span class="stringliteral">&quot;bin&quot;</span>, HostName, SubdirName);</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    } <span class="keywordflow">else</span> { <span class="comment">// OlderVS or DevDivInternal</span></div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;      <a class="code" href="namespacellvm_1_1sys_1_1path.html#acb80894344c78dacf8d5ff8c23be697d">sys::path::append</a>(Path, <span class="stringliteral">&quot;bin&quot;</span>, SubdirName);</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    }</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm.html#a372f87e2cac1c83389c98554dc44806daf4d72a64acd8929c0cc9ed96a7a336cc">SubDirectoryType::Include</a>:</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;    <a class="code" href="namespacellvm_1_1sys_1_1path.html#acb80894344c78dacf8d5ff8c23be697d">sys::path::append</a>(Path, IncludeName);</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm.html#a372f87e2cac1c83389c98554dc44806da043d23e54edc5360a7785ae212d1b806">SubDirectoryType::Lib</a>:</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    <a class="code" href="namespacellvm_1_1sys_1_1path.html#acb80894344c78dacf8d5ff8c23be697d">sys::path::append</a>(Path, <span class="stringliteral">&quot;lib&quot;</span>, SubdirName);</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;  }</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;  <span class="keywordflow">return</span> std::string(Path.str());</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;}</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160; </div>
<div class="line"><a name="l00388"></a><span class="lineno"><a class="line" href="namespacellvm.html#a407d3b5b3a2a0c0a80e87d7b03b4b2e2">  388</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="namespacellvm.html#a407d3b5b3a2a0c0a80e87d7b03b4b2e2">useUniversalCRT</a>(<a class="code" href="namespacellvm.html#aa1f26fe15566118837302706870c1a7e">ToolsetLayout</a> VSLayout, <span class="keyword">const</span> std::string &amp;VCToolChainPath,</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;                     <a class="code" href="classllvm_1_1Triple.html#a547abd13f7a3c063aa72c8192a868154">Triple::ArchType</a> TargetArch, <a class="code" href="classllvm_1_1vfs_1_1FileSystem.html">vfs::FileSystem</a> &amp;VFS) {</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;  <a class="code" href="classllvm_1_1SmallString.html">SmallString&lt;128&gt;</a> TestPath(<a class="code" href="namespacellvm.html#abf156ed576f5bcdb93911b50b775c8ac">getSubDirectoryPath</a>(</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;      <a class="code" href="namespacellvm.html#a372f87e2cac1c83389c98554dc44806daf4d72a64acd8929c0cc9ed96a7a336cc">SubDirectoryType::Include</a>, VSLayout, VCToolChainPath, TargetArch));</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;  <a class="code" href="namespacellvm_1_1sys_1_1path.html#acb80894344c78dacf8d5ff8c23be697d">sys::path::append</a>(TestPath, <span class="stringliteral">&quot;stdlib.h&quot;</span>);</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;  <span class="keywordflow">return</span> !VFS.<a class="code" href="classllvm_1_1vfs_1_1FileSystem.html#a156f5ab4b5c3a318b8012703959de26f">exists</a>(TestPath);</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;}</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160; </div>
<div class="line"><a name="l00396"></a><span class="lineno"><a class="line" href="namespacellvm.html#a99ba9c278f38a01c2442bdaf42af7238">  396</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="namespacellvm.html#a3f08996be2dce22d6d6777faaa4cbe41">getWindowsSDKDir</a>(<a class="code" href="classllvm_1_1vfs_1_1FileSystem.html">vfs::FileSystem</a> &amp;VFS, std::optional&lt;StringRef&gt; WinSdkDir,</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;                      std::optional&lt;StringRef&gt; WinSdkVersion,</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;                      std::optional&lt;StringRef&gt; WinSysRoot, std::string &amp;Path,</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;                      <span class="keywordtype">int</span> &amp;Major, std::string &amp;WindowsSDKIncludeVersion,</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;                      std::string &amp;WindowsSDKLibVersion) {</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;  <span class="comment">// Trust /winsdkdir and /winsdkversion if present.</span></div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="MSVCPaths_8cpp.html#a8805ce08308a58e2e99c8ab39d4ebdc2">getWindowsSDKDirViaCommandLine</a>(VFS, WinSdkDir, WinSdkVersion, WinSysRoot,</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;                                     Path, Major, WindowsSDKIncludeVersion)) {</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    WindowsSDKLibVersion = WindowsSDKIncludeVersion;</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;  }</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160; </div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;  <span class="comment">// FIXME: Try env vars (%WindowsSdkDir%, %UCRTVersion%) before going to</span></div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;  <span class="comment">// registry.</span></div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160; </div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;  <span class="comment">// Try the Windows registry.</span></div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;  std::string RegistrySDKVersion;</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="MSVCPaths_8cpp.html#a721a1e2b9fcfe5e633cb413a6eabed8b">getSystemRegistryString</a>(</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;          <span class="stringliteral">&quot;SOFTWARE\\Microsoft\\Microsoft SDKs\\Windows\\$VERSION&quot;</span>,</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;          <span class="stringliteral">&quot;InstallationFolder&quot;</span>, Path, &amp;RegistrySDKVersion))</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;  <span class="keywordflow">if</span> (Path.empty() || RegistrySDKVersion.empty())</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160; </div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;  WindowsSDKIncludeVersion.clear();</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;  WindowsSDKLibVersion.clear();</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;  Major = 0;</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;  std::sscanf(RegistrySDKVersion.c_str(), <span class="stringliteral">&quot;v%d.&quot;</span>, &amp;Major);</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;  <span class="keywordflow">if</span> (Major &lt;= 7)</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;  <span class="keywordflow">if</span> (Major == 8) {</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    <span class="comment">// Windows SDK 8.x installs libraries in a folder whose names depend on the</span></div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    <span class="comment">// version of the OS you&#39;re targeting.  By default choose the newest, which</span></div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    <span class="comment">// usually corresponds to the version of the OS you&#39;ve installed the SDK on.</span></div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> *Tests[] = {<span class="stringliteral">&quot;winv6.3&quot;</span>, <span class="stringliteral">&quot;win8&quot;</span>, <span class="stringliteral">&quot;win7&quot;</span>};</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="namespacellvm.html#aec7c967a5416fa6e154433965357a50ea0cbc6611f5540bd0809a388dc95a615b">Test</a> : Tests) {</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;      <a class="code" href="classllvm_1_1SmallString.html">SmallString&lt;128&gt;</a> TestPath(Path);</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;      <a class="code" href="namespacellvm_1_1sys_1_1path.html#acb80894344c78dacf8d5ff8c23be697d">sys::path::append</a>(TestPath, <span class="stringliteral">&quot;Lib&quot;</span>, <a class="code" href="namespacellvm.html#aec7c967a5416fa6e154433965357a50ea0cbc6611f5540bd0809a388dc95a615b">Test</a>);</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;      <span class="keywordflow">if</span> (VFS.<a class="code" href="classllvm_1_1vfs_1_1FileSystem.html#a156f5ab4b5c3a318b8012703959de26f">exists</a>(TestPath)) {</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;        WindowsSDKLibVersion = <a class="code" href="namespacellvm.html#aec7c967a5416fa6e154433965357a50ea0cbc6611f5540bd0809a388dc95a615b">Test</a>;</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;      }</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    }</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    <span class="keywordflow">return</span> !WindowsSDKLibVersion.empty();</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;  }</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;  <span class="keywordflow">if</span> (Major == 10) {</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="MSVCPaths_8cpp.html#aaab71b93eca9d982bc9970e71076230f">getWindows10SDKVersionFromPath</a>(VFS, Path, WindowsSDKIncludeVersion))</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;    WindowsSDKLibVersion = WindowsSDKIncludeVersion;</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;  }</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;  <span class="comment">// Unsupported SDK version</span></div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;}</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160; </div>
<div class="line"><a name="l00451"></a><span class="lineno"><a class="line" href="namespacellvm.html#a2053f1005fadde84cc5f0f19ad241a11">  451</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="namespacellvm.html#af944c296925180c38c773968d6970623">getUniversalCRTSdkDir</a>(<a class="code" href="classllvm_1_1vfs_1_1FileSystem.html">vfs::FileSystem</a> &amp;VFS,</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;                           std::optional&lt;StringRef&gt; WinSdkDir,</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;                           std::optional&lt;StringRef&gt; WinSdkVersion,</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;                           std::optional&lt;StringRef&gt; WinSysRoot,</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;                           std::string &amp;Path, std::string &amp;UCRTVersion) {</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;  <span class="comment">// If /winsdkdir is passed, use it as location for the UCRT too.</span></div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;  <span class="comment">// FIXME: Should there be a dedicated /ucrtdir to override /winsdkdir?</span></div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;  <span class="keywordtype">int</span> Major;</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="MSVCPaths_8cpp.html#a8805ce08308a58e2e99c8ab39d4ebdc2">getWindowsSDKDirViaCommandLine</a>(VFS, WinSdkDir, WinSdkVersion, WinSysRoot,</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;                                     Path, Major, UCRTVersion))</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160; </div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;  <span class="comment">// FIXME: Try env vars (%UniversalCRTSdkDir%, %UCRTVersion%) before going to</span></div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;  <span class="comment">// registry.</span></div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160; </div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;  <span class="comment">// vcvarsqueryregistry.bat for Visual Studio 2015 queries the registry</span></div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;  <span class="comment">// for the specific key &quot;KitsRoot10&quot;. So do we.</span></div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="MSVCPaths_8cpp.html#a721a1e2b9fcfe5e633cb413a6eabed8b">getSystemRegistryString</a>(</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;          <span class="stringliteral">&quot;SOFTWARE\\Microsoft\\Windows Kits\\Installed Roots&quot;</span>, <span class="stringliteral">&quot;KitsRoot10&quot;</span>,</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;          Path, <span class="keyword">nullptr</span>))</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160; </div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="MSVCPaths_8cpp.html#aaab71b93eca9d982bc9970e71076230f">getWindows10SDKVersionFromPath</a>(VFS, Path, UCRTVersion);</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;}</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160; </div>
<div class="line"><a name="l00476"></a><span class="lineno"><a class="line" href="namespacellvm.html#a2fcce0d7bd57dccbdc4c746fa5c1cd10">  476</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="namespacellvm.html#a22439c20979b1335d2c672289f5a1d06">findVCToolChainViaCommandLine</a>(<a class="code" href="classllvm_1_1vfs_1_1FileSystem.html">vfs::FileSystem</a> &amp;VFS,</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;                                   std::optional&lt;StringRef&gt; VCToolsDir,</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;                                   std::optional&lt;StringRef&gt; VCToolsVersion,</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;                                   std::optional&lt;StringRef&gt; WinSysRoot,</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;                                   std::string &amp;Path, <a class="code" href="namespacellvm.html#aa1f26fe15566118837302706870c1a7e">ToolsetLayout</a> &amp;VSLayout) {</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;  <span class="comment">// Don&#39;t validate the input; trust the value supplied by the user.</span></div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;  <span class="comment">// The primary motivation is to prevent unnecessary file and registry access.</span></div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;  <span class="keywordflow">if</span> (VCToolsDir || WinSysRoot) {</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;    <span class="keywordflow">if</span> (WinSysRoot) {</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;      <a class="code" href="classllvm_1_1SmallString.html">SmallString&lt;128&gt;</a> ToolsPath(*WinSysRoot);</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;      <a class="code" href="namespacellvm_1_1sys_1_1path.html#acb80894344c78dacf8d5ff8c23be697d">sys::path::append</a>(ToolsPath, <span class="stringliteral">&quot;VC&quot;</span>, <span class="stringliteral">&quot;Tools&quot;</span>, <span class="stringliteral">&quot;MSVC&quot;</span>);</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;      std::string ToolsVersion;</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;      <span class="keywordflow">if</span> (VCToolsVersion)</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;        ToolsVersion = VCToolsVersion-&gt;str();</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;        ToolsVersion = <a class="code" href="MSVCPaths_8cpp.html#aceedb180a9ae58c316577d97c5850392">getHighestNumericTupleInDirectory</a>(VFS, ToolsPath);</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;      <a class="code" href="namespacellvm_1_1sys_1_1path.html#acb80894344c78dacf8d5ff8c23be697d">sys::path::append</a>(ToolsPath, ToolsVersion);</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;      Path = std::string(ToolsPath.<a class="code" href="classllvm_1_1SmallString.html#af5dd7241878be5eed07736eb156bb10b">str</a>());</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;      Path = VCToolsDir-&gt;str();</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;    }</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;    VSLayout = <a class="code" href="namespacellvm.html#aa1f26fe15566118837302706870c1a7eaa44980fa6b2ec45d446f35771799ad7e">ToolsetLayout::VS2017OrNewer</a>;</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;  }</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;}</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160; </div>
<div class="line"><a name="l00503"></a><span class="lineno"><a class="line" href="namespacellvm.html#a5a9952645a56e841314d2b880bd31375">  503</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="namespacellvm.html#a5a9952645a56e841314d2b880bd31375">findVCToolChainViaEnvironment</a>(<a class="code" href="classllvm_1_1vfs_1_1FileSystem.html">vfs::FileSystem</a> &amp;VFS, std::string &amp;Path,</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;                                   <a class="code" href="namespacellvm.html#aa1f26fe15566118837302706870c1a7e">ToolsetLayout</a> &amp;VSLayout) {</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;  <span class="comment">// These variables are typically set by vcvarsall.bat</span></div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;  <span class="comment">// when launching a developer command prompt.</span></div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;  <span class="keywordflow">if</span> (std::optional&lt;std::string&gt; VCToolsInstallDir =</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;          <a class="code" href="classllvm_1_1sys_1_1Process.html#a210453e575b2fc9a4a3e10bf8a9340fd">sys::Process::GetEnv</a>(<span class="stringliteral">&quot;VCToolsInstallDir&quot;</span>)) {</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;    <span class="comment">// This is only set by newer Visual Studios, and it leads straight to</span></div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;    <span class="comment">// the toolchain directory.</span></div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;    Path = <a class="code" href="lib_2Target_2ARM_2README_8txt.html#ad3a99906764c35b2694ae90fa57744a5">std::move</a>(*VCToolsInstallDir);</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;    VSLayout = <a class="code" href="namespacellvm.html#aa1f26fe15566118837302706870c1a7eaa44980fa6b2ec45d446f35771799ad7e">ToolsetLayout::VS2017OrNewer</a>;</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;  }</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;  <span class="keywordflow">if</span> (std::optional&lt;std::string&gt; VCInstallDir =</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;          <a class="code" href="classllvm_1_1sys_1_1Process.html#a210453e575b2fc9a4a3e10bf8a9340fd">sys::Process::GetEnv</a>(<span class="stringliteral">&quot;VCINSTALLDIR&quot;</span>)) {</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;    <span class="comment">// If the previous variable isn&#39;t set but this one is, then we&#39;ve found</span></div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;    <span class="comment">// an older Visual Studio. This variable is set by newer Visual Studios too,</span></div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;    <span class="comment">// so this check has to appear second.</span></div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;    <span class="comment">// In older Visual Studios, the VC directory is the toolchain.</span></div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;    Path = <a class="code" href="lib_2Target_2ARM_2README_8txt.html#ad3a99906764c35b2694ae90fa57744a5">std::move</a>(*VCInstallDir);</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;    VSLayout = <a class="code" href="namespacellvm.html#aa1f26fe15566118837302706870c1a7eaf1eb5a67fac38ebe2cc267a1b9dbd014">ToolsetLayout::OlderVS</a>;</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;  }</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160; </div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;  <span class="comment">// We couldn&#39;t find any VC environment variables. Let&#39;s walk through PATH and</span></div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;  <span class="comment">// see if it leads us to a VC toolchain bin directory. If it does, pick the</span></div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;  <span class="comment">// first one that we find.</span></div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;  <span class="keywordflow">if</span> (std::optional&lt;std::string&gt; PathEnv = <a class="code" href="classllvm_1_1sys_1_1Process.html#a210453e575b2fc9a4a3e10bf8a9340fd">sys::Process::GetEnv</a>(<span class="stringliteral">&quot;PATH&quot;</span>)) {</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;StringRef, 8&gt;</a> PathEntries;</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;    <a class="code" href="classllvm_1_1StringRef.html">StringRef</a>(*PathEnv).<a class="code" href="classllvm_1_1StringRef.html#a6414735714bdbd5c8790f32a0fe99bd2">split</a>(PathEntries, <a class="code" href="namespacellvm_1_1sys.html#a77295e6c130654c888b57aa25f9f90c5">sys::EnvPathSeparator</a>);</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1StringRef.html">StringRef</a> PathEntry : PathEntries) {</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;      <span class="keywordflow">if</span> (PathEntry.empty())</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160; </div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;      <a class="code" href="classllvm_1_1SmallString.html">SmallString&lt;256&gt;</a> ExeTestPath;</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160; </div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;      <span class="comment">// If cl.exe doesn&#39;t exist, then this definitely isn&#39;t a VC toolchain.</span></div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;      ExeTestPath = PathEntry;</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;      <a class="code" href="namespacellvm_1_1sys_1_1path.html#acb80894344c78dacf8d5ff8c23be697d">sys::path::append</a>(ExeTestPath, <span class="stringliteral">&quot;cl.exe&quot;</span>);</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;      <span class="keywordflow">if</span> (!VFS.<a class="code" href="classllvm_1_1vfs_1_1FileSystem.html#a156f5ab4b5c3a318b8012703959de26f">exists</a>(ExeTestPath))</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160; </div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;      <span class="comment">// cl.exe existing isn&#39;t a conclusive test for a VC toolchain; clang also</span></div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;      <span class="comment">// has a cl.exe. So let&#39;s check for link.exe too.</span></div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;      ExeTestPath = PathEntry;</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;      <a class="code" href="namespacellvm_1_1sys_1_1path.html#acb80894344c78dacf8d5ff8c23be697d">sys::path::append</a>(ExeTestPath, <span class="stringliteral">&quot;link.exe&quot;</span>);</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;      <span class="keywordflow">if</span> (!VFS.<a class="code" href="classllvm_1_1vfs_1_1FileSystem.html#a156f5ab4b5c3a318b8012703959de26f">exists</a>(ExeTestPath))</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160; </div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;      <span class="comment">// whatever/VC/bin --&gt; old toolchain, VC dir is toolchain dir.</span></div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;      <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> TestPath = PathEntry;</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;      <span class="keywordtype">bool</span> IsBin = <a class="code" href="namespacellvm_1_1sys_1_1path.html#a5ab6bf136f12ce0bfe2a9754cf1644c7">sys::path::filename</a>(TestPath).<a class="code" href="classllvm_1_1StringRef.html#ae46058c90a3c703357331a6501b32f1c">equals_insensitive</a>(<span class="stringliteral">&quot;bin&quot;</span>);</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;      <span class="keywordflow">if</span> (!IsBin) {</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;        <span class="comment">// Strip any architecture subdir like &quot;amd64&quot;.</span></div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;        TestPath = <a class="code" href="namespacellvm_1_1sys_1_1path.html#aa767afa14fa4c9059e62822bf965723a">sys::path::parent_path</a>(TestPath);</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;        IsBin = <a class="code" href="namespacellvm_1_1sys_1_1path.html#a5ab6bf136f12ce0bfe2a9754cf1644c7">sys::path::filename</a>(TestPath).<a class="code" href="classllvm_1_1StringRef.html#ae46058c90a3c703357331a6501b32f1c">equals_insensitive</a>(<span class="stringliteral">&quot;bin&quot;</span>);</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;      }</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;      <span class="keywordflow">if</span> (IsBin) {</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;        <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> ParentPath = <a class="code" href="namespacellvm_1_1sys_1_1path.html#aa767afa14fa4c9059e62822bf965723a">sys::path::parent_path</a>(TestPath);</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;        <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> ParentFilename = <a class="code" href="namespacellvm_1_1sys_1_1path.html#a5ab6bf136f12ce0bfe2a9754cf1644c7">sys::path::filename</a>(ParentPath);</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;        <span class="keywordflow">if</span> (ParentFilename.<a class="code" href="classllvm_1_1StringRef.html#ae46058c90a3c703357331a6501b32f1c">equals_insensitive</a>(<span class="stringliteral">&quot;VC&quot;</span>)) {</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;          Path = std::string(ParentPath);</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;          VSLayout = <a class="code" href="namespacellvm.html#aa1f26fe15566118837302706870c1a7eaf1eb5a67fac38ebe2cc267a1b9dbd014">ToolsetLayout::OlderVS</a>;</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;        }</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;        <span class="keywordflow">if</span> (ParentFilename.<a class="code" href="classllvm_1_1StringRef.html#ae46058c90a3c703357331a6501b32f1c">equals_insensitive</a>(<span class="stringliteral">&quot;x86ret&quot;</span>) ||</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;            ParentFilename.<a class="code" href="classllvm_1_1StringRef.html#ae46058c90a3c703357331a6501b32f1c">equals_insensitive</a>(<span class="stringliteral">&quot;x86chk&quot;</span>) ||</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;            ParentFilename.<a class="code" href="classllvm_1_1StringRef.html#ae46058c90a3c703357331a6501b32f1c">equals_insensitive</a>(<span class="stringliteral">&quot;amd64ret&quot;</span>) ||</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;            ParentFilename.<a class="code" href="classllvm_1_1StringRef.html#ae46058c90a3c703357331a6501b32f1c">equals_insensitive</a>(<span class="stringliteral">&quot;amd64chk&quot;</span>)) {</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;          Path = std::string(ParentPath);</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;          VSLayout = <a class="code" href="namespacellvm.html#aa1f26fe15566118837302706870c1a7eaaaacfa5380d075af7238c6c88301b333">ToolsetLayout::DevDivInternal</a>;</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;        }</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160; </div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;        <span class="comment">// This could be a new (&gt;=VS2017) toolchain. If it is, we should find</span></div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;        <span class="comment">// path components with these prefixes when walking backwards through</span></div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;        <span class="comment">// the path.</span></div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;        <span class="comment">// Note: empty strings match anything.</span></div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;        <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> ExpectedPrefixes[] = {<span class="stringliteral">&quot;&quot;</span>,     <span class="stringliteral">&quot;Host&quot;</span>,  <span class="stringliteral">&quot;bin&quot;</span>, <span class="stringliteral">&quot;&quot;</span>,</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;                                        <span class="stringliteral">&quot;MSVC&quot;</span>, <span class="stringliteral">&quot;Tools&quot;</span>, <span class="stringliteral">&quot;VC&quot;</span>};</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160; </div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;        <span class="keyword">auto</span> It = <a class="code" href="namespacellvm_1_1sys_1_1path.html#a61cb6d6afaefe6f98af9e82d977ad9b9">sys::path::rbegin</a>(PathEntry);</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;        <span class="keyword">auto</span> End = <a class="code" href="namespacellvm_1_1sys_1_1path.html#a169939bbe3d96fa21656ab634c020b0b">sys::path::rend</a>(PathEntry);</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1StringRef.html">StringRef</a> <a class="code" href="namespacellvm_1_1cl.html#afcbd4ecc474e2d218391d6d3027b086aa7861ef1db44eac8ea7a373cd7c53a7c5">Prefix</a> : ExpectedPrefixes) {</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;          <span class="keywordflow">if</span> (It == End)</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;            <span class="keywordflow">goto</span> NotAToolChain;</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;          <span class="keywordflow">if</span> (!It-&gt;startswith_insensitive(<a class="code" href="namespacellvm_1_1cl.html#afcbd4ecc474e2d218391d6d3027b086aa7861ef1db44eac8ea7a373cd7c53a7c5">Prefix</a>))</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;            <span class="keywordflow">goto</span> NotAToolChain;</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;          ++It;</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;        }</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160; </div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;        <span class="comment">// We&#39;ve found a new toolchain!</span></div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;        <span class="comment">// Back up 3 times (/bin/Host/arch) to get the root path.</span></div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;        <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> ToolChainPath(PathEntry);</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 3; ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;          ToolChainPath = <a class="code" href="namespacellvm_1_1sys_1_1path.html#aa767afa14fa4c9059e62822bf965723a">sys::path::parent_path</a>(ToolChainPath);</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160; </div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;        Path = std::string(ToolChainPath);</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;        VSLayout = <a class="code" href="namespacellvm.html#aa1f26fe15566118837302706870c1a7eaa44980fa6b2ec45d446f35771799ad7e">ToolsetLayout::VS2017OrNewer</a>;</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;      }</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160; </div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;    NotAToolChain:</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;    }</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;  }</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;}</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160; </div>
<div class="line"><a name="l00612"></a><span class="lineno"><a class="line" href="namespacellvm.html#a9b76c9c7999d234ac5566613a6a0f1cd">  612</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="namespacellvm.html#a9b76c9c7999d234ac5566613a6a0f1cd">findVCToolChainViaSetupConfig</a>(<a class="code" href="classllvm_1_1vfs_1_1FileSystem.html">vfs::FileSystem</a> &amp;VFS, std::string &amp;Path,</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;                                   <a class="code" href="namespacellvm.html#aa1f26fe15566118837302706870c1a7e">ToolsetLayout</a> &amp;VSLayout) {</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;<span class="preprocessor">#if !defined(USE_MSVC_SETUP_API)</span></div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;  <span class="comment">// FIXME: This really should be done once in the top-level program&#39;s main</span></div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;  <span class="comment">// function, as it may have already been initialized with a different</span></div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;  <span class="comment">// threading model otherwise.</span></div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;  <a class="code" href="classllvm_1_1sys_1_1InitializeCOMRAII.html">sys::InitializeCOMRAII</a> COM(<a class="code" href="namespacellvm_1_1sys.html#a4b70a76e943a3997fef6b97b3c46d2e9aa32265e3ff7d55d382104535553f4564">sys::COMThreadingMode::SingleThreaded</a>);</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;  HRESULT HR;</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160; </div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;  <span class="comment">// _com_ptr_t will throw a _com_error if a COM calls fail.</span></div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;  <span class="comment">// The LLVM coding standards forbid exception handling, so we&#39;ll have to</span></div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;  <span class="comment">// stop them from being thrown in the first place.</span></div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;  <span class="comment">// The destructor will put the regular error handler back when we leave</span></div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;  <span class="comment">// this scope.</span></div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;  <span class="keyword">struct </span>SuppressCOMErrorsRAII {</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">void</span> __stdcall handler(HRESULT hr, IErrorInfo *perrinfo) {}</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160; </div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;    SuppressCOMErrorsRAII() { _set_com_error_handler(handler); }</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160; </div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;    ~SuppressCOMErrorsRAII() { _set_com_error_handler(_com_raise_error); }</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160; </div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;  } COMErrorSuppressor;</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160; </div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;  ISetupConfigurationPtr Query;</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;  HR = Query.CreateInstance(__uuidof(SetupConfiguration));</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;  <span class="keywordflow">if</span> (FAILED(HR))</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160; </div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;  IEnumSetupInstancesPtr EnumInstances;</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;  HR = ISetupConfiguration2Ptr(Query)-&gt;EnumAllInstances(&amp;EnumInstances);</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;  <span class="keywordflow">if</span> (FAILED(HR))</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160; </div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;  ISetupInstancePtr Instance;</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;  HR = EnumInstances-&gt;Next(1, &amp;Instance, <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;  <span class="keywordflow">if</span> (HR != S_OK)</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160; </div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;  ISetupInstancePtr NewestInstance;</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;  std::optional&lt;uint64_t&gt; NewestVersionNum;</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;  <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;    bstr_t VersionString;</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;    <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> VersionNum;</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;    HR = Instance-&gt;GetInstallationVersion(VersionString.GetAddress());</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;    <span class="keywordflow">if</span> (FAILED(HR))</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;    HR = ISetupHelperPtr(Query)-&gt;ParseVersion(VersionString, &amp;VersionNum);</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;    <span class="keywordflow">if</span> (FAILED(HR))</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;    <span class="keywordflow">if</span> (!NewestVersionNum || (VersionNum &gt; NewestVersionNum)) {</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;      NewestInstance = Instance;</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;      NewestVersionNum = VersionNum;</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;    }</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;  } <span class="keywordflow">while</span> ((HR = EnumInstances-&gt;Next(1, &amp;Instance, <span class="keyword">nullptr</span>)) == S_OK);</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160; </div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;  <span class="keywordflow">if</span> (!NewestInstance)</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160; </div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;  bstr_t VCPathWide;</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;  HR = NewestInstance-&gt;ResolvePath(L<span class="stringliteral">&quot;VC&quot;</span>, VCPathWide.GetAddress());</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;  <span class="keywordflow">if</span> (FAILED(HR))</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160; </div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;  std::string VCRootPath;</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;  <a class="code" href="namespacellvm.html#a632e8458ae307eeaa12c092cb27c689f">convertWideToUTF8</a>(std::wstring(VCPathWide), VCRootPath);</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160; </div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;  <a class="code" href="classllvm_1_1SmallString.html">SmallString&lt;256&gt;</a> ToolsVersionFilePath(VCRootPath);</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;  <a class="code" href="namespacellvm_1_1sys_1_1path.html#acb80894344c78dacf8d5ff8c23be697d">sys::path::append</a>(ToolsVersionFilePath, <span class="stringliteral">&quot;Auxiliary&quot;</span>, <span class="stringliteral">&quot;Build&quot;</span>,</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;                    <span class="stringliteral">&quot;Microsoft.VCToolsVersion.default.txt&quot;</span>);</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160; </div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;  <span class="keyword">auto</span> ToolsVersionFile = <a class="code" href="classllvm_1_1MemoryBuffer.html#aa98611beefe78f907beeee7305cc8174">MemoryBuffer::getFile</a>(ToolsVersionFilePath);</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;  <span class="keywordflow">if</span> (!ToolsVersionFile)</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160; </div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;  <a class="code" href="classllvm_1_1SmallString.html">SmallString&lt;256&gt;</a> ToolchainPath(VCRootPath);</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;  <a class="code" href="namespacellvm_1_1sys_1_1path.html#acb80894344c78dacf8d5ff8c23be697d">sys::path::append</a>(ToolchainPath, <span class="stringliteral">&quot;Tools&quot;</span>, <span class="stringliteral">&quot;MSVC&quot;</span>,</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;                    ToolsVersionFile-&gt;get()-&gt;getBuffer().rtrim());</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;  <span class="keyword">auto</span> <a class="code" href="structStatus.html">Status</a> = VFS.<a class="code" href="classllvm_1_1vfs_1_1FileSystem.html#a7cce577eaf23af960a4c6fdcc2415ef8">status</a>(ToolchainPath);</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="structStatus.html">Status</a> || !<a class="code" href="structStatus.html">Status</a>-&gt;isDirectory())</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160; </div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;  Path = std::string(ToolchainPath.<a class="code" href="classllvm_1_1SmallString.html#af5dd7241878be5eed07736eb156bb10b">str</a>());</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;  VSLayout = <a class="code" href="namespacellvm.html#aa1f26fe15566118837302706870c1a7eaa44980fa6b2ec45d446f35771799ad7e">ToolsetLayout::VS2017OrNewer</a>;</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;}</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160; </div>
<div class="line"><a name="l00701"></a><span class="lineno"><a class="line" href="namespacellvm.html#aee9b1b3966b67cad2185aac5d1159358">  701</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="namespacellvm.html#aee9b1b3966b67cad2185aac5d1159358">findVCToolChainViaRegistry</a>(std::string &amp;Path, <a class="code" href="namespacellvm.html#aa1f26fe15566118837302706870c1a7e">ToolsetLayout</a> &amp;VSLayout) {</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;  std::string VSInstallPath;</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="MSVCPaths_8cpp.html#a721a1e2b9fcfe5e633cb413a6eabed8b">getSystemRegistryString</a>(R<span class="stringliteral">&quot;(SOFTWARE\Microsoft\VisualStudio\$VERSION)&quot;,</span></div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;<span class="stringliteral">                              </span><span class="stringliteral">&quot;InstallDir&quot;</span>, VSInstallPath, <span class="keyword">nullptr</span>) ||</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;      <a class="code" href="MSVCPaths_8cpp.html#a721a1e2b9fcfe5e633cb413a6eabed8b">getSystemRegistryString</a>(R<span class="stringliteral">&quot;(SOFTWARE\Microsoft\VCExpress\$VERSION)&quot;,</span></div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;<span class="stringliteral">                              </span><span class="stringliteral">&quot;InstallDir&quot;</span>, VSInstallPath, <span class="keyword">nullptr</span>)) {</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;    <span class="keywordflow">if</span> (!VSInstallPath.empty()) {</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;      <span class="keyword">auto</span> pos = VSInstallPath.find(R<span class="stringliteral">&quot;(\Common7\IDE)&quot;);</span></div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;<span class="stringliteral">      </span><span class="keywordflow">if</span> (pos == std::string::npos)</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;      <a class="code" href="classllvm_1_1SmallString.html">SmallString&lt;256&gt;</a> VCPath(<a class="code" href="classllvm_1_1StringRef.html">StringRef</a>(VSInstallPath.c_str(), pos));</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;      <a class="code" href="namespacellvm_1_1sys_1_1path.html#acb80894344c78dacf8d5ff8c23be697d">sys::path::append</a>(VCPath, <span class="stringliteral">&quot;VC&quot;</span>);</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160; </div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;      Path = std::string(VCPath.<a class="code" href="classllvm_1_1SmallString.html#af5dd7241878be5eed07736eb156bb10b">str</a>());</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;      VSLayout = <a class="code" href="namespacellvm.html#aa1f26fe15566118837302706870c1a7eaf1eb5a67fac38ebe2cc267a1b9dbd014">ToolsetLayout::OlderVS</a>;</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;    }</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;  }</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;}</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160; </div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;} <span class="comment">// namespace llvm</span></div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="alib_2Target_2README_8txt_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">i</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2README_8txt_source.html#l00029">README.txt:29</a></div></div>
<div class="ttc" id="aclassllvm_1_1vfs_1_1FileSystem_html_a864ab0cadce5efa12c143f4f1429b22d"><div class="ttname"><a href="classllvm_1_1vfs_1_1FileSystem.html#a864ab0cadce5efa12c143f4f1429b22d">llvm::vfs::FileSystem::dir_begin</a></div><div class="ttdeci">virtual directory_iterator dir_begin(const Twine &amp;Dir, std::error_code &amp;EC)=0</div><div class="ttdoc">Get a directory_iterator for Dir.</div></div>
<div class="ttc" id="aMSVCSetupApi_8h_html_ae680e261da24c8b71e1c6e9bb9036897"><div class="ttname"><a href="MSVCSetupApi_8h.html#ae680e261da24c8b71e1c6e9bb9036897">IEnumSetupInstances</a></div><div class="ttdeci">struct IEnumSetupInstances IEnumSetupInstances</div><div class="ttdef"><b>Definition:</b> <a href="MSVCSetupApi_8h_source.html#l00092">MSVCSetupApi.h:92</a></div></div>
<div class="ttc" id="anamespacellvm_html"><div class="ttname"><a href="namespacellvm.html">llvm</a></div><div class="ttdoc">This is an optimization pass for GlobalISel generic memory operations.</div><div class="ttdef"><b>Definition:</b> <a href="AddressRanges_8h_source.html#l00018">AddressRanges.h:18</a></div></div>
<div class="ttc" id="aclassllvm_1_1VersionTuple_html_a6b61483aaba059f71022975a37737e15"><div class="ttname"><a href="classllvm_1_1VersionTuple.html#a6b61483aaba059f71022975a37737e15">llvm::VersionTuple::tryParse</a></div><div class="ttdeci">bool tryParse(StringRef string)</div><div class="ttdoc">Try to parse the given string as a version number.</div><div class="ttdef"><b>Definition:</b> <a href="VersionTuple_8cpp_source.html#l00063">VersionTuple.cpp:63</a></div></div>
<div class="ttc" id="anamespacellvm_html_ae4bae58c61ecb36efa5d563c745b9d53"><div class="ttname"><a href="namespacellvm.html#ae4bae58c61ecb36efa5d563c745b9d53">llvm::appendArchToWindowsSDKLibPath</a></div><div class="ttdeci">bool appendArchToWindowsSDKLibPath(int SDKMajor, llvm::SmallString&lt; 128 &gt; LibPath, llvm::Triple::ArchType Arch, std::string &amp;path)</div><div class="ttdef"><b>Definition:</b> <a href="MSVCPaths_8cpp_source.html#l00310">MSVCPaths.cpp:310</a></div></div>
<div class="ttc" id="aclassllvm_1_1MemoryBuffer_html_aa98611beefe78f907beeee7305cc8174"><div class="ttname"><a href="classllvm_1_1MemoryBuffer.html#aa98611beefe78f907beeee7305cc8174">llvm::MemoryBuffer::getFile</a></div><div class="ttdeci">static ErrorOr&lt; std::unique_ptr&lt; MemoryBuffer &gt; &gt; getFile(const Twine &amp;Filename, bool IsText=false, bool RequiresNullTerminator=true, bool IsVolatile=false, std::optional&lt; Align &gt; Alignment=std::nullopt)</div><div class="ttdoc">Open the specified file as a MemoryBuffer, returning a new MemoryBuffer if successful,...</div><div class="ttdef"><b>Definition:</b> <a href="MemoryBuffer_8cpp_source.html#l00248">MemoryBuffer.cpp:248</a></div></div>
<div class="ttc" id="anamespacellvm_html_a80f0cb629c76b63ad31f32f01bb1bd45"><div class="ttname"><a href="namespacellvm.html#a80f0cb629c76b63ad31f32f01bb1bd45">llvm::archToLegacyVCArch</a></div><div class="ttdeci">const char * archToLegacyVCArch(llvm::Triple::ArchType Arch)</div><div class="ttdef"><b>Definition:</b> <a href="MSVCPaths_8cpp_source.html#l00278">MSVCPaths.cpp:278</a></div></div>
<div class="ttc" id="anamespacellvm_1_1sys_1_1path_html_a61cb6d6afaefe6f98af9e82d977ad9b9"><div class="ttname"><a href="namespacellvm_1_1sys_1_1path.html#a61cb6d6afaefe6f98af9e82d977ad9b9">llvm::sys::path::rbegin</a></div><div class="ttdeci">reverse_iterator rbegin(StringRef path, Style style=Style::native)</div><div class="ttdoc">Get reverse begin iterator over path.</div><div class="ttdef"><b>Definition:</b> <a href="Path_8cpp_source.html#l00297">Path.cpp:297</a></div></div>
<div class="ttc" id="anamespacellvm_1_1cl_html_afcbd4ecc474e2d218391d6d3027b086aa7861ef1db44eac8ea7a373cd7c53a7c5"><div class="ttname"><a href="namespacellvm_1_1cl.html#afcbd4ecc474e2d218391d6d3027b086aa7861ef1db44eac8ea7a373cd7c53a7c5">llvm::cl::Prefix</a></div><div class="ttdeci">@ Prefix</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00159">CommandLine.h:159</a></div></div>
<div class="ttc" id="anamespacellvm_html_abf156ed576f5bcdb93911b50b775c8ac"><div class="ttname"><a href="namespacellvm.html#abf156ed576f5bcdb93911b50b775c8ac">llvm::getSubDirectoryPath</a></div><div class="ttdeci">std::string getSubDirectoryPath(SubDirectoryType Type, ToolsetLayout VSLayout, const std::string &amp;VCToolChainPath, llvm::Triple::ArchType TargetArch, llvm::StringRef SubdirParent=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="MSVCPaths_8cpp_source.html#l00334">MSVCPaths.cpp:334</a></div></div>
<div class="ttc" id="aStringRef_8h_html"><div class="ttname"><a href="StringRef_8h.html">StringRef.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1Triple_html_a547abd13f7a3c063aa72c8192a868154a0eefa3e53db25b90828e42c64b138648"><div class="ttname"><a href="classllvm_1_1Triple.html#a547abd13f7a3c063aa72c8192a868154a0eefa3e53db25b90828e42c64b138648">llvm::Triple::x86</a></div><div class="ttdeci">@ x86</div><div class="ttdef"><b>Definition:</b> <a href="Triple_8h_source.html#l00085">Triple.h:85</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVector_html"><div class="ttname"><a href="classllvm_1_1SmallVector.html">llvm::SmallVector</a></div><div class="ttdoc">This is a 'vector' (really, a variable-sized array), optimized for the case when the array is small.</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l01199">SmallVector.h:1199</a></div></div>
<div class="ttc" id="anamespacellvm_html_af944c296925180c38c773968d6970623"><div class="ttname"><a href="namespacellvm.html#af944c296925180c38c773968d6970623">llvm::getUniversalCRTSdkDir</a></div><div class="ttdeci">bool getUniversalCRTSdkDir(vfs::FileSystem &amp;VFS, std::optional&lt; llvm::StringRef &gt; WinSdkDir, std::optional&lt; llvm::StringRef &gt; WinSdkVersion, std::optional&lt; llvm::StringRef &gt; WinSysRoot, std::string &amp;Path, std::string &amp;UCRTVersion)</div><div class="ttdef"><b>Definition:</b> <a href="MSVCPaths_8cpp_source.html#l00451">MSVCPaths.cpp:451</a></div></div>
<div class="ttc" id="aPath_8h_html"><div class="ttname"><a href="Path_8h.html">Path.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_aa1f26fe15566118837302706870c1a7eaf1eb5a67fac38ebe2cc267a1b9dbd014"><div class="ttname"><a href="namespacellvm.html#aa1f26fe15566118837302706870c1a7eaf1eb5a67fac38ebe2cc267a1b9dbd014">llvm::ToolsetLayout::OlderVS</a></div><div class="ttdeci">@ OlderVS</div></div>
<div class="ttc" id="aVersionTuple_8h_html"><div class="ttname"><a href="VersionTuple_8h.html">VersionTuple.h</a></div></div>
<div class="ttc" id="anamespacellvm_1_1sys_html_a4b70a76e943a3997fef6b97b3c46d2e9aa32265e3ff7d55d382104535553f4564"><div class="ttname"><a href="namespacellvm_1_1sys.html#a4b70a76e943a3997fef6b97b3c46d2e9aa32265e3ff7d55d382104535553f4564">llvm::sys::COMThreadingMode::SingleThreaded</a></div><div class="ttdeci">@ SingleThreaded</div></div>
<div class="ttc" id="aclassllvm_1_1Triple_html"><div class="ttname"><a href="classllvm_1_1Triple.html">llvm::Triple</a></div><div class="ttdoc">Triple - Helper class for working with autoconf configuration names.</div><div class="ttdef"><b>Definition:</b> <a href="Triple_8h_source.html#l00044">Triple.h:44</a></div></div>
<div class="ttc" id="aclassllvm_1_1vfs_1_1FileSystem_html_a7cce577eaf23af960a4c6fdcc2415ef8"><div class="ttname"><a href="classllvm_1_1vfs_1_1FileSystem.html#a7cce577eaf23af960a4c6fdcc2415ef8">llvm::vfs::FileSystem::status</a></div><div class="ttdeci">virtual llvm::ErrorOr&lt; Status &gt; status(const Twine &amp;Path)=0</div><div class="ttdoc">Get the status of the entry at Path, if one exists.</div></div>
<div class="ttc" id="aclassllvm_1_1Type_html"><div class="ttname"><a href="classllvm_1_1Type.html">llvm::Type</a></div><div class="ttdoc">The instances of the Type class are immutable: once they are created, they are never changed.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00045">Type.h:45</a></div></div>
<div class="ttc" id="aclassllvm_1_1Triple_html_a547abd13f7a3c063aa72c8192a868154a13d8ce5e71051718a537277c6a594062"><div class="ttname"><a href="classllvm_1_1Triple.html#a547abd13f7a3c063aa72c8192a868154a13d8ce5e71051718a537277c6a594062">llvm::Triple::x86_64</a></div><div class="ttdeci">@ x86_64</div><div class="ttdef"><b>Definition:</b> <a href="Triple_8h_source.html#l00086">Triple.h:86</a></div></div>
<div class="ttc" id="aclassllvm_1_1vfs_1_1directory__iterator_html"><div class="ttname"><a href="classllvm_1_1vfs_1_1directory__iterator.html">llvm::vfs::directory_iterator</a></div><div class="ttdoc">An input iterator over the entries in a virtual path, similar to llvm::sys::fs::directory_iterator.</div><div class="ttdef"><b>Definition:</b> <a href="VirtualFileSystem_8h_source.html#l00181">VirtualFileSystem.h:181</a></div></div>
<div class="ttc" id="anamespacellvm_html_a3f08996be2dce22d6d6777faaa4cbe41"><div class="ttname"><a href="namespacellvm.html#a3f08996be2dce22d6d6777faaa4cbe41">llvm::getWindowsSDKDir</a></div><div class="ttdeci">bool getWindowsSDKDir(vfs::FileSystem &amp;VFS, std::optional&lt; llvm::StringRef &gt; WinSdkDir, std::optional&lt; llvm::StringRef &gt; WinSdkVersion, std::optional&lt; llvm::StringRef &gt; WinSysRoot, std::string &amp;Path, int &amp;Major, std::string &amp;WindowsSDKIncludeVersion, std::string &amp;WindowsSDKLibVersion)</div><div class="ttdoc">Get Windows SDK installation directory.</div><div class="ttdef"><b>Definition:</b> <a href="MSVCPaths_8cpp_source.html#l00396">MSVCPaths.cpp:396</a></div></div>
<div class="ttc" id="anamespacellvm_html_aa1f26fe15566118837302706870c1a7eaaaacfa5380d075af7238c6c88301b333"><div class="ttname"><a href="namespacellvm.html#aa1f26fe15566118837302706870c1a7eaaaacfa5380d075af7238c6c88301b333">llvm::ToolsetLayout::DevDivInternal</a></div><div class="ttdeci">@ DevDivInternal</div></div>
<div class="ttc" id="alib_2Target_2README_8txt_html_a2352e45658fc7292aa209a94baa095e9"><div class="ttname"><a href="lib_2Target_2README_8txt.html#a2352e45658fc7292aa209a94baa095e9">x86</a></div><div class="ttdeci">Note that only the low bits of effective_addr2 are used On bit we don t eliminate the computation of the top half of effective_addr2 because we don t have whole function selection dags On x86</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2README_8txt_source.html#l00318">README.txt:318</a></div></div>
<div class="ttc" id="aMSVCSetupApi_8h_html"><div class="ttname"><a href="MSVCSetupApi_8h.html">MSVCSetupApi.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1VersionTuple_html_a56a72b8793b8e0df7217c9b19a83320b"><div class="ttname"><a href="classllvm_1_1VersionTuple.html#a56a72b8793b8e0df7217c9b19a83320b">llvm::VersionTuple::getMajor</a></div><div class="ttdeci">unsigned getMajor() const</div><div class="ttdoc">Retrieve the major version number.</div><div class="ttdef"><b>Definition:</b> <a href="VersionTuple_8h_source.html#l00073">VersionTuple.h:73</a></div></div>
<div class="ttc" id="aMSVCSetupApi_8h_html_a14a8d64b457ab2c1e4978ca1847b7784"><div class="ttname"><a href="MSVCSetupApi_8h.html#a14a8d64b457ab2c1e4978ca1847b7784">ISetupInstance2</a></div><div class="ttdeci">struct ISetupInstance2 ISetupInstance2</div><div class="ttdef"><b>Definition:</b> <a href="MSVCSetupApi_8h_source.html#l00087">MSVCSetupApi.h:87</a></div></div>
<div class="ttc" id="anamespacellvm_html_a372f87e2cac1c83389c98554dc44806da807dbe7d1c25a633894d4a231b1c76d3"><div class="ttname"><a href="namespacellvm.html#a372f87e2cac1c83389c98554dc44806da807dbe7d1c25a633894d4a231b1c76d3">llvm::SubDirectoryType::Bin</a></div><div class="ttdeci">@ Bin</div></div>
<div class="ttc" id="aREADME__P9_8txt_html_ae070adaf1b4bf0e7c12fcae2b9c5ae67"><div class="ttname"><a href="README__P9_8txt.html#ae070adaf1b4bf0e7c12fcae2b9c5ae67">result</a></div><div class="ttdeci">It looks like we only need to define PPCfmarto for these because according to these instructions perform RTO on fma s result</div><div class="ttdef"><b>Definition:</b> <a href="README__P9_8txt_source.html#l00256">README_P9.txt:256</a></div></div>
<div class="ttc" id="anamespacellvm_1_1sys_1_1path_html_acb80894344c78dacf8d5ff8c23be697d"><div class="ttname"><a href="namespacellvm_1_1sys_1_1path.html#acb80894344c78dacf8d5ff8c23be697d">llvm::sys::path::append</a></div><div class="ttdeci">void append(SmallVectorImpl&lt; char &gt; &amp;path, const Twine &amp;a, const Twine &amp;b=&quot;&quot;, const Twine &amp;c=&quot;&quot;, const Twine &amp;d=&quot;&quot;)</div><div class="ttdoc">Append to path.</div><div class="ttdef"><b>Definition:</b> <a href="Path_8cpp_source.html#l00456">Path.cpp:456</a></div></div>
<div class="ttc" id="aProcess_8h_html"><div class="ttname"><a href="Process_8h.html">Process.h</a></div></div>
<div class="ttc" id="anamespacellvm_1_1sys_html_a77295e6c130654c888b57aa25f9f90c5"><div class="ttname"><a href="namespacellvm_1_1sys.html#a77295e6c130654c888b57aa25f9f90c5">llvm::sys::EnvPathSeparator</a></div><div class="ttdeci">const char EnvPathSeparator</div><div class="ttdoc">This is the OS-specific separator for PATH like environment variables:</div><div class="ttdef"><b>Definition:</b> <a href="Program_8h_source.html#l00032">Program.h:32</a></div></div>
<div class="ttc" id="anamespacellvm_html_aee9b1b3966b67cad2185aac5d1159358"><div class="ttname"><a href="namespacellvm.html#aee9b1b3966b67cad2185aac5d1159358">llvm::findVCToolChainViaRegistry</a></div><div class="ttdeci">bool findVCToolChainViaRegistry(std::string &amp;Path, ToolsetLayout &amp;VSLayout)</div><div class="ttdef"><b>Definition:</b> <a href="MSVCPaths_8cpp_source.html#l00701">MSVCPaths.cpp:701</a></div></div>
<div class="ttc" id="aclassllvm_1_1Triple_html_a547abd13f7a3c063aa72c8192a868154"><div class="ttname"><a href="classllvm_1_1Triple.html#a547abd13f7a3c063aa72c8192a868154">llvm::Triple::ArchType</a></div><div class="ttdeci">ArchType</div><div class="ttdef"><b>Definition:</b> <a href="Triple_8h_source.html#l00046">Triple.h:46</a></div></div>
<div class="ttc" id="anamespacellvm_html_aec7c967a5416fa6e154433965357a50ea0cbc6611f5540bd0809a388dc95a615b"><div class="ttname"><a href="namespacellvm.html#aec7c967a5416fa6e154433965357a50ea0cbc6611f5540bd0809a388dc95a615b">llvm::PGSOQueryType::Test</a></div><div class="ttdeci">@ Test</div></div>
<div class="ttc" id="aTargetParser_2Host_8h_html"><div class="ttname"><a href="TargetParser_2Host_8h.html">Host.h</a></div></div>
<div class="ttc" id="aSmallString_8h_html"><div class="ttname"><a href="SmallString_8h.html">SmallString.h</a></div></div>
<div class="ttc" id="aCOM_8h_html"><div class="ttname"><a href="COM_8h.html">COM.h</a></div></div>
<div class="ttc" id="aTwine_8h_html"><div class="ttname"><a href="Twine_8h.html">Twine.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_a372f87e2cac1c83389c98554dc44806da043d23e54edc5360a7785ae212d1b806"><div class="ttname"><a href="namespacellvm.html#a372f87e2cac1c83389c98554dc44806da043d23e54edc5360a7785ae212d1b806">llvm::SubDirectoryType::Lib</a></div><div class="ttdeci">@ Lib</div></div>
<div class="ttc" id="anamespacellvm_html_a9b76c9c7999d234ac5566613a6a0f1cd"><div class="ttname"><a href="namespacellvm.html#a9b76c9c7999d234ac5566613a6a0f1cd">llvm::findVCToolChainViaSetupConfig</a></div><div class="ttdeci">bool findVCToolChainViaSetupConfig(vfs::FileSystem &amp;VFS, std::string &amp;Path, ToolsetLayout &amp;VSLayout)</div><div class="ttdef"><b>Definition:</b> <a href="MSVCPaths_8cpp_source.html#l00612">MSVCPaths.cpp:612</a></div></div>
<div class="ttc" id="anamespacellvm_1_1MipsISD_html_a422daf9aa810935178671306b651d69ba230674684da59830e4af773e6393d1dd"><div class="ttname"><a href="namespacellvm_1_1MipsISD.html#a422daf9aa810935178671306b651d69ba230674684da59830e4af773e6393d1dd">llvm::MipsISD::Highest</a></div><div class="ttdeci">@ Highest</div><div class="ttdef"><b>Definition:</b> <a href="MipsISelLowering_8h_source.html#l00068">MipsISelLowering.h:68</a></div></div>
<div class="ttc" id="aclassllvm_1_1vfs_1_1FileSystem_html_a156f5ab4b5c3a318b8012703959de26f"><div class="ttname"><a href="classllvm_1_1vfs_1_1FileSystem.html#a156f5ab4b5c3a318b8012703959de26f">llvm::vfs::FileSystem::exists</a></div><div class="ttdeci">bool exists(const Twine &amp;Path)</div><div class="ttdoc">Check whether a file exists. Provided for convenience.</div><div class="ttdef"><b>Definition:</b> <a href="VirtualFileSystem_8cpp_source.html#l00148">VirtualFileSystem.cpp:148</a></div></div>
<div class="ttc" id="aclassllvm_1_1VersionTuple_html"><div class="ttname"><a href="classllvm_1_1VersionTuple.html">llvm::VersionTuple</a></div><div class="ttdoc">Represents a version number in the form major[.minor[.subminor[.build]]].</div><div class="ttdef"><b>Definition:</b> <a href="VersionTuple_8h_source.html#l00031">VersionTuple.h:31</a></div></div>
<div class="ttc" id="anamespacellvm_1_1IndexedInstrProf_html_a3890d6a47a6ff8b8c4ecc8a1f9040a04"><div class="ttname"><a href="namespacellvm_1_1IndexedInstrProf.html#a3890d6a47a6ff8b8c4ecc8a1f9040a04">llvm::IndexedInstrProf::Version</a></div><div class="ttdeci">const uint64_t Version</div><div class="ttdef"><b>Definition:</b> <a href="InstrProf_8h_source.html#l01058">InstrProf.h:1058</a></div></div>
<div class="ttc" id="aclassllvm_1_1Triple_html_a5fc23559f17bbe5ff83ec0fed0a5fdcf"><div class="ttname"><a href="classllvm_1_1Triple.html#a5fc23559f17bbe5ff83ec0fed0a5fdcf">llvm::Triple::getArch</a></div><div class="ttdeci">ArchType getArch() const</div><div class="ttdoc">Get the parsed architecture type of this triple.</div><div class="ttdef"><b>Definition:</b> <a href="Triple_8h_source.html#l00355">Triple.h:355</a></div></div>
<div class="ttc" id="anamespacellvm_html_a5a9952645a56e841314d2b880bd31375"><div class="ttname"><a href="namespacellvm.html#a5a9952645a56e841314d2b880bd31375">llvm::findVCToolChainViaEnvironment</a></div><div class="ttdeci">bool findVCToolChainViaEnvironment(vfs::FileSystem &amp;VFS, std::string &amp;Path, ToolsetLayout &amp;VSLayout)</div><div class="ttdef"><b>Definition:</b> <a href="MSVCPaths_8cpp_source.html#l00503">MSVCPaths.cpp:503</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallString_html"><div class="ttname"><a href="classllvm_1_1SmallString.html">llvm::SmallString&lt; 128 &gt;</a></div></div>
<div class="ttc" id="aADT_2tmp_8txt_html_a07ed0bfaa124c15897944fe3eaa971ab"><div class="ttname"><a href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a></div><div class="ttdeci">Class for arbitrary precision integers APInt is a functional replacement for common case unsigned integer type like unsigned long or uint64_t</div><div class="ttdef"><b>Definition:</b> <a href="ADT_2tmp_8txt_source.html#l00001">tmp.txt:1</a></div></div>
<div class="ttc" id="aclassllvm_1_1StringRef_html_a2dc80c585ad5882da8cae7b5968f7e74"><div class="ttname"><a href="classllvm_1_1StringRef.html#a2dc80c585ad5882da8cae7b5968f7e74">llvm::StringRef::empty</a></div><div class="ttdeci">constexpr bool empty() const</div><div class="ttdoc">empty - Check if the string is empty.</div><div class="ttdef"><b>Definition:</b> <a href="StringRef_8h_source.html#l00134">StringRef.h:134</a></div></div>
<div class="ttc" id="aMSVCPaths_8h_html"><div class="ttname"><a href="MSVCPaths_8h.html">MSVCPaths.h</a></div></div>
<div class="ttc" id="aREADME-X86-64_8txt_html_aac3add0badd5c39bebc02df0b5d9bdcf"><div class="ttname"><a href="README-X86-64_8txt.html#aac3add0badd5c39bebc02df0b5d9bdcf">type</a></div><div class="ttdeci">AMD64 Optimization Manual has some nice information about optimizing integer multiplication by a constant How much of it applies to Intel s X86 implementation There are definite trade offs to xmm0 cvttss2siq rdx jb L3 subss xmm0 rax cvttss2siq rdx xorq rdx rax ret instead of xmm1 cvttss2siq rcx movaps xmm2 subss xmm2 cvttss2siq rax rdx xorq rax ucomiss xmm0 cmovb rax ret Seems like the jb branch has high likelihood of being taken It would have saved a few instructions It s not possible to reference and DH registers in an instruction requiring REX prefix divb and mulb both produce results in AH If isel emits a CopyFromReg which gets turned into a movb and that can be allocated a r8b r15b To get around isel emits a CopyFromReg from AX and then right shift it down by and truncate it It s not pretty but it works We need some register allocation magic to make the hack go which would often require a callee saved register Callees usually need to keep this value live for most of their body so it doesn t add a significant burden on them We currently implement this in however this is suboptimal because it means that it would be quite awkward to implement the optimization for callers A better implementation would be to relax the LLVM IR rules for sret arguments to allow a function with an sret argument to have a non void return type</div><div class="ttdef"><b>Definition:</b> <a href="README-X86-64_8txt_source.html#l00070">README-X86-64.txt:70</a></div></div>
<div class="ttc" id="anamespacellvm_html_aa1f26fe15566118837302706870c1a7eaa44980fa6b2ec45d446f35771799ad7e"><div class="ttname"><a href="namespacellvm.html#aa1f26fe15566118837302706870c1a7eaa44980fa6b2ec45d446f35771799ad7e">llvm::ToolsetLayout::VS2017OrNewer</a></div><div class="ttdeci">@ VS2017OrNewer</div></div>
<div class="ttc" id="aMSVCSetupApi_8h_html_a7a9c6a8d3ca5df83b7df4fb481840c3b"><div class="ttname"><a href="MSVCSetupApi_8h.html#a7a9c6a8d3ca5df83b7df4fb481840c3b">ISetupConfiguration</a></div><div class="ttdeci">struct ISetupConfiguration ISetupConfiguration</div><div class="ttdef"><b>Definition:</b> <a href="MSVCSetupApi_8h_source.html#l00097">MSVCSetupApi.h:97</a></div></div>
<div class="ttc" id="anamespacellvm_html_aa1f26fe15566118837302706870c1a7e"><div class="ttname"><a href="namespacellvm.html#aa1f26fe15566118837302706870c1a7e">llvm::ToolsetLayout</a></div><div class="ttdeci">ToolsetLayout</div><div class="ttdef"><b>Definition:</b> <a href="MSVCPaths_8h_source.html#l00030">MSVCPaths.h:30</a></div></div>
<div class="ttc" id="aREADME__ALTIVEC_8txt_html_a98586ea01a32ff5046b0868b036a1849"><div class="ttname"><a href="README__ALTIVEC_8txt.html#a98586ea01a32ff5046b0868b036a1849">index</a></div><div class="ttdeci">splat index</div><div class="ttdef"><b>Definition:</b> <a href="README__ALTIVEC_8txt_source.html#l00181">README_ALTIVEC.txt:181</a></div></div>
<div class="ttc" id="alib_2Target_2ARM_2README_8txt_html_ad3a99906764c35b2694ae90fa57744a5"><div class="ttname"><a href="lib_2Target_2ARM_2README_8txt.html#ad3a99906764c35b2694ae90fa57744a5">move</a></div><div class="ttdeci">compiles ldr LCPI1_0 ldr ldr mov lsr tst moveq r1 ldr LCPI1_1 and r0 bx lr It would be better to do something like to fold the shift into the conditional move</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2ARM_2README_8txt_source.html#l00546">README.txt:546</a></div></div>
<div class="ttc" id="aMSVCSetupApi_8h_html_aab1a1cfa49072adfc4b6353f2b5fce6f"><div class="ttname"><a href="MSVCSetupApi_8h.html#aab1a1cfa49072adfc4b6353f2b5fce6f">ISetupConfiguration2</a></div><div class="ttdeci">struct ISetupConfiguration2 ISetupConfiguration2</div><div class="ttdef"><b>Definition:</b> <a href="MSVCSetupApi_8h_source.html#l00102">MSVCSetupApi.h:102</a></div></div>
<div class="ttc" id="aMSVCSetupApi_8h_html_a24d28eb24421e5760e94785a4c52ba30"><div class="ttname"><a href="MSVCSetupApi_8h.html#a24d28eb24421e5760e94785a4c52ba30">ISetupInstance</a></div><div class="ttdeci">struct ISetupInstance ISetupInstance</div><div class="ttdef"><b>Definition:</b> <a href="MSVCSetupApi_8h_source.html#l00082">MSVCSetupApi.h:82</a></div></div>
<div class="ttc" id="alib_2Target_2README_8txt_html_a02def7c594e9f19ff247ed0bf33d1c30"><div class="ttname"><a href="lib_2Target_2README_8txt.html#a02def7c594e9f19ff247ed0bf33d1c30">size</a></div><div class="ttdeci">i&lt; reg-&gt; size</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2README_8txt_source.html#l00166">README.txt:166</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AMDGPU_1_1SDWA_html_a487d59303b94fbf4adddd9a08c30da0aaddbc3f8d705f646af626fd73cdf3618b"><div class="ttname"><a href="namespacellvm_1_1AMDGPU_1_1SDWA.html#a487d59303b94fbf4adddd9a08c30da0aaddbc3f8d705f646af626fd73cdf3618b">llvm::AMDGPU::SDWA::DWORD</a></div><div class="ttdeci">@ DWORD</div><div class="ttdef"><b>Definition:</b> <a href="SIDefines_8h_source.html#l00782">SIDefines.h:782</a></div></div>
<div class="ttc" id="anamespacellvm_1_1sys_1_1path_html_aa767afa14fa4c9059e62822bf965723a"><div class="ttname"><a href="namespacellvm_1_1sys_1_1path.html#aa767afa14fa4c9059e62822bf965723a">llvm::sys::path::parent_path</a></div><div class="ttdeci">StringRef parent_path(StringRef path, Style style=Style::native)</div><div class="ttdoc">Get parent path.</div><div class="ttdef"><b>Definition:</b> <a href="Path_8cpp_source.html#l00467">Path.cpp:467</a></div></div>
<div class="ttc" id="aMSVCPaths_8cpp_html_a721a1e2b9fcfe5e633cb413a6eabed8b"><div class="ttname"><a href="MSVCPaths_8cpp.html#a721a1e2b9fcfe5e633cb413a6eabed8b">getSystemRegistryString</a></div><div class="ttdeci">static bool getSystemRegistryString(const char *keyPath, const char *valueName, std::string &amp;value, std::string *phValue)</div><div class="ttdoc">Read registry string.</div><div class="ttdef"><b>Definition:</b> <a href="MSVCPaths_8cpp_source.html#l00174">MSVCPaths.cpp:174</a></div></div>
<div class="ttc" id="astructStatus_html"><div class="ttname"><a href="structStatus.html">Status</a></div><div class="ttdef"><b>Definition:</b> <a href="SIModeRegister_8cpp_source.html#l00029">SIModeRegister.cpp:29</a></div></div>
<div class="ttc" id="aTriple_8h_html"><div class="ttname"><a href="Triple_8h.html">Triple.h</a></div></div>
<div class="ttc" id="aRustDemangle_8cpp_html_a12d4f37888b638bcbd9fc0201492c776"><div class="ttname"><a href="RustDemangle_8cpp.html#a12d4f37888b638bcbd9fc0201492c776">isDigit</a></div><div class="ttdeci">static bool isDigit(const char C)</div><div class="ttdef"><b>Definition:</b> <a href="RustDemangle_8cpp_source.html#l00173">RustDemangle.cpp:173</a></div></div>
<div class="ttc" id="aclassllvm_1_1Triple_html_a547abd13f7a3c063aa72c8192a868154a8b312a985e2504366d24a2200faf37ff"><div class="ttname"><a href="classllvm_1_1Triple.html#a547abd13f7a3c063aa72c8192a868154a8b312a985e2504366d24a2200faf37ff">llvm::Triple::arm</a></div><div class="ttdeci">@ arm</div><div class="ttdef"><b>Definition:</b> <a href="Triple_8h_source.html#l00049">Triple.h:49</a></div></div>
<div class="ttc" id="aMSVCPaths_8cpp_html_aaab71b93eca9d982bc9970e71076230f"><div class="ttname"><a href="MSVCPaths_8cpp.html#aaab71b93eca9d982bc9970e71076230f">getWindows10SDKVersionFromPath</a></div><div class="ttdeci">static bool getWindows10SDKVersionFromPath(llvm::vfs::FileSystem &amp;VFS, const std::string &amp;SDKPath, std::string &amp;SDKVersion)</div><div class="ttdef"><b>Definition:</b> <a href="MSVCPaths_8cpp_source.html#l00087">MSVCPaths.cpp:87</a></div></div>
<div class="ttc" id="aclassllvm_1_1StringRef_html"><div class="ttname"><a href="classllvm_1_1StringRef.html">llvm::StringRef</a></div><div class="ttdoc">StringRef - Represent a constant reference to a string, i.e.</div><div class="ttdef"><b>Definition:</b> <a href="StringRef_8h_source.html#l00050">StringRef.h:50</a></div></div>
<div class="ttc" id="aclassllvm_1_1sys_1_1Process_html_a210453e575b2fc9a4a3e10bf8a9340fd"><div class="ttname"><a href="classllvm_1_1sys_1_1Process.html#a210453e575b2fc9a4a3e10bf8a9340fd">llvm::sys::Process::GetEnv</a></div><div class="ttdeci">static std::optional&lt; std::string &gt; GetEnv(StringRef name)</div></div>
<div class="ttc" id="anamespacellvm_html_a632e8458ae307eeaa12c092cb27c689f"><div class="ttname"><a href="namespacellvm.html#a632e8458ae307eeaa12c092cb27c689f">llvm::convertWideToUTF8</a></div><div class="ttdeci">bool convertWideToUTF8(const std::wstring &amp;Source, std::string &amp;Result)</div><div class="ttdoc">Converts a std::wstring to a UTF-8 encoded std::string.</div><div class="ttdef"><b>Definition:</b> <a href="ConvertUTFWrapper_8cpp_source.html#l00271">ConvertUTFWrapper.cpp:271</a></div></div>
<div class="ttc" id="aVirtualFileSystem_8h_html"><div class="ttname"><a href="VirtualFileSystem_8h.html">VirtualFileSystem.h</a></div></div>
<div class="ttc" id="aConvertUTF_8h_html"><div class="ttname"><a href="ConvertUTF_8h.html">ConvertUTF.h</a></div></div>
<div class="ttc" id="alib_2Target_2ARM_2README_8txt_html_ac9fd45f4cffd55a5adfc964b8858d794"><div class="ttname"><a href="lib_2Target_2ARM_2README_8txt.html#ac9fd45f4cffd55a5adfc964b8858d794">sp</a></div><div class="ttdeci">_bar sp</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2ARM_2README_8txt_source.html#l00151">README.txt:151</a></div></div>
<div class="ttc" id="anamespacellvm_html_a372f87e2cac1c83389c98554dc44806daf4d72a64acd8929c0cc9ed96a7a336cc"><div class="ttname"><a href="namespacellvm.html#a372f87e2cac1c83389c98554dc44806daf4d72a64acd8929c0cc9ed96a7a336cc">llvm::SubDirectoryType::Include</a></div><div class="ttdeci">@ Include</div></div>
<div class="ttc" id="aclassllvm_1_1Twine_html"><div class="ttname"><a href="classllvm_1_1Twine.html">llvm::Twine</a></div><div class="ttdoc">Twine - A lightweight data structure for efficiently representing the concatenation of temporary valu...</div><div class="ttdef"><b>Definition:</b> <a href="Twine_8h_source.html#l00081">Twine.h:81</a></div></div>
<div class="ttc" id="anamespacellvm_html_a051d4c63744860fd69753642b3e04507"><div class="ttname"><a href="namespacellvm.html#a051d4c63744860fd69753642b3e04507">llvm::archToWindowsSDKArch</a></div><div class="ttdeci">const char * archToWindowsSDKArch(llvm::Triple::ArchType Arch)</div><div class="ttdef"><b>Definition:</b> <a href="MSVCPaths_8cpp_source.html#l00263">MSVCPaths.cpp:263</a></div></div>
<div class="ttc" id="aclassllvm_1_1vfs_1_1FileSystem_html"><div class="ttname"><a href="classllvm_1_1vfs_1_1FileSystem.html">llvm::vfs::FileSystem</a></div><div class="ttdoc">The virtual file system interface.</div><div class="ttdef"><b>Definition:</b> <a href="VirtualFileSystem_8h_source.html#l00267">VirtualFileSystem.h:267</a></div></div>
<div class="ttc" id="aclassllvm_1_1sys_1_1InitializeCOMRAII_html"><div class="ttname"><a href="classllvm_1_1sys_1_1InitializeCOMRAII.html">llvm::sys::InitializeCOMRAII</a></div><div class="ttdef"><b>Definition:</b> <a href="COM_8h_source.html#l00022">COM.h:22</a></div></div>
<div class="ttc" id="aclassllvm_1_1VersionTuple_html_a87d3c6e7d460d48dfe0ddd2c31793fa7"><div class="ttname"><a href="classllvm_1_1VersionTuple.html#a87d3c6e7d460d48dfe0ddd2c31793fa7">llvm::VersionTuple::getAsString</a></div><div class="ttdeci">std::string getAsString() const</div><div class="ttdoc">Retrieve a string representation of the version number.</div><div class="ttdef"><b>Definition:</b> <a href="VersionTuple_8cpp_source.html#l00021">VersionTuple.cpp:21</a></div></div>
<div class="ttc" id="anamespacellvm_1_1sys_html_aab375071f641a086c0d7067635ccd3dc"><div class="ttname"><a href="namespacellvm_1_1sys.html#aab375071f641a086c0d7067635ccd3dc">llvm::sys::getProcessTriple</a></div><div class="ttdeci">std::string getProcessTriple()</div><div class="ttdoc">getProcessTriple() - Return an appropriate target triple for generating code to be loaded into the cu...</div><div class="ttdef"><b>Definition:</b> <a href="Host_8cpp_source.html#l01880">Host.cpp:1880</a></div></div>
<div class="ttc" id="anamespacellvm_html_a372f87e2cac1c83389c98554dc44806d"><div class="ttname"><a href="namespacellvm.html#a372f87e2cac1c83389c98554dc44806d">llvm::SubDirectoryType</a></div><div class="ttdeci">SubDirectoryType</div><div class="ttdef"><b>Definition:</b> <a href="MSVCPaths_8h_source.html#l00024">MSVCPaths.h:24</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallString_html_af5dd7241878be5eed07736eb156bb10b"><div class="ttname"><a href="classllvm_1_1SmallString.html#af5dd7241878be5eed07736eb156bb10b">llvm::SmallString::str</a></div><div class="ttdeci">StringRef str() const</div><div class="ttdoc">Explicit conversion to StringRef.</div><div class="ttdef"><b>Definition:</b> <a href="SmallString_8h_source.html#l00261">SmallString.h:261</a></div></div>
<div class="ttc" id="anamespacellvm_html_a22439c20979b1335d2c672289f5a1d06"><div class="ttname"><a href="namespacellvm.html#a22439c20979b1335d2c672289f5a1d06">llvm::findVCToolChainViaCommandLine</a></div><div class="ttdeci">bool findVCToolChainViaCommandLine(vfs::FileSystem &amp;VFS, std::optional&lt; llvm::StringRef &gt; VCToolsDir, std::optional&lt; llvm::StringRef &gt; VCToolsVersion, std::optional&lt; llvm::StringRef &gt; WinSysRoot, std::string &amp;Path, ToolsetLayout &amp;VSLayout)</div><div class="ttdef"><b>Definition:</b> <a href="MSVCPaths_8cpp_source.html#l00476">MSVCPaths.cpp:476</a></div></div>
<div class="ttc" id="aclassllvm_1_1StringRef_html_ae46058c90a3c703357331a6501b32f1c"><div class="ttname"><a href="classllvm_1_1StringRef.html#ae46058c90a3c703357331a6501b32f1c">llvm::StringRef::equals_insensitive</a></div><div class="ttdeci">bool equals_insensitive(StringRef RHS) const</div><div class="ttdoc">Check for string equality, ignoring case.</div><div class="ttdef"><b>Definition:</b> <a href="StringRef_8h_source.html#l00170">StringRef.h:170</a></div></div>
<div class="ttc" id="anamespacellvm_1_1sys_1_1path_html_a5ab6bf136f12ce0bfe2a9754cf1644c7"><div class="ttname"><a href="namespacellvm_1_1sys_1_1path.html#a5ab6bf136f12ce0bfe2a9754cf1644c7">llvm::sys::path::filename</a></div><div class="ttdeci">StringRef filename(StringRef path, Style style=Style::native)</div><div class="ttdoc">Get filename.</div><div class="ttdef"><b>Definition:</b> <a href="Path_8cpp_source.html#l00577">Path.cpp:577</a></div></div>
<div class="ttc" id="aSmallVector_8h_html"><div class="ttname"><a href="SmallVector_8h.html">SmallVector.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_ab1193fb2b9530fcfa3442d1f9d2abb46"><div class="ttname"><a href="namespacellvm.html#ab1193fb2b9530fcfa3442d1f9d2abb46">llvm::ConvertUTF8toWide</a></div><div class="ttdeci">bool ConvertUTF8toWide(unsigned WideCharWidth, llvm::StringRef Source, char *&amp;ResultPtr, const UTF8 *&amp;ErrorPtr)</div><div class="ttdoc">Convert an UTF8 StringRef to UTF8, UTF16, or UTF32 depending on WideCharWidth.</div><div class="ttdef"><b>Definition:</b> <a href="ConvertUTFWrapper_8cpp_source.html#l00019">ConvertUTFWrapper.cpp:19</a></div></div>
<div class="ttc" id="aProgram_8h_html"><div class="ttname"><a href="Program_8h.html">Program.h</a></div></div>
<div class="ttc" id="aMSVCPaths_8cpp_html_aceedb180a9ae58c316577d97c5850392"><div class="ttname"><a href="MSVCPaths_8cpp.html#aceedb180a9ae58c316577d97c5850392">getHighestNumericTupleInDirectory</a></div><div class="ttdeci">static std::string getHighestNumericTupleInDirectory(llvm::vfs::FileSystem &amp;VFS, llvm::StringRef Directory)</div><div class="ttdef"><b>Definition:</b> <a href="MSVCPaths_8cpp_source.html#l00062">MSVCPaths.cpp:62</a></div></div>
<div class="ttc" id="aclassllvm_1_1VersionTuple_html_ad07e5841d788dc29bdda972b3f92be6b"><div class="ttname"><a href="classllvm_1_1VersionTuple.html#ad07e5841d788dc29bdda972b3f92be6b">llvm::VersionTuple::empty</a></div><div class="ttdeci">bool empty() const</div><div class="ttdoc">Determine whether this version information is empty (e.g., all version components are zero).</div><div class="ttdef"><b>Definition:</b> <a href="VersionTuple_8h_source.html#l00068">VersionTuple.h:68</a></div></div>
<div class="ttc" id="anamespacellvm_1_1sys_1_1path_html_a169939bbe3d96fa21656ab634c020b0b"><div class="ttname"><a href="namespacellvm_1_1sys_1_1path.html#a169939bbe3d96fa21656ab634c020b0b">llvm::sys::path::rend</a></div><div class="ttdeci">reverse_iterator rend(StringRef path)</div><div class="ttdoc">Get reverse end iterator over path.</div><div class="ttdef"><b>Definition:</b> <a href="Path_8cpp_source.html#l00306">Path.cpp:306</a></div></div>
<div class="ttc" id="aclassllvm_1_1StringRef_html_a223dd14e7d12bc5cea01889b972a98b2"><div class="ttname"><a href="classllvm_1_1StringRef.html#a223dd14e7d12bc5cea01889b972a98b2">llvm::StringRef::str</a></div><div class="ttdeci">std::string str() const</div><div class="ttdoc">str - Get the contents as an std::string.</div><div class="ttdef"><b>Definition:</b> <a href="StringRef_8h_source.html#l00222">StringRef.h:222</a></div></div>
<div class="ttc" id="aMSVCPaths_8cpp_html_a8805ce08308a58e2e99c8ab39d4ebdc2"><div class="ttname"><a href="MSVCPaths_8cpp.html#a8805ce08308a58e2e99c8ab39d4ebdc2">getWindowsSDKDirViaCommandLine</a></div><div class="ttdeci">static bool getWindowsSDKDirViaCommandLine(llvm::vfs::FileSystem &amp;VFS, std::optional&lt; llvm::StringRef &gt; WinSdkDir, std::optional&lt; llvm::StringRef &gt; WinSdkVersion, std::optional&lt; llvm::StringRef &gt; WinSysRoot, std::string &amp;Path, int &amp;Major, std::string &amp;Version)</div><div class="ttdef"><b>Definition:</b> <a href="MSVCPaths_8cpp_source.html#l00096">MSVCPaths.cpp:96</a></div></div>
<div class="ttc" id="aMSVCSetupApi_8h_html_a8a5291ca7d37ee54d9d22ef3ee8adf29"><div class="ttname"><a href="MSVCSetupApi_8h.html#a8a5291ca7d37ee54d9d22ef3ee8adf29">ISetupHelper</a></div><div class="ttdeci">struct ISetupHelper ISetupHelper</div><div class="ttdef"><b>Definition:</b> <a href="MSVCSetupApi_8h_source.html#l00112">MSVCSetupApi.h:112</a></div></div>
<div class="ttc" id="anamespacellvm_html_ab829a8dd53413b3328994f77fdf2b47f"><div class="ttname"><a href="namespacellvm.html#ab829a8dd53413b3328994f77fdf2b47f">llvm::archToDevDivInternalArch</a></div><div class="ttdeci">const char * archToDevDivInternalArch(llvm::Triple::ArchType Arch)</div><div class="ttdef"><b>Definition:</b> <a href="MSVCPaths_8cpp_source.html#l00295">MSVCPaths.cpp:295</a></div></div>
<div class="ttc" id="anamespacellvm_html_a407d3b5b3a2a0c0a80e87d7b03b4b2e2"><div class="ttname"><a href="namespacellvm.html#a407d3b5b3a2a0c0a80e87d7b03b4b2e2">llvm::useUniversalCRT</a></div><div class="ttdeci">bool useUniversalCRT(ToolsetLayout VSLayout, const std::string &amp;VCToolChainPath, llvm::Triple::ArchType TargetArch, llvm::vfs::FileSystem &amp;VFS)</div><div class="ttdef"><b>Definition:</b> <a href="MSVCPaths_8cpp_source.html#l00388">MSVCPaths.cpp:388</a></div></div>
<div class="ttc" id="aclassllvm_1_1StringRef_html_a6414735714bdbd5c8790f32a0fe99bd2"><div class="ttname"><a href="classllvm_1_1StringRef.html#a6414735714bdbd5c8790f32a0fe99bd2">llvm::StringRef::split</a></div><div class="ttdeci">std::pair&lt; StringRef, StringRef &gt; split(char Separator) const</div><div class="ttdoc">Split into two substrings around the first occurrence of a separator character.</div><div class="ttdef"><b>Definition:</b> <a href="StringRef_8h_source.html#l00688">StringRef.h:688</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Aug 7 2023 10:40:37 for LLVM by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>

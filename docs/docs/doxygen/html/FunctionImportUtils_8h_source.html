<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LLVM: include/llvm/Transforms/Utils/FunctionImportUtils.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">LLVM
   &#160;<span id="projectnumber">17.0.0git</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="dir_dcde91663b8816e1e2311938ccd8f690.html">llvm</a></li><li class="navelem"><a class="el" href="dir_5625ec55672b6ae9c183a884d9f7b761.html">Transforms</a></li><li class="navelem"><a class="el" href="dir_b9426ba341d3aa182dc36932de89e798.html">Utils</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">FunctionImportUtils.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="FunctionImportUtils_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//===- FunctionImportUtils.h - Importing support utilities -----*- C++ -*-===//</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">// See https://llvm.org/LICENSE.txt for license information.</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">// This file defines the FunctionImportGlobalProcessing class which is used</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">// to perform the necessary global value handling for function importing.</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160; </div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#ifndef LLVM_TRANSFORMS_UTILS_FUNCTIONIMPORTUTILS_H</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#define LLVM_TRANSFORMS_UTILS_FUNCTIONIMPORTUTILS_H</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160; </div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SetVector_8h.html">llvm/ADT/SetVector.h</a>&quot;</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ModuleSummaryIndex_8h.html">llvm/IR/ModuleSummaryIndex.h</a>&quot;</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160; </div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespacellvm.html">llvm</a> {</div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="keyword">class </span><a class="code" href="MachineCheckDebugify_8cpp.html#a85892acfa8970627e9bd9c9815f15c25">Module</a>;</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment">/// Class to handle necessary GlobalValue changes required by ThinLTO</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment">/// function importing, including linkage changes and any necessary renaming.</span></div>
<div class="line"><a name="l00025"></a><span class="lineno"><a class="line" href="classllvm_1_1FunctionImportGlobalProcessing.html">   25</a></span>&#160;<span class="comment"></span><span class="keyword">class </span><a class="code" href="classllvm_1_1FunctionImportGlobalProcessing.html">FunctionImportGlobalProcessing</a> {<span class="comment"></span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment">  /// The Module which we are exporting or importing functions from.</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1Module.html">Module</a> &amp;M;</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment">  /// Module summary index passed in for function importing/exporting handling.</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="comment"></span>  <span class="keyword">const</span> <a class="code" href="classllvm_1_1ModuleSummaryIndex.html">ModuleSummaryIndex</a> &amp;ImportIndex;</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="comment">  /// Globals to import from this module, all other functions will be</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="comment">  /// imported as declarations instead of definitions.</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1SetVector.html">SetVector&lt;GlobalValue *&gt;</a> *GlobalsToImport;</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="comment">  /// Set to true if the given ModuleSummaryIndex contains any functions</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="comment">  /// from this source module, in which case we must conservatively assume</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="comment">  /// that any of its functions may be imported into another module</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="comment">  /// as part of a different backend compilation process.</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="comment"></span>  <span class="keywordtype">bool</span> HasExportedFunctions = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="comment">  /// Set to true (only applicatable to ELF -fpic) if dso_local should be</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="comment">  /// dropped for a declaration.</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="comment">  ///</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="comment">  /// On ELF, the assembler is conservative and assumes a global default</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="comment">  /// visibility symbol can be interposable. No direct access relocation is</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="comment">  /// allowed, if the definition is not in the translation unit, even if the</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="comment">  /// definition is available in the linkage unit. Thus we need to clear</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="comment">  /// dso_local to disable direct access.</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="comment">  ///</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="comment">  /// This flag should not be set for -fno-pic or -fpie, which would</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="comment">  /// unnecessarily disable direct access.</span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="comment"></span>  <span class="keywordtype">bool</span> ClearDSOLocalOnDeclarations;</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="comment">  /// Set of llvm.*used values, in order to validate that we don&#39;t try</span></div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="comment">  /// to promote any non-renamable values.</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;GlobalValue *, 4&gt;</a> Used;</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="comment">  /// Keep track of any COMDATs that require renaming (because COMDAT</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="comment">  /// leader was promoted and renamed). Maps from original COMDAT to one</span></div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="comment">  /// with new name.</span></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;const Comdat *, Comdat *&gt;</a> RenamedComdats;</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="comment">  /// Check if we should promote the given local value to global scope.</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="comment"></span>  <span class="keywordtype">bool</span> shouldPromoteLocalToGlobal(<span class="keyword">const</span> <a class="code" href="classllvm_1_1GlobalValue.html">GlobalValue</a> *SGV, <a class="code" href="structllvm_1_1ValueInfo.html">ValueInfo</a> <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a97bce951e4585a39601c04d86bb14ffd">VI</a>);</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160; </div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="comment">  /// Check if the given value is a local that can&#39;t be renamed (promoted).</span></div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="comment"></span><span class="comment">  /// Only used in assertion checking, and disabled under NDEBUG since the Used</span></div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="comment"></span><span class="comment">  /// set will not be populated.</span></div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="comment"></span>  <span class="keywordtype">bool</span> isNonRenamableLocal(<span class="keyword">const</span> <a class="code" href="classllvm_1_1GlobalValue.html">GlobalValue</a> &amp;GV) <span class="keyword">const</span>;</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="comment">  /// Helper methods to check if we are importing from or potentially</span></div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="comment">  /// exporting from the current source module.</span></div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="comment"></span>  <span class="keywordtype">bool</span> isPerformingImport()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> GlobalsToImport != <span class="keyword">nullptr</span>; }</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;  <span class="keywordtype">bool</span> isModuleExporting()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> HasExportedFunctions; }</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="comment">  /// If we are importing from the source module, checks if we should</span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="comment">  /// import SGV as a definition, otherwise import as a declaration.</span></div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="comment"></span>  <span class="keywordtype">bool</span> doImportAsDefinition(<span class="keyword">const</span> <a class="code" href="classllvm_1_1GlobalValue.html">GlobalValue</a> *SGV);</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="comment">  /// Get the name for a local SGV that should be promoted and renamed to global</span></div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="comment">  /// scope in the linked destination module.</span></div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="comment"></span>  std::string getPromotedName(<span class="keyword">const</span> <a class="code" href="classllvm_1_1GlobalValue.html">GlobalValue</a> *SGV);</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="comment">  /// Process globals so that they can be used in ThinLTO. This includes</span></div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="comment">  /// promoting local variables so that they can be reference externally by</span></div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="comment">  /// thin lto imported globals and converting strong external globals to</span></div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="comment">  /// available_externally.</span></div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> processGlobalsForThinLTO();</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;  <span class="keywordtype">void</span> processGlobalForThinLTO(<a class="code" href="classllvm_1_1GlobalValue.html">GlobalValue</a> &amp;GV);</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<span class="comment">  /// Get the new linkage for SGV that should be used in the linked destination</span></div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="comment">  /// module. Specifically, for ThinLTO importing or exporting it may need</span></div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="comment">  /// to be adjusted. When \p DoPromote is true then we must adjust the</span></div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;<span class="comment">  /// linkage for a required promotion of a local to global scope.</span></div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57c">GlobalValue::LinkageTypes</a> getLinkage(<span class="keyword">const</span> <a class="code" href="classllvm_1_1GlobalValue.html">GlobalValue</a> *SGV, <span class="keywordtype">bool</span> DoPromote);</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160; </div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00101"></a><span class="lineno"><a class="line" href="classllvm_1_1FunctionImportGlobalProcessing.html#ad2d457aedadef41588c7ae3c16adbfc8">  101</a></span>&#160;  <a class="code" href="classllvm_1_1FunctionImportGlobalProcessing.html#ad2d457aedadef41588c7ae3c16adbfc8">FunctionImportGlobalProcessing</a>(<a class="code" href="classllvm_1_1Module.html">Module</a> &amp;M, <span class="keyword">const</span> <a class="code" href="classllvm_1_1ModuleSummaryIndex.html">ModuleSummaryIndex</a> &amp;<a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a>,</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;                                 <a class="code" href="classllvm_1_1SetVector.html">SetVector&lt;GlobalValue *&gt;</a> *GlobalsToImport,</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;                                 <span class="keywordtype">bool</span> ClearDSOLocalOnDeclarations)</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;      : <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>), ImportIndex(<a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a>), GlobalsToImport(GlobalsToImport),</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;        ClearDSOLocalOnDeclarations(ClearDSOLocalOnDeclarations) {</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    <span class="comment">// If we have a ModuleSummaryIndex but no function to import,</span></div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    <span class="comment">// then this is the primary module being compiled in a ThinLTO</span></div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    <span class="comment">// backend compilation, and we need to see if it has functions that</span></div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    <span class="comment">// may be exported to another backend compilation.</span></div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    <span class="keywordflow">if</span> (!GlobalsToImport)</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;      HasExportedFunctions = ImportIndex.<a class="code" href="classllvm_1_1ModuleSummaryIndex.html#ab188c0b98857efe257f04c10c011d971">hasExportedFunctions</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>);</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160; </div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;GlobalValue *, 4&gt;</a> Vec;</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    <span class="comment">// First collect those in the llvm.used set.</span></div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    <a class="code" href="namespacellvm.html#afd1cdae0d7a12aa1861ac142c059f5d2">collectUsedGlobalVariables</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>, Vec, <span class="comment">/*CompilerUsed=*/</span><span class="keyword">false</span>);</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    <span class="comment">// Next collect those in the llvm.compiler.used set.</span></div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    <a class="code" href="namespacellvm.html#afd1cdae0d7a12aa1861ac142c059f5d2">collectUsedGlobalVariables</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>, Vec, <span class="comment">/*CompilerUsed=*/</span><span class="keyword">true</span>);</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    Used = {Vec.begin(), Vec.end()};</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;  }</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160; </div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1FunctionImportGlobalProcessing.html#a85ccc8c1722712b3fc48a166ccf99872">run</a>();</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;};</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;<span class="comment">/// Perform in-place global value handling on the given Module for</span></div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;<span class="comment">/// exported local functions renamed and promoted for ThinLTO.</span></div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> <a class="code" href="namespacellvm.html#a5bc0113ff10282702b2cd6d275f47beb">renameModuleForThinLTO</a>(</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    <a class="code" href="MachineCheckDebugify_8cpp.html#a85892acfa8970627e9bd9c9815f15c25">Module</a> &amp;M, <span class="keyword">const</span> ModuleSummaryIndex &amp;<a class="code" href="ELFObjHandler_8cpp.html#aef61945034b9431b804748fc317c5548">Index</a>,</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    <span class="keywordtype">bool</span> ClearDSOLocalOnDeclarations,</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    SetVector&lt;GlobalValue *&gt; *GlobalsToImport = <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160; </div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;} <span class="comment">// End llvm namespace</span></div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160; </div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;<span class="preprocessor">#endif</span></div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="aclassllvm_1_1FunctionImportGlobalProcessing_html_a85ccc8c1722712b3fc48a166ccf99872"><div class="ttname"><a href="classllvm_1_1FunctionImportGlobalProcessing.html#a85ccc8c1722712b3fc48a166ccf99872">llvm::FunctionImportGlobalProcessing::run</a></div><div class="ttdeci">bool run()</div><div class="ttdef"><b>Definition:</b> <a href="FunctionImportUtils_8cpp_source.html#l00350">FunctionImportUtils.cpp:350</a></div></div>
<div class="ttc" id="anamespacellvm_html"><div class="ttname"><a href="namespacellvm.html">llvm</a></div><div class="ttdoc">This is an optimization pass for GlobalISel generic memory operations.</div><div class="ttdef"><b>Definition:</b> <a href="AddressRanges_8h_source.html#l00018">AddressRanges.h:18</a></div></div>
<div class="ttc" id="alib_2Target_2X86_2README_8txt_html_ac88fe1d3a61b056a4f64fbbb156a62ff"><div class="ttname"><a href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a></div><div class="ttdeci">We currently emits eax Perhaps this is what we really should generate is Is imull three or four cycles eax eax The current instruction priority is based on pattern complexity The former is more complex because it folds a load so the latter will not be emitted Perhaps we should use AddedComplexity to give LEA32r a higher priority We should always try to match LEA first since the LEA matching code does some estimate to determine whether the match is profitable if we care more about code then imull is better It s two bytes shorter than movl leal On a Pentium M</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2X86_2README_8txt_source.html#l00252">README.txt:252</a></div></div>
<div class="ttc" id="anamespacellvm_html_a5bc0113ff10282702b2cd6d275f47beb"><div class="ttname"><a href="namespacellvm.html#a5bc0113ff10282702b2cd6d275f47beb">llvm::renameModuleForThinLTO</a></div><div class="ttdeci">bool renameModuleForThinLTO(Module &amp;M, const ModuleSummaryIndex &amp;Index, bool ClearDSOLocalOnDeclarations, SetVector&lt; GlobalValue * &gt; *GlobalsToImport=nullptr)</div><div class="ttdoc">Perform in-place global value handling on the given Module for exported local functions renamed and p...</div><div class="ttdef"><b>Definition:</b> <a href="FunctionImportUtils_8cpp_source.html#l00355">FunctionImportUtils.cpp:355</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVector_html"><div class="ttname"><a href="classllvm_1_1SmallVector.html">llvm::SmallVector</a></div><div class="ttdoc">This is a 'vector' (really, a variable-sized array), optimized for the case when the array is small.</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l01199">SmallVector.h:1199</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSet_html"><div class="ttname"><a href="classllvm_1_1SmallPtrSet.html">llvm::SmallPtrSet</a></div><div class="ttdoc">SmallPtrSet - This class implements a set which is optimized for holding SmallSize or less elements.</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00450">SmallPtrSet.h:450</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalValue_html_aedfa75f0c85c4aa85b257f066fbea57c"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57c">llvm::GlobalValue::LinkageTypes</a></div><div class="ttdeci">LinkageTypes</div><div class="ttdoc">An enumeration for the kinds of linkage for global values.</div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00047">GlobalValue.h:47</a></div></div>
<div class="ttc" id="aModuleSummaryIndex_8h_html"><div class="ttname"><a href="ModuleSummaryIndex_8h.html">ModuleSummaryIndex.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_afd1cdae0d7a12aa1861ac142c059f5d2"><div class="ttname"><a href="namespacellvm.html#afd1cdae0d7a12aa1861ac142c059f5d2">llvm::collectUsedGlobalVariables</a></div><div class="ttdeci">GlobalVariable * collectUsedGlobalVariables(const Module &amp;M, SmallVectorImpl&lt; GlobalValue * &gt; &amp;Vec, bool CompilerUsed)</div><div class="ttdoc">Given &quot;llvm.used&quot; or &quot;llvm.compiler.used&quot; as a global name, collect the initializer elements of that ...</div><div class="ttdef"><b>Definition:</b> <a href="Module_8cpp_source.html#l00807">Module.cpp:807</a></div></div>
<div class="ttc" id="anamespacellvm_1_1dwarf_html_a5d3c920b66ea797d6adb243862fdf47a"><div class="ttname"><a href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">llvm::dwarf::Index</a></div><div class="ttdeci">Index</div><div class="ttdef"><b>Definition:</b> <a href="Dwarf_8h_source.html#l00550">Dwarf.h:550</a></div></div>
<div class="ttc" id="aclassllvm_1_1FunctionImportGlobalProcessing_html_ad2d457aedadef41588c7ae3c16adbfc8"><div class="ttname"><a href="classllvm_1_1FunctionImportGlobalProcessing.html#ad2d457aedadef41588c7ae3c16adbfc8">llvm::FunctionImportGlobalProcessing::FunctionImportGlobalProcessing</a></div><div class="ttdeci">FunctionImportGlobalProcessing(Module &amp;M, const ModuleSummaryIndex &amp;Index, SetVector&lt; GlobalValue * &gt; *GlobalsToImport, bool ClearDSOLocalOnDeclarations)</div><div class="ttdef"><b>Definition:</b> <a href="FunctionImportUtils_8h_source.html#l00101">FunctionImportUtils.h:101</a></div></div>
<div class="ttc" id="aclassllvm_1_1ModuleSummaryIndex_html_ab188c0b98857efe257f04c10c011d971"><div class="ttname"><a href="classllvm_1_1ModuleSummaryIndex.html#ab188c0b98857efe257f04c10c011d971">llvm::ModuleSummaryIndex::hasExportedFunctions</a></div><div class="ttdeci">bool hasExportedFunctions(const Module &amp;M) const</div><div class="ttdoc">Check if the given Module has any functions available for exporting in the index.</div><div class="ttdef"><b>Definition:</b> <a href="ModuleSummaryIndex_8h_source.html#l01655">ModuleSummaryIndex.h:1655</a></div></div>
<div class="ttc" id="astructllvm_1_1ValueInfo_html"><div class="ttname"><a href="structllvm_1_1ValueInfo.html">llvm::ValueInfo</a></div><div class="ttdoc">Struct that holds a reference to a particular GUID in a global value summary.</div><div class="ttdef"><b>Definition:</b> <a href="ModuleSummaryIndex_8h_source.html#l00169">ModuleSummaryIndex.h:169</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalValue_html"><div class="ttname"><a href="classllvm_1_1GlobalValue.html">llvm::GlobalValue</a></div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00044">GlobalValue.h:44</a></div></div>
<div class="ttc" id="aSIInstrInfo_8cpp_html_a0dfd55eaf0bcb495f09ecf8c55b256b2a97bce951e4585a39601c04d86bb14ffd"><div class="ttname"><a href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a97bce951e4585a39601c04d86bb14ffd">VI</a></div><div class="ttdeci">@ VI</div><div class="ttdef"><b>Definition:</b> <a href="SIInstrInfo_8cpp_source.html#l07994">SIInstrInfo.cpp:7994</a></div></div>
<div class="ttc" id="aELFObjHandler_8cpp_html_aef61945034b9431b804748fc317c5548"><div class="ttname"><a href="ELFObjHandler_8cpp.html#aef61945034b9431b804748fc317c5548">Index</a></div><div class="ttdeci">uint32_t Index</div><div class="ttdef"><b>Definition:</b> <a href="ELFObjHandler_8cpp_source.html#l00083">ELFObjHandler.cpp:83</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseMap_html"><div class="ttname"><a href="classllvm_1_1DenseMap.html">llvm::DenseMap</a></div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00714">DenseMap.h:714</a></div></div>
<div class="ttc" id="aclassllvm_1_1Module_html"><div class="ttname"><a href="classllvm_1_1Module.html">llvm::Module</a></div><div class="ttdoc">A Module instance is used to store all the information related to an LLVM module.</div><div class="ttdef"><b>Definition:</b> <a href="Module_8h_source.html#l00065">Module.h:65</a></div></div>
<div class="ttc" id="aMachineCheckDebugify_8cpp_html_a85892acfa8970627e9bd9c9815f15c25"><div class="ttname"><a href="MachineCheckDebugify_8cpp.html#a85892acfa8970627e9bd9c9815f15c25">Module</a></div><div class="ttdeci">Machine Check Debug Module</div><div class="ttdef"><b>Definition:</b> <a href="MachineCheckDebugify_8cpp_source.html#l00122">MachineCheckDebugify.cpp:122</a></div></div>
<div class="ttc" id="aclassllvm_1_1FunctionImportGlobalProcessing_html"><div class="ttname"><a href="classllvm_1_1FunctionImportGlobalProcessing.html">llvm::FunctionImportGlobalProcessing</a></div><div class="ttdoc">Class to handle necessary GlobalValue changes required by ThinLTO function importing,...</div><div class="ttdef"><b>Definition:</b> <a href="FunctionImportUtils_8h_source.html#l00025">FunctionImportUtils.h:25</a></div></div>
<div class="ttc" id="aclassllvm_1_1ModuleSummaryIndex_html"><div class="ttname"><a href="classllvm_1_1ModuleSummaryIndex.html">llvm::ModuleSummaryIndex</a></div><div class="ttdoc">Class to hold module path string table and global value map, and encapsulate methods for operating on...</div><div class="ttdef"><b>Definition:</b> <a href="ModuleSummaryIndex_8h_source.html#l01199">ModuleSummaryIndex.h:1199</a></div></div>
<div class="ttc" id="aclassllvm_1_1SetVector_html"><div class="ttname"><a href="classllvm_1_1SetVector.html">llvm::SetVector</a></div><div class="ttdoc">A vector that has set insertion semantics.</div><div class="ttdef"><b>Definition:</b> <a href="SetVector_8h_source.html#l00040">SetVector.h:40</a></div></div>
<div class="ttc" id="aSetVector_8h_html"><div class="ttname"><a href="SetVector_8h.html">SetVector.h</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Aug 7 2023 09:48:08 for LLVM by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LLVM: lib/Analysis/BranchProbabilityInfo.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">LLVM
   &#160;<span id="projectnumber">17.0.0git</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a class="el" href="dir_a25db018342d3ae6c7e6779086c18378.html">Analysis</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">BranchProbabilityInfo.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="BranchProbabilityInfo_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//===- BranchProbabilityInfo.cpp - Branch Probability Analysis ------------===//</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">// See https://llvm.org/LICENSE.txt for license information.</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">// Loops should be simplified before this analysis.</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160; </div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="BranchProbabilityInfo_8h.html">llvm/Analysis/BranchProbabilityInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="PostOrderIterator_8h.html">llvm/ADT/PostOrderIterator.h</a>&quot;</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SCCIterator_8h.html">llvm/ADT/SCCIterator.h</a>&quot;</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="STLExtras_8h.html">llvm/ADT/STLExtras.h</a>&quot;</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SmallVector_8h.html">llvm/ADT/SmallVector.h</a>&quot;</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ConstantFolding_8h.html">llvm/Analysis/ConstantFolding.h</a>&quot;</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LoopInfo_8h.html">llvm/Analysis/LoopInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="PostDominators_8h.html">llvm/Analysis/PostDominators.h</a>&quot;</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="TargetLibraryInfo_8h.html">llvm/Analysis/TargetLibraryInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Attributes_8h.html">llvm/IR/Attributes.h</a>&quot;</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="BasicBlock_8h.html">llvm/IR/BasicBlock.h</a>&quot;</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="IR_2CFG_8h.html">llvm/IR/CFG.h</a>&quot;</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Constants_8h.html">llvm/IR/Constants.h</a>&quot;</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Dominators_8h.html">llvm/IR/Dominators.h</a>&quot;</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Function_8h.html">llvm/IR/Function.h</a>&quot;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="InstrTypes_8h.html">llvm/IR/InstrTypes.h</a>&quot;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="IR_2Instruction_8h.html">llvm/IR/Instruction.h</a>&quot;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Instructions_8h.html">llvm/IR/Instructions.h</a>&quot;</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LLVMContext_8h.html">llvm/IR/LLVMContext.h</a>&quot;</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Metadata_8h.html">llvm/IR/Metadata.h</a>&quot;</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="PassManager_8h.html">llvm/IR/PassManager.h</a>&quot;</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ProfDataUtils_8h.html">llvm/IR/ProfDataUtils.h</a>&quot;</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Type_8h.html">llvm/IR/Type.h</a>&quot;</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Value_8h.html">llvm/IR/Value.h</a>&quot;</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="InitializePasses_8h.html">llvm/InitializePasses.h</a>&quot;</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Pass_8h.html">llvm/Pass.h</a>&quot;</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="BranchProbability_8h.html">llvm/Support/BranchProbability.h</a>&quot;</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Casting_8h.html">llvm/Support/Casting.h</a>&quot;</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CommandLine_8h.html">llvm/Support/CommandLine.h</a>&quot;</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Debug_8h.html">llvm/Support/Debug.h</a>&quot;</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="raw__ostream_8h.html">llvm/Support/raw_ostream.h</a>&quot;</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#include &lt;cassert&gt;</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="preprocessor">#include &lt;cstdint&gt;</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="preprocessor">#include &lt;iterator&gt;</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="preprocessor">#include &lt;map&gt;</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="preprocessor">#include &lt;utility&gt;</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160; </div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespacellvm.html">llvm</a>;</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160; </div>
<div class="line"><a name="l00052"></a><span class="lineno"><a class="line" href="BranchProbabilityInfo_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">   52</a></span>&#160;<span class="preprocessor">#define DEBUG_TYPE &quot;branch-prob&quot;</span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160; </div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="BranchProbabilityInfo_8cpp.html#a0fef69381a3d5f78c54b7c557f92bc2d">PrintBranchProb</a>(</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    <span class="stringliteral">&quot;print-bpi&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">false</span>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Print the branch probability info.&quot;</span>));</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160; </div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;std::string&gt;</a> <a class="code" href="BranchProbabilityInfo_8cpp.html#a48dde12ee57ba44efa9bf102782f4c36">PrintBranchProbFuncName</a>(</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    <span class="stringliteral">&quot;print-bpi-func-name&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;The option to specify the name of the function &quot;</span></div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;             <span class="stringliteral">&quot;whose branch probability info is printed.&quot;</span>));</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160; </div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<a class="code" href="BranchProbabilityInfo_8cpp.html#a2c0db623aadd71d3caf0937e7c830691">INITIALIZE_PASS_BEGIN</a>(<a class="code" href="classllvm_1_1BranchProbabilityInfoWrapperPass.html">BranchProbabilityInfoWrapperPass</a>, <span class="stringliteral">&quot;branch-prob&quot;</span>,</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;                      <span class="stringliteral">&quot;Branch Probability Analysis&quot;</span>, <span class="keyword">false</span>, <span class="keyword">true</span>)</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<a class="code" href="SVEIntrinsicOpts_8cpp.html#a2bb87eb1bcbc74783a83ae945eb8fa36">INITIALIZE_PASS_DEPENDENCY</a>(<a class="code" href="classllvm_1_1LoopInfoWrapperPass.html">LoopInfoWrapperPass</a>)</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<a class="code" href="SVEIntrinsicOpts_8cpp.html#a2bb87eb1bcbc74783a83ae945eb8fa36">INITIALIZE_PASS_DEPENDENCY</a>(<a class="code" href="classllvm_1_1TargetLibraryInfoWrapperPass.html">TargetLibraryInfoWrapperPass</a>)</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<a class="code" href="SVEIntrinsicOpts_8cpp.html#a2bb87eb1bcbc74783a83ae945eb8fa36">INITIALIZE_PASS_DEPENDENCY</a>(<a class="code" href="classllvm_1_1DominatorTreeWrapperPass.html">DominatorTreeWrapperPass</a>)</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<a class="code" href="SVEIntrinsicOpts_8cpp.html#a2bb87eb1bcbc74783a83ae945eb8fa36">INITIALIZE_PASS_DEPENDENCY</a>(<a class="code" href="structllvm_1_1PostDominatorTreeWrapperPass.html">PostDominatorTreeWrapperPass</a>)</div>
<div class="line"><a name="l00069"></a><span class="lineno"><a class="line" href="BranchProbabilityInfo_8cpp.html#a2bd4799263bb66b1eaf06927f08e7b64">   69</a></span>&#160;<a class="code" href="PassSupport_8h.html#a74ce8276b89067e806f67c45a6d92575">INITIALIZE_PASS_END</a>(<a class="code" href="classllvm_1_1BranchProbabilityInfoWrapperPass.html">BranchProbabilityInfoWrapperPass</a>, &quot;branch-<a class="code" href="BranchProbabilityInfo_8cpp.html#a2bd4799263bb66b1eaf06927f08e7b64">prob</a>&quot;,</div>
<div class="line"><a name="l00070"></a><span class="lineno"><a class="line" href="BranchProbabilityInfo_8cpp.html#aba35dee6889430a15098748f5ef5ec1d">   70</a></span>&#160;                    &quot;<a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a359237c780f7c8e40645575826da8a3c">Branch</a> Probability Analysis&quot;, <a class="code" href="namespacefalse.html">false</a>, <a class="code" href="BasicAliasAnalysis_8cpp.html#af6d5cafbdfc5313e65d990120021a3ec">true</a>)</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160; </div>
<div class="line"><a name="l00072"></a><span class="lineno"><a class="line" href="classllvm_1_1BranchProbabilityInfoWrapperPass.html#a9b02436688f4921a0ff96e38d8c4c3dd">   72</a></span>&#160;<a class="code" href="classllvm_1_1BranchProbabilityInfoWrapperPass.html">BranchProbabilityInfoWrapperPass</a>::<a class="code" href="classllvm_1_1BranchProbabilityInfoWrapperPass.html">BranchProbabilityInfoWrapperPass</a>()</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    : <a class="code" href="classllvm_1_1FunctionPass.html">FunctionPass</a>(<a class="code" href="namespacellvm_1_1CallingConv.html#a188c0836f8c3528401f1c236fd93b977">ID</a>) {</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;  <a class="code" href="namespacellvm.html#a46454b887dd0e0d87ac9c2fe3e0253d3">initializeBranchProbabilityInfoWrapperPassPass</a>(</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;      *<a class="code" href="classllvm_1_1PassRegistry.html#a05a729900b76c89e808c6c3094921b2f">PassRegistry::getPassRegistry</a>());</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;}</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160; </div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="keywordtype">char</span> <a class="code" href="classllvm_1_1BranchProbabilityInfoWrapperPass.html#a702dc2b869d1d2dc906729f781e68479">BranchProbabilityInfoWrapperPass::ID</a> = 0;</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160; </div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="comment">// Weights are for internal use only. They are used by heuristics to help to</span></div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="comment">// estimate edges&#39; probability. Example:</span></div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="comment">// Using &quot;Loop Branch Heuristics&quot; we predict weights of edges for the</span></div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="comment">// block BB2.</span></div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="comment">//         ...</span></div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="comment">//          |</span></div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="comment">//          V</span></div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="comment">//         BB1&lt;-+</span></div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="comment">//          |   |</span></div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="comment">//          |   | (Weight = 124)</span></div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="comment">//          V   |</span></div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<span class="comment">//         BB2--+</span></div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="comment">//          |</span></div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<span class="comment">//          | (Weight = 4)</span></div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="comment">//          V</span></div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="comment">//         BB3</span></div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<span class="comment">// Probability of the edge BB2-&gt;BB1 = 124 / (124 + 4) = 0.96875</span></div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="comment">// Probability of the edge BB2-&gt;BB3 = 4 / (124 + 4) = 0.03125</span></div>
<div class="line"><a name="l00100"></a><span class="lineno"><a class="line" href="BranchProbabilityInfo_8cpp.html#a205d7293fcfbe714464bceef72495dde">  100</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classuint32__t.html">uint32_t</a> <a class="code" href="BranchProbabilityInfo_8cpp.html#a205d7293fcfbe714464bceef72495dde">LBH_TAKEN_WEIGHT</a> = 124;</div>
<div class="line"><a name="l00101"></a><span class="lineno"><a class="line" href="BranchProbabilityInfo_8cpp.html#ac6c00f8033a3bf9ab5f49143e30d8c52">  101</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classuint32__t.html">uint32_t</a> <a class="code" href="BranchProbabilityInfo_8cpp.html#ac6c00f8033a3bf9ab5f49143e30d8c52">LBH_NONTAKEN_WEIGHT</a> = 4;</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="comment">/// Unreachable-terminating branch taken probability.</span></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="comment">/// This is the probability for a branch being taken to a block that terminates</span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="comment">/// (eventually) in unreachable. These are predicted as unlikely as possible.</span></div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="comment">/// All reachable probability will proportionally share the remaining part.</span></div>
<div class="line"><a name="l00108"></a><span class="lineno"><a class="line" href="BranchProbabilityInfo_8cpp.html#aafc5237f3585710400d8a15b43ff0e5b">  108</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classllvm_1_1BranchProbability.html">BranchProbability</a> <a class="code" href="BranchProbabilityInfo_8cpp.html#aafc5237f3585710400d8a15b43ff0e5b">UR_TAKEN_PROB</a> = <a class="code" href="classllvm_1_1BranchProbability.html#a286629cb3167717b736d06f88c8f4817">BranchProbability::getRaw</a>(1);</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;<span class="comment">/// Heuristics and lookup tables for non-loop branches:</span></div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;<span class="comment">/// Pointer Heuristics (PH)</span></div>
<div class="line"><a name="l00112"></a><span class="lineno"><a class="line" href="BranchProbabilityInfo_8cpp.html#a6b89b3ae3e1706f0f437db6621986deb">  112</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classuint32__t.html">uint32_t</a> <a class="code" href="BranchProbabilityInfo_8cpp.html#a6b89b3ae3e1706f0f437db6621986deb">PH_TAKEN_WEIGHT</a> = 20;</div>
<div class="line"><a name="l00113"></a><span class="lineno"><a class="line" href="BranchProbabilityInfo_8cpp.html#a38a9f81723daa4bec614eaba36d40b85">  113</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classuint32__t.html">uint32_t</a> <a class="code" href="BranchProbabilityInfo_8cpp.html#a38a9f81723daa4bec614eaba36d40b85">PH_NONTAKEN_WEIGHT</a> = 12;</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classllvm_1_1BranchProbability.html">BranchProbability</a></div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    <a class="code" href="BranchProbabilityInfo_8cpp.html#a44f69d9faa72e970316989f65d054c59">PtrTakenProb</a>(<a class="code" href="BranchProbabilityInfo_8cpp.html#a6b89b3ae3e1706f0f437db6621986deb">PH_TAKEN_WEIGHT</a>, <a class="code" href="BranchProbabilityInfo_8cpp.html#a6b89b3ae3e1706f0f437db6621986deb">PH_TAKEN_WEIGHT</a> + <a class="code" href="BranchProbabilityInfo_8cpp.html#a38a9f81723daa4bec614eaba36d40b85">PH_NONTAKEN_WEIGHT</a>);</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classllvm_1_1BranchProbability.html">BranchProbability</a></div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    <a class="code" href="BranchProbabilityInfo_8cpp.html#a7f0d3e324489e13def109f268e27d5dc">PtrUntakenProb</a>(<a class="code" href="BranchProbabilityInfo_8cpp.html#a38a9f81723daa4bec614eaba36d40b85">PH_NONTAKEN_WEIGHT</a>, <a class="code" href="BranchProbabilityInfo_8cpp.html#a6b89b3ae3e1706f0f437db6621986deb">PH_TAKEN_WEIGHT</a> + <a class="code" href="BranchProbabilityInfo_8cpp.html#a38a9f81723daa4bec614eaba36d40b85">PH_NONTAKEN_WEIGHT</a>);</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160; </div>
<div class="line"><a name="l00119"></a><span class="lineno"><a class="line" href="BranchProbabilityInfo_8cpp.html#a98934762d122e5b344bafd36c369d35c">  119</a></span>&#160;<span class="keyword">using</span> <a class="code" href="classllvm_1_1SmallVector.html">ProbabilityList</a> = <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;BranchProbability&gt;</a>;</div>
<div class="line"><a name="l00120"></a><span class="lineno"><a class="line" href="BranchProbabilityInfo_8cpp.html#a3ad5391b0e7ea29306fee576182dabbf">  120</a></span>&#160;<span class="keyword">using</span> <a class="code" href="BranchProbabilityInfo_8cpp.html#a3ad5391b0e7ea29306fee576182dabbf">ProbabilityTable</a> = std::map&lt;CmpInst::Predicate, ProbabilityList&gt;;</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;<span class="comment">/// Pointer comparisons:</span></div>
<div class="line"><a name="l00123"></a><span class="lineno"><a class="line" href="BranchProbabilityInfo_8cpp.html#ac81ca00b5db15ff5c054c569fadd72dd">  123</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="BranchProbabilityInfo_8cpp.html#a3ad5391b0e7ea29306fee576182dabbf">ProbabilityTable</a> <a class="code" href="BranchProbabilityInfo_8cpp.html#ac81ca00b5db15ff5c054c569fadd72dd">PointerTable</a>{</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    {<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a>, {<a class="code" href="BranchProbabilityInfo_8cpp.html#a44f69d9faa72e970316989f65d054c59">PtrTakenProb</a>, <a class="code" href="BranchProbabilityInfo_8cpp.html#a7f0d3e324489e13def109f268e27d5dc">PtrUntakenProb</a>}}, <span class="comment">/// p != q -&gt; Likely</span></div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;<span class="comment"></span>    {<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a>, {<a class="code" href="BranchProbabilityInfo_8cpp.html#a7f0d3e324489e13def109f268e27d5dc">PtrUntakenProb</a>, <a class="code" href="BranchProbabilityInfo_8cpp.html#a44f69d9faa72e970316989f65d054c59">PtrTakenProb</a>}}, <span class="comment">/// p == q -&gt; Unlikely</span></div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;<span class="comment"></span>};</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<span class="comment">/// Zero Heuristics (ZH)</span></div>
<div class="line"><a name="l00129"></a><span class="lineno"><a class="line" href="BranchProbabilityInfo_8cpp.html#aaa5928aa2f68d1c15bd7dafa3745b0fa">  129</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classuint32__t.html">uint32_t</a> <a class="code" href="BranchProbabilityInfo_8cpp.html#aaa5928aa2f68d1c15bd7dafa3745b0fa">ZH_TAKEN_WEIGHT</a> = 20;</div>
<div class="line"><a name="l00130"></a><span class="lineno"><a class="line" href="BranchProbabilityInfo_8cpp.html#a2486cb22b39b4593d78671702f062b81">  130</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classuint32__t.html">uint32_t</a> <a class="code" href="BranchProbabilityInfo_8cpp.html#a2486cb22b39b4593d78671702f062b81">ZH_NONTAKEN_WEIGHT</a> = 12;</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classllvm_1_1BranchProbability.html">BranchProbability</a></div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    <a class="code" href="BranchProbabilityInfo_8cpp.html#a5be5ee158531203bf7471424e2ea4866">ZeroTakenProb</a>(<a class="code" href="BranchProbabilityInfo_8cpp.html#aaa5928aa2f68d1c15bd7dafa3745b0fa">ZH_TAKEN_WEIGHT</a>, <a class="code" href="BranchProbabilityInfo_8cpp.html#aaa5928aa2f68d1c15bd7dafa3745b0fa">ZH_TAKEN_WEIGHT</a> + <a class="code" href="BranchProbabilityInfo_8cpp.html#a2486cb22b39b4593d78671702f062b81">ZH_NONTAKEN_WEIGHT</a>);</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classllvm_1_1BranchProbability.html">BranchProbability</a></div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    <a class="code" href="BranchProbabilityInfo_8cpp.html#a202467d2d7ce0b47448bc909631c6950">ZeroUntakenProb</a>(<a class="code" href="BranchProbabilityInfo_8cpp.html#a2486cb22b39b4593d78671702f062b81">ZH_NONTAKEN_WEIGHT</a>, <a class="code" href="BranchProbabilityInfo_8cpp.html#aaa5928aa2f68d1c15bd7dafa3745b0fa">ZH_TAKEN_WEIGHT</a> + <a class="code" href="BranchProbabilityInfo_8cpp.html#a2486cb22b39b4593d78671702f062b81">ZH_NONTAKEN_WEIGHT</a>);</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;<span class="comment">/// Integer compares with 0:</span></div>
<div class="line"><a name="l00137"></a><span class="lineno"><a class="line" href="BranchProbabilityInfo_8cpp.html#a38332cb5dc3c73636aa6495114e7a5ab">  137</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="BranchProbabilityInfo_8cpp.html#a3ad5391b0e7ea29306fee576182dabbf">ProbabilityTable</a> <a class="code" href="BranchProbabilityInfo_8cpp.html#a38332cb5dc3c73636aa6495114e7a5ab">ICmpWithZeroTable</a>{</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    {<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">CmpInst::ICMP_EQ</a>, {<a class="code" href="BranchProbabilityInfo_8cpp.html#a202467d2d7ce0b47448bc909631c6950">ZeroUntakenProb</a>, <a class="code" href="BranchProbabilityInfo_8cpp.html#a5be5ee158531203bf7471424e2ea4866">ZeroTakenProb</a>}},  <span class="comment">/// X == 0 -&gt; Unlikely</span></div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;<span class="comment"></span>    {<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">CmpInst::ICMP_NE</a>, {<a class="code" href="BranchProbabilityInfo_8cpp.html#a5be5ee158531203bf7471424e2ea4866">ZeroTakenProb</a>, <a class="code" href="BranchProbabilityInfo_8cpp.html#a202467d2d7ce0b47448bc909631c6950">ZeroUntakenProb</a>}},  <span class="comment">/// X != 0 -&gt; Likely</span></div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<span class="comment"></span>    {<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba15ae464950ac676919c2f0c7aafc706c">CmpInst::ICMP_SLT</a>, {<a class="code" href="BranchProbabilityInfo_8cpp.html#a202467d2d7ce0b47448bc909631c6950">ZeroUntakenProb</a>, <a class="code" href="BranchProbabilityInfo_8cpp.html#a5be5ee158531203bf7471424e2ea4866">ZeroTakenProb</a>}}, <span class="comment">/// X &lt; 0  -&gt; Unlikely</span></div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;<span class="comment"></span>    {<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba720a42e85f7e981afd61e28473b0000a">CmpInst::ICMP_SGT</a>, {<a class="code" href="BranchProbabilityInfo_8cpp.html#a5be5ee158531203bf7471424e2ea4866">ZeroTakenProb</a>, <a class="code" href="BranchProbabilityInfo_8cpp.html#a202467d2d7ce0b47448bc909631c6950">ZeroUntakenProb</a>}}, <span class="comment">/// X &gt; 0  -&gt; Likely</span></div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;<span class="comment"></span>};</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;<span class="comment">/// Integer compares with -1:</span></div>
<div class="line"><a name="l00145"></a><span class="lineno"><a class="line" href="BranchProbabilityInfo_8cpp.html#a2b8ec1580eb2f1edaeb6257712dca6b5">  145</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="BranchProbabilityInfo_8cpp.html#a3ad5391b0e7ea29306fee576182dabbf">ProbabilityTable</a> <a class="code" href="BranchProbabilityInfo_8cpp.html#a2b8ec1580eb2f1edaeb6257712dca6b5">ICmpWithMinusOneTable</a>{</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    {<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">CmpInst::ICMP_EQ</a>, {<a class="code" href="BranchProbabilityInfo_8cpp.html#a202467d2d7ce0b47448bc909631c6950">ZeroUntakenProb</a>, <a class="code" href="BranchProbabilityInfo_8cpp.html#a5be5ee158531203bf7471424e2ea4866">ZeroTakenProb</a>}},  <span class="comment">/// X == -1 -&gt; Unlikely</span></div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;<span class="comment"></span>    {<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">CmpInst::ICMP_NE</a>, {<a class="code" href="BranchProbabilityInfo_8cpp.html#a5be5ee158531203bf7471424e2ea4866">ZeroTakenProb</a>, <a class="code" href="BranchProbabilityInfo_8cpp.html#a202467d2d7ce0b47448bc909631c6950">ZeroUntakenProb</a>}},  <span class="comment">/// X != -1 -&gt; Likely</span></div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;<span class="comment"></span>    <span class="comment">// InstCombine canonicalizes X &gt;= 0 into X &gt; -1</span></div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    {<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba720a42e85f7e981afd61e28473b0000a">CmpInst::ICMP_SGT</a>, {<a class="code" href="BranchProbabilityInfo_8cpp.html#a5be5ee158531203bf7471424e2ea4866">ZeroTakenProb</a>, <a class="code" href="BranchProbabilityInfo_8cpp.html#a202467d2d7ce0b47448bc909631c6950">ZeroUntakenProb</a>}}, <span class="comment">/// X &gt;= 0  -&gt; Likely</span></div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;<span class="comment"></span>};</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;<span class="comment">/// Integer compares with 1:</span></div>
<div class="line"><a name="l00153"></a><span class="lineno"><a class="line" href="BranchProbabilityInfo_8cpp.html#aa8c67f6b4ae26d6e248b2b213f0b9217">  153</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="BranchProbabilityInfo_8cpp.html#a3ad5391b0e7ea29306fee576182dabbf">ProbabilityTable</a> <a class="code" href="BranchProbabilityInfo_8cpp.html#aa8c67f6b4ae26d6e248b2b213f0b9217">ICmpWithOneTable</a>{</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <span class="comment">// InstCombine canonicalizes X &lt;= 0 into X &lt; 1</span></div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    {<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba15ae464950ac676919c2f0c7aafc706c">CmpInst::ICMP_SLT</a>, {<a class="code" href="BranchProbabilityInfo_8cpp.html#a202467d2d7ce0b47448bc909631c6950">ZeroUntakenProb</a>, <a class="code" href="BranchProbabilityInfo_8cpp.html#a5be5ee158531203bf7471424e2ea4866">ZeroTakenProb</a>}}, <span class="comment">/// X &lt;= 0 -&gt; Unlikely</span></div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;<span class="comment"></span>};</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;<span class="comment">/// strcmp and similar functions return zero, negative, or positive, if the</span></div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;<span class="comment">/// first string is equal, less, or greater than the second. We consider it</span></div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;<span class="comment">/// likely that the strings are not equal, so a comparison with zero is</span></div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;<span class="comment">/// probably false, but also a comparison with any other number is also</span></div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;<span class="comment">/// probably false given that what exactly is returned for nonzero values is</span></div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;<span class="comment">/// not specified. Any kind of comparison other than equality we know</span></div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;<span class="comment">/// nothing about.</span></div>
<div class="line"><a name="l00165"></a><span class="lineno"><a class="line" href="BranchProbabilityInfo_8cpp.html#a275618493c15713c49bc2947a10fa12d">  165</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="BranchProbabilityInfo_8cpp.html#a3ad5391b0e7ea29306fee576182dabbf">ProbabilityTable</a> <a class="code" href="BranchProbabilityInfo_8cpp.html#a275618493c15713c49bc2947a10fa12d">ICmpWithLibCallTable</a>{</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    {<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">CmpInst::ICMP_EQ</a>, {<a class="code" href="BranchProbabilityInfo_8cpp.html#a202467d2d7ce0b47448bc909631c6950">ZeroUntakenProb</a>, <a class="code" href="BranchProbabilityInfo_8cpp.html#a5be5ee158531203bf7471424e2ea4866">ZeroTakenProb</a>}},</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    {<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">CmpInst::ICMP_NE</a>, {<a class="code" href="BranchProbabilityInfo_8cpp.html#a5be5ee158531203bf7471424e2ea4866">ZeroTakenProb</a>, <a class="code" href="BranchProbabilityInfo_8cpp.html#a202467d2d7ce0b47448bc909631c6950">ZeroUntakenProb</a>}},</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;};</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160; </div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;<span class="comment">// Floating-Point Heuristics (FPH)</span></div>
<div class="line"><a name="l00171"></a><span class="lineno"><a class="line" href="BranchProbabilityInfo_8cpp.html#a16edcd8b45785ee12c576c73fe3218c9">  171</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classuint32__t.html">uint32_t</a> <a class="code" href="BranchProbabilityInfo_8cpp.html#a16edcd8b45785ee12c576c73fe3218c9">FPH_TAKEN_WEIGHT</a> = 20;</div>
<div class="line"><a name="l00172"></a><span class="lineno"><a class="line" href="BranchProbabilityInfo_8cpp.html#aadf81261b3ac34f57dc2d663bd8c2f4d">  172</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classuint32__t.html">uint32_t</a> <a class="code" href="BranchProbabilityInfo_8cpp.html#aadf81261b3ac34f57dc2d663bd8c2f4d">FPH_NONTAKEN_WEIGHT</a> = 12;</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;<span class="comment">/// This is the probability for an ordered floating point comparison.</span></div>
<div class="line"><a name="l00175"></a><span class="lineno"><a class="line" href="BranchProbabilityInfo_8cpp.html#aceb920a7c91b520ddbda086a10a8cfde">  175</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classuint32__t.html">uint32_t</a> <a class="code" href="BranchProbabilityInfo_8cpp.html#aceb920a7c91b520ddbda086a10a8cfde">FPH_ORD_WEIGHT</a> = 1024 * 1024 - 1;<span class="comment"></span></div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;<span class="comment">/// This is the probability for an unordered floating point comparison, it means</span></div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;<span class="comment">/// one or two of the operands are NaN. Usually it is used to test for an</span></div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;<span class="comment">/// exceptional case, so the result is unlikely.</span></div>
<div class="line"><a name="l00179"></a><span class="lineno"><a class="line" href="BranchProbabilityInfo_8cpp.html#adf1ae2fc274d3e7ef0204214943c017f">  179</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classuint32__t.html">uint32_t</a> <a class="code" href="BranchProbabilityInfo_8cpp.html#adf1ae2fc274d3e7ef0204214943c017f">FPH_UNO_WEIGHT</a> = 1;</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160; </div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classllvm_1_1BranchProbability.html">BranchProbability</a> <a class="code" href="BranchProbabilityInfo_8cpp.html#a33a9f0b8ca86e37a2b9c2f3a0480727b">FPOrdTakenProb</a>(<a class="code" href="BranchProbabilityInfo_8cpp.html#aceb920a7c91b520ddbda086a10a8cfde">FPH_ORD_WEIGHT</a>,</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;                                              <a class="code" href="BranchProbabilityInfo_8cpp.html#aceb920a7c91b520ddbda086a10a8cfde">FPH_ORD_WEIGHT</a> + <a class="code" href="BranchProbabilityInfo_8cpp.html#adf1ae2fc274d3e7ef0204214943c017f">FPH_UNO_WEIGHT</a>);</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classllvm_1_1BranchProbability.html">BranchProbability</a></div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    <a class="code" href="BranchProbabilityInfo_8cpp.html#a5de2d80fbf11d57c77cb9a621441753b">FPOrdUntakenProb</a>(<a class="code" href="BranchProbabilityInfo_8cpp.html#adf1ae2fc274d3e7ef0204214943c017f">FPH_UNO_WEIGHT</a>, <a class="code" href="BranchProbabilityInfo_8cpp.html#aceb920a7c91b520ddbda086a10a8cfde">FPH_ORD_WEIGHT</a> + <a class="code" href="BranchProbabilityInfo_8cpp.html#adf1ae2fc274d3e7ef0204214943c017f">FPH_UNO_WEIGHT</a>);</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classllvm_1_1BranchProbability.html">BranchProbability</a></div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    <a class="code" href="BranchProbabilityInfo_8cpp.html#a75a205911ec3ff2d9cdd4017c2efc5d2">FPTakenProb</a>(<a class="code" href="BranchProbabilityInfo_8cpp.html#a16edcd8b45785ee12c576c73fe3218c9">FPH_TAKEN_WEIGHT</a>, <a class="code" href="BranchProbabilityInfo_8cpp.html#a16edcd8b45785ee12c576c73fe3218c9">FPH_TAKEN_WEIGHT</a> + <a class="code" href="BranchProbabilityInfo_8cpp.html#aadf81261b3ac34f57dc2d663bd8c2f4d">FPH_NONTAKEN_WEIGHT</a>);</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classllvm_1_1BranchProbability.html">BranchProbability</a></div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    <a class="code" href="BranchProbabilityInfo_8cpp.html#a188a295bab13e344682c59d4ce619a12">FPUntakenProb</a>(<a class="code" href="BranchProbabilityInfo_8cpp.html#aadf81261b3ac34f57dc2d663bd8c2f4d">FPH_NONTAKEN_WEIGHT</a>, <a class="code" href="BranchProbabilityInfo_8cpp.html#a16edcd8b45785ee12c576c73fe3218c9">FPH_TAKEN_WEIGHT</a> + <a class="code" href="BranchProbabilityInfo_8cpp.html#aadf81261b3ac34f57dc2d663bd8c2f4d">FPH_NONTAKEN_WEIGHT</a>);</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;<span class="comment">/// Floating-Point compares:</span></div>
<div class="line"><a name="l00191"></a><span class="lineno"><a class="line" href="BranchProbabilityInfo_8cpp.html#ac5ac9b2a71cf00215c4cd8f7914eedba">  191</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="BranchProbabilityInfo_8cpp.html#a3ad5391b0e7ea29306fee576182dabbf">ProbabilityTable</a> <a class="code" href="BranchProbabilityInfo_8cpp.html#ac5ac9b2a71cf00215c4cd8f7914eedba">FCmpTable</a>{</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    {<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa3213b645e029aba8bb1b85213607d5e">FCmpInst::FCMP_ORD</a>, {<a class="code" href="BranchProbabilityInfo_8cpp.html#a33a9f0b8ca86e37a2b9c2f3a0480727b">FPOrdTakenProb</a>, <a class="code" href="BranchProbabilityInfo_8cpp.html#a5de2d80fbf11d57c77cb9a621441753b">FPOrdUntakenProb</a>}}, <span class="comment">/// !isnan -&gt; Likely</span></div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;<span class="comment"></span>    {<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baf0159e4005258dc54f20b6fc227d19ed">FCmpInst::FCMP_UNO</a>, {<a class="code" href="BranchProbabilityInfo_8cpp.html#a5de2d80fbf11d57c77cb9a621441753b">FPOrdUntakenProb</a>, <a class="code" href="BranchProbabilityInfo_8cpp.html#a33a9f0b8ca86e37a2b9c2f3a0480727b">FPOrdTakenProb</a>}}, <span class="comment">/// isnan -&gt; Unlikely</span></div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;<span class="comment"></span>};</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;<span class="comment">/// Set of dedicated &quot;absolute&quot; execution weights for a block. These weights are</span></div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;<span class="comment">/// meaningful relative to each other and their derivatives only.</span></div>
<div class="line"><a name="l00198"></a><span class="lineno"><a class="line" href="BranchProbabilityInfo_8cpp.html#a0bab6cbda2c6f1e9dd352004a6b9f393">  198</a></span>&#160;<span class="comment"></span><span class="keyword">enum class</span> <a class="code" href="BranchProbabilityInfo_8cpp.html#a0bab6cbda2c6f1e9dd352004a6b9f393">BlockExecWeight</a> : std::uint32_t {<span class="comment"></span></div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;<span class="comment">  /// Special weight used for cases with exact zero probability.</span></div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;<span class="comment"></span>  <a class="code" href="BranchProbabilityInfo_8cpp.html#a0bab6cbda2c6f1e9dd352004a6b9f393a529e9e0beb5f85d1f132917c1a09860c">ZERO</a> = 0x0,<span class="comment"></span></div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;<span class="comment">  /// Minimal possible non zero weight.</span></div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;<span class="comment"></span>  <a class="code" href="BranchProbabilityInfo_8cpp.html#a0bab6cbda2c6f1e9dd352004a6b9f393a73be61fb26fc56377050ab1e85eab645">LOWEST_NON_ZERO</a> = 0x1,<span class="comment"></span></div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;<span class="comment">  /// Weight to an &#39;unreachable&#39; block.</span></div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;<span class="comment"></span>  <a class="code" href="BranchProbabilityInfo_8cpp.html#a0bab6cbda2c6f1e9dd352004a6b9f393a58fd3b3b1f27606728077423eb21d8d6">UNREACHABLE</a> = <a class="code" href="BranchProbabilityInfo_8cpp.html#a0bab6cbda2c6f1e9dd352004a6b9f393a529e9e0beb5f85d1f132917c1a09860c">ZERO</a>,<span class="comment"></span></div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;<span class="comment">  /// Weight to a block containing non returning call.</span></div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;<span class="comment"></span>  <a class="code" href="BranchProbabilityInfo_8cpp.html#a0bab6cbda2c6f1e9dd352004a6b9f393a25c263e3b7486f9453d37151d62ff7d1">NORETURN</a> = <a class="code" href="BranchProbabilityInfo_8cpp.html#a0bab6cbda2c6f1e9dd352004a6b9f393a73be61fb26fc56377050ab1e85eab645">LOWEST_NON_ZERO</a>,<span class="comment"></span></div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;<span class="comment">  /// Weight to &#39;unwind&#39; block of an invoke instruction.</span></div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;<span class="comment"></span>  <a class="code" href="BranchProbabilityInfo_8cpp.html#a0bab6cbda2c6f1e9dd352004a6b9f393a37b88a87188456429fa6e6c31a6d2301">UNWIND</a> = <a class="code" href="BranchProbabilityInfo_8cpp.html#a0bab6cbda2c6f1e9dd352004a6b9f393a73be61fb26fc56377050ab1e85eab645">LOWEST_NON_ZERO</a>,<span class="comment"></span></div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;<span class="comment">  /// Weight to a &#39;cold&#39; block. Cold blocks are the ones containing calls marked</span></div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;<span class="comment">  /// with attribute &#39;cold&#39;.</span></div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;<span class="comment"></span>  <a class="code" href="BranchProbabilityInfo_8cpp.html#a0bab6cbda2c6f1e9dd352004a6b9f393a3f7ff4daa99912d1b0c8c64340edb9fb">COLD</a> = 0xffff,<span class="comment"></span></div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;<span class="comment">  /// Default weight is used in cases when there is no dedicated execution</span></div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;<span class="comment">  /// weight set. It is not propagated through the domination line either.</span></div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;<span class="comment"></span>  DEFAULT = 0xfffff</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;};</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160; </div>
<div class="line"><a name="l00217"></a><span class="lineno"><a class="line" href="classllvm_1_1BranchProbabilityInfo_1_1SccInfo.html#adb1204788a33211be05a6a01356e78d0">  217</a></span>&#160;<a class="code" href="classllvm_1_1BranchProbabilityInfo_1_1SccInfo.html#adb1204788a33211be05a6a01356e78d0">BranchProbabilityInfo::SccInfo::SccInfo</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>) {</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;  <span class="comment">// Record SCC numbers of blocks in the CFG to identify irreducible loops.</span></div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;  <span class="comment">// FIXME: We could only calculate this if the CFG is known to be irreducible</span></div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;  <span class="comment">// (perhaps cache this info in LoopInfo if we can easily calculate it there?).</span></div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;  <span class="keywordtype">int</span> SccNum = 0;</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1scc__iterator.html">scc_iterator&lt;const Function *&gt;</a> It = <a class="code" href="namespacellvm.html#a71882a8257c58a4d9401db39622871a6">scc_begin</a>(&amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>); !It.isAtEnd();</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;       ++It, ++SccNum) {</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    <span class="comment">// Ignore single-block SCCs since they either aren&#39;t loops or LoopInfo will</span></div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    <span class="comment">// catch them.</span></div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    <span class="keyword">const</span> std::vector&lt;const BasicBlock *&gt; &amp;Scc = *It;</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    <span class="keywordflow">if</span> (Scc.size() == 1)</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160; </div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;BPI: SCC &quot;</span> &lt;&lt; SccNum &lt;&lt; <span class="stringliteral">&quot;:&quot;</span>);</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> : Scc) {</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getName());</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;      SccNums[<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>] = SccNum;</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;      calculateSccBlockType(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, SccNum);</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    }</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;  }</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;}</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160; </div>
<div class="line"><a name="l00240"></a><span class="lineno"><a class="line" href="classllvm_1_1BranchProbabilityInfo_1_1SccInfo.html#af2b37a5830be4881f3995e017ecd8473">  240</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classllvm_1_1BranchProbabilityInfo_1_1SccInfo.html#af2b37a5830be4881f3995e017ecd8473">BranchProbabilityInfo::SccInfo::getSCCNum</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;  <span class="keyword">auto</span> SccIt = SccNums.find(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;  <span class="keywordflow">if</span> (SccIt == SccNums.end())</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;  <span class="keywordflow">return</span> SccIt-&gt;second;</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;}</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160; </div>
<div class="line"><a name="l00247"></a><span class="lineno"><a class="line" href="classllvm_1_1BranchProbabilityInfo_1_1SccInfo.html#aa45126829059172e7a55b24547167673">  247</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1BranchProbabilityInfo_1_1SccInfo.html#aa45126829059172e7a55b24547167673">BranchProbabilityInfo::SccInfo::getSccEnterBlocks</a>(</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    <span class="keywordtype">int</span> SccNum, <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;BasicBlock *&gt;</a> &amp;Enters)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160; </div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> MapIt : SccBlocks[SccNum]) {</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> = MapIt.first;</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    <span class="keywordflow">if</span> (isSCCHeader(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, SccNum))</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> *Pred : <a class="code" href="namespacellvm.html#acb22fb04083152eee862457e42e8dc31">predecessors</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>))</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;        <span class="keywordflow">if</span> (getSCCNum(Pred) != SccNum)</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;          Enters.push_back(<span class="keyword">const_cast&lt;</span><a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<span class="keyword">&gt;</span>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>));</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;  }</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;}</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160; </div>
<div class="line"><a name="l00259"></a><span class="lineno"><a class="line" href="classllvm_1_1BranchProbabilityInfo_1_1SccInfo.html#adf3e2e7e5049244c18140cf77a7baf2c">  259</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1BranchProbabilityInfo_1_1SccInfo.html#adf3e2e7e5049244c18140cf77a7baf2c">BranchProbabilityInfo::SccInfo::getSccExitBlocks</a>(</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    <span class="keywordtype">int</span> SccNum, <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;BasicBlock *&gt;</a> &amp;Exits)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> MapIt : SccBlocks[SccNum]) {</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> = MapIt.first;</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    <span class="keywordflow">if</span> (isSCCExitingBlock(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, SccNum))</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> *Succ : <a class="code" href="namespacellvm.html#a26e2a938b431eaa6eca2beaa96410c9d">successors</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>))</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;        <span class="keywordflow">if</span> (getSCCNum(Succ) != SccNum)</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;          Exits.push_back(<span class="keyword">const_cast&lt;</span><a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<span class="keyword">&gt;</span>(Succ));</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;  }</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;}</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160; </div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;<a class="code" href="classuint32__t.html">uint32_t</a> BranchProbabilityInfo::SccInfo::getSccBlockType(<span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>,</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;                                                         <span class="keywordtype">int</span> SccNum)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(getSCCNum(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) == SccNum);</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160; </div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(SccBlocks.size() &gt; <span class="keyword">static_cast&lt;</span><span class="keywordtype">unsigned</span><span class="keyword">&gt;</span>(SccNum) &amp;&amp; <span class="stringliteral">&quot;Unknown SCC&quot;</span>);</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span> &amp;SccBlockTypes = SccBlocks[SccNum];</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160; </div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;  <span class="keyword">auto</span> It = SccBlockTypes.find(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;  <span class="keywordflow">if</span> (It != SccBlockTypes.end()) {</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    <span class="keywordflow">return</span> It-&gt;second;</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;  }</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;  <span class="keywordflow">return</span> Inner;</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;}</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160; </div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;<span class="keywordtype">void</span> BranchProbabilityInfo::SccInfo::calculateSccBlockType(<span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>,</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;                                                           <span class="keywordtype">int</span> SccNum) {</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(getSCCNum(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) == SccNum);</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;  <a class="code" href="classuint32__t.html">uint32_t</a> <a class="code" href="namespacellvm_1_1WebAssembly.html#a9ebf832762357f1668dbc7fd07668de4">BlockType</a> = Inner;</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160; </div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a61d13d6824ec46c31260a4fd0997eda0">llvm::any_of</a>(<a class="code" href="namespacellvm.html#acb22fb04083152eee862457e42e8dc31">predecessors</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>), [&amp;](<span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Pred) {</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;        <span class="comment">// Consider any block that is an entry point to the SCC as</span></div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;        <span class="comment">// a header.</span></div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;        <span class="keywordflow">return</span> getSCCNum(Pred) != SccNum;</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;      }))</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    <a class="code" href="namespacellvm_1_1WebAssembly.html#a9ebf832762357f1668dbc7fd07668de4">BlockType</a> |= Header;</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160; </div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a61d13d6824ec46c31260a4fd0997eda0">llvm::any_of</a>(<a class="code" href="namespacellvm.html#a26e2a938b431eaa6eca2beaa96410c9d">successors</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>), [&amp;](<span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Succ) {</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;        <span class="keywordflow">return</span> getSCCNum(Succ) != SccNum;</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;      }))</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    <a class="code" href="namespacellvm_1_1WebAssembly.html#a9ebf832762357f1668dbc7fd07668de4">BlockType</a> |= Exiting;</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160; </div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;  <span class="comment">// Lazily compute the set of headers for a given SCC and cache the results</span></div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;  <span class="comment">// in the SccHeaderMap.</span></div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;  <span class="keywordflow">if</span> (SccBlocks.size() &lt;= <span class="keyword">static_cast&lt;</span><span class="keywordtype">unsigned</span><span class="keyword">&gt;</span>(SccNum))</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    SccBlocks.resize(SccNum + 1);</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;  <span class="keyword">auto</span> &amp;SccBlockTypes = SccBlocks[SccNum];</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160; </div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1WebAssembly.html#a9ebf832762357f1668dbc7fd07668de4">BlockType</a> != Inner) {</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    <span class="keywordtype">bool</span> IsInserted;</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    std::tie(std::ignore, IsInserted) =</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;        SccBlockTypes.insert(std::make_pair(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, <a class="code" href="namespacellvm_1_1WebAssembly.html#a9ebf832762357f1668dbc7fd07668de4">BlockType</a>));</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(IsInserted &amp;&amp; <span class="stringliteral">&quot;Duplicated block in SCC&quot;</span>);</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;  }</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;}</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160; </div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;BranchProbabilityInfo::LoopBlock::LoopBlock(<span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>,</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;                                            <span class="keyword">const</span> <a class="code" href="classllvm_1_1LoopInfo.html">LoopInfo</a> &amp;LI,</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;                                            <span class="keyword">const</span> SccInfo &amp;SccI)</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    : <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) {</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;  <a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85a7289f7156c17c31399fe5226bf556781">LD</a>.first = LI.<a class="code" href="classllvm_1_1LoopInfoBase.html#a7a7c8e0e4f836c13c015b62e18f386bd">getLoopFor</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85a7289f7156c17c31399fe5226bf556781">LD</a>.first) {</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    <a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85a7289f7156c17c31399fe5226bf556781">LD</a>.second = SccI.getSCCNum(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;  }</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;}</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160; </div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;<span class="keywordtype">bool</span> BranchProbabilityInfo::isLoopEnteringEdge(<span class="keyword">const</span> LoopEdge &amp;Edge)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span> &amp;SrcBlock = Edge.first;</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span> &amp;DstBlock = Edge.second;</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;  <span class="keywordflow">return</span> (DstBlock.getLoop() &amp;&amp;</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;          !DstBlock.getLoop()-&gt;contains(SrcBlock.getLoop())) ||</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;         <span class="comment">// Assume that SCCs can&#39;t be nested.</span></div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;         (DstBlock.getSccNum() != -1 &amp;&amp;</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;          SrcBlock.getSccNum() != DstBlock.getSccNum());</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;}</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160; </div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;<span class="keywordtype">bool</span> BranchProbabilityInfo::isLoopExitingEdge(<span class="keyword">const</span> LoopEdge &amp;Edge)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;  <span class="keywordflow">return</span> isLoopEnteringEdge({Edge.second, Edge.first});</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;}</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160; </div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;<span class="keywordtype">bool</span> BranchProbabilityInfo::isLoopEnteringExitingEdge(</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    <span class="keyword">const</span> LoopEdge &amp;Edge)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;  <span class="keywordflow">return</span> isLoopEnteringEdge(Edge) || isLoopExitingEdge(Edge);</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;}</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160; </div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;<span class="keywordtype">bool</span> BranchProbabilityInfo::isLoopBackEdge(<span class="keyword">const</span> LoopEdge &amp;Edge)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span> &amp;SrcBlock = Edge.first;</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span> &amp;DstBlock = Edge.second;</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;  <span class="keywordflow">return</span> SrcBlock.belongsToSameLoop(DstBlock) &amp;&amp;</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;         ((DstBlock.getLoop() &amp;&amp;</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;           DstBlock.getLoop()-&gt;getHeader() == DstBlock.getBlock()) ||</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;          (DstBlock.getSccNum() != -1 &amp;&amp;</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;           SccI-&gt;isSCCHeader(DstBlock.getBlock(), DstBlock.getSccNum())));</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;}</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160; </div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;<span class="keywordtype">void</span> BranchProbabilityInfo::getLoopEnterBlocks(</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    <span class="keyword">const</span> LoopBlock &amp;LB, <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;BasicBlock *&gt;</a> &amp;Enters)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;  <span class="keywordflow">if</span> (LB.getLoop()) {</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    <span class="keyword">auto</span> *Header = LB.getLoop()-&gt;getHeader();</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    Enters.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a7efd1f0c1206d95e4fe01a9b49a57b82">append</a>(<a class="code" href="namespacellvm.html#a7e108932dc3da5294aed99a353aac9c4">pred_begin</a>(Header), <a class="code" href="namespacellvm.html#a5eeaf08e96168c2cac8960f87f0ef360">pred_end</a>(Header));</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(LB.getSccNum() != -1 &amp;&amp; <span class="stringliteral">&quot;LB doesn&#39;t belong to any loop?&quot;</span>);</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    SccI-&gt;getSccEnterBlocks(LB.getSccNum(), Enters);</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;  }</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;}</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160; </div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;<span class="keywordtype">void</span> BranchProbabilityInfo::getLoopExitBlocks(</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    <span class="keyword">const</span> LoopBlock &amp;LB, <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;BasicBlock *&gt;</a> &amp;Exits)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;  <span class="keywordflow">if</span> (LB.getLoop()) {</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    LB.getLoop()-&gt;getExitBlocks(Exits);</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(LB.getSccNum() != -1 &amp;&amp; <span class="stringliteral">&quot;LB doesn&#39;t belong to any loop?&quot;</span>);</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    SccI-&gt;getSccExitBlocks(LB.getSccNum(), Exits);</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;  }</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;}</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160; </div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;<span class="comment">// Propagate existing explicit probabilities from either profile data or</span></div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;<span class="comment">// &#39;expect&#39; intrinsic processing. Examine metadata against unreachable</span></div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;<span class="comment">// heuristic. The probability of the edge coming to unreachable block is</span></div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;<span class="comment">// set to min of metadata and unreachable heuristic.</span></div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;<span class="keywordtype">bool</span> BranchProbabilityInfo::calcMetadataWeights(<span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) {</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *TI = <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getTerminator();</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(TI-&gt;<a class="code" href="classllvm_1_1Instruction.html#a3287172f2d13af086e6d66364e8c6de3">getNumSuccessors</a>() &gt; 1 &amp;&amp; <span class="stringliteral">&quot;expected more than one successor!&quot;</span>);</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;  <span class="keywordflow">if</span> (!(isa&lt;BranchInst&gt;(TI) || isa&lt;SwitchInst&gt;(TI) || isa&lt;IndirectBrInst&gt;(TI) ||</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;        isa&lt;InvokeInst&gt;(TI) || isa&lt;CallBrInst&gt;(TI)))</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160; </div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;  <a class="code" href="classllvm_1_1MDNode.html">MDNode</a> *WeightsNode = <a class="code" href="namespacellvm.html#a6da87e96231847cc11de9fd5d5020d40">getValidBranchWeightMDNode</a>(*TI);</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;  <span class="keywordflow">if</span> (!WeightsNode)</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160; </div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;  <span class="comment">// Check that the number of successors is manageable.</span></div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(TI-&gt;<a class="code" href="classllvm_1_1Instruction.html#a3287172f2d13af086e6d66364e8c6de3">getNumSuccessors</a>() &lt; UINT32_MAX &amp;&amp; <span class="stringliteral">&quot;Too many successors&quot;</span>);</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160; </div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;  <span class="comment">// Build up the final weights that will be used in a temporary buffer.</span></div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;  <span class="comment">// Compute the sum of all weights to later decide whether they need to</span></div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;  <span class="comment">// be scaled to fit in 32 bits.</span></div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;  <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> WeightSum = 0;</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;uint32_t, 2&gt;</a> Weights;</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;unsigned, 2&gt;</a> UnreachableIdxs;</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;unsigned, 2&gt;</a> ReachableIdxs;</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160; </div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;  <a class="code" href="namespacellvm.html#ac19cbbc4935a23e1d44f65e1eaba6b1d">extractBranchWeights</a>(WeightsNode, Weights);</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0, <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = Weights.size(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    WeightSum += Weights[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>];</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    <span class="keyword">const</span> LoopBlock SrcLoopBB = getLoopBlock(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    <span class="keyword">const</span> LoopBlock DstLoopBB = getLoopBlock(TI-&gt;<a class="code" href="classllvm_1_1Instruction.html#a6e5d2e18c81baaeec7dadc81a0dea993">getSuccessor</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>));</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;    <span class="keyword">auto</span> EstimatedWeight = getEstimatedEdgeWeight({SrcLoopBB, DstLoopBB});</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    <span class="keywordflow">if</span> (EstimatedWeight &amp;&amp;</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;        *EstimatedWeight &lt;= <span class="keyword">static_cast&lt;</span><a class="code" href="classuint32__t.html">uint32_t</a><span class="keyword">&gt;</span>(<a class="code" href="BranchProbabilityInfo_8cpp.html#a0bab6cbda2c6f1e9dd352004a6b9f393a58fd3b3b1f27606728077423eb21d8d6">BlockExecWeight::UNREACHABLE</a>))</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;      UnreachableIdxs.push_back(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;      ReachableIdxs.push_back(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;  }</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Weights.size() == TI-&gt;<a class="code" href="classllvm_1_1Instruction.html#a3287172f2d13af086e6d66364e8c6de3">getNumSuccessors</a>() &amp;&amp; <span class="stringliteral">&quot;Checked above&quot;</span>);</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160; </div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;  <span class="comment">// If the sum of weights does not fit in 32 bits, scale every weight down</span></div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;  <span class="comment">// accordingly.</span></div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;  <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> ScalingFactor =</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;      (WeightSum &gt; UINT32_MAX) ? WeightSum / UINT32_MAX + 1 : 1;</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160; </div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;  <span class="keywordflow">if</span> (ScalingFactor &gt; 1) {</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;    WeightSum = 0;</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0, <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = TI-&gt;<a class="code" href="classllvm_1_1Instruction.html#a3287172f2d13af086e6d66364e8c6de3">getNumSuccessors</a>(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;      Weights[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>] /= ScalingFactor;</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;      WeightSum += Weights[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>];</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    }</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;  }</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(WeightSum &lt;= UINT32_MAX &amp;&amp;</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;         <span class="stringliteral">&quot;Expected weights to scale down to 32 bits&quot;</span>);</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160; </div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;  <span class="keywordflow">if</span> (WeightSum == 0 || ReachableIdxs.size() == 0) {</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0, <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = TI-&gt;<a class="code" href="classllvm_1_1Instruction.html#a3287172f2d13af086e6d66364e8c6de3">getNumSuccessors</a>(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;      Weights[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>] = 1;</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    WeightSum = TI-&gt;<a class="code" href="classllvm_1_1Instruction.html#a3287172f2d13af086e6d66364e8c6de3">getNumSuccessors</a>();</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;  }</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160; </div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;  <span class="comment">// Set the probability.</span></div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;BranchProbability, 2&gt;</a> BP;</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0, <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = TI-&gt;<a class="code" href="classllvm_1_1Instruction.html#a3287172f2d13af086e6d66364e8c6de3">getNumSuccessors</a>(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    BP.push_back({ Weights[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>], <span class="keyword">static_cast&lt;</span><a class="code" href="classuint32__t.html">uint32_t</a><span class="keyword">&gt;</span>(WeightSum) });</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160; </div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;  <span class="comment">// Examine the metadata against unreachable heuristic.</span></div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;  <span class="comment">// If the unreachable heuristic is more strong then we use it for this edge.</span></div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;  <span class="keywordflow">if</span> (UnreachableIdxs.size() == 0 || ReachableIdxs.size() == 0) {</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;    <a class="code" href="classllvm_1_1BranchProbabilityInfo.html#a145edc209aa2f628c73c9cf860eeeb5c">setEdgeProbability</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, BP);</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;  }</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160; </div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;  <span class="keyword">auto</span> UnreachableProb = <a class="code" href="BranchProbabilityInfo_8cpp.html#aafc5237f3585710400d8a15b43ff0e5b">UR_TAKEN_PROB</a>;</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : UnreachableIdxs)</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;    <span class="keywordflow">if</span> (UnreachableProb &lt; BP[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>]) {</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;      BP[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>] = UnreachableProb;</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;    }</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160; </div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;  <span class="comment">// Sum of all edge probabilities must be 1.0. If we modified the probability</span></div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;  <span class="comment">// of some edges then we must distribute the introduced difference over the</span></div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;  <span class="comment">// reachable blocks.</span></div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;  <span class="comment">// Proportional distribution: the relation between probabilities of the</span></div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;  <span class="comment">// reachable edges is kept unchanged. That is for any reachable edges i and j:</span></div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;  <span class="comment">//   newBP[i] / newBP[j] == oldBP[i] / oldBP[j] =&gt;</span></div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;  <span class="comment">//   newBP[i] / oldBP[i] == newBP[j] / oldBP[j] == K</span></div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;  <span class="comment">// Where K is independent of i,j.</span></div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;  <span class="comment">//   newBP[i] == oldBP[i] * K</span></div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;  <span class="comment">// We need to find K.</span></div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;  <span class="comment">// Make sum of all reachables of the left and right parts:</span></div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;  <span class="comment">//   sum_of_reachable(newBP) == K * sum_of_reachable(oldBP)</span></div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;  <span class="comment">// Sum of newBP must be equal to 1.0:</span></div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;  <span class="comment">//   sum_of_reachable(newBP) + sum_of_unreachable(newBP) == 1.0 =&gt;</span></div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;  <span class="comment">//   sum_of_reachable(newBP) = 1.0 - sum_of_unreachable(newBP)</span></div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;  <span class="comment">// Where sum_of_unreachable(newBP) is what has been just changed.</span></div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;  <span class="comment">// Finally:</span></div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;  <span class="comment">//   K == sum_of_reachable(newBP) / sum_of_reachable(oldBP) =&gt;</span></div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;  <span class="comment">//   K == (1.0 - sum_of_unreachable(newBP)) / sum_of_reachable(oldBP)</span></div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;  <a class="code" href="classllvm_1_1BranchProbability.html">BranchProbability</a> NewUnreachableSum = <a class="code" href="classllvm_1_1BranchProbability.html#afd00958cba7080048a84cccfcef55d71">BranchProbability::getZero</a>();</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : UnreachableIdxs)</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;    NewUnreachableSum += BP[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>];</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160; </div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;  <a class="code" href="classllvm_1_1BranchProbability.html">BranchProbability</a> NewReachableSum =</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;      <a class="code" href="classllvm_1_1BranchProbability.html#a56e1b2d1999aadf4c513caee1ce5275b">BranchProbability::getOne</a>() - NewUnreachableSum;</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160; </div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;  <a class="code" href="classllvm_1_1BranchProbability.html">BranchProbability</a> OldReachableSum = <a class="code" href="classllvm_1_1BranchProbability.html#afd00958cba7080048a84cccfcef55d71">BranchProbability::getZero</a>();</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : ReachableIdxs)</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;    OldReachableSum += BP[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>];</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160; </div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;  <span class="keywordflow">if</span> (OldReachableSum != NewReachableSum) { <span class="comment">// Anything to dsitribute?</span></div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;    <span class="keywordflow">if</span> (OldReachableSum.<a class="code" href="classllvm_1_1BranchProbability.html#a6abbd0248d2ceaacdc70448659c0c2f4">isZero</a>()) {</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;      <span class="comment">// If all oldBP[i] are zeroes then the proportional distribution results</span></div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;      <span class="comment">// in all zero probabilities and the error stays big. In this case we</span></div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;      <span class="comment">// evenly spread NewReachableSum over the reachable edges.</span></div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;      <a class="code" href="classllvm_1_1BranchProbability.html">BranchProbability</a> PerEdge = NewReachableSum / ReachableIdxs.size();</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">auto</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : ReachableIdxs)</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;        BP[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>] = PerEdge;</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">auto</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : ReachableIdxs) {</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;        <span class="comment">// We use uint64_t to avoid double rounding error of the following</span></div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;        <span class="comment">// calculation: BP[i] = BP[i] * NewReachableSum / OldReachableSum</span></div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;        <span class="comment">// The formula is taken from the private constructor</span></div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;        <span class="comment">// BranchProbability(uint32_t Numerator, uint32_t Denominator)</span></div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;        <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> <a class="code" href="X86PartialReduction_8cpp.html#ae0f503db91504a3f3440ab81260e4134">Mul</a> = <span class="keyword">static_cast&lt;</span><a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a><span class="keyword">&gt;</span>(NewReachableSum.<a class="code" href="classllvm_1_1BranchProbability.html#a7be5759bf75c903d1695fa97eca6f139">getNumerator</a>()) *</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;                       BP[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>].getNumerator();</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;        <a class="code" href="classuint32__t.html">uint32_t</a> Div = <span class="keyword">static_cast&lt;</span><a class="code" href="classuint32__t.html">uint32_t</a><span class="keyword">&gt;</span>(</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;            <a class="code" href="namespacellvm.html#a646699d7e9479783d02a368364310c67">divideNearest</a>(Mul, OldReachableSum.<a class="code" href="classllvm_1_1BranchProbability.html#a7be5759bf75c903d1695fa97eca6f139">getNumerator</a>()));</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;        BP[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>] = <a class="code" href="classllvm_1_1BranchProbability.html#a286629cb3167717b736d06f88c8f4817">BranchProbability::getRaw</a>(Div);</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;      }</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;    }</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;  }</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160; </div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;  <a class="code" href="classllvm_1_1BranchProbabilityInfo.html#a145edc209aa2f628c73c9cf860eeeb5c">setEdgeProbability</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, BP);</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160; </div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;}</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160; </div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;<span class="comment">// Calculate Edge Weights using &quot;Pointer Heuristics&quot;. Predict a comparison</span></div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;<span class="comment">// between two pointer or pointer and NULL will fail.</span></div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;<span class="keywordtype">bool</span> BranchProbabilityInfo::calcPointerHeuristics(<span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) {</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a> *BI = dyn_cast&lt;BranchInst&gt;(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getTerminator());</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;  <span class="keywordflow">if</span> (!BI || !BI-&gt;<a class="code" href="classllvm_1_1BranchInst.html#a7e4be8b16fbd68c9045a388904044e01">isConditional</a>())</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160; </div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a> = BI-&gt;<a class="code" href="classllvm_1_1BranchInst.html#aac456a62894c9f0f8e9f06373bbf40f0">getCondition</a>();</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;  <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> *CI = dyn_cast&lt;ICmpInst&gt;(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>);</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;  <span class="keywordflow">if</span> (!CI || !CI-&gt;<a class="code" href="classllvm_1_1ICmpInst.html#abe8988eef2e6fc2baba032cb22afedd7">isEquality</a>())</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160; </div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a> = CI-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0);</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160; </div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a3b996fbf8458aafffc86cb98a68d0a47">isPointerTy</a>())</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160; </div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(CI-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(1)-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a3b996fbf8458aafffc86cb98a68d0a47">isPointerTy</a>());</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160; </div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;  <span class="keyword">auto</span> Search = <a class="code" href="BranchProbabilityInfo_8cpp.html#ac81ca00b5db15ff5c054c569fadd72dd">PointerTable</a>.find(CI-&gt;<a class="code" href="classllvm_1_1CmpInst.html#aa7414ba9f658ff1287d22a4b8fe81bcb">getPredicate</a>());</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;  <span class="keywordflow">if</span> (Search == <a class="code" href="BranchProbabilityInfo_8cpp.html#ac81ca00b5db15ff5c054c569fadd72dd">PointerTable</a>.end())</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;  <a class="code" href="classllvm_1_1BranchProbabilityInfo.html#a145edc209aa2f628c73c9cf860eeeb5c">setEdgeProbability</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, Search-&gt;second);</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;}</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160; </div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;<span class="comment">// Compute the unlikely successors to the block BB in the loop L, specifically</span></div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;<span class="comment">// those that are unlikely because this is a loop, and add them to the</span></div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;<span class="comment">// UnlikelyBlocks set.</span></div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span></div>
<div class="line"><a name="l00543"></a><span class="lineno"><a class="line" href="BranchProbabilityInfo_8cpp.html#ade155905429b0a259a1030f418c04ad9">  543</a></span>&#160;<a class="code" href="BranchProbabilityInfo_8cpp.html#ade155905429b0a259a1030f418c04ad9">computeUnlikelySuccessors</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, <a class="code" href="classllvm_1_1Loop.html">Loop</a> *L,</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;                          <a class="code" href="classllvm_1_1SmallPtrSetImpl.html">SmallPtrSetImpl&lt;const BasicBlock*&gt;</a> &amp;UnlikelyBlocks) {</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;  <span class="comment">// Sometimes in a loop we have a branch whose condition is made false by</span></div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;  <span class="comment">// taking it. This is typically something like</span></div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;  <span class="comment">//  int n = 0;</span></div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;  <span class="comment">//  while (...) {</span></div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;  <span class="comment">//    if (++n &gt;= MAX) {</span></div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;  <span class="comment">//      n = 0;</span></div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;  <span class="comment">//    }</span></div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;  <span class="comment">//  }</span></div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;  <span class="comment">// In this sort of situation taking the branch means that at the very least it</span></div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;  <span class="comment">// won&#39;t be taken again in the next iteration of the loop, so we should</span></div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;  <span class="comment">// consider it less likely than a typical branch.</span></div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;  <span class="comment">// We detect this by looking back through the graph of PHI nodes that sets the</span></div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;  <span class="comment">// value that the condition depends on, and seeing if we can reach a successor</span></div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;  <span class="comment">// block which can be determined to make the condition false.</span></div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;  <span class="comment">// FIXME: We currently consider unlikely blocks to be half as likely as other</span></div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;  <span class="comment">// blocks, but if we consider the example above the likelyhood is actually</span></div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;  <span class="comment">// 1/MAX. We could therefore be more precise in how unlikely we consider</span></div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;  <span class="comment">// blocks to be, but it would require more careful examination of the form</span></div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;  <span class="comment">// of the comparison expression.</span></div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a> *BI = dyn_cast&lt;BranchInst&gt;(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getTerminator());</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;  <span class="keywordflow">if</span> (!BI || !BI-&gt;<a class="code" href="classllvm_1_1BranchInst.html#a7e4be8b16fbd68c9045a388904044e01">isConditional</a>())</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160; </div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;  <span class="comment">// Check if the branch is based on an instruction compared with a constant</span></div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;  <a class="code" href="classllvm_1_1CmpInst.html">CmpInst</a> *CI = dyn_cast&lt;CmpInst&gt;(BI-&gt;<a class="code" href="classllvm_1_1BranchInst.html#aac456a62894c9f0f8e9f06373bbf40f0">getCondition</a>());</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;  <span class="keywordflow">if</span> (!CI || !isa&lt;Instruction&gt;(CI-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0)) ||</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;      !isa&lt;Constant&gt;(CI-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(1)))</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160; </div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;  <span class="comment">// Either the instruction must be a PHI, or a chain of operations involving</span></div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;  <span class="comment">// constants that ends in a PHI which we can then collapse into a single value</span></div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;  <span class="comment">// if the PHI value is known.</span></div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *CmpLHS = dyn_cast&lt;Instruction&gt;(CI-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0));</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;  <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *CmpPHI = dyn_cast&lt;PHINode&gt;(CmpLHS);</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *CmpConst = dyn_cast&lt;Constant&gt;(CI-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(1));</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;  <span class="comment">// Collect the instructions until we hit a PHI</span></div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;BinaryOperator *, 1&gt;</a> InstChain;</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;  <span class="keywordflow">while</span> (!CmpPHI &amp;&amp; CmpLHS &amp;&amp; isa&lt;BinaryOperator&gt;(CmpLHS) &amp;&amp;</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;         isa&lt;Constant&gt;(CmpLHS-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(1))) {</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;    <span class="comment">// Stop if the chain extends outside of the loop</span></div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;    <span class="keywordflow">if</span> (!L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a04337b572d34ea413c35dbac5d75530b">contains</a>(CmpLHS))</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;    InstChain.push_back(cast&lt;BinaryOperator&gt;(CmpLHS));</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;    CmpLHS = dyn_cast&lt;Instruction&gt;(CmpLHS-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0));</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;    <span class="keywordflow">if</span> (CmpLHS)</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;      CmpPHI = dyn_cast&lt;PHINode&gt;(CmpLHS);</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;  }</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;  <span class="keywordflow">if</span> (!CmpPHI || !L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a04337b572d34ea413c35dbac5d75530b">contains</a>(CmpPHI))</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160; </div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;  <span class="comment">// Trace the phi node to find all values that come from successors of BB</span></div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;PHINode*, 8&gt;</a> VisitedInsts;</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;PHINode*, 8&gt;</a> WorkList;</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;  WorkList.push_back(CmpPHI);</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;  VisitedInsts.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(CmpPHI);</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;  <span class="keywordflow">while</span> (!WorkList.empty()) {</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;    <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a> = WorkList.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a0c8ffe664a36e30d49c84d0aded2fe08">pop_back_val</a>();</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a> : <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>-&gt;blocks()) {</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;      <span class="comment">// Skip blocks that aren&#39;t part of the loop</span></div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;      <span class="keywordflow">if</span> (!L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a04337b572d34ea413c35dbac5d75530b">contains</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>))</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *V = <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>-&gt;getIncomingValueForBlock(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;      <span class="comment">// If the source is a PHI add it to the work list if we haven&#39;t</span></div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;      <span class="comment">// already visited it.</span></div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *PN = dyn_cast&lt;PHINode&gt;(V)) {</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;        <span class="keywordflow">if</span> (VisitedInsts.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(PN).second)</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;          WorkList.push_back(PN);</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;      }</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;      <span class="comment">// If this incoming value is a constant and B is a successor of BB, then</span></div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;      <span class="comment">// we can constant-evaluate the compare to see if it makes the branch be</span></div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;      <span class="comment">// taken or not.</span></div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;      <a class="code" href="classllvm_1_1Constant.html">Constant</a> *CmpLHSConst = dyn_cast&lt;Constant&gt;(V);</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;      <span class="keywordflow">if</span> (!CmpLHSConst || !<a class="code" href="namespacellvm.html#acd1cd968cb420c82d70926920fcdc7d7">llvm::is_contained</a>(<a class="code" href="namespacellvm.html#a26e2a938b431eaa6eca2beaa96410c9d">successors</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>), <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>))</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;      <span class="comment">// First collapse InstChain</span></div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1DataLayout.html">DataLayout</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a> = <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getModule()-&gt;getDataLayout();</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : <a class="code" href="namespacellvm.html#a6b0ac1fa4f05de76413c5e0ca6334035">llvm::reverse</a>(InstChain)) {</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;        CmpLHSConst = <a class="code" href="namespacellvm.html#a964455f36837281d37f2a44e2fcb4cca">ConstantFoldBinaryOpOperands</a>(</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;            <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOpcode(), CmpLHSConst, cast&lt;Constant&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(1)), <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>);</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;        <span class="keywordflow">if</span> (!CmpLHSConst)</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;      }</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;      <span class="keywordflow">if</span> (!CmpLHSConst)</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;      <span class="comment">// Now constant-evaluate the compare</span></div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;      <a class="code" href="classllvm_1_1Constant.html">Constant</a> *Result = <a class="code" href="classllvm_1_1ConstantExpr.html#afe6a25e856a1a63ffff098f05e3f26d2">ConstantExpr::getCompare</a>(CI-&gt;<a class="code" href="classllvm_1_1CmpInst.html#aa7414ba9f658ff1287d22a4b8fe81bcb">getPredicate</a>(),</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;                                                  CmpLHSConst, CmpConst, <span class="keyword">true</span>);</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;      <span class="comment">// If the result means we don&#39;t branch to the block then that block is</span></div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;      <span class="comment">// unlikely.</span></div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;      <span class="keywordflow">if</span> (Result &amp;&amp;</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;          ((Result-&gt;isZeroValue() &amp;&amp; <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a> == BI-&gt;<a class="code" href="classllvm_1_1BranchInst.html#ad97f2e60cf22f15e0cf617af52309031">getSuccessor</a>(0)) ||</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;           (Result-&gt;isOneValue() &amp;&amp; <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a> == BI-&gt;<a class="code" href="classllvm_1_1BranchInst.html#ad97f2e60cf22f15e0cf617af52309031">getSuccessor</a>(1))))</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;        UnlikelyBlocks.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;    }</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;  }</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;}</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160; </div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;std::optional&lt;uint32_t&gt;</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;BranchProbabilityInfo::getEstimatedBlockWeight(<span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;  <span class="keyword">auto</span> WeightIt = EstimatedBlockWeight.find(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;  <span class="keywordflow">if</span> (WeightIt == EstimatedBlockWeight.end())</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;    <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;  <span class="keywordflow">return</span> WeightIt-&gt;second;</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;}</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160; </div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;std::optional&lt;uint32_t&gt;</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;BranchProbabilityInfo::getEstimatedLoopWeight(<span class="keyword">const</span> LoopData &amp;L)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;  <span class="keyword">auto</span> WeightIt = EstimatedLoopWeight.<a class="code" href="classllvm_1_1DenseMapBase.html#a0c047f127ed4380a6f383d70bec4eb94">find</a>(L);</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;  <span class="keywordflow">if</span> (WeightIt == EstimatedLoopWeight.<a class="code" href="classllvm_1_1DenseMapBase.html#a65520b9c67759099e313d0f4e7b5ff9e">end</a>())</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;    <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;  <span class="keywordflow">return</span> WeightIt-&gt;second;</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;}</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160; </div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;std::optional&lt;uint32_t&gt;</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;BranchProbabilityInfo::getEstimatedEdgeWeight(<span class="keyword">const</span> LoopEdge &amp;Edge)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;  <span class="comment">// For edges entering a loop take weight of a loop rather than an individual</span></div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;  <span class="comment">// block in the loop.</span></div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;  <span class="keywordflow">return</span> isLoopEnteringEdge(Edge)</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;             ? getEstimatedLoopWeight(Edge.second.getLoopData())</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;             : getEstimatedBlockWeight(Edge.second.getBlock());</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;}</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160; </div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">class</span> IterT&gt;</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;std::optional&lt;uint32_t&gt; BranchProbabilityInfo::getMaxEstimatedEdgeWeight(</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;    <span class="keyword">const</span> LoopBlock &amp;SrcLoopBB, <a class="code" href="classllvm_1_1iterator__range.html">iterator_range&lt;IterT&gt;</a> Successors)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;uint32_t, 4&gt;</a> Weights;</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;  std::optional&lt;uint32_t&gt; MaxWeight;</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *DstBB : Successors) {</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;    <span class="keyword">const</span> LoopBlock DstLoopBB = getLoopBlock(DstBB);</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;    <span class="keyword">auto</span> Weight = getEstimatedEdgeWeight({SrcLoopBB, DstLoopBB});</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160; </div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;    <span class="keywordflow">if</span> (!Weight)</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;      <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160; </div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;    <span class="keywordflow">if</span> (!MaxWeight || *MaxWeight &lt; *Weight)</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;      MaxWeight = Weight;</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;  }</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160; </div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;  <span class="keywordflow">return</span> MaxWeight;</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;}</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160; </div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;<span class="comment">// Updates \p LoopBB&#39;s weight and returns true. If \p LoopBB has already</span></div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;<span class="comment">// an associated weight it is unchanged and false is returned.</span></div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;<span class="comment">// Please note by the algorithm the weight is not expected to change once set</span></div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;<span class="comment">// thus &#39;false&#39; status is used to track visited blocks.</span></div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;<span class="keywordtype">bool</span> BranchProbabilityInfo::updateEstimatedBlockWeight(</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;    LoopBlock &amp;LoopBB, <a class="code" href="classuint32__t.html">uint32_t</a> BBWeight,</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;    <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;BasicBlock *&gt;</a> &amp;BlockWorkList,</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;    <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;LoopBlock&gt;</a> &amp;LoopWorkList) {</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> = LoopBB.getBlock();</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160; </div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;  <span class="comment">// In general, weight is assigned to a block when it has final value and</span></div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;  <span class="comment">// can&#39;t/shouldn&#39;t be changed.  However, there are cases when a block</span></div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;  <span class="comment">// inherently has several (possibly &quot;contradicting&quot;) weights. For example,</span></div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;  <span class="comment">// &quot;unwind&quot; block may also contain &quot;cold&quot; call. In that case the first</span></div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;  <span class="comment">// set weight is favored and all consequent weights are ignored.</span></div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;  <span class="keywordflow">if</span> (!EstimatedBlockWeight.insert({BB, BBWeight}).second)</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160; </div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *PredBlock : <a class="code" href="namespacellvm.html#acb22fb04083152eee862457e42e8dc31">predecessors</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>)) {</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;    LoopBlock PredLoop = getLoopBlock(PredBlock);</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;    <span class="comment">// Add affected block/loop to a working list.</span></div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;    <span class="keywordflow">if</span> (isLoopExitingEdge({PredLoop, LoopBB})) {</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;      <span class="keywordflow">if</span> (!EstimatedLoopWeight.<a class="code" href="classllvm_1_1DenseMapBase.html#a53408c95a7bfb5443b43fb2134c3eb23">count</a>(PredLoop.getLoopData()))</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;        LoopWorkList.push_back(PredLoop);</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!EstimatedBlockWeight.count(PredBlock))</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;      BlockWorkList.push_back(PredBlock);</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;  }</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;}</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160; </div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;<span class="comment">// Starting from \p BB traverse through dominator blocks and assign \p BBWeight</span></div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;<span class="comment">// to all such blocks that are post dominated by \BB. In other words to all</span></div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;<span class="comment">// blocks that the one is executed if and only if another one is executed.</span></div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;<span class="comment">// Importantly, we skip loops here for two reasons. First weights of blocks in</span></div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;<span class="comment">// a loop should be scaled by trip count (yet possibly unknown). Second there is</span></div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;<span class="comment">// no any value in doing that because that doesn&#39;t give any additional</span></div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;<span class="comment">// information regarding distribution of probabilities inside the loop.</span></div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;<span class="comment">// Exception is loop &#39;enter&#39; and &#39;exit&#39; edges that are handled in a special way</span></div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;<span class="comment">// at calcEstimatedHeuristics.</span></div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;<span class="comment">// In addition, \p WorkList is populated with basic blocks if at leas one</span></div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;<span class="comment">// successor has updated estimated weight.</span></div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;<span class="keywordtype">void</span> BranchProbabilityInfo::propagateEstimatedBlockWeight(</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;    <span class="keyword">const</span> LoopBlock &amp;LoopBB, <a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> *DT, <a class="code" href="classllvm_1_1PostDominatorTree.html">PostDominatorTree</a> *PDT,</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;    <a class="code" href="classuint32__t.html">uint32_t</a> BBWeight, <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;BasicBlock *&gt;</a> &amp;BlockWorkList,</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;    <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;LoopBlock&gt;</a> &amp;LoopWorkList) {</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> = LoopBB.getBlock();</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span> *DTStartNode = DT-&gt;<a class="code" href="classllvm_1_1DominatorTreeBase.html#a4344e66fb61ea313a85a9e054124ac55">getNode</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span> *PDTStartNode = PDT-&gt;<a class="code" href="classllvm_1_1DominatorTreeBase.html#a4344e66fb61ea313a85a9e054124ac55">getNode</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160; </div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;  <span class="comment">// TODO: Consider propagating weight down the domination line as well.</span></div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> *DTNode = DTStartNode; DTNode != <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;       DTNode = DTNode-&gt;getIDom()) {</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;    <span class="keyword">auto</span> *DomBB = DTNode-&gt;getBlock();</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;    <span class="comment">// Consider blocks which lie on one &#39;line&#39;.</span></div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;    <span class="keywordflow">if</span> (!PDT-&gt;<a class="code" href="classllvm_1_1PostDominatorTree.html#ac74ec035b8eeaeb39cfea312fa876c75">dominates</a>(PDTStartNode, PDT-&gt;<a class="code" href="classllvm_1_1DominatorTreeBase.html#a4344e66fb61ea313a85a9e054124ac55">getNode</a>(DomBB)))</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;      <span class="comment">// If BB doesn&#39;t post dominate DomBB it will not post dominate dominators</span></div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;      <span class="comment">// of DomBB as well.</span></div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160; </div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;    LoopBlock DomLoopBB = getLoopBlock(DomBB);</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;    <span class="keyword">const</span> LoopEdge Edge{DomLoopBB, LoopBB};</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;    <span class="comment">// Don&#39;t propagate weight to blocks belonging to different loops.</span></div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;    <span class="keywordflow">if</span> (!isLoopEnteringExitingEdge(Edge)) {</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;      <span class="keywordflow">if</span> (!updateEstimatedBlockWeight(DomLoopBB, BBWeight, BlockWorkList,</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;                                      LoopWorkList))</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;        <span class="comment">// If DomBB has weight set then all it&#39;s predecessors are already</span></div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;        <span class="comment">// processed (since we propagate weight up to the top of IR each time).</span></div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (isLoopExitingEdge(Edge)) {</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;      LoopWorkList.push_back(DomLoopBB);</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;    }</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;  }</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;}</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160; </div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;std::optional&lt;uint32_t&gt;</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;BranchProbabilityInfo::getInitialEstimatedBlockWeight(<span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) {</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;  <span class="comment">// Returns true if \p BB has call marked with &quot;NoReturn&quot; attribute.</span></div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;  <span class="keyword">auto</span> hasNoReturn = [&amp;](<span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) {</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : <a class="code" href="namespacellvm.html#a6b0ac1fa4f05de76413c5e0ca6334035">reverse</a>(*<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>))</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *CI = dyn_cast&lt;CallInst&gt;(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;        <span class="keywordflow">if</span> (CI-&gt;hasFnAttr(Attribute::NoReturn))</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160; </div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;  };</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160; </div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;  <span class="comment">// Important note regarding the order of checks. They are ordered by weight</span></div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;  <span class="comment">// from lowest to highest. Doing that allows to avoid &quot;unstable&quot; results</span></div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;  <span class="comment">// when several conditions heuristics can be applied simultaneously.</span></div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;  <span class="keywordflow">if</span> (isa&lt;UnreachableInst&gt;(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getTerminator()) ||</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;      <span class="comment">// If this block is terminated by a call to</span></div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;      <span class="comment">// @llvm.experimental.deoptimize then treat it like an unreachable</span></div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;      <span class="comment">// since it is expected to practically never execute.</span></div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;      <span class="comment">// TODO: Should we actually treat as never returning call?</span></div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;      <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getTerminatingDeoptimizeCall())</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;    <span class="keywordflow">return</span> hasNoReturn(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>)</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;               ? <span class="keyword">static_cast&lt;</span><a class="code" href="classuint32__t.html">uint32_t</a><span class="keyword">&gt;</span>(<a class="code" href="BranchProbabilityInfo_8cpp.html#a0bab6cbda2c6f1e9dd352004a6b9f393a25c263e3b7486f9453d37151d62ff7d1">BlockExecWeight::NORETURN</a>)</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;               : <span class="keyword">static_cast&lt;</span><a class="code" href="classuint32__t.html">uint32_t</a><span class="keyword">&gt;</span>(<a class="code" href="BranchProbabilityInfo_8cpp.html#a0bab6cbda2c6f1e9dd352004a6b9f393a58fd3b3b1f27606728077423eb21d8d6">BlockExecWeight::UNREACHABLE</a>);</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160; </div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;  <span class="comment">// Check if the block is &#39;unwind&#39; handler of  some invoke instruction.</span></div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> *Pred : <a class="code" href="namespacellvm.html#acb22fb04083152eee862457e42e8dc31">predecessors</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>))</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;    <span class="keywordflow">if</span> (Pred)</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">const</span> <span class="keyword">auto</span> *II = dyn_cast&lt;InvokeInst&gt;(Pred-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>()))</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;        <span class="keywordflow">if</span> (II-&gt;getUnwindDest() == <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>)</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span><a class="code" href="classuint32__t.html">uint32_t</a><span class="keyword">&gt;</span>(<a class="code" href="BranchProbabilityInfo_8cpp.html#a0bab6cbda2c6f1e9dd352004a6b9f393a37b88a87188456429fa6e6c31a6d2301">BlockExecWeight::UNWIND</a>);</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160; </div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;  <span class="comment">// Check if the block contains &#39;cold&#39; call.</span></div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>)</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *CI = dyn_cast&lt;CallInst&gt;(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;      <span class="keywordflow">if</span> (CI-&gt;hasFnAttr(<a class="code" href="namespacellvm_1_1CallingConv.html#a5b166ae228ebbfdb96736d6022f3feeda94ec9273479164e4aec1d5d91b71dc85">Attribute::Cold</a>))</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span><a class="code" href="classuint32__t.html">uint32_t</a><span class="keyword">&gt;</span>(<a class="code" href="BranchProbabilityInfo_8cpp.html#a0bab6cbda2c6f1e9dd352004a6b9f393a3f7ff4daa99912d1b0c8c64340edb9fb">BlockExecWeight::COLD</a>);</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160; </div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;  <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;}</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160; </div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;<span class="comment">// Does RPO traversal over all blocks in \p F and assigns weights to</span></div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;<span class="comment">// &#39;unreachable&#39;, &#39;noreturn&#39;, &#39;cold&#39;, &#39;unwind&#39; blocks. In addition it does its</span></div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;<span class="comment">// best to propagate the weight to up/down the IR.</span></div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;<span class="keywordtype">void</span> BranchProbabilityInfo::computeEestimateBlockWeight(</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, <a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> *DT, <a class="code" href="classllvm_1_1PostDominatorTree.html">PostDominatorTree</a> *PDT) {</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;BasicBlock *, 8&gt;</a> BlockWorkList;</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;LoopBlock, 8&gt;</a> LoopWorkList;</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160; </div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;  <span class="comment">// By doing RPO we make sure that all predecessors already have weights</span></div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;  <span class="comment">// calculated before visiting theirs successors.</span></div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;  <a class="code" href="classllvm_1_1ReversePostOrderTraversal.html">ReversePostOrderTraversal&lt;const Function *&gt;</a> RPOT(&amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> : RPOT)</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> BBWeight = getInitialEstimatedBlockWeight(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>))</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;      <span class="comment">// If we were able to find estimated weight for the block set it to this</span></div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;      <span class="comment">// block and propagate up the IR.</span></div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;      propagateEstimatedBlockWeight(getLoopBlock(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>), DT, PDT, *BBWeight,</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;                                    BlockWorkList, LoopWorkList);</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160; </div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;  <span class="comment">// BlockWorklist/LoopWorkList contains blocks/loops with at least one</span></div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;  <span class="comment">// successor/exit having estimated weight. Try to propagate weight to such</span></div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;  <span class="comment">// blocks/loops from successors/exits.</span></div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;  <span class="comment">// Process loops and blocks. Order is not important.</span></div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;  <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;    <span class="keywordflow">while</span> (!LoopWorkList.empty()) {</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;      <span class="keyword">const</span> LoopBlock LoopBB = LoopWorkList.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a0c8ffe664a36e30d49c84d0aded2fe08">pop_back_val</a>();</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160; </div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;      <span class="keywordflow">if</span> (EstimatedLoopWeight.<a class="code" href="classllvm_1_1DenseMapBase.html#a53408c95a7bfb5443b43fb2134c3eb23">count</a>(LoopBB.getLoopData()))</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160; </div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;      <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;BasicBlock *, 4&gt;</a> Exits;</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;      getLoopExitBlocks(LoopBB, Exits);</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;      <span class="keyword">auto</span> LoopWeight = getMaxEstimatedEdgeWeight(</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;          LoopBB, <a class="code" href="namespacellvm.html#ad1a91b49e0c092818a0b82f6cc130a1b">make_range</a>(Exits.begin(), Exits.end()));</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160; </div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;      <span class="keywordflow">if</span> (LoopWeight) {</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;        <span class="comment">// If we never exit the loop then we can enter it once at maximum.</span></div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;        <span class="keywordflow">if</span> (LoopWeight &lt;= <span class="keyword">static_cast&lt;</span><a class="code" href="classuint32__t.html">uint32_t</a><span class="keyword">&gt;</span>(<a class="code" href="BranchProbabilityInfo_8cpp.html#a0bab6cbda2c6f1e9dd352004a6b9f393a58fd3b3b1f27606728077423eb21d8d6">BlockExecWeight::UNREACHABLE</a>))</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;          LoopWeight = <span class="keyword">static_cast&lt;</span><a class="code" href="classuint32__t.html">uint32_t</a><span class="keyword">&gt;</span>(<a class="code" href="BranchProbabilityInfo_8cpp.html#a0bab6cbda2c6f1e9dd352004a6b9f393a73be61fb26fc56377050ab1e85eab645">BlockExecWeight::LOWEST_NON_ZERO</a>);</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160; </div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;        EstimatedLoopWeight.<a class="code" href="classllvm_1_1DenseMapBase.html#a99f811d53704275b4158c62a2dd138d9">insert</a>({LoopBB.getLoopData(), *LoopWeight});</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;        <span class="comment">// Add all blocks entering the loop into working list.</span></div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;        getLoopEnterBlocks(LoopBB, BlockWorkList);</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;      }</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;    }</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160; </div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;    <span class="keywordflow">while</span> (!BlockWorkList.empty()) {</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;      <span class="comment">// We can reach here only if BlockWorkList is not empty.</span></div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> = BlockWorkList.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a0c8ffe664a36e30d49c84d0aded2fe08">pop_back_val</a>();</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;      <span class="keywordflow">if</span> (EstimatedBlockWeight.count(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>))</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160; </div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;      <span class="comment">// We take maximum over all weights of successors. In other words we take</span></div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;      <span class="comment">// weight of &quot;hot&quot; path. In theory we can probably find a better function</span></div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;      <span class="comment">// which gives higher accuracy results (comparing to &quot;maximum&quot;) but I</span></div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;      <span class="comment">// can&#39;t</span></div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;      <span class="comment">// think of any right now. And I doubt it will make any difference in</span></div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;      <span class="comment">// practice.</span></div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;      <span class="keyword">const</span> LoopBlock LoopBB = getLoopBlock(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;      <span class="keyword">auto</span> MaxWeight = getMaxEstimatedEdgeWeight(LoopBB, <a class="code" href="namespacellvm.html#a26e2a938b431eaa6eca2beaa96410c9d">successors</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>));</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160; </div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;      <span class="keywordflow">if</span> (MaxWeight)</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;        propagateEstimatedBlockWeight(LoopBB, DT, PDT, *MaxWeight,</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;                                      BlockWorkList, LoopWorkList);</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;    }</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;  } <span class="keywordflow">while</span> (!BlockWorkList.empty() || !LoopWorkList.empty());</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;}</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160; </div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;<span class="comment">// Calculate edge probabilities based on block&#39;s estimated weight.</span></div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;<span class="comment">// Note that gathered weights were not scaled for loops. Thus edges entering</span></div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;<span class="comment">// and exiting loops requires special processing.</span></div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;<span class="keywordtype">bool</span> BranchProbabilityInfo::calcEstimatedHeuristics(<span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) {</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getTerminator()-&gt;getNumSuccessors() &gt; 1 &amp;&amp;</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;         <span class="stringliteral">&quot;expected more than one successor!&quot;</span>);</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160; </div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;  <span class="keyword">const</span> LoopBlock LoopBB = getLoopBlock(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160; </div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;const BasicBlock *, 8&gt;</a> UnlikelyBlocks;</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;  <a class="code" href="classuint32__t.html">uint32_t</a> TC = <a class="code" href="BranchProbabilityInfo_8cpp.html#a205d7293fcfbe714464bceef72495dde">LBH_TAKEN_WEIGHT</a> / <a class="code" href="BranchProbabilityInfo_8cpp.html#ac6c00f8033a3bf9ab5f49143e30d8c52">LBH_NONTAKEN_WEIGHT</a>;</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;  <span class="keywordflow">if</span> (LoopBB.getLoop())</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;    <a class="code" href="BranchProbabilityInfo_8cpp.html#ade155905429b0a259a1030f418c04ad9">computeUnlikelySuccessors</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, LoopBB.getLoop(), UnlikelyBlocks);</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160; </div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;  <span class="comment">// Changed to &#39;true&#39; if at least one successor has estimated weight.</span></div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;  <span class="keywordtype">bool</span> FoundEstimatedWeight = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;uint32_t, 4&gt;</a> SuccWeights;</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;  <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> TotalWeight = 0;</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;  <span class="comment">// Go over all successors of BB and put their weights into SuccWeights.</span></div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *SuccBB : <a class="code" href="namespacellvm.html#a26e2a938b431eaa6eca2beaa96410c9d">successors</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>)) {</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;    std::optional&lt;uint32_t&gt; Weight;</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;    <span class="keyword">const</span> LoopBlock SuccLoopBB = getLoopBlock(SuccBB);</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;    <span class="keyword">const</span> LoopEdge Edge{LoopBB, SuccLoopBB};</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160; </div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;    Weight = getEstimatedEdgeWeight(Edge);</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160; </div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;    <span class="keywordflow">if</span> (isLoopExitingEdge(Edge) &amp;&amp;</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;        <span class="comment">// Avoid adjustment of ZERO weight since it should remain unchanged.</span></div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;        Weight != <span class="keyword">static_cast&lt;</span><a class="code" href="classuint32__t.html">uint32_t</a><span class="keyword">&gt;</span>(<a class="code" href="BranchProbabilityInfo_8cpp.html#a0bab6cbda2c6f1e9dd352004a6b9f393a529e9e0beb5f85d1f132917c1a09860c">BlockExecWeight::ZERO</a>)) {</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;      <span class="comment">// Scale down loop exiting weight by trip count.</span></div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;      Weight = <a class="code" href="namespacellvm.html#ab4d4bc901fedd8857f647dcc2c0d71de">std::max</a>(</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;          <span class="keyword">static_cast&lt;</span><a class="code" href="classuint32__t.html">uint32_t</a><span class="keyword">&gt;</span>(<a class="code" href="BranchProbabilityInfo_8cpp.html#a0bab6cbda2c6f1e9dd352004a6b9f393a73be61fb26fc56377050ab1e85eab645">BlockExecWeight::LOWEST_NON_ZERO</a>),</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;          Weight.value_or(<span class="keyword">static_cast&lt;</span><a class="code" href="classuint32__t.html">uint32_t</a><span class="keyword">&gt;</span>(<a class="code" href="BranchProbabilityInfo_8cpp.html#a0bab6cbda2c6f1e9dd352004a6b9f393a5b39c8b553c821e7cddc6da64b5bd2ee">BlockExecWeight::DEFAULT</a>)) /</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;              TC);</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;    }</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;    <span class="keywordtype">bool</span> IsUnlikelyEdge = LoopBB.getLoop() &amp;&amp; UnlikelyBlocks.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#af74676a3c7447be34bd2c1da76ec0c48">contains</a>(SuccBB);</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;    <span class="keywordflow">if</span> (IsUnlikelyEdge &amp;&amp;</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;        <span class="comment">// Avoid adjustment of ZERO weight since it should remain unchanged.</span></div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;        Weight != <span class="keyword">static_cast&lt;</span><a class="code" href="classuint32__t.html">uint32_t</a><span class="keyword">&gt;</span>(<a class="code" href="BranchProbabilityInfo_8cpp.html#a0bab6cbda2c6f1e9dd352004a6b9f393a529e9e0beb5f85d1f132917c1a09860c">BlockExecWeight::ZERO</a>)) {</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;      <span class="comment">// &#39;Unlikely&#39; blocks have twice lower weight.</span></div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;      Weight = <a class="code" href="namespacellvm.html#ab4d4bc901fedd8857f647dcc2c0d71de">std::max</a>(</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;          <span class="keyword">static_cast&lt;</span><a class="code" href="classuint32__t.html">uint32_t</a><span class="keyword">&gt;</span>(<a class="code" href="BranchProbabilityInfo_8cpp.html#a0bab6cbda2c6f1e9dd352004a6b9f393a73be61fb26fc56377050ab1e85eab645">BlockExecWeight::LOWEST_NON_ZERO</a>),</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;          Weight.value_or(<span class="keyword">static_cast&lt;</span><a class="code" href="classuint32__t.html">uint32_t</a><span class="keyword">&gt;</span>(<a class="code" href="BranchProbabilityInfo_8cpp.html#a0bab6cbda2c6f1e9dd352004a6b9f393a5b39c8b553c821e7cddc6da64b5bd2ee">BlockExecWeight::DEFAULT</a>)) / 2);</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;    }</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160; </div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;    <span class="keywordflow">if</span> (Weight)</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;      FoundEstimatedWeight = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160; </div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;    <span class="keyword">auto</span> WeightVal =</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;        Weight.value_or(<span class="keyword">static_cast&lt;</span><a class="code" href="classuint32__t.html">uint32_t</a><span class="keyword">&gt;</span>(<a class="code" href="BranchProbabilityInfo_8cpp.html#a0bab6cbda2c6f1e9dd352004a6b9f393a5b39c8b553c821e7cddc6da64b5bd2ee">BlockExecWeight::DEFAULT</a>));</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;    TotalWeight += WeightVal;</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;    SuccWeights.push_back(WeightVal);</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;  }</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160; </div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;  <span class="comment">// If non of blocks have estimated weight bail out.</span></div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;  <span class="comment">// If TotalWeight is 0 that means weight of each successor is 0 as well and</span></div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;  <span class="comment">// equally likely. Bail out early to not deal with devision by zero.</span></div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;  <span class="keywordflow">if</span> (!FoundEstimatedWeight || TotalWeight == 0)</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160; </div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(SuccWeights.size() == <a class="code" href="namespacellvm.html#adc72ffdd8b57df6fc04ccc49ce09b2de">succ_size</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) &amp;&amp; <span class="stringliteral">&quot;Missed successor?&quot;</span>);</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">unsigned</span> SuccCount = SuccWeights.size();</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160; </div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;  <span class="comment">// If the sum of weights does not fit in 32 bits, scale every weight down</span></div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;  <span class="comment">// accordingly.</span></div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;  <span class="keywordflow">if</span> (TotalWeight &gt; UINT32_MAX) {</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;    <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> ScalingFactor = TotalWeight / UINT32_MAX + 1;</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;    TotalWeight = 0;</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> Idx = 0; Idx &lt; SuccCount; ++Idx) {</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;      SuccWeights[Idx] /= ScalingFactor;</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;      <span class="keywordflow">if</span> (SuccWeights[Idx] == <span class="keyword">static_cast&lt;</span><a class="code" href="classuint32__t.html">uint32_t</a><span class="keyword">&gt;</span>(<a class="code" href="BranchProbabilityInfo_8cpp.html#a0bab6cbda2c6f1e9dd352004a6b9f393a529e9e0beb5f85d1f132917c1a09860c">BlockExecWeight::ZERO</a>))</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;        SuccWeights[Idx] =</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;            <span class="keyword">static_cast&lt;</span><a class="code" href="classuint32__t.html">uint32_t</a><span class="keyword">&gt;</span>(<a class="code" href="BranchProbabilityInfo_8cpp.html#a0bab6cbda2c6f1e9dd352004a6b9f393a73be61fb26fc56377050ab1e85eab645">BlockExecWeight::LOWEST_NON_ZERO</a>);</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;      TotalWeight += SuccWeights[Idx];</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;    }</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(TotalWeight &lt;= UINT32_MAX &amp;&amp; <span class="stringliteral">&quot;Total weight overflows&quot;</span>);</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;  }</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160; </div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;  <span class="comment">// Finally set probabilities to edges according to estimated block weights.</span></div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;BranchProbability, 4&gt;</a> EdgeProbabilities(</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;      SuccCount, <a class="code" href="classllvm_1_1BranchProbability.html#a76e4454abb329dee28e8f525ddd1a210">BranchProbability::getUnknown</a>());</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160; </div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> Idx = 0; Idx &lt; SuccCount; ++Idx) {</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;    EdgeProbabilities[Idx] =</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;        <a class="code" href="classllvm_1_1BranchProbability.html">BranchProbability</a>(SuccWeights[Idx], (<a class="code" href="classuint32__t.html">uint32_t</a>)TotalWeight);</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;  }</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;  <a class="code" href="classllvm_1_1BranchProbabilityInfo.html#a145edc209aa2f628c73c9cf860eeeb5c">setEdgeProbability</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, EdgeProbabilities);</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;}</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160; </div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;<span class="keywordtype">bool</span> BranchProbabilityInfo::calcZeroHeuristics(<span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>,</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;                                               <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetLibraryInfo.html">TargetLibraryInfo</a> *TLI) {</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a> *BI = dyn_cast&lt;BranchInst&gt;(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getTerminator());</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;  <span class="keywordflow">if</span> (!BI || !BI-&gt;<a class="code" href="classllvm_1_1BranchInst.html#a7e4be8b16fbd68c9045a388904044e01">isConditional</a>())</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160; </div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a> = BI-&gt;<a class="code" href="classllvm_1_1BranchInst.html#aac456a62894c9f0f8e9f06373bbf40f0">getCondition</a>();</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;  <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> *CI = dyn_cast&lt;ICmpInst&gt;(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>);</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;  <span class="keywordflow">if</span> (!CI)</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160; </div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;  <span class="keyword">auto</span> <a class="code" href="SimplifyCFG_8cpp.html#a94ec041c0e8d06efb0bd1998bcedec9f">GetConstantInt</a> = [](<a class="code" href="classllvm_1_1Value.html">Value</a> *V) {</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = dyn_cast&lt;BitCastInst&gt;(V))</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;      <span class="keywordflow">return</span> dyn_cast&lt;ConstantInt&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(0));</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;    <span class="keywordflow">return</span> dyn_cast&lt;ConstantInt&gt;(V);</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;  };</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160; </div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a> = CI-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(1);</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;  <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *CV = <a class="code" href="SimplifyCFG_8cpp.html#a94ec041c0e8d06efb0bd1998bcedec9f">GetConstantInt</a>(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>);</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;  <span class="keywordflow">if</span> (!CV)</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160; </div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;  <span class="comment">// If the LHS is the result of AND&#39;ing a value with a single bit bitmask,</span></div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;  <span class="comment">// we don&#39;t have information about probabilities.</span></div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a> = dyn_cast&lt;Instruction&gt;(CI-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0)))</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>-&gt;getOpcode() == Instruction::And)</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *AndRHS = <a class="code" href="SimplifyCFG_8cpp.html#a94ec041c0e8d06efb0bd1998bcedec9f">GetConstantInt</a>(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>-&gt;getOperand(1)))</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;        <span class="keywordflow">if</span> (AndRHS-&gt;getValue().isPowerOf2())</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160; </div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;  <span class="comment">// Check if the LHS is the return value of a library function</span></div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;  <a class="code" href="namespacellvm.html#a26a5e408fc09c5664d2bbb2d7fae154e">LibFunc</a> <a class="code" href="namespacellvm_1_1ifs.html#adfe04e1a9cc096fb571e8372debaa67ea00d0b4f2d7dcdaaef835b97cf5d1e0df">Func</a> = <a class="code" href="namespacellvm.html#a26a5e408fc09c5664d2bbb2d7fae154ea389502cf750cbd7c05b635f4c76855ee">NumLibFuncs</a>;</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;  <span class="keywordflow">if</span> (TLI)</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *Call = dyn_cast&lt;CallInst&gt;(CI-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0)))</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Function.html">Function</a> *CalledFn = <a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a463baf545246fea9718664d933ffe66f">Call</a>-&gt;getCalledFunction())</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;        TLI-&gt;<a class="code" href="classllvm_1_1TargetLibraryInfo.html#a97cfbbed8869e3582142012a071a9052">getLibFunc</a>(*CalledFn, Func);</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160; </div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;  ProbabilityTable::const_iterator Search;</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;  <span class="keywordflow">if</span> (Func == LibFunc_strcasecmp ||</div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;      Func == LibFunc_strcmp ||</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;      Func == LibFunc_strncasecmp ||</div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;      Func == LibFunc_strncmp ||</div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;      Func == LibFunc_memcmp ||</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;      Func == LibFunc_bcmp) {</div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;    Search = <a class="code" href="BranchProbabilityInfo_8cpp.html#a275618493c15713c49bc2947a10fa12d">ICmpWithLibCallTable</a>.find(CI-&gt;<a class="code" href="classllvm_1_1CmpInst.html#aa7414ba9f658ff1287d22a4b8fe81bcb">getPredicate</a>());</div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;    <span class="keywordflow">if</span> (Search == <a class="code" href="BranchProbabilityInfo_8cpp.html#a275618493c15713c49bc2947a10fa12d">ICmpWithLibCallTable</a>.end())</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (CV-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#a882d55a6aa2028e1a5ad708b275334e0">isZero</a>()) {</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;    Search = <a class="code" href="BranchProbabilityInfo_8cpp.html#a38332cb5dc3c73636aa6495114e7a5ab">ICmpWithZeroTable</a>.find(CI-&gt;<a class="code" href="classllvm_1_1CmpInst.html#aa7414ba9f658ff1287d22a4b8fe81bcb">getPredicate</a>());</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;    <span class="keywordflow">if</span> (Search == <a class="code" href="BranchProbabilityInfo_8cpp.html#a38332cb5dc3c73636aa6495114e7a5ab">ICmpWithZeroTable</a>.end())</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (CV-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#a244bfbe5aae876e56cf5e62f0f27867a">isOne</a>()) {</div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;    Search = <a class="code" href="BranchProbabilityInfo_8cpp.html#aa8c67f6b4ae26d6e248b2b213f0b9217">ICmpWithOneTable</a>.find(CI-&gt;<a class="code" href="classllvm_1_1CmpInst.html#aa7414ba9f658ff1287d22a4b8fe81bcb">getPredicate</a>());</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;    <span class="keywordflow">if</span> (Search == <a class="code" href="BranchProbabilityInfo_8cpp.html#aa8c67f6b4ae26d6e248b2b213f0b9217">ICmpWithOneTable</a>.end())</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (CV-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#a13cc1f5d3225f4ec063520a747acec4c">isMinusOne</a>()) {</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;    Search = <a class="code" href="BranchProbabilityInfo_8cpp.html#a2b8ec1580eb2f1edaeb6257712dca6b5">ICmpWithMinusOneTable</a>.find(CI-&gt;<a class="code" href="classllvm_1_1CmpInst.html#aa7414ba9f658ff1287d22a4b8fe81bcb">getPredicate</a>());</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;    <span class="keywordflow">if</span> (Search == <a class="code" href="BranchProbabilityInfo_8cpp.html#a2b8ec1580eb2f1edaeb6257712dca6b5">ICmpWithMinusOneTable</a>.end())</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;  }</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160; </div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;  <a class="code" href="classllvm_1_1BranchProbabilityInfo.html#a145edc209aa2f628c73c9cf860eeeb5c">setEdgeProbability</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, Search-&gt;second);</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;}</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160; </div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;<span class="keywordtype">bool</span> BranchProbabilityInfo::calcFloatingPointHeuristics(<span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) {</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a> *BI = dyn_cast&lt;BranchInst&gt;(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getTerminator());</div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;  <span class="keywordflow">if</span> (!BI || !BI-&gt;<a class="code" href="classllvm_1_1BranchInst.html#a7e4be8b16fbd68c9045a388904044e01">isConditional</a>())</div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160; </div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a> = BI-&gt;<a class="code" href="classllvm_1_1BranchInst.html#aac456a62894c9f0f8e9f06373bbf40f0">getCondition</a>();</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;  <a class="code" href="classllvm_1_1FCmpInst.html">FCmpInst</a> *FCmp = dyn_cast&lt;FCmpInst&gt;(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>);</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;  <span class="keywordflow">if</span> (!FCmp)</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160; </div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">ProbabilityList</a> ProbList;</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;  <span class="keywordflow">if</span> (FCmp-&gt;<a class="code" href="classllvm_1_1FCmpInst.html#a71c382a775d337f34bead2e73e33859c">isEquality</a>()) {</div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;    ProbList = !FCmp-&gt;<a class="code" href="classllvm_1_1CmpInst.html#a5ba8484cef2818d14b85640a903b2598">isTrueWhenEqual</a>() ?</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;      <span class="comment">// f1 == f2 -&gt; Unlikely</span></div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;      <a class="code" href="BranchProbabilityInfo_8cpp.html#a98934762d122e5b344bafd36c369d35c">ProbabilityList</a>({<a class="code" href="BranchProbabilityInfo_8cpp.html#a75a205911ec3ff2d9cdd4017c2efc5d2">FPTakenProb</a>, <a class="code" href="BranchProbabilityInfo_8cpp.html#a188a295bab13e344682c59d4ce619a12">FPUntakenProb</a>}) :</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;      <span class="comment">// f1 != f2 -&gt; Likely</span></div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;      <a class="code" href="BranchProbabilityInfo_8cpp.html#a98934762d122e5b344bafd36c369d35c">ProbabilityList</a>({<a class="code" href="BranchProbabilityInfo_8cpp.html#a188a295bab13e344682c59d4ce619a12">FPUntakenProb</a>, <a class="code" href="BranchProbabilityInfo_8cpp.html#a75a205911ec3ff2d9cdd4017c2efc5d2">FPTakenProb</a>});</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;    <span class="keyword">auto</span> Search = <a class="code" href="BranchProbabilityInfo_8cpp.html#ac5ac9b2a71cf00215c4cd8f7914eedba">FCmpTable</a>.find(FCmp-&gt;<a class="code" href="classllvm_1_1CmpInst.html#aa7414ba9f658ff1287d22a4b8fe81bcb">getPredicate</a>());</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;    <span class="keywordflow">if</span> (Search == <a class="code" href="BranchProbabilityInfo_8cpp.html#ac5ac9b2a71cf00215c4cd8f7914eedba">FCmpTable</a>.end())</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;    ProbList = Search-&gt;second;</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;  }</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160; </div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;  <a class="code" href="classllvm_1_1BranchProbabilityInfo.html#a145edc209aa2f628c73c9cf860eeeb5c">setEdgeProbability</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, ProbList);</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;}</div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160; </div>
<div class="line"><a name="l01058"></a><span class="lineno"><a class="line" href="classllvm_1_1BranchProbabilityInfo.html#a884b41d94b6ffea3302b48b3ab14fd58"> 1058</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1BranchProbabilityInfo.html#a884b41d94b6ffea3302b48b3ab14fd58">BranchProbabilityInfo::releaseMemory</a>() {</div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;  Probs.clear();</div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;  Handles.clear();</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;}</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160; </div>
<div class="line"><a name="l01063"></a><span class="lineno"><a class="line" href="classllvm_1_1BranchProbabilityInfo.html#a41951a9cbc849c4e0f2930f594c08847"> 1063</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1BranchProbabilityInfo.html#a41951a9cbc849c4e0f2930f594c08847">BranchProbabilityInfo::invalidate</a>(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;, <span class="keyword">const</span> <a class="code" href="classllvm_1_1PreservedAnalyses.html">PreservedAnalyses</a> &amp;PA,</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;                                       <a class="code" href="classllvm_1_1AnalysisManager_1_1Invalidator.html">FunctionAnalysisManager::Invalidator</a> &amp;) {</div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;  <span class="comment">// Check whether the analysis, all analyses on functions, or the function&#39;s</span></div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;  <span class="comment">// CFG have been preserved.</span></div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;  <span class="keyword">auto</span> PAC = PA.<a class="code" href="classllvm_1_1PreservedAnalyses.html#aa7a1b769f9c57010cc41d9c3bb9d39c6">getChecker</a>&lt;<a class="code" href="classllvm_1_1BranchProbabilityAnalysis.html">BranchProbabilityAnalysis</a>&gt;();</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;  <span class="keywordflow">return</span> !(PAC.preserved() || PAC.preservedSet&lt;<a class="code" href="classllvm_1_1AllAnalysesOn.html">AllAnalysesOn&lt;Function&gt;</a>&gt;() ||</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;           PAC.preservedSet&lt;<a class="code" href="classllvm_1_1CFGAnalyses.html">CFGAnalyses</a>&gt;());</div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;}</div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160; </div>
<div class="line"><a name="l01072"></a><span class="lineno"><a class="line" href="classllvm_1_1BranchProbabilityInfo.html#acea510110989b4372eae3d2e68fcf04d"> 1072</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1BranchProbabilityInfo.html#acea510110989b4372eae3d2e68fcf04d">BranchProbabilityInfo::print</a>(<a class="code" href="classllvm_1_1raw__ostream.html">raw_ostream</a> &amp;<a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;  <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; <span class="stringliteral">&quot;---- Branch Probabilities ----\n&quot;</span>;</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;  <span class="comment">// We print the probabilities from the last function the analysis ran over,</span></div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;  <span class="comment">// or the function it is currently running over.</span></div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(LastF &amp;&amp; <span class="stringliteral">&quot;Cannot print prior to running over a function&quot;</span>);</div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;BI : *LastF) {</div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Succ : <a class="code" href="namespacellvm.html#a26e2a938b431eaa6eca2beaa96410c9d">successors</a>(&amp;BI))</div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;      <a class="code" href="classllvm_1_1BranchProbabilityInfo.html#ae13ac2ed5c40e40fff6ace158e7c0cf3">printEdgeProbability</a>(<a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; <span class="stringliteral">&quot;  &quot;</span>, &amp;BI, Succ);</div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;  }</div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;}</div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160; </div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1BranchProbabilityInfo.html#aa2da8547348736e285afd8af9093a83d">BranchProbabilityInfo::</a></div>
<div class="line"><a name="l01084"></a><span class="lineno"><a class="line" href="classllvm_1_1BranchProbabilityInfo.html#aa2da8547348736e285afd8af9093a83d"> 1084</a></span>&#160;<a class="code" href="classllvm_1_1BranchProbabilityInfo.html#aa2da8547348736e285afd8af9093a83d">isEdgeHot</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Src, <span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Dst)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;  <span class="comment">// Hot probability is at least 4/5 = 80%</span></div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;  <span class="comment">// FIXME: Compare against a static &quot;hot&quot; BranchProbability.</span></div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1BranchProbabilityInfo.html#a46502d648608aa13cb485ed4af447d88">getEdgeProbability</a>(Src, Dst) &gt; <a class="code" href="classllvm_1_1BranchProbability.html">BranchProbability</a>(4, 5);</div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;}</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;<span class="comment">/// Get the raw edge probability for the edge. If can&#39;t find it, return a</span></div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;<span class="comment">/// default probability 1/N where N is the number of successors. Here an edge is</span></div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;<span class="comment">/// specified using PredBlock and an</span></div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;<span class="comment">/// index to the successors.</span></div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1BranchProbability.html">BranchProbability</a></div>
<div class="line"><a name="l01095"></a><span class="lineno"><a class="line" href="classllvm_1_1BranchProbabilityInfo.html#a46502d648608aa13cb485ed4af447d88"> 1095</a></span>&#160;<a class="code" href="classllvm_1_1BranchProbabilityInfo.html#a46502d648608aa13cb485ed4af447d88">BranchProbabilityInfo::getEdgeProbability</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Src,</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;                                          <span class="keywordtype">unsigned</span> IndexInSuccessors)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;  <span class="keyword">auto</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = Probs.find(std::make_pair(Src, IndexInSuccessors));</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((Probs.end() == Probs.find(std::make_pair(Src, 0))) ==</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;             (Probs.end() == <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &amp;&amp;</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;         <span class="stringliteral">&quot;Probability for I-th successor must always be defined along with the &quot;</span></div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;         <span class="stringliteral">&quot;probability for the first successor&quot;</span>);</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160; </div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != Probs.end())</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;second;</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160; </div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;  <span class="keywordflow">return</span> {1, <span class="keyword">static_cast&lt;</span><a class="code" href="classuint32__t.html">uint32_t</a><span class="keyword">&gt;</span>(<a class="code" href="namespacellvm.html#adc72ffdd8b57df6fc04ccc49ce09b2de">succ_size</a>(Src))};</div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;}</div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160; </div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;<a class="code" href="classllvm_1_1BranchProbability.html">BranchProbability</a></div>
<div class="line"><a name="l01110"></a><span class="lineno"><a class="line" href="classllvm_1_1BranchProbabilityInfo.html#a4c75ce4a52aef066547edde4b012e6e2"> 1110</a></span>&#160;<a class="code" href="classllvm_1_1BranchProbabilityInfo.html#a46502d648608aa13cb485ed4af447d88">BranchProbabilityInfo::getEdgeProbability</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Src,</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;                                          <a class="code" href="classllvm_1_1SuccIterator.html">const_succ_iterator</a> Dst)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1BranchProbabilityInfo.html#a46502d648608aa13cb485ed4af447d88">getEdgeProbability</a>(Src, Dst.getSuccessorIndex());</div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;}</div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;<span class="comment">/// Get the raw edge probability calculated for the block pair. This returns the</span></div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;<span class="comment">/// sum of all raw edge probabilities from Src to Dst.</span></div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1BranchProbability.html">BranchProbability</a></div>
<div class="line"><a name="l01118"></a><span class="lineno"><a class="line" href="classllvm_1_1BranchProbabilityInfo.html#a8b76388f3768d895c2c1029d3356481a"> 1118</a></span>&#160;<a class="code" href="classllvm_1_1BranchProbabilityInfo.html#a46502d648608aa13cb485ed4af447d88">BranchProbabilityInfo::getEdgeProbability</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Src,</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;                                          <span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Dst)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;  <span class="keywordflow">if</span> (!Probs.count(std::make_pair(Src, 0)))</div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1BranchProbability.html">BranchProbability</a>(<a class="code" href="namespacellvm.html#ab1772fd431decccb7926d484ea223db7">llvm::count</a>(<a class="code" href="namespacellvm.html#a26e2a938b431eaa6eca2beaa96410c9d">successors</a>(Src), Dst), <a class="code" href="namespacellvm.html#adc72ffdd8b57df6fc04ccc49ce09b2de">succ_size</a>(Src));</div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160; </div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;  <span class="keyword">auto</span> Prob = <a class="code" href="classllvm_1_1BranchProbability.html#afd00958cba7080048a84cccfcef55d71">BranchProbability::getZero</a>();</div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1SuccIterator.html">const_succ_iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = <a class="code" href="namespacellvm.html#a3720211f6e6389ab53734b989bfb6fce">succ_begin</a>(Src), <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = <a class="code" href="namespacellvm.html#a069c4ae2290101bde0f8d6a5074dc72b">succ_end</a>(Src); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;    <span class="keywordflow">if</span> (*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> == Dst)</div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;      Prob += Probs.find(std::make_pair(Src, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getSuccessorIndex()))-&gt;second;</div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160; </div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;  <span class="keywordflow">return</span> Prob;</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;}</div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;<span class="comment">/// Set the edge probability for all edges at once.</span></div>
<div class="line"><a name="l01132"></a><span class="lineno"><a class="line" href="classllvm_1_1BranchProbabilityInfo.html#a145edc209aa2f628c73c9cf860eeeb5c"> 1132</a></span>&#160;<span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classllvm_1_1BranchProbabilityInfo.html#a145edc209aa2f628c73c9cf860eeeb5c">BranchProbabilityInfo::setEdgeProbability</a>(</div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Src, <span class="keyword">const</span> <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;BranchProbability&gt;</a> &amp;Probs) {</div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Src-&gt;getTerminator()-&gt;getNumSuccessors() == Probs.size());</div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;  <a class="code" href="classllvm_1_1BranchProbabilityInfo.html#a0afb8520349ae7dc725ebfbb0532dbb1">eraseBlock</a>(Src); <span class="comment">// Erase stale data if any.</span></div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;  <span class="keywordflow">if</span> (Probs.size() == 0)</div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;    <span class="keywordflow">return</span>; <span class="comment">// Nothing to set.</span></div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160; </div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;  Handles.insert(BasicBlockCallbackVH(Src, <span class="keyword">this</span>));</div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;  <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> TotalNumerator = 0;</div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> SuccIdx = 0; SuccIdx &lt; Probs.size(); ++SuccIdx) {</div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;    this-&gt;Probs[std::make_pair(Src, SuccIdx)] = Probs[SuccIdx];</div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;set edge &quot;</span> &lt;&lt; Src-&gt;getName() &lt;&lt; <span class="stringliteral">&quot; -&gt; &quot;</span> &lt;&lt; SuccIdx</div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;                      &lt;&lt; <span class="stringliteral">&quot; successor probability to &quot;</span> &lt;&lt; Probs[SuccIdx]</div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;                      &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;    TotalNumerator += Probs[SuccIdx].getNumerator();</div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;  }</div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160; </div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;  <span class="comment">// Because of rounding errors the total probability cannot be checked to be</span></div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;  <span class="comment">// 1.0 exactly. That is TotalNumerator == BranchProbability::getDenominator.</span></div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;  <span class="comment">// Instead, every single probability in Probs must be as accurate as possible.</span></div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;  <span class="comment">// This results in error 1/denominator at most, thus the total absolute error</span></div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;  <span class="comment">// should be within Probs.size / BranchProbability::getDenominator.</span></div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(TotalNumerator &lt;= <a class="code" href="classllvm_1_1BranchProbability.html#a19c752227e02f7cb26fb47fdb36dc349">BranchProbability::getDenominator</a>() + Probs.size());</div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(TotalNumerator &gt;= <a class="code" href="classllvm_1_1BranchProbability.html#a19c752227e02f7cb26fb47fdb36dc349">BranchProbability::getDenominator</a>() - Probs.size());</div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;  (void)TotalNumerator;</div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;}</div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160; </div>
<div class="line"><a name="l01159"></a><span class="lineno"><a class="line" href="classllvm_1_1BranchProbabilityInfo.html#af095c82360c397be730c08feb78264e9"> 1159</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1BranchProbabilityInfo.html#af095c82360c397be730c08feb78264e9">BranchProbabilityInfo::copyEdgeProbabilities</a>(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Src,</div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;                                                  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Dst) {</div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;  <a class="code" href="classllvm_1_1BranchProbabilityInfo.html#a0afb8520349ae7dc725ebfbb0532dbb1">eraseBlock</a>(Dst); <span class="comment">// Erase stale data if any.</span></div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;  <span class="keywordtype">unsigned</span> NumSuccessors = Src-&gt;getTerminator()-&gt;getNumSuccessors();</div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(NumSuccessors == Dst-&gt;getTerminator()-&gt;getNumSuccessors());</div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;  <span class="keywordflow">if</span> (NumSuccessors == 0)</div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;    <span class="keywordflow">return</span>; <span class="comment">// Nothing to set.</span></div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;  <span class="keywordflow">if</span> (this-&gt;Probs.find(std::make_pair(Src, 0)) == <a class="code" href="lib_2Analysis_2README_8txt.html#ad5ccdce1179bbfb942a084b3005f360d">this</a>-&gt;Probs.end())</div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;    <span class="keywordflow">return</span>; <span class="comment">// No probability is set for edges from Src. Keep the same for Dst.</span></div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160; </div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;  Handles.insert(BasicBlockCallbackVH(Dst, <span class="keyword">this</span>));</div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> SuccIdx = 0; SuccIdx &lt; NumSuccessors; ++SuccIdx) {</div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;    <span class="keyword">auto</span> Prob = this-&gt;Probs[std::make_pair(Src, SuccIdx)];</div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;    this-&gt;Probs[std::make_pair(Dst, SuccIdx)] = Prob;</div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;set edge &quot;</span> &lt;&lt; Dst-&gt;getName() &lt;&lt; <span class="stringliteral">&quot; -&gt; &quot;</span> &lt;&lt; SuccIdx</div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;                      &lt;&lt; <span class="stringliteral">&quot; successor probability to &quot;</span> &lt;&lt; Prob &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;  }</div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;}</div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160; </div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;<a class="code" href="classllvm_1_1raw__ostream.html">raw_ostream</a> &amp;</div>
<div class="line"><a name="l01179"></a><span class="lineno"><a class="line" href="classllvm_1_1BranchProbabilityInfo.html#ae13ac2ed5c40e40fff6ace158e7c0cf3"> 1179</a></span>&#160;<a class="code" href="classllvm_1_1BranchProbabilityInfo.html#ae13ac2ed5c40e40fff6ace158e7c0cf3">BranchProbabilityInfo::printEdgeProbability</a>(<a class="code" href="classllvm_1_1raw__ostream.html">raw_ostream</a> &amp;<a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a>,</div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;                                            <span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Src,</div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;                                            <span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Dst)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1BranchProbability.html">BranchProbability</a> Prob = <a class="code" href="classllvm_1_1BranchProbabilityInfo.html#a46502d648608aa13cb485ed4af447d88">getEdgeProbability</a>(Src, Dst);</div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;  <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; <span class="stringliteral">&quot;edge &quot;</span> &lt;&lt; Src-&gt;getName() &lt;&lt; <span class="stringliteral">&quot; -&gt; &quot;</span> &lt;&lt; Dst-&gt;getName()</div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;     &lt;&lt; <span class="stringliteral">&quot; probability is &quot;</span> &lt;&lt; Prob</div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;     &lt;&lt; (<a class="code" href="classllvm_1_1BranchProbabilityInfo.html#aa2da8547348736e285afd8af9093a83d">isEdgeHot</a>(Src, Dst) ? <span class="stringliteral">&quot; [HOT edge]\n&quot;</span> : <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160; </div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a>;</div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;}</div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160; </div>
<div class="line"><a name="l01190"></a><span class="lineno"><a class="line" href="classllvm_1_1BranchProbabilityInfo.html#a0afb8520349ae7dc725ebfbb0532dbb1"> 1190</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1BranchProbabilityInfo.html#a0afb8520349ae7dc725ebfbb0532dbb1">BranchProbabilityInfo::eraseBlock</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) {</div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;eraseBlock &quot;</span> &lt;&lt; <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getName() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160; </div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;  <span class="comment">// Note that we cannot use successors of BB because the terminator of BB may</span></div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;  <span class="comment">// have changed when eraseBlock is called as a BasicBlockCallbackVH callback.</span></div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;  <span class="comment">// Instead we remove prob data for the block by iterating successors by their</span></div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;  <span class="comment">// indices from 0 till the last which exists. There could not be prob data for</span></div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;  <span class="comment">// a pair (BB, N) if there is no data for (BB, N-1) because the data is always</span></div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;  <span class="comment">// set for all successors from 0 to M at once by the method</span></div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;  <span class="comment">// setEdgeProbability().</span></div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;  Handles.erase(BasicBlockCallbackVH(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, <span class="keyword">this</span>));</div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0;; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;    <span class="keyword">auto</span> MapI = Probs.find(std::make_pair(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>));</div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;    <span class="keywordflow">if</span> (MapI == Probs.end()) {</div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Probs.count(std::make_pair(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> + 1)) == 0 &amp;&amp;</div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;             <span class="stringliteral">&quot;Must be no more successors&quot;</span>);</div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;    }</div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;    Probs.erase(MapI);</div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;  }</div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;}</div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160; </div>
<div class="line"><a name="l01212"></a><span class="lineno"><a class="line" href="classllvm_1_1BranchProbabilityInfo.html#a54c3911cf4abbcd272fa99a303823942"> 1212</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1BranchProbabilityInfo.html#a54c3911cf4abbcd272fa99a303823942">BranchProbabilityInfo::calculate</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, <span class="keyword">const</span> <a class="code" href="classllvm_1_1LoopInfo.html">LoopInfo</a> &amp;LoopI,</div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;                                      <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetLibraryInfo.html">TargetLibraryInfo</a> *TLI,</div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;                                      <a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> *DT,</div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;                                      <a class="code" href="classllvm_1_1PostDominatorTree.html">PostDominatorTree</a> *PDT) {</div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;---- Branch Probability Info : &quot;</span> &lt;&lt; <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getName()</div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;                    &lt;&lt; <span class="stringliteral">&quot; ----\n\n&quot;</span>);</div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;  LastF = &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>; <span class="comment">// Store the last function we ran on for printing.</span></div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;  LI = &amp;LoopI;</div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160; </div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;  SccI = std::make_unique&lt;SccInfo&gt;(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160; </div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(EstimatedBlockWeight.empty());</div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(EstimatedLoopWeight.<a class="code" href="classllvm_1_1DenseMapBase.html#a49c487a9395a6c384be8544cfb2cfccf">empty</a>());</div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160; </div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;  std::unique_ptr&lt;DominatorTree&gt; DTPtr;</div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;  std::unique_ptr&lt;PostDominatorTree&gt; PDTPtr;</div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160; </div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;  <span class="keywordflow">if</span> (!DT) {</div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;    DTPtr = std::make_unique&lt;DominatorTree&gt;(<span class="keyword">const_cast&lt;</span><a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<span class="keyword">&gt;</span>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>));</div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;    DT = DTPtr.get();</div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;  }</div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160; </div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;  <span class="keywordflow">if</span> (!PDT) {</div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;    PDTPtr = std::make_unique&lt;PostDominatorTree&gt;(<span class="keyword">const_cast&lt;</span><a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<span class="keyword">&gt;</span>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>));</div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;    PDT = PDTPtr.get();</div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;  }</div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160; </div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;  computeEestimateBlockWeight(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, DT, PDT);</div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160; </div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;  <span class="comment">// Walk the basic blocks in post-order so that we can build up state about</span></div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;  <span class="comment">// the successors of a block iteratively.</span></div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> : <a class="code" href="namespacellvm.html#aa0953557ed13c0ed48e740653e07c979">post_order</a>(&amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getEntryBlock())) {</div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Computing probabilities for &quot;</span> &lt;&lt; <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getName()</div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;                      &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;    <span class="comment">// If there is no at least two successors, no sense to set probability.</span></div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getTerminator()-&gt;getNumSuccessors() &lt; 2)</div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;    <span class="keywordflow">if</span> (calcMetadataWeights(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>))</div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;    <span class="keywordflow">if</span> (calcEstimatedHeuristics(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>))</div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;    <span class="keywordflow">if</span> (calcPointerHeuristics(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>))</div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;    <span class="keywordflow">if</span> (calcZeroHeuristics(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, TLI))</div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;    <span class="keywordflow">if</span> (calcFloatingPointHeuristics(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>))</div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;  }</div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160; </div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;  EstimatedLoopWeight.<a class="code" href="classllvm_1_1DenseMapBase.html#adf4e7878fc0b3b8dcde545178564190d">clear</a>();</div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;  EstimatedBlockWeight.clear();</div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;  SccI.reset();</div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160; </div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="BranchProbabilityInfo_8cpp.html#a0fef69381a3d5f78c54b7c557f92bc2d">PrintBranchProb</a> &amp;&amp;</div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;      (<a class="code" href="BranchProbabilityInfo_8cpp.html#a48dde12ee57ba44efa9bf102782f4c36">PrintBranchProbFuncName</a>.empty() ||</div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;       <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getName().equals(<a class="code" href="BranchProbabilityInfo_8cpp.html#a48dde12ee57ba44efa9bf102782f4c36">PrintBranchProbFuncName</a>))) {</div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;    <a class="code" href="classllvm_1_1BranchProbabilityInfo.html#acea510110989b4372eae3d2e68fcf04d">print</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>());</div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;  }</div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;}</div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160; </div>
<div class="line"><a name="l01272"></a><span class="lineno"><a class="line" href="classllvm_1_1BranchProbabilityInfoWrapperPass.html#a398c57492156d37f18c5f633ab737624"> 1272</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1BranchProbabilityInfoWrapperPass.html#a398c57492156d37f18c5f633ab737624">BranchProbabilityInfoWrapperPass::getAnalysisUsage</a>(</div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;    <a class="code" href="classllvm_1_1AnalysisUsage.html">AnalysisUsage</a> &amp;AU)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;  <span class="comment">// We require DT so it&#39;s available when LI is available. The LI updating code</span></div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;  <span class="comment">// asserts that DT is also present so if we don&#39;t make sure that we have DT</span></div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;  <span class="comment">// here, that assert will trigger.</span></div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;  AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">addRequired</a>&lt;<a class="code" href="classllvm_1_1DominatorTreeWrapperPass.html">DominatorTreeWrapperPass</a>&gt;();</div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;  AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">addRequired</a>&lt;<a class="code" href="classllvm_1_1LoopInfoWrapperPass.html">LoopInfoWrapperPass</a>&gt;();</div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;  AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">addRequired</a>&lt;<a class="code" href="classllvm_1_1TargetLibraryInfoWrapperPass.html">TargetLibraryInfoWrapperPass</a>&gt;();</div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;  AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">addRequired</a>&lt;<a class="code" href="classllvm_1_1DominatorTreeWrapperPass.html">DominatorTreeWrapperPass</a>&gt;();</div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;  AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">addRequired</a>&lt;<a class="code" href="structllvm_1_1PostDominatorTreeWrapperPass.html">PostDominatorTreeWrapperPass</a>&gt;();</div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;  AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#af22b06a6a4f9df80454071685a0d6a02">setPreservesAll</a>();</div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;}</div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160; </div>
<div class="line"><a name="l01285"></a><span class="lineno"><a class="line" href="classllvm_1_1BranchProbabilityInfoWrapperPass.html#ad32017b091b9ec5d6d88187d44ede817"> 1285</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1BranchProbabilityInfoWrapperPass.html#ad32017b091b9ec5d6d88187d44ede817">BranchProbabilityInfoWrapperPass::runOnFunction</a>(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>) {</div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LoopInfo.html">LoopInfo</a> &amp;LI = getAnalysis&lt;LoopInfoWrapperPass&gt;().getLoopInfo();</div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetLibraryInfo.html">TargetLibraryInfo</a> &amp;TLI =</div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;      getAnalysis&lt;TargetLibraryInfoWrapperPass&gt;().getTLI(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;  <a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> &amp;DT = getAnalysis&lt;DominatorTreeWrapperPass&gt;().getDomTree();</div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;  <a class="code" href="classllvm_1_1PostDominatorTree.html">PostDominatorTree</a> &amp;PDT =</div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;      getAnalysis&lt;PostDominatorTreeWrapperPass&gt;().getPostDomTree();</div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;  BPI.calculate(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, LI, &amp;TLI, &amp;DT, &amp;PDT);</div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;}</div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160; </div>
<div class="line"><a name="l01296"></a><span class="lineno"><a class="line" href="classllvm_1_1BranchProbabilityInfoWrapperPass.html#a0ccbb62e69f0b8b82adf27d9b15b3c52"> 1296</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1BranchProbabilityInfoWrapperPass.html#a0ccbb62e69f0b8b82adf27d9b15b3c52">BranchProbabilityInfoWrapperPass::releaseMemory</a>() { BPI.releaseMemory(); }</div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160; </div>
<div class="line"><a name="l01298"></a><span class="lineno"><a class="line" href="classllvm_1_1BranchProbabilityInfoWrapperPass.html#aea35b7bd5d6b626c207cf02414fa5093"> 1298</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1BranchProbabilityInfoWrapperPass.html#aea35b7bd5d6b626c207cf02414fa5093">BranchProbabilityInfoWrapperPass::print</a>(<a class="code" href="classllvm_1_1raw__ostream.html">raw_ostream</a> &amp;<a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a>,</div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;                                             <span class="keyword">const</span> <a class="code" href="classllvm_1_1Module.html">Module</a> *)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;  BPI.print(<a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a>);</div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;}</div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160; </div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;<a class="code" href="structllvm_1_1AnalysisKey.html">AnalysisKey</a> BranchProbabilityAnalysis::Key;</div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;<a class="code" href="classllvm_1_1BranchProbabilityInfo.html">BranchProbabilityInfo</a></div>
<div class="line"><a name="l01305"></a><span class="lineno"><a class="line" href="classllvm_1_1BranchProbabilityAnalysis.html#a16f8c5851cffc6f908a232089fc71de6"> 1305</a></span>&#160;<a class="code" href="classllvm_1_1BranchProbabilityAnalysis.html#a16f8c5851cffc6f908a232089fc71de6">BranchProbabilityAnalysis::run</a>(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, <a class="code" href="classllvm_1_1AnalysisManager.html">FunctionAnalysisManager</a> &amp;AM) {</div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;  <a class="code" href="classllvm_1_1BranchProbabilityInfo.html">BranchProbabilityInfo</a> BPI;</div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;  BPI.<a class="code" href="classllvm_1_1BranchProbabilityInfo.html#a54c3911cf4abbcd272fa99a303823942">calculate</a>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, AM.<a class="code" href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">getResult</a>&lt;<a class="code" href="classllvm_1_1LoopAnalysis.html">LoopAnalysis</a>&gt;(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>),</div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;                &amp;AM.<a class="code" href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">getResult</a>&lt;<a class="code" href="classllvm_1_1TargetLibraryAnalysis.html">TargetLibraryAnalysis</a>&gt;(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>),</div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;                &amp;AM.<a class="code" href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">getResult</a>&lt;<a class="code" href="classllvm_1_1DominatorTreeAnalysis.html">DominatorTreeAnalysis</a>&gt;(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>),</div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;                &amp;AM.<a class="code" href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">getResult</a>&lt;<a class="code" href="classllvm_1_1PostDominatorTreeAnalysis.html">PostDominatorTreeAnalysis</a>&gt;(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>));</div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;  <span class="keywordflow">return</span> BPI;</div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;}</div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160; </div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;<a class="code" href="classllvm_1_1PreservedAnalyses.html">PreservedAnalyses</a></div>
<div class="line"><a name="l01315"></a><span class="lineno"><a class="line" href="classllvm_1_1BranchProbabilityPrinterPass.html#af8bbfa323a4917223612dff12067110b"> 1315</a></span>&#160;<a class="code" href="classllvm_1_1BranchProbabilityPrinterPass.html#af8bbfa323a4917223612dff12067110b">BranchProbabilityPrinterPass::run</a>(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, <a class="code" href="classllvm_1_1AnalysisManager.html">FunctionAnalysisManager</a> &amp;AM) {</div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;  <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; <span class="stringliteral">&quot;Printing analysis results of BPI for function &quot;</span></div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;     &lt;&lt; <span class="stringliteral">&quot;&#39;&quot;</span> &lt;&lt; <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getName() &lt;&lt; <span class="stringliteral">&quot;&#39;:&quot;</span></div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;     &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;  AM.<a class="code" href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">getResult</a>&lt;<a class="code" href="classllvm_1_1BranchProbabilityAnalysis.html">BranchProbabilityAnalysis</a>&gt;(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>).<a class="code" href="classllvm_1_1BranchProbabilityInfo.html#acea510110989b4372eae3d2e68fcf04d">print</a>(<a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a>);</div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1PreservedAnalyses.html#a1258a1ff55557c27684010ebd7283712">PreservedAnalyses::all</a>();</div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;}</div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="aBranchProbabilityInfo_8cpp_html_a38a9f81723daa4bec614eaba36d40b85"><div class="ttname"><a href="BranchProbabilityInfo_8cpp.html#a38a9f81723daa4bec614eaba36d40b85">PH_NONTAKEN_WEIGHT</a></div><div class="ttdeci">static const uint32_t PH_NONTAKEN_WEIGHT</div><div class="ttdef"><b>Definition:</b> <a href="BranchProbabilityInfo_8cpp_source.html#l00113">BranchProbabilityInfo.cpp:113</a></div></div>
<div class="ttc" id="aclassllvm_1_1SuccIterator_html"><div class="ttname"><a href="classllvm_1_1SuccIterator.html">llvm::SuccIterator</a></div><div class="ttdef"><b>Definition:</b> <a href="IR_2CFG_8h_source.html#l00138">CFG.h:138</a></div></div>
<div class="ttc" id="aclassllvm_1_1PreservedAnalyses_html"><div class="ttname"><a href="classllvm_1_1PreservedAnalyses.html">llvm::PreservedAnalyses</a></div><div class="ttdoc">A set of analyses that are preserved following a run of a transformation pass.</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00152">PassManager.h:152</a></div></div>
<div class="ttc" id="aBranchProbabilityInfo_8cpp_html_a0bab6cbda2c6f1e9dd352004a6b9f393a58fd3b3b1f27606728077423eb21d8d6"><div class="ttname"><a href="BranchProbabilityInfo_8cpp.html#a0bab6cbda2c6f1e9dd352004a6b9f393a58fd3b3b1f27606728077423eb21d8d6">BlockExecWeight::UNREACHABLE</a></div><div class="ttdeci">@ UNREACHABLE</div><div class="ttdoc">Weight to an 'unreachable' block.</div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a3287172f2d13af086e6d66364e8c6de3"><div class="ttname"><a href="classllvm_1_1Instruction.html#a3287172f2d13af086e6d66364e8c6de3">llvm::Instruction::getNumSuccessors</a></div><div class="ttdeci">unsigned getNumSuccessors() const LLVM_READONLY</div><div class="ttdoc">Return the number of successors that this instruction has.</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8cpp_source.html#l00823">Instruction.cpp:823</a></div></div>
<div class="ttc" id="anamespacellvm_html"><div class="ttname"><a href="namespacellvm.html">llvm</a></div><div class="ttdoc">This is an optimization pass for GlobalISel generic memory operations.</div><div class="ttdef"><b>Definition:</b> <a href="AddressRanges_8h_source.html#l00018">AddressRanges.h:18</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">llvm::CmpInst::ICMP_EQ</a></div><div class="ttdeci">@ ICMP_EQ</div><div class="ttdoc">equal</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00739">InstrTypes.h:739</a></div></div>
<div class="ttc" id="anamespacellvm_html_adc72ffdd8b57df6fc04ccc49ce09b2de"><div class="ttname"><a href="namespacellvm.html#adc72ffdd8b57df6fc04ccc49ce09b2de">llvm::succ_size</a></div><div class="ttdeci">unsigned succ_size(const MachineBasicBlock *BB)</div><div class="ttdef"><b>Definition:</b> <a href="MachineSSAContext_8h_source.html#l00029">MachineSSAContext.h:29</a></div></div>
<div class="ttc" id="anamespacellvm_html_ad1a91b49e0c092818a0b82f6cc130a1b"><div class="ttname"><a href="namespacellvm.html#ad1a91b49e0c092818a0b82f6cc130a1b">llvm::make_range</a></div><div class="ttdeci">iterator_range&lt; T &gt; make_range(T x, T y)</div><div class="ttdoc">Convenience function for iterating over sub-ranges.</div><div class="ttdef"><b>Definition:</b> <a href="iterator__range_8h_source.html#l00053">iterator_range.h:53</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchProbabilityInfo_1_1SccInfo_html_adf3e2e7e5049244c18140cf77a7baf2c"><div class="ttname"><a href="classllvm_1_1BranchProbabilityInfo_1_1SccInfo.html#adf3e2e7e5049244c18140cf77a7baf2c">llvm::BranchProbabilityInfo::SccInfo::getSccExitBlocks</a></div><div class="ttdeci">void getSccExitBlocks(int SccNum, SmallVectorImpl&lt; BasicBlock * &gt; &amp;Exits) const</div><div class="ttdoc">Fills in Exits vector with all such blocks that don't belong to SCC with SccNum ID but there is an ed...</div><div class="ttdef"><b>Definition:</b> <a href="BranchProbabilityInfo_8cpp_source.html#l00259">BranchProbabilityInfo.cpp:259</a></div></div>
<div class="ttc" id="aclassllvm_1_1DataLayout_html"><div class="ttname"><a href="classllvm_1_1DataLayout.html">llvm::DataLayout</a></div><div class="ttdoc">A parsed version of the target data layout string in and methods for querying it.</div><div class="ttdef"><b>Definition:</b> <a href="DataLayout_8h_source.html#l00110">DataLayout.h:110</a></div></div>
<div class="ttc" id="aMetadata_8h_html"><div class="ttname"><a href="Metadata_8h.html">Metadata.h</a></div></div>
<div class="ttc" id="aBranchProbabilityInfo_8cpp_html_a0bab6cbda2c6f1e9dd352004a6b9f393"><div class="ttname"><a href="BranchProbabilityInfo_8cpp.html#a0bab6cbda2c6f1e9dd352004a6b9f393">BlockExecWeight</a></div><div class="ttdeci">BlockExecWeight</div><div class="ttdoc">Set of dedicated &quot;absolute&quot; execution weights for a block.</div><div class="ttdef"><b>Definition:</b> <a href="BranchProbabilityInfo_8cpp_source.html#l00198">BranchProbabilityInfo.cpp:198</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a3b996fbf8458aafffc86cb98a68d0a47"><div class="ttname"><a href="classllvm_1_1Type.html#a3b996fbf8458aafffc86cb98a68d0a47">llvm::Type::isPointerTy</a></div><div class="ttdeci">bool isPointerTy() const</div><div class="ttdoc">True if this is an instance of PointerType.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00249">Type.h:249</a></div></div>
<div class="ttc" id="aSCCIterator_8h_html"><div class="ttname"><a href="SCCIterator_8h.html">SCCIterator.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisManager_html_ab9d3d5412c20747fd0110a046604f09a"><div class="ttname"><a href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">llvm::AnalysisManager::getResult</a></div><div class="ttdeci">PassT::Result &amp; getResult(IRUnitT &amp;IR, ExtraArgTs... ExtraArgs)</div><div class="ttdoc">Get the result of an analysis pass for a given IR unit.</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00774">PassManager.h:774</a></div></div>
<div class="ttc" id="anamespacellvm_html_a069c4ae2290101bde0f8d6a5074dc72b"><div class="ttname"><a href="namespacellvm.html#a069c4ae2290101bde0f8d6a5074dc72b">llvm::succ_end</a></div><div class="ttdeci">Interval::succ_iterator succ_end(Interval *I)</div><div class="ttdef"><b>Definition:</b> <a href="Interval_8h_source.html#l00102">Interval.h:102</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html"><div class="ttname"><a href="classllvm_1_1Function.html">llvm::Function</a></div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00059">Function.h:59</a></div></div>
<div class="ttc" id="aclassllvm_1_1Loop_html"><div class="ttname"><a href="classllvm_1_1Loop.html">llvm::Loop</a></div><div class="ttdoc">Represents a single loop in the control flow graph.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00547">LoopInfo.h:547</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchProbability_html_a7be5759bf75c903d1695fa97eca6f139"><div class="ttname"><a href="classllvm_1_1BranchProbability.html#a7be5759bf75c903d1695fa97eca6f139">llvm::BranchProbability::getNumerator</a></div><div class="ttdeci">uint32_t getNumerator() const</div><div class="ttdef"><b>Definition:</b> <a href="BranchProbability_8h_source.html#l00065">BranchProbability.h:65</a></div></div>
<div class="ttc" id="aREADME-SSE_8txt_html_a63d206a063eefcdf8c318ded97b65020"><div class="ttname"><a href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a></div><div class="ttdeci">This currently compiles esp xmm0 movsd esp eax eax esp ret We should use not the dag combiner This is because dagcombine2 needs to be able to see through the X86ISD::Wrapper which DAGCombine can t really do The code for turning x load into a single vector load is target independent and should be moved to the dag combiner The code for turning x load into a vector load can only handle a direct load from a global or a direct load from the stack It should be generalized to handle any load from P</div><div class="ttdef"><b>Definition:</b> <a href="README-SSE_8txt_source.html#l00411">README-SSE.txt:411</a></div></div>
<div class="ttc" id="aPass_8h_html"><div class="ttname"><a href="Pass_8h.html">Pass.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopBase_html_a04337b572d34ea413c35dbac5d75530b"><div class="ttname"><a href="classllvm_1_1LoopBase.html#a04337b572d34ea413c35dbac5d75530b">llvm::LoopBase::contains</a></div><div class="ttdeci">bool contains(const LoopT *L) const</div><div class="ttdoc">Return true if the specified loop is contained within in this loop.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00139">LoopInfo.h:139</a></div></div>
<div class="ttc" id="aBranchProbabilityInfo_8cpp_html_a275618493c15713c49bc2947a10fa12d"><div class="ttname"><a href="BranchProbabilityInfo_8cpp.html#a275618493c15713c49bc2947a10fa12d">ICmpWithLibCallTable</a></div><div class="ttdeci">static const ProbabilityTable ICmpWithLibCallTable</div><div class="ttdoc">strcmp and similar functions return zero, negative, or positive, if the first string is equal,...</div><div class="ttdef"><b>Definition:</b> <a href="BranchProbabilityInfo_8cpp_source.html#l00165">BranchProbabilityInfo.cpp:165</a></div></div>
<div class="ttc" id="anamespacellvm_1_1ARM__MB_html_ad70272e2a9ec2a7e3a497458e1edbc85a7289f7156c17c31399fe5226bf556781"><div class="ttname"><a href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85a7289f7156c17c31399fe5226bf556781">llvm::ARM_MB::LD</a></div><div class="ttdeci">@ LD</div><div class="ttdef"><b>Definition:</b> <a href="MCTargetDesc_2ARMBaseInfo_8h_source.html#l00072">ARMBaseInfo.h:72</a></div></div>
<div class="ttc" id="aBranchProbabilityInfo_8cpp_html_aa8c67f6b4ae26d6e248b2b213f0b9217"><div class="ttname"><a href="BranchProbabilityInfo_8cpp.html#aa8c67f6b4ae26d6e248b2b213f0b9217">ICmpWithOneTable</a></div><div class="ttdeci">static const ProbabilityTable ICmpWithOneTable</div><div class="ttdoc">Integer compares with 1:</div><div class="ttdef"><b>Definition:</b> <a href="BranchProbabilityInfo_8cpp_source.html#l00153">BranchProbabilityInfo.cpp:153</a></div></div>
<div class="ttc" id="anamespacellvm_html_a26e2a938b431eaa6eca2beaa96410c9d"><div class="ttname"><a href="namespacellvm.html#a26e2a938b431eaa6eca2beaa96410c9d">llvm::successors</a></div><div class="ttdeci">auto successors(const MachineBasicBlock *BB)</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l01265">MachineBasicBlock.h:1265</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVector_html"><div class="ttname"><a href="classllvm_1_1SmallVector.html">llvm::SmallVector</a></div><div class="ttdoc">This is a 'vector' (really, a variable-sized array), optimized for the case when the array is small.</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l01199">SmallVector.h:1199</a></div></div>
<div class="ttc" id="aBranchProbabilityInfo_8cpp_html_a0bab6cbda2c6f1e9dd352004a6b9f393a3f7ff4daa99912d1b0c8c64340edb9fb"><div class="ttname"><a href="BranchProbabilityInfo_8cpp.html#a0bab6cbda2c6f1e9dd352004a6b9f393a3f7ff4daa99912d1b0c8c64340edb9fb">BlockExecWeight::COLD</a></div><div class="ttdeci">@ COLD</div><div class="ttdoc">Weight to a 'cold' block.</div></div>
<div class="ttc" id="aBranchProbabilityInfo_8cpp_html_a2c0db623aadd71d3caf0937e7c830691"><div class="ttname"><a href="BranchProbabilityInfo_8cpp.html#a2c0db623aadd71d3caf0937e7c830691">INITIALIZE_PASS_BEGIN</a></div><div class="ttdeci">INITIALIZE_PASS_BEGIN(BranchProbabilityInfoWrapperPass, &quot;branch-prob&quot;, &quot;Branch Probability Analysis&quot;, false, true) INITIALIZE_PASS_END(BranchProbabilityInfoWrapperPass</div></div>
<div class="ttc" id="aclassllvm_1_1BranchProbability_html_a6abbd0248d2ceaacdc70448659c0c2f4"><div class="ttname"><a href="classllvm_1_1BranchProbability.html#a6abbd0248d2ceaacdc70448659c0c2f4">llvm::BranchProbability::isZero</a></div><div class="ttdeci">bool isZero() const</div><div class="ttdef"><b>Definition:</b> <a href="BranchProbability_8h_source.html#l00046">BranchProbability.h:46</a></div></div>
<div class="ttc" id="aclassllvm_1_1AllAnalysesOn_html"><div class="ttname"><a href="classllvm_1_1AllAnalysesOn.html">llvm::AllAnalysesOn</a></div><div class="ttdoc">This templated class represents &quot;all analyses that operate over &lt;a particular IR unit&gt;&quot; (e....</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00090">PassManager.h:90</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">llvm::CmpInst::ICMP_NE</a></div><div class="ttdeci">@ ICMP_NE</div><div class="ttdoc">not equal</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00740">InstrTypes.h:740</a></div></div>
<div class="ttc" id="aclassllvm_1_1DominatorTree_html"><div class="ttname"><a href="classllvm_1_1DominatorTree.html">llvm::DominatorTree</a></div><div class="ttdoc">Concrete subclass of DominatorTreeBase that is used to compute a normal dominator tree.</div><div class="ttdef"><b>Definition:</b> <a href="Dominators_8h_source.html#l00166">Dominators.h:166</a></div></div>
<div class="ttc" id="anamespacellvm_1_1cl_html_a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6"><div class="ttname"><a href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">llvm::cl::Hidden</a></div><div class="ttdeci">@ Hidden</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00138">CommandLine.h:138</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78ba720a42e85f7e981afd61e28473b0000a"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba720a42e85f7e981afd61e28473b0000a">llvm::CmpInst::ICMP_SGT</a></div><div class="ttdeci">@ ICMP_SGT</div><div class="ttdoc">signed greater than</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00745">InstrTypes.h:745</a></div></div>
<div class="ttc" id="aBranchProbabilityInfo_8cpp_html_aafc5237f3585710400d8a15b43ff0e5b"><div class="ttname"><a href="BranchProbabilityInfo_8cpp.html#aafc5237f3585710400d8a15b43ff0e5b">UR_TAKEN_PROB</a></div><div class="ttdeci">static const BranchProbability UR_TAKEN_PROB</div><div class="ttdoc">Unreachable-terminating branch taken probability.</div><div class="ttdef"><b>Definition:</b> <a href="BranchProbabilityInfo_8cpp_source.html#l00108">BranchProbabilityInfo.cpp:108</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchProbability_html_afd00958cba7080048a84cccfcef55d71"><div class="ttname"><a href="classllvm_1_1BranchProbability.html#afd00958cba7080048a84cccfcef55d71">llvm::BranchProbability::getZero</a></div><div class="ttdeci">static BranchProbability getZero()</div><div class="ttdef"><b>Definition:</b> <a href="BranchProbability_8h_source.html#l00049">BranchProbability.h:49</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopInfoWrapperPass_html"><div class="ttname"><a href="classllvm_1_1LoopInfoWrapperPass.html">llvm::LoopInfoWrapperPass</a></div><div class="ttdoc">The legacy pass manager's analysis pass to compute loop information.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l01293">LoopInfo.h:1293</a></div></div>
<div class="ttc" id="aclassllvm_1_1DominatorTreeBase_html_a4344e66fb61ea313a85a9e054124ac55"><div class="ttname"><a href="classllvm_1_1DominatorTreeBase.html#a4344e66fb61ea313a85a9e054124ac55">llvm::DominatorTreeBase::getNode</a></div><div class="ttdeci">DomTreeNodeBase&lt; NodeT &gt; * getNode(const NodeT *BB) const</div><div class="ttdoc">getNode - return the (Post)DominatorTree node for the specified basic block.</div><div class="ttdef"><b>Definition:</b> <a href="GenericDomTree_8h_source.html#l00367">GenericDomTree.h:367</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseMapBase_html_a53408c95a7bfb5443b43fb2134c3eb23"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#a53408c95a7bfb5443b43fb2134c3eb23">llvm::DenseMapBase::count</a></div><div class="ttdeci">size_type count(const_arg_type_t&lt; KeyT &gt; Val) const</div><div class="ttdoc">Return 1 if the specified key is in the map, 0 otherwise.</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00145">DenseMap.h:145</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSet_html"><div class="ttname"><a href="classllvm_1_1SmallPtrSet.html">llvm::SmallPtrSet</a></div><div class="ttdoc">SmallPtrSet - This class implements a set which is optimized for holding SmallSize or less elements.</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00450">SmallPtrSet.h:450</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchProbabilityInfo_html_a884b41d94b6ffea3302b48b3ab14fd58"><div class="ttname"><a href="classllvm_1_1BranchProbabilityInfo.html#a884b41d94b6ffea3302b48b3ab14fd58">llvm::BranchProbabilityInfo::releaseMemory</a></div><div class="ttdeci">void releaseMemory()</div><div class="ttdef"><b>Definition:</b> <a href="BranchProbabilityInfo_8cpp_source.html#l01058">BranchProbabilityInfo.cpp:1058</a></div></div>
<div class="ttc" id="anamespacellvm_html_ab4d4bc901fedd8857f647dcc2c0d71de"><div class="ttname"><a href="namespacellvm.html#ab4d4bc901fedd8857f647dcc2c0d71de">llvm::max</a></div><div class="ttdeci">Expected&lt; ExpressionValue &gt; max(const ExpressionValue &amp;Lhs, const ExpressionValue &amp;Rhs)</div><div class="ttdef"><b>Definition:</b> <a href="FileCheck_8cpp_source.html#l00337">FileCheck.cpp:337</a></div></div>
<div class="ttc" id="aSTLExtras_8h_html"><div class="ttname"><a href="STLExtras_8h.html">STLExtras.h</a></div></div>
<div class="ttc" id="aX86PartialReduction_8cpp_html_a87b8bfbbe9d8f7146d7f20a5fb42efd0"><div class="ttname"><a href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a></div><div class="ttdeci">Value * RHS</div><div class="ttdef"><b>Definition:</b> <a href="X86PartialReduction_8cpp_source.html#l00076">X86PartialReduction.cpp:76</a></div></div>
<div class="ttc" id="aBranchProbabilityInfo_8cpp_html_a0bab6cbda2c6f1e9dd352004a6b9f393a25c263e3b7486f9453d37151d62ff7d1"><div class="ttname"><a href="BranchProbabilityInfo_8cpp.html#a0bab6cbda2c6f1e9dd352004a6b9f393a25c263e3b7486f9453d37151d62ff7d1">BlockExecWeight::NORETURN</a></div><div class="ttdeci">@ NORETURN</div><div class="ttdoc">Weight to a block containing non returning call.</div></div>
<div class="ttc" id="aBranchProbabilityInfo_8cpp_html_a0fef69381a3d5f78c54b7c557f92bc2d"><div class="ttname"><a href="BranchProbabilityInfo_8cpp.html#a0fef69381a3d5f78c54b7c557f92bc2d">PrintBranchProb</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; PrintBranchProb(&quot;print-bpi&quot;, cl::init(false), cl::Hidden, cl::desc(&quot;Print the branch probability info.&quot;))</div></div>
<div class="ttc" id="aConstantFolding_8h_html"><div class="ttname"><a href="ConstantFolding_8h.html">ConstantFolding.h</a></div></div>
<div class="ttc" id="aDebug_8h_html_a08efc68d15935eb8889400a46c3749ba"><div class="ttname"><a href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a></div><div class="ttdeci">#define LLVM_DEBUG(X)</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8h_source.html#l00101">Debug.h:101</a></div></div>
<div class="ttc" id="aMD5_8cpp_html_a96d73bbd7af15cb1fc38c3f4a3bd82e9"><div class="ttname"><a href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a></div><div class="ttdeci">#define F(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00055">MD5.cpp:55</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html"><div class="ttname"><a href="classllvm_1_1BasicBlock.html">llvm::BasicBlock</a></div><div class="ttdoc">LLVM Basic Block Representation.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00055">BasicBlock.h:55</a></div></div>
<div class="ttc" id="anamespacellvm_html_a7c46c742c31be54870e2038048e6b391"><div class="ttname"><a href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">llvm::dbgs</a></div><div class="ttdeci">raw_ostream &amp; dbgs()</div><div class="ttdoc">dbgs() - This returns a reference to a raw_ostream for debugging messages.</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8cpp_source.html#l00163">Debug.cpp:163</a></div></div>
<div class="ttc" id="aBranchProbabilityInfo_8cpp_html_a5de2d80fbf11d57c77cb9a621441753b"><div class="ttname"><a href="BranchProbabilityInfo_8cpp.html#a5de2d80fbf11d57c77cb9a621441753b">FPOrdUntakenProb</a></div><div class="ttdeci">static const BranchProbability FPOrdUntakenProb(FPH_UNO_WEIGHT, FPH_ORD_WEIGHT+FPH_UNO_WEIGHT)</div></div>
<div class="ttc" id="aIR_2Instruction_8h_html"><div class="ttname"><a href="IR_2Instruction_8h.html">Instruction.h</a></div></div>
<div class="ttc" id="aCommandLine_8h_html"><div class="ttname"><a href="CommandLine_8h.html">CommandLine.h</a></div></div>
<div class="ttc" id="aX86PartialReduction_8cpp_html_a9e1483f7215664a2315c53c3558d9a8d"><div class="ttname"><a href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a></div><div class="ttdeci">Value * LHS</div><div class="ttdef"><b>Definition:</b> <a href="X86PartialReduction_8cpp_source.html#l00075">X86PartialReduction.cpp:75</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantInt_html"><div class="ttname"><a href="classllvm_1_1ConstantInt.html">llvm::ConstantInt</a></div><div class="ttdoc">This is the shared class of boolean and integer constants.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00078">Constants.h:78</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchProbabilityAnalysis_html"><div class="ttname"><a href="classllvm_1_1BranchProbabilityAnalysis.html">llvm::BranchProbabilityAnalysis</a></div><div class="ttdoc">Analysis pass which computes BranchProbabilityInfo.</div><div class="ttdef"><b>Definition:</b> <a href="BranchProbabilityInfo_8h_source.html#l00413">BranchProbabilityInfo.h:413</a></div></div>
<div class="ttc" id="aBranchProbabilityInfo_8cpp_html_a2b8ec1580eb2f1edaeb6257712dca6b5"><div class="ttname"><a href="BranchProbabilityInfo_8cpp.html#a2b8ec1580eb2f1edaeb6257712dca6b5">ICmpWithMinusOneTable</a></div><div class="ttdeci">static const ProbabilityTable ICmpWithMinusOneTable</div><div class="ttdoc">Integer compares with -1:</div><div class="ttdef"><b>Definition:</b> <a href="BranchProbabilityInfo_8cpp_source.html#l00145">BranchProbabilityInfo.cpp:145</a></div></div>
<div class="ttc" id="aclassllvm_1_1PassRegistry_html_a05a729900b76c89e808c6c3094921b2f"><div class="ttname"><a href="classllvm_1_1PassRegistry.html#a05a729900b76c89e808c6c3094921b2f">llvm::PassRegistry::getPassRegistry</a></div><div class="ttdeci">static PassRegistry * getPassRegistry()</div><div class="ttdoc">getPassRegistry - Access the global registry object, which is automatically initialized at applicatio...</div><div class="ttdef"><b>Definition:</b> <a href="PassRegistry_8cpp_source.html#l00024">PassRegistry.cpp:24</a></div></div>
<div class="ttc" id="aConstants_8h_html"><div class="ttname"><a href="Constants_8h.html">Constants.h</a></div></div>
<div class="ttc" id="aPostDominators_8h_html"><div class="ttname"><a href="PostDominators_8h.html">PostDominators.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchProbability_html_a19c752227e02f7cb26fb47fdb36dc349"><div class="ttname"><a href="classllvm_1_1BranchProbability.html#a19c752227e02f7cb26fb47fdb36dc349">llvm::BranchProbability::getDenominator</a></div><div class="ttdeci">static uint32_t getDenominator()</div><div class="ttdef"><b>Definition:</b> <a href="BranchProbability_8h_source.html#l00066">BranchProbability.h:66</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchProbabilityInfoWrapperPass_html"><div class="ttname"><a href="classllvm_1_1BranchProbabilityInfoWrapperPass.html">llvm::BranchProbabilityInfoWrapperPass</a></div><div class="ttdoc">Legacy analysis pass which computes BranchProbabilityInfo.</div><div class="ttdef"><b>Definition:</b> <a href="BranchProbabilityInfo_8h_source.html#l00439">BranchProbabilityInfo.h:439</a></div></div>
<div class="ttc" id="aBuiltinGCs_8cpp_html_a6742d2e0a668baf1196ec69e158d5f15"><div class="ttname"><a href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a></div><div class="ttdeci">static GCRegistry::Add&lt; CoreCLRGC &gt; E(&quot;coreclr&quot;, &quot;CoreCLR-compatible GC&quot;)</div></div>
<div class="ttc" id="aclassllvm_1_1BranchProbabilityInfo_1_1SccInfo_html_aa45126829059172e7a55b24547167673"><div class="ttname"><a href="classllvm_1_1BranchProbabilityInfo_1_1SccInfo.html#aa45126829059172e7a55b24547167673">llvm::BranchProbabilityInfo::SccInfo::getSccEnterBlocks</a></div><div class="ttdeci">void getSccEnterBlocks(int SccNum, SmallVectorImpl&lt; BasicBlock * &gt; &amp;Enters) const</div><div class="ttdoc">Fills in Enters vector with all such blocks that don't belong to SCC with SccNum ID but there is an e...</div><div class="ttdef"><b>Definition:</b> <a href="BranchProbabilityInfo_8cpp_source.html#l00247">BranchProbabilityInfo.cpp:247</a></div></div>
<div class="ttc" id="anamespacellvm_html_a964455f36837281d37f2a44e2fcb4cca"><div class="ttname"><a href="namespacellvm.html#a964455f36837281d37f2a44e2fcb4cca">llvm::ConstantFoldBinaryOpOperands</a></div><div class="ttdeci">Constant * ConstantFoldBinaryOpOperands(unsigned Opcode, Constant *LHS, Constant *RHS, const DataLayout &amp;DL)</div><div class="ttdoc">Attempt to constant fold a binary operation with the specified operands.</div><div class="ttdef"><b>Definition:</b> <a href="ConstantFolding_8cpp_source.html#l01335">ConstantFolding.cpp:1335</a></div></div>
<div class="ttc" id="anamespacellvm_html_a26a5e408fc09c5664d2bbb2d7fae154e"><div class="ttname"><a href="namespacellvm.html#a26a5e408fc09c5664d2bbb2d7fae154e">llvm::LibFunc</a></div><div class="ttdeci">LibFunc</div><div class="ttdef"><b>Definition:</b> <a href="TargetLibraryInfo_8h_source.html#l00036">TargetLibraryInfo.h:36</a></div></div>
<div class="ttc" id="aBranchProbabilityInfo_8cpp_html_ac5ac9b2a71cf00215c4cd8f7914eedba"><div class="ttname"><a href="BranchProbabilityInfo_8cpp.html#ac5ac9b2a71cf00215c4cd8f7914eedba">FCmpTable</a></div><div class="ttdeci">static const ProbabilityTable FCmpTable</div><div class="ttdoc">Floating-Point compares:</div><div class="ttdef"><b>Definition:</b> <a href="BranchProbabilityInfo_8cpp_source.html#l00191">BranchProbabilityInfo.cpp:191</a></div></div>
<div class="ttc" id="aInstrTypes_8h_html"><div class="ttname"><a href="InstrTypes_8h.html">InstrTypes.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1FCmpInst_html"><div class="ttname"><a href="classllvm_1_1FCmpInst.html">llvm::FCmpInst</a></div><div class="ttdoc">This instruction compares its operands according to the predicate given to the constructor.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01371">Instructions.h:1371</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchProbabilityInfo_html"><div class="ttname"><a href="classllvm_1_1BranchProbabilityInfo.html">llvm::BranchProbabilityInfo</a></div><div class="ttdoc">Analysis providing branch probability information.</div><div class="ttdef"><b>Definition:</b> <a href="BranchProbabilityInfo_8h_source.html#l00113">BranchProbabilityInfo.h:113</a></div></div>
<div class="ttc" id="astructllvm_1_1PostDominatorTreeWrapperPass_html"><div class="ttname"><a href="structllvm_1_1PostDominatorTreeWrapperPass.html">llvm::PostDominatorTreeWrapperPass</a></div><div class="ttdef"><b>Definition:</b> <a href="PostDominators_8h_source.html#l00073">PostDominators.h:73</a></div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisUsage_html"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html">llvm::AnalysisUsage</a></div><div class="ttdoc">Represent the analysis usage information of a pass.</div><div class="ttdef"><b>Definition:</b> <a href="PassAnalysisSupport_8h_source.html#l00047">PassAnalysisSupport.h:47</a></div></div>
<div class="ttc" id="aclassllvm_1_1FCmpInst_html_a71c382a775d337f34bead2e73e33859c"><div class="ttname"><a href="classllvm_1_1FCmpInst.html#a71c382a775d337f34bead2e73e33859c">llvm::FCmpInst::isEquality</a></div><div class="ttdeci">static bool isEquality(Predicate Pred)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01429">Instructions.h:1429</a></div></div>
<div class="ttc" id="aTargetLibraryInfo_8h_html"><div class="ttname"><a href="TargetLibraryInfo_8h.html">TargetLibraryInfo.h</a></div></div>
<div class="ttc" id="aBranchProbabilityInfo_8cpp_html_a0bab6cbda2c6f1e9dd352004a6b9f393a5b39c8b553c821e7cddc6da64b5bd2ee"><div class="ttname"><a href="BranchProbabilityInfo_8cpp.html#a0bab6cbda2c6f1e9dd352004a6b9f393a5b39c8b553c821e7cddc6da64b5bd2ee">BlockExecWeight::DEFAULT</a></div><div class="ttdeci">@ DEFAULT</div><div class="ttdoc">Default weight is used in cases when there is no dedicated execution weight set.</div></div>
<div class="ttc" id="anamespacefalse_html"><div class="ttname"><a href="namespacefalse.html">false</a></div><div class="ttdef"><b>Definition:</b> <a href="StackSlotColoring_8cpp_source.html#l00141">StackSlotColoring.cpp:141</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchProbabilityAnalysis_html_a16f8c5851cffc6f908a232089fc71de6"><div class="ttname"><a href="classllvm_1_1BranchProbabilityAnalysis.html#a16f8c5851cffc6f908a232089fc71de6">llvm::BranchProbabilityAnalysis::run</a></div><div class="ttdeci">BranchProbabilityInfo run(Function &amp;F, FunctionAnalysisManager &amp;AM)</div><div class="ttdoc">Run the analysis pass over a function and produce BPI.</div><div class="ttdef"><b>Definition:</b> <a href="BranchProbabilityInfo_8cpp_source.html#l01305">BranchProbabilityInfo.cpp:1305</a></div></div>
<div class="ttc" id="aSimplifyCFG_8cpp_html_a94ec041c0e8d06efb0bd1998bcedec9f"><div class="ttname"><a href="SimplifyCFG_8cpp.html#a94ec041c0e8d06efb0bd1998bcedec9f">GetConstantInt</a></div><div class="ttdeci">static ConstantInt * GetConstantInt(Value *V, const DataLayout &amp;DL)</div><div class="ttdoc">Extract ConstantInt from value, looking through IntToPtr and PointerNullValue.</div><div class="ttdef"><b>Definition:</b> <a href="SimplifyCFG_8cpp_source.html#l00480">SimplifyCFG.cpp:480</a></div></div>
<div class="ttc" id="aBuiltinGCs_8cpp_html_a7abf5fb4071cb25dbce06dfb5ee3c937"><div class="ttname"><a href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a></div><div class="ttdeci">static GCRegistry::Add&lt; OcamlGC &gt; B(&quot;ocaml&quot;, &quot;ocaml 3.10-compatible GC&quot;)</div></div>
<div class="ttc" id="aclassllvm_1_1TargetLibraryInfo_html_a97cfbbed8869e3582142012a071a9052"><div class="ttname"><a href="classllvm_1_1TargetLibraryInfo.html#a97cfbbed8869e3582142012a071a9052">llvm::TargetLibraryInfo::getLibFunc</a></div><div class="ttdeci">bool getLibFunc(StringRef funcName, LibFunc &amp;F) const</div><div class="ttdoc">Searches for a particular function name.</div><div class="ttdef"><b>Definition:</b> <a href="TargetLibraryInfo_8h_source.html#l00306">TargetLibraryInfo.h:306</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78baf0159e4005258dc54f20b6fc227d19ed"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baf0159e4005258dc54f20b6fc227d19ed">llvm::CmpInst::FCMP_UNO</a></div><div class="ttdeci">@ FCMP_UNO</div><div class="ttdoc">1 0 0 0 True if unordered: isnan(X) | isnan(Y)</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00728">InstrTypes.h:728</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html"><div class="ttname"><a href="classllvm_1_1Instruction.html">llvm::Instruction</a></div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00041">Instruction.h:41</a></div></div>
<div class="ttc" id="aBranchProbabilityInfo_8cpp_html_a205d7293fcfbe714464bceef72495dde"><div class="ttname"><a href="BranchProbabilityInfo_8cpp.html#a205d7293fcfbe714464bceef72495dde">LBH_TAKEN_WEIGHT</a></div><div class="ttdeci">static const uint32_t LBH_TAKEN_WEIGHT</div><div class="ttdef"><b>Definition:</b> <a href="BranchProbabilityInfo_8cpp_source.html#l00100">BranchProbabilityInfo.cpp:100</a></div></div>
<div class="ttc" id="aclassllvm_1_1DominatorTreeWrapperPass_html"><div class="ttname"><a href="classllvm_1_1DominatorTreeWrapperPass.html">llvm::DominatorTreeWrapperPass</a></div><div class="ttdoc">Legacy analysis pass which computes a DominatorTree.</div><div class="ttdef"><b>Definition:</b> <a href="Dominators_8h_source.html#l00314">Dominators.h:314</a></div></div>
<div class="ttc" id="aclassllvm_1_1raw__ostream_html"><div class="ttname"><a href="classllvm_1_1raw__ostream.html">llvm::raw_ostream</a></div><div class="ttdoc">This class implements an extremely fast bulk output stream that can only output to a stream.</div><div class="ttdef"><b>Definition:</b> <a href="raw__ostream_8h_source.html#l00052">raw_ostream.h:52</a></div></div>
<div class="ttc" id="aBranchProbabilityInfo_8cpp_html_aceb920a7c91b520ddbda086a10a8cfde"><div class="ttname"><a href="BranchProbabilityInfo_8cpp.html#aceb920a7c91b520ddbda086a10a8cfde">FPH_ORD_WEIGHT</a></div><div class="ttdeci">static const uint32_t FPH_ORD_WEIGHT</div><div class="ttdoc">This is the probability for an ordered floating point comparison.</div><div class="ttdef"><b>Definition:</b> <a href="BranchProbabilityInfo_8cpp_source.html#l00175">BranchProbabilityInfo.cpp:175</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html_a7efd1f0c1206d95e4fe01a9b49a57b82"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#a7efd1f0c1206d95e4fe01a9b49a57b82">llvm::SmallVectorImpl::append</a></div><div class="ttdeci">void append(ItTy in_start, ItTy in_end)</div><div class="ttdoc">Add the specified range to the end of the SmallVector.</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00687">SmallVector.h:687</a></div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisManager_1_1Invalidator_html"><div class="ttname"><a href="classllvm_1_1AnalysisManager_1_1Invalidator.html">llvm::AnalysisManager::Invalidator</a></div><div class="ttdoc">API to communicate dependencies between analyses during invalidation.</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00661">PassManager.h:661</a></div></div>
<div class="ttc" id="anamespacellvm_1_1MCID_html_ab357441fcd1ea1f9b0d27c12700f6023a463baf545246fea9718664d933ffe66f"><div class="ttname"><a href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a463baf545246fea9718664d933ffe66f">llvm::MCID::Call</a></div><div class="ttdeci">@ Call</div><div class="ttdef"><b>Definition:</b> <a href="MCInstrDesc_8h_source.html#l00156">MCInstrDesc.h:156</a></div></div>
<div class="ttc" id="aBranchProbabilityInfo_8cpp_html_a2bd4799263bb66b1eaf06927f08e7b64"><div class="ttname"><a href="BranchProbabilityInfo_8cpp.html#a2bd4799263bb66b1eaf06927f08e7b64">prob</a></div><div class="ttdeci">branch prob</div><div class="ttdef"><b>Definition:</b> <a href="BranchProbabilityInfo_8cpp_source.html#l00069">BranchProbabilityInfo.cpp:69</a></div></div>
<div class="ttc" id="aBranchProbabilityInfo_8cpp_html_a33a9f0b8ca86e37a2b9c2f3a0480727b"><div class="ttname"><a href="BranchProbabilityInfo_8cpp.html#a33a9f0b8ca86e37a2b9c2f3a0480727b">FPOrdTakenProb</a></div><div class="ttdeci">static const BranchProbability FPOrdTakenProb(FPH_ORD_WEIGHT, FPH_ORD_WEIGHT+FPH_UNO_WEIGHT)</div></div>
<div class="ttc" id="aclassllvm_1_1BranchProbability_html_a76e4454abb329dee28e8f525ddd1a210"><div class="ttname"><a href="classllvm_1_1BranchProbability.html#a76e4454abb329dee28e8f525ddd1a210">llvm::BranchProbability::getUnknown</a></div><div class="ttdeci">static BranchProbability getUnknown()</div><div class="ttdef"><b>Definition:</b> <a href="BranchProbability_8h_source.html#l00051">BranchProbability.h:51</a></div></div>
<div class="ttc" id="aBranchProbabilityInfo_8cpp_html_ac81ca00b5db15ff5c054c569fadd72dd"><div class="ttname"><a href="BranchProbabilityInfo_8cpp.html#ac81ca00b5db15ff5c054c569fadd72dd">PointerTable</a></div><div class="ttdeci">static const ProbabilityTable PointerTable</div><div class="ttdoc">Pointer comparisons:</div><div class="ttdef"><b>Definition:</b> <a href="BranchProbabilityInfo_8cpp_source.html#l00123">BranchProbabilityInfo.cpp:123</a></div></div>
<div class="ttc" id="anamespacellvm_1_1CallingConv_html_a188c0836f8c3528401f1c236fd93b977"><div class="ttname"><a href="namespacellvm_1_1CallingConv.html#a188c0836f8c3528401f1c236fd93b977">llvm::CallingConv::ID</a></div><div class="ttdeci">unsigned ID</div><div class="ttdoc">LLVM IR allows to use arbitrary numbers as calling convention identifiers.</div><div class="ttdef"><b>Definition:</b> <a href="CallingConv_8h_source.html#l00024">CallingConv.h:24</a></div></div>
<div class="ttc" id="aType_8h_html"><div class="ttname"><a href="Type_8h.html">Type.h</a></div></div>
<div class="ttc" id="aBranchProbability_8h_html"><div class="ttname"><a href="BranchProbability_8h.html">BranchProbability.h</a></div></div>
<div class="ttc" id="aPassSupport_8h_html_a74ce8276b89067e806f67c45a6d92575"><div class="ttname"><a href="PassSupport_8h.html#a74ce8276b89067e806f67c45a6d92575">INITIALIZE_PASS_END</a></div><div class="ttdeci">#define INITIALIZE_PASS_END(passName, arg, name, cfg, analysis)</div><div class="ttdef"><b>Definition:</b> <a href="PassSupport_8h_source.html#l00059">PassSupport.h:59</a></div></div>
<div class="ttc" id="aIR_2CFG_8h_html"><div class="ttname"><a href="IR_2CFG_8h.html">CFG.h</a></div></div>
<div class="ttc" id="aLoopInfo_8h_html"><div class="ttname"><a href="LoopInfo_8h.html">LoopInfo.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_a71882a8257c58a4d9401db39622871a6"><div class="ttname"><a href="namespacellvm.html#a71882a8257c58a4d9401db39622871a6">llvm::scc_begin</a></div><div class="ttdeci">scc_iterator&lt; T &gt; scc_begin(const T &amp;G)</div><div class="ttdoc">Construct the begin iterator for a deduced graph type T.</div><div class="ttdef"><b>Definition:</b> <a href="SCCIterator_8h_source.html#l00232">SCCIterator.h:232</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchInst_html_aac456a62894c9f0f8e9f06373bbf40f0"><div class="ttname"><a href="classllvm_1_1BranchInst.html#aac456a62894c9f0f8e9f06373bbf40f0">llvm::BranchInst::getCondition</a></div><div class="ttdeci">Value * getCondition() const</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03220">Instructions.h:3220</a></div></div>
<div class="ttc" id="aBranchProbabilityInfo_8cpp_html_a188a295bab13e344682c59d4ce619a12"><div class="ttname"><a href="BranchProbabilityInfo_8cpp.html#a188a295bab13e344682c59d4ce619a12">FPUntakenProb</a></div><div class="ttdeci">static const BranchProbability FPUntakenProb(FPH_NONTAKEN_WEIGHT, FPH_TAKEN_WEIGHT+FPH_NONTAKEN_WEIGHT)</div></div>
<div class="ttc" id="aADT_2tmp_8txt_html_a07ed0bfaa124c15897944fe3eaa971ab"><div class="ttname"><a href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a></div><div class="ttdeci">Class for arbitrary precision integers APInt is a functional replacement for common case unsigned integer type like unsigned long or uint64_t</div><div class="ttdef"><b>Definition:</b> <a href="ADT_2tmp_8txt_source.html#l00001">tmp.txt:1</a></div></div>
<div class="ttc" id="anamespacellvm_html_acb22fb04083152eee862457e42e8dc31"><div class="ttname"><a href="namespacellvm.html#acb22fb04083152eee862457e42e8dc31">llvm::predecessors</a></div><div class="ttdeci">auto predecessors(const MachineBasicBlock *BB)</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l01266">MachineBasicBlock.h:1266</a></div></div>
<div class="ttc" id="aBranchProbabilityInfo_8cpp_html_a16edcd8b45785ee12c576c73fe3218c9"><div class="ttname"><a href="BranchProbabilityInfo_8cpp.html#a16edcd8b45785ee12c576c73fe3218c9">FPH_TAKEN_WEIGHT</a></div><div class="ttdeci">static const uint32_t FPH_TAKEN_WEIGHT</div><div class="ttdef"><b>Definition:</b> <a href="BranchProbabilityInfo_8cpp_source.html#l00171">BranchProbabilityInfo.cpp:171</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html"><div class="ttname"><a href="classllvm_1_1CmpInst.html">llvm::CmpInst</a></div><div class="ttdoc">This class is the base class for the comparison instructions.</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00708">InstrTypes.h:708</a></div></div>
<div class="ttc" id="aBranchProbabilityInfo_8cpp_html_a48dde12ee57ba44efa9bf102782f4c36"><div class="ttname"><a href="BranchProbabilityInfo_8cpp.html#a48dde12ee57ba44efa9bf102782f4c36">PrintBranchProbFuncName</a></div><div class="ttdeci">cl::opt&lt; std::string &gt; PrintBranchProbFuncName(&quot;print-bpi-func-name&quot;, cl::Hidden, cl::desc(&quot;The option to specify the name of the function &quot; &quot;whose branch probability info is printed.&quot;))</div></div>
<div class="ttc" id="aBasicBlock_8h_html"><div class="ttname"><a href="BasicBlock_8h.html">BasicBlock.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1cl_1_1opt_html"><div class="ttname"><a href="classllvm_1_1cl_1_1opt.html">llvm::cl::opt&lt; bool &gt;</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantExpr_html_afe6a25e856a1a63ffff098f05e3f26d2"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#afe6a25e856a1a63ffff098f05e3f26d2">llvm::ConstantExpr::getCompare</a></div><div class="ttdeci">static Constant * getCompare(unsigned short pred, Constant *C1, Constant *C2, bool OnlyIfReduced=false)</div><div class="ttdoc">Return an ICmp or FCmp comparison operator constant expression.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l02419">Constants.cpp:2419</a></div></div>
<div class="ttc" id="aclassllvm_1_1Constant_html"><div class="ttname"><a href="classllvm_1_1Constant.html">llvm::Constant</a></div><div class="ttdoc">This is an important base class in LLVM.</div><div class="ttdef"><b>Definition:</b> <a href="Constant_8h_source.html#l00041">Constant.h:41</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a6e5d2e18c81baaeec7dadc81a0dea993"><div class="ttname"><a href="classllvm_1_1Instruction.html#a6e5d2e18c81baaeec7dadc81a0dea993">llvm::Instruction::getSuccessor</a></div><div class="ttdeci">BasicBlock * getSuccessor(unsigned Idx) const LLVM_READONLY</div><div class="ttdoc">Return the specified successor. This instruction must be a terminator.</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8cpp_source.html#l00835">Instruction.cpp:835</a></div></div>
<div class="ttc" id="aBranchProbabilityInfo_8h_html"><div class="ttname"><a href="BranchProbabilityInfo_8h.html">BranchProbabilityInfo.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseMapBase_html_adf4e7878fc0b3b8dcde545178564190d"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#adf4e7878fc0b3b8dcde545178564190d">llvm::DenseMapBase::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00110">DenseMap.h:110</a></div></div>
<div class="ttc" id="aclassllvm_1_1ICmpInst_html"><div class="ttname"><a href="classllvm_1_1ICmpInst.html">llvm::ICmpInst</a></div><div class="ttdoc">This instruction compares its operands according to the predicate given to the constructor.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01197">Instructions.h:1197</a></div></div>
<div class="ttc" id="anamespacellvm_html_ab1772fd431decccb7926d484ea223db7"><div class="ttname"><a href="namespacellvm.html#ab1772fd431decccb7926d484ea223db7">llvm::count</a></div><div class="ttdeci">auto count(R &amp;&amp;Range, const E &amp;Element)</div><div class="ttdoc">Wrapper function around std::count to count the number of times an element Element occurs in the give...</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l01896">STLExtras.h:1896</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetLibraryInfoWrapperPass_html"><div class="ttname"><a href="classllvm_1_1TargetLibraryInfoWrapperPass.html">llvm::TargetLibraryInfoWrapperPass</a></div><div class="ttdef"><b>Definition:</b> <a href="TargetLibraryInfo_8h_source.html#l00565">TargetLibraryInfo.h:565</a></div></div>
<div class="ttc" id="aBranchProbabilityInfo_8cpp_html_aaa5928aa2f68d1c15bd7dafa3745b0fa"><div class="ttname"><a href="BranchProbabilityInfo_8cpp.html#aaa5928aa2f68d1c15bd7dafa3745b0fa">ZH_TAKEN_WEIGHT</a></div><div class="ttdeci">static const uint32_t ZH_TAKEN_WEIGHT</div><div class="ttdoc">Zero Heuristics (ZH)</div><div class="ttdef"><b>Definition:</b> <a href="BranchProbabilityInfo_8cpp_source.html#l00129">BranchProbabilityInfo.cpp:129</a></div></div>
<div class="ttc" id="aclassllvm_1_1scc__iterator_html"><div class="ttname"><a href="classllvm_1_1scc__iterator.html">llvm::scc_iterator</a></div><div class="ttdoc">Enumerate the SCCs of a directed graph in reverse topological order of the SCC DAG.</div><div class="ttdef"><b>Definition:</b> <a href="SCCIterator_8h_source.html#l00046">SCCIterator.h:46</a></div></div>
<div class="ttc" id="aSVEIntrinsicOpts_8cpp_html_a2bb87eb1bcbc74783a83ae945eb8fa36"><div class="ttname"><a href="SVEIntrinsicOpts_8cpp.html#a2bb87eb1bcbc74783a83ae945eb8fa36">INITIALIZE_PASS_DEPENDENCY</a></div><div class="ttdeci">INITIALIZE_PASS_DEPENDENCY(DominatorTreeWrapperPass)</div></div>
<div class="ttc" id="aProfDataUtils_8h_html"><div class="ttname"><a href="ProfDataUtils_8h.html">ProfDataUtils.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchProbabilityInfo_html_af095c82360c397be730c08feb78264e9"><div class="ttname"><a href="classllvm_1_1BranchProbabilityInfo.html#af095c82360c397be730c08feb78264e9">llvm::BranchProbabilityInfo::copyEdgeProbabilities</a></div><div class="ttdeci">void copyEdgeProbabilities(BasicBlock *Src, BasicBlock *Dst)</div><div class="ttdoc">Copy outgoing edge probabilities from Src to Dst.</div><div class="ttdef"><b>Definition:</b> <a href="BranchProbabilityInfo_8cpp_source.html#l01159">BranchProbabilityInfo.cpp:1159</a></div></div>
<div class="ttc" id="astructllvm_1_1AnalysisKey_html"><div class="ttname"><a href="structllvm_1_1AnalysisKey.html">llvm::AnalysisKey</a></div><div class="ttdoc">A special type used by analysis passes to provide an address that identifies that particular analysis...</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00069">PassManager.h:69</a></div></div>
<div class="ttc" id="aBranchProbabilityInfo_8cpp_html_a98934762d122e5b344bafd36c369d35c"><div class="ttname"><a href="BranchProbabilityInfo_8cpp.html#a98934762d122e5b344bafd36c369d35c">ProbabilityList</a></div><div class="ttdeci">SmallVector&lt; BranchProbability &gt; ProbabilityList</div><div class="ttdef"><b>Definition:</b> <a href="BranchProbabilityInfo_8cpp_source.html#l00119">BranchProbabilityInfo.cpp:119</a></div></div>
<div class="ttc" id="aBasicAliasAnalysis_8cpp_html_af6d5cafbdfc5313e65d990120021a3ec"><div class="ttname"><a href="BasicAliasAnalysis_8cpp.html#af6d5cafbdfc5313e65d990120021a3ec">true</a></div><div class="ttdeci">basic Basic Alias true</div><div class="ttdef"><b>Definition:</b> <a href="BasicAliasAnalysis_8cpp_source.html#l01804">BasicAliasAnalysis.cpp:1804</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopInfoBase_html_a7a7c8e0e4f836c13c015b62e18f386bd"><div class="ttname"><a href="classllvm_1_1LoopInfoBase.html#a7a7c8e0e4f836c13c015b62e18f386bd">llvm::LoopInfoBase::getLoopFor</a></div><div class="ttdeci">LoopT * getLoopFor(const BlockT *BB) const</div><div class="ttdoc">Return the inner most loop that BB lives in.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00992">LoopInfo.h:992</a></div></div>
<div class="ttc" id="aMD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00058">MD5.cpp:58</a></div></div>
<div class="ttc" id="anamespacellvm_html_a3720211f6e6389ab53734b989bfb6fce"><div class="ttname"><a href="namespacellvm.html#a3720211f6e6389ab53734b989bfb6fce">llvm::succ_begin</a></div><div class="ttdeci">Interval::succ_iterator succ_begin(Interval *I)</div><div class="ttdoc">succ_begin/succ_end - define methods so that Intervals may be used just like BasicBlocks can with the...</div><div class="ttdef"><b>Definition:</b> <a href="Interval_8h_source.html#l00099">Interval.h:99</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchProbabilityInfoWrapperPass_html_a0ccbb62e69f0b8b82adf27d9b15b3c52"><div class="ttname"><a href="classllvm_1_1BranchProbabilityInfoWrapperPass.html#a0ccbb62e69f0b8b82adf27d9b15b3c52">llvm::BranchProbabilityInfoWrapperPass::releaseMemory</a></div><div class="ttdeci">void releaseMemory() override</div><div class="ttdoc">releaseMemory() - This member can be implemented by a pass if it wants to be able to release its memo...</div><div class="ttdef"><b>Definition:</b> <a href="BranchProbabilityInfo_8cpp_source.html#l01296">BranchProbabilityInfo.cpp:1296</a></div></div>
<div class="ttc" id="anamespacellvm_1_1cl_html_a10a041239ae1870cfcc064bfaa79fb65"><div class="ttname"><a href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">llvm::cl::init</a></div><div class="ttdeci">initializer&lt; Ty &gt; init(const Ty &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00445">CommandLine.h:445</a></div></div>
<div class="ttc" id="anamespacellvm_html_acd1cd968cb420c82d70926920fcdc7d7"><div class="ttname"><a href="namespacellvm.html#acd1cd968cb420c82d70926920fcdc7d7">llvm::is_contained</a></div><div class="ttdeci">bool is_contained(R &amp;&amp;Range, const E &amp;Element)</div><div class="ttdoc">Wrapper function around std::find to detect if an element exists in a container.</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l01869">STLExtras.h:1869</a></div></div>
<div class="ttc" id="aclassllvm_1_1ICmpInst_html_abe8988eef2e6fc2baba032cb22afedd7"><div class="ttname"><a href="classllvm_1_1ICmpInst.html#abe8988eef2e6fc2baba032cb22afedd7">llvm::ICmpInst::isEquality</a></div><div class="ttdeci">static bool isEquality(Predicate P)</div><div class="ttdoc">Return true if this predicate is either EQ or NE.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01286">Instructions.h:1286</a></div></div>
<div class="ttc" id="aBranchProbabilityInfo_8cpp_html_a6b89b3ae3e1706f0f437db6621986deb"><div class="ttname"><a href="BranchProbabilityInfo_8cpp.html#a6b89b3ae3e1706f0f437db6621986deb">PH_TAKEN_WEIGHT</a></div><div class="ttdeci">static const uint32_t PH_TAKEN_WEIGHT</div><div class="ttdoc">Heuristics and lookup tables for non-loop branches: Pointer Heuristics (PH)</div><div class="ttdef"><b>Definition:</b> <a href="BranchProbabilityInfo_8cpp_source.html#l00112">BranchProbabilityInfo.cpp:112</a></div></div>
<div class="ttc" id="aBranchProbabilityInfo_8cpp_html_a38332cb5dc3c73636aa6495114e7a5ab"><div class="ttname"><a href="BranchProbabilityInfo_8cpp.html#a38332cb5dc3c73636aa6495114e7a5ab">ICmpWithZeroTable</a></div><div class="ttdeci">static const ProbabilityTable ICmpWithZeroTable</div><div class="ttdoc">Integer compares with 0:</div><div class="ttdef"><b>Definition:</b> <a href="BranchProbabilityInfo_8cpp_source.html#l00137">BranchProbabilityInfo.cpp:137</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseMapBase_html_a0c047f127ed4380a6f383d70bec4eb94"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#a0c047f127ed4380a6f383d70bec4eb94">llvm::DenseMapBase::find</a></div><div class="ttdeci">iterator find(const_arg_type_t&lt; KeyT &gt; Val)</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00150">DenseMap.h:150</a></div></div>
<div class="ttc" id="aSILowerControlFlow_8cpp_html_a4868c5d81c5ccc98c47aeab6244346a0"><div class="ttname"><a href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a></div><div class="ttdeci">assert(ImpDefSCC.getReg()==AMDGPU::SCC &amp;&amp;ImpDefSCC.isDef())</div></div>
<div class="ttc" id="aclassllvm_1_1BranchProbabilityInfo_html_a0afb8520349ae7dc725ebfbb0532dbb1"><div class="ttname"><a href="classllvm_1_1BranchProbabilityInfo.html#a0afb8520349ae7dc725ebfbb0532dbb1">llvm::BranchProbabilityInfo::eraseBlock</a></div><div class="ttdeci">void eraseBlock(const BasicBlock *BB)</div><div class="ttdoc">Forget analysis results for the given basic block.</div><div class="ttdef"><b>Definition:</b> <a href="BranchProbabilityInfo_8cpp_source.html#l01190">BranchProbabilityInfo.cpp:1190</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchProbabilityInfoWrapperPass_html_aea35b7bd5d6b626c207cf02414fa5093"><div class="ttname"><a href="classllvm_1_1BranchProbabilityInfoWrapperPass.html#aea35b7bd5d6b626c207cf02414fa5093">llvm::BranchProbabilityInfoWrapperPass::print</a></div><div class="ttdeci">void print(raw_ostream &amp;OS, const Module *M=nullptr) const override</div><div class="ttdoc">print - Print out the internal state of the pass.</div><div class="ttdef"><b>Definition:</b> <a href="BranchProbabilityInfo_8cpp_source.html#l01298">BranchProbabilityInfo.cpp:1298</a></div></div>
<div class="ttc" id="aclassllvm_1_1Module_html"><div class="ttname"><a href="classllvm_1_1Module.html">llvm::Module</a></div><div class="ttdoc">A Module instance is used to store all the information related to an LLVM module.</div><div class="ttdef"><b>Definition:</b> <a href="Module_8h_source.html#l00065">Module.h:65</a></div></div>
<div class="ttc" id="aclassllvm_1_1MDNode_html"><div class="ttname"><a href="classllvm_1_1MDNode.html">llvm::MDNode</a></div><div class="ttdoc">Metadata node.</div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8h_source.html#l00943">Metadata.h:943</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseMapBase_html_a49c487a9395a6c384be8544cfb2cfccf"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#a49c487a9395a6c384be8544cfb2cfccf">llvm::DenseMapBase::empty</a></div><div class="ttdeci">bool empty() const</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00098">DenseMap.h:98</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchProbabilityInfo_html_a46502d648608aa13cb485ed4af447d88"><div class="ttname"><a href="classllvm_1_1BranchProbabilityInfo.html#a46502d648608aa13cb485ed4af447d88">llvm::BranchProbabilityInfo::getEdgeProbability</a></div><div class="ttdeci">BranchProbability getEdgeProbability(const BasicBlock *Src, unsigned IndexInSuccessors) const</div><div class="ttdoc">Get an edge's probability, relative to other out-edges of the Src.</div><div class="ttdef"><b>Definition:</b> <a href="BranchProbabilityInfo_8cpp_source.html#l01095">BranchProbabilityInfo.cpp:1095</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchProbability_html_a56e1b2d1999aadf4c513caee1ce5275b"><div class="ttname"><a href="classllvm_1_1BranchProbability.html#a56e1b2d1999aadf4c513caee1ce5275b">llvm::BranchProbability::getOne</a></div><div class="ttdeci">static BranchProbability getOne()</div><div class="ttdef"><b>Definition:</b> <a href="BranchProbability_8h_source.html#l00050">BranchProbability.h:50</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78ba15ae464950ac676919c2f0c7aafc706c"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba15ae464950ac676919c2f0c7aafc706c">llvm::CmpInst::ICMP_SLT</a></div><div class="ttdeci">@ ICMP_SLT</div><div class="ttdoc">signed less than</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00747">InstrTypes.h:747</a></div></div>
<div class="ttc" id="aBranchProbabilityInfo_8cpp_html_adf1ae2fc274d3e7ef0204214943c017f"><div class="ttname"><a href="BranchProbabilityInfo_8cpp.html#adf1ae2fc274d3e7ef0204214943c017f">FPH_UNO_WEIGHT</a></div><div class="ttdeci">static const uint32_t FPH_UNO_WEIGHT</div><div class="ttdoc">This is the probability for an unordered floating point comparison, it means one or two of the operan...</div><div class="ttdef"><b>Definition:</b> <a href="BranchProbabilityInfo_8cpp_source.html#l00179">BranchProbabilityInfo.cpp:179</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchProbabilityInfo_html_a145edc209aa2f628c73c9cf860eeeb5c"><div class="ttname"><a href="classllvm_1_1BranchProbabilityInfo.html#a145edc209aa2f628c73c9cf860eeeb5c">llvm::BranchProbabilityInfo::setEdgeProbability</a></div><div class="ttdeci">void setEdgeProbability(const BasicBlock *Src, const SmallVectorImpl&lt; BranchProbability &gt; &amp;Probs)</div><div class="ttdoc">Set the raw probabilities for all edges from the given block.</div><div class="ttdef"><b>Definition:</b> <a href="BranchProbabilityInfo_8cpp_source.html#l01132">BranchProbabilityInfo.cpp:1132</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopInfo_html"><div class="ttname"><a href="classllvm_1_1LoopInfo.html">llvm::LoopInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l01108">LoopInfo.h:1108</a></div></div>
<div class="ttc" id="aX86PartialReduction_8cpp_html_ae0f503db91504a3f3440ab81260e4134"><div class="ttname"><a href="X86PartialReduction_8cpp.html#ae0f503db91504a3f3440ab81260e4134">Mul</a></div><div class="ttdeci">BinaryOperator * Mul</div><div class="ttdef"><b>Definition:</b> <a href="X86PartialReduction_8cpp_source.html#l00070">X86PartialReduction.cpp:70</a></div></div>
<div class="ttc" id="anamespacellvm_html_a61d13d6824ec46c31260a4fd0997eda0"><div class="ttname"><a href="namespacellvm.html#a61d13d6824ec46c31260a4fd0997eda0">llvm::any_of</a></div><div class="ttdeci">bool any_of(R &amp;&amp;range, UnaryPredicate P)</div><div class="ttdoc">Provide wrappers to std::any_of which take ranges instead of having to pass begin/end explicitly.</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l01742">STLExtras.h:1742</a></div></div>
<div class="ttc" id="aBasicBlockSections_8cpp_html_a5fd0741d696f28faf65b33f6c6af8fda"><div class="ttname"><a href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a></div><div class="ttdeci">SmallVector&lt; MachineOperand, 4 &gt; Cond</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlockSections_8cpp_source.html#l00137">BasicBlockSections.cpp:137</a></div></div>
<div class="ttc" id="alib_2Analysis_2README_8txt_html_ad5ccdce1179bbfb942a084b3005f360d"><div class="ttname"><a href="lib_2Analysis_2README_8txt.html#ad5ccdce1179bbfb942a084b3005f360d">this</a></div><div class="ttdeci">Analysis the ScalarEvolution expression for r is this</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Analysis_2README_8txt_source.html#l00008">README.txt:8</a></div></div>
<div class="ttc" id="aBranchProbabilityInfo_8cpp_html_a75a205911ec3ff2d9cdd4017c2efc5d2"><div class="ttname"><a href="BranchProbabilityInfo_8cpp.html#a75a205911ec3ff2d9cdd4017c2efc5d2">FPTakenProb</a></div><div class="ttdeci">static const BranchProbability FPTakenProb(FPH_TAKEN_WEIGHT, FPH_TAKEN_WEIGHT+FPH_NONTAKEN_WEIGHT)</div></div>
<div class="ttc" id="aclassllvm_1_1PostDominatorTree_html"><div class="ttname"><a href="classllvm_1_1PostDominatorTree.html">llvm::PostDominatorTree</a></div><div class="ttdoc">PostDominatorTree Class - Concrete subclass of DominatorTree that is used to compute the post-dominat...</div><div class="ttdef"><b>Definition:</b> <a href="PostDominators_8h_source.html#l00028">PostDominators.h:28</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_a6393a2d4fe7e10b28a0dcc35f881567b"><div class="ttname"><a href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">llvm::Value::getType</a></div><div class="ttdeci">Type * getType() const</div><div class="ttdoc">All values are typed, get the type of this value.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00255">Value.h:255</a></div></div>
<div class="ttc" id="aclassllvm_1_1CFGAnalyses_html"><div class="ttname"><a href="classllvm_1_1CFGAnalyses.html">llvm::CFGAnalyses</a></div><div class="ttdoc">Represents analyses that only rely on functions' control flow.</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00113">PassManager.h:113</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantInt_html_a882d55a6aa2028e1a5ad708b275334e0"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#a882d55a6aa2028e1a5ad708b275334e0">llvm::ConstantInt::isZero</a></div><div class="ttdeci">bool isZero() const</div><div class="ttdoc">This is just a convenience method to make client code smaller for a common code.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00193">Constants.h:193</a></div></div>
<div class="ttc" id="aclassuint32__t_html"><div class="ttname"><a href="classuint32__t.html">uint32_t</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchProbability_html"><div class="ttname"><a href="classllvm_1_1BranchProbability.html">llvm::BranchProbability</a></div><div class="ttdef"><b>Definition:</b> <a href="BranchProbability_8h_source.html#l00030">BranchProbability.h:30</a></div></div>
<div class="ttc" id="aAArch64SLSHardening_8cpp_html_ad467c4ab9119043f9b7750ab986be61a"><div class="ttname"><a href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a></div><div class="ttdeci">MachineBasicBlock MachineBasicBlock::iterator DebugLoc DL</div><div class="ttdef"><b>Definition:</b> <a href="AArch64SLSHardening_8cpp_source.html#l00076">AArch64SLSHardening.cpp:76</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantInt_html_a13cc1f5d3225f4ec063520a747acec4c"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#a13cc1f5d3225f4ec063520a747acec4c">llvm::ConstantInt::isMinusOne</a></div><div class="ttdeci">bool isMinusOne() const</div><div class="ttdoc">This function will return true iff every bit in this constant is set to true.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00205">Constants.h:205</a></div></div>
<div class="ttc" id="anamespacellvm_1_1ifs_html_adfe04e1a9cc096fb571e8372debaa67ea00d0b4f2d7dcdaaef835b97cf5d1e0df"><div class="ttname"><a href="namespacellvm_1_1ifs.html#adfe04e1a9cc096fb571e8372debaa67ea00d0b4f2d7dcdaaef835b97cf5d1e0df">llvm::ifs::IFSSymbolType::Func</a></div><div class="ttdeci">@ Func</div></div>
<div class="ttc" id="aclassllvm_1_1DenseMapBase_html_a99f811d53704275b4158c62a2dd138d9"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#a99f811d53704275b4158c62a2dd138d9">llvm::DenseMapBase::insert</a></div><div class="ttdeci">std::pair&lt; iterator, bool &gt; insert(const std::pair&lt; KeyT, ValueT &gt; &amp;KV)</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00207">DenseMap.h:207</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchProbabilityInfo_html_ae13ac2ed5c40e40fff6ace158e7c0cf3"><div class="ttname"><a href="classllvm_1_1BranchProbabilityInfo.html#ae13ac2ed5c40e40fff6ace158e7c0cf3">llvm::BranchProbabilityInfo::printEdgeProbability</a></div><div class="ttdeci">raw_ostream &amp; printEdgeProbability(raw_ostream &amp;OS, const BasicBlock *Src, const BasicBlock *Dst) const</div><div class="ttdoc">Print an edge's probability.</div><div class="ttdef"><b>Definition:</b> <a href="BranchProbabilityInfo_8cpp_source.html#l01179">BranchProbabilityInfo.cpp:1179</a></div></div>
<div class="ttc" id="aSampleProfWriter_8cpp_html_ac5f3689931c7238da06ba00cf1002c62"><div class="ttname"><a href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a></div><div class="ttdeci">raw_pwrite_stream &amp; OS</div><div class="ttdef"><b>Definition:</b> <a href="SampleProfWriter_8cpp_source.html#l00053">SampleProfWriter.cpp:53</a></div></div>
<div class="ttc" id="anamespacellvm_html_a6da87e96231847cc11de9fd5d5020d40"><div class="ttname"><a href="namespacellvm.html#a6da87e96231847cc11de9fd5d5020d40">llvm::getValidBranchWeightMDNode</a></div><div class="ttdeci">MDNode * getValidBranchWeightMDNode(const Instruction &amp;I)</div><div class="ttdoc">Get the valid branch weights metadata node.</div><div class="ttdef"><b>Definition:</b> <a href="ProfDataUtils_8cpp_source.html#l00115">ProfDataUtils.cpp:115</a></div></div>
<div class="ttc" id="aAttributes_8h_html"><div class="ttname"><a href="Attributes_8h.html">Attributes.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchProbabilityInfoWrapperPass_html_ad32017b091b9ec5d6d88187d44ede817"><div class="ttname"><a href="classllvm_1_1BranchProbabilityInfoWrapperPass.html#ad32017b091b9ec5d6d88187d44ede817">llvm::BranchProbabilityInfoWrapperPass::runOnFunction</a></div><div class="ttdeci">bool runOnFunction(Function &amp;F) override</div><div class="ttdoc">runOnFunction - Virtual method overriden by subclasses to do the per-function processing of the pass.</div><div class="ttdef"><b>Definition:</b> <a href="BranchProbabilityInfo_8cpp_source.html#l01285">BranchProbabilityInfo.cpp:1285</a></div></div>
<div class="ttc" id="aBranchProbabilityInfo_8cpp_html_a0bab6cbda2c6f1e9dd352004a6b9f393a529e9e0beb5f85d1f132917c1a09860c"><div class="ttname"><a href="BranchProbabilityInfo_8cpp.html#a0bab6cbda2c6f1e9dd352004a6b9f393a529e9e0beb5f85d1f132917c1a09860c">BlockExecWeight::ZERO</a></div><div class="ttdeci">@ ZERO</div><div class="ttdoc">Special weight used for cases with exact zero probability.</div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisUsage_html_af22b06a6a4f9df80454071685a0d6a02"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html#af22b06a6a4f9df80454071685a0d6a02">llvm::AnalysisUsage::setPreservesAll</a></div><div class="ttdeci">void setPreservesAll()</div><div class="ttdoc">Set by analyses that do not transform their input at all.</div><div class="ttdef"><b>Definition:</b> <a href="PassAnalysisSupport_8h_source.html#l00130">PassAnalysisSupport.h:130</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseMapBase_html_a65520b9c67759099e313d0f4e7b5ff9e"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#a65520b9c67759099e313d0f4e7b5ff9e">llvm::DenseMapBase::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00084">DenseMap.h:84</a></div></div>
<div class="ttc" id="aclassllvm_1_1PreservedAnalyses_html_a1258a1ff55557c27684010ebd7283712"><div class="ttname"><a href="classllvm_1_1PreservedAnalyses.html#a1258a1ff55557c27684010ebd7283712">llvm::PreservedAnalyses::all</a></div><div class="ttdeci">static PreservedAnalyses all()</div><div class="ttdoc">Construct a special preserved set that preserves all passes.</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00158">PassManager.h:158</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchProbabilityInfo_html_acea510110989b4372eae3d2e68fcf04d"><div class="ttname"><a href="classllvm_1_1BranchProbabilityInfo.html#acea510110989b4372eae3d2e68fcf04d">llvm::BranchProbabilityInfo::print</a></div><div class="ttdeci">void print(raw_ostream &amp;OS) const</div><div class="ttdef"><b>Definition:</b> <a href="BranchProbabilityInfo_8cpp_source.html#l01072">BranchProbabilityInfo.cpp:1072</a></div></div>
<div class="ttc" id="aBranchProbabilityInfo_8cpp_html_a3ad5391b0e7ea29306fee576182dabbf"><div class="ttname"><a href="BranchProbabilityInfo_8cpp.html#a3ad5391b0e7ea29306fee576182dabbf">ProbabilityTable</a></div><div class="ttdeci">std::map&lt; CmpInst::Predicate, ProbabilityList &gt; ProbabilityTable</div><div class="ttdef"><b>Definition:</b> <a href="BranchProbabilityInfo_8cpp_source.html#l00120">BranchProbabilityInfo.cpp:120</a></div></div>
<div class="ttc" id="anamespacellvm_html_a5eeaf08e96168c2cac8960f87f0ef360"><div class="ttname"><a href="namespacellvm.html#a5eeaf08e96168c2cac8960f87f0ef360">llvm::pred_end</a></div><div class="ttdeci">Interval::pred_iterator pred_end(Interval *I)</div><div class="ttdef"><b>Definition:</b> <a href="Interval_8h_source.html#l00112">Interval.h:112</a></div></div>
<div class="ttc" id="anamespacellvm_1_1MCID_html_ab357441fcd1ea1f9b0d27c12700f6023a359237c780f7c8e40645575826da8a3c"><div class="ttname"><a href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a359237c780f7c8e40645575826da8a3c">llvm::MCID::Branch</a></div><div class="ttdeci">@ Branch</div><div class="ttdef"><b>Definition:</b> <a href="MCInstrDesc_8h_source.html#l00159">MCInstrDesc.h:159</a></div></div>
<div class="ttc" id="aCasting_8h_html"><div class="ttname"><a href="Casting_8h.html">Casting.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_aa0953557ed13c0ed48e740653e07c979"><div class="ttname"><a href="namespacellvm.html#aa0953557ed13c0ed48e740653e07c979">llvm::post_order</a></div><div class="ttdeci">iterator_range&lt; po_iterator&lt; T &gt; &gt; post_order(const T &amp;G)</div><div class="ttdef"><b>Definition:</b> <a href="PostOrderIterator_8h_source.html#l00191">PostOrderIterator.h:191</a></div></div>
<div class="ttc" id="aFunction_8h_html"><div class="ttname"><a href="Function_8h.html">Function.h</a></div></div>
<div class="ttc" id="aPassManager_8h_html"><div class="ttname"><a href="PassManager_8h.html">PassManager.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetLibraryInfo_html"><div class="ttname"><a href="classllvm_1_1TargetLibraryInfo.html">llvm::TargetLibraryInfo</a></div><div class="ttdoc">Provides information about what library functions are available for the current target.</div><div class="ttdef"><b>Definition:</b> <a href="TargetLibraryInfo_8h_source.html#l00234">TargetLibraryInfo.h:234</a></div></div>
<div class="ttc" id="aBranchProbabilityInfo_8cpp_html_ade155905429b0a259a1030f418c04ad9"><div class="ttname"><a href="BranchProbabilityInfo_8cpp.html#ade155905429b0a259a1030f418c04ad9">computeUnlikelySuccessors</a></div><div class="ttdeci">static void computeUnlikelySuccessors(const BasicBlock *BB, Loop *L, SmallPtrSetImpl&lt; const BasicBlock * &gt; &amp;UnlikelyBlocks)</div><div class="ttdef"><b>Definition:</b> <a href="BranchProbabilityInfo_8cpp_source.html#l00543">BranchProbabilityInfo.cpp:543</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchProbabilityInfo_html_a54c3911cf4abbcd272fa99a303823942"><div class="ttname"><a href="classllvm_1_1BranchProbabilityInfo.html#a54c3911cf4abbcd272fa99a303823942">llvm::BranchProbabilityInfo::calculate</a></div><div class="ttdeci">void calculate(const Function &amp;F, const LoopInfo &amp;LI, const TargetLibraryInfo *TLI, DominatorTree *DT, PostDominatorTree *PDT)</div><div class="ttdef"><b>Definition:</b> <a href="BranchProbabilityInfo_8cpp_source.html#l01212">BranchProbabilityInfo.cpp:1212</a></div></div>
<div class="ttc" id="aclassllvm_1_1ReversePostOrderTraversal_html"><div class="ttname"><a href="classllvm_1_1ReversePostOrderTraversal.html">llvm::ReversePostOrderTraversal</a></div><div class="ttdef"><b>Definition:</b> <a href="PostOrderIterator_8h_source.html#l00293">PostOrderIterator.h:293</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a5ba8484cef2818d14b85640a903b2598"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a5ba8484cef2818d14b85640a903b2598">llvm::CmpInst::isTrueWhenEqual</a></div><div class="ttdeci">bool isTrueWhenEqual() const</div><div class="ttdoc">This is just a convenience.</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l01006">InstrTypes.h:1006</a></div></div>
<div class="ttc" id="aBranchProbabilityInfo_8cpp_html_aadf81261b3ac34f57dc2d663bd8c2f4d"><div class="ttname"><a href="BranchProbabilityInfo_8cpp.html#aadf81261b3ac34f57dc2d663bd8c2f4d">FPH_NONTAKEN_WEIGHT</a></div><div class="ttdeci">static const uint32_t FPH_NONTAKEN_WEIGHT</div><div class="ttdef"><b>Definition:</b> <a href="BranchProbabilityInfo_8cpp_source.html#l00172">BranchProbabilityInfo.cpp:172</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchProbability_html_a286629cb3167717b736d06f88c8f4817"><div class="ttname"><a href="classllvm_1_1BranchProbability.html#a286629cb3167717b736d06f88c8f4817">llvm::BranchProbability::getRaw</a></div><div class="ttdeci">static BranchProbability getRaw(uint32_t N)</div><div class="ttdef"><b>Definition:</b> <a href="BranchProbability_8h_source.html#l00054">BranchProbability.h:54</a></div></div>
<div class="ttc" id="anamespacellvm_html_a7e108932dc3da5294aed99a353aac9c4"><div class="ttname"><a href="namespacellvm.html#a7e108932dc3da5294aed99a353aac9c4">llvm::pred_begin</a></div><div class="ttdeci">Interval::pred_iterator pred_begin(Interval *I)</div><div class="ttdoc">pred_begin/pred_end - define methods so that Intervals may be used just like BasicBlocks can with the...</div><div class="ttdef"><b>Definition:</b> <a href="Interval_8h_source.html#l00109">Interval.h:109</a></div></div>
<div class="ttc" id="aclassllvm_1_1DominatorTreeAnalysis_html"><div class="ttname"><a href="classllvm_1_1DominatorTreeAnalysis.html">llvm::DominatorTreeAnalysis</a></div><div class="ttdoc">Analysis pass which computes a DominatorTree.</div><div class="ttdef"><b>Definition:</b> <a href="Dominators_8h_source.html#l00279">Dominators.h:279</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchProbabilityInfo_html_aa2da8547348736e285afd8af9093a83d"><div class="ttname"><a href="classllvm_1_1BranchProbabilityInfo.html#aa2da8547348736e285afd8af9093a83d">llvm::BranchProbabilityInfo::isEdgeHot</a></div><div class="ttdeci">bool isEdgeHot(const BasicBlock *Src, const BasicBlock *Dst) const</div><div class="ttdoc">Test if an edge is hot relative to other out-edges of the Src.</div><div class="ttdef"><b>Definition:</b> <a href="BranchProbabilityInfo_8cpp_source.html#l01084">BranchProbabilityInfo.cpp:1084</a></div></div>
<div class="ttc" id="aInstructions_8h_html"><div class="ttname"><a href="Instructions_8h.html">Instructions.h</a></div></div>
<div class="ttc" id="aPostOrderIterator_8h_html"><div class="ttname"><a href="PostOrderIterator_8h.html">PostOrderIterator.h</a></div></div>
<div class="ttc" id="aBranchProbabilityInfo_8cpp_html_a5be5ee158531203bf7471424e2ea4866"><div class="ttname"><a href="BranchProbabilityInfo_8cpp.html#a5be5ee158531203bf7471424e2ea4866">ZeroTakenProb</a></div><div class="ttdeci">static const BranchProbability ZeroTakenProb(ZH_TAKEN_WEIGHT, ZH_TAKEN_WEIGHT+ZH_NONTAKEN_WEIGHT)</div></div>
<div class="ttc" id="aBranchProbabilityInfo_8cpp_html_a44f69d9faa72e970316989f65d054c59"><div class="ttname"><a href="BranchProbabilityInfo_8cpp.html#a44f69d9faa72e970316989f65d054c59">PtrTakenProb</a></div><div class="ttdeci">static const BranchProbability PtrTakenProb(PH_TAKEN_WEIGHT, PH_TAKEN_WEIGHT+PH_NONTAKEN_WEIGHT)</div></div>
<div class="ttc" id="aSmallVector_8h_html"><div class="ttname"><a href="SmallVector_8h.html">SmallVector.h</a></div></div>
<div class="ttc" id="aDominators_8h_html"><div class="ttname"><a href="Dominators_8h.html">Dominators.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html_a0c8ffe664a36e30d49c84d0aded2fe08"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#a0c8ffe664a36e30d49c84d0aded2fe08">llvm::SmallVectorImpl::pop_back_val</a></div><div class="ttdeci">T pop_back_val()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00677">SmallVector.h:677</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_aa7414ba9f658ff1287d22a4b8fe81bcb"><div class="ttname"><a href="classllvm_1_1CmpInst.html#aa7414ba9f658ff1287d22a4b8fe81bcb">llvm::CmpInst::getPredicate</a></div><div class="ttdeci">Predicate getPredicate() const</div><div class="ttdoc">Return the predicate for this instruction.</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00808">InstrTypes.h:808</a></div></div>
<div class="ttc" id="anamespacellvm_html_a46454b887dd0e0d87ac9c2fe3e0253d3"><div class="ttname"><a href="namespacellvm.html#a46454b887dd0e0d87ac9c2fe3e0253d3">llvm::initializeBranchProbabilityInfoWrapperPassPass</a></div><div class="ttdeci">void initializeBranchProbabilityInfoWrapperPassPass(PassRegistry &amp;)</div></div>
<div class="ttc" id="aclassllvm_1_1iterator__range_html"><div class="ttname"><a href="classllvm_1_1iterator__range.html">llvm::iterator_range</a></div><div class="ttdoc">A range adaptor for a pair of iterators.</div><div class="ttdef"><b>Definition:</b> <a href="iterator__range_8h_source.html#l00030">iterator_range.h:30</a></div></div>
<div class="ttc" id="anamespacellvm_1_1WebAssembly_html_a9ebf832762357f1668dbc7fd07668de4"><div class="ttname"><a href="namespacellvm_1_1WebAssembly.html#a9ebf832762357f1668dbc7fd07668de4">llvm::WebAssembly::BlockType</a></div><div class="ttdeci">BlockType</div><div class="ttdoc">Used as immediate MachineOperands for block signatures.</div><div class="ttdef"><b>Definition:</b> <a href="WebAssemblyTypeUtilities_8h_source.html#l00030">WebAssemblyTypeUtilities.h:30</a></div></div>
<div class="ttc" id="aclassllvm_1_1PHINode_html"><div class="ttname"><a href="classllvm_1_1PHINode.html">llvm::PHINode</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02708">Instructions.h:2708</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a8de021e28a3c04c9216ad8decf104f02"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">llvm::BasicBlock::getTerminator</a></div><div class="ttdeci">const Instruction * getTerminator() const LLVM_READONLY</div><div class="ttdoc">Returns the terminator instruction if the block is well formed or null if the block is not well forme...</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00127">BasicBlock.h:127</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchProbabilityInfoWrapperPass_html_a702dc2b869d1d2dc906729f781e68479"><div class="ttname"><a href="classllvm_1_1BranchProbabilityInfoWrapperPass.html#a702dc2b869d1d2dc906729f781e68479">llvm::BranchProbabilityInfoWrapperPass::ID</a></div><div class="ttdeci">static char ID</div><div class="ttdef"><b>Definition:</b> <a href="BranchProbabilityInfo_8h_source.html#l00443">BranchProbabilityInfo.h:443</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html">llvm::SmallVectorImpl&lt; BasicBlock * &gt;</a></div></div>
<div class="ttc" id="anamespacellvm_html_a6b0ac1fa4f05de76413c5e0ca6334035"><div class="ttname"><a href="namespacellvm.html#a6b0ac1fa4f05de76413c5e0ca6334035">llvm::reverse</a></div><div class="ttdeci">auto reverse(ContainerTy &amp;&amp;C)</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l00484">STLExtras.h:484</a></div></div>
<div class="ttc" id="anamespacellvm_html_a26a5e408fc09c5664d2bbb2d7fae154ea389502cf750cbd7c05b635f4c76855ee"><div class="ttname"><a href="namespacellvm.html#a26a5e408fc09c5664d2bbb2d7fae154ea389502cf750cbd7c05b635f4c76855ee">llvm::NumLibFuncs</a></div><div class="ttdeci">@ NumLibFuncs</div><div class="ttdef"><b>Definition:</b> <a href="TargetLibraryInfo_8h_source.html#l00040">TargetLibraryInfo.h:40</a></div></div>
<div class="ttc" id="aBranchProbabilityInfo_8cpp_html_a2486cb22b39b4593d78671702f062b81"><div class="ttname"><a href="BranchProbabilityInfo_8cpp.html#a2486cb22b39b4593d78671702f062b81">ZH_NONTAKEN_WEIGHT</a></div><div class="ttdeci">static const uint32_t ZH_NONTAKEN_WEIGHT</div><div class="ttdef"><b>Definition:</b> <a href="BranchProbabilityInfo_8cpp_source.html#l00130">BranchProbabilityInfo.cpp:130</a></div></div>
<div class="ttc" id="aBranchProbabilityInfo_8cpp_html_a0bab6cbda2c6f1e9dd352004a6b9f393a73be61fb26fc56377050ab1e85eab645"><div class="ttname"><a href="BranchProbabilityInfo_8cpp.html#a0bab6cbda2c6f1e9dd352004a6b9f393a73be61fb26fc56377050ab1e85eab645">BlockExecWeight::LOWEST_NON_ZERO</a></div><div class="ttdeci">@ LOWEST_NON_ZERO</div><div class="ttdoc">Minimal possible non zero weight.</div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSetImpl_html"><div class="ttname"><a href="classllvm_1_1SmallPtrSetImpl.html">llvm::SmallPtrSetImpl&lt; const BasicBlock * &gt;</a></div></div>
<div class="ttc" id="aclassllvm_1_1PreservedAnalyses_html_aa7a1b769f9c57010cc41d9c3bb9d39c6"><div class="ttname"><a href="classllvm_1_1PreservedAnalyses.html#aa7a1b769f9c57010cc41d9c3bb9d39c6">llvm::PreservedAnalyses::getChecker</a></div><div class="ttdeci">PreservedAnalysisChecker getChecker() const</div><div class="ttdoc">Build a checker for this PreservedAnalyses and the specified analysis type.</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00310">PassManager.h:310</a></div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisManager_html"><div class="ttname"><a href="classllvm_1_1AnalysisManager.html">llvm::AnalysisManager</a></div><div class="ttdoc">A container for analyses that lazily runs them and caches their results.</div><div class="ttdef"><b>Definition:</b> <a href="InstructionSimplify_8h_source.html#l00042">InstructionSimplify.h:42</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchProbabilityInfo_html_a41951a9cbc849c4e0f2930f594c08847"><div class="ttname"><a href="classllvm_1_1BranchProbabilityInfo.html#a41951a9cbc849c4e0f2930f594c08847">llvm::BranchProbabilityInfo::invalidate</a></div><div class="ttdeci">bool invalidate(Function &amp;, const PreservedAnalyses &amp;PA, FunctionAnalysisManager::Invalidator &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="BranchProbabilityInfo_8cpp_source.html#l01063">BranchProbabilityInfo.cpp:1063</a></div></div>
<div class="ttc" id="aclassllvm_1_1FunctionPass_html"><div class="ttname"><a href="classllvm_1_1FunctionPass.html">llvm::FunctionPass</a></div><div class="ttdoc">FunctionPass class - This class is used to implement most global optimizations.</div><div class="ttdef"><b>Definition:</b> <a href="Pass_8h_source.html#l00308">Pass.h:308</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchProbabilityInfoWrapperPass_html_a398c57492156d37f18c5f633ab737624"><div class="ttname"><a href="classllvm_1_1BranchProbabilityInfoWrapperPass.html#a398c57492156d37f18c5f633ab737624">llvm::BranchProbabilityInfoWrapperPass::getAnalysisUsage</a></div><div class="ttdeci">void getAnalysisUsage(AnalysisUsage &amp;AU) const override</div><div class="ttdoc">getAnalysisUsage - This function should be overriden by passes that need analysis information to do t...</div><div class="ttdef"><b>Definition:</b> <a href="BranchProbabilityInfo_8cpp_source.html#l01272">BranchProbabilityInfo.cpp:1272</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallInst_html"><div class="ttname"><a href="classllvm_1_1CallInst.html">llvm::CallInst</a></div><div class="ttdoc">This class represents a function call, abstracting a target machine's calling convention.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01485">Instructions.h:1485</a></div></div>
<div class="ttc" id="aBranchProbabilityInfo_8cpp_html_a0bab6cbda2c6f1e9dd352004a6b9f393a37b88a87188456429fa6e6c31a6d2301"><div class="ttname"><a href="BranchProbabilityInfo_8cpp.html#a0bab6cbda2c6f1e9dd352004a6b9f393a37b88a87188456429fa6e6c31a6d2301">BlockExecWeight::UNWIND</a></div><div class="ttdeci">@ UNWIND</div><div class="ttdoc">Weight to 'unwind' block of an invoke instruction.</div></div>
<div class="ttc" id="aclassllvm_1_1ConstantInt_html_a244bfbe5aae876e56cf5e62f0f27867a"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#a244bfbe5aae876e56cf5e62f0f27867a">llvm::ConstantInt::isOne</a></div><div class="ttdeci">bool isOne() const</div><div class="ttdoc">This is just a convenience method to make client code smaller for a common case.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00199">Constants.h:199</a></div></div>
<div class="ttc" id="anamespacellvm_html_ac19cbbc4935a23e1d44f65e1eaba6b1d"><div class="ttname"><a href="namespacellvm.html#ac19cbbc4935a23e1d44f65e1eaba6b1d">llvm::extractBranchWeights</a></div><div class="ttdeci">bool extractBranchWeights(const MDNode *ProfileData, SmallVectorImpl&lt; uint32_t &gt; &amp;Weights)</div><div class="ttdoc">Extract branch weights from MD_prof metadata.</div><div class="ttdef"><b>Definition:</b> <a href="ProfDataUtils_8cpp_source.html#l00122">ProfDataUtils.cpp:122</a></div></div>
<div class="ttc" id="alib_2CodeGen_2README_8txt_html_a09776db24cf586ec9f1e18f3bae14099"><div class="ttname"><a href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a></div><div class="ttdeci">Common register allocation spilling lr str ldr sxth r3 ldr mla r4 can lr mov lr str ldr sxth r3 mla r4 and then merge mul and lr str ldr sxth r3 mla r4 It also increase the likelihood the store may become dead bb27 Successors according to LLVM BB</div><div class="ttdef"><b>Definition:</b> <a href="lib_2CodeGen_2README_8txt_source.html#l00039">README.txt:39</a></div></div>
<div class="ttc" id="aclassllvm_1_1PostDominatorTreeAnalysis_html"><div class="ttname"><a href="classllvm_1_1PostDominatorTreeAnalysis.html">llvm::PostDominatorTreeAnalysis</a></div><div class="ttdoc">Analysis pass which computes a PostDominatorTree.</div><div class="ttdef"><b>Definition:</b> <a href="PostDominators_8h_source.html#l00047">PostDominators.h:47</a></div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisUsage_html_ae5c60fd282ee894c87ea02c3f0fcb6d0"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">llvm::AnalysisUsage::addRequired</a></div><div class="ttdeci">AnalysisUsage &amp; addRequired()</div><div class="ttdef"><b>Definition:</b> <a href="PassAnalysisSupport_8h_source.html#l00075">PassAnalysisSupport.h:75</a></div></div>
<div class="ttc" id="aLLVMContext_8h_html"><div class="ttname"><a href="LLVMContext_8h.html">LLVMContext.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1User_html_abe1de1520a21f77ac57cc210bf0fb0b4"><div class="ttname"><a href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">llvm::User::getOperand</a></div><div class="ttdeci">Value * getOperand(unsigned i) const</div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00169">User.h:169</a></div></div>
<div class="ttc" id="astructllvm_1_1cl_1_1desc_html"><div class="ttname"><a href="structllvm_1_1cl_1_1desc.html">llvm::cl::desc</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00411">CommandLine.h:411</a></div></div>
<div class="ttc" id="aBranchProbabilityInfo_8cpp_html_a7f0d3e324489e13def109f268e27d5dc"><div class="ttname"><a href="BranchProbabilityInfo_8cpp.html#a7f0d3e324489e13def109f268e27d5dc">PtrUntakenProb</a></div><div class="ttdeci">static const BranchProbability PtrUntakenProb(PH_NONTAKEN_WEIGHT, PH_TAKEN_WEIGHT+PH_NONTAKEN_WEIGHT)</div></div>
<div class="ttc" id="aclassllvm_1_1BranchInst_html"><div class="ttname"><a href="classllvm_1_1BranchInst.html">llvm::BranchInst</a></div><div class="ttdoc">Conditional or Unconditional Branch instruction.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03139">Instructions.h:3139</a></div></div>
<div class="ttc" id="araw__ostream_8h_html"><div class="ttname"><a href="raw__ostream_8h.html">raw_ostream.h</a></div></div>
<div class="ttc" id="aBranchProbabilityInfo_8cpp_html_a202467d2d7ce0b47448bc909631c6950"><div class="ttname"><a href="BranchProbabilityInfo_8cpp.html#a202467d2d7ce0b47448bc909631c6950">ZeroUntakenProb</a></div><div class="ttdeci">static const BranchProbability ZeroUntakenProb(ZH_NONTAKEN_WEIGHT, ZH_TAKEN_WEIGHT+ZH_NONTAKEN_WEIGHT)</div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSetImpl_html_af74676a3c7447be34bd2c1da76ec0c48"><div class="ttname"><a href="classllvm_1_1SmallPtrSetImpl.html#af74676a3c7447be34bd2c1da76ec0c48">llvm::SmallPtrSetImpl::contains</a></div><div class="ttdeci">bool contains(ConstPtrType Ptr) const</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00389">SmallPtrSet.h:389</a></div></div>
<div class="ttc" id="anamespacellvm_1_1CallingConv_html_a5b166ae228ebbfdb96736d6022f3feeda94ec9273479164e4aec1d5d91b71dc85"><div class="ttname"><a href="namespacellvm_1_1CallingConv.html#a5b166ae228ebbfdb96736d6022f3feeda94ec9273479164e4aec1d5d91b71dc85">llvm::CallingConv::Cold</a></div><div class="ttdeci">@ Cold</div><div class="ttdoc">Attempts to make code in the caller as efficient as possible under the assumption that the call is no...</div><div class="ttdef"><b>Definition:</b> <a href="CallingConv_8h_source.html#l00047">CallingConv.h:47</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchProbabilityPrinterPass_html_af8bbfa323a4917223612dff12067110b"><div class="ttname"><a href="classllvm_1_1BranchProbabilityPrinterPass.html#af8bbfa323a4917223612dff12067110b">llvm::BranchProbabilityPrinterPass::run</a></div><div class="ttdeci">PreservedAnalyses run(Function &amp;F, FunctionAnalysisManager &amp;AM)</div><div class="ttdef"><b>Definition:</b> <a href="BranchProbabilityInfo_8cpp_source.html#l01315">BranchProbabilityInfo.cpp:1315</a></div></div>
<div class="ttc" id="aclassllvm_1_1PostDominatorTree_html_ac74ec035b8eeaeb39cfea312fa876c75"><div class="ttname"><a href="classllvm_1_1PostDominatorTree.html#ac74ec035b8eeaeb39cfea312fa876c75">llvm::PostDominatorTree::dominates</a></div><div class="ttdeci">bool dominates(const Instruction *I1, const Instruction *I2) const</div><div class="ttdoc">Return true if I1 dominates I2.</div><div class="ttdef"><b>Definition:</b> <a href="PostDominators_8cpp_source.html#l00054">PostDominators.cpp:54</a></div></div>
<div class="ttc" id="aValue_8h_html"><div class="ttname"><a href="Value_8h.html">Value.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_a646699d7e9479783d02a368364310c67"><div class="ttname"><a href="namespacellvm.html#a646699d7e9479783d02a368364310c67">llvm::divideNearest</a></div><div class="ttdeci">uint64_t divideNearest(uint64_t Numerator, uint64_t Denominator)</div><div class="ttdoc">Returns the integer nearest(Numerator / Denominator).</div><div class="ttdef"><b>Definition:</b> <a href="MathExtras_8h_source.html#l00527">MathExtras.h:527</a></div></div>
<div class="ttc" id="aInitializePasses_8h_html"><div class="ttname"><a href="InitializePasses_8h.html">InitializePasses.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html"><div class="ttname"><a href="classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00074">Value.h:74</a></div></div>
<div class="ttc" id="aBranchProbabilityInfo_8cpp_html_ac6c00f8033a3bf9ab5f49143e30d8c52"><div class="ttname"><a href="BranchProbabilityInfo_8cpp.html#ac6c00f8033a3bf9ab5f49143e30d8c52">LBH_NONTAKEN_WEIGHT</a></div><div class="ttdeci">static const uint32_t LBH_NONTAKEN_WEIGHT</div><div class="ttdef"><b>Definition:</b> <a href="BranchProbabilityInfo_8cpp_source.html#l00101">BranchProbabilityInfo.cpp:101</a></div></div>
<div class="ttc" id="aDebug_8h_html"><div class="ttname"><a href="Debug_8h.html">Debug.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetLibraryAnalysis_html"><div class="ttname"><a href="classllvm_1_1TargetLibraryAnalysis.html">llvm::TargetLibraryAnalysis</a></div><div class="ttdoc">Analysis pass providing the TargetLibraryInfo.</div><div class="ttdef"><b>Definition:</b> <a href="TargetLibraryInfo_8h_source.html#l00540">TargetLibraryInfo.h:540</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchProbabilityInfo_1_1SccInfo_html_af2b37a5830be4881f3995e017ecd8473"><div class="ttname"><a href="classllvm_1_1BranchProbabilityInfo_1_1SccInfo.html#af2b37a5830be4881f3995e017ecd8473">llvm::BranchProbabilityInfo::SccInfo::getSCCNum</a></div><div class="ttdeci">int getSCCNum(const BasicBlock *BB) const</div><div class="ttdoc">If BB belongs to some SCC then ID of that SCC is returned, otherwise -1 is returned.</div><div class="ttdef"><b>Definition:</b> <a href="BranchProbabilityInfo_8cpp_source.html#l00240">BranchProbabilityInfo.cpp:240</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchInst_html_a7e4be8b16fbd68c9045a388904044e01"><div class="ttname"><a href="classllvm_1_1BranchInst.html#a7e4be8b16fbd68c9045a388904044e01">llvm::BranchInst::isConditional</a></div><div class="ttdeci">bool isConditional() const</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03218">Instructions.h:3218</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78baa3213b645e029aba8bb1b85213607d5e"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa3213b645e029aba8bb1b85213607d5e">llvm::CmpInst::FCMP_ORD</a></div><div class="ttdeci">@ FCMP_ORD</div><div class="ttdoc">0 1 1 1 True if ordered (no nans)</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00727">InstrTypes.h:727</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchInst_html_ad97f2e60cf22f15e0cf617af52309031"><div class="ttname"><a href="classllvm_1_1BranchInst.html#ad97f2e60cf22f15e0cf617af52309031">llvm::BranchInst::getSuccessor</a></div><div class="ttdeci">BasicBlock * getSuccessor(unsigned i) const</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03232">Instructions.h:3232</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopAnalysis_html"><div class="ttname"><a href="classllvm_1_1LoopAnalysis.html">llvm::LoopAnalysis</a></div><div class="ttdoc">Analysis pass that exposes the LoopInfo for a function.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l01268">LoopInfo.h:1268</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchProbabilityInfo_1_1SccInfo_html_adb1204788a33211be05a6a01356e78d0"><div class="ttname"><a href="classllvm_1_1BranchProbabilityInfo_1_1SccInfo.html#adb1204788a33211be05a6a01356e78d0">llvm::BranchProbabilityInfo::SccInfo::SccInfo</a></div><div class="ttdeci">SccInfo(const Function &amp;F)</div><div class="ttdef"><b>Definition:</b> <a href="BranchProbabilityInfo_8cpp_source.html#l00217">BranchProbabilityInfo.cpp:217</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSetImpl_html_a6bc6fb89fe2e91c25559a8631f56e27e"><div class="ttname"><a href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">llvm::SmallPtrSetImpl::insert</a></div><div class="ttdeci">std::pair&lt; iterator, bool &gt; insert(PtrType Ptr)</div><div class="ttdoc">Inserts Ptr if and only if there is no element in the container equal to Ptr.</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00365">SmallPtrSet.h:365</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Aug 7 2023 09:48:15 for LLVM by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>

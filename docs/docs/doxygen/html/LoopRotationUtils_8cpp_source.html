<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LLVM: lib/Transforms/Utils/LoopRotationUtils.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">LLVM
   &#160;<span id="projectnumber">17.0.0git</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a class="el" href="dir_a72932e0778af28115095468f6286ff8.html">Transforms</a></li><li class="navelem"><a class="el" href="dir_f75c00afeb315f44d76556a7c675e6e8.html">Utils</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">LoopRotationUtils.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="LoopRotationUtils_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//===----------------- LoopRotationUtils.cpp -----------------------------===//</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">// See https://llvm.org/LICENSE.txt for license information.</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">// This file provides utilities to convert a loop into a loop with bottom test.</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160; </div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LoopRotationUtils_8h.html">llvm/Transforms/Utils/LoopRotationUtils.h</a>&quot;</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Statistic_8h.html">llvm/ADT/Statistic.h</a>&quot;</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="AssumptionCache_8h.html">llvm/Analysis/AssumptionCache.h</a>&quot;</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CodeMetrics_8h.html">llvm/Analysis/CodeMetrics.h</a>&quot;</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DomTreeUpdater_8h.html">llvm/Analysis/DomTreeUpdater.h</a>&quot;</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="InstructionSimplify_8h.html">llvm/Analysis/InstructionSimplify.h</a>&quot;</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LoopInfo_8h.html">llvm/Analysis/LoopInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MemorySSA_8h.html">llvm/Analysis/MemorySSA.h</a>&quot;</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MemorySSAUpdater_8h.html">llvm/Analysis/MemorySSAUpdater.h</a>&quot;</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ScalarEvolution_8h.html">llvm/Analysis/ScalarEvolution.h</a>&quot;</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ValueTracking_8h.html">llvm/Analysis/ValueTracking.h</a>&quot;</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="IR_2CFG_8h.html">llvm/IR/CFG.h</a>&quot;</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="IR_2DebugInfo_8h.html">llvm/IR/DebugInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Dominators_8h.html">llvm/IR/Dominators.h</a>&quot;</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="IntrinsicInst_8h.html">llvm/IR/IntrinsicInst.h</a>&quot;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CommandLine_8h.html">llvm/Support/CommandLine.h</a>&quot;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Debug_8h.html">llvm/Support/Debug.h</a>&quot;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="raw__ostream_8h.html">llvm/Support/raw_ostream.h</a>&quot;</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="BasicBlockUtils_8h.html">llvm/Transforms/Utils/BasicBlockUtils.h</a>&quot;</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Cloning_8h.html">llvm/Transforms/Utils/Cloning.h</a>&quot;</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Transforms_2Utils_2Local_8h.html">llvm/Transforms/Utils/Local.h</a>&quot;</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SSAUpdater_8h.html">llvm/Transforms/Utils/SSAUpdater.h</a>&quot;</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ValueMapper_8h.html">llvm/Transforms/Utils/ValueMapper.h</a>&quot;</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespacellvm.html">llvm</a>;</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160; </div>
<div class="line"><a name="l00038"></a><span class="lineno"><a class="line" href="LoopRotationUtils_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">   38</a></span>&#160;<span class="preprocessor">#define DEBUG_TYPE &quot;loop-rotate&quot;</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160; </div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(NumNotRotatedDueToHeaderSize,</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;          <span class="stringliteral">&quot;Number of loops not rotated due to the header size&quot;</span>);</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(NumInstrsHoisted,</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;          <span class="stringliteral">&quot;Number of instructions hoisted into loop preheader&quot;</span>);</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(NumInstrsDuplicated,</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;          <span class="stringliteral">&quot;Number of instructions cloned into loop preheader&quot;</span>);</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(NumRotated, <span class="stringliteral">&quot;Number of loops rotated&quot;</span>);</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160; </div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    <a class="code" href="LoopRotationUtils_8cpp.html#afab629af20651c2c96306ec11a09819b">MultiRotate</a>(<span class="stringliteral">&quot;loop-rotate-multi&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">false</span>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;                <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Allow loop rotation multiple times in order to reach &quot;</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;                         <span class="stringliteral">&quot;a better latch exit&quot;</span>));</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160; </div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="keyword">namespace </span>{<span class="comment"></span></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="comment">/// A simple loop rotation transformation.</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="comment"></span><span class="keyword">class </span>LoopRotate {</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">unsigned</span> MaxHeaderSize;</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;  <a class="code" href="classllvm_1_1LoopInfo.html">LoopInfo</a> *LI;</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetTransformInfo.html">TargetTransformInfo</a> *<a class="code" href="namespacellvm.html#aa0d69e81725c10fa5407f0bf34462068">TTI</a>;</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;  <a class="code" href="classllvm_1_1AssumptionCache.html">AssumptionCache</a> *AC;</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;  <a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> *DT;</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;  <a class="code" href="classllvm_1_1ScalarEvolution.html">ScalarEvolution</a> *SE;</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;  <a class="code" href="classllvm_1_1MemorySSAUpdater.html">MemorySSAUpdater</a> *MSSAU;</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;  <span class="keyword">const</span> <a class="code" href="structllvm_1_1SimplifyQuery.html">SimplifyQuery</a> &amp;SQ;</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;  <span class="keywordtype">bool</span> RotationOnly;</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;  <span class="keywordtype">bool</span> IsUtilMode;</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;  <span class="keywordtype">bool</span> PrepareForLTO;</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160; </div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;  LoopRotate(<span class="keywordtype">unsigned</span> MaxHeaderSize, <a class="code" href="classllvm_1_1LoopInfo.html">LoopInfo</a> *LI,</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;             <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetTransformInfo.html">TargetTransformInfo</a> *<a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>, <a class="code" href="classllvm_1_1AssumptionCache.html">AssumptionCache</a> *AC,</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;             <a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> *DT, <a class="code" href="classllvm_1_1ScalarEvolution.html">ScalarEvolution</a> *SE, <a class="code" href="classllvm_1_1MemorySSAUpdater.html">MemorySSAUpdater</a> *MSSAU,</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;             <span class="keyword">const</span> <a class="code" href="structllvm_1_1SimplifyQuery.html">SimplifyQuery</a> &amp;SQ, <span class="keywordtype">bool</span> RotationOnly, <span class="keywordtype">bool</span> IsUtilMode,</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;             <span class="keywordtype">bool</span> PrepareForLTO)</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;      : MaxHeaderSize(MaxHeaderSize), LI(LI), <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>(<a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>), AC(AC), DT(DT), SE(SE),</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;        MSSAU(MSSAU), SQ(SQ), RotationOnly(RotationOnly),</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;        IsUtilMode(IsUtilMode), PrepareForLTO(PrepareForLTO) {}</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;  <span class="keywordtype">bool</span> processLoop(<a class="code" href="classllvm_1_1Loop.html">Loop</a> *L);</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160; </div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="keyword">private</span>:</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;  <span class="keywordtype">bool</span> rotateLoop(<a class="code" href="classllvm_1_1Loop.html">Loop</a> *L, <span class="keywordtype">bool</span> SimplifiedLatch);</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;  <span class="keywordtype">bool</span> simplifyLoopLatch(<a class="code" href="classllvm_1_1Loop.html">Loop</a> *L);</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;};</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;} <span class="comment">// end anonymous namespace</span></div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="comment">/// Insert (K, V) pair into the ValueToValueMap, and verify the key did not</span></div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="comment">/// previously exist in the map, and the value was inserted.</span></div>
<div class="line"><a name="l00087"></a><span class="lineno"><a class="line" href="LoopRotationUtils_8cpp.html#ad2e3518508b7df1cb9b6ab4dba6557f1">   87</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="LoopRotationUtils_8cpp.html#ad2e3518508b7df1cb9b6ab4dba6557f1">InsertNewValueIntoMap</a>(<a class="code" href="classllvm_1_1ValueMap.html">ValueToValueMapTy</a> &amp;VM, <a class="code" href="classllvm_1_1Value.html">Value</a> *K, <a class="code" href="classllvm_1_1Value.html">Value</a> *V) {</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;  <span class="keywordtype">bool</span> Inserted = VM.<a class="code" href="classllvm_1_1ValueMap.html#a620815bfbf153caa776f5e207bd8e3c0">insert</a>({K, V}).second;</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Inserted);</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;  (void)Inserted;</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;}<span class="comment"></span></div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<span class="comment">/// RewriteUsesOfClonedInstructions - We just cloned the instructions from the</span></div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="comment">/// old header into the preheader.  If there were uses of the values produced by</span></div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<span class="comment">/// these instruction that were outside of the loop, we have to insert PHI nodes</span></div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="comment">/// to merge the two values.  Do this now.</span></div>
<div class="line"><a name="l00096"></a><span class="lineno"><a class="line" href="LoopRotationUtils_8cpp.html#aea660fd3de70e7854de06b7e212f0ecd">   96</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="LoopRotationUtils_8cpp.html#aea660fd3de70e7854de06b7e212f0ecd">RewriteUsesOfClonedInstructions</a>(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *OrigHeader,</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;                                            <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *OrigPreheader,</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;                                            <a class="code" href="classllvm_1_1ValueMap.html">ValueToValueMapTy</a> &amp;<a class="code" href="classllvm_1_1ValueMap.html">ValueMap</a>,</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;                                            <a class="code" href="classllvm_1_1ScalarEvolution.html">ScalarEvolution</a> *SE,</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;                                <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;PHINode*&gt;</a> *InsertedPHIs) {</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;  <span class="comment">// Remove PHI node entries that are no longer live.</span></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html#a98c0a84a5dfa8bce341c829709f171e5">BasicBlock::iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = OrigHeader-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0b4e7bee9b8575cc7db73329f1a561bd">end</a>();</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = OrigHeader-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>(); <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *PN = dyn_cast&lt;PHINode&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>); ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    PN-&gt;removeIncomingValue(PN-&gt;getBasicBlockIndex(OrigPreheader));</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160; </div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;  <span class="comment">// Now fix up users of the instructions in OrigHeader, inserting PHI nodes</span></div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;  <span class="comment">// as necessary.</span></div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;  <a class="code" href="classllvm_1_1SSAUpdater.html">SSAUpdater</a> <a class="code" href="MemorySSA_8cpp.html#a20a60bdac22b099d87d8cb0c1d554120">SSA</a>(InsertedPHIs);</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = OrigHeader-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *OrigHeaderVal = &amp;*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160; </div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    <span class="comment">// If there are no uses of the value (e.g. because it returns void), there</span></div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    <span class="comment">// is nothing to rewrite.</span></div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    <span class="keywordflow">if</span> (OrigHeaderVal-&gt;<a class="code" href="classllvm_1_1Value.html#a9d7de807ebdfe1819df3ff6cb0f16158">use_empty</a>())</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160; </div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *OrigPreHeaderVal = <a class="code" href="classllvm_1_1ValueMap.html">ValueMap</a>.<a class="code" href="classllvm_1_1ValueMap.html#a15f92579a5fc316dab8cd1fad51015ef">lookup</a>(OrigHeaderVal);</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160; </div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    <span class="comment">// The value now exits in two versions: the initial value in the preheader</span></div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    <span class="comment">// and the loop &quot;next&quot; value in the original header.</span></div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    <a class="code" href="MemorySSA_8cpp.html#a20a60bdac22b099d87d8cb0c1d554120">SSA</a>.Initialize(OrigHeaderVal-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>(), OrigHeaderVal-&gt;<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>());</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    <span class="comment">// Force re-computation of OrigHeaderVal, as some users now need to use the</span></div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <span class="comment">// new PHI node.</span></div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    <span class="keywordflow">if</span> (SE)</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;      SE-&gt;<a class="code" href="classllvm_1_1ScalarEvolution.html#a804545e5b568edec8b970da32cd37359">forgetValue</a>(OrigHeaderVal);</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    <a class="code" href="MemorySSA_8cpp.html#a20a60bdac22b099d87d8cb0c1d554120">SSA</a>.AddAvailableValue(OrigHeader, OrigHeaderVal);</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    <a class="code" href="MemorySSA_8cpp.html#a20a60bdac22b099d87d8cb0c1d554120">SSA</a>.AddAvailableValue(OrigPreheader, OrigPreHeaderVal);</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160; </div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    <span class="comment">// Visit each use of the OrigHeader instruction.</span></div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Use.html">Use</a> &amp;U : <a class="code" href="namespacellvm.html#a8154638df88e4eaa568b67b23d463dac">llvm::make_early_inc_range</a>(OrigHeaderVal-&gt;<a class="code" href="classllvm_1_1Value.html#aecb93439702247fe5353a9966f7cefcd">uses</a>())) {</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;      <span class="comment">// SSAUpdater can&#39;t handle a non-PHI use in the same block as an</span></div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;      <span class="comment">// earlier def. We can easily handle those cases manually.</span></div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;      <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *UserInst = cast&lt;Instruction&gt;(U.getUser());</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;      <span class="keywordflow">if</span> (!isa&lt;PHINode&gt;(UserInst)) {</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;        <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *UserBB = UserInst-&gt;<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>();</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160; </div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;        <span class="comment">// The original users in the OrigHeader are already using the</span></div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;        <span class="comment">// original definitions.</span></div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;        <span class="keywordflow">if</span> (UserBB == OrigHeader)</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160; </div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;        <span class="comment">// Users in the OrigPreHeader need to use the value to which the</span></div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;        <span class="comment">// original definitions are mapped.</span></div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;        <span class="keywordflow">if</span> (UserBB == OrigPreheader) {</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;          U = OrigPreHeaderVal;</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;        }</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;      }</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160; </div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;      <span class="comment">// Anything else can be handled by SSAUpdater.</span></div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;      <a class="code" href="MemorySSA_8cpp.html#a20a60bdac22b099d87d8cb0c1d554120">SSA</a>.RewriteUse(U);</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    }</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160; </div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <span class="comment">// Replace MetadataAsValue(ValueAsMetadata(OrigHeaderVal)) uses in debug</span></div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    <span class="comment">// intrinsics.</span></div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;DbgValueInst *, 1&gt;</a> DbgValues;</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    <a class="code" href="namespacellvm.html#a8813c8445d4429956ae5a3647f02fcfb">llvm::findDbgValues</a>(DbgValues, OrigHeaderVal);</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;<a class="code" href="classLiveDebugValues_1_1DbgValue.html">DbgValue</a> : DbgValues) {</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;      <span class="comment">// The original users in the OrigHeader are already using the original</span></div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;      <span class="comment">// definitions.</span></div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;      <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *UserBB = <a class="code" href="classLiveDebugValues_1_1DbgValue.html">DbgValue</a>-&gt;getParent();</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;      <span class="keywordflow">if</span> (UserBB == OrigHeader)</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160; </div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;      <span class="comment">// Users in the OrigPreHeader need to use the value to which the</span></div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;      <span class="comment">// original definitions are mapped and anything else can be handled by</span></div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;      <span class="comment">// the SSAUpdater. To avoid adding PHINodes, check if the value is</span></div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;      <span class="comment">// available in UserBB, if not substitute undef.</span></div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *NewVal;</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;      <span class="keywordflow">if</span> (UserBB == OrigPreheader)</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;        NewVal = OrigPreHeaderVal;</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="MemorySSA_8cpp.html#a20a60bdac22b099d87d8cb0c1d554120">SSA</a>.HasValueForBlock(UserBB))</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;        NewVal = <a class="code" href="MemorySSA_8cpp.html#a20a60bdac22b099d87d8cb0c1d554120">SSA</a>.GetValueInMiddleOfBlock(UserBB);</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;        NewVal = <a class="code" href="classllvm_1_1UndefValue.html#a4ae5ff22b700a42bcc5d889233721335">UndefValue::get</a>(OrigHeaderVal-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>());</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;      <a class="code" href="classLiveDebugValues_1_1DbgValue.html">DbgValue</a>-&gt;replaceVariableLocationOp(OrigHeaderVal, NewVal);</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    }</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;  }</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;}</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160; </div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;<span class="comment">// Assuming both header and latch are exiting, look for a phi which is only</span></div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;<span class="comment">// used outside the loop (via a LCSSA phi) in the exit from the header.</span></div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;<span class="comment">// This means that rotating the loop can remove the phi.</span></div>
<div class="line"><a name="l00184"></a><span class="lineno"><a class="line" href="LoopRotationUtils_8cpp.html#a7fdcbbf4a72726c120dc9d33b6ee13bb">  184</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="LoopRotationUtils_8cpp.html#a7fdcbbf4a72726c120dc9d33b6ee13bb">profitableToRotateLoopExitingLatch</a>(<a class="code" href="classllvm_1_1Loop.html">Loop</a> *L) {</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Header = L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a58c5b170ea68b41e94ebb0019523a68f">getHeader</a>();</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;  <a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a> *BI = dyn_cast&lt;BranchInst&gt;(Header-&gt;getTerminator());</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(BI &amp;&amp; BI-&gt;<a class="code" href="classllvm_1_1BranchInst.html#a7e4be8b16fbd68c9045a388904044e01">isConditional</a>() &amp;&amp; <span class="stringliteral">&quot;need header with conditional exit&quot;</span>);</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *HeaderExit = BI-&gt;<a class="code" href="classllvm_1_1BranchInst.html#ad97f2e60cf22f15e0cf617af52309031">getSuccessor</a>(0);</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;  <span class="keywordflow">if</span> (L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a04337b572d34ea413c35dbac5d75530b">contains</a>(HeaderExit))</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    HeaderExit = BI-&gt;<a class="code" href="classllvm_1_1BranchInst.html#ad97f2e60cf22f15e0cf617af52309031">getSuccessor</a>(1);</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160; </div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;Phi : Header-&gt;phis()) {</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    <span class="comment">// Look for uses of this phi in the loop/via exits other than the header.</span></div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a61d13d6824ec46c31260a4fd0997eda0">llvm::any_of</a>(Phi.users(), [HeaderExit](<span class="keyword">const</span> <a class="code" href="classllvm_1_1User.html">User</a> *U) {</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;          return cast&lt;Instruction&gt;(U)-&gt;getParent() != HeaderExit;</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;        }))</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;  }</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;}</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160; </div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;<span class="comment">// Check that latch exit is deoptimizing (which means - very unlikely to happen)</span></div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;<span class="comment">// and there is another exit from the loop which is non-deoptimizing.</span></div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;<span class="comment">// If we rotate latch to that exit our loop has a better chance of being fully</span></div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;<span class="comment">// canonical.</span></div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;<span class="comment">// It can give false positives in some rare cases.</span></div>
<div class="line"><a name="l00209"></a><span class="lineno"><a class="line" href="LoopRotationUtils_8cpp.html#a20d58a0069048b80461676a4132ad1d4">  209</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="LoopRotationUtils_8cpp.html#a20d58a0069048b80461676a4132ad1d4">canRotateDeoptimizingLatchExit</a>(<a class="code" href="classllvm_1_1Loop.html">Loop</a> *L) {</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Latch = L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a1230fd674d2609b96527fe65eaf40b1b">getLoopLatch</a>();</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Latch &amp;&amp; <span class="stringliteral">&quot;need latch&quot;</span>);</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;  <a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a> *BI = dyn_cast&lt;BranchInst&gt;(Latch-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>());</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;  <span class="comment">// Need normal exiting latch.</span></div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;  <span class="keywordflow">if</span> (!BI || !BI-&gt;<a class="code" href="classllvm_1_1BranchInst.html#a7e4be8b16fbd68c9045a388904044e01">isConditional</a>())</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160; </div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Exit = BI-&gt;<a class="code" href="classllvm_1_1BranchInst.html#ad97f2e60cf22f15e0cf617af52309031">getSuccessor</a>(1);</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;  <span class="keywordflow">if</span> (L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a04337b572d34ea413c35dbac5d75530b">contains</a>(Exit))</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    Exit = BI-&gt;<a class="code" href="classllvm_1_1BranchInst.html#ad97f2e60cf22f15e0cf617af52309031">getSuccessor</a>(0);</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160; </div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;  <span class="comment">// Latch exit is non-deoptimizing, no need to rotate.</span></div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;  <span class="keywordflow">if</span> (!Exit-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#ae8a9915f25abfe7ff5010da686e446c2">getPostdominatingDeoptimizeCall</a>())</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160; </div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;BasicBlock *, 4&gt;</a> Exits;</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;  L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#ae069a12f0a2d2deb69e30b439a91190e">getUniqueExitBlocks</a>(Exits);</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;  <span class="keywordflow">if</span> (!Exits.empty()) {</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    <span class="comment">// There is at least one non-deoptimizing exit.</span></div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    <span class="comment">// Note, that BasicBlock::getPostdominatingDeoptimizeCall is not exact,</span></div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    <span class="comment">// as it can conservatively return false for deoptimizing exits with</span></div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    <span class="comment">// complex enough control flow down to deoptimize call.</span></div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    <span class="comment">// That means here we can report success for a case where</span></div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    <span class="comment">// all exits are deoptimizing but one of them has complex enough</span></div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    <span class="comment">// control flow (e.g. with loops).</span></div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    <span class="comment">// That should be a very rare case and false positives for this function</span></div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    <span class="comment">// have compile-time effect only.</span></div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#a61d13d6824ec46c31260a4fd0997eda0">any_of</a>(Exits, [](<span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) {</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;      <span class="keywordflow">return</span> !<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getPostdominatingDeoptimizeCall();</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    });</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;  }</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;}</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;<span class="comment">/// Rotate loop LP. Return true if the loop is rotated.</span></div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;<span class="comment">/// \param SimplifiedLatch is true if the latch was just folded into the final</span></div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;<span class="comment">/// loop exit. In this case we may want to rotate even though the new latch is</span></div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;<span class="comment">/// now an exiting branch. This rotation would have happened had the latch not</span></div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;<span class="comment">/// been simplified. However, if SimplifiedLatch is false, then we avoid</span></div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;<span class="comment">/// rotating loops in which the latch exits to avoid excessive or endless</span></div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;<span class="comment">/// rotation. LoopRotate should be repeatable and converge to a canonical</span></div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;<span class="comment">/// form. This property is satisfied because simplifying the loop latch can only</span></div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;<span class="comment">/// happen once across multiple invocations of the LoopRotate pass.</span></div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;<span class="comment">/// If -loop-rotate-multi is enabled we can do multiple rotations in one go</span></div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;<span class="comment">/// so to reach a suitable (non-deoptimizing) exit.</span></div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> LoopRotate::rotateLoop(<a class="code" href="classllvm_1_1Loop.html">Loop</a> *L, <span class="keywordtype">bool</span> SimplifiedLatch) {</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;  <span class="comment">// If the loop has only one block then there is not much to rotate.</span></div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;  <span class="keywordflow">if</span> (L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a5cc113cb783ab6e5ca7b69241431c19c">getBlocks</a>().size() == 1)</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160; </div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;  <span class="keywordtype">bool</span> Rotated = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;  <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *OrigHeader = L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a58c5b170ea68b41e94ebb0019523a68f">getHeader</a>();</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *OrigLatch = L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a1230fd674d2609b96527fe65eaf40b1b">getLoopLatch</a>();</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160; </div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    <a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a> *BI = dyn_cast&lt;BranchInst&gt;(OrigHeader-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>());</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    <span class="keywordflow">if</span> (!BI || BI-&gt;<a class="code" href="classllvm_1_1BranchInst.html#ad56f6a9b5cd05940017c4544df48bc30">isUnconditional</a>())</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;      <span class="keywordflow">return</span> Rotated;</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160; </div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    <span class="comment">// If the loop header is not one of the loop exiting blocks then</span></div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    <span class="comment">// either this loop is already rotated or it is not</span></div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    <span class="comment">// suitable for loop rotation transformations.</span></div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    <span class="keywordflow">if</span> (!L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#af691775d5a45e28afbdb3e97cab22eee">isLoopExiting</a>(OrigHeader))</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;      <span class="keywordflow">return</span> Rotated;</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160; </div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    <span class="comment">// If the loop latch already contains a branch that leaves the loop then the</span></div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    <span class="comment">// loop is already rotated.</span></div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    <span class="keywordflow">if</span> (!OrigLatch)</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;      <span class="keywordflow">return</span> Rotated;</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160; </div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    <span class="comment">// Rotate if either the loop latch does *not* exit the loop, or if the loop</span></div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    <span class="comment">// latch was just simplified. Or if we think it will be profitable.</span></div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    <span class="keywordflow">if</span> (L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#af691775d5a45e28afbdb3e97cab22eee">isLoopExiting</a>(OrigLatch) &amp;&amp; !SimplifiedLatch &amp;&amp; IsUtilMode == <span class="keyword">false</span> &amp;&amp;</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;        !<a class="code" href="LoopRotationUtils_8cpp.html#a7fdcbbf4a72726c120dc9d33b6ee13bb">profitableToRotateLoopExitingLatch</a>(L) &amp;&amp;</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;        !<a class="code" href="LoopRotationUtils_8cpp.html#a20d58a0069048b80461676a4132ad1d4">canRotateDeoptimizingLatchExit</a>(L))</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;      <span class="keywordflow">return</span> Rotated;</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160; </div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    <span class="comment">// Check size of original header and reject loop if it is very big or we can&#39;t</span></div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    <span class="comment">// duplicate blocks inside it.</span></div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    {</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;      <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;const Value *, 32&gt;</a> EphValues;</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;      <a class="code" href="structllvm_1_1CodeMetrics.html#a7e174506b52ad46ea1f746a7f727d999">CodeMetrics::collectEphemeralValues</a>(L, AC, EphValues);</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160; </div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;      <a class="code" href="structllvm_1_1CodeMetrics.html">CodeMetrics</a> <a class="code" href="MachineTraceMetrics_8cpp.html#a6f3004139ef53bc2cf206b8864976928">Metrics</a>;</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;      <a class="code" href="MachineTraceMetrics_8cpp.html#a6f3004139ef53bc2cf206b8864976928">Metrics</a>.analyzeBasicBlock(OrigHeader, *<a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>, EphValues, PrepareForLTO);</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="MachineTraceMetrics_8cpp.html#a6f3004139ef53bc2cf206b8864976928">Metrics</a>.notDuplicatable) {</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;        <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;                   <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LoopRotation: NOT rotating - contains non-duplicatable&quot;</span></div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;                   &lt;&lt; <span class="stringliteral">&quot; instructions: &quot;</span>;</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;                   L-&gt;<a class="code" href="classllvm_1_1Loop.html#a61a487a3724136e3332c86f2f26189ce">dump</a>());</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;        <span class="keywordflow">return</span> Rotated;</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;      }</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="MachineTraceMetrics_8cpp.html#a6f3004139ef53bc2cf206b8864976928">Metrics</a>.convergent) {</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;        <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LoopRotation: NOT rotating - contains convergent &quot;</span></div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;                   <span class="stringliteral">&quot;instructions: &quot;</span>;</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;                   L-&gt;<a class="code" href="classllvm_1_1Loop.html#a61a487a3724136e3332c86f2f26189ce">dump</a>());</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;        <span class="keywordflow">return</span> Rotated;</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;      }</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="MachineTraceMetrics_8cpp.html#a6f3004139ef53bc2cf206b8864976928">Metrics</a>.NumInsts.isValid()) {</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;        <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LoopRotation: NOT rotating - contains instructions&quot;</span></div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;                   <span class="stringliteral">&quot; with invalid cost: &quot;</span>;</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;                   L-&gt;<a class="code" href="classllvm_1_1Loop.html#a61a487a3724136e3332c86f2f26189ce">dump</a>());</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;        <span class="keywordflow">return</span> Rotated;</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;      }</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="MachineTraceMetrics_8cpp.html#a6f3004139ef53bc2cf206b8864976928">Metrics</a>.NumInsts &gt; MaxHeaderSize) {</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;        <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LoopRotation: NOT rotating - contains &quot;</span></div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;                          &lt;&lt; <a class="code" href="MachineTraceMetrics_8cpp.html#a6f3004139ef53bc2cf206b8864976928">Metrics</a>.NumInsts</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;                          &lt;&lt; <span class="stringliteral">&quot; instructions, which is more than the threshold (&quot;</span></div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;                          &lt;&lt; MaxHeaderSize &lt;&lt; <span class="stringliteral">&quot; instructions): &quot;</span>;</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;                   L-&gt;<a class="code" href="classllvm_1_1Loop.html#a61a487a3724136e3332c86f2f26189ce">dump</a>());</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;        ++NumNotRotatedDueToHeaderSize;</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;        <span class="keywordflow">return</span> Rotated;</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;      }</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160; </div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;      <span class="comment">// When preparing for LTO, avoid rotating loops with calls that could be</span></div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;      <span class="comment">// inlined during the LTO stage.</span></div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;      <span class="keywordflow">if</span> (PrepareForLTO &amp;&amp; <a class="code" href="MachineTraceMetrics_8cpp.html#a6f3004139ef53bc2cf206b8864976928">Metrics</a>.NumInlineCandidates &gt; 0)</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;        <span class="keywordflow">return</span> Rotated;</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    }</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160; </div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    <span class="comment">// Now, this loop is suitable for rotation.</span></div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *OrigPreheader = L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#ac3280e7f76f955403fe17eacf126b90d">getLoopPreheader</a>();</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160; </div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    <span class="comment">// If the loop could not be converted to canonical form, it must have an</span></div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    <span class="comment">// indirectbr in it, just give up.</span></div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    <span class="keywordflow">if</span> (!OrigPreheader || !L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#ae7ebc88c9b32b51b749bd5bbcfaa5fb8">hasDedicatedExits</a>())</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;      <span class="keywordflow">return</span> Rotated;</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160; </div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    <span class="comment">// Anything ScalarEvolution may know about this loop or the PHI nodes</span></div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    <span class="comment">// in its header will soon be invalidated. We should also invalidate</span></div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    <span class="comment">// all outer loops because insertion and deletion of blocks that happens</span></div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    <span class="comment">// during the rotation may violate invariants related to backedge taken</span></div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    <span class="comment">// infos in them.</span></div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    <span class="keywordflow">if</span> (SE) {</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;      SE-&gt;forgetTopmostLoop(L);</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;      <span class="comment">// We may hoist some instructions out of loop. In case if they were cached</span></div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;      <span class="comment">// as &quot;loop variant&quot; or &quot;loop computable&quot;, these caches must be dropped.</span></div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;      <span class="comment">// We also may fold basic blocks, so cached block dispositions also need</span></div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;      <span class="comment">// to be dropped.</span></div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;      SE-&gt;forgetBlockAndLoopDispositions();</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    }</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160; </div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LoopRotation: rotating &quot;</span>; L-&gt;<a class="code" href="classllvm_1_1Loop.html#a61a487a3724136e3332c86f2f26189ce">dump</a>());</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    <span class="keywordflow">if</span> (MSSAU &amp;&amp; <a class="code" href="namespacellvm.html#aa29fe161c408879ada30c90ebbf55dcf">VerifyMemorySSA</a>)</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;      MSSAU-&gt;getMemorySSA()-&gt;verifyMemorySSA();</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160; </div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    <span class="comment">// Find new Loop header. NewHeader is a Header&#39;s one and only successor</span></div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;    <span class="comment">// that is inside loop.  Header&#39;s other successor is outside the</span></div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;    <span class="comment">// loop.  Otherwise loop is not suitable for rotation.</span></div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Exit = BI-&gt;<a class="code" href="classllvm_1_1BranchInst.html#ad97f2e60cf22f15e0cf617af52309031">getSuccessor</a>(0);</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *NewHeader = BI-&gt;<a class="code" href="classllvm_1_1BranchInst.html#ad97f2e60cf22f15e0cf617af52309031">getSuccessor</a>(1);</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    <span class="keywordflow">if</span> (L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a04337b572d34ea413c35dbac5d75530b">contains</a>(Exit))</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;      <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(Exit, NewHeader);</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(NewHeader &amp;&amp; <span class="stringliteral">&quot;Unable to determine new loop header&quot;</span>);</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a04337b572d34ea413c35dbac5d75530b">contains</a>(NewHeader) &amp;&amp; !L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a04337b572d34ea413c35dbac5d75530b">contains</a>(Exit) &amp;&amp;</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;           <span class="stringliteral">&quot;Unable to determine loop header and exit blocks&quot;</span>);</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160; </div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;    <span class="comment">// This code assumes that the new header has exactly one predecessor.</span></div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    <span class="comment">// Remove any single-entry PHI nodes in it.</span></div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(NewHeader-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a59fb91d1691350f7d1b8e8a114e3f2a4">getSinglePredecessor</a>() &amp;&amp;</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;           <span class="stringliteral">&quot;New header doesn&#39;t have one pred!&quot;</span>);</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    <a class="code" href="namespacellvm.html#ab7e8be1d1ae7e526ea156b60c51c10e5">FoldSingleEntryPHINodes</a>(NewHeader);</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160; </div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    <span class="comment">// Begin by walking OrigHeader and populating ValueMap with an entry for</span></div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;    <span class="comment">// each Instruction.</span></div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html#a98c0a84a5dfa8bce341c829709f171e5">BasicBlock::iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = OrigHeader-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>(), <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = OrigHeader-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0b4e7bee9b8575cc7db73329f1a561bd">end</a>();</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    <a class="code" href="classllvm_1_1ValueMap.html">ValueToValueMapTy</a> <a class="code" href="classllvm_1_1ValueMap.html">ValueMap</a>, ValueMapMSSA;</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160; </div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    <span class="comment">// For PHI nodes, the value available in OldPreHeader is just the</span></div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    <span class="comment">// incoming value from OldPreHeader.</span></div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    <span class="keywordflow">for</span> (; <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *PN = dyn_cast&lt;PHINode&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>); ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;      <a class="code" href="LoopRotationUtils_8cpp.html#ad2e3518508b7df1cb9b6ab4dba6557f1">InsertNewValueIntoMap</a>(<a class="code" href="classllvm_1_1ValueMap.html">ValueMap</a>, PN,</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;                            PN-&gt;<a class="code" href="classllvm_1_1PHINode.html#adfb61ffe25c950c75c86310245b3ef39">getIncomingValueForBlock</a>(OrigPreheader));</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160; </div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    <span class="comment">// For the rest of the instructions, either hoist to the OrigPreheader if</span></div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;    <span class="comment">// possible or create a clone in the OldPreHeader if not.</span></div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *LoopEntryBranch = OrigPreheader-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>();</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160; </div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    <span class="comment">// Record all debug intrinsics preceding LoopEntryBranch to avoid</span></div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    <span class="comment">// duplication.</span></div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    <span class="keyword">using</span> DbgIntrinsicHash =</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;        std::pair&lt;std::pair&lt;hash_code, DILocalVariable *&gt;, <a class="code" href="classllvm_1_1DIExpression.html">DIExpression</a> *&gt;;</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    <span class="keyword">auto</span> makeHash = [](<a class="code" href="classllvm_1_1DbgVariableIntrinsic.html">DbgVariableIntrinsic</a> *<a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>) -&gt; DbgIntrinsicHash {</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;      <span class="keyword">auto</span> VarLocOps = <a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>-&gt;location_ops();</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;      <span class="keywordflow">return</span> {{<a class="code" href="namespacellvm.html#af80edfc5e42059e045aa7bf7fe42bee3">hash_combine_range</a>(VarLocOps.begin(), VarLocOps.end()),</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;               <a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>-&gt;getVariable()},</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;              <a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>-&gt;getExpression()};</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    };</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    <a class="code" href="classllvm_1_1SmallDenseSet.html">SmallDenseSet&lt;DbgIntrinsicHash, 8&gt;</a> DbgIntrinsics;</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : <a class="code" href="namespacellvm.html#a02981de53fb6ffd384d39addc4d25f37">llvm::drop_begin</a>(<a class="code" href="namespacellvm.html#a6b0ac1fa4f05de76413c5e0ca6334035">llvm::reverse</a>(*OrigPreheader))) {</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> *DII = dyn_cast&lt;DbgVariableIntrinsic&gt;(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;        DbgIntrinsics.<a class="code" href="classllvm_1_1detail_1_1DenseSetImpl.html#a79eed48913651aeedda2eed25201ea84">insert</a>(makeHash(DII));</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;    }</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160; </div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;    <span class="comment">// Remember the local noalias scope declarations in the header. After the</span></div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;    <span class="comment">// rotation, they must be duplicated and the scope must be cloned. This</span></div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    <span class="comment">// avoids unwanted interaction across iterations.</span></div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;NoAliasScopeDeclInst *, 6&gt;</a> NoAliasDeclInstructions;</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : *OrigHeader)</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> *Decl = dyn_cast&lt;NoAliasScopeDeclInst&gt;(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;        NoAliasDeclInstructions.push_back(Decl);</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160; </div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;    <span class="keywordflow">while</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>) {</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;      <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Inst = &amp;*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>++;</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160; </div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;      <span class="comment">// If the instruction&#39;s operands are invariant and it doesn&#39;t read or write</span></div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;      <span class="comment">// memory, then it is safe to hoist.  Doing this doesn&#39;t change the order of</span></div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;      <span class="comment">// execution in the preheader, but does prevent the instruction from</span></div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;      <span class="comment">// executing in each iteration of the loop.  This means it is safe to hoist</span></div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;      <span class="comment">// something that might trap, but isn&#39;t safe to hoist something that reads</span></div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;      <span class="comment">// memory (without proving that the loop doesn&#39;t write).</span></div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;      <span class="keywordflow">if</span> (L-&gt;<a class="code" href="classllvm_1_1Loop.html#a54e82aea5fab8cf3a878003444f25ee7">hasLoopInvariantOperands</a>(Inst) &amp;&amp; !Inst-&gt;<a class="code" href="classllvm_1_1Instruction.html#a9149819221d66953ac6c2938b87f0136">mayReadFromMemory</a>() &amp;&amp;</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;          !Inst-&gt;<a class="code" href="classllvm_1_1Instruction.html#a383175f96316074965ad115706bd49d7">mayWriteToMemory</a>() &amp;&amp; !Inst-&gt;<a class="code" href="classllvm_1_1Instruction.html#a7653277511df1034148a37520a585bb5">isTerminator</a>() &amp;&amp;</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;          !isa&lt;DbgInfoIntrinsic&gt;(Inst) &amp;&amp; !isa&lt;AllocaInst&gt;(Inst)) {</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;        Inst-&gt;<a class="code" href="classllvm_1_1Instruction.html#af67d1f3a518964d80a109bb3d9d5cf1e">moveBefore</a>(LoopEntryBranch);</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;        ++NumInstrsHoisted;</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;      }</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160; </div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;      <span class="comment">// Otherwise, create a duplicate of the instruction.</span></div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;      <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = Inst-&gt;<a class="code" href="classllvm_1_1Instruction.html#a0a4d51e372293abe5e5f6dac133e80a6">clone</a>();</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;      ++NumInstrsDuplicated;</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160; </div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;      <span class="comment">// Eagerly remap the operands of the instruction.</span></div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;      <a class="code" href="namespacellvm.html#a8f2893ab869a806d78af17691eb97be3">RemapInstruction</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, <a class="code" href="classllvm_1_1ValueMap.html">ValueMap</a>,</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;                       <a class="code" href="namespacellvm.html#a77724415203930efd07d7098cb1e437da9a24bd8dba1bef2753bc3f087435ae7f">RF_NoModuleLevelChanges</a> | <a class="code" href="namespacellvm.html#a77724415203930efd07d7098cb1e437da5633028bc27ffa8eab39cc5de65b3108">RF_IgnoreMissingLocals</a>);</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160; </div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;      <span class="comment">// Avoid inserting the same intrinsic twice.</span></div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> *DII = dyn_cast&lt;DbgVariableIntrinsic&gt;(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>))</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;        <span class="keywordflow">if</span> (DbgIntrinsics.<a class="code" href="classllvm_1_1detail_1_1DenseSetImpl.html#afe504aa31a6a354cec13f5b32d0b1d9d">count</a>(makeHash(DII))) {</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;          <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;deleteValue();</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;        }</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160; </div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;      <span class="comment">// With the operands remapped, see if the instruction constant folds or is</span></div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;      <span class="comment">// otherwise simplifyable.  This commonly occurs because the entry from PHI</span></div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;      <span class="comment">// nodes allows icmps and other instructions to fold.</span></div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *V = <a class="code" href="namespacellvm.html#aab02db480f387fca92956ef1c9a01941">simplifyInstruction</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, SQ);</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;      <span class="keywordflow">if</span> (V &amp;&amp; LI-&gt;replacementPreservesLCSSAForm(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, V)) {</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;        <span class="comment">// If so, then delete the temporary instruction and stick the folded value</span></div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;        <span class="comment">// in the map.</span></div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;        <a class="code" href="LoopRotationUtils_8cpp.html#ad2e3518508b7df1cb9b6ab4dba6557f1">InsertNewValueIntoMap</a>(<a class="code" href="classllvm_1_1ValueMap.html">ValueMap</a>, Inst, V);</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;mayHaveSideEffects()) {</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;          <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;deleteValue();</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;          <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;        }</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;        <a class="code" href="LoopRotationUtils_8cpp.html#ad2e3518508b7df1cb9b6ab4dba6557f1">InsertNewValueIntoMap</a>(<a class="code" href="classllvm_1_1ValueMap.html">ValueMap</a>, Inst, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;      }</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>) {</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;        <span class="comment">// Otherwise, stick the new instruction into the new block!</span></div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;        <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;setName(Inst-&gt;<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>());</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;        <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;insertBefore(LoopEntryBranch);</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160; </div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;        <span class="keywordflow">if</span> (<span class="keyword">auto</span> *II = dyn_cast&lt;AssumeInst&gt;(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>))</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;          AC-&gt;registerAssumption(II);</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;        <span class="comment">// MemorySSA cares whether the cloned instruction was inserted or not, and</span></div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;        <span class="comment">// not whether it can be remapped to a simplified value.</span></div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;        <span class="keywordflow">if</span> (MSSAU)</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;          <a class="code" href="LoopRotationUtils_8cpp.html#ad2e3518508b7df1cb9b6ab4dba6557f1">InsertNewValueIntoMap</a>(ValueMapMSSA, Inst, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;      }</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;    }</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160; </div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;    <span class="keywordflow">if</span> (!NoAliasDeclInstructions.empty()) {</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;      <span class="comment">// There are noalias scope declarations:</span></div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;      <span class="comment">// (general):</span></div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;      <span class="comment">// Original:    OrigPre              { OrigHeader NewHeader ... Latch }</span></div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;      <span class="comment">// after:      (OrigPre+OrigHeader&#39;) { NewHeader ... Latch OrigHeader }</span></div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;      <span class="comment">//</span></div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;      <span class="comment">// with D: llvm.experimental.noalias.scope.decl,</span></div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;      <span class="comment">//      U: !noalias or !alias.scope depending on D</span></div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;      <span class="comment">//       ... { D U1 U2 }   can transform into:</span></div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;      <span class="comment">// (0) : ... { D U1 U2 }        // no relevant rotation for this part</span></div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;      <span class="comment">// (1) : ... D&#39; { U1 U2 D }     // D is part of OrigHeader</span></div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;      <span class="comment">// (2) : ... D&#39; U1&#39; { U2 D U1 } // D, U1 are part of OrigHeader</span></div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;      <span class="comment">//</span></div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;      <span class="comment">// We now want to transform:</span></div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;      <span class="comment">// (1) -&gt; : ... D&#39; { D U1 U2 D&#39;&#39; }</span></div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;      <span class="comment">// (2) -&gt; : ... D&#39; U1&#39; { D U2 D&#39;&#39; U1&#39;&#39; }</span></div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;      <span class="comment">// D: original llvm.experimental.noalias.scope.decl</span></div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;      <span class="comment">// D&#39;, U1&#39;: duplicate with replaced scopes</span></div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;      <span class="comment">// D&#39;&#39;, U1&#39;&#39;: different duplicate with replaced scopes</span></div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;      <span class="comment">// This ensures a safe fallback to &#39;may_alias&#39; introduced by the rotate,</span></div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;      <span class="comment">// as U1&#39;&#39; and U1&#39; scopes will not be compatible wrt to the local restrict</span></div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160; </div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;      <span class="comment">// Clone the llvm.experimental.noalias.decl again for the NewHeader.</span></div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;      <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *NewHeaderInsertionPoint = &amp;(*NewHeader-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a46ef6115027606b67adcf4d28f3dac17">getFirstNonPHI</a>());</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1NoAliasScopeDeclInst.html">NoAliasScopeDeclInst</a> *NAD : NoAliasDeclInstructions) {</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;        <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  Cloning llvm.experimental.noalias.scope.decl:&quot;</span></div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;                          &lt;&lt; *NAD &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;        <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *NewNAD = NAD-&gt;<a class="code" href="classllvm_1_1Instruction.html#a0a4d51e372293abe5e5f6dac133e80a6">clone</a>();</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;        NewNAD-&gt;<a class="code" href="classllvm_1_1Instruction.html#a482498a1c760122fd33c7fc8190dd277">insertBefore</a>(NewHeaderInsertionPoint);</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;      }</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160; </div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;      <span class="comment">// Scopes must now be duplicated, once for OrigHeader and once for</span></div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;      <span class="comment">// OrigPreHeader&#39;.</span></div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;      {</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;        <span class="keyword">auto</span> &amp;<a class="code" href="NVVMIntrRange_8cpp.html#afad351d7bf10ac0446b64e7827634e94">Context</a> = NewHeader-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#aa286a0f7f5d38488d593bb7ef0ba183e">getContext</a>();</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160; </div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;        <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;MDNode *, 8&gt;</a> NoAliasDeclScopes;</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1NoAliasScopeDeclInst.html">NoAliasScopeDeclInst</a> *NAD : NoAliasDeclInstructions)</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;          NoAliasDeclScopes.push_back(NAD-&gt;getScopeList());</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160; </div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;        <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  Updating OrigHeader scopes\n&quot;</span>);</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;        <a class="code" href="namespacellvm.html#ab7abd0e34c17dcb201a4138dc65cc067">cloneAndAdaptNoAliasScopes</a>(NoAliasDeclScopes, {OrigHeader}, <a class="code" href="NVVMIntrRange_8cpp.html#afad351d7bf10ac0446b64e7827634e94">Context</a>,</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;                                   <span class="stringliteral">&quot;h.rot&quot;</span>);</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;        <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(OrigHeader-&gt;dump());</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160; </div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;        <span class="comment">// Keep the compile time impact low by only adapting the inserted block</span></div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;        <span class="comment">// of instructions in the OrigPreHeader. This might result in slightly</span></div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;        <span class="comment">// more aliasing between these instructions and those that were already</span></div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;        <span class="comment">// present, but it will be much faster when the original PreHeader is</span></div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;        <span class="comment">// large.</span></div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;        <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  Updating part of OrigPreheader scopes\n&quot;</span>);</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;        <span class="keyword">auto</span> *FirstDecl =</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;            cast&lt;Instruction&gt;(<a class="code" href="classllvm_1_1ValueMap.html">ValueMap</a>[*NoAliasDeclInstructions.begin()]);</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;        <span class="keyword">auto</span> *LastInst = &amp;OrigPreheader-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8f6f9b4a94dc0907499c03a9e1b6918b">back</a>();</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;        <a class="code" href="namespacellvm.html#ab7abd0e34c17dcb201a4138dc65cc067">cloneAndAdaptNoAliasScopes</a>(NoAliasDeclScopes, FirstDecl, LastInst,</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;                                   <a class="code" href="NVVMIntrRange_8cpp.html#afad351d7bf10ac0446b64e7827634e94">Context</a>, <span class="stringliteral">&quot;pre.rot&quot;</span>);</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;        <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(OrigPreheader-&gt;<a class="code" href="classllvm_1_1Value.html#af7dca9a9e816ef69fd9e9467f64f72b4">dump</a>());</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160; </div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;        <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  Updated NewHeader:\n&quot;</span>);</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;        <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(NewHeader-&gt;<a class="code" href="classllvm_1_1Value.html#af7dca9a9e816ef69fd9e9467f64f72b4">dump</a>());</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;      }</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;    }</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160; </div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;    <span class="comment">// Along with all the other instructions, we just cloned OrigHeader&#39;s</span></div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;    <span class="comment">// terminator into OrigPreHeader. Fix up the PHI nodes in each of OrigHeader&#39;s</span></div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;    <span class="comment">// successors by duplicating their incoming values for OrigHeader.</span></div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *SuccBB : <a class="code" href="namespacellvm.html#a26e2a938b431eaa6eca2beaa96410c9d">successors</a>(OrigHeader))</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html#a98c0a84a5dfa8bce341c829709f171e5">BasicBlock::iterator</a> BI = SuccBB-&gt;begin();</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;           <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *PN = dyn_cast&lt;PHINode&gt;(BI); ++BI)</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;        PN-&gt;<a class="code" href="classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">addIncoming</a>(PN-&gt;<a class="code" href="classllvm_1_1PHINode.html#adfb61ffe25c950c75c86310245b3ef39">getIncomingValueForBlock</a>(OrigHeader), OrigPreheader);</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160; </div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;    <span class="comment">// Now that OrigPreHeader has a clone of OrigHeader&#39;s terminator, remove</span></div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;    <span class="comment">// OrigPreHeader&#39;s old terminator (the original branch into the loop), and</span></div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;    <span class="comment">// remove the corresponding incoming values from the PHI nodes in OrigHeader.</span></div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;    LoopEntryBranch-&gt;<a class="code" href="classllvm_1_1Instruction.html#ae6b978645b8ac72d1a35e1298ffdd4f0">eraseFromParent</a>();</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160; </div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;    <span class="comment">// Update MemorySSA before the rewrite call below changes the 1:1</span></div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;    <span class="comment">// instruction:cloned_instruction_or_value mapping.</span></div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;    <span class="keywordflow">if</span> (MSSAU) {</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;      <a class="code" href="LoopRotationUtils_8cpp.html#ad2e3518508b7df1cb9b6ab4dba6557f1">InsertNewValueIntoMap</a>(ValueMapMSSA, OrigHeader, OrigPreheader);</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;      MSSAU-&gt;updateForClonedBlockIntoPred(OrigHeader, OrigPreheader,</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;                                          ValueMapMSSA);</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;    }</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160; </div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;PHINode*, 2&gt;</a> InsertedPHIs;</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;    <span class="comment">// If there were any uses of instructions in the duplicated block outside the</span></div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;    <span class="comment">// loop, update them, inserting PHI nodes as required</span></div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;    <a class="code" href="LoopRotationUtils_8cpp.html#aea660fd3de70e7854de06b7e212f0ecd">RewriteUsesOfClonedInstructions</a>(OrigHeader, OrigPreheader, <a class="code" href="classllvm_1_1ValueMap.html">ValueMap</a>, SE,</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;                                    &amp;InsertedPHIs);</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160; </div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;    <span class="comment">// Attach dbg.value intrinsics to the new phis if that phi uses a value that</span></div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;    <span class="comment">// previously had debug metadata attached. This keeps the debug info</span></div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;    <span class="comment">// up-to-date in the loop body.</span></div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;    <span class="keywordflow">if</span> (!InsertedPHIs.empty())</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;      <a class="code" href="namespacellvm.html#a4dfea19770364b880a77c3f0c1c0f67c">insertDebugValuesForPHIs</a>(OrigHeader, InsertedPHIs);</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160; </div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;    <span class="comment">// NewHeader is now the header of the loop.</span></div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;    L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#afb94ad465ab2bc46ff40bec6263f7355">moveToHeader</a>(NewHeader);</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a58c5b170ea68b41e94ebb0019523a68f">getHeader</a>() == NewHeader &amp;&amp; <span class="stringliteral">&quot;Latch block is our new header&quot;</span>);</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160; </div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;    <span class="comment">// Inform DT about changes to the CFG.</span></div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;    <span class="keywordflow">if</span> (DT) {</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;      <span class="comment">// The OrigPreheader branches to the NewHeader and Exit now. Then, inform</span></div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;      <span class="comment">// the DT about the removed edge to the OrigHeader (that got removed).</span></div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;      <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;DominatorTree::UpdateType, 3&gt;</a> Updates;</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;      Updates.push_back({<a class="code" href="classllvm_1_1DominatorTreeBase.html#a9aeeca2833810f01b20545a46fe22503">DominatorTree::Insert</a>, OrigPreheader, Exit});</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;      Updates.push_back({<a class="code" href="classllvm_1_1DominatorTreeBase.html#a9aeeca2833810f01b20545a46fe22503">DominatorTree::Insert</a>, OrigPreheader, NewHeader});</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;      Updates.push_back({<a class="code" href="classllvm_1_1DominatorTreeBase.html#a71c91cbbfc1c0ecf9a69e10ccf739bd7">DominatorTree::Delete</a>, OrigPreheader, OrigHeader});</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160; </div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;      <span class="keywordflow">if</span> (MSSAU) {</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;        MSSAU-&gt;applyUpdates(Updates, *DT, <span class="comment">/*UpdateDT=*/</span><span class="keyword">true</span>);</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#aa29fe161c408879ada30c90ebbf55dcf">VerifyMemorySSA</a>)</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;          MSSAU-&gt;getMemorySSA()-&gt;verifyMemorySSA();</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;        DT-&gt;applyUpdates(Updates);</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;      }</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;    }</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160; </div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;    <span class="comment">// At this point, we&#39;ve finished our major CFG changes.  As part of cloning</span></div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;    <span class="comment">// the loop into the preheader we&#39;ve simplified instructions and the</span></div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;    <span class="comment">// duplicated conditional branch may now be branching on a constant.  If it is</span></div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;    <span class="comment">// branching on a constant and if that constant means that we enter the loop,</span></div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;    <span class="comment">// then we fold away the cond branch to an uncond branch.  This simplifies the</span></div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;    <span class="comment">// loop in cases important for nested loops, and it also means we don&#39;t have</span></div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;    <span class="comment">// to split as many edges.</span></div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;    <a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a> *PHBI = cast&lt;BranchInst&gt;(OrigPreheader-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>());</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(PHBI-&gt;<a class="code" href="classllvm_1_1BranchInst.html#a7e4be8b16fbd68c9045a388904044e01">isConditional</a>() &amp;&amp; <span class="stringliteral">&quot;Should be clone of BI condbr!&quot;</span>);</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;    <span class="keywordflow">if</span> (!isa&lt;ConstantInt&gt;(PHBI-&gt;<a class="code" href="classllvm_1_1BranchInst.html#aac456a62894c9f0f8e9f06373bbf40f0">getCondition</a>()) ||</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;        PHBI-&gt;<a class="code" href="classllvm_1_1BranchInst.html#ad97f2e60cf22f15e0cf617af52309031">getSuccessor</a>(cast&lt;ConstantInt&gt;(PHBI-&gt;<a class="code" href="classllvm_1_1BranchInst.html#aac456a62894c9f0f8e9f06373bbf40f0">getCondition</a>())-&gt;isZero()) !=</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;        NewHeader) {</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;      <span class="comment">// The conditional branch can&#39;t be folded, handle the general case.</span></div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;      <span class="comment">// Split edges as necessary to preserve LoopSimplify form.</span></div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160; </div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;      <span class="comment">// Right now OrigPreHeader has two successors, NewHeader and ExitBlock, and</span></div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;      <span class="comment">// thus is not a preheader anymore.</span></div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;      <span class="comment">// Split the edge to form a real preheader.</span></div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;      <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *NewPH = <a class="code" href="namespacellvm.html#ab61955a622d233750894890e0704da5c">SplitCriticalEdge</a>(</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;                                            OrigPreheader, NewHeader,</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;                                            <a class="code" href="structllvm_1_1CriticalEdgeSplittingOptions.html">CriticalEdgeSplittingOptions</a>(DT, LI, MSSAU).setPreserveLCSSA());</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;      NewPH-&gt;<a class="code" href="classllvm_1_1Value.html#a35ee267850af7c235474a8c46c7ac5af">setName</a>(NewHeader-&gt;<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>() + <span class="stringliteral">&quot;.lr.ph&quot;</span>);</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160; </div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;      <span class="comment">// Preserve canonical loop form, which means that &#39;Exit&#39; should have only</span></div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;      <span class="comment">// one predecessor. Note that Exit could be an exit block for multiple</span></div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;      <span class="comment">// nested loops, causing both of the edges to now be critical and need to</span></div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;      <span class="comment">// be split.</span></div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;      <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;BasicBlock *, 4&gt;</a> ExitPreds(<a class="code" href="namespacellvm.html#acb22fb04083152eee862457e42e8dc31">predecessors</a>(Exit));</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;      <span class="keywordtype">bool</span> SplitLatchEdge = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *ExitPred : ExitPreds) {</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;        <span class="comment">// We only need to split loop exit edges.</span></div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;        <a class="code" href="classllvm_1_1Loop.html">Loop</a> *PredLoop = LI-&gt;getLoopFor(ExitPred);</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;        <span class="keywordflow">if</span> (!PredLoop || PredLoop-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a04337b572d34ea413c35dbac5d75530b">contains</a>(Exit) ||</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;            isa&lt;IndirectBrInst&gt;(ExitPred-&gt;getTerminator()))</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;        SplitLatchEdge |= L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a1230fd674d2609b96527fe65eaf40b1b">getLoopLatch</a>() == ExitPred;</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;        <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *ExitSplit = <a class="code" href="namespacellvm.html#ab61955a622d233750894890e0704da5c">SplitCriticalEdge</a>(</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;                                                  ExitPred, Exit,</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;                                                  <a class="code" href="structllvm_1_1CriticalEdgeSplittingOptions.html">CriticalEdgeSplittingOptions</a>(DT, LI, MSSAU).setPreserveLCSSA());</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;        ExitSplit-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a41da369a9d31d911c8af724d5630f724">moveBefore</a>(Exit);</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;      }</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(SplitLatchEdge &amp;&amp;</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;             <span class="stringliteral">&quot;Despite splitting all preds, failed to split latch exit?&quot;</span>);</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;      (void)SplitLatchEdge;</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;      <span class="comment">// We can fold the conditional branch in the preheader, this makes things</span></div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;      <span class="comment">// simpler. The first step is to remove the extra edge to the Exit block.</span></div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;      Exit-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#afe7af0c3ec2ef1f525173acd2ea4ba60">removePredecessor</a>(OrigPreheader, <span class="keyword">true</span> <span class="comment">/*preserve LCSSA*/</span>);</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;      <a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a> *NewBI = <a class="code" href="classllvm_1_1BranchInst.html#a38df51256d4b415b6a817b5e1c6d4d36">BranchInst::Create</a>(NewHeader, PHBI);</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;      NewBI-&gt;<a class="code" href="classllvm_1_1Instruction.html#ae8f5bf5cc06f696b52c709677df00fbf">setDebugLoc</a>(PHBI-&gt;<a class="code" href="classllvm_1_1Instruction.html#ab4f3bf98b5054831b608852e33427814">getDebugLoc</a>());</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;      PHBI-&gt;<a class="code" href="classllvm_1_1Instruction.html#ae6b978645b8ac72d1a35e1298ffdd4f0">eraseFromParent</a>();</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160; </div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;      <span class="comment">// With our CFG finalized, update DomTree if it is available.</span></div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;      <span class="keywordflow">if</span> (DT) DT-&gt;deleteEdge(OrigPreheader, Exit);</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160; </div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;      <span class="comment">// Update MSSA too, if available.</span></div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;      <span class="keywordflow">if</span> (MSSAU)</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;        MSSAU-&gt;removeEdge(OrigPreheader, Exit);</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;    }</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160; </div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#ac3280e7f76f955403fe17eacf126b90d">getLoopPreheader</a>() &amp;&amp; <span class="stringliteral">&quot;Invalid loop preheader after loop rotation&quot;</span>);</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a1230fd674d2609b96527fe65eaf40b1b">getLoopLatch</a>() &amp;&amp; <span class="stringliteral">&quot;Invalid loop latch after loop rotation&quot;</span>);</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160; </div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;    <span class="keywordflow">if</span> (MSSAU &amp;&amp; <a class="code" href="namespacellvm.html#aa29fe161c408879ada30c90ebbf55dcf">VerifyMemorySSA</a>)</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;      MSSAU-&gt;getMemorySSA()-&gt;verifyMemorySSA();</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160; </div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;    <span class="comment">// Now that the CFG and DomTree are in a consistent state again, try to merge</span></div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;    <span class="comment">// the OrigHeader block into OrigLatch.  This will succeed if they are</span></div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;    <span class="comment">// connected by an unconditional branch.  This is just a cleanup so the</span></div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;    <span class="comment">// emitted code isn&#39;t too gross in this common case.</span></div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;    <a class="code" href="classllvm_1_1DomTreeUpdater.html">DomTreeUpdater</a> DTU(DT, <a class="code" href="classllvm_1_1DomTreeUpdater.html#a8bf4c30be33831d7882d6880b8ae433da483c336d7d9fe614a8b5aae1e746e01f">DomTreeUpdater::UpdateStrategy::Eager</a>);</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *PredBB = OrigHeader-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a74aa9daea070e2ad3394a3ec58b7316a">getUniquePredecessor</a>();</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;    <span class="keywordtype">bool</span> DidMerge = <a class="code" href="namespacellvm.html#aa76a2cf19b821f320ab439d5659ef4b9">MergeBlockIntoPredecessor</a>(OrigHeader, &amp;DTU, LI, MSSAU);</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;    <span class="keywordflow">if</span> (DidMerge)</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;      <a class="code" href="namespacellvm.html#a08f3f942afc0ee9115a8f9fa87e9191d">RemoveRedundantDbgInstrs</a>(PredBB);</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160; </div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;    <span class="keywordflow">if</span> (MSSAU &amp;&amp; <a class="code" href="namespacellvm.html#aa29fe161c408879ada30c90ebbf55dcf">VerifyMemorySSA</a>)</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;      MSSAU-&gt;getMemorySSA()-&gt;verifyMemorySSA();</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160; </div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LoopRotation: into &quot;</span>; L-&gt;<a class="code" href="classllvm_1_1Loop.html#a61a487a3724136e3332c86f2f26189ce">dump</a>());</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160; </div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;    ++NumRotated;</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160; </div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;    Rotated = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;    SimplifiedLatch = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160; </div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;    <span class="comment">// Check that new latch is a deoptimizing exit and then repeat rotation if possible.</span></div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;    <span class="comment">// Deoptimizing latch exit is not a generally typical case, so we just loop over.</span></div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;    <span class="comment">// TODO: if it becomes a performance bottleneck extend rotation algorithm</span></div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;    <span class="comment">// to handle multiple rotations in one go.</span></div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;  } <span class="keywordflow">while</span> (<a class="code" href="LoopRotationUtils_8cpp.html#afab629af20651c2c96306ec11a09819b">MultiRotate</a> &amp;&amp; <a class="code" href="LoopRotationUtils_8cpp.html#a20d58a0069048b80461676a4132ad1d4">canRotateDeoptimizingLatchExit</a>(L));</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160; </div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160; </div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;}</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;<span class="comment">/// Determine whether the instructions in this range may be safely and cheaply</span></div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;<span class="comment">/// speculated. This is not an important enough situation to develop complex</span></div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;<span class="comment">/// heuristics. We handle a single arithmetic instruction along with any type</span></div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;<span class="comment">/// conversions.</span></div>
<div class="line"><a name="l00698"></a><span class="lineno"><a class="line" href="LoopRotationUtils_8cpp.html#a41713fe2635c183d98e1a6b7c1cedff5">  698</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="LoopRotationUtils_8cpp.html#a41713fe2635c183d98e1a6b7c1cedff5">shouldSpeculateInstrs</a>(<a class="code" href="classllvm_1_1BasicBlock.html#a98c0a84a5dfa8bce341c829709f171e5">BasicBlock::iterator</a> Begin,</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;                                  <a class="code" href="classllvm_1_1BasicBlock.html#a98c0a84a5dfa8bce341c829709f171e5">BasicBlock::iterator</a> End, <a class="code" href="classllvm_1_1Loop.html">Loop</a> *L) {</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;  <span class="keywordtype">bool</span> seenIncrement = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;  <span class="keywordtype">bool</span> MultiExitLoop = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160; </div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;  <span class="keywordflow">if</span> (!L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#adf6f53d7652b471c995b7d10f3dd2729">getExitingBlock</a>())</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;    MultiExitLoop = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160; </div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html#a98c0a84a5dfa8bce341c829709f171e5">BasicBlock::iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = Begin; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != End; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160; </div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm.html#abe76d72cda6b2b4562c72accb510040b">isSafeToSpeculativelyExecute</a>(&amp;*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160; </div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;    <span class="keywordflow">if</span> (isa&lt;DbgInfoIntrinsic&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160; </div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;    <span class="keywordflow">switch</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOpcode()) {</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;    <span class="keywordflow">case</span> Instruction::GetElementPtr:</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;      <span class="comment">// GEPs are cheap if all indices are constant.</span></div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;      <span class="keywordflow">if</span> (!cast&lt;GEPOperator&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)-&gt;hasAllConstantIndices())</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;      <span class="comment">// fall-thru to increment case</span></div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;      [[fallthrough]];</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a2b016c207343046b2bac45e69e76dcec">Instruction::Add</a>:</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;    <span class="keywordflow">case</span> Instruction::Sub:</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;    <span class="keywordflow">case</span> Instruction::And:</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;    <span class="keywordflow">case</span> Instruction::Or:</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;    <span class="keywordflow">case</span> Instruction::Xor:</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;    <span class="keywordflow">case</span> Instruction::Shl:</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;    <span class="keywordflow">case</span> Instruction::LShr:</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;    <span class="keywordflow">case</span> Instruction::AShr: {</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *IVOpnd =</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;          !isa&lt;Constant&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(0))</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;              ? <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(0)</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;              : !isa&lt;Constant&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(1)) ? <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(1) : <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;      <span class="keywordflow">if</span> (!IVOpnd)</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160; </div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;      <span class="comment">// If increment operand is used outside of the loop, this speculation</span></div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;      <span class="comment">// could cause extra live range interference.</span></div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;      <span class="keywordflow">if</span> (MultiExitLoop) {</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1User.html">User</a> *UseI : IVOpnd-&gt;<a class="code" href="classllvm_1_1Value.html#ab4e0512c7e1c7adaa56677e3155685f1">users</a>()) {</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;          <span class="keyword">auto</span> *UserInst = cast&lt;Instruction&gt;(UseI);</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;          <span class="keywordflow">if</span> (!L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a04337b572d34ea413c35dbac5d75530b">contains</a>(UserInst))</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;        }</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;      }</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160; </div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;      <span class="keywordflow">if</span> (seenIncrement)</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;      seenIncrement = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;    }</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;    <span class="keywordflow">case</span> Instruction::Trunc:</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;    <span class="keywordflow">case</span> Instruction::ZExt:</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;    <span class="keywordflow">case</span> Instruction::SExt:</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;      <span class="comment">// ignore type conversions</span></div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;    }</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;  }</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;}</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;<span class="comment">/// Fold the loop tail into the loop exit by speculating the loop tail</span></div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;<span class="comment">/// instructions. Typically, this is a single post-increment. In the case of a</span></div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;<span class="comment">/// simple 2-block loop, hoisting the increment can be much better than</span></div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;<span class="comment">/// duplicating the entire loop header. In the case of loops with early exits,</span></div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;<span class="comment">/// rotation will not work anyway, but simplifyLoopLatch will put the loop in</span></div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;<span class="comment">/// canonical form so downstream passes can handle it.</span></div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;<span class="comment">/// I don&#39;t believe this invalidates SCEV.</span></div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> LoopRotate::simplifyLoopLatch(<a class="code" href="classllvm_1_1Loop.html">Loop</a> *L) {</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Latch = L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a1230fd674d2609b96527fe65eaf40b1b">getLoopLatch</a>();</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;  <span class="keywordflow">if</span> (!Latch || Latch-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a315f26c899f5ea8a780db4740ba95ef4">hasAddressTaken</a>())</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160; </div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;  <a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a> *Jmp = dyn_cast&lt;BranchInst&gt;(Latch-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>());</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;  <span class="keywordflow">if</span> (!Jmp || !Jmp-&gt;<a class="code" href="classllvm_1_1BranchInst.html#ad56f6a9b5cd05940017c4544df48bc30">isUnconditional</a>())</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160; </div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *LastExit = Latch-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a59fb91d1691350f7d1b8e8a114e3f2a4">getSinglePredecessor</a>();</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;  <span class="keywordflow">if</span> (!LastExit || !L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#af691775d5a45e28afbdb3e97cab22eee">isLoopExiting</a>(LastExit))</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160; </div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;  <a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a> *BI = dyn_cast&lt;BranchInst&gt;(LastExit-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>());</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;  <span class="keywordflow">if</span> (!BI)</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160; </div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="LoopRotationUtils_8cpp.html#a41713fe2635c183d98e1a6b7c1cedff5">shouldSpeculateInstrs</a>(Latch-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>(), Jmp-&gt;<a class="code" href="classllvm_1_1ilist__node__impl.html#af719fc783be6589465137d997701a432">getIterator</a>(), L))</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160; </div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Folding loop latch &quot;</span> &lt;&lt; Latch-&gt;<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>() &lt;&lt; <span class="stringliteral">&quot; into &quot;</span></div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;                    &lt;&lt; LastExit-&gt;<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160; </div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;  <a class="code" href="classllvm_1_1DomTreeUpdater.html">DomTreeUpdater</a> DTU(DT, <a class="code" href="classllvm_1_1DomTreeUpdater.html#a8bf4c30be33831d7882d6880b8ae433da483c336d7d9fe614a8b5aae1e746e01f">DomTreeUpdater::UpdateStrategy::Eager</a>);</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;  <a class="code" href="namespacellvm.html#aa76a2cf19b821f320ab439d5659ef4b9">MergeBlockIntoPredecessor</a>(Latch, &amp;DTU, LI, MSSAU, <span class="keyword">nullptr</span>,</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;                            <span class="comment">/*PredecessorWithTwoSuccessors=*/</span><span class="keyword">true</span>);</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160; </div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;    <span class="keywordflow">if</span> (SE) {</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;      <span class="comment">// Merging blocks may remove blocks reference in the block disposition cache. Clear the cache.</span></div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;      SE-&gt;forgetBlockAndLoopDispositions();</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;    }</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160; </div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;  <span class="keywordflow">if</span> (MSSAU &amp;&amp; <a class="code" href="namespacellvm.html#aa29fe161c408879ada30c90ebbf55dcf">VerifyMemorySSA</a>)</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;    MSSAU-&gt;getMemorySSA()-&gt;verifyMemorySSA();</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160; </div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;}</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;<span class="comment">/// Rotate \c L, and return true if any modification was made.</span></div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> LoopRotate::processLoop(<a class="code" href="classllvm_1_1Loop.html">Loop</a> *L) {</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;  <span class="comment">// Save the loop metadata.</span></div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;  <a class="code" href="classllvm_1_1MDNode.html">MDNode</a> *LoopMD = L-&gt;<a class="code" href="classllvm_1_1Loop.html#afbcd78588d5235f99698b5c30f591382">getLoopID</a>();</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160; </div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;  <span class="keywordtype">bool</span> SimplifiedLatch = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160; </div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;  <span class="comment">// Simplify the loop latch before attempting to rotate the header</span></div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;  <span class="comment">// upward. Rotation may not be needed if the loop tail can be folded into the</span></div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;  <span class="comment">// loop exit.</span></div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;  <span class="keywordflow">if</span> (!RotationOnly)</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;    SimplifiedLatch = simplifyLoopLatch(L);</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160; </div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;  <span class="keywordtype">bool</span> MadeChange = rotateLoop(L, SimplifiedLatch);</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((!MadeChange || L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#af691775d5a45e28afbdb3e97cab22eee">isLoopExiting</a>(L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a1230fd674d2609b96527fe65eaf40b1b">getLoopLatch</a>())) &amp;&amp;</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;         <span class="stringliteral">&quot;Loop latch should be exiting after loop-rotate.&quot;</span>);</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160; </div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;  <span class="comment">// Restore the loop metadata.</span></div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;  <span class="comment">// NB! We presume LoopRotation DOESN&#39;T ADD its own metadata.</span></div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;  <span class="keywordflow">if</span> ((MadeChange || SimplifiedLatch) &amp;&amp; LoopMD)</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;    L-&gt;<a class="code" href="classllvm_1_1Loop.html#adf4be757fa30ca7fe3e8b119438100f0">setLoopID</a>(LoopMD);</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160; </div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;  <span class="keywordflow">return</span> MadeChange || SimplifiedLatch;</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;}</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160; </div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;<span class="comment">/// The utility to convert a loop into a loop with bottom test.</span></div>
<div class="line"><a name="l00836"></a><span class="lineno"><a class="line" href="namespacellvm.html#af450da528c31bc2f2780ea2a243911ad">  836</a></span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> <a class="code" href="namespacellvm.html#af450da528c31bc2f2780ea2a243911ad">llvm::LoopRotation</a>(<a class="code" href="classllvm_1_1Loop.html">Loop</a> *L, <a class="code" href="classllvm_1_1LoopInfo.html">LoopInfo</a> *LI, <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetTransformInfo.html">TargetTransformInfo</a> *<a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>,</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;                        <a class="code" href="classllvm_1_1AssumptionCache.html">AssumptionCache</a> *AC, <a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> *DT,</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;                        <a class="code" href="classllvm_1_1ScalarEvolution.html">ScalarEvolution</a> *SE, <a class="code" href="classllvm_1_1MemorySSAUpdater.html">MemorySSAUpdater</a> *MSSAU,</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;                        <span class="keyword">const</span> <a class="code" href="structllvm_1_1SimplifyQuery.html">SimplifyQuery</a> &amp;SQ, <span class="keywordtype">bool</span> RotationOnly = <span class="keyword">true</span>,</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;                        <span class="keywordtype">unsigned</span> Threshold = <span class="keywordtype">unsigned</span>(-1),</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;                        <span class="keywordtype">bool</span> IsUtilMode = <span class="keyword">true</span>, <span class="keywordtype">bool</span> PrepareForLTO) {</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;  LoopRotate LR(Threshold, LI, <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>, AC, DT, SE, MSSAU, SQ, RotationOnly,</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;                IsUtilMode, PrepareForLTO);</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;  <span class="keywordflow">return</span> LR.processLoop(L);</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;}</div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="aclassllvm_1_1NoAliasScopeDeclInst_html"><div class="ttname"><a href="classllvm_1_1NoAliasScopeDeclInst.html">llvm::NoAliasScopeDeclInst</a></div><div class="ttdef"><b>Definition:</b> <a href="IntrinsicInst_8h_source.html#l01429">IntrinsicInst.h:1429</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a7653277511df1034148a37520a585bb5"><div class="ttname"><a href="classllvm_1_1Instruction.html#a7653277511df1034148a37520a585bb5">llvm::Instruction::isTerminator</a></div><div class="ttdeci">bool isTerminator() const</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00171">Instruction.h:171</a></div></div>
<div class="ttc" id="aAssumptionCache_8h_html"><div class="ttname"><a href="AssumptionCache_8h.html">AssumptionCache.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a0b4e7bee9b8575cc7db73329f1a561bd"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a0b4e7bee9b8575cc7db73329f1a561bd">llvm::BasicBlock::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00316">BasicBlock.h:316</a></div></div>
<div class="ttc" id="anamespacellvm_html"><div class="ttname"><a href="namespacellvm.html">llvm</a></div><div class="ttdoc">This is an optimization pass for GlobalISel generic memory operations.</div><div class="ttdef"><b>Definition:</b> <a href="AddressRanges_8h_source.html#l00018">AddressRanges.h:18</a></div></div>
<div class="ttc" id="anamespacellvm_html_a02981de53fb6ffd384d39addc4d25f37"><div class="ttname"><a href="namespacellvm.html#a02981de53fb6ffd384d39addc4d25f37">llvm::drop_begin</a></div><div class="ttdeci">auto drop_begin(T &amp;&amp;RangeOrContainer, size_t N=1)</div><div class="ttdoc">Return a range covering RangeOrContainer with the first N elements excluded.</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l00386">STLExtras.h:386</a></div></div>
<div class="ttc" id="aValueMapper_8h_html"><div class="ttname"><a href="ValueMapper_8h.html">ValueMapper.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a98c0a84a5dfa8bce341c829709f171e5"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a98c0a84a5dfa8bce341c829709f171e5">llvm::BasicBlock::iterator</a></div><div class="ttdeci">InstListType::iterator iterator</div><div class="ttdoc">Instruction iterators...</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00087">BasicBlock.h:87</a></div></div>
<div class="ttc" id="aIntrinsicInst_8h_html"><div class="ttname"><a href="IntrinsicInst_8h.html">IntrinsicInst.h</a></div></div>
<div class="ttc" id="astructllvm_1_1SimplifyQuery_html"><div class="ttname"><a href="structllvm_1_1SimplifyQuery.html">llvm::SimplifyQuery</a></div><div class="ttdef"><b>Definition:</b> <a href="InstructionSimplify_8h_source.html#l00093">InstructionSimplify.h:93</a></div></div>
<div class="ttc" id="aMemorySSAUpdater_8h_html"><div class="ttname"><a href="MemorySSAUpdater_8h.html">MemorySSAUpdater.h</a></div></div>
<div class="ttc" id="aLoopRotationUtils_8cpp_html_a41713fe2635c183d98e1a6b7c1cedff5"><div class="ttname"><a href="LoopRotationUtils_8cpp.html#a41713fe2635c183d98e1a6b7c1cedff5">shouldSpeculateInstrs</a></div><div class="ttdeci">static bool shouldSpeculateInstrs(BasicBlock::iterator Begin, BasicBlock::iterator End, Loop *L)</div><div class="ttdoc">Determine whether the instructions in this range may be safely and cheaply speculated.</div><div class="ttdef"><b>Definition:</b> <a href="LoopRotationUtils_8cpp_source.html#l00698">LoopRotationUtils.cpp:698</a></div></div>
<div class="ttc" id="aclassllvm_1_1Loop_html"><div class="ttname"><a href="classllvm_1_1Loop.html">llvm::Loop</a></div><div class="ttdoc">Represents a single loop in the control flow graph.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00547">LoopInfo.h:547</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_af7dca9a9e816ef69fd9e9467f64f72b4"><div class="ttname"><a href="classllvm_1_1Value.html#af7dca9a9e816ef69fd9e9467f64f72b4">llvm::Value::dump</a></div><div class="ttdeci">void dump() const</div><div class="ttdoc">Support for debugging, callable in GDB: V-&gt;dump()</div><div class="ttdef"><b>Definition:</b> <a href="AsmWriter_8cpp_source.html#l04942">AsmWriter.cpp:4942</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopBase_html_a04337b572d34ea413c35dbac5d75530b"><div class="ttname"><a href="classllvm_1_1LoopBase.html#a04337b572d34ea413c35dbac5d75530b">llvm::LoopBase::contains</a></div><div class="ttdeci">bool contains(const LoopT *L) const</div><div class="ttdoc">Return true if the specified loop is contained within in this loop.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00139">LoopInfo.h:139</a></div></div>
<div class="ttc" id="anamespacellvm_html_a26e2a938b431eaa6eca2beaa96410c9d"><div class="ttname"><a href="namespacellvm.html#a26e2a938b431eaa6eca2beaa96410c9d">llvm::successors</a></div><div class="ttdeci">auto successors(const MachineBasicBlock *BB)</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l01265">MachineBasicBlock.h:1265</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVector_html"><div class="ttname"><a href="classllvm_1_1SmallVector.html">llvm::SmallVector</a></div><div class="ttdoc">This is a 'vector' (really, a variable-sized array), optimized for the case when the array is small.</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l01199">SmallVector.h:1199</a></div></div>
<div class="ttc" id="aStatistic_8h_html"><div class="ttname"><a href="Statistic_8h.html">Statistic.h</a></div></div>
<div class="ttc" id="astructllvm_1_1CodeMetrics_html"><div class="ttname"><a href="structllvm_1_1CodeMetrics.html">llvm::CodeMetrics</a></div><div class="ttdoc">Utility to calculate the size and a few similar metrics for a set of basic blocks.</div><div class="ttdef"><b>Definition:</b> <a href="CodeMetrics_8h_source.html#l00031">CodeMetrics.h:31</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfo_html"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html">llvm::TargetTransformInfo</a></div><div class="ttdoc">This pass provides access to the codegen interfaces that are needed for IR-level transformations.</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l00196">TargetTransformInfo.h:196</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallDenseSet_html"><div class="ttname"><a href="classllvm_1_1SmallDenseSet.html">llvm::SmallDenseSet</a></div><div class="ttdoc">Implements a dense probed hash-table based set with some number of buckets stored inline.</div><div class="ttdef"><b>Definition:</b> <a href="DenseSet_8h_source.html#l00286">DenseSet.h:286</a></div></div>
<div class="ttc" id="aDomTreeUpdater_8h_html"><div class="ttname"><a href="DomTreeUpdater_8h.html">DomTreeUpdater.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1ScalarEvolution_html"><div class="ttname"><a href="classllvm_1_1ScalarEvolution.html">llvm::ScalarEvolution</a></div><div class="ttdoc">The main scalar evolution driver.</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8h_source.html#l00452">ScalarEvolution.h:452</a></div></div>
<div class="ttc" id="aValueTracking_8h_html"><div class="ttname"><a href="ValueTracking_8h.html">ValueTracking.h</a></div></div>
<div class="ttc" id="aTransforms_2Utils_2Local_8h_html"><div class="ttname"><a href="Transforms_2Utils_2Local_8h.html">Local.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a482498a1c760122fd33c7fc8190dd277"><div class="ttname"><a href="classllvm_1_1Instruction.html#a482498a1c760122fd33c7fc8190dd277">llvm::Instruction::insertBefore</a></div><div class="ttdeci">void insertBefore(Instruction *InsertPos)</div><div class="ttdoc">Insert an unlinked instruction into a basic block immediately before the specified instruction.</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8cpp_source.html#l00088">Instruction.cpp:88</a></div></div>
<div class="ttc" id="aclassllvm_1_1DominatorTree_html"><div class="ttname"><a href="classllvm_1_1DominatorTree.html">llvm::DominatorTree</a></div><div class="ttdoc">Concrete subclass of DominatorTreeBase that is used to compute a normal dominator tree.</div><div class="ttdef"><b>Definition:</b> <a href="Dominators_8h_source.html#l00166">Dominators.h:166</a></div></div>
<div class="ttc" id="aLoopRotationUtils_8cpp_html_a7fdcbbf4a72726c120dc9d33b6ee13bb"><div class="ttname"><a href="LoopRotationUtils_8cpp.html#a7fdcbbf4a72726c120dc9d33b6ee13bb">profitableToRotateLoopExitingLatch</a></div><div class="ttdeci">static bool profitableToRotateLoopExitingLatch(Loop *L)</div><div class="ttdef"><b>Definition:</b> <a href="LoopRotationUtils_8cpp_source.html#l00184">LoopRotationUtils.cpp:184</a></div></div>
<div class="ttc" id="anamespacellvm_1_1cl_html_a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6"><div class="ttname"><a href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">llvm::cl::Hidden</a></div><div class="ttdeci">@ Hidden</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00138">CommandLine.h:138</a></div></div>
<div class="ttc" id="aScalarEvolution_8h_html"><div class="ttname"><a href="ScalarEvolution_8h.html">ScalarEvolution.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_ab61955a622d233750894890e0704da5c"><div class="ttname"><a href="namespacellvm.html#ab61955a622d233750894890e0704da5c">llvm::SplitCriticalEdge</a></div><div class="ttdeci">BasicBlock * SplitCriticalEdge(Instruction *TI, unsigned SuccNum, const CriticalEdgeSplittingOptions &amp;Options=CriticalEdgeSplittingOptions(), const Twine &amp;BBName=&quot;&quot;)</div><div class="ttdoc">If this edge is a critical edge, insert a new node to split the critical edge.</div><div class="ttdef"><b>Definition:</b> <a href="BreakCriticalEdges_8cpp_source.html#l00101">BreakCriticalEdges.cpp:101</a></div></div>
<div class="ttc" id="aclassllvm_1_1DominatorTreeBase_html_a9aeeca2833810f01b20545a46fe22503"><div class="ttname"><a href="classllvm_1_1DominatorTreeBase.html#a9aeeca2833810f01b20545a46fe22503">llvm::DominatorTreeBase&lt; BasicBlock, false &gt;::Insert</a></div><div class="ttdeci">static constexpr UpdateKind Insert</div><div class="ttdef"><b>Definition:</b> <a href="GenericDomTree_8h_source.html#l00258">GenericDomTree.h:258</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a383175f96316074965ad115706bd49d7"><div class="ttname"><a href="classllvm_1_1Instruction.html#a383175f96316074965ad115706bd49d7">llvm::Instruction::mayWriteToMemory</a></div><div class="ttdeci">bool mayWriteToMemory() const LLVM_READONLY</div><div class="ttdoc">Return true if this instruction may modify memory.</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8cpp_source.html#l00646">Instruction.cpp:646</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSet_html"><div class="ttname"><a href="classllvm_1_1SmallPtrSet.html">llvm::SmallPtrSet</a></div><div class="ttdoc">SmallPtrSet - This class implements a set which is optimized for holding SmallSize or less elements.</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00450">SmallPtrSet.h:450</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a59fb91d1691350f7d1b8e8a114e3f2a4"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a59fb91d1691350f7d1b8e8a114e3f2a4">llvm::BasicBlock::getSinglePredecessor</a></div><div class="ttdeci">const BasicBlock * getSinglePredecessor() const</div><div class="ttdoc">Return the predecessor of this block if it has a single predecessor block.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00284">BasicBlock.cpp:284</a></div></div>
<div class="ttc" id="aclassllvm_1_1DIExpression_html"><div class="ttname"><a href="classllvm_1_1DIExpression.html">llvm::DIExpression</a></div><div class="ttdoc">DWARF expression.</div><div class="ttdef"><b>Definition:</b> <a href="DebugInfoMetadata_8h_source.html#l02611">DebugInfoMetadata.h:2611</a></div></div>
<div class="ttc" id="aclassllvm_1_1detail_1_1DenseSetImpl_html_a79eed48913651aeedda2eed25201ea84"><div class="ttname"><a href="classllvm_1_1detail_1_1DenseSetImpl.html#a79eed48913651aeedda2eed25201ea84">llvm::detail::DenseSetImpl&lt; ValueT, SmallDenseMap&lt; ValueT, detail::DenseSetEmpty, 4, DenseMapInfo&lt; ValueT &gt;, detail::DenseSetPair&lt; ValueT &gt; &gt;, DenseMapInfo&lt; ValueT &gt; &gt;::insert</a></div><div class="ttdeci">std::pair&lt; iterator, bool &gt; insert(const ValueT &amp;V)</div><div class="ttdef"><b>Definition:</b> <a href="DenseSet_8h_source.html#l00206">DenseSet.h:206</a></div></div>
<div class="ttc" id="aclassllvm_1_1detail_1_1DenseSetImpl_html_afe504aa31a6a354cec13f5b32d0b1d9d"><div class="ttname"><a href="classllvm_1_1detail_1_1DenseSetImpl.html#afe504aa31a6a354cec13f5b32d0b1d9d">llvm::detail::DenseSetImpl&lt; ValueT, SmallDenseMap&lt; ValueT, detail::DenseSetEmpty, 4, DenseMapInfo&lt; ValueT &gt;, detail::DenseSetPair&lt; ValueT &gt; &gt;, DenseMapInfo&lt; ValueT &gt; &gt;::count</a></div><div class="ttdeci">size_type count(const_arg_type_t&lt; ValueT &gt; V) const</div><div class="ttdoc">Return 1 if the specified key is in the set, 0 otherwise.</div><div class="ttdef"><b>Definition:</b> <a href="DenseSet_8h_source.html#l00097">DenseSet.h:97</a></div></div>
<div class="ttc" id="aDebug_8h_html_a08efc68d15935eb8889400a46c3749ba"><div class="ttname"><a href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a></div><div class="ttdeci">#define LLVM_DEBUG(X)</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8h_source.html#l00101">Debug.h:101</a></div></div>
<div class="ttc" id="aLoopRotationUtils_8cpp_html_afab629af20651c2c96306ec11a09819b"><div class="ttname"><a href="LoopRotationUtils_8cpp.html#afab629af20651c2c96306ec11a09819b">MultiRotate</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; MultiRotate(&quot;loop-rotate-multi&quot;, cl::init(false), cl::Hidden, cl::desc(&quot;Allow loop rotation multiple times in order to reach &quot; &quot;a better latch exit&quot;))</div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html"><div class="ttname"><a href="classllvm_1_1BasicBlock.html">llvm::BasicBlock</a></div><div class="ttdoc">LLVM Basic Block Representation.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00055">BasicBlock.h:55</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a9149819221d66953ac6c2938b87f0136"><div class="ttname"><a href="classllvm_1_1Instruction.html#a9149819221d66953ac6c2938b87f0136">llvm::Instruction::mayReadFromMemory</a></div><div class="ttdeci">bool mayReadFromMemory() const LLVM_READONLY</div><div class="ttdoc">Return true if this instruction may read memory.</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8cpp_source.html#l00626">Instruction.cpp:626</a></div></div>
<div class="ttc" id="aNVVMIntrRange_8cpp_html_afad351d7bf10ac0446b64e7827634e94"><div class="ttname"><a href="NVVMIntrRange_8cpp.html#afad351d7bf10ac0446b64e7827634e94">Context</a></div><div class="ttdeci">LLVMContext &amp; Context</div><div class="ttdef"><b>Definition:</b> <a href="NVVMIntrRange_8cpp_source.html#l00066">NVVMIntrRange.cpp:66</a></div></div>
<div class="ttc" id="anamespacellvm_html_a7c46c742c31be54870e2038048e6b391"><div class="ttname"><a href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">llvm::dbgs</a></div><div class="ttdeci">raw_ostream &amp; dbgs()</div><div class="ttdoc">dbgs() - This returns a reference to a raw_ostream for debugging messages.</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8cpp_source.html#l00163">Debug.cpp:163</a></div></div>
<div class="ttc" id="anamespacellvm_html_aa76a2cf19b821f320ab439d5659ef4b9"><div class="ttname"><a href="namespacellvm.html#aa76a2cf19b821f320ab439d5659ef4b9">llvm::MergeBlockIntoPredecessor</a></div><div class="ttdeci">bool MergeBlockIntoPredecessor(BasicBlock *BB, DomTreeUpdater *DTU=nullptr, LoopInfo *LI=nullptr, MemorySSAUpdater *MSSAU=nullptr, MemoryDependenceResults *MemDep=nullptr, bool PredecessorWithTwoSuccessors=false, DominatorTree *DT=nullptr)</div><div class="ttdoc">Attempts to merge a block into its predecessor, if possible.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlockUtils_8cpp_source.html#l00179">BasicBlockUtils.cpp:179</a></div></div>
<div class="ttc" id="aCommandLine_8h_html"><div class="ttname"><a href="CommandLine_8h.html">CommandLine.h</a></div></div>
<div class="ttc" id="aCodeMetrics_8h_html"><div class="ttname"><a href="CodeMetrics_8h.html">CodeMetrics.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_a8f2893ab869a806d78af17691eb97be3"><div class="ttname"><a href="namespacellvm.html#a8f2893ab869a806d78af17691eb97be3">llvm::RemapInstruction</a></div><div class="ttdeci">void RemapInstruction(Instruction *I, ValueToValueMapTy &amp;VM, RemapFlags Flags=RF_None, ValueMapTypeRemapper *TypeMapper=nullptr, ValueMaterializer *Materializer=nullptr)</div><div class="ttdoc">Convert the instruction operands from referencing the current values into those specified by VM.</div><div class="ttdef"><b>Definition:</b> <a href="ValueMapper_8h_source.html#l00254">ValueMapper.h:254</a></div></div>
<div class="ttc" id="aBuiltinGCs_8cpp_html_a6742d2e0a668baf1196ec69e158d5f15"><div class="ttname"><a href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a></div><div class="ttdeci">static GCRegistry::Add&lt; CoreCLRGC &gt; E(&quot;coreclr&quot;, &quot;CoreCLR-compatible GC&quot;)</div></div>
<div class="ttc" id="aclassllvm_1_1User_html"><div class="ttname"><a href="classllvm_1_1User.html">llvm::User</a></div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00044">User.h:44</a></div></div>
<div class="ttc" id="aREADME__ALTIVEC_8txt_html_a9aacd9146afe44bf656cd664e2a88c8c"><div class="ttname"><a href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a></div><div class="ttdeci">(vector float) vec_cmpeq(*A, *B) C</div><div class="ttdef"><b>Definition:</b> <a href="README__ALTIVEC_8txt_source.html#l00086">README_ALTIVEC.txt:86</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a0ed5f3ab3c2e4196ee0cffffa080c062"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">llvm::BasicBlock::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdoc">Instruction iterator methods.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00314">BasicBlock.h:314</a></div></div>
<div class="ttc" id="astructllvm_1_1CriticalEdgeSplittingOptions_html"><div class="ttname"><a href="structllvm_1_1CriticalEdgeSplittingOptions.html">llvm::CriticalEdgeSplittingOptions</a></div><div class="ttdoc">Option class for critical edge splitting.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlockUtils_8h_source.html#l00144">BasicBlockUtils.h:144</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_aecb93439702247fe5353a9966f7cefcd"><div class="ttname"><a href="classllvm_1_1Value.html#aecb93439702247fe5353a9966f7cefcd">llvm::Value::uses</a></div><div class="ttdeci">iterator_range&lt; use_iterator &gt; uses()</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00376">Value.h:376</a></div></div>
<div class="ttc" id="aclassllvm_1_1PHINode_html_adfb61ffe25c950c75c86310245b3ef39"><div class="ttname"><a href="classllvm_1_1PHINode.html#adfb61ffe25c950c75c86310245b3ef39">llvm::PHINode::getIncomingValueForBlock</a></div><div class="ttdeci">Value * getIncomingValueForBlock(const BasicBlock *BB) const</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02889">Instructions.h:2889</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopBase_html_a5cc113cb783ab6e5ca7b69241431c19c"><div class="ttname"><a href="classllvm_1_1LoopBase.html#a5cc113cb783ab6e5ca7b69241431c19c">llvm::LoopBase::getBlocks</a></div><div class="ttdeci">ArrayRef&lt; BlockT * &gt; getBlocks() const</div><div class="ttdoc">Get a list of the basic blocks which make up this loop.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00188">LoopInfo.h:188</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html"><div class="ttname"><a href="classllvm_1_1Instruction.html">llvm::Instruction</a></div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00041">Instruction.h:41</a></div></div>
<div class="ttc" id="anamespacellvm_html_a0bf75467957937ad23ad7be19f489934"><div class="ttname"><a href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">llvm::STATISTIC</a></div><div class="ttdeci">STATISTIC(NumFunctions, &quot;Total number of functions&quot;)</div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_a35ee267850af7c235474a8c46c7ac5af"><div class="ttname"><a href="classllvm_1_1Value.html#a35ee267850af7c235474a8c46c7ac5af">llvm::Value::setName</a></div><div class="ttdeci">void setName(const Twine &amp;Name)</div><div class="ttdoc">Change the name of the value.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00375">Value.cpp:375</a></div></div>
<div class="ttc" id="aclassllvm_1_1UndefValue_html_a4ae5ff22b700a42bcc5d889233721335"><div class="ttname"><a href="classllvm_1_1UndefValue.html#a4ae5ff22b700a42bcc5d889233721335">llvm::UndefValue::get</a></div><div class="ttdeci">static UndefValue * get(Type *T)</div><div class="ttdoc">Static factory methods - Return an 'undef' object of the specified type.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l01740">Constants.cpp:1740</a></div></div>
<div class="ttc" id="aclassllvm_1_1DomTreeUpdater_html"><div class="ttname"><a href="classllvm_1_1DomTreeUpdater.html">llvm::DomTreeUpdater</a></div><div class="ttdef"><b>Definition:</b> <a href="DomTreeUpdater_8h_source.html#l00028">DomTreeUpdater.h:28</a></div></div>
<div class="ttc" id="astructllvm_1_1CodeMetrics_html_a7e174506b52ad46ea1f746a7f727d999"><div class="ttname"><a href="structllvm_1_1CodeMetrics.html#a7e174506b52ad46ea1f746a7f727d999">llvm::CodeMetrics::collectEphemeralValues</a></div><div class="ttdeci">static void collectEphemeralValues(const Loop *L, AssumptionCache *AC, SmallPtrSetImpl&lt; const Value * &gt; &amp;EphValues)</div><div class="ttdoc">Collect a loop's ephemeral values (those used only by an assume or similar intrinsics in the loop).</div><div class="ttdef"><b>Definition:</b> <a href="CodeMetrics_8cpp_source.html#l00070">CodeMetrics.cpp:70</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopBase_html_adf6f53d7652b471c995b7d10f3dd2729"><div class="ttname"><a href="classllvm_1_1LoopBase.html#adf6f53d7652b471c995b7d10f3dd2729">llvm::LoopBase::getExitingBlock</a></div><div class="ttdeci">BlockT * getExitingBlock() const</div><div class="ttdoc">If getExitingBlocks would return exactly one block, return that block.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfoImpl_8h_source.html#l00048">LoopInfoImpl.h:48</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a46ef6115027606b67adcf4d28f3dac17"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a46ef6115027606b67adcf4d28f3dac17">llvm::BasicBlock::getFirstNonPHI</a></div><div class="ttdeci">const Instruction * getFirstNonPHI() const</div><div class="ttdoc">Returns a pointer to the first instruction in this block that is not a PHINode instruction.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00208">BasicBlock.cpp:208</a></div></div>
<div class="ttc" id="anamespacellvm_html_a08f3f942afc0ee9115a8f9fa87e9191d"><div class="ttname"><a href="namespacellvm.html#a08f3f942afc0ee9115a8f9fa87e9191d">llvm::RemoveRedundantDbgInstrs</a></div><div class="ttdeci">bool RemoveRedundantDbgInstrs(BasicBlock *BB)</div><div class="ttdoc">Try to remove redundant dbg.value instructions from given basic block.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlockUtils_8cpp_source.html#l00538">BasicBlockUtils.cpp:538</a></div></div>
<div class="ttc" id="anamespacellvm_html_a77724415203930efd07d7098cb1e437da9a24bd8dba1bef2753bc3f087435ae7f"><div class="ttname"><a href="namespacellvm.html#a77724415203930efd07d7098cb1e437da9a24bd8dba1bef2753bc3f087435ae7f">llvm::RF_NoModuleLevelChanges</a></div><div class="ttdeci">@ RF_NoModuleLevelChanges</div><div class="ttdoc">If this flag is set, the remapper knows that only local values within a function (such as an instruct...</div><div class="ttdef"><b>Definition:</b> <a href="ValueMapper_8h_source.html#l00071">ValueMapper.h:71</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_a9d7de807ebdfe1819df3ff6cb0f16158"><div class="ttname"><a href="classllvm_1_1Value.html#a9d7de807ebdfe1819df3ff6cb0f16158">llvm::Value::use_empty</a></div><div class="ttdeci">bool use_empty() const</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00344">Value.h:344</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_ae8a9915f25abfe7ff5010da686e446c2"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#ae8a9915f25abfe7ff5010da686e446c2">llvm::BasicBlock::getPostdominatingDeoptimizeCall</a></div><div class="ttdeci">const CallInst * getPostdominatingDeoptimizeCall() const</div><div class="ttdoc">Returns the call instruction calling @llvm.experimental.deoptimize that is present either in current ...</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00196">BasicBlock.cpp:196</a></div></div>
<div class="ttc" id="aIR_2CFG_8h_html"><div class="ttname"><a href="IR_2CFG_8h.html">CFG.h</a></div></div>
<div class="ttc" id="aLoopInfo_8h_html"><div class="ttname"><a href="LoopInfo_8h.html">LoopInfo.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchInst_html_aac456a62894c9f0f8e9f06373bbf40f0"><div class="ttname"><a href="classllvm_1_1BranchInst.html#aac456a62894c9f0f8e9f06373bbf40f0">llvm::BranchInst::getCondition</a></div><div class="ttdeci">Value * getCondition() const</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03220">Instructions.h:3220</a></div></div>
<div class="ttc" id="anamespacellvm_html_acb22fb04083152eee862457e42e8dc31"><div class="ttname"><a href="namespacellvm.html#acb22fb04083152eee862457e42e8dc31">llvm::predecessors</a></div><div class="ttdeci">auto predecessors(const MachineBasicBlock *BB)</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l01266">MachineBasicBlock.h:1266</a></div></div>
<div class="ttc" id="anamespacellvm_html_ab7abd0e34c17dcb201a4138dc65cc067"><div class="ttname"><a href="namespacellvm.html#ab7abd0e34c17dcb201a4138dc65cc067">llvm::cloneAndAdaptNoAliasScopes</a></div><div class="ttdeci">void cloneAndAdaptNoAliasScopes(ArrayRef&lt; MDNode * &gt; NoAliasDeclScopes, ArrayRef&lt; BasicBlock * &gt; NewBlocks, LLVMContext &amp;Context, StringRef Ext)</div><div class="ttdoc">Clone the specified noalias decl scopes.</div><div class="ttdef"><b>Definition:</b> <a href="CloneFunction_8cpp_source.html#l01143">CloneFunction.cpp:1143</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a315f26c899f5ea8a780db4740ba95ef4"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a315f26c899f5ea8a780db4740ba95ef4">llvm::BasicBlock::hasAddressTaken</a></div><div class="ttdeci">bool hasAddressTaken() const</div><div class="ttdoc">Returns true if there are any uses of this basic block other than direct branches,...</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00495">BasicBlock.h:495</a></div></div>
<div class="ttc" id="aclassllvm_1_1cl_1_1opt_html"><div class="ttname"><a href="classllvm_1_1cl_1_1opt.html">llvm::cl::opt&lt; bool &gt;</a></div></div>
<div class="ttc" id="aclassllvm_1_1DbgVariableIntrinsic_html"><div class="ttname"><a href="classllvm_1_1DbgVariableIntrinsic.html">llvm::DbgVariableIntrinsic</a></div><div class="ttdoc">This is the common base class for debug info intrinsics for variables.</div><div class="ttdef"><b>Definition:</b> <a href="IntrinsicInst_8h_source.html#l00181">IntrinsicInst.h:181</a></div></div>
<div class="ttc" id="aMemorySSA_8cpp_html_a20a60bdac22b099d87d8cb0c1d554120"><div class="ttname"><a href="MemorySSA_8cpp.html#a20a60bdac22b099d87d8cb0c1d554120">SSA</a></div><div class="ttdeci">Memory SSA</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8cpp_source.html#l00071">MemorySSA.cpp:71</a></div></div>
<div class="ttc" id="aclassLiveDebugValues_1_1DbgValue_html"><div class="ttname"><a href="classLiveDebugValues_1_1DbgValue.html">LiveDebugValues::DbgValue</a></div><div class="ttdoc">Class recording the (high level) value of a variable.</div><div class="ttdef"><b>Definition:</b> <a href="InstrRefBasedImpl_8h_source.html#l00441">InstrRefBasedImpl.h:441</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_ae6b978645b8ac72d1a35e1298ffdd4f0"><div class="ttname"><a href="classllvm_1_1Instruction.html#ae6b978645b8ac72d1a35e1298ffdd4f0">llvm::Instruction::eraseFromParent</a></div><div class="ttdeci">SymbolTableList&lt; Instruction &gt;::iterator eraseFromParent()</div><div class="ttdoc">This method unlinks 'this' from the containing basic block and deletes it.</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8cpp_source.html#l00082">Instruction.cpp:82</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopBase_html_afb94ad465ab2bc46ff40bec6263f7355"><div class="ttname"><a href="classllvm_1_1LoopBase.html#afb94ad465ab2bc46ff40bec6263f7355">llvm::LoopBase::moveToHeader</a></div><div class="ttdeci">void moveToHeader(BlockT *BB)</div><div class="ttdoc">This method is used to move BB (which must be part of this loop) to be the loop header of the loop (t...</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00460">LoopInfo.h:460</a></div></div>
<div class="ttc" id="aBuiltinGCs_8cpp_html_a9bf617fd3367180fb96cebccfaae8dfa"><div class="ttname"><a href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a></div><div class="ttdeci">static GCRegistry::Add&lt; StatepointGC &gt; D(&quot;statepoint-example&quot;, &quot;an example strategy for statepoint&quot;)</div></div>
<div class="ttc" id="aclassllvm_1_1MemorySSAUpdater_html"><div class="ttname"><a href="classllvm_1_1MemorySSAUpdater.html">llvm::MemorySSAUpdater</a></div><div class="ttdef"><b>Definition:</b> <a href="MemorySSAUpdater_8h_source.html#l00054">MemorySSAUpdater.h:54</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopBase_html_ae069a12f0a2d2deb69e30b439a91190e"><div class="ttname"><a href="classllvm_1_1LoopBase.html#ae069a12f0a2d2deb69e30b439a91190e">llvm::LoopBase::getUniqueExitBlocks</a></div><div class="ttdeci">void getUniqueExitBlocks(SmallVectorImpl&lt; BlockT * &gt; &amp;ExitBlocks) const</div><div class="ttdoc">Return all unique successor blocks of this loop.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfoImpl_8h_source.html#l00142">LoopInfoImpl.h:142</a></div></div>
<div class="ttc" id="aclassllvm_1_1PHINode_html_a089cccb6f231efee72abc76d0f9c695f"><div class="ttname"><a href="classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">llvm::PHINode::addIncoming</a></div><div class="ttdeci">void addIncoming(Value *V, BasicBlock *BB)</div><div class="ttdoc">Add an incoming value to the end of the PHI list.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02854">Instructions.h:2854</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchInst_html_a38df51256d4b415b6a817b5e1c6d4d36"><div class="ttname"><a href="classllvm_1_1BranchInst.html#a38df51256d4b415b6a817b5e1c6d4d36">llvm::BranchInst::Create</a></div><div class="ttdeci">static BranchInst * Create(BasicBlock *IfTrue, Instruction *InsertBefore=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03195">Instructions.h:3195</a></div></div>
<div class="ttc" id="aIR_2DebugInfo_8h_html"><div class="ttname"><a href="IR_2DebugInfo_8h.html">DebugInfo.h</a></div></div>
<div class="ttc" id="aMD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00058">MD5.cpp:58</a></div></div>
<div class="ttc" id="aCloning_8h_html"><div class="ttname"><a href="Cloning_8h.html">Cloning.h</a></div></div>
<div class="ttc" id="anamespacellvm_1_1cl_html_a10a041239ae1870cfcc064bfaa79fb65"><div class="ttname"><a href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">llvm::cl::init</a></div><div class="ttdeci">initializer&lt; Ty &gt; init(const Ty &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00445">CommandLine.h:445</a></div></div>
<div class="ttc" id="anamespacellvm_html_a8154638df88e4eaa568b67b23d463dac"><div class="ttname"><a href="namespacellvm.html#a8154638df88e4eaa568b67b23d463dac">llvm::make_early_inc_range</a></div><div class="ttdeci">iterator_range&lt; early_inc_iterator_impl&lt; detail::IterOfRange&lt; RangeT &gt; &gt; &gt; make_early_inc_range(RangeT &amp;&amp;Range)</div><div class="ttdoc">Make a range that does early increment to allow mutation of the underlying range without disrupting i...</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l00721">STLExtras.h:721</a></div></div>
<div class="ttc" id="aMachineTraceMetrics_8cpp_html_a6f3004139ef53bc2cf206b8864976928"><div class="ttname"><a href="MachineTraceMetrics_8cpp.html#a6f3004139ef53bc2cf206b8864976928">Metrics</a></div><div class="ttdeci">Machine Trace Metrics</div><div class="ttdef"><b>Definition:</b> <a href="MachineTraceMetrics_8cpp_source.html#l00052">MachineTraceMetrics.cpp:52</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopBase_html_ac3280e7f76f955403fe17eacf126b90d"><div class="ttname"><a href="classllvm_1_1LoopBase.html#ac3280e7f76f955403fe17eacf126b90d">llvm::LoopBase::getLoopPreheader</a></div><div class="ttdeci">BlockT * getLoopPreheader() const</div><div class="ttdoc">If there is a preheader for this loop, return it.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfoImpl_8h_source.html#l00183">LoopInfoImpl.h:183</a></div></div>
<div class="ttc" id="aLoopRotationUtils_8cpp_html_aea660fd3de70e7854de06b7e212f0ecd"><div class="ttname"><a href="LoopRotationUtils_8cpp.html#aea660fd3de70e7854de06b7e212f0ecd">RewriteUsesOfClonedInstructions</a></div><div class="ttdeci">static void RewriteUsesOfClonedInstructions(BasicBlock *OrigHeader, BasicBlock *OrigPreheader, ValueToValueMapTy &amp;ValueMap, ScalarEvolution *SE, SmallVectorImpl&lt; PHINode * &gt; *InsertedPHIs)</div><div class="ttdoc">RewriteUsesOfClonedInstructions - We just cloned the instructions from the old header into the prehea...</div><div class="ttdef"><b>Definition:</b> <a href="LoopRotationUtils_8cpp_source.html#l00096">LoopRotationUtils.cpp:96</a></div></div>
<div class="ttc" id="anamespacellvm_html_a4dfea19770364b880a77c3f0c1c0f67c"><div class="ttname"><a href="namespacellvm.html#a4dfea19770364b880a77c3f0c1c0f67c">llvm::insertDebugValuesForPHIs</a></div><div class="ttdeci">void insertDebugValuesForPHIs(BasicBlock *BB, SmallVectorImpl&lt; PHINode * &gt; &amp;InsertedPHIs)</div><div class="ttdoc">Propagate dbg.value intrinsics through the newly inserted PHIs.</div><div class="ttdef"><b>Definition:</b> <a href="Transforms_2Utils_2Local_8cpp_source.html#l01711">Local.cpp:1711</a></div></div>
<div class="ttc" id="anamespacellvm_html_a8813c8445d4429956ae5a3647f02fcfb"><div class="ttname"><a href="namespacellvm.html#a8813c8445d4429956ae5a3647f02fcfb">llvm::findDbgValues</a></div><div class="ttdeci">void findDbgValues(SmallVectorImpl&lt; DbgValueInst * &gt; &amp;DbgValues, Value *V)</div><div class="ttdoc">Finds the llvm.dbg.value intrinsics describing a value.</div><div class="ttdef"><b>Definition:</b> <a href="DebugInfo_8cpp_source.html#l00079">DebugInfo.cpp:79</a></div></div>
<div class="ttc" id="anamespacellvm_html_aab02db480f387fca92956ef1c9a01941"><div class="ttname"><a href="namespacellvm.html#aab02db480f387fca92956ef1c9a01941">llvm::simplifyInstruction</a></div><div class="ttdeci">Value * simplifyInstruction(Instruction *I, const SimplifyQuery &amp;Q, OptimizationRemarkEmitter *ORE=nullptr)</div><div class="ttdoc">See if we can compute a simplified version of this instruction.</div><div class="ttdef"><b>Definition:</b> <a href="InstructionSimplify_8cpp_source.html#l06731">InstructionSimplify.cpp:6731</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_ae8f5bf5cc06f696b52c709677df00fbf"><div class="ttname"><a href="classllvm_1_1Instruction.html#ae8f5bf5cc06f696b52c709677df00fbf">llvm::Instruction::setDebugLoc</a></div><div class="ttdeci">void setDebugLoc(DebugLoc Loc)</div><div class="ttdoc">Set the debug location information for this instruction.</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00355">Instruction.h:355</a></div></div>
<div class="ttc" id="aclassllvm_1_1ScalarEvolution_html_a804545e5b568edec8b970da32cd37359"><div class="ttname"><a href="classllvm_1_1ScalarEvolution.html#a804545e5b568edec8b970da32cd37359">llvm::ScalarEvolution::forgetValue</a></div><div class="ttdeci">void forgetValue(Value *V)</div><div class="ttdoc">This method should be called by the client when it has changed a value in a way that may effect its v...</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8cpp_source.html#l08523">ScalarEvolution.cpp:8523</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopBase_html_a1230fd674d2609b96527fe65eaf40b1b"><div class="ttname"><a href="classllvm_1_1LoopBase.html#a1230fd674d2609b96527fe65eaf40b1b">llvm::LoopBase::getLoopLatch</a></div><div class="ttdeci">BlockT * getLoopLatch() const</div><div class="ttdoc">If there is a single latch block for this loop, return it.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfoImpl_8h_source.html#l00232">LoopInfoImpl.h:232</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopBase_html_ae7ebc88c9b32b51b749bd5bbcfaa5fb8"><div class="ttname"><a href="classllvm_1_1LoopBase.html#ae7ebc88c9b32b51b749bd5bbcfaa5fb8">llvm::LoopBase::hasDedicatedExits</a></div><div class="ttdeci">bool hasDedicatedExits() const</div><div class="ttdoc">Return true if no exit block for the loop has a predecessor that is outside the loop.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfoImpl_8h_source.html#l00112">LoopInfoImpl.h:112</a></div></div>
<div class="ttc" id="aSILowerControlFlow_8cpp_html_a4868c5d81c5ccc98c47aeab6244346a0"><div class="ttname"><a href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a></div><div class="ttdeci">assert(ImpDefSCC.getReg()==AMDGPU::SCC &amp;&amp;ImpDefSCC.isDef())</div></div>
<div class="ttc" id="anamespacestd_html_ab8424022895aee3e366fb9a32f2883cb"><div class="ttname"><a href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a></div><div class="ttdeci">void swap(llvm::BitVector &amp;LHS, llvm::BitVector &amp;RHS)</div><div class="ttdoc">Implement std::swap in terms of BitVector swap.</div><div class="ttdef"><b>Definition:</b> <a href="BitVector_8h_source.html#l00853">BitVector.h:853</a></div></div>
<div class="ttc" id="aclassllvm_1_1ValueMap_html_a620815bfbf153caa776f5e207bd8e3c0"><div class="ttname"><a href="classllvm_1_1ValueMap.html#a620815bfbf153caa776f5e207bd8e3c0">llvm::ValueMap::insert</a></div><div class="ttdeci">std::pair&lt; iterator, bool &gt; insert(const std::pair&lt; KeyT, ValueT &gt; &amp;KV)</div><div class="ttdef"><b>Definition:</b> <a href="ValueMap_8h_source.html#l00172">ValueMap.h:172</a></div></div>
<div class="ttc" id="anamespacellvm_html_aa0d69e81725c10fa5407f0bf34462068"><div class="ttname"><a href="namespacellvm.html#aa0d69e81725c10fa5407f0bf34462068">llvm::TTI</a></div><div class="ttdeci">TargetTransformInfo TTI</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l00191">TargetTransformInfo.h:191</a></div></div>
<div class="ttc" id="aclassllvm_1_1MDNode_html"><div class="ttname"><a href="classllvm_1_1MDNode.html">llvm::MDNode</a></div><div class="ttdoc">Metadata node.</div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8h_source.html#l00943">Metadata.h:943</a></div></div>
<div class="ttc" id="aLoopRotationUtils_8cpp_html_a20d58a0069048b80461676a4132ad1d4"><div class="ttname"><a href="LoopRotationUtils_8cpp.html#a20d58a0069048b80461676a4132ad1d4">canRotateDeoptimizingLatchExit</a></div><div class="ttdeci">static bool canRotateDeoptimizingLatchExit(Loop *L)</div><div class="ttdef"><b>Definition:</b> <a href="LoopRotationUtils_8cpp_source.html#l00209">LoopRotationUtils.cpp:209</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchInst_html_ad56f6a9b5cd05940017c4544df48bc30"><div class="ttname"><a href="classllvm_1_1BranchInst.html#ad56f6a9b5cd05940017c4544df48bc30">llvm::BranchInst::isUnconditional</a></div><div class="ttdeci">bool isUnconditional() const</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03217">Instructions.h:3217</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a0a4d51e372293abe5e5f6dac133e80a6"><div class="ttname"><a href="classllvm_1_1Instruction.html#a0a4d51e372293abe5e5f6dac133e80a6">llvm::Instruction::clone</a></div><div class="ttdeci">Instruction * clone() const</div><div class="ttdoc">Create a copy of 'this' instruction that is identical in all ways except the following:</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8cpp_source.html#l00903">Instruction.cpp:903</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopInfo_html"><div class="ttname"><a href="classllvm_1_1LoopInfo.html">llvm::LoopInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l01108">LoopInfo.h:1108</a></div></div>
<div class="ttc" id="anamespacellvm_html_a61d13d6824ec46c31260a4fd0997eda0"><div class="ttname"><a href="namespacellvm.html#a61d13d6824ec46c31260a4fd0997eda0">llvm::any_of</a></div><div class="ttdeci">bool any_of(R &amp;&amp;range, UnaryPredicate P)</div><div class="ttdoc">Provide wrappers to std::any_of which take ranges instead of having to pass begin/end explicitly.</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l01742">STLExtras.h:1742</a></div></div>
<div class="ttc" id="aclassllvm_1_1AssumptionCache_html"><div class="ttname"><a href="classllvm_1_1AssumptionCache.html">llvm::AssumptionCache</a></div><div class="ttdoc">A cache of @llvm.assume calls within a function.</div><div class="ttdef"><b>Definition:</b> <a href="AssumptionCache_8h_source.html#l00042">AssumptionCache.h:42</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_a6393a2d4fe7e10b28a0dcc35f881567b"><div class="ttname"><a href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">llvm::Value::getType</a></div><div class="ttdeci">Type * getType() const</div><div class="ttdoc">All values are typed, get the type of this value.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00255">Value.h:255</a></div></div>
<div class="ttc" id="aLoopRotationUtils_8h_html"><div class="ttname"><a href="LoopRotationUtils_8h.html">LoopRotationUtils.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a74aa9daea070e2ad3394a3ec58b7316a"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a74aa9daea070e2ad3394a3ec58b7316a">llvm::BasicBlock::getUniquePredecessor</a></div><div class="ttdeci">const BasicBlock * getUniquePredecessor() const</div><div class="ttdoc">Return the predecessor of this block if it has a unique predecessor block.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00292">BasicBlock.cpp:292</a></div></div>
<div class="ttc" id="aclassllvm_1_1ilist__node__impl_html_af719fc783be6589465137d997701a432"><div class="ttname"><a href="classllvm_1_1ilist__node__impl.html#af719fc783be6589465137d997701a432">llvm::ilist_node_impl::getIterator</a></div><div class="ttdeci">self_iterator getIterator()</div><div class="ttdef"><b>Definition:</b> <a href="ilist__node_8h_source.html#l00082">ilist_node.h:82</a></div></div>
<div class="ttc" id="aclassllvm_1_1DomTreeUpdater_html_a8bf4c30be33831d7882d6880b8ae433da483c336d7d9fe614a8b5aae1e746e01f"><div class="ttname"><a href="classllvm_1_1DomTreeUpdater.html#a8bf4c30be33831d7882d6880b8ae433da483c336d7d9fe614a8b5aae1e746e01f">llvm::DomTreeUpdater::UpdateStrategy::Eager</a></div><div class="ttdeci">@ Eager</div></div>
<div class="ttc" id="aSSAUpdater_8h_html"><div class="ttname"><a href="SSAUpdater_8h.html">SSAUpdater.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1Loop_html_a54e82aea5fab8cf3a878003444f25ee7"><div class="ttname"><a href="classllvm_1_1Loop.html#a54e82aea5fab8cf3a878003444f25ee7">llvm::Loop::hasLoopInvariantOperands</a></div><div class="ttdeci">bool hasLoopInvariantOperands(const Instruction *I) const</div><div class="ttdoc">Return true if all the operands of the specified instruction are loop invariant.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8cpp_source.html#l00066">LoopInfo.cpp:66</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_adb5c319f5905c1d3ca9eb5df546388c5"><div class="ttname"><a href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">llvm::Value::getName</a></div><div class="ttdeci">StringRef getName() const</div><div class="ttdoc">Return a constant reference to the value's name.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00308">Value.cpp:308</a></div></div>
<div class="ttc" id="aclassllvm_1_1ValueMap_html"><div class="ttname"><a href="classllvm_1_1ValueMap.html">llvm::ValueMap&lt; const Value *, WeakTrackingVH &gt;</a></div></div>
<div class="ttc" id="anamespacellvm_html_a77724415203930efd07d7098cb1e437da5633028bc27ffa8eab39cc5de65b3108"><div class="ttname"><a href="namespacellvm.html#a77724415203930efd07d7098cb1e437da5633028bc27ffa8eab39cc5de65b3108">llvm::RF_IgnoreMissingLocals</a></div><div class="ttdeci">@ RF_IgnoreMissingLocals</div><div class="ttdoc">If this flag is set, the remapper ignores missing function-local entries (Argument,...</div><div class="ttdef"><b>Definition:</b> <a href="ValueMapper_8h_source.html#l00089">ValueMapper.h:89</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_aa286a0f7f5d38488d593bb7ef0ba183e"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#aa286a0f7f5d38488d593bb7ef0ba183e">llvm::BasicBlock::getContext</a></div><div class="ttdeci">LLVMContext &amp; getContext() const</div><div class="ttdoc">Get the context in which this basic block lives.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00035">BasicBlock.cpp:35</a></div></div>
<div class="ttc" id="aclassllvm_1_1Loop_html_adf4be757fa30ca7fe3e8b119438100f0"><div class="ttname"><a href="classllvm_1_1Loop.html#adf4be757fa30ca7fe3e8b119438100f0">llvm::Loop::setLoopID</a></div><div class="ttdeci">void setLoopID(MDNode *LoopID) const</div><div class="ttdoc">Set the llvm.loop loop id metadata for this loop.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8cpp_source.html#l00525">LoopInfo.cpp:525</a></div></div>
<div class="ttc" id="aclassllvm_1_1Loop_html_afbcd78588d5235f99698b5c30f591382"><div class="ttname"><a href="classllvm_1_1Loop.html#afbcd78588d5235f99698b5c30f591382">llvm::Loop::getLoopID</a></div><div class="ttdeci">MDNode * getLoopID() const</div><div class="ttdoc">Return the llvm.loop loop id metadata node for this loop if it is present.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8cpp_source.html#l00501">LoopInfo.cpp:501</a></div></div>
<div class="ttc" id="anamespacellvm_html_af450da528c31bc2f2780ea2a243911ad"><div class="ttname"><a href="namespacellvm.html#af450da528c31bc2f2780ea2a243911ad">llvm::LoopRotation</a></div><div class="ttdeci">bool LoopRotation(Loop *L, LoopInfo *LI, const TargetTransformInfo *TTI, AssumptionCache *AC, DominatorTree *DT, ScalarEvolution *SE, MemorySSAUpdater *MSSAU, const SimplifyQuery &amp;SQ, bool RotationOnly, unsigned Threshold, bool IsUtilMode, bool PrepareForLTO=false)</div><div class="ttdoc">Convert a loop into a loop with bottom test.</div><div class="ttdef"><b>Definition:</b> <a href="LoopRotationUtils_8cpp_source.html#l00836">LoopRotationUtils.cpp:836</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopBase_html_a58c5b170ea68b41e94ebb0019523a68f"><div class="ttname"><a href="classllvm_1_1LoopBase.html#a58c5b170ea68b41e94ebb0019523a68f">llvm::LoopBase::getHeader</a></div><div class="ttdeci">BlockT * getHeader() const</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00105">LoopInfo.h:105</a></div></div>
<div class="ttc" id="aclassllvm_1_1Loop_html_a61a487a3724136e3332c86f2f26189ce"><div class="ttname"><a href="classllvm_1_1Loop.html#a61a487a3724136e3332c86f2f26189ce">llvm::Loop::dump</a></div><div class="ttdeci">void dump() const</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8cpp_source.html#l00667">LoopInfo.cpp:667</a></div></div>
<div class="ttc" id="anamespacellvm_1_1MCID_html_ab357441fcd1ea1f9b0d27c12700f6023a2b016c207343046b2bac45e69e76dcec"><div class="ttname"><a href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a2b016c207343046b2bac45e69e76dcec">llvm::MCID::Add</a></div><div class="ttdeci">@ Add</div><div class="ttdef"><b>Definition:</b> <a href="MCInstrDesc_8h_source.html#l00186">MCInstrDesc.h:186</a></div></div>
<div class="ttc" id="anamespacellvm_html_ab7e8be1d1ae7e526ea156b60c51c10e5"><div class="ttname"><a href="namespacellvm.html#ab7e8be1d1ae7e526ea156b60c51c10e5">llvm::FoldSingleEntryPHINodes</a></div><div class="ttdeci">bool FoldSingleEntryPHINodes(BasicBlock *BB, MemoryDependenceResults *MemDep=nullptr)</div><div class="ttdoc">We know that BB has one predecessor.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlockUtils_8cpp_source.html#l00144">BasicBlockUtils.cpp:144</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a8f6f9b4a94dc0907499c03a9e1b6918b"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a8f6f9b4a94dc0907499c03a9e1b6918b">llvm::BasicBlock::back</a></div><div class="ttdeci">const Instruction &amp; back() const</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00328">BasicBlock.h:328</a></div></div>
<div class="ttc" id="aMemorySSA_8h_html"><div class="ttname"><a href="MemorySSA_8h.html">MemorySSA.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a41da369a9d31d911c8af724d5630f724"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a41da369a9d31d911c8af724d5630f724">llvm::BasicBlock::moveBefore</a></div><div class="ttdeci">void moveBefore(BasicBlock *MovePos)</div><div class="ttdoc">Unlink this basic block from its current function and insert it into the function that MovePos lives ...</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00136">BasicBlock.cpp:136</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_ab4f3bf98b5054831b608852e33427814"><div class="ttname"><a href="classllvm_1_1Instruction.html#ab4f3bf98b5054831b608852e33427814">llvm::Instruction::getDebugLoc</a></div><div class="ttdeci">const DebugLoc &amp; getDebugLoc() const</div><div class="ttdoc">Return the debug location for this node as a DebugLoc.</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00358">Instruction.h:358</a></div></div>
<div class="ttc" id="aDominators_8h_html"><div class="ttname"><a href="Dominators_8h.html">Dominators.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_af80edfc5e42059e045aa7bf7fe42bee3"><div class="ttname"><a href="namespacellvm.html#af80edfc5e42059e045aa7bf7fe42bee3">llvm::hash_combine_range</a></div><div class="ttdeci">hash_code hash_combine_range(InputIteratorT first, InputIteratorT last)</div><div class="ttdoc">Compute a hash_code for a sequence of values.</div><div class="ttdef"><b>Definition:</b> <a href="Hashing_8h_source.html#l00491">Hashing.h:491</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a1a7f07aaef6a3bee130bf0e0f0536802"><div class="ttname"><a href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">llvm::Instruction::getParent</a></div><div class="ttdeci">const BasicBlock * getParent() const</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00090">Instruction.h:90</a></div></div>
<div class="ttc" id="aInstructionSimplify_8h_html"><div class="ttname"><a href="InstructionSimplify_8h.html">InstructionSimplify.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1PHINode_html"><div class="ttname"><a href="classllvm_1_1PHINode.html">llvm::PHINode</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02708">Instructions.h:2708</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a8de021e28a3c04c9216ad8decf104f02"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">llvm::BasicBlock::getTerminator</a></div><div class="ttdeci">const Instruction * getTerminator() const LLVM_READONLY</div><div class="ttdoc">Returns the terminator instruction if the block is well formed or null if the block is not well forme...</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00127">BasicBlock.h:127</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_afe7af0c3ec2ef1f525173acd2ea4ba60"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#afe7af0c3ec2ef1f525173acd2ea4ba60">llvm::BasicBlock::removePredecessor</a></div><div class="ttdeci">void removePredecessor(BasicBlock *Pred, bool KeepOneInputPHIs=false)</div><div class="ttdoc">Update PHI nodes in this BasicBlock before removal of predecessor Pred.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00341">BasicBlock.cpp:341</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html">llvm::SmallVectorImpl</a></div><div class="ttdoc">This class consists of common code factored out of the SmallVector class to reduce code duplication b...</div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l00042">APFloat.h:42</a></div></div>
<div class="ttc" id="anamespacellvm_html_a6b0ac1fa4f05de76413c5e0ca6334035"><div class="ttname"><a href="namespacellvm.html#a6b0ac1fa4f05de76413c5e0ca6334035">llvm::reverse</a></div><div class="ttdeci">auto reverse(ContainerTy &amp;&amp;C)</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l00484">STLExtras.h:484</a></div></div>
<div class="ttc" id="aLoopRotationUtils_8cpp_html_ad2e3518508b7df1cb9b6ab4dba6557f1"><div class="ttname"><a href="LoopRotationUtils_8cpp.html#ad2e3518508b7df1cb9b6ab4dba6557f1">InsertNewValueIntoMap</a></div><div class="ttdeci">static void InsertNewValueIntoMap(ValueToValueMapTy &amp;VM, Value *K, Value *V)</div><div class="ttdoc">Insert (K, V) pair into the ValueToValueMap, and verify the key did not previously exist in the map,...</div><div class="ttdef"><b>Definition:</b> <a href="LoopRotationUtils_8cpp_source.html#l00087">LoopRotationUtils.cpp:87</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopBase_html_af691775d5a45e28afbdb3e97cab22eee"><div class="ttname"><a href="classllvm_1_1LoopBase.html#af691775d5a45e28afbdb3e97cab22eee">llvm::LoopBase::isLoopExiting</a></div><div class="ttdeci">bool isLoopExiting(const BlockT *BB) const</div><div class="ttdoc">True if terminator in the block can branch to another block that is outside of the current loop.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00242">LoopInfo.h:242</a></div></div>
<div class="ttc" id="alib_2CodeGen_2README_8txt_html_a09776db24cf586ec9f1e18f3bae14099"><div class="ttname"><a href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a></div><div class="ttdeci">Common register allocation spilling lr str ldr sxth r3 ldr mla r4 can lr mov lr str ldr sxth r3 mla r4 and then merge mul and lr str ldr sxth r3 mla r4 It also increase the likelihood the store may become dead bb27 Successors according to LLVM BB</div><div class="ttdef"><b>Definition:</b> <a href="lib_2CodeGen_2README_8txt_source.html#l00039">README.txt:39</a></div></div>
<div class="ttc" id="aclassllvm_1_1ValueMap_html_a15f92579a5fc316dab8cd1fad51015ef"><div class="ttname"><a href="classllvm_1_1ValueMap.html#a15f92579a5fc316dab8cd1fad51015ef">llvm::ValueMap::lookup</a></div><div class="ttdeci">ValueT lookup(const KeyT &amp;Val) const</div><div class="ttdoc">lookup - Return the entry for the specified key, or a default constructed value if no such entry exis...</div><div class="ttdef"><b>Definition:</b> <a href="ValueMap_8h_source.html#l00164">ValueMap.h:164</a></div></div>
<div class="ttc" id="anamespacellvm_html_aa29fe161c408879ada30c90ebbf55dcf"><div class="ttname"><a href="namespacellvm.html#aa29fe161c408879ada30c90ebbf55dcf">llvm::VerifyMemorySSA</a></div><div class="ttdeci">bool VerifyMemorySSA</div><div class="ttdoc">Enables verification of MemorySSA.</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8cpp_source.html#l00089">MemorySSA.cpp:89</a></div></div>
<div class="ttc" id="astructllvm_1_1cl_1_1desc_html"><div class="ttname"><a href="structllvm_1_1cl_1_1desc.html">llvm::cl::desc</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00411">CommandLine.h:411</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchInst_html"><div class="ttname"><a href="classllvm_1_1BranchInst.html">llvm::BranchInst</a></div><div class="ttdoc">Conditional or Unconditional Branch instruction.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03139">Instructions.h:3139</a></div></div>
<div class="ttc" id="araw__ostream_8h_html"><div class="ttname"><a href="raw__ostream_8h.html">raw_ostream.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1SSAUpdater_html"><div class="ttname"><a href="classllvm_1_1SSAUpdater.html">llvm::SSAUpdater</a></div><div class="ttdoc">Helper class for SSA formation on a set of values defined in multiple blocks.</div><div class="ttdef"><b>Definition:</b> <a href="SSAUpdater_8h_source.html#l00039">SSAUpdater.h:39</a></div></div>
<div class="ttc" id="aBasicBlockUtils_8h_html"><div class="ttname"><a href="BasicBlockUtils_8h.html">BasicBlockUtils.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_abe76d72cda6b2b4562c72accb510040b"><div class="ttname"><a href="namespacellvm.html#abe76d72cda6b2b4562c72accb510040b">llvm::isSafeToSpeculativelyExecute</a></div><div class="ttdeci">bool isSafeToSpeculativelyExecute(const Instruction *I, const Instruction *CtxI=nullptr, AssumptionCache *AC=nullptr, const DominatorTree *DT=nullptr, const TargetLibraryInfo *TLI=nullptr)</div><div class="ttdoc">Return true if the instruction does not have any effects besides calculating the result and does not ...</div><div class="ttdef"><b>Definition:</b> <a href="ValueTracking_8cpp_source.html#l04799">ValueTracking.cpp:4799</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html"><div class="ttname"><a href="classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00074">Value.h:74</a></div></div>
<div class="ttc" id="aDebug_8h_html"><div class="ttname"><a href="Debug_8h.html">Debug.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_ab4e0512c7e1c7adaa56677e3155685f1"><div class="ttname"><a href="classllvm_1_1Value.html#ab4e0512c7e1c7adaa56677e3155685f1">llvm::Value::users</a></div><div class="ttdeci">iterator_range&lt; user_iterator &gt; users()</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00421">Value.h:421</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchInst_html_a7e4be8b16fbd68c9045a388904044e01"><div class="ttname"><a href="classllvm_1_1BranchInst.html#a7e4be8b16fbd68c9045a388904044e01">llvm::BranchInst::isConditional</a></div><div class="ttdeci">bool isConditional() const</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03218">Instructions.h:3218</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchInst_html_ad97f2e60cf22f15e0cf617af52309031"><div class="ttname"><a href="classllvm_1_1BranchInst.html#ad97f2e60cf22f15e0cf617af52309031">llvm::BranchInst::getSuccessor</a></div><div class="ttdeci">BasicBlock * getSuccessor(unsigned i) const</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03232">Instructions.h:3232</a></div></div>
<div class="ttc" id="aclassllvm_1_1DominatorTreeBase_html_a71c91cbbfc1c0ecf9a69e10ccf739bd7"><div class="ttname"><a href="classllvm_1_1DominatorTreeBase.html#a71c91cbbfc1c0ecf9a69e10ccf739bd7">llvm::DominatorTreeBase&lt; BasicBlock, false &gt;::Delete</a></div><div class="ttdeci">static constexpr UpdateKind Delete</div><div class="ttdef"><b>Definition:</b> <a href="GenericDomTree_8h_source.html#l00259">GenericDomTree.h:259</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_af67d1f3a518964d80a109bb3d9d5cf1e"><div class="ttname"><a href="classllvm_1_1Instruction.html#af67d1f3a518964d80a109bb3d9d5cf1e">llvm::Instruction::moveBefore</a></div><div class="ttdeci">void moveBefore(Instruction *MovePos)</div><div class="ttdoc">Unlink this instruction from its current basic block and insert it into the basic block that MovePos ...</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8cpp_source.html#l00108">Instruction.cpp:108</a></div></div>
<div class="ttc" id="aclassllvm_1_1Use_html"><div class="ttname"><a href="classllvm_1_1Use.html">llvm::Use</a></div><div class="ttdoc">A Use represents the edge between a Value definition and its users.</div><div class="ttdef"><b>Definition:</b> <a href="Use_8h_source.html#l00043">Use.h:43</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Aug 7 2023 10:36:01 for LLVM by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>

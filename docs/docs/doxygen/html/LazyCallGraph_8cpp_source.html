<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LLVM: lib/Analysis/LazyCallGraph.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">LLVM
   &#160;<span id="projectnumber">17.0.0git</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a class="el" href="dir_a25db018342d3ae6c7e6779086c18378.html">Analysis</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">LazyCallGraph.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="LazyCallGraph_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//===- LazyCallGraph.cpp - Analysis of a Module&#39;s call graph --------------===//</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">// See https://llvm.org/LICENSE.txt for license information.</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160; </div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LazyCallGraph_8h.html">llvm/Analysis/LazyCallGraph.h</a>&quot;</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160; </div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ArrayRef_8h.html">llvm/ADT/ArrayRef.h</a>&quot;</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="STLExtras_8h.html">llvm/ADT/STLExtras.h</a>&quot;</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Sequence_8h.html">llvm/ADT/Sequence.h</a>&quot;</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SmallPtrSet_8h.html">llvm/ADT/SmallPtrSet.h</a>&quot;</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SmallVector_8h.html">llvm/ADT/SmallVector.h</a>&quot;</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="iterator__range_8h.html">llvm/ADT/iterator_range.h</a>&quot;</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="TargetLibraryInfo_8h.html">llvm/Analysis/TargetLibraryInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Constants_8h.html">llvm/IR/Constants.h</a>&quot;</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Function_8h.html">llvm/IR/Function.h</a>&quot;</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="GlobalVariable_8h.html">llvm/IR/GlobalVariable.h</a>&quot;</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="InstIterator_8h.html">llvm/IR/InstIterator.h</a>&quot;</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="IR_2Instruction_8h.html">llvm/IR/Instruction.h</a>&quot;</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Module_8h.html">llvm/IR/Module.h</a>&quot;</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="PassManager_8h.html">llvm/IR/PassManager.h</a>&quot;</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Casting_8h.html">llvm/Support/Casting.h</a>&quot;</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Compiler_8h.html">llvm/Support/Compiler.h</a>&quot;</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Debug_8h.html">llvm/Support/Debug.h</a>&quot;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="GraphWriter_8h.html">llvm/Support/GraphWriter.h</a>&quot;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="raw__ostream_8h.html">llvm/Support/raw_ostream.h</a>&quot;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &lt;algorithm&gt;</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160; </div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#ifdef EXPENSIVE_CHECKS</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ScopeExit_8h.html">llvm/ADT/ScopeExit.h</a>&quot;</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160; </div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespacellvm.html">llvm</a>;</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160; </div>
<div class="line"><a name="l00038"></a><span class="lineno"><a class="line" href="LazyCallGraph_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">   38</a></span>&#160;<span class="preprocessor">#define DEBUG_TYPE &quot;lcg&quot;</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160; </div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="keywordtype">void</span> LazyCallGraph::EdgeSequence::insertEdgeInternal(Node &amp;TargetN,</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;                                                     <a class="code" href="namespacellvm_1_1lltok.html#af353621f14cb4b4b3af5ffaff84076b1">Edge::Kind</a> EK) {</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;  EdgeIndexMap.try_emplace(&amp;TargetN, Edges.size());</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;  Edges.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a396fcfee6914c76974b73c3d203da6a5">emplace_back</a>(TargetN, EK);</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;}</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160; </div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="keywordtype">void</span> LazyCallGraph::EdgeSequence::setEdgeKind(Node &amp;TargetN, <a class="code" href="classllvm_1_1LazyCallGraph_1_1Edge.html#a8a5508e6c049172373b05c47c1b6fe13">Edge::Kind</a> EK) {</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;  Edges[EdgeIndexMap.find(&amp;TargetN)-&gt;second].setKind(EK);</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;}</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160; </div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="keywordtype">bool</span> LazyCallGraph::EdgeSequence::removeEdgeInternal(Node &amp;TargetN) {</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;  <span class="keyword">auto</span> IndexMapI = EdgeIndexMap.find(&amp;TargetN);</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;  <span class="keywordflow">if</span> (IndexMapI == EdgeIndexMap.end())</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160; </div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;  Edges[IndexMapI-&gt;second] = Edge();</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;  EdgeIndexMap.erase(IndexMapI);</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;}</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160; </div>
<div class="line"><a name="l00060"></a><span class="lineno"><a class="line" href="LazyCallGraph_8cpp.html#aec802e48dd5ef69029e285eddfc4158d">   60</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="LazyCallGraph_8cpp.html#aec802e48dd5ef69029e285eddfc4158d">addEdge</a>(<a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;LazyCallGraph::Edge&gt;</a> &amp;Edges,</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;                    <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;LazyCallGraph::Node *, int&gt;</a> &amp;EdgeIndexMap,</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;                    <a class="code" href="classllvm_1_1LazyCallGraph_1_1Node.html">LazyCallGraph::Node</a> &amp;<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>, <a class="code" href="classllvm_1_1LazyCallGraph_1_1Edge.html#a8a5508e6c049172373b05c47c1b6fe13">LazyCallGraph::Edge::Kind</a> EK) {</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;  <span class="keywordflow">if</span> (!EdgeIndexMap.<a class="code" href="classllvm_1_1DenseMapBase.html#a98c685a0c53f3f7ed5f4793890a6c850">try_emplace</a>(&amp;<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>, Edges.size()).second)</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160; </div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;    Added callable function: &quot;</span> &lt;&lt; <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>.getName() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;  Edges.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a396fcfee6914c76974b73c3d203da6a5">emplace_back</a>(<a class="code" href="classllvm_1_1LazyCallGraph_1_1Edge.html">LazyCallGraph::Edge</a>(<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>, EK));</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;}</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160; </div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<a class="code" href="classllvm_1_1LazyCallGraph_1_1EdgeSequence.html">LazyCallGraph::EdgeSequence</a> &amp;LazyCallGraph::Node::populateSlow() {</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!Edges &amp;&amp; <span class="stringliteral">&quot;Must not have already populated the edges for this node!&quot;</span>);</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160; </div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  Adding functions called by &#39;&quot;</span> &lt;&lt; <a class="code" href="ProvenanceAnalysisEvaluator_8cpp.html#a2ee79648e8bce3ddbb26358ff10e3e82">getName</a>()</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;                    &lt;&lt; <span class="stringliteral">&quot;&#39; to the graph.\n&quot;</span>);</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160; </div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;  Edges = EdgeSequence();</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160; </div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Constant *, 16&gt;</a> Worklist;</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;Function *, 4&gt;</a> Callees;</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;Constant *, 16&gt;</a> Visited;</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160; </div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;  <span class="comment">// Find all the potential call graph edges in this function. We track both</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;  <span class="comment">// actual call edges and indirect references to functions. The direct calls</span></div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;  <span class="comment">// are trivially added, but to accumulate the latter we walk the instructions</span></div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;  <span class="comment">// and add every operand which is a constant to the worklist to process</span></div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;  <span class="comment">// afterward.</span></div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;  <span class="comment">// Note that we consider *any* function with a definition to be a viable</span></div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;  <span class="comment">// edge. Even if the function&#39;s definition is subject to replacement by</span></div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;  <span class="comment">// some other module (say, a weak definition) there may still be</span></div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;  <span class="comment">// optimizations which essentially speculate based on the definition and</span></div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;  <span class="comment">// a way to check that the specific definition is in fact the one being</span></div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;  <span class="comment">// used. For example, this could be done by moving the weak definition to</span></div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;  <span class="comment">// a strong (internal) definition and making the weak definition be an</span></div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;  <span class="comment">// alias. Then a test of the address of the weak function against the new</span></div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;  <span class="comment">// strong definition&#39;s address would be an effective way to determine the</span></div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;  <span class="comment">// safety of optimizing a direct call edge.</span></div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> &amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> : *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>)</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) {</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> *CB = dyn_cast&lt;CallBase&gt;(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Function.html">Function</a> *Callee = CB-&gt;getCalledFunction())</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;          <span class="keywordflow">if</span> (!<a class="code" href="AMDGPULibCalls_8cpp.html#a537c835c34f0b44b6ad2696643754390">Callee</a>-&gt;isDeclaration())</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;            <span class="keywordflow">if</span> (Callees.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(Callee).second) {</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;              Visited.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(Callee);</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;              <a class="code" href="LazyCallGraph_8cpp.html#aec802e48dd5ef69029e285eddfc4158d">addEdge</a>(Edges-&gt;Edges, Edges-&gt;EdgeIndexMap, <a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>-&gt;get(*Callee),</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;                      <a class="code" href="classllvm_1_1LazyCallGraph_1_1Edge.html#a8a5508e6c049172373b05c47c1b6fe13a13b74fdca959e0c5da734f789b298cf6">LazyCallGraph::Edge::Call</a>);</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;            }</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160; </div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a> : <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.operand_values())</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = dyn_cast&lt;Constant&gt;(<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>))</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;          <span class="keywordflow">if</span> (Visited.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>).second)</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;            Worklist.push_back(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    }</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160; </div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;  <span class="comment">// We&#39;ve collected all the constant (and thus potentially function or</span></div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;  <span class="comment">// function containing) operands to all the instructions in the function.</span></div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;  <span class="comment">// Process them (recursively) collecting every function found.</span></div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;  <a class="code" href="classllvm_1_1LazyCallGraph.html#a778d0494c2f8dec95d60160b1ce89a07">visitReferences</a>(Worklist, Visited, [&amp;](<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>) {</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    <a class="code" href="LazyCallGraph_8cpp.html#aec802e48dd5ef69029e285eddfc4158d">addEdge</a>(Edges-&gt;Edges, Edges-&gt;EdgeIndexMap, <a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>-&gt;get(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>),</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;            <a class="code" href="classllvm_1_1LazyCallGraph_1_1Edge.html#a8a5508e6c049172373b05c47c1b6fe13a81845d1d6d0f58deb757fad1e739c32c">LazyCallGraph::Edge::Ref</a>);</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;  });</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160; </div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;  <span class="comment">// Add implicit reference edges to any defined libcall functions (if we</span></div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;  <span class="comment">// haven&#39;t found an explicit edge).</span></div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> : <a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>-&gt;LibFunctions)</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    <span class="keywordflow">if</span> (!Visited.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a1f475b0df44ebd7169e720fa1bf9169e">count</a>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>))</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;      <a class="code" href="LazyCallGraph_8cpp.html#aec802e48dd5ef69029e285eddfc4158d">addEdge</a>(Edges-&gt;Edges, Edges-&gt;EdgeIndexMap, <a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>-&gt;get(*<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>),</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;              <a class="code" href="classllvm_1_1LazyCallGraph_1_1Edge.html#a8a5508e6c049172373b05c47c1b6fe13a81845d1d6d0f58deb757fad1e739c32c">LazyCallGraph::Edge::Ref</a>);</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160; </div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;  <span class="keywordflow">return</span> *Edges;</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;}</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160; </div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;<span class="keywordtype">void</span> LazyCallGraph::Node::replaceFunction(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;NewF) {</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> != &amp;NewF &amp;&amp; <span class="stringliteral">&quot;Must not replace a function with itself!&quot;</span>);</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;  <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> = &amp;NewF;</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;}</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160; </div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;<span class="preprocessor">#if !defined(NDEBUG) || defined(LLVM_ENABLE_DUMP)</span></div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;<a class="code" href="Compiler_8h.html#aa863693eef567397d9c292da5bf22d34">LLVM_DUMP_METHOD</a> <span class="keywordtype">void</span> LazyCallGraph::Node::dump()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;  <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; *<span class="keyword">this</span> &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;}</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160; </div>
<div class="line"><a name="l00144"></a><span class="lineno"><a class="line" href="LazyCallGraph_8cpp.html#af481ee3f81ad12db32ea0df13ec4b0d0">  144</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="LazyCallGraph_8cpp.html#af481ee3f81ad12db32ea0df13ec4b0d0">isKnownLibFunction</a>(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, <a class="code" href="classllvm_1_1TargetLibraryInfo.html">TargetLibraryInfo</a> &amp;TLI) {</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;  <a class="code" href="namespacellvm.html#a26a5e408fc09c5664d2bbb2d7fae154e">LibFunc</a> LF;</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160; </div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;  <span class="comment">// Either this is a normal library function or a &quot;vectorizable&quot;</span></div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;  <span class="comment">// function.  Not using the VFDatabase here because this query</span></div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;  <span class="comment">// is related only to libraries handled via the TLI.</span></div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;  <span class="keywordflow">return</span> TLI.<a class="code" href="classllvm_1_1TargetLibraryInfo.html#a97cfbbed8869e3582142012a071a9052">getLibFunc</a>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, LF) ||</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;         TLI.<a class="code" href="classllvm_1_1TargetLibraryInfo.html#a509a54a541f436c80708c727d0b4d1b3">isKnownVectorFunctionInLibrary</a>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getName());</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;}</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160; </div>
<div class="line"><a name="l00154"></a><span class="lineno"><a class="line" href="classllvm_1_1LazyCallGraph.html#a58d534b072f7d0fa5f54ff569bb745ec">  154</a></span>&#160;<a class="code" href="classllvm_1_1LazyCallGraph.html#a58d534b072f7d0fa5f54ff569bb745ec">LazyCallGraph::LazyCallGraph</a>(</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    <a class="code" href="classllvm_1_1Module.html">Module</a> &amp;M, <a class="code" href="classllvm_1_1function__ref.html">function_ref</a>&lt;<a class="code" href="classllvm_1_1TargetLibraryInfo.html">TargetLibraryInfo</a> &amp;(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;)&gt; GetTLI) {</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Building CG for module: &quot;</span> &lt;&lt; <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getModuleIdentifier()</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;                    &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> : <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>) {</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.isDeclaration())</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    <span class="comment">// If this function is a known lib function to LLVM then we want to</span></div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    <span class="comment">// synthesize reference edges to it to model the fact that LLVM can turn</span></div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    <span class="comment">// arbitrary code into a library function call.</span></div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="LazyCallGraph_8cpp.html#af481ee3f81ad12db32ea0df13ec4b0d0">isKnownLibFunction</a>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, GetTLI(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>)))</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;      LibFunctions.insert(&amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160; </div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.hasLocalLinkage())</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160; </div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <span class="comment">// External linkage defined functions have edges to them from other</span></div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    <span class="comment">// modules.</span></div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  Adding &#39;&quot;</span> &lt;&lt; <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getName()</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;                      &lt;&lt; <span class="stringliteral">&quot;&#39; to entry set of the graph.\n&quot;</span>);</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    <a class="code" href="LazyCallGraph_8cpp.html#aec802e48dd5ef69029e285eddfc4158d">addEdge</a>(EntryEdges.Edges, EntryEdges.EdgeIndexMap, <a class="code" href="classllvm_1_1LazyCallGraph.html#a2e0002cac27faad0015b4fa7e5a3eb50">get</a>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>), <a class="code" href="classllvm_1_1LazyCallGraph_1_1Edge.html#a8a5508e6c049172373b05c47c1b6fe13a81845d1d6d0f58deb757fad1e739c32c">Edge::Ref</a>);</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;  }</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160; </div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;  <span class="comment">// Externally visible aliases of internal functions are also viable entry</span></div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;  <span class="comment">// edges to the module.</span></div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;A : <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.aliases()) {</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    <span class="keywordflow">if</span> (A.hasLocalLinkage())</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Function.html">Function</a>* <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> = dyn_cast&lt;Function&gt;(A.getAliasee())) {</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  Adding &#39;&quot;</span> &lt;&lt; <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;getName()</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;                        &lt;&lt; <span class="stringliteral">&quot;&#39; with alias &#39;&quot;</span> &lt;&lt; A.getName()</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;                        &lt;&lt; <span class="stringliteral">&quot;&#39; to entry set of the graph.\n&quot;</span>);</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;      <a class="code" href="LazyCallGraph_8cpp.html#aec802e48dd5ef69029e285eddfc4158d">addEdge</a>(EntryEdges.Edges, EntryEdges.EdgeIndexMap, <a class="code" href="classllvm_1_1LazyCallGraph.html#a2e0002cac27faad0015b4fa7e5a3eb50">get</a>(*<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>), <a class="code" href="classllvm_1_1LazyCallGraph_1_1Edge.html#a8a5508e6c049172373b05c47c1b6fe13a81845d1d6d0f58deb757fad1e739c32c">Edge::Ref</a>);</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    }</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;  }</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160; </div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;  <span class="comment">// Now add entry nodes for functions reachable via initializers to globals.</span></div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Constant *, 16&gt;</a> Worklist;</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;Constant *, 16&gt;</a> Visited;</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a> &amp;GV : <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.globals())</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    <span class="keywordflow">if</span> (GV.hasInitializer())</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;      <span class="keywordflow">if</span> (Visited.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(GV.getInitializer()).second)</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;        Worklist.push_back(GV.getInitializer());</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160; </div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;      <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  Adding functions referenced by global initializers to the &quot;</span></div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;                <span class="stringliteral">&quot;entry set.\n&quot;</span>);</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;  <a class="code" href="classllvm_1_1LazyCallGraph.html#a778d0494c2f8dec95d60160b1ce89a07">visitReferences</a>(Worklist, Visited, [&amp;](<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>) {</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    <a class="code" href="LazyCallGraph_8cpp.html#aec802e48dd5ef69029e285eddfc4158d">addEdge</a>(EntryEdges.Edges, EntryEdges.EdgeIndexMap, <a class="code" href="classllvm_1_1LazyCallGraph.html#a2e0002cac27faad0015b4fa7e5a3eb50">get</a>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>),</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;            <a class="code" href="classllvm_1_1LazyCallGraph_1_1Edge.html#a8a5508e6c049172373b05c47c1b6fe13a81845d1d6d0f58deb757fad1e739c32c">LazyCallGraph::Edge::Ref</a>);</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;  });</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;}</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160; </div>
<div class="line"><a name="l00207"></a><span class="lineno"><a class="line" href="classllvm_1_1LazyCallGraph.html#a726eb1ab5c24c68c029e4378a0a3ce12">  207</a></span>&#160;<a class="code" href="classllvm_1_1LazyCallGraph.html#a58d534b072f7d0fa5f54ff569bb745ec">LazyCallGraph::LazyCallGraph</a>(<a class="code" href="classllvm_1_1LazyCallGraph.html">LazyCallGraph</a> &amp;&amp;<a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>)</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    : BPA(<a class="code" href="namespacestd.html">std</a>::<a class="code" href="namespacellvm.html#abfc9c7ecf70f66901e439f7c04ef3dbb">move</a>(<a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>.BPA)), NodeMap(<a class="code" href="namespacestd.html">std</a>::<a class="code" href="namespacellvm.html#abfc9c7ecf70f66901e439f7c04ef3dbb">move</a>(<a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>.NodeMap)),</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;      EntryEdges(<a class="code" href="namespacestd.html">std</a>::<a class="code" href="namespacellvm.html#abfc9c7ecf70f66901e439f7c04ef3dbb">move</a>(<a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>.EntryEdges)), SCCBPA(<a class="code" href="namespacestd.html">std</a>::<a class="code" href="namespacellvm.html#abfc9c7ecf70f66901e439f7c04ef3dbb">move</a>(<a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>.SCCBPA)),</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;      SCCMap(<a class="code" href="namespacestd.html">std</a>::<a class="code" href="namespacellvm.html#abfc9c7ecf70f66901e439f7c04ef3dbb">move</a>(<a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>.SCCMap)), LibFunctions(<a class="code" href="namespacestd.html">std</a>::<a class="code" href="namespacellvm.html#abfc9c7ecf70f66901e439f7c04ef3dbb">move</a>(<a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>.LibFunctions)) {</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;  updateGraphPtrs();</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;}</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160; </div>
<div class="line"><a name="l00214"></a><span class="lineno"><a class="line" href="classllvm_1_1LazyCallGraph.html#ae6c105e6215a1507fd7bc89f83e3c62f">  214</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1LazyCallGraph.html#ae6c105e6215a1507fd7bc89f83e3c62f">LazyCallGraph::invalidate</a>(<a class="code" href="classllvm_1_1Module.html">Module</a> &amp;, <span class="keyword">const</span> <a class="code" href="classllvm_1_1PreservedAnalyses.html">PreservedAnalyses</a> &amp;PA,</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;                               <a class="code" href="classllvm_1_1AnalysisManager_1_1Invalidator.html">ModuleAnalysisManager::Invalidator</a> &amp;) {</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;  <span class="comment">// Check whether the analysis, all analyses on functions, or the function&#39;s</span></div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;  <span class="comment">// CFG have been preserved.</span></div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;  <span class="keyword">auto</span> PAC = PA.<a class="code" href="classllvm_1_1PreservedAnalyses.html#aa7a1b769f9c57010cc41d9c3bb9d39c6">getChecker</a>&lt;<a class="code" href="classllvm_1_1LazyCallGraphAnalysis.html">llvm::LazyCallGraphAnalysis</a>&gt;();</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;  <span class="keywordflow">return</span> !(PAC.preserved() || PAC.preservedSet&lt;<a class="code" href="classllvm_1_1AllAnalysesOn.html">AllAnalysesOn&lt;Module&gt;</a>&gt;());</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;}</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160; </div>
<div class="line"><a name="l00222"></a><span class="lineno"><a class="line" href="classllvm_1_1LazyCallGraph.html#ae201589cad3a446f3a6284f02b0df850">  222</a></span>&#160;<a class="code" href="classllvm_1_1LazyCallGraph.html">LazyCallGraph</a> &amp;<a class="code" href="classllvm_1_1LazyCallGraph.html#ae201589cad3a446f3a6284f02b0df850">LazyCallGraph::operator=</a>(<a class="code" href="classllvm_1_1LazyCallGraph.html">LazyCallGraph</a> &amp;&amp;<a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>) {</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;  BPA = <a class="code" href="lib_2Target_2ARM_2README_8txt.html#ad3a99906764c35b2694ae90fa57744a5">std::move</a>(<a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>.BPA);</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;  NodeMap = <a class="code" href="lib_2Target_2ARM_2README_8txt.html#ad3a99906764c35b2694ae90fa57744a5">std::move</a>(<a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>.NodeMap);</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;  EntryEdges = <a class="code" href="lib_2Target_2ARM_2README_8txt.html#ad3a99906764c35b2694ae90fa57744a5">std::move</a>(<a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>.EntryEdges);</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;  SCCBPA = <a class="code" href="lib_2Target_2ARM_2README_8txt.html#ad3a99906764c35b2694ae90fa57744a5">std::move</a>(<a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>.SCCBPA);</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;  SCCMap = <a class="code" href="lib_2Target_2ARM_2README_8txt.html#ad3a99906764c35b2694ae90fa57744a5">std::move</a>(<a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>.SCCMap);</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;  LibFunctions = <a class="code" href="lib_2Target_2ARM_2README_8txt.html#ad3a99906764c35b2694ae90fa57744a5">std::move</a>(<a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>.LibFunctions);</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;  updateGraphPtrs();</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;  <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;}</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160; </div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;<span class="preprocessor">#if !defined(NDEBUG) || defined(LLVM_ENABLE_DUMP)</span></div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;<a class="code" href="Compiler_8h.html#aa863693eef567397d9c292da5bf22d34">LLVM_DUMP_METHOD</a> <span class="keywordtype">void</span> LazyCallGraph::SCC::dump()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;  <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; *<span class="keyword">this</span> &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;}</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160; </div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;<span class="preprocessor">#if !defined(NDEBUG) || defined(EXPENSIVE_CHECKS)</span></div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;<span class="keywordtype">void</span> LazyCallGraph::SCC::verify() {</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(OuterRefSCC &amp;&amp; <span class="stringliteral">&quot;Can&#39;t have a null RefSCC!&quot;</span>);</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!Nodes.empty() &amp;&amp; <span class="stringliteral">&quot;Can&#39;t have an empty SCC!&quot;</span>);</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160; </div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;  <span class="keywordflow">for</span> (Node *<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a> : Nodes) {</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a> &amp;&amp; <span class="stringliteral">&quot;Can&#39;t have a null node!&quot;</span>);</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(OuterRefSCC-&gt;G-&gt;lookupSCC(*<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>) == <span class="keyword">this</span> &amp;&amp;</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;           <span class="stringliteral">&quot;Node does not map to this SCC!&quot;</span>);</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;DFSNumber == -1 &amp;&amp;</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;           <span class="stringliteral">&quot;Must set DFS numbers to -1 when adding a node to an SCC!&quot;</span>);</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;LowLink == -1 &amp;&amp;</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;           <span class="stringliteral">&quot;Must set low link to -1 when adding a node to an SCC!&quot;</span>);</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    <span class="keywordflow">for</span> (Edge &amp;<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> : **<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>)</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>.getNode().isPopulated() &amp;&amp; <span class="stringliteral">&quot;Can&#39;t have an unpopulated node!&quot;</span>);</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160; </div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;<span class="preprocessor">#ifdef EXPENSIVE_CHECKS</span></div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    <span class="comment">// Verify that all nodes in this SCC can reach all other nodes.</span></div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Node *, 4&gt;</a> Worklist;</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;Node *, 4&gt;</a> Visited;</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    Worklist.push_back(<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>);</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    <span class="keywordflow">while</span> (!Worklist.empty()) {</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;      Node *VisitingNode = Worklist.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a0c8ffe664a36e30d49c84d0aded2fe08">pop_back_val</a>();</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;      <span class="keywordflow">if</span> (!Visited.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(VisitingNode).second)</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;      <span class="keywordflow">for</span> (Edge &amp;<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> : (*VisitingNode)-&gt;calls())</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;        Worklist.push_back(&amp;<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>.getNode());</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    }</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    <span class="keywordflow">for</span> (Node *NodeToVisit : Nodes) {</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Visited.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#af74676a3c7447be34bd2c1da76ec0c48">contains</a>(NodeToVisit) &amp;&amp;</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;             <span class="stringliteral">&quot;Cannot reach all nodes within SCC&quot;</span>);</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    }</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;  }</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;}</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160; </div>
<div class="line"><a name="l00276"></a><span class="lineno"><a class="line" href="classllvm_1_1LazyCallGraph_1_1SCC.html#a542a7d70121296c36071303e26b68b7a">  276</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1LazyCallGraph_1_1SCC.html#a542a7d70121296c36071303e26b68b7a">LazyCallGraph::SCC::isParentOf</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1LazyCallGraph_1_1SCC.html">SCC</a> &amp;<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">this</span> == &amp;<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160; </div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1LazyCallGraph_1_1Node.html">Node</a> &amp;<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a> : *<span class="keyword">this</span>)</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1LazyCallGraph_1_1Edge.html">Edge</a> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> : <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;calls())</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;      <span class="keywordflow">if</span> (OuterRefSCC-&gt;G-&gt;lookupSCC(<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>.getNode()) == &amp;<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160; </div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;  <span class="comment">// No edges found.</span></div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;}</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160; </div>
<div class="line"><a name="l00289"></a><span class="lineno"><a class="line" href="classllvm_1_1LazyCallGraph_1_1SCC.html#a024bad6935b15f7080b08b5dfec4eade">  289</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1LazyCallGraph_1_1SCC.html#a024bad6935b15f7080b08b5dfec4eade">LazyCallGraph::SCC::isAncestorOf</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1LazyCallGraph_1_1SCC.html">SCC</a> &amp;TargetC)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">this</span> == &amp;TargetC)</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160; </div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;  <a class="code" href="classllvm_1_1LazyCallGraph.html">LazyCallGraph</a> &amp;<a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a> = *OuterRefSCC-&gt;G;</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160; </div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;  <span class="comment">// Start with this SCC.</span></div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;const SCC *, 16&gt;</a> Visited = {<span class="keyword">this</span>};</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;const SCC *, 16&gt;</a> Worklist = {<span class="keyword">this</span>};</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160; </div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;  <span class="comment">// Walk down the graph until we run out of edges or find a path to TargetC.</span></div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;  <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1LazyCallGraph_1_1SCC.html">SCC</a> &amp;<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = *Worklist.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a0c8ffe664a36e30d49c84d0aded2fe08">pop_back_val</a>();</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1LazyCallGraph_1_1Node.html">Node</a> &amp;<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a> : <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1LazyCallGraph_1_1Edge.html">Edge</a> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> : <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;calls()) {</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;        <a class="code" href="classllvm_1_1LazyCallGraph_1_1SCC.html">SCC</a> *CalleeC = <a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>.lookupSCC(<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>.getNode());</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;        <span class="keywordflow">if</span> (!CalleeC)</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160; </div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;        <span class="comment">// If the callee&#39;s SCC is the TargetC, we&#39;re done.</span></div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;        <span class="keywordflow">if</span> (CalleeC == &amp;TargetC)</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160; </div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;        <span class="comment">// If this is the first time we&#39;ve reached this SCC, put it on the</span></div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;        <span class="comment">// worklist to recurse through.</span></div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;        <span class="keywordflow">if</span> (Visited.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(CalleeC).second)</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;          Worklist.push_back(CalleeC);</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;      }</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;  } <span class="keywordflow">while</span> (!Worklist.empty());</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160; </div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;  <span class="comment">// No paths found.</span></div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;}</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160; </div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;LazyCallGraph::RefSCC::RefSCC(<a class="code" href="classllvm_1_1LazyCallGraph.html">LazyCallGraph</a> &amp;<a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>) : <a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>(&amp;<a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>) {}</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160; </div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;<span class="preprocessor">#if !defined(NDEBUG) || defined(LLVM_ENABLE_DUMP)</span></div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;<a class="code" href="Compiler_8h.html#aa863693eef567397d9c292da5bf22d34">LLVM_DUMP_METHOD</a> <span class="keywordtype">void</span> LazyCallGraph::RefSCC::dump()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;  <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; *<span class="keyword">this</span> &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;}</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160; </div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;<span class="preprocessor">#if !defined(NDEBUG) || defined(EXPENSIVE_CHECKS)</span></div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;<span class="keywordtype">void</span> LazyCallGraph::RefSCC::verify() {</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a> &amp;&amp; <span class="stringliteral">&quot;Can&#39;t have a null graph!&quot;</span>);</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!SCCs.empty() &amp;&amp; <span class="stringliteral">&quot;Can&#39;t have an empty SCC!&quot;</span>);</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160; </div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;  <span class="comment">// Verify basic properties of the SCCs.</span></div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;SCC *, 4&gt;</a> SCCSet;</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="namespacellvm_1_1AMDGPU_1_1CPol.html#a7d79a4b341da8ac60b91c1f4b1ea42c4aca1659af59093b2b14c2f8aad41e8e2a">SCC</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> : SCCs) {</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> &amp;&amp; <span class="stringliteral">&quot;Can&#39;t have a null SCC!&quot;</span>);</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;verify();</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(&amp;<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;getOuterRefSCC() == <span class="keyword">this</span> &amp;&amp;</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;           <span class="stringliteral">&quot;SCC doesn&#39;t think it is inside this RefSCC!&quot;</span>);</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    <span class="keywordtype">bool</span> Inserted = SCCSet.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>).second;</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Inserted &amp;&amp; <span class="stringliteral">&quot;Found a duplicate SCC!&quot;</span>);</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    <span class="keyword">auto</span> IndexIt = SCCIndices.find(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(IndexIt != SCCIndices.end() &amp;&amp;</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;           <span class="stringliteral">&quot;Found an SCC that doesn&#39;t have an index!&quot;</span>);</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;  }</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160; </div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;  <span class="comment">// Check that our indices map correctly.</span></div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> [<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>] : SCCIndices) {</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> &amp;&amp; <span class="stringliteral">&quot;Can&#39;t have a null SCC in the indices!&quot;</span>);</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(SCCSet.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a1f475b0df44ebd7169e720fa1bf9169e">count</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>) &amp;&amp; <span class="stringliteral">&quot;Found an index for an SCC not in the RefSCC!&quot;</span>);</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(SCCs[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>] == <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> &amp;&amp; <span class="stringliteral">&quot;Index doesn&#39;t point to SCC!&quot;</span>);</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;  }</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160; </div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;  <span class="comment">// Check that the SCCs are in fact in post-order.</span></div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0, Size = SCCs.size(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> &lt; Size; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    <a class="code" href="namespacellvm_1_1AMDGPU_1_1CPol.html#a7d79a4b341da8ac60b91c1f4b1ea42c4aca1659af59093b2b14c2f8aad41e8e2a">SCC</a> &amp;SourceSCC = *SCCs[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>];</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    <span class="keywordflow">for</span> (Node &amp;<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a> : SourceSCC)</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;      <span class="keywordflow">for</span> (Edge &amp;<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> : *<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>) {</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>.isCall())</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;        <a class="code" href="namespacellvm_1_1AMDGPU_1_1CPol.html#a7d79a4b341da8ac60b91c1f4b1ea42c4aca1659af59093b2b14c2f8aad41e8e2a">SCC</a> &amp;TargetSCC = *<a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>-&gt;lookupSCC(<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>.getNode());</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;        <span class="keywordflow">if</span> (&amp;TargetSCC.getOuterRefSCC() == <span class="keyword">this</span>) {</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;          <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(SCCIndices.find(&amp;TargetSCC)-&gt;second &lt;= <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> &amp;&amp;</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;                 <span class="stringliteral">&quot;Edge between SCCs violates post-order relationship.&quot;</span>);</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;        }</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;      }</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;  }</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160; </div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;<span class="preprocessor">#ifdef EXPENSIVE_CHECKS</span></div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;  <span class="comment">// Verify that all nodes in this RefSCC can reach all other nodes.</span></div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Node *&gt;</a> Nodes;</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="namespacellvm_1_1AMDGPU_1_1CPol.html#a7d79a4b341da8ac60b91c1f4b1ea42c4aca1659af59093b2b14c2f8aad41e8e2a">SCC</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> : SCCs) {</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    <span class="keywordflow">for</span> (Node &amp;<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a> : *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;      Nodes.push_back(&amp;<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>);</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;  }</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;  <span class="keywordflow">for</span> (Node *<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a> : Nodes) {</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Node *, 4&gt;</a> Worklist;</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;Node *, 4&gt;</a> Visited;</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    Worklist.push_back(<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>);</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    <span class="keywordflow">while</span> (!Worklist.empty()) {</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;      Node *VisitingNode = Worklist.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a0c8ffe664a36e30d49c84d0aded2fe08">pop_back_val</a>();</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;      <span class="keywordflow">if</span> (!Visited.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(VisitingNode).second)</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;      <span class="keywordflow">for</span> (Edge &amp;<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> : **VisitingNode)</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;        Worklist.push_back(&amp;<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>.getNode());</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;    }</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    <span class="keywordflow">for</span> (Node *NodeToVisit : Nodes) {</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Visited.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#af74676a3c7447be34bd2c1da76ec0c48">contains</a>(NodeToVisit) &amp;&amp;</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;             <span class="stringliteral">&quot;Cannot reach all nodes within RefSCC&quot;</span>);</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    }</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;  }</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;}</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160; </div>
<div class="line"><a name="l00400"></a><span class="lineno"><a class="line" href="classllvm_1_1LazyCallGraph_1_1RefSCC.html#af952e1ffaf5cd4bd83b63cf7fb4cb068">  400</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1LazyCallGraph_1_1RefSCC.html#af952e1ffaf5cd4bd83b63cf7fb4cb068">LazyCallGraph::RefSCC::isParentOf</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1LazyCallGraph_1_1RefSCC.html">RefSCC</a> &amp;RC)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;  <span class="keywordflow">if</span> (&amp;RC == <span class="keyword">this</span>)</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160; </div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;  <span class="comment">// Search all edges to see if this is a parent.</span></div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1LazyCallGraph_1_1SCC.html">SCC</a> &amp;<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> : *<span class="keyword">this</span>)</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1LazyCallGraph_1_1Node.html">Node</a> &amp;<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a> : <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1LazyCallGraph_1_1Edge.html">Edge</a> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> : *<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>)</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>-&gt;lookupRefSCC(<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>.getNode()) == &amp;RC)</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160; </div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;}</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160; </div>
<div class="line"><a name="l00414"></a><span class="lineno"><a class="line" href="classllvm_1_1LazyCallGraph_1_1RefSCC.html#a35a8d25c6df3f1d3bc5faba32de1dd55">  414</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1LazyCallGraph_1_1RefSCC.html#a35a8d25c6df3f1d3bc5faba32de1dd55">LazyCallGraph::RefSCC::isAncestorOf</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1LazyCallGraph_1_1RefSCC.html">RefSCC</a> &amp;RC)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;  <span class="keywordflow">if</span> (&amp;RC == <span class="keyword">this</span>)</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160; </div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;  <span class="comment">// For each descendant of this RefSCC, see if one of its children is the</span></div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;  <span class="comment">// argument. If not, add that descendant to the worklist and continue</span></div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;  <span class="comment">// searching.</span></div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;const RefSCC *, 4&gt;</a> Worklist;</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;const RefSCC *, 4&gt;</a> Visited;</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;  Worklist.push_back(<span class="keyword">this</span>);</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;  Visited.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(<span class="keyword">this</span>);</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;  <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1LazyCallGraph_1_1RefSCC.html">RefSCC</a> &amp;DescendantRC = *Worklist.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a0c8ffe664a36e30d49c84d0aded2fe08">pop_back_val</a>();</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1LazyCallGraph_1_1SCC.html">SCC</a> &amp;<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> : DescendantRC)</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1LazyCallGraph_1_1Node.html">Node</a> &amp;<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a> : <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1LazyCallGraph_1_1Edge.html">Edge</a> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> : *<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>) {</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;          <span class="keyword">auto</span> *ChildRC = <a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>-&gt;lookupRefSCC(<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>.getNode());</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;          <span class="keywordflow">if</span> (ChildRC == &amp;RC)</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;          <span class="keywordflow">if</span> (!ChildRC || !Visited.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(ChildRC).second)</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;          Worklist.push_back(ChildRC);</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;        }</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;  } <span class="keywordflow">while</span> (!Worklist.empty());</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160; </div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;}</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;<span class="comment">/// Generic helper that updates a postorder sequence of SCCs for a potentially</span></div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;<span class="comment">/// cycle-introducing edge insertion.</span></div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;<span class="comment">/// A postorder sequence of SCCs of a directed graph has one fundamental</span></div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;<span class="comment">/// property: all deges in the DAG of SCCs point &quot;up&quot; the sequence. That is,</span></div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;<span class="comment">/// all edges in the SCC DAG point to prior SCCs in the sequence.</span></div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;<span class="comment">/// This routine both updates a postorder sequence and uses that sequence to</span></div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;<span class="comment">/// compute the set of SCCs connected into a cycle. It should only be called to</span></div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;<span class="comment">/// insert a &quot;downward&quot; edge which will require changing the sequence to</span></div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;<span class="comment">/// restore it to a postorder.</span></div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;<span class="comment">/// When inserting an edge from an earlier SCC to a later SCC in some postorder</span></div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;<span class="comment">/// sequence, all of the SCCs which may be impacted are in the closed range of</span></div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;<span class="comment">/// those two within the postorder sequence. The algorithm used here to restore</span></div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;<span class="comment">/// the state is as follows:</span></div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;<span class="comment">/// 1) Starting from the source SCC, construct a set of SCCs which reach the</span></div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;<span class="comment">///    source SCC consisting of just the source SCC. Then scan toward the</span></div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;<span class="comment">///    target SCC in postorder and for each SCC, if it has an edge to an SCC</span></div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;<span class="comment">///    in the set, add it to the set. Otherwise, the source SCC is not</span></div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;<span class="comment">///    a successor, move it in the postorder sequence to immediately before</span></div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;<span class="comment">///    the source SCC, shifting the source SCC and all SCCs in the set one</span></div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;<span class="comment">///    position toward the target SCC. Stop scanning after processing the</span></div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;<span class="comment">///    target SCC.</span></div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;<span class="comment">/// 2) If the source SCC is now past the target SCC in the postorder sequence,</span></div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;<span class="comment">///    and thus the new edge will flow toward the start, we are done.</span></div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;<span class="comment">/// 3) Otherwise, starting from the target SCC, walk all edges which reach an</span></div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;<span class="comment">///    SCC between the source and the target, and add them to the set of</span></div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;<span class="comment">///    connected SCCs, then recurse through them. Once a complete set of the</span></div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;<span class="comment">///    SCCs the target connects to is known, hoist the remaining SCCs between</span></div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;<span class="comment">///    the source and the target to be above the target. Note that there is no</span></div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;<span class="comment">///    need to process the source SCC, it is already known to connect.</span></div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;<span class="comment">/// 4) At this point, all of the SCCs in the closed range between the source</span></div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;<span class="comment">///    SCC and the target SCC in the postorder sequence are connected,</span></div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;<span class="comment">///    including the target SCC and the source SCC. Inserting the edge from</span></div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;<span class="comment">///    the source SCC to the target SCC will form a cycle out of precisely</span></div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;<span class="comment">///    these SCCs. Thus we can merge all of the SCCs in this closed range into</span></div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;<span class="comment">///    a single SCC.</span></div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;<span class="comment">/// This process has various important properties:</span></div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;<span class="comment">/// - Only mutates the SCCs when adding the edge actually changes the SCC</span></div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;<span class="comment">///   structure.</span></div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;<span class="comment">/// - Never mutates SCCs which are unaffected by the change.</span></div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;<span class="comment">/// - Updates the postorder sequence to correctly satisfy the postorder</span></div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;<span class="comment">///   constraint after the edge is inserted.</span></div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;<span class="comment">/// - Only reorders SCCs in the closed postorder sequence from the source to</span></div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;<span class="comment">///   the target, so easy to bound how much has changed even in the ordering.</span></div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;<span class="comment">/// - Big-O is the number of edges in the closed postorder range of SCCs from</span></div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;<span class="comment">///   source to target.</span></div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;<span class="comment">/// This helper routine, in addition to updating the postorder sequence itself</span></div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;<span class="comment">/// will also update a map from SCCs to indices within that sequence.</span></div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;<span class="comment">/// The sequence and the map must operate on pointers to the SCC type.</span></div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;<span class="comment">/// Two callbacks must be provided. The first computes the subset of SCCs in</span></div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;<span class="comment">/// the postorder closed range from the source to the target which connect to</span></div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;<span class="comment">/// the source SCC via some (transitive) set of edges. The second computes the</span></div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;<span class="comment">/// subset of the same range which the target SCC connects to via some</span></div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;<span class="comment">/// (transitive) set of edges. Both callbacks should populate the set argument</span></div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;<span class="comment">/// provided.</span></div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;<span class="comment"></span><span class="keyword">template</span> &lt;<span class="keyword">typename</span> SCCT, <span class="keyword">typename</span> PostorderSequenceT, <span class="keyword">typename</span> SCCIndexMapT,</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;          <span class="keyword">typename</span> ComputeSourceConnectedSetCallableT,</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;          <span class="keyword">typename</span> ComputeTargetConnectedSetCallableT&gt;</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1iterator__range.html">iterator_range&lt;typename PostorderSequenceT::iterator&gt;</a></div>
<div class="line"><a name="l00508"></a><span class="lineno"><a class="line" href="LazyCallGraph_8cpp.html#a0f2c7d407694a68c22a482cae3b17606">  508</a></span>&#160;<a class="code" href="LazyCallGraph_8cpp.html#a0f2c7d407694a68c22a482cae3b17606">updatePostorderSequenceForEdgeInsertion</a>(</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;    SCCT &amp;SourceSCC, SCCT &amp;TargetSCC, PostorderSequenceT &amp;SCCs,</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;    SCCIndexMapT &amp;SCCIndices,</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;    ComputeSourceConnectedSetCallableT ComputeSourceConnectedSet,</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;    ComputeTargetConnectedSetCallableT ComputeTargetConnectedSet) {</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;  <span class="keywordtype">int</span> SourceIdx = SCCIndices[&amp;SourceSCC];</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;  <span class="keywordtype">int</span> TargetIdx = SCCIndices[&amp;TargetSCC];</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(SourceIdx &lt; TargetIdx &amp;&amp; <span class="stringliteral">&quot;Cannot have equal indices here!&quot;</span>);</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160; </div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;SCCT *, 4&gt;</a> ConnectedSet;</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160; </div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;  <span class="comment">// Compute the SCCs which (transitively) reach the source.</span></div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;  ComputeSourceConnectedSet(ConnectedSet);</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160; </div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;  <span class="comment">// Partition the SCCs in this part of the port-order sequence so only SCCs</span></div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;  <span class="comment">// connecting to the source remain between it and the target. This is</span></div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;  <span class="comment">// a benign partition as it preserves postorder.</span></div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;  <span class="keyword">auto</span> SourceI = std::stable_partition(</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;      SCCs.begin() + SourceIdx, SCCs.begin() + TargetIdx + 1,</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;      [&amp;ConnectedSet](SCCT *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>) { return !ConnectedSet.count(C); });</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = SourceIdx, <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = TargetIdx + 1; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> &lt; <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;    SCCIndices.find(SCCs[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>])-&gt;second = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160; </div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;  <span class="comment">// If the target doesn&#39;t connect to the source, then we&#39;ve corrected the</span></div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;  <span class="comment">// post-order and there are no cycles formed.</span></div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;  <span class="keywordflow">if</span> (!ConnectedSet.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a1f475b0df44ebd7169e720fa1bf9169e">count</a>(&amp;TargetSCC)) {</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(SourceI &gt; (SCCs.begin() + SourceIdx) &amp;&amp;</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;           <span class="stringliteral">&quot;Must have moved the source to fix the post-order.&quot;</span>);</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(*std::prev(SourceI) == &amp;TargetSCC &amp;&amp;</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;           <span class="stringliteral">&quot;Last SCC to move should have bene the target.&quot;</span>);</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160; </div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;    <span class="comment">// Return an empty range at the target SCC indicating there is nothing to</span></div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;    <span class="comment">// merge.</span></div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#ad1a91b49e0c092818a0b82f6cc130a1b">make_range</a>(std::prev(SourceI), std::prev(SourceI));</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;  }</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160; </div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(SCCs[TargetIdx] == &amp;TargetSCC &amp;&amp;</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;         <span class="stringliteral">&quot;Should not have moved target if connected!&quot;</span>);</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;  SourceIdx = SourceI - SCCs.begin();</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(SCCs[SourceIdx] == &amp;SourceSCC &amp;&amp;</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;         <span class="stringliteral">&quot;Bad updated index computation for the source SCC!&quot;</span>);</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160; </div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;  <span class="comment">// See whether there are any remaining intervening SCCs between the source</span></div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;  <span class="comment">// and target. If so we need to make sure they all are reachable form the</span></div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;  <span class="comment">// target.</span></div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;  <span class="keywordflow">if</span> (SourceIdx + 1 &lt; TargetIdx) {</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;    ConnectedSet.<a class="code" href="classllvm_1_1SmallPtrSetImplBase.html#a16413f1a88d8baca228d0a1b4cc0bfc6">clear</a>();</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;    ComputeTargetConnectedSet(ConnectedSet);</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160; </div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;    <span class="comment">// Partition SCCs so that only SCCs reached from the target remain between</span></div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;    <span class="comment">// the source and the target. This preserves postorder.</span></div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;    <span class="keyword">auto</span> TargetI = std::stable_partition(</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;        SCCs.begin() + SourceIdx + 1, SCCs.begin() + TargetIdx + 1,</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;        [&amp;ConnectedSet](SCCT *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>) { return ConnectedSet.count(C); });</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = SourceIdx + 1, <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = TargetIdx + 1; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> &lt; <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;      SCCIndices.find(SCCs[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>])-&gt;second = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;    TargetIdx = std::prev(TargetI) - SCCs.begin();</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(SCCs[TargetIdx] == &amp;TargetSCC &amp;&amp;</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;           <span class="stringliteral">&quot;Should always end with the target!&quot;</span>);</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;  }</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160; </div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;  <span class="comment">// At this point, we know that connecting source to target forms a cycle</span></div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;  <span class="comment">// because target connects back to source, and we know that all the SCCs</span></div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;  <span class="comment">// between the source and target in the postorder sequence participate in that</span></div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;  <span class="comment">// cycle.</span></div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#ad1a91b49e0c092818a0b82f6cc130a1b">make_range</a>(SCCs.begin() + SourceIdx, SCCs.begin() + TargetIdx);</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;}</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160; </div>
<div class="line"><a name="l00576"></a><span class="lineno"><a class="line" href="classllvm_1_1LazyCallGraph_1_1RefSCC.html#a2957918db7f91f405b11d92c1ebf3b0f">  576</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1LazyCallGraph_1_1RefSCC.html#a2957918db7f91f405b11d92c1ebf3b0f">LazyCallGraph::RefSCC::switchInternalEdgeToCall</a>(</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;    <a class="code" href="classllvm_1_1LazyCallGraph_1_1Node.html">Node</a> &amp;SourceN, <a class="code" href="classllvm_1_1LazyCallGraph_1_1Node.html">Node</a> &amp;TargetN,</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;    <a class="code" href="classllvm_1_1function__ref.html">function_ref</a>&lt;<span class="keywordtype">void</span>(<a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;SCC *&gt;</a> MergeSCCs)&gt; MergeCB) {</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!(*SourceN)[TargetN].isCall() &amp;&amp; <span class="stringliteral">&quot;Must start with a ref edge!&quot;</span>);</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;SCC *, 1&gt;</a> DeletedSCCs;</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160; </div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;<span class="preprocessor">#ifdef EXPENSIVE_CHECKS</span></div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;  <a class="code" href="PPCCTRLoopsVerify_8cpp.html#a593cc2f204f7b2edc16ee222c37c3196">verify</a>();</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;  <span class="keyword">auto</span> VerifyOnExit = <a class="code" href="namespacellvm.html#ab2e3dbebd68e69d77c227682fc8e3ba2">make_scope_exit</a>([&amp;]() { <a class="code" href="PPCCTRLoopsVerify_8cpp.html#a593cc2f204f7b2edc16ee222c37c3196">verify</a>(); });</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160; </div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;  <a class="code" href="classllvm_1_1LazyCallGraph_1_1SCC.html">SCC</a> &amp;SourceSCC = *<a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>-&gt;lookupSCC(SourceN);</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;  <a class="code" href="classllvm_1_1LazyCallGraph_1_1SCC.html">SCC</a> &amp;TargetSCC = *<a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>-&gt;lookupSCC(TargetN);</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160; </div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;  <span class="comment">// If the two nodes are already part of the same SCC, we&#39;re also done as</span></div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;  <span class="comment">// we&#39;ve just added more connectivity.</span></div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;  <span class="keywordflow">if</span> (&amp;SourceSCC == &amp;TargetSCC) {</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;    SourceN-&gt;setEdgeKind(TargetN, <a class="code" href="classllvm_1_1LazyCallGraph_1_1Edge.html#a8a5508e6c049172373b05c47c1b6fe13a13b74fdca959e0c5da734f789b298cf6">Edge::Call</a>);</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="comment">// No new cycle.</span></div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;  }</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160; </div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;  <span class="comment">// At this point we leverage the postorder list of SCCs to detect when the</span></div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;  <span class="comment">// insertion of an edge changes the SCC structure in any way.</span></div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;  <span class="comment">// First and foremost, we can eliminate the need for any changes when the</span></div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;  <span class="comment">// edge is toward the beginning of the postorder sequence because all edges</span></div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;  <span class="comment">// flow in that direction already. Thus adding a new one cannot form a cycle.</span></div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;  <span class="keywordtype">int</span> SourceIdx = SCCIndices[&amp;SourceSCC];</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;  <span class="keywordtype">int</span> TargetIdx = SCCIndices[&amp;TargetSCC];</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;  <span class="keywordflow">if</span> (TargetIdx &lt; SourceIdx) {</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;    SourceN-&gt;setEdgeKind(TargetN, <a class="code" href="classllvm_1_1LazyCallGraph_1_1Edge.html#a8a5508e6c049172373b05c47c1b6fe13a13b74fdca959e0c5da734f789b298cf6">Edge::Call</a>);</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="comment">// No new cycle.</span></div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;  }</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160; </div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;  <span class="comment">// Compute the SCCs which (transitively) reach the source.</span></div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;  <span class="keyword">auto</span> ComputeSourceConnectedSet = [&amp;](<a class="code" href="classllvm_1_1SmallPtrSetImpl.html">SmallPtrSetImpl&lt;SCC *&gt;</a> &amp;ConnectedSet) {</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;<span class="preprocessor">#ifdef EXPENSIVE_CHECKS</span></div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;    <span class="comment">// Check that the RefSCC is still valid before computing this as the</span></div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;    <span class="comment">// results will be nonsensical of we&#39;ve broken its invariants.</span></div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;    <a class="code" href="PPCCTRLoopsVerify_8cpp.html#a593cc2f204f7b2edc16ee222c37c3196">verify</a>();</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;    ConnectedSet.insert(&amp;SourceSCC);</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;    <span class="keyword">auto</span> IsConnected = [&amp;](<a class="code" href="classllvm_1_1LazyCallGraph_1_1SCC.html">SCC</a> &amp;<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>) {</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1LazyCallGraph_1_1Node.html">Node</a> &amp;<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a> : <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1LazyCallGraph_1_1Edge.html">Edge</a> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> : <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;calls())</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;          <span class="keywordflow">if</span> (ConnectedSet.count(<a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>-&gt;lookupSCC(<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>.getNode())))</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160; </div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;    };</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160; </div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1LazyCallGraph_1_1SCC.html">SCC</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> :</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;         <a class="code" href="namespacellvm.html#ad1a91b49e0c092818a0b82f6cc130a1b">make_range</a>(SCCs.begin() + SourceIdx + 1, SCCs.begin() + TargetIdx + 1))</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;      <span class="keywordflow">if</span> (IsConnected(*<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>))</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;        ConnectedSet.insert(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;  };</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160; </div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;  <span class="comment">// Use a normal worklist to find which SCCs the target connects to. We still</span></div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;  <span class="comment">// bound the search based on the range in the postorder list we care about,</span></div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;  <span class="comment">// but because this is forward connectivity we just &quot;recurse&quot; through the</span></div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;  <span class="comment">// edges.</span></div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;  <span class="keyword">auto</span> ComputeTargetConnectedSet = [&amp;](<a class="code" href="classllvm_1_1SmallPtrSetImpl.html">SmallPtrSetImpl&lt;SCC *&gt;</a> &amp;ConnectedSet) {</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;<span class="preprocessor">#ifdef EXPENSIVE_CHECKS</span></div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;    <span class="comment">// Check that the RefSCC is still valid before computing this as the</span></div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;    <span class="comment">// results will be nonsensical of we&#39;ve broken its invariants.</span></div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;    <a class="code" href="PPCCTRLoopsVerify_8cpp.html#a593cc2f204f7b2edc16ee222c37c3196">verify</a>();</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;    ConnectedSet.insert(&amp;TargetSCC);</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;SCC *, 4&gt;</a> Worklist;</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;    Worklist.push_back(&amp;TargetSCC);</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;    <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;      <a class="code" href="classllvm_1_1LazyCallGraph_1_1SCC.html">SCC</a> &amp;<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = *Worklist.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a0c8ffe664a36e30d49c84d0aded2fe08">pop_back_val</a>();</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1LazyCallGraph_1_1Node.html">Node</a> &amp;<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a> : <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1LazyCallGraph_1_1Edge.html">Edge</a> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> : *<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>) {</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;          <span class="keywordflow">if</span> (!<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>.isCall())</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;          <a class="code" href="classllvm_1_1LazyCallGraph_1_1SCC.html">SCC</a> &amp;EdgeC = *<a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>-&gt;lookupSCC(<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>.getNode());</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;          <span class="keywordflow">if</span> (&amp;EdgeC.<a class="code" href="classllvm_1_1LazyCallGraph_1_1SCC.html#aeaf5e7e3c29093d1493826491653cc6d">getOuterRefSCC</a>() != <span class="keyword">this</span>)</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;            <span class="comment">// Not in this RefSCC...</span></div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;          <span class="keywordflow">if</span> (SCCIndices.find(&amp;EdgeC)-&gt;second &lt;= SourceIdx)</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;            <span class="comment">// Not in the postorder sequence between source and target.</span></div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160; </div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;          <span class="keywordflow">if</span> (ConnectedSet.insert(&amp;EdgeC).second)</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;            Worklist.push_back(&amp;EdgeC);</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;        }</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;    } <span class="keywordflow">while</span> (!Worklist.empty());</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;  };</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160; </div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;  <span class="comment">// Use a generic helper to update the postorder sequence of SCCs and return</span></div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;  <span class="comment">// a range of any SCCs connected into a cycle by inserting this edge. This</span></div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;  <span class="comment">// routine will also take care of updating the indices into the postorder</span></div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;  <span class="comment">// sequence.</span></div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;  <span class="keyword">auto</span> MergeRange = <a class="code" href="LazyCallGraph_8cpp.html#a0f2c7d407694a68c22a482cae3b17606">updatePostorderSequenceForEdgeInsertion</a>(</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;      SourceSCC, TargetSCC, SCCs, SCCIndices, ComputeSourceConnectedSet,</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;      ComputeTargetConnectedSet);</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160; </div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;  <span class="comment">// Run the user&#39;s callback on the merged SCCs before we actually merge them.</span></div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;  <span class="keywordflow">if</span> (MergeCB)</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;    MergeCB(<a class="code" href="namespacellvm.html#ab9c6b351507d3c0730f4290919d43a12">ArrayRef</a>(MergeRange.begin(), MergeRange.end()));</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160; </div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;  <span class="comment">// If the merge range is empty, then adding the edge didn&#39;t actually form any</span></div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;  <span class="comment">// new cycles. We&#39;re done.</span></div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;  <span class="keywordflow">if</span> (MergeRange.empty()) {</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;    <span class="comment">// Now that the SCC structure is finalized, flip the kind to call.</span></div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;    SourceN-&gt;setEdgeKind(TargetN, <a class="code" href="classllvm_1_1LazyCallGraph_1_1Edge.html#a8a5508e6c049172373b05c47c1b6fe13a13b74fdca959e0c5da734f789b298cf6">Edge::Call</a>);</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="comment">// No new cycle.</span></div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;  }</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160; </div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;<span class="preprocessor">#ifdef EXPENSIVE_CHECKS</span></div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;  <span class="comment">// Before merging, check that the RefSCC remains valid after all the</span></div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;  <span class="comment">// postorder updates.</span></div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;  <a class="code" href="PPCCTRLoopsVerify_8cpp.html#a593cc2f204f7b2edc16ee222c37c3196">verify</a>();</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160; </div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;  <span class="comment">// Otherwise we need to merge all the SCCs in the cycle into a single result</span></div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;  <span class="comment">// SCC.</span></div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;  <span class="comment">// NB: We merge into the target because all of these functions were already</span></div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;  <span class="comment">// reachable from the target, meaning any SCC-wide properties deduced about it</span></div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;  <span class="comment">// other than the set of functions within it will not have changed.</span></div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1LazyCallGraph_1_1SCC.html">SCC</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> : MergeRange) {</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> != &amp;TargetSCC &amp;&amp;</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;           <span class="stringliteral">&quot;We merge *into* the target and shouldn&#39;t process it here!&quot;</span>);</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;    SCCIndices.erase(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;    TargetSCC.Nodes.append(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;Nodes.begin(), <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;Nodes.end());</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1LazyCallGraph_1_1Node.html">Node</a> *<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a> : <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;Nodes)</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;      <a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>-&gt;SCCMap[<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>] = &amp;TargetSCC;</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;    <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;clear();</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;    DeletedSCCs.push_back(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;  }</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160; </div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;  <span class="comment">// Erase the merged SCCs from the list and update the indices of the</span></div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;  <span class="comment">// remaining SCCs.</span></div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;  <span class="keywordtype">int</span> IndexOffset = MergeRange.end() - MergeRange.begin();</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;  <span class="keyword">auto</span> EraseEnd = SCCs.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a563ffc2ff61c499b3be2e00100cb72fa">erase</a>(MergeRange.begin(), MergeRange.end());</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1LazyCallGraph_1_1SCC.html">SCC</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> : <a class="code" href="namespacellvm.html#ad1a91b49e0c092818a0b82f6cc130a1b">make_range</a>(EraseEnd, SCCs.end()))</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;    SCCIndices[<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>] -= IndexOffset;</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160; </div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;  <span class="comment">// Now that the SCC structure is finalized, flip the kind to call.</span></div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;  SourceN-&gt;setEdgeKind(TargetN, <a class="code" href="classllvm_1_1LazyCallGraph_1_1Edge.html#a8a5508e6c049172373b05c47c1b6fe13a13b74fdca959e0c5da734f789b298cf6">Edge::Call</a>);</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160; </div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;  <span class="comment">// And we&#39;re done, but we did form a new cycle.</span></div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;}</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160; </div>
<div class="line"><a name="l00723"></a><span class="lineno"><a class="line" href="classllvm_1_1LazyCallGraph_1_1RefSCC.html#ae2f9bc7458beec4389ccf7fb88199d4b">  723</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1LazyCallGraph_1_1RefSCC.html#ae2f9bc7458beec4389ccf7fb88199d4b">LazyCallGraph::RefSCC::switchTrivialInternalEdgeToRef</a>(<a class="code" href="classllvm_1_1LazyCallGraph_1_1Node.html">Node</a> &amp;SourceN,</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;                                                           <a class="code" href="classllvm_1_1LazyCallGraph_1_1Node.html">Node</a> &amp;TargetN) {</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((*SourceN)[TargetN].isCall() &amp;&amp; <span class="stringliteral">&quot;Must start with a call edge!&quot;</span>);</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160; </div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;<span class="preprocessor">#ifdef EXPENSIVE_CHECKS</span></div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;  <a class="code" href="PPCCTRLoopsVerify_8cpp.html#a593cc2f204f7b2edc16ee222c37c3196">verify</a>();</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;  <span class="keyword">auto</span> VerifyOnExit = <a class="code" href="namespacellvm.html#ab2e3dbebd68e69d77c227682fc8e3ba2">make_scope_exit</a>([&amp;]() { <a class="code" href="PPCCTRLoopsVerify_8cpp.html#a593cc2f204f7b2edc16ee222c37c3196">verify</a>(); });</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160; </div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>-&gt;lookupRefSCC(SourceN) == <span class="keyword">this</span> &amp;&amp; <span class="stringliteral">&quot;Source must be in this RefSCC.&quot;</span>);</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>-&gt;lookupRefSCC(TargetN) == <span class="keyword">this</span> &amp;&amp; <span class="stringliteral">&quot;Target must be in this RefSCC.&quot;</span>);</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>-&gt;lookupSCC(SourceN) != <a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>-&gt;lookupSCC(TargetN) &amp;&amp;</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;         <span class="stringliteral">&quot;Source and Target must be in separate SCCs for this to be trivial!&quot;</span>);</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160; </div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;  <span class="comment">// Set the edge kind.</span></div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;  SourceN-&gt;setEdgeKind(TargetN, <a class="code" href="classllvm_1_1LazyCallGraph_1_1Edge.html#a8a5508e6c049172373b05c47c1b6fe13a81845d1d6d0f58deb757fad1e739c32c">Edge::Ref</a>);</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;}</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160; </div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;<a class="code" href="classllvm_1_1iterator__range.html">iterator_range&lt;LazyCallGraph::RefSCC::iterator&gt;</a></div>
<div class="line"><a name="l00742"></a><span class="lineno"><a class="line" href="classllvm_1_1LazyCallGraph_1_1RefSCC.html#a96fe0cb15ded58bd1824fa4e3daec680">  742</a></span>&#160;<a class="code" href="classllvm_1_1LazyCallGraph_1_1RefSCC.html#a96fe0cb15ded58bd1824fa4e3daec680">LazyCallGraph::RefSCC::switchInternalEdgeToRef</a>(<a class="code" href="classllvm_1_1LazyCallGraph_1_1Node.html">Node</a> &amp;SourceN, <a class="code" href="classllvm_1_1LazyCallGraph_1_1Node.html">Node</a> &amp;TargetN) {</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((*SourceN)[TargetN].isCall() &amp;&amp; <span class="stringliteral">&quot;Must start with a call edge!&quot;</span>);</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160; </div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;<span class="preprocessor">#ifdef EXPENSIVE_CHECKS</span></div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;  <a class="code" href="PPCCTRLoopsVerify_8cpp.html#a593cc2f204f7b2edc16ee222c37c3196">verify</a>();</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;  <span class="keyword">auto</span> VerifyOnExit = <a class="code" href="namespacellvm.html#ab2e3dbebd68e69d77c227682fc8e3ba2">make_scope_exit</a>([&amp;]() { <a class="code" href="PPCCTRLoopsVerify_8cpp.html#a593cc2f204f7b2edc16ee222c37c3196">verify</a>(); });</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160; </div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>-&gt;lookupRefSCC(SourceN) == <span class="keyword">this</span> &amp;&amp; <span class="stringliteral">&quot;Source must be in this RefSCC.&quot;</span>);</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>-&gt;lookupRefSCC(TargetN) == <span class="keyword">this</span> &amp;&amp; <span class="stringliteral">&quot;Target must be in this RefSCC.&quot;</span>);</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160; </div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;  <a class="code" href="classllvm_1_1LazyCallGraph_1_1SCC.html">SCC</a> &amp;TargetSCC = *<a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>-&gt;lookupSCC(TargetN);</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>-&gt;lookupSCC(SourceN) == &amp;TargetSCC &amp;&amp; <span class="stringliteral">&quot;Source and Target must be in &quot;</span></div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;                                                <span class="stringliteral">&quot;the same SCC to require the &quot;</span></div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;                                                <span class="stringliteral">&quot;full CG update.&quot;</span>);</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160; </div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;  <span class="comment">// Set the edge kind.</span></div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;  SourceN-&gt;setEdgeKind(TargetN, <a class="code" href="classllvm_1_1LazyCallGraph_1_1Edge.html#a8a5508e6c049172373b05c47c1b6fe13a81845d1d6d0f58deb757fad1e739c32c">Edge::Ref</a>);</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160; </div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;  <span class="comment">// Otherwise we are removing a call edge from a single SCC. This may break</span></div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;  <span class="comment">// the cycle. In order to compute the new set of SCCs, we need to do a small</span></div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;  <span class="comment">// DFS over the nodes within the SCC to form any sub-cycles that remain as</span></div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;  <span class="comment">// distinct SCCs and compute a postorder over the resulting SCCs.</span></div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;  <span class="comment">// However, we specially handle the target node. The target node is known to</span></div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;  <span class="comment">// reach all other nodes in the original SCC by definition. This means that</span></div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;  <span class="comment">// we want the old SCC to be replaced with an SCC containing that node as it</span></div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;  <span class="comment">// will be the root of whatever SCC DAG results from the DFS. Assumptions</span></div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;  <span class="comment">// about an SCC such as the set of functions called will continue to hold,</span></div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;  <span class="comment">// etc.</span></div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160; </div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;  <a class="code" href="classllvm_1_1LazyCallGraph_1_1SCC.html">SCC</a> &amp;OldSCC = TargetSCC;</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;std::pair&lt;Node *, EdgeSequence::call_iterator&gt;</a>, 16&gt; DFSStack;</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Node *, 16&gt;</a> PendingSCCStack;</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;SCC *, 4&gt;</a> NewSCCs;</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160; </div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;  <span class="comment">// Prepare the nodes for a fresh DFS.</span></div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Node *, 16&gt;</a> Worklist;</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;  Worklist.<a class="code" href="classllvm_1_1SmallVectorImpl.html#abd962b7b01f49ce61ea41ee10c49e313">swap</a>(OldSCC.Nodes);</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1LazyCallGraph_1_1Node.html">Node</a> *<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a> : Worklist) {</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;    <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;DFSNumber = <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;LowLink = 0;</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;    <a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>-&gt;SCCMap.erase(<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>);</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;  }</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160; </div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;  <span class="comment">// Force the target node to be in the old SCC. This also enables us to take</span></div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;  <span class="comment">// a very significant short-cut in the standard Tarjan walk to re-form SCCs</span></div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;  <span class="comment">// below: whenever we build an edge that reaches the target node, we know</span></div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;  <span class="comment">// that the target node eventually connects back to all other nodes in our</span></div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;  <span class="comment">// walk. As a consequence, we can detect and handle participants in that</span></div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;  <span class="comment">// cycle without walking all the edges that form this connection, and instead</span></div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;  <span class="comment">// by relying on the fundamental guarantee coming into this operation (all</span></div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;  <span class="comment">// nodes are reachable from the target due to previously forming an SCC).</span></div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;  TargetN.DFSNumber = TargetN.LowLink = -1;</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;  OldSCC.Nodes.push_back(&amp;TargetN);</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;  <a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>-&gt;SCCMap[&amp;TargetN] = &amp;OldSCC;</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160; </div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;  <span class="comment">// Scan down the stack and DFS across the call edges.</span></div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1LazyCallGraph_1_1Node.html">Node</a> *RootN : Worklist) {</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(DFSStack.empty() &amp;&amp;</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;           <span class="stringliteral">&quot;Cannot begin a new root with a non-empty DFS stack!&quot;</span>);</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(PendingSCCStack.empty() &amp;&amp;</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;           <span class="stringliteral">&quot;Cannot begin a new root with pending nodes for an SCC!&quot;</span>);</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160; </div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;    <span class="comment">// Skip any nodes we&#39;ve already reached in the DFS.</span></div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;    <span class="keywordflow">if</span> (RootN-&gt;DFSNumber != 0) {</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(RootN-&gt;DFSNumber == -1 &amp;&amp;</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;             <span class="stringliteral">&quot;Shouldn&#39;t have any mid-DFS root nodes!&quot;</span>);</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;    }</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160; </div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;    RootN-&gt;DFSNumber = RootN-&gt;LowLink = 1;</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;    <span class="keywordtype">int</span> NextDFSNumber = 2;</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160; </div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;    DFSStack.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a396fcfee6914c76974b73c3d203da6a5">emplace_back</a>(RootN, (*RootN)-&gt;call_begin());</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;    <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;      <span class="keyword">auto</span> [<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>] = DFSStack.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a0c8ffe664a36e30d49c84d0aded2fe08">pop_back_val</a>();</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;      <span class="keyword">auto</span> <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = (*N)-&gt;call_end();</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;      <span class="keywordflow">while</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>) {</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;        <a class="code" href="classllvm_1_1LazyCallGraph_1_1Node.html">Node</a> &amp;ChildN = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getNode();</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;        <span class="keywordflow">if</span> (ChildN.DFSNumber == 0) {</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;          <span class="comment">// We haven&#39;t yet visited this child, so descend, pushing the current</span></div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;          <span class="comment">// node onto the stack.</span></div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;          DFSStack.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a396fcfee6914c76974b73c3d203da6a5">emplace_back</a>(<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160; </div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;          <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!<a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>-&gt;SCCMap.count(&amp;ChildN) &amp;&amp;</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;                 <span class="stringliteral">&quot;Found a node with 0 DFS number but already in an SCC!&quot;</span>);</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;          ChildN.DFSNumber = ChildN.LowLink = NextDFSNumber++;</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;          <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a> = &amp;ChildN;</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;          <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = (*N)-&gt;call_begin();</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;          <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = (*N)-&gt;call_end();</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;        }</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160; </div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;        <span class="comment">// Check for the child already being part of some component.</span></div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;        <span class="keywordflow">if</span> (ChildN.DFSNumber == -1) {</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>-&gt;lookupSCC(ChildN) == &amp;OldSCC) {</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;            <span class="comment">// If the child is part of the old SCC, we know that it can reach</span></div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;            <span class="comment">// every other node, so we have formed a cycle. Pull the entire DFS</span></div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;            <span class="comment">// and pending stacks into it. See the comment above about setting</span></div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;            <span class="comment">// up the old SCC for why we do this.</span></div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;            <span class="keywordtype">int</span> OldSize = OldSCC.<a class="code" href="classllvm_1_1LazyCallGraph_1_1SCC.html#a5592b0404f95c589801ea255fa95fb63">size</a>();</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;            OldSCC.Nodes.push_back(<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>);</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;            OldSCC.Nodes.append(PendingSCCStack.begin(), PendingSCCStack.end());</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;            PendingSCCStack.<a class="code" href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">clear</a>();</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;            <span class="keywordflow">while</span> (!DFSStack.empty())</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;              OldSCC.Nodes.push_back(DFSStack.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a0c8ffe664a36e30d49c84d0aded2fe08">pop_back_val</a>().first);</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;            <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1LazyCallGraph_1_1Node.html">Node</a> &amp;<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a> : <a class="code" href="namespacellvm.html#a02981de53fb6ffd384d39addc4d25f37">drop_begin</a>(OldSCC, OldSize)) {</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;              <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>.DFSNumber = <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>.LowLink = -1;</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;              <a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>-&gt;SCCMap[&amp;<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>] = &amp;OldSCC;</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;            }</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;            <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;          }</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160; </div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;          <span class="comment">// If the child has already been added to some child component, it</span></div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;          <span class="comment">// couldn&#39;t impact the low-link of this parent because it isn&#39;t</span></div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;          <span class="comment">// connected, and thus its low-link isn&#39;t relevant so skip it.</span></div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;          ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;        }</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160; </div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;        <span class="comment">// Track the lowest linked child as the lowest link for this node.</span></div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;        <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(ChildN.LowLink &gt; 0 &amp;&amp; <span class="stringliteral">&quot;Must have a positive low-link number!&quot;</span>);</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;        <span class="keywordflow">if</span> (ChildN.LowLink &lt; <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;LowLink)</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;          <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;LowLink = ChildN.LowLink;</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160; </div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;        <span class="comment">// Move to the next edge.</span></div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;        ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;      }</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>)</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;        <span class="comment">// Cleared the DFS early, start another round.</span></div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160; </div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;      <span class="comment">// We&#39;ve finished processing N and its descendants, put it on our pending</span></div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;      <span class="comment">// SCC stack to eventually get merged into an SCC of nodes.</span></div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;      PendingSCCStack.push_back(<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>);</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160; </div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;      <span class="comment">// If this node is linked to some lower entry, continue walking up the</span></div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;      <span class="comment">// stack.</span></div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;LowLink != <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;DFSNumber)</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160; </div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;      <span class="comment">// Otherwise, we&#39;ve completed an SCC. Append it to our post order list of</span></div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;      <span class="comment">// SCCs.</span></div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;      <span class="keywordtype">int</span> RootDFSNumber = <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;DFSNumber;</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;      <span class="comment">// Find the range of the node stack by walking down until we pass the</span></div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;      <span class="comment">// root DFS number.</span></div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;      <span class="keyword">auto</span> SCCNodes = <a class="code" href="namespacellvm.html#ad1a91b49e0c092818a0b82f6cc130a1b">make_range</a>(</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;          PendingSCCStack.rbegin(),</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;          <a class="code" href="namespacellvm.html#ac78c09ae232b2ce188ff590d51e3c268">find_if</a>(<a class="code" href="namespacellvm.html#a6b0ac1fa4f05de76413c5e0ca6334035">reverse</a>(PendingSCCStack), [RootDFSNumber](<span class="keyword">const</span> <a class="code" href="classllvm_1_1LazyCallGraph_1_1Node.html">Node</a> *<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>) {</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;DFSNumber &lt; RootDFSNumber;</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;          }));</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160; </div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;      <span class="comment">// Form a new SCC out of these nodes and then clear them off our pending</span></div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;      <span class="comment">// stack.</span></div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;      NewSCCs.push_back(<a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>-&gt;createSCC(*<span class="keyword">this</span>, SCCNodes));</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1LazyCallGraph_1_1Node.html">Node</a> &amp;<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a> : *NewSCCs.back()) {</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;        <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>.DFSNumber = <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>.LowLink = -1;</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;        <a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>-&gt;SCCMap[&amp;<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>] = NewSCCs.back();</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;      }</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;      PendingSCCStack.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a563ffc2ff61c499b3be2e00100cb72fa">erase</a>(SCCNodes.end().base(), PendingSCCStack.end());</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;    } <span class="keywordflow">while</span> (!DFSStack.empty());</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;  }</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160; </div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;  <span class="comment">// Insert the remaining SCCs before the old one. The old SCC can reach all</span></div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;  <span class="comment">// other SCCs we form because it contains the target node of the removed edge</span></div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;  <span class="comment">// of the old SCC. This means that we will have edges into all the new SCCs,</span></div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;  <span class="comment">// which means the old one must come last for postorder.</span></div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;  <span class="keywordtype">int</span> OldIdx = SCCIndices[&amp;OldSCC];</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;  SCCs.insert(SCCs.begin() + OldIdx, NewSCCs.begin(), NewSCCs.end());</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160; </div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;  <span class="comment">// Update the mapping from SCC* to index to use the new SCC*s, and remove the</span></div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;  <span class="comment">// old SCC from the mapping.</span></div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> Idx = OldIdx, Size = SCCs.size(); Idx &lt; Size; ++Idx)</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;    SCCIndices[SCCs[Idx]] = Idx;</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160; </div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#ad1a91b49e0c092818a0b82f6cc130a1b">make_range</a>(SCCs.begin() + OldIdx,</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;                    SCCs.begin() + OldIdx + NewSCCs.size());</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;}</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160; </div>
<div class="line"><a name="l00922"></a><span class="lineno"><a class="line" href="classllvm_1_1LazyCallGraph_1_1RefSCC.html#a5cc0541c3ee15c565ac05fe11f5459d2">  922</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1LazyCallGraph_1_1RefSCC.html#a5cc0541c3ee15c565ac05fe11f5459d2">LazyCallGraph::RefSCC::switchOutgoingEdgeToCall</a>(<a class="code" href="classllvm_1_1LazyCallGraph_1_1Node.html">Node</a> &amp;SourceN,</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;                                                     <a class="code" href="classllvm_1_1LazyCallGraph_1_1Node.html">Node</a> &amp;TargetN) {</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!(*SourceN)[TargetN].isCall() &amp;&amp; <span class="stringliteral">&quot;Must start with a ref edge!&quot;</span>);</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160; </div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>-&gt;lookupRefSCC(SourceN) == <span class="keyword">this</span> &amp;&amp; <span class="stringliteral">&quot;Source must be in this RefSCC.&quot;</span>);</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>-&gt;lookupRefSCC(TargetN) != <span class="keyword">this</span> &amp;&amp;</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;         <span class="stringliteral">&quot;Target must not be in this RefSCC.&quot;</span>);</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;<span class="preprocessor">#ifdef EXPENSIVE_CHECKS</span></div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>-&gt;lookupRefSCC(TargetN)-&gt;isDescendantOf(*<span class="keyword">this</span>) &amp;&amp;</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;         <span class="stringliteral">&quot;Target must be a descendant of the Source.&quot;</span>);</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160; </div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;  <span class="comment">// Edges between RefSCCs are the same regardless of call or ref, so we can</span></div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;  <span class="comment">// just flip the edge here.</span></div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;  SourceN-&gt;setEdgeKind(TargetN, <a class="code" href="classllvm_1_1LazyCallGraph_1_1Edge.html#a8a5508e6c049172373b05c47c1b6fe13a13b74fdca959e0c5da734f789b298cf6">Edge::Call</a>);</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160; </div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;<span class="preprocessor">#ifdef EXPENSIVE_CHECKS</span></div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;  <a class="code" href="PPCCTRLoopsVerify_8cpp.html#a593cc2f204f7b2edc16ee222c37c3196">verify</a>();</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;}</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160; </div>
<div class="line"><a name="l00943"></a><span class="lineno"><a class="line" href="classllvm_1_1LazyCallGraph_1_1RefSCC.html#adce8df277d53b4d87581583c8269ac71">  943</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1LazyCallGraph_1_1RefSCC.html#adce8df277d53b4d87581583c8269ac71">LazyCallGraph::RefSCC::switchOutgoingEdgeToRef</a>(<a class="code" href="classllvm_1_1LazyCallGraph_1_1Node.html">Node</a> &amp;SourceN,</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;                                                    <a class="code" href="classllvm_1_1LazyCallGraph_1_1Node.html">Node</a> &amp;TargetN) {</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((*SourceN)[TargetN].isCall() &amp;&amp; <span class="stringliteral">&quot;Must start with a call edge!&quot;</span>);</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160; </div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>-&gt;lookupRefSCC(SourceN) == <span class="keyword">this</span> &amp;&amp; <span class="stringliteral">&quot;Source must be in this RefSCC.&quot;</span>);</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>-&gt;lookupRefSCC(TargetN) != <span class="keyword">this</span> &amp;&amp;</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;         <span class="stringliteral">&quot;Target must not be in this RefSCC.&quot;</span>);</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;<span class="preprocessor">#ifdef EXPENSIVE_CHECKS</span></div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>-&gt;lookupRefSCC(TargetN)-&gt;isDescendantOf(*<span class="keyword">this</span>) &amp;&amp;</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;         <span class="stringliteral">&quot;Target must be a descendant of the Source.&quot;</span>);</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160; </div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;  <span class="comment">// Edges between RefSCCs are the same regardless of call or ref, so we can</span></div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;  <span class="comment">// just flip the edge here.</span></div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;  SourceN-&gt;setEdgeKind(TargetN, <a class="code" href="classllvm_1_1LazyCallGraph_1_1Edge.html#a8a5508e6c049172373b05c47c1b6fe13a81845d1d6d0f58deb757fad1e739c32c">Edge::Ref</a>);</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160; </div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;<span class="preprocessor">#ifdef EXPENSIVE_CHECKS</span></div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;  <a class="code" href="PPCCTRLoopsVerify_8cpp.html#a593cc2f204f7b2edc16ee222c37c3196">verify</a>();</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;}</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160; </div>
<div class="line"><a name="l00964"></a><span class="lineno"><a class="line" href="classllvm_1_1LazyCallGraph_1_1RefSCC.html#aa57986c798b44affab5e4d5953e37727">  964</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1LazyCallGraph_1_1RefSCC.html#aa57986c798b44affab5e4d5953e37727">LazyCallGraph::RefSCC::insertInternalRefEdge</a>(<a class="code" href="classllvm_1_1LazyCallGraph_1_1Node.html">Node</a> &amp;SourceN,</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;                                                  <a class="code" href="classllvm_1_1LazyCallGraph_1_1Node.html">Node</a> &amp;TargetN) {</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>-&gt;lookupRefSCC(SourceN) == <span class="keyword">this</span> &amp;&amp; <span class="stringliteral">&quot;Source must be in this RefSCC.&quot;</span>);</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>-&gt;lookupRefSCC(TargetN) == <span class="keyword">this</span> &amp;&amp; <span class="stringliteral">&quot;Target must be in this RefSCC.&quot;</span>);</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160; </div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;  SourceN-&gt;insertEdgeInternal(TargetN, <a class="code" href="classllvm_1_1LazyCallGraph_1_1Edge.html#a8a5508e6c049172373b05c47c1b6fe13a81845d1d6d0f58deb757fad1e739c32c">Edge::Ref</a>);</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160; </div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;<span class="preprocessor">#ifdef EXPENSIVE_CHECKS</span></div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;  <a class="code" href="PPCCTRLoopsVerify_8cpp.html#a593cc2f204f7b2edc16ee222c37c3196">verify</a>();</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;}</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160; </div>
<div class="line"><a name="l00976"></a><span class="lineno"><a class="line" href="classllvm_1_1LazyCallGraph_1_1RefSCC.html#a743c2ac21f2f8a8c6af18e1e09f13229">  976</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1LazyCallGraph_1_1RefSCC.html#a743c2ac21f2f8a8c6af18e1e09f13229">LazyCallGraph::RefSCC::insertOutgoingEdge</a>(<a class="code" href="classllvm_1_1LazyCallGraph_1_1Node.html">Node</a> &amp;SourceN, <a class="code" href="classllvm_1_1LazyCallGraph_1_1Node.html">Node</a> &amp;TargetN,</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;                                               <a class="code" href="classllvm_1_1LazyCallGraph_1_1Edge.html#a8a5508e6c049172373b05c47c1b6fe13">Edge::Kind</a> EK) {</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;  <span class="comment">// First insert it into the caller.</span></div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;  SourceN-&gt;insertEdgeInternal(TargetN, EK);</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160; </div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>-&gt;lookupRefSCC(SourceN) == <span class="keyword">this</span> &amp;&amp; <span class="stringliteral">&quot;Source must be in this RefSCC.&quot;</span>);</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160; </div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>-&gt;lookupRefSCC(TargetN) != <span class="keyword">this</span> &amp;&amp;</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;         <span class="stringliteral">&quot;Target must not be in this RefSCC.&quot;</span>);</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;<span class="preprocessor">#ifdef EXPENSIVE_CHECKS</span></div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>-&gt;lookupRefSCC(TargetN)-&gt;isDescendantOf(*<span class="keyword">this</span>) &amp;&amp;</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;         <span class="stringliteral">&quot;Target must be a descendant of the Source.&quot;</span>);</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160; </div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;<span class="preprocessor">#ifdef EXPENSIVE_CHECKS</span></div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;  <a class="code" href="PPCCTRLoopsVerify_8cpp.html#a593cc2f204f7b2edc16ee222c37c3196">verify</a>();</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;}</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160; </div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;<a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;LazyCallGraph::RefSCC *, 1&gt;</a></div>
<div class="line"><a name="l00996"></a><span class="lineno"><a class="line" href="classllvm_1_1LazyCallGraph_1_1RefSCC.html#a01b1581633bb40f86d6dc62a1c1a7f72">  996</a></span>&#160;<a class="code" href="classllvm_1_1LazyCallGraph_1_1RefSCC.html#a01b1581633bb40f86d6dc62a1c1a7f72">LazyCallGraph::RefSCC::insertIncomingRefEdge</a>(<a class="code" href="classllvm_1_1LazyCallGraph_1_1Node.html">Node</a> &amp;SourceN, <a class="code" href="classllvm_1_1LazyCallGraph_1_1Node.html">Node</a> &amp;TargetN) {</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>-&gt;lookupRefSCC(TargetN) == <span class="keyword">this</span> &amp;&amp; <span class="stringliteral">&quot;Target must be in this RefSCC.&quot;</span>);</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;  <a class="code" href="classllvm_1_1LazyCallGraph_1_1RefSCC.html">RefSCC</a> &amp;SourceC = *<a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>-&gt;lookupRefSCC(SourceN);</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(&amp;SourceC != <span class="keyword">this</span> &amp;&amp; <span class="stringliteral">&quot;Source must not be in this RefSCC.&quot;</span>);</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;<span class="preprocessor">#ifdef EXPENSIVE_CHECKS</span></div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(SourceC.<a class="code" href="classllvm_1_1LazyCallGraph_1_1RefSCC.html#a59f6c7fa7f420326cc1f7026e51b0668">isDescendantOf</a>(*<span class="keyword">this</span>) &amp;&amp;</div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;         <span class="stringliteral">&quot;Source must be a descendant of the Target.&quot;</span>);</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160; </div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;RefSCC *, 1&gt;</a> DeletedRefSCCs;</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160; </div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;<span class="preprocessor">#ifdef EXPENSIVE_CHECKS</span></div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;  <a class="code" href="PPCCTRLoopsVerify_8cpp.html#a593cc2f204f7b2edc16ee222c37c3196">verify</a>();</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;  <span class="keyword">auto</span> VerifyOnExit = <a class="code" href="namespacellvm.html#ab2e3dbebd68e69d77c227682fc8e3ba2">make_scope_exit</a>([&amp;]() { <a class="code" href="PPCCTRLoopsVerify_8cpp.html#a593cc2f204f7b2edc16ee222c37c3196">verify</a>(); });</div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160; </div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;  <span class="keywordtype">int</span> SourceIdx = <a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>-&gt;RefSCCIndices[&amp;SourceC];</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;  <span class="keywordtype">int</span> TargetIdx = <a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>-&gt;RefSCCIndices[<span class="keyword">this</span>];</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(SourceIdx &lt; TargetIdx &amp;&amp;</div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;         <span class="stringliteral">&quot;Postorder list doesn&#39;t see edge as incoming!&quot;</span>);</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160; </div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;  <span class="comment">// Compute the RefSCCs which (transitively) reach the source. We do this by</span></div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;  <span class="comment">// working backwards from the source using the parent set in each RefSCC,</span></div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;  <span class="comment">// skipping any RefSCCs that don&#39;t fall in the postorder range. This has the</span></div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;  <span class="comment">// advantage of walking the sparser parent edge (in high fan-out graphs) but</span></div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;  <span class="comment">// more importantly this removes examining all forward edges in all RefSCCs</span></div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;  <span class="comment">// within the postorder range which aren&#39;t in fact connected. Only connected</span></div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;  <span class="comment">// RefSCCs (and their edges) are visited here.</span></div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;  <span class="keyword">auto</span> ComputeSourceConnectedSet = [&amp;](<a class="code" href="classllvm_1_1SmallPtrSetImpl.html">SmallPtrSetImpl&lt;RefSCC *&gt;</a> &amp;Set) {</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;    Set.insert(&amp;SourceC);</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;    <span class="keyword">auto</span> IsConnected = [&amp;](<a class="code" href="classllvm_1_1LazyCallGraph_1_1RefSCC.html">RefSCC</a> &amp;RC) {</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1LazyCallGraph_1_1SCC.html">SCC</a> &amp;<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> : RC)</div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1LazyCallGraph_1_1Node.html">Node</a> &amp;<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a> : <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;          <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1LazyCallGraph_1_1Edge.html">Edge</a> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> : *<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>)</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;            <span class="keywordflow">if</span> (Set.count(<a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>-&gt;lookupRefSCC(<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>.getNode())))</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;              <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160; </div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;    };</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160; </div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1LazyCallGraph_1_1RefSCC.html">RefSCC</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> : <a class="code" href="namespacellvm.html#ad1a91b49e0c092818a0b82f6cc130a1b">make_range</a>(<a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>-&gt;PostOrderRefSCCs.begin() + SourceIdx + 1,</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;                                <a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>-&gt;PostOrderRefSCCs.begin() + TargetIdx + 1))</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;      <span class="keywordflow">if</span> (IsConnected(*<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>))</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;        Set.insert(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;  };</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160; </div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;  <span class="comment">// Use a normal worklist to find which SCCs the target connects to. We still</span></div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;  <span class="comment">// bound the search based on the range in the postorder list we care about,</span></div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;  <span class="comment">// but because this is forward connectivity we just &quot;recurse&quot; through the</span></div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;  <span class="comment">// edges.</span></div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;  <span class="keyword">auto</span> ComputeTargetConnectedSet = [&amp;](<a class="code" href="classllvm_1_1SmallPtrSetImpl.html">SmallPtrSetImpl&lt;RefSCC *&gt;</a> &amp;Set) {</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;    Set.insert(<span class="keyword">this</span>);</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;RefSCC *, 4&gt;</a> Worklist;</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;    Worklist.push_back(<span class="keyword">this</span>);</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;    <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;      <a class="code" href="classllvm_1_1LazyCallGraph_1_1RefSCC.html">RefSCC</a> &amp;RC = *Worklist.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a0c8ffe664a36e30d49c84d0aded2fe08">pop_back_val</a>();</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1LazyCallGraph_1_1SCC.html">SCC</a> &amp;<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> : RC)</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1LazyCallGraph_1_1Node.html">Node</a> &amp;<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a> : <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)</div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;          <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1LazyCallGraph_1_1Edge.html">Edge</a> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> : *<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>) {</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;            <a class="code" href="classllvm_1_1LazyCallGraph_1_1RefSCC.html">RefSCC</a> &amp;EdgeRC = *<a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>-&gt;lookupRefSCC(<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>.getNode());</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>-&gt;getRefSCCIndex(EdgeRC) &lt;= SourceIdx)</div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;              <span class="comment">// Not in the postorder sequence between source and target.</span></div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;              <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160; </div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;            <span class="keywordflow">if</span> (Set.insert(&amp;EdgeRC).second)</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;              Worklist.push_back(&amp;EdgeRC);</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;          }</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;    } <span class="keywordflow">while</span> (!Worklist.empty());</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;  };</div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160; </div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;  <span class="comment">// Use a generic helper to update the postorder sequence of RefSCCs and return</span></div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;  <span class="comment">// a range of any RefSCCs connected into a cycle by inserting this edge. This</span></div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;  <span class="comment">// routine will also take care of updating the indices into the postorder</span></div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;  <span class="comment">// sequence.</span></div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;  <a class="code" href="classllvm_1_1iterator__range.html">iterator_range&lt;SmallVectorImpl&lt;RefSCC *&gt;::iterator</a>&gt; MergeRange =</div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;      <a class="code" href="LazyCallGraph_8cpp.html#a0f2c7d407694a68c22a482cae3b17606">updatePostorderSequenceForEdgeInsertion</a>(</div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;          SourceC, *<span class="keyword">this</span>, <a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>-&gt;PostOrderRefSCCs, <a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>-&gt;RefSCCIndices,</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;          ComputeSourceConnectedSet, ComputeTargetConnectedSet);</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160; </div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;  <span class="comment">// Build a set, so we can do fast tests for whether a RefSCC will end up as</span></div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;  <span class="comment">// part of the merged RefSCC.</span></div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;RefSCC *, 16&gt;</a> MergeSet(MergeRange.<a class="code" href="classllvm_1_1iterator__range.html#af5a020bd9dd7bc8487dd53ce443fdd8f">begin</a>(), MergeRange.<a class="code" href="classllvm_1_1iterator__range.html#aa0344673da91896d39f1b35755ee5d4e">end</a>());</div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160; </div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;  <span class="comment">// This RefSCC will always be part of that set, so just insert it here.</span></div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;  MergeSet.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(<span class="keyword">this</span>);</div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160; </div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;  <span class="comment">// Now that we have identified all the SCCs which need to be merged into</span></div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;  <span class="comment">// a connected set with the inserted edge, merge all of them into this SCC.</span></div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;SCC *, 16&gt;</a> MergedSCCs;</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;  <span class="keywordtype">int</span> SCCIndex = 0;</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1LazyCallGraph_1_1RefSCC.html">RefSCC</a> *RC : MergeRange) {</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(RC != <span class="keyword">this</span> &amp;&amp; <span class="stringliteral">&quot;We&#39;re merging into the target RefSCC, so it &quot;</span></div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;                         <span class="stringliteral">&quot;shouldn&#39;t be in the range.&quot;</span>);</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160; </div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;    <span class="comment">// Walk the inner SCCs to update their up-pointer and walk all the edges to</span></div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;    <span class="comment">// update any parent sets.</span></div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;    <span class="comment">// FIXME: We should try to find a way to avoid this (rather expensive) edge</span></div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;    <span class="comment">// walk by updating the parent sets in some other manner.</span></div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1LazyCallGraph_1_1SCC.html">SCC</a> &amp;InnerC : *RC) {</div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;      InnerC.OuterRefSCC = <span class="keyword">this</span>;</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;      SCCIndices[&amp;InnerC] = SCCIndex++;</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1LazyCallGraph_1_1Node.html">Node</a> &amp;<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a> : InnerC)</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;        <a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>-&gt;SCCMap[&amp;<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>] = &amp;InnerC;</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;    }</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160; </div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;    <span class="comment">// Now merge in the SCCs. We can actually move here so try to reuse storage</span></div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;    <span class="comment">// the first time through.</span></div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;    <span class="keywordflow">if</span> (MergedSCCs.empty())</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;      MergedSCCs = <a class="code" href="lib_2Target_2ARM_2README_8txt.html#ad3a99906764c35b2694ae90fa57744a5">std::move</a>(RC-&gt;SCCs);</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;      MergedSCCs.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a7efd1f0c1206d95e4fe01a9b49a57b82">append</a>(RC-&gt;SCCs.begin(), RC-&gt;SCCs.end());</div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;    RC-&gt;SCCs.clear();</div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;    DeletedRefSCCs.push_back(RC);</div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;  }</div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160; </div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;  <span class="comment">// Append our original SCCs to the merged list and move it into place.</span></div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1LazyCallGraph_1_1SCC.html">SCC</a> &amp;InnerC : *<span class="keyword">this</span>)</div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;    SCCIndices[&amp;InnerC] = SCCIndex++;</div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;  MergedSCCs.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a7efd1f0c1206d95e4fe01a9b49a57b82">append</a>(SCCs.begin(), SCCs.end());</div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;  SCCs = <a class="code" href="lib_2Target_2ARM_2README_8txt.html#ad3a99906764c35b2694ae90fa57744a5">std::move</a>(MergedSCCs);</div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160; </div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;  <span class="comment">// Remove the merged away RefSCCs from the post order sequence.</span></div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1LazyCallGraph_1_1RefSCC.html">RefSCC</a> *RC : MergeRange)</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;    <a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>-&gt;RefSCCIndices.erase(RC);</div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;  <span class="keywordtype">int</span> IndexOffset = MergeRange.end() - MergeRange.begin();</div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;  <span class="keyword">auto</span> EraseEnd =</div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;      <a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>-&gt;PostOrderRefSCCs.erase(MergeRange.begin(), MergeRange.end());</div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1LazyCallGraph_1_1RefSCC.html">RefSCC</a> *RC : <a class="code" href="namespacellvm.html#ad1a91b49e0c092818a0b82f6cc130a1b">make_range</a>(EraseEnd, <a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>-&gt;PostOrderRefSCCs.end()))</div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;    <a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>-&gt;RefSCCIndices[RC] -= IndexOffset;</div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160; </div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;  <span class="comment">// At this point we have a merged RefSCC with a post-order SCCs list, just</span></div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;  <span class="comment">// connect the nodes to form the new edge.</span></div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;  SourceN-&gt;insertEdgeInternal(TargetN, <a class="code" href="classllvm_1_1LazyCallGraph_1_1Edge.html#a8a5508e6c049172373b05c47c1b6fe13a81845d1d6d0f58deb757fad1e739c32c">Edge::Ref</a>);</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160; </div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;  <span class="comment">// We return the list of SCCs which were merged so that callers can</span></div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;  <span class="comment">// invalidate any data they have associated with those SCCs. Note that these</span></div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;  <span class="comment">// SCCs are no longer in an interesting state (they are totally empty) but</span></div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;  <span class="comment">// the pointers will remain stable for the life of the graph itself.</span></div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;  <span class="keywordflow">return</span> DeletedRefSCCs;</div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;}</div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160; </div>
<div class="line"><a name="l01137"></a><span class="lineno"><a class="line" href="classllvm_1_1LazyCallGraph_1_1RefSCC.html#ab130250bcdaefbfd3c583cad7b120b62"> 1137</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1LazyCallGraph_1_1RefSCC.html#ab130250bcdaefbfd3c583cad7b120b62">LazyCallGraph::RefSCC::removeOutgoingEdge</a>(<a class="code" href="classllvm_1_1LazyCallGraph_1_1Node.html">Node</a> &amp;SourceN, <a class="code" href="classllvm_1_1LazyCallGraph_1_1Node.html">Node</a> &amp;TargetN) {</div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>-&gt;lookupRefSCC(SourceN) == <span class="keyword">this</span> &amp;&amp;</div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;         <span class="stringliteral">&quot;The source must be a member of this RefSCC.&quot;</span>);</div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>-&gt;lookupRefSCC(TargetN) != <span class="keyword">this</span> &amp;&amp;</div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;         <span class="stringliteral">&quot;The target must not be a member of this RefSCC&quot;</span>);</div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160; </div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;<span class="preprocessor">#ifdef EXPENSIVE_CHECKS</span></div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;  <a class="code" href="PPCCTRLoopsVerify_8cpp.html#a593cc2f204f7b2edc16ee222c37c3196">verify</a>();</div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;  <span class="keyword">auto</span> VerifyOnExit = <a class="code" href="namespacellvm.html#ab2e3dbebd68e69d77c227682fc8e3ba2">make_scope_exit</a>([&amp;]() { <a class="code" href="PPCCTRLoopsVerify_8cpp.html#a593cc2f204f7b2edc16ee222c37c3196">verify</a>(); });</div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160; </div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;  <span class="comment">// First remove it from the node.</span></div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;  <span class="keywordtype">bool</span> Removed = SourceN-&gt;removeEdgeInternal(TargetN);</div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;  (void)Removed;</div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Removed &amp;&amp; <span class="stringliteral">&quot;Target not in the edge set for this caller?&quot;</span>);</div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;}</div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160; </div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;<a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;LazyCallGraph::RefSCC *, 1&gt;</a></div>
<div class="line"><a name="l01155"></a><span class="lineno"><a class="line" href="classllvm_1_1LazyCallGraph_1_1RefSCC.html#a937b8c6223a8c9b99124097d5066eb4a"> 1155</a></span>&#160;<a class="code" href="classllvm_1_1LazyCallGraph_1_1RefSCC.html#a937b8c6223a8c9b99124097d5066eb4a">LazyCallGraph::RefSCC::removeInternalRefEdge</a>(<a class="code" href="classllvm_1_1LazyCallGraph_1_1Node.html">Node</a> &amp;SourceN,</div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;                                             <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;Node *&gt;</a> TargetNs) {</div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;  <span class="comment">// We return a list of the resulting *new* RefSCCs in post-order.</span></div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;RefSCC *, 1&gt;</a> Result;</div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160; </div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;<span class="preprocessor">#ifdef EXPENSIVE_CHECKS</span></div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;  <span class="comment">// Verify the RefSCC is valid to start with and that either we return an empty</span></div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;  <span class="comment">// list of result RefSCCs and this RefSCC remains valid, or we return new</span></div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;  <span class="comment">// RefSCCs and this RefSCC is dead.</span></div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;  <a class="code" href="PPCCTRLoopsVerify_8cpp.html#a593cc2f204f7b2edc16ee222c37c3196">verify</a>();</div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;  <span class="keyword">auto</span> VerifyOnExit = <a class="code" href="namespacellvm.html#ab2e3dbebd68e69d77c227682fc8e3ba2">make_scope_exit</a>([&amp;]() {</div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;    <span class="comment">// If we didn&#39;t replace our RefSCC with new ones, check that this one</span></div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;    <span class="comment">// remains valid.</span></div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>)</div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;      <a class="code" href="PPCCTRLoopsVerify_8cpp.html#a593cc2f204f7b2edc16ee222c37c3196">verify</a>();</div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;  });</div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160; </div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;  <span class="comment">// First remove the actual edges.</span></div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1LazyCallGraph_1_1Node.html">Node</a> *TargetN : TargetNs) {</div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!(*SourceN)[*TargetN].isCall() &amp;&amp;</div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;           <span class="stringliteral">&quot;Cannot remove a call edge, it must first be made a ref edge&quot;</span>);</div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160; </div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;    <span class="keywordtype">bool</span> Removed = SourceN-&gt;removeEdgeInternal(*TargetN);</div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;    (void)Removed;</div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Removed &amp;&amp; <span class="stringliteral">&quot;Target not in the edge set for this caller?&quot;</span>);</div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;  }</div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160; </div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;  <span class="comment">// Direct self references don&#39;t impact the ref graph at all.</span></div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a0d10fe510ced2849a8074fe81e5d04ce">llvm::all_of</a>(TargetNs,</div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;                   [&amp;](<a class="code" href="classllvm_1_1LazyCallGraph_1_1Node.html">Node</a> *TargetN) { <span class="keywordflow">return</span> &amp;SourceN == TargetN; }))</div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;    <span class="keywordflow">return</span> Result;</div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160; </div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;  <span class="comment">// If all targets are in the same SCC as the source, because no call edges</span></div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;  <span class="comment">// were removed there is no RefSCC structure change.</span></div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;  <a class="code" href="classllvm_1_1LazyCallGraph_1_1SCC.html">SCC</a> &amp;SourceC = *<a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>-&gt;lookupSCC(SourceN);</div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a0d10fe510ced2849a8074fe81e5d04ce">llvm::all_of</a>(TargetNs, [&amp;](<a class="code" href="classllvm_1_1LazyCallGraph_1_1Node.html">Node</a> *TargetN) {</div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>-&gt;lookupSCC(*TargetN) == &amp;SourceC;</div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;      }))</div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;    <span class="keywordflow">return</span> Result;</div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160; </div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;  <span class="comment">// We build somewhat synthetic new RefSCCs by providing a postorder mapping</span></div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;  <span class="comment">// for each inner SCC. We store these inside the low-link field of the nodes</span></div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;  <span class="comment">// rather than associated with SCCs because this saves a round-trip through</span></div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;  <span class="comment">// the node-&gt;SCC map and in the common case, SCCs are small. We will verify</span></div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;  <span class="comment">// that we always give the same number to every node in the SCC such that</span></div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;  <span class="comment">// these are equivalent.</span></div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;  <span class="keywordtype">int</span> PostOrderNumber = 0;</div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160; </div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;  <span class="comment">// Reset all the other nodes to prepare for a DFS over them, and add them to</span></div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;  <span class="comment">// our worklist.</span></div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Node *, 8&gt;</a> Worklist;</div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1LazyCallGraph_1_1SCC.html">SCC</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> : SCCs) {</div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1LazyCallGraph_1_1Node.html">Node</a> &amp;<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a> : *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)</div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;      <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>.DFSNumber = <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>.LowLink = 0;</div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160; </div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;    Worklist.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a7efd1f0c1206d95e4fe01a9b49a57b82">append</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;Nodes.begin(), <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;Nodes.end());</div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;  }</div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160; </div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;  <span class="comment">// Track the number of nodes in this RefSCC so that we can quickly recognize</span></div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;  <span class="comment">// an important special case of the edge removal not breaking the cycle of</span></div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;  <span class="comment">// this RefSCC.</span></div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> NumRefSCCNodes = Worklist.size();</div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160; </div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;std::pair&lt;Node *, EdgeSequence::iterator&gt;</a>, 4&gt; DFSStack;</div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Node *, 4&gt;</a> PendingRefSCCStack;</div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;  <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(DFSStack.empty() &amp;&amp;</div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;           <span class="stringliteral">&quot;Cannot begin a new root with a non-empty DFS stack!&quot;</span>);</div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(PendingRefSCCStack.empty() &amp;&amp;</div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;           <span class="stringliteral">&quot;Cannot begin a new root with pending nodes for an SCC!&quot;</span>);</div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160; </div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;    <a class="code" href="classllvm_1_1LazyCallGraph_1_1Node.html">Node</a> *RootN = Worklist.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a0c8ffe664a36e30d49c84d0aded2fe08">pop_back_val</a>();</div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;    <span class="comment">// Skip any nodes we&#39;ve already reached in the DFS.</span></div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;    <span class="keywordflow">if</span> (RootN-&gt;DFSNumber != 0) {</div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(RootN-&gt;DFSNumber == -1 &amp;&amp;</div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;             <span class="stringliteral">&quot;Shouldn&#39;t have any mid-DFS root nodes!&quot;</span>);</div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;    }</div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160; </div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;    RootN-&gt;DFSNumber = RootN-&gt;LowLink = 1;</div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;    <span class="keywordtype">int</span> NextDFSNumber = 2;</div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160; </div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;    DFSStack.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a396fcfee6914c76974b73c3d203da6a5">emplace_back</a>(RootN, (*RootN)-&gt;<a class="code" href="classllvm_1_1LazyCallGraph_1_1EdgeSequence.html#a64d53c120b022f979edf7718f33d77aa">begin</a>());</div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;    <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;      <span class="keyword">auto</span> [<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>] = DFSStack.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a0c8ffe664a36e30d49c84d0aded2fe08">pop_back_val</a>();</div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;      <span class="keyword">auto</span> <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = (*N)-&gt;end();</div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160; </div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;DFSNumber != 0 &amp;&amp; <span class="stringliteral">&quot;We should always assign a DFS number &quot;</span></div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;                                  <span class="stringliteral">&quot;before processing a node.&quot;</span>);</div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160; </div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;      <span class="keywordflow">while</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>) {</div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;        <a class="code" href="classllvm_1_1LazyCallGraph_1_1Node.html">Node</a> &amp;ChildN = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getNode();</div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;        <span class="keywordflow">if</span> (ChildN.DFSNumber == 0) {</div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;          <span class="comment">// Mark that we should start at this child when next this node is the</span></div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;          <span class="comment">// top of the stack. We don&#39;t start at the next child to ensure this</span></div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;          <span class="comment">// child&#39;s lowlink is reflected.</span></div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;          DFSStack.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a396fcfee6914c76974b73c3d203da6a5">emplace_back</a>(<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160; </div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;          <span class="comment">// Continue, resetting to the child node.</span></div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;          ChildN.LowLink = ChildN.DFSNumber = NextDFSNumber++;</div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;          <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a> = &amp;ChildN;</div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;          <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = ChildN-&gt;<a class="code" href="classllvm_1_1LazyCallGraph_1_1EdgeSequence.html#a64d53c120b022f979edf7718f33d77aa">begin</a>();</div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;          <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = ChildN-&gt;<a class="code" href="classllvm_1_1LazyCallGraph_1_1EdgeSequence.html#a4d46ac540030f05b75b6e525b5cbc7f8">end</a>();</div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;        }</div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;        <span class="keywordflow">if</span> (ChildN.DFSNumber == -1) {</div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;          <span class="comment">// If this child isn&#39;t currently in this RefSCC, no need to process</span></div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;          <span class="comment">// it.</span></div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;          ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;        }</div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160; </div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;        <span class="comment">// Track the lowest link of the children, if any are still in the stack.</span></div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;        <span class="comment">// Any child not on the stack will have a LowLink of -1.</span></div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;        <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(ChildN.LowLink != 0 &amp;&amp;</div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;               <span class="stringliteral">&quot;Low-link must not be zero with a non-zero DFS number.&quot;</span>);</div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;        <span class="keywordflow">if</span> (ChildN.LowLink &gt;= 0 &amp;&amp; ChildN.LowLink &lt; <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;LowLink)</div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;          <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;LowLink = ChildN.LowLink;</div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;        ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;      }</div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160; </div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;      <span class="comment">// We&#39;ve finished processing N and its descendants, put it on our pending</span></div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;      <span class="comment">// stack to eventually get merged into a RefSCC.</span></div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;      PendingRefSCCStack.push_back(<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>);</div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160; </div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;      <span class="comment">// If this node is linked to some lower entry, continue walking up the</span></div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;      <span class="comment">// stack.</span></div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;LowLink != <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;DFSNumber) {</div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;        <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!DFSStack.empty() &amp;&amp;</div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;               <span class="stringliteral">&quot;We never found a viable root for a RefSCC to pop off!&quot;</span>);</div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;      }</div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160; </div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;      <span class="comment">// Otherwise, form a new RefSCC from the top of the pending node stack.</span></div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;      <span class="keywordtype">int</span> RefSCCNumber = PostOrderNumber++;</div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;      <span class="keywordtype">int</span> RootDFSNumber = <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;DFSNumber;</div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160; </div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;      <span class="comment">// Find the range of the node stack by walking down until we pass the</span></div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;      <span class="comment">// root DFS number. Update the DFS numbers and low link numbers in the</span></div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;      <span class="comment">// process to avoid re-walking this list where possible.</span></div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;      <span class="keyword">auto</span> StackRI = <a class="code" href="namespacellvm.html#ac78c09ae232b2ce188ff590d51e3c268">find_if</a>(<a class="code" href="namespacellvm.html#a6b0ac1fa4f05de76413c5e0ca6334035">reverse</a>(PendingRefSCCStack), [&amp;](<a class="code" href="classllvm_1_1LazyCallGraph_1_1Node.html">Node</a> *<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>) {</div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;DFSNumber &lt; RootDFSNumber)</div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;          <span class="comment">// We&#39;ve found the bottom.</span></div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160; </div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;        <span class="comment">// Update this node and keep scanning.</span></div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;        <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;DFSNumber = -1;</div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;        <span class="comment">// Save the post-order number in the lowlink field so that we can use</span></div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;        <span class="comment">// it to map SCCs into new RefSCCs after we finish the DFS.</span></div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;        <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;LowLink = RefSCCNumber;</div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;      });</div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;      <span class="keyword">auto</span> RefSCCNodes = <a class="code" href="namespacellvm.html#ad1a91b49e0c092818a0b82f6cc130a1b">make_range</a>(StackRI.base(), PendingRefSCCStack.end());</div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160; </div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;      <span class="comment">// If we find a cycle containing all nodes originally in this RefSCC then</span></div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;      <span class="comment">// the removal hasn&#39;t changed the structure at all. This is an important</span></div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;      <span class="comment">// special case, and we can directly exit the entire routine more</span></div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;      <span class="comment">// efficiently as soon as we discover it.</span></div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a10f3d955592ae2bc745f57e5b48ae115">llvm::size</a>(RefSCCNodes) == NumRefSCCNodes) {</div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;        <span class="comment">// Clear out the low link field as we won&#39;t need it.</span></div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1LazyCallGraph_1_1Node.html">Node</a> *<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a> : RefSCCNodes)</div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;          <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;LowLink = -1;</div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;        <span class="comment">// Return the empty result immediately.</span></div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;        <span class="keywordflow">return</span> Result;</div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;      }</div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160; </div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;      <span class="comment">// We&#39;ve already marked the nodes internally with the RefSCC number so</span></div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;      <span class="comment">// just clear them off the stack and continue.</span></div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;      PendingRefSCCStack.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a563ffc2ff61c499b3be2e00100cb72fa">erase</a>(RefSCCNodes.begin(), PendingRefSCCStack.end());</div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;    } <span class="keywordflow">while</span> (!DFSStack.empty());</div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160; </div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(DFSStack.empty() &amp;&amp; <span class="stringliteral">&quot;Didn&#39;t flush the entire DFS stack!&quot;</span>);</div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(PendingRefSCCStack.empty() &amp;&amp; <span class="stringliteral">&quot;Didn&#39;t flush all pending nodes!&quot;</span>);</div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;  } <span class="keywordflow">while</span> (!Worklist.empty());</div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160; </div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(PostOrderNumber &gt; 1 &amp;&amp;</div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;         <span class="stringliteral">&quot;Should never finish the DFS when the existing RefSCC remains valid!&quot;</span>);</div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160; </div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;  <span class="comment">// Otherwise we create a collection of new RefSCC nodes and build</span></div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;  <span class="comment">// a radix-sort style map from postorder number to these new RefSCCs. We then</span></div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;  <span class="comment">// append SCCs to each of these RefSCCs in the order they occurred in the</span></div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;  <span class="comment">// original SCCs container.</span></div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> &lt; PostOrderNumber; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;    Result.push_back(<a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>-&gt;createRefSCC(*<a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>));</div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160; </div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;  <span class="comment">// Insert the resulting postorder sequence into the global graph postorder</span></div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;  <span class="comment">// sequence before the current RefSCC in that sequence, and then remove the</span></div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;  <span class="comment">// current one.</span></div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;  <span class="comment">// FIXME: It&#39;d be nice to change the APIs so that we returned an iterator</span></div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;  <span class="comment">// range over the global postorder sequence and generally use that sequence</span></div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;  <span class="comment">// rather than building a separate result vector here.</span></div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;  <span class="keywordtype">int</span> Idx = <a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>-&gt;getRefSCCIndex(*<span class="keyword">this</span>);</div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;  <a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>-&gt;PostOrderRefSCCs.erase(<a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>-&gt;PostOrderRefSCCs.begin() + Idx);</div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;  <a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>-&gt;PostOrderRefSCCs.insert(<a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>-&gt;PostOrderRefSCCs.begin() + Idx, Result.begin(),</div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;                             Result.end());</div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : seq&lt;int&gt;(Idx, <a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>-&gt;PostOrderRefSCCs.size()))</div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;    <a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>-&gt;RefSCCIndices[<a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>-&gt;PostOrderRefSCCs[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>]] = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160; </div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1LazyCallGraph_1_1SCC.html">SCC</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> : SCCs) {</div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;    <span class="comment">// We store the SCC number in the node&#39;s low-link field above.</span></div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;    <span class="keywordtype">int</span> SCCNumber = <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;begin()-&gt;LowLink;</div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;    <span class="comment">// Clear out all the SCC&#39;s node&#39;s low-link fields now that we&#39;re done</span></div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;    <span class="comment">// using them as side-storage.</span></div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1LazyCallGraph_1_1Node.html">Node</a> &amp;<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a> : *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>) {</div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>.LowLink == SCCNumber &amp;&amp;</div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;             <span class="stringliteral">&quot;Cannot have different numbers for nodes in the same SCC!&quot;</span>);</div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;      <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>.LowLink = -1;</div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;    }</div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160; </div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;    <a class="code" href="classllvm_1_1LazyCallGraph_1_1RefSCC.html">RefSCC</a> &amp;RC = *Result[SCCNumber];</div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;    <span class="keywordtype">int</span> SCCIndex = RC.SCCs.size();</div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;    RC.SCCs.push_back(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;    RC.SCCIndices[<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>] = SCCIndex;</div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;    <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;OuterRefSCC = &amp;RC;</div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;  }</div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160; </div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;  <span class="comment">// Now that we&#39;ve moved things into the new RefSCCs, clear out our current</span></div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;  <span class="comment">// one.</span></div>
<div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;  <a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;  SCCs.clear();</div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;  SCCIndices.clear();</div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160; </div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;<span class="preprocessor">#ifdef EXPENSIVE_CHECKS</span></div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;  <span class="comment">// Verify the new RefSCCs we&#39;ve built.</span></div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1LazyCallGraph_1_1RefSCC.html">RefSCC</a> *RC : Result)</div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;    RC-&gt;verify();</div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160; </div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;  <span class="comment">// Return the new list of SCCs.</span></div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;  <span class="keywordflow">return</span> Result;</div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;}</div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160; </div>
<div class="line"><a name="l01389"></a><span class="lineno"><a class="line" href="classllvm_1_1LazyCallGraph_1_1RefSCC.html#aaf3ba7d78f09755223609e4978bebef7"> 1389</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1LazyCallGraph_1_1RefSCC.html#aaf3ba7d78f09755223609e4978bebef7">LazyCallGraph::RefSCC::insertTrivialCallEdge</a>(<a class="code" href="classllvm_1_1LazyCallGraph_1_1Node.html">Node</a> &amp;SourceN,</div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;                                                  <a class="code" href="classllvm_1_1LazyCallGraph_1_1Node.html">Node</a> &amp;TargetN) {</div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;<span class="preprocessor">#ifdef EXPENSIVE_CHECKS</span></div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;  <span class="keyword">auto</span> ExitVerifier = <a class="code" href="namespacellvm.html#ab2e3dbebd68e69d77c227682fc8e3ba2">make_scope_exit</a>([<span class="keyword">this</span>] { <a class="code" href="PPCCTRLoopsVerify_8cpp.html#a593cc2f204f7b2edc16ee222c37c3196">verify</a>(); });</div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160; </div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;  <span class="comment">// Check that we aren&#39;t breaking some invariants of the SCC graph. Note that</span></div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;  <span class="comment">// this is quadratic in the number of edges in the call graph!</span></div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;  <a class="code" href="classllvm_1_1LazyCallGraph_1_1SCC.html">SCC</a> &amp;SourceC = *<a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>-&gt;lookupSCC(SourceN);</div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;  <a class="code" href="classllvm_1_1LazyCallGraph_1_1SCC.html">SCC</a> &amp;TargetC = *<a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>-&gt;lookupSCC(TargetN);</div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;  <span class="keywordflow">if</span> (&amp;SourceC != &amp;TargetC)</div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(SourceC.isAncestorOf(TargetC) &amp;&amp;</div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;           <span class="stringliteral">&quot;Call edge is not trivial in the SCC graph!&quot;</span>);</div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160; </div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;  <span class="comment">// First insert it into the source or find the existing edge.</span></div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;  <span class="keyword">auto</span> [Iterator, Inserted] =</div>
<div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;      SourceN-&gt;EdgeIndexMap.try_emplace(&amp;TargetN, SourceN-&gt;Edges.size());</div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;  <span class="keywordflow">if</span> (!Inserted) {</div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;    <span class="comment">// Already an edge, just update it.</span></div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;    <a class="code" href="classllvm_1_1LazyCallGraph_1_1Edge.html">Edge</a> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = SourceN-&gt;Edges[Iterator-&gt;second];</div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>.isCall())</div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;      <span class="keywordflow">return</span>; <span class="comment">// Nothing to do!</span></div>
<div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;    <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>.setKind(<a class="code" href="classllvm_1_1LazyCallGraph_1_1Edge.html#a8a5508e6c049172373b05c47c1b6fe13a13b74fdca959e0c5da734f789b298cf6">Edge::Call</a>);</div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;    <span class="comment">// Create the new edge.</span></div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;    SourceN-&gt;Edges.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a396fcfee6914c76974b73c3d203da6a5">emplace_back</a>(TargetN, <a class="code" href="classllvm_1_1LazyCallGraph_1_1Edge.html#a8a5508e6c049172373b05c47c1b6fe13a13b74fdca959e0c5da734f789b298cf6">Edge::Call</a>);</div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;  }</div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;}</div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160; </div>
<div class="line"><a name="l01418"></a><span class="lineno"><a class="line" href="classllvm_1_1LazyCallGraph_1_1RefSCC.html#a393b4565f554b9d8382c8f610b7f2ce7"> 1418</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1LazyCallGraph_1_1RefSCC.html#a393b4565f554b9d8382c8f610b7f2ce7">LazyCallGraph::RefSCC::insertTrivialRefEdge</a>(<a class="code" href="classllvm_1_1LazyCallGraph_1_1Node.html">Node</a> &amp;SourceN, <a class="code" href="classllvm_1_1LazyCallGraph_1_1Node.html">Node</a> &amp;TargetN) {</div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;<span class="preprocessor">#ifdef EXPENSIVE_CHECKS</span></div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;  <span class="keyword">auto</span> ExitVerifier = <a class="code" href="namespacellvm.html#ab2e3dbebd68e69d77c227682fc8e3ba2">make_scope_exit</a>([<span class="keyword">this</span>] { <a class="code" href="PPCCTRLoopsVerify_8cpp.html#a593cc2f204f7b2edc16ee222c37c3196">verify</a>(); });</div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160; </div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;  <span class="comment">// Check that we aren&#39;t breaking some invariants of the RefSCC graph.</span></div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;  <a class="code" href="classllvm_1_1LazyCallGraph_1_1RefSCC.html">RefSCC</a> &amp;SourceRC = *<a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>-&gt;lookupRefSCC(SourceN);</div>
<div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;  <a class="code" href="classllvm_1_1LazyCallGraph_1_1RefSCC.html">RefSCC</a> &amp;TargetRC = *<a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>-&gt;lookupRefSCC(TargetN);</div>
<div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;  <span class="keywordflow">if</span> (&amp;SourceRC != &amp;TargetRC)</div>
<div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(SourceRC.isAncestorOf(TargetRC) &amp;&amp;</div>
<div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;           <span class="stringliteral">&quot;Ref edge is not trivial in the RefSCC graph!&quot;</span>);</div>
<div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160; </div>
<div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;  <span class="comment">// First insert it into the source or find the existing edge.</span></div>
<div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;  <span class="keyword">auto</span> [Iterator, Inserted] =</div>
<div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;      SourceN-&gt;EdgeIndexMap.try_emplace(&amp;TargetN, SourceN-&gt;Edges.size());</div>
<div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;  (void)Iterator;</div>
<div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;  <span class="keywordflow">if</span> (!Inserted)</div>
<div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;    <span class="comment">// Already an edge, we&#39;re done.</span></div>
<div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160; </div>
<div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;  <span class="comment">// Create the new edge.</span></div>
<div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;  SourceN-&gt;Edges.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a396fcfee6914c76974b73c3d203da6a5">emplace_back</a>(TargetN, <a class="code" href="classllvm_1_1LazyCallGraph_1_1Edge.html#a8a5508e6c049172373b05c47c1b6fe13a81845d1d6d0f58deb757fad1e739c32c">Edge::Ref</a>);</div>
<div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;}</div>
<div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160; </div>
<div class="line"><a name="l01442"></a><span class="lineno"><a class="line" href="classllvm_1_1LazyCallGraph_1_1RefSCC.html#a70f7f0574edbfc0f75424499133d4ba3"> 1442</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1LazyCallGraph_1_1RefSCC.html#a70f7f0574edbfc0f75424499133d4ba3">LazyCallGraph::RefSCC::replaceNodeFunction</a>(<a class="code" href="classllvm_1_1LazyCallGraph_1_1Node.html">Node</a> &amp;<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>, <a class="code" href="classllvm_1_1Function.html">Function</a> &amp;NewF) {</div>
<div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> &amp;OldF = <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>.getFunction();</div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160; </div>
<div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;<span class="preprocessor">#ifdef EXPENSIVE_CHECKS</span></div>
<div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;  <span class="keyword">auto</span> ExitVerifier = <a class="code" href="namespacellvm.html#ab2e3dbebd68e69d77c227682fc8e3ba2">make_scope_exit</a>([<span class="keyword">this</span>] { <a class="code" href="PPCCTRLoopsVerify_8cpp.html#a593cc2f204f7b2edc16ee222c37c3196">verify</a>(); });</div>
<div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160; </div>
<div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>-&gt;lookupRefSCC(<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>) == <span class="keyword">this</span> &amp;&amp;</div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;         <span class="stringliteral">&quot;Cannot replace the function of a node outside this RefSCC.&quot;</span>);</div>
<div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160; </div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>-&gt;NodeMap.find(&amp;NewF) == <a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>-&gt;NodeMap.end() &amp;&amp;</div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;         <span class="stringliteral">&quot;Must not have already walked the new function!&#39;&quot;</span>);</div>
<div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160; </div>
<div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;  <span class="comment">// It is important that this replacement not introduce graph changes so we</span></div>
<div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;  <span class="comment">// insist that the caller has already removed every use of the original</span></div>
<div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;  <span class="comment">// function and that all uses of the new function correspond to existing</span></div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;  <span class="comment">// edges in the graph. The common and expected way to use this is when</span></div>
<div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;  <span class="comment">// replacing the function itself in the IR without changing the call graph</span></div>
<div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;  <span class="comment">// shape and just updating the analysis based on that.</span></div>
<div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(&amp;OldF != &amp;NewF &amp;&amp; <span class="stringliteral">&quot;Cannot replace a function with itself!&quot;</span>);</div>
<div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(OldF.<a class="code" href="classllvm_1_1Value.html#a9d7de807ebdfe1819df3ff6cb0f16158">use_empty</a>() &amp;&amp;</div>
<div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;         <span class="stringliteral">&quot;Must have moved all uses from the old function to the new!&quot;</span>);</div>
<div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160; </div>
<div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;  <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>.replaceFunction(NewF);</div>
<div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160; </div>
<div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;  <span class="comment">// Update various call graph maps.</span></div>
<div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;  <a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>-&gt;NodeMap.erase(&amp;OldF);</div>
<div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;  <a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>-&gt;NodeMap[&amp;NewF] = &amp;<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>;</div>
<div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160; </div>
<div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;  <span class="comment">// Update lib functions.</span></div>
<div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>-&gt;isLibFunction(OldF)) {</div>
<div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;    <a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>-&gt;LibFunctions.remove(&amp;OldF);</div>
<div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;    <a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>-&gt;LibFunctions.insert(&amp;NewF);</div>
<div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;  }</div>
<div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;}</div>
<div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160; </div>
<div class="line"><a name="l01478"></a><span class="lineno"><a class="line" href="classllvm_1_1LazyCallGraph.html#a5733cfe65849ae5b7945ee53328ffad9"> 1478</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1LazyCallGraph.html#a5733cfe65849ae5b7945ee53328ffad9">LazyCallGraph::insertEdge</a>(<a class="code" href="classllvm_1_1LazyCallGraph_1_1Node.html">Node</a> &amp;SourceN, <a class="code" href="classllvm_1_1LazyCallGraph_1_1Node.html">Node</a> &amp;TargetN, <a class="code" href="classllvm_1_1LazyCallGraph_1_1Edge.html#a8a5508e6c049172373b05c47c1b6fe13">Edge::Kind</a> EK) {</div>
<div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(SCCMap.empty() &amp;&amp;</div>
<div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;         <span class="stringliteral">&quot;This method cannot be called after SCCs have been formed!&quot;</span>);</div>
<div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160; </div>
<div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;  <span class="keywordflow">return</span> SourceN-&gt;insertEdgeInternal(TargetN, EK);</div>
<div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;}</div>
<div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160; </div>
<div class="line"><a name="l01485"></a><span class="lineno"><a class="line" href="classllvm_1_1LazyCallGraph.html#abeeeb8eb8c4062039f93bb6ae7d2c618"> 1485</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1LazyCallGraph.html#abeeeb8eb8c4062039f93bb6ae7d2c618">LazyCallGraph::removeEdge</a>(<a class="code" href="classllvm_1_1LazyCallGraph_1_1Node.html">Node</a> &amp;SourceN, <a class="code" href="classllvm_1_1LazyCallGraph_1_1Node.html">Node</a> &amp;TargetN) {</div>
<div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(SCCMap.empty() &amp;&amp;</div>
<div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;         <span class="stringliteral">&quot;This method cannot be called after SCCs have been formed!&quot;</span>);</div>
<div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160; </div>
<div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;  <span class="keywordtype">bool</span> Removed = SourceN-&gt;removeEdgeInternal(TargetN);</div>
<div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;  (void)Removed;</div>
<div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Removed &amp;&amp; <span class="stringliteral">&quot;Target not in the edge set for this caller?&quot;</span>);</div>
<div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;}</div>
<div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160; </div>
<div class="line"><a name="l01494"></a><span class="lineno"><a class="line" href="classllvm_1_1LazyCallGraph.html#a7b57497fa4748e1937b510b217d179d6"> 1494</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1LazyCallGraph.html#a7b57497fa4748e1937b510b217d179d6">LazyCallGraph::removeDeadFunction</a>(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>) {</div>
<div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;  <span class="comment">// FIXME: This is unnecessarily restrictive. We should be able to remove</span></div>
<div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;  <span class="comment">// functions which recursively call themselves.</span></div>
<div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.hasZeroLiveUses() &amp;&amp;</div>
<div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;         <span class="stringliteral">&quot;This routine should only be called on trivially dead functions!&quot;</span>);</div>
<div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160; </div>
<div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;  <span class="comment">// We shouldn&#39;t remove library functions as they are never really dead while</span></div>
<div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;  <span class="comment">// the call graph is in use -- every function definition refers to them.</span></div>
<div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!<a class="code" href="classllvm_1_1LazyCallGraph.html#a0aec1afa97220e40f3d67a94455b7833">isLibFunction</a>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>) &amp;&amp;</div>
<div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;         <span class="stringliteral">&quot;Must not remove lib functions from the call graph!&quot;</span>);</div>
<div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160; </div>
<div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;  <span class="keyword">auto</span> NI = NodeMap.find(&amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;  <span class="keywordflow">if</span> (NI == NodeMap.end())</div>
<div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;    <span class="comment">// Not in the graph at all!</span></div>
<div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160; </div>
<div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;  <a class="code" href="classllvm_1_1LazyCallGraph_1_1Node.html">Node</a> &amp;<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a> = *NI-&gt;second;</div>
<div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160; </div>
<div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;  <span class="comment">// Cannot remove a function which has yet to be visited in the DFS walk, so</span></div>
<div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;  <span class="comment">// if we have a node at all then we must have an SCC and RefSCC.</span></div>
<div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;  <span class="keyword">auto</span> CI = SCCMap.find(&amp;<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>);</div>
<div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(CI != SCCMap.end() &amp;&amp;</div>
<div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;         <span class="stringliteral">&quot;Tried to remove a node without an SCC after DFS walk started!&quot;</span>);</div>
<div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;  <a class="code" href="classllvm_1_1LazyCallGraph_1_1SCC.html">SCC</a> &amp;<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = *CI-&gt;second;</div>
<div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;  <a class="code" href="classllvm_1_1LazyCallGraph_1_1RefSCC.html">RefSCC</a> *RC = &amp;<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.getOuterRefSCC();</div>
<div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160; </div>
<div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;  <span class="comment">// In extremely rare cases, we can delete a dead function which is still in a</span></div>
<div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;  <span class="comment">// non-trivial RefSCC. This can happen due to spurious ref edges sticking</span></div>
<div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;  <span class="comment">// around after an IR function reference is removed.</span></div>
<div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;  <span class="keywordflow">if</span> (RC-&gt;<a class="code" href="classllvm_1_1LazyCallGraph_1_1RefSCC.html#ac62cb27d2f0946c9febb1e1d1e377f55">size</a>() != 1) {</div>
<div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Node *, 0&gt;</a> NodesInRC;</div>
<div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1LazyCallGraph_1_1SCC.html">SCC</a> &amp;OtherC : *RC) {</div>
<div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1LazyCallGraph_1_1Node.html">Node</a> &amp;OtherN : OtherC)</div>
<div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;        NodesInRC.push_back(&amp;OtherN);</div>
<div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;    }</div>
<div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1LazyCallGraph_1_1Node.html">Node</a> *OtherN : NodesInRC) {</div>
<div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;      <span class="keywordflow">if</span> ((*OtherN)-&gt;lookup(<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>)) {</div>
<div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;        <span class="keyword">auto</span> NewRefSCCs =</div>
<div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;            RC-&gt;removeInternalRefEdge(*OtherN, <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;Node *&gt;</a>(&amp;<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>));</div>
<div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;        <span class="comment">// If we&#39;ve split into multiple RefSCCs, RC is now invalid and the</span></div>
<div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;        <span class="comment">// RefSCC containing C will be different.</span></div>
<div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;        <span class="keywordflow">if</span> (!NewRefSCCs.empty())</div>
<div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;          RC = &amp;<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.getOuterRefSCC();</div>
<div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;      }</div>
<div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;    }</div>
<div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;  }</div>
<div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160; </div>
<div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;  NodeMap.erase(NI);</div>
<div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;  EntryEdges.removeEdgeInternal(<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>);</div>
<div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;  SCCMap.erase(CI);</div>
<div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160; </div>
<div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;  <span class="comment">// This node must be the only member of its SCC as it has no callers, and</span></div>
<div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;  <span class="comment">// that SCC must be the only member of a RefSCC as it has no references.</span></div>
<div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;  <span class="comment">// Validate these properties first.</span></div>
<div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.size() == 1 &amp;&amp; <span class="stringliteral">&quot;Dead functions must be in a singular SCC&quot;</span>);</div>
<div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(RC-&gt;<a class="code" href="classllvm_1_1LazyCallGraph_1_1RefSCC.html#ac62cb27d2f0946c9febb1e1d1e377f55">size</a>() == 1 &amp;&amp; <span class="stringliteral">&quot;Dead functions must be in a singular RefSCC&quot;</span>);</div>
<div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160; </div>
<div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;  <span class="comment">// Finally clear out all the data structures from the node down through the</span></div>
<div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;  <span class="comment">// components. postorder_ref_scc_iterator will skip empty RefSCCs, so no need</span></div>
<div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;  <span class="comment">// to adjust LazyCallGraph data structures.</span></div>
<div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;  <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>.clear();</div>
<div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;  <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>.G = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;  <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>.F = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;  <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.clear();</div>
<div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;  RC-&gt;clear();</div>
<div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;  RC-&gt;G = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160; </div>
<div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;  <span class="comment">// Nothing to delete as all the objects are allocated in stable bump pointer</span></div>
<div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;  <span class="comment">// allocators.</span></div>
<div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;}</div>
<div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160; </div>
<div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;<span class="comment">// Gets the Edge::Kind from one function to another by looking at the function&#39;s</span></div>
<div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;<span class="comment">// instructions. Asserts if there is no edge.</span></div>
<div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;<span class="comment">// Useful for determining what type of edge should exist between functions when</span></div>
<div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;<span class="comment">// the edge hasn&#39;t been created yet.</span></div>
<div class="line"><a name="l01569"></a><span class="lineno"><a class="line" href="LazyCallGraph_8cpp.html#ad7483d245bba8b6658b4dbd429f14313"> 1569</a></span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1LazyCallGraph_1_1Edge.html#a8a5508e6c049172373b05c47c1b6fe13">LazyCallGraph::Edge::Kind</a> <a class="code" href="LazyCallGraph_8cpp.html#ad7483d245bba8b6658b4dbd429f14313">getEdgeKind</a>(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;OriginalFunction,</div>
<div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;                                             <a class="code" href="classllvm_1_1Function.html">Function</a> &amp;NewFunction) {</div>
<div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;  <span class="comment">// In release builds, assume that if there are no direct calls to the new</span></div>
<div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;  <span class="comment">// function, then there is a ref edge. In debug builds, keep track of</span></div>
<div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;  <span class="comment">// references to assert that there is actually a ref edge if there is no call</span></div>
<div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;  <span class="comment">// edge.</span></div>
<div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Constant *, 16&gt;</a> Worklist;</div>
<div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;Constant *, 16&gt;</a> Visited;</div>
<div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160; </div>
<div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : <a class="code" href="namespacellvm.html#a7e3e687ddfdcbacd404bcf17b917dd88">instructions</a>(OriginalFunction)) {</div>
<div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> *CB = dyn_cast&lt;CallBase&gt;(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="AMDGPULibCalls_8cpp.html#a537c835c34f0b44b6ad2696643754390">Callee</a> = CB-&gt;getCalledFunction()) {</div>
<div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="AMDGPULibCalls_8cpp.html#a537c835c34f0b44b6ad2696643754390">Callee</a> == &amp;NewFunction)</div>
<div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;          <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a463baf545246fea9718664d933ffe66f">LazyCallGraph::Edge::Kind::Call</a>;</div>
<div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;      }</div>
<div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;    }</div>
<div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a> : <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.operand_values()) {</div>
<div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = dyn_cast&lt;Constant&gt;(<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>)) {</div>
<div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;        <span class="keywordflow">if</span> (Visited.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>).second)</div>
<div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;          Worklist.push_back(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div>
<div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;      }</div>
<div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;    }</div>
<div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;  }</div>
<div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160; </div>
<div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;  <span class="keywordtype">bool</span> FoundNewFunction = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;  <a class="code" href="classllvm_1_1LazyCallGraph.html#a778d0494c2f8dec95d60160b1ce89a07">LazyCallGraph::visitReferences</a>(Worklist, Visited, [&amp;](<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>) {</div>
<div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;    <span class="keywordflow">if</span> (&amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> == &amp;NewFunction)</div>
<div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;      FoundNewFunction = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;  });</div>
<div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(FoundNewFunction &amp;&amp; <span class="stringliteral">&quot;No edge from original function to new function&quot;</span>);</div>
<div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160; </div>
<div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;  <span class="keywordflow">return</span> LazyCallGraph::Edge::Kind::Ref;</div>
<div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;}</div>
<div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160; </div>
<div class="line"><a name="l01609"></a><span class="lineno"><a class="line" href="classllvm_1_1LazyCallGraph.html#a8d76834516af3608993c2add103b3a6f"> 1609</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1LazyCallGraph.html#a8d76834516af3608993c2add103b3a6f">LazyCallGraph::addSplitFunction</a>(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;OriginalFunction,</div>
<div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;                                     <a class="code" href="classllvm_1_1Function.html">Function</a> &amp;NewFunction) {</div>
<div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="classllvm_1_1LazyCallGraph.html#af92b067e8f6295042dc6544e1df18825">lookup</a>(OriginalFunction) &amp;&amp;</div>
<div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;         <span class="stringliteral">&quot;Original function&#39;s node should already exist&quot;</span>);</div>
<div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;  <a class="code" href="classllvm_1_1LazyCallGraph_1_1Node.html">Node</a> &amp;OriginalN = <a class="code" href="classllvm_1_1LazyCallGraph.html#a2e0002cac27faad0015b4fa7e5a3eb50">get</a>(OriginalFunction);</div>
<div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;  <a class="code" href="classllvm_1_1LazyCallGraph_1_1SCC.html">SCC</a> *OriginalC = <a class="code" href="classllvm_1_1LazyCallGraph.html#a2aa26a48970b4c22a7d85cb0e7fff842">lookupSCC</a>(OriginalN);</div>
<div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;  <a class="code" href="classllvm_1_1LazyCallGraph_1_1RefSCC.html">RefSCC</a> *OriginalRC = <a class="code" href="classllvm_1_1LazyCallGraph.html#a64160af47173a1dc68ad4e1ea698b844">lookupRefSCC</a>(OriginalN);</div>
<div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160; </div>
<div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;<span class="preprocessor">#ifdef EXPENSIVE_CHECKS</span></div>
<div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;  OriginalRC-&gt;verify();</div>
<div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;  <span class="keyword">auto</span> VerifyOnExit = <a class="code" href="namespacellvm.html#ab2e3dbebd68e69d77c227682fc8e3ba2">make_scope_exit</a>([&amp;]() { OriginalRC-&gt;verify(); });</div>
<div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160; </div>
<div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!<a class="code" href="classllvm_1_1LazyCallGraph.html#af92b067e8f6295042dc6544e1df18825">lookup</a>(NewFunction) &amp;&amp;</div>
<div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;         <span class="stringliteral">&quot;New function&#39;s node should not already exist&quot;</span>);</div>
<div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;  <a class="code" href="classllvm_1_1LazyCallGraph_1_1Node.html">Node</a> &amp;NewN = initNode(NewFunction);</div>
<div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160; </div>
<div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;  <a class="code" href="classllvm_1_1LazyCallGraph_1_1Edge.html#a8a5508e6c049172373b05c47c1b6fe13">Edge::Kind</a> EK = <a class="code" href="LazyCallGraph_8cpp.html#ad7483d245bba8b6658b4dbd429f14313">getEdgeKind</a>(OriginalFunction, NewFunction);</div>
<div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160; </div>
<div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;  <a class="code" href="classllvm_1_1LazyCallGraph_1_1SCC.html">SCC</a> *NewC = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1LazyCallGraph_1_1Edge.html">Edge</a> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> : *NewN) {</div>
<div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;    <a class="code" href="classllvm_1_1LazyCallGraph_1_1Node.html">Node</a> &amp;EN = <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>.getNode();</div>
<div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;    <span class="keywordflow">if</span> (EK == <a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a463baf545246fea9718664d933ffe66f">Edge::Kind::Call</a> &amp;&amp; <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>.isCall() &amp;&amp; <a class="code" href="classllvm_1_1LazyCallGraph.html#a2aa26a48970b4c22a7d85cb0e7fff842">lookupSCC</a>(EN) == OriginalC) {</div>
<div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;      <span class="comment">// If the edge to the new function is a call edge and there is a call edge</span></div>
<div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;      <span class="comment">// from the new function to any function in the original function&#39;s SCC,</span></div>
<div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;      <span class="comment">// it is in the same SCC (and RefSCC) as the original function.</span></div>
<div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;      NewC = OriginalC;</div>
<div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;      NewC-&gt;Nodes.push_back(&amp;NewN);</div>
<div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;    }</div>
<div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;  }</div>
<div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160; </div>
<div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;  <span class="keywordflow">if</span> (!NewC) {</div>
<div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1LazyCallGraph_1_1Edge.html">Edge</a> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> : *NewN) {</div>
<div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;      <a class="code" href="classllvm_1_1LazyCallGraph_1_1Node.html">Node</a> &amp;EN = <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>.getNode();</div>
<div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1LazyCallGraph.html#a64160af47173a1dc68ad4e1ea698b844">lookupRefSCC</a>(EN) == OriginalRC) {</div>
<div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;        <span class="comment">// If there is any edge from the new function to any function in the</span></div>
<div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;        <span class="comment">// original function&#39;s RefSCC, it is in the same RefSCC as the original</span></div>
<div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;        <span class="comment">// function but a new SCC.</span></div>
<div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;        <a class="code" href="classllvm_1_1LazyCallGraph_1_1RefSCC.html">RefSCC</a> *NewRC = OriginalRC;</div>
<div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;        NewC = createSCC(*NewRC, <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Node *, 1&gt;</a>({&amp;NewN}));</div>
<div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160; </div>
<div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;        <span class="comment">// The new function&#39;s SCC is not the same as the original function&#39;s</span></div>
<div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;        <span class="comment">// SCC, since that case was handled earlier. If the edge from the</span></div>
<div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;        <span class="comment">// original function to the new function was a call edge, then we need</span></div>
<div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;        <span class="comment">// to insert the newly created function&#39;s SCC before the original</span></div>
<div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;        <span class="comment">// function&#39;s SCC. Otherwise, either the new SCC comes after the</span></div>
<div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;        <span class="comment">// original function&#39;s SCC, or it doesn&#39;t matter, and in both cases we</span></div>
<div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;        <span class="comment">// can add it to the very end.</span></div>
<div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;        <span class="keywordtype">int</span> InsertIndex = EK == <a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a463baf545246fea9718664d933ffe66f">Edge::Kind::Call</a> ? NewRC-&gt;SCCIndices[OriginalC]</div>
<div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;                                                 : NewRC-&gt;SCCIndices.size();</div>
<div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;        NewRC-&gt;SCCs.insert(NewRC-&gt;SCCs.begin() + InsertIndex, NewC);</div>
<div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = InsertIndex, Size = NewRC-&gt;SCCs.size(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> &lt; Size; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div>
<div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;          NewRC-&gt;SCCIndices[NewRC-&gt;SCCs[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>]] = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160; </div>
<div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;      }</div>
<div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;    }</div>
<div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;  }</div>
<div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160; </div>
<div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;  <span class="keywordflow">if</span> (!NewC) {</div>
<div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;    <span class="comment">// We didn&#39;t find any edges back to the original function&#39;s RefSCC, so the</span></div>
<div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;    <span class="comment">// new function belongs in a new RefSCC. The new RefSCC goes before the</span></div>
<div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;    <span class="comment">// original function&#39;s RefSCC.</span></div>
<div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;    <a class="code" href="classllvm_1_1LazyCallGraph_1_1RefSCC.html">RefSCC</a> *NewRC = createRefSCC(*<span class="keyword">this</span>);</div>
<div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;    NewC = createSCC(*NewRC, <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Node *, 1&gt;</a>({&amp;NewN}));</div>
<div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;    NewRC-&gt;SCCIndices[NewC] = 0;</div>
<div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;    NewRC-&gt;SCCs.push_back(NewC);</div>
<div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;    <span class="keyword">auto</span> OriginalRCIndex = RefSCCIndices.find(OriginalRC)-&gt;second;</div>
<div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;    PostOrderRefSCCs.insert(PostOrderRefSCCs.begin() + OriginalRCIndex, NewRC);</div>
<div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = OriginalRCIndex, Size = PostOrderRefSCCs.size(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> &lt; Size; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div>
<div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;      RefSCCIndices[PostOrderRefSCCs[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>]] = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;  }</div>
<div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160; </div>
<div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;  SCCMap[&amp;NewN] = NewC;</div>
<div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160; </div>
<div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;  OriginalN-&gt;insertEdgeInternal(NewN, EK);</div>
<div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;}</div>
<div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160; </div>
<div class="line"><a name="l01688"></a><span class="lineno"><a class="line" href="classllvm_1_1LazyCallGraph.html#a952c8adfe8553406e169b98200072a69"> 1688</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1LazyCallGraph.html#a952c8adfe8553406e169b98200072a69">LazyCallGraph::addSplitRefRecursiveFunctions</a>(</div>
<div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;    <a class="code" href="classllvm_1_1Function.html">Function</a> &amp;OriginalFunction, <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;Function *&gt;</a> NewFunctions) {</div>
<div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!NewFunctions.<a class="code" href="classllvm_1_1ArrayRef.html#ac835b8735b1b2faec0efdca236e37d94">empty</a>() &amp;&amp; <span class="stringliteral">&quot;Can&#39;t add zero functions&quot;</span>);</div>
<div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="classllvm_1_1LazyCallGraph.html#af92b067e8f6295042dc6544e1df18825">lookup</a>(OriginalFunction) &amp;&amp;</div>
<div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;         <span class="stringliteral">&quot;Original function&#39;s node should already exist&quot;</span>);</div>
<div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;  <a class="code" href="classllvm_1_1LazyCallGraph_1_1Node.html">Node</a> &amp;OriginalN = <a class="code" href="classllvm_1_1LazyCallGraph.html#a2e0002cac27faad0015b4fa7e5a3eb50">get</a>(OriginalFunction);</div>
<div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;  <a class="code" href="classllvm_1_1LazyCallGraph_1_1RefSCC.html">RefSCC</a> *OriginalRC = <a class="code" href="classllvm_1_1LazyCallGraph.html#a64160af47173a1dc68ad4e1ea698b844">lookupRefSCC</a>(OriginalN);</div>
<div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160; </div>
<div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;<span class="preprocessor">#ifdef EXPENSIVE_CHECKS</span></div>
<div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;  OriginalRC-&gt;verify();</div>
<div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;  <span class="keyword">auto</span> VerifyOnExit = <a class="code" href="namespacellvm.html#ab2e3dbebd68e69d77c227682fc8e3ba2">make_scope_exit</a>([&amp;]() {</div>
<div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;    OriginalRC-&gt;verify();</div>
<div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Function.html">Function</a> *NewFunction : NewFunctions)</div>
<div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;      <a class="code" href="classllvm_1_1LazyCallGraph.html#a64160af47173a1dc68ad4e1ea698b844">lookupRefSCC</a>(<a class="code" href="classllvm_1_1LazyCallGraph.html#a2e0002cac27faad0015b4fa7e5a3eb50">get</a>(*NewFunction))-&gt;<a class="code" href="PPCCTRLoopsVerify_8cpp.html#a593cc2f204f7b2edc16ee222c37c3196">verify</a>();</div>
<div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;  });</div>
<div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160; </div>
<div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;  <span class="keywordtype">bool</span> ExistsRefToOriginalRefSCC = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160; </div>
<div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Function.html">Function</a> *NewFunction : NewFunctions) {</div>
<div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;    <a class="code" href="classllvm_1_1LazyCallGraph_1_1Node.html">Node</a> &amp;NewN = initNode(*NewFunction);</div>
<div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160; </div>
<div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;    OriginalN-&gt;insertEdgeInternal(NewN, Edge::Kind::Ref);</div>
<div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160; </div>
<div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;    <span class="comment">// Check if there is any edge from any new function back to any function in</span></div>
<div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;    <span class="comment">// the original function&#39;s RefSCC.</span></div>
<div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1LazyCallGraph_1_1Edge.html">Edge</a> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> : *NewN) {</div>
<div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1LazyCallGraph.html#a64160af47173a1dc68ad4e1ea698b844">lookupRefSCC</a>(<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>.getNode()) == OriginalRC) {</div>
<div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;        ExistsRefToOriginalRefSCC = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;      }</div>
<div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;    }</div>
<div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;  }</div>
<div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160; </div>
<div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;  <a class="code" href="classllvm_1_1LazyCallGraph_1_1RefSCC.html">RefSCC</a> *NewRC;</div>
<div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;  <span class="keywordflow">if</span> (ExistsRefToOriginalRefSCC) {</div>
<div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;    <span class="comment">// If there is any edge from any new function to any function in the</span></div>
<div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;    <span class="comment">// original function&#39;s RefSCC, all new functions will be in the same RefSCC</span></div>
<div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;    <span class="comment">// as the original function.</span></div>
<div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;    NewRC = OriginalRC;</div>
<div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;    <span class="comment">// Otherwise the new functions are in their own RefSCC.</span></div>
<div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;    NewRC = createRefSCC(*<span class="keyword">this</span>);</div>
<div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;    <span class="comment">// The new RefSCC goes before the original function&#39;s RefSCC in postorder</span></div>
<div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;    <span class="comment">// since there are only edges from the original function&#39;s RefSCC to the new</span></div>
<div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;    <span class="comment">// RefSCC.</span></div>
<div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;    <span class="keyword">auto</span> OriginalRCIndex = RefSCCIndices.find(OriginalRC)-&gt;second;</div>
<div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;    PostOrderRefSCCs.insert(PostOrderRefSCCs.begin() + OriginalRCIndex, NewRC);</div>
<div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = OriginalRCIndex, Size = PostOrderRefSCCs.size(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> &lt; Size; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div>
<div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;      RefSCCIndices[PostOrderRefSCCs[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>]] = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;  }</div>
<div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160; </div>
<div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Function.html">Function</a> *NewFunction : NewFunctions) {</div>
<div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;    <a class="code" href="classllvm_1_1LazyCallGraph_1_1Node.html">Node</a> &amp;NewN = <a class="code" href="classllvm_1_1LazyCallGraph.html#a2e0002cac27faad0015b4fa7e5a3eb50">get</a>(*NewFunction);</div>
<div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;    <span class="comment">// Each new function is in its own new SCC. The original function can only</span></div>
<div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;    <span class="comment">// have a ref edge to new functions, and no other existing functions can</span></div>
<div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;    <span class="comment">// have references to new functions. Each new function only has a ref edge</span></div>
<div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;    <span class="comment">// to the other new functions.</span></div>
<div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;    <a class="code" href="classllvm_1_1LazyCallGraph_1_1SCC.html">SCC</a> *NewC = createSCC(*NewRC, <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Node *, 1&gt;</a>({&amp;NewN}));</div>
<div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;    <span class="comment">// The new SCCs are either sibling SCCs or parent SCCs to all other existing</span></div>
<div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;    <span class="comment">// SCCs in the RefSCC. Either way, they can go at the back of the postorder</span></div>
<div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;    <span class="comment">// SCC list.</span></div>
<div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;    <span class="keyword">auto</span> <a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a> = NewRC-&gt;SCCIndices.size();</div>
<div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;    NewRC-&gt;SCCIndices[NewC] = <a class="code" href="ELFObjHandler_8cpp.html#aef61945034b9431b804748fc317c5548">Index</a>;</div>
<div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;    NewRC-&gt;SCCs.push_back(NewC);</div>
<div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;    SCCMap[&amp;NewN] = NewC;</div>
<div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;  }</div>
<div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160; </div>
<div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Function.html">Function</a> *F1 : NewFunctions) {</div>
<div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="LazyCallGraph_8cpp.html#ad7483d245bba8b6658b4dbd429f14313">getEdgeKind</a>(OriginalFunction, *F1) == Edge::Kind::Ref &amp;&amp;</div>
<div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;           <span class="stringliteral">&quot;Expected ref edges from original function to every new function&quot;</span>);</div>
<div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;    <a class="code" href="classllvm_1_1LazyCallGraph_1_1Node.html">Node</a> &amp;N1 = <a class="code" href="classllvm_1_1LazyCallGraph.html#a2e0002cac27faad0015b4fa7e5a3eb50">get</a>(*F1);</div>
<div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Function.html">Function</a> *F2 : NewFunctions) {</div>
<div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;      <span class="keywordflow">if</span> (F1 == F2)</div>
<div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;      <a class="code" href="classllvm_1_1LazyCallGraph_1_1Node.html">Node</a> &amp;N2 = <a class="code" href="classllvm_1_1LazyCallGraph.html#a2e0002cac27faad0015b4fa7e5a3eb50">get</a>(*F2);</div>
<div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!N1-&gt;<a class="code" href="classllvm_1_1LazyCallGraph_1_1EdgeSequence.html#aef0b1ef237beea0e9b4611260b84bce4">lookup</a>(N2)-&gt;<a class="code" href="classllvm_1_1LazyCallGraph_1_1Edge.html#a6adb0d1326681c19a5f14a745e17bc32">isCall</a>() &amp;&amp;</div>
<div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;             <span class="stringliteral">&quot;Edges between new functions must be ref edges&quot;</span>);</div>
<div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;    }</div>
<div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;  }</div>
<div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;}</div>
<div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160; </div>
<div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;<a class="code" href="classllvm_1_1LazyCallGraph_1_1Node.html">LazyCallGraph::Node</a> &amp;LazyCallGraph::insertInto(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, Node *&amp;MappedN) {</div>
<div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;  <span class="keywordflow">return</span> *<span class="keyword">new</span> (MappedN = BPA.Allocate()) Node(*<span class="keyword">this</span>, <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;}</div>
<div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160; </div>
<div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;<span class="keywordtype">void</span> LazyCallGraph::updateGraphPtrs() {</div>
<div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;  <span class="comment">// Walk the node map to update their graph pointers. While this iterates in</span></div>
<div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;  <span class="comment">// an unstable order, the order has no effect, so it remains correct.</span></div>
<div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;FunctionNodePair : NodeMap)</div>
<div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;    FunctionNodePair.second-&gt;G = <span class="keyword">this</span>;</div>
<div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160; </div>
<div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> *RC : PostOrderRefSCCs)</div>
<div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;    RC-&gt;G = <span class="keyword">this</span>;</div>
<div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;}</div>
<div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160; </div>
<div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;<a class="code" href="classllvm_1_1LazyCallGraph_1_1Node.html">LazyCallGraph::Node</a> &amp;LazyCallGraph::initNode(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>) {</div>
<div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;  Node &amp;<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a> = <a class="code" href="classllvm_1_1LazyCallGraph.html#a2e0002cac27faad0015b4fa7e5a3eb50">get</a>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;  <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>.DFSNumber = <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>.LowLink = -1;</div>
<div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;  <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>.populate();</div>
<div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;  NodeMap[&amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>] = &amp;<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>;</div>
<div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>;</div>
<div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;}</div>
<div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160; </div>
<div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> RootsT, <span class="keyword">typename</span> GetBeginT, <span class="keyword">typename</span> GetEndT,</div>
<div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;          <span class="keyword">typename</span> GetNodeT, <span class="keyword">typename</span> FormSCCCallbackT&gt;</div>
<div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;<span class="keywordtype">void</span> LazyCallGraph::buildGenericSCCs(RootsT &amp;&amp;Roots, GetBeginT &amp;&amp;GetBegin,</div>
<div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;                                     GetEndT &amp;&amp;GetEnd, GetNodeT &amp;&amp;GetNode,</div>
<div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;                                     FormSCCCallbackT &amp;&amp;FormSCC) {</div>
<div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;  <span class="keyword">using</span> EdgeItT = decltype(GetBegin(std::declval&lt;Node &amp;&gt;()));</div>
<div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160; </div>
<div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;std::pair&lt;Node *, EdgeItT&gt;</a>, 16&gt; DFSStack;</div>
<div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Node *, 16&gt;</a> PendingSCCStack;</div>
<div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160; </div>
<div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;  <span class="comment">// Scan down the stack and DFS across the call edges.</span></div>
<div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;  <span class="keywordflow">for</span> (Node *RootN : Roots) {</div>
<div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(DFSStack.empty() &amp;&amp;</div>
<div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;           <span class="stringliteral">&quot;Cannot begin a new root with a non-empty DFS stack!&quot;</span>);</div>
<div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(PendingSCCStack.empty() &amp;&amp;</div>
<div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;           <span class="stringliteral">&quot;Cannot begin a new root with pending nodes for an SCC!&quot;</span>);</div>
<div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160; </div>
<div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;    <span class="comment">// Skip any nodes we&#39;ve already reached in the DFS.</span></div>
<div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;    <span class="keywordflow">if</span> (RootN-&gt;DFSNumber != 0) {</div>
<div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(RootN-&gt;DFSNumber == -1 &amp;&amp;</div>
<div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;             <span class="stringliteral">&quot;Shouldn&#39;t have any mid-DFS root nodes!&quot;</span>);</div>
<div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;    }</div>
<div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160; </div>
<div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;    RootN-&gt;DFSNumber = RootN-&gt;LowLink = 1;</div>
<div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;    <span class="keywordtype">int</span> NextDFSNumber = 2;</div>
<div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160; </div>
<div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;    DFSStack.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a396fcfee6914c76974b73c3d203da6a5">emplace_back</a>(RootN, GetBegin(*RootN));</div>
<div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;    <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;      <span class="keyword">auto</span> [<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>] = DFSStack.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a0c8ffe664a36e30d49c84d0aded2fe08">pop_back_val</a>();</div>
<div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;      <span class="keyword">auto</span> <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = GetEnd(*<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>);</div>
<div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;      <span class="keywordflow">while</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>) {</div>
<div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;        Node &amp;ChildN = GetNode(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;        <span class="keywordflow">if</span> (ChildN.DFSNumber == 0) {</div>
<div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;          <span class="comment">// We haven&#39;t yet visited this child, so descend, pushing the current</span></div>
<div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;          <span class="comment">// node onto the stack.</span></div>
<div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;          DFSStack.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a396fcfee6914c76974b73c3d203da6a5">emplace_back</a>(<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160; </div>
<div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;          ChildN.DFSNumber = ChildN.LowLink = NextDFSNumber++;</div>
<div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;          <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a> = &amp;ChildN;</div>
<div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;          <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = GetBegin(*<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>);</div>
<div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;          <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = GetEnd(*<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>);</div>
<div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;        }</div>
<div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160; </div>
<div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;        <span class="comment">// If the child has already been added to some child component, it</span></div>
<div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;        <span class="comment">// couldn&#39;t impact the low-link of this parent because it isn&#39;t</span></div>
<div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;        <span class="comment">// connected, and thus its low-link isn&#39;t relevant so skip it.</span></div>
<div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;        <span class="keywordflow">if</span> (ChildN.DFSNumber == -1) {</div>
<div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;          ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;        }</div>
<div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160; </div>
<div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;        <span class="comment">// Track the lowest linked child as the lowest link for this node.</span></div>
<div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;        <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(ChildN.LowLink &gt; 0 &amp;&amp; <span class="stringliteral">&quot;Must have a positive low-link number!&quot;</span>);</div>
<div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;        <span class="keywordflow">if</span> (ChildN.LowLink &lt; <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;LowLink)</div>
<div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;          <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;LowLink = ChildN.LowLink;</div>
<div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160; </div>
<div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;        <span class="comment">// Move to the next edge.</span></div>
<div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;        ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;      }</div>
<div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160; </div>
<div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;      <span class="comment">// We&#39;ve finished processing N and its descendants, put it on our pending</span></div>
<div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;      <span class="comment">// SCC stack to eventually get merged into an SCC of nodes.</span></div>
<div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;      PendingSCCStack.push_back(<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>);</div>
<div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160; </div>
<div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;      <span class="comment">// If this node is linked to some lower entry, continue walking up the</span></div>
<div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;      <span class="comment">// stack.</span></div>
<div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;LowLink != <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;DFSNumber)</div>
<div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160; </div>
<div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;      <span class="comment">// Otherwise, we&#39;ve completed an SCC. Append it to our post order list of</span></div>
<div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;      <span class="comment">// SCCs.</span></div>
<div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;      <span class="keywordtype">int</span> RootDFSNumber = <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;DFSNumber;</div>
<div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;      <span class="comment">// Find the range of the node stack by walking down until we pass the</span></div>
<div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;      <span class="comment">// root DFS number.</span></div>
<div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;      <span class="keyword">auto</span> SCCNodes = <a class="code" href="namespacellvm.html#ad1a91b49e0c092818a0b82f6cc130a1b">make_range</a>(</div>
<div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;          PendingSCCStack.rbegin(),</div>
<div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;          <a class="code" href="namespacellvm.html#ac78c09ae232b2ce188ff590d51e3c268">find_if</a>(<a class="code" href="namespacellvm.html#a6b0ac1fa4f05de76413c5e0ca6334035">reverse</a>(PendingSCCStack), [RootDFSNumber](<span class="keyword">const</span> Node *<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>) {</div>
<div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;DFSNumber &lt; RootDFSNumber;</div>
<div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;          }));</div>
<div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;      <span class="comment">// Form a new SCC out of these nodes and then clear them off our pending</span></div>
<div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;      <span class="comment">// stack.</span></div>
<div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;      FormSCC(SCCNodes);</div>
<div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;      PendingSCCStack.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a563ffc2ff61c499b3be2e00100cb72fa">erase</a>(SCCNodes.end().base(), PendingSCCStack.end());</div>
<div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;    } <span class="keywordflow">while</span> (!DFSStack.empty());</div>
<div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;  }</div>
<div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;}</div>
<div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;<span class="comment">/// Build the internal SCCs for a RefSCC from a sequence of nodes.</span></div>
<div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;<span class="comment">/// Appends the SCCs to the provided vector and updates the map with their</span></div>
<div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;<span class="comment">/// indices. Both the vector and map must be empty when passed into this</span></div>
<div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;<span class="comment">/// routine.</span></div>
<div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> LazyCallGraph::buildSCCs(RefSCC &amp;RC, node_stack_range Nodes) {</div>
<div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(RC.SCCs.empty() &amp;&amp; <span class="stringliteral">&quot;Already built SCCs!&quot;</span>);</div>
<div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(RC.SCCIndices.empty() &amp;&amp; <span class="stringliteral">&quot;Already mapped SCC indices!&quot;</span>);</div>
<div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160; </div>
<div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;  <span class="keywordflow">for</span> (Node *<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a> : Nodes) {</div>
<div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;LowLink &gt;= (*Nodes.begin())-&gt;LowLink &amp;&amp;</div>
<div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;           <span class="stringliteral">&quot;We cannot have a low link in an SCC lower than its root on the &quot;</span></div>
<div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;           <span class="stringliteral">&quot;stack!&quot;</span>);</div>
<div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160; </div>
<div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;    <span class="comment">// This node will go into the next RefSCC, clear out its DFS and low link</span></div>
<div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;    <span class="comment">// as we scan.</span></div>
<div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;    <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;DFSNumber = <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;LowLink = 0;</div>
<div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;  }</div>
<div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160; </div>
<div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;  <span class="comment">// Each RefSCC contains a DAG of the call SCCs. To build these, we do</span></div>
<div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;  <span class="comment">// a direct walk of the call edges using Tarjan&#39;s algorithm. We reuse the</span></div>
<div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;  <span class="comment">// internal storage as we won&#39;t need it for the outer graph&#39;s DFS any longer.</span></div>
<div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;  buildGenericSCCs(</div>
<div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;      Nodes, [](Node &amp;<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>) { <span class="keywordflow">return</span> <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;call_begin(); },</div>
<div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;      [](Node &amp;<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>) { <span class="keywordflow">return</span> <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;call_end(); },</div>
<div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;      [](EdgeSequence::call_iterator <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) -&gt; Node &amp; { <span class="keywordflow">return</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getNode(); },</div>
<div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;      [<span class="keyword">this</span>, &amp;RC](node_stack_range Nodes) {</div>
<div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;        RC.SCCs.push_back(createSCC(RC, Nodes));</div>
<div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;        <span class="keywordflow">for</span> (Node &amp;<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a> : *RC.SCCs.back()) {</div>
<div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;          <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>.DFSNumber = <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>.LowLink = -1;</div>
<div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;          SCCMap[&amp;<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>] = RC.SCCs.back();</div>
<div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;        }</div>
<div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;      });</div>
<div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160; </div>
<div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;  <span class="comment">// Wire up the SCC indices.</span></div>
<div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0, Size = RC.SCCs.size(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> &lt; <a class="code" href="namespacellvm_1_1Check.html#a067ee17412e800f03802fa9517685732a3450a9712780ac26b071f9da4288a396">Size</a>; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div>
<div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;    RC.SCCIndices[RC.SCCs[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>]] = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;}</div>
<div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160; </div>
<div class="line"><a name="l01922"></a><span class="lineno"><a class="line" href="classllvm_1_1LazyCallGraph.html#a72787ab6acfbe504a11ca1d927513356"> 1922</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1LazyCallGraph.html#a72787ab6acfbe504a11ca1d927513356">LazyCallGraph::buildRefSCCs</a>() {</div>
<div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;  <span class="keywordflow">if</span> (EntryEdges.<a class="code" href="classllvm_1_1LazyCallGraph_1_1EdgeSequence.html#a29e086486bf95a2cb7d9c1e93ec48857">empty</a>() || !PostOrderRefSCCs.empty())</div>
<div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;    <span class="comment">// RefSCCs are either non-existent or already built!</span></div>
<div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160; </div>
<div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(RefSCCIndices.empty() &amp;&amp; <span class="stringliteral">&quot;Already mapped RefSCC indices!&quot;</span>);</div>
<div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160; </div>
<div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Node *, 16&gt;</a> Roots;</div>
<div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1LazyCallGraph_1_1Edge.html">Edge</a> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> : *<span class="keyword">this</span>)</div>
<div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;    Roots.push_back(&amp;<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>.getNode());</div>
<div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160; </div>
<div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;  <span class="comment">// The roots will be iterated in order.</span></div>
<div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;  buildGenericSCCs(</div>
<div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;      Roots,</div>
<div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;      [](<a class="code" href="classllvm_1_1LazyCallGraph_1_1Node.html">Node</a> &amp;<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>) {</div>
<div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;        <span class="comment">// We need to populate each node as we begin to walk its edges.</span></div>
<div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;        <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>.populate();</div>
<div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;begin();</div>
<div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;      },</div>
<div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;      [](<a class="code" href="classllvm_1_1LazyCallGraph_1_1Node.html">Node</a> &amp;<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>) { <span class="keywordflow">return</span> <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;end(); },</div>
<div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;      [](<a class="code" href="classllvm_1_1LazyCallGraph_1_1EdgeSequence_1_1iterator.html">EdgeSequence::iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) -&gt; <a class="code" href="classllvm_1_1LazyCallGraph_1_1Node.html">Node</a> &amp; { <span class="keywordflow">return</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getNode(); },</div>
<div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;      [<span class="keyword">this</span>](<a class="code" href="classllvm_1_1iterator__range.html">node_stack_range</a> Nodes) {</div>
<div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;        <a class="code" href="classllvm_1_1LazyCallGraph_1_1RefSCC.html">RefSCC</a> *NewRC = createRefSCC(*<span class="keyword">this</span>);</div>
<div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;        buildSCCs(*NewRC, Nodes);</div>
<div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160; </div>
<div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;        <span class="comment">// Push the new node into the postorder list and remember its position</span></div>
<div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;        <span class="comment">// in the index map.</span></div>
<div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;        <span class="keywordtype">bool</span> Inserted =</div>
<div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;            RefSCCIndices.try_emplace(NewRC, PostOrderRefSCCs.size()).second;</div>
<div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;        (void)Inserted;</div>
<div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;        <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Inserted &amp;&amp; <span class="stringliteral">&quot;Cannot already have this RefSCC in the index map!&quot;</span>);</div>
<div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;        PostOrderRefSCCs.push_back(NewRC);</div>
<div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;<span class="preprocessor">#ifdef EXPENSIVE_CHECKS</span></div>
<div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;        NewRC-&gt;verify();</div>
<div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;      });</div>
<div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;}</div>
<div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160; </div>
<div class="line"><a name="l01960"></a><span class="lineno"><a class="line" href="classllvm_1_1LazyCallGraph.html#a778d0494c2f8dec95d60160b1ce89a07"> 1960</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1LazyCallGraph.html#a778d0494c2f8dec95d60160b1ce89a07">LazyCallGraph::visitReferences</a>(<a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;Constant *&gt;</a> &amp;Worklist,</div>
<div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;                                    <a class="code" href="classllvm_1_1SmallPtrSetImpl.html">SmallPtrSetImpl&lt;Constant *&gt;</a> &amp;Visited,</div>
<div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;                                    <a class="code" href="classllvm_1_1function__ref.html">function_ref</a>&lt;<span class="keywordtype">void</span>(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;)&gt; Callback) {</div>
<div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;  <span class="keywordflow">while</span> (!Worklist.empty()) {</div>
<div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;    <a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = Worklist.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a0c8ffe664a36e30d49c84d0aded2fe08">pop_back_val</a>();</div>
<div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160; </div>
<div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> = dyn_cast&lt;Function&gt;(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)) {</div>
<div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;isDeclaration())</div>
<div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;        Callback(*<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;    }</div>
<div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160; </div>
<div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;    <span class="comment">// blockaddresses are weird and don&#39;t participate in the call graph anyway,</span></div>
<div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;    <span class="comment">// skip them.</span></div>
<div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;    <span class="keywordflow">if</span> (isa&lt;BlockAddress&gt;(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>))</div>
<div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160; </div>
<div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a> : <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;operand_values())</div>
<div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;      <span class="keywordflow">if</span> (Visited.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(cast&lt;Constant&gt;(<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>)).second)</div>
<div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;        Worklist.push_back(cast&lt;Constant&gt;(<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>));</div>
<div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;  }</div>
<div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;}</div>
<div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160; </div>
<div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;<a class="code" href="structllvm_1_1AnalysisKey.html">AnalysisKey</a> LazyCallGraphAnalysis::Key;</div>
<div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160; </div>
<div class="line"><a name="l01985"></a><span class="lineno"><a class="line" href="classllvm_1_1LazyCallGraphPrinterPass.html#a486decb7411d547a7065a82b0986f933"> 1985</a></span>&#160;<a class="code" href="classllvm_1_1LazyCallGraphPrinterPass.html#a486decb7411d547a7065a82b0986f933">LazyCallGraphPrinterPass::LazyCallGraphPrinterPass</a>(<a class="code" href="classllvm_1_1raw__ostream.html">raw_ostream</a> &amp;<a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a>) : <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a>(<a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a>) {}</div>
<div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160; </div>
<div class="line"><a name="l01987"></a><span class="lineno"><a class="line" href="LazyCallGraph_8cpp.html#a43bfa5ae5bc262dd53cb668fa64764dc"> 1987</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="LazyCallGraph_8cpp.html#a43bfa5ae5bc262dd53cb668fa64764dc">printNode</a>(<a class="code" href="classllvm_1_1raw__ostream.html">raw_ostream</a> &amp;<a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a>, <a class="code" href="classllvm_1_1LazyCallGraph_1_1Node.html">LazyCallGraph::Node</a> &amp;<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>) {</div>
<div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;  <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; <span class="stringliteral">&quot;  Edges in function: &quot;</span> &lt;&lt; <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>.getFunction().getName() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1LazyCallGraph_1_1Edge.html">LazyCallGraph::Edge</a> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> : <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>.populate())</div>
<div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;    <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; <span class="stringliteral">&quot;    &quot;</span> &lt;&lt; (<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>.isCall() ? <span class="stringliteral">&quot;call&quot;</span> : <span class="stringliteral">&quot;ref &quot;</span>) &lt;&lt; <span class="stringliteral">&quot; -&gt; &quot;</span></div>
<div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;       &lt;&lt; <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>.getFunction().getName() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160; </div>
<div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;  <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;}</div>
<div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160; </div>
<div class="line"><a name="l01996"></a><span class="lineno"><a class="line" href="LazyCallGraph_8cpp.html#ae48a57dbe703b0863fc96285ac60a9d6"> 1996</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="LazyCallGraph_8cpp.html#ae48a57dbe703b0863fc96285ac60a9d6">printSCC</a>(<a class="code" href="classllvm_1_1raw__ostream.html">raw_ostream</a> &amp;<a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a>, <a class="code" href="classllvm_1_1LazyCallGraph_1_1SCC.html">LazyCallGraph::SCC</a> &amp;<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>) {</div>
<div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;  <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; <span class="stringliteral">&quot;    SCC with &quot;</span> &lt;&lt; <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.size() &lt;&lt; <span class="stringliteral">&quot; functions:\n&quot;</span>;</div>
<div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160; </div>
<div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1LazyCallGraph_1_1Node.html">LazyCallGraph::Node</a> &amp;<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a> : <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)</div>
<div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;    <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; <span class="stringliteral">&quot;      &quot;</span> &lt;&lt; <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>.getFunction().getName() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;}</div>
<div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160; </div>
<div class="line"><a name="l02003"></a><span class="lineno"><a class="line" href="LazyCallGraph_8cpp.html#a5f3deff80749a0e7a3e4020593dc448f"> 2003</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="LazyCallGraph_8cpp.html#a5f3deff80749a0e7a3e4020593dc448f">printRefSCC</a>(<a class="code" href="classllvm_1_1raw__ostream.html">raw_ostream</a> &amp;<a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a>, <a class="code" href="classllvm_1_1LazyCallGraph_1_1RefSCC.html">LazyCallGraph::RefSCC</a> &amp;<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>) {</div>
<div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;  <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; <span class="stringliteral">&quot;  RefSCC with &quot;</span> &lt;&lt; <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.size() &lt;&lt; <span class="stringliteral">&quot; call SCCs:\n&quot;</span>;</div>
<div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160; </div>
<div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1LazyCallGraph_1_1SCC.html">LazyCallGraph::SCC</a> &amp;InnerC : <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)</div>
<div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;    <a class="code" href="LazyCallGraph_8cpp.html#ae48a57dbe703b0863fc96285ac60a9d6">printSCC</a>(<a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a>, InnerC);</div>
<div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160; </div>
<div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;  <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;}</div>
<div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160; </div>
<div class="line"><a name="l02012"></a><span class="lineno"><a class="line" href="classllvm_1_1LazyCallGraphPrinterPass.html#a2860c75599e4f96204b58e3c3be96dfe"> 2012</a></span>&#160;<a class="code" href="classllvm_1_1PreservedAnalyses.html">PreservedAnalyses</a> <a class="code" href="classllvm_1_1LazyCallGraphPrinterPass.html#a2860c75599e4f96204b58e3c3be96dfe">LazyCallGraphPrinterPass::run</a>(<a class="code" href="classllvm_1_1Module.html">Module</a> &amp;M,</div>
<div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;                                                <a class="code" href="classllvm_1_1AnalysisManager.html">ModuleAnalysisManager</a> &amp;AM) {</div>
<div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160;  <a class="code" href="classllvm_1_1LazyCallGraph.html">LazyCallGraph</a> &amp;<a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a> = AM.<a class="code" href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">getResult</a>&lt;<a class="code" href="classllvm_1_1LazyCallGraphAnalysis.html">LazyCallGraphAnalysis</a>&gt;(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>);</div>
<div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160; </div>
<div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160;  OS &lt;&lt; <span class="stringliteral">&quot;Printing the call graph for module: &quot;</span> &lt;&lt; <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getModuleIdentifier()</div>
<div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160;     &lt;&lt; <span class="stringliteral">&quot;\n\n&quot;</span>;</div>
<div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160; </div>
<div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> : <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>)</div>
<div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;    <a class="code" href="LazyCallGraph_8cpp.html#a43bfa5ae5bc262dd53cb668fa64764dc">printNode</a>(OS, <a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>.get(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>));</div>
<div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160; </div>
<div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160;  <a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>.buildRefSCCs();</div>
<div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1LazyCallGraph_1_1RefSCC.html">LazyCallGraph::RefSCC</a> &amp;<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> : <a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>.postorder_ref_sccs())</div>
<div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;    <a class="code" href="LazyCallGraph_8cpp.html#a5f3deff80749a0e7a3e4020593dc448f">printRefSCC</a>(OS, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div>
<div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160; </div>
<div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1PreservedAnalyses.html#a1258a1ff55557c27684010ebd7283712">PreservedAnalyses::all</a>();</div>
<div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;}</div>
<div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160; </div>
<div class="line"><a name="l02029"></a><span class="lineno"><a class="line" href="classllvm_1_1LazyCallGraphDOTPrinterPass.html#a0cfd924886ac8a5aab3ba8e62cde3e17"> 2029</a></span>&#160;<a class="code" href="classllvm_1_1LazyCallGraphDOTPrinterPass.html#a0cfd924886ac8a5aab3ba8e62cde3e17">LazyCallGraphDOTPrinterPass::LazyCallGraphDOTPrinterPass</a>(<a class="code" href="classllvm_1_1raw__ostream.html">raw_ostream</a> &amp;<a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a>)</div>
<div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160;    : <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a>(<a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a>) {}</div>
<div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160; </div>
<div class="line"><a name="l02032"></a><span class="lineno"><a class="line" href="LazyCallGraph_8cpp.html#aa23cb08728e5bb13e2bf43eb614c3efa"> 2032</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="LazyCallGraph_8cpp.html#aa23cb08728e5bb13e2bf43eb614c3efa">printNodeDOT</a>(<a class="code" href="classllvm_1_1raw__ostream.html">raw_ostream</a> &amp;<a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a>, <a class="code" href="classllvm_1_1LazyCallGraph_1_1Node.html">LazyCallGraph::Node</a> &amp;<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>) {</div>
<div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;  std::string Name =</div>
<div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160;      <span class="stringliteral">&quot;\&quot;&quot;</span> + <a class="code" href="namespacellvm_1_1DOT.html#a4cab6453a8243573f35f162cd94f33ba">DOT::EscapeString</a>(std::string(<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>.getFunction().getName())) + <span class="stringliteral">&quot;\&quot;&quot;</span>;</div>
<div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160; </div>
<div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1LazyCallGraph_1_1Edge.html">LazyCallGraph::Edge</a> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> : <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>.populate()) {</div>
<div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160;    <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; <span class="stringliteral">&quot;  &quot;</span> &lt;&lt; Name &lt;&lt; <span class="stringliteral">&quot; -&gt; \&quot;&quot;</span></div>
<div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160;       &lt;&lt; <a class="code" href="namespacellvm_1_1DOT.html#a4cab6453a8243573f35f162cd94f33ba">DOT::EscapeString</a>(std::string(<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>.getFunction().getName())) &lt;&lt; <span class="stringliteral">&quot;\&quot;&quot;</span>;</div>
<div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>.isCall()) <span class="comment">// It is a ref edge.</span></div>
<div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;      <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; <span class="stringliteral">&quot; [style=dashed,label=\&quot;ref\&quot;]&quot;</span>;</div>
<div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160;    <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; <span class="stringliteral">&quot;;\n&quot;</span>;</div>
<div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;  }</div>
<div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160; </div>
<div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;  <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;}</div>
<div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160; </div>
<div class="line"><a name="l02047"></a><span class="lineno"><a class="line" href="classllvm_1_1LazyCallGraphDOTPrinterPass.html#a172985546be95f992c665ac5d82e4a08"> 2047</a></span>&#160;<a class="code" href="classllvm_1_1PreservedAnalyses.html">PreservedAnalyses</a> <a class="code" href="classllvm_1_1LazyCallGraphDOTPrinterPass.html#a172985546be95f992c665ac5d82e4a08">LazyCallGraphDOTPrinterPass::run</a>(<a class="code" href="classllvm_1_1Module.html">Module</a> &amp;M,</div>
<div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;                                                   <a class="code" href="classllvm_1_1AnalysisManager.html">ModuleAnalysisManager</a> &amp;AM) {</div>
<div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;  <a class="code" href="classllvm_1_1LazyCallGraph.html">LazyCallGraph</a> &amp;<a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a> = AM.<a class="code" href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">getResult</a>&lt;<a class="code" href="classllvm_1_1LazyCallGraphAnalysis.html">LazyCallGraphAnalysis</a>&gt;(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>);</div>
<div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160; </div>
<div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;  OS &lt;&lt; <span class="stringliteral">&quot;digraph \&quot;&quot;</span> &lt;&lt; <a class="code" href="namespacellvm_1_1DOT.html#a4cab6453a8243573f35f162cd94f33ba">DOT::EscapeString</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getModuleIdentifier()) &lt;&lt; <span class="stringliteral">&quot;\&quot; {\n&quot;</span>;</div>
<div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160; </div>
<div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> : <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>)</div>
<div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;    <a class="code" href="LazyCallGraph_8cpp.html#aa23cb08728e5bb13e2bf43eb614c3efa">printNodeDOT</a>(OS, <a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>.get(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>));</div>
<div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160; </div>
<div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;  OS &lt;&lt; <span class="stringliteral">&quot;}\n&quot;</span>;</div>
<div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160; </div>
<div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1PreservedAnalyses.html#a1258a1ff55557c27684010ebd7283712">PreservedAnalyses::all</a>();</div>
<div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160;}</div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="anamespacellvm_1_1Check_html_a067ee17412e800f03802fa9517685732a3450a9712780ac26b071f9da4288a396"><div class="ttname"><a href="namespacellvm_1_1Check.html#a067ee17412e800f03802fa9517685732a3450a9712780ac26b071f9da4288a396">llvm::Check::Size</a></div><div class="ttdeci">@ Size</div><div class="ttdef"><b>Definition:</b> <a href="FileCheck_8h_source.html#l00077">FileCheck.h:77</a></div></div>
<div class="ttc" id="aclassllvm_1_1PreservedAnalyses_html"><div class="ttname"><a href="classllvm_1_1PreservedAnalyses.html">llvm::PreservedAnalyses</a></div><div class="ttdoc">A set of analyses that are preserved following a run of a transformation pass.</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00152">PassManager.h:152</a></div></div>
<div class="ttc" id="aclassllvm_1_1LazyCallGraph_1_1SCC_html_a542a7d70121296c36071303e26b68b7a"><div class="ttname"><a href="classllvm_1_1LazyCallGraph_1_1SCC.html#a542a7d70121296c36071303e26b68b7a">llvm::LazyCallGraph::SCC::isParentOf</a></div><div class="ttdeci">bool isParentOf(const SCC &amp;C) const</div><div class="ttdoc">Test if this SCC is a parent of C.</div><div class="ttdef"><b>Definition:</b> <a href="LazyCallGraph_8cpp_source.html#l00276">LazyCallGraph.cpp:276</a></div></div>
<div class="ttc" id="aProvenanceAnalysisEvaluator_8cpp_html_a2ee79648e8bce3ddbb26358ff10e3e82"><div class="ttname"><a href="ProvenanceAnalysisEvaluator_8cpp.html#a2ee79648e8bce3ddbb26358ff10e3e82">getName</a></div><div class="ttdeci">static StringRef getName(Value *V)</div><div class="ttdef"><b>Definition:</b> <a href="ProvenanceAnalysisEvaluator_8cpp_source.html#l00020">ProvenanceAnalysisEvaluator.cpp:20</a></div></div>
<div class="ttc" id="aclassllvm_1_1LazyCallGraphPrinterPass_html_a486decb7411d547a7065a82b0986f933"><div class="ttname"><a href="classllvm_1_1LazyCallGraphPrinterPass.html#a486decb7411d547a7065a82b0986f933">llvm::LazyCallGraphPrinterPass::LazyCallGraphPrinterPass</a></div><div class="ttdeci">LazyCallGraphPrinterPass(raw_ostream &amp;OS)</div><div class="ttdef"><b>Definition:</b> <a href="LazyCallGraph_8cpp_source.html#l01985">LazyCallGraph.cpp:1985</a></div></div>
<div class="ttc" id="aCompiler_8h_html_aa863693eef567397d9c292da5bf22d34"><div class="ttname"><a href="Compiler_8h.html#aa863693eef567397d9c292da5bf22d34">LLVM_DUMP_METHOD</a></div><div class="ttdeci">#define LLVM_DUMP_METHOD</div><div class="ttdoc">Mark debug helper function definitions like dump() that should not be stripped from debug builds.</div><div class="ttdef"><b>Definition:</b> <a href="Compiler_8h_source.html#l00492">Compiler.h:492</a></div></div>
<div class="ttc" id="anamespacellvm_html"><div class="ttname"><a href="namespacellvm.html">llvm</a></div><div class="ttdoc">This is an optimization pass for GlobalISel generic memory operations.</div><div class="ttdef"><b>Definition:</b> <a href="AddressRanges_8h_source.html#l00018">AddressRanges.h:18</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html_a563ffc2ff61c499b3be2e00100cb72fa"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#a563ffc2ff61c499b3be2e00100cb72fa">llvm::SmallVectorImpl::erase</a></div><div class="ttdeci">iterator erase(const_iterator CI)</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00741">SmallVector.h:741</a></div></div>
<div class="ttc" id="aclassllvm_1_1LazyCallGraph_html_a72787ab6acfbe504a11ca1d927513356"><div class="ttname"><a href="classllvm_1_1LazyCallGraph.html#a72787ab6acfbe504a11ca1d927513356">llvm::LazyCallGraph::buildRefSCCs</a></div><div class="ttdeci">void buildRefSCCs()</div><div class="ttdef"><b>Definition:</b> <a href="LazyCallGraph_8cpp_source.html#l01922">LazyCallGraph.cpp:1922</a></div></div>
<div class="ttc" id="alib_2Target_2X86_2README_8txt_html_ac88fe1d3a61b056a4f64fbbb156a62ff"><div class="ttname"><a href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a></div><div class="ttdeci">We currently emits eax Perhaps this is what we really should generate is Is imull three or four cycles eax eax The current instruction priority is based on pattern complexity The former is more complex because it folds a load so the latter will not be emitted Perhaps we should use AddedComplexity to give LEA32r a higher priority We should always try to match LEA first since the LEA matching code does some estimate to determine whether the match is profitable if we care more about code then imull is better It s two bytes shorter than movl leal On a Pentium M</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2X86_2README_8txt_source.html#l00252">README.txt:252</a></div></div>
<div class="ttc" id="anamespacellvm_html_ad1a91b49e0c092818a0b82f6cc130a1b"><div class="ttname"><a href="namespacellvm.html#ad1a91b49e0c092818a0b82f6cc130a1b">llvm::make_range</a></div><div class="ttdeci">iterator_range&lt; T &gt; make_range(T x, T y)</div><div class="ttdoc">Convenience function for iterating over sub-ranges.</div><div class="ttdef"><b>Definition:</b> <a href="iterator__range_8h_source.html#l00053">iterator_range.h:53</a></div></div>
<div class="ttc" id="anamespacellvm_html_a02981de53fb6ffd384d39addc4d25f37"><div class="ttname"><a href="namespacellvm.html#a02981de53fb6ffd384d39addc4d25f37">llvm::drop_begin</a></div><div class="ttdeci">auto drop_begin(T &amp;&amp;RangeOrContainer, size_t N=1)</div><div class="ttdoc">Return a range covering RangeOrContainer with the first N elements excluded.</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l00386">STLExtras.h:386</a></div></div>
<div class="ttc" id="aclassllvm_1_1LazyCallGraph_html_a58d534b072f7d0fa5f54ff569bb745ec"><div class="ttname"><a href="classllvm_1_1LazyCallGraph.html#a58d534b072f7d0fa5f54ff569bb745ec">llvm::LazyCallGraph::LazyCallGraph</a></div><div class="ttdeci">LazyCallGraph(Module &amp;M, function_ref&lt; TargetLibraryInfo &amp;(Function &amp;)&gt; GetTLI)</div><div class="ttdoc">Construct a graph for the given module.</div><div class="ttdef"><b>Definition:</b> <a href="LazyCallGraph_8cpp_source.html#l00154">LazyCallGraph.cpp:154</a></div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisManager_html_ab9d3d5412c20747fd0110a046604f09a"><div class="ttname"><a href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">llvm::AnalysisManager::getResult</a></div><div class="ttdeci">PassT::Result &amp; getResult(IRUnitT &amp;IR, ExtraArgTs... ExtraArgs)</div><div class="ttdoc">Get the result of an analysis pass for a given IR unit.</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00774">PassManager.h:774</a></div></div>
<div class="ttc" id="aInstIterator_8h_html"><div class="ttname"><a href="InstIterator_8h.html">InstIterator.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html"><div class="ttname"><a href="classllvm_1_1Function.html">llvm::Function</a></div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00059">Function.h:59</a></div></div>
<div class="ttc" id="aclassllvm_1_1LazyCallGraph_html_a5733cfe65849ae5b7945ee53328ffad9"><div class="ttname"><a href="classllvm_1_1LazyCallGraph.html#a5733cfe65849ae5b7945ee53328ffad9">llvm::LazyCallGraph::insertEdge</a></div><div class="ttdeci">void insertEdge(Node &amp;SourceN, Node &amp;TargetN, Edge::Kind EK)</div><div class="ttdoc">Update the call graph after inserting a new edge.</div><div class="ttdef"><b>Definition:</b> <a href="LazyCallGraph_8cpp_source.html#l01478">LazyCallGraph.cpp:1478</a></div></div>
<div class="ttc" id="aclassllvm_1_1LazyCallGraph_1_1RefSCC_html_ac62cb27d2f0946c9febb1e1d1e377f55"><div class="ttname"><a href="classllvm_1_1LazyCallGraph_1_1RefSCC.html#ac62cb27d2f0946c9febb1e1d1e377f55">llvm::LazyCallGraph::RefSCC::size</a></div><div class="ttdeci">ssize_t size() const</div><div class="ttdef"><b>Definition:</b> <a href="LazyCallGraph_8h_source.html#l00615">LazyCallGraph.h:615</a></div></div>
<div class="ttc" id="aLazyCallGraph_8cpp_html_aec802e48dd5ef69029e285eddfc4158d"><div class="ttname"><a href="LazyCallGraph_8cpp.html#aec802e48dd5ef69029e285eddfc4158d">addEdge</a></div><div class="ttdeci">static void addEdge(SmallVectorImpl&lt; LazyCallGraph::Edge &gt; &amp;Edges, DenseMap&lt; LazyCallGraph::Node *, int &gt; &amp;EdgeIndexMap, LazyCallGraph::Node &amp;N, LazyCallGraph::Edge::Kind EK)</div><div class="ttdef"><b>Definition:</b> <a href="LazyCallGraph_8cpp_source.html#l00060">LazyCallGraph.cpp:60</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVector_html"><div class="ttname"><a href="classllvm_1_1SmallVector.html">llvm::SmallVector</a></div><div class="ttdoc">This is a 'vector' (really, a variable-sized array), optimized for the case when the array is small.</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l01199">SmallVector.h:1199</a></div></div>
<div class="ttc" id="anamespacellvm_1_1DOT_html_a4cab6453a8243573f35f162cd94f33ba"><div class="ttname"><a href="namespacellvm_1_1DOT.html#a4cab6453a8243573f35f162cd94f33ba">llvm::DOT::EscapeString</a></div><div class="ttdeci">std::string EscapeString(const std::string &amp;Label)</div><div class="ttdef"><b>Definition:</b> <a href="GraphWriter_8cpp_source.html#l00055">GraphWriter.cpp:55</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalVariable_html"><div class="ttname"><a href="classllvm_1_1GlobalVariable.html">llvm::GlobalVariable</a></div><div class="ttdef"><b>Definition:</b> <a href="GlobalVariable_8h_source.html#l00039">GlobalVariable.h:39</a></div></div>
<div class="ttc" id="aclassllvm_1_1AllAnalysesOn_html"><div class="ttname"><a href="classllvm_1_1AllAnalysesOn.html">llvm::AllAnalysesOn</a></div><div class="ttdoc">This templated class represents &quot;all analyses that operate over &lt;a particular IR unit&gt;&quot; (e....</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00090">PassManager.h:90</a></div></div>
<div class="ttc" id="aclassllvm_1_1LazyCallGraph_html_a7b57497fa4748e1937b510b217d179d6"><div class="ttname"><a href="classllvm_1_1LazyCallGraph.html#a7b57497fa4748e1937b510b217d179d6">llvm::LazyCallGraph::removeDeadFunction</a></div><div class="ttdeci">void removeDeadFunction(Function &amp;F)</div><div class="ttdoc">Remove a dead function from the call graph (typically to delete it).</div><div class="ttdef"><b>Definition:</b> <a href="LazyCallGraph_8cpp_source.html#l01494">LazyCallGraph.cpp:1494</a></div></div>
<div class="ttc" id="aclassllvm_1_1LazyCallGraphDOTPrinterPass_html_a172985546be95f992c665ac5d82e4a08"><div class="ttname"><a href="classllvm_1_1LazyCallGraphDOTPrinterPass.html#a172985546be95f992c665ac5d82e4a08">llvm::LazyCallGraphDOTPrinterPass::run</a></div><div class="ttdeci">PreservedAnalyses run(Module &amp;M, ModuleAnalysisManager &amp;AM)</div><div class="ttdef"><b>Definition:</b> <a href="LazyCallGraph_8cpp_source.html#l02047">LazyCallGraph.cpp:2047</a></div></div>
<div class="ttc" id="aModule_8h_html"><div class="ttname"><a href="Module_8h.html">Module.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1LazyCallGraph_html_af92b067e8f6295042dc6544e1df18825"><div class="ttname"><a href="classllvm_1_1LazyCallGraph.html#af92b067e8f6295042dc6544e1df18825">llvm::LazyCallGraph::lookup</a></div><div class="ttdeci">Node * lookup(const Function &amp;F) const</div><div class="ttdoc">Lookup a function in the graph which has already been scanned and added.</div><div class="ttdef"><b>Definition:</b> <a href="LazyCallGraph_8h_source.html#l00973">LazyCallGraph.h:973</a></div></div>
<div class="ttc" id="aLazyCallGraph_8cpp_html_ad7483d245bba8b6658b4dbd429f14313"><div class="ttname"><a href="LazyCallGraph_8cpp.html#ad7483d245bba8b6658b4dbd429f14313">getEdgeKind</a></div><div class="ttdeci">static LazyCallGraph::Edge::Kind getEdgeKind(Function &amp;OriginalFunction, Function &amp;NewFunction)</div><div class="ttdef"><b>Definition:</b> <a href="LazyCallGraph_8cpp_source.html#l01569">LazyCallGraph.cpp:1569</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSet_html"><div class="ttname"><a href="classllvm_1_1SmallPtrSet.html">llvm::SmallPtrSet</a></div><div class="ttdoc">SmallPtrSet - This class implements a set which is optimized for holding SmallSize or less elements.</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00450">SmallPtrSet.h:450</a></div></div>
<div class="ttc" id="aSTLExtras_8h_html"><div class="ttname"><a href="STLExtras_8h.html">STLExtras.h</a></div></div>
<div class="ttc" id="aSequence_8h_html"><div class="ttname"><a href="Sequence_8h.html">Sequence.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1LazyCallGraph_1_1EdgeSequence_html_a64d53c120b022f979edf7718f33d77aa"><div class="ttname"><a href="classllvm_1_1LazyCallGraph_1_1EdgeSequence.html#a64d53c120b022f979edf7718f33d77aa">llvm::LazyCallGraph::EdgeSequence::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="LazyCallGraph_8h_source.html#l00254">LazyCallGraph.h:254</a></div></div>
<div class="ttc" id="aclassllvm_1_1ArrayRef_html_ac835b8735b1b2faec0efdca236e37d94"><div class="ttname"><a href="classllvm_1_1ArrayRef.html#ac835b8735b1b2faec0efdca236e37d94">llvm::ArrayRef::empty</a></div><div class="ttdeci">bool empty() const</div><div class="ttdoc">empty - Check if the array is empty.</div><div class="ttdef"><b>Definition:</b> <a href="ArrayRef_8h_source.html#l00158">ArrayRef.h:158</a></div></div>
<div class="ttc" id="aDebug_8h_html_a08efc68d15935eb8889400a46c3749ba"><div class="ttname"><a href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a></div><div class="ttdeci">#define LLVM_DEBUG(X)</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8h_source.html#l00101">Debug.h:101</a></div></div>
<div class="ttc" id="aMD5_8cpp_html_a96d73bbd7af15cb1fc38c3f4a3bd82e9"><div class="ttname"><a href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a></div><div class="ttdeci">#define F(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00055">MD5.cpp:55</a></div></div>
<div class="ttc" id="aclassllvm_1_1LazyCallGraph_html_ae6c105e6215a1507fd7bc89f83e3c62f"><div class="ttname"><a href="classllvm_1_1LazyCallGraph.html#ae6c105e6215a1507fd7bc89f83e3c62f">llvm::LazyCallGraph::invalidate</a></div><div class="ttdeci">bool invalidate(Module &amp;, const PreservedAnalyses &amp;PA, ModuleAnalysisManager::Invalidator &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="LazyCallGraph_8cpp_source.html#l00214">LazyCallGraph.cpp:214</a></div></div>
<div class="ttc" id="aclassllvm_1_1LazyCallGraph_1_1RefSCC_html_a35a8d25c6df3f1d3bc5faba32de1dd55"><div class="ttname"><a href="classllvm_1_1LazyCallGraph_1_1RefSCC.html#a35a8d25c6df3f1d3bc5faba32de1dd55">llvm::LazyCallGraph::RefSCC::isAncestorOf</a></div><div class="ttdeci">bool isAncestorOf(const RefSCC &amp;RC) const</div><div class="ttdoc">Test if this RefSCC is an ancestor of RC.</div><div class="ttdef"><b>Definition:</b> <a href="LazyCallGraph_8cpp_source.html#l00414">LazyCallGraph.cpp:414</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html"><div class="ttname"><a href="classllvm_1_1BasicBlock.html">llvm::BasicBlock</a></div><div class="ttdoc">LLVM Basic Block Representation.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00055">BasicBlock.h:55</a></div></div>
<div class="ttc" id="anamespacellvm_html_a7c46c742c31be54870e2038048e6b391"><div class="ttname"><a href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">llvm::dbgs</a></div><div class="ttdeci">raw_ostream &amp; dbgs()</div><div class="ttdoc">dbgs() - This returns a reference to a raw_ostream for debugging messages.</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8cpp_source.html#l00163">Debug.cpp:163</a></div></div>
<div class="ttc" id="aIR_2Instruction_8h_html"><div class="ttname"><a href="IR_2Instruction_8h.html">Instruction.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_a0d10fe510ced2849a8074fe81e5d04ce"><div class="ttname"><a href="namespacellvm.html#a0d10fe510ced2849a8074fe81e5d04ce">llvm::all_of</a></div><div class="ttdeci">bool all_of(R &amp;&amp;range, UnaryPredicate P)</div><div class="ttdoc">Provide wrappers to std::all_of which take ranges instead of having to pass begin/end explicitly.</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l01735">STLExtras.h:1735</a></div></div>
<div class="ttc" id="aclassllvm_1_1LazyCallGraph_1_1RefSCC_html_aaf3ba7d78f09755223609e4978bebef7"><div class="ttname"><a href="classllvm_1_1LazyCallGraph_1_1RefSCC.html#aaf3ba7d78f09755223609e4978bebef7">llvm::LazyCallGraph::RefSCC::insertTrivialCallEdge</a></div><div class="ttdeci">void insertTrivialCallEdge(Node &amp;SourceN, Node &amp;TargetN)</div><div class="ttdoc">A convenience wrapper around the above to handle trivial cases of inserting a new call edge.</div><div class="ttdef"><b>Definition:</b> <a href="LazyCallGraph_8cpp_source.html#l01389">LazyCallGraph.cpp:1389</a></div></div>
<div class="ttc" id="aclassllvm_1_1LazyCallGraph_1_1SCC_html"><div class="ttname"><a href="classllvm_1_1LazyCallGraph_1_1SCC.html">llvm::LazyCallGraph::SCC</a></div><div class="ttdoc">An SCC of the call graph.</div><div class="ttdef"><b>Definition:</b> <a href="LazyCallGraph_8h_source.html#l00419">LazyCallGraph.h:419</a></div></div>
<div class="ttc" id="aclassllvm_1_1LazyCallGraph_html_ae201589cad3a446f3a6284f02b0df850"><div class="ttname"><a href="classllvm_1_1LazyCallGraph.html#ae201589cad3a446f3a6284f02b0df850">llvm::LazyCallGraph::operator=</a></div><div class="ttdeci">LazyCallGraph &amp; operator=(LazyCallGraph &amp;&amp;RHS)</div><div class="ttdef"><b>Definition:</b> <a href="LazyCallGraph_8cpp_source.html#l00222">LazyCallGraph.cpp:222</a></div></div>
<div class="ttc" id="aLazyCallGraph_8cpp_html_a43bfa5ae5bc262dd53cb668fa64764dc"><div class="ttname"><a href="LazyCallGraph_8cpp.html#a43bfa5ae5bc262dd53cb668fa64764dc">printNode</a></div><div class="ttdeci">static void printNode(raw_ostream &amp;OS, LazyCallGraph::Node &amp;N)</div><div class="ttdef"><b>Definition:</b> <a href="LazyCallGraph_8cpp_source.html#l01987">LazyCallGraph.cpp:1987</a></div></div>
<div class="ttc" id="aConstants_8h_html"><div class="ttname"><a href="Constants_8h.html">Constants.h</a></div></div>
<div class="ttc" id="aBuiltinGCs_8cpp_html_a6742d2e0a668baf1196ec69e158d5f15"><div class="ttname"><a href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a></div><div class="ttdeci">static GCRegistry::Add&lt; CoreCLRGC &gt; E(&quot;coreclr&quot;, &quot;CoreCLR-compatible GC&quot;)</div></div>
<div class="ttc" id="aLazyCallGraph_8cpp_html_a5f3deff80749a0e7a3e4020593dc448f"><div class="ttname"><a href="LazyCallGraph_8cpp.html#a5f3deff80749a0e7a3e4020593dc448f">printRefSCC</a></div><div class="ttdeci">static void printRefSCC(raw_ostream &amp;OS, LazyCallGraph::RefSCC &amp;C)</div><div class="ttdef"><b>Definition:</b> <a href="LazyCallGraph_8cpp_source.html#l02003">LazyCallGraph.cpp:2003</a></div></div>
<div class="ttc" id="anamespacellvm_html_a26a5e408fc09c5664d2bbb2d7fae154e"><div class="ttname"><a href="namespacellvm.html#a26a5e408fc09c5664d2bbb2d7fae154e">llvm::LibFunc</a></div><div class="ttdeci">LibFunc</div><div class="ttdef"><b>Definition:</b> <a href="TargetLibraryInfo_8h_source.html#l00036">TargetLibraryInfo.h:36</a></div></div>
<div class="ttc" id="aREADME__ALTIVEC_8txt_html_a9aacd9146afe44bf656cd664e2a88c8c"><div class="ttname"><a href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a></div><div class="ttdeci">(vector float) vec_cmpeq(*A, *B) C</div><div class="ttdef"><b>Definition:</b> <a href="README__ALTIVEC_8txt_source.html#l00086">README_ALTIVEC.txt:86</a></div></div>
<div class="ttc" id="aclassllvm_1_1LazyCallGraph_1_1EdgeSequence_html_a4d46ac540030f05b75b6e525b5cbc7f8"><div class="ttname"><a href="classllvm_1_1LazyCallGraph_1_1EdgeSequence.html#a4d46ac540030f05b75b6e525b5cbc7f8">llvm::LazyCallGraph::EdgeSequence::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="LazyCallGraph_8h_source.html#l00255">LazyCallGraph.h:255</a></div></div>
<div class="ttc" id="aclassllvm_1_1LazyCallGraph_1_1RefSCC_html_af952e1ffaf5cd4bd83b63cf7fb4cb068"><div class="ttname"><a href="classllvm_1_1LazyCallGraph_1_1RefSCC.html#af952e1ffaf5cd4bd83b63cf7fb4cb068">llvm::LazyCallGraph::RefSCC::isParentOf</a></div><div class="ttdeci">bool isParentOf(const RefSCC &amp;RC) const</div><div class="ttdoc">Test if this RefSCC is a parent of RC.</div><div class="ttdef"><b>Definition:</b> <a href="LazyCallGraph_8cpp_source.html#l00400">LazyCallGraph.cpp:400</a></div></div>
<div class="ttc" id="aLazyCallGraph_8cpp_html_a0f2c7d407694a68c22a482cae3b17606"><div class="ttname"><a href="LazyCallGraph_8cpp.html#a0f2c7d407694a68c22a482cae3b17606">updatePostorderSequenceForEdgeInsertion</a></div><div class="ttdeci">static iterator_range&lt; typename PostorderSequenceT::iterator &gt; updatePostorderSequenceForEdgeInsertion(SCCT &amp;SourceSCC, SCCT &amp;TargetSCC, PostorderSequenceT &amp;SCCs, SCCIndexMapT &amp;SCCIndices, ComputeSourceConnectedSetCallableT ComputeSourceConnectedSet, ComputeTargetConnectedSetCallableT ComputeTargetConnectedSet)</div><div class="ttdoc">Generic helper that updates a postorder sequence of SCCs for a potentially cycle-introducing edge ins...</div><div class="ttdef"><b>Definition:</b> <a href="LazyCallGraph_8cpp_source.html#l00508">LazyCallGraph.cpp:508</a></div></div>
<div class="ttc" id="aclassllvm_1_1LazyCallGraph_1_1RefSCC_html_a393b4565f554b9d8382c8f610b7f2ce7"><div class="ttname"><a href="classllvm_1_1LazyCallGraph_1_1RefSCC.html#a393b4565f554b9d8382c8f610b7f2ce7">llvm::LazyCallGraph::RefSCC::insertTrivialRefEdge</a></div><div class="ttdeci">void insertTrivialRefEdge(Node &amp;SourceN, Node &amp;TargetN)</div><div class="ttdoc">A convenience wrapper around the above to handle trivial cases of inserting a new ref edge.</div><div class="ttdef"><b>Definition:</b> <a href="LazyCallGraph_8cpp_source.html#l01418">LazyCallGraph.cpp:1418</a></div></div>
<div class="ttc" id="aTargetLibraryInfo_8h_html"><div class="ttname"><a href="TargetLibraryInfo_8h.html">TargetLibraryInfo.h</a></div></div>
<div class="ttc" id="anamespacellvm_1_1dwarf_html_a5d3c920b66ea797d6adb243862fdf47a"><div class="ttname"><a href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">llvm::dwarf::Index</a></div><div class="ttdeci">Index</div><div class="ttdef"><b>Definition:</b> <a href="Dwarf_8h_source.html#l00550">Dwarf.h:550</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetLibraryInfo_html_a97cfbbed8869e3582142012a071a9052"><div class="ttname"><a href="classllvm_1_1TargetLibraryInfo.html#a97cfbbed8869e3582142012a071a9052">llvm::TargetLibraryInfo::getLibFunc</a></div><div class="ttdeci">bool getLibFunc(StringRef funcName, LibFunc &amp;F) const</div><div class="ttdoc">Searches for a particular function name.</div><div class="ttdef"><b>Definition:</b> <a href="TargetLibraryInfo_8h_source.html#l00306">TargetLibraryInfo.h:306</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html"><div class="ttname"><a href="classllvm_1_1Instruction.html">llvm::Instruction</a></div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00041">Instruction.h:41</a></div></div>
<div class="ttc" id="aclassllvm_1_1LazyCallGraph_1_1RefSCC_html"><div class="ttname"><a href="classllvm_1_1LazyCallGraph_1_1RefSCC.html">llvm::LazyCallGraph::RefSCC</a></div><div class="ttdoc">A RefSCC of the call graph.</div><div class="ttdef"><b>Definition:</b> <a href="LazyCallGraph_8h_source.html#l00544">LazyCallGraph.h:544</a></div></div>
<div class="ttc" id="aclassllvm_1_1LazyCallGraph_1_1EdgeSequence_1_1iterator_html"><div class="ttname"><a href="classllvm_1_1LazyCallGraph_1_1EdgeSequence_1_1iterator.html">llvm::LazyCallGraph::EdgeSequence::iterator</a></div><div class="ttdoc">An iterator used for the edges to both entry nodes and child nodes.</div><div class="ttdef"><b>Definition:</b> <a href="LazyCallGraph_8h_source.html#l00192">LazyCallGraph.h:192</a></div></div>
<div class="ttc" id="aclassllvm_1_1raw__ostream_html"><div class="ttname"><a href="classllvm_1_1raw__ostream.html">llvm::raw_ostream</a></div><div class="ttdoc">This class implements an extremely fast bulk output stream that can only output to a stream.</div><div class="ttdef"><b>Definition:</b> <a href="raw__ostream_8h_source.html#l00052">raw_ostream.h:52</a></div></div>
<div class="ttc" id="aclassllvm_1_1LazyCallGraph_1_1EdgeSequence_html"><div class="ttname"><a href="classllvm_1_1LazyCallGraph_1_1EdgeSequence.html">llvm::LazyCallGraph::EdgeSequence</a></div><div class="ttdoc">The edge sequence object.</div><div class="ttdef"><b>Definition:</b> <a href="LazyCallGraph_8h_source.html#l00182">LazyCallGraph.h:182</a></div></div>
<div class="ttc" id="aSmallPtrSet_8h_html"><div class="ttname"><a href="SmallPtrSet_8h.html">SmallPtrSet.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1LazyCallGraph_html_a2aa26a48970b4c22a7d85cb0e7fff842"><div class="ttname"><a href="classllvm_1_1LazyCallGraph.html#a2aa26a48970b4c22a7d85cb0e7fff842">llvm::LazyCallGraph::lookupSCC</a></div><div class="ttdeci">SCC * lookupSCC(Node &amp;N) const</div><div class="ttdoc">Lookup a function's SCC in the graph.</div><div class="ttdef"><b>Definition:</b> <a href="LazyCallGraph_8h_source.html#l00979">LazyCallGraph.h:979</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html_a7efd1f0c1206d95e4fe01a9b49a57b82"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#a7efd1f0c1206d95e4fe01a9b49a57b82">llvm::SmallVectorImpl::append</a></div><div class="ttdeci">void append(ItTy in_start, ItTy in_end)</div><div class="ttdoc">Add the specified range to the end of the SmallVector.</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00687">SmallVector.h:687</a></div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisManager_1_1Invalidator_html"><div class="ttname"><a href="classllvm_1_1AnalysisManager_1_1Invalidator.html">llvm::AnalysisManager::Invalidator</a></div><div class="ttdoc">API to communicate dependencies between analyses during invalidation.</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00661">PassManager.h:661</a></div></div>
<div class="ttc" id="aLazyCallGraph_8h_html"><div class="ttname"><a href="LazyCallGraph_8h.html">LazyCallGraph.h</a></div></div>
<div class="ttc" id="anamespacellvm_1_1MCID_html_ab357441fcd1ea1f9b0d27c12700f6023a463baf545246fea9718664d933ffe66f"><div class="ttname"><a href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a463baf545246fea9718664d933ffe66f">llvm::MCID::Call</a></div><div class="ttdeci">@ Call</div><div class="ttdef"><b>Definition:</b> <a href="MCInstrDesc_8h_source.html#l00156">MCInstrDesc.h:156</a></div></div>
<div class="ttc" id="anamespacellvm_1_1lltok_html_af353621f14cb4b4b3af5ffaff84076b1"><div class="ttname"><a href="namespacellvm_1_1lltok.html#af353621f14cb4b4b3af5ffaff84076b1">llvm::lltok::Kind</a></div><div class="ttdeci">Kind</div><div class="ttdef"><b>Definition:</b> <a href="LLToken_8h_source.html#l00018">LLToken.h:18</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_a9d7de807ebdfe1819df3ff6cb0f16158"><div class="ttname"><a href="classllvm_1_1Value.html#a9d7de807ebdfe1819df3ff6cb0f16158">llvm::Value::use_empty</a></div><div class="ttdeci">bool use_empty() const</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00344">Value.h:344</a></div></div>
<div class="ttc" id="aclassllvm_1_1LazyCallGraph_1_1RefSCC_html_a743c2ac21f2f8a8c6af18e1e09f13229"><div class="ttname"><a href="classllvm_1_1LazyCallGraph_1_1RefSCC.html#a743c2ac21f2f8a8c6af18e1e09f13229">llvm::LazyCallGraph::RefSCC::insertOutgoingEdge</a></div><div class="ttdeci">void insertOutgoingEdge(Node &amp;SourceN, Node &amp;TargetN, Edge::Kind EK)</div><div class="ttdoc">Insert an edge whose parent is in this RefSCC and child is in some child RefSCC.</div><div class="ttdef"><b>Definition:</b> <a href="LazyCallGraph_8cpp_source.html#l00976">LazyCallGraph.cpp:976</a></div></div>
<div class="ttc" id="aclassllvm_1_1LazyCallGraph_html_a2e0002cac27faad0015b4fa7e5a3eb50"><div class="ttname"><a href="classllvm_1_1LazyCallGraph.html#a2e0002cac27faad0015b4fa7e5a3eb50">llvm::LazyCallGraph::get</a></div><div class="ttdeci">Node &amp; get(Function &amp;F)</div><div class="ttdoc">Get a graph node for a given function, scanning it to populate the graph data as necessary.</div><div class="ttdef"><b>Definition:</b> <a href="LazyCallGraph_8h_source.html#l00994">LazyCallGraph.h:994</a></div></div>
<div class="ttc" id="aclassllvm_1_1LazyCallGraph_1_1RefSCC_html_a2957918db7f91f405b11d92c1ebf3b0f"><div class="ttname"><a href="classllvm_1_1LazyCallGraph_1_1RefSCC.html#a2957918db7f91f405b11d92c1ebf3b0f">llvm::LazyCallGraph::RefSCC::switchInternalEdgeToCall</a></div><div class="ttdeci">bool switchInternalEdgeToCall(Node &amp;SourceN, Node &amp;TargetN, function_ref&lt; void(ArrayRef&lt; SCC * &gt; MergedSCCs)&gt; MergeCB={})</div><div class="ttdoc">Make an existing internal ref edge into a call edge.</div><div class="ttdef"><b>Definition:</b> <a href="LazyCallGraph_8cpp_source.html#l00576">LazyCallGraph.cpp:576</a></div></div>
<div class="ttc" id="aclassllvm_1_1function__ref_html"><div class="ttname"><a href="classllvm_1_1function__ref.html">llvm::function_ref</a></div><div class="ttdoc">An efficient, type-erasing, non-owning reference to a callable.</div><div class="ttdef"><b>Definition:</b> <a href="STLFunctionalExtras_8h_source.html#l00036">STLFunctionalExtras.h:36</a></div></div>
<div class="ttc" id="aRDFGraph_8cpp_html_af153ca0eadca8bc464492b7aba7feb00"><div class="ttname"><a href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a></div><div class="ttdeci">const DataFlowGraph &amp; G</div><div class="ttdef"><b>Definition:</b> <a href="RDFGraph_8cpp_source.html#l00200">RDFGraph.cpp:200</a></div></div>
<div class="ttc" id="aclassllvm_1_1LazyCallGraph_1_1RefSCC_html_a96fe0cb15ded58bd1824fa4e3daec680"><div class="ttname"><a href="classllvm_1_1LazyCallGraph_1_1RefSCC.html#a96fe0cb15ded58bd1824fa4e3daec680">llvm::LazyCallGraph::RefSCC::switchInternalEdgeToRef</a></div><div class="ttdeci">iterator_range&lt; iterator &gt; switchInternalEdgeToRef(Node &amp;SourceN, Node &amp;TargetN)</div><div class="ttdoc">Make an existing internal call edge within a single SCC into a ref edge.</div><div class="ttdef"><b>Definition:</b> <a href="LazyCallGraph_8cpp_source.html#l00742">LazyCallGraph.cpp:742</a></div></div>
<div class="ttc" id="anamespacellvm_html_a7e3e687ddfdcbacd404bcf17b917dd88"><div class="ttname"><a href="namespacellvm.html#a7e3e687ddfdcbacd404bcf17b917dd88">llvm::instructions</a></div><div class="ttdeci">inst_range instructions(Function *F)</div><div class="ttdef"><b>Definition:</b> <a href="InstIterator_8h_source.html#l00133">InstIterator.h:133</a></div></div>
<div class="ttc" id="aclassllvm_1_1Constant_html"><div class="ttname"><a href="classllvm_1_1Constant.html">llvm::Constant</a></div><div class="ttdoc">This is an important base class in LLVM.</div><div class="ttdef"><b>Definition:</b> <a href="Constant_8h_source.html#l00041">Constant.h:41</a></div></div>
<div class="ttc" id="aELFObjHandler_8cpp_html_aef61945034b9431b804748fc317c5548"><div class="ttname"><a href="ELFObjHandler_8cpp.html#aef61945034b9431b804748fc317c5548">Index</a></div><div class="ttdeci">uint32_t Index</div><div class="ttdef"><b>Definition:</b> <a href="ELFObjHandler_8cpp_source.html#l00083">ELFObjHandler.cpp:83</a></div></div>
<div class="ttc" id="aclassllvm_1_1LazyCallGraph_1_1RefSCC_html_a59f6c7fa7f420326cc1f7026e51b0668"><div class="ttname"><a href="classllvm_1_1LazyCallGraph_1_1RefSCC.html#a59f6c7fa7f420326cc1f7026e51b0668">llvm::LazyCallGraph::RefSCC::isDescendantOf</a></div><div class="ttdeci">bool isDescendantOf(const RefSCC &amp;RC) const</div><div class="ttdoc">Test if this RefSCC is a descendant of RC.</div><div class="ttdef"><b>Definition:</b> <a href="LazyCallGraph_8h_source.html#l00647">LazyCallGraph.h:647</a></div></div>
<div class="ttc" id="aclassllvm_1_1LazyCallGraph_html_a8d76834516af3608993c2add103b3a6f"><div class="ttname"><a href="classllvm_1_1LazyCallGraph.html#a8d76834516af3608993c2add103b3a6f">llvm::LazyCallGraph::addSplitFunction</a></div><div class="ttdeci">void addSplitFunction(Function &amp;OriginalFunction, Function &amp;NewFunction)</div><div class="ttdoc">Add a new function split/outlined from an existing function.</div><div class="ttdef"><b>Definition:</b> <a href="LazyCallGraph_8cpp_source.html#l01609">LazyCallGraph.cpp:1609</a></div></div>
<div class="ttc" id="aclassllvm_1_1LazyCallGraph_html_a64160af47173a1dc68ad4e1ea698b844"><div class="ttname"><a href="classllvm_1_1LazyCallGraph.html#a64160af47173a1dc68ad4e1ea698b844">llvm::LazyCallGraph::lookupRefSCC</a></div><div class="ttdeci">RefSCC * lookupRefSCC(Node &amp;N) const</div><div class="ttdoc">Lookup a function's RefSCC in the graph.</div><div class="ttdef"><b>Definition:</b> <a href="LazyCallGraph_8h_source.html#l00985">LazyCallGraph.h:985</a></div></div>
<div class="ttc" id="aclassllvm_1_1LazyCallGraph_1_1RefSCC_html_ab130250bcdaefbfd3c583cad7b120b62"><div class="ttname"><a href="classllvm_1_1LazyCallGraph_1_1RefSCC.html#ab130250bcdaefbfd3c583cad7b120b62">llvm::LazyCallGraph::RefSCC::removeOutgoingEdge</a></div><div class="ttdeci">void removeOutgoingEdge(Node &amp;SourceN, Node &amp;TargetN)</div><div class="ttdoc">Remove an edge whose source is in this RefSCC and target is not.</div><div class="ttdef"><b>Definition:</b> <a href="LazyCallGraph_8cpp_source.html#l01137">LazyCallGraph.cpp:1137</a></div></div>
<div class="ttc" id="alib_2Target_2ARM_2README_8txt_html_ad3a99906764c35b2694ae90fa57744a5"><div class="ttname"><a href="lib_2Target_2ARM_2README_8txt.html#ad3a99906764c35b2694ae90fa57744a5">move</a></div><div class="ttdeci">compiles ldr LCPI1_0 ldr ldr mov lsr tst moveq r1 ldr LCPI1_1 and r0 bx lr It would be better to do something like to fold the shift into the conditional move</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2ARM_2README_8txt_source.html#l00546">README.txt:546</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseMap_html"><div class="ttname"><a href="classllvm_1_1DenseMap.html">llvm::DenseMap</a></div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00714">DenseMap.h:714</a></div></div>
<div class="ttc" id="astructllvm_1_1AnalysisKey_html"><div class="ttname"><a href="structllvm_1_1AnalysisKey.html">llvm::AnalysisKey</a></div><div class="ttdoc">A special type used by analysis passes to provide an address that identifies that particular analysis...</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00069">PassManager.h:69</a></div></div>
<div class="ttc" id="aMD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00058">MD5.cpp:58</a></div></div>
<div class="ttc" id="aclassllvm_1_1LazyCallGraph_1_1RefSCC_html_a01b1581633bb40f86d6dc62a1c1a7f72"><div class="ttname"><a href="classllvm_1_1LazyCallGraph_1_1RefSCC.html#a01b1581633bb40f86d6dc62a1c1a7f72">llvm::LazyCallGraph::RefSCC::insertIncomingRefEdge</a></div><div class="ttdeci">SmallVector&lt; RefSCC *, 1 &gt; insertIncomingRefEdge(Node &amp;SourceN, Node &amp;TargetN)</div><div class="ttdoc">Insert an edge whose source is in a descendant RefSCC and target is in this RefSCC.</div><div class="ttdef"><b>Definition:</b> <a href="LazyCallGraph_8cpp_source.html#l00996">LazyCallGraph.cpp:996</a></div></div>
<div class="ttc" id="aArrayRef_8h_html"><div class="ttname"><a href="ArrayRef_8h.html">ArrayRef.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1LazyCallGraph_1_1Edge_html_a8a5508e6c049172373b05c47c1b6fe13"><div class="ttname"><a href="classllvm_1_1LazyCallGraph_1_1Edge.html#a8a5508e6c049172373b05c47c1b6fe13">llvm::LazyCallGraph::Edge::Kind</a></div><div class="ttdeci">Kind</div><div class="ttdoc">The kind of edge in the graph.</div><div class="ttdef"><b>Definition:</b> <a href="LazyCallGraph_8h_source.html#l00134">LazyCallGraph.h:134</a></div></div>
<div class="ttc" id="aSILowerControlFlow_8cpp_html_a4868c5d81c5ccc98c47aeab6244346a0"><div class="ttname"><a href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a></div><div class="ttdeci">assert(ImpDefSCC.getReg()==AMDGPU::SCC &amp;&amp;ImpDefSCC.isDef())</div></div>
<div class="ttc" id="anamespacellvm_html_abfc9c7ecf70f66901e439f7c04ef3dbb"><div class="ttname"><a href="namespacellvm.html#abfc9c7ecf70f66901e439f7c04ef3dbb">llvm::move</a></div><div class="ttdeci">OutputIt move(R &amp;&amp;Range, OutputIt Out)</div><div class="ttdoc">Provide wrappers to std::move which take ranges instead of having to pass begin/end explicitly.</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l01862">STLExtras.h:1862</a></div></div>
<div class="ttc" id="aiterator__range_8h_html"><div class="ttname"><a href="iterator__range_8h.html">iterator_range.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1LazyCallGraph_1_1EdgeSequence_html_aef0b1ef237beea0e9b4611260b84bce4"><div class="ttname"><a href="classllvm_1_1LazyCallGraph_1_1EdgeSequence.html#aef0b1ef237beea0e9b4611260b84bce4">llvm::LazyCallGraph::EdgeSequence::lookup</a></div><div class="ttdeci">Edge * lookup(Node &amp;N)</div><div class="ttdef"><b>Definition:</b> <a href="LazyCallGraph_8h_source.html#l00264">LazyCallGraph.h:264</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetLibraryInfo_html_a509a54a541f436c80708c727d0b4d1b3"><div class="ttname"><a href="classllvm_1_1TargetLibraryInfo.html#a509a54a541f436c80708c727d0b4d1b3">llvm::TargetLibraryInfo::isKnownVectorFunctionInLibrary</a></div><div class="ttdeci">bool isKnownVectorFunctionInLibrary(StringRef F) const</div><div class="ttdoc">Check if the function &quot;F&quot; is listed in a library known to LLVM.</div><div class="ttdef"><b>Definition:</b> <a href="TargetLibraryInfo_8h_source.html#l00531">TargetLibraryInfo.h:531</a></div></div>
<div class="ttc" id="aclassllvm_1_1Module_html"><div class="ttname"><a href="classllvm_1_1Module.html">llvm::Module</a></div><div class="ttdoc">A Module instance is used to store all the information related to an LLVM module.</div><div class="ttdef"><b>Definition:</b> <a href="Module_8h_source.html#l00065">Module.h:65</a></div></div>
<div class="ttc" id="aclassllvm_1_1LazyCallGraph_1_1SCC_html_a024bad6935b15f7080b08b5dfec4eade"><div class="ttname"><a href="classllvm_1_1LazyCallGraph_1_1SCC.html#a024bad6935b15f7080b08b5dfec4eade">llvm::LazyCallGraph::SCC::isAncestorOf</a></div><div class="ttdeci">bool isAncestorOf(const SCC &amp;C) const</div><div class="ttdoc">Test if this SCC is an ancestor of C.</div><div class="ttdef"><b>Definition:</b> <a href="LazyCallGraph_8cpp_source.html#l00289">LazyCallGraph.cpp:289</a></div></div>
<div class="ttc" id="aclassllvm_1_1LazyCallGraph_1_1Node_html"><div class="ttname"><a href="classllvm_1_1LazyCallGraph_1_1Node.html">llvm::LazyCallGraph::Node</a></div><div class="ttdoc">A node in the call graph.</div><div class="ttdef"><b>Definition:</b> <a href="LazyCallGraph_8h_source.html#l00315">LazyCallGraph.h:315</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSetImpl_html_a1f475b0df44ebd7169e720fa1bf9169e"><div class="ttname"><a href="classllvm_1_1SmallPtrSetImpl.html#a1f475b0df44ebd7169e720fa1bf9169e">llvm::SmallPtrSetImpl::count</a></div><div class="ttdeci">size_type count(ConstPtrType Ptr) const</div><div class="ttdoc">count - Return 1 if the specified pointer is in the set, 0 otherwise.</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00383">SmallPtrSet.h:383</a></div></div>
<div class="ttc" id="anamespacellvm_html_a10f3d955592ae2bc745f57e5b48ae115"><div class="ttname"><a href="namespacellvm.html#a10f3d955592ae2bc745f57e5b48ae115">llvm::size</a></div><div class="ttdeci">auto size(R &amp;&amp;Range, std::enable_if_t&lt; std::is_base_of&lt; std::random_access_iterator_tag, typename std::iterator_traits&lt; decltype(Range.begin())&gt;::iterator_category &gt;::value, void &gt; *=nullptr)</div><div class="ttdoc">Get the size of a range.</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l01716">STLExtras.h:1716</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AMDGPU_1_1CPol_html_a7d79a4b341da8ac60b91c1f4b1ea42c4aca1659af59093b2b14c2f8aad41e8e2a"><div class="ttname"><a href="namespacellvm_1_1AMDGPU_1_1CPol.html#a7d79a4b341da8ac60b91c1f4b1ea42c4aca1659af59093b2b14c2f8aad41e8e2a">llvm::AMDGPU::CPol::SCC</a></div><div class="ttdeci">@ SCC</div><div class="ttdef"><b>Definition:</b> <a href="SIDefines_8h_source.html#l00316">SIDefines.h:316</a></div></div>
<div class="ttc" id="aclassllvm_1_1LazyCallGraph_1_1Edge_html"><div class="ttname"><a href="classllvm_1_1LazyCallGraph_1_1Edge.html">llvm::LazyCallGraph::Edge</a></div><div class="ttdoc">A class used to represent edges in the call graph.</div><div class="ttdef"><b>Definition:</b> <a href="LazyCallGraph_8h_source.html#l00131">LazyCallGraph.h:131</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSetImplBase_html_a16413f1a88d8baca228d0a1b4cc0bfc6"><div class="ttname"><a href="classllvm_1_1SmallPtrSetImplBase.html#a16413f1a88d8baca228d0a1b4cc0bfc6">llvm::SmallPtrSetImplBase::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00095">SmallPtrSet.h:95</a></div></div>
<div class="ttc" id="aclassllvm_1_1iterator__range_html_aa0344673da91896d39f1b35755ee5d4e"><div class="ttname"><a href="classllvm_1_1iterator__range.html#aa0344673da91896d39f1b35755ee5d4e">llvm::iterator_range::end</a></div><div class="ttdeci">IteratorT end() const</div><div class="ttdef"><b>Definition:</b> <a href="iterator__range_8h_source.html#l00045">iterator_range.h:45</a></div></div>
<div class="ttc" id="aclassllvm_1_1ArrayRef_html"><div class="ttname"><a href="classllvm_1_1ArrayRef.html">llvm::ArrayRef</a></div><div class="ttdoc">ArrayRef - Represent a constant reference to an array (0 or more elements consecutively in memory),...</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00033">APInt.h:33</a></div></div>
<div class="ttc" id="aclassllvm_1_1LazyCallGraph_1_1RefSCC_html_a937b8c6223a8c9b99124097d5066eb4a"><div class="ttname"><a href="classllvm_1_1LazyCallGraph_1_1RefSCC.html#a937b8c6223a8c9b99124097d5066eb4a">llvm::LazyCallGraph::RefSCC::removeInternalRefEdge</a></div><div class="ttdeci">SmallVector&lt; RefSCC *, 1 &gt; removeInternalRefEdge(Node &amp;SourceN, ArrayRef&lt; Node * &gt; TargetNs)</div><div class="ttdoc">Remove a list of ref edges which are entirely within this RefSCC.</div><div class="ttdef"><b>Definition:</b> <a href="LazyCallGraph_8cpp_source.html#l01155">LazyCallGraph.cpp:1155</a></div></div>
<div class="ttc" id="aclassllvm_1_1LazyCallGraph_1_1SCC_html_a5592b0404f95c589801ea255fa95fb63"><div class="ttname"><a href="classllvm_1_1LazyCallGraph_1_1SCC.html#a5592b0404f95c589801ea255fa95fb63">llvm::LazyCallGraph::SCC::size</a></div><div class="ttdeci">int size() const</div><div class="ttdef"><b>Definition:</b> <a href="LazyCallGraph_8h_source.html#l00480">LazyCallGraph.h:480</a></div></div>
<div class="ttc" id="aCompiler_8h_html"><div class="ttname"><a href="Compiler_8h.html">Compiler.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1LazyCallGraph_1_1RefSCC_html_a70f7f0574edbfc0f75424499133d4ba3"><div class="ttname"><a href="classllvm_1_1LazyCallGraph_1_1RefSCC.html#a70f7f0574edbfc0f75424499133d4ba3">llvm::LazyCallGraph::RefSCC::replaceNodeFunction</a></div><div class="ttdeci">void replaceNodeFunction(Node &amp;N, Function &amp;NewF)</div><div class="ttdoc">Directly replace a node's function with a new function.</div><div class="ttdef"><b>Definition:</b> <a href="LazyCallGraph_8cpp_source.html#l01442">LazyCallGraph.cpp:1442</a></div></div>
<div class="ttc" id="aSampleProfWriter_8cpp_html_ac5f3689931c7238da06ba00cf1002c62"><div class="ttname"><a href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a></div><div class="ttdeci">raw_pwrite_stream &amp; OS</div><div class="ttdef"><b>Definition:</b> <a href="SampleProfWriter_8cpp_source.html#l00053">SampleProfWriter.cpp:53</a></div></div>
<div class="ttc" id="anamespacellvm_html_ab2e3dbebd68e69d77c227682fc8e3ba2"><div class="ttname"><a href="namespacellvm.html#ab2e3dbebd68e69d77c227682fc8e3ba2">llvm::make_scope_exit</a></div><div class="ttdeci">detail::scope_exit&lt; std::decay_t&lt; Callable &gt; &gt; make_scope_exit(Callable &amp;&amp;F)</div><div class="ttdef"><b>Definition:</b> <a href="ScopeExit_8h_source.html#l00059">ScopeExit.h:59</a></div></div>
<div class="ttc" id="anamespacellvm_html_ac78c09ae232b2ce188ff590d51e3c268"><div class="ttname"><a href="namespacellvm.html#ac78c09ae232b2ce188ff590d51e3c268">llvm::find_if</a></div><div class="ttdeci">auto find_if(R &amp;&amp;Range, UnaryPredicate P)</div><div class="ttdoc">Provide wrappers to std::find_if which take ranges instead of having to pass begin/end explicitly.</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l01762">STLExtras.h:1762</a></div></div>
<div class="ttc" id="aAMDGPULibCalls_8cpp_html_a537c835c34f0b44b6ad2696643754390"><div class="ttname"><a href="AMDGPULibCalls_8cpp.html#a537c835c34f0b44b6ad2696643754390">Callee</a></div><div class="ttdeci">amdgpu Simplify well known AMD library false FunctionCallee Callee</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULibCalls_8cpp_source.html#l00187">AMDGPULibCalls.cpp:187</a></div></div>
<div class="ttc" id="aLazyCallGraph_8cpp_html_af481ee3f81ad12db32ea0df13ec4b0d0"><div class="ttname"><a href="LazyCallGraph_8cpp.html#af481ee3f81ad12db32ea0df13ec4b0d0">isKnownLibFunction</a></div><div class="ttdeci">static bool isKnownLibFunction(Function &amp;F, TargetLibraryInfo &amp;TLI)</div><div class="ttdef"><b>Definition:</b> <a href="LazyCallGraph_8cpp_source.html#l00144">LazyCallGraph.cpp:144</a></div></div>
<div class="ttc" id="aGraphWriter_8h_html"><div class="ttname"><a href="GraphWriter_8h.html">GraphWriter.h</a></div></div>
<div class="ttc" id="anamespacestd_html"><div class="ttname"><a href="namespacestd.html">std</a></div><div class="ttdef"><b>Definition:</b> <a href="BitVector_8h_source.html#l00851">BitVector.h:851</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html_abd962b7b01f49ce61ea41ee10c49e313"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#abd962b7b01f49ce61ea41ee10c49e313">llvm::SmallVectorImpl::swap</a></div><div class="ttdeci">void swap(SmallVectorImpl &amp;RHS)</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00972">SmallVector.h:972</a></div></div>
<div class="ttc" id="aclassllvm_1_1LazyCallGraph_html_a952c8adfe8553406e169b98200072a69"><div class="ttname"><a href="classllvm_1_1LazyCallGraph.html#a952c8adfe8553406e169b98200072a69">llvm::LazyCallGraph::addSplitRefRecursiveFunctions</a></div><div class="ttdeci">void addSplitRefRecursiveFunctions(Function &amp;OriginalFunction, ArrayRef&lt; Function * &gt; NewFunctions)</div><div class="ttdoc">Add new ref-recursive functions split/outlined from an existing function.</div><div class="ttdef"><b>Definition:</b> <a href="LazyCallGraph_8cpp_source.html#l01688">LazyCallGraph.cpp:1688</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AMDGPU_1_1SendMsg_html_a8594419a4ddfad2c9a79279c490e466d"><div class="ttname"><a href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">llvm::AMDGPU::SendMsg::Op</a></div><div class="ttdeci">Op</div><div class="ttdef"><b>Definition:</b> <a href="SIDefines_8h_source.html#l00357">SIDefines.h:357</a></div></div>
<div class="ttc" id="aclassllvm_1_1PreservedAnalyses_html_a1258a1ff55557c27684010ebd7283712"><div class="ttname"><a href="classllvm_1_1PreservedAnalyses.html#a1258a1ff55557c27684010ebd7283712">llvm::PreservedAnalyses::all</a></div><div class="ttdeci">static PreservedAnalyses all()</div><div class="ttdoc">Construct a special preserved set that preserves all passes.</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00158">PassManager.h:158</a></div></div>
<div class="ttc" id="aclassllvm_1_1LazyCallGraph_1_1Edge_html_a6adb0d1326681c19a5f14a745e17bc32"><div class="ttname"><a href="classllvm_1_1LazyCallGraph_1_1Edge.html#a6adb0d1326681c19a5f14a745e17bc32">llvm::LazyCallGraph::Edge::isCall</a></div><div class="ttdeci">bool isCall() const</div><div class="ttdoc">Test whether the edge represents a direct call to a function.</div><div class="ttdef"><b>Definition:</b> <a href="LazyCallGraph_8h_source.html#l01223">LazyCallGraph.h:1223</a></div></div>
<div class="ttc" id="aGlobalVariable_8h_html"><div class="ttname"><a href="GlobalVariable_8h.html">GlobalVariable.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1LazyCallGraphAnalysis_html"><div class="ttname"><a href="classllvm_1_1LazyCallGraphAnalysis.html">llvm::LazyCallGraphAnalysis</a></div><div class="ttdoc">An analysis pass which computes the call graph for a module.</div><div class="ttdef"><b>Definition:</b> <a href="LazyCallGraph_8h_source.html#l01257">LazyCallGraph.h:1257</a></div></div>
<div class="ttc" id="aCasting_8h_html"><div class="ttname"><a href="Casting_8h.html">Casting.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1LazyCallGraph_html_a0aec1afa97220e40f3d67a94455b7833"><div class="ttname"><a href="classllvm_1_1LazyCallGraph.html#a0aec1afa97220e40f3d67a94455b7833">llvm::LazyCallGraph::isLibFunction</a></div><div class="ttdeci">bool isLibFunction(Function &amp;F) const</div><div class="ttdoc">Test whether a function is a known and defined library function tracked by the call graph.</div><div class="ttdef"><b>Definition:</b> <a href="LazyCallGraph_8h_source.html#l01016">LazyCallGraph.h:1016</a></div></div>
<div class="ttc" id="aFunction_8h_html"><div class="ttname"><a href="Function_8h.html">Function.h</a></div></div>
<div class="ttc" id="aPassManager_8h_html"><div class="ttname"><a href="PassManager_8h.html">PassManager.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetLibraryInfo_html"><div class="ttname"><a href="classllvm_1_1TargetLibraryInfo.html">llvm::TargetLibraryInfo</a></div><div class="ttdoc">Provides information about what library functions are available for the current target.</div><div class="ttdef"><b>Definition:</b> <a href="TargetLibraryInfo_8h_source.html#l00234">TargetLibraryInfo.h:234</a></div></div>
<div class="ttc" id="aPPCCTRLoopsVerify_8cpp_html_a593cc2f204f7b2edc16ee222c37c3196"><div class="ttname"><a href="PPCCTRLoopsVerify_8cpp.html#a593cc2f204f7b2edc16ee222c37c3196">verify</a></div><div class="ttdeci">ppc ctr loops verify</div><div class="ttdef"><b>Definition:</b> <a href="PPCCTRLoopsVerify_8cpp_source.html#l00076">PPCCTRLoopsVerify.cpp:76</a></div></div>
<div class="ttc" id="aclassllvm_1_1LazyCallGraphDOTPrinterPass_html_a0cfd924886ac8a5aab3ba8e62cde3e17"><div class="ttname"><a href="classllvm_1_1LazyCallGraphDOTPrinterPass.html#a0cfd924886ac8a5aab3ba8e62cde3e17">llvm::LazyCallGraphDOTPrinterPass::LazyCallGraphDOTPrinterPass</a></div><div class="ttdeci">LazyCallGraphDOTPrinterPass(raw_ostream &amp;OS)</div><div class="ttdef"><b>Definition:</b> <a href="LazyCallGraph_8cpp_source.html#l02029">LazyCallGraph.cpp:2029</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html_aac0ea55010b7b1a301e65a0baea057aa"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">llvm::SmallVectorImpl::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00614">SmallVector.h:614</a></div></div>
<div class="ttc" id="aclassllvm_1_1LazyCallGraph_1_1RefSCC_html_ae2f9bc7458beec4389ccf7fb88199d4b"><div class="ttname"><a href="classllvm_1_1LazyCallGraph_1_1RefSCC.html#ae2f9bc7458beec4389ccf7fb88199d4b">llvm::LazyCallGraph::RefSCC::switchTrivialInternalEdgeToRef</a></div><div class="ttdeci">void switchTrivialInternalEdgeToRef(Node &amp;SourceN, Node &amp;TargetN)</div><div class="ttdoc">Make an existing internal call edge between separate SCCs into a ref edge.</div><div class="ttdef"><b>Definition:</b> <a href="LazyCallGraph_8cpp_source.html#l00723">LazyCallGraph.cpp:723</a></div></div>
<div class="ttc" id="aclassllvm_1_1LazyCallGraph_1_1EdgeSequence_html_a29e086486bf95a2cb7d9c1e93ec48857"><div class="ttname"><a href="classllvm_1_1LazyCallGraph_1_1EdgeSequence.html#a29e086486bf95a2cb7d9c1e93ec48857">llvm::LazyCallGraph::EdgeSequence::empty</a></div><div class="ttdeci">bool empty()</div><div class="ttdef"><b>Definition:</b> <a href="LazyCallGraph_8h_source.html#l00281">LazyCallGraph.h:281</a></div></div>
<div class="ttc" id="aclassllvm_1_1LazyCallGraph_1_1RefSCC_html_adce8df277d53b4d87581583c8269ac71"><div class="ttname"><a href="classllvm_1_1LazyCallGraph_1_1RefSCC.html#adce8df277d53b4d87581583c8269ac71">llvm::LazyCallGraph::RefSCC::switchOutgoingEdgeToRef</a></div><div class="ttdeci">void switchOutgoingEdgeToRef(Node &amp;SourceN, Node &amp;TargetN)</div><div class="ttdoc">Make an existing outgoing call edge into a ref edge.</div><div class="ttdef"><b>Definition:</b> <a href="LazyCallGraph_8cpp_source.html#l00943">LazyCallGraph.cpp:943</a></div></div>
<div class="ttc" id="aSmallVector_8h_html"><div class="ttname"><a href="SmallVector_8h.html">SmallVector.h</a></div></div>
<div class="ttc" id="aregcomp_8c_html_a0240ac851181b84ac374872dc5434ee4"><div class="ttname"><a href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a></div><div class="ttdeci">#define N</div></div>
<div class="ttc" id="aclassllvm_1_1DenseMapBase_html_a98c685a0c53f3f7ed5f4793890a6c850"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#a98c685a0c53f3f7ed5f4793890a6c850">llvm::DenseMapBase&lt; DenseMap&lt; KeyT, ValueT, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;, KeyT, ValueT, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;::try_emplace</a></div><div class="ttdeci">std::pair&lt; iterator, bool &gt; try_emplace(KeyT &amp;&amp;Key, Ts &amp;&amp;... Args)</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00222">DenseMap.h:222</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html_a0c8ffe664a36e30d49c84d0aded2fe08"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#a0c8ffe664a36e30d49c84d0aded2fe08">llvm::SmallVectorImpl::pop_back_val</a></div><div class="ttdeci">T pop_back_val()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00677">SmallVector.h:677</a></div></div>
<div class="ttc" id="aclassllvm_1_1LazyCallGraph_1_1RefSCC_html_a5cc0541c3ee15c565ac05fe11f5459d2"><div class="ttname"><a href="classllvm_1_1LazyCallGraph_1_1RefSCC.html#a5cc0541c3ee15c565ac05fe11f5459d2">llvm::LazyCallGraph::RefSCC::switchOutgoingEdgeToCall</a></div><div class="ttdeci">void switchOutgoingEdgeToCall(Node &amp;SourceN, Node &amp;TargetN)</div><div class="ttdoc">Make an existing outgoing ref edge into a call edge.</div><div class="ttdef"><b>Definition:</b> <a href="LazyCallGraph_8cpp_source.html#l00922">LazyCallGraph.cpp:922</a></div></div>
<div class="ttc" id="aclassllvm_1_1LazyCallGraph_1_1SCC_html_aeaf5e7e3c29093d1493826491653cc6d"><div class="ttname"><a href="classllvm_1_1LazyCallGraph_1_1SCC.html#aeaf5e7e3c29093d1493826491653cc6d">llvm::LazyCallGraph::SCC::getOuterRefSCC</a></div><div class="ttdeci">RefSCC &amp; getOuterRefSCC() const</div><div class="ttdef"><b>Definition:</b> <a href="LazyCallGraph_8h_source.html#l00482">LazyCallGraph.h:482</a></div></div>
<div class="ttc" id="aclassllvm_1_1iterator__range_html"><div class="ttname"><a href="classllvm_1_1iterator__range.html">llvm::iterator_range</a></div><div class="ttdoc">A range adaptor for a pair of iterators.</div><div class="ttdef"><b>Definition:</b> <a href="iterator__range_8h_source.html#l00030">iterator_range.h:30</a></div></div>
<div class="ttc" id="aScopeExit_8h_html"><div class="ttname"><a href="ScopeExit_8h.html">ScopeExit.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html">llvm::SmallVectorImpl</a></div><div class="ttdoc">This class consists of common code factored out of the SmallVector class to reduce code duplication b...</div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l00042">APFloat.h:42</a></div></div>
<div class="ttc" id="anamespacellvm_html_a6b0ac1fa4f05de76413c5e0ca6334035"><div class="ttname"><a href="namespacellvm.html#a6b0ac1fa4f05de76413c5e0ca6334035">llvm::reverse</a></div><div class="ttdeci">auto reverse(ContainerTy &amp;&amp;C)</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l00484">STLExtras.h:484</a></div></div>
<div class="ttc" id="anamespacellvm_html_ab9c6b351507d3c0730f4290919d43a12"><div class="ttname"><a href="namespacellvm.html#ab9c6b351507d3c0730f4290919d43a12">llvm::ArrayRef</a></div><div class="ttdeci">ArrayRef(const T &amp;OneElt) -&gt; ArrayRef&lt; T &gt;</div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSetImpl_html"><div class="ttname"><a href="classllvm_1_1SmallPtrSetImpl.html">llvm::SmallPtrSetImpl</a></div><div class="ttdoc">A templated base class for SmallPtrSet which provides the typesafe interface that is common across al...</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00344">SmallPtrSet.h:344</a></div></div>
<div class="ttc" id="aclassllvm_1_1LazyCallGraph_1_1Edge_html_a8a5508e6c049172373b05c47c1b6fe13a81845d1d6d0f58deb757fad1e739c32c"><div class="ttname"><a href="classllvm_1_1LazyCallGraph_1_1Edge.html#a8a5508e6c049172373b05c47c1b6fe13a81845d1d6d0f58deb757fad1e739c32c">llvm::LazyCallGraph::Edge::Ref</a></div><div class="ttdeci">@ Ref</div><div class="ttdef"><b>Definition:</b> <a href="LazyCallGraph_8h_source.html#l00134">LazyCallGraph.h:134</a></div></div>
<div class="ttc" id="aclassllvm_1_1PreservedAnalyses_html_aa7a1b769f9c57010cc41d9c3bb9d39c6"><div class="ttname"><a href="classllvm_1_1PreservedAnalyses.html#aa7a1b769f9c57010cc41d9c3bb9d39c6">llvm::PreservedAnalyses::getChecker</a></div><div class="ttdeci">PreservedAnalysisChecker getChecker() const</div><div class="ttdoc">Build a checker for this PreservedAnalyses and the specified analysis type.</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00310">PassManager.h:310</a></div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisManager_html"><div class="ttname"><a href="classllvm_1_1AnalysisManager.html">llvm::AnalysisManager</a></div><div class="ttdoc">A container for analyses that lazily runs them and caches their results.</div><div class="ttdef"><b>Definition:</b> <a href="InstructionSimplify_8h_source.html#l00042">InstructionSimplify.h:42</a></div></div>
<div class="ttc" id="alib_2CodeGen_2README_8txt_html_a09776db24cf586ec9f1e18f3bae14099"><div class="ttname"><a href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a></div><div class="ttdeci">Common register allocation spilling lr str ldr sxth r3 ldr mla r4 can lr mov lr str ldr sxth r3 mla r4 and then merge mul and lr str ldr sxth r3 mla r4 It also increase the likelihood the store may become dead bb27 Successors according to LLVM BB</div><div class="ttdef"><b>Definition:</b> <a href="lib_2CodeGen_2README_8txt_source.html#l00039">README.txt:39</a></div></div>
<div class="ttc" id="aclassllvm_1_1LazyCallGraph_html"><div class="ttname"><a href="classllvm_1_1LazyCallGraph.html">llvm::LazyCallGraph</a></div><div class="ttdoc">A lazily constructed view of the call graph of a module.</div><div class="ttdef"><b>Definition:</b> <a href="LazyCallGraph_8h_source.html#l00110">LazyCallGraph.h:110</a></div></div>
<div class="ttc" id="araw__ostream_8h_html"><div class="ttname"><a href="raw__ostream_8h.html">raw_ostream.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1LazyCallGraph_html_a778d0494c2f8dec95d60160b1ce89a07"><div class="ttname"><a href="classllvm_1_1LazyCallGraph.html#a778d0494c2f8dec95d60160b1ce89a07">llvm::LazyCallGraph::visitReferences</a></div><div class="ttdeci">static void visitReferences(SmallVectorImpl&lt; Constant * &gt; &amp;Worklist, SmallPtrSetImpl&lt; Constant * &gt; &amp;Visited, function_ref&lt; void(Function &amp;)&gt; Callback)</div><div class="ttdoc">Recursively visits the defined functions whose address is reachable from every constant in the Workli...</div><div class="ttdef"><b>Definition:</b> <a href="LazyCallGraph_8cpp_source.html#l01960">LazyCallGraph.cpp:1960</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSetImpl_html_af74676a3c7447be34bd2c1da76ec0c48"><div class="ttname"><a href="classllvm_1_1SmallPtrSetImpl.html#af74676a3c7447be34bd2c1da76ec0c48">llvm::SmallPtrSetImpl::contains</a></div><div class="ttdeci">bool contains(ConstPtrType Ptr) const</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00389">SmallPtrSet.h:389</a></div></div>
<div class="ttc" id="aLazyCallGraph_8cpp_html_ae48a57dbe703b0863fc96285ac60a9d6"><div class="ttname"><a href="LazyCallGraph_8cpp.html#ae48a57dbe703b0863fc96285ac60a9d6">printSCC</a></div><div class="ttdeci">static void printSCC(raw_ostream &amp;OS, LazyCallGraph::SCC &amp;C)</div><div class="ttdef"><b>Definition:</b> <a href="LazyCallGraph_8cpp_source.html#l01996">LazyCallGraph.cpp:1996</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html"><div class="ttname"><a href="classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00074">Value.h:74</a></div></div>
<div class="ttc" id="aDebug_8h_html"><div class="ttname"><a href="Debug_8h.html">Debug.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1iterator__range_html_af5a020bd9dd7bc8487dd53ce443fdd8f"><div class="ttname"><a href="classllvm_1_1iterator__range.html#af5a020bd9dd7bc8487dd53ce443fdd8f">llvm::iterator_range::begin</a></div><div class="ttdeci">IteratorT begin() const</div><div class="ttdef"><b>Definition:</b> <a href="iterator__range_8h_source.html#l00044">iterator_range.h:44</a></div></div>
<div class="ttc" id="aclassllvm_1_1LazyCallGraph_1_1Edge_html_a8a5508e6c049172373b05c47c1b6fe13a13b74fdca959e0c5da734f789b298cf6"><div class="ttname"><a href="classllvm_1_1LazyCallGraph_1_1Edge.html#a8a5508e6c049172373b05c47c1b6fe13a13b74fdca959e0c5da734f789b298cf6">llvm::LazyCallGraph::Edge::Call</a></div><div class="ttdeci">@ Call</div><div class="ttdef"><b>Definition:</b> <a href="LazyCallGraph_8h_source.html#l00134">LazyCallGraph.h:134</a></div></div>
<div class="ttc" id="aclassllvm_1_1LazyCallGraph_1_1RefSCC_html_aa57986c798b44affab5e4d5953e37727"><div class="ttname"><a href="classllvm_1_1LazyCallGraph_1_1RefSCC.html#aa57986c798b44affab5e4d5953e37727">llvm::LazyCallGraph::RefSCC::insertInternalRefEdge</a></div><div class="ttdeci">void insertInternalRefEdge(Node &amp;SourceN, Node &amp;TargetN)</div><div class="ttdoc">Insert a ref edge from one node in this RefSCC to another in this RefSCC.</div><div class="ttdef"><b>Definition:</b> <a href="LazyCallGraph_8cpp_source.html#l00964">LazyCallGraph.cpp:964</a></div></div>
<div class="ttc" id="aclassllvm_1_1LazyCallGraph_html_abeeeb8eb8c4062039f93bb6ae7d2c618"><div class="ttname"><a href="classllvm_1_1LazyCallGraph.html#abeeeb8eb8c4062039f93bb6ae7d2c618">llvm::LazyCallGraph::removeEdge</a></div><div class="ttdeci">void removeEdge(Node &amp;SourceN, Node &amp;TargetN)</div><div class="ttdoc">Update the call graph after deleting an edge.</div><div class="ttdef"><b>Definition:</b> <a href="LazyCallGraph_8cpp_source.html#l01485">LazyCallGraph.cpp:1485</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html_a396fcfee6914c76974b73c3d203da6a5"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#a396fcfee6914c76974b73c3d203da6a5">llvm::SmallVectorImpl::emplace_back</a></div><div class="ttdeci">reference emplace_back(ArgTypes &amp;&amp;... Args)</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00941">SmallVector.h:941</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSetImpl_html_a6bc6fb89fe2e91c25559a8631f56e27e"><div class="ttname"><a href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">llvm::SmallPtrSetImpl::insert</a></div><div class="ttdeci">std::pair&lt; iterator, bool &gt; insert(PtrType Ptr)</div><div class="ttdoc">Inserts Ptr if and only if there is no element in the container equal to Ptr.</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00365">SmallPtrSet.h:365</a></div></div>
<div class="ttc" id="aLazyCallGraph_8cpp_html_aa23cb08728e5bb13e2bf43eb614c3efa"><div class="ttname"><a href="LazyCallGraph_8cpp.html#aa23cb08728e5bb13e2bf43eb614c3efa">printNodeDOT</a></div><div class="ttdeci">static void printNodeDOT(raw_ostream &amp;OS, LazyCallGraph::Node &amp;N)</div><div class="ttdef"><b>Definition:</b> <a href="LazyCallGraph_8cpp_source.html#l02032">LazyCallGraph.cpp:2032</a></div></div>
<div class="ttc" id="aclassllvm_1_1LazyCallGraphPrinterPass_html_a2860c75599e4f96204b58e3c3be96dfe"><div class="ttname"><a href="classllvm_1_1LazyCallGraphPrinterPass.html#a2860c75599e4f96204b58e3c3be96dfe">llvm::LazyCallGraphPrinterPass::run</a></div><div class="ttdeci">PreservedAnalyses run(Module &amp;M, ModuleAnalysisManager &amp;AM)</div><div class="ttdef"><b>Definition:</b> <a href="LazyCallGraph_8cpp_source.html#l02012">LazyCallGraph.cpp:2012</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Aug 7 2023 09:49:10 for LLVM by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>

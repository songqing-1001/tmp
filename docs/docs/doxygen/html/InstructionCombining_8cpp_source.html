<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LLVM: lib/Transforms/InstCombine/InstructionCombining.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">LLVM
   &#160;<span id="projectnumber">17.0.0git</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a class="el" href="dir_a72932e0778af28115095468f6286ff8.html">Transforms</a></li><li class="navelem"><a class="el" href="dir_99567d9c0c7f3685f25b19ecc341a865.html">InstCombine</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">InstructionCombining.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="InstructionCombining_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//===- InstructionCombining.cpp - Combine multiple instructions -----------===//</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">// See https://llvm.org/LICENSE.txt for license information.</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">// InstructionCombining - Combine instructions to form fewer, simple</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">// instructions.  This pass does not modify the CFG.  This pass is where</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">// algebraic simplification happens.</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">// This pass combines things like:</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">//    %Y = add i32 %X, 1</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">//    %Z = add i32 %Y, 1</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">// into:</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">//    %Z = add i32 %X, 2</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment">// This is a simple worklist driven algorithm.</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment">// This pass guarantees that the following canonicalizations are performed on</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment">// the program:</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment">//    1. If a binary operator has a constant operand, it is moved to the RHS</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment">//    2. Bitwise operators with constant operands are always grouped so that</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment">//       shifts are performed first, then or&#39;s, then and&#39;s, then xor&#39;s.</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment">//    3. Compare instructions are converted from &lt;,&gt;,&lt;=,&gt;= to ==,!= if possible</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment">//    4. All cmp instructions on boolean values are replaced with logical ops</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment">//    5. add X, X is represented as (X*2) =&gt; (X &lt;&lt; 1)</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment">//    6. Multiplies with a power-of-two constant argument are transformed into</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="comment">//       shifts.</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="comment">//   ... etc.</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160; </div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="InstCombineInternal_8h.html">InstCombineInternal.h</a>&quot;</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Initialization_8h.html">llvm-c/Initialization.h</a>&quot;</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="c_2Transforms_2InstCombine_8h.html">llvm-c/Transforms/InstCombine.h</a>&quot;</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="APInt_8h.html">llvm/ADT/APInt.h</a>&quot;</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ArrayRef_8h.html">llvm/ADT/ArrayRef.h</a>&quot;</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DenseMap_8h.html">llvm/ADT/DenseMap.h</a>&quot;</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SmallPtrSet_8h.html">llvm/ADT/SmallPtrSet.h</a>&quot;</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SmallVector_8h.html">llvm/ADT/SmallVector.h</a>&quot;</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Statistic_8h.html">llvm/ADT/Statistic.h</a>&quot;</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="AliasAnalysis_8h.html">llvm/Analysis/AliasAnalysis.h</a>&quot;</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="AssumptionCache_8h.html">llvm/Analysis/AssumptionCache.h</a>&quot;</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="BasicAliasAnalysis_8h.html">llvm/Analysis/BasicAliasAnalysis.h</a>&quot;</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="BlockFrequencyInfo_8h.html">llvm/Analysis/BlockFrequencyInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Analysis_2CFG_8h.html">llvm/Analysis/CFG.h</a>&quot;</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ConstantFolding_8h.html">llvm/Analysis/ConstantFolding.h</a>&quot;</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="GlobalsModRef_8h.html">llvm/Analysis/GlobalsModRef.h</a>&quot;</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="InstructionSimplify_8h.html">llvm/Analysis/InstructionSimplify.h</a>&quot;</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LazyBlockFrequencyInfo_8h.html">llvm/Analysis/LazyBlockFrequencyInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LoopInfo_8h.html">llvm/Analysis/LoopInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MemoryBuiltins_8h.html">llvm/Analysis/MemoryBuiltins.h</a>&quot;</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="OptimizationRemarkEmitter_8h.html">llvm/Analysis/OptimizationRemarkEmitter.h</a>&quot;</span></div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ProfileSummaryInfo_8h.html">llvm/Analysis/ProfileSummaryInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="TargetFolder_8h.html">llvm/Analysis/TargetFolder.h</a>&quot;</span></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="TargetLibraryInfo_8h.html">llvm/Analysis/TargetLibraryInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="TargetTransformInfo_8h.html">llvm/Analysis/TargetTransformInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Analysis_2Utils_2Local_8h.html">llvm/Analysis/Utils/Local.h</a>&quot;</span></div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ValueTracking_8h.html">llvm/Analysis/ValueTracking.h</a>&quot;</span></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="VectorUtils_8h.html">llvm/Analysis/VectorUtils.h</a>&quot;</span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="BasicBlock_8h.html">llvm/IR/BasicBlock.h</a>&quot;</span></div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="IR_2CFG_8h.html">llvm/IR/CFG.h</a>&quot;</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Constant_8h.html">llvm/IR/Constant.h</a>&quot;</span></div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Constants_8h.html">llvm/IR/Constants.h</a>&quot;</span></div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DIBuilder_8h.html">llvm/IR/DIBuilder.h</a>&quot;</span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DataLayout_8h.html">llvm/IR/DataLayout.h</a>&quot;</span></div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="IR_2DebugInfo_8h.html">llvm/IR/DebugInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DerivedTypes_8h.html">llvm/IR/DerivedTypes.h</a>&quot;</span></div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Dominators_8h.html">llvm/IR/Dominators.h</a>&quot;</span></div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="EHPersonalities_8h.html">llvm/IR/EHPersonalities.h</a>&quot;</span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Function_8h.html">llvm/IR/Function.h</a>&quot;</span></div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="GetElementPtrTypeIterator_8h.html">llvm/IR/GetElementPtrTypeIterator.h</a>&quot;</span></div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="IRBuilder_8h.html">llvm/IR/IRBuilder.h</a>&quot;</span></div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="InstrTypes_8h.html">llvm/IR/InstrTypes.h</a>&quot;</span></div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="IR_2Instruction_8h.html">llvm/IR/Instruction.h</a>&quot;</span></div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Instructions_8h.html">llvm/IR/Instructions.h</a>&quot;</span></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="IntrinsicInst_8h.html">llvm/IR/IntrinsicInst.h</a>&quot;</span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Intrinsics_8h.html">llvm/IR/Intrinsics.h</a>&quot;</span></div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LegacyPassManager_8h.html">llvm/IR/LegacyPassManager.h</a>&quot;</span></div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Metadata_8h.html">llvm/IR/Metadata.h</a>&quot;</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Operator_8h.html">llvm/IR/Operator.h</a>&quot;</span></div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="PassManager_8h.html">llvm/IR/PassManager.h</a>&quot;</span></div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="PatternMatch_8h.html">llvm/IR/PatternMatch.h</a>&quot;</span></div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Type_8h.html">llvm/IR/Type.h</a>&quot;</span></div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Use_8h.html">llvm/IR/Use.h</a>&quot;</span></div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="User_8h.html">llvm/IR/User.h</a>&quot;</span></div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Value_8h.html">llvm/IR/Value.h</a>&quot;</span></div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ValueHandle_8h.html">llvm/IR/ValueHandle.h</a>&quot;</span></div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="InitializePasses_8h.html">llvm/InitializePasses.h</a>&quot;</span></div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Casting_8h.html">llvm/Support/Casting.h</a>&quot;</span></div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CommandLine_8h.html">llvm/Support/CommandLine.h</a>&quot;</span></div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Compiler_8h.html">llvm/Support/Compiler.h</a>&quot;</span></div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Debug_8h.html">llvm/Support/Debug.h</a>&quot;</span></div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DebugCounter_8h.html">llvm/Support/DebugCounter.h</a>&quot;</span></div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Support_2ErrorHandling_8h.html">llvm/Support/ErrorHandling.h</a>&quot;</span></div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="KnownBits_8h.html">llvm/Support/KnownBits.h</a>&quot;</span></div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="raw__ostream_8h.html">llvm/Support/raw_ostream.h</a>&quot;</span></div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Transforms_2InstCombine_2InstCombine_8h.html">llvm/Transforms/InstCombine/InstCombine.h</a>&quot;</span></div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="BasicBlockUtils_8h.html">llvm/Transforms/Utils/BasicBlockUtils.h</a>&quot;</span></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Transforms_2Utils_2Local_8h.html">llvm/Transforms/Utils/Local.h</a>&quot;</span></div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="preprocessor">#include &lt;algorithm&gt;</span></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;<span class="preprocessor">#include &lt;cassert&gt;</span></div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="preprocessor">#include &lt;cstdint&gt;</span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="preprocessor">#include &lt;memory&gt;</span></div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="preprocessor">#include &lt;optional&gt;</span></div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;<span class="preprocessor">#include &lt;string&gt;</span></div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;<span class="preprocessor">#include &lt;utility&gt;</span></div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160; </div>
<div class="line"><a name="l00111"></a><span class="lineno"><a class="line" href="InstructionCombining_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">  111</a></span>&#160;<span class="preprocessor">#define DEBUG_TYPE &quot;instcombine&quot;</span></div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="InstructionWorklist_8h.html">llvm/Transforms/Utils/InstructionWorklist.h</a>&quot;</span></div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;<span class="preprocessor">#include &lt;optional&gt;</span></div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160; </div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespacellvm.html">llvm</a>;</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespacellvm_1_1PatternMatch.html">llvm::PatternMatch</a>;</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160; </div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(NumWorklistIterations,</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;          <span class="stringliteral">&quot;Number of instruction combining iterations performed&quot;</span>);</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160; </div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(NumCombined , <span class="stringliteral">&quot;Number of insts combined&quot;</span>);</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(NumConstProp, <span class="stringliteral">&quot;Number of constant folds&quot;</span>);</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(NumDeadInst , <span class="stringliteral">&quot;Number of dead inst eliminated&quot;</span>);</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(NumSunkInst , <span class="stringliteral">&quot;Number of instructions sunk&quot;</span>);</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(NumExpand,    <span class="stringliteral">&quot;Number of expansions&quot;</span>);</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(NumFactor   , <span class="stringliteral">&quot;Number of factorizations&quot;</span>);</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(NumReassoc  , <span class="stringliteral">&quot;Number of reassociations&quot;</span>);</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<a class="code" href="InstructionCombining_8cpp.html#ac39bd0ff6a3f194647bdcc7f46cfde61">DEBUG_COUNTER</a>(VisitCounter, <span class="stringliteral">&quot;instcombine-visit&quot;</span>,</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;              <span class="stringliteral">&quot;Controls which instructions are visited&quot;</span>);</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160; </div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;<span class="comment">// FIXME: these limits eventually should be as low as 2.</span></div>
<div class="line"><a name="l00132"></a><span class="lineno"><a class="line" href="InstructionCombining_8cpp.html#a8b7341c151ccd1237c50ae5d7558920b">  132</a></span>&#160;<span class="keyword">static</span> constexpr <span class="keywordtype">unsigned</span> <a class="code" href="InstructionCombining_8cpp.html#a8b7341c151ccd1237c50ae5d7558920b">InstCombineDefaultMaxIterations</a> = 1000;</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><a name="l00134"></a><span class="lineno"><a class="line" href="InstructionCombining_8cpp.html#a87206032a21208e08473ae642c32e7d7">  134</a></span>&#160;<span class="keyword">static</span> constexpr <span class="keywordtype">unsigned</span> <a class="code" href="InstructionCombining_8cpp.html#a87206032a21208e08473ae642c32e7d7">InstCombineDefaultInfiniteLoopThreshold</a> = 100;</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;<span class="keyword">static</span> constexpr <span class="keywordtype">unsigned</span> <a class="code" href="InstructionCombining_8cpp.html#a87206032a21208e08473ae642c32e7d7">InstCombineDefaultInfiniteLoopThreshold</a> = 1000;</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160; </div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a></div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<a class="code" href="InstructionCombining_8cpp.html#ad3927c8a343c4413b417622bad485196">EnableCodeSinking</a>(<span class="stringliteral">&quot;instcombine-code-sinking&quot;</span>, <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Enable code sinking&quot;</span>),</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;                                              <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">true</span>));</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160; </div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;unsigned&gt;</a> <a class="code" href="InstructionCombining_8cpp.html#a6f35c3231e19a56dcbaa6c7f972472f5">MaxSinkNumUsers</a>(</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    <span class="stringliteral">&quot;instcombine-max-sink-users&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(32),</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Maximum number of undroppable users for instruction sinking&quot;</span>));</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160; </div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;unsigned&gt;</a> <a class="code" href="InstructionCombining_8cpp.html#a4d79676cd8860ab969121d292de048ef">LimitMaxIterations</a>(</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    <span class="stringliteral">&quot;instcombine-max-iterations&quot;</span>,</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Limit the maximum number of instruction combining iterations&quot;</span>),</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<a class="code" href="InstructionCombining_8cpp.html#a8b7341c151ccd1237c50ae5d7558920b">InstCombineDefaultMaxIterations</a>));</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160; </div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;unsigned&gt;</a> <a class="code" href="InstructionCombining_8cpp.html#a23b2990438f0256e1ae6c1141315aa4a">InfiniteLoopDetectionThreshold</a>(</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <span class="stringliteral">&quot;instcombine-infinite-loop-threshold&quot;</span>,</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Number of instruction combining iterations considered an &quot;</span></div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;             <span class="stringliteral">&quot;infinite loop&quot;</span>),</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<a class="code" href="InstructionCombining_8cpp.html#a87206032a21208e08473ae642c32e7d7">InstCombineDefaultInfiniteLoopThreshold</a>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>);</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160; </div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;unsigned&gt;</a></div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;<a class="code" href="InstructionCombining_8cpp.html#a48ae0648edff8a871369bab3d3646ac0">MaxArraySize</a>(<span class="stringliteral">&quot;instcombine-maxarray-size&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(1024),</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;             <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Maximum array size considered when doing a combine&quot;</span>));</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160; </div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;<span class="comment">// FIXME: Remove this flag when it is no longer necessary to convert</span></div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;<span class="comment">// llvm.dbg.declare to avoid inaccurate debug info. Setting this to false</span></div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;<span class="comment">// increases variable availability at the cost of accuracy. Variables that</span></div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;<span class="comment">// cannot be promoted by mem2reg or SROA will be described as living in memory</span></div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;<span class="comment">// for their entire lifetime. However, passes like DSE and instcombine can</span></div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;<span class="comment">// delete stores to the alloca, leading to misleading and inaccurate debug</span></div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;<span class="comment">// information. This flag can be removed when those passes are fixed.</span></div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;unsigned&gt;</a> <a class="code" href="InstructionCombining_8cpp.html#a83a4700fc7e6914e0955efa1aac4441e">ShouldLowerDbgDeclare</a>(<span class="stringliteral">&quot;instcombine-lower-dbg-declare&quot;</span>,</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;                                               <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">true</span>));</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160; </div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;std::optional&lt;Instruction *&gt;</div>
<div class="line"><a name="l00173"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombiner.html#aaeec6d7b5f74d07ed6e0e15fc652e327">  173</a></span>&#160;<a class="code" href="classllvm_1_1InstCombiner.html#aaeec6d7b5f74d07ed6e0e15fc652e327">InstCombiner::targetInstCombineIntrinsic</a>(<a class="code" href="classllvm_1_1IntrinsicInst.html">IntrinsicInst</a> &amp;II) {</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;  <span class="comment">// Handle target specific intrinsics</span></div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;  <span class="keywordflow">if</span> (II.<a class="code" href="classllvm_1_1CallBase.html#a83b8c9e572130f403445c0b0f69b837c">getCalledFunction</a>()-&gt;<a class="code" href="classllvm_1_1Function.html#af19ee1ec74467c699edd48f422b907a7">isTargetIntrinsic</a>()) {</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>.<a class="code" href="classllvm_1_1TargetTransformInfo.html#a2c34992cf5a6125fc637fbde99b88890">instCombineIntrinsic</a>(*<span class="keyword">this</span>, II);</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;  }</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;  <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;}</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160; </div>
<div class="line"><a name="l00181"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombiner.html#adccadc34e77a7a0982a0832ce2419a00">  181</a></span>&#160;std::optional&lt;Value *&gt; <a class="code" href="classllvm_1_1InstCombiner.html#adccadc34e77a7a0982a0832ce2419a00">InstCombiner::targetSimplifyDemandedUseBitsIntrinsic</a>(</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    <a class="code" href="classllvm_1_1IntrinsicInst.html">IntrinsicInst</a> &amp;II, <a class="code" href="classllvm_1_1APInt.html">APInt</a> DemandedMask, <a class="code" href="structllvm_1_1KnownBits.html">KnownBits</a> &amp;Known,</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    <span class="keywordtype">bool</span> &amp;KnownBitsComputed) {</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;  <span class="comment">// Handle target specific intrinsics</span></div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;  <span class="keywordflow">if</span> (II.<a class="code" href="classllvm_1_1CallBase.html#a83b8c9e572130f403445c0b0f69b837c">getCalledFunction</a>()-&gt;<a class="code" href="classllvm_1_1Function.html#af19ee1ec74467c699edd48f422b907a7">isTargetIntrinsic</a>()) {</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>.<a class="code" href="classllvm_1_1TargetTransformInfo.html#ac17fdac44c73248d9e36df4fd8d93b28">simplifyDemandedUseBitsIntrinsic</a>(*<span class="keyword">this</span>, II, DemandedMask, Known,</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;                                                KnownBitsComputed);</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;  }</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;  <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;}</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160; </div>
<div class="line"><a name="l00192"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombiner.html#ac1539f8fc8167c5be0eb439a4c5187fc">  192</a></span>&#160;std::optional&lt;Value *&gt; <a class="code" href="classllvm_1_1InstCombiner.html#ac1539f8fc8167c5be0eb439a4c5187fc">InstCombiner::targetSimplifyDemandedVectorEltsIntrinsic</a>(</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    <a class="code" href="classllvm_1_1IntrinsicInst.html">IntrinsicInst</a> &amp;II, <a class="code" href="classllvm_1_1APInt.html">APInt</a> DemandedElts, <a class="code" href="classllvm_1_1APInt.html">APInt</a> &amp;UndefElts, <a class="code" href="classllvm_1_1APInt.html">APInt</a> &amp;UndefElts2,</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    <a class="code" href="classllvm_1_1APInt.html">APInt</a> &amp;UndefElts3,</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    <a class="code" href="MemDepPrinter_8cpp.html#a470d8721ad7c3b718e9daeabdaeb4700">std::function</a>&lt;<span class="keywordtype">void</span>(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *, <span class="keywordtype">unsigned</span>, <a class="code" href="classllvm_1_1APInt.html">APInt</a>, <a class="code" href="classllvm_1_1APInt.html">APInt</a> &amp;)&gt;</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;        SimplifyAndSetOp) {</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;  <span class="comment">// Handle target specific intrinsics</span></div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;  <span class="keywordflow">if</span> (II.<a class="code" href="classllvm_1_1CallBase.html#a83b8c9e572130f403445c0b0f69b837c">getCalledFunction</a>()-&gt;<a class="code" href="classllvm_1_1Function.html#af19ee1ec74467c699edd48f422b907a7">isTargetIntrinsic</a>()) {</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>.<a class="code" href="classllvm_1_1TargetTransformInfo.html#a3c63492d1e619b740c6e6d123efeb4f8">simplifyDemandedVectorEltsIntrinsic</a>(</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;        *<span class="keyword">this</span>, II, DemandedElts, UndefElts, UndefElts2, UndefElts3,</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;        SimplifyAndSetOp);</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;  }</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;  <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;}</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160; </div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;<a class="code" href="classllvm_1_1Value.html">Value</a> *InstCombinerImpl::EmitGEPOffset(<a class="code" href="classllvm_1_1User.html">User</a> *<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>) {</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#a67aa349e8bb1aefc2a8a6ca18be9b87c">llvm::emitGEPOffset</a>(&amp;<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>);</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;}</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;<span class="comment">/// Legal integers and common types are considered desirable. This is used to</span></div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;<span class="comment">/// avoid creating instructions with types that may not be supported well by the</span></div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;<span class="comment">/// the backend.</span></div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;<span class="comment">/// NOTE: This treats i8, i16 and i32 specially because they are common</span></div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;<span class="comment">///       types in frontend languages.</span></div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> InstCombinerImpl::isDesirableIntType(<span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm.html#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;  <span class="keywordflow">switch</span> (<a class="code" href="namespacellvm.html#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a>) {</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;  <span class="keywordflow">case</span> 8:</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;  <span class="keywordflow">case</span> 16:</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;  <span class="keywordflow">case</span> 32:</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;  <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.isLegalInteger(<a class="code" href="namespacellvm.html#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a>);</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;  }</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;}</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;<span class="comment">/// Return true if it is desirable to convert an integer computation from a</span></div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;<span class="comment">/// given bit width to a new bit width.</span></div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;<span class="comment">/// We don&#39;t want to convert from a legal or desirable type (like i8) to an</span></div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;<span class="comment">/// illegal type or from a smaller to a larger illegal type. A width of &#39;1&#39;</span></div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;<span class="comment">/// is always treated as a desirable type because i1 is a fundamental type in</span></div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;<span class="comment">/// IR, and there are many specialized optimizations for i1 types.</span></div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;<span class="comment">/// Common/desirable widths are equally treated as legal to convert to, in</span></div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;<span class="comment">/// order to open up more combining opportunities.</span></div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> InstCombinerImpl::shouldChangeType(<span class="keywordtype">unsigned</span> FromWidth,</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;                                        <span class="keywordtype">unsigned</span> ToWidth)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;  <span class="keywordtype">bool</span> FromLegal = FromWidth == 1 || <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.isLegalInteger(FromWidth);</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;  <span class="keywordtype">bool</span> ToLegal = ToWidth == 1 || <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.isLegalInteger(ToWidth);</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160; </div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;  <span class="comment">// Convert to desirable widths even if they are not legal types.</span></div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;  <span class="comment">// Only shrink types, to prevent infinite loops.</span></div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;  <span class="keywordflow">if</span> (ToWidth &lt; FromWidth &amp;&amp; isDesirableIntType(ToWidth))</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160; </div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;  <span class="comment">// If this is a legal or desiable integer from type, and the result would be</span></div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;  <span class="comment">// an illegal type, don&#39;t do the transformation.</span></div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;  <span class="keywordflow">if</span> ((FromLegal || isDesirableIntType(FromWidth)) &amp;&amp; !ToLegal)</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160; </div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;  <span class="comment">// Otherwise, if both are illegal, do not increase the size of the result. We</span></div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;  <span class="comment">// do allow things like i160 -&gt; i64, but not i64 -&gt; i160.</span></div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;  <span class="keywordflow">if</span> (!FromLegal &amp;&amp; !ToLegal &amp;&amp; ToWidth &gt; FromWidth)</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160; </div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;}</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;<span class="comment">/// Return true if it is desirable to convert a computation from &#39;From&#39; to &#39;To&#39;.</span></div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;<span class="comment">/// We don&#39;t want to convert from a legal to an illegal type or from a smaller</span></div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;<span class="comment">/// to a larger illegal type. i1 is always treated as a legal type because it is</span></div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;<span class="comment">/// a fundamental type in IR, and there are many specialized optimizations for</span></div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;<span class="comment">/// i1 types.</span></div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> InstCombinerImpl::shouldChangeType(<a class="code" href="classllvm_1_1Type.html">Type</a> *<a class="code" href="BlockVerifier_8cpp.html#ae45c7d73c0ff5d177b59153ffae77f84">From</a>, <a class="code" href="classllvm_1_1Type.html">Type</a> *To)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;  <span class="comment">// TODO: This could be extended to allow vectors. Datalayout changes might be</span></div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;  <span class="comment">// needed to properly support that.</span></div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="BlockVerifier_8cpp.html#ae45c7d73c0ff5d177b59153ffae77f84">From</a>-&gt;isIntegerTy() || !To-&gt;<a class="code" href="classllvm_1_1Type.html#ac6d28a9b11139182134a9618028a0d07">isIntegerTy</a>())</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160; </div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;  <span class="keywordtype">unsigned</span> FromWidth = <a class="code" href="BlockVerifier_8cpp.html#ae45c7d73c0ff5d177b59153ffae77f84">From</a>-&gt;getPrimitiveSizeInBits();</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;  <span class="keywordtype">unsigned</span> ToWidth = To-&gt;<a class="code" href="classllvm_1_1Type.html#a833daf718a49c5cd637d8c9ddeaebe07">getPrimitiveSizeInBits</a>();</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;  <span class="keywordflow">return</span> shouldChangeType(FromWidth, ToWidth);</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;}</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160; </div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;<span class="comment">// Return true, if No Signed Wrap should be maintained for I.</span></div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;<span class="comment">// The No Signed Wrap flag can be kept if the operation &quot;B (I.getOpcode) C&quot;,</span></div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;<span class="comment">// where both B and C should be ConstantInts, results in a constant that does</span></div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;<span class="comment">// not overflow. This function only handles the Add and Sub opcodes. For</span></div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;<span class="comment">// all other opcodes, the function conservatively returns false.</span></div>
<div class="line"><a name="l00278"></a><span class="lineno"><a class="line" href="InstructionCombining_8cpp.html#af93581c21ffd5eccbb745274f226dbe7">  278</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="InstructionCombining_8cpp.html#af93581c21ffd5eccbb745274f226dbe7">maintainNoSignedWrap</a>(<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>) {</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;  <span class="keyword">auto</span> *OBO = dyn_cast&lt;OverflowingBinaryOperator&gt;(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;  <span class="keywordflow">if</span> (!OBO || !OBO-&gt;hasNoSignedWrap())</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160; </div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;  <span class="comment">// We reason about Add and Sub Only.</span></div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html#ac26154a24f393f523c87cc5f8239f36c">Instruction::BinaryOps</a> Opcode = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOpcode();</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;  <span class="keywordflow">if</span> (Opcode != <a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a2b016c207343046b2bac45e69e76dcec">Instruction::Add</a> &amp;&amp; Opcode != Instruction::Sub)</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160; </div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *BVal, *CVal;</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(BVal)) || !<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(CVal)))</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160; </div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;  <span class="keywordtype">bool</span> Overflow = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;  <span class="keywordflow">if</span> (Opcode == <a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a2b016c207343046b2bac45e69e76dcec">Instruction::Add</a>)</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    (void)BVal-&gt;<a class="code" href="classllvm_1_1APInt.html#a694293446a074c3d64270e7671bb5052">sadd_ov</a>(*CVal, Overflow);</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    (<span class="keywordtype">void</span>)BVal-&gt;<a class="code" href="classllvm_1_1APInt.html#ae324de5041feaf7eb8433221cdaca9aa">ssub_ov</a>(*CVal, Overflow);</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160; </div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;  <span class="keywordflow">return</span> !Overflow;</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;}</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160; </div>
<div class="line"><a name="l00301"></a><span class="lineno"><a class="line" href="InstructionCombining_8cpp.html#ac7f3587a2e9b666879ee5067a9593253">  301</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="InstructionCombining_8cpp.html#ac7f3587a2e9b666879ee5067a9593253">hasNoUnsignedWrap</a>(<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;  <span class="keyword">auto</span> *OBO = dyn_cast&lt;OverflowingBinaryOperator&gt;(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;  <span class="keywordflow">return</span> OBO &amp;&amp; OBO-&gt;hasNoUnsignedWrap();</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;}</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160; </div>
<div class="line"><a name="l00306"></a><span class="lineno"><a class="line" href="InstructionCombining_8cpp.html#a3bd26297d4422f25aaeacd40ffbbc478">  306</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="InstructionCombining_8cpp.html#a3bd26297d4422f25aaeacd40ffbbc478">hasNoSignedWrap</a>(<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;  <span class="keyword">auto</span> *OBO = dyn_cast&lt;OverflowingBinaryOperator&gt;(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;  <span class="keywordflow">return</span> OBO &amp;&amp; OBO-&gt;hasNoSignedWrap();</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;}</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;<span class="comment">/// Conservatively clears subclassOptionalData after a reassociation or</span></div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;<span class="comment">/// commutation. We preserve fast-math flags when applicable as they can be</span></div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;<span class="comment">/// preserved.</span></div>
<div class="line"><a name="l00314"></a><span class="lineno"><a class="line" href="InstructionCombining_8cpp.html#a4904699fe3329a5027ccd76991b0c1e4">  314</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="InstructionCombining_8cpp.html#a4904699fe3329a5027ccd76991b0c1e4">ClearSubclassDataAfterReassociation</a>(<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;  <a class="code" href="classllvm_1_1FPMathOperator.html">FPMathOperator</a> *FPMO = dyn_cast&lt;FPMathOperator&gt;(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;  <span class="keywordflow">if</span> (!FPMO) {</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.clearSubclassOptionalData();</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;  }</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160; </div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;  <a class="code" href="classllvm_1_1FastMathFlags.html">FastMathFlags</a> FMF = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getFastMathFlags();</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;  <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.clearSubclassOptionalData();</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;  <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.setFastMathFlags(FMF);</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;}</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;<span class="comment">/// Combine constant operands of associative operations either before or after a</span></div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;<span class="comment">/// cast to eliminate one of the associative operations:</span></div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;<span class="comment">/// (op (cast (op X, C2)), C1) --&gt; (cast (op X, op (C1, C2)))</span></div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;<span class="comment">/// (op (cast (op X, C2)), C1) --&gt; (op (cast X), op (C1, C2))</span></div>
<div class="line"><a name="l00330"></a><span class="lineno"><a class="line" href="InstructionCombining_8cpp.html#a41c00c458f7416c93927bc2f332b3898">  330</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="InstructionCombining_8cpp.html#a41c00c458f7416c93927bc2f332b3898">simplifyAssocCastAssoc</a>(<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> *BinOp1,</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;                                   <a class="code" href="classllvm_1_1InstCombinerImpl.html">InstCombinerImpl</a> &amp;IC) {</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;  <span class="keyword">auto</span> *Cast = dyn_cast&lt;CastInst&gt;(BinOp1-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0));</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;  <span class="keywordflow">if</span> (!Cast || !Cast-&gt;hasOneUse())</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160; </div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;  <span class="comment">// TODO: Enhance logic for other casts and remove this check.</span></div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;  <span class="keyword">auto</span> CastOpcode = Cast-&gt;getOpcode();</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;  <span class="keywordflow">if</span> (CastOpcode != Instruction::ZExt)</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160; </div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;  <span class="comment">// TODO: Enhance logic for other BinOps and remove this check.</span></div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;  <span class="keywordflow">if</span> (!BinOp1-&gt;<a class="code" href="classllvm_1_1Instruction.html#a2d0036d2d7b30f510927731ba7a4f4b9">isBitwiseLogicOp</a>())</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160; </div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;  <span class="keyword">auto</span> AssocOpcode = BinOp1-&gt;<a class="code" href="classllvm_1_1BinaryOperator.html#a31bf07f3f61525486633bc1d0bbaf029">getOpcode</a>();</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;  <span class="keyword">auto</span> *BinOp2 = dyn_cast&lt;BinaryOperator&gt;(Cast-&gt;getOperand(0));</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;  <span class="keywordflow">if</span> (!BinOp2 || !BinOp2-&gt;hasOneUse() || BinOp2-&gt;getOpcode() != AssocOpcode)</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160; </div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>, *C2;</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(BinOp1-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(1), <a class="code" href="namespacellvm_1_1PatternMatch.html#aadd209ba7e1bfa8113a609e09a7fe62f">m_Constant</a>(<a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>)) ||</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;      !<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(BinOp2-&gt;getOperand(1), <a class="code" href="namespacellvm_1_1PatternMatch.html#aadd209ba7e1bfa8113a609e09a7fe62f">m_Constant</a>(C2)))</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160; </div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;  <span class="comment">// TODO: This assumes a zext cast.</span></div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;  <span class="comment">// Eg, if it was a trunc, we&#39;d cast C1 to the source type because casting C2</span></div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;  <span class="comment">// to the destination type might lose bits.</span></div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160; </div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;  <span class="comment">// Fold the constants together in the destination type:</span></div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;  <span class="comment">// (op (cast (op X, C2)), C1) --&gt; (op (cast X), FoldedC)</span></div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *DestTy = <a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>-&gt;getType();</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *CastC2 = <a class="code" href="classllvm_1_1ConstantExpr.html#a49b69843927f7cd96d866768b3aec92b">ConstantExpr::getCast</a>(CastOpcode, C2, DestTy);</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *FoldedC = <a class="code" href="classllvm_1_1ConstantExpr.html#ab00c6dc5086df2a37cd2e78715968861">ConstantExpr::get</a>(AssocOpcode, <a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>, CastC2);</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;  IC.<a class="code" href="classllvm_1_1InstCombiner.html#abc13043585e5845ce7fc26b858851ec9">replaceOperand</a>(*Cast, 0, BinOp2-&gt;getOperand(0));</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;  IC.<a class="code" href="classllvm_1_1InstCombiner.html#abc13043585e5845ce7fc26b858851ec9">replaceOperand</a>(*BinOp1, 1, FoldedC);</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;}</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160; </div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;<span class="comment">// Simplifies IntToPtr/PtrToInt RoundTrip Cast To BitCast.</span></div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;<span class="comment">// inttoptr ( ptrtoint (x) ) --&gt; x</span></div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;<a class="code" href="classllvm_1_1Value.html">Value</a> *InstCombinerImpl::simplifyIntToPtrRoundTripCast(<a class="code" href="classllvm_1_1Value.html">Value</a> *Val) {</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;  <span class="keyword">auto</span> *IntToPtr = dyn_cast&lt;IntToPtrInst&gt;(Val);</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;  <span class="keywordflow">if</span> (IntToPtr &amp;&amp; <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getTypeSizeInBits(IntToPtr-&gt;getDestTy()) ==</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;                      <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getTypeSizeInBits(IntToPtr-&gt;getSrcTy())) {</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    <span class="keyword">auto</span> *PtrToInt = dyn_cast&lt;PtrToIntInst&gt;(IntToPtr-&gt;getOperand(0));</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *CastTy = IntToPtr-&gt;getDestTy();</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    <span class="keywordflow">if</span> (PtrToInt &amp;&amp;</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;        CastTy-&gt;<a class="code" href="classllvm_1_1Type.html#a5ab2d0b0f0b8ceec3b907184e7567197">getPointerAddressSpace</a>() ==</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;            PtrToInt-&gt;getSrcTy()-&gt;getPointerAddressSpace() &amp;&amp;</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;        <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getTypeSizeInBits(PtrToInt-&gt;getSrcTy()) ==</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;            <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getTypeSizeInBits(PtrToInt-&gt;getDestTy())) {</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1CastInst.html#a31d2885660f654b31d8741726c3ea8d9">CastInst::CreateBitOrPointerCast</a>(PtrToInt-&gt;getOperand(0), CastTy,</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;                                              <span class="stringliteral">&quot;&quot;</span>, PtrToInt);</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    }</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;  }</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;}</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;<span class="comment">/// This performs a few simplifications for operators that are associative or</span></div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;<span class="comment">/// commutative:</span></div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;<span class="comment">///  Commutative operators:</span></div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;<span class="comment">///  1. Order operands such that they are listed from right (least complex) to</span></div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;<span class="comment">///     left (most complex).  This puts constants before unary operators before</span></div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;<span class="comment">///     binary operators.</span></div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;<span class="comment">///  Associative operators:</span></div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;<span class="comment">///  2. Transform: &quot;(A op B) op C&quot; ==&gt; &quot;A op (B op C)&quot; if &quot;B op C&quot; simplifies.</span></div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;<span class="comment">///  3. Transform: &quot;A op (B op C)&quot; ==&gt; &quot;(A op B) op C&quot; if &quot;A op B&quot; simplifies.</span></div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;<span class="comment">///  Associative and commutative operators:</span></div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;<span class="comment">///  4. Transform: &quot;(A op B) op C&quot; ==&gt; &quot;(C op A) op B&quot; if &quot;C op A&quot; simplifies.</span></div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;<span class="comment">///  5. Transform: &quot;A op (B op C)&quot; ==&gt; &quot;B op (C op A)&quot; if &quot;C op A&quot; simplifies.</span></div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;<span class="comment">///  6. Transform: &quot;(A op C1) op (B op C2)&quot; ==&gt; &quot;(A op B) op (C1 op C2)&quot;</span></div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;<span class="comment">///     if C1 and C2 are constants.</span></div>
<div class="line"><a name="l00409"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombinerImpl.html#a225d5b1dcc0015e743f1dbbf348a9c36">  409</a></span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1InstCombinerImpl.html#a225d5b1dcc0015e743f1dbbf348a9c36">InstCombinerImpl::SimplifyAssociativeOrCommutative</a>(<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html#ac26154a24f393f523c87cc5f8239f36c">Instruction::BinaryOps</a> Opcode = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOpcode();</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;  <span class="keywordtype">bool</span> Changed = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160; </div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;  <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    <span class="comment">// Order operands such that they are listed from right (least complex) to</span></div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;    <span class="comment">// left (most complex).  This puts constants before unary operators before</span></div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;    <span class="comment">// binary operators.</span></div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.isCommutative() &amp;&amp; getComplexity(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(0)) &lt;</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;        getComplexity(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(1)))</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;      Changed = !<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.swapOperands();</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160; </div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;    <a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> *Op0 = dyn_cast&lt;BinaryOperator&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(0));</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;    <a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> *Op1 = dyn_cast&lt;BinaryOperator&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(1));</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160; </div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.isAssociative()) {</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;      <span class="comment">// Transform: &quot;(A op B) op C&quot; ==&gt; &quot;A op (B op C)&quot; if &quot;B op C&quot; simplifies.</span></div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;      <span class="keywordflow">if</span> (Op0 &amp;&amp; Op0-&gt;<a class="code" href="classllvm_1_1BinaryOperator.html#a31bf07f3f61525486633bc1d0bbaf029">getOpcode</a>() == Opcode) {</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *A = Op0-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0);</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a> = Op0-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(1);</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(1);</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160; </div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;        <span class="comment">// Does &quot;B op C&quot; simplify?</span></div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V = <a class="code" href="namespacellvm.html#aa750395459fa1eb7130d6de8e3d074f6">simplifyBinOp</a>(Opcode, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, SQ.getWithInstruction(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))) {</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;          <span class="comment">// It simplifies to V.  Form &quot;A op V&quot;.</span></div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;          replaceOperand(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, 0, A);</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;          replaceOperand(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, 1, V);</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;          <span class="keywordtype">bool</span> IsNUW = <a class="code" href="InstructionCombining_8cpp.html#ac7f3587a2e9b666879ee5067a9593253">hasNoUnsignedWrap</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &amp;&amp; <a class="code" href="InstructionCombining_8cpp.html#ac7f3587a2e9b666879ee5067a9593253">hasNoUnsignedWrap</a>(*Op0);</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;          <span class="keywordtype">bool</span> IsNSW = <a class="code" href="InstructionCombining_8cpp.html#af93581c21ffd5eccbb745274f226dbe7">maintainNoSignedWrap</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>) &amp;&amp; <a class="code" href="InstructionCombining_8cpp.html#a3bd26297d4422f25aaeacd40ffbbc478">hasNoSignedWrap</a>(*Op0);</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160; </div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;          <span class="comment">// Conservatively clear all optional flags since they may not be</span></div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;          <span class="comment">// preserved by the reassociation. Reset nsw/nuw based on the above</span></div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;          <span class="comment">// analysis.</span></div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;          <a class="code" href="InstructionCombining_8cpp.html#a4904699fe3329a5027ccd76991b0c1e4">ClearSubclassDataAfterReassociation</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160; </div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;          <span class="comment">// Note: this is only valid because SimplifyBinOp doesn&#39;t look at</span></div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;          <span class="comment">// the operands to Op0.</span></div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;          <span class="keywordflow">if</span> (IsNUW)</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;            <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.setHasNoUnsignedWrap(<span class="keyword">true</span>);</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160; </div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;          <span class="keywordflow">if</span> (IsNSW)</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;            <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.setHasNoSignedWrap(<span class="keyword">true</span>);</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160; </div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;          Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;          ++NumReassoc;</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;        }</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;      }</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160; </div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;      <span class="comment">// Transform: &quot;A op (B op C)&quot; ==&gt; &quot;(A op B) op C&quot; if &quot;A op B&quot; simplifies.</span></div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;      <span class="keywordflow">if</span> (Op1 &amp;&amp; Op1-&gt;<a class="code" href="classllvm_1_1BinaryOperator.html#a31bf07f3f61525486633bc1d0bbaf029">getOpcode</a>() == Opcode) {</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *A = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(0);</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a> = Op1-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0);</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = Op1-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(1);</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160; </div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;        <span class="comment">// Does &quot;A op B&quot; simplify?</span></div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V = <a class="code" href="namespacellvm.html#aa750395459fa1eb7130d6de8e3d074f6">simplifyBinOp</a>(Opcode, A, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, SQ.getWithInstruction(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))) {</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;          <span class="comment">// It simplifies to V.  Form &quot;V op C&quot;.</span></div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;          replaceOperand(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, 0, V);</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;          replaceOperand(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, 1, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;          <span class="comment">// Conservatively clear the optional flags, since they may not be</span></div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;          <span class="comment">// preserved by the reassociation.</span></div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;          <a class="code" href="InstructionCombining_8cpp.html#a4904699fe3329a5027ccd76991b0c1e4">ClearSubclassDataAfterReassociation</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;          Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;          ++NumReassoc;</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;        }</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;      }</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;    }</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160; </div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.isAssociative() &amp;&amp; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.isCommutative()) {</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="InstructionCombining_8cpp.html#a41c00c458f7416c93927bc2f332b3898">simplifyAssocCastAssoc</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, *<span class="keyword">this</span>)) {</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;        Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;        ++NumReassoc;</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;      }</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160; </div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;      <span class="comment">// Transform: &quot;(A op B) op C&quot; ==&gt; &quot;(C op A) op B&quot; if &quot;C op A&quot; simplifies.</span></div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;      <span class="keywordflow">if</span> (Op0 &amp;&amp; Op0-&gt;<a class="code" href="classllvm_1_1BinaryOperator.html#a31bf07f3f61525486633bc1d0bbaf029">getOpcode</a>() == Opcode) {</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *A = Op0-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0);</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a> = Op0-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(1);</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(1);</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160; </div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;        <span class="comment">// Does &quot;C op A&quot; simplify?</span></div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V = <a class="code" href="namespacellvm.html#aa750395459fa1eb7130d6de8e3d074f6">simplifyBinOp</a>(Opcode, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, A, SQ.getWithInstruction(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))) {</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;          <span class="comment">// It simplifies to V.  Form &quot;V op B&quot;.</span></div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;          replaceOperand(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, 0, V);</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;          replaceOperand(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, 1, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;          <span class="comment">// Conservatively clear the optional flags, since they may not be</span></div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;          <span class="comment">// preserved by the reassociation.</span></div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;          <a class="code" href="InstructionCombining_8cpp.html#a4904699fe3329a5027ccd76991b0c1e4">ClearSubclassDataAfterReassociation</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;          Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;          ++NumReassoc;</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;        }</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;      }</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160; </div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;      <span class="comment">// Transform: &quot;A op (B op C)&quot; ==&gt; &quot;B op (C op A)&quot; if &quot;C op A&quot; simplifies.</span></div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;      <span class="keywordflow">if</span> (Op1 &amp;&amp; Op1-&gt;<a class="code" href="classllvm_1_1BinaryOperator.html#a31bf07f3f61525486633bc1d0bbaf029">getOpcode</a>() == Opcode) {</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *A = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(0);</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a> = Op1-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0);</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = Op1-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(1);</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160; </div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;        <span class="comment">// Does &quot;C op A&quot; simplify?</span></div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V = <a class="code" href="namespacellvm.html#aa750395459fa1eb7130d6de8e3d074f6">simplifyBinOp</a>(Opcode, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, A, SQ.getWithInstruction(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))) {</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;          <span class="comment">// It simplifies to V.  Form &quot;B op V&quot;.</span></div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;          replaceOperand(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, 0, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;          replaceOperand(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, 1, V);</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;          <span class="comment">// Conservatively clear the optional flags, since they may not be</span></div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;          <span class="comment">// preserved by the reassociation.</span></div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;          <a class="code" href="InstructionCombining_8cpp.html#a4904699fe3329a5027ccd76991b0c1e4">ClearSubclassDataAfterReassociation</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;          Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;          ++NumReassoc;</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;        }</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;      }</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160; </div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;      <span class="comment">// Transform: &quot;(A op C1) op (B op C2)&quot; ==&gt; &quot;(A op B) op (C1 op C2)&quot;</span></div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;      <span class="comment">// if C1 and C2 are constants.</span></div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *A, *<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>;</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;      <a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>, *C2, *CRes;</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;      <span class="keywordflow">if</span> (Op0 &amp;&amp; Op1 &amp;&amp;</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;          Op0-&gt;<a class="code" href="classllvm_1_1BinaryOperator.html#a31bf07f3f61525486633bc1d0bbaf029">getOpcode</a>() == Opcode &amp;&amp; Op1-&gt;<a class="code" href="classllvm_1_1BinaryOperator.html#a31bf07f3f61525486633bc1d0bbaf029">getOpcode</a>() == Opcode &amp;&amp;</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;          <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a43ac4fbaaf63a88eb5ac05f6d3e5649c">m_BinOp</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#aadd209ba7e1bfa8113a609e09a7fe62f">m_Constant</a>(<a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>)))) &amp;&amp;</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;          <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a43ac4fbaaf63a88eb5ac05f6d3e5649c">m_BinOp</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#aadd209ba7e1bfa8113a609e09a7fe62f">m_Constant</a>(C2)))) &amp;&amp;</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;          (CRes = <a class="code" href="namespacellvm.html#a964455f36837281d37f2a44e2fcb4cca">ConstantFoldBinaryOpOperands</a>(Opcode, <a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>, C2, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>))) {</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;        <span class="keywordtype">bool</span> IsNUW = <a class="code" href="InstructionCombining_8cpp.html#ac7f3587a2e9b666879ee5067a9593253">hasNoUnsignedWrap</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &amp;&amp;</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;           <a class="code" href="InstructionCombining_8cpp.html#ac7f3587a2e9b666879ee5067a9593253">hasNoUnsignedWrap</a>(*Op0) &amp;&amp;</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;           <a class="code" href="InstructionCombining_8cpp.html#ac7f3587a2e9b666879ee5067a9593253">hasNoUnsignedWrap</a>(*Op1);</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;         <a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> *NewBO = (IsNUW &amp;&amp; Opcode == <a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a2b016c207343046b2bac45e69e76dcec">Instruction::Add</a>) ?</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;           <a class="code" href="classllvm_1_1BinaryOperator.html#af85efaaa4ecdbcac97c45c8351d826b7">BinaryOperator::CreateNUW</a>(Opcode, A, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>) :</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;           <a class="code" href="classllvm_1_1BinaryOperator.html#a02ce9966395063ac501ecbc1623deda4">BinaryOperator::Create</a>(Opcode, A, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160; </div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;         <span class="keywordflow">if</span> (isa&lt;FPMathOperator&gt;(NewBO)) {</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;          <a class="code" href="classllvm_1_1FastMathFlags.html">FastMathFlags</a> Flags = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getFastMathFlags();</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;          Flags &amp;= Op0-&gt;<a class="code" href="classllvm_1_1Instruction.html#a9a167f91db810097d281b1ed627f4575">getFastMathFlags</a>();</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;          Flags &amp;= Op1-&gt;<a class="code" href="classllvm_1_1Instruction.html#a9a167f91db810097d281b1ed627f4575">getFastMathFlags</a>();</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;          NewBO-&gt;<a class="code" href="classllvm_1_1Instruction.html#a5ca8aa62fa8b3fe5bc0e8fbe5d8b8b7a">setFastMathFlags</a>(Flags);</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;        }</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;        InsertNewInstWith(NewBO, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;        NewBO-&gt;<a class="code" href="classllvm_1_1Value.html#ae855357b6c5e6e7ed1869272708a3a84">takeName</a>(Op1);</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;        replaceOperand(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, 0, NewBO);</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;        replaceOperand(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, 1, CRes);</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;        <span class="comment">// Conservatively clear the optional flags, since they may not be</span></div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;        <span class="comment">// preserved by the reassociation.</span></div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;        <a class="code" href="InstructionCombining_8cpp.html#a4904699fe3329a5027ccd76991b0c1e4">ClearSubclassDataAfterReassociation</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;        <span class="keywordflow">if</span> (IsNUW)</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;          <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.setHasNoUnsignedWrap(<span class="keyword">true</span>);</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160; </div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;        Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;      }</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;    }</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160; </div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;    <span class="comment">// No further simplifications.</span></div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;    <span class="keywordflow">return</span> Changed;</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;  } <span class="keywordflow">while</span> (<span class="keyword">true</span>);</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;}</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;<span class="comment">/// Return whether &quot;X LOp (Y ROp Z)&quot; is always equal to</span></div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;<span class="comment">/// &quot;(X LOp Y) ROp (X LOp Z)&quot;.</span></div>
<div class="line"><a name="l00570"></a><span class="lineno"><a class="line" href="InstructionCombining_8cpp.html#a615b5564b60828081d3682b75710627c">  570</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="InstructionCombining_8cpp.html#a615b5564b60828081d3682b75710627c">leftDistributesOverRight</a>(<a class="code" href="classllvm_1_1Instruction.html#ac26154a24f393f523c87cc5f8239f36c">Instruction::BinaryOps</a> LOp,</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;                                     <a class="code" href="classllvm_1_1Instruction.html#ac26154a24f393f523c87cc5f8239f36c">Instruction::BinaryOps</a> ROp) {</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;  <span class="comment">// X &amp; (Y | Z) &lt;--&gt; (X &amp; Y) | (X &amp; Z)</span></div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;  <span class="comment">// X &amp; (Y ^ Z) &lt;--&gt; (X &amp; Y) ^ (X &amp; Z)</span></div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;  <span class="keywordflow">if</span> (LOp == Instruction::And)</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;    <span class="keywordflow">return</span> ROp == Instruction::Or || ROp == Instruction::Xor;</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160; </div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;  <span class="comment">// X | (Y &amp; Z) &lt;--&gt; (X | Y) &amp; (X | Z)</span></div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;  <span class="keywordflow">if</span> (LOp == Instruction::Or)</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;    <span class="keywordflow">return</span> ROp == Instruction::And;</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160; </div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;  <span class="comment">// X * (Y + Z) &lt;--&gt; (X * Y) + (X * Z)</span></div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;  <span class="comment">// X * (Y - Z) &lt;--&gt; (X * Y) - (X * Z)</span></div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;  <span class="keywordflow">if</span> (LOp == <a class="code" href="X86PartialReduction_8cpp.html#ae0f503db91504a3f3440ab81260e4134">Instruction::Mul</a>)</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;    <span class="keywordflow">return</span> ROp == <a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a2b016c207343046b2bac45e69e76dcec">Instruction::Add</a> || ROp == Instruction::Sub;</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160; </div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;}</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;<span class="comment">/// Return whether &quot;(X LOp Y) ROp Z&quot; is always equal to</span></div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;<span class="comment">/// &quot;(X ROp Z) LOp (Y ROp Z)&quot;.</span></div>
<div class="line"><a name="l00591"></a><span class="lineno"><a class="line" href="InstructionCombining_8cpp.html#a9f7798eb98807e7ce804788b339a6978">  591</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="InstructionCombining_8cpp.html#a9f7798eb98807e7ce804788b339a6978">rightDistributesOverLeft</a>(<a class="code" href="classllvm_1_1Instruction.html#ac26154a24f393f523c87cc5f8239f36c">Instruction::BinaryOps</a> LOp,</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;                                     <a class="code" href="classllvm_1_1Instruction.html#ac26154a24f393f523c87cc5f8239f36c">Instruction::BinaryOps</a> ROp) {</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html#a55743bd32282bf6f87aeb49237b1fb68">Instruction::isCommutative</a>(ROp))</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="InstructionCombining_8cpp.html#a615b5564b60828081d3682b75710627c">leftDistributesOverRight</a>(ROp, LOp);</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160; </div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;  <span class="comment">// (X {&amp;|^} Y) &gt;&gt; Z &lt;--&gt; (X &gt;&gt; Z) {&amp;|^} (Y &gt;&gt; Z) for all shifts.</span></div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1Instruction.html#ac3376e3bd632ad72252638ae43295ce4">Instruction::isBitwiseLogicOp</a>(LOp) &amp;&amp; <a class="code" href="classllvm_1_1Instruction.html#ac5984d6827f6e6922bed00bf03ba9552">Instruction::isShift</a>(ROp);</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160; </div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;  <span class="comment">// TODO: It would be nice to handle division, aka &quot;(X + Y)/Z = X/Z + Y/Z&quot;,</span></div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;  <span class="comment">// but this requires knowing that the addition does not overflow and other</span></div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;  <span class="comment">// such subtleties.</span></div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;}</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;<span class="comment">/// This function returns identity value for given opcode, which can be used to</span></div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;<span class="comment">/// factor patterns like (X * 2) + X ==&gt; (X * 2) + (X * 1) ==&gt; X * (2 + 1).</span></div>
<div class="line"><a name="l00606"></a><span class="lineno"><a class="line" href="InstructionCombining_8cpp.html#a2029e9ec753baf78a37b12ce3d2dd7f8">  606</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="InstructionCombining_8cpp.html#a2029e9ec753baf78a37b12ce3d2dd7f8">getIdentityValue</a>(<a class="code" href="classllvm_1_1Instruction.html#ac26154a24f393f523c87cc5f8239f36c">Instruction::BinaryOps</a> Opcode, <a class="code" href="classllvm_1_1Value.html">Value</a> *V) {</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;  <span class="keywordflow">if</span> (isa&lt;Constant&gt;(V))</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160; </div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1ConstantExpr.html#ae9c2f00a962cb8e0316cf3548a5d8029">ConstantExpr::getBinOpIdentity</a>(Opcode, V-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>());</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;}</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;<span class="comment">/// This function predicates factorization using distributive laws. By default,</span></div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;<span class="comment">/// it just returns the &#39;Op&#39; inputs. But for special-cases like</span></div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;<span class="comment">/// &#39;add(shl(X, 5), ...)&#39;, this function will have TopOpcode == Instruction::Add</span></div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;<span class="comment">/// and Op = shl(X, 5). The &#39;shl&#39; is treated as the more general &#39;mul X, 32&#39; to</span></div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;<span class="comment">/// allow more factorization opportunities.</span></div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1Instruction.html#ac26154a24f393f523c87cc5f8239f36c">Instruction::BinaryOps</a></div>
<div class="line"><a name="l00619"></a><span class="lineno"><a class="line" href="InstructionCombining_8cpp.html#ac58ed8dba579141f3f64a3d16224e79c">  619</a></span>&#160;<a class="code" href="InstructionCombining_8cpp.html#ac58ed8dba579141f3f64a3d16224e79c">getBinOpsForFactorization</a>(<a class="code" href="classllvm_1_1Instruction.html#ac26154a24f393f523c87cc5f8239f36c">Instruction::BinaryOps</a> TopOpcode, <a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> *<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>,</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;                          <a class="code" href="classllvm_1_1Value.html">Value</a> *&amp;<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="classllvm_1_1Value.html">Value</a> *&amp;<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>) {</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a> &amp;&amp; <span class="stringliteral">&quot;Expected a binary operator&quot;</span>);</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;  <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a> = <a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>-&gt;getOperand(0);</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;  <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a> = <a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>-&gt;getOperand(1);</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;  <span class="keywordflow">if</span> (TopOpcode == <a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a2b016c207343046b2bac45e69e76dcec">Instruction::Add</a> || TopOpcode == Instruction::Sub) {</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;    <a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>;</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a37668d9884c78ac77254cf9fb8a4276a">m_Shl</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(), <a class="code" href="namespacellvm_1_1PatternMatch.html#aadd209ba7e1bfa8113a609e09a7fe62f">m_Constant</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)))) {</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;      <span class="comment">// X &lt;&lt; C --&gt; X * (1 &lt;&lt; C)</span></div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;      <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a> = <a class="code" href="classllvm_1_1ConstantExpr.html#aa5ad9e9e7cc67e1675d8d1631a73e625">ConstantExpr::getShl</a>(<a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>-&gt;getType(), 1), <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="X86PartialReduction_8cpp.html#ae0f503db91504a3f3440ab81260e4134">Instruction::Mul</a>;</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;    }</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;    <span class="comment">// TODO: We can add other conversions e.g. shr =&gt; div etc.</span></div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;  }</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>-&gt;getOpcode();</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;}</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;<span class="comment">/// This tries to simplify binary operations by factorizing out common terms</span></div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;<span class="comment">/// (e. g. &quot;(A*B)+(A*C)&quot; -&gt; &quot;A*(B+C)&quot;).</span></div>
<div class="line"><a name="l00638"></a><span class="lineno"><a class="line" href="InstructionCombining_8cpp.html#adb5b11056d2ccf65787e4fce55fbc79f">  638</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="InstructionCombining_8cpp.html#adb5b11056d2ccf65787e4fce55fbc79f">tryFactorization</a>(<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <span class="keyword">const</span> <a class="code" href="structllvm_1_1SimplifyQuery.html">SimplifyQuery</a> &amp;SQ,</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;                               <a class="code" href="classllvm_1_1IRBuilder.html">InstCombiner::BuilderTy</a> &amp;<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>,</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;                               <a class="code" href="classllvm_1_1Instruction.html#ac26154a24f393f523c87cc5f8239f36c">Instruction::BinaryOps</a> InnerOpcode, <a class="code" href="classllvm_1_1Value.html">Value</a> *A,</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;                               <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>) {</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(A &amp;&amp; <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a> &amp;&amp; <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> &amp;&amp; <a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a> &amp;&amp; <span class="stringliteral">&quot;All values must be provided&quot;</span>);</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160; </div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *V = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *RetVal = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a> = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(0), *<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a> = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(1);</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html#ac26154a24f393f523c87cc5f8239f36c">Instruction::BinaryOps</a> TopLevelOpcode = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOpcode();</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160; </div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;  <span class="comment">// Does &quot;X op&#39; Y&quot; always equal &quot;Y op&#39; X&quot;?</span></div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;  <span class="keywordtype">bool</span> InnerCommutative = <a class="code" href="classllvm_1_1Instruction.html#a55743bd32282bf6f87aeb49237b1fb68">Instruction::isCommutative</a>(InnerOpcode);</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160; </div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;  <span class="comment">// Does &quot;X op&#39; (Y op Z)&quot; always equal &quot;(X op&#39; Y) op (X op&#39; Z)&quot;?</span></div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="InstructionCombining_8cpp.html#a615b5564b60828081d3682b75710627c">leftDistributesOverRight</a>(InnerOpcode, TopLevelOpcode)) {</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;    <span class="comment">// Does the instruction have the form &quot;(A op&#39; B) op (A op&#39; D)&quot; or, in the</span></div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;    <span class="comment">// commutative case, &quot;(A op&#39; B) op (C op&#39; A)&quot;?</span></div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;    <span class="keywordflow">if</span> (A == <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> || (InnerCommutative &amp;&amp; A == <a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>)) {</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;      <span class="keywordflow">if</span> (A != <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;        <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, <a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>);</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;      <span class="comment">// Consider forming &quot;A op&#39; (B op D)&quot;.</span></div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;      <span class="comment">// If &quot;B op D&quot; simplifies then it can be formed with no cost.</span></div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;      V = <a class="code" href="namespacellvm.html#aa750395459fa1eb7130d6de8e3d074f6">simplifyBinOp</a>(TopLevelOpcode, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>, SQ.<a class="code" href="structllvm_1_1SimplifyQuery.html#aaf05c1194f5c7869a00434c13c46c228">getWithInstruction</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>));</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160; </div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;      <span class="comment">// If &quot;B op D&quot; doesn&#39;t simplify then only go on if one of the existing</span></div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;      <span class="comment">// operations &quot;A op&#39; B&quot; and &quot;C op&#39; D&quot; will be zapped as no longer used.</span></div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;      <span class="keywordflow">if</span> (!V &amp;&amp; (<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>() || <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>()))</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;        V = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBinOp(TopLevelOpcode, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>-&gt;<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>());</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;      <span class="keywordflow">if</span> (V)</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;        RetVal = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBinOp(InnerOpcode, A, V);</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;    }</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;  }</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160; </div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;  <span class="comment">// Does &quot;(X op Y) op&#39; Z&quot; always equal &quot;(X op&#39; Z) op (Y op&#39; Z)&quot;?</span></div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;  <span class="keywordflow">if</span> (!RetVal &amp;&amp; <a class="code" href="InstructionCombining_8cpp.html#a9f7798eb98807e7ce804788b339a6978">rightDistributesOverLeft</a>(TopLevelOpcode, InnerOpcode)) {</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;    <span class="comment">// Does the instruction have the form &quot;(A op&#39; B) op (C op&#39; B)&quot; or, in the</span></div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;    <span class="comment">// commutative case, &quot;(A op&#39; B) op (B op&#39; D)&quot;?</span></div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a> == <a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a> || (InnerCommutative &amp;&amp; <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a> == <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)) {</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a> != <a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>)</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;        <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, <a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>);</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;      <span class="comment">// Consider forming &quot;(A op C) op&#39; B&quot;.</span></div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;      <span class="comment">// If &quot;A op C&quot; simplifies then it can be formed with no cost.</span></div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;      V = <a class="code" href="namespacellvm.html#aa750395459fa1eb7130d6de8e3d074f6">simplifyBinOp</a>(TopLevelOpcode, A, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, SQ.<a class="code" href="structllvm_1_1SimplifyQuery.html#aaf05c1194f5c7869a00434c13c46c228">getWithInstruction</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>));</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160; </div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;      <span class="comment">// If &quot;A op C&quot; doesn&#39;t simplify then only go on if one of the existing</span></div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;      <span class="comment">// operations &quot;A op&#39; B&quot; and &quot;C op&#39; D&quot; will be zapped as no longer used.</span></div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;      <span class="keywordflow">if</span> (!V &amp;&amp; (<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>() || <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>()))</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;        V = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBinOp(TopLevelOpcode, A, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>-&gt;<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>());</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;      <span class="keywordflow">if</span> (V)</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;        RetVal = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBinOp(InnerOpcode, V, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;    }</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;  }</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160; </div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;  <span class="keywordflow">if</span> (!RetVal)</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160; </div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;  ++NumFactor;</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;  RetVal-&gt;<a class="code" href="classllvm_1_1Value.html#ae855357b6c5e6e7ed1869272708a3a84">takeName</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160; </div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;  <span class="comment">// Try to add no-overflow flags to the final value.</span></div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;  <span class="keywordflow">if</span> (isa&lt;OverflowingBinaryOperator&gt;(RetVal)) {</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;    <span class="keywordtype">bool</span> HasNSW = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;    <span class="keywordtype">bool</span> HasNUW = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;    <span class="keywordflow">if</span> (isa&lt;OverflowingBinaryOperator&gt;(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;      HasNSW = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.hasNoSignedWrap();</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;      HasNUW = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.hasNoUnsignedWrap();</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;    }</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> *LOBO = dyn_cast&lt;OverflowingBinaryOperator&gt;(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>)) {</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;      HasNSW &amp;= LOBO-&gt;hasNoSignedWrap();</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;      HasNUW &amp;= LOBO-&gt;hasNoUnsignedWrap();</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;    }</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160; </div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> *ROBO = dyn_cast&lt;OverflowingBinaryOperator&gt;(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>)) {</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;      HasNSW &amp;= ROBO-&gt;hasNoSignedWrap();</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;      HasNUW &amp;= ROBO-&gt;hasNoUnsignedWrap();</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;    }</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160; </div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;    <span class="keywordflow">if</span> (TopLevelOpcode == <a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a2b016c207343046b2bac45e69e76dcec">Instruction::Add</a> &amp;&amp; InnerOpcode == <a class="code" href="X86PartialReduction_8cpp.html#ae0f503db91504a3f3440ab81260e4134">Instruction::Mul</a>) {</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;      <span class="comment">// We can propagate &#39;nsw&#39; if we know that</span></div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;      <span class="comment">//  %Y = mul nsw i16 %X, C</span></div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;      <span class="comment">//  %Z = add nsw i16 %Y, %X</span></div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;      <span class="comment">// =&gt;</span></div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;      <span class="comment">//  %Z = mul nsw i16 %X, C+1</span></div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;      <span class="comment">//</span></div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;      <span class="comment">// iff C+1 isn&#39;t INT_MIN</span></div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *CInt;</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(V, <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(CInt)) &amp;&amp; !CInt-&gt;<a class="code" href="classllvm_1_1APInt.html#a1f04e382556a817950fd0390aeaf9b0e">isMinSignedValue</a>())</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;        cast&lt;Instruction&gt;(RetVal)-&gt;setHasNoSignedWrap(HasNSW);</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160; </div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;      <span class="comment">// nuw can be propagated with any constant or nuw value.</span></div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;      cast&lt;Instruction&gt;(RetVal)-&gt;setHasNoUnsignedWrap(HasNUW);</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;    }</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;  }</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;  <span class="keywordflow">return</span> RetVal;</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;}</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160; </div>
<div class="line"><a name="l00735"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombinerImpl.html#aebf722c3ce9439ef88175255d8669080">  735</a></span>&#160;<a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="classllvm_1_1InstCombinerImpl.html#aebf722c3ce9439ef88175255d8669080">InstCombinerImpl::tryFactorizationFolds</a>(<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a> = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(0), *<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a> = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(1);</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;  <a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> *Op0 = dyn_cast&lt;BinaryOperator&gt;(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>);</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;  <a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> *Op1 = dyn_cast&lt;BinaryOperator&gt;(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>);</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html#ac26154a24f393f523c87cc5f8239f36c">Instruction::BinaryOps</a> TopLevelOpcode = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOpcode();</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *A, *<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, *<a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>;</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html#ac26154a24f393f523c87cc5f8239f36c">Instruction::BinaryOps</a> LHSOpcode, RHSOpcode;</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160; </div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;  <span class="keywordflow">if</span> (Op0)</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;    LHSOpcode = <a class="code" href="InstructionCombining_8cpp.html#ac58ed8dba579141f3f64a3d16224e79c">getBinOpsForFactorization</a>(TopLevelOpcode, Op0, A, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;  <span class="keywordflow">if</span> (Op1)</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;    RHSOpcode = <a class="code" href="InstructionCombining_8cpp.html#ac58ed8dba579141f3f64a3d16224e79c">getBinOpsForFactorization</a>(TopLevelOpcode, Op1, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, <a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>);</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160; </div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;  <span class="comment">// The instruction has the form &quot;(A op&#39; B) op (C op&#39; D)&quot;.  Try to factorize</span></div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;  <span class="comment">// a common term.</span></div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;  <span class="keywordflow">if</span> (Op0 &amp;&amp; Op1 &amp;&amp; LHSOpcode == RHSOpcode)</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V = <a class="code" href="InstructionCombining_8cpp.html#adb5b11056d2ccf65787e4fce55fbc79f">tryFactorization</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, SQ, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>, LHSOpcode, A, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, <a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>))</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;      <span class="keywordflow">return</span> V;</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160; </div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;  <span class="comment">// The instruction has the form &quot;(A op&#39; B) op (C)&quot;.  Try to factorize common</span></div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;  <span class="comment">// term.</span></div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;  <span class="keywordflow">if</span> (Op0)</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *Ident = <a class="code" href="InstructionCombining_8cpp.html#a2029e9ec753baf78a37b12ce3d2dd7f8">getIdentityValue</a>(LHSOpcode, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>))</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V =</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;              <a class="code" href="InstructionCombining_8cpp.html#adb5b11056d2ccf65787e4fce55fbc79f">tryFactorization</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, SQ, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>, LHSOpcode, A, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, Ident))</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;        <span class="keywordflow">return</span> V;</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160; </div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;  <span class="comment">// The instruction has the form &quot;(B) op (C op&#39; D)&quot;.  Try to factorize common</span></div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;  <span class="comment">// term.</span></div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;  <span class="keywordflow">if</span> (Op1)</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *Ident = <a class="code" href="InstructionCombining_8cpp.html#a2029e9ec753baf78a37b12ce3d2dd7f8">getIdentityValue</a>(RHSOpcode, <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>))</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V =</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;              <a class="code" href="InstructionCombining_8cpp.html#adb5b11056d2ccf65787e4fce55fbc79f">tryFactorization</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, SQ, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>, RHSOpcode, <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, Ident, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, <a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>))</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;        <span class="keywordflow">return</span> V;</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160; </div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;}</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;<span class="comment">/// This tries to simplify binary operations which some other binary operation</span></div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;<span class="comment">/// distributes over either by factorizing out common terms</span></div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;<span class="comment">/// (eg &quot;(A*B)+(A*C)&quot; -&gt; &quot;A*(B+C)&quot;) or expanding out if this results in</span></div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;<span class="comment">/// simplifications (eg: &quot;A &amp; (B | C) -&gt; (A&amp;B) | (A&amp;C)&quot; if this is a win).</span></div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;<span class="comment">/// Returns the simplified value, or null if it didn&#39;t simplify.</span></div>
<div class="line"><a name="l00778"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombinerImpl.html#a2511e442d198696042ad2a39cad89059">  778</a></span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="classllvm_1_1InstCombinerImpl.html#a2511e442d198696042ad2a39cad89059">InstCombinerImpl::foldUsingDistributiveLaws</a>(<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a> = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(0), *<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a> = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(1);</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;  <a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> *Op0 = dyn_cast&lt;BinaryOperator&gt;(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>);</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;  <a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> *Op1 = dyn_cast&lt;BinaryOperator&gt;(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>);</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html#ac26154a24f393f523c87cc5f8239f36c">Instruction::BinaryOps</a> TopLevelOpcode = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOpcode();</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160; </div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;  <span class="comment">// Factorization.</span></div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *R = tryFactorizationFolds(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;    <span class="keywordflow">return</span> R;</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160; </div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;  <span class="comment">// Expansion.</span></div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;  <span class="keywordflow">if</span> (Op0 &amp;&amp; <a class="code" href="InstructionCombining_8cpp.html#a9f7798eb98807e7ce804788b339a6978">rightDistributesOverLeft</a>(Op0-&gt;<a class="code" href="classllvm_1_1BinaryOperator.html#a31bf07f3f61525486633bc1d0bbaf029">getOpcode</a>(), TopLevelOpcode)) {</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;    <span class="comment">// The instruction has the form &quot;(A op&#39; B) op C&quot;.  See if expanding it out</span></div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;    <span class="comment">// to &quot;(A op C) op&#39; (B op C)&quot; results in simplifications.</span></div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *A = Op0-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0), *<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a> = Op0-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(1), *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>;</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html#ac26154a24f393f523c87cc5f8239f36c">Instruction::BinaryOps</a> InnerOpcode = Op0-&gt;<a class="code" href="classllvm_1_1BinaryOperator.html#a31bf07f3f61525486633bc1d0bbaf029">getOpcode</a>(); <span class="comment">// op&#39;</span></div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160; </div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;    <span class="comment">// Disable the use of undef because it&#39;s not safe to distribute undef.</span></div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;    <span class="keyword">auto</span> SQDistributive = SQ.getWithInstruction(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>).getWithoutUndef();</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *L = <a class="code" href="namespacellvm.html#aa750395459fa1eb7130d6de8e3d074f6">simplifyBinOp</a>(TopLevelOpcode, A, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, SQDistributive);</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *R = <a class="code" href="namespacellvm.html#aa750395459fa1eb7130d6de8e3d074f6">simplifyBinOp</a>(TopLevelOpcode, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, SQDistributive);</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160; </div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;    <span class="comment">// Do &quot;A op C&quot; and &quot;B op C&quot; both simplify?</span></div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;    <span class="keywordflow">if</span> (L &amp;&amp; R) {</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;      <span class="comment">// They do! Return &quot;L op&#39; R&quot;.</span></div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;      ++NumExpand;</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;      <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBinOp(InnerOpcode, L, R);</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;      <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;takeName(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>;</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;    }</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160; </div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;    <span class="comment">// Does &quot;A op C&quot; simplify to the identity value for the inner opcode?</span></div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;    <span class="keywordflow">if</span> (L &amp;&amp; L == <a class="code" href="classllvm_1_1ConstantExpr.html#ae9c2f00a962cb8e0316cf3548a5d8029">ConstantExpr::getBinOpIdentity</a>(InnerOpcode, L-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>())) {</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;      <span class="comment">// They do! Return &quot;B op C&quot;.</span></div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;      ++NumExpand;</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;      <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBinOp(TopLevelOpcode, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;      <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;takeName(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>;</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;    }</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160; </div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;    <span class="comment">// Does &quot;B op C&quot; simplify to the identity value for the inner opcode?</span></div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;    <span class="keywordflow">if</span> (R &amp;&amp; R == <a class="code" href="classllvm_1_1ConstantExpr.html#ae9c2f00a962cb8e0316cf3548a5d8029">ConstantExpr::getBinOpIdentity</a>(InnerOpcode, R-&gt;getType())) {</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;      <span class="comment">// They do! Return &quot;A op C&quot;.</span></div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;      ++NumExpand;</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;      <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBinOp(TopLevelOpcode, A, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;      <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;takeName(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>;</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;    }</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;  }</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160; </div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;  <span class="keywordflow">if</span> (Op1 &amp;&amp; <a class="code" href="InstructionCombining_8cpp.html#a615b5564b60828081d3682b75710627c">leftDistributesOverRight</a>(TopLevelOpcode, Op1-&gt;<a class="code" href="classllvm_1_1BinaryOperator.html#a31bf07f3f61525486633bc1d0bbaf029">getOpcode</a>())) {</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;    <span class="comment">// The instruction has the form &quot;A op (B op&#39; C)&quot;.  See if expanding it out</span></div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;    <span class="comment">// to &quot;(A op B) op&#39; (A op C)&quot; results in simplifications.</span></div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *A = <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, *<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a> = Op1-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0), *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = Op1-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(1);</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html#ac26154a24f393f523c87cc5f8239f36c">Instruction::BinaryOps</a> InnerOpcode = Op1-&gt;<a class="code" href="classllvm_1_1BinaryOperator.html#a31bf07f3f61525486633bc1d0bbaf029">getOpcode</a>(); <span class="comment">// op&#39;</span></div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160; </div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;    <span class="comment">// Disable the use of undef because it&#39;s not safe to distribute undef.</span></div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;    <span class="keyword">auto</span> SQDistributive = SQ.getWithInstruction(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>).getWithoutUndef();</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *L = <a class="code" href="namespacellvm.html#aa750395459fa1eb7130d6de8e3d074f6">simplifyBinOp</a>(TopLevelOpcode, A, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, SQDistributive);</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *R = <a class="code" href="namespacellvm.html#aa750395459fa1eb7130d6de8e3d074f6">simplifyBinOp</a>(TopLevelOpcode, A, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, SQDistributive);</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160; </div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;    <span class="comment">// Do &quot;A op B&quot; and &quot;A op C&quot; both simplify?</span></div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;    <span class="keywordflow">if</span> (L &amp;&amp; R) {</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;      <span class="comment">// They do! Return &quot;L op&#39; R&quot;.</span></div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;      ++NumExpand;</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;      A = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBinOp(InnerOpcode, L, R);</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;      A-&gt;takeName(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;      <span class="keywordflow">return</span> A;</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;    }</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160; </div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;    <span class="comment">// Does &quot;A op B&quot; simplify to the identity value for the inner opcode?</span></div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;    <span class="keywordflow">if</span> (L &amp;&amp; L == <a class="code" href="classllvm_1_1ConstantExpr.html#ae9c2f00a962cb8e0316cf3548a5d8029">ConstantExpr::getBinOpIdentity</a>(InnerOpcode, L-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>())) {</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;      <span class="comment">// They do! Return &quot;A op C&quot;.</span></div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;      ++NumExpand;</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;      A = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBinOp(TopLevelOpcode, A, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;      A-&gt;takeName(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;      <span class="keywordflow">return</span> A;</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;    }</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160; </div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;    <span class="comment">// Does &quot;A op C&quot; simplify to the identity value for the inner opcode?</span></div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;    <span class="keywordflow">if</span> (R &amp;&amp; R == <a class="code" href="classllvm_1_1ConstantExpr.html#ae9c2f00a962cb8e0316cf3548a5d8029">ConstantExpr::getBinOpIdentity</a>(InnerOpcode, R-&gt;getType())) {</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;      <span class="comment">// They do! Return &quot;A op B&quot;.</span></div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;      ++NumExpand;</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;      A = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBinOp(TopLevelOpcode, A, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;      A-&gt;takeName(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;      <span class="keywordflow">return</span> A;</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;    }</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;  }</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160; </div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;  <span class="keywordflow">return</span> SimplifySelectsFeedingBinaryOp(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>);</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;}</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160; </div>
<div class="line"><a name="l00870"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombinerImpl.html#ad36c0bc30660bad4f2b79be90608ea60">  870</a></span>&#160;<a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="classllvm_1_1InstCombinerImpl.html#ad36c0bc30660bad4f2b79be90608ea60">InstCombinerImpl::SimplifySelectsFeedingBinaryOp</a>(<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>,</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;                                                        <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>,</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;                                                        <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>) {</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *A, *<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, *<a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>, *<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>, *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>;</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;  <span class="keywordtype">bool</span> LHSIsSelect = <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#addb87fe3f509b7803d3f5933ee24b560">m_Select</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)));</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;  <span class="keywordtype">bool</span> RHSIsSelect = <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#addb87fe3f509b7803d3f5933ee24b560">m_Select</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>)));</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;  <span class="keywordflow">if</span> (!LHSIsSelect &amp;&amp; !RHSIsSelect)</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160; </div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;  <a class="code" href="classllvm_1_1FastMathFlags.html">FastMathFlags</a> FMF;</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;  <a class="code" href="classllvm_1_1IRBuilderBase_1_1FastMathFlagGuard.html">BuilderTy::FastMathFlagGuard</a> Guard(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>);</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;  <span class="keywordflow">if</span> (isa&lt;FPMathOperator&gt;(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;    FMF = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getFastMathFlags();</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;    <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.setFastMathFlags(FMF);</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;  }</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160; </div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html#ac26154a24f393f523c87cc5f8239f36c">Instruction::BinaryOps</a> Opcode = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOpcode();</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;  <a class="code" href="structllvm_1_1SimplifyQuery.html">SimplifyQuery</a> Q = SQ.<a class="code" href="structllvm_1_1SimplifyQuery.html#aaf05c1194f5c7869a00434c13c46c228">getWithInstruction</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160; </div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>, *True = <span class="keyword">nullptr</span>, *False = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160; </div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;  <span class="comment">// Special-case for add/negate combination. Replace the zero in the negation</span></div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;  <span class="comment">// with the trailing add operand:</span></div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;  <span class="comment">// (Cond ? TVal : -N) + Z --&gt; Cond ? True : (Z - N)</span></div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;  <span class="comment">// (Cond ? -N : FVal) + Z --&gt; Cond ? (Z - N) : False</span></div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;  <span class="keyword">auto</span> foldAddNegate = [&amp;](<a class="code" href="classllvm_1_1Value.html">Value</a> *TVal, <a class="code" href="classllvm_1_1Value.html">Value</a> *FVal, <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1ARCCC.html#a9a81d9a1b379cf08150b22e81d7dd006aceb189306b941666e679bf556207c1e4">Z</a>) -&gt; <a class="code" href="classllvm_1_1Value.html">Value</a> * {</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;    <span class="comment">// We need an &#39;add&#39; and exactly 1 arm of the select to have been simplified.</span></div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;    <span class="keywordflow">if</span> (Opcode != <a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a2b016c207343046b2bac45e69e76dcec">Instruction::Add</a> || (!True &amp;&amp; !False) || (True &amp;&amp; False))</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160; </div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>;</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;    <span class="keywordflow">if</span> (True &amp;&amp; <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(FVal, <a class="code" href="namespacellvm_1_1PatternMatch.html#a2fed53ed2b3225752bd9e4fce4967361">m_Neg</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>)))) {</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *Sub = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateSub(<a class="code" href="namespacellvm_1_1ARCCC.html#a9a81d9a1b379cf08150b22e81d7dd006aceb189306b941666e679bf556207c1e4">Z</a>, <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>);</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateSelect(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>, True, Sub, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getName());</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;    }</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;    <span class="keywordflow">if</span> (False &amp;&amp; <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(TVal, <a class="code" href="namespacellvm_1_1PatternMatch.html#a2fed53ed2b3225752bd9e4fce4967361">m_Neg</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>)))) {</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *Sub = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateSub(<a class="code" href="namespacellvm_1_1ARCCC.html#a9a81d9a1b379cf08150b22e81d7dd006aceb189306b941666e679bf556207c1e4">Z</a>, <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>);</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateSelect(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>, Sub, False, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getName());</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;    }</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;  };</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160; </div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;  <span class="keywordflow">if</span> (LHSIsSelect &amp;&amp; RHSIsSelect &amp;&amp; A == <a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>) {</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;    <span class="comment">// (A ? B : C) op (A ? E : F) -&gt; A ? (B op E) : (C op F)</span></div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;    <a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a> = A;</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;    True = <a class="code" href="namespacellvm.html#aa750395459fa1eb7130d6de8e3d074f6">simplifyBinOp</a>(Opcode, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>, FMF, Q);</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;    False = <a class="code" href="namespacellvm.html#aa750395459fa1eb7130d6de8e3d074f6">simplifyBinOp</a>(Opcode, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, FMF, Q);</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160; </div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>() &amp;&amp; <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>()) {</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;      <span class="keywordflow">if</span> (False &amp;&amp; !True)</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;        True = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBinOp(Opcode, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>);</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (True &amp;&amp; !False)</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;        False = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBinOp(Opcode, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;    }</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (LHSIsSelect &amp;&amp; <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>()) {</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;    <span class="comment">// (A ? B : C) op Y -&gt; A ? (B op Y) : (C op Y)</span></div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;    <a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a> = A;</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;    True = <a class="code" href="namespacellvm.html#aa750395459fa1eb7130d6de8e3d074f6">simplifyBinOp</a>(Opcode, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, FMF, Q);</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;    False = <a class="code" href="namespacellvm.html#aa750395459fa1eb7130d6de8e3d074f6">simplifyBinOp</a>(Opcode, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, FMF, Q);</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *NewSel = foldAddNegate(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>))</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;      <span class="keywordflow">return</span> NewSel;</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (RHSIsSelect &amp;&amp; <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>()) {</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;    <span class="comment">// X op (D ? E : F) -&gt; D ? (X op E) : (X op F)</span></div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;    <a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a> = <a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>;</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;    True = <a class="code" href="namespacellvm.html#aa750395459fa1eb7130d6de8e3d074f6">simplifyBinOp</a>(Opcode, <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>, FMF, Q);</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;    False = <a class="code" href="namespacellvm.html#aa750395459fa1eb7130d6de8e3d074f6">simplifyBinOp</a>(Opcode, <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, FMF, Q);</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *NewSel = foldAddNegate(<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>, <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>))</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;      <span class="keywordflow">return</span> NewSel;</div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;  }</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160; </div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;  <span class="keywordflow">if</span> (!True || !False)</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160; </div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateSelect(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>, True, False);</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;  <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;takeName(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>;</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;}</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;<span class="comment">/// Freely adapt every user of V as-if V was changed to !V.</span></div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;<span class="comment">/// WARNING: only if canFreelyInvertAllUsersOf() said this can be done.</span></div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> InstCombinerImpl::freelyInvertAllUsersOf(<a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1Value.html">Value</a> *IgnoredUser) {</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1User.html">User</a> *U : <a class="code" href="namespacellvm.html#a8154638df88e4eaa568b67b23d463dac">make_early_inc_range</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;users())) {</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;    <span class="keywordflow">if</span> (U == IgnoredUser)</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;      <span class="keywordflow">continue</span>; <span class="comment">// Don&#39;t consider this user.</span></div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;    <span class="keywordflow">switch</span> (cast&lt;Instruction&gt;(U)-&gt;<a class="code" href="VPlanSLP_8cpp.html#af04704e906a9654777e92a4612c58c13">getOpcode</a>()) {</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="AMDGPURegBankSelect_8cpp.html#a14e0c000ed52e5fc187d4a885914cc1a">Instruction::Select</a>: {</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;      <span class="keyword">auto</span> *<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a> = cast&lt;SelectInst&gt;(U);</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;      <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;swapValues();</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;      <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;swapProfMetadata();</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;    }</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;    <span class="keywordflow">case</span> Instruction::Br:</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;      cast&lt;BranchInst&gt;(U)-&gt;swapSuccessors(); <span class="comment">// swaps prof metadata too</span></div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;    <span class="keywordflow">case</span> Instruction::Xor:</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;      replaceInstUsesWith(cast&lt;Instruction&gt;(*U), <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;      <a class="code" href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Got unexpected user - out of sync with &quot;</span></div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;                       <span class="stringliteral">&quot;canFreelyInvertAllUsersOf() ?&quot;</span>);</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;    }</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;  }</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;}</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;<span class="comment">/// Given a &#39;sub&#39; instruction, return the RHS of the instruction if the LHS is a</span></div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;<span class="comment">/// constant zero (which is the &#39;negate&#39; form).</span></div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1Value.html">Value</a> *InstCombinerImpl::dyn_castNegVal(<a class="code" href="classllvm_1_1Value.html">Value</a> *V)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *NegV;</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(V, <a class="code" href="namespacellvm_1_1PatternMatch.html#a2fed53ed2b3225752bd9e4fce4967361">m_Neg</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(NegV))))</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;    <span class="keywordflow">return</span> NegV;</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160; </div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;  <span class="comment">// Constants can be considered to be negated values if they can be folded.</span></div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = dyn_cast&lt;ConstantInt&gt;(V))</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1ConstantExpr.html#afa29f0cd072ab9b3a2630681ffe5760f">ConstantExpr::getNeg</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160; </div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ConstantDataVector.html">ConstantDataVector</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = dyn_cast&lt;ConstantDataVector&gt;(V))</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;getType()-&gt;getElementType()-&gt;isIntegerTy())</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1ConstantExpr.html#afa29f0cd072ab9b3a2630681ffe5760f">ConstantExpr::getNeg</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160; </div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ConstantVector.html">ConstantVector</a> *CV = dyn_cast&lt;ConstantVector&gt;(V)) {</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a> = CV-&gt;getNumOperands(); <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a>; ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;      <a class="code" href="classllvm_1_1Constant.html">Constant</a> *Elt = CV-&gt;<a class="code" href="classllvm_1_1Constant.html#acd530d0571f320d47d37e7ae51cf70ff">getAggregateElement</a>(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;      <span class="keywordflow">if</span> (!Elt)</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160; </div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;      <span class="keywordflow">if</span> (isa&lt;UndefValue&gt;(Elt))</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160; </div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;      <span class="keywordflow">if</span> (!isa&lt;ConstantInt&gt;(Elt))</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;    }</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1ConstantExpr.html#afa29f0cd072ab9b3a2630681ffe5760f">ConstantExpr::getNeg</a>(CV);</div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;  }</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160; </div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;  <span class="comment">// Negate integer vector splats.</span></div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *CV = dyn_cast&lt;Constant&gt;(V))</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;    <span class="keywordflow">if</span> (CV-&gt;getType()-&gt;isVectorTy() &amp;&amp;</div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;        CV-&gt;getType()-&gt;getScalarType()-&gt;isIntegerTy() &amp;&amp; CV-&gt;getSplatValue())</div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1ConstantExpr.html#afa29f0cd072ab9b3a2630681ffe5760f">ConstantExpr::getNeg</a>(CV);</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160; </div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;}</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;<span class="comment">/// A binop with a constant operand and a sign-extended boolean operand may be</span></div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;<span class="comment">/// converted into a select of constants by applying the binary operation to</span></div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;<span class="comment">/// the constant with the two possible values of the extended boolean (0 or -1).</span></div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *InstCombinerImpl::foldBinopOfSextBoolToSelect(<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> &amp;BO) {</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;  <span class="comment">// TODO: Handle non-commutative binop (constant is operand 0).</span></div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;  <span class="comment">// TODO: Handle zext.</span></div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;  <span class="comment">// TODO: Peek through &#39;not&#39; of cast.</span></div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *BO0 = BO.<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0);</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *BO1 = BO.<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(1);</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>;</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>;</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(BO0, <a class="code" href="namespacellvm_1_1PatternMatch.html#aaab494a433fbb23bc68393ee8bcfc5ac">m_SExt</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>))) || !<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(BO1, <a class="code" href="namespacellvm_1_1PatternMatch.html#aec0ccdbde0581b3aae7f001634a34d8e">m_ImmConstant</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)) ||</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;      !<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getType()-&gt;isIntOrIntVectorTy(1))</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160; </div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;  <span class="comment">// bo (sext i1 X), C --&gt; select X, (bo -1, C), (bo 0, C)</span></div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *Ones = <a class="code" href="classllvm_1_1Constant.html#a4d51384de6e1798bb6aa875aebeea9f0">ConstantInt::getAllOnesValue</a>(BO.<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>());</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="namespacellvm_1_1logicalview.html#a9696bc411b0a7022c2cc78bff5173cefad7ed4ee1df437474d005188535f74875">Zero</a> = <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">ConstantInt::getNullValue</a>(BO.<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>());</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *TVal = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBinOp(BO.<a class="code" href="classllvm_1_1BinaryOperator.html#a31bf07f3f61525486633bc1d0bbaf029">getOpcode</a>(), Ones, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *FVal = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBinOp(BO.<a class="code" href="classllvm_1_1BinaryOperator.html#a31bf07f3f61525486633bc1d0bbaf029">getOpcode</a>(), Zero, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1SelectInst.html#aa55fb74dd22008fdcc26a63f44576022">SelectInst::Create</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, TVal, FVal);</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;}</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160; </div>
<div class="line"><a name="l01036"></a><span class="lineno"><a class="line" href="InstructionCombining_8cpp.html#a46267953bff47a24cabb16bc64800b23"> 1036</a></span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="InstructionCombining_8cpp.html#a46267953bff47a24cabb16bc64800b23">constantFoldOperationIntoSelectOperand</a>(</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1SelectInst.html">SelectInst</a> *<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>, <a class="code" href="classllvm_1_1Value.html">Value</a> *SO) {</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;  <span class="keyword">auto</span> *ConstSO = dyn_cast&lt;Constant&gt;(SO);</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;  <span class="keywordflow">if</span> (!ConstSO)</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160; </div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Constant *&gt;</a> ConstOps;</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a> : <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.operands()) {</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a> == <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>)</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;      ConstOps.push_back(ConstSO);</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">auto</span> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = dyn_cast&lt;Constant&gt;(<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>))</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;      ConstOps.push_back(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;      <a class="code" href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Operands should be select or constant&quot;</span>);</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;  }</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#a72278be77e997abc4b0dbde1be280006">ConstantFoldInstOperands</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, ConstOps, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getModule()-&gt;getDataLayout());</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;}</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160; </div>
<div class="line"><a name="l01054"></a><span class="lineno"><a class="line" href="InstructionCombining_8cpp.html#a7d1a4066f69b6c7a1b2f9e9cc3595de7"> 1054</a></span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="InstructionCombining_8cpp.html#a7d1a4066f69b6c7a1b2f9e9cc3595de7">foldOperationIntoSelectOperand</a>(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1Value.html">Value</a> *SO,</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;                                             <a class="code" href="classllvm_1_1IRBuilder.html">InstCombiner::BuilderTy</a> &amp;<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>) {</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *Cast = dyn_cast&lt;CastInst&gt;(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCast(Cast-&gt;getOpcode(), SO, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getType());</div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160; </div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *II = dyn_cast&lt;IntrinsicInst&gt;(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="namespacellvm.html#a20f356124998d05f7e605549cc2dda91">canConstantFoldCallTo</a>(II, cast&lt;Function&gt;(II-&gt;<a class="code" href="classllvm_1_1CallBase.html#a7ac9329ef7292ee640d87f45ce7ae05c">getCalledOperand</a>())) &amp;&amp;</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;           <span class="stringliteral">&quot;Expected constant-foldable intrinsic&quot;</span>);</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;    <a class="code" href="namespacellvm_1_1Intrinsic.html#a80add6b3b1cdaec560907995127adc16">Intrinsic::ID</a> IID = II-&gt;<a class="code" href="classllvm_1_1IntrinsicInst.html#a7ff64b3625b6f9020556ed05a5f72af4">getIntrinsicID</a>();</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;    <span class="keywordflow">if</span> (II-&gt;<a class="code" href="classllvm_1_1CallBase.html#adde2ea00dd2613ee41bfe91908e4e68e">arg_size</a>() == 1)</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateUnaryIntrinsic(IID, SO);</div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160; </div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;    <span class="comment">// This works for real binary ops like min/max (where we always expect the</span></div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;    <span class="comment">// constant operand to be canonicalized as op1) and unary ops with a bonus</span></div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;    <span class="comment">// constant argument like ctlz/cttz.</span></div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;    <span class="comment">// TODO: Handle non-commutative binary intrinsics as below for binops.</span></div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(II-&gt;<a class="code" href="classllvm_1_1CallBase.html#adde2ea00dd2613ee41bfe91908e4e68e">arg_size</a>() == 2 &amp;&amp; <span class="stringliteral">&quot;Expected binary intrinsic&quot;</span>);</div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(isa&lt;Constant&gt;(II-&gt;<a class="code" href="classllvm_1_1CallBase.html#ab2caa29167597390ab2fc3cf30d70389">getArgOperand</a>(1)) &amp;&amp; <span class="stringliteral">&quot;Expected constant operand&quot;</span>);</div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBinaryIntrinsic(IID, SO, II-&gt;<a class="code" href="classllvm_1_1CallBase.html#ab2caa29167597390ab2fc3cf30d70389">getArgOperand</a>(1));</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;  }</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160; </div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *EI = dyn_cast&lt;ExtractElementInst&gt;(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateExtractElement(SO, EI-&gt;getIndexOperand());</div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160; </div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.isBinaryOp() &amp;&amp; <span class="stringliteral">&quot;Unexpected opcode for select folding&quot;</span>);</div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160; </div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;  <span class="comment">// Figure out if the constant is the left or the right argument.</span></div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;  <span class="keywordtype">bool</span> ConstIsRHS = isa&lt;Constant&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(1));</div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *ConstOperand = cast&lt;Constant&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(ConstIsRHS));</div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160; </div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Op0 = SO, *Op1 = ConstOperand;</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;  <span class="keywordflow">if</span> (!ConstIsRHS)</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;    <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(Op0, Op1);</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160; </div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *NewBO = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBinOp(cast&lt;BinaryOperator&gt;(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)-&gt;<a class="code" href="VPlanSLP_8cpp.html#af04704e906a9654777e92a4612c58c13">getOpcode</a>(), Op0,</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;                                     Op1, SO-&gt;<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>() + <span class="stringliteral">&quot;.op&quot;</span>);</div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *NewBOI = dyn_cast&lt;Instruction&gt;(NewBO))</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;    NewBOI-&gt;copyIRFlags(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;  <span class="keywordflow">return</span> NewBO;</div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;}</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160; </div>
<div class="line"><a name="l01095"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombinerImpl.html#a039111728e11b1cdf25e60446ae17f2a"> 1095</a></span>&#160;<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombinerImpl.html#a039111728e11b1cdf25e60446ae17f2a">InstCombinerImpl::FoldOpIntoSelect</a>(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>, <a class="code" href="classllvm_1_1SelectInst.html">SelectInst</a> *<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>,</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;                                                <span class="keywordtype">bool</span> FoldWithMultiUse) {</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;  <span class="comment">// Don&#39;t modify shared select instructions unless set FoldWithMultiUse</span></div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;hasOneUse() &amp;&amp; !FoldWithMultiUse)</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160; </div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *TV = <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;getTrueValue();</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *FV = <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;getFalseValue();</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;  <span class="keywordflow">if</span> (!(isa&lt;Constant&gt;(TV) || isa&lt;Constant&gt;(FV)))</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160; </div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;  <span class="comment">// Bool selects with constant operands can be folded to logical ops.</span></div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;getType()-&gt;isIntOrIntVectorTy(1))</div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160; </div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;  <span class="comment">// If it&#39;s a bitcast involving vectors, make sure it has the same number of</span></div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;  <span class="comment">// elements on both sides.</span></div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *BC = dyn_cast&lt;BitCastInst&gt;(&amp;<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>)) {</div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;    <a class="code" href="classllvm_1_1VectorType.html">VectorType</a> *DestTy = dyn_cast&lt;VectorType&gt;(BC-&gt;getDestTy());</div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;    <a class="code" href="classllvm_1_1VectorType.html">VectorType</a> *SrcTy = dyn_cast&lt;VectorType&gt;(BC-&gt;getSrcTy());</div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160; </div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;    <span class="comment">// Verify that either both or neither are vectors.</span></div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;    <span class="keywordflow">if</span> ((SrcTy == <span class="keyword">nullptr</span>) != (DestTy == <span class="keyword">nullptr</span>))</div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160; </div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;    <span class="comment">// If vectors, verify that they have the same number of elements.</span></div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;    <span class="keywordflow">if</span> (SrcTy &amp;&amp; SrcTy-&gt;<a class="code" href="classllvm_1_1VectorType.html#a59632c5deb0423a518ad984bdd04d41f">getElementCount</a>() != DestTy-&gt;<a class="code" href="classllvm_1_1VectorType.html#a59632c5deb0423a518ad984bdd04d41f">getElementCount</a>())</div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;  }</div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160; </div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;  <span class="comment">// Test if a CmpInst instruction is used exclusively by a select as</span></div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;  <span class="comment">// part of a minimum or maximum operation. If so, refrain from doing</span></div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;  <span class="comment">// any other folding. This helps out other analyses which understand</span></div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;  <span class="comment">// non-obfuscated minimum and maximum idioms, such as ScalarEvolution</span></div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;  <span class="comment">// and CodeGen. And in this case, at least one of the comparison</span></div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;  <span class="comment">// operands has at least one user besides the compare (the select),</span></div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;  <span class="comment">// which would often largely negate the benefit of folding anyway.</span></div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *CI = dyn_cast&lt;CmpInst&gt;(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;getCondition())) {</div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;    <span class="keywordflow">if</span> (CI-&gt;hasOneUse()) {</div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *Op0 = CI-&gt;getOperand(0), *Op1 = CI-&gt;getOperand(1);</div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160; </div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;      <span class="comment">// FIXME: This is a hack to avoid infinite looping with min/max patterns.</span></div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;      <span class="comment">//        We have to ensure that vector constants that only differ with</span></div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;      <span class="comment">//        undef elements are treated as equivalent.</span></div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;      <span class="keyword">auto</span> areLooselyEqual = [](<a class="code" href="classllvm_1_1Value.html">Value</a> *A, <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>) {</div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;        <span class="keywordflow">if</span> (A == <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>)</div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160; </div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;        <span class="comment">// Test for vector constants.</span></div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;        <a class="code" href="classllvm_1_1Constant.html">Constant</a> *ConstA, *ConstB;</div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(A, <a class="code" href="namespacellvm_1_1PatternMatch.html#aadd209ba7e1bfa8113a609e09a7fe62f">m_Constant</a>(ConstA)) || !<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#aadd209ba7e1bfa8113a609e09a7fe62f">m_Constant</a>(ConstB)))</div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160; </div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;        <span class="comment">// TODO: Deal with FP constants?</span></div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;        <span class="keywordflow">if</span> (!A-&gt;getType()-&gt;isIntOrIntVectorTy() || A-&gt;getType() != <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>-&gt;getType())</div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160; </div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;        <span class="comment">// Compare for equality including undefs as equal.</span></div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;        <span class="keyword">auto</span> *Cmp = <a class="code" href="classllvm_1_1ConstantExpr.html#afe6a25e856a1a63ffff098f05e3f26d2">ConstantExpr::getCompare</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a>, ConstA, ConstB);</div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;        <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>;</div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Cmp, <a class="code" href="namespacellvm_1_1PatternMatch.html#a0f8629c0ff1db9c384e378b2ca860f0a">m_APIntAllowUndef</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)) &amp;&amp; <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;isOne();</div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;      };</div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160; </div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;      <span class="keywordflow">if</span> ((areLooselyEqual(TV, Op0) &amp;&amp; areLooselyEqual(FV, Op1)) ||</div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;          (areLooselyEqual(FV, Op0) &amp;&amp; areLooselyEqual(TV, Op1)))</div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;    }</div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;  }</div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160; </div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;  <span class="comment">// Make sure that one of the select arms constant folds successfully.</span></div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *NewTV = <a class="code" href="InstructionCombining_8cpp.html#a46267953bff47a24cabb16bc64800b23">constantFoldOperationIntoSelectOperand</a>(<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>, <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>, TV);</div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *NewFV = <a class="code" href="InstructionCombining_8cpp.html#a46267953bff47a24cabb16bc64800b23">constantFoldOperationIntoSelectOperand</a>(<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>, <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>, FV);</div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;  <span class="keywordflow">if</span> (!NewTV &amp;&amp; !NewFV)</div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160; </div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;  <span class="comment">// Create an instruction for the arm that did not fold.</span></div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;  <span class="keywordflow">if</span> (!NewTV)</div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;    NewTV = <a class="code" href="InstructionCombining_8cpp.html#a7d1a4066f69b6c7a1b2f9e9cc3595de7">foldOperationIntoSelectOperand</a>(<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>, TV, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>);</div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;  <span class="keywordflow">if</span> (!NewFV)</div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;    NewFV = <a class="code" href="InstructionCombining_8cpp.html#a7d1a4066f69b6c7a1b2f9e9cc3595de7">foldOperationIntoSelectOperand</a>(<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>, FV, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>);</div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1SelectInst.html#aa55fb74dd22008fdcc26a63f44576022">SelectInst::Create</a>(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;getCondition(), NewTV, NewFV, <span class="stringliteral">&quot;&quot;</span>, <span class="keyword">nullptr</span>, <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>);</div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;}</div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160; </div>
<div class="line"><a name="l01178"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombinerImpl.html#a310291367c69513a53ec6d900ad2e060"> 1178</a></span>&#160;<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombinerImpl.html#a310291367c69513a53ec6d900ad2e060">InstCombinerImpl::foldOpIntoPhi</a>(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *PN) {</div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;  <span class="keywordtype">unsigned</span> NumPHIValues = PN-&gt;<a class="code" href="classllvm_1_1PHINode.html#aef51af4b490af6b3bf2dfbc8737a8f9f">getNumIncomingValues</a>();</div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;  <span class="keywordflow">if</span> (NumPHIValues == 0)</div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160; </div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;  <span class="comment">// We normally only transform phis with a single use.  However, if a PHI has</span></div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;  <span class="comment">// multiple uses and they are all the same operation, we can fold *all* of the</span></div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;  <span class="comment">// uses into the PHI.</span></div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;  <span class="keywordflow">if</span> (!PN-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>()) {</div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;    <span class="comment">// Walk the use list for the instruction, comparing them to I.</span></div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1User.html">User</a> *U : PN-&gt;<a class="code" href="classllvm_1_1Value.html#ab4e0512c7e1c7adaa56677e3155685f1">users</a>()) {</div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;      <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *UI = cast&lt;Instruction&gt;(U);</div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;      <span class="keywordflow">if</span> (UI != &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> &amp;&amp; !<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.isIdenticalTo(UI))</div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;    }</div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;    <span class="comment">// Otherwise, we can replace *all* users with the new PHI we form.</span></div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;  }</div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160; </div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;  <span class="comment">// Check to see whether the instruction can be folded into each phi operand.</span></div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;  <span class="comment">// If there is one operand that does not fold, remember the BB it is in.</span></div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;  <span class="comment">// If there is more than one or if *it* is a PHI, bail out.</span></div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Value *&gt;</a> NewPhiValues;</div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *NonSimplifiedBB = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *NonSimplifiedInVal = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != NumPHIValues; ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *InVal = PN-&gt;<a class="code" href="classllvm_1_1PHINode.html#a16c39eb6e60b42a40c399d8d65347bb6">getIncomingValue</a>(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *InBB = PN-&gt;<a class="code" href="classllvm_1_1PHINode.html#a8ce0c4746a1ec805e66409d20ae93922">getIncomingBlock</a>(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160; </div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;    <span class="comment">// NB: It is a precondition of this transform that the operands be</span></div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;    <span class="comment">// phi translatable! This is usually trivially satisfied by limiting it</span></div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;    <span class="comment">// to constant ops, and for selects we do a more sophisticated check.</span></div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Value *&gt;</a> Ops;</div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a> : <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.operands()) {</div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a> == PN)</div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;        Ops.push_back(InVal);</div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;        Ops.push_back(<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>-&gt;DoPHITranslation(PN-&gt;<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>(), InBB));</div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;    }</div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160; </div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;    <span class="comment">// Don&#39;t consider the simplification successful if we get back a constant</span></div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;    <span class="comment">// expression. That&#39;s just an instruction in hiding.</span></div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;    <span class="comment">// Also reject the case where we simplify back to the phi node. We wouldn&#39;t</span></div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;    <span class="comment">// be able to remove it in that case.</span></div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *NewVal = <a class="code" href="namespacellvm.html#a27faf96484ade7c93b43abca300a24e5">simplifyInstructionWithOperands</a>(</div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;        &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, Ops, SQ.getWithInstruction(InBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>()));</div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;    <span class="keywordflow">if</span> (NewVal &amp;&amp; NewVal != PN &amp;&amp; !<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(NewVal, <a class="code" href="namespacellvm_1_1PatternMatch.html#a300db8bf3acf4b1cff9a56ae53a8727c">m_ConstantExpr</a>())) {</div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;      NewPhiValues.push_back(NewVal);</div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;    }</div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160; </div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;    <span class="keywordflow">if</span> (isa&lt;PHINode&gt;(InVal)) <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;  <span class="comment">// Itself a phi.</span></div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;    <span class="keywordflow">if</span> (NonSimplifiedBB) <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;  <span class="comment">// More than one non-simplified value.</span></div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160; </div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;    NonSimplifiedBB = InBB;</div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;    NonSimplifiedInVal = InVal;</div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;    NewPhiValues.push_back(<span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160; </div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;    <span class="comment">// If the InVal is an invoke at the end of the pred block, then we can&#39;t</span></div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;    <span class="comment">// insert a computation after it without breaking the edge.</span></div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;    <span class="keywordflow">if</span> (isa&lt;InvokeInst&gt;(InVal))</div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;      <span class="keywordflow">if</span> (cast&lt;Instruction&gt;(InVal)-&gt;<a class="code" href="BasicAliasAnalysis_8cpp.html#a2675de1d8479c7b00387979714da43f7">getParent</a>() == NonSimplifiedBB)</div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160; </div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;    <span class="comment">// If the incoming non-constant value is reachable from the phis block,</span></div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;    <span class="comment">// we&#39;ll push the operation across a loop backedge. This could result in</span></div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;    <span class="comment">// an infinite combine loop, and is generally non-profitable (especially</span></div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;    <span class="comment">// if the operation was originally outside the loop).</span></div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#affedc93ead6b25c57a7196d32ff11e89">isPotentiallyReachable</a>(PN-&gt;<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>(), NonSimplifiedBB, <span class="keyword">nullptr</span>, &amp;DT,</div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;                               LI))</div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;  }</div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160; </div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;  <span class="comment">// If there is exactly one non-simplified value, we can insert a copy of the</span></div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;  <span class="comment">// operation in that block.  However, if this is a critical edge, we would be</span></div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;  <span class="comment">// inserting the computation on some other paths (e.g. inside a loop).  Only</span></div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;  <span class="comment">// do this if the pred block is unconditionally branching into the phi block.</span></div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;  <span class="comment">// Also, make sure that the pred block is not dead code.</span></div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;  <span class="keywordflow">if</span> (NonSimplifiedBB != <span class="keyword">nullptr</span>) {</div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;    <a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a> *BI = dyn_cast&lt;BranchInst&gt;(NonSimplifiedBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>());</div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;    <span class="keywordflow">if</span> (!BI || !BI-&gt;<a class="code" href="classllvm_1_1BranchInst.html#ad56f6a9b5cd05940017c4544df48bc30">isUnconditional</a>() ||</div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;        !DT.isReachableFromEntry(NonSimplifiedBB))</div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;  }</div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160; </div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;  <span class="comment">// Okay, we can do the transformation: create the new PHI node.</span></div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;  <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *NewPN = <a class="code" href="classllvm_1_1PHINode.html#ab0ff669b12c20c07137705c38872ec63">PHINode::Create</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getType(), PN-&gt;<a class="code" href="classllvm_1_1PHINode.html#aef51af4b490af6b3bf2dfbc8737a8f9f">getNumIncomingValues</a>());</div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;  InsertNewInstBefore(NewPN, *PN);</div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;  NewPN-&gt;<a class="code" href="classllvm_1_1Value.html#ae855357b6c5e6e7ed1869272708a3a84">takeName</a>(PN);</div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160; </div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;  <span class="comment">// If we are going to have to insert a new computation, do so right before the</span></div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;  <span class="comment">// predecessor&#39;s terminator.</span></div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Clone = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;  <span class="keywordflow">if</span> (NonSimplifiedBB) {</div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;    Clone = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.clone();</div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Use.html">Use</a> &amp;U : Clone-&gt;<a class="code" href="classllvm_1_1User.html#a0b931781aa589c6ebe64a76c1447e5b2">operands</a>()) {</div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;      <span class="keywordflow">if</span> (U == PN)</div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;        U = NonSimplifiedInVal;</div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;        U = U-&gt;<a class="code" href="classllvm_1_1Value.html#a159bf794249e0567baf2a2a714d5c679">DoPHITranslation</a>(PN-&gt;<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>(), NonSimplifiedBB);</div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;    }</div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;    InsertNewInstBefore(Clone, *NonSimplifiedBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>());</div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;  }</div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160; </div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != NumPHIValues; ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;    <span class="keywordflow">if</span> (NewPhiValues[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>])</div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;      NewPN-&gt;<a class="code" href="classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">addIncoming</a>(NewPhiValues[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>], PN-&gt;<a class="code" href="classllvm_1_1PHINode.html#a8ce0c4746a1ec805e66409d20ae93922">getIncomingBlock</a>(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>));</div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;      NewPN-&gt;<a class="code" href="classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">addIncoming</a>(Clone, PN-&gt;<a class="code" href="classllvm_1_1PHINode.html#a8ce0c4746a1ec805e66409d20ae93922">getIncomingBlock</a>(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>));</div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;  }</div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160; </div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1User.html">User</a> *U : <a class="code" href="namespacellvm.html#a8154638df88e4eaa568b67b23d463dac">make_early_inc_range</a>(PN-&gt;<a class="code" href="classllvm_1_1Value.html#ab4e0512c7e1c7adaa56677e3155685f1">users</a>())) {</div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1User.html">User</a> = cast&lt;Instruction&gt;(U);</div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1User.html">User</a> == &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;    replaceInstUsesWith(*<a class="code" href="classllvm_1_1User.html">User</a>, NewPN);</div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;    eraseInstFromFunction(*<a class="code" href="classllvm_1_1User.html">User</a>);</div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;  }</div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;  <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, NewPN);</div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;}</div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160; </div>
<div class="line"><a name="l01297"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombinerImpl.html#a9317f2efaf85a4afc7cde58a2c0d734b"> 1297</a></span>&#160;<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombinerImpl.html#a9317f2efaf85a4afc7cde58a2c0d734b">InstCombinerImpl::foldBinopWithPhiOperands</a>(<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> &amp;BO) {</div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;  <span class="comment">// TODO: This should be similar to the incoming values check in foldOpIntoPhi:</span></div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;  <span class="comment">//       we are guarding against replicating the binop in &gt;1 predecessor.</span></div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;  <span class="comment">//       This could miss matching a phi with 2 constant incoming values.</span></div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;  <span class="keyword">auto</span> *Phi0 = dyn_cast&lt;PHINode&gt;(BO.<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0));</div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;  <span class="keyword">auto</span> *Phi1 = dyn_cast&lt;PHINode&gt;(BO.<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(1));</div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;  <span class="keywordflow">if</span> (!Phi0 || !Phi1 || !Phi0-&gt;hasOneUse() || !Phi1-&gt;hasOneUse() ||</div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;      Phi0-&gt;getNumOperands() != 2 || Phi1-&gt;getNumOperands() != 2)</div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160; </div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;  <span class="comment">// TODO: Remove the restriction for binop being in the same block as the phis.</span></div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;  <span class="keywordflow">if</span> (BO.<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>() != Phi0-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a38bee869ad41aebfef3de2641b12004c">getParent</a>() ||</div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;      BO.<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>() != Phi1-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a38bee869ad41aebfef3de2641b12004c">getParent</a>())</div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160; </div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;  <span class="comment">// Match a pair of incoming constants for one of the predecessor blocks.</span></div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *ConstBB, *OtherBB;</div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *C0, *<a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>;</div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Phi0-&gt;getIncomingValue(0), <a class="code" href="namespacellvm_1_1PatternMatch.html#aec0ccdbde0581b3aae7f001634a34d8e">m_ImmConstant</a>(C0))) {</div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;    ConstBB = Phi0-&gt;getIncomingBlock(0);</div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;    OtherBB = Phi0-&gt;getIncomingBlock(1);</div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Phi0-&gt;getIncomingValue(1), <a class="code" href="namespacellvm_1_1PatternMatch.html#aec0ccdbde0581b3aae7f001634a34d8e">m_ImmConstant</a>(C0))) {</div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;    ConstBB = Phi0-&gt;getIncomingBlock(1);</div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;    OtherBB = Phi0-&gt;getIncomingBlock(0);</div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;  }</div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Phi1-&gt;getIncomingValueForBlock(ConstBB), <a class="code" href="namespacellvm_1_1PatternMatch.html#aec0ccdbde0581b3aae7f001634a34d8e">m_ImmConstant</a>(<a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>)))</div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160; </div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;  <span class="comment">// The block that we are hoisting to must reach here unconditionally.</span></div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;  <span class="comment">// Otherwise, we could be speculatively executing an expensive or</span></div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;  <span class="comment">// non-speculative op.</span></div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;  <span class="keyword">auto</span> *PredBlockBranch = dyn_cast&lt;BranchInst&gt;(OtherBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>());</div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;  <span class="keywordflow">if</span> (!PredBlockBranch || PredBlockBranch-&gt;isConditional() ||</div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;      !DT.isReachableFromEntry(OtherBB))</div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160; </div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;  <span class="comment">// TODO: This check could be tightened to only apply to binops (div/rem) that</span></div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;  <span class="comment">//       are not safe to speculatively execute. But that could allow hoisting</span></div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;  <span class="comment">//       potentially expensive instructions (fdiv for example).</span></div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> BBIter = BO.<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>()-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>(); &amp;*BBIter != &amp;BO; ++BBIter)</div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm.html#abff5a423c1f45e23958dde8ee695c9a9">isGuaranteedToTransferExecutionToSuccessor</a>(&amp;*BBIter))</div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160; </div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;  <span class="comment">// Fold constants for the predecessor block with constant incoming values.</span></div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *NewC = <a class="code" href="namespacellvm.html#a964455f36837281d37f2a44e2fcb4cca">ConstantFoldBinaryOpOperands</a>(BO.<a class="code" href="classllvm_1_1BinaryOperator.html#a31bf07f3f61525486633bc1d0bbaf029">getOpcode</a>(), C0, <a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>);</div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;  <span class="keywordflow">if</span> (!NewC)</div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160; </div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;  <span class="comment">// Make a new binop in the predecessor block with the non-constant incoming</span></div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;  <span class="comment">// values.</span></div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(PredBlockBranch);</div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *NewBO = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBinOp(BO.<a class="code" href="classllvm_1_1BinaryOperator.html#a31bf07f3f61525486633bc1d0bbaf029">getOpcode</a>(),</div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;                                     Phi0-&gt;getIncomingValueForBlock(OtherBB),</div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;                                     Phi1-&gt;getIncomingValueForBlock(OtherBB));</div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *NotFoldedNewBO = dyn_cast&lt;BinaryOperator&gt;(NewBO))</div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;    NotFoldedNewBO-&gt;copyIRFlags(&amp;BO);</div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160; </div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;  <span class="comment">// Replace the binop with a phi of the new values. The old phis are dead.</span></div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;  <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *NewPhi = <a class="code" href="classllvm_1_1PHINode.html#ab0ff669b12c20c07137705c38872ec63">PHINode::Create</a>(BO.<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>(), 2);</div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;  NewPhi-&gt;<a class="code" href="classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">addIncoming</a>(NewBO, OtherBB);</div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;  NewPhi-&gt;<a class="code" href="classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">addIncoming</a>(NewC, ConstBB);</div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;  <span class="keywordflow">return</span> NewPhi;</div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;}</div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160; </div>
<div class="line"><a name="l01363"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombinerImpl.html#a1b94928a51545cb29d3e46b8ad94cb72"> 1363</a></span>&#160;<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombinerImpl.html#a1b94928a51545cb29d3e46b8ad94cb72">InstCombinerImpl::foldBinOpIntoSelectOrPhi</a>(<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;  <span class="keywordflow">if</span> (!isa&lt;Constant&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(1)))</div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160; </div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *Sel = dyn_cast&lt;SelectInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(0))) {</div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *NewSel = FoldOpIntoSelect(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, Sel))</div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;      <span class="keywordflow">return</span> NewSel;</div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">auto</span> *PN = dyn_cast&lt;PHINode&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(0))) {</div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *NewPhi = foldOpIntoPhi(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, PN))</div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;      <span class="keywordflow">return</span> NewPhi;</div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;  }</div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;}</div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;<span class="comment">/// Given a pointer type and a constant offset, determine whether or not there</span></div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;<span class="comment">/// is a sequence of GEP indices into the pointed type that will land us at the</span></div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;<span class="comment">/// specified offset. If so, fill them into NewIndices and return the resultant</span></div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;<span class="comment">/// element type, otherwise return null.</span></div>
<div class="line"><a name="l01381"></a><span class="lineno"><a class="line" href="InstructionCombining_8cpp.html#a2228ce002a49927fac8de298e2cab56b"> 1381</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1Type.html">Type</a> *<a class="code" href="InstructionCombining_8cpp.html#a2228ce002a49927fac8de298e2cab56b">findElementAtOffset</a>(<a class="code" href="classllvm_1_1PointerType.html">PointerType</a> *PtrTy, int64_t IntOffset,</div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;                                 <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;Value *&gt;</a> &amp;NewIndices,</div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;                                 <span class="keyword">const</span> <a class="code" href="classllvm_1_1DataLayout.html">DataLayout</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>) {</div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;  <span class="comment">// Only used by visitGEPOfBitcast(), which is skipped for opaque pointers.</span></div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *Ty = PtrTy-&gt;<a class="code" href="classllvm_1_1Type.html#abceff71202e0269065cf32a2f750a9be">getNonOpaquePointerElementType</a>();</div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;  <span class="keywordflow">if</span> (!Ty-&gt;<a class="code" href="classllvm_1_1Type.html#a8ad67a33bae235fe3cca1c3e5a91ed2d">isSized</a>())</div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160; </div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;  <a class="code" href="classllvm_1_1APInt.html">APInt</a> Offset(<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getIndexTypeSizeInBits(PtrTy), IntOffset);</div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;APInt&gt;</a> Indices = <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getGEPIndicesForOffset(Ty, Offset);</div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;  <span class="keywordflow">if</span> (!Offset.isZero())</div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160; </div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> &amp;<a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a> : Indices)</div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;    NewIndices.push_back(<a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(PtrTy-&gt;<a class="code" href="classllvm_1_1Type.html#a0566221f10834bfcea70965379745a20">getContext</a>(), <a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a>));</div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;  <span class="keywordflow">return</span> Ty;</div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;}</div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160; </div>
<div class="line"><a name="l01399"></a><span class="lineno"><a class="line" href="InstructionCombining_8cpp.html#a27dc41c474e5376ef7d1865735cfb3dd"> 1399</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="InstructionCombining_8cpp.html#a27dc41c474e5376ef7d1865735cfb3dd">shouldMergeGEPs</a>(<a class="code" href="classllvm_1_1GEPOperator.html">GEPOperator</a> &amp;<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>, <a class="code" href="classllvm_1_1GEPOperator.html">GEPOperator</a> &amp;Src) {</div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;  <span class="comment">// If this GEP has only 0 indices, it is the same pointer as</span></div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;  <span class="comment">// Src. If Src is not a trivial GEP too, don&#39;t combine</span></div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;  <span class="comment">// the indices.</span></div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>.hasAllZeroIndices() &amp;&amp; !Src.hasAllZeroIndices() &amp;&amp;</div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;      !Src.hasOneUse())</div>
<div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;}</div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;<span class="comment">/// Return a value X such that Val = X * Scale, or null if none.</span></div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;<span class="comment">/// If the multiplication is known not to overflow, then NoSignedWrap is set.</span></div>
<div class="line"><a name="l01411"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombinerImpl.html#a7228e6e33365005e35035cd8141e8aa9"> 1411</a></span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="classllvm_1_1InstCombinerImpl.html#a7228e6e33365005e35035cd8141e8aa9">InstCombinerImpl::Descale</a>(<a class="code" href="classllvm_1_1Value.html">Value</a> *Val, <a class="code" href="classllvm_1_1APInt.html">APInt</a> Scale, <span class="keywordtype">bool</span> &amp;NoSignedWrap) {</div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(isa&lt;IntegerType&gt;(Val-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()) &amp;&amp; <span class="stringliteral">&quot;Can only descale integers!&quot;</span>);</div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(cast&lt;IntegerType&gt;(Val-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>())-&gt;getBitWidth() ==</div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;         Scale.<a class="code" href="classllvm_1_1APInt.html#a512fe2c15ea651294688eeec1341644c">getBitWidth</a>() &amp;&amp; <span class="stringliteral">&quot;Scale not compatible with value!&quot;</span>);</div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160; </div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;  <span class="comment">// If Val is zero or Scale is one then Val = Val * Scale.</span></div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Val, <a class="code" href="namespacellvm_1_1PatternMatch.html#ae77be336e228cf9aa00709a8606dfb98">m_Zero</a>()) || Scale == 1) {</div>
<div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;    NoSignedWrap = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;    <span class="keywordflow">return</span> Val;</div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;  }</div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160; </div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;  <span class="comment">// If Scale is zero then it does not divide Val.</span></div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;  <span class="keywordflow">if</span> (Scale.<a class="code" href="classllvm_1_1APInt.html#a60dd597765e178719e8d4caf44ba3b64">isMinValue</a>())</div>
<div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160; </div>
<div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;  <span class="comment">// Look through chains of multiplications, searching for a constant that is</span></div>
<div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;  <span class="comment">// divisible by Scale.  For example, descaling X*(Y*(Z*4)) by a factor of 4</span></div>
<div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;  <span class="comment">// will find the constant factor 4 and produce X*(Y*Z).  Descaling X*(Y*8) by</span></div>
<div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;  <span class="comment">// a factor of 4 will produce X*(Y*2).  The principle of operation is to bore</span></div>
<div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;  <span class="comment">// down from Val:</span></div>
<div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;  <span class="comment">//     Val = M1 * X          ||   Analysis starts here and works down</span></div>
<div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;  <span class="comment">//      M1 = M2 * Y          ||   Doesn&#39;t descend into terms with more</span></div>
<div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;  <span class="comment">//      M2 =  Z * 4          \/   than one use</span></div>
<div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;  <span class="comment">// Then to modify a term at the bottom:</span></div>
<div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;  <span class="comment">//     Val = M1 * X</span></div>
<div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;  <span class="comment">//      M1 =  Z * Y          ||   Replaced M2 with Z</span></div>
<div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;  <span class="comment">// Then to work back up correcting nsw flags.</span></div>
<div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160; </div>
<div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;  <span class="comment">// Op - the term we are currently analyzing.  Starts at Val then drills down.</span></div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;  <span class="comment">// Replaced with its descaled value before exiting from the drill down loop.</span></div>
<div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a> = Val;</div>
<div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160; </div>
<div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;  <span class="comment">// Parent - initially null, but after drilling down notes where Op came from.</span></div>
<div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;  <span class="comment">// In the example above, Parent is (Val, 0) when Op is M1, because M1 is the</span></div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;  <span class="comment">// 0&#39;th operand of Val.</span></div>
<div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;  std::pair&lt;Instruction *, unsigned&gt; Parent;</div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160; </div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;  <span class="comment">// Set if the transform requires a descaling at deeper levels that doesn&#39;t</span></div>
<div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;  <span class="comment">// overflow.</span></div>
<div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;  <span class="keywordtype">bool</span> RequireNoSignedWrap = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160; </div>
<div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;  <span class="comment">// Log base 2 of the scale. Negative if not a power of 2.</span></div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;  int32_t logScale = Scale.<a class="code" href="classllvm_1_1APInt.html#a6f1d5427c61a0f0159f6e85f41944c5c">exactLogBase2</a>();</div>
<div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160; </div>
<div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;  <span class="keywordflow">for</span> (;; <a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a> = Parent.first-&gt;getOperand(Parent.second)) { <span class="comment">// Drill down</span></div>
<div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *CI = dyn_cast&lt;ConstantInt&gt;(<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>)) {</div>
<div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;      <span class="comment">// If Op is a constant divisible by Scale then descale to the quotient.</span></div>
<div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;      <a class="code" href="classllvm_1_1APInt.html">APInt</a> Quotient(Scale), Remainder(Scale); <span class="comment">// Init ensures right bitwidth.</span></div>
<div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;      <a class="code" href="classllvm_1_1APInt.html#a24187c2e178af0df22dac26cd5229294">APInt::sdivrem</a>(CI-&gt;getValue(), Scale, Quotient, Remainder);</div>
<div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;      <span class="keywordflow">if</span> (!Remainder.<a class="code" href="classllvm_1_1APInt.html#a60dd597765e178719e8d4caf44ba3b64">isMinValue</a>())</div>
<div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;        <span class="comment">// Not divisible by Scale.</span></div>
<div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;      <span class="comment">// Replace with the quotient in the parent.</span></div>
<div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;      <a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a> = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(CI-&gt;getType(), Quotient);</div>
<div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;      NoSignedWrap = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;    }</div>
<div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160; </div>
<div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> *BO = dyn_cast&lt;BinaryOperator&gt;(<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>)) {</div>
<div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;      <span class="keywordflow">if</span> (BO-&gt;<a class="code" href="classllvm_1_1BinaryOperator.html#a31bf07f3f61525486633bc1d0bbaf029">getOpcode</a>() == <a class="code" href="X86PartialReduction_8cpp.html#ae0f503db91504a3f3440ab81260e4134">Instruction::Mul</a>) {</div>
<div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;        <span class="comment">// Multiplication.</span></div>
<div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;        NoSignedWrap = BO-&gt;<a class="code" href="classllvm_1_1Instruction.html#a350f4fdc01c770b5cf6a8be2624ae3e5">hasNoSignedWrap</a>();</div>
<div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;        <span class="keywordflow">if</span> (RequireNoSignedWrap &amp;&amp; !NoSignedWrap)</div>
<div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160; </div>
<div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;        <span class="comment">// There are three cases for multiplication: multiplication by exactly</span></div>
<div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;        <span class="comment">// the scale, multiplication by a constant different to the scale, and</span></div>
<div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;        <span class="comment">// multiplication by something else.</span></div>
<div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a> = BO-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0);</div>
<div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a> = BO-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(1);</div>
<div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160; </div>
<div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *CI = dyn_cast&lt;ConstantInt&gt;(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>)) {</div>
<div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;          <span class="comment">// Multiplication by a constant.</span></div>
<div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;          <span class="keywordflow">if</span> (CI-&gt;getValue() == Scale) {</div>
<div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;            <span class="comment">// Multiplication by exactly the scale, replace the multiplication</span></div>
<div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;            <span class="comment">// by its left-hand side in the parent.</span></div>
<div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;            <a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a> = <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>;</div>
<div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;          }</div>
<div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160; </div>
<div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;          <span class="comment">// Otherwise drill down into the constant.</span></div>
<div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;          <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>-&gt;hasOneUse())</div>
<div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160; </div>
<div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;          Parent = std::make_pair(BO, 1);</div>
<div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;        }</div>
<div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160; </div>
<div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;        <span class="comment">// Multiplication by something else. Drill down into the left-hand side</span></div>
<div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;        <span class="comment">// since that&#39;s where the reassociate pass puts the good stuff.</span></div>
<div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>-&gt;hasOneUse())</div>
<div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160; </div>
<div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;        Parent = std::make_pair(BO, 0);</div>
<div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;      }</div>
<div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160; </div>
<div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;      <span class="keywordflow">if</span> (logScale &gt; 0 &amp;&amp; BO-&gt;<a class="code" href="classllvm_1_1BinaryOperator.html#a31bf07f3f61525486633bc1d0bbaf029">getOpcode</a>() == Instruction::Shl &amp;&amp;</div>
<div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;          isa&lt;ConstantInt&gt;(BO-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(1))) {</div>
<div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;        <span class="comment">// Multiplication by a power of 2.</span></div>
<div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;        NoSignedWrap = BO-&gt;<a class="code" href="classllvm_1_1Instruction.html#a350f4fdc01c770b5cf6a8be2624ae3e5">hasNoSignedWrap</a>();</div>
<div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;        <span class="keywordflow">if</span> (RequireNoSignedWrap &amp;&amp; !NoSignedWrap)</div>
<div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160; </div>
<div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a> = BO-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0);</div>
<div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;        int32_t Amt = cast&lt;ConstantInt&gt;(BO-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(1))-&gt;</div>
<div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;          getLimitedValue(Scale.<a class="code" href="classllvm_1_1APInt.html#a512fe2c15ea651294688eeec1341644c">getBitWidth</a>());</div>
<div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;        <span class="comment">// Op = LHS &lt;&lt; Amt.</span></div>
<div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160; </div>
<div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;        <span class="keywordflow">if</span> (Amt == logScale) {</div>
<div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;          <span class="comment">// Multiplication by exactly the scale, replace the multiplication</span></div>
<div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;          <span class="comment">// by its left-hand side in the parent.</span></div>
<div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;          <a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a> = <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>;</div>
<div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;        }</div>
<div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;        <span class="keywordflow">if</span> (Amt &lt; logScale || !Op-&gt;<a class="code" href="WebAssemblyRegStackify_8cpp.html#a3fe3a133bacc7200702bc7b0b13d092c">hasOneUse</a>())</div>
<div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160; </div>
<div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;        <span class="comment">// Multiplication by more than the scale.  Reduce the multiplying amount</span></div>
<div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;        <span class="comment">// by the scale in the parent.</span></div>
<div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;        Parent = std::make_pair(BO, 1);</div>
<div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;        <a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a> = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(BO-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>(), Amt - logScale);</div>
<div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;      }</div>
<div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;    }</div>
<div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160; </div>
<div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>-&gt;hasOneUse())</div>
<div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160; </div>
<div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1CastInst.html">CastInst</a> *Cast = dyn_cast&lt;CastInst&gt;(<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>)) {</div>
<div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;      <span class="keywordflow">if</span> (Cast-&gt;getOpcode() == Instruction::SExt) {</div>
<div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;        <span class="comment">// Op is sign-extended from a smaller type, descale in the smaller type.</span></div>
<div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;        <span class="keywordtype">unsigned</span> SmallSize = Cast-&gt;getSrcTy()-&gt;getPrimitiveSizeInBits();</div>
<div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;        <a class="code" href="classllvm_1_1APInt.html">APInt</a> SmallScale = Scale.<a class="code" href="classllvm_1_1APInt.html#a317c64fd4cfebc88e79387b3821a629d">trunc</a>(SmallSize);</div>
<div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;        <span class="comment">// Suppose Op = sext X, and we descale X as Y * SmallScale.  We want to</span></div>
<div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;        <span class="comment">// descale Op as (sext Y) * Scale.  In order to have</span></div>
<div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;        <span class="comment">//   sext (Y * SmallScale) = (sext Y) * Scale</span></div>
<div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;        <span class="comment">// some conditions need to hold however: SmallScale must sign-extend to</span></div>
<div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;        <span class="comment">// Scale and the multiplication Y * SmallScale should not overflow.</span></div>
<div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;        <span class="keywordflow">if</span> (SmallScale.<a class="code" href="classllvm_1_1APInt.html#aca8fce65eb69a82aa10a635e2e79877a">sext</a>(Scale.<a class="code" href="classllvm_1_1APInt.html#a512fe2c15ea651294688eeec1341644c">getBitWidth</a>()) != Scale)</div>
<div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;          <span class="comment">// SmallScale does not sign-extend to Scale.</span></div>
<div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;        <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(SmallScale.<a class="code" href="classllvm_1_1APInt.html#a6f1d5427c61a0f0159f6e85f41944c5c">exactLogBase2</a>() == logScale);</div>
<div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;        <span class="comment">// Require that Y * SmallScale must not overflow.</span></div>
<div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;        RequireNoSignedWrap = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160; </div>
<div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;        <span class="comment">// Drill down through the cast.</span></div>
<div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;        Parent = std::make_pair(Cast, 0);</div>
<div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;        Scale = SmallScale;</div>
<div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;      }</div>
<div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160; </div>
<div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;      <span class="keywordflow">if</span> (Cast-&gt;getOpcode() == Instruction::Trunc) {</div>
<div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;        <span class="comment">// Op is truncated from a larger type, descale in the larger type.</span></div>
<div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;        <span class="comment">// Suppose Op = trunc X, and we descale X as Y * sext Scale.  Then</span></div>
<div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;        <span class="comment">//   trunc (Y * sext Scale) = (trunc Y) * Scale</span></div>
<div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;        <span class="comment">// always holds.  However (trunc Y) * Scale may overflow even if</span></div>
<div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;        <span class="comment">// trunc (Y * sext Scale) does not, so nsw flags need to be cleared</span></div>
<div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;        <span class="comment">// from this point up in the expression (see later).</span></div>
<div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;        <span class="keywordflow">if</span> (RequireNoSignedWrap)</div>
<div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160; </div>
<div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;        <span class="comment">// Drill down through the cast.</span></div>
<div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;        <span class="keywordtype">unsigned</span> LargeSize = Cast-&gt;getSrcTy()-&gt;getPrimitiveSizeInBits();</div>
<div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;        Parent = std::make_pair(Cast, 0);</div>
<div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;        Scale = Scale.<a class="code" href="classllvm_1_1APInt.html#aca8fce65eb69a82aa10a635e2e79877a">sext</a>(LargeSize);</div>
<div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;        <span class="keywordflow">if</span> (logScale + 1 == (int32_t)Cast-&gt;getType()-&gt;getPrimitiveSizeInBits())</div>
<div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;          logScale = -1;</div>
<div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;        <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Scale.<a class="code" href="classllvm_1_1APInt.html#a6f1d5427c61a0f0159f6e85f41944c5c">exactLogBase2</a>() == logScale);</div>
<div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;      }</div>
<div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;    }</div>
<div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160; </div>
<div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;    <span class="comment">// Unsupported expression, bail out.</span></div>
<div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;  }</div>
<div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160; </div>
<div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;  <span class="comment">// If Op is zero then Val = Op * Scale.</span></div>
<div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#ae77be336e228cf9aa00709a8606dfb98">m_Zero</a>())) {</div>
<div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;    NoSignedWrap = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>;</div>
<div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;  }</div>
<div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160; </div>
<div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;  <span class="comment">// We know that we can successfully descale, so from here on we can safely</span></div>
<div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;  <span class="comment">// modify the IR.  Op holds the descaled version of the deepest term in the</span></div>
<div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;  <span class="comment">// expression.  NoSignedWrap is &#39;true&#39; if multiplying Op by Scale is known</span></div>
<div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;  <span class="comment">// not to overflow.</span></div>
<div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160; </div>
<div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;  <span class="keywordflow">if</span> (!Parent.first)</div>
<div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;    <span class="comment">// The expression only had one term.</span></div>
<div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>;</div>
<div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160; </div>
<div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;  <span class="comment">// Rewrite the parent using the descaled version of its operand.</span></div>
<div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Parent.first-&gt;hasOneUse() &amp;&amp; <span class="stringliteral">&quot;Drilled down when more than one use!&quot;</span>);</div>
<div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a> != Parent.first-&gt;getOperand(Parent.second) &amp;&amp;</div>
<div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;         <span class="stringliteral">&quot;Descaling was a no-op?&quot;</span>);</div>
<div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;  replaceOperand(*Parent.first, Parent.second, <a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>);</div>
<div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;  Worklist.push(Parent.first);</div>
<div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160; </div>
<div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;  <span class="comment">// Now work back up the expression correcting nsw flags.  The logic is based</span></div>
<div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;  <span class="comment">// on the following observation: if X * Y is known not to overflow as a signed</span></div>
<div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;  <span class="comment">// multiplication, and Y is replaced by a value Z with smaller absolute value,</span></div>
<div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;  <span class="comment">// then X * Z will not overflow as a signed multiplication either.  As we work</span></div>
<div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;  <span class="comment">// our way up, having NoSignedWrap &#39;true&#39; means that the descaled value at the</span></div>
<div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;  <span class="comment">// current level has strictly smaller absolute value than the original.</span></div>
<div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Ancestor = Parent.first;</div>
<div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;  <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> *BO = dyn_cast&lt;BinaryOperator&gt;(Ancestor)) {</div>
<div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;      <span class="comment">// If the multiplication wasn&#39;t nsw then we can&#39;t say anything about the</span></div>
<div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;      <span class="comment">// value of the descaled multiplication, and we have to clear nsw flags</span></div>
<div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;      <span class="comment">// from this point on up.</span></div>
<div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;      <span class="keywordtype">bool</span> OpNoSignedWrap = BO-&gt;<a class="code" href="classllvm_1_1Instruction.html#a350f4fdc01c770b5cf6a8be2624ae3e5">hasNoSignedWrap</a>();</div>
<div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;      NoSignedWrap &amp;= OpNoSignedWrap;</div>
<div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;      <span class="keywordflow">if</span> (NoSignedWrap != OpNoSignedWrap) {</div>
<div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;        BO-&gt;<a class="code" href="classllvm_1_1Instruction.html#a4166b451a572b1e5d3fea7250af53653">setHasNoSignedWrap</a>(NoSignedWrap);</div>
<div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;        Worklist.push(Ancestor);</div>
<div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;      }</div>
<div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Ancestor-&gt;<a class="code" href="classllvm_1_1Instruction.html#ab4e05d690df389b8b1477c90387b575f">getOpcode</a>() == Instruction::Trunc) {</div>
<div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;      <span class="comment">// The fact that the descaled input to the trunc has smaller absolute</span></div>
<div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;      <span class="comment">// value than the original input doesn&#39;t tell us anything useful about</span></div>
<div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;      <span class="comment">// the absolute values of the truncations.</span></div>
<div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;      NoSignedWrap = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;    }</div>
<div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((Ancestor-&gt;<a class="code" href="classllvm_1_1Instruction.html#ab4e05d690df389b8b1477c90387b575f">getOpcode</a>() != Instruction::SExt || NoSignedWrap) &amp;&amp;</div>
<div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;           <span class="stringliteral">&quot;Failed to keep proper track of nsw flags while drilling down?&quot;</span>);</div>
<div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160; </div>
<div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;    <span class="keywordflow">if</span> (Ancestor == Val)</div>
<div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;      <span class="comment">// Got to the top, all done!</span></div>
<div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;      <span class="keywordflow">return</span> Val;</div>
<div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160; </div>
<div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;    <span class="comment">// Move up one level in the expression.</span></div>
<div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Ancestor-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>() &amp;&amp; <span class="stringliteral">&quot;Drilled down when more than one use!&quot;</span>);</div>
<div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;    Ancestor = Ancestor-&gt;<a class="code" href="classllvm_1_1Instruction.html#a2fd1d2dc14e22227cfa8238778ab87b8">user_back</a>();</div>
<div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;  } <span class="keywordflow">while</span> (<span class="keyword">true</span>);</div>
<div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;}</div>
<div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160; </div>
<div class="line"><a name="l01651"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombinerImpl.html#acbf4c17d9f1b9f6729602a3c2a6c5b9d"> 1651</a></span>&#160;<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombinerImpl.html#acbf4c17d9f1b9f6729602a3c2a6c5b9d">InstCombinerImpl::foldVectorBinop</a>(<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> &amp;Inst) {</div>
<div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;  <span class="keywordflow">if</span> (!isa&lt;VectorType&gt;(Inst.<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()))</div>
<div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160; </div>
<div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html#ac26154a24f393f523c87cc5f8239f36c">BinaryOperator::BinaryOps</a> Opcode = Inst.<a class="code" href="classllvm_1_1BinaryOperator.html#a31bf07f3f61525486633bc1d0bbaf029">getOpcode</a>();</div>
<div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a> = Inst.<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0), *<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a> = Inst.<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(1);</div>
<div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(cast&lt;VectorType&gt;(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>())-&gt;getElementCount() ==</div>
<div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;         cast&lt;VectorType&gt;(Inst.<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>())-&gt;getElementCount());</div>
<div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(cast&lt;VectorType&gt;(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>())-&gt;getElementCount() ==</div>
<div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;         cast&lt;VectorType&gt;(Inst.<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>())-&gt;getElementCount());</div>
<div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160; </div>
<div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;  <span class="comment">// If both operands of the binop are vector concatenations, then perform the</span></div>
<div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;  <span class="comment">// narrow binop on each pair of the source operands followed by concatenation</span></div>
<div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;  <span class="comment">// of the results.</span></div>
<div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *L0, *L1, *R0, *R1;</div>
<div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;  <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;int&gt;</a> <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a>;</div>
<div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#afd3e8a6706810fef8cdbaf1f9f40dfbd">m_Shuffle</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(L0), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(L1), <a class="code" href="structllvm_1_1PatternMatch_1_1m__Mask.html">m_Mask</a>(<a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a>))) &amp;&amp;</div>
<div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;      <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#afd3e8a6706810fef8cdbaf1f9f40dfbd">m_Shuffle</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(R0), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(R1), <a class="code" href="structllvm_1_1PatternMatch_1_1m__SpecificMask.html">m_SpecificMask</a>(<a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a>))) &amp;&amp;</div>
<div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;      <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>() &amp;&amp; <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>() &amp;&amp;</div>
<div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;      cast&lt;ShuffleVectorInst&gt;(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>)-&gt;isConcat() &amp;&amp;</div>
<div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;      cast&lt;ShuffleVectorInst&gt;(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>)-&gt;isConcat()) {</div>
<div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;    <span class="comment">// This transform does not have the speculative execution constraint as</span></div>
<div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;    <span class="comment">// below because the shuffle is a concatenation. The new binops are</span></div>
<div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;    <span class="comment">// operating on exactly the same elements as the existing binop.</span></div>
<div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;    <span class="comment">// TODO: We could ease the mask requirement to allow different undef lanes,</span></div>
<div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;    <span class="comment">//       but that requires an analysis of the binop-with-undef output value.</span></div>
<div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *NewBO0 = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBinOp(Opcode, L0, R0);</div>
<div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> *BO = dyn_cast&lt;BinaryOperator&gt;(NewBO0))</div>
<div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;      BO-&gt;<a class="code" href="classllvm_1_1Instruction.html#a3e6d2896c39a84cfa6c47f34cdc584ff">copyIRFlags</a>(&amp;Inst);</div>
<div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *NewBO1 = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBinOp(Opcode, L1, R1);</div>
<div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> *BO = dyn_cast&lt;BinaryOperator&gt;(NewBO1))</div>
<div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;      BO-&gt;<a class="code" href="classllvm_1_1Instruction.html#a3e6d2896c39a84cfa6c47f34cdc584ff">copyIRFlags</a>(&amp;Inst);</div>
<div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ShuffleVectorInst.html">ShuffleVectorInst</a>(NewBO0, NewBO1, <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a>);</div>
<div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;  }</div>
<div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160; </div>
<div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;  <span class="keyword">auto</span> createBinOpReverse = [&amp;](<a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>) {</div>
<div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *V = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBinOp(Opcode, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, Inst.<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>());</div>
<div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> *BO = dyn_cast&lt;BinaryOperator&gt;(V))</div>
<div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;      BO-&gt;<a class="code" href="classllvm_1_1Instruction.html#a3e6d2896c39a84cfa6c47f34cdc584ff">copyIRFlags</a>(&amp;Inst);</div>
<div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;    <a class="code" href="classllvm_1_1Module.html">Module</a> *<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a> = Inst.<a class="code" href="classllvm_1_1Instruction.html#a4ba3a5be6c0e9b9e8a525de055836733">getModule</a>();</div>
<div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;    <a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> = <a class="code" href="namespacellvm_1_1Intrinsic.html#aefa39f6b622360ce4e947feb9f671b73">Intrinsic::getDeclaration</a>(</div>
<div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;        <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>, Intrinsic::experimental_vector_reverse, V-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>());</div>
<div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1CallInst.html#a850d8262cd900958b3153c4aa080b2bb">CallInst::Create</a>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, V);</div>
<div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;  };</div>
<div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160; </div>
<div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;  <span class="comment">// NOTE: Reverse shuffles don&#39;t require the speculative execution protection</span></div>
<div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;  <span class="comment">// below because they don&#39;t affect which lanes take part in the computation.</span></div>
<div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160; </div>
<div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *V1, *<a class="code" href="namespacellvm_1_1NVPTX_1_1PTXLdStInstCode.html#a91119cbee2be000c528a690252aee07ca24244a27b634ef3e256ab3c64c6fecd4">V2</a>;</div>
<div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#ad4201fc3d0958c5d8dff30af6fa45803">m_VecReverse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(V1)))) {</div>
<div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;    <span class="comment">// Op(rev(V1), rev(V2)) -&gt; rev(Op(V1, V2))</span></div>
<div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#ad4201fc3d0958c5d8dff30af6fa45803">m_VecReverse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="namespacellvm_1_1NVPTX_1_1PTXLdStInstCode.html#a91119cbee2be000c528a690252aee07ca24244a27b634ef3e256ab3c64c6fecd4">V2</a>))) &amp;&amp;</div>
<div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;        (<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>() || <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>() ||</div>
<div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;         (<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a> == <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a> &amp;&amp; <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>-&gt;<a class="code" href="classllvm_1_1Value.html#a7c779ce2ba55bc94f52014fc25f3d520">hasNUses</a>(2))))</div>
<div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;      <span class="keywordflow">return</span> createBinOpReverse(V1, <a class="code" href="namespacellvm_1_1NVPTX_1_1PTXLdStInstCode.html#a91119cbee2be000c528a690252aee07ca24244a27b634ef3e256ab3c64c6fecd4">V2</a>);</div>
<div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160; </div>
<div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;    <span class="comment">// Op(rev(V1), RHSSplat)) -&gt; rev(Op(V1, RHSSplat))</span></div>
<div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>() &amp;&amp; <a class="code" href="namespacellvm.html#a6339f2ad6701dc229c34ca4305596d3a">isSplatValue</a>(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>))</div>
<div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;      <span class="keywordflow">return</span> createBinOpReverse(V1, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>);</div>
<div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;  }</div>
<div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;  <span class="comment">// Op(LHSSplat, rev(V2)) -&gt; rev(Op(LHSSplat, V2))</span></div>
<div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a6339f2ad6701dc229c34ca4305596d3a">isSplatValue</a>(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>) &amp;&amp; <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#ad4201fc3d0958c5d8dff30af6fa45803">m_VecReverse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="namespacellvm_1_1NVPTX_1_1PTXLdStInstCode.html#a91119cbee2be000c528a690252aee07ca24244a27b634ef3e256ab3c64c6fecd4">V2</a>)))))</div>
<div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;    <span class="keywordflow">return</span> createBinOpReverse(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="namespacellvm_1_1NVPTX_1_1PTXLdStInstCode.html#a91119cbee2be000c528a690252aee07ca24244a27b634ef3e256ab3c64c6fecd4">V2</a>);</div>
<div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160; </div>
<div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;  <span class="comment">// It may not be safe to reorder shuffles and things like div, urem, etc.</span></div>
<div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;  <span class="comment">// because we may trap when executing those ops on unknown vector elements.</span></div>
<div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;  <span class="comment">// See PR20059.</span></div>
<div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm.html#abe76d72cda6b2b4562c72accb510040b">isSafeToSpeculativelyExecute</a>(&amp;Inst))</div>
<div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160; </div>
<div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;  <span class="keyword">auto</span> createBinOpShuffle = [&amp;](<a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;int&gt;</a> <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>) {</div>
<div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *XY = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBinOp(Opcode, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>);</div>
<div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> *BO = dyn_cast&lt;BinaryOperator&gt;(XY))</div>
<div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;      BO-&gt;<a class="code" href="classllvm_1_1Instruction.html#a3e6d2896c39a84cfa6c47f34cdc584ff">copyIRFlags</a>(&amp;Inst);</div>
<div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ShuffleVectorInst.html">ShuffleVectorInst</a>(XY, <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>);</div>
<div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;  };</div>
<div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160; </div>
<div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;  <span class="comment">// If both arguments of the binary operation are shuffles that use the same</span></div>
<div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;  <span class="comment">// mask and shuffle within a single vector, move the shuffle after the binop.</span></div>
<div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#afd3e8a6706810fef8cdbaf1f9f40dfbd">m_Shuffle</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(V1), <a class="code" href="namespacellvm_1_1PatternMatch.html#adea6dc2e42baa345b97be48b0370313d">m_Undef</a>(), <a class="code" href="structllvm_1_1PatternMatch_1_1m__Mask.html">m_Mask</a>(<a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a>))) &amp;&amp;</div>
<div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;      <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#afd3e8a6706810fef8cdbaf1f9f40dfbd">m_Shuffle</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="namespacellvm_1_1NVPTX_1_1PTXLdStInstCode.html#a91119cbee2be000c528a690252aee07ca24244a27b634ef3e256ab3c64c6fecd4">V2</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#adea6dc2e42baa345b97be48b0370313d">m_Undef</a>(), <a class="code" href="structllvm_1_1PatternMatch_1_1m__SpecificMask.html">m_SpecificMask</a>(<a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a>))) &amp;&amp;</div>
<div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;      V1-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>() == <a class="code" href="namespacellvm_1_1NVPTX_1_1PTXLdStInstCode.html#a91119cbee2be000c528a690252aee07ca24244a27b634ef3e256ab3c64c6fecd4">V2</a>-&gt;getType() &amp;&amp;</div>
<div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;      (<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>() || <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>() || <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a> == <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>)) {</div>
<div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;    <span class="comment">// Op(shuffle(V1, Mask), shuffle(V2, Mask)) -&gt; shuffle(Op(V1, V2), Mask)</span></div>
<div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;    <span class="keywordflow">return</span> createBinOpShuffle(V1, <a class="code" href="namespacellvm_1_1NVPTX_1_1PTXLdStInstCode.html#a91119cbee2be000c528a690252aee07ca24244a27b634ef3e256ab3c64c6fecd4">V2</a>, <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a>);</div>
<div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;  }</div>
<div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160; </div>
<div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;  <span class="comment">// If both arguments of a commutative binop are select-shuffles that use the</span></div>
<div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;  <span class="comment">// same mask with commuted operands, the shuffles are unnecessary.</span></div>
<div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;  <span class="keywordflow">if</span> (Inst.<a class="code" href="classllvm_1_1Instruction.html#a55743bd32282bf6f87aeb49237b1fb68">isCommutative</a>() &amp;&amp;</div>
<div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;      <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#afd3e8a6706810fef8cdbaf1f9f40dfbd">m_Shuffle</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(V1), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="namespacellvm_1_1NVPTX_1_1PTXLdStInstCode.html#a91119cbee2be000c528a690252aee07ca24244a27b634ef3e256ab3c64c6fecd4">V2</a>), <a class="code" href="structllvm_1_1PatternMatch_1_1m__Mask.html">m_Mask</a>(<a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a>))) &amp;&amp;</div>
<div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;      <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>,</div>
<div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;            <a class="code" href="namespacellvm_1_1PatternMatch.html#afd3e8a6706810fef8cdbaf1f9f40dfbd">m_Shuffle</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="namespacellvm_1_1NVPTX_1_1PTXLdStInstCode.html#a91119cbee2be000c528a690252aee07ca24244a27b634ef3e256ab3c64c6fecd4">V2</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(V1), <a class="code" href="structllvm_1_1PatternMatch_1_1m__SpecificMask.html">m_SpecificMask</a>(<a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a>)))) {</div>
<div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;    <span class="keyword">auto</span> *LShuf = cast&lt;ShuffleVectorInst&gt;(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>);</div>
<div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;    <span class="keyword">auto</span> *RShuf = cast&lt;ShuffleVectorInst&gt;(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>);</div>
<div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;    <span class="comment">// TODO: Allow shuffles that contain undefs in the mask?</span></div>
<div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;    <span class="comment">//       That is legal, but it reduces undef knowledge.</span></div>
<div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;    <span class="comment">// TODO: Allow arbitrary shuffles by shuffling after binop?</span></div>
<div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;    <span class="comment">//       That might be legal, but we have to deal with poison.</span></div>
<div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;    <span class="keywordflow">if</span> (LShuf-&gt;isSelect() &amp;&amp;</div>
<div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;        !<a class="code" href="namespacellvm.html#acd1cd968cb420c82d70926920fcdc7d7">is_contained</a>(LShuf-&gt;getShuffleMask(), <a class="code" href="namespacellvm.html#a4e09435caee07f636a47006fa08b9ec4">UndefMaskElem</a>) &amp;&amp;</div>
<div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;        RShuf-&gt;isSelect() &amp;&amp;</div>
<div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;        !<a class="code" href="namespacellvm.html#acd1cd968cb420c82d70926920fcdc7d7">is_contained</a>(RShuf-&gt;getShuffleMask(), <a class="code" href="namespacellvm.html#a4e09435caee07f636a47006fa08b9ec4">UndefMaskElem</a>)) {</div>
<div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;      <span class="comment">// Example:</span></div>
<div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;      <span class="comment">// LHS = shuffle V1, V2, &lt;0, 5, 6, 3&gt;</span></div>
<div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;      <span class="comment">// RHS = shuffle V2, V1, &lt;0, 5, 6, 3&gt;</span></div>
<div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;      <span class="comment">// LHS + RHS --&gt; (V10+V20, V21+V11, V22+V12, V13+V23) --&gt; V1 + V2</span></div>
<div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;      <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *NewBO = <a class="code" href="classllvm_1_1BinaryOperator.html#a02ce9966395063ac501ecbc1623deda4">BinaryOperator::Create</a>(Opcode, V1, <a class="code" href="namespacellvm_1_1NVPTX_1_1PTXLdStInstCode.html#a91119cbee2be000c528a690252aee07ca24244a27b634ef3e256ab3c64c6fecd4">V2</a>);</div>
<div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;      NewBO-&gt;<a class="code" href="classllvm_1_1Instruction.html#a3e6d2896c39a84cfa6c47f34cdc584ff">copyIRFlags</a>(&amp;Inst);</div>
<div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;      <span class="keywordflow">return</span> NewBO;</div>
<div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;    }</div>
<div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;  }</div>
<div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160; </div>
<div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;  <span class="comment">// If one argument is a shuffle within one vector and the other is a constant,</span></div>
<div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;  <span class="comment">// try moving the shuffle after the binary operation. This canonicalization</span></div>
<div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;  <span class="comment">// intends to move shuffles closer to other shuffles and binops closer to</span></div>
<div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;  <span class="comment">// other binops, so they can be folded. It may also enable demanded elements</span></div>
<div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;  <span class="comment">// transforms.</span></div>
<div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>;</div>
<div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;  <span class="keyword">auto</span> *InstVTy = dyn_cast&lt;FixedVectorType&gt;(Inst.<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>());</div>
<div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;  <span class="keywordflow">if</span> (InstVTy &amp;&amp;</div>
<div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;      <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(&amp;Inst,</div>
<div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;            <a class="code" href="namespacellvm_1_1PatternMatch.html#ac56cd25f664c1497623d26158a6c5997">m_c_BinOp</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#afd3e8a6706810fef8cdbaf1f9f40dfbd">m_Shuffle</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(V1), <a class="code" href="namespacellvm_1_1PatternMatch.html#adea6dc2e42baa345b97be48b0370313d">m_Undef</a>(), <a class="code" href="structllvm_1_1PatternMatch_1_1m__Mask.html">m_Mask</a>(<a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a>))),</div>
<div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;                      <a class="code" href="namespacellvm_1_1PatternMatch.html#aec0ccdbde0581b3aae7f001634a34d8e">m_ImmConstant</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>))) &amp;&amp;</div>
<div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;      cast&lt;FixedVectorType&gt;(V1-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>())-&gt;getNumElements() &lt;=</div>
<div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;          InstVTy-&gt;getNumElements()) {</div>
<div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(InstVTy-&gt;getScalarType() == V1-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a4abb39a66573f61fda80469faa5d861d">getScalarType</a>() &amp;&amp;</div>
<div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;           <span class="stringliteral">&quot;Shuffle should not change scalar type&quot;</span>);</div>
<div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160; </div>
<div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;    <span class="comment">// Find constant NewC that has property:</span></div>
<div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;    <span class="comment">//   shuffle(NewC, ShMask) = C</span></div>
<div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;    <span class="comment">// If such constant does not exist (example: ShMask=&lt;0,0&gt; and C=&lt;1,2&gt;)</span></div>
<div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;    <span class="comment">// reorder is not possible. A 1-to-1 mapping is not required. Example:</span></div>
<div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;    <span class="comment">// ShMask = &lt;1,1,2,2&gt; and C = &lt;5,5,6,6&gt; --&gt; NewC = &lt;undef,5,6,undef&gt;</span></div>
<div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;    <span class="keywordtype">bool</span> ConstOp1 = isa&lt;Constant&gt;(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>);</div>
<div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;    <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;int&gt;</a> ShMask = <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a>;</div>
<div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;    <span class="keywordtype">unsigned</span> SrcVecNumElts =</div>
<div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;        cast&lt;FixedVectorType&gt;(V1-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>())-&gt;getNumElements();</div>
<div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;    <a class="code" href="classllvm_1_1UndefValue.html">UndefValue</a> *UndefScalar = <a class="code" href="classllvm_1_1UndefValue.html#a4ae5ff22b700a42bcc5d889233721335">UndefValue::get</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;getType()-&gt;getScalarType());</div>
<div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Constant *, 16&gt;</a> NewVecC(SrcVecNumElts, UndefScalar);</div>
<div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;    <span class="keywordtype">bool</span> MayChange = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;    <span class="keywordtype">unsigned</span> NumElts = InstVTy-&gt;getNumElements();</div>
<div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> &lt; NumElts; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;      <a class="code" href="classllvm_1_1Constant.html">Constant</a> *CElt = <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;<a class="code" href="classllvm_1_1Constant.html#acd530d0571f320d47d37e7ae51cf70ff">getAggregateElement</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;      <span class="keywordflow">if</span> (ShMask[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>] &gt;= 0) {</div>
<div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;        <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(ShMask[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>] &lt; (<span class="keywordtype">int</span>)NumElts &amp;&amp; <span class="stringliteral">&quot;Not expecting narrowing shuffle&quot;</span>);</div>
<div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;        <a class="code" href="classllvm_1_1Constant.html">Constant</a> *NewCElt = NewVecC[ShMask[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>]];</div>
<div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;        <span class="comment">// Bail out if:</span></div>
<div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;        <span class="comment">// 1. The constant vector contains a constant expression.</span></div>
<div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;        <span class="comment">// 2. The shuffle needs an element of the constant vector that can&#39;t</span></div>
<div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;        <span class="comment">//    be mapped to a new constant vector.</span></div>
<div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;        <span class="comment">// 3. This is a widening shuffle that copies elements of V1 into the</span></div>
<div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;        <span class="comment">//    extended elements (extending with undef is allowed).</span></div>
<div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;        <span class="keywordflow">if</span> (!CElt || (!isa&lt;UndefValue&gt;(NewCElt) &amp;&amp; NewCElt != CElt) ||</div>
<div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;            <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> &gt;= SrcVecNumElts) {</div>
<div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;          MayChange = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;        }</div>
<div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;        NewVecC[ShMask[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>]] = CElt;</div>
<div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;      }</div>
<div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;      <span class="comment">// If this is a widening shuffle, we must be able to extend with undef</span></div>
<div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;      <span class="comment">// elements. If the original binop does not produce an undef in the high</span></div>
<div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;      <span class="comment">// lanes, then this transform is not safe.</span></div>
<div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;      <span class="comment">// Similarly for undef lanes due to the shuffle mask, we can only</span></div>
<div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;      <span class="comment">// transform binops that preserve undef.</span></div>
<div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;      <span class="comment">// TODO: We could shuffle those non-undef constant values into the</span></div>
<div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;      <span class="comment">//       result by using a constant vector (rather than an undef vector)</span></div>
<div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;      <span class="comment">//       as operand 1 of the new binop, but that might be too aggressive</span></div>
<div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;      <span class="comment">//       for target-independent shuffle creation.</span></div>
<div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> &gt;= SrcVecNumElts || ShMask[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>] &lt; 0) {</div>
<div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;        <a class="code" href="classllvm_1_1Constant.html">Constant</a> *MaybeUndef =</div>
<div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;            ConstOp1</div>
<div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;                ? <a class="code" href="namespacellvm.html#a964455f36837281d37f2a44e2fcb4cca">ConstantFoldBinaryOpOperands</a>(Opcode, UndefScalar, CElt, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>)</div>
<div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;                : <a class="code" href="namespacellvm.html#a964455f36837281d37f2a44e2fcb4cca">ConstantFoldBinaryOpOperands</a>(Opcode, CElt, UndefScalar, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>);</div>
<div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;        <span class="keywordflow">if</span> (!MaybeUndef || !<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(MaybeUndef, <a class="code" href="namespacellvm_1_1PatternMatch.html#adea6dc2e42baa345b97be48b0370313d">m_Undef</a>())) {</div>
<div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;          MayChange = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;        }</div>
<div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;      }</div>
<div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;    }</div>
<div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;    <span class="keywordflow">if</span> (MayChange) {</div>
<div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;      <a class="code" href="classllvm_1_1Constant.html">Constant</a> *NewC = <a class="code" href="classllvm_1_1ConstantVector.html#ade9fa017ca3aa82f7694a47090547bc1">ConstantVector::get</a>(NewVecC);</div>
<div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;      <span class="comment">// It may not be safe to execute a binop on a vector with undef elements</span></div>
<div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;      <span class="comment">// because the entire instruction can be folded to undef or create poison</span></div>
<div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;      <span class="comment">// that did not exist in the original code.</span></div>
<div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;      <span class="keywordflow">if</span> (Inst.<a class="code" href="classllvm_1_1Instruction.html#af9c2825ab53adf1bf8c9fa19ec89d986">isIntDivRem</a>() || (Inst.<a class="code" href="classllvm_1_1Instruction.html#ac5984d6827f6e6922bed00bf03ba9552">isShift</a>() &amp;&amp; ConstOp1))</div>
<div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;        NewC = getSafeVectorConstantForBinop(Opcode, NewC, ConstOp1);</div>
<div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160; </div>
<div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;      <span class="comment">// Op(shuffle(V1, Mask), C) -&gt; shuffle(Op(V1, NewC), Mask)</span></div>
<div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;      <span class="comment">// Op(C, shuffle(V1, Mask)) -&gt; shuffle(Op(NewC, V1), Mask)</span></div>
<div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *NewLHS = ConstOp1 ? V1 : NewC;</div>
<div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *NewRHS = ConstOp1 ? NewC : V1;</div>
<div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;      <span class="keywordflow">return</span> createBinOpShuffle(NewLHS, NewRHS, <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a>);</div>
<div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;    }</div>
<div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;  }</div>
<div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160; </div>
<div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;  <span class="comment">// Try to reassociate to sink a splat shuffle after a binary operation.</span></div>
<div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;  <span class="keywordflow">if</span> (Inst.<a class="code" href="classllvm_1_1Instruction.html#a4f0027b9d05b27206b1882976fce9038">isAssociative</a>() &amp;&amp; Inst.<a class="code" href="classllvm_1_1Instruction.html#a55743bd32282bf6f87aeb49237b1fb68">isCommutative</a>()) {</div>
<div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;    <span class="comment">// Canonicalize shuffle operand as LHS.</span></div>
<div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;    <span class="keywordflow">if</span> (isa&lt;ShuffleVectorInst&gt;(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>))</div>
<div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;      <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>);</div>
<div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160; </div>
<div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>;</div>
<div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;    <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;int&gt;</a> MaskC;</div>
<div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;    <span class="keywordtype">int</span> SplatIndex;</div>
<div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, *OtherOp;</div>
<div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>,</div>
<div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;               <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#afd3e8a6706810fef8cdbaf1f9f40dfbd">m_Shuffle</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#adea6dc2e42baa345b97be48b0370313d">m_Undef</a>(), <a class="code" href="structllvm_1_1PatternMatch_1_1m__Mask.html">m_Mask</a>(MaskC)))) ||</div>
<div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;        !<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(MaskC, <a class="code" href="structllvm_1_1PatternMatch_1_1m__SplatOrUndefMask.html">m_SplatOrUndefMask</a>(SplatIndex)) ||</div>
<div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;        <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getType() != Inst.<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>() ||</div>
<div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;        !<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a43ac4fbaaf63a88eb5ac05f6d3e5649c">m_BinOp</a>(Opcode, <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(OtherOp)))))</div>
<div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160; </div>
<div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;    <span class="comment">// FIXME: This may not be safe if the analysis allows undef elements. By</span></div>
<div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;    <span class="comment">//        moving &#39;Y&#39; before the splat shuffle, we are implicitly assuming</span></div>
<div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;    <span class="comment">//        that it is not undef/poison at the splat index.</span></div>
<div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a6339f2ad6701dc229c34ca4305596d3a">isSplatValue</a>(OtherOp, SplatIndex)) {</div>
<div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;      <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, OtherOp);</div>
<div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm.html#a6339f2ad6701dc229c34ca4305596d3a">isSplatValue</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, SplatIndex)) {</div>
<div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;    }</div>
<div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160; </div>
<div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;    <span class="comment">// X and Y are splatted values, so perform the binary operation on those</span></div>
<div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;    <span class="comment">// values followed by a splat followed by the 2nd binary operation:</span></div>
<div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;    <span class="comment">// bo (splat X), (bo Y, OtherOp) --&gt; bo (splat (bo X, Y)), OtherOp</span></div>
<div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *NewBO = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBinOp(Opcode, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>);</div>
<div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;int, 8&gt;</a> NewMask(MaskC.<a class="code" href="classllvm_1_1ArrayRef.html#a85ffb6531d4cda988ea81f18d4e56fb7">size</a>(), SplatIndex);</div>
<div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *NewSplat = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateShuffleVector(NewBO, NewMask);</div>
<div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *R = <a class="code" href="classllvm_1_1BinaryOperator.html#a02ce9966395063ac501ecbc1623deda4">BinaryOperator::Create</a>(Opcode, NewSplat, OtherOp);</div>
<div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160; </div>
<div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;    <span class="comment">// Intersect FMF on both new binops. Other (poison-generating) flags are</span></div>
<div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;    <span class="comment">// dropped to be safe.</span></div>
<div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;    <span class="keywordflow">if</span> (isa&lt;FPMathOperator&gt;(R)) {</div>
<div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;      R-&gt;copyFastMathFlags(&amp;Inst);</div>
<div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;      R-&gt;andIRFlags(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>);</div>
<div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;    }</div>
<div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> *NewInstBO = dyn_cast&lt;BinaryOperator&gt;(NewBO))</div>
<div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;      NewInstBO-&gt;copyIRFlags(R);</div>
<div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;    <span class="keywordflow">return</span> R;</div>
<div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;  }</div>
<div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160; </div>
<div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;}</div>
<div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;<span class="comment">/// Try to narrow the width of a binop if at least 1 operand is an extend of</span></div>
<div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;<span class="comment">/// of a value. This requires a potentially expensive known bits check to make</span></div>
<div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;<span class="comment">/// sure the narrow op does not overflow.</span></div>
<div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *InstCombinerImpl::narrowMathIfNoOverflow(<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> &amp;BO) {</div>
<div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;  <span class="comment">// We need at least one extended operand.</span></div>
<div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Op0 = BO.<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0), *Op1 = BO.<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(1);</div>
<div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160; </div>
<div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;  <span class="comment">// If this is a sub, we swap the operands since we always want an extension</span></div>
<div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;  <span class="comment">// on the RHS. The LHS can be an extension or a constant.</span></div>
<div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;  <span class="keywordflow">if</span> (BO.<a class="code" href="classllvm_1_1BinaryOperator.html#a31bf07f3f61525486633bc1d0bbaf029">getOpcode</a>() == Instruction::Sub)</div>
<div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;    <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(Op0, Op1);</div>
<div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160; </div>
<div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>;</div>
<div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;  <span class="keywordtype">bool</span> IsSext = <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#aaab494a433fbb23bc68393ee8bcfc5ac">m_SExt</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>)));</div>
<div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;  <span class="keywordflow">if</span> (!IsSext &amp;&amp; !<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a2cbdca7c8267aac6914d674f8e81841b">m_ZExt</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>))))</div>
<div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160; </div>
<div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;  <span class="comment">// If both operands are the same extension from the same source type and we</span></div>
<div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;  <span class="comment">// can eliminate at least one (hasOneUse), this might work.</span></div>
<div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html#afa0b2fa29ba074f2b6ec9ac11163f2d9">CastInst::CastOps</a> CastOpc = IsSext ? Instruction::SExt : Instruction::ZExt;</div>
<div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>;</div>
<div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;  <span class="keywordflow">if</span> (!(<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#a247b6987d634040b8aa6fb9c5887b703">m_ZExtOrSExt</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>))) &amp;&amp; <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getType() == <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>-&gt;getType() &amp;&amp;</div>
<div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;        cast&lt;Operator&gt;(Op1)-&gt;getOpcode() == CastOpc &amp;&amp;</div>
<div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;        (Op0-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>() || Op1-&gt;hasOneUse()))) {</div>
<div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;    <span class="comment">// If that did not match, see if we have a suitable constant operand.</span></div>
<div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;    <span class="comment">// Truncating and extending must produce the same constant.</span></div>
<div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;    <a class="code" href="classllvm_1_1Constant.html">Constant</a> *WideC;</div>
<div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;    <span class="keywordflow">if</span> (!Op0-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>() || !<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#aadd209ba7e1bfa8113a609e09a7fe62f">m_Constant</a>(WideC)))</div>
<div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;    <a class="code" href="classllvm_1_1Constant.html">Constant</a> *NarrowC = <a class="code" href="classllvm_1_1ConstantExpr.html#af238147cf5453729781a0fcc7322e1c6">ConstantExpr::getTrunc</a>(WideC, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getType());</div>
<div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ConstantExpr.html#a49b69843927f7cd96d866768b3aec92b">ConstantExpr::getCast</a>(CastOpc, NarrowC, BO.<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()) != WideC)</div>
<div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;    <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a> = NarrowC;</div>
<div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;  }</div>
<div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160; </div>
<div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;  <span class="comment">// Swap back now that we found our operands.</span></div>
<div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;  <span class="keywordflow">if</span> (BO.<a class="code" href="classllvm_1_1BinaryOperator.html#a31bf07f3f61525486633bc1d0bbaf029">getOpcode</a>() == Instruction::Sub)</div>
<div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;    <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>);</div>
<div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160; </div>
<div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;  <span class="comment">// Both operands have narrow versions. Last step: the math must not overflow</span></div>
<div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;  <span class="comment">// in the narrow width.</span></div>
<div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="CorrelatedValuePropagation_8cpp.html#a52da671999cb61370bfe5c7e9fee966f">willNotOverflow</a>(BO.<a class="code" href="classllvm_1_1BinaryOperator.html#a31bf07f3f61525486633bc1d0bbaf029">getOpcode</a>(), <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, BO, IsSext))</div>
<div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160; </div>
<div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;  <span class="comment">// bo (ext X), (ext Y) --&gt; ext (bo X, Y)</span></div>
<div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;  <span class="comment">// bo (ext X), C       --&gt; ext (bo X, C&#39;)</span></div>
<div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *NarrowBO = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBinOp(BO.<a class="code" href="classllvm_1_1BinaryOperator.html#a31bf07f3f61525486633bc1d0bbaf029">getOpcode</a>(), <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, <span class="stringliteral">&quot;narrow&quot;</span>);</div>
<div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *NewBinOp = dyn_cast&lt;BinaryOperator&gt;(NarrowBO)) {</div>
<div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;    <span class="keywordflow">if</span> (IsSext)</div>
<div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;      NewBinOp-&gt;setHasNoSignedWrap();</div>
<div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;      NewBinOp-&gt;setHasNoUnsignedWrap();</div>
<div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;  }</div>
<div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1CastInst.html#a643fe5a9e7042f032dae78109c2b1e72">CastInst::Create</a>(CastOpc, NarrowBO, BO.<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>());</div>
<div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;}</div>
<div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160; </div>
<div class="line"><a name="l01951"></a><span class="lineno"><a class="line" href="InstructionCombining_8cpp.html#ae8211efb4227b65cbdba75fd23cfb668"> 1951</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="InstructionCombining_8cpp.html#ae8211efb4227b65cbdba75fd23cfb668">isMergedGEPInBounds</a>(<a class="code" href="classllvm_1_1GEPOperator.html">GEPOperator</a> &amp;GEP1, <a class="code" href="classllvm_1_1GEPOperator.html">GEPOperator</a> &amp;GEP2) {</div>
<div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;  <span class="comment">// At least one GEP must be inbounds.</span></div>
<div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;  <span class="keywordflow">if</span> (!GEP1.<a class="code" href="classllvm_1_1GEPOperator.html#a3783a9756e9b9a1fe124622d27522713">isInBounds</a>() &amp;&amp; !GEP2.<a class="code" href="classllvm_1_1GEPOperator.html#a3783a9756e9b9a1fe124622d27522713">isInBounds</a>())</div>
<div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160; </div>
<div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;  <span class="keywordflow">return</span> (GEP1.<a class="code" href="classllvm_1_1GEPOperator.html#a3783a9756e9b9a1fe124622d27522713">isInBounds</a>() || GEP1.<a class="code" href="classllvm_1_1GEPOperator.html#a608bf9c26922fc798bc8bd85601ce94d">hasAllZeroIndices</a>()) &amp;&amp;</div>
<div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;         (GEP2.<a class="code" href="classllvm_1_1GEPOperator.html#a3783a9756e9b9a1fe124622d27522713">isInBounds</a>() || GEP2.<a class="code" href="classllvm_1_1GEPOperator.html#a608bf9c26922fc798bc8bd85601ce94d">hasAllZeroIndices</a>());</div>
<div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;}</div>
<div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;<span class="comment">/// Thread a GEP operation with constant indices through the constant true/false</span></div>
<div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;<span class="comment">/// arms of a select.</span></div>
<div class="line"><a name="l01962"></a><span class="lineno"><a class="line" href="InstructionCombining_8cpp.html#a2c27d3aa3ffee14bf2194f7c0cbf9dfc"> 1962</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="InstructionCombining_8cpp.html#a2c27d3aa3ffee14bf2194f7c0cbf9dfc">foldSelectGEP</a>(<a class="code" href="classllvm_1_1GetElementPtrInst.html">GetElementPtrInst</a> &amp;<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>,</div>
<div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;                                  <a class="code" href="classllvm_1_1IRBuilder.html">InstCombiner::BuilderTy</a> &amp;<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>) {</div>
<div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>.hasAllConstantIndices())</div>
<div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160; </div>
<div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Sel;</div>
<div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>;</div>
<div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *TrueC, *FalseC;</div>
<div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>.getPointerOperand(), <a class="code" href="namespacellvm_1_1PatternMatch.html#a04353aa48874f9bda89ff9059cd1a5a6">m_Instruction</a>(Sel)) ||</div>
<div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;      !<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Sel,</div>
<div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;             <a class="code" href="namespacellvm_1_1PatternMatch.html#addb87fe3f509b7803d3f5933ee24b560">m_Select</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#aadd209ba7e1bfa8113a609e09a7fe62f">m_Constant</a>(TrueC), <a class="code" href="namespacellvm_1_1PatternMatch.html#aadd209ba7e1bfa8113a609e09a7fe62f">m_Constant</a>(FalseC))))</div>
<div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160; </div>
<div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;  <span class="comment">// gep (select Cond, TrueC, FalseC), IndexC --&gt; select Cond, TrueC&#39;, FalseC&#39;</span></div>
<div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;  <span class="comment">// Propagate &#39;inbounds&#39; and metadata from existing instructions.</span></div>
<div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;  <span class="comment">// Note: using IRBuilder to create the constants for efficiency.</span></div>
<div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Value *, 4&gt;</a> IndexC(<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>.indices());</div>
<div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;  <span class="keywordtype">bool</span> IsInBounds = <a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>.isInBounds();</div>
<div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *Ty = <a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>.getSourceElementType();</div>
<div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *NewTrueC = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateGEP(Ty, TrueC, IndexC, <span class="stringliteral">&quot;&quot;</span>, IsInBounds);</div>
<div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *NewFalseC = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateGEP(Ty, FalseC, IndexC, <span class="stringliteral">&quot;&quot;</span>, IsInBounds);</div>
<div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1SelectInst.html#aa55fb74dd22008fdcc26a63f44576022">SelectInst::Create</a>(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>, NewTrueC, NewFalseC, <span class="stringliteral">&quot;&quot;</span>, <span class="keyword">nullptr</span>, Sel);</div>
<div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;}</div>
<div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160; </div>
<div class="line"><a name="l01986"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombinerImpl.html#a22bc54f319e33d248b169116b757a143"> 1986</a></span>&#160;<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombinerImpl.html#a22bc54f319e33d248b169116b757a143">InstCombinerImpl::visitGEPOfGEP</a>(<a class="code" href="classllvm_1_1GetElementPtrInst.html">GetElementPtrInst</a> &amp;<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>,</div>
<div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;                                             <a class="code" href="classllvm_1_1GEPOperator.html">GEPOperator</a> *Src) {</div>
<div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;  <span class="comment">// Combine Indices - If the source pointer to this getelementptr instruction</span></div>
<div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;  <span class="comment">// is a getelementptr instruction with matching element type, combine the</span></div>
<div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;  <span class="comment">// indices of the two getelementptr instructions into a single instruction.</span></div>
<div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="InstructionCombining_8cpp.html#a27dc41c474e5376ef7d1865735cfb3dd">shouldMergeGEPs</a>(*cast&lt;GEPOperator&gt;(&amp;<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>), *Src))</div>
<div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160; </div>
<div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;  <span class="keywordflow">if</span> (Src-&gt;getResultElementType() == <a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>.getSourceElementType() &amp;&amp;</div>
<div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;      Src-&gt;getNumOperands() == 2 &amp;&amp; <a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>.getNumOperands() == 2 &amp;&amp;</div>
<div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;      Src-&gt;hasOneUse()) {</div>
<div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *GO1 = <a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>.getOperand(1);</div>
<div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *SO1 = Src-&gt;getOperand(1);</div>
<div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160; </div>
<div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;    <span class="keywordflow">if</span> (LI) {</div>
<div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;      <span class="comment">// Try to reassociate loop invariant GEP chains to enable LICM.</span></div>
<div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Loop.html">Loop</a> *L = LI-&gt;getLoopFor(<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>.getParent())) {</div>
<div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160;        <span class="comment">// Reassociate the two GEPs if SO1 is variant in the loop and GO1 is</span></div>
<div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;        <span class="comment">// invariant: this breaks the dependence between GEPs and allows LICM</span></div>
<div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160;        <span class="comment">// to hoist the invariant part out of the loop.</span></div>
<div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;        <span class="keywordflow">if</span> (L-&gt;isLoopInvariant(GO1) &amp;&amp; !L-&gt;isLoopInvariant(SO1)) {</div>
<div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;          <span class="comment">// The swapped GEPs are inbounds if both original GEPs are inbounds</span></div>
<div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160;          <span class="comment">// and the sign of the offsets is the same. For simplicity, only</span></div>
<div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;          <span class="comment">// handle both offsets being non-negative.</span></div>
<div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;          <span class="keywordtype">bool</span> IsInBounds = Src-&gt;isInBounds() &amp;&amp; <a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>.isInBounds() &amp;&amp;</div>
<div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;                            <a class="code" href="namespacellvm.html#ac0be0d93ccd89dac00411b3a5a8bef87">isKnownNonNegative</a>(SO1, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, 0, &amp;AC, &amp;<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>, &amp;DT) &amp;&amp;</div>
<div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160;                            <a class="code" href="namespacellvm.html#ac0be0d93ccd89dac00411b3a5a8bef87">isKnownNonNegative</a>(GO1, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, 0, &amp;AC, &amp;<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>, &amp;DT);</div>
<div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;          <span class="comment">// Put NewSrc at same location as %src.</span></div>
<div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160;          <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(cast&lt;Instruction&gt;(Src));</div>
<div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160;          <a class="code" href="classllvm_1_1Value.html">Value</a> *NewSrc = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateGEP(<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>.getSourceElementType(),</div>
<div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160;                                            Src-&gt;getPointerOperand(), GO1,</div>
<div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160;                                            Src-&gt;getName(), IsInBounds);</div>
<div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160;          <a class="code" href="classllvm_1_1GetElementPtrInst.html">GetElementPtrInst</a> *NewGEP = <a class="code" href="classllvm_1_1GetElementPtrInst.html#a74c47d18ecd4ca3399785e6ae07134dc">GetElementPtrInst::Create</a>(</div>
<div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;              <a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>.getSourceElementType(), NewSrc, {SO1});</div>
<div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;          NewGEP-&gt;<a class="code" href="classllvm_1_1GetElementPtrInst.html#a837e9f272fd070a5f8fc79c07a951106">setIsInBounds</a>(IsInBounds);</div>
<div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160;          <span class="keywordflow">return</span> NewGEP;</div>
<div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160;        }</div>
<div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160;      }</div>
<div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;    }</div>
<div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;  }</div>
<div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160; </div>
<div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;  <span class="comment">// Note that if our source is a gep chain itself then we wait for that</span></div>
<div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160;  <span class="comment">// chain to be resolved before we perform this transformation.  This</span></div>
<div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160;  <span class="comment">// avoids us creating a TON of code in some cases.</span></div>
<div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *SrcGEP = dyn_cast&lt;GEPOperator&gt;(Src-&gt;getOperand(0)))</div>
<div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;    <span class="keywordflow">if</span> (SrcGEP-&gt;getNumOperands() == 2 &amp;&amp; <a class="code" href="InstructionCombining_8cpp.html#a27dc41c474e5376ef7d1865735cfb3dd">shouldMergeGEPs</a>(*Src, *SrcGEP))</div>
<div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;   <span class="comment">// Wait until our source is folded to completion.</span></div>
<div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160; </div>
<div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160;  <span class="comment">// For constant GEPs, use a more general offset-based folding approach.</span></div>
<div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160;  <span class="comment">// Only do this for opaque pointers, as the result element type may change.</span></div>
<div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *PtrTy = Src-&gt;getType()-&gt;getScalarType();</div>
<div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160;  <span class="keywordflow">if</span> (PtrTy-&gt;<a class="code" href="classllvm_1_1Type.html#a54155244e7b172a97fe5b3096d84fa97">isOpaquePointerTy</a>() &amp;&amp; <a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>.hasAllConstantIndices() &amp;&amp;</div>
<div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160;      (Src-&gt;hasOneUse() || Src-&gt;hasAllConstantIndices())) {</div>
<div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;    <span class="comment">// Split Src into a variable part and a constant suffix.</span></div>
<div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;    <a class="code" href="classllvm_1_1generic__gep__type__iterator.html">gep_type_iterator</a> GTI = <a class="code" href="namespacellvm.html#ac828b9b52935f87659a4adf237f820a3">gep_type_begin</a>(*Src);</div>
<div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *<a class="code" href="classBaseType.html">BaseType</a> = GTI.<a class="code" href="classllvm_1_1generic__gep__type__iterator.html#aeb7ef34c0b96c3130c0029e648e2bd08">getIndexedType</a>();</div>
<div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;    <span class="keywordtype">bool</span> IsFirstType = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160;    <span class="keywordtype">unsigned</span> NumVarIndices = 0;</div>
<div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> Pair : <a class="code" href="namespacellvm.html#a7b2175e18ff52174fad26b6b68818564">enumerate</a>(Src-&gt;indices())) {</div>
<div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;      <span class="keywordflow">if</span> (!isa&lt;ConstantInt&gt;(Pair.value())) {</div>
<div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;        <a class="code" href="classBaseType.html">BaseType</a> = GTI.<a class="code" href="classllvm_1_1generic__gep__type__iterator.html#aeb7ef34c0b96c3130c0029e648e2bd08">getIndexedType</a>();</div>
<div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;        IsFirstType = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;        NumVarIndices = Pair.index() + 1;</div>
<div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;      }</div>
<div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;      ++GTI;</div>
<div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;    }</div>
<div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160; </div>
<div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160;    <span class="comment">// Determine the offset for the constant suffix of Src.</span></div>
<div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;    <a class="code" href="classllvm_1_1APInt.html">APInt</a> Offset(<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getIndexTypeSizeInBits(PtrTy), 0);</div>
<div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;    <span class="keywordflow">if</span> (NumVarIndices != Src-&gt;getNumIndices()) {</div>
<div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;      <span class="comment">// FIXME: getIndexedOffsetInType() does not handled scalable vectors.</span></div>
<div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160;      <span class="keywordflow">if</span> (isa&lt;ScalableVectorType&gt;(<a class="code" href="classBaseType.html">BaseType</a>))</div>
<div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160; </div>
<div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160;      <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Value *&gt;</a> ConstantIndices;</div>
<div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160;      <span class="keywordflow">if</span> (!IsFirstType)</div>
<div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160;        ConstantIndices.push_back(</div>
<div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160;            <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(<a class="code" href="classllvm_1_1Type.html#a30dd396c5b40cd86c1591872e574ccdf">Type::getInt32Ty</a>(<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>.getContext())));</div>
<div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160;      <a class="code" href="namespacellvm.html#a39d3d23a084c4544ee5903203db10e8a">append_range</a>(ConstantIndices, <a class="code" href="namespacellvm.html#a02981de53fb6ffd384d39addc4d25f37">drop_begin</a>(Src-&gt;indices(), NumVarIndices));</div>
<div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160;      Offset += <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getIndexedOffsetInType(<a class="code" href="classBaseType.html">BaseType</a>, ConstantIndices);</div>
<div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;    }</div>
<div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160; </div>
<div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160;    <span class="comment">// Add the offset for GEP (which is fully constant).</span></div>
<div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>.accumulateConstantOffset(<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, Offset))</div>
<div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160; </div>
<div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;    <a class="code" href="classllvm_1_1APInt.html">APInt</a> OffsetOld = Offset;</div>
<div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;    <span class="comment">// Convert the total offset back into indices.</span></div>
<div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;APInt&gt;</a> ConstIndices =</div>
<div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;        <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getGEPIndicesForOffset(<a class="code" href="classBaseType.html">BaseType</a>, Offset);</div>
<div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;    <span class="keywordflow">if</span> (!Offset.isZero() || (!IsFirstType &amp;&amp; !ConstIndices[0].isZero())) {</div>
<div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160;      <span class="comment">// If both GEP are constant-indexed, and cannot be merged in either way,</span></div>
<div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160;      <span class="comment">// convert them to a GEP of i8.</span></div>
<div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;      <span class="keywordflow">if</span> (Src-&gt;hasAllConstantIndices())</div>
<div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="InstructionCombining_8cpp.html#ae8211efb4227b65cbdba75fd23cfb668">isMergedGEPInBounds</a>(*Src, *cast&lt;GEPOperator&gt;(&amp;<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>))</div>
<div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;            ? <a class="code" href="classllvm_1_1GetElementPtrInst.html#a9a94c15dff322a963b566d486dd673b5">GetElementPtrInst::CreateInBounds</a>(</div>
<div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160;                <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getInt8Ty(), Src-&gt;getOperand(0),</div>
<div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160;                <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getInt(OffsetOld), <a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>.getName())</div>
<div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;            : <a class="code" href="classllvm_1_1GetElementPtrInst.html#a74c47d18ecd4ca3399785e6ae07134dc">GetElementPtrInst::Create</a>(</div>
<div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;                <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getInt8Ty(), Src-&gt;getOperand(0),</div>
<div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;                <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getInt(OffsetOld), <a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>.getName());</div>
<div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;    }</div>
<div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160; </div>
<div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;    <span class="keywordtype">bool</span> IsInBounds = <a class="code" href="InstructionCombining_8cpp.html#ae8211efb4227b65cbdba75fd23cfb668">isMergedGEPInBounds</a>(*Src, *cast&lt;GEPOperator&gt;(&amp;<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>));</div>
<div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Value *&gt;</a> Indices;</div>
<div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;    <a class="code" href="namespacellvm.html#a39d3d23a084c4544ee5903203db10e8a">append_range</a>(Indices, <a class="code" href="namespacellvm.html#a9b64313b5c1907066b7bab1c60a2ea08">drop_end</a>(Src-&gt;indices(),</div>
<div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;                                   Src-&gt;getNumIndices() - NumVarIndices));</div>
<div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> &amp;Idx : <a class="code" href="namespacellvm.html#a02981de53fb6ffd384d39addc4d25f37">drop_begin</a>(ConstIndices, !IsFirstType)) {</div>
<div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160;      Indices.push_back(<a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>.getContext(), Idx));</div>
<div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160;      <span class="comment">// Even if the total offset is inbounds, we may end up representing it</span></div>
<div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;      <span class="comment">// by first performing a larger negative offset, and then a smaller</span></div>
<div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160;      <span class="comment">// positive one. The large negative offset might go out of bounds. Only</span></div>
<div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160;      <span class="comment">// preserve inbounds if all signs are the same.</span></div>
<div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;      IsInBounds &amp;= Idx.isNonNegative() == ConstIndices[0].isNonNegative();</div>
<div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;    }</div>
<div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160; </div>
<div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;    <span class="keywordflow">return</span> IsInBounds</div>
<div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160;               ? <a class="code" href="classllvm_1_1GetElementPtrInst.html#a9a94c15dff322a963b566d486dd673b5">GetElementPtrInst::CreateInBounds</a>(Src-&gt;getSourceElementType(),</div>
<div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;                                                   Src-&gt;getOperand(0), Indices,</div>
<div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;                                                   <a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>.getName())</div>
<div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;               : <a class="code" href="classllvm_1_1GetElementPtrInst.html#a74c47d18ecd4ca3399785e6ae07134dc">GetElementPtrInst::Create</a>(Src-&gt;getSourceElementType(),</div>
<div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;                                           Src-&gt;getOperand(0), Indices,</div>
<div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160;                                           <a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>.getName());</div>
<div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160;  }</div>
<div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160; </div>
<div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160;  <span class="keywordflow">if</span> (Src-&gt;getResultElementType() != <a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>.getSourceElementType())</div>
<div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160; </div>
<div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Value*, 8&gt;</a> Indices;</div>
<div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160; </div>
<div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;  <span class="comment">// Find out whether the last index in the source GEP is a sequential idx.</span></div>
<div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;  <span class="keywordtype">bool</span> EndsWithSequential = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1generic__gep__type__iterator.html">gep_type_iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = <a class="code" href="namespacellvm.html#ac828b9b52935f87659a4adf237f820a3">gep_type_begin</a>(*Src), <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = <a class="code" href="namespacellvm.html#a43c6ebb4fd35ebd815d66a2df4eed0b9">gep_type_end</a>(*Src);</div>
<div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;       <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div>
<div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;    EndsWithSequential = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.isSequential();</div>
<div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160; </div>
<div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;  <span class="comment">// Can we combine the two pointer arithmetics offsets?</span></div>
<div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160;  <span class="keywordflow">if</span> (EndsWithSequential) {</div>
<div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;    <span class="comment">// Replace: gep (gep %P, long B), long A, ...</span></div>
<div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160;    <span class="comment">// With:    T = long A+B; gep %P, T, ...</span></div>
<div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *SO1 = Src-&gt;getOperand(Src-&gt;getNumOperands()-1);</div>
<div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *GO1 = <a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>.getOperand(1);</div>
<div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160; </div>
<div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160;    <span class="comment">// If they aren&#39;t the same type, then the input hasn&#39;t been processed</span></div>
<div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160;    <span class="comment">// by the loop above yet (which canonicalizes sequential index types to</span></div>
<div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160;    <span class="comment">// intptr_t).  Just avoid transforming this until the input has been</span></div>
<div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160;    <span class="comment">// normalized.</span></div>
<div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;    <span class="keywordflow">if</span> (SO1-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>() != GO1-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>())</div>
<div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160; </div>
<div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Sum =</div>
<div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160;        <a class="code" href="namespacellvm.html#a5e0af1b16cab9e0efc63a6ce9de2b9cc">simplifyAddInst</a>(GO1, SO1, <span class="keyword">false</span>, <span class="keyword">false</span>, SQ.getWithInstruction(&amp;<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>));</div>
<div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160;    <span class="comment">// Only do the combine when we are sure the cost after the</span></div>
<div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;    <span class="comment">// merge is never more than that before the merge.</span></div>
<div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;    <span class="keywordflow">if</span> (Sum == <span class="keyword">nullptr</span>)</div>
<div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160; </div>
<div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160;    <span class="comment">// Update the GEP in place if possible.</span></div>
<div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160;    <span class="keywordflow">if</span> (Src-&gt;getNumOperands() == 2) {</div>
<div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160;      <a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>.setIsInBounds(<a class="code" href="InstructionCombining_8cpp.html#ae8211efb4227b65cbdba75fd23cfb668">isMergedGEPInBounds</a>(*Src, *cast&lt;GEPOperator&gt;(&amp;<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>)));</div>
<div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160;      replaceOperand(<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>, 0, Src-&gt;getOperand(0));</div>
<div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160;      replaceOperand(<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>, 1, Sum);</div>
<div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160;      <span class="keywordflow">return</span> &amp;<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>;</div>
<div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160;    }</div>
<div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160;    Indices.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a7efd1f0c1206d95e4fe01a9b49a57b82">append</a>(Src-&gt;op_begin()+1, Src-&gt;op_end()-1);</div>
<div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;    Indices.push_back(Sum);</div>
<div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160;    Indices.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a7efd1f0c1206d95e4fe01a9b49a57b82">append</a>(<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>.op_begin()+2, <a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>.op_end());</div>
<div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (isa&lt;Constant&gt;(*<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>.idx_begin()) &amp;&amp;</div>
<div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160;             cast&lt;Constant&gt;(*<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>.idx_begin())-&gt;isNullValue() &amp;&amp;</div>
<div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;             Src-&gt;getNumOperands() != 1) {</div>
<div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;    <span class="comment">// Otherwise we can do the fold if the first index of the GEP is a zero</span></div>
<div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160;    Indices.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a7efd1f0c1206d95e4fe01a9b49a57b82">append</a>(Src-&gt;op_begin()+1, Src-&gt;op_end());</div>
<div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160;    Indices.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a7efd1f0c1206d95e4fe01a9b49a57b82">append</a>(<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>.idx_begin()+1, <a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>.idx_end());</div>
<div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160;  }</div>
<div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160; </div>
<div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160;  <span class="keywordflow">if</span> (!Indices.empty())</div>
<div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="InstructionCombining_8cpp.html#ae8211efb4227b65cbdba75fd23cfb668">isMergedGEPInBounds</a>(*Src, *cast&lt;GEPOperator&gt;(&amp;<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>))</div>
<div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160;               ? <a class="code" href="classllvm_1_1GetElementPtrInst.html#a9a94c15dff322a963b566d486dd673b5">GetElementPtrInst::CreateInBounds</a>(</div>
<div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160;                     Src-&gt;getSourceElementType(), Src-&gt;getOperand(0), Indices,</div>
<div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160;                     <a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>.getName())</div>
<div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;               : <a class="code" href="classllvm_1_1GetElementPtrInst.html#a74c47d18ecd4ca3399785e6ae07134dc">GetElementPtrInst::Create</a>(Src-&gt;getSourceElementType(),</div>
<div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160;                                           Src-&gt;getOperand(0), Indices,</div>
<div class="line"><a name="l02169"></a><span class="lineno"> 2169</span>&#160;                                           <a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>.getName());</div>
<div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160; </div>
<div class="line"><a name="l02171"></a><span class="lineno"> 2171</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160;}</div>
<div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160; </div>
<div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160;<span class="comment">// Note that we may have also stripped an address space cast in between.</span></div>
<div class="line"><a name="l02175"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombinerImpl.html#ab99e879508d2ae156406ec757fc49f1b"> 2175</a></span>&#160;<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombinerImpl.html#ab99e879508d2ae156406ec757fc49f1b">InstCombinerImpl::visitGEPOfBitcast</a>(<a class="code" href="classllvm_1_1BitCastInst.html">BitCastInst</a> *BCI,</div>
<div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160;                                                 <a class="code" href="classllvm_1_1GetElementPtrInst.html">GetElementPtrInst</a> &amp;<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>) {</div>
<div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160;  <span class="comment">// With opaque pointers, there is no pointer element type we can use to</span></div>
<div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160;  <span class="comment">// adjust the GEP type.</span></div>
<div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160;  <a class="code" href="classllvm_1_1PointerType.html">PointerType</a> *SrcType = cast&lt;PointerType&gt;(BCI-&gt;<a class="code" href="classllvm_1_1CastInst.html#a6a1a810dc09bf349d1e1481931ce2baa">getSrcTy</a>());</div>
<div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160;  <span class="keywordflow">if</span> (SrcType-&gt;<a class="code" href="classllvm_1_1PointerType.html#a92c4ce3a0a429509bc46cc3875a48c24">isOpaque</a>())</div>
<div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160; </div>
<div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *GEPEltType = <a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>.getSourceElementType();</div>
<div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *SrcEltType = SrcType-&gt;<a class="code" href="classllvm_1_1Type.html#abceff71202e0269065cf32a2f750a9be">getNonOpaquePointerElementType</a>();</div>
<div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="classllvm_1_1SrcOp.html">SrcOp</a> = BCI-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0);</div>
<div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160; </div>
<div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160;  <span class="comment">// GEP directly using the source operand if this GEP is accessing an element</span></div>
<div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;  <span class="comment">// of a bitcasted pointer to vector or array of the same dimensions:</span></div>
<div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;  <span class="comment">// gep (bitcast &lt;c x ty&gt;* X to [c x ty]*), Y, Z --&gt; gep X, Y, Z</span></div>
<div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;  <span class="comment">// gep (bitcast [c x ty]* X to &lt;c x ty&gt;*), Y, Z --&gt; gep X, Y, Z</span></div>
<div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160;  <span class="keyword">auto</span> areMatchingArrayAndVecTypes = [](<a class="code" href="classllvm_1_1Type.html">Type</a> *ArrTy, <a class="code" href="classllvm_1_1Type.html">Type</a> *VecTy,</div>
<div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160;                                        <span class="keyword">const</span> <a class="code" href="classllvm_1_1DataLayout.html">DataLayout</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>) {</div>
<div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;    <span class="keyword">auto</span> *VecVTy = cast&lt;FixedVectorType&gt;(VecTy);</div>
<div class="line"><a name="l02194"></a><span class="lineno"> 2194</span>&#160;    <span class="keywordflow">return</span> ArrTy-&gt;<a class="code" href="classllvm_1_1Type.html#afc079797ba8cb5aa4d9ebfc4d85c4aab">getArrayElementType</a>() == VecVTy-&gt;getElementType() &amp;&amp;</div>
<div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160;           ArrTy-&gt;<a class="code" href="classllvm_1_1Type.html#a5cfdb1cd5ccaae5daa8e4b29b3bb6b82">getArrayNumElements</a>() == VecVTy-&gt;getNumElements() &amp;&amp;</div>
<div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160;           <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getTypeAllocSize(ArrTy) == <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getTypeAllocSize(VecTy);</div>
<div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160;  };</div>
<div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>.getNumOperands() == 3 &amp;&amp;</div>
<div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160;      ((GEPEltType-&gt;<a class="code" href="classllvm_1_1Type.html#a2a394517076e7dd2bdcd7dde33dfcb7d">isArrayTy</a>() &amp;&amp; isa&lt;FixedVectorType&gt;(SrcEltType) &amp;&amp;</div>
<div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160;        areMatchingArrayAndVecTypes(GEPEltType, SrcEltType, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>)) ||</div>
<div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;       (isa&lt;FixedVectorType&gt;(GEPEltType) &amp;&amp; SrcEltType-&gt;<a class="code" href="classllvm_1_1Type.html#a2a394517076e7dd2bdcd7dde33dfcb7d">isArrayTy</a>() &amp;&amp;</div>
<div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;        areMatchingArrayAndVecTypes(SrcEltType, GEPEltType, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>)))) {</div>
<div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160; </div>
<div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;    <span class="comment">// Create a new GEP here, as using `setOperand()` followed by</span></div>
<div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160;    <span class="comment">// `setSourceElementType()` won&#39;t actually update the type of the</span></div>
<div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;    <span class="comment">// existing GEP Value. Causing issues if this Value is accessed when</span></div>
<div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160;    <span class="comment">// constructing an AddrSpaceCastInst</span></div>
<div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Value *, 8&gt;</a> Indices(<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>.indices());</div>
<div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *NGEP =</div>
<div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;        <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateGEP(SrcEltType, <a class="code" href="classllvm_1_1SrcOp.html">SrcOp</a>, Indices, <span class="stringliteral">&quot;&quot;</span>, <a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>.isInBounds());</div>
<div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;    NGEP-&gt;<a class="code" href="classllvm_1_1Value.html#ae855357b6c5e6e7ed1869272708a3a84">takeName</a>(&amp;<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>);</div>
<div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160; </div>
<div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;    <span class="comment">// Preserve GEP address space to satisfy users</span></div>
<div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;    <span class="keywordflow">if</span> (NGEP-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a5ab2d0b0f0b8ceec3b907184e7567197">getPointerAddressSpace</a>() != <a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>.getAddressSpace())</div>
<div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1AddrSpaceCastInst.html">AddrSpaceCastInst</a>(NGEP, <a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>.getType());</div>
<div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160; </div>
<div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;    <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>, NGEP);</div>
<div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;  }</div>
<div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160; </div>
<div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160;  <span class="comment">// See if we can simplify:</span></div>
<div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160;  <span class="comment">//   X = bitcast A* to B*</span></div>
<div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;  <span class="comment">//   Y = gep X, &lt;...constant indices...&gt;</span></div>
<div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160;  <span class="comment">// into a gep of the original struct. This is important for SROA and alias</span></div>
<div class="line"><a name="l02224"></a><span class="lineno"> 2224</span>&#160;  <span class="comment">// analysis of unions. If &quot;A&quot; is also a bitcast, wait for A/X to be merged.</span></div>
<div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160;  <span class="keywordtype">unsigned</span> OffsetBits = <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getIndexTypeSizeInBits(<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>.getType());</div>
<div class="line"><a name="l02226"></a><span class="lineno"> 2226</span>&#160;  <a class="code" href="classllvm_1_1APInt.html">APInt</a> Offset(OffsetBits, 0);</div>
<div class="line"><a name="l02227"></a><span class="lineno"> 2227</span>&#160; </div>
<div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>&#160;  <span class="comment">// If the bitcast argument is an allocation, The bitcast is for convertion</span></div>
<div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160;  <span class="comment">// to actual type of allocation. Removing such bitcasts, results in having</span></div>
<div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160;  <span class="comment">// GEPs with i8* base and pure byte offsets. That means GEP is not aware of</span></div>
<div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160;  <span class="comment">// struct or array hierarchy.</span></div>
<div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160;  <span class="comment">// By avoiding such GEPs, phi translation and MemoryDependencyAnalysis have</span></div>
<div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160;  <span class="comment">// a better chance to succeed.</span></div>
<div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>&#160;  <span class="keywordflow">if</span> (!isa&lt;BitCastInst&gt;(<a class="code" href="classllvm_1_1SrcOp.html">SrcOp</a>) &amp;&amp; <a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>.accumulateConstantOffset(<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, Offset) &amp;&amp;</div>
<div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160;      !<a class="code" href="namespacellvm.html#accaca14b419cbac91ca6170523084a04">isAllocationFn</a>(<a class="code" href="classllvm_1_1SrcOp.html">SrcOp</a>, &amp;TLI)) {</div>
<div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160;    <span class="comment">// If this GEP instruction doesn&#39;t move the pointer, just replace the GEP</span></div>
<div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;    <span class="comment">// with a bitcast of the real input to the dest type.</span></div>
<div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;    <span class="keywordflow">if</span> (!Offset) {</div>
<div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160;      <span class="comment">// If the bitcast is of an allocation, and the allocation will be</span></div>
<div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160;      <span class="comment">// converted to match the type of the cast, don&#39;t touch this.</span></div>
<div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160;      <span class="keywordflow">if</span> (isa&lt;AllocaInst&gt;(<a class="code" href="classllvm_1_1SrcOp.html">SrcOp</a>)) {</div>
<div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160;        <span class="comment">// See if the bitcast simplifies, if so, don&#39;t nuke this GEP yet.</span></div>
<div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = visitBitCast(*BCI)) {</div>
<div class="line"><a name="l02244"></a><span class="lineno"> 2244</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != BCI) {</div>
<div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160;            <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;takeName(BCI);</div>
<div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160;            <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;insertInto(BCI-&gt;<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>(), BCI-&gt;<a class="code" href="classllvm_1_1ilist__node__impl.html#af719fc783be6589465137d997701a432">getIterator</a>());</div>
<div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160;            replaceInstUsesWith(*BCI, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160;          }</div>
<div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160;          <span class="keywordflow">return</span> &amp;<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>;</div>
<div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;        }</div>
<div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160;      }</div>
<div class="line"><a name="l02252"></a><span class="lineno"> 2252</span>&#160; </div>
<div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160;      <span class="keywordflow">if</span> (SrcType-&gt;<a class="code" href="classllvm_1_1Type.html#a5ab2d0b0f0b8ceec3b907184e7567197">getPointerAddressSpace</a>() != <a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>.getAddressSpace())</div>
<div class="line"><a name="l02254"></a><span class="lineno"> 2254</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1AddrSpaceCastInst.html">AddrSpaceCastInst</a>(<a class="code" href="classllvm_1_1SrcOp.html">SrcOp</a>, <a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>.getType());</div>
<div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1BitCastInst.html">BitCastInst</a>(<a class="code" href="classllvm_1_1SrcOp.html">SrcOp</a>, <a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>.getType());</div>
<div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160;    }</div>
<div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160; </div>
<div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160;    <span class="comment">// Otherwise, if the offset is non-zero, we need to find out if there is a</span></div>
<div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160;    <span class="comment">// field at Offset in &#39;A&#39;s type.  If so, we can pull the cast through the</span></div>
<div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160;    <span class="comment">// GEP.</span></div>
<div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Value *, 8&gt;</a> NewIndices;</div>
<div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="InstructionCombining_8cpp.html#a2228ce002a49927fac8de298e2cab56b">findElementAtOffset</a>(SrcType, Offset.getSExtValue(), NewIndices, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>)) {</div>
<div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *NGEP = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateGEP(SrcEltType, <a class="code" href="classllvm_1_1SrcOp.html">SrcOp</a>, NewIndices, <span class="stringliteral">&quot;&quot;</span>,</div>
<div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160;                                      <a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>.isInBounds());</div>
<div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160; </div>
<div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160;      <span class="keywordflow">if</span> (NGEP-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>() == <a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>.getType())</div>
<div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160;        <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>, NGEP);</div>
<div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160;      NGEP-&gt;<a class="code" href="classllvm_1_1Value.html#ae855357b6c5e6e7ed1869272708a3a84">takeName</a>(&amp;<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>);</div>
<div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160; </div>
<div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>&#160;      <span class="keywordflow">if</span> (NGEP-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a5ab2d0b0f0b8ceec3b907184e7567197">getPointerAddressSpace</a>() != <a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>.getAddressSpace())</div>
<div class="line"><a name="l02271"></a><span class="lineno"> 2271</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1AddrSpaceCastInst.html">AddrSpaceCastInst</a>(NGEP, <a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>.getType());</div>
<div class="line"><a name="l02272"></a><span class="lineno"> 2272</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1BitCastInst.html">BitCastInst</a>(NGEP, <a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>.getType());</div>
<div class="line"><a name="l02273"></a><span class="lineno"> 2273</span>&#160;    }</div>
<div class="line"><a name="l02274"></a><span class="lineno"> 2274</span>&#160;  }</div>
<div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160; </div>
<div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02277"></a><span class="lineno"> 2277</span>&#160;}</div>
<div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160; </div>
<div class="line"><a name="l02279"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombinerImpl.html#ae755d569b6e5c69a8abbc6de50cf3f6b"> 2279</a></span>&#160;<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombinerImpl.html#ae755d569b6e5c69a8abbc6de50cf3f6b">InstCombinerImpl::visitGetElementPtrInst</a>(<a class="code" href="classllvm_1_1GetElementPtrInst.html">GetElementPtrInst</a> &amp;<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>) {</div>
<div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *PtrOp = <a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>.getOperand(0);</div>
<div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Value *, 8&gt;</a> Indices(<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>.indices());</div>
<div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *GEPType = <a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>.getType();</div>
<div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *GEPEltType = <a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>.getSourceElementType();</div>
<div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160;  <span class="keywordtype">bool</span> IsGEPSrcEleScalable = isa&lt;ScalableVectorType&gt;(GEPEltType);</div>
<div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V = <a class="code" href="namespacellvm.html#ae7e24731676a84f7b8ae32ec978168ec">simplifyGEPInst</a>(GEPEltType, PtrOp, Indices, <a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>.isInBounds(),</div>
<div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160;                                 SQ.getWithInstruction(&amp;<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>)))</div>
<div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160;    <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>, V);</div>
<div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160; </div>
<div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160;  <span class="comment">// For vector geps, use the generic demanded vector support.</span></div>
<div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160;  <span class="comment">// Skip if GEP return type is scalable. The number of elements is unknown at</span></div>
<div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;  <span class="comment">// compile-time.</span></div>
<div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *GEPFVTy = dyn_cast&lt;FixedVectorType&gt;(GEPType)) {</div>
<div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160;    <span class="keyword">auto</span> VWidth = GEPFVTy-&gt;getNumElements();</div>
<div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160;    <a class="code" href="classllvm_1_1APInt.html">APInt</a> UndefElts(VWidth, 0);</div>
<div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160;    <a class="code" href="classllvm_1_1APInt.html">APInt</a> AllOnesEltMask(<a class="code" href="classllvm_1_1APInt.html#a071e8d814b2b30b02544fad964227b8e">APInt::getAllOnes</a>(VWidth));</div>
<div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V = SimplifyDemandedVectorElts(&amp;<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>, AllOnesEltMask,</div>
<div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;                                              UndefElts)) {</div>
<div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;      <span class="keywordflow">if</span> (V != &amp;<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>)</div>
<div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160;        <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>, V);</div>
<div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160;      <span class="keywordflow">return</span> &amp;<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>;</div>
<div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160;    }</div>
<div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160; </div>
<div class="line"><a name="l02303"></a><span class="lineno"> 2303</span>&#160;    <span class="comment">// TODO: 1) Scalarize splat operands, 2) scalarize entire instruction if</span></div>
<div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160;    <span class="comment">// possible (decide on canonical form for pointer broadcast), 3) exploit</span></div>
<div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160;    <span class="comment">// undef elements to decrease demanded bits</span></div>
<div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160;  }</div>
<div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160; </div>
<div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160;  <span class="comment">// Eliminate unneeded casts for indices, and replace indices which displace</span></div>
<div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160;  <span class="comment">// by multiples of a zero size type with zero.</span></div>
<div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160;  <span class="keywordtype">bool</span> MadeChange = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160; </div>
<div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;  <span class="comment">// Index width may not be the same width as pointer width.</span></div>
<div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;  <span class="comment">// Data layout chooses the right type based on supported integer types.</span></div>
<div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *NewScalarIndexTy =</div>
<div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160;      <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getIndexType(<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>.getPointerOperandType()-&gt;getScalarType());</div>
<div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160; </div>
<div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160;  <a class="code" href="classllvm_1_1generic__gep__type__iterator.html">gep_type_iterator</a> GTI = <a class="code" href="namespacellvm.html#ac828b9b52935f87659a4adf237f820a3">gep_type_begin</a>(<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>);</div>
<div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Use.html">User::op_iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = <a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>.op_begin() + 1, <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = <a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>.op_end(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>;</div>
<div class="line"><a name="l02319"></a><span class="lineno"> 2319</span>&#160;       ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, ++GTI) {</div>
<div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160;    <span class="comment">// Skip indices into struct types.</span></div>
<div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160;    <span class="keywordflow">if</span> (GTI.<a class="code" href="classllvm_1_1generic__gep__type__iterator.html#a9c393ed0a6b446c52d205a562ac8d544">isStruct</a>())</div>
<div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160; </div>
<div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *IndexTy = (*I)-&gt;getType();</div>
<div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *NewIndexType =</div>
<div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160;        IndexTy-&gt;<a class="code" href="classllvm_1_1Type.html#a1bc022868b23918efa44df511f4d5b61">isVectorTy</a>()</div>
<div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160;            ? <a class="code" href="classllvm_1_1VectorType.html#a8c90e6c50e795b17466482a04947690e">VectorType::get</a>(NewScalarIndexTy,</div>
<div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160;                              cast&lt;VectorType&gt;(IndexTy)-&gt;getElementCount())</div>
<div class="line"><a name="l02329"></a><span class="lineno"> 2329</span>&#160;            : NewScalarIndexTy;</div>
<div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160; </div>
<div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160;    <span class="comment">// If the element type has zero size then any index over it is equivalent</span></div>
<div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160;    <span class="comment">// to an index of zero, so replace it with zero if it is not zero already.</span></div>
<div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *EltTy = GTI.<a class="code" href="classllvm_1_1generic__gep__type__iterator.html#aeb7ef34c0b96c3130c0029e648e2bd08">getIndexedType</a>();</div>
<div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160;    <span class="keywordflow">if</span> (EltTy-&gt;<a class="code" href="classllvm_1_1Type.html#a8ad67a33bae235fe3cca1c3e5a91ed2d">isSized</a>() &amp;&amp; <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getTypeAllocSize(EltTy).isZero())</div>
<div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160;      <span class="keywordflow">if</span> (!isa&lt;Constant&gt;(*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) || !<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;get(), <a class="code" href="namespacellvm_1_1PatternMatch.html#ae77be336e228cf9aa00709a8606dfb98">m_Zero</a>())) {</div>
<div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160;        *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(NewIndexType);</div>
<div class="line"><a name="l02337"></a><span class="lineno"> 2337</span>&#160;        MadeChange = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02338"></a><span class="lineno"> 2338</span>&#160;      }</div>
<div class="line"><a name="l02339"></a><span class="lineno"> 2339</span>&#160; </div>
<div class="line"><a name="l02340"></a><span class="lineno"> 2340</span>&#160;    <span class="keywordflow">if</span> (IndexTy != NewIndexType) {</div>
<div class="line"><a name="l02341"></a><span class="lineno"> 2341</span>&#160;      <span class="comment">// If we are using a wider index than needed for this platform, shrink</span></div>
<div class="line"><a name="l02342"></a><span class="lineno"> 2342</span>&#160;      <span class="comment">// it to what we need.  If narrower, sign-extend it to what we need.</span></div>
<div class="line"><a name="l02343"></a><span class="lineno"> 2343</span>&#160;      <span class="comment">// This explicit cast can make subsequent optimizations more obvious.</span></div>
<div class="line"><a name="l02344"></a><span class="lineno"> 2344</span>&#160;      *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateIntCast(*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, NewIndexType, <span class="keyword">true</span>);</div>
<div class="line"><a name="l02345"></a><span class="lineno"> 2345</span>&#160;      MadeChange = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02346"></a><span class="lineno"> 2346</span>&#160;    }</div>
<div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>&#160;  }</div>
<div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160;  <span class="keywordflow">if</span> (MadeChange)</div>
<div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160;    <span class="keywordflow">return</span> &amp;<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>;</div>
<div class="line"><a name="l02350"></a><span class="lineno"> 2350</span>&#160; </div>
<div class="line"><a name="l02351"></a><span class="lineno"> 2351</span>&#160;  <span class="comment">// Check to see if the inputs to the PHI node are getelementptr instructions.</span></div>
<div class="line"><a name="l02352"></a><span class="lineno"> 2352</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *PN = dyn_cast&lt;PHINode&gt;(PtrOp)) {</div>
<div class="line"><a name="l02353"></a><span class="lineno"> 2353</span>&#160;    <span class="keyword">auto</span> *Op1 = dyn_cast&lt;GetElementPtrInst&gt;(PN-&gt;getOperand(0));</div>
<div class="line"><a name="l02354"></a><span class="lineno"> 2354</span>&#160;    <span class="keywordflow">if</span> (!Op1)</div>
<div class="line"><a name="l02355"></a><span class="lineno"> 2355</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02356"></a><span class="lineno"> 2356</span>&#160; </div>
<div class="line"><a name="l02357"></a><span class="lineno"> 2357</span>&#160;    <span class="comment">// Don&#39;t fold a GEP into itself through a PHI node. This can only happen</span></div>
<div class="line"><a name="l02358"></a><span class="lineno"> 2358</span>&#160;    <span class="comment">// through the back-edge of a loop. Folding a GEP into itself means that</span></div>
<div class="line"><a name="l02359"></a><span class="lineno"> 2359</span>&#160;    <span class="comment">// the value of the previous iteration needs to be stored in the meantime,</span></div>
<div class="line"><a name="l02360"></a><span class="lineno"> 2360</span>&#160;    <span class="comment">// thus requiring an additional register variable to be live, but not</span></div>
<div class="line"><a name="l02361"></a><span class="lineno"> 2361</span>&#160;    <span class="comment">// actually achieving anything (the GEP still needs to be executed once per</span></div>
<div class="line"><a name="l02362"></a><span class="lineno"> 2362</span>&#160;    <span class="comment">// loop iteration).</span></div>
<div class="line"><a name="l02363"></a><span class="lineno"> 2363</span>&#160;    <span class="keywordflow">if</span> (Op1 == &amp;<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>)</div>
<div class="line"><a name="l02364"></a><span class="lineno"> 2364</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02365"></a><span class="lineno"> 2365</span>&#160; </div>
<div class="line"><a name="l02366"></a><span class="lineno"> 2366</span>&#160;    <span class="keywordtype">int</span> DI = -1;</div>
<div class="line"><a name="l02367"></a><span class="lineno"> 2367</span>&#160; </div>
<div class="line"><a name="l02368"></a><span class="lineno"> 2368</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = PN-&gt;op_begin()+1, <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = PN-&gt;op_end(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> !=<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l02369"></a><span class="lineno"> 2369</span>&#160;      <span class="keyword">auto</span> *Op2 = dyn_cast&lt;GetElementPtrInst&gt;(*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l02370"></a><span class="lineno"> 2370</span>&#160;      <span class="keywordflow">if</span> (!Op2 || Op1-&gt;getNumOperands() != Op2-&gt;getNumOperands() ||</div>
<div class="line"><a name="l02371"></a><span class="lineno"> 2371</span>&#160;          Op1-&gt;getSourceElementType() != Op2-&gt;getSourceElementType())</div>
<div class="line"><a name="l02372"></a><span class="lineno"> 2372</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02373"></a><span class="lineno"> 2373</span>&#160; </div>
<div class="line"><a name="l02374"></a><span class="lineno"> 2374</span>&#160;      <span class="comment">// As for Op1 above, don&#39;t try to fold a GEP into itself.</span></div>
<div class="line"><a name="l02375"></a><span class="lineno"> 2375</span>&#160;      <span class="keywordflow">if</span> (Op2 == &amp;<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>)</div>
<div class="line"><a name="l02376"></a><span class="lineno"> 2376</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02377"></a><span class="lineno"> 2377</span>&#160; </div>
<div class="line"><a name="l02378"></a><span class="lineno"> 2378</span>&#160;      <span class="comment">// Keep track of the type as we walk the GEP.</span></div>
<div class="line"><a name="l02379"></a><span class="lineno"> 2379</span>&#160;      <a class="code" href="classllvm_1_1Type.html">Type</a> *CurTy = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02380"></a><span class="lineno"> 2380</span>&#160; </div>
<div class="line"><a name="l02381"></a><span class="lineno"> 2381</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> J = 0, <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> = Op1-&gt;getNumOperands(); J != <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>; ++J) {</div>
<div class="line"><a name="l02382"></a><span class="lineno"> 2382</span>&#160;        <span class="keywordflow">if</span> (Op1-&gt;getOperand(J)-&gt;getType() != Op2-&gt;getOperand(J)-&gt;getType())</div>
<div class="line"><a name="l02383"></a><span class="lineno"> 2383</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02384"></a><span class="lineno"> 2384</span>&#160; </div>
<div class="line"><a name="l02385"></a><span class="lineno"> 2385</span>&#160;        <span class="keywordflow">if</span> (Op1-&gt;getOperand(J) != Op2-&gt;getOperand(J)) {</div>
<div class="line"><a name="l02386"></a><span class="lineno"> 2386</span>&#160;          <span class="keywordflow">if</span> (DI == -1) {</div>
<div class="line"><a name="l02387"></a><span class="lineno"> 2387</span>&#160;            <span class="comment">// We have not seen any differences yet in the GEPs feeding the</span></div>
<div class="line"><a name="l02388"></a><span class="lineno"> 2388</span>&#160;            <span class="comment">// PHI yet, so we record this one if it is allowed to be a</span></div>
<div class="line"><a name="l02389"></a><span class="lineno"> 2389</span>&#160;            <span class="comment">// variable.</span></div>
<div class="line"><a name="l02390"></a><span class="lineno"> 2390</span>&#160; </div>
<div class="line"><a name="l02391"></a><span class="lineno"> 2391</span>&#160;            <span class="comment">// The first two arguments can vary for any GEP, the rest have to be</span></div>
<div class="line"><a name="l02392"></a><span class="lineno"> 2392</span>&#160;            <span class="comment">// static for struct slots</span></div>
<div class="line"><a name="l02393"></a><span class="lineno"> 2393</span>&#160;            <span class="keywordflow">if</span> (J &gt; 1) {</div>
<div class="line"><a name="l02394"></a><span class="lineno"> 2394</span>&#160;              <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(CurTy &amp;&amp; <span class="stringliteral">&quot;No current type?&quot;</span>);</div>
<div class="line"><a name="l02395"></a><span class="lineno"> 2395</span>&#160;              <span class="keywordflow">if</span> (CurTy-&gt;<a class="code" href="classllvm_1_1Type.html#a81eef9d7336f7ee43be79630d8e8ec86">isStructTy</a>())</div>
<div class="line"><a name="l02396"></a><span class="lineno"> 2396</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02397"></a><span class="lineno"> 2397</span>&#160;            }</div>
<div class="line"><a name="l02398"></a><span class="lineno"> 2398</span>&#160; </div>
<div class="line"><a name="l02399"></a><span class="lineno"> 2399</span>&#160;            DI = J;</div>
<div class="line"><a name="l02400"></a><span class="lineno"> 2400</span>&#160;          } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02401"></a><span class="lineno"> 2401</span>&#160;            <span class="comment">// The GEP is different by more than one input. While this could be</span></div>
<div class="line"><a name="l02402"></a><span class="lineno"> 2402</span>&#160;            <span class="comment">// extended to support GEPs that vary by more than one variable it</span></div>
<div class="line"><a name="l02403"></a><span class="lineno"> 2403</span>&#160;            <span class="comment">// doesn&#39;t make sense since it greatly increases the complexity and</span></div>
<div class="line"><a name="l02404"></a><span class="lineno"> 2404</span>&#160;            <span class="comment">// would result in an R+R+R addressing mode which no backend</span></div>
<div class="line"><a name="l02405"></a><span class="lineno"> 2405</span>&#160;            <span class="comment">// directly supports and would need to be broken into several</span></div>
<div class="line"><a name="l02406"></a><span class="lineno"> 2406</span>&#160;            <span class="comment">// simpler instructions anyway.</span></div>
<div class="line"><a name="l02407"></a><span class="lineno"> 2407</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02408"></a><span class="lineno"> 2408</span>&#160;          }</div>
<div class="line"><a name="l02409"></a><span class="lineno"> 2409</span>&#160;        }</div>
<div class="line"><a name="l02410"></a><span class="lineno"> 2410</span>&#160; </div>
<div class="line"><a name="l02411"></a><span class="lineno"> 2411</span>&#160;        <span class="comment">// Sink down a layer of the type for the next iteration.</span></div>
<div class="line"><a name="l02412"></a><span class="lineno"> 2412</span>&#160;        <span class="keywordflow">if</span> (J &gt; 0) {</div>
<div class="line"><a name="l02413"></a><span class="lineno"> 2413</span>&#160;          <span class="keywordflow">if</span> (J == 1) {</div>
<div class="line"><a name="l02414"></a><span class="lineno"> 2414</span>&#160;            CurTy = Op1-&gt;getSourceElementType();</div>
<div class="line"><a name="l02415"></a><span class="lineno"> 2415</span>&#160;          } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02416"></a><span class="lineno"> 2416</span>&#160;            CurTy =</div>
<div class="line"><a name="l02417"></a><span class="lineno"> 2417</span>&#160;                <a class="code" href="classllvm_1_1GetElementPtrInst.html#a056eabb719f475aa4c5a7e2ba11973b9">GetElementPtrInst::getTypeAtIndex</a>(CurTy, Op1-&gt;getOperand(J));</div>
<div class="line"><a name="l02418"></a><span class="lineno"> 2418</span>&#160;          }</div>
<div class="line"><a name="l02419"></a><span class="lineno"> 2419</span>&#160;        }</div>
<div class="line"><a name="l02420"></a><span class="lineno"> 2420</span>&#160;      }</div>
<div class="line"><a name="l02421"></a><span class="lineno"> 2421</span>&#160;    }</div>
<div class="line"><a name="l02422"></a><span class="lineno"> 2422</span>&#160; </div>
<div class="line"><a name="l02423"></a><span class="lineno"> 2423</span>&#160;    <span class="comment">// If not all GEPs are identical we&#39;ll have to create a new PHI node.</span></div>
<div class="line"><a name="l02424"></a><span class="lineno"> 2424</span>&#160;    <span class="comment">// Check that the old PHI node has only one use so that it will get</span></div>
<div class="line"><a name="l02425"></a><span class="lineno"> 2425</span>&#160;    <span class="comment">// removed.</span></div>
<div class="line"><a name="l02426"></a><span class="lineno"> 2426</span>&#160;    <span class="keywordflow">if</span> (DI != -1 &amp;&amp; !PN-&gt;hasOneUse())</div>
<div class="line"><a name="l02427"></a><span class="lineno"> 2427</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02428"></a><span class="lineno"> 2428</span>&#160; </div>
<div class="line"><a name="l02429"></a><span class="lineno"> 2429</span>&#160;    <span class="keyword">auto</span> *NewGEP = cast&lt;GetElementPtrInst&gt;(Op1-&gt;clone());</div>
<div class="line"><a name="l02430"></a><span class="lineno"> 2430</span>&#160;    <span class="keywordflow">if</span> (DI == -1) {</div>
<div class="line"><a name="l02431"></a><span class="lineno"> 2431</span>&#160;      <span class="comment">// All the GEPs feeding the PHI are identical. Clone one down into our</span></div>
<div class="line"><a name="l02432"></a><span class="lineno"> 2432</span>&#160;      <span class="comment">// BB so that it can be merged with the current GEP.</span></div>
<div class="line"><a name="l02433"></a><span class="lineno"> 2433</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02434"></a><span class="lineno"> 2434</span>&#160;      <span class="comment">// All the GEPs feeding the PHI differ at a single offset. Clone a GEP</span></div>
<div class="line"><a name="l02435"></a><span class="lineno"> 2435</span>&#160;      <span class="comment">// into the current block so it can be merged, and create a new PHI to</span></div>
<div class="line"><a name="l02436"></a><span class="lineno"> 2436</span>&#160;      <span class="comment">// set that index.</span></div>
<div class="line"><a name="l02437"></a><span class="lineno"> 2437</span>&#160;      <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *NewPN;</div>
<div class="line"><a name="l02438"></a><span class="lineno"> 2438</span>&#160;      {</div>
<div class="line"><a name="l02439"></a><span class="lineno"> 2439</span>&#160;        <a class="code" href="classllvm_1_1IRBuilderBase_1_1InsertPointGuard.html">IRBuilderBase::InsertPointGuard</a> Guard(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>);</div>
<div class="line"><a name="l02440"></a><span class="lineno"> 2440</span>&#160;        <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(PN);</div>
<div class="line"><a name="l02441"></a><span class="lineno"> 2441</span>&#160;        NewPN = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreatePHI(Op1-&gt;getOperand(DI)-&gt;getType(),</div>
<div class="line"><a name="l02442"></a><span class="lineno"> 2442</span>&#160;                                  PN-&gt;getNumOperands());</div>
<div class="line"><a name="l02443"></a><span class="lineno"> 2443</span>&#160;      }</div>
<div class="line"><a name="l02444"></a><span class="lineno"> 2444</span>&#160; </div>
<div class="line"><a name="l02445"></a><span class="lineno"> 2445</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : PN-&gt;operands())</div>
<div class="line"><a name="l02446"></a><span class="lineno"> 2446</span>&#160;        NewPN-&gt;<a class="code" href="classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">addIncoming</a>(cast&lt;GEPOperator&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)-&gt;getOperand(DI),</div>
<div class="line"><a name="l02447"></a><span class="lineno"> 2447</span>&#160;                           PN-&gt;getIncomingBlock(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>));</div>
<div class="line"><a name="l02448"></a><span class="lineno"> 2448</span>&#160; </div>
<div class="line"><a name="l02449"></a><span class="lineno"> 2449</span>&#160;      NewGEP-&gt;setOperand(DI, NewPN);</div>
<div class="line"><a name="l02450"></a><span class="lineno"> 2450</span>&#160;    }</div>
<div class="line"><a name="l02451"></a><span class="lineno"> 2451</span>&#160; </div>
<div class="line"><a name="l02452"></a><span class="lineno"> 2452</span>&#160;    NewGEP-&gt;insertInto(<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>.getParent(), <a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>.getParent()-&gt;getFirstInsertionPt());</div>
<div class="line"><a name="l02453"></a><span class="lineno"> 2453</span>&#160;    <span class="keywordflow">return</span> replaceOperand(<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>, 0, NewGEP);</div>
<div class="line"><a name="l02454"></a><span class="lineno"> 2454</span>&#160;  }</div>
<div class="line"><a name="l02455"></a><span class="lineno"> 2455</span>&#160; </div>
<div class="line"><a name="l02456"></a><span class="lineno"> 2456</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *Src = dyn_cast&lt;GEPOperator&gt;(PtrOp))</div>
<div class="line"><a name="l02457"></a><span class="lineno"> 2457</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = visitGEPOfGEP(<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>, Src))</div>
<div class="line"><a name="l02458"></a><span class="lineno"> 2458</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l02459"></a><span class="lineno"> 2459</span>&#160; </div>
<div class="line"><a name="l02460"></a><span class="lineno"> 2460</span>&#160;  <span class="comment">// Skip if GEP source element type is scalable. The type alloc size is unknown</span></div>
<div class="line"><a name="l02461"></a><span class="lineno"> 2461</span>&#160;  <span class="comment">// at compile-time.</span></div>
<div class="line"><a name="l02462"></a><span class="lineno"> 2462</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>.getNumIndices() == 1 &amp;&amp; !IsGEPSrcEleScalable) {</div>
<div class="line"><a name="l02463"></a><span class="lineno"> 2463</span>&#160;    <span class="keywordtype">unsigned</span> AS = <a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>.getPointerAddressSpace();</div>
<div class="line"><a name="l02464"></a><span class="lineno"> 2464</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>.getOperand(1)-&gt;getType()-&gt;getScalarSizeInBits() ==</div>
<div class="line"><a name="l02465"></a><span class="lineno"> 2465</span>&#160;        <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getIndexSizeInBits(AS)) {</div>
<div class="line"><a name="l02466"></a><span class="lineno"> 2466</span>&#160;      <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> TyAllocSize = <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getTypeAllocSize(GEPEltType).getFixedValue();</div>
<div class="line"><a name="l02467"></a><span class="lineno"> 2467</span>&#160; </div>
<div class="line"><a name="l02468"></a><span class="lineno"> 2468</span>&#160;      <span class="keywordtype">bool</span> Matched = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02469"></a><span class="lineno"> 2469</span>&#160;      <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>;</div>
<div class="line"><a name="l02470"></a><span class="lineno"> 2470</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *V = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02471"></a><span class="lineno"> 2471</span>&#160;      <span class="keywordflow">if</span> (TyAllocSize == 1) {</div>
<div class="line"><a name="l02472"></a><span class="lineno"> 2472</span>&#160;        V = <a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>.getOperand(1);</div>
<div class="line"><a name="l02473"></a><span class="lineno"> 2473</span>&#160;        Matched = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02474"></a><span class="lineno"> 2474</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>.getOperand(1),</div>
<div class="line"><a name="l02475"></a><span class="lineno"> 2475</span>&#160;                       <a class="code" href="namespacellvm_1_1PatternMatch.html#a64153676e101a130bbbaaf91635d253a">m_AShr</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(V), <a class="code" href="namespacellvm_1_1PatternMatch.html#a677ac8d99ff3c2d32a95c21de9ed372c">m_ConstantInt</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)))) {</div>
<div class="line"><a name="l02476"></a><span class="lineno"> 2476</span>&#160;        <span class="keywordflow">if</span> (TyAllocSize == 1ULL &lt;&lt; <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)</div>
<div class="line"><a name="l02477"></a><span class="lineno"> 2477</span>&#160;          Matched = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02478"></a><span class="lineno"> 2478</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>.getOperand(1),</div>
<div class="line"><a name="l02479"></a><span class="lineno"> 2479</span>&#160;                       <a class="code" href="namespacellvm_1_1PatternMatch.html#a741e3212cc4b9d94cd549d02d26e172b">m_SDiv</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(V), <a class="code" href="namespacellvm_1_1PatternMatch.html#a677ac8d99ff3c2d32a95c21de9ed372c">m_ConstantInt</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)))) {</div>
<div class="line"><a name="l02480"></a><span class="lineno"> 2480</span>&#160;        <span class="keywordflow">if</span> (TyAllocSize == <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)</div>
<div class="line"><a name="l02481"></a><span class="lineno"> 2481</span>&#160;          Matched = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02482"></a><span class="lineno"> 2482</span>&#160;      }</div>
<div class="line"><a name="l02483"></a><span class="lineno"> 2483</span>&#160; </div>
<div class="line"><a name="l02484"></a><span class="lineno"> 2484</span>&#160;      <span class="comment">// Canonicalize (gep i8* X, (ptrtoint Y)-(ptrtoint X)) to (bitcast Y), but</span></div>
<div class="line"><a name="l02485"></a><span class="lineno"> 2485</span>&#160;      <span class="comment">// only if both point to the same underlying object (otherwise provenance</span></div>
<div class="line"><a name="l02486"></a><span class="lineno"> 2486</span>&#160;      <span class="comment">// is not necessarily retained).</span></div>
<div class="line"><a name="l02487"></a><span class="lineno"> 2487</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>;</div>
<div class="line"><a name="l02488"></a><span class="lineno"> 2488</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a> = <a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>.getOperand(0);</div>
<div class="line"><a name="l02489"></a><span class="lineno"> 2489</span>&#160;      <span class="keywordflow">if</span> (Matched &amp;&amp;</div>
<div class="line"><a name="l02490"></a><span class="lineno"> 2490</span>&#160;          <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(V, <a class="code" href="namespacellvm_1_1PatternMatch.html#ac3ed5602889a22db44a16e1b97fac5b8">m_Sub</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a3ffbacd388121d5e3ba1c4360b7449d0">m_PtrToInt</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>)), <a class="code" href="namespacellvm_1_1PatternMatch.html#a3ffbacd388121d5e3ba1c4360b7449d0">m_PtrToInt</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>)))) &amp;&amp;</div>
<div class="line"><a name="l02491"></a><span class="lineno"> 2491</span>&#160;          <a class="code" href="namespacellvm.html#a3b1c5788b85ffa254be0e834edf5cf8f">getUnderlyingObject</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>) == <a class="code" href="namespacellvm.html#a3b1c5788b85ffa254be0e834edf5cf8f">getUnderlyingObject</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>))</div>
<div class="line"><a name="l02492"></a><span class="lineno"> 2492</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1CastInst.html#aa1a58843d7d645d5cf0390a68c7fd852">CastInst::CreatePointerBitCastOrAddrSpaceCast</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, GEPType);</div>
<div class="line"><a name="l02493"></a><span class="lineno"> 2493</span>&#160;    }</div>
<div class="line"><a name="l02494"></a><span class="lineno"> 2494</span>&#160;  }</div>
<div class="line"><a name="l02495"></a><span class="lineno"> 2495</span>&#160; </div>
<div class="line"><a name="l02496"></a><span class="lineno"> 2496</span>&#160;  <span class="comment">// We do not handle pointer-vector geps here.</span></div>
<div class="line"><a name="l02497"></a><span class="lineno"> 2497</span>&#160;  <span class="keywordflow">if</span> (GEPType-&gt;<a class="code" href="classllvm_1_1Type.html#a1bc022868b23918efa44df511f4d5b61">isVectorTy</a>())</div>
<div class="line"><a name="l02498"></a><span class="lineno"> 2498</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02499"></a><span class="lineno"> 2499</span>&#160; </div>
<div class="line"><a name="l02500"></a><span class="lineno"> 2500</span>&#160;  <span class="comment">// Handle gep(bitcast x) and gep(gep x, 0, 0, 0).</span></div>
<div class="line"><a name="l02501"></a><span class="lineno"> 2501</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *StrippedPtr = PtrOp-&gt;<a class="code" href="classllvm_1_1Value.html#a966eb231e7d4e572874d2cb49b18faea">stripPointerCasts</a>();</div>
<div class="line"><a name="l02502"></a><span class="lineno"> 2502</span>&#160;  <a class="code" href="classllvm_1_1PointerType.html">PointerType</a> *StrippedPtrTy = cast&lt;PointerType&gt;(StrippedPtr-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>());</div>
<div class="line"><a name="l02503"></a><span class="lineno"> 2503</span>&#160; </div>
<div class="line"><a name="l02504"></a><span class="lineno"> 2504</span>&#160;  <span class="comment">// TODO: The basic approach of these folds is not compatible with opaque</span></div>
<div class="line"><a name="l02505"></a><span class="lineno"> 2505</span>&#160;  <span class="comment">// pointers, because we can&#39;t use bitcasts as a hint for a desirable GEP</span></div>
<div class="line"><a name="l02506"></a><span class="lineno"> 2506</span>&#160;  <span class="comment">// type. Instead, we should perform canonicalization directly on the GEP</span></div>
<div class="line"><a name="l02507"></a><span class="lineno"> 2507</span>&#160;  <span class="comment">// type. For now, skip these.</span></div>
<div class="line"><a name="l02508"></a><span class="lineno"> 2508</span>&#160;  <span class="keywordflow">if</span> (StrippedPtr != PtrOp &amp;&amp; !StrippedPtrTy-&gt;<a class="code" href="classllvm_1_1PointerType.html#a92c4ce3a0a429509bc46cc3875a48c24">isOpaque</a>()) {</div>
<div class="line"><a name="l02509"></a><span class="lineno"> 2509</span>&#160;    <span class="keywordtype">bool</span> HasZeroPointerIndex = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02510"></a><span class="lineno"> 2510</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *StrippedPtrEltTy = StrippedPtrTy-&gt;<a class="code" href="classllvm_1_1Type.html#abceff71202e0269065cf32a2f750a9be">getNonOpaquePointerElementType</a>();</div>
<div class="line"><a name="l02511"></a><span class="lineno"> 2511</span>&#160; </div>
<div class="line"><a name="l02512"></a><span class="lineno"> 2512</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = dyn_cast&lt;ConstantInt&gt;(<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>.getOperand(1)))</div>
<div class="line"><a name="l02513"></a><span class="lineno"> 2513</span>&#160;      HasZeroPointerIndex = <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;isZero();</div>
<div class="line"><a name="l02514"></a><span class="lineno"> 2514</span>&#160; </div>
<div class="line"><a name="l02515"></a><span class="lineno"> 2515</span>&#160;    <span class="comment">// Transform: GEP (bitcast [10 x i8]* X to [0 x i8]*), i32 0, ...</span></div>
<div class="line"><a name="l02516"></a><span class="lineno"> 2516</span>&#160;    <span class="comment">// into     : GEP [10 x i8]* X, i32 0, ...</span></div>
<div class="line"><a name="l02517"></a><span class="lineno"> 2517</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l02518"></a><span class="lineno"> 2518</span>&#160;    <span class="comment">// Likewise, transform: GEP (bitcast i8* X to [0 x i8]*), i32 0, ...</span></div>
<div class="line"><a name="l02519"></a><span class="lineno"> 2519</span>&#160;    <span class="comment">//           into     : GEP i8* X, ...</span></div>
<div class="line"><a name="l02520"></a><span class="lineno"> 2520</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l02521"></a><span class="lineno"> 2521</span>&#160;    <span class="comment">// This occurs when the program declares an array extern like &quot;int X[];&quot;</span></div>
<div class="line"><a name="l02522"></a><span class="lineno"> 2522</span>&#160;    <span class="keywordflow">if</span> (HasZeroPointerIndex) {</div>
<div class="line"><a name="l02523"></a><span class="lineno"> 2523</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> *CATy = dyn_cast&lt;ArrayType&gt;(GEPEltType)) {</div>
<div class="line"><a name="l02524"></a><span class="lineno"> 2524</span>&#160;        <span class="comment">// GEP (bitcast i8* X to [0 x i8]*), i32 0, ... ?</span></div>
<div class="line"><a name="l02525"></a><span class="lineno"> 2525</span>&#160;        <span class="keywordflow">if</span> (CATy-&gt;getElementType() == StrippedPtrEltTy) {</div>
<div class="line"><a name="l02526"></a><span class="lineno"> 2526</span>&#160;          <span class="comment">// -&gt; GEP i8* X, ...</span></div>
<div class="line"><a name="l02527"></a><span class="lineno"> 2527</span>&#160;          <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Value *, 8&gt;</a> Idx(<a class="code" href="namespacellvm.html#a02981de53fb6ffd384d39addc4d25f37">drop_begin</a>(<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>.indices()));</div>
<div class="line"><a name="l02528"></a><span class="lineno"> 2528</span>&#160;          <a class="code" href="classllvm_1_1GetElementPtrInst.html">GetElementPtrInst</a> *Res = <a class="code" href="classllvm_1_1GetElementPtrInst.html#a74c47d18ecd4ca3399785e6ae07134dc">GetElementPtrInst::Create</a>(</div>
<div class="line"><a name="l02529"></a><span class="lineno"> 2529</span>&#160;              StrippedPtrEltTy, StrippedPtr, Idx, <a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>.getName());</div>
<div class="line"><a name="l02530"></a><span class="lineno"> 2530</span>&#160;          Res-&gt;<a class="code" href="classllvm_1_1GetElementPtrInst.html#a837e9f272fd070a5f8fc79c07a951106">setIsInBounds</a>(<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>.isInBounds());</div>
<div class="line"><a name="l02531"></a><span class="lineno"> 2531</span>&#160;          <span class="keywordflow">if</span> (StrippedPtrTy-&gt;<a class="code" href="classllvm_1_1PointerType.html#af8aeced5e71d2589fa3e9791043af5cb">getAddressSpace</a>() == <a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>.getAddressSpace())</div>
<div class="line"><a name="l02532"></a><span class="lineno"> 2532</span>&#160;            <span class="keywordflow">return</span> Res;</div>
<div class="line"><a name="l02533"></a><span class="lineno"> 2533</span>&#160;          <span class="comment">// Insert Res, and create an addrspacecast.</span></div>
<div class="line"><a name="l02534"></a><span class="lineno"> 2534</span>&#160;          <span class="comment">// e.g.,</span></div>
<div class="line"><a name="l02535"></a><span class="lineno"> 2535</span>&#160;          <span class="comment">// GEP (addrspacecast i8 addrspace(1)* X to [0 x i8]*), i32 0, ...</span></div>
<div class="line"><a name="l02536"></a><span class="lineno"> 2536</span>&#160;          <span class="comment">// -&gt;</span></div>
<div class="line"><a name="l02537"></a><span class="lineno"> 2537</span>&#160;          <span class="comment">// %0 = GEP i8 addrspace(1)* X, ...</span></div>
<div class="line"><a name="l02538"></a><span class="lineno"> 2538</span>&#160;          <span class="comment">// addrspacecast i8 addrspace(1)* %0 to i8*</span></div>
<div class="line"><a name="l02539"></a><span class="lineno"> 2539</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1AddrSpaceCastInst.html">AddrSpaceCastInst</a>(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.Insert(Res), GEPType);</div>
<div class="line"><a name="l02540"></a><span class="lineno"> 2540</span>&#160;        }</div>
<div class="line"><a name="l02541"></a><span class="lineno"> 2541</span>&#160; </div>
<div class="line"><a name="l02542"></a><span class="lineno"> 2542</span>&#160;        <span class="keywordflow">if</span> (<span class="keyword">auto</span> *XATy = dyn_cast&lt;ArrayType&gt;(StrippedPtrEltTy)) {</div>
<div class="line"><a name="l02543"></a><span class="lineno"> 2543</span>&#160;          <span class="comment">// GEP (bitcast [10 x i8]* X to [0 x i8]*), i32 0, ... ?</span></div>
<div class="line"><a name="l02544"></a><span class="lineno"> 2544</span>&#160;          <span class="keywordflow">if</span> (CATy-&gt;getElementType() == XATy-&gt;getElementType()) {</div>
<div class="line"><a name="l02545"></a><span class="lineno"> 2545</span>&#160;            <span class="comment">// -&gt; GEP [10 x i8]* X, i32 0, ...</span></div>
<div class="line"><a name="l02546"></a><span class="lineno"> 2546</span>&#160;            <span class="comment">// At this point, we know that the cast source type is a pointer</span></div>
<div class="line"><a name="l02547"></a><span class="lineno"> 2547</span>&#160;            <span class="comment">// to an array of the same type as the destination pointer</span></div>
<div class="line"><a name="l02548"></a><span class="lineno"> 2548</span>&#160;            <span class="comment">// array.  Because the array type is never stepped over (there</span></div>
<div class="line"><a name="l02549"></a><span class="lineno"> 2549</span>&#160;            <span class="comment">// is a leading zero) we can fold the cast into this GEP.</span></div>
<div class="line"><a name="l02550"></a><span class="lineno"> 2550</span>&#160;            <span class="keywordflow">if</span> (StrippedPtrTy-&gt;<a class="code" href="classllvm_1_1PointerType.html#af8aeced5e71d2589fa3e9791043af5cb">getAddressSpace</a>() == <a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>.getAddressSpace()) {</div>
<div class="line"><a name="l02551"></a><span class="lineno"> 2551</span>&#160;              <a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>.setSourceElementType(XATy);</div>
<div class="line"><a name="l02552"></a><span class="lineno"> 2552</span>&#160;              <span class="keywordflow">return</span> replaceOperand(<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>, 0, StrippedPtr);</div>
<div class="line"><a name="l02553"></a><span class="lineno"> 2553</span>&#160;            }</div>
<div class="line"><a name="l02554"></a><span class="lineno"> 2554</span>&#160;            <span class="comment">// Cannot replace the base pointer directly because StrippedPtr&#39;s</span></div>
<div class="line"><a name="l02555"></a><span class="lineno"> 2555</span>&#160;            <span class="comment">// address space is different. Instead, create a new GEP followed by</span></div>
<div class="line"><a name="l02556"></a><span class="lineno"> 2556</span>&#160;            <span class="comment">// an addrspacecast.</span></div>
<div class="line"><a name="l02557"></a><span class="lineno"> 2557</span>&#160;            <span class="comment">// e.g.,</span></div>
<div class="line"><a name="l02558"></a><span class="lineno"> 2558</span>&#160;            <span class="comment">// GEP (addrspacecast [10 x i8] addrspace(1)* X to [0 x i8]*),</span></div>
<div class="line"><a name="l02559"></a><span class="lineno"> 2559</span>&#160;            <span class="comment">//   i32 0, ...</span></div>
<div class="line"><a name="l02560"></a><span class="lineno"> 2560</span>&#160;            <span class="comment">// -&gt;</span></div>
<div class="line"><a name="l02561"></a><span class="lineno"> 2561</span>&#160;            <span class="comment">// %0 = GEP [10 x i8] addrspace(1)* X, ...</span></div>
<div class="line"><a name="l02562"></a><span class="lineno"> 2562</span>&#160;            <span class="comment">// addrspacecast i8 addrspace(1)* %0 to i8*</span></div>
<div class="line"><a name="l02563"></a><span class="lineno"> 2563</span>&#160;            <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Value *, 8&gt;</a> Idx(<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>.indices());</div>
<div class="line"><a name="l02564"></a><span class="lineno"> 2564</span>&#160;            <a class="code" href="classllvm_1_1Value.html">Value</a> *NewGEP =</div>
<div class="line"><a name="l02565"></a><span class="lineno"> 2565</span>&#160;                <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateGEP(StrippedPtrEltTy, StrippedPtr, Idx,</div>
<div class="line"><a name="l02566"></a><span class="lineno"> 2566</span>&#160;                                  <a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>.getName(), <a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>.isInBounds());</div>
<div class="line"><a name="l02567"></a><span class="lineno"> 2567</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1AddrSpaceCastInst.html">AddrSpaceCastInst</a>(NewGEP, GEPType);</div>
<div class="line"><a name="l02568"></a><span class="lineno"> 2568</span>&#160;          }</div>
<div class="line"><a name="l02569"></a><span class="lineno"> 2569</span>&#160;        }</div>
<div class="line"><a name="l02570"></a><span class="lineno"> 2570</span>&#160;      }</div>
<div class="line"><a name="l02571"></a><span class="lineno"> 2571</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>.getNumOperands() == 2 &amp;&amp; !IsGEPSrcEleScalable) {</div>
<div class="line"><a name="l02572"></a><span class="lineno"> 2572</span>&#160;      <span class="comment">// Skip if GEP source element type is scalable. The type alloc size is</span></div>
<div class="line"><a name="l02573"></a><span class="lineno"> 2573</span>&#160;      <span class="comment">// unknown at compile-time.</span></div>
<div class="line"><a name="l02574"></a><span class="lineno"> 2574</span>&#160;      <span class="comment">// Transform things like: %t = getelementptr i32*</span></div>
<div class="line"><a name="l02575"></a><span class="lineno"> 2575</span>&#160;      <span class="comment">// bitcast ([2 x i32]* %str to i32*), i32 %V into:  %t1 = getelementptr [2</span></div>
<div class="line"><a name="l02576"></a><span class="lineno"> 2576</span>&#160;      <span class="comment">// x i32]* %str, i32 0, i32 %V; bitcast</span></div>
<div class="line"><a name="l02577"></a><span class="lineno"> 2577</span>&#160;      <span class="keywordflow">if</span> (StrippedPtrEltTy-&gt;<a class="code" href="classllvm_1_1Type.html#a2a394517076e7dd2bdcd7dde33dfcb7d">isArrayTy</a>() &amp;&amp;</div>
<div class="line"><a name="l02578"></a><span class="lineno"> 2578</span>&#160;          <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getTypeAllocSize(StrippedPtrEltTy-&gt;<a class="code" href="classllvm_1_1Type.html#afc079797ba8cb5aa4d9ebfc4d85c4aab">getArrayElementType</a>()) ==</div>
<div class="line"><a name="l02579"></a><span class="lineno"> 2579</span>&#160;              <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getTypeAllocSize(GEPEltType)) {</div>
<div class="line"><a name="l02580"></a><span class="lineno"> 2580</span>&#160;        <a class="code" href="classllvm_1_1Type.html">Type</a> *IdxType = <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getIndexType(GEPType);</div>
<div class="line"><a name="l02581"></a><span class="lineno"> 2581</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *Idx[2] = {<a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(IdxType), <a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>.getOperand(1)};</div>
<div class="line"><a name="l02582"></a><span class="lineno"> 2582</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *NewGEP = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateGEP(StrippedPtrEltTy, StrippedPtr, Idx,</div>
<div class="line"><a name="l02583"></a><span class="lineno"> 2583</span>&#160;                                          <a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>.getName(), <a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>.isInBounds());</div>
<div class="line"><a name="l02584"></a><span class="lineno"> 2584</span>&#160; </div>
<div class="line"><a name="l02585"></a><span class="lineno"> 2585</span>&#160;        <span class="comment">// V and GEP are both pointer types --&gt; BitCast</span></div>
<div class="line"><a name="l02586"></a><span class="lineno"> 2586</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1CastInst.html#aa1a58843d7d645d5cf0390a68c7fd852">CastInst::CreatePointerBitCastOrAddrSpaceCast</a>(NewGEP, GEPType);</div>
<div class="line"><a name="l02587"></a><span class="lineno"> 2587</span>&#160;      }</div>
<div class="line"><a name="l02588"></a><span class="lineno"> 2588</span>&#160; </div>
<div class="line"><a name="l02589"></a><span class="lineno"> 2589</span>&#160;      <span class="comment">// Transform things like:</span></div>
<div class="line"><a name="l02590"></a><span class="lineno"> 2590</span>&#160;      <span class="comment">// %V = mul i64 %N, 4</span></div>
<div class="line"><a name="l02591"></a><span class="lineno"> 2591</span>&#160;      <span class="comment">// %t = getelementptr i8* bitcast (i32* %arr to i8*), i32 %V</span></div>
<div class="line"><a name="l02592"></a><span class="lineno"> 2592</span>&#160;      <span class="comment">// into:  %t1 = getelementptr i32* %arr, i32 %N; bitcast</span></div>
<div class="line"><a name="l02593"></a><span class="lineno"> 2593</span>&#160;      <span class="keywordflow">if</span> (GEPEltType-&gt;<a class="code" href="classllvm_1_1Type.html#a8ad67a33bae235fe3cca1c3e5a91ed2d">isSized</a>() &amp;&amp; StrippedPtrEltTy-&gt;<a class="code" href="classllvm_1_1Type.html#a8ad67a33bae235fe3cca1c3e5a91ed2d">isSized</a>()) {</div>
<div class="line"><a name="l02594"></a><span class="lineno"> 2594</span>&#160;        <span class="comment">// Check that changing the type amounts to dividing the index by a scale</span></div>
<div class="line"><a name="l02595"></a><span class="lineno"> 2595</span>&#160;        <span class="comment">// factor.</span></div>
<div class="line"><a name="l02596"></a><span class="lineno"> 2596</span>&#160;        <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> ResSize = <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getTypeAllocSize(GEPEltType).getFixedValue();</div>
<div class="line"><a name="l02597"></a><span class="lineno"> 2597</span>&#160;        <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> SrcSize =</div>
<div class="line"><a name="l02598"></a><span class="lineno"> 2598</span>&#160;            <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getTypeAllocSize(StrippedPtrEltTy).getFixedValue();</div>
<div class="line"><a name="l02599"></a><span class="lineno"> 2599</span>&#160;        <span class="keywordflow">if</span> (ResSize &amp;&amp; SrcSize % ResSize == 0) {</div>
<div class="line"><a name="l02600"></a><span class="lineno"> 2600</span>&#160;          <a class="code" href="classllvm_1_1Value.html">Value</a> *Idx = <a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>.getOperand(1);</div>
<div class="line"><a name="l02601"></a><span class="lineno"> 2601</span>&#160;          <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm.html#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a> = Idx-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a833daf718a49c5cd637d8c9ddeaebe07">getPrimitiveSizeInBits</a>();</div>
<div class="line"><a name="l02602"></a><span class="lineno"> 2602</span>&#160;          <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> Scale = SrcSize / ResSize;</div>
<div class="line"><a name="l02603"></a><span class="lineno"> 2603</span>&#160; </div>
<div class="line"><a name="l02604"></a><span class="lineno"> 2604</span>&#160;          <span class="comment">// Earlier transforms ensure that the index has the right type</span></div>
<div class="line"><a name="l02605"></a><span class="lineno"> 2605</span>&#160;          <span class="comment">// according to Data Layout, which considerably simplifies the</span></div>
<div class="line"><a name="l02606"></a><span class="lineno"> 2606</span>&#160;          <span class="comment">// logic by eliminating implicit casts.</span></div>
<div class="line"><a name="l02607"></a><span class="lineno"> 2607</span>&#160;          <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Idx-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>() == <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getIndexType(GEPType) &amp;&amp;</div>
<div class="line"><a name="l02608"></a><span class="lineno"> 2608</span>&#160;                 <span class="stringliteral">&quot;Index type does not match the Data Layout preferences&quot;</span>);</div>
<div class="line"><a name="l02609"></a><span class="lineno"> 2609</span>&#160; </div>
<div class="line"><a name="l02610"></a><span class="lineno"> 2610</span>&#160;          <span class="keywordtype">bool</span> NSW;</div>
<div class="line"><a name="l02611"></a><span class="lineno"> 2611</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *NewIdx = Descale(Idx, <a class="code" href="classllvm_1_1APInt.html">APInt</a>(<a class="code" href="namespacellvm.html#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a>, Scale), NSW)) {</div>
<div class="line"><a name="l02612"></a><span class="lineno"> 2612</span>&#160;            <span class="comment">// Successfully decomposed Idx as NewIdx * Scale, form a new GEP.</span></div>
<div class="line"><a name="l02613"></a><span class="lineno"> 2613</span>&#160;            <span class="comment">// If the multiplication NewIdx * Scale may overflow then the new</span></div>
<div class="line"><a name="l02614"></a><span class="lineno"> 2614</span>&#160;            <span class="comment">// GEP may not be &quot;inbounds&quot;.</span></div>
<div class="line"><a name="l02615"></a><span class="lineno"> 2615</span>&#160;            <a class="code" href="classllvm_1_1Value.html">Value</a> *NewGEP =</div>
<div class="line"><a name="l02616"></a><span class="lineno"> 2616</span>&#160;                <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateGEP(StrippedPtrEltTy, StrippedPtr, NewIdx,</div>
<div class="line"><a name="l02617"></a><span class="lineno"> 2617</span>&#160;                                  <a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>.getName(), <a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>.isInBounds() &amp;&amp; NSW);</div>
<div class="line"><a name="l02618"></a><span class="lineno"> 2618</span>&#160; </div>
<div class="line"><a name="l02619"></a><span class="lineno"> 2619</span>&#160;            <span class="comment">// The NewGEP must be pointer typed, so must the old one -&gt; BitCast</span></div>
<div class="line"><a name="l02620"></a><span class="lineno"> 2620</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1CastInst.html#aa1a58843d7d645d5cf0390a68c7fd852">CastInst::CreatePointerBitCastOrAddrSpaceCast</a>(NewGEP,</div>
<div class="line"><a name="l02621"></a><span class="lineno"> 2621</span>&#160;                                                                 GEPType);</div>
<div class="line"><a name="l02622"></a><span class="lineno"> 2622</span>&#160;          }</div>
<div class="line"><a name="l02623"></a><span class="lineno"> 2623</span>&#160;        }</div>
<div class="line"><a name="l02624"></a><span class="lineno"> 2624</span>&#160;      }</div>
<div class="line"><a name="l02625"></a><span class="lineno"> 2625</span>&#160; </div>
<div class="line"><a name="l02626"></a><span class="lineno"> 2626</span>&#160;      <span class="comment">// Similarly, transform things like:</span></div>
<div class="line"><a name="l02627"></a><span class="lineno"> 2627</span>&#160;      <span class="comment">// getelementptr i8* bitcast ([100 x double]* X to i8*), i32 %tmp</span></div>
<div class="line"><a name="l02628"></a><span class="lineno"> 2628</span>&#160;      <span class="comment">//   (where tmp = 8*tmp2) into:</span></div>
<div class="line"><a name="l02629"></a><span class="lineno"> 2629</span>&#160;      <span class="comment">// getelementptr [100 x double]* %arr, i32 0, i32 %tmp2; bitcast</span></div>
<div class="line"><a name="l02630"></a><span class="lineno"> 2630</span>&#160;      <span class="keywordflow">if</span> (GEPEltType-&gt;<a class="code" href="classllvm_1_1Type.html#a8ad67a33bae235fe3cca1c3e5a91ed2d">isSized</a>() &amp;&amp; StrippedPtrEltTy-&gt;<a class="code" href="classllvm_1_1Type.html#a8ad67a33bae235fe3cca1c3e5a91ed2d">isSized</a>() &amp;&amp;</div>
<div class="line"><a name="l02631"></a><span class="lineno"> 2631</span>&#160;          StrippedPtrEltTy-&gt;<a class="code" href="classllvm_1_1Type.html#a2a394517076e7dd2bdcd7dde33dfcb7d">isArrayTy</a>()) {</div>
<div class="line"><a name="l02632"></a><span class="lineno"> 2632</span>&#160;        <span class="comment">// Check that changing to the array element type amounts to dividing the</span></div>
<div class="line"><a name="l02633"></a><span class="lineno"> 2633</span>&#160;        <span class="comment">// index by a scale factor.</span></div>
<div class="line"><a name="l02634"></a><span class="lineno"> 2634</span>&#160;        <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> ResSize = <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getTypeAllocSize(GEPEltType).getFixedValue();</div>
<div class="line"><a name="l02635"></a><span class="lineno"> 2635</span>&#160;        <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> ArrayEltSize =</div>
<div class="line"><a name="l02636"></a><span class="lineno"> 2636</span>&#160;            <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getTypeAllocSize(StrippedPtrEltTy-&gt;<a class="code" href="classllvm_1_1Type.html#afc079797ba8cb5aa4d9ebfc4d85c4aab">getArrayElementType</a>())</div>
<div class="line"><a name="l02637"></a><span class="lineno"> 2637</span>&#160;                .getFixedValue();</div>
<div class="line"><a name="l02638"></a><span class="lineno"> 2638</span>&#160;        <span class="keywordflow">if</span> (ResSize &amp;&amp; ArrayEltSize % ResSize == 0) {</div>
<div class="line"><a name="l02639"></a><span class="lineno"> 2639</span>&#160;          <a class="code" href="classllvm_1_1Value.html">Value</a> *Idx = <a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>.getOperand(1);</div>
<div class="line"><a name="l02640"></a><span class="lineno"> 2640</span>&#160;          <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm.html#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a> = Idx-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a833daf718a49c5cd637d8c9ddeaebe07">getPrimitiveSizeInBits</a>();</div>
<div class="line"><a name="l02641"></a><span class="lineno"> 2641</span>&#160;          <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> Scale = ArrayEltSize / ResSize;</div>
<div class="line"><a name="l02642"></a><span class="lineno"> 2642</span>&#160; </div>
<div class="line"><a name="l02643"></a><span class="lineno"> 2643</span>&#160;          <span class="comment">// Earlier transforms ensure that the index has the right type</span></div>
<div class="line"><a name="l02644"></a><span class="lineno"> 2644</span>&#160;          <span class="comment">// according to the Data Layout, which considerably simplifies</span></div>
<div class="line"><a name="l02645"></a><span class="lineno"> 2645</span>&#160;          <span class="comment">// the logic by eliminating implicit casts.</span></div>
<div class="line"><a name="l02646"></a><span class="lineno"> 2646</span>&#160;          <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Idx-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>() == <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getIndexType(GEPType) &amp;&amp;</div>
<div class="line"><a name="l02647"></a><span class="lineno"> 2647</span>&#160;                 <span class="stringliteral">&quot;Index type does not match the Data Layout preferences&quot;</span>);</div>
<div class="line"><a name="l02648"></a><span class="lineno"> 2648</span>&#160; </div>
<div class="line"><a name="l02649"></a><span class="lineno"> 2649</span>&#160;          <span class="keywordtype">bool</span> NSW;</div>
<div class="line"><a name="l02650"></a><span class="lineno"> 2650</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *NewIdx = Descale(Idx, <a class="code" href="classllvm_1_1APInt.html">APInt</a>(<a class="code" href="namespacellvm.html#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a>, Scale), NSW)) {</div>
<div class="line"><a name="l02651"></a><span class="lineno"> 2651</span>&#160;            <span class="comment">// Successfully decomposed Idx as NewIdx * Scale, form a new GEP.</span></div>
<div class="line"><a name="l02652"></a><span class="lineno"> 2652</span>&#160;            <span class="comment">// If the multiplication NewIdx * Scale may overflow then the new</span></div>
<div class="line"><a name="l02653"></a><span class="lineno"> 2653</span>&#160;            <span class="comment">// GEP may not be &quot;inbounds&quot;.</span></div>
<div class="line"><a name="l02654"></a><span class="lineno"> 2654</span>&#160;            <a class="code" href="classllvm_1_1Type.html">Type</a> *IndTy = <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getIndexType(GEPType);</div>
<div class="line"><a name="l02655"></a><span class="lineno"> 2655</span>&#160;            <a class="code" href="classllvm_1_1Value.html">Value</a> *Off[2] = {<a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(IndTy), NewIdx};</div>
<div class="line"><a name="l02656"></a><span class="lineno"> 2656</span>&#160; </div>
<div class="line"><a name="l02657"></a><span class="lineno"> 2657</span>&#160;            <a class="code" href="classllvm_1_1Value.html">Value</a> *NewGEP =</div>
<div class="line"><a name="l02658"></a><span class="lineno"> 2658</span>&#160;                <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateGEP(StrippedPtrEltTy, StrippedPtr, Off,</div>
<div class="line"><a name="l02659"></a><span class="lineno"> 2659</span>&#160;                                  <a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>.getName(), <a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>.isInBounds() &amp;&amp; NSW);</div>
<div class="line"><a name="l02660"></a><span class="lineno"> 2660</span>&#160;            <span class="comment">// The NewGEP must be pointer typed, so must the old one -&gt; BitCast</span></div>
<div class="line"><a name="l02661"></a><span class="lineno"> 2661</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1CastInst.html#aa1a58843d7d645d5cf0390a68c7fd852">CastInst::CreatePointerBitCastOrAddrSpaceCast</a>(NewGEP,</div>
<div class="line"><a name="l02662"></a><span class="lineno"> 2662</span>&#160;                                                                 GEPType);</div>
<div class="line"><a name="l02663"></a><span class="lineno"> 2663</span>&#160;          }</div>
<div class="line"><a name="l02664"></a><span class="lineno"> 2664</span>&#160;        }</div>
<div class="line"><a name="l02665"></a><span class="lineno"> 2665</span>&#160;      }</div>
<div class="line"><a name="l02666"></a><span class="lineno"> 2666</span>&#160;    }</div>
<div class="line"><a name="l02667"></a><span class="lineno"> 2667</span>&#160;  }</div>
<div class="line"><a name="l02668"></a><span class="lineno"> 2668</span>&#160; </div>
<div class="line"><a name="l02669"></a><span class="lineno"> 2669</span>&#160;  <span class="comment">// addrspacecast between types is canonicalized as a bitcast, then an</span></div>
<div class="line"><a name="l02670"></a><span class="lineno"> 2670</span>&#160;  <span class="comment">// addrspacecast. To take advantage of the below bitcast + struct GEP, look</span></div>
<div class="line"><a name="l02671"></a><span class="lineno"> 2671</span>&#160;  <span class="comment">// through the addrspacecast.</span></div>
<div class="line"><a name="l02672"></a><span class="lineno"> 2672</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *ASCStrippedPtrOp = PtrOp;</div>
<div class="line"><a name="l02673"></a><span class="lineno"> 2673</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *ASC = dyn_cast&lt;AddrSpaceCastInst&gt;(PtrOp)) {</div>
<div class="line"><a name="l02674"></a><span class="lineno"> 2674</span>&#160;    <span class="comment">//   X = bitcast A addrspace(1)* to B addrspace(1)*</span></div>
<div class="line"><a name="l02675"></a><span class="lineno"> 2675</span>&#160;    <span class="comment">//   Y = addrspacecast A addrspace(1)* to B addrspace(2)*</span></div>
<div class="line"><a name="l02676"></a><span class="lineno"> 2676</span>&#160;    <span class="comment">//   Z = gep Y, &lt;...constant indices...&gt;</span></div>
<div class="line"><a name="l02677"></a><span class="lineno"> 2677</span>&#160;    <span class="comment">// Into an addrspacecasted GEP of the struct.</span></div>
<div class="line"><a name="l02678"></a><span class="lineno"> 2678</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> *BC = dyn_cast&lt;BitCastInst&gt;(ASC-&gt;getOperand(0)))</div>
<div class="line"><a name="l02679"></a><span class="lineno"> 2679</span>&#160;      ASCStrippedPtrOp = BC;</div>
<div class="line"><a name="l02680"></a><span class="lineno"> 2680</span>&#160;  }</div>
<div class="line"><a name="l02681"></a><span class="lineno"> 2681</span>&#160; </div>
<div class="line"><a name="l02682"></a><span class="lineno"> 2682</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *BCI = dyn_cast&lt;BitCastInst&gt;(ASCStrippedPtrOp))</div>
<div class="line"><a name="l02683"></a><span class="lineno"> 2683</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = visitGEPOfBitcast(BCI, <a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>))</div>
<div class="line"><a name="l02684"></a><span class="lineno"> 2684</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l02685"></a><span class="lineno"> 2685</span>&#160; </div>
<div class="line"><a name="l02686"></a><span class="lineno"> 2686</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>.isInBounds()) {</div>
<div class="line"><a name="l02687"></a><span class="lineno"> 2687</span>&#160;    <span class="keywordtype">unsigned</span> IdxWidth =</div>
<div class="line"><a name="l02688"></a><span class="lineno"> 2688</span>&#160;        <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getIndexSizeInBits(PtrOp-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a5ab2d0b0f0b8ceec3b907184e7567197">getPointerAddressSpace</a>());</div>
<div class="line"><a name="l02689"></a><span class="lineno"> 2689</span>&#160;    <a class="code" href="classllvm_1_1APInt.html">APInt</a> BasePtrOffset(IdxWidth, 0);</div>
<div class="line"><a name="l02690"></a><span class="lineno"> 2690</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *UnderlyingPtrOp =</div>
<div class="line"><a name="l02691"></a><span class="lineno"> 2691</span>&#160;            PtrOp-&gt;<a class="code" href="classllvm_1_1Value.html#ae7a4de5d3c7d0f2ba56e3933fb2007bf">stripAndAccumulateInBoundsConstantOffsets</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>,</div>
<div class="line"><a name="l02692"></a><span class="lineno"> 2692</span>&#160;                                                             BasePtrOffset);</div>
<div class="line"><a name="l02693"></a><span class="lineno"> 2693</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> *AI = dyn_cast&lt;AllocaInst&gt;(UnderlyingPtrOp)) {</div>
<div class="line"><a name="l02694"></a><span class="lineno"> 2694</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>.accumulateConstantOffset(<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, BasePtrOffset) &amp;&amp;</div>
<div class="line"><a name="l02695"></a><span class="lineno"> 2695</span>&#160;          BasePtrOffset.<a class="code" href="classllvm_1_1APInt.html#ac8c0157adbe12649beac0009c2f6ad8d">isNonNegative</a>()) {</div>
<div class="line"><a name="l02696"></a><span class="lineno"> 2696</span>&#160;        <a class="code" href="classllvm_1_1APInt.html">APInt</a> AllocSize(</div>
<div class="line"><a name="l02697"></a><span class="lineno"> 2697</span>&#160;            IdxWidth,</div>
<div class="line"><a name="l02698"></a><span class="lineno"> 2698</span>&#160;            <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getTypeAllocSize(AI-&gt;getAllocatedType()).getKnownMinValue());</div>
<div class="line"><a name="l02699"></a><span class="lineno"> 2699</span>&#160;        <span class="keywordflow">if</span> (BasePtrOffset.<a class="code" href="classllvm_1_1APInt.html#aca14d9ec64ba4ab7fb2cef37c57d9ce4">ule</a>(AllocSize)) {</div>
<div class="line"><a name="l02700"></a><span class="lineno"> 2700</span>&#160;          <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1GetElementPtrInst.html#a9a94c15dff322a963b566d486dd673b5">GetElementPtrInst::CreateInBounds</a>(</div>
<div class="line"><a name="l02701"></a><span class="lineno"> 2701</span>&#160;              <a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>.getSourceElementType(), PtrOp, Indices, <a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>.getName());</div>
<div class="line"><a name="l02702"></a><span class="lineno"> 2702</span>&#160;        }</div>
<div class="line"><a name="l02703"></a><span class="lineno"> 2703</span>&#160;      }</div>
<div class="line"><a name="l02704"></a><span class="lineno"> 2704</span>&#160;    }</div>
<div class="line"><a name="l02705"></a><span class="lineno"> 2705</span>&#160;  }</div>
<div class="line"><a name="l02706"></a><span class="lineno"> 2706</span>&#160; </div>
<div class="line"><a name="l02707"></a><span class="lineno"> 2707</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *R = <a class="code" href="InstructionCombining_8cpp.html#a2c27d3aa3ffee14bf2194f7c0cbf9dfc">foldSelectGEP</a>(<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>))</div>
<div class="line"><a name="l02708"></a><span class="lineno"> 2708</span>&#160;    <span class="keywordflow">return</span> R;</div>
<div class="line"><a name="l02709"></a><span class="lineno"> 2709</span>&#160; </div>
<div class="line"><a name="l02710"></a><span class="lineno"> 2710</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02711"></a><span class="lineno"> 2711</span>&#160;}</div>
<div class="line"><a name="l02712"></a><span class="lineno"> 2712</span>&#160; </div>
<div class="line"><a name="l02713"></a><span class="lineno"><a class="line" href="InstructionCombining_8cpp.html#a04d581f6b1ca4d25c0c0a7e97404151c"> 2713</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="InstructionCombining_8cpp.html#a04d581f6b1ca4d25c0c0a7e97404151c">isNeverEqualToUnescapedAlloc</a>(<a class="code" href="classllvm_1_1Value.html">Value</a> *V, <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetLibraryInfo.html">TargetLibraryInfo</a> &amp;TLI,</div>
<div class="line"><a name="l02714"></a><span class="lineno"> 2714</span>&#160;                                         <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *AI) {</div>
<div class="line"><a name="l02715"></a><span class="lineno"> 2715</span>&#160;  <span class="keywordflow">if</span> (isa&lt;ConstantPointerNull&gt;(V))</div>
<div class="line"><a name="l02716"></a><span class="lineno"> 2716</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02717"></a><span class="lineno"> 2717</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *LI = dyn_cast&lt;LoadInst&gt;(V))</div>
<div class="line"><a name="l02718"></a><span class="lineno"> 2718</span>&#160;    <span class="keywordflow">return</span> isa&lt;GlobalVariable&gt;(LI-&gt;getPointerOperand());</div>
<div class="line"><a name="l02719"></a><span class="lineno"> 2719</span>&#160;  <span class="comment">// Two distinct allocations will never be equal.</span></div>
<div class="line"><a name="l02720"></a><span class="lineno"> 2720</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#a56641197c50e1c7a9558446d14deadb3">isAllocLikeFn</a>(V, &amp;TLI) &amp;&amp; V != AI;</div>
<div class="line"><a name="l02721"></a><span class="lineno"> 2721</span>&#160;}</div>
<div class="line"><a name="l02722"></a><span class="lineno"> 2722</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02723"></a><span class="lineno"> 2723</span>&#160;<span class="comment">/// Given a call CB which uses an address UsedV, return true if we can prove the</span></div>
<div class="line"><a name="l02724"></a><span class="lineno"> 2724</span>&#160;<span class="comment">/// call&#39;s only possible effect is storing to V.</span></div>
<div class="line"><a name="l02725"></a><span class="lineno"><a class="line" href="InstructionCombining_8cpp.html#abbd47852a13b73290f4625f20c9018d8"> 2725</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="InstructionCombining_8cpp.html#abbd47852a13b73290f4625f20c9018d8">isRemovableWrite</a>(<a class="code" href="classllvm_1_1CallBase.html">CallBase</a> &amp;CB, <a class="code" href="classllvm_1_1Value.html">Value</a> *UsedV,</div>
<div class="line"><a name="l02726"></a><span class="lineno"> 2726</span>&#160;                             <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetLibraryInfo.html">TargetLibraryInfo</a> &amp;TLI) {</div>
<div class="line"><a name="l02727"></a><span class="lineno"> 2727</span>&#160;  <span class="keywordflow">if</span> (!CB.<a class="code" href="classllvm_1_1Value.html#a9d7de807ebdfe1819df3ff6cb0f16158">use_empty</a>())</div>
<div class="line"><a name="l02728"></a><span class="lineno"> 2728</span>&#160;    <span class="comment">// TODO: add recursion if returned attribute is present</span></div>
<div class="line"><a name="l02729"></a><span class="lineno"> 2729</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02730"></a><span class="lineno"> 2730</span>&#160; </div>
<div class="line"><a name="l02731"></a><span class="lineno"> 2731</span>&#160;  <span class="keywordflow">if</span> (CB.<a class="code" href="classllvm_1_1Instruction.html#a7653277511df1034148a37520a585bb5">isTerminator</a>())</div>
<div class="line"><a name="l02732"></a><span class="lineno"> 2732</span>&#160;    <span class="comment">// TODO: remove implementation restriction</span></div>
<div class="line"><a name="l02733"></a><span class="lineno"> 2733</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02734"></a><span class="lineno"> 2734</span>&#160; </div>
<div class="line"><a name="l02735"></a><span class="lineno"> 2735</span>&#160;  <span class="keywordflow">if</span> (!CB.<a class="code" href="classllvm_1_1Instruction.html#aa03e017ef451ba2f6f504b0d40c2da2e">willReturn</a>() || !CB.<a class="code" href="classllvm_1_1CallBase.html#aa87fae97a8c702741eca5a95748af49d">doesNotThrow</a>())</div>
<div class="line"><a name="l02736"></a><span class="lineno"> 2736</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02737"></a><span class="lineno"> 2737</span>&#160; </div>
<div class="line"><a name="l02738"></a><span class="lineno"> 2738</span>&#160;  <span class="comment">// If the only possible side effect of the call is writing to the alloca,</span></div>
<div class="line"><a name="l02739"></a><span class="lineno"> 2739</span>&#160;  <span class="comment">// and the result isn&#39;t used, we can safely remove any reads implied by the</span></div>
<div class="line"><a name="l02740"></a><span class="lineno"> 2740</span>&#160;  <span class="comment">// call including those which might read the alloca itself.</span></div>
<div class="line"><a name="l02741"></a><span class="lineno"> 2741</span>&#160;  std::optional&lt;MemoryLocation&gt; Dest = <a class="code" href="classllvm_1_1MemoryLocation.html#ac8f8983c6b76d0e30f22fff86b281f16">MemoryLocation::getForDest</a>(&amp;CB, TLI);</div>
<div class="line"><a name="l02742"></a><span class="lineno"> 2742</span>&#160;  <span class="keywordflow">return</span> Dest &amp;&amp; Dest-&gt;Ptr == UsedV;</div>
<div class="line"><a name="l02743"></a><span class="lineno"> 2743</span>&#160;}</div>
<div class="line"><a name="l02744"></a><span class="lineno"> 2744</span>&#160; </div>
<div class="line"><a name="l02745"></a><span class="lineno"><a class="line" href="InstructionCombining_8cpp.html#a5d94ee8aaee00c42c11954aaa6022894"> 2745</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="InstructionCombining_8cpp.html#a5d94ee8aaee00c42c11954aaa6022894">isAllocSiteRemovable</a>(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *AI,</div>
<div class="line"><a name="l02746"></a><span class="lineno"> 2746</span>&#160;                                 <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;WeakTrackingVH&gt;</a> &amp;<a class="code" href="IVUsers_8cpp.html#a4e5b9edb51eec9dbca592075eb64dfcb">Users</a>,</div>
<div class="line"><a name="l02747"></a><span class="lineno"> 2747</span>&#160;                                 <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetLibraryInfo.html">TargetLibraryInfo</a> &amp;TLI) {</div>
<div class="line"><a name="l02748"></a><span class="lineno"> 2748</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Instruction*, 4&gt;</a> Worklist;</div>
<div class="line"><a name="l02749"></a><span class="lineno"> 2749</span>&#160;  <span class="keyword">const</span> std::optional&lt;StringRef&gt; Family = <a class="code" href="namespacellvm.html#a291c4451c91c4aaee65308741793626a">getAllocationFamily</a>(AI, &amp;TLI);</div>
<div class="line"><a name="l02750"></a><span class="lineno"> 2750</span>&#160;  Worklist.push_back(AI);</div>
<div class="line"><a name="l02751"></a><span class="lineno"> 2751</span>&#160; </div>
<div class="line"><a name="l02752"></a><span class="lineno"> 2752</span>&#160;  <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l02753"></a><span class="lineno"> 2753</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *PI = Worklist.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a0c8ffe664a36e30d49c84d0aded2fe08">pop_back_val</a>();</div>
<div class="line"><a name="l02754"></a><span class="lineno"> 2754</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1User.html">User</a> *U : PI-&gt;<a class="code" href="classllvm_1_1Value.html#ab4e0512c7e1c7adaa56677e3155685f1">users</a>()) {</div>
<div class="line"><a name="l02755"></a><span class="lineno"> 2755</span>&#160;      <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = cast&lt;Instruction&gt;(U);</div>
<div class="line"><a name="l02756"></a><span class="lineno"> 2756</span>&#160;      <span class="keywordflow">switch</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOpcode()) {</div>
<div class="line"><a name="l02757"></a><span class="lineno"> 2757</span>&#160;      <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l02758"></a><span class="lineno"> 2758</span>&#160;        <span class="comment">// Give up the moment we see something we can&#39;t handle.</span></div>
<div class="line"><a name="l02759"></a><span class="lineno"> 2759</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02760"></a><span class="lineno"> 2760</span>&#160; </div>
<div class="line"><a name="l02761"></a><span class="lineno"> 2761</span>&#160;      <span class="keywordflow">case</span> Instruction::AddrSpaceCast:</div>
<div class="line"><a name="l02762"></a><span class="lineno"> 2762</span>&#160;      <span class="keywordflow">case</span> Instruction::BitCast:</div>
<div class="line"><a name="l02763"></a><span class="lineno"> 2763</span>&#160;      <span class="keywordflow">case</span> Instruction::GetElementPtr:</div>
<div class="line"><a name="l02764"></a><span class="lineno"> 2764</span>&#160;        <a class="code" href="IVUsers_8cpp.html#a4e5b9edb51eec9dbca592075eb64dfcb">Users</a>.emplace_back(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l02765"></a><span class="lineno"> 2765</span>&#160;        Worklist.push_back(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l02766"></a><span class="lineno"> 2766</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02767"></a><span class="lineno"> 2767</span>&#160; </div>
<div class="line"><a name="l02768"></a><span class="lineno"> 2768</span>&#160;      <span class="keywordflow">case</span> Instruction::ICmp: {</div>
<div class="line"><a name="l02769"></a><span class="lineno"> 2769</span>&#160;        <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> *ICI = cast&lt;ICmpInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l02770"></a><span class="lineno"> 2770</span>&#160;        <span class="comment">// We can fold eq/ne comparisons with null to false/true, respectively.</span></div>
<div class="line"><a name="l02771"></a><span class="lineno"> 2771</span>&#160;        <span class="comment">// We also fold comparisons in some conditions provided the alloc has</span></div>
<div class="line"><a name="l02772"></a><span class="lineno"> 2772</span>&#160;        <span class="comment">// not escaped (see isNeverEqualToUnescapedAlloc).</span></div>
<div class="line"><a name="l02773"></a><span class="lineno"> 2773</span>&#160;        <span class="keywordflow">if</span> (!ICI-&gt;<a class="code" href="classllvm_1_1ICmpInst.html#abe8988eef2e6fc2baba032cb22afedd7">isEquality</a>())</div>
<div class="line"><a name="l02774"></a><span class="lineno"> 2774</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02775"></a><span class="lineno"> 2775</span>&#160;        <span class="keywordtype">unsigned</span> OtherIndex = (ICI-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0) == PI) ? 1 : 0;</div>
<div class="line"><a name="l02776"></a><span class="lineno"> 2776</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="InstructionCombining_8cpp.html#a04d581f6b1ca4d25c0c0a7e97404151c">isNeverEqualToUnescapedAlloc</a>(ICI-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(OtherIndex), TLI, AI))</div>
<div class="line"><a name="l02777"></a><span class="lineno"> 2777</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02778"></a><span class="lineno"> 2778</span>&#160;        <a class="code" href="IVUsers_8cpp.html#a4e5b9edb51eec9dbca592075eb64dfcb">Users</a>.emplace_back(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l02779"></a><span class="lineno"> 2779</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02780"></a><span class="lineno"> 2780</span>&#160;      }</div>
<div class="line"><a name="l02781"></a><span class="lineno"> 2781</span>&#160; </div>
<div class="line"><a name="l02782"></a><span class="lineno"> 2782</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a463baf545246fea9718664d933ffe66f">Instruction::Call</a>:</div>
<div class="line"><a name="l02783"></a><span class="lineno"> 2783</span>&#160;        <span class="comment">// Ignore no-op and store intrinsics.</span></div>
<div class="line"><a name="l02784"></a><span class="lineno"> 2784</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1IntrinsicInst.html">IntrinsicInst</a> *II = dyn_cast&lt;IntrinsicInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l02785"></a><span class="lineno"> 2785</span>&#160;          <span class="keywordflow">switch</span> (II-&gt;<a class="code" href="classllvm_1_1IntrinsicInst.html#a7ff64b3625b6f9020556ed05a5f72af4">getIntrinsicID</a>()) {</div>
<div class="line"><a name="l02786"></a><span class="lineno"> 2786</span>&#160;          <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l02787"></a><span class="lineno"> 2787</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02788"></a><span class="lineno"> 2788</span>&#160; </div>
<div class="line"><a name="l02789"></a><span class="lineno"> 2789</span>&#160;          <span class="keywordflow">case</span> Intrinsic::memmove:</div>
<div class="line"><a name="l02790"></a><span class="lineno"> 2790</span>&#160;          <span class="keywordflow">case</span> <a class="code" href="lib_2Target_2ARM_2README_8txt.html#ae2bb081d94f22e64ca6bc4bd58512a93">Intrinsic::memcpy</a>:</div>
<div class="line"><a name="l02791"></a><span class="lineno"> 2791</span>&#160;          <span class="keywordflow">case</span> Intrinsic::memset: {</div>
<div class="line"><a name="l02792"></a><span class="lineno"> 2792</span>&#160;            <a class="code" href="classllvm_1_1MemIntrinsic.html">MemIntrinsic</a> *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> = cast&lt;MemIntrinsic&gt;(II);</div>
<div class="line"><a name="l02793"></a><span class="lineno"> 2793</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;isVolatile() || <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getRawDest() != PI)</div>
<div class="line"><a name="l02794"></a><span class="lineno"> 2794</span>&#160;              <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02795"></a><span class="lineno"> 2795</span>&#160;            [[fallthrough]];</div>
<div class="line"><a name="l02796"></a><span class="lineno"> 2796</span>&#160;          }</div>
<div class="line"><a name="l02797"></a><span class="lineno"> 2797</span>&#160;          <span class="keywordflow">case</span> Intrinsic::assume:</div>
<div class="line"><a name="l02798"></a><span class="lineno"> 2798</span>&#160;          <span class="keywordflow">case</span> Intrinsic::invariant_start:</div>
<div class="line"><a name="l02799"></a><span class="lineno"> 2799</span>&#160;          <span class="keywordflow">case</span> Intrinsic::invariant_end:</div>
<div class="line"><a name="l02800"></a><span class="lineno"> 2800</span>&#160;          <span class="keywordflow">case</span> Intrinsic::lifetime_start:</div>
<div class="line"><a name="l02801"></a><span class="lineno"> 2801</span>&#160;          <span class="keywordflow">case</span> Intrinsic::lifetime_end:</div>
<div class="line"><a name="l02802"></a><span class="lineno"> 2802</span>&#160;          <span class="keywordflow">case</span> Intrinsic::objectsize:</div>
<div class="line"><a name="l02803"></a><span class="lineno"> 2803</span>&#160;            <a class="code" href="IVUsers_8cpp.html#a4e5b9edb51eec9dbca592075eb64dfcb">Users</a>.emplace_back(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l02804"></a><span class="lineno"> 2804</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02805"></a><span class="lineno"> 2805</span>&#160;          <span class="keywordflow">case</span> Intrinsic::launder_invariant_group:</div>
<div class="line"><a name="l02806"></a><span class="lineno"> 2806</span>&#160;          <span class="keywordflow">case</span> Intrinsic::strip_invariant_group:</div>
<div class="line"><a name="l02807"></a><span class="lineno"> 2807</span>&#160;            <a class="code" href="IVUsers_8cpp.html#a4e5b9edb51eec9dbca592075eb64dfcb">Users</a>.emplace_back(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l02808"></a><span class="lineno"> 2808</span>&#160;            Worklist.push_back(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l02809"></a><span class="lineno"> 2809</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02810"></a><span class="lineno"> 2810</span>&#160;          }</div>
<div class="line"><a name="l02811"></a><span class="lineno"> 2811</span>&#160;        }</div>
<div class="line"><a name="l02812"></a><span class="lineno"> 2812</span>&#160; </div>
<div class="line"><a name="l02813"></a><span class="lineno"> 2813</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="InstructionCombining_8cpp.html#abbd47852a13b73290f4625f20c9018d8">isRemovableWrite</a>(*cast&lt;CallBase&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>), PI, TLI)) {</div>
<div class="line"><a name="l02814"></a><span class="lineno"> 2814</span>&#160;          <a class="code" href="IVUsers_8cpp.html#a4e5b9edb51eec9dbca592075eb64dfcb">Users</a>.emplace_back(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l02815"></a><span class="lineno"> 2815</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02816"></a><span class="lineno"> 2816</span>&#160;        }</div>
<div class="line"><a name="l02817"></a><span class="lineno"> 2817</span>&#160; </div>
<div class="line"><a name="l02818"></a><span class="lineno"> 2818</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#ab9cb77a3069c227792d6bade6faff422">getFreedOperand</a>(cast&lt;CallBase&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>), &amp;TLI) == PI &amp;&amp;</div>
<div class="line"><a name="l02819"></a><span class="lineno"> 2819</span>&#160;            <a class="code" href="namespacellvm.html#a291c4451c91c4aaee65308741793626a">getAllocationFamily</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, &amp;TLI) == Family) {</div>
<div class="line"><a name="l02820"></a><span class="lineno"> 2820</span>&#160;          <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Family);</div>
<div class="line"><a name="l02821"></a><span class="lineno"> 2821</span>&#160;          <a class="code" href="IVUsers_8cpp.html#a4e5b9edb51eec9dbca592075eb64dfcb">Users</a>.emplace_back(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l02822"></a><span class="lineno"> 2822</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02823"></a><span class="lineno"> 2823</span>&#160;        }</div>
<div class="line"><a name="l02824"></a><span class="lineno"> 2824</span>&#160; </div>
<div class="line"><a name="l02825"></a><span class="lineno"> 2825</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a4ff10451ba01dc08fc0d38983c6743b7">getReallocatedOperand</a>(cast&lt;CallBase&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) == PI &amp;&amp;</div>
<div class="line"><a name="l02826"></a><span class="lineno"> 2826</span>&#160;            <a class="code" href="namespacellvm.html#a291c4451c91c4aaee65308741793626a">getAllocationFamily</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, &amp;TLI) == Family) {</div>
<div class="line"><a name="l02827"></a><span class="lineno"> 2827</span>&#160;          <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Family);</div>
<div class="line"><a name="l02828"></a><span class="lineno"> 2828</span>&#160;          <a class="code" href="IVUsers_8cpp.html#a4e5b9edb51eec9dbca592075eb64dfcb">Users</a>.emplace_back(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l02829"></a><span class="lineno"> 2829</span>&#160;          Worklist.push_back(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l02830"></a><span class="lineno"> 2830</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02831"></a><span class="lineno"> 2831</span>&#160;        }</div>
<div class="line"><a name="l02832"></a><span class="lineno"> 2832</span>&#160; </div>
<div class="line"><a name="l02833"></a><span class="lineno"> 2833</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02834"></a><span class="lineno"> 2834</span>&#160; </div>
<div class="line"><a name="l02835"></a><span class="lineno"> 2835</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1SPII.html#a1c7202c6054fef862bbed45957747cdfa36b3dd3b84fde3f8494a9b18af131856">Instruction::Store</a>: {</div>
<div class="line"><a name="l02836"></a><span class="lineno"> 2836</span>&#160;        <a class="code" href="classllvm_1_1StoreInst.html">StoreInst</a> *<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a> = cast&lt;StoreInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l02837"></a><span class="lineno"> 2837</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;isVolatile() || <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;getPointerOperand() != PI)</div>
<div class="line"><a name="l02838"></a><span class="lineno"> 2838</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02839"></a><span class="lineno"> 2839</span>&#160;        <a class="code" href="IVUsers_8cpp.html#a4e5b9edb51eec9dbca592075eb64dfcb">Users</a>.emplace_back(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l02840"></a><span class="lineno"> 2840</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02841"></a><span class="lineno"> 2841</span>&#160;      }</div>
<div class="line"><a name="l02842"></a><span class="lineno"> 2842</span>&#160;      }</div>
<div class="line"><a name="l02843"></a><span class="lineno"> 2843</span>&#160;      <a class="code" href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;missing a return?&quot;</span>);</div>
<div class="line"><a name="l02844"></a><span class="lineno"> 2844</span>&#160;    }</div>
<div class="line"><a name="l02845"></a><span class="lineno"> 2845</span>&#160;  } <span class="keywordflow">while</span> (!Worklist.empty());</div>
<div class="line"><a name="l02846"></a><span class="lineno"> 2846</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02847"></a><span class="lineno"> 2847</span>&#160;}</div>
<div class="line"><a name="l02848"></a><span class="lineno"> 2848</span>&#160; </div>
<div class="line"><a name="l02849"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombinerImpl.html#ae289e620828eabb1dfe34c9ad322a81d"> 2849</a></span>&#160;<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombinerImpl.html#ae289e620828eabb1dfe34c9ad322a81d">InstCombinerImpl::visitAllocSite</a>(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) {</div>
<div class="line"><a name="l02850"></a><span class="lineno"> 2850</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(isa&lt;AllocaInst&gt;(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) || <a class="code" href="namespacellvm.html#a2787d1134842ab0b9be8694d95ccbdd7">isRemovableAlloc</a>(&amp;cast&lt;CallBase&gt;(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>), &amp;TLI));</div>
<div class="line"><a name="l02851"></a><span class="lineno"> 2851</span>&#160; </div>
<div class="line"><a name="l02852"></a><span class="lineno"> 2852</span>&#160;  <span class="comment">// If we have a malloc call which is only used in any amount of comparisons to</span></div>
<div class="line"><a name="l02853"></a><span class="lineno"> 2853</span>&#160;  <span class="comment">// null and free calls, delete the calls and replace the comparisons with true</span></div>
<div class="line"><a name="l02854"></a><span class="lineno"> 2854</span>&#160;  <span class="comment">// or false as appropriate.</span></div>
<div class="line"><a name="l02855"></a><span class="lineno"> 2855</span>&#160; </div>
<div class="line"><a name="l02856"></a><span class="lineno"> 2856</span>&#160;  <span class="comment">// This is based on the principle that we can substitute our own allocation</span></div>
<div class="line"><a name="l02857"></a><span class="lineno"> 2857</span>&#160;  <span class="comment">// function (which will never return null) rather than knowledge of the</span></div>
<div class="line"><a name="l02858"></a><span class="lineno"> 2858</span>&#160;  <span class="comment">// specific function being called. In some sense this can change the permitted</span></div>
<div class="line"><a name="l02859"></a><span class="lineno"> 2859</span>&#160;  <span class="comment">// outputs of a program (when we convert a malloc to an alloca, the fact that</span></div>
<div class="line"><a name="l02860"></a><span class="lineno"> 2860</span>&#160;  <span class="comment">// the allocation is now on the stack is potentially visible, for example),</span></div>
<div class="line"><a name="l02861"></a><span class="lineno"> 2861</span>&#160;  <span class="comment">// but we believe in a permissible manner.</span></div>
<div class="line"><a name="l02862"></a><span class="lineno"> 2862</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;WeakTrackingVH, 64&gt;</a> <a class="code" href="IVUsers_8cpp.html#a4e5b9edb51eec9dbca592075eb64dfcb">Users</a>;</div>
<div class="line"><a name="l02863"></a><span class="lineno"> 2863</span>&#160; </div>
<div class="line"><a name="l02864"></a><span class="lineno"> 2864</span>&#160;  <span class="comment">// If we are removing an alloca with a dbg.declare, insert dbg.value calls</span></div>
<div class="line"><a name="l02865"></a><span class="lineno"> 2865</span>&#160;  <span class="comment">// before each store.</span></div>
<div class="line"><a name="l02866"></a><span class="lineno"> 2866</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;DbgVariableIntrinsic *, 8&gt;</a> DVIs;</div>
<div class="line"><a name="l02867"></a><span class="lineno"> 2867</span>&#160;  std::unique_ptr&lt;DIBuilder&gt; DIB;</div>
<div class="line"><a name="l02868"></a><span class="lineno"> 2868</span>&#160;  <span class="keywordflow">if</span> (isa&lt;AllocaInst&gt;(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>)) {</div>
<div class="line"><a name="l02869"></a><span class="lineno"> 2869</span>&#160;    <a class="code" href="namespacellvm.html#a683448397460b5b16e0d9016fd7a273a">findDbgUsers</a>(DVIs, &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l02870"></a><span class="lineno"> 2870</span>&#160;    DIB.reset(<span class="keyword">new</span> <a class="code" href="classllvm_1_1DIBuilder.html">DIBuilder</a>(*<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getModule(), <span class="comment">/*AllowUnresolved=*/</span><span class="keyword">false</span>));</div>
<div class="line"><a name="l02871"></a><span class="lineno"> 2871</span>&#160;  }</div>
<div class="line"><a name="l02872"></a><span class="lineno"> 2872</span>&#160; </div>
<div class="line"><a name="l02873"></a><span class="lineno"> 2873</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="InstructionCombining_8cpp.html#a5d94ee8aaee00c42c11954aaa6022894">isAllocSiteRemovable</a>(&amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="IVUsers_8cpp.html#a4e5b9edb51eec9dbca592075eb64dfcb">Users</a>, TLI)) {</div>
<div class="line"><a name="l02874"></a><span class="lineno"> 2874</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a> = <a class="code" href="IVUsers_8cpp.html#a4e5b9edb51eec9dbca592075eb64dfcb">Users</a>.size(); <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a>; ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l02875"></a><span class="lineno"> 2875</span>&#160;      <span class="comment">// Lowering all @llvm.objectsize calls first because they may</span></div>
<div class="line"><a name="l02876"></a><span class="lineno"> 2876</span>&#160;      <span class="comment">// use a bitcast/GEP of the alloca we are removing.</span></div>
<div class="line"><a name="l02877"></a><span class="lineno"> 2877</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="IVUsers_8cpp.html#a4e5b9edb51eec9dbca592075eb64dfcb">Users</a>[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>])</div>
<div class="line"><a name="l02878"></a><span class="lineno"> 2878</span>&#160;       <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02879"></a><span class="lineno"> 2879</span>&#160; </div>
<div class="line"><a name="l02880"></a><span class="lineno"> 2880</span>&#160;      <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = cast&lt;Instruction&gt;(&amp;*<a class="code" href="IVUsers_8cpp.html#a4e5b9edb51eec9dbca592075eb64dfcb">Users</a>[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div>
<div class="line"><a name="l02881"></a><span class="lineno"> 2881</span>&#160; </div>
<div class="line"><a name="l02882"></a><span class="lineno"> 2882</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1IntrinsicInst.html">IntrinsicInst</a> *II = dyn_cast&lt;IntrinsicInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l02883"></a><span class="lineno"> 2883</span>&#160;        <span class="keywordflow">if</span> (II-&gt;<a class="code" href="classllvm_1_1IntrinsicInst.html#a7ff64b3625b6f9020556ed05a5f72af4">getIntrinsicID</a>() == Intrinsic::objectsize) {</div>
<div class="line"><a name="l02884"></a><span class="lineno"> 2884</span>&#160;          <a class="code" href="classllvm_1_1Value.html">Value</a> *Result =</div>
<div class="line"><a name="l02885"></a><span class="lineno"> 2885</span>&#160;              <a class="code" href="namespacellvm.html#a2f635b6d5c5f74d0c2e359897a5e7498">lowerObjectSizeCall</a>(II, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, &amp;TLI, AA, <span class="comment">/*MustSucceed=*/</span><span class="keyword">true</span>);</div>
<div class="line"><a name="l02886"></a><span class="lineno"> 2886</span>&#160;          replaceInstUsesWith(*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, Result);</div>
<div class="line"><a name="l02887"></a><span class="lineno"> 2887</span>&#160;          eraseInstFromFunction(*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l02888"></a><span class="lineno"> 2888</span>&#160;          <a class="code" href="IVUsers_8cpp.html#a4e5b9edb51eec9dbca592075eb64dfcb">Users</a>[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <span class="keyword">nullptr</span>; <span class="comment">// Skip examining in the next loop.</span></div>
<div class="line"><a name="l02889"></a><span class="lineno"> 2889</span>&#160;        }</div>
<div class="line"><a name="l02890"></a><span class="lineno"> 2890</span>&#160;      }</div>
<div class="line"><a name="l02891"></a><span class="lineno"> 2891</span>&#160;    }</div>
<div class="line"><a name="l02892"></a><span class="lineno"> 2892</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a> = <a class="code" href="IVUsers_8cpp.html#a4e5b9edb51eec9dbca592075eb64dfcb">Users</a>.size(); <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a>; ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l02893"></a><span class="lineno"> 2893</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="IVUsers_8cpp.html#a4e5b9edb51eec9dbca592075eb64dfcb">Users</a>[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>])</div>
<div class="line"><a name="l02894"></a><span class="lineno"> 2894</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02895"></a><span class="lineno"> 2895</span>&#160; </div>
<div class="line"><a name="l02896"></a><span class="lineno"> 2896</span>&#160;      <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = cast&lt;Instruction&gt;(&amp;*<a class="code" href="IVUsers_8cpp.html#a4e5b9edb51eec9dbca592075eb64dfcb">Users</a>[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div>
<div class="line"><a name="l02897"></a><span class="lineno"> 2897</span>&#160; </div>
<div class="line"><a name="l02898"></a><span class="lineno"> 2898</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = dyn_cast&lt;ICmpInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l02899"></a><span class="lineno"> 2899</span>&#160;        replaceInstUsesWith(*<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>,</div>
<div class="line"><a name="l02900"></a><span class="lineno"> 2900</span>&#160;                            <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(<a class="code" href="classllvm_1_1Type.html#aa75984a442f2379de0c66018201fa628">Type::getInt1Ty</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;getContext()),</div>
<div class="line"><a name="l02901"></a><span class="lineno"> 2901</span>&#160;                                             <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;isFalseWhenEqual()));</div>
<div class="line"><a name="l02902"></a><span class="lineno"> 2902</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">auto</span> *<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a> = dyn_cast&lt;StoreInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l02903"></a><span class="lineno"> 2903</span>&#160;        <span class="keywordflow">for</span> (<span class="keyword">auto</span> *DVI : DVIs)</div>
<div class="line"><a name="l02904"></a><span class="lineno"> 2904</span>&#160;          <span class="keywordflow">if</span> (DVI-&gt;isAddressOfVariable())</div>
<div class="line"><a name="l02905"></a><span class="lineno"> 2905</span>&#160;            <a class="code" href="namespacellvm.html#a8946e172b10c0ef5eaebb28ebb7662ad">ConvertDebugDeclareToDebugValue</a>(DVI, <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>, *DIB);</div>
<div class="line"><a name="l02906"></a><span class="lineno"> 2906</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02907"></a><span class="lineno"> 2907</span>&#160;        <span class="comment">// Casts, GEP, or anything else: we&#39;re about to delete this instruction,</span></div>
<div class="line"><a name="l02908"></a><span class="lineno"> 2908</span>&#160;        <span class="comment">// so it can not have any valid uses.</span></div>
<div class="line"><a name="l02909"></a><span class="lineno"> 2909</span>&#160;        replaceInstUsesWith(*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1PoisonValue.html#a1bf08613fb664a2e377a9a72c59a6b66">PoisonValue::get</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getType()));</div>
<div class="line"><a name="l02910"></a><span class="lineno"> 2910</span>&#160;      }</div>
<div class="line"><a name="l02911"></a><span class="lineno"> 2911</span>&#160;      eraseInstFromFunction(*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l02912"></a><span class="lineno"> 2912</span>&#160;    }</div>
<div class="line"><a name="l02913"></a><span class="lineno"> 2913</span>&#160; </div>
<div class="line"><a name="l02914"></a><span class="lineno"> 2914</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1InvokeInst.html">InvokeInst</a> *II = dyn_cast&lt;InvokeInst&gt;(&amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>)) {</div>
<div class="line"><a name="l02915"></a><span class="lineno"> 2915</span>&#160;      <span class="comment">// Replace invoke with a NOP intrinsic to maintain the original CFG</span></div>
<div class="line"><a name="l02916"></a><span class="lineno"> 2916</span>&#160;      <a class="code" href="classllvm_1_1Module.html">Module</a> *<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a> = II-&gt;<a class="code" href="classllvm_1_1Instruction.html#a4ba3a5be6c0e9b9e8a525de055836733">getModule</a>();</div>
<div class="line"><a name="l02917"></a><span class="lineno"> 2917</span>&#160;      <a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> = <a class="code" href="namespacellvm_1_1Intrinsic.html#aefa39f6b622360ce4e947feb9f671b73">Intrinsic::getDeclaration</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>, Intrinsic::donothing);</div>
<div class="line"><a name="l02918"></a><span class="lineno"> 2918</span>&#160;      <a class="code" href="classllvm_1_1InvokeInst.html#ab659895cedd34fb668aab552ee3b9068">InvokeInst::Create</a>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, II-&gt;getNormalDest(), II-&gt;getUnwindDest(),</div>
<div class="line"><a name="l02919"></a><span class="lineno"> 2919</span>&#160;                         std::nullopt, <span class="stringliteral">&quot;&quot;</span>, II-&gt;<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>());</div>
<div class="line"><a name="l02920"></a><span class="lineno"> 2920</span>&#160;    }</div>
<div class="line"><a name="l02921"></a><span class="lineno"> 2921</span>&#160; </div>
<div class="line"><a name="l02922"></a><span class="lineno"> 2922</span>&#160;    <span class="comment">// Remove debug intrinsics which describe the value contained within the</span></div>
<div class="line"><a name="l02923"></a><span class="lineno"> 2923</span>&#160;    <span class="comment">// alloca. In addition to removing dbg.{declare,addr} which simply point to</span></div>
<div class="line"><a name="l02924"></a><span class="lineno"> 2924</span>&#160;    <span class="comment">// the alloca, remove dbg.value(&lt;alloca&gt;, ..., DW_OP_deref)&#39;s as well, e.g.:</span></div>
<div class="line"><a name="l02925"></a><span class="lineno"> 2925</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l02926"></a><span class="lineno"> 2926</span>&#160;    <span class="comment">// ```</span></div>
<div class="line"><a name="l02927"></a><span class="lineno"> 2927</span>&#160;    <span class="comment">//   define void @foo(i32 %0) {</span></div>
<div class="line"><a name="l02928"></a><span class="lineno"> 2928</span>&#160;    <span class="comment">//     %a = alloca i32                              ; Deleted.</span></div>
<div class="line"><a name="l02929"></a><span class="lineno"> 2929</span>&#160;    <span class="comment">//     store i32 %0, i32* %a</span></div>
<div class="line"><a name="l02930"></a><span class="lineno"> 2930</span>&#160;    <span class="comment">//     dbg.value(i32 %0, &quot;arg0&quot;)                    ; Not deleted.</span></div>
<div class="line"><a name="l02931"></a><span class="lineno"> 2931</span>&#160;    <span class="comment">//     dbg.value(i32* %a, &quot;arg0&quot;, DW_OP_deref)      ; Deleted.</span></div>
<div class="line"><a name="l02932"></a><span class="lineno"> 2932</span>&#160;    <span class="comment">//     call void @trivially_inlinable_no_op(i32* %a)</span></div>
<div class="line"><a name="l02933"></a><span class="lineno"> 2933</span>&#160;    <span class="comment">//     ret void</span></div>
<div class="line"><a name="l02934"></a><span class="lineno"> 2934</span>&#160;    <span class="comment">//  }</span></div>
<div class="line"><a name="l02935"></a><span class="lineno"> 2935</span>&#160;    <span class="comment">// ```</span></div>
<div class="line"><a name="l02936"></a><span class="lineno"> 2936</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l02937"></a><span class="lineno"> 2937</span>&#160;    <span class="comment">// This may not be required if we stop describing the contents of allocas</span></div>
<div class="line"><a name="l02938"></a><span class="lineno"> 2938</span>&#160;    <span class="comment">// using dbg.value(&lt;alloca&gt;, ..., DW_OP_deref), but we currently do this in</span></div>
<div class="line"><a name="l02939"></a><span class="lineno"> 2939</span>&#160;    <span class="comment">// the LowerDbgDeclare utility.</span></div>
<div class="line"><a name="l02940"></a><span class="lineno"> 2940</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l02941"></a><span class="lineno"> 2941</span>&#160;    <span class="comment">// If there is a dead store to `%a` in @trivially_inlinable_no_op, the</span></div>
<div class="line"><a name="l02942"></a><span class="lineno"> 2942</span>&#160;    <span class="comment">// &quot;arg0&quot; dbg.value may be stale after the call. However, failing to remove</span></div>
<div class="line"><a name="l02943"></a><span class="lineno"> 2943</span>&#160;    <span class="comment">// the DW_OP_deref dbg.value causes large gaps in location coverage.</span></div>
<div class="line"><a name="l02944"></a><span class="lineno"> 2944</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> *DVI : DVIs)</div>
<div class="line"><a name="l02945"></a><span class="lineno"> 2945</span>&#160;      <span class="keywordflow">if</span> (DVI-&gt;isAddressOfVariable() || DVI-&gt;getExpression()-&gt;startsWithDeref())</div>
<div class="line"><a name="l02946"></a><span class="lineno"> 2946</span>&#160;        DVI-&gt;eraseFromParent();</div>
<div class="line"><a name="l02947"></a><span class="lineno"> 2947</span>&#160; </div>
<div class="line"><a name="l02948"></a><span class="lineno"> 2948</span>&#160;    <span class="keywordflow">return</span> eraseInstFromFunction(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l02949"></a><span class="lineno"> 2949</span>&#160;  }</div>
<div class="line"><a name="l02950"></a><span class="lineno"> 2950</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02951"></a><span class="lineno"> 2951</span>&#160;}</div>
<div class="line"><a name="l02952"></a><span class="lineno"> 2952</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02953"></a><span class="lineno"> 2953</span>&#160;<span class="comment">/// Move the call to free before a NULL test.</span></div>
<div class="line"><a name="l02954"></a><span class="lineno"> 2954</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l02955"></a><span class="lineno"> 2955</span>&#160;<span class="comment">/// Check if this free is accessed after its argument has been test</span></div>
<div class="line"><a name="l02956"></a><span class="lineno"> 2956</span>&#160;<span class="comment">/// against NULL (property 0).</span></div>
<div class="line"><a name="l02957"></a><span class="lineno"> 2957</span>&#160;<span class="comment">/// If yes, it is legal to move this call in its predecessor block.</span></div>
<div class="line"><a name="l02958"></a><span class="lineno"> 2958</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l02959"></a><span class="lineno"> 2959</span>&#160;<span class="comment">/// The move is performed only if the block containing the call to free</span></div>
<div class="line"><a name="l02960"></a><span class="lineno"> 2960</span>&#160;<span class="comment">/// will be removed, i.e.:</span></div>
<div class="line"><a name="l02961"></a><span class="lineno"> 2961</span>&#160;<span class="comment">/// 1. it has only one predecessor P, and P has two successors</span></div>
<div class="line"><a name="l02962"></a><span class="lineno"> 2962</span>&#160;<span class="comment">/// 2. it contains the call, noops, and an unconditional branch</span></div>
<div class="line"><a name="l02963"></a><span class="lineno"> 2963</span>&#160;<span class="comment">/// 3. its successor is the same as its predecessor&#39;s successor</span></div>
<div class="line"><a name="l02964"></a><span class="lineno"> 2964</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l02965"></a><span class="lineno"> 2965</span>&#160;<span class="comment">/// The profitability is out-of concern here and this function should</span></div>
<div class="line"><a name="l02966"></a><span class="lineno"> 2966</span>&#160;<span class="comment">/// be called only if the caller knows this transformation would be</span></div>
<div class="line"><a name="l02967"></a><span class="lineno"> 2967</span>&#160;<span class="comment">/// profitable (e.g., for code size).</span></div>
<div class="line"><a name="l02968"></a><span class="lineno"><a class="line" href="InstructionCombining_8cpp.html#acdf91a4a325f4977bb6f85de560fe9f7"> 2968</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="InstructionCombining_8cpp.html#acdf91a4a325f4977bb6f85de560fe9f7">tryToMoveFreeBeforeNullTest</a>(<a class="code" href="classllvm_1_1CallInst.html">CallInst</a> &amp;FI,</div>
<div class="line"><a name="l02969"></a><span class="lineno"> 2969</span>&#160;                                                <span class="keyword">const</span> <a class="code" href="classllvm_1_1DataLayout.html">DataLayout</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>) {</div>
<div class="line"><a name="l02970"></a><span class="lineno"> 2970</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a> = FI.<a class="code" href="classllvm_1_1CallBase.html#ab2caa29167597390ab2fc3cf30d70389">getArgOperand</a>(0);</div>
<div class="line"><a name="l02971"></a><span class="lineno"> 2971</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *FreeInstrBB = FI.<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>();</div>
<div class="line"><a name="l02972"></a><span class="lineno"> 2972</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *PredBB = FreeInstrBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a59fb91d1691350f7d1b8e8a114e3f2a4">getSinglePredecessor</a>();</div>
<div class="line"><a name="l02973"></a><span class="lineno"> 2973</span>&#160; </div>
<div class="line"><a name="l02974"></a><span class="lineno"> 2974</span>&#160;  <span class="comment">// Validate part of constraint #1: Only one predecessor</span></div>
<div class="line"><a name="l02975"></a><span class="lineno"> 2975</span>&#160;  <span class="comment">// FIXME: We can extend the number of predecessor, but in that case, we</span></div>
<div class="line"><a name="l02976"></a><span class="lineno"> 2976</span>&#160;  <span class="comment">//        would duplicate the call to free in each predecessor and it may</span></div>
<div class="line"><a name="l02977"></a><span class="lineno"> 2977</span>&#160;  <span class="comment">//        not be profitable even for code size.</span></div>
<div class="line"><a name="l02978"></a><span class="lineno"> 2978</span>&#160;  <span class="keywordflow">if</span> (!PredBB)</div>
<div class="line"><a name="l02979"></a><span class="lineno"> 2979</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02980"></a><span class="lineno"> 2980</span>&#160; </div>
<div class="line"><a name="l02981"></a><span class="lineno"> 2981</span>&#160;  <span class="comment">// Validate constraint #2: Does this block contains only the call to</span></div>
<div class="line"><a name="l02982"></a><span class="lineno"> 2982</span>&#160;  <span class="comment">//                         free, noops, and an unconditional branch?</span></div>
<div class="line"><a name="l02983"></a><span class="lineno"> 2983</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *SuccBB;</div>
<div class="line"><a name="l02984"></a><span class="lineno"> 2984</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *FreeInstrBBTerminator = FreeInstrBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>();</div>
<div class="line"><a name="l02985"></a><span class="lineno"> 2985</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(FreeInstrBBTerminator, <a class="code" href="namespacellvm_1_1PatternMatch.html#a1de3bd08ca83d6b976d4c8deacbf5e71">m_UnconditionalBr</a>(SuccBB)))</div>
<div class="line"><a name="l02986"></a><span class="lineno"> 2986</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02987"></a><span class="lineno"> 2987</span>&#160; </div>
<div class="line"><a name="l02988"></a><span class="lineno"> 2988</span>&#160;  <span class="comment">// If there are only 2 instructions in the block, at this point,</span></div>
<div class="line"><a name="l02989"></a><span class="lineno"> 2989</span>&#160;  <span class="comment">// this is the call to free and unconditional.</span></div>
<div class="line"><a name="l02990"></a><span class="lineno"> 2990</span>&#160;  <span class="comment">// If there are more than 2 instructions, check that they are noops</span></div>
<div class="line"><a name="l02991"></a><span class="lineno"> 2991</span>&#160;  <span class="comment">// i.e., they won&#39;t hurt the performance of the generated code.</span></div>
<div class="line"><a name="l02992"></a><span class="lineno"> 2992</span>&#160;  <span class="keywordflow">if</span> (FreeInstrBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#ab9f68be0e2bcdf14f503f45edea63023">size</a>() != 2) {</div>
<div class="line"><a name="l02993"></a><span class="lineno"> 2993</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;Inst : FreeInstrBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a2069641f358ef416658a2f321ca19d74">instructionsWithoutDebug</a>()) {</div>
<div class="line"><a name="l02994"></a><span class="lineno"> 2994</span>&#160;      <span class="keywordflow">if</span> (&amp;Inst == &amp;FI || &amp;Inst == FreeInstrBBTerminator)</div>
<div class="line"><a name="l02995"></a><span class="lineno"> 2995</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02996"></a><span class="lineno"> 2996</span>&#160;      <span class="keyword">auto</span> *Cast = dyn_cast&lt;CastInst&gt;(&amp;Inst);</div>
<div class="line"><a name="l02997"></a><span class="lineno"> 2997</span>&#160;      <span class="keywordflow">if</span> (!Cast || !Cast-&gt;isNoopCast(<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>))</div>
<div class="line"><a name="l02998"></a><span class="lineno"> 2998</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02999"></a><span class="lineno"> 2999</span>&#160;    }</div>
<div class="line"><a name="l03000"></a><span class="lineno"> 3000</span>&#160;  }</div>
<div class="line"><a name="l03001"></a><span class="lineno"> 3001</span>&#160;  <span class="comment">// Validate the rest of constraint #1 by matching on the pred branch.</span></div>
<div class="line"><a name="l03002"></a><span class="lineno"> 3002</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *TI = PredBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>();</div>
<div class="line"><a name="l03003"></a><span class="lineno"> 3003</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *TrueBB, *FalseBB;</div>
<div class="line"><a name="l03004"></a><span class="lineno"> 3004</span>&#160;  <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">ICmpInst::Predicate</a> Pred;</div>
<div class="line"><a name="l03005"></a><span class="lineno"> 3005</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(TI, <a class="code" href="namespacellvm_1_1PatternMatch.html#a4fd27a44c5fd9958fdd9150622129cd3">m_Br</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a3fe9b3ddb71b9fb53d9fc74b3a0710bf">m_ICmp</a>(Pred,</div>
<div class="line"><a name="l03006"></a><span class="lineno"> 3006</span>&#160;                             <a class="code" href="namespacellvm_1_1PatternMatch.html#af4feec45578e32fe65d8efc59112bc8e">m_CombineOr</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>),</div>
<div class="line"><a name="l03007"></a><span class="lineno"> 3007</span>&#160;                                         <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>-&gt;stripPointerCasts())),</div>
<div class="line"><a name="l03008"></a><span class="lineno"> 3008</span>&#160;                             <a class="code" href="namespacellvm_1_1PatternMatch.html#ae77be336e228cf9aa00709a8606dfb98">m_Zero</a>()),</div>
<div class="line"><a name="l03009"></a><span class="lineno"> 3009</span>&#160;                      TrueBB, FalseBB)))</div>
<div class="line"><a name="l03010"></a><span class="lineno"> 3010</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l03011"></a><span class="lineno"> 3011</span>&#160;  <span class="keywordflow">if</span> (Pred != <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a> &amp;&amp; Pred != <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a>)</div>
<div class="line"><a name="l03012"></a><span class="lineno"> 3012</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l03013"></a><span class="lineno"> 3013</span>&#160; </div>
<div class="line"><a name="l03014"></a><span class="lineno"> 3014</span>&#160;  <span class="comment">// Validate constraint #3: Ensure the null case just falls through.</span></div>
<div class="line"><a name="l03015"></a><span class="lineno"> 3015</span>&#160;  <span class="keywordflow">if</span> (SuccBB != (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a> ? TrueBB : FalseBB))</div>
<div class="line"><a name="l03016"></a><span class="lineno"> 3016</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l03017"></a><span class="lineno"> 3017</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(FreeInstrBB == (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a> ? FalseBB : TrueBB) &amp;&amp;</div>
<div class="line"><a name="l03018"></a><span class="lineno"> 3018</span>&#160;         <span class="stringliteral">&quot;Broken CFG: missing edge from predecessor to successor&quot;</span>);</div>
<div class="line"><a name="l03019"></a><span class="lineno"> 3019</span>&#160; </div>
<div class="line"><a name="l03020"></a><span class="lineno"> 3020</span>&#160;  <span class="comment">// At this point, we know that everything in FreeInstrBB can be moved</span></div>
<div class="line"><a name="l03021"></a><span class="lineno"> 3021</span>&#160;  <span class="comment">// before TI.</span></div>
<div class="line"><a name="l03022"></a><span class="lineno"> 3022</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;Instr : <a class="code" href="namespacellvm.html#a8154638df88e4eaa568b67b23d463dac">llvm::make_early_inc_range</a>(*FreeInstrBB)) {</div>
<div class="line"><a name="l03023"></a><span class="lineno"> 3023</span>&#160;    <span class="keywordflow">if</span> (&amp;Instr == FreeInstrBBTerminator)</div>
<div class="line"><a name="l03024"></a><span class="lineno"> 3024</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03025"></a><span class="lineno"> 3025</span>&#160;    Instr.moveBefore(TI);</div>
<div class="line"><a name="l03026"></a><span class="lineno"> 3026</span>&#160;  }</div>
<div class="line"><a name="l03027"></a><span class="lineno"> 3027</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(FreeInstrBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#ab9f68be0e2bcdf14f503f45edea63023">size</a>() == 1 &amp;&amp;</div>
<div class="line"><a name="l03028"></a><span class="lineno"> 3028</span>&#160;         <span class="stringliteral">&quot;Only the branch instruction should remain&quot;</span>);</div>
<div class="line"><a name="l03029"></a><span class="lineno"> 3029</span>&#160; </div>
<div class="line"><a name="l03030"></a><span class="lineno"> 3030</span>&#160;  <span class="comment">// Now that we&#39;ve moved the call to free before the NULL check, we have to</span></div>
<div class="line"><a name="l03031"></a><span class="lineno"> 3031</span>&#160;  <span class="comment">// remove any attributes on its parameter that imply it&#39;s non-null, because</span></div>
<div class="line"><a name="l03032"></a><span class="lineno"> 3032</span>&#160;  <span class="comment">// those attributes might have only been valid because of the NULL check, and</span></div>
<div class="line"><a name="l03033"></a><span class="lineno"> 3033</span>&#160;  <span class="comment">// we can get miscompiles if we keep them. This is conservative if non-null is</span></div>
<div class="line"><a name="l03034"></a><span class="lineno"> 3034</span>&#160;  <span class="comment">// also implied by something other than the NULL check, but it&#39;s guaranteed to</span></div>
<div class="line"><a name="l03035"></a><span class="lineno"> 3035</span>&#160;  <span class="comment">// be correct, and the conservativeness won&#39;t matter in practice, since the</span></div>
<div class="line"><a name="l03036"></a><span class="lineno"> 3036</span>&#160;  <span class="comment">// attributes are irrelevant for the call to free itself and the pointer</span></div>
<div class="line"><a name="l03037"></a><span class="lineno"> 3037</span>&#160;  <span class="comment">// shouldn&#39;t be used after the call.</span></div>
<div class="line"><a name="l03038"></a><span class="lineno"> 3038</span>&#160;  <a class="code" href="classllvm_1_1AttributeList.html">AttributeList</a> <a class="code" href="README__ALTIVEC_8txt.html#a9d3ba236d13373cde794da2023acc7a0">Attrs</a> = FI.<a class="code" href="classllvm_1_1CallBase.html#ae0c55761fce39dd71617690b04385193">getAttributes</a>();</div>
<div class="line"><a name="l03039"></a><span class="lineno"> 3039</span>&#160;  <a class="code" href="README__ALTIVEC_8txt.html#a9d3ba236d13373cde794da2023acc7a0">Attrs</a> = <a class="code" href="README__ALTIVEC_8txt.html#a9d3ba236d13373cde794da2023acc7a0">Attrs</a>.removeParamAttribute(FI.<a class="code" href="classllvm_1_1Value.html#ab3fc0225d8aaf8434026c3573f961f2c">getContext</a>(), 0, Attribute::NonNull);</div>
<div class="line"><a name="l03040"></a><span class="lineno"> 3040</span>&#160;  <a class="code" href="classllvm_1_1Attribute.html">Attribute</a> Dereferenceable = <a class="code" href="README__ALTIVEC_8txt.html#a9d3ba236d13373cde794da2023acc7a0">Attrs</a>.getParamAttr(0, Attribute::Dereferenceable);</div>
<div class="line"><a name="l03041"></a><span class="lineno"> 3041</span>&#160;  <span class="keywordflow">if</span> (Dereferenceable.<a class="code" href="classllvm_1_1Attribute.html#adf4d22686e85732b2fef71e3c45531c6">isValid</a>()) {</div>
<div class="line"><a name="l03042"></a><span class="lineno"> 3042</span>&#160;    <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> Bytes = Dereferenceable.<a class="code" href="classllvm_1_1Attribute.html#a7a7458f7bdc291db1a43ad26f149cfed">getDereferenceableBytes</a>();</div>
<div class="line"><a name="l03043"></a><span class="lineno"> 3043</span>&#160;    <a class="code" href="README__ALTIVEC_8txt.html#a9d3ba236d13373cde794da2023acc7a0">Attrs</a> = <a class="code" href="README__ALTIVEC_8txt.html#a9d3ba236d13373cde794da2023acc7a0">Attrs</a>.removeParamAttribute(FI.<a class="code" href="classllvm_1_1Value.html#ab3fc0225d8aaf8434026c3573f961f2c">getContext</a>(), 0,</div>
<div class="line"><a name="l03044"></a><span class="lineno"> 3044</span>&#160;                                       Attribute::Dereferenceable);</div>
<div class="line"><a name="l03045"></a><span class="lineno"> 3045</span>&#160;    <a class="code" href="README__ALTIVEC_8txt.html#a9d3ba236d13373cde794da2023acc7a0">Attrs</a> = <a class="code" href="README__ALTIVEC_8txt.html#a9d3ba236d13373cde794da2023acc7a0">Attrs</a>.<a class="code" href="classllvm_1_1Function.html#a8f040402288effcbdffb4f7c9748f067">addDereferenceableOrNullParamAttr</a>(FI.<a class="code" href="classllvm_1_1Value.html#ab3fc0225d8aaf8434026c3573f961f2c">getContext</a>(), 0, Bytes);</div>
<div class="line"><a name="l03046"></a><span class="lineno"> 3046</span>&#160;  }</div>
<div class="line"><a name="l03047"></a><span class="lineno"> 3047</span>&#160;  FI.<a class="code" href="classllvm_1_1CallBase.html#a9da3b29e8e71b9be4645874e1721207a">setAttributes</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9d3ba236d13373cde794da2023acc7a0">Attrs</a>);</div>
<div class="line"><a name="l03048"></a><span class="lineno"> 3048</span>&#160; </div>
<div class="line"><a name="l03049"></a><span class="lineno"> 3049</span>&#160;  <span class="keywordflow">return</span> &amp;FI;</div>
<div class="line"><a name="l03050"></a><span class="lineno"> 3050</span>&#160;}</div>
<div class="line"><a name="l03051"></a><span class="lineno"> 3051</span>&#160; </div>
<div class="line"><a name="l03052"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombinerImpl.html#a629e02c312173d0da1b62288bc8fbd48"> 3052</a></span>&#160;<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombinerImpl.html#a629e02c312173d0da1b62288bc8fbd48">InstCombinerImpl::visitFree</a>(<a class="code" href="classllvm_1_1CallInst.html">CallInst</a> &amp;FI, <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>) {</div>
<div class="line"><a name="l03053"></a><span class="lineno"> 3053</span>&#160;  <span class="comment">// free undef -&gt; unreachable.</span></div>
<div class="line"><a name="l03054"></a><span class="lineno"> 3054</span>&#160;  <span class="keywordflow">if</span> (isa&lt;UndefValue&gt;(<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>)) {</div>
<div class="line"><a name="l03055"></a><span class="lineno"> 3055</span>&#160;    <span class="comment">// Leave a marker since we can&#39;t modify the CFG here.</span></div>
<div class="line"><a name="l03056"></a><span class="lineno"> 3056</span>&#160;    CreateNonTerminatorUnreachable(&amp;FI);</div>
<div class="line"><a name="l03057"></a><span class="lineno"> 3057</span>&#160;    <span class="keywordflow">return</span> eraseInstFromFunction(FI);</div>
<div class="line"><a name="l03058"></a><span class="lineno"> 3058</span>&#160;  }</div>
<div class="line"><a name="l03059"></a><span class="lineno"> 3059</span>&#160; </div>
<div class="line"><a name="l03060"></a><span class="lineno"> 3060</span>&#160;  <span class="comment">// If we have &#39;free null&#39; delete the instruction.  This can happen in stl code</span></div>
<div class="line"><a name="l03061"></a><span class="lineno"> 3061</span>&#160;  <span class="comment">// when lots of inlining happens.</span></div>
<div class="line"><a name="l03062"></a><span class="lineno"> 3062</span>&#160;  <span class="keywordflow">if</span> (isa&lt;ConstantPointerNull&gt;(<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>))</div>
<div class="line"><a name="l03063"></a><span class="lineno"> 3063</span>&#160;    <span class="keywordflow">return</span> eraseInstFromFunction(FI);</div>
<div class="line"><a name="l03064"></a><span class="lineno"> 3064</span>&#160; </div>
<div class="line"><a name="l03065"></a><span class="lineno"> 3065</span>&#160;  <span class="comment">// If we had free(realloc(...)) with no intervening uses, then eliminate the</span></div>
<div class="line"><a name="l03066"></a><span class="lineno"> 3066</span>&#160;  <span class="comment">// realloc() entirely.</span></div>
<div class="line"><a name="l03067"></a><span class="lineno"> 3067</span>&#160;  <a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *CI = dyn_cast&lt;CallInst&gt;(<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>);</div>
<div class="line"><a name="l03068"></a><span class="lineno"> 3068</span>&#160;  <span class="keywordflow">if</span> (CI &amp;&amp; CI-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>())</div>
<div class="line"><a name="l03069"></a><span class="lineno"> 3069</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *ReallocatedOp = <a class="code" href="namespacellvm.html#a4ff10451ba01dc08fc0d38983c6743b7">getReallocatedOperand</a>(CI))</div>
<div class="line"><a name="l03070"></a><span class="lineno"> 3070</span>&#160;      <span class="keywordflow">return</span> eraseInstFromFunction(*replaceInstUsesWith(*CI, ReallocatedOp));</div>
<div class="line"><a name="l03071"></a><span class="lineno"> 3071</span>&#160; </div>
<div class="line"><a name="l03072"></a><span class="lineno"> 3072</span>&#160;  <span class="comment">// If we optimize for code size, try to move the call to free before the null</span></div>
<div class="line"><a name="l03073"></a><span class="lineno"> 3073</span>&#160;  <span class="comment">// test so that simplify cfg can remove the empty block and dead code</span></div>
<div class="line"><a name="l03074"></a><span class="lineno"> 3074</span>&#160;  <span class="comment">// elimination the branch. I.e., helps to turn something like:</span></div>
<div class="line"><a name="l03075"></a><span class="lineno"> 3075</span>&#160;  <span class="comment">// if (foo) free(foo);</span></div>
<div class="line"><a name="l03076"></a><span class="lineno"> 3076</span>&#160;  <span class="comment">// into</span></div>
<div class="line"><a name="l03077"></a><span class="lineno"> 3077</span>&#160;  <span class="comment">// free(foo);</span></div>
<div class="line"><a name="l03078"></a><span class="lineno"> 3078</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l03079"></a><span class="lineno"> 3079</span>&#160;  <span class="comment">// Note that we can only do this for &#39;free&#39; and not for any flavor of</span></div>
<div class="line"><a name="l03080"></a><span class="lineno"> 3080</span>&#160;  <span class="comment">// &#39;operator delete&#39;; there is no &#39;operator delete&#39; symbol for which we are</span></div>
<div class="line"><a name="l03081"></a><span class="lineno"> 3081</span>&#160;  <span class="comment">// permitted to invent a call, even if we&#39;re passing in a null pointer.</span></div>
<div class="line"><a name="l03082"></a><span class="lineno"> 3082</span>&#160;  <span class="keywordflow">if</span> (MinimizeSize) {</div>
<div class="line"><a name="l03083"></a><span class="lineno"> 3083</span>&#160;    <a class="code" href="namespacellvm.html#a26a5e408fc09c5664d2bbb2d7fae154e">LibFunc</a> Func;</div>
<div class="line"><a name="l03084"></a><span class="lineno"> 3084</span>&#160;    <span class="keywordflow">if</span> (TLI.getLibFunc(FI, Func) &amp;&amp; TLI.has(Func) &amp;&amp; Func == LibFunc_free)</div>
<div class="line"><a name="l03085"></a><span class="lineno"> 3085</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = <a class="code" href="InstructionCombining_8cpp.html#acdf91a4a325f4977bb6f85de560fe9f7">tryToMoveFreeBeforeNullTest</a>(FI, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>))</div>
<div class="line"><a name="l03086"></a><span class="lineno"> 3086</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l03087"></a><span class="lineno"> 3087</span>&#160;  }</div>
<div class="line"><a name="l03088"></a><span class="lineno"> 3088</span>&#160; </div>
<div class="line"><a name="l03089"></a><span class="lineno"> 3089</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l03090"></a><span class="lineno"> 3090</span>&#160;}</div>
<div class="line"><a name="l03091"></a><span class="lineno"> 3091</span>&#160; </div>
<div class="line"><a name="l03092"></a><span class="lineno"><a class="line" href="InstructionCombining_8cpp.html#a42ac274c4dac68dda60e1d52a572b734"> 3092</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="InstructionCombining_8cpp.html#a42ac274c4dac68dda60e1d52a572b734">isMustTailCall</a>(<a class="code" href="classllvm_1_1Value.html">Value</a> *V) {</div>
<div class="line"><a name="l03093"></a><span class="lineno"> 3093</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *CI = dyn_cast&lt;CallInst&gt;(V))</div>
<div class="line"><a name="l03094"></a><span class="lineno"> 3094</span>&#160;    <span class="keywordflow">return</span> CI-&gt;isMustTailCall();</div>
<div class="line"><a name="l03095"></a><span class="lineno"> 3095</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l03096"></a><span class="lineno"> 3096</span>&#160;}</div>
<div class="line"><a name="l03097"></a><span class="lineno"> 3097</span>&#160; </div>
<div class="line"><a name="l03098"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombinerImpl.html#a8b0688ee292d40a24ba7117b39d426bd"> 3098</a></span>&#160;<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombinerImpl.html#a8b0688ee292d40a24ba7117b39d426bd">InstCombinerImpl::visitReturnInst</a>(<a class="code" href="classllvm_1_1ReturnInst.html">ReturnInst</a> &amp;RI) {</div>
<div class="line"><a name="l03099"></a><span class="lineno"> 3099</span>&#160;  <span class="keywordflow">if</span> (RI.<a class="code" href="classllvm_1_1User.html#addec638786f763d967811b45cb662f1f">getNumOperands</a>() == 0) <span class="comment">// ret void</span></div>
<div class="line"><a name="l03100"></a><span class="lineno"> 3100</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l03101"></a><span class="lineno"> 3101</span>&#160; </div>
<div class="line"><a name="l03102"></a><span class="lineno"> 3102</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *ResultOp = RI.<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0);</div>
<div class="line"><a name="l03103"></a><span class="lineno"> 3103</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *VTy = ResultOp-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>();</div>
<div class="line"><a name="l03104"></a><span class="lineno"> 3104</span>&#160;  <span class="keywordflow">if</span> (!VTy-&gt;<a class="code" href="classllvm_1_1Type.html#ac6d28a9b11139182134a9618028a0d07">isIntegerTy</a>() || isa&lt;Constant&gt;(ResultOp))</div>
<div class="line"><a name="l03105"></a><span class="lineno"> 3105</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l03106"></a><span class="lineno"> 3106</span>&#160; </div>
<div class="line"><a name="l03107"></a><span class="lineno"> 3107</span>&#160;  <span class="comment">// Don&#39;t replace result of musttail calls.</span></div>
<div class="line"><a name="l03108"></a><span class="lineno"> 3108</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="InstructionCombining_8cpp.html#a42ac274c4dac68dda60e1d52a572b734">isMustTailCall</a>(ResultOp))</div>
<div class="line"><a name="l03109"></a><span class="lineno"> 3109</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l03110"></a><span class="lineno"> 3110</span>&#160; </div>
<div class="line"><a name="l03111"></a><span class="lineno"> 3111</span>&#160;  <span class="comment">// There might be assume intrinsics dominating this return that completely</span></div>
<div class="line"><a name="l03112"></a><span class="lineno"> 3112</span>&#160;  <span class="comment">// determine the value. If so, constant fold it.</span></div>
<div class="line"><a name="l03113"></a><span class="lineno"> 3113</span>&#160;  <a class="code" href="structllvm_1_1KnownBits.html">KnownBits</a> Known = <a class="code" href="namespacellvm.html#aa1f8f0633edd8b9a1c5ec15bb9fc5640">computeKnownBits</a>(ResultOp, 0, &amp;RI);</div>
<div class="line"><a name="l03114"></a><span class="lineno"> 3114</span>&#160;  <span class="keywordflow">if</span> (Known.<a class="code" href="structllvm_1_1KnownBits.html#a5274c29c7da2473d342adfa98f34a025">isConstant</a>())</div>
<div class="line"><a name="l03115"></a><span class="lineno"> 3115</span>&#160;    <span class="keywordflow">return</span> replaceOperand(RI, 0,</div>
<div class="line"><a name="l03116"></a><span class="lineno"> 3116</span>&#160;        <a class="code" href="classllvm_1_1Constant.html#a0154da1d06b29a1d5649607ae2dfc389">Constant::getIntegerValue</a>(VTy, Known.<a class="code" href="structllvm_1_1KnownBits.html#a8d63403d41c0e32f1ded472d8ec26e37">getConstant</a>()));</div>
<div class="line"><a name="l03117"></a><span class="lineno"> 3117</span>&#160; </div>
<div class="line"><a name="l03118"></a><span class="lineno"> 3118</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l03119"></a><span class="lineno"> 3119</span>&#160;}</div>
<div class="line"><a name="l03120"></a><span class="lineno"> 3120</span>&#160; </div>
<div class="line"><a name="l03121"></a><span class="lineno"> 3121</span>&#160;<span class="comment">// WARNING: keep in sync with SimplifyCFGOpt::simplifyUnreachable()!</span></div>
<div class="line"><a name="l03122"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombinerImpl.html#a2cf3d604e1fd1a965cce4e5c70fe05ca"> 3122</a></span>&#160;<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombinerImpl.html#a2cf3d604e1fd1a965cce4e5c70fe05ca">InstCombinerImpl::visitUnreachableInst</a>(<a class="code" href="classllvm_1_1UnreachableInst.html">UnreachableInst</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l03123"></a><span class="lineno"> 3123</span>&#160;  <span class="comment">// Try to remove the previous instruction if it must lead to unreachable.</span></div>
<div class="line"><a name="l03124"></a><span class="lineno"> 3124</span>&#160;  <span class="comment">// This includes instructions like stores and &quot;llvm.assume&quot; that may not get</span></div>
<div class="line"><a name="l03125"></a><span class="lineno"> 3125</span>&#160;  <span class="comment">// removed by simple dead code elimination.</span></div>
<div class="line"><a name="l03126"></a><span class="lineno"> 3126</span>&#160;  <span class="keywordflow">while</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Prev = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getPrevNonDebugInstruction()) {</div>
<div class="line"><a name="l03127"></a><span class="lineno"> 3127</span>&#160;    <span class="comment">// While we theoretically can erase EH, that would result in a block that</span></div>
<div class="line"><a name="l03128"></a><span class="lineno"> 3128</span>&#160;    <span class="comment">// used to start with an EH no longer starting with EH, which is invalid.</span></div>
<div class="line"><a name="l03129"></a><span class="lineno"> 3129</span>&#160;    <span class="comment">// To make it valid, we&#39;d need to fixup predecessors to no longer refer to</span></div>
<div class="line"><a name="l03130"></a><span class="lineno"> 3130</span>&#160;    <span class="comment">// this block, but that changes CFG, which is not allowed in InstCombine.</span></div>
<div class="line"><a name="l03131"></a><span class="lineno"> 3131</span>&#160;    <span class="keywordflow">if</span> (Prev-&gt;isEHPad())</div>
<div class="line"><a name="l03132"></a><span class="lineno"> 3132</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>; <span class="comment">// Can not drop any more instructions. We&#39;re done here.</span></div>
<div class="line"><a name="l03133"></a><span class="lineno"> 3133</span>&#160; </div>
<div class="line"><a name="l03134"></a><span class="lineno"> 3134</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm.html#abff5a423c1f45e23958dde8ee695c9a9">isGuaranteedToTransferExecutionToSuccessor</a>(Prev))</div>
<div class="line"><a name="l03135"></a><span class="lineno"> 3135</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>; <span class="comment">// Can not drop any more instructions. We&#39;re done here.</span></div>
<div class="line"><a name="l03136"></a><span class="lineno"> 3136</span>&#160;    <span class="comment">// Otherwise, this instruction can be freely erased,</span></div>
<div class="line"><a name="l03137"></a><span class="lineno"> 3137</span>&#160;    <span class="comment">// even if it is not side-effect free.</span></div>
<div class="line"><a name="l03138"></a><span class="lineno"> 3138</span>&#160; </div>
<div class="line"><a name="l03139"></a><span class="lineno"> 3139</span>&#160;    <span class="comment">// A value may still have uses before we process it here (for example, in</span></div>
<div class="line"><a name="l03140"></a><span class="lineno"> 3140</span>&#160;    <span class="comment">// another unreachable block), so convert those to poison.</span></div>
<div class="line"><a name="l03141"></a><span class="lineno"> 3141</span>&#160;    replaceInstUsesWith(*Prev, <a class="code" href="classllvm_1_1PoisonValue.html#a1bf08613fb664a2e377a9a72c59a6b66">PoisonValue::get</a>(Prev-&gt;getType()));</div>
<div class="line"><a name="l03142"></a><span class="lineno"> 3142</span>&#160;    eraseInstFromFunction(*Prev);</div>
<div class="line"><a name="l03143"></a><span class="lineno"> 3143</span>&#160;  }</div>
<div class="line"><a name="l03144"></a><span class="lineno"> 3144</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getParent()-&gt;sizeWithoutDebug() == 1 &amp;&amp; <span class="stringliteral">&quot;The block is now empty.&quot;</span>);</div>
<div class="line"><a name="l03145"></a><span class="lineno"> 3145</span>&#160;  <span class="comment">// FIXME: recurse into unconditional predecessors?</span></div>
<div class="line"><a name="l03146"></a><span class="lineno"> 3146</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l03147"></a><span class="lineno"> 3147</span>&#160;}</div>
<div class="line"><a name="l03148"></a><span class="lineno"> 3148</span>&#160; </div>
<div class="line"><a name="l03149"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombinerImpl.html#a6ab9ce3ba2b714edf23aa74567ba4540"> 3149</a></span>&#160;<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombinerImpl.html#a6ab9ce3ba2b714edf23aa74567ba4540">InstCombinerImpl::visitUnconditionalBranchInst</a>(<a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a> &amp;BI) {</div>
<div class="line"><a name="l03150"></a><span class="lineno"> 3150</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(BI.<a class="code" href="classllvm_1_1BranchInst.html#ad56f6a9b5cd05940017c4544df48bc30">isUnconditional</a>() &amp;&amp; <span class="stringliteral">&quot;Only for unconditional branches.&quot;</span>);</div>
<div class="line"><a name="l03151"></a><span class="lineno"> 3151</span>&#160; </div>
<div class="line"><a name="l03152"></a><span class="lineno"> 3152</span>&#160;  <span class="comment">// If this store is the second-to-last instruction in the basic block</span></div>
<div class="line"><a name="l03153"></a><span class="lineno"> 3153</span>&#160;  <span class="comment">// (excluding debug info and bitcasts of pointers) and if the block ends with</span></div>
<div class="line"><a name="l03154"></a><span class="lineno"> 3154</span>&#160;  <span class="comment">// an unconditional branch, try to move the store to the successor block.</span></div>
<div class="line"><a name="l03155"></a><span class="lineno"> 3155</span>&#160; </div>
<div class="line"><a name="l03156"></a><span class="lineno"> 3156</span>&#160;  <span class="keyword">auto</span> GetLastSinkableStore = [](<a class="code" href="classllvm_1_1BasicBlock.html#a98c0a84a5dfa8bce341c829709f171e5">BasicBlock::iterator</a> BBI) {</div>
<div class="line"><a name="l03157"></a><span class="lineno"> 3157</span>&#160;    <span class="keyword">auto</span> IsNoopInstrForStoreMerging = [](<a class="code" href="classllvm_1_1BasicBlock.html#a98c0a84a5dfa8bce341c829709f171e5">BasicBlock::iterator</a> BBI) {</div>
<div class="line"><a name="l03158"></a><span class="lineno"> 3158</span>&#160;      <span class="keywordflow">return</span> BBI-&gt;isDebugOrPseudoInst() ||</div>
<div class="line"><a name="l03159"></a><span class="lineno"> 3159</span>&#160;             (isa&lt;BitCastInst&gt;(BBI) &amp;&amp; BBI-&gt;getType()-&gt;isPointerTy());</div>
<div class="line"><a name="l03160"></a><span class="lineno"> 3160</span>&#160;    };</div>
<div class="line"><a name="l03161"></a><span class="lineno"> 3161</span>&#160; </div>
<div class="line"><a name="l03162"></a><span class="lineno"> 3162</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html#a98c0a84a5dfa8bce341c829709f171e5">BasicBlock::iterator</a> FirstInstr = BBI-&gt;getParent()-&gt;begin();</div>
<div class="line"><a name="l03163"></a><span class="lineno"> 3163</span>&#160;    <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l03164"></a><span class="lineno"> 3164</span>&#160;      <span class="keywordflow">if</span> (BBI != FirstInstr)</div>
<div class="line"><a name="l03165"></a><span class="lineno"> 3165</span>&#160;        --BBI;</div>
<div class="line"><a name="l03166"></a><span class="lineno"> 3166</span>&#160;    } <span class="keywordflow">while</span> (BBI != FirstInstr &amp;&amp; IsNoopInstrForStoreMerging(BBI));</div>
<div class="line"><a name="l03167"></a><span class="lineno"> 3167</span>&#160; </div>
<div class="line"><a name="l03168"></a><span class="lineno"> 3168</span>&#160;    <span class="keywordflow">return</span> dyn_cast&lt;StoreInst&gt;(BBI);</div>
<div class="line"><a name="l03169"></a><span class="lineno"> 3169</span>&#160;  };</div>
<div class="line"><a name="l03170"></a><span class="lineno"> 3170</span>&#160; </div>
<div class="line"><a name="l03171"></a><span class="lineno"> 3171</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1StoreInst.html">StoreInst</a> *<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a> = GetLastSinkableStore(<a class="code" href="classllvm_1_1BasicBlock.html#a98c0a84a5dfa8bce341c829709f171e5">BasicBlock::iterator</a>(BI)))</div>
<div class="line"><a name="l03172"></a><span class="lineno"> 3172</span>&#160;    <span class="keywordflow">if</span> (mergeStoreIntoSuccessor(*<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>))</div>
<div class="line"><a name="l03173"></a><span class="lineno"> 3173</span>&#160;      <span class="keywordflow">return</span> &amp;BI;</div>
<div class="line"><a name="l03174"></a><span class="lineno"> 3174</span>&#160; </div>
<div class="line"><a name="l03175"></a><span class="lineno"> 3175</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l03176"></a><span class="lineno"> 3176</span>&#160;}</div>
<div class="line"><a name="l03177"></a><span class="lineno"> 3177</span>&#160; </div>
<div class="line"><a name="l03178"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombinerImpl.html#aea9ba5a362fb88bd97349a302133dd03"> 3178</a></span>&#160;<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombinerImpl.html#aea9ba5a362fb88bd97349a302133dd03">InstCombinerImpl::visitBranchInst</a>(<a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a> &amp;BI) {</div>
<div class="line"><a name="l03179"></a><span class="lineno"> 3179</span>&#160;  <span class="keywordflow">if</span> (BI.<a class="code" href="classllvm_1_1BranchInst.html#ad56f6a9b5cd05940017c4544df48bc30">isUnconditional</a>())</div>
<div class="line"><a name="l03180"></a><span class="lineno"> 3180</span>&#160;    <span class="keywordflow">return</span> visitUnconditionalBranchInst(BI);</div>
<div class="line"><a name="l03181"></a><span class="lineno"> 3181</span>&#160; </div>
<div class="line"><a name="l03182"></a><span class="lineno"> 3182</span>&#160;  <span class="comment">// Change br (not X), label True, label False to: br X, label False, True</span></div>
<div class="line"><a name="l03183"></a><span class="lineno"> 3183</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a> = BI.<a class="code" href="classllvm_1_1BranchInst.html#aac456a62894c9f0f8e9f06373bbf40f0">getCondition</a>();</div>
<div class="line"><a name="l03184"></a><span class="lineno"> 3184</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>;</div>
<div class="line"><a name="l03185"></a><span class="lineno"> 3185</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a2ff0f084844b189a858647d637d47eba">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>))) &amp;&amp; !isa&lt;Constant&gt;(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>)) {</div>
<div class="line"><a name="l03186"></a><span class="lineno"> 3186</span>&#160;    <span class="comment">// Swap Destinations and condition...</span></div>
<div class="line"><a name="l03187"></a><span class="lineno"> 3187</span>&#160;    BI.<a class="code" href="classllvm_1_1BranchInst.html#a6550fe5bd437c1c3c6e237d726e36b90">swapSuccessors</a>();</div>
<div class="line"><a name="l03188"></a><span class="lineno"> 3188</span>&#160;    <span class="keywordflow">return</span> replaceOperand(BI, 0, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>);</div>
<div class="line"><a name="l03189"></a><span class="lineno"> 3189</span>&#160;  }</div>
<div class="line"><a name="l03190"></a><span class="lineno"> 3190</span>&#160; </div>
<div class="line"><a name="l03191"></a><span class="lineno"> 3191</span>&#160;  <span class="comment">// Canonicalize logical-and-with-invert as logical-or-with-invert.</span></div>
<div class="line"><a name="l03192"></a><span class="lineno"> 3192</span>&#160;  <span class="comment">// This is done by inverting the condition and swapping successors:</span></div>
<div class="line"><a name="l03193"></a><span class="lineno"> 3193</span>&#160;  <span class="comment">// br (X &amp;&amp; !Y), T, F --&gt; br !(X &amp;&amp; !Y), F, T --&gt; br (!X || Y), F, T</span></div>
<div class="line"><a name="l03194"></a><span class="lineno"> 3194</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>;</div>
<div class="line"><a name="l03195"></a><span class="lineno"> 3195</span>&#160;  <span class="keywordflow">if</span> (isa&lt;SelectInst&gt;(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>) &amp;&amp;</div>
<div class="line"><a name="l03196"></a><span class="lineno"> 3196</span>&#160;      <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>,</div>
<div class="line"><a name="l03197"></a><span class="lineno"> 3197</span>&#160;            <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a213e6c0ca6e838157373b9a6018c0769">m_LogicalAnd</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2ff0f084844b189a858647d637d47eba">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>))))))) {</div>
<div class="line"><a name="l03198"></a><span class="lineno"> 3198</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *NotX = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateNot(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <span class="stringliteral">&quot;not.&quot;</span> + <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getName());</div>
<div class="line"><a name="l03199"></a><span class="lineno"> 3199</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830ea3a2d5fe857d8f9541136a124c2edec6c">Or</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateLogicalOr(NotX, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>);</div>
<div class="line"><a name="l03200"></a><span class="lineno"> 3200</span>&#160;    BI.<a class="code" href="classllvm_1_1BranchInst.html#a6550fe5bd437c1c3c6e237d726e36b90">swapSuccessors</a>();</div>
<div class="line"><a name="l03201"></a><span class="lineno"> 3201</span>&#160;    <span class="keywordflow">return</span> replaceOperand(BI, 0, <a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830ea3a2d5fe857d8f9541136a124c2edec6c">Or</a>);</div>
<div class="line"><a name="l03202"></a><span class="lineno"> 3202</span>&#160;  }</div>
<div class="line"><a name="l03203"></a><span class="lineno"> 3203</span>&#160; </div>
<div class="line"><a name="l03204"></a><span class="lineno"> 3204</span>&#160;  <span class="comment">// If the condition is irrelevant, remove the use so that other</span></div>
<div class="line"><a name="l03205"></a><span class="lineno"> 3205</span>&#160;  <span class="comment">// transforms on the condition become more effective.</span></div>
<div class="line"><a name="l03206"></a><span class="lineno"> 3206</span>&#160;  <span class="keywordflow">if</span> (!isa&lt;ConstantInt&gt;(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>) &amp;&amp; BI.<a class="code" href="classllvm_1_1BranchInst.html#ad97f2e60cf22f15e0cf617af52309031">getSuccessor</a>(0) == BI.<a class="code" href="classllvm_1_1BranchInst.html#ad97f2e60cf22f15e0cf617af52309031">getSuccessor</a>(1))</div>
<div class="line"><a name="l03207"></a><span class="lineno"> 3207</span>&#160;    <span class="keywordflow">return</span> replaceOperand(BI, 0, <a class="code" href="classllvm_1_1ConstantInt.html#aa7cce62ac5cc6df09cce0535874336b7">ConstantInt::getFalse</a>(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>-&gt;getType()));</div>
<div class="line"><a name="l03208"></a><span class="lineno"> 3208</span>&#160; </div>
<div class="line"><a name="l03209"></a><span class="lineno"> 3209</span>&#160;  <span class="comment">// Canonicalize, for example, fcmp_one -&gt; fcmp_oeq.</span></div>
<div class="line"><a name="l03210"></a><span class="lineno"> 3210</span>&#160;  <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">CmpInst::Predicate</a> Pred;</div>
<div class="line"><a name="l03211"></a><span class="lineno"> 3211</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a5772946ca265c6a5c951cb331983daa5">m_FCmp</a>(Pred, <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>()))) &amp;&amp;</div>
<div class="line"><a name="l03212"></a><span class="lineno"> 3212</span>&#160;      !isCanonicalPredicate(Pred)) {</div>
<div class="line"><a name="l03213"></a><span class="lineno"> 3213</span>&#160;    <span class="comment">// Swap destinations and condition.</span></div>
<div class="line"><a name="l03214"></a><span class="lineno"> 3214</span>&#160;    <span class="keyword">auto</span> *Cmp = cast&lt;CmpInst&gt;(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>);</div>
<div class="line"><a name="l03215"></a><span class="lineno"> 3215</span>&#160;    Cmp-&gt;setPredicate(<a class="code" href="classllvm_1_1CmpInst.html#aa2a54b545d237ecfe450fd1292f7675e">CmpInst::getInversePredicate</a>(Pred));</div>
<div class="line"><a name="l03216"></a><span class="lineno"> 3216</span>&#160;    BI.<a class="code" href="classllvm_1_1BranchInst.html#a6550fe5bd437c1c3c6e237d726e36b90">swapSuccessors</a>();</div>
<div class="line"><a name="l03217"></a><span class="lineno"> 3217</span>&#160;    Worklist.push(Cmp);</div>
<div class="line"><a name="l03218"></a><span class="lineno"> 3218</span>&#160;    <span class="keywordflow">return</span> &amp;BI;</div>
<div class="line"><a name="l03219"></a><span class="lineno"> 3219</span>&#160;  }</div>
<div class="line"><a name="l03220"></a><span class="lineno"> 3220</span>&#160; </div>
<div class="line"><a name="l03221"></a><span class="lineno"> 3221</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l03222"></a><span class="lineno"> 3222</span>&#160;}</div>
<div class="line"><a name="l03223"></a><span class="lineno"> 3223</span>&#160; </div>
<div class="line"><a name="l03224"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombinerImpl.html#a91100900b6eb1ae18127f1e1f8f8a40e"> 3224</a></span>&#160;<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombinerImpl.html#a91100900b6eb1ae18127f1e1f8f8a40e">InstCombinerImpl::visitSwitchInst</a>(<a class="code" href="classllvm_1_1SwitchInst.html">SwitchInst</a> &amp;<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>) {</div>
<div class="line"><a name="l03225"></a><span class="lineno"> 3225</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a> = <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>.getCondition();</div>
<div class="line"><a name="l03226"></a><span class="lineno"> 3226</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Op0;</div>
<div class="line"><a name="l03227"></a><span class="lineno"> 3227</span>&#160;  <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *AddRHS;</div>
<div class="line"><a name="l03228"></a><span class="lineno"> 3228</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a944c25ac9b73b02a17a20a08a25b9b21">m_Add</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(Op0), <a class="code" href="namespacellvm_1_1PatternMatch.html#a677ac8d99ff3c2d32a95c21de9ed372c">m_ConstantInt</a>(AddRHS)))) {</div>
<div class="line"><a name="l03229"></a><span class="lineno"> 3229</span>&#160;    <span class="comment">// Change &#39;switch (X+4) case 1:&#39; into &#39;switch (X) case -3&#39;.</span></div>
<div class="line"><a name="l03230"></a><span class="lineno"> 3230</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> Case : <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>.cases()) {</div>
<div class="line"><a name="l03231"></a><span class="lineno"> 3231</span>&#160;      <a class="code" href="classllvm_1_1Constant.html">Constant</a> *NewCase = <a class="code" href="classllvm_1_1ConstantExpr.html#a554ab77949b0a16670a83ec3307501eb">ConstantExpr::getSub</a>(Case.getCaseValue(), AddRHS);</div>
<div class="line"><a name="l03232"></a><span class="lineno"> 3232</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(isa&lt;ConstantInt&gt;(NewCase) &amp;&amp;</div>
<div class="line"><a name="l03233"></a><span class="lineno"> 3233</span>&#160;             <span class="stringliteral">&quot;Result of expression should be constant&quot;</span>);</div>
<div class="line"><a name="l03234"></a><span class="lineno"> 3234</span>&#160;      Case.setValue(cast&lt;ConstantInt&gt;(NewCase));</div>
<div class="line"><a name="l03235"></a><span class="lineno"> 3235</span>&#160;    }</div>
<div class="line"><a name="l03236"></a><span class="lineno"> 3236</span>&#160;    <span class="keywordflow">return</span> replaceOperand(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>, 0, Op0);</div>
<div class="line"><a name="l03237"></a><span class="lineno"> 3237</span>&#160;  }</div>
<div class="line"><a name="l03238"></a><span class="lineno"> 3238</span>&#160; </div>
<div class="line"><a name="l03239"></a><span class="lineno"> 3239</span>&#160;  <a class="code" href="structllvm_1_1KnownBits.html">KnownBits</a> Known = <a class="code" href="namespacellvm.html#aa1f8f0633edd8b9a1c5ec15bb9fc5640">computeKnownBits</a>(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>, 0, &amp;<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>);</div>
<div class="line"><a name="l03240"></a><span class="lineno"> 3240</span>&#160;  <span class="keywordtype">unsigned</span> LeadingKnownZeros = Known.<a class="code" href="structllvm_1_1KnownBits.html#a7f47812e8e75b0616a97d7004e5fb909">countMinLeadingZeros</a>();</div>
<div class="line"><a name="l03241"></a><span class="lineno"> 3241</span>&#160;  <span class="keywordtype">unsigned</span> LeadingKnownOnes = Known.<a class="code" href="structllvm_1_1KnownBits.html#a1d90fff0f1479f662286338ffecd7f05">countMinLeadingOnes</a>();</div>
<div class="line"><a name="l03242"></a><span class="lineno"> 3242</span>&#160; </div>
<div class="line"><a name="l03243"></a><span class="lineno"> 3243</span>&#160;  <span class="comment">// Compute the number of leading bits we can ignore.</span></div>
<div class="line"><a name="l03244"></a><span class="lineno"> 3244</span>&#160;  <span class="comment">// TODO: A better way to determine this would use ComputeNumSignBits().</span></div>
<div class="line"><a name="l03245"></a><span class="lineno"> 3245</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> : <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>.cases()) {</div>
<div class="line"><a name="l03246"></a><span class="lineno"> 3246</span>&#160;    LeadingKnownZeros = <a class="code" href="namespacellvm.html#a57f2ca0e57f4f7b13f56f9aa16af3e0d">std::min</a>(</div>
<div class="line"><a name="l03247"></a><span class="lineno"> 3247</span>&#160;        LeadingKnownZeros, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.getCaseValue()-&gt;getValue().countLeadingZeros());</div>
<div class="line"><a name="l03248"></a><span class="lineno"> 3248</span>&#160;    LeadingKnownOnes = <a class="code" href="namespacellvm.html#a57f2ca0e57f4f7b13f56f9aa16af3e0d">std::min</a>(</div>
<div class="line"><a name="l03249"></a><span class="lineno"> 3249</span>&#160;        LeadingKnownOnes, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.getCaseValue()-&gt;getValue().countLeadingOnes());</div>
<div class="line"><a name="l03250"></a><span class="lineno"> 3250</span>&#160;  }</div>
<div class="line"><a name="l03251"></a><span class="lineno"> 3251</span>&#160; </div>
<div class="line"><a name="l03252"></a><span class="lineno"> 3252</span>&#160;  <span class="keywordtype">unsigned</span> NewWidth = Known.<a class="code" href="structllvm_1_1KnownBits.html#a4fdc09049a61f952b5d52788dbd2f69b">getBitWidth</a>() - <a class="code" href="namespacellvm.html#ab4d4bc901fedd8857f647dcc2c0d71de">std::max</a>(LeadingKnownZeros, LeadingKnownOnes);</div>
<div class="line"><a name="l03253"></a><span class="lineno"> 3253</span>&#160; </div>
<div class="line"><a name="l03254"></a><span class="lineno"> 3254</span>&#160;  <span class="comment">// Shrink the condition operand if the new type is smaller than the old type.</span></div>
<div class="line"><a name="l03255"></a><span class="lineno"> 3255</span>&#160;  <span class="comment">// But do not shrink to a non-standard type, because backend can&#39;t generate</span></div>
<div class="line"><a name="l03256"></a><span class="lineno"> 3256</span>&#160;  <span class="comment">// good code for that yet.</span></div>
<div class="line"><a name="l03257"></a><span class="lineno"> 3257</span>&#160;  <span class="comment">// TODO: We can make it aggressive again after fixing PR39569.</span></div>
<div class="line"><a name="l03258"></a><span class="lineno"> 3258</span>&#160;  <span class="keywordflow">if</span> (NewWidth &gt; 0 &amp;&amp; NewWidth &lt; Known.<a class="code" href="structllvm_1_1KnownBits.html#a4fdc09049a61f952b5d52788dbd2f69b">getBitWidth</a>() &amp;&amp;</div>
<div class="line"><a name="l03259"></a><span class="lineno"> 3259</span>&#160;      shouldChangeType(Known.<a class="code" href="structllvm_1_1KnownBits.html#a4fdc09049a61f952b5d52788dbd2f69b">getBitWidth</a>(), NewWidth)) {</div>
<div class="line"><a name="l03260"></a><span class="lineno"> 3260</span>&#160;    <a class="code" href="classllvm_1_1IntegerType.html">IntegerType</a> *Ty = <a class="code" href="classllvm_1_1IntegerType.html#a14f7b4f1aed38192fb6b7772eb506bdb">IntegerType::get</a>(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>.getContext(), NewWidth);</div>
<div class="line"><a name="l03261"></a><span class="lineno"> 3261</span>&#160;    <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(&amp;<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>);</div>
<div class="line"><a name="l03262"></a><span class="lineno"> 3262</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *NewCond = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateTrunc(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>, Ty, <span class="stringliteral">&quot;trunc&quot;</span>);</div>
<div class="line"><a name="l03263"></a><span class="lineno"> 3263</span>&#160; </div>
<div class="line"><a name="l03264"></a><span class="lineno"> 3264</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> Case : <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>.cases()) {</div>
<div class="line"><a name="l03265"></a><span class="lineno"> 3265</span>&#160;      <a class="code" href="classllvm_1_1APInt.html">APInt</a> TruncatedCase = Case.getCaseValue()-&gt;getValue().<a class="code" href="classllvm_1_1APInt.html#a317c64fd4cfebc88e79387b3821a629d">trunc</a>(NewWidth);</div>
<div class="line"><a name="l03266"></a><span class="lineno"> 3266</span>&#160;      Case.setValue(<a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>.getContext(), TruncatedCase));</div>
<div class="line"><a name="l03267"></a><span class="lineno"> 3267</span>&#160;    }</div>
<div class="line"><a name="l03268"></a><span class="lineno"> 3268</span>&#160;    <span class="keywordflow">return</span> replaceOperand(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>, 0, NewCond);</div>
<div class="line"><a name="l03269"></a><span class="lineno"> 3269</span>&#160;  }</div>
<div class="line"><a name="l03270"></a><span class="lineno"> 3270</span>&#160; </div>
<div class="line"><a name="l03271"></a><span class="lineno"> 3271</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l03272"></a><span class="lineno"> 3272</span>&#160;}</div>
<div class="line"><a name="l03273"></a><span class="lineno"> 3273</span>&#160; </div>
<div class="line"><a name="l03274"></a><span class="lineno"> 3274</span>&#160;<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *</div>
<div class="line"><a name="l03275"></a><span class="lineno"> 3275</span>&#160;InstCombinerImpl::foldExtractOfOverflowIntrinsic(<a class="code" href="classllvm_1_1ExtractValueInst.html">ExtractValueInst</a> &amp;EV) {</div>
<div class="line"><a name="l03276"></a><span class="lineno"> 3276</span>&#160;  <span class="keyword">auto</span> *WO = dyn_cast&lt;WithOverflowInst&gt;(EV.<a class="code" href="classllvm_1_1ExtractValueInst.html#ab87e7c5a729885396b3b045ad375e4b8">getAggregateOperand</a>());</div>
<div class="line"><a name="l03277"></a><span class="lineno"> 3277</span>&#160;  <span class="keywordflow">if</span> (!WO)</div>
<div class="line"><a name="l03278"></a><span class="lineno"> 3278</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l03279"></a><span class="lineno"> 3279</span>&#160; </div>
<div class="line"><a name="l03280"></a><span class="lineno"> 3280</span>&#160;  <a class="code" href="namespacellvm_1_1Intrinsic.html#a80add6b3b1cdaec560907995127adc16">Intrinsic::ID</a> OvID = WO-&gt;getIntrinsicID();</div>
<div class="line"><a name="l03281"></a><span class="lineno"> 3281</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l03282"></a><span class="lineno"> 3282</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(WO-&gt;getRHS(), <a class="code" href="namespacellvm_1_1PatternMatch.html#a0f8629c0ff1db9c384e378b2ca860f0a">m_APIntAllowUndef</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>))) {</div>
<div class="line"><a name="l03283"></a><span class="lineno"> 3283</span>&#160;    <span class="keywordflow">if</span> (*EV.<a class="code" href="classllvm_1_1ExtractValueInst.html#afcd55a28a257b9ea1708f66671b13e6e">idx_begin</a>() == 0 &amp;&amp; (OvID == Intrinsic::smul_with_overflow ||</div>
<div class="line"><a name="l03284"></a><span class="lineno"> 3284</span>&#160;                                 OvID == Intrinsic::umul_with_overflow)) {</div>
<div class="line"><a name="l03285"></a><span class="lineno"> 3285</span>&#160;      <span class="comment">// extractvalue (any_mul_with_overflow X, -1), 0 --&gt; -X</span></div>
<div class="line"><a name="l03286"></a><span class="lineno"> 3286</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;isAllOnes())</div>
<div class="line"><a name="l03287"></a><span class="lineno"> 3287</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1BinaryOperator.html#a19cdbeffd437228c47a4410a4ed34aca">BinaryOperator::CreateNeg</a>(WO-&gt;getLHS());</div>
<div class="line"><a name="l03288"></a><span class="lineno"> 3288</span>&#160;      <span class="comment">// extractvalue (any_mul_with_overflow X, 2^n), 0 --&gt; X &lt;&lt; n</span></div>
<div class="line"><a name="l03289"></a><span class="lineno"> 3289</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;isPowerOf2()) {</div>
<div class="line"><a name="l03290"></a><span class="lineno"> 3290</span>&#160;        <span class="keywordflow">return</span> BinaryOperator::CreateShl(</div>
<div class="line"><a name="l03291"></a><span class="lineno"> 3291</span>&#160;            WO-&gt;getLHS(),</div>
<div class="line"><a name="l03292"></a><span class="lineno"> 3292</span>&#160;            <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(WO-&gt;getLHS()-&gt;getType(), <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;logBase2()));</div>
<div class="line"><a name="l03293"></a><span class="lineno"> 3293</span>&#160;      }</div>
<div class="line"><a name="l03294"></a><span class="lineno"> 3294</span>&#160;    }</div>
<div class="line"><a name="l03295"></a><span class="lineno"> 3295</span>&#160;  }</div>
<div class="line"><a name="l03296"></a><span class="lineno"> 3296</span>&#160; </div>
<div class="line"><a name="l03297"></a><span class="lineno"> 3297</span>&#160;  <span class="comment">// We&#39;re extracting from an overflow intrinsic. See if we&#39;re the only user.</span></div>
<div class="line"><a name="l03298"></a><span class="lineno"> 3298</span>&#160;  <span class="comment">// That allows us to simplify multiple result intrinsics to simpler things</span></div>
<div class="line"><a name="l03299"></a><span class="lineno"> 3299</span>&#160;  <span class="comment">// that just get one value.</span></div>
<div class="line"><a name="l03300"></a><span class="lineno"> 3300</span>&#160;  <span class="keywordflow">if</span> (!WO-&gt;hasOneUse())</div>
<div class="line"><a name="l03301"></a><span class="lineno"> 3301</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l03302"></a><span class="lineno"> 3302</span>&#160; </div>
<div class="line"><a name="l03303"></a><span class="lineno"> 3303</span>&#160;  <span class="comment">// Check if we&#39;re grabbing only the result of a &#39;with overflow&#39; intrinsic</span></div>
<div class="line"><a name="l03304"></a><span class="lineno"> 3304</span>&#160;  <span class="comment">// and replace it with a traditional binary instruction.</span></div>
<div class="line"><a name="l03305"></a><span class="lineno"> 3305</span>&#160;  <span class="keywordflow">if</span> (*EV.<a class="code" href="classllvm_1_1ExtractValueInst.html#afcd55a28a257b9ea1708f66671b13e6e">idx_begin</a>() == 0) {</div>
<div class="line"><a name="l03306"></a><span class="lineno"> 3306</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html#ac26154a24f393f523c87cc5f8239f36c">Instruction::BinaryOps</a> BinOp = WO-&gt;getBinaryOp();</div>
<div class="line"><a name="l03307"></a><span class="lineno"> 3307</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a> = WO-&gt;getLHS(), *<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a> = WO-&gt;getRHS();</div>
<div class="line"><a name="l03308"></a><span class="lineno"> 3308</span>&#160;    <span class="comment">// Replace the old instruction&#39;s uses with poison.</span></div>
<div class="line"><a name="l03309"></a><span class="lineno"> 3309</span>&#160;    replaceInstUsesWith(*WO, <a class="code" href="classllvm_1_1PoisonValue.html#a1bf08613fb664a2e377a9a72c59a6b66">PoisonValue::get</a>(WO-&gt;getType()));</div>
<div class="line"><a name="l03310"></a><span class="lineno"> 3310</span>&#160;    eraseInstFromFunction(*WO);</div>
<div class="line"><a name="l03311"></a><span class="lineno"> 3311</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1BinaryOperator.html#a02ce9966395063ac501ecbc1623deda4">BinaryOperator::Create</a>(BinOp, <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>);</div>
<div class="line"><a name="l03312"></a><span class="lineno"> 3312</span>&#160;  }</div>
<div class="line"><a name="l03313"></a><span class="lineno"> 3313</span>&#160; </div>
<div class="line"><a name="l03314"></a><span class="lineno"> 3314</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(*EV.<a class="code" href="classllvm_1_1ExtractValueInst.html#afcd55a28a257b9ea1708f66671b13e6e">idx_begin</a>() == 1 &amp;&amp; <span class="stringliteral">&quot;Unexpected extract index for overflow inst&quot;</span>);</div>
<div class="line"><a name="l03315"></a><span class="lineno"> 3315</span>&#160; </div>
<div class="line"><a name="l03316"></a><span class="lineno"> 3316</span>&#160;  <span class="comment">// (usub LHS, RHS) overflows when LHS is unsigned-less-than RHS.</span></div>
<div class="line"><a name="l03317"></a><span class="lineno"> 3317</span>&#160;  <span class="keywordflow">if</span> (OvID == Intrinsic::usub_with_overflow)</div>
<div class="line"><a name="l03318"></a><span class="lineno"> 3318</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e">ICmpInst::ICMP_ULT</a>, WO-&gt;getLHS(), WO-&gt;getRHS());</div>
<div class="line"><a name="l03319"></a><span class="lineno"> 3319</span>&#160; </div>
<div class="line"><a name="l03320"></a><span class="lineno"> 3320</span>&#160;  <span class="comment">// smul with i1 types overflows when both sides are set: -1 * -1 == +1, but</span></div>
<div class="line"><a name="l03321"></a><span class="lineno"> 3321</span>&#160;  <span class="comment">// +1 is not possible because we assume signed values.</span></div>
<div class="line"><a name="l03322"></a><span class="lineno"> 3322</span>&#160;  <span class="keywordflow">if</span> (OvID == Intrinsic::smul_with_overflow &amp;&amp;</div>
<div class="line"><a name="l03323"></a><span class="lineno"> 3323</span>&#160;      WO-&gt;getLHS()-&gt;getType()-&gt;isIntOrIntVectorTy(1))</div>
<div class="line"><a name="l03324"></a><span class="lineno"> 3324</span>&#160;    <span class="keywordflow">return</span> BinaryOperator::CreateAnd(WO-&gt;getLHS(), WO-&gt;getRHS());</div>
<div class="line"><a name="l03325"></a><span class="lineno"> 3325</span>&#160; </div>
<div class="line"><a name="l03326"></a><span class="lineno"> 3326</span>&#160;  <span class="comment">// If only the overflow result is used, and the right hand side is a</span></div>
<div class="line"><a name="l03327"></a><span class="lineno"> 3327</span>&#160;  <span class="comment">// constant (or constant splat), we can remove the intrinsic by directly</span></div>
<div class="line"><a name="l03328"></a><span class="lineno"> 3328</span>&#160;  <span class="comment">// checking for overflow.</span></div>
<div class="line"><a name="l03329"></a><span class="lineno"> 3329</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>) {</div>
<div class="line"><a name="l03330"></a><span class="lineno"> 3330</span>&#160;    <span class="comment">// Compute the no-wrap range for LHS given RHS=C, then construct an</span></div>
<div class="line"><a name="l03331"></a><span class="lineno"> 3331</span>&#160;    <span class="comment">// equivalent icmp, potentially using an offset.</span></div>
<div class="line"><a name="l03332"></a><span class="lineno"> 3332</span>&#160;    <a class="code" href="classllvm_1_1ConstantRange.html">ConstantRange</a> NWR = <a class="code" href="classllvm_1_1ConstantRange.html#aeddb6f4f9ffcb9e893e5cb321b7a7f83">ConstantRange::makeExactNoWrapRegion</a>(</div>
<div class="line"><a name="l03333"></a><span class="lineno"> 3333</span>&#160;        WO-&gt;getBinaryOp(), *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, WO-&gt;getNoWrapKind());</div>
<div class="line"><a name="l03334"></a><span class="lineno"> 3334</span>&#160; </div>
<div class="line"><a name="l03335"></a><span class="lineno"> 3335</span>&#160;    <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">CmpInst::Predicate</a> Pred;</div>
<div class="line"><a name="l03336"></a><span class="lineno"> 3336</span>&#160;    <a class="code" href="classllvm_1_1APInt.html">APInt</a> NewRHSC, <a class="code" href="namespacellvm_1_1AMDGPU_1_1Hwreg.html#a6110fc30bc7311a6cf99814530362e21">Offset</a>;</div>
<div class="line"><a name="l03337"></a><span class="lineno"> 3337</span>&#160;    NWR.<a class="code" href="classllvm_1_1ConstantRange.html#a1616515fc811646b8cc5e6625e36b954">getEquivalentICmp</a>(Pred, NewRHSC, Offset);</div>
<div class="line"><a name="l03338"></a><span class="lineno"> 3338</span>&#160;    <span class="keyword">auto</span> *OpTy = WO-&gt;getRHS()-&gt;getType();</div>
<div class="line"><a name="l03339"></a><span class="lineno"> 3339</span>&#160;    <span class="keyword">auto</span> *NewLHS = WO-&gt;getLHS();</div>
<div class="line"><a name="l03340"></a><span class="lineno"> 3340</span>&#160;    <span class="keywordflow">if</span> (Offset != 0)</div>
<div class="line"><a name="l03341"></a><span class="lineno"> 3341</span>&#160;      NewLHS = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAdd(NewLHS, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(OpTy, Offset));</div>
<div class="line"><a name="l03342"></a><span class="lineno"> 3342</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#aa2a54b545d237ecfe450fd1292f7675e">ICmpInst::getInversePredicate</a>(Pred), NewLHS,</div>
<div class="line"><a name="l03343"></a><span class="lineno"> 3343</span>&#160;                        <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(OpTy, NewRHSC));</div>
<div class="line"><a name="l03344"></a><span class="lineno"> 3344</span>&#160;  }</div>
<div class="line"><a name="l03345"></a><span class="lineno"> 3345</span>&#160; </div>
<div class="line"><a name="l03346"></a><span class="lineno"> 3346</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l03347"></a><span class="lineno"> 3347</span>&#160;}</div>
<div class="line"><a name="l03348"></a><span class="lineno"> 3348</span>&#160; </div>
<div class="line"><a name="l03349"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombinerImpl.html#a679f36556ace611ccc56580cb497973a"> 3349</a></span>&#160;<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombinerImpl.html#a679f36556ace611ccc56580cb497973a">InstCombinerImpl::visitExtractValueInst</a>(<a class="code" href="classllvm_1_1ExtractValueInst.html">ExtractValueInst</a> &amp;EV) {</div>
<div class="line"><a name="l03350"></a><span class="lineno"> 3350</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Agg = EV.<a class="code" href="classllvm_1_1ExtractValueInst.html#ab87e7c5a729885396b3b045ad375e4b8">getAggregateOperand</a>();</div>
<div class="line"><a name="l03351"></a><span class="lineno"> 3351</span>&#160; </div>
<div class="line"><a name="l03352"></a><span class="lineno"> 3352</span>&#160;  <span class="keywordflow">if</span> (!EV.<a class="code" href="classllvm_1_1ExtractValueInst.html#adcb2c5c48153bf5892d78301517fe59b">hasIndices</a>())</div>
<div class="line"><a name="l03353"></a><span class="lineno"> 3353</span>&#160;    <span class="keywordflow">return</span> replaceInstUsesWith(EV, Agg);</div>
<div class="line"><a name="l03354"></a><span class="lineno"> 3354</span>&#160; </div>
<div class="line"><a name="l03355"></a><span class="lineno"> 3355</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V = <a class="code" href="namespacellvm.html#a9442ed00a8dff89558d50f9c150951ff">simplifyExtractValueInst</a>(Agg, EV.<a class="code" href="classllvm_1_1ExtractValueInst.html#a9ba97b7365f7fb9a08ae25982806b2a6">getIndices</a>(),</div>
<div class="line"><a name="l03356"></a><span class="lineno"> 3356</span>&#160;                                          SQ.getWithInstruction(&amp;EV)))</div>
<div class="line"><a name="l03357"></a><span class="lineno"> 3357</span>&#160;    <span class="keywordflow">return</span> replaceInstUsesWith(EV, V);</div>
<div class="line"><a name="l03358"></a><span class="lineno"> 3358</span>&#160; </div>
<div class="line"><a name="l03359"></a><span class="lineno"> 3359</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1InsertValueInst.html">InsertValueInst</a> *<a class="code" href="blake3__impl_8h.html#a78823051d1dad34b9b3d8120112e674d">IV</a> = dyn_cast&lt;InsertValueInst&gt;(Agg)) {</div>
<div class="line"><a name="l03360"></a><span class="lineno"> 3360</span>&#160;    <span class="comment">// We&#39;re extracting from an insertvalue instruction, compare the indices</span></div>
<div class="line"><a name="l03361"></a><span class="lineno"> 3361</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">unsigned</span> *exti, *exte, *insi, *inse;</div>
<div class="line"><a name="l03362"></a><span class="lineno"> 3362</span>&#160;    <span class="keywordflow">for</span> (exti = EV.<a class="code" href="classllvm_1_1ExtractValueInst.html#afcd55a28a257b9ea1708f66671b13e6e">idx_begin</a>(), insi = <a class="code" href="blake3__impl_8h.html#a78823051d1dad34b9b3d8120112e674d">IV</a>-&gt;idx_begin(),</div>
<div class="line"><a name="l03363"></a><span class="lineno"> 3363</span>&#160;         exte = EV.<a class="code" href="classllvm_1_1ExtractValueInst.html#a949ac9df3b15e4f72940cea79d8298b5">idx_end</a>(), inse = <a class="code" href="blake3__impl_8h.html#a78823051d1dad34b9b3d8120112e674d">IV</a>-&gt;idx_end();</div>
<div class="line"><a name="l03364"></a><span class="lineno"> 3364</span>&#160;         exti != exte &amp;&amp; insi != inse;</div>
<div class="line"><a name="l03365"></a><span class="lineno"> 3365</span>&#160;         ++exti, ++insi) {</div>
<div class="line"><a name="l03366"></a><span class="lineno"> 3366</span>&#160;      <span class="keywordflow">if</span> (*insi != *exti)</div>
<div class="line"><a name="l03367"></a><span class="lineno"> 3367</span>&#160;        <span class="comment">// The insert and extract both reference distinctly different elements.</span></div>
<div class="line"><a name="l03368"></a><span class="lineno"> 3368</span>&#160;        <span class="comment">// This means the extract is not influenced by the insert, and we can</span></div>
<div class="line"><a name="l03369"></a><span class="lineno"> 3369</span>&#160;        <span class="comment">// replace the aggregate operand of the extract with the aggregate</span></div>
<div class="line"><a name="l03370"></a><span class="lineno"> 3370</span>&#160;        <span class="comment">// operand of the insert. i.e., replace</span></div>
<div class="line"><a name="l03371"></a><span class="lineno"> 3371</span>&#160;        <span class="comment">// %I = insertvalue { i32, { i32 } } %A, { i32 } { i32 42 }, 1</span></div>
<div class="line"><a name="l03372"></a><span class="lineno"> 3372</span>&#160;        <span class="comment">// %E = extractvalue { i32, { i32 } } %I, 0</span></div>
<div class="line"><a name="l03373"></a><span class="lineno"> 3373</span>&#160;        <span class="comment">// with</span></div>
<div class="line"><a name="l03374"></a><span class="lineno"> 3374</span>&#160;        <span class="comment">// %E = extractvalue { i32, { i32 } } %A, 0</span></div>
<div class="line"><a name="l03375"></a><span class="lineno"> 3375</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1ExtractValueInst.html#a1cccf41f6be0351ccceed2c6447ff04a">ExtractValueInst::Create</a>(<a class="code" href="blake3__impl_8h.html#a78823051d1dad34b9b3d8120112e674d">IV</a>-&gt;getAggregateOperand(),</div>
<div class="line"><a name="l03376"></a><span class="lineno"> 3376</span>&#160;                                        EV.<a class="code" href="classllvm_1_1ExtractValueInst.html#a9ba97b7365f7fb9a08ae25982806b2a6">getIndices</a>());</div>
<div class="line"><a name="l03377"></a><span class="lineno"> 3377</span>&#160;    }</div>
<div class="line"><a name="l03378"></a><span class="lineno"> 3378</span>&#160;    <span class="keywordflow">if</span> (exti == exte &amp;&amp; insi == inse)</div>
<div class="line"><a name="l03379"></a><span class="lineno"> 3379</span>&#160;      <span class="comment">// Both iterators are at the end: Index lists are identical. Replace</span></div>
<div class="line"><a name="l03380"></a><span class="lineno"> 3380</span>&#160;      <span class="comment">// %B = insertvalue { i32, { i32 } } %A, i32 42, 1, 0</span></div>
<div class="line"><a name="l03381"></a><span class="lineno"> 3381</span>&#160;      <span class="comment">// %C = extractvalue { i32, { i32 } } %B, 1, 0</span></div>
<div class="line"><a name="l03382"></a><span class="lineno"> 3382</span>&#160;      <span class="comment">// with &quot;i32 42&quot;</span></div>
<div class="line"><a name="l03383"></a><span class="lineno"> 3383</span>&#160;      <span class="keywordflow">return</span> replaceInstUsesWith(EV, <a class="code" href="blake3__impl_8h.html#a78823051d1dad34b9b3d8120112e674d">IV</a>-&gt;getInsertedValueOperand());</div>
<div class="line"><a name="l03384"></a><span class="lineno"> 3384</span>&#160;    <span class="keywordflow">if</span> (exti == exte) {</div>
<div class="line"><a name="l03385"></a><span class="lineno"> 3385</span>&#160;      <span class="comment">// The extract list is a prefix of the insert list. i.e. replace</span></div>
<div class="line"><a name="l03386"></a><span class="lineno"> 3386</span>&#160;      <span class="comment">// %I = insertvalue { i32, { i32 } } %A, i32 42, 1, 0</span></div>
<div class="line"><a name="l03387"></a><span class="lineno"> 3387</span>&#160;      <span class="comment">// %E = extractvalue { i32, { i32 } } %I, 1</span></div>
<div class="line"><a name="l03388"></a><span class="lineno"> 3388</span>&#160;      <span class="comment">// with</span></div>
<div class="line"><a name="l03389"></a><span class="lineno"> 3389</span>&#160;      <span class="comment">// %X = extractvalue { i32, { i32 } } %A, 1</span></div>
<div class="line"><a name="l03390"></a><span class="lineno"> 3390</span>&#160;      <span class="comment">// %E = insertvalue { i32 } %X, i32 42, 0</span></div>
<div class="line"><a name="l03391"></a><span class="lineno"> 3391</span>&#160;      <span class="comment">// by switching the order of the insert and extract (though the</span></div>
<div class="line"><a name="l03392"></a><span class="lineno"> 3392</span>&#160;      <span class="comment">// insertvalue should be left in, since it may have other uses).</span></div>
<div class="line"><a name="l03393"></a><span class="lineno"> 3393</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *NewEV = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateExtractValue(<a class="code" href="blake3__impl_8h.html#a78823051d1dad34b9b3d8120112e674d">IV</a>-&gt;getAggregateOperand(),</div>
<div class="line"><a name="l03394"></a><span class="lineno"> 3394</span>&#160;                                                EV.<a class="code" href="classllvm_1_1ExtractValueInst.html#a9ba97b7365f7fb9a08ae25982806b2a6">getIndices</a>());</div>
<div class="line"><a name="l03395"></a><span class="lineno"> 3395</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1InsertValueInst.html#a40315c7d4fb418dd3c967898ee070f40">InsertValueInst::Create</a>(NewEV, <a class="code" href="blake3__impl_8h.html#a78823051d1dad34b9b3d8120112e674d">IV</a>-&gt;getInsertedValueOperand(),</div>
<div class="line"><a name="l03396"></a><span class="lineno"> 3396</span>&#160;                                     <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef</a>(insi, inse));</div>
<div class="line"><a name="l03397"></a><span class="lineno"> 3397</span>&#160;    }</div>
<div class="line"><a name="l03398"></a><span class="lineno"> 3398</span>&#160;    <span class="keywordflow">if</span> (insi == inse)</div>
<div class="line"><a name="l03399"></a><span class="lineno"> 3399</span>&#160;      <span class="comment">// The insert list is a prefix of the extract list</span></div>
<div class="line"><a name="l03400"></a><span class="lineno"> 3400</span>&#160;      <span class="comment">// We can simply remove the common indices from the extract and make it</span></div>
<div class="line"><a name="l03401"></a><span class="lineno"> 3401</span>&#160;      <span class="comment">// operate on the inserted value instead of the insertvalue result.</span></div>
<div class="line"><a name="l03402"></a><span class="lineno"> 3402</span>&#160;      <span class="comment">// i.e., replace</span></div>
<div class="line"><a name="l03403"></a><span class="lineno"> 3403</span>&#160;      <span class="comment">// %I = insertvalue { i32, { i32 } } %A, { i32 } { i32 42 }, 1</span></div>
<div class="line"><a name="l03404"></a><span class="lineno"> 3404</span>&#160;      <span class="comment">// %E = extractvalue { i32, { i32 } } %I, 1, 0</span></div>
<div class="line"><a name="l03405"></a><span class="lineno"> 3405</span>&#160;      <span class="comment">// with</span></div>
<div class="line"><a name="l03406"></a><span class="lineno"> 3406</span>&#160;      <span class="comment">// %E extractvalue { i32 } { i32 42 }, 0</span></div>
<div class="line"><a name="l03407"></a><span class="lineno"> 3407</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1ExtractValueInst.html#a1cccf41f6be0351ccceed2c6447ff04a">ExtractValueInst::Create</a>(<a class="code" href="blake3__impl_8h.html#a78823051d1dad34b9b3d8120112e674d">IV</a>-&gt;getInsertedValueOperand(),</div>
<div class="line"><a name="l03408"></a><span class="lineno"> 3408</span>&#160;                                      <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef</a>(exti, exte));</div>
<div class="line"><a name="l03409"></a><span class="lineno"> 3409</span>&#160;  }</div>
<div class="line"><a name="l03410"></a><span class="lineno"> 3410</span>&#160; </div>
<div class="line"><a name="l03411"></a><span class="lineno"> 3411</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *R = foldExtractOfOverflowIntrinsic(EV))</div>
<div class="line"><a name="l03412"></a><span class="lineno"> 3412</span>&#160;    <span class="keywordflow">return</span> R;</div>
<div class="line"><a name="l03413"></a><span class="lineno"> 3413</span>&#160; </div>
<div class="line"><a name="l03414"></a><span class="lineno"> 3414</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a> *L = dyn_cast&lt;LoadInst&gt;(Agg)) {</div>
<div class="line"><a name="l03415"></a><span class="lineno"> 3415</span>&#160;    <span class="comment">// If the (non-volatile) load only has one use, we can rewrite this to a</span></div>
<div class="line"><a name="l03416"></a><span class="lineno"> 3416</span>&#160;    <span class="comment">// load from a GEP. This reduces the size of the load. If a load is used</span></div>
<div class="line"><a name="l03417"></a><span class="lineno"> 3417</span>&#160;    <span class="comment">// only by extractvalue instructions then this either must have been</span></div>
<div class="line"><a name="l03418"></a><span class="lineno"> 3418</span>&#160;    <span class="comment">// optimized before, or it is a struct with padding, in which case we</span></div>
<div class="line"><a name="l03419"></a><span class="lineno"> 3419</span>&#160;    <span class="comment">// don&#39;t want to do the transformation as it loses padding knowledge.</span></div>
<div class="line"><a name="l03420"></a><span class="lineno"> 3420</span>&#160;    <span class="keywordflow">if</span> (L-&gt;isSimple() &amp;&amp; L-&gt;hasOneUse()) {</div>
<div class="line"><a name="l03421"></a><span class="lineno"> 3421</span>&#160;      <span class="comment">// extractvalue has integer indices, getelementptr has Value*s. Convert.</span></div>
<div class="line"><a name="l03422"></a><span class="lineno"> 3422</span>&#160;      <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Value*, 4&gt;</a> Indices;</div>
<div class="line"><a name="l03423"></a><span class="lineno"> 3423</span>&#160;      <span class="comment">// Prefix an i32 0 since we need the first element.</span></div>
<div class="line"><a name="l03424"></a><span class="lineno"> 3424</span>&#160;      Indices.push_back(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getInt32(0));</div>
<div class="line"><a name="l03425"></a><span class="lineno"> 3425</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> Idx : EV.<a class="code" href="classllvm_1_1ExtractValueInst.html#ae7f10273fba575e1cb0379621c5330ad">indices</a>())</div>
<div class="line"><a name="l03426"></a><span class="lineno"> 3426</span>&#160;        Indices.push_back(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getInt32(Idx));</div>
<div class="line"><a name="l03427"></a><span class="lineno"> 3427</span>&#160; </div>
<div class="line"><a name="l03428"></a><span class="lineno"> 3428</span>&#160;      <span class="comment">// We need to insert these at the location of the old load, not at that of</span></div>
<div class="line"><a name="l03429"></a><span class="lineno"> 3429</span>&#160;      <span class="comment">// the extractvalue.</span></div>
<div class="line"><a name="l03430"></a><span class="lineno"> 3430</span>&#160;      <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(L);</div>
<div class="line"><a name="l03431"></a><span class="lineno"> 3431</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateInBoundsGEP(L-&gt;getType(),</div>
<div class="line"><a name="l03432"></a><span class="lineno"> 3432</span>&#160;                                             L-&gt;getPointerOperand(), Indices);</div>
<div class="line"><a name="l03433"></a><span class="lineno"> 3433</span>&#160;      <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="DetailedRecordsBackend_8cpp.html#a4fc34b120ed3bd1120c1eb36abbcd6af">NL</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateLoad(EV.<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>(), <a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>);</div>
<div class="line"><a name="l03434"></a><span class="lineno"> 3434</span>&#160;      <span class="comment">// Whatever aliasing information we had for the orignal load must also</span></div>
<div class="line"><a name="l03435"></a><span class="lineno"> 3435</span>&#160;      <span class="comment">// hold for the smaller load, so propagate the annotations.</span></div>
<div class="line"><a name="l03436"></a><span class="lineno"> 3436</span>&#160;      <a class="code" href="DetailedRecordsBackend_8cpp.html#a4fc34b120ed3bd1120c1eb36abbcd6af">NL</a>-&gt;setAAMetadata(L-&gt;getAAMetadata());</div>
<div class="line"><a name="l03437"></a><span class="lineno"> 3437</span>&#160;      <span class="comment">// Returning the load directly will cause the main loop to insert it in</span></div>
<div class="line"><a name="l03438"></a><span class="lineno"> 3438</span>&#160;      <span class="comment">// the wrong spot, so use replaceInstUsesWith().</span></div>
<div class="line"><a name="l03439"></a><span class="lineno"> 3439</span>&#160;      <span class="keywordflow">return</span> replaceInstUsesWith(EV, <a class="code" href="DetailedRecordsBackend_8cpp.html#a4fc34b120ed3bd1120c1eb36abbcd6af">NL</a>);</div>
<div class="line"><a name="l03440"></a><span class="lineno"> 3440</span>&#160;    }</div>
<div class="line"><a name="l03441"></a><span class="lineno"> 3441</span>&#160;  }</div>
<div class="line"><a name="l03442"></a><span class="lineno"> 3442</span>&#160; </div>
<div class="line"><a name="l03443"></a><span class="lineno"> 3443</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *PN = dyn_cast&lt;PHINode&gt;(Agg))</div>
<div class="line"><a name="l03444"></a><span class="lineno"> 3444</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Res = foldOpIntoPhi(EV, PN))</div>
<div class="line"><a name="l03445"></a><span class="lineno"> 3445</span>&#160;      <span class="keywordflow">return</span> Res;</div>
<div class="line"><a name="l03446"></a><span class="lineno"> 3446</span>&#160; </div>
<div class="line"><a name="l03447"></a><span class="lineno"> 3447</span>&#160;  <span class="comment">// We could simplify extracts from other values. Note that nested extracts may</span></div>
<div class="line"><a name="l03448"></a><span class="lineno"> 3448</span>&#160;  <span class="comment">// already be simplified implicitly by the above: extract (extract (insert) )</span></div>
<div class="line"><a name="l03449"></a><span class="lineno"> 3449</span>&#160;  <span class="comment">// will be translated into extract ( insert ( extract ) ) first and then just</span></div>
<div class="line"><a name="l03450"></a><span class="lineno"> 3450</span>&#160;  <span class="comment">// the value inserted, if appropriate. Similarly for extracts from single-use</span></div>
<div class="line"><a name="l03451"></a><span class="lineno"> 3451</span>&#160;  <span class="comment">// loads: extract (extract (load)) will be translated to extract (load (gep))</span></div>
<div class="line"><a name="l03452"></a><span class="lineno"> 3452</span>&#160;  <span class="comment">// and if again single-use then via load (gep (gep)) to load (gep).</span></div>
<div class="line"><a name="l03453"></a><span class="lineno"> 3453</span>&#160;  <span class="comment">// However, double extracts from e.g. function arguments or return values</span></div>
<div class="line"><a name="l03454"></a><span class="lineno"> 3454</span>&#160;  <span class="comment">// aren&#39;t handled yet.</span></div>
<div class="line"><a name="l03455"></a><span class="lineno"> 3455</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l03456"></a><span class="lineno"> 3456</span>&#160;}</div>
<div class="line"><a name="l03457"></a><span class="lineno"> 3457</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l03458"></a><span class="lineno"> 3458</span>&#160;<span class="comment">/// Return &#39;true&#39; if the given typeinfo will match anything.</span></div>
<div class="line"><a name="l03459"></a><span class="lineno"><a class="line" href="InstructionCombining_8cpp.html#ae4125133d683a4652b396ec3b18cd92e"> 3459</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="InstructionCombining_8cpp.html#ae4125133d683a4652b396ec3b18cd92e">isCatchAll</a>(<a class="code" href="namespacellvm.html#a5d56157a385f8cd7d3e54ed87da1ba6a">EHPersonality</a> Personality, <a class="code" href="classllvm_1_1Constant.html">Constant</a> *TypeInfo) {</div>
<div class="line"><a name="l03460"></a><span class="lineno"> 3460</span>&#160;  <span class="keywordflow">switch</span> (Personality) {</div>
<div class="line"><a name="l03461"></a><span class="lineno"> 3461</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm.html#a5d56157a385f8cd7d3e54ed87da1ba6aa4c0484152e8ccb276b690a1f664b2480">EHPersonality::GNU_C</a>:</div>
<div class="line"><a name="l03462"></a><span class="lineno"> 3462</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm.html#a5d56157a385f8cd7d3e54ed87da1ba6aae83ea70f8c69153f8fb6aed8edc63ce8">EHPersonality::GNU_C_SjLj</a>:</div>
<div class="line"><a name="l03463"></a><span class="lineno"> 3463</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm.html#a5d56157a385f8cd7d3e54ed87da1ba6aaf5e265d607cb720058fc166e00083fe8">EHPersonality::Rust</a>:</div>
<div class="line"><a name="l03464"></a><span class="lineno"> 3464</span>&#160;    <span class="comment">// The GCC C EH and Rust personality only exists to support cleanups, so</span></div>
<div class="line"><a name="l03465"></a><span class="lineno"> 3465</span>&#160;    <span class="comment">// it&#39;s not clear what the semantics of catch clauses are.</span></div>
<div class="line"><a name="l03466"></a><span class="lineno"> 3466</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l03467"></a><span class="lineno"> 3467</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm.html#a5d56157a385f8cd7d3e54ed87da1ba6aa88183b946cc5f0e8c96b2e66e1c74a7e">EHPersonality::Unknown</a>:</div>
<div class="line"><a name="l03468"></a><span class="lineno"> 3468</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l03469"></a><span class="lineno"> 3469</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm.html#a5d56157a385f8cd7d3e54ed87da1ba6aa4d1f6c49eb4a44a6cc14725ba0cfe658">EHPersonality::GNU_Ada</a>:</div>
<div class="line"><a name="l03470"></a><span class="lineno"> 3470</span>&#160;    <span class="comment">// While __gnat_all_others_value will match any Ada exception, it doesn&#39;t</span></div>
<div class="line"><a name="l03471"></a><span class="lineno"> 3471</span>&#160;    <span class="comment">// match foreign exceptions (or didn&#39;t, before gcc-4.7).</span></div>
<div class="line"><a name="l03472"></a><span class="lineno"> 3472</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l03473"></a><span class="lineno"> 3473</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm.html#a5d56157a385f8cd7d3e54ed87da1ba6aac19ef91dbd2fa5148e96a750c2b5c4cb">EHPersonality::GNU_CXX</a>:</div>
<div class="line"><a name="l03474"></a><span class="lineno"> 3474</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm.html#a5d56157a385f8cd7d3e54ed87da1ba6aa827e35d1ece0eb007816f52f42e87007">EHPersonality::GNU_CXX_SjLj</a>:</div>
<div class="line"><a name="l03475"></a><span class="lineno"> 3475</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm.html#a5d56157a385f8cd7d3e54ed87da1ba6aa395fbfe74c30a81fe4f743ba95964c86">EHPersonality::GNU_ObjC</a>:</div>
<div class="line"><a name="l03476"></a><span class="lineno"> 3476</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm.html#a5d56157a385f8cd7d3e54ed87da1ba6aa1d0ce965d5884b3d11d6f26fac012613">EHPersonality::MSVC_X86SEH</a>:</div>
<div class="line"><a name="l03477"></a><span class="lineno"> 3477</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm.html#a5d56157a385f8cd7d3e54ed87da1ba6aa5fe2b2d01019e4b6a9828d4b9820a7ce">EHPersonality::MSVC_TableSEH</a>:</div>
<div class="line"><a name="l03478"></a><span class="lineno"> 3478</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm.html#a5d56157a385f8cd7d3e54ed87da1ba6aab34bedfd8d86f0adbefe4ae0e708f428">EHPersonality::MSVC_CXX</a>:</div>
<div class="line"><a name="l03479"></a><span class="lineno"> 3479</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm.html#a5d56157a385f8cd7d3e54ed87da1ba6aa05b0e25c98ba4300ca28989a35dab72a">EHPersonality::CoreCLR</a>:</div>
<div class="line"><a name="l03480"></a><span class="lineno"> 3480</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm.html#a5d56157a385f8cd7d3e54ed87da1ba6aa7939c43653700c52daa7a68a575c3ec5">EHPersonality::Wasm_CXX</a>:</div>
<div class="line"><a name="l03481"></a><span class="lineno"> 3481</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm.html#a5d56157a385f8cd7d3e54ed87da1ba6aac3cb0fb563149ec44c47b526c7b0a0d2">EHPersonality::XL_CXX</a>:</div>
<div class="line"><a name="l03482"></a><span class="lineno"> 3482</span>&#160;    <span class="keywordflow">return</span> TypeInfo-&gt;<a class="code" href="classllvm_1_1Constant.html#ae4b6abe77abf42fb02081a6cc41a0132">isNullValue</a>();</div>
<div class="line"><a name="l03483"></a><span class="lineno"> 3483</span>&#160;  }</div>
<div class="line"><a name="l03484"></a><span class="lineno"> 3484</span>&#160;  <a class="code" href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;invalid enum&quot;</span>);</div>
<div class="line"><a name="l03485"></a><span class="lineno"> 3485</span>&#160;}</div>
<div class="line"><a name="l03486"></a><span class="lineno"> 3486</span>&#160; </div>
<div class="line"><a name="l03487"></a><span class="lineno"><a class="line" href="InstructionCombining_8cpp.html#a13d41ea63582902162e0efd8a78a5ad5"> 3487</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="InstructionCombining_8cpp.html#a13d41ea63582902162e0efd8a78a5ad5">shorter_filter</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <span class="keyword">const</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>) {</div>
<div class="line"><a name="l03488"></a><span class="lineno"> 3488</span>&#160;  <span class="keywordflow">return</span></div>
<div class="line"><a name="l03489"></a><span class="lineno"> 3489</span>&#160;    cast&lt;ArrayType&gt;(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>())-&gt;getNumElements()</div>
<div class="line"><a name="l03490"></a><span class="lineno"> 3490</span>&#160;  &lt;</div>
<div class="line"><a name="l03491"></a><span class="lineno"> 3491</span>&#160;    cast&lt;ArrayType&gt;(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>())-&gt;getNumElements();</div>
<div class="line"><a name="l03492"></a><span class="lineno"> 3492</span>&#160;}</div>
<div class="line"><a name="l03493"></a><span class="lineno"> 3493</span>&#160; </div>
<div class="line"><a name="l03494"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombinerImpl.html#a7af99fa2202fcc7db245865dd1bcec1f"> 3494</a></span>&#160;<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombinerImpl.html#a7af99fa2202fcc7db245865dd1bcec1f">InstCombinerImpl::visitLandingPadInst</a>(<a class="code" href="classllvm_1_1LandingPadInst.html">LandingPadInst</a> &amp;LI) {</div>
<div class="line"><a name="l03495"></a><span class="lineno"> 3495</span>&#160;  <span class="comment">// The logic here should be correct for any real-world personality function.</span></div>
<div class="line"><a name="l03496"></a><span class="lineno"> 3496</span>&#160;  <span class="comment">// However if that turns out not to be true, the offending logic can always</span></div>
<div class="line"><a name="l03497"></a><span class="lineno"> 3497</span>&#160;  <span class="comment">// be conditioned on the personality function, like the catch-all logic is.</span></div>
<div class="line"><a name="l03498"></a><span class="lineno"> 3498</span>&#160;  <a class="code" href="namespacellvm.html#a5d56157a385f8cd7d3e54ed87da1ba6a">EHPersonality</a> Personality =</div>
<div class="line"><a name="l03499"></a><span class="lineno"> 3499</span>&#160;      <a class="code" href="namespacellvm.html#a8d508f23e2580095561902c39911fb9b">classifyEHPersonality</a>(LI.<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>()-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a38bee869ad41aebfef3de2641b12004c">getParent</a>()-&gt;<a class="code" href="classllvm_1_1Function.html#a6f77e4e800ba4dffd63e8ddb330062aa">getPersonalityFn</a>());</div>
<div class="line"><a name="l03500"></a><span class="lineno"> 3500</span>&#160; </div>
<div class="line"><a name="l03501"></a><span class="lineno"> 3501</span>&#160;  <span class="comment">// Simplify the list of clauses, eg by removing repeated catch clauses</span></div>
<div class="line"><a name="l03502"></a><span class="lineno"> 3502</span>&#160;  <span class="comment">// (these are often created by inlining).</span></div>
<div class="line"><a name="l03503"></a><span class="lineno"> 3503</span>&#160;  <span class="keywordtype">bool</span> MakeNewInstruction = <span class="keyword">false</span>; <span class="comment">// If true, recreate using the following:</span></div>
<div class="line"><a name="l03504"></a><span class="lineno"> 3504</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Constant *, 16&gt;</a> NewClauses; <span class="comment">// - Clauses for the new instruction;</span></div>
<div class="line"><a name="l03505"></a><span class="lineno"> 3505</span>&#160;  <span class="keywordtype">bool</span> CleanupFlag = LI.<a class="code" href="classllvm_1_1LandingPadInst.html#a0966e2f38f20609a643b5d5e3da8bae5">isCleanup</a>();   <span class="comment">// - The new instruction is a cleanup.</span></div>
<div class="line"><a name="l03506"></a><span class="lineno"> 3506</span>&#160; </div>
<div class="line"><a name="l03507"></a><span class="lineno"> 3507</span>&#160;  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;Value *, 16&gt;</a> AlreadyCaught; <span class="comment">// Typeinfos known caught already.</span></div>
<div class="line"><a name="l03508"></a><span class="lineno"> 3508</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a> = LI.<a class="code" href="classllvm_1_1LandingPadInst.html#a1d25e478c9de2656ce4c793a8b80e537">getNumClauses</a>(); <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a>; ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l03509"></a><span class="lineno"> 3509</span>&#160;    <span class="keywordtype">bool</span> isLastClause = <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> + 1 == <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a>;</div>
<div class="line"><a name="l03510"></a><span class="lineno"> 3510</span>&#160;    <span class="keywordflow">if</span> (LI.<a class="code" href="classllvm_1_1LandingPadInst.html#a74e94530fdc21fe0a7eb5465437c980f">isCatch</a>(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)) {</div>
<div class="line"><a name="l03511"></a><span class="lineno"> 3511</span>&#160;      <span class="comment">// A catch clause.</span></div>
<div class="line"><a name="l03512"></a><span class="lineno"> 3512</span>&#160;      <a class="code" href="classllvm_1_1Constant.html">Constant</a> *CatchClause = LI.<a class="code" href="classllvm_1_1LandingPadInst.html#a56a8919a6120a8c398b382e41c8b3f1e">getClause</a>(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div>
<div class="line"><a name="l03513"></a><span class="lineno"> 3513</span>&#160;      <a class="code" href="classllvm_1_1Constant.html">Constant</a> *TypeInfo = CatchClause-&gt;<a class="code" href="classllvm_1_1Constant.html#a0ebfdc2c511407c9ba517ccde6cad85f">stripPointerCasts</a>();</div>
<div class="line"><a name="l03514"></a><span class="lineno"> 3514</span>&#160; </div>
<div class="line"><a name="l03515"></a><span class="lineno"> 3515</span>&#160;      <span class="comment">// If we already saw this clause, there is no point in having a second</span></div>
<div class="line"><a name="l03516"></a><span class="lineno"> 3516</span>&#160;      <span class="comment">// copy of it.</span></div>
<div class="line"><a name="l03517"></a><span class="lineno"> 3517</span>&#160;      <span class="keywordflow">if</span> (AlreadyCaught.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(TypeInfo).second) {</div>
<div class="line"><a name="l03518"></a><span class="lineno"> 3518</span>&#160;        <span class="comment">// This catch clause was not already seen.</span></div>
<div class="line"><a name="l03519"></a><span class="lineno"> 3519</span>&#160;        NewClauses.push_back(CatchClause);</div>
<div class="line"><a name="l03520"></a><span class="lineno"> 3520</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03521"></a><span class="lineno"> 3521</span>&#160;        <span class="comment">// Repeated catch clause - drop the redundant copy.</span></div>
<div class="line"><a name="l03522"></a><span class="lineno"> 3522</span>&#160;        MakeNewInstruction = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03523"></a><span class="lineno"> 3523</span>&#160;      }</div>
<div class="line"><a name="l03524"></a><span class="lineno"> 3524</span>&#160; </div>
<div class="line"><a name="l03525"></a><span class="lineno"> 3525</span>&#160;      <span class="comment">// If this is a catch-all then there is no point in keeping any following</span></div>
<div class="line"><a name="l03526"></a><span class="lineno"> 3526</span>&#160;      <span class="comment">// clauses or marking the landingpad as having a cleanup.</span></div>
<div class="line"><a name="l03527"></a><span class="lineno"> 3527</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="InstructionCombining_8cpp.html#ae4125133d683a4652b396ec3b18cd92e">isCatchAll</a>(Personality, TypeInfo)) {</div>
<div class="line"><a name="l03528"></a><span class="lineno"> 3528</span>&#160;        <span class="keywordflow">if</span> (!isLastClause)</div>
<div class="line"><a name="l03529"></a><span class="lineno"> 3529</span>&#160;          MakeNewInstruction = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03530"></a><span class="lineno"> 3530</span>&#160;        CleanupFlag = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03531"></a><span class="lineno"> 3531</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03532"></a><span class="lineno"> 3532</span>&#160;      }</div>
<div class="line"><a name="l03533"></a><span class="lineno"> 3533</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03534"></a><span class="lineno"> 3534</span>&#160;      <span class="comment">// A filter clause.  If any of the filter elements were already caught</span></div>
<div class="line"><a name="l03535"></a><span class="lineno"> 3535</span>&#160;      <span class="comment">// then they can be dropped from the filter.  It is tempting to try to</span></div>
<div class="line"><a name="l03536"></a><span class="lineno"> 3536</span>&#160;      <span class="comment">// exploit the filter further by saying that any typeinfo that does not</span></div>
<div class="line"><a name="l03537"></a><span class="lineno"> 3537</span>&#160;      <span class="comment">// occur in the filter can&#39;t be caught later (and thus can be dropped).</span></div>
<div class="line"><a name="l03538"></a><span class="lineno"> 3538</span>&#160;      <span class="comment">// However this would be wrong, since typeinfos can match without being</span></div>
<div class="line"><a name="l03539"></a><span class="lineno"> 3539</span>&#160;      <span class="comment">// equal (for example if one represents a C++ class, and the other some</span></div>
<div class="line"><a name="l03540"></a><span class="lineno"> 3540</span>&#160;      <span class="comment">// class derived from it).</span></div>
<div class="line"><a name="l03541"></a><span class="lineno"> 3541</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(LI.<a class="code" href="classllvm_1_1LandingPadInst.html#a794866f5c0f6877de0b1dd863ceaf93e">isFilter</a>(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) &amp;&amp; <span class="stringliteral">&quot;Unsupported landingpad clause!&quot;</span>);</div>
<div class="line"><a name="l03542"></a><span class="lineno"> 3542</span>&#160;      <a class="code" href="classllvm_1_1Constant.html">Constant</a> *FilterClause = LI.<a class="code" href="classllvm_1_1LandingPadInst.html#a56a8919a6120a8c398b382e41c8b3f1e">getClause</a>(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div>
<div class="line"><a name="l03543"></a><span class="lineno"> 3543</span>&#160;      <a class="code" href="classllvm_1_1ArrayType.html">ArrayType</a> *FilterType = cast&lt;ArrayType&gt;(FilterClause-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>());</div>
<div class="line"><a name="l03544"></a><span class="lineno"> 3544</span>&#160;      <span class="keywordtype">unsigned</span> NumTypeInfos = FilterType-&gt;<a class="code" href="classllvm_1_1ArrayType.html#a1c35bd7a4fa08845607033aecc94423d">getNumElements</a>();</div>
<div class="line"><a name="l03545"></a><span class="lineno"> 3545</span>&#160; </div>
<div class="line"><a name="l03546"></a><span class="lineno"> 3546</span>&#160;      <span class="comment">// An empty filter catches everything, so there is no point in keeping any</span></div>
<div class="line"><a name="l03547"></a><span class="lineno"> 3547</span>&#160;      <span class="comment">// following clauses or marking the landingpad as having a cleanup.  By</span></div>
<div class="line"><a name="l03548"></a><span class="lineno"> 3548</span>&#160;      <span class="comment">// dealing with this case here the following code is made a bit simpler.</span></div>
<div class="line"><a name="l03549"></a><span class="lineno"> 3549</span>&#160;      <span class="keywordflow">if</span> (!NumTypeInfos) {</div>
<div class="line"><a name="l03550"></a><span class="lineno"> 3550</span>&#160;        NewClauses.push_back(FilterClause);</div>
<div class="line"><a name="l03551"></a><span class="lineno"> 3551</span>&#160;        <span class="keywordflow">if</span> (!isLastClause)</div>
<div class="line"><a name="l03552"></a><span class="lineno"> 3552</span>&#160;          MakeNewInstruction = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03553"></a><span class="lineno"> 3553</span>&#160;        CleanupFlag = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03554"></a><span class="lineno"> 3554</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03555"></a><span class="lineno"> 3555</span>&#160;      }</div>
<div class="line"><a name="l03556"></a><span class="lineno"> 3556</span>&#160; </div>
<div class="line"><a name="l03557"></a><span class="lineno"> 3557</span>&#160;      <span class="keywordtype">bool</span> MakeNewFilter = <span class="keyword">false</span>; <span class="comment">// If true, make a new filter.</span></div>
<div class="line"><a name="l03558"></a><span class="lineno"> 3558</span>&#160;      <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Constant *, 16&gt;</a> NewFilterElts; <span class="comment">// New elements.</span></div>
<div class="line"><a name="l03559"></a><span class="lineno"> 3559</span>&#160;      <span class="keywordflow">if</span> (isa&lt;ConstantAggregateZero&gt;(FilterClause)) {</div>
<div class="line"><a name="l03560"></a><span class="lineno"> 3560</span>&#160;        <span class="comment">// Not an empty filter - it contains at least one null typeinfo.</span></div>
<div class="line"><a name="l03561"></a><span class="lineno"> 3561</span>&#160;        <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(NumTypeInfos &gt; 0 &amp;&amp; <span class="stringliteral">&quot;Should have handled empty filter already!&quot;</span>);</div>
<div class="line"><a name="l03562"></a><span class="lineno"> 3562</span>&#160;        <a class="code" href="classllvm_1_1Constant.html">Constant</a> *TypeInfo =</div>
<div class="line"><a name="l03563"></a><span class="lineno"> 3563</span>&#160;          <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(FilterType-&gt;<a class="code" href="classllvm_1_1ArrayType.html#a7e5e750381e3dfafd746e95a0843bff7">getElementType</a>());</div>
<div class="line"><a name="l03564"></a><span class="lineno"> 3564</span>&#160;        <span class="comment">// If this typeinfo is a catch-all then the filter can never match.</span></div>
<div class="line"><a name="l03565"></a><span class="lineno"> 3565</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="InstructionCombining_8cpp.html#ae4125133d683a4652b396ec3b18cd92e">isCatchAll</a>(Personality, TypeInfo)) {</div>
<div class="line"><a name="l03566"></a><span class="lineno"> 3566</span>&#160;          <span class="comment">// Throw the filter away.</span></div>
<div class="line"><a name="l03567"></a><span class="lineno"> 3567</span>&#160;          MakeNewInstruction = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03568"></a><span class="lineno"> 3568</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l03569"></a><span class="lineno"> 3569</span>&#160;        }</div>
<div class="line"><a name="l03570"></a><span class="lineno"> 3570</span>&#160; </div>
<div class="line"><a name="l03571"></a><span class="lineno"> 3571</span>&#160;        <span class="comment">// There is no point in having multiple copies of this typeinfo, so</span></div>
<div class="line"><a name="l03572"></a><span class="lineno"> 3572</span>&#160;        <span class="comment">// discard all but the first copy if there is more than one.</span></div>
<div class="line"><a name="l03573"></a><span class="lineno"> 3573</span>&#160;        NewFilterElts.push_back(TypeInfo);</div>
<div class="line"><a name="l03574"></a><span class="lineno"> 3574</span>&#160;        <span class="keywordflow">if</span> (NumTypeInfos &gt; 1)</div>
<div class="line"><a name="l03575"></a><span class="lineno"> 3575</span>&#160;          MakeNewFilter = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03576"></a><span class="lineno"> 3576</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03577"></a><span class="lineno"> 3577</span>&#160;        <a class="code" href="classllvm_1_1ConstantArray.html">ConstantArray</a> *<a class="code" href="namespacellvm.html#aaee5189b9c4db9ad666a88abaf1ee0c4ad7778d0c64b6ba21494c97f77a66885a">Filter</a> = cast&lt;ConstantArray&gt;(FilterClause);</div>
<div class="line"><a name="l03578"></a><span class="lineno"> 3578</span>&#160;        <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;Value *, 16&gt;</a> SeenInFilter; <span class="comment">// For uniquing the elements.</span></div>
<div class="line"><a name="l03579"></a><span class="lineno"> 3579</span>&#160;        NewFilterElts.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a499ea32ca1b8d16cedfe01d1e5b08f29">reserve</a>(NumTypeInfos);</div>
<div class="line"><a name="l03580"></a><span class="lineno"> 3580</span>&#160; </div>
<div class="line"><a name="l03581"></a><span class="lineno"> 3581</span>&#160;        <span class="comment">// Remove any filter elements that were already caught or that already</span></div>
<div class="line"><a name="l03582"></a><span class="lineno"> 3582</span>&#160;        <span class="comment">// occurred in the filter.  While there, see if any of the elements are</span></div>
<div class="line"><a name="l03583"></a><span class="lineno"> 3583</span>&#160;        <span class="comment">// catch-alls.  If so, the filter can be discarded.</span></div>
<div class="line"><a name="l03584"></a><span class="lineno"> 3584</span>&#160;        <span class="keywordtype">bool</span> SawCatchAll = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03585"></a><span class="lineno"> 3585</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#a3a76669632041022e6976766a22bd2b0">j</a> = 0; <a class="code" href="lib_2Target_2README_8txt.html#a3a76669632041022e6976766a22bd2b0">j</a> != NumTypeInfos; ++<a class="code" href="lib_2Target_2README_8txt.html#a3a76669632041022e6976766a22bd2b0">j</a>) {</div>
<div class="line"><a name="l03586"></a><span class="lineno"> 3586</span>&#160;          <a class="code" href="classllvm_1_1Constant.html">Constant</a> *Elt = <a class="code" href="namespacellvm.html#aaee5189b9c4db9ad666a88abaf1ee0c4ad7778d0c64b6ba21494c97f77a66885a">Filter</a>-&gt;getOperand(<a class="code" href="lib_2Target_2README_8txt.html#a3a76669632041022e6976766a22bd2b0">j</a>);</div>
<div class="line"><a name="l03587"></a><span class="lineno"> 3587</span>&#160;          <a class="code" href="classllvm_1_1Constant.html">Constant</a> *TypeInfo = Elt-&gt;<a class="code" href="classllvm_1_1Constant.html#a0ebfdc2c511407c9ba517ccde6cad85f">stripPointerCasts</a>();</div>
<div class="line"><a name="l03588"></a><span class="lineno"> 3588</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="InstructionCombining_8cpp.html#ae4125133d683a4652b396ec3b18cd92e">isCatchAll</a>(Personality, TypeInfo)) {</div>
<div class="line"><a name="l03589"></a><span class="lineno"> 3589</span>&#160;            <span class="comment">// This element is a catch-all.  Bail out, noting this fact.</span></div>
<div class="line"><a name="l03590"></a><span class="lineno"> 3590</span>&#160;            SawCatchAll = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03591"></a><span class="lineno"> 3591</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03592"></a><span class="lineno"> 3592</span>&#160;          }</div>
<div class="line"><a name="l03593"></a><span class="lineno"> 3593</span>&#160; </div>
<div class="line"><a name="l03594"></a><span class="lineno"> 3594</span>&#160;          <span class="comment">// Even if we&#39;ve seen a type in a catch clause, we don&#39;t want to</span></div>
<div class="line"><a name="l03595"></a><span class="lineno"> 3595</span>&#160;          <span class="comment">// remove it from the filter.  An unexpected type handler may be</span></div>
<div class="line"><a name="l03596"></a><span class="lineno"> 3596</span>&#160;          <span class="comment">// set up for a call site which throws an exception of the same</span></div>
<div class="line"><a name="l03597"></a><span class="lineno"> 3597</span>&#160;          <span class="comment">// type caught.  In order for the exception thrown by the unexpected</span></div>
<div class="line"><a name="l03598"></a><span class="lineno"> 3598</span>&#160;          <span class="comment">// handler to propagate correctly, the filter must be correctly</span></div>
<div class="line"><a name="l03599"></a><span class="lineno"> 3599</span>&#160;          <span class="comment">// described for the call site.</span></div>
<div class="line"><a name="l03600"></a><span class="lineno"> 3600</span>&#160;          <span class="comment">//</span></div>
<div class="line"><a name="l03601"></a><span class="lineno"> 3601</span>&#160;          <span class="comment">// Example:</span></div>
<div class="line"><a name="l03602"></a><span class="lineno"> 3602</span>&#160;          <span class="comment">//</span></div>
<div class="line"><a name="l03603"></a><span class="lineno"> 3603</span>&#160;          <span class="comment">// void unexpected() { throw 1;}</span></div>
<div class="line"><a name="l03604"></a><span class="lineno"> 3604</span>&#160;          <span class="comment">// void foo() throw (int) {</span></div>
<div class="line"><a name="l03605"></a><span class="lineno"> 3605</span>&#160;          <span class="comment">//   std::set_unexpected(unexpected);</span></div>
<div class="line"><a name="l03606"></a><span class="lineno"> 3606</span>&#160;          <span class="comment">//   try {</span></div>
<div class="line"><a name="l03607"></a><span class="lineno"> 3607</span>&#160;          <span class="comment">//     throw 2.0;</span></div>
<div class="line"><a name="l03608"></a><span class="lineno"> 3608</span>&#160;          <span class="comment">//   } catch (int i) {}</span></div>
<div class="line"><a name="l03609"></a><span class="lineno"> 3609</span>&#160;          <span class="comment">// }</span></div>
<div class="line"><a name="l03610"></a><span class="lineno"> 3610</span>&#160; </div>
<div class="line"><a name="l03611"></a><span class="lineno"> 3611</span>&#160;          <span class="comment">// There is no point in having multiple copies of the same typeinfo in</span></div>
<div class="line"><a name="l03612"></a><span class="lineno"> 3612</span>&#160;          <span class="comment">// a filter, so only add it if we didn&#39;t already.</span></div>
<div class="line"><a name="l03613"></a><span class="lineno"> 3613</span>&#160;          <span class="keywordflow">if</span> (SeenInFilter.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(TypeInfo).second)</div>
<div class="line"><a name="l03614"></a><span class="lineno"> 3614</span>&#160;            NewFilterElts.push_back(cast&lt;Constant&gt;(Elt));</div>
<div class="line"><a name="l03615"></a><span class="lineno"> 3615</span>&#160;        }</div>
<div class="line"><a name="l03616"></a><span class="lineno"> 3616</span>&#160;        <span class="comment">// A filter containing a catch-all cannot match anything by definition.</span></div>
<div class="line"><a name="l03617"></a><span class="lineno"> 3617</span>&#160;        <span class="keywordflow">if</span> (SawCatchAll) {</div>
<div class="line"><a name="l03618"></a><span class="lineno"> 3618</span>&#160;          <span class="comment">// Throw the filter away.</span></div>
<div class="line"><a name="l03619"></a><span class="lineno"> 3619</span>&#160;          MakeNewInstruction = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03620"></a><span class="lineno"> 3620</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l03621"></a><span class="lineno"> 3621</span>&#160;        }</div>
<div class="line"><a name="l03622"></a><span class="lineno"> 3622</span>&#160; </div>
<div class="line"><a name="l03623"></a><span class="lineno"> 3623</span>&#160;        <span class="comment">// If we dropped something from the filter, make a new one.</span></div>
<div class="line"><a name="l03624"></a><span class="lineno"> 3624</span>&#160;        <span class="keywordflow">if</span> (NewFilterElts.size() &lt; NumTypeInfos)</div>
<div class="line"><a name="l03625"></a><span class="lineno"> 3625</span>&#160;          MakeNewFilter = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03626"></a><span class="lineno"> 3626</span>&#160;      }</div>
<div class="line"><a name="l03627"></a><span class="lineno"> 3627</span>&#160;      <span class="keywordflow">if</span> (MakeNewFilter) {</div>
<div class="line"><a name="l03628"></a><span class="lineno"> 3628</span>&#160;        FilterType = <a class="code" href="classllvm_1_1ArrayType.html#adf411edc4f135b570ab218079474ce77">ArrayType::get</a>(FilterType-&gt;<a class="code" href="classllvm_1_1ArrayType.html#a7e5e750381e3dfafd746e95a0843bff7">getElementType</a>(),</div>
<div class="line"><a name="l03629"></a><span class="lineno"> 3629</span>&#160;                                    NewFilterElts.size());</div>
<div class="line"><a name="l03630"></a><span class="lineno"> 3630</span>&#160;        FilterClause = <a class="code" href="classllvm_1_1ConstantArray.html#a0900dacdc7ad8e3ea0cc92993c7fd422">ConstantArray::get</a>(FilterType, NewFilterElts);</div>
<div class="line"><a name="l03631"></a><span class="lineno"> 3631</span>&#160;        MakeNewInstruction = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03632"></a><span class="lineno"> 3632</span>&#160;      }</div>
<div class="line"><a name="l03633"></a><span class="lineno"> 3633</span>&#160; </div>
<div class="line"><a name="l03634"></a><span class="lineno"> 3634</span>&#160;      NewClauses.push_back(FilterClause);</div>
<div class="line"><a name="l03635"></a><span class="lineno"> 3635</span>&#160; </div>
<div class="line"><a name="l03636"></a><span class="lineno"> 3636</span>&#160;      <span class="comment">// If the new filter is empty then it will catch everything so there is</span></div>
<div class="line"><a name="l03637"></a><span class="lineno"> 3637</span>&#160;      <span class="comment">// no point in keeping any following clauses or marking the landingpad</span></div>
<div class="line"><a name="l03638"></a><span class="lineno"> 3638</span>&#160;      <span class="comment">// as having a cleanup.  The case of the original filter being empty was</span></div>
<div class="line"><a name="l03639"></a><span class="lineno"> 3639</span>&#160;      <span class="comment">// already handled above.</span></div>
<div class="line"><a name="l03640"></a><span class="lineno"> 3640</span>&#160;      <span class="keywordflow">if</span> (MakeNewFilter &amp;&amp; !NewFilterElts.size()) {</div>
<div class="line"><a name="l03641"></a><span class="lineno"> 3641</span>&#160;        <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(MakeNewInstruction &amp;&amp; <span class="stringliteral">&quot;New filter but not a new instruction!&quot;</span>);</div>
<div class="line"><a name="l03642"></a><span class="lineno"> 3642</span>&#160;        CleanupFlag = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03643"></a><span class="lineno"> 3643</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03644"></a><span class="lineno"> 3644</span>&#160;      }</div>
<div class="line"><a name="l03645"></a><span class="lineno"> 3645</span>&#160;    }</div>
<div class="line"><a name="l03646"></a><span class="lineno"> 3646</span>&#160;  }</div>
<div class="line"><a name="l03647"></a><span class="lineno"> 3647</span>&#160; </div>
<div class="line"><a name="l03648"></a><span class="lineno"> 3648</span>&#160;  <span class="comment">// If several filters occur in a row then reorder them so that the shortest</span></div>
<div class="line"><a name="l03649"></a><span class="lineno"> 3649</span>&#160;  <span class="comment">// filters come first (those with the smallest number of elements).  This is</span></div>
<div class="line"><a name="l03650"></a><span class="lineno"> 3650</span>&#160;  <span class="comment">// advantageous because shorter filters are more likely to match, speeding up</span></div>
<div class="line"><a name="l03651"></a><span class="lineno"> 3651</span>&#160;  <span class="comment">// unwinding, but mostly because it increases the effectiveness of the other</span></div>
<div class="line"><a name="l03652"></a><span class="lineno"> 3652</span>&#160;  <span class="comment">// filter optimizations below.</span></div>
<div class="line"><a name="l03653"></a><span class="lineno"> 3653</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a> = NewClauses.size(); <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> + 1 &lt; <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a>; ) {</div>
<div class="line"><a name="l03654"></a><span class="lineno"> 3654</span>&#160;    <span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#a3a76669632041022e6976766a22bd2b0">j</a>;</div>
<div class="line"><a name="l03655"></a><span class="lineno"> 3655</span>&#160;    <span class="comment">// Find the maximal &#39;j&#39; s.t. the range [i, j) consists entirely of filters.</span></div>
<div class="line"><a name="l03656"></a><span class="lineno"> 3656</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="lib_2Target_2README_8txt.html#a3a76669632041022e6976766a22bd2b0">j</a> = <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>; <a class="code" href="lib_2Target_2README_8txt.html#a3a76669632041022e6976766a22bd2b0">j</a> != <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a>; ++<a class="code" href="lib_2Target_2README_8txt.html#a3a76669632041022e6976766a22bd2b0">j</a>)</div>
<div class="line"><a name="l03657"></a><span class="lineno"> 3657</span>&#160;      <span class="keywordflow">if</span> (!isa&lt;ArrayType&gt;(NewClauses[<a class="code" href="lib_2Target_2README_8txt.html#a3a76669632041022e6976766a22bd2b0">j</a>]-&gt;<a class="code" href="M68kELFObjectWriter_8cpp.html#ae4a8bc3879d2282eefd72b16b12c2a37">getType</a>()))</div>
<div class="line"><a name="l03658"></a><span class="lineno"> 3658</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03659"></a><span class="lineno"> 3659</span>&#160; </div>
<div class="line"><a name="l03660"></a><span class="lineno"> 3660</span>&#160;    <span class="comment">// Check whether the filters are already sorted by length.  We need to know</span></div>
<div class="line"><a name="l03661"></a><span class="lineno"> 3661</span>&#160;    <span class="comment">// if sorting them is actually going to do anything so that we only make a</span></div>
<div class="line"><a name="l03662"></a><span class="lineno"> 3662</span>&#160;    <span class="comment">// new landingpad instruction if it does.</span></div>
<div class="line"><a name="l03663"></a><span class="lineno"> 3663</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> k = <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>; k + 1 &lt; <a class="code" href="lib_2Target_2README_8txt.html#a3a76669632041022e6976766a22bd2b0">j</a>; ++k)</div>
<div class="line"><a name="l03664"></a><span class="lineno"> 3664</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="InstructionCombining_8cpp.html#a13d41ea63582902162e0efd8a78a5ad5">shorter_filter</a>(NewClauses[k+1], NewClauses[k])) {</div>
<div class="line"><a name="l03665"></a><span class="lineno"> 3665</span>&#160;        <span class="comment">// Not sorted, so sort the filters now.  Doing an unstable sort would be</span></div>
<div class="line"><a name="l03666"></a><span class="lineno"> 3666</span>&#160;        <span class="comment">// correct too but reordering filters pointlessly might confuse users.</span></div>
<div class="line"><a name="l03667"></a><span class="lineno"> 3667</span>&#160;        <a class="code" href="namespacellvm.html#a076f93c387f454f0db13d4bc7d4e7f9c">std::stable_sort</a>(NewClauses.begin() + <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>, NewClauses.begin() + <a class="code" href="lib_2Target_2README_8txt.html#a3a76669632041022e6976766a22bd2b0">j</a>,</div>
<div class="line"><a name="l03668"></a><span class="lineno"> 3668</span>&#160;                         <a class="code" href="InstructionCombining_8cpp.html#a13d41ea63582902162e0efd8a78a5ad5">shorter_filter</a>);</div>
<div class="line"><a name="l03669"></a><span class="lineno"> 3669</span>&#160;        MakeNewInstruction = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03670"></a><span class="lineno"> 3670</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03671"></a><span class="lineno"> 3671</span>&#160;      }</div>
<div class="line"><a name="l03672"></a><span class="lineno"> 3672</span>&#160; </div>
<div class="line"><a name="l03673"></a><span class="lineno"> 3673</span>&#160;    <span class="comment">// Look for the next batch of filters.</span></div>
<div class="line"><a name="l03674"></a><span class="lineno"> 3674</span>&#160;    <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = <a class="code" href="lib_2Target_2README_8txt.html#a3a76669632041022e6976766a22bd2b0">j</a> + 1;</div>
<div class="line"><a name="l03675"></a><span class="lineno"> 3675</span>&#160;  }</div>
<div class="line"><a name="l03676"></a><span class="lineno"> 3676</span>&#160; </div>
<div class="line"><a name="l03677"></a><span class="lineno"> 3677</span>&#160;  <span class="comment">// If typeinfos matched if and only if equal, then the elements of a filter L</span></div>
<div class="line"><a name="l03678"></a><span class="lineno"> 3678</span>&#160;  <span class="comment">// that occurs later than a filter F could be replaced by the intersection of</span></div>
<div class="line"><a name="l03679"></a><span class="lineno"> 3679</span>&#160;  <span class="comment">// the elements of F and L.  In reality two typeinfos can match without being</span></div>
<div class="line"><a name="l03680"></a><span class="lineno"> 3680</span>&#160;  <span class="comment">// equal (for example if one represents a C++ class, and the other some class</span></div>
<div class="line"><a name="l03681"></a><span class="lineno"> 3681</span>&#160;  <span class="comment">// derived from it) so it would be wrong to perform this transform in general.</span></div>
<div class="line"><a name="l03682"></a><span class="lineno"> 3682</span>&#160;  <span class="comment">// However the transform is correct and useful if F is a subset of L.  In that</span></div>
<div class="line"><a name="l03683"></a><span class="lineno"> 3683</span>&#160;  <span class="comment">// case L can be replaced by F, and thus removed altogether since repeating a</span></div>
<div class="line"><a name="l03684"></a><span class="lineno"> 3684</span>&#160;  <span class="comment">// filter is pointless.  So here we look at all pairs of filters F and L where</span></div>
<div class="line"><a name="l03685"></a><span class="lineno"> 3685</span>&#160;  <span class="comment">// L follows F in the list of clauses, and remove L if every element of F is</span></div>
<div class="line"><a name="l03686"></a><span class="lineno"> 3686</span>&#160;  <span class="comment">// an element of L.  This can occur when inlining C++ functions with exception</span></div>
<div class="line"><a name="l03687"></a><span class="lineno"> 3687</span>&#160;  <span class="comment">// specifications.</span></div>
<div class="line"><a name="l03688"></a><span class="lineno"> 3688</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> + 1 &lt; NewClauses.size(); ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l03689"></a><span class="lineno"> 3689</span>&#160;    <span class="comment">// Examine each filter in turn.</span></div>
<div class="line"><a name="l03690"></a><span class="lineno"> 3690</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm.html#aaee5189b9c4db9ad666a88abaf1ee0c4ad7778d0c64b6ba21494c97f77a66885a">Filter</a> = NewClauses[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l03691"></a><span class="lineno"> 3691</span>&#160;    <a class="code" href="classllvm_1_1ArrayType.html">ArrayType</a> *FTy = dyn_cast&lt;ArrayType&gt;(<a class="code" href="namespacellvm.html#aaee5189b9c4db9ad666a88abaf1ee0c4ad7778d0c64b6ba21494c97f77a66885a">Filter</a>-&gt;getType());</div>
<div class="line"><a name="l03692"></a><span class="lineno"> 3692</span>&#160;    <span class="keywordflow">if</span> (!FTy)</div>
<div class="line"><a name="l03693"></a><span class="lineno"> 3693</span>&#160;      <span class="comment">// Not a filter - skip it.</span></div>
<div class="line"><a name="l03694"></a><span class="lineno"> 3694</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l03695"></a><span class="lineno"> 3695</span>&#160;    <span class="keywordtype">unsigned</span> FElts = FTy-&gt;<a class="code" href="classllvm_1_1ArrayType.html#a1c35bd7a4fa08845607033aecc94423d">getNumElements</a>();</div>
<div class="line"><a name="l03696"></a><span class="lineno"> 3696</span>&#160;    <span class="comment">// Examine each filter following this one.  Doing this backwards means that</span></div>
<div class="line"><a name="l03697"></a><span class="lineno"> 3697</span>&#160;    <span class="comment">// we don&#39;t have to worry about filters disappearing under us when removed.</span></div>
<div class="line"><a name="l03698"></a><span class="lineno"> 3698</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#a3a76669632041022e6976766a22bd2b0">j</a> = NewClauses.size() - 1; <a class="code" href="lib_2Target_2README_8txt.html#a3a76669632041022e6976766a22bd2b0">j</a> != <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>; --<a class="code" href="lib_2Target_2README_8txt.html#a3a76669632041022e6976766a22bd2b0">j</a>) {</div>
<div class="line"><a name="l03699"></a><span class="lineno"> 3699</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *LFilter = NewClauses[<a class="code" href="lib_2Target_2README_8txt.html#a3a76669632041022e6976766a22bd2b0">j</a>];</div>
<div class="line"><a name="l03700"></a><span class="lineno"> 3700</span>&#160;      <a class="code" href="classllvm_1_1ArrayType.html">ArrayType</a> *LTy = dyn_cast&lt;ArrayType&gt;(LFilter-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>());</div>
<div class="line"><a name="l03701"></a><span class="lineno"> 3701</span>&#160;      <span class="keywordflow">if</span> (!LTy)</div>
<div class="line"><a name="l03702"></a><span class="lineno"> 3702</span>&#160;        <span class="comment">// Not a filter - skip it.</span></div>
<div class="line"><a name="l03703"></a><span class="lineno"> 3703</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l03704"></a><span class="lineno"> 3704</span>&#160;      <span class="comment">// If Filter is a subset of LFilter, i.e. every element of Filter is also</span></div>
<div class="line"><a name="l03705"></a><span class="lineno"> 3705</span>&#160;      <span class="comment">// an element of LFilter, then discard LFilter.</span></div>
<div class="line"><a name="l03706"></a><span class="lineno"> 3706</span>&#160;      <a class="code" href="classllvm_1_1SmallVectorImpl.html#ac5b936169badf0b703567eb960278648">SmallVectorImpl&lt;Constant *&gt;::iterator</a> J = NewClauses.begin() + <a class="code" href="lib_2Target_2README_8txt.html#a3a76669632041022e6976766a22bd2b0">j</a>;</div>
<div class="line"><a name="l03707"></a><span class="lineno"> 3707</span>&#160;      <span class="comment">// If Filter is empty then it is a subset of LFilter.</span></div>
<div class="line"><a name="l03708"></a><span class="lineno"> 3708</span>&#160;      <span class="keywordflow">if</span> (!FElts) {</div>
<div class="line"><a name="l03709"></a><span class="lineno"> 3709</span>&#160;        <span class="comment">// Discard LFilter.</span></div>
<div class="line"><a name="l03710"></a><span class="lineno"> 3710</span>&#160;        NewClauses.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a563ffc2ff61c499b3be2e00100cb72fa">erase</a>(J);</div>
<div class="line"><a name="l03711"></a><span class="lineno"> 3711</span>&#160;        MakeNewInstruction = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03712"></a><span class="lineno"> 3712</span>&#160;        <span class="comment">// Move on to the next filter.</span></div>
<div class="line"><a name="l03713"></a><span class="lineno"> 3713</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l03714"></a><span class="lineno"> 3714</span>&#160;      }</div>
<div class="line"><a name="l03715"></a><span class="lineno"> 3715</span>&#160;      <span class="keywordtype">unsigned</span> LElts = LTy-&gt;<a class="code" href="classllvm_1_1ArrayType.html#a1c35bd7a4fa08845607033aecc94423d">getNumElements</a>();</div>
<div class="line"><a name="l03716"></a><span class="lineno"> 3716</span>&#160;      <span class="comment">// If Filter is longer than LFilter then it cannot be a subset of it.</span></div>
<div class="line"><a name="l03717"></a><span class="lineno"> 3717</span>&#160;      <span class="keywordflow">if</span> (FElts &gt; LElts)</div>
<div class="line"><a name="l03718"></a><span class="lineno"> 3718</span>&#160;        <span class="comment">// Move on to the next filter.</span></div>
<div class="line"><a name="l03719"></a><span class="lineno"> 3719</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l03720"></a><span class="lineno"> 3720</span>&#160;      <span class="comment">// At this point we know that LFilter has at least one element.</span></div>
<div class="line"><a name="l03721"></a><span class="lineno"> 3721</span>&#160;      <span class="keywordflow">if</span> (isa&lt;ConstantAggregateZero&gt;(LFilter)) { <span class="comment">// LFilter only contains zeros.</span></div>
<div class="line"><a name="l03722"></a><span class="lineno"> 3722</span>&#160;        <span class="comment">// Filter is a subset of LFilter iff Filter contains only zeros (as we</span></div>
<div class="line"><a name="l03723"></a><span class="lineno"> 3723</span>&#160;        <span class="comment">// already know that Filter is not longer than LFilter).</span></div>
<div class="line"><a name="l03724"></a><span class="lineno"> 3724</span>&#160;        <span class="keywordflow">if</span> (isa&lt;ConstantAggregateZero&gt;(<a class="code" href="namespacellvm.html#aaee5189b9c4db9ad666a88abaf1ee0c4ad7778d0c64b6ba21494c97f77a66885a">Filter</a>)) {</div>
<div class="line"><a name="l03725"></a><span class="lineno"> 3725</span>&#160;          <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(FElts &lt;= LElts &amp;&amp; <span class="stringliteral">&quot;Should have handled this case earlier!&quot;</span>);</div>
<div class="line"><a name="l03726"></a><span class="lineno"> 3726</span>&#160;          <span class="comment">// Discard LFilter.</span></div>
<div class="line"><a name="l03727"></a><span class="lineno"> 3727</span>&#160;          NewClauses.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a563ffc2ff61c499b3be2e00100cb72fa">erase</a>(J);</div>
<div class="line"><a name="l03728"></a><span class="lineno"> 3728</span>&#160;          MakeNewInstruction = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03729"></a><span class="lineno"> 3729</span>&#160;        }</div>
<div class="line"><a name="l03730"></a><span class="lineno"> 3730</span>&#160;        <span class="comment">// Move on to the next filter.</span></div>
<div class="line"><a name="l03731"></a><span class="lineno"> 3731</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l03732"></a><span class="lineno"> 3732</span>&#160;      }</div>
<div class="line"><a name="l03733"></a><span class="lineno"> 3733</span>&#160;      <a class="code" href="classllvm_1_1ConstantArray.html">ConstantArray</a> *LArray = cast&lt;ConstantArray&gt;(LFilter);</div>
<div class="line"><a name="l03734"></a><span class="lineno"> 3734</span>&#160;      <span class="keywordflow">if</span> (isa&lt;ConstantAggregateZero&gt;(<a class="code" href="namespacellvm.html#aaee5189b9c4db9ad666a88abaf1ee0c4ad7778d0c64b6ba21494c97f77a66885a">Filter</a>)) { <span class="comment">// Filter only contains zeros.</span></div>
<div class="line"><a name="l03735"></a><span class="lineno"> 3735</span>&#160;        <span class="comment">// Since Filter is non-empty and contains only zeros, it is a subset of</span></div>
<div class="line"><a name="l03736"></a><span class="lineno"> 3736</span>&#160;        <span class="comment">// LFilter iff LFilter contains a zero.</span></div>
<div class="line"><a name="l03737"></a><span class="lineno"> 3737</span>&#160;        <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(FElts &gt; 0 &amp;&amp; <span class="stringliteral">&quot;Should have eliminated the empty filter earlier!&quot;</span>);</div>
<div class="line"><a name="l03738"></a><span class="lineno"> 3738</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#ac3ac4028df71f10fda029660ef66594d">l</a> = 0; <a class="code" href="lib_2Target_2README_8txt.html#ac3ac4028df71f10fda029660ef66594d">l</a> != LElts; ++<a class="code" href="lib_2Target_2README_8txt.html#ac3ac4028df71f10fda029660ef66594d">l</a>)</div>
<div class="line"><a name="l03739"></a><span class="lineno"> 3739</span>&#160;          <span class="keywordflow">if</span> (LArray-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(<a class="code" href="lib_2Target_2README_8txt.html#ac3ac4028df71f10fda029660ef66594d">l</a>)-&gt;isNullValue()) {</div>
<div class="line"><a name="l03740"></a><span class="lineno"> 3740</span>&#160;            <span class="comment">// LFilter contains a zero - discard it.</span></div>
<div class="line"><a name="l03741"></a><span class="lineno"> 3741</span>&#160;            NewClauses.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a563ffc2ff61c499b3be2e00100cb72fa">erase</a>(J);</div>
<div class="line"><a name="l03742"></a><span class="lineno"> 3742</span>&#160;            MakeNewInstruction = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03743"></a><span class="lineno"> 3743</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03744"></a><span class="lineno"> 3744</span>&#160;          }</div>
<div class="line"><a name="l03745"></a><span class="lineno"> 3745</span>&#160;        <span class="comment">// Move on to the next filter.</span></div>
<div class="line"><a name="l03746"></a><span class="lineno"> 3746</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l03747"></a><span class="lineno"> 3747</span>&#160;      }</div>
<div class="line"><a name="l03748"></a><span class="lineno"> 3748</span>&#160;      <span class="comment">// At this point we know that both filters are ConstantArrays.  Loop over</span></div>
<div class="line"><a name="l03749"></a><span class="lineno"> 3749</span>&#160;      <span class="comment">// operands to see whether every element of Filter is also an element of</span></div>
<div class="line"><a name="l03750"></a><span class="lineno"> 3750</span>&#160;      <span class="comment">// LFilter.  Since filters tend to be short this is probably faster than</span></div>
<div class="line"><a name="l03751"></a><span class="lineno"> 3751</span>&#160;      <span class="comment">// using a method that scales nicely.</span></div>
<div class="line"><a name="l03752"></a><span class="lineno"> 3752</span>&#160;      <a class="code" href="classllvm_1_1ConstantArray.html">ConstantArray</a> *FArray = cast&lt;ConstantArray&gt;(<a class="code" href="namespacellvm.html#aaee5189b9c4db9ad666a88abaf1ee0c4ad7778d0c64b6ba21494c97f77a66885a">Filter</a>);</div>
<div class="line"><a name="l03753"></a><span class="lineno"> 3753</span>&#160;      <span class="keywordtype">bool</span> AllFound = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03754"></a><span class="lineno"> 3754</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="include_2llvm_2Demangle_2README_8txt.html#a9d56f6c541a0ab888755f9bc198b8eca">f</a> = 0; <a class="code" href="include_2llvm_2Demangle_2README_8txt.html#a9d56f6c541a0ab888755f9bc198b8eca">f</a> != FElts; ++<a class="code" href="include_2llvm_2Demangle_2README_8txt.html#a9d56f6c541a0ab888755f9bc198b8eca">f</a>) {</div>
<div class="line"><a name="l03755"></a><span class="lineno"> 3755</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *FTypeInfo = FArray-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(<a class="code" href="include_2llvm_2Demangle_2README_8txt.html#a9d56f6c541a0ab888755f9bc198b8eca">f</a>)-&gt;<a class="code" href="classllvm_1_1Value.html#a966eb231e7d4e572874d2cb49b18faea">stripPointerCasts</a>();</div>
<div class="line"><a name="l03756"></a><span class="lineno"> 3756</span>&#160;        AllFound = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03757"></a><span class="lineno"> 3757</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#ac3ac4028df71f10fda029660ef66594d">l</a> = 0; <a class="code" href="lib_2Target_2README_8txt.html#ac3ac4028df71f10fda029660ef66594d">l</a> != LElts; ++<a class="code" href="lib_2Target_2README_8txt.html#ac3ac4028df71f10fda029660ef66594d">l</a>) {</div>
<div class="line"><a name="l03758"></a><span class="lineno"> 3758</span>&#160;          <a class="code" href="classllvm_1_1Value.html">Value</a> *LTypeInfo = LArray-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(<a class="code" href="lib_2Target_2README_8txt.html#ac3ac4028df71f10fda029660ef66594d">l</a>)-&gt;<a class="code" href="classllvm_1_1Value.html#a966eb231e7d4e572874d2cb49b18faea">stripPointerCasts</a>();</div>
<div class="line"><a name="l03759"></a><span class="lineno"> 3759</span>&#160;          <span class="keywordflow">if</span> (LTypeInfo == FTypeInfo) {</div>
<div class="line"><a name="l03760"></a><span class="lineno"> 3760</span>&#160;            AllFound = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03761"></a><span class="lineno"> 3761</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03762"></a><span class="lineno"> 3762</span>&#160;          }</div>
<div class="line"><a name="l03763"></a><span class="lineno"> 3763</span>&#160;        }</div>
<div class="line"><a name="l03764"></a><span class="lineno"> 3764</span>&#160;        <span class="keywordflow">if</span> (!AllFound)</div>
<div class="line"><a name="l03765"></a><span class="lineno"> 3765</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03766"></a><span class="lineno"> 3766</span>&#160;      }</div>
<div class="line"><a name="l03767"></a><span class="lineno"> 3767</span>&#160;      <span class="keywordflow">if</span> (AllFound) {</div>
<div class="line"><a name="l03768"></a><span class="lineno"> 3768</span>&#160;        <span class="comment">// Discard LFilter.</span></div>
<div class="line"><a name="l03769"></a><span class="lineno"> 3769</span>&#160;        NewClauses.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a563ffc2ff61c499b3be2e00100cb72fa">erase</a>(J);</div>
<div class="line"><a name="l03770"></a><span class="lineno"> 3770</span>&#160;        MakeNewInstruction = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03771"></a><span class="lineno"> 3771</span>&#160;      }</div>
<div class="line"><a name="l03772"></a><span class="lineno"> 3772</span>&#160;      <span class="comment">// Move on to the next filter.</span></div>
<div class="line"><a name="l03773"></a><span class="lineno"> 3773</span>&#160;    }</div>
<div class="line"><a name="l03774"></a><span class="lineno"> 3774</span>&#160;  }</div>
<div class="line"><a name="l03775"></a><span class="lineno"> 3775</span>&#160; </div>
<div class="line"><a name="l03776"></a><span class="lineno"> 3776</span>&#160;  <span class="comment">// If we changed any of the clauses, replace the old landingpad instruction</span></div>
<div class="line"><a name="l03777"></a><span class="lineno"> 3777</span>&#160;  <span class="comment">// with a new one.</span></div>
<div class="line"><a name="l03778"></a><span class="lineno"> 3778</span>&#160;  <span class="keywordflow">if</span> (MakeNewInstruction) {</div>
<div class="line"><a name="l03779"></a><span class="lineno"> 3779</span>&#160;    <a class="code" href="classllvm_1_1LandingPadInst.html">LandingPadInst</a> *NLI = <a class="code" href="classllvm_1_1LandingPadInst.html#a1a7bd2918064a6043f8fc2bc8b081e61">LandingPadInst::Create</a>(LI.<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>(),</div>
<div class="line"><a name="l03780"></a><span class="lineno"> 3780</span>&#160;                                                 NewClauses.size());</div>
<div class="line"><a name="l03781"></a><span class="lineno"> 3781</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a> = NewClauses.size(); <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a>; ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div>
<div class="line"><a name="l03782"></a><span class="lineno"> 3782</span>&#160;      NLI-&gt;<a class="code" href="classllvm_1_1LandingPadInst.html#a3a936522e13d33927dc23f0488e421d8">addClause</a>(NewClauses[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div>
<div class="line"><a name="l03783"></a><span class="lineno"> 3783</span>&#160;    <span class="comment">// A landing pad with no clauses must have the cleanup flag set.  It is</span></div>
<div class="line"><a name="l03784"></a><span class="lineno"> 3784</span>&#160;    <span class="comment">// theoretically possible, though highly unlikely, that we eliminated all</span></div>
<div class="line"><a name="l03785"></a><span class="lineno"> 3785</span>&#160;    <span class="comment">// clauses.  If so, force the cleanup flag to true.</span></div>
<div class="line"><a name="l03786"></a><span class="lineno"> 3786</span>&#160;    <span class="keywordflow">if</span> (NewClauses.empty())</div>
<div class="line"><a name="l03787"></a><span class="lineno"> 3787</span>&#160;      CleanupFlag = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03788"></a><span class="lineno"> 3788</span>&#160;    NLI-&gt;<a class="code" href="classllvm_1_1LandingPadInst.html#a97bc0afbd46cc7b3539e1cba861ac350">setCleanup</a>(CleanupFlag);</div>
<div class="line"><a name="l03789"></a><span class="lineno"> 3789</span>&#160;    <span class="keywordflow">return</span> NLI;</div>
<div class="line"><a name="l03790"></a><span class="lineno"> 3790</span>&#160;  }</div>
<div class="line"><a name="l03791"></a><span class="lineno"> 3791</span>&#160; </div>
<div class="line"><a name="l03792"></a><span class="lineno"> 3792</span>&#160;  <span class="comment">// Even if none of the clauses changed, we may nonetheless have understood</span></div>
<div class="line"><a name="l03793"></a><span class="lineno"> 3793</span>&#160;  <span class="comment">// that the cleanup flag is pointless.  Clear it if so.</span></div>
<div class="line"><a name="l03794"></a><span class="lineno"> 3794</span>&#160;  <span class="keywordflow">if</span> (LI.<a class="code" href="classllvm_1_1LandingPadInst.html#a0966e2f38f20609a643b5d5e3da8bae5">isCleanup</a>() != CleanupFlag) {</div>
<div class="line"><a name="l03795"></a><span class="lineno"> 3795</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!CleanupFlag &amp;&amp; <span class="stringliteral">&quot;Adding a cleanup, not removing one?!&quot;</span>);</div>
<div class="line"><a name="l03796"></a><span class="lineno"> 3796</span>&#160;    LI.<a class="code" href="classllvm_1_1LandingPadInst.html#a97bc0afbd46cc7b3539e1cba861ac350">setCleanup</a>(CleanupFlag);</div>
<div class="line"><a name="l03797"></a><span class="lineno"> 3797</span>&#160;    <span class="keywordflow">return</span> &amp;LI;</div>
<div class="line"><a name="l03798"></a><span class="lineno"> 3798</span>&#160;  }</div>
<div class="line"><a name="l03799"></a><span class="lineno"> 3799</span>&#160; </div>
<div class="line"><a name="l03800"></a><span class="lineno"> 3800</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l03801"></a><span class="lineno"> 3801</span>&#160;}</div>
<div class="line"><a name="l03802"></a><span class="lineno"> 3802</span>&#160; </div>
<div class="line"><a name="l03803"></a><span class="lineno"> 3803</span>&#160;<a class="code" href="classllvm_1_1Value.html">Value</a> *</div>
<div class="line"><a name="l03804"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombinerImpl.html#ab7805c1d4f86c20199da1dd1fab589f0"> 3804</a></span>&#160;<a class="code" href="classllvm_1_1InstCombinerImpl.html#ab7805c1d4f86c20199da1dd1fab589f0">InstCombinerImpl::pushFreezeToPreventPoisonFromPropagating</a>(<a class="code" href="classllvm_1_1FreezeInst.html">FreezeInst</a> &amp;OrigFI) {</div>
<div class="line"><a name="l03805"></a><span class="lineno"> 3805</span>&#160;  <span class="comment">// Try to push freeze through instructions that propagate but don&#39;t produce</span></div>
<div class="line"><a name="l03806"></a><span class="lineno"> 3806</span>&#160;  <span class="comment">// poison as far as possible.  If an operand of freeze follows three</span></div>
<div class="line"><a name="l03807"></a><span class="lineno"> 3807</span>&#160;  <span class="comment">// conditions 1) one-use, 2) does not produce poison, and 3) has all but one</span></div>
<div class="line"><a name="l03808"></a><span class="lineno"> 3808</span>&#160;  <span class="comment">// guaranteed-non-poison operands then push the freeze through to the one</span></div>
<div class="line"><a name="l03809"></a><span class="lineno"> 3809</span>&#160;  <span class="comment">// operand that is not guaranteed non-poison.  The actual transform is as</span></div>
<div class="line"><a name="l03810"></a><span class="lineno"> 3810</span>&#160;  <span class="comment">// follows.</span></div>
<div class="line"><a name="l03811"></a><span class="lineno"> 3811</span>&#160;  <span class="comment">//   Op1 = ...                        ; Op1 can be posion</span></div>
<div class="line"><a name="l03812"></a><span class="lineno"> 3812</span>&#160;  <span class="comment">//   Op0 = Inst(Op1, NonPoisonOps...) ; Op0 has only one use and only have</span></div>
<div class="line"><a name="l03813"></a><span class="lineno"> 3813</span>&#160;  <span class="comment">//                                    ; single guaranteed-non-poison operands</span></div>
<div class="line"><a name="l03814"></a><span class="lineno"> 3814</span>&#160;  <span class="comment">//   ... = Freeze(Op0)</span></div>
<div class="line"><a name="l03815"></a><span class="lineno"> 3815</span>&#160;  <span class="comment">// =&gt;</span></div>
<div class="line"><a name="l03816"></a><span class="lineno"> 3816</span>&#160;  <span class="comment">//   Op1 = ...</span></div>
<div class="line"><a name="l03817"></a><span class="lineno"> 3817</span>&#160;  <span class="comment">//   Op1.fr = Freeze(Op1)</span></div>
<div class="line"><a name="l03818"></a><span class="lineno"> 3818</span>&#160;  <span class="comment">//   ... = Inst(Op1.fr, NonPoisonOps...)</span></div>
<div class="line"><a name="l03819"></a><span class="lineno"> 3819</span>&#160;  <span class="keyword">auto</span> *OrigOp = OrigFI.<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0);</div>
<div class="line"><a name="l03820"></a><span class="lineno"> 3820</span>&#160;  <span class="keyword">auto</span> *OrigOpInst = dyn_cast&lt;Instruction&gt;(OrigOp);</div>
<div class="line"><a name="l03821"></a><span class="lineno"> 3821</span>&#160; </div>
<div class="line"><a name="l03822"></a><span class="lineno"> 3822</span>&#160;  <span class="comment">// While we could change the other users of OrigOp to use freeze(OrigOp), that</span></div>
<div class="line"><a name="l03823"></a><span class="lineno"> 3823</span>&#160;  <span class="comment">// potentially reduces their optimization potential, so let&#39;s only do this iff</span></div>
<div class="line"><a name="l03824"></a><span class="lineno"> 3824</span>&#160;  <span class="comment">// the OrigOp is only used by the freeze.</span></div>
<div class="line"><a name="l03825"></a><span class="lineno"> 3825</span>&#160;  <span class="keywordflow">if</span> (!OrigOpInst || !OrigOpInst-&gt;hasOneUse() || isa&lt;PHINode&gt;(OrigOp))</div>
<div class="line"><a name="l03826"></a><span class="lineno"> 3826</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l03827"></a><span class="lineno"> 3827</span>&#160; </div>
<div class="line"><a name="l03828"></a><span class="lineno"> 3828</span>&#160;  <span class="comment">// We can&#39;t push the freeze through an instruction which can itself create</span></div>
<div class="line"><a name="l03829"></a><span class="lineno"> 3829</span>&#160;  <span class="comment">// poison.  If the only source of new poison is flags, we can simply</span></div>
<div class="line"><a name="l03830"></a><span class="lineno"> 3830</span>&#160;  <span class="comment">// strip them (since we know the only use is the freeze and nothing can</span></div>
<div class="line"><a name="l03831"></a><span class="lineno"> 3831</span>&#160;  <span class="comment">// benefit from them.)</span></div>
<div class="line"><a name="l03832"></a><span class="lineno"> 3832</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a8c064bbaef44753bce38ba88b8ba7588">canCreateUndefOrPoison</a>(cast&lt;Operator&gt;(OrigOp),</div>
<div class="line"><a name="l03833"></a><span class="lineno"> 3833</span>&#160;                             <span class="comment">/*ConsiderFlagsAndMetadata*/</span> <span class="keyword">false</span>))</div>
<div class="line"><a name="l03834"></a><span class="lineno"> 3834</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l03835"></a><span class="lineno"> 3835</span>&#160; </div>
<div class="line"><a name="l03836"></a><span class="lineno"> 3836</span>&#160;  <span class="comment">// If operand is guaranteed not to be poison, there is no need to add freeze</span></div>
<div class="line"><a name="l03837"></a><span class="lineno"> 3837</span>&#160;  <span class="comment">// to the operand. So we first find the operand that is not guaranteed to be</span></div>
<div class="line"><a name="l03838"></a><span class="lineno"> 3838</span>&#160;  <span class="comment">// poison.</span></div>
<div class="line"><a name="l03839"></a><span class="lineno"> 3839</span>&#160;  <a class="code" href="classllvm_1_1Use.html">Use</a> *MaybePoisonOperand = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l03840"></a><span class="lineno"> 3840</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Use.html">Use</a> &amp;U : OrigOpInst-&gt;operands()) {</div>
<div class="line"><a name="l03841"></a><span class="lineno"> 3841</span>&#160;    <span class="keywordflow">if</span> (isa&lt;MetadataAsValue&gt;(U.get()) ||</div>
<div class="line"><a name="l03842"></a><span class="lineno"> 3842</span>&#160;        <a class="code" href="namespacellvm.html#ab8a7ef433279aabf7f30fa5504a4d4ef">isGuaranteedNotToBeUndefOrPoison</a>(U.get()))</div>
<div class="line"><a name="l03843"></a><span class="lineno"> 3843</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l03844"></a><span class="lineno"> 3844</span>&#160;    <span class="keywordflow">if</span> (!MaybePoisonOperand)</div>
<div class="line"><a name="l03845"></a><span class="lineno"> 3845</span>&#160;      MaybePoisonOperand = &amp;U;</div>
<div class="line"><a name="l03846"></a><span class="lineno"> 3846</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l03847"></a><span class="lineno"> 3847</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l03848"></a><span class="lineno"> 3848</span>&#160;  }</div>
<div class="line"><a name="l03849"></a><span class="lineno"> 3849</span>&#160; </div>
<div class="line"><a name="l03850"></a><span class="lineno"> 3850</span>&#160;  OrigOpInst-&gt;dropPoisonGeneratingFlagsAndMetadata();</div>
<div class="line"><a name="l03851"></a><span class="lineno"> 3851</span>&#160; </div>
<div class="line"><a name="l03852"></a><span class="lineno"> 3852</span>&#160;  <span class="comment">// If all operands are guaranteed to be non-poison, we can drop freeze.</span></div>
<div class="line"><a name="l03853"></a><span class="lineno"> 3853</span>&#160;  <span class="keywordflow">if</span> (!MaybePoisonOperand)</div>
<div class="line"><a name="l03854"></a><span class="lineno"> 3854</span>&#160;    <span class="keywordflow">return</span> OrigOp;</div>
<div class="line"><a name="l03855"></a><span class="lineno"> 3855</span>&#160; </div>
<div class="line"><a name="l03856"></a><span class="lineno"> 3856</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(OrigOpInst);</div>
<div class="line"><a name="l03857"></a><span class="lineno"> 3857</span>&#160;  <span class="keyword">auto</span> *FrozenMaybePoisonOperand = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateFreeze(</div>
<div class="line"><a name="l03858"></a><span class="lineno"> 3858</span>&#160;      MaybePoisonOperand-&gt;get(), MaybePoisonOperand-&gt;get()-&gt;<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>() + <span class="stringliteral">&quot;.fr&quot;</span>);</div>
<div class="line"><a name="l03859"></a><span class="lineno"> 3859</span>&#160; </div>
<div class="line"><a name="l03860"></a><span class="lineno"> 3860</span>&#160;  replaceUse(*MaybePoisonOperand, FrozenMaybePoisonOperand);</div>
<div class="line"><a name="l03861"></a><span class="lineno"> 3861</span>&#160;  <span class="keywordflow">return</span> OrigOp;</div>
<div class="line"><a name="l03862"></a><span class="lineno"> 3862</span>&#160;}</div>
<div class="line"><a name="l03863"></a><span class="lineno"> 3863</span>&#160; </div>
<div class="line"><a name="l03864"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombinerImpl.html#aef28063eb280fec69a391dd35c51666e"> 3864</a></span>&#160;<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombinerImpl.html#aef28063eb280fec69a391dd35c51666e">InstCombinerImpl::foldFreezeIntoRecurrence</a>(<a class="code" href="classllvm_1_1FreezeInst.html">FreezeInst</a> &amp;FI,</div>
<div class="line"><a name="l03865"></a><span class="lineno"> 3865</span>&#160;                                                        <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *PN) {</div>
<div class="line"><a name="l03866"></a><span class="lineno"> 3866</span>&#160;  <span class="comment">// Detect whether this is a recurrence with a start value and some number of</span></div>
<div class="line"><a name="l03867"></a><span class="lineno"> 3867</span>&#160;  <span class="comment">// backedge values. We&#39;ll check whether we can push the freeze through the</span></div>
<div class="line"><a name="l03868"></a><span class="lineno"> 3868</span>&#160;  <span class="comment">// backedge values (possibly dropping poison flags along the way) until we</span></div>
<div class="line"><a name="l03869"></a><span class="lineno"> 3869</span>&#160;  <span class="comment">// reach the phi again. In that case, we can move the freeze to the start</span></div>
<div class="line"><a name="l03870"></a><span class="lineno"> 3870</span>&#160;  <span class="comment">// value.</span></div>
<div class="line"><a name="l03871"></a><span class="lineno"> 3871</span>&#160;  <a class="code" href="classllvm_1_1Use.html">Use</a> *StartU = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l03872"></a><span class="lineno"> 3872</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Value *&gt;</a> Worklist;</div>
<div class="line"><a name="l03873"></a><span class="lineno"> 3873</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Use.html">Use</a> &amp;U : PN-&gt;<a class="code" href="classllvm_1_1PHINode.html#a1f0ff79b64a40d383b891f1baba89c6b">incoming_values</a>()) {</div>
<div class="line"><a name="l03874"></a><span class="lineno"> 3874</span>&#160;    <span class="keywordflow">if</span> (DT.dominates(PN-&gt;<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>(), PN-&gt;<a class="code" href="classllvm_1_1PHINode.html#a8ce0c4746a1ec805e66409d20ae93922">getIncomingBlock</a>(U))) {</div>
<div class="line"><a name="l03875"></a><span class="lineno"> 3875</span>&#160;      <span class="comment">// Add backedge value to worklist.</span></div>
<div class="line"><a name="l03876"></a><span class="lineno"> 3876</span>&#160;      Worklist.push_back(U.get());</div>
<div class="line"><a name="l03877"></a><span class="lineno"> 3877</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l03878"></a><span class="lineno"> 3878</span>&#160;    }</div>
<div class="line"><a name="l03879"></a><span class="lineno"> 3879</span>&#160; </div>
<div class="line"><a name="l03880"></a><span class="lineno"> 3880</span>&#160;    <span class="comment">// Don&#39;t bother handling multiple start values.</span></div>
<div class="line"><a name="l03881"></a><span class="lineno"> 3881</span>&#160;    <span class="keywordflow">if</span> (StartU)</div>
<div class="line"><a name="l03882"></a><span class="lineno"> 3882</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l03883"></a><span class="lineno"> 3883</span>&#160;    StartU = &amp;U;</div>
<div class="line"><a name="l03884"></a><span class="lineno"> 3884</span>&#160;  }</div>
<div class="line"><a name="l03885"></a><span class="lineno"> 3885</span>&#160; </div>
<div class="line"><a name="l03886"></a><span class="lineno"> 3886</span>&#160;  <span class="keywordflow">if</span> (!StartU || Worklist.empty())</div>
<div class="line"><a name="l03887"></a><span class="lineno"> 3887</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>; <span class="comment">// Not a recurrence.</span></div>
<div class="line"><a name="l03888"></a><span class="lineno"> 3888</span>&#160; </div>
<div class="line"><a name="l03889"></a><span class="lineno"> 3889</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *StartV = StartU-&gt;get();</div>
<div class="line"><a name="l03890"></a><span class="lineno"> 3890</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *StartBB = PN-&gt;<a class="code" href="classllvm_1_1PHINode.html#a8ce0c4746a1ec805e66409d20ae93922">getIncomingBlock</a>(*StartU);</div>
<div class="line"><a name="l03891"></a><span class="lineno"> 3891</span>&#160;  <span class="keywordtype">bool</span> StartNeedsFreeze = !<a class="code" href="namespacellvm.html#ab8a7ef433279aabf7f30fa5504a4d4ef">isGuaranteedNotToBeUndefOrPoison</a>(StartV);</div>
<div class="line"><a name="l03892"></a><span class="lineno"> 3892</span>&#160;  <span class="comment">// We can&#39;t insert freeze if the the start value is the result of the</span></div>
<div class="line"><a name="l03893"></a><span class="lineno"> 3893</span>&#160;  <span class="comment">// terminator (e.g. an invoke).</span></div>
<div class="line"><a name="l03894"></a><span class="lineno"> 3894</span>&#160;  <span class="keywordflow">if</span> (StartNeedsFreeze &amp;&amp; StartBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>() == StartV)</div>
<div class="line"><a name="l03895"></a><span class="lineno"> 3895</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l03896"></a><span class="lineno"> 3896</span>&#160; </div>
<div class="line"><a name="l03897"></a><span class="lineno"> 3897</span>&#160;  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;Value *, 32&gt;</a> Visited;</div>
<div class="line"><a name="l03898"></a><span class="lineno"> 3898</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Instruction *&gt;</a> DropFlags;</div>
<div class="line"><a name="l03899"></a><span class="lineno"> 3899</span>&#160;  <span class="keywordflow">while</span> (!Worklist.empty()) {</div>
<div class="line"><a name="l03900"></a><span class="lineno"> 3900</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *V = Worklist.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a0c8ffe664a36e30d49c84d0aded2fe08">pop_back_val</a>();</div>
<div class="line"><a name="l03901"></a><span class="lineno"> 3901</span>&#160;    <span class="keywordflow">if</span> (!Visited.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(V).second)</div>
<div class="line"><a name="l03902"></a><span class="lineno"> 3902</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l03903"></a><span class="lineno"> 3903</span>&#160; </div>
<div class="line"><a name="l03904"></a><span class="lineno"> 3904</span>&#160;    <span class="keywordflow">if</span> (Visited.<a class="code" href="classllvm_1_1SmallPtrSetImplBase.html#a0e1c3175b0ac22fe3853651c28e1ecb8">size</a>() &gt; 32)</div>
<div class="line"><a name="l03905"></a><span class="lineno"> 3905</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>; <span class="comment">// Limit the total number of values we inspect.</span></div>
<div class="line"><a name="l03906"></a><span class="lineno"> 3906</span>&#160; </div>
<div class="line"><a name="l03907"></a><span class="lineno"> 3907</span>&#160;    <span class="comment">// Assume that PN is non-poison, because it will be after the transform.</span></div>
<div class="line"><a name="l03908"></a><span class="lineno"> 3908</span>&#160;    <span class="keywordflow">if</span> (V == PN || <a class="code" href="namespacellvm.html#ab8a7ef433279aabf7f30fa5504a4d4ef">isGuaranteedNotToBeUndefOrPoison</a>(V))</div>
<div class="line"><a name="l03909"></a><span class="lineno"> 3909</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l03910"></a><span class="lineno"> 3910</span>&#160; </div>
<div class="line"><a name="l03911"></a><span class="lineno"> 3911</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = dyn_cast&lt;Instruction&gt;(V);</div>
<div class="line"><a name="l03912"></a><span class="lineno"> 3912</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> || <a class="code" href="namespacellvm.html#a8c064bbaef44753bce38ba88b8ba7588">canCreateUndefOrPoison</a>(cast&lt;Operator&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>),</div>
<div class="line"><a name="l03913"></a><span class="lineno"> 3913</span>&#160;                                     <span class="comment">/*ConsiderFlagsAndMetadata*/</span> <span class="keyword">false</span>))</div>
<div class="line"><a name="l03914"></a><span class="lineno"> 3914</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l03915"></a><span class="lineno"> 3915</span>&#160; </div>
<div class="line"><a name="l03916"></a><span class="lineno"> 3916</span>&#160;    DropFlags.push_back(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l03917"></a><span class="lineno"> 3917</span>&#160;    <a class="code" href="namespacellvm.html#a39d3d23a084c4544ee5903203db10e8a">append_range</a>(Worklist, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;operands());</div>
<div class="line"><a name="l03918"></a><span class="lineno"> 3918</span>&#160;  }</div>
<div class="line"><a name="l03919"></a><span class="lineno"> 3919</span>&#160; </div>
<div class="line"><a name="l03920"></a><span class="lineno"> 3920</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : DropFlags)</div>
<div class="line"><a name="l03921"></a><span class="lineno"> 3921</span>&#160;    <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;dropPoisonGeneratingFlagsAndMetadata();</div>
<div class="line"><a name="l03922"></a><span class="lineno"> 3922</span>&#160; </div>
<div class="line"><a name="l03923"></a><span class="lineno"> 3923</span>&#160;  <span class="keywordflow">if</span> (StartNeedsFreeze) {</div>
<div class="line"><a name="l03924"></a><span class="lineno"> 3924</span>&#160;    <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(StartBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>());</div>
<div class="line"><a name="l03925"></a><span class="lineno"> 3925</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *FrozenStartV = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateFreeze(StartV,</div>
<div class="line"><a name="l03926"></a><span class="lineno"> 3926</span>&#160;                                               StartV-&gt;<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>() + <span class="stringliteral">&quot;.fr&quot;</span>);</div>
<div class="line"><a name="l03927"></a><span class="lineno"> 3927</span>&#160;    replaceUse(*StartU, FrozenStartV);</div>
<div class="line"><a name="l03928"></a><span class="lineno"> 3928</span>&#160;  }</div>
<div class="line"><a name="l03929"></a><span class="lineno"> 3929</span>&#160;  <span class="keywordflow">return</span> replaceInstUsesWith(FI, PN);</div>
<div class="line"><a name="l03930"></a><span class="lineno"> 3930</span>&#160;}</div>
<div class="line"><a name="l03931"></a><span class="lineno"> 3931</span>&#160; </div>
<div class="line"><a name="l03932"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombinerImpl.html#af59c587eddc75748a1e201369cd3dbac"> 3932</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1InstCombinerImpl.html#af59c587eddc75748a1e201369cd3dbac">InstCombinerImpl::freezeOtherUses</a>(<a class="code" href="classllvm_1_1FreezeInst.html">FreezeInst</a> &amp;FI) {</div>
<div class="line"><a name="l03933"></a><span class="lineno"> 3933</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a> = FI.<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0);</div>
<div class="line"><a name="l03934"></a><span class="lineno"> 3934</span>&#160; </div>
<div class="line"><a name="l03935"></a><span class="lineno"> 3935</span>&#160;  <span class="keywordflow">if</span> (isa&lt;Constant&gt;(<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>) || <a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>-&gt;hasOneUse())</div>
<div class="line"><a name="l03936"></a><span class="lineno"> 3936</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l03937"></a><span class="lineno"> 3937</span>&#160; </div>
<div class="line"><a name="l03938"></a><span class="lineno"> 3938</span>&#160;  <span class="comment">// Move the freeze directly after the definition of its operand, so that</span></div>
<div class="line"><a name="l03939"></a><span class="lineno"> 3939</span>&#160;  <span class="comment">// it dominates the maximum number of uses. Note that it may not dominate</span></div>
<div class="line"><a name="l03940"></a><span class="lineno"> 3940</span>&#160;  <span class="comment">// *all* uses if the operand is an invoke/callbr and the use is in a phi on</span></div>
<div class="line"><a name="l03941"></a><span class="lineno"> 3941</span>&#160;  <span class="comment">// the normal/default destination. This is why the domination check in the</span></div>
<div class="line"><a name="l03942"></a><span class="lineno"> 3942</span>&#160;  <span class="comment">// replacement below is still necessary.</span></div>
<div class="line"><a name="l03943"></a><span class="lineno"> 3943</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *MoveBefore;</div>
<div class="line"><a name="l03944"></a><span class="lineno"> 3944</span>&#160;  <span class="keywordflow">if</span> (isa&lt;Argument&gt;(<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>)) {</div>
<div class="line"><a name="l03945"></a><span class="lineno"> 3945</span>&#160;    MoveBefore =</div>
<div class="line"><a name="l03946"></a><span class="lineno"> 3946</span>&#160;        &amp;*FI.<a class="code" href="classllvm_1_1Instruction.html#a6a66ebb3aa12757479a3c88de77d78f8">getFunction</a>()-&gt;<a class="code" href="classllvm_1_1Function.html#ae6a4da5f41fc6a36735cc1704c01ce60">getEntryBlock</a>().<a class="code" href="classllvm_1_1BasicBlock.html#aab4db88f47575918879912e8ca511756">getFirstNonPHIOrDbgOrAlloca</a>();</div>
<div class="line"><a name="l03947"></a><span class="lineno"> 3947</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03948"></a><span class="lineno"> 3948</span>&#160;    MoveBefore = cast&lt;Instruction&gt;(<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>)-&gt;<a class="code" href="classllvm_1_1Instruction.html#acadfa18c30c37d1660a10b23c470a35b">getInsertionPointAfterDef</a>();</div>
<div class="line"><a name="l03949"></a><span class="lineno"> 3949</span>&#160;    <span class="keywordflow">if</span> (!MoveBefore)</div>
<div class="line"><a name="l03950"></a><span class="lineno"> 3950</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l03951"></a><span class="lineno"> 3951</span>&#160;  }</div>
<div class="line"><a name="l03952"></a><span class="lineno"> 3952</span>&#160; </div>
<div class="line"><a name="l03953"></a><span class="lineno"> 3953</span>&#160;  <span class="keywordtype">bool</span> Changed = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03954"></a><span class="lineno"> 3954</span>&#160;  <span class="keywordflow">if</span> (&amp;FI != MoveBefore) {</div>
<div class="line"><a name="l03955"></a><span class="lineno"> 3955</span>&#160;    FI.<a class="code" href="classllvm_1_1Instruction.html#af67d1f3a518964d80a109bb3d9d5cf1e">moveBefore</a>(MoveBefore);</div>
<div class="line"><a name="l03956"></a><span class="lineno"> 3956</span>&#160;    Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03957"></a><span class="lineno"> 3957</span>&#160;  }</div>
<div class="line"><a name="l03958"></a><span class="lineno"> 3958</span>&#160; </div>
<div class="line"><a name="l03959"></a><span class="lineno"> 3959</span>&#160;  <a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>-&gt;replaceUsesWithIf(&amp;FI, [&amp;](<a class="code" href="classllvm_1_1Use.html">Use</a> &amp;U) -&gt; <span class="keywordtype">bool</span> {</div>
<div class="line"><a name="l03960"></a><span class="lineno"> 3960</span>&#160;    <span class="keywordtype">bool</span> Dominates = DT.dominates(&amp;FI, U);</div>
<div class="line"><a name="l03961"></a><span class="lineno"> 3961</span>&#160;    Changed |= Dominates;</div>
<div class="line"><a name="l03962"></a><span class="lineno"> 3962</span>&#160;    <span class="keywordflow">return</span> Dominates;</div>
<div class="line"><a name="l03963"></a><span class="lineno"> 3963</span>&#160;  });</div>
<div class="line"><a name="l03964"></a><span class="lineno"> 3964</span>&#160; </div>
<div class="line"><a name="l03965"></a><span class="lineno"> 3965</span>&#160;  <span class="keywordflow">return</span> Changed;</div>
<div class="line"><a name="l03966"></a><span class="lineno"> 3966</span>&#160;}</div>
<div class="line"><a name="l03967"></a><span class="lineno"> 3967</span>&#160; </div>
<div class="line"><a name="l03968"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombinerImpl.html#a397caaa6fe7aad6bb3d482f9fe157e71"> 3968</a></span>&#160;<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombinerImpl.html#a397caaa6fe7aad6bb3d482f9fe157e71">InstCombinerImpl::visitFreeze</a>(<a class="code" href="classllvm_1_1FreezeInst.html">FreezeInst</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l03969"></a><span class="lineno"> 3969</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Op0 = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(0);</div>
<div class="line"><a name="l03970"></a><span class="lineno"> 3970</span>&#160; </div>
<div class="line"><a name="l03971"></a><span class="lineno"> 3971</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V = <a class="code" href="namespacellvm.html#a12c01eba586da4db7ad4662e901b10a0">simplifyFreezeInst</a>(Op0, SQ.getWithInstruction(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)))</div>
<div class="line"><a name="l03972"></a><span class="lineno"> 3972</span>&#160;    <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, V);</div>
<div class="line"><a name="l03973"></a><span class="lineno"> 3973</span>&#160; </div>
<div class="line"><a name="l03974"></a><span class="lineno"> 3974</span>&#160;  <span class="comment">// freeze (phi const, x) --&gt; phi const, (freeze x)</span></div>
<div class="line"><a name="l03975"></a><span class="lineno"> 3975</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *PN = dyn_cast&lt;PHINode&gt;(Op0)) {</div>
<div class="line"><a name="l03976"></a><span class="lineno"> 3976</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="namespacellvm_1_1ore.html#a8f5533240c6722d987a2443cba42019d">NV</a> = foldOpIntoPhi(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, PN))</div>
<div class="line"><a name="l03977"></a><span class="lineno"> 3977</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1ore.html#a8f5533240c6722d987a2443cba42019d">NV</a>;</div>
<div class="line"><a name="l03978"></a><span class="lineno"> 3978</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="namespacellvm_1_1ore.html#a8f5533240c6722d987a2443cba42019d">NV</a> = foldFreezeIntoRecurrence(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, PN))</div>
<div class="line"><a name="l03979"></a><span class="lineno"> 3979</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1ore.html#a8f5533240c6722d987a2443cba42019d">NV</a>;</div>
<div class="line"><a name="l03980"></a><span class="lineno"> 3980</span>&#160;  }</div>
<div class="line"><a name="l03981"></a><span class="lineno"> 3981</span>&#160; </div>
<div class="line"><a name="l03982"></a><span class="lineno"> 3982</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *NI = pushFreezeToPreventPoisonFromPropagating(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l03983"></a><span class="lineno"> 3983</span>&#160;    <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, NI);</div>
<div class="line"><a name="l03984"></a><span class="lineno"> 3984</span>&#160; </div>
<div class="line"><a name="l03985"></a><span class="lineno"> 3985</span>&#160;  <span class="comment">// If I is freeze(undef), check its uses and fold it to a fixed constant.</span></div>
<div class="line"><a name="l03986"></a><span class="lineno"> 3986</span>&#160;  <span class="comment">// - or: pick -1</span></div>
<div class="line"><a name="l03987"></a><span class="lineno"> 3987</span>&#160;  <span class="comment">// - select&#39;s condition: if the true value is constant, choose it by making</span></div>
<div class="line"><a name="l03988"></a><span class="lineno"> 3988</span>&#160;  <span class="comment">//                       the condition true.</span></div>
<div class="line"><a name="l03989"></a><span class="lineno"> 3989</span>&#160;  <span class="comment">// - default: pick 0</span></div>
<div class="line"><a name="l03990"></a><span class="lineno"> 3990</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l03991"></a><span class="lineno"> 3991</span>&#160;  <span class="comment">// Note that this transform is intentionally done here rather than</span></div>
<div class="line"><a name="l03992"></a><span class="lineno"> 3992</span>&#160;  <span class="comment">// via an analysis in InstSimplify or at individual user sites. That is</span></div>
<div class="line"><a name="l03993"></a><span class="lineno"> 3993</span>&#160;  <span class="comment">// because we must produce the same value for all uses of the freeze -</span></div>
<div class="line"><a name="l03994"></a><span class="lineno"> 3994</span>&#160;  <span class="comment">// it&#39;s the reason &quot;freeze&quot; exists!</span></div>
<div class="line"><a name="l03995"></a><span class="lineno"> 3995</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l03996"></a><span class="lineno"> 3996</span>&#160;  <span class="comment">// TODO: This could use getBinopAbsorber() / getBinopIdentity() to avoid</span></div>
<div class="line"><a name="l03997"></a><span class="lineno"> 3997</span>&#160;  <span class="comment">//       duplicating logic for binops at least.</span></div>
<div class="line"><a name="l03998"></a><span class="lineno"> 3998</span>&#160;  <span class="keyword">auto</span> getUndefReplacement = [&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>](<a class="code" href="classllvm_1_1Type.html">Type</a> *Ty) {</div>
<div class="line"><a name="l03999"></a><span class="lineno"> 3999</span>&#160;    <a class="code" href="classllvm_1_1Constant.html">Constant</a> *BestValue = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l04000"></a><span class="lineno"> 4000</span>&#160;    <a class="code" href="classllvm_1_1Constant.html">Constant</a> *NullValue = <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(Ty);</div>
<div class="line"><a name="l04001"></a><span class="lineno"> 4001</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> *U : <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.users()) {</div>
<div class="line"><a name="l04002"></a><span class="lineno"> 4002</span>&#160;      <a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = NullValue;</div>
<div class="line"><a name="l04003"></a><span class="lineno"> 4003</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(U, <a class="code" href="namespacellvm_1_1PatternMatch.html#a42569041ddafba7d40243e126af07f42">m_Or</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>())))</div>
<div class="line"><a name="l04004"></a><span class="lineno"> 4004</span>&#160;        <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = <a class="code" href="classllvm_1_1Constant.html#a4d51384de6e1798bb6aa875aebeea9f0">ConstantInt::getAllOnesValue</a>(Ty);</div>
<div class="line"><a name="l04005"></a><span class="lineno"> 4005</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(U, <a class="code" href="namespacellvm_1_1PatternMatch.html#addb87fe3f509b7803d3f5933ee24b560">m_Select</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#aadd209ba7e1bfa8113a609e09a7fe62f">m_Constant</a>(), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>())))</div>
<div class="line"><a name="l04006"></a><span class="lineno"> 4006</span>&#160;        <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = <a class="code" href="classllvm_1_1ConstantInt.html#a82dbbd8e3688b0bc1eedb338864d0d0c">ConstantInt::getTrue</a>(Ty);</div>
<div class="line"><a name="l04007"></a><span class="lineno"> 4007</span>&#160; </div>
<div class="line"><a name="l04008"></a><span class="lineno"> 4008</span>&#160;      <span class="keywordflow">if</span> (!BestValue)</div>
<div class="line"><a name="l04009"></a><span class="lineno"> 4009</span>&#160;        BestValue = <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>;</div>
<div class="line"><a name="l04010"></a><span class="lineno"> 4010</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (BestValue != <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)</div>
<div class="line"><a name="l04011"></a><span class="lineno"> 4011</span>&#160;        BestValue = NullValue;</div>
<div class="line"><a name="l04012"></a><span class="lineno"> 4012</span>&#160;    }</div>
<div class="line"><a name="l04013"></a><span class="lineno"> 4013</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(BestValue &amp;&amp; <span class="stringliteral">&quot;Must have at least one use&quot;</span>);</div>
<div class="line"><a name="l04014"></a><span class="lineno"> 4014</span>&#160;    <span class="keywordflow">return</span> BestValue;</div>
<div class="line"><a name="l04015"></a><span class="lineno"> 4015</span>&#160;  };</div>
<div class="line"><a name="l04016"></a><span class="lineno"> 4016</span>&#160; </div>
<div class="line"><a name="l04017"></a><span class="lineno"> 4017</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#adea6dc2e42baa345b97be48b0370313d">m_Undef</a>()))</div>
<div class="line"><a name="l04018"></a><span class="lineno"> 4018</span>&#160;    <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, getUndefReplacement(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getType()));</div>
<div class="line"><a name="l04019"></a><span class="lineno"> 4019</span>&#160; </div>
<div class="line"><a name="l04020"></a><span class="lineno"> 4020</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>;</div>
<div class="line"><a name="l04021"></a><span class="lineno"> 4021</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#aadd209ba7e1bfa8113a609e09a7fe62f">m_Constant</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)) &amp;&amp; <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;containsUndefOrPoisonElement()) {</div>
<div class="line"><a name="l04022"></a><span class="lineno"> 4022</span>&#160;    <a class="code" href="classllvm_1_1Constant.html">Constant</a> *ReplaceC = getUndefReplacement(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getType()-&gt;getScalarType());</div>
<div class="line"><a name="l04023"></a><span class="lineno"> 4023</span>&#160;    <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1Constant.html#a174c8fd19771468c53842a7fde8ddce1">Constant::replaceUndefsWith</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, ReplaceC));</div>
<div class="line"><a name="l04024"></a><span class="lineno"> 4024</span>&#160;  }</div>
<div class="line"><a name="l04025"></a><span class="lineno"> 4025</span>&#160; </div>
<div class="line"><a name="l04026"></a><span class="lineno"> 4026</span>&#160;  <span class="comment">// Replace uses of Op with freeze(Op).</span></div>
<div class="line"><a name="l04027"></a><span class="lineno"> 4027</span>&#160;  <span class="keywordflow">if</span> (freezeOtherUses(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l04028"></a><span class="lineno"> 4028</span>&#160;    <span class="keywordflow">return</span> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l04029"></a><span class="lineno"> 4029</span>&#160; </div>
<div class="line"><a name="l04030"></a><span class="lineno"> 4030</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l04031"></a><span class="lineno"> 4031</span>&#160;}</div>
<div class="line"><a name="l04032"></a><span class="lineno"> 4032</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l04033"></a><span class="lineno"> 4033</span>&#160;<span class="comment">/// Check for case where the call writes to an otherwise dead alloca.  This</span></div>
<div class="line"><a name="l04034"></a><span class="lineno"> 4034</span>&#160;<span class="comment">/// shows up for unused out-params in idiomatic C/C++ code.   Note that this</span></div>
<div class="line"><a name="l04035"></a><span class="lineno"> 4035</span>&#160;<span class="comment">/// helper *only* analyzes the write; doesn&#39;t check any other legality aspect.</span></div>
<div class="line"><a name="l04036"></a><span class="lineno"><a class="line" href="InstructionCombining_8cpp.html#aca7c31a6dcc095ed3c2831f6876c6dc0"> 4036</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="InstructionCombining_8cpp.html#aca7c31a6dcc095ed3c2831f6876c6dc0">SoleWriteToDeadLocal</a>(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1TargetLibraryInfo.html">TargetLibraryInfo</a> &amp;TLI) {</div>
<div class="line"><a name="l04037"></a><span class="lineno"> 4037</span>&#160;  <span class="keyword">auto</span> *CB = dyn_cast&lt;CallBase&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l04038"></a><span class="lineno"> 4038</span>&#160;  <span class="keywordflow">if</span> (!CB)</div>
<div class="line"><a name="l04039"></a><span class="lineno"> 4039</span>&#160;    <span class="comment">// TODO: handle e.g. store to alloca here - only worth doing if we extend</span></div>
<div class="line"><a name="l04040"></a><span class="lineno"> 4040</span>&#160;    <span class="comment">// to allow reload along used path as described below.  Otherwise, this</span></div>
<div class="line"><a name="l04041"></a><span class="lineno"> 4041</span>&#160;    <span class="comment">// is simply a store to a dead allocation which will be removed.</span></div>
<div class="line"><a name="l04042"></a><span class="lineno"> 4042</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l04043"></a><span class="lineno"> 4043</span>&#160;  std::optional&lt;MemoryLocation&gt; Dest = <a class="code" href="classllvm_1_1MemoryLocation.html#ac8f8983c6b76d0e30f22fff86b281f16">MemoryLocation::getForDest</a>(CB, TLI);</div>
<div class="line"><a name="l04044"></a><span class="lineno"> 4044</span>&#160;  <span class="keywordflow">if</span> (!Dest)</div>
<div class="line"><a name="l04045"></a><span class="lineno"> 4045</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l04046"></a><span class="lineno"> 4046</span>&#160;  <span class="keyword">auto</span> *AI = dyn_cast&lt;AllocaInst&gt;(<a class="code" href="namespacellvm.html#a3b1c5788b85ffa254be0e834edf5cf8f">getUnderlyingObject</a>(Dest-&gt;Ptr));</div>
<div class="line"><a name="l04047"></a><span class="lineno"> 4047</span>&#160;  <span class="keywordflow">if</span> (!AI)</div>
<div class="line"><a name="l04048"></a><span class="lineno"> 4048</span>&#160;    <span class="comment">// TODO: allow malloc?</span></div>
<div class="line"><a name="l04049"></a><span class="lineno"> 4049</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l04050"></a><span class="lineno"> 4050</span>&#160;  <span class="comment">// TODO: allow memory access dominated by move point?  Note that since AI</span></div>
<div class="line"><a name="l04051"></a><span class="lineno"> 4051</span>&#160;  <span class="comment">// could have a reference to itself captured by the call, we would need to</span></div>
<div class="line"><a name="l04052"></a><span class="lineno"> 4052</span>&#160;  <span class="comment">// account for cycles in doing so.</span></div>
<div class="line"><a name="l04053"></a><span class="lineno"> 4053</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;const User *&gt;</a> AllocaUsers;</div>
<div class="line"><a name="l04054"></a><span class="lineno"> 4054</span>&#160;  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;const User *, 4&gt;</a> Visited;</div>
<div class="line"><a name="l04055"></a><span class="lineno"> 4055</span>&#160;  <span class="keyword">auto</span> pushUsers = [&amp;](<span class="keyword">const</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l04056"></a><span class="lineno"> 4056</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1User.html">User</a> *U : <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.users()) {</div>
<div class="line"><a name="l04057"></a><span class="lineno"> 4057</span>&#160;      <span class="keywordflow">if</span> (Visited.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(U).second)</div>
<div class="line"><a name="l04058"></a><span class="lineno"> 4058</span>&#160;        AllocaUsers.push_back(U);</div>
<div class="line"><a name="l04059"></a><span class="lineno"> 4059</span>&#160;    }</div>
<div class="line"><a name="l04060"></a><span class="lineno"> 4060</span>&#160;  };</div>
<div class="line"><a name="l04061"></a><span class="lineno"> 4061</span>&#160;  pushUsers(*AI);</div>
<div class="line"><a name="l04062"></a><span class="lineno"> 4062</span>&#160;  <span class="keywordflow">while</span> (!AllocaUsers.empty()) {</div>
<div class="line"><a name="l04063"></a><span class="lineno"> 4063</span>&#160;    <span class="keyword">auto</span> *UserI = cast&lt;Instruction&gt;(AllocaUsers.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a0c8ffe664a36e30d49c84d0aded2fe08">pop_back_val</a>());</div>
<div class="line"><a name="l04064"></a><span class="lineno"> 4064</span>&#160;    <span class="keywordflow">if</span> (isa&lt;BitCastInst&gt;(UserI) || isa&lt;GetElementPtrInst&gt;(UserI) ||</div>
<div class="line"><a name="l04065"></a><span class="lineno"> 4065</span>&#160;        isa&lt;AddrSpaceCastInst&gt;(UserI)) {</div>
<div class="line"><a name="l04066"></a><span class="lineno"> 4066</span>&#160;      pushUsers(*UserI);</div>
<div class="line"><a name="l04067"></a><span class="lineno"> 4067</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l04068"></a><span class="lineno"> 4068</span>&#160;    }</div>
<div class="line"><a name="l04069"></a><span class="lineno"> 4069</span>&#160;    <span class="keywordflow">if</span> (UserI == CB)</div>
<div class="line"><a name="l04070"></a><span class="lineno"> 4070</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l04071"></a><span class="lineno"> 4071</span>&#160;    <span class="comment">// TODO: support lifetime.start/end here</span></div>
<div class="line"><a name="l04072"></a><span class="lineno"> 4072</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l04073"></a><span class="lineno"> 4073</span>&#160;  }</div>
<div class="line"><a name="l04074"></a><span class="lineno"> 4074</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l04075"></a><span class="lineno"> 4075</span>&#160;}</div>
<div class="line"><a name="l04076"></a><span class="lineno"> 4076</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l04077"></a><span class="lineno"> 4077</span>&#160;<span class="comment">/// Try to move the specified instruction from its current block into the</span></div>
<div class="line"><a name="l04078"></a><span class="lineno"> 4078</span>&#160;<span class="comment">/// beginning of DestBlock, which can only happen if it&#39;s safe to move the</span></div>
<div class="line"><a name="l04079"></a><span class="lineno"> 4079</span>&#160;<span class="comment">/// instruction past all of the instructions between it and the end of its</span></div>
<div class="line"><a name="l04080"></a><span class="lineno"> 4080</span>&#160;<span class="comment">/// block.</span></div>
<div class="line"><a name="l04081"></a><span class="lineno"><a class="line" href="InstructionCombining_8cpp.html#a501a6d252bd1e83fa86504b99c96bb3f"> 4081</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="InstructionCombining_8cpp.html#a501a6d252bd1e83fa86504b99c96bb3f">TryToSinkInstruction</a>(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *DestBlock,</div>
<div class="line"><a name="l04082"></a><span class="lineno"> 4082</span>&#160;                                 <a class="code" href="classllvm_1_1TargetLibraryInfo.html">TargetLibraryInfo</a> &amp;TLI) {</div>
<div class="line"><a name="l04083"></a><span class="lineno"> 4083</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *SrcBlock = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getParent();</div>
<div class="line"><a name="l04084"></a><span class="lineno"> 4084</span>&#160; </div>
<div class="line"><a name="l04085"></a><span class="lineno"> 4085</span>&#160;  <span class="comment">// Cannot move control-flow-involving, volatile loads, vaarg, etc.</span></div>
<div class="line"><a name="l04086"></a><span class="lineno"> 4086</span>&#160;  <span class="keywordflow">if</span> (isa&lt;PHINode&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) || <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;isEHPad() || <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;mayThrow() || !<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;willReturn() ||</div>
<div class="line"><a name="l04087"></a><span class="lineno"> 4087</span>&#160;      <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;isTerminator())</div>
<div class="line"><a name="l04088"></a><span class="lineno"> 4088</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l04089"></a><span class="lineno"> 4089</span>&#160; </div>
<div class="line"><a name="l04090"></a><span class="lineno"> 4090</span>&#160;  <span class="comment">// Do not sink static or dynamic alloca instructions. Static allocas must</span></div>
<div class="line"><a name="l04091"></a><span class="lineno"> 4091</span>&#160;  <span class="comment">// remain in the entry block, and dynamic allocas must not be sunk in between</span></div>
<div class="line"><a name="l04092"></a><span class="lineno"> 4092</span>&#160;  <span class="comment">// a stacksave / stackrestore pair, which would incorrectly shorten its</span></div>
<div class="line"><a name="l04093"></a><span class="lineno"> 4093</span>&#160;  <span class="comment">// lifetime.</span></div>
<div class="line"><a name="l04094"></a><span class="lineno"> 4094</span>&#160;  <span class="keywordflow">if</span> (isa&lt;AllocaInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l04095"></a><span class="lineno"> 4095</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l04096"></a><span class="lineno"> 4096</span>&#160; </div>
<div class="line"><a name="l04097"></a><span class="lineno"> 4097</span>&#160;  <span class="comment">// Do not sink into catchswitch blocks.</span></div>
<div class="line"><a name="l04098"></a><span class="lineno"> 4098</span>&#160;  <span class="keywordflow">if</span> (isa&lt;CatchSwitchInst&gt;(DestBlock-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>()))</div>
<div class="line"><a name="l04099"></a><span class="lineno"> 4099</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l04100"></a><span class="lineno"> 4100</span>&#160; </div>
<div class="line"><a name="l04101"></a><span class="lineno"> 4101</span>&#160;  <span class="comment">// Do not sink convergent call instructions.</span></div>
<div class="line"><a name="l04102"></a><span class="lineno"> 4102</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *CI = dyn_cast&lt;CallInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l04103"></a><span class="lineno"> 4103</span>&#160;    <span class="keywordflow">if</span> (CI-&gt;isConvergent())</div>
<div class="line"><a name="l04104"></a><span class="lineno"> 4104</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l04105"></a><span class="lineno"> 4105</span>&#160;  }</div>
<div class="line"><a name="l04106"></a><span class="lineno"> 4106</span>&#160; </div>
<div class="line"><a name="l04107"></a><span class="lineno"> 4107</span>&#160;  <span class="comment">// Unless we can prove that the memory write isn&#39;t visibile except on the</span></div>
<div class="line"><a name="l04108"></a><span class="lineno"> 4108</span>&#160;  <span class="comment">// path we&#39;re sinking to, we must bail.</span></div>
<div class="line"><a name="l04109"></a><span class="lineno"> 4109</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;mayWriteToMemory()) {</div>
<div class="line"><a name="l04110"></a><span class="lineno"> 4110</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="InstructionCombining_8cpp.html#aca7c31a6dcc095ed3c2831f6876c6dc0">SoleWriteToDeadLocal</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, TLI))</div>
<div class="line"><a name="l04111"></a><span class="lineno"> 4111</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l04112"></a><span class="lineno"> 4112</span>&#160;  }</div>
<div class="line"><a name="l04113"></a><span class="lineno"> 4113</span>&#160; </div>
<div class="line"><a name="l04114"></a><span class="lineno"> 4114</span>&#160;  <span class="comment">// We can only sink load instructions if there is nothing between the load and</span></div>
<div class="line"><a name="l04115"></a><span class="lineno"> 4115</span>&#160;  <span class="comment">// the end of block that could change the value.</span></div>
<div class="line"><a name="l04116"></a><span class="lineno"> 4116</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;mayReadFromMemory()) {</div>
<div class="line"><a name="l04117"></a><span class="lineno"> 4117</span>&#160;    <span class="comment">// We don&#39;t want to do any sophisticated alias analysis, so we only check</span></div>
<div class="line"><a name="l04118"></a><span class="lineno"> 4118</span>&#160;    <span class="comment">// the instructions after I in I&#39;s parent block if we try to sink to its</span></div>
<div class="line"><a name="l04119"></a><span class="lineno"> 4119</span>&#160;    <span class="comment">// successor block.</span></div>
<div class="line"><a name="l04120"></a><span class="lineno"> 4120</span>&#160;    <span class="keywordflow">if</span> (DestBlock-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a74aa9daea070e2ad3394a3ec58b7316a">getUniquePredecessor</a>() != <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getParent())</div>
<div class="line"><a name="l04121"></a><span class="lineno"> 4121</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l04122"></a><span class="lineno"> 4122</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html#a98c0a84a5dfa8bce341c829709f171e5">BasicBlock::iterator</a> Scan = std::next(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getIterator()),</div>
<div class="line"><a name="l04123"></a><span class="lineno"> 4123</span>&#160;                              <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getParent()-&gt;end();</div>
<div class="line"><a name="l04124"></a><span class="lineno"> 4124</span>&#160;         Scan != <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>; ++Scan)</div>
<div class="line"><a name="l04125"></a><span class="lineno"> 4125</span>&#160;      <span class="keywordflow">if</span> (Scan-&gt;mayWriteToMemory())</div>
<div class="line"><a name="l04126"></a><span class="lineno"> 4126</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l04127"></a><span class="lineno"> 4127</span>&#160;  }</div>
<div class="line"><a name="l04128"></a><span class="lineno"> 4128</span>&#160; </div>
<div class="line"><a name="l04129"></a><span class="lineno"> 4129</span>&#160;  <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;dropDroppableUses([DestBlock](<span class="keyword">const</span> <a class="code" href="classllvm_1_1Use.html">Use</a> *U) {</div>
<div class="line"><a name="l04130"></a><span class="lineno"> 4130</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = dyn_cast&lt;Instruction&gt;(U-&gt;getUser()))</div>
<div class="line"><a name="l04131"></a><span class="lineno"> 4131</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getParent() != DestBlock;</div>
<div class="line"><a name="l04132"></a><span class="lineno"> 4132</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l04133"></a><span class="lineno"> 4133</span>&#160;  });<span class="comment"></span></div>
<div class="line"><a name="l04134"></a><span class="lineno"> 4134</span>&#160;<span class="comment">  /// FIXME: We could remove droppable uses that are not dominated by</span></div>
<div class="line"><a name="l04135"></a><span class="lineno"> 4135</span>&#160;<span class="comment">  /// the new position.</span></div>
<div class="line"><a name="l04136"></a><span class="lineno"> 4136</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l04137"></a><span class="lineno"> 4137</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html#a98c0a84a5dfa8bce341c829709f171e5">BasicBlock::iterator</a> InsertPos = DestBlock-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a161fd4e9fa5367f64c2a4c9e921c3ad3">getFirstInsertionPt</a>();</div>
<div class="line"><a name="l04138"></a><span class="lineno"> 4138</span>&#160;  <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;moveBefore(&amp;*InsertPos);</div>
<div class="line"><a name="l04139"></a><span class="lineno"> 4139</span>&#160;  ++NumSunkInst;</div>
<div class="line"><a name="l04140"></a><span class="lineno"> 4140</span>&#160; </div>
<div class="line"><a name="l04141"></a><span class="lineno"> 4141</span>&#160;  <span class="comment">// Also sink all related debug uses from the source basic block. Otherwise we</span></div>
<div class="line"><a name="l04142"></a><span class="lineno"> 4142</span>&#160;  <span class="comment">// get debug use before the def. Attempt to salvage debug uses first, to</span></div>
<div class="line"><a name="l04143"></a><span class="lineno"> 4143</span>&#160;  <span class="comment">// maximise the range variables have location for. If we cannot salvage, then</span></div>
<div class="line"><a name="l04144"></a><span class="lineno"> 4144</span>&#160;  <span class="comment">// mark the location undef: we know it was supposed to receive a new location</span></div>
<div class="line"><a name="l04145"></a><span class="lineno"> 4145</span>&#160;  <span class="comment">// here, but that computation has been sunk.</span></div>
<div class="line"><a name="l04146"></a><span class="lineno"> 4146</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;DbgVariableIntrinsic *, 2&gt;</a> DbgUsers;</div>
<div class="line"><a name="l04147"></a><span class="lineno"> 4147</span>&#160;  <a class="code" href="namespacellvm.html#a683448397460b5b16e0d9016fd7a273a">findDbgUsers</a>(DbgUsers, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l04148"></a><span class="lineno"> 4148</span>&#160;  <span class="comment">// Process the sinking DbgUsers in reverse order, as we only want to clone the</span></div>
<div class="line"><a name="l04149"></a><span class="lineno"> 4149</span>&#160;  <span class="comment">// last appearing debug intrinsic for each given variable.</span></div>
<div class="line"><a name="l04150"></a><span class="lineno"> 4150</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;DbgVariableIntrinsic *, 2&gt;</a> DbgUsersToSink;</div>
<div class="line"><a name="l04151"></a><span class="lineno"> 4151</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1DbgVariableIntrinsic.html">DbgVariableIntrinsic</a> *DVI : DbgUsers)</div>
<div class="line"><a name="l04152"></a><span class="lineno"> 4152</span>&#160;    <span class="keywordflow">if</span> (DVI-&gt;getParent() == SrcBlock)</div>
<div class="line"><a name="l04153"></a><span class="lineno"> 4153</span>&#160;      DbgUsersToSink.push_back(DVI);</div>
<div class="line"><a name="l04154"></a><span class="lineno"> 4154</span>&#160;  <a class="code" href="namespacellvm.html#a74cdbd1e4f731e7d7cd83461b8b1de0b">llvm::sort</a>(DbgUsersToSink,</div>
<div class="line"><a name="l04155"></a><span class="lineno"> 4155</span>&#160;             [](<span class="keyword">auto</span> *A, <span class="keyword">auto</span> *<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>) { <span class="keywordflow">return</span> <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>-&gt;comesBefore(A); });</div>
<div class="line"><a name="l04156"></a><span class="lineno"> 4156</span>&#160; </div>
<div class="line"><a name="l04157"></a><span class="lineno"> 4157</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;DbgVariableIntrinsic *, 2&gt;</a> DIIClones;</div>
<div class="line"><a name="l04158"></a><span class="lineno"> 4158</span>&#160;  <a class="code" href="classllvm_1_1SmallSet.html">SmallSet&lt;DebugVariable, 4&gt;</a> SunkVariables;</div>
<div class="line"><a name="l04159"></a><span class="lineno"> 4159</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> *<a class="code" href="classllvm_1_1User.html">User</a> : DbgUsersToSink) {</div>
<div class="line"><a name="l04160"></a><span class="lineno"> 4160</span>&#160;    <span class="comment">// A dbg.declare instruction should not be cloned, since there can only be</span></div>
<div class="line"><a name="l04161"></a><span class="lineno"> 4161</span>&#160;    <span class="comment">// one per variable fragment. It should be left in the original place</span></div>
<div class="line"><a name="l04162"></a><span class="lineno"> 4162</span>&#160;    <span class="comment">// because the sunk instruction is not an alloca (otherwise we could not be</span></div>
<div class="line"><a name="l04163"></a><span class="lineno"> 4163</span>&#160;    <span class="comment">// here).</span></div>
<div class="line"><a name="l04164"></a><span class="lineno"> 4164</span>&#160;    <span class="keywordflow">if</span> (isa&lt;DbgDeclareInst&gt;(<a class="code" href="classllvm_1_1User.html">User</a>))</div>
<div class="line"><a name="l04165"></a><span class="lineno"> 4165</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l04166"></a><span class="lineno"> 4166</span>&#160; </div>
<div class="line"><a name="l04167"></a><span class="lineno"> 4167</span>&#160;    <a class="code" href="classllvm_1_1DebugVariable.html">DebugVariable</a> DbgUserVariable =</div>
<div class="line"><a name="l04168"></a><span class="lineno"> 4168</span>&#160;        <a class="code" href="classllvm_1_1DebugVariable.html">DebugVariable</a>(<a class="code" href="classllvm_1_1User.html">User</a>-&gt;getVariable(), <a class="code" href="classllvm_1_1User.html">User</a>-&gt;getExpression(),</div>
<div class="line"><a name="l04169"></a><span class="lineno"> 4169</span>&#160;                      <a class="code" href="classllvm_1_1User.html">User</a>-&gt;getDebugLoc()-&gt;getInlinedAt());</div>
<div class="line"><a name="l04170"></a><span class="lineno"> 4170</span>&#160; </div>
<div class="line"><a name="l04171"></a><span class="lineno"> 4171</span>&#160;    <span class="keywordflow">if</span> (!SunkVariables.<a class="code" href="classllvm_1_1SmallSet.html#a1679469af9bb8ccfbe98441fb8228c79">insert</a>(DbgUserVariable).second)</div>
<div class="line"><a name="l04172"></a><span class="lineno"> 4172</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l04173"></a><span class="lineno"> 4173</span>&#160; </div>
<div class="line"><a name="l04174"></a><span class="lineno"> 4174</span>&#160;    <span class="comment">// Leave dbg.assign intrinsics in their original positions and there should</span></div>
<div class="line"><a name="l04175"></a><span class="lineno"> 4175</span>&#160;    <span class="comment">// be no need to insert a clone.</span></div>
<div class="line"><a name="l04176"></a><span class="lineno"> 4176</span>&#160;    <span class="keywordflow">if</span> (isa&lt;DbgAssignIntrinsic&gt;(<a class="code" href="classllvm_1_1User.html">User</a>))</div>
<div class="line"><a name="l04177"></a><span class="lineno"> 4177</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l04178"></a><span class="lineno"> 4178</span>&#160; </div>
<div class="line"><a name="l04179"></a><span class="lineno"> 4179</span>&#160;    DIIClones.emplace_back(cast&lt;DbgVariableIntrinsic&gt;(<a class="code" href="classllvm_1_1User.html">User</a>-&gt;clone()));</div>
<div class="line"><a name="l04180"></a><span class="lineno"> 4180</span>&#160;    <span class="keywordflow">if</span> (isa&lt;DbgDeclareInst&gt;(<a class="code" href="classllvm_1_1User.html">User</a>) &amp;&amp; isa&lt;CastInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l04181"></a><span class="lineno"> 4181</span>&#160;      DIIClones.back()-&gt;replaceVariableLocationOp(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(0));</div>
<div class="line"><a name="l04182"></a><span class="lineno"> 4182</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;CLONE: &quot;</span> &lt;&lt; *DIIClones.back() &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div>
<div class="line"><a name="l04183"></a><span class="lineno"> 4183</span>&#160;  }</div>
<div class="line"><a name="l04184"></a><span class="lineno"> 4184</span>&#160; </div>
<div class="line"><a name="l04185"></a><span class="lineno"> 4185</span>&#160;  <span class="comment">// Perform salvaging without the clones, then sink the clones.</span></div>
<div class="line"><a name="l04186"></a><span class="lineno"> 4186</span>&#160;  <span class="keywordflow">if</span> (!DIIClones.empty()) {</div>
<div class="line"><a name="l04187"></a><span class="lineno"> 4187</span>&#160;    <a class="code" href="namespacellvm.html#a24243d0f6646560894f96b01fddfc6da">salvageDebugInfoForDbgValues</a>(*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, DbgUsers);</div>
<div class="line"><a name="l04188"></a><span class="lineno"> 4188</span>&#160;    <span class="comment">// The clones are in reverse order of original appearance, reverse again to</span></div>
<div class="line"><a name="l04189"></a><span class="lineno"> 4189</span>&#160;    <span class="comment">// maintain the original order.</span></div>
<div class="line"><a name="l04190"></a><span class="lineno"> 4190</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;DIIClone : <a class="code" href="namespacellvm.html#a6b0ac1fa4f05de76413c5e0ca6334035">llvm::reverse</a>(DIIClones)) {</div>
<div class="line"><a name="l04191"></a><span class="lineno"> 4191</span>&#160;      DIIClone-&gt;insertBefore(&amp;*InsertPos);</div>
<div class="line"><a name="l04192"></a><span class="lineno"> 4192</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;SINK: &quot;</span> &lt;&lt; *DIIClone &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div>
<div class="line"><a name="l04193"></a><span class="lineno"> 4193</span>&#160;    }</div>
<div class="line"><a name="l04194"></a><span class="lineno"> 4194</span>&#160;  }</div>
<div class="line"><a name="l04195"></a><span class="lineno"> 4195</span>&#160; </div>
<div class="line"><a name="l04196"></a><span class="lineno"> 4196</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l04197"></a><span class="lineno"> 4197</span>&#160;}</div>
<div class="line"><a name="l04198"></a><span class="lineno"> 4198</span>&#160; </div>
<div class="line"><a name="l04199"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombinerImpl.html#ac5d3cfa0755b34bcbd3f2298e9fa28ed"> 4199</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1InstCombinerImpl.html#ac5d3cfa0755b34bcbd3f2298e9fa28ed">InstCombinerImpl::run</a>() {</div>
<div class="line"><a name="l04200"></a><span class="lineno"> 4200</span>&#160;  <span class="keywordflow">while</span> (!Worklist.isEmpty()) {</div>
<div class="line"><a name="l04201"></a><span class="lineno"> 4201</span>&#160;    <span class="comment">// Walk deferred instructions in reverse order, and push them to the</span></div>
<div class="line"><a name="l04202"></a><span class="lineno"> 4202</span>&#160;    <span class="comment">// worklist, which means they&#39;ll end up popped from the worklist in-order.</span></div>
<div class="line"><a name="l04203"></a><span class="lineno"> 4203</span>&#160;    <span class="keywordflow">while</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = Worklist.popDeferred()) {</div>
<div class="line"><a name="l04204"></a><span class="lineno"> 4204</span>&#160;      <span class="comment">// Check to see if we can DCE the instruction. We do this already here to</span></div>
<div class="line"><a name="l04205"></a><span class="lineno"> 4205</span>&#160;      <span class="comment">// reduce the number of uses and thus allow other folds to trigger.</span></div>
<div class="line"><a name="l04206"></a><span class="lineno"> 4206</span>&#160;      <span class="comment">// Note that eraseInstFromFunction() may push additional instructions on</span></div>
<div class="line"><a name="l04207"></a><span class="lineno"> 4207</span>&#160;      <span class="comment">// the deferred worklist, so this will DCE whole instruction chains.</span></div>
<div class="line"><a name="l04208"></a><span class="lineno"> 4208</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a627b2f86ac433d829482d5a5a0f50668">isInstructionTriviallyDead</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, &amp;TLI)) {</div>
<div class="line"><a name="l04209"></a><span class="lineno"> 4209</span>&#160;        eraseInstFromFunction(*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l04210"></a><span class="lineno"> 4210</span>&#160;        ++NumDeadInst;</div>
<div class="line"><a name="l04211"></a><span class="lineno"> 4211</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l04212"></a><span class="lineno"> 4212</span>&#160;      }</div>
<div class="line"><a name="l04213"></a><span class="lineno"> 4213</span>&#160; </div>
<div class="line"><a name="l04214"></a><span class="lineno"> 4214</span>&#160;      Worklist.push(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l04215"></a><span class="lineno"> 4215</span>&#160;    }</div>
<div class="line"><a name="l04216"></a><span class="lineno"> 4216</span>&#160; </div>
<div class="line"><a name="l04217"></a><span class="lineno"> 4217</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = Worklist.removeOne();</div>
<div class="line"><a name="l04218"></a><span class="lineno"> 4218</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> == <span class="keyword">nullptr</span>) <span class="keywordflow">continue</span>;  <span class="comment">// skip null values.</span></div>
<div class="line"><a name="l04219"></a><span class="lineno"> 4219</span>&#160; </div>
<div class="line"><a name="l04220"></a><span class="lineno"> 4220</span>&#160;    <span class="comment">// Check to see if we can DCE the instruction.</span></div>
<div class="line"><a name="l04221"></a><span class="lineno"> 4221</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a627b2f86ac433d829482d5a5a0f50668">isInstructionTriviallyDead</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, &amp;TLI)) {</div>
<div class="line"><a name="l04222"></a><span class="lineno"> 4222</span>&#160;      eraseInstFromFunction(*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l04223"></a><span class="lineno"> 4223</span>&#160;      ++NumDeadInst;</div>
<div class="line"><a name="l04224"></a><span class="lineno"> 4224</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l04225"></a><span class="lineno"> 4225</span>&#160;    }</div>
<div class="line"><a name="l04226"></a><span class="lineno"> 4226</span>&#160; </div>
<div class="line"><a name="l04227"></a><span class="lineno"> 4227</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classllvm_1_1DebugCounter.html#a5aace8653ce3726ef07194dcf6bce2bf">DebugCounter::shouldExecute</a>(VisitCounter))</div>
<div class="line"><a name="l04228"></a><span class="lineno"> 4228</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l04229"></a><span class="lineno"> 4229</span>&#160; </div>
<div class="line"><a name="l04230"></a><span class="lineno"> 4230</span>&#160;    <span class="comment">// Instruction isn&#39;t dead, see if we can constant propagate it.</span></div>
<div class="line"><a name="l04231"></a><span class="lineno"> 4231</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;use_empty() &amp;&amp;</div>
<div class="line"><a name="l04232"></a><span class="lineno"> 4232</span>&#160;        (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getNumOperands() == 0 || isa&lt;Constant&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(0)))) {</div>
<div class="line"><a name="l04233"></a><span class="lineno"> 4233</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = <a class="code" href="namespacellvm.html#ab6be6270337c6f7620007555247401ce">ConstantFoldInstruction</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, &amp;TLI)) {</div>
<div class="line"><a name="l04234"></a><span class="lineno"> 4234</span>&#160;        <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;IC: ConstFold to: &quot;</span> &lt;&lt; *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> &lt;&lt; <span class="stringliteral">&quot; from: &quot;</span> &lt;&lt; *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div>
<div class="line"><a name="l04235"></a><span class="lineno"> 4235</span>&#160;                          &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div>
<div class="line"><a name="l04236"></a><span class="lineno"> 4236</span>&#160; </div>
<div class="line"><a name="l04237"></a><span class="lineno"> 4237</span>&#160;        <span class="comment">// Add operands to the worklist.</span></div>
<div class="line"><a name="l04238"></a><span class="lineno"> 4238</span>&#160;        replaceInstUsesWith(*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div>
<div class="line"><a name="l04239"></a><span class="lineno"> 4239</span>&#160;        ++NumConstProp;</div>
<div class="line"><a name="l04240"></a><span class="lineno"> 4240</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a627b2f86ac433d829482d5a5a0f50668">isInstructionTriviallyDead</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, &amp;TLI))</div>
<div class="line"><a name="l04241"></a><span class="lineno"> 4241</span>&#160;          eraseInstFromFunction(*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l04242"></a><span class="lineno"> 4242</span>&#160;        MadeIRChange = <span class="keyword">true</span>;</div>
<div class="line"><a name="l04243"></a><span class="lineno"> 4243</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l04244"></a><span class="lineno"> 4244</span>&#160;      }</div>
<div class="line"><a name="l04245"></a><span class="lineno"> 4245</span>&#160;    }</div>
<div class="line"><a name="l04246"></a><span class="lineno"> 4246</span>&#160; </div>
<div class="line"><a name="l04247"></a><span class="lineno"> 4247</span>&#160;    <span class="comment">// See if we can trivially sink this instruction to its user if we can</span></div>
<div class="line"><a name="l04248"></a><span class="lineno"> 4248</span>&#160;    <span class="comment">// prove that the successor is not executed more frequently than our block.</span></div>
<div class="line"><a name="l04249"></a><span class="lineno"> 4249</span>&#160;    <span class="comment">// Return the UserBlock if successful.</span></div>
<div class="line"><a name="l04250"></a><span class="lineno"> 4250</span>&#160;    <span class="keyword">auto</span> getOptionalSinkBlockForInst =</div>
<div class="line"><a name="l04251"></a><span class="lineno"> 4251</span>&#160;        [<span class="keyword">this</span>](<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) -&gt; std::optional&lt;BasicBlock *&gt; {</div>
<div class="line"><a name="l04252"></a><span class="lineno"> 4252</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="InstructionCombining_8cpp.html#ad3927c8a343c4413b417622bad485196">EnableCodeSinking</a>)</div>
<div class="line"><a name="l04253"></a><span class="lineno"> 4253</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l04254"></a><span class="lineno"> 4254</span>&#160; </div>
<div class="line"><a name="l04255"></a><span class="lineno"> 4255</span>&#160;      <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getParent();</div>
<div class="line"><a name="l04256"></a><span class="lineno"> 4256</span>&#160;      <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *UserParent = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l04257"></a><span class="lineno"> 4257</span>&#160;      <span class="keywordtype">unsigned</span> NumUsers = 0;</div>
<div class="line"><a name="l04258"></a><span class="lineno"> 4258</span>&#160; </div>
<div class="line"><a name="l04259"></a><span class="lineno"> 4259</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">auto</span> *U : <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;users()) {</div>
<div class="line"><a name="l04260"></a><span class="lineno"> 4260</span>&#160;        <span class="keywordflow">if</span> (U-&gt;isDroppable())</div>
<div class="line"><a name="l04261"></a><span class="lineno"> 4261</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l04262"></a><span class="lineno"> 4262</span>&#160;        <span class="keywordflow">if</span> (NumUsers &gt; <a class="code" href="InstructionCombining_8cpp.html#a6f35c3231e19a56dcbaa6c7f972472f5">MaxSinkNumUsers</a>)</div>
<div class="line"><a name="l04263"></a><span class="lineno"> 4263</span>&#160;          <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l04264"></a><span class="lineno"> 4264</span>&#160; </div>
<div class="line"><a name="l04265"></a><span class="lineno"> 4265</span>&#160;        <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *UserInst = cast&lt;Instruction&gt;(U);</div>
<div class="line"><a name="l04266"></a><span class="lineno"> 4266</span>&#160;        <span class="comment">// Special handling for Phi nodes - get the block the use occurs in.</span></div>
<div class="line"><a name="l04267"></a><span class="lineno"> 4267</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *PN = dyn_cast&lt;PHINode&gt;(UserInst)) {</div>
<div class="line"><a name="l04268"></a><span class="lineno"> 4268</span>&#160;          <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; PN-&gt;getNumIncomingValues(); <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l04269"></a><span class="lineno"> 4269</span>&#160;            <span class="keywordflow">if</span> (PN-&gt;getIncomingValue(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) == <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l04270"></a><span class="lineno"> 4270</span>&#160;              <span class="comment">// Bail out if we have uses in different blocks. We don&#39;t do any</span></div>
<div class="line"><a name="l04271"></a><span class="lineno"> 4271</span>&#160;              <span class="comment">// sophisticated analysis (i.e finding NearestCommonDominator of</span></div>
<div class="line"><a name="l04272"></a><span class="lineno"> 4272</span>&#160;              <span class="comment">// these use blocks).</span></div>
<div class="line"><a name="l04273"></a><span class="lineno"> 4273</span>&#160;              <span class="keywordflow">if</span> (UserParent &amp;&amp; UserParent != PN-&gt;getIncomingBlock(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>))</div>
<div class="line"><a name="l04274"></a><span class="lineno"> 4274</span>&#160;                <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l04275"></a><span class="lineno"> 4275</span>&#160;              UserParent = PN-&gt;getIncomingBlock(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div>
<div class="line"><a name="l04276"></a><span class="lineno"> 4276</span>&#160;            }</div>
<div class="line"><a name="l04277"></a><span class="lineno"> 4277</span>&#160;          }</div>
<div class="line"><a name="l04278"></a><span class="lineno"> 4278</span>&#160;          <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(UserParent &amp;&amp; <span class="stringliteral">&quot;expected to find user block!&quot;</span>);</div>
<div class="line"><a name="l04279"></a><span class="lineno"> 4279</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04280"></a><span class="lineno"> 4280</span>&#160;          <span class="keywordflow">if</span> (UserParent &amp;&amp; UserParent != UserInst-&gt;<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>())</div>
<div class="line"><a name="l04281"></a><span class="lineno"> 4281</span>&#160;            <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l04282"></a><span class="lineno"> 4282</span>&#160;          UserParent = UserInst-&gt;<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>();</div>
<div class="line"><a name="l04283"></a><span class="lineno"> 4283</span>&#160;        }</div>
<div class="line"><a name="l04284"></a><span class="lineno"> 4284</span>&#160; </div>
<div class="line"><a name="l04285"></a><span class="lineno"> 4285</span>&#160;        <span class="comment">// Make sure these checks are done only once, naturally we do the checks</span></div>
<div class="line"><a name="l04286"></a><span class="lineno"> 4286</span>&#160;        <span class="comment">// the first time we get the userparent, this will save compile time.</span></div>
<div class="line"><a name="l04287"></a><span class="lineno"> 4287</span>&#160;        <span class="keywordflow">if</span> (NumUsers == 0) {</div>
<div class="line"><a name="l04288"></a><span class="lineno"> 4288</span>&#160;          <span class="comment">// Try sinking to another block. If that block is unreachable, then do</span></div>
<div class="line"><a name="l04289"></a><span class="lineno"> 4289</span>&#160;          <span class="comment">// not bother. SimplifyCFG should handle it.</span></div>
<div class="line"><a name="l04290"></a><span class="lineno"> 4290</span>&#160;          <span class="keywordflow">if</span> (UserParent == <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> || !DT.isReachableFromEntry(UserParent))</div>
<div class="line"><a name="l04291"></a><span class="lineno"> 4291</span>&#160;            <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l04292"></a><span class="lineno"> 4292</span>&#160; </div>
<div class="line"><a name="l04293"></a><span class="lineno"> 4293</span>&#160;          <span class="keyword">auto</span> *<a class="code" href="namespacellvm_1_1M68kBeads.html#a7eeab1fe8f39bf89dcd7929b816ebfcca27d0e059322508a76f918503800ef1bd">Term</a> = UserParent-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>();</div>
<div class="line"><a name="l04294"></a><span class="lineno"> 4294</span>&#160;          <span class="comment">// See if the user is one of our successors that has only one</span></div>
<div class="line"><a name="l04295"></a><span class="lineno"> 4295</span>&#160;          <span class="comment">// predecessor, so that we don&#39;t have to split the critical edge.</span></div>
<div class="line"><a name="l04296"></a><span class="lineno"> 4296</span>&#160;          <span class="comment">// Another option where we can sink is a block that ends with a</span></div>
<div class="line"><a name="l04297"></a><span class="lineno"> 4297</span>&#160;          <span class="comment">// terminator that does not pass control to other block (such as</span></div>
<div class="line"><a name="l04298"></a><span class="lineno"> 4298</span>&#160;          <span class="comment">// return or unreachable or resume). In this case:</span></div>
<div class="line"><a name="l04299"></a><span class="lineno"> 4299</span>&#160;          <span class="comment">//   - I dominates the User (by SSA form);</span></div>
<div class="line"><a name="l04300"></a><span class="lineno"> 4300</span>&#160;          <span class="comment">//   - the User will be executed at most once.</span></div>
<div class="line"><a name="l04301"></a><span class="lineno"> 4301</span>&#160;          <span class="comment">// So sinking I down to User is always profitable or neutral.</span></div>
<div class="line"><a name="l04302"></a><span class="lineno"> 4302</span>&#160;          <span class="keywordflow">if</span> (UserParent-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a74aa9daea070e2ad3394a3ec58b7316a">getUniquePredecessor</a>() != <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> &amp;&amp; !<a class="code" href="namespacellvm.html#a126a78caf2176eb39d879c899bdd749c">succ_empty</a>(<a class="code" href="namespacellvm_1_1M68kBeads.html#a7eeab1fe8f39bf89dcd7929b816ebfcca27d0e059322508a76f918503800ef1bd">Term</a>))</div>
<div class="line"><a name="l04303"></a><span class="lineno"> 4303</span>&#160;            <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l04304"></a><span class="lineno"> 4304</span>&#160; </div>
<div class="line"><a name="l04305"></a><span class="lineno"> 4305</span>&#160;          <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(DT.dominates(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, UserParent) &amp;&amp; <span class="stringliteral">&quot;Dominance relation broken?&quot;</span>);</div>
<div class="line"><a name="l04306"></a><span class="lineno"> 4306</span>&#160;        }</div>
<div class="line"><a name="l04307"></a><span class="lineno"> 4307</span>&#160; </div>
<div class="line"><a name="l04308"></a><span class="lineno"> 4308</span>&#160;        NumUsers++;</div>
<div class="line"><a name="l04309"></a><span class="lineno"> 4309</span>&#160;      }</div>
<div class="line"><a name="l04310"></a><span class="lineno"> 4310</span>&#160; </div>
<div class="line"><a name="l04311"></a><span class="lineno"> 4311</span>&#160;      <span class="comment">// No user or only has droppable users.</span></div>
<div class="line"><a name="l04312"></a><span class="lineno"> 4312</span>&#160;      <span class="keywordflow">if</span> (!UserParent)</div>
<div class="line"><a name="l04313"></a><span class="lineno"> 4313</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l04314"></a><span class="lineno"> 4314</span>&#160; </div>
<div class="line"><a name="l04315"></a><span class="lineno"> 4315</span>&#160;      <span class="keywordflow">return</span> UserParent;</div>
<div class="line"><a name="l04316"></a><span class="lineno"> 4316</span>&#160;    };</div>
<div class="line"><a name="l04317"></a><span class="lineno"> 4317</span>&#160; </div>
<div class="line"><a name="l04318"></a><span class="lineno"> 4318</span>&#160;    <span class="keyword">auto</span> OptBB = getOptionalSinkBlockForInst(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l04319"></a><span class="lineno"> 4319</span>&#160;    <span class="keywordflow">if</span> (OptBB) {</div>
<div class="line"><a name="l04320"></a><span class="lineno"> 4320</span>&#160;      <span class="keyword">auto</span> *UserParent = *OptBB;</div>
<div class="line"><a name="l04321"></a><span class="lineno"> 4321</span>&#160;      <span class="comment">// Okay, the CFG is simple enough, try to sink this instruction.</span></div>
<div class="line"><a name="l04322"></a><span class="lineno"> 4322</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="InstructionCombining_8cpp.html#a501a6d252bd1e83fa86504b99c96bb3f">TryToSinkInstruction</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, UserParent, TLI)) {</div>
<div class="line"><a name="l04323"></a><span class="lineno"> 4323</span>&#160;        <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;IC: Sink: &quot;</span> &lt;&lt; *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div>
<div class="line"><a name="l04324"></a><span class="lineno"> 4324</span>&#160;        MadeIRChange = <span class="keyword">true</span>;</div>
<div class="line"><a name="l04325"></a><span class="lineno"> 4325</span>&#160;        <span class="comment">// We&#39;ll add uses of the sunk instruction below, but since</span></div>
<div class="line"><a name="l04326"></a><span class="lineno"> 4326</span>&#160;        <span class="comment">// sinking can expose opportunities for it&#39;s *operands* add</span></div>
<div class="line"><a name="l04327"></a><span class="lineno"> 4327</span>&#160;        <span class="comment">// them to the worklist</span></div>
<div class="line"><a name="l04328"></a><span class="lineno"> 4328</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Use.html">Use</a> &amp;U : <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;operands())</div>
<div class="line"><a name="l04329"></a><span class="lineno"> 4329</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *OpI = dyn_cast&lt;Instruction&gt;(U.get()))</div>
<div class="line"><a name="l04330"></a><span class="lineno"> 4330</span>&#160;            Worklist.push(OpI);</div>
<div class="line"><a name="l04331"></a><span class="lineno"> 4331</span>&#160;      }</div>
<div class="line"><a name="l04332"></a><span class="lineno"> 4332</span>&#160;    }</div>
<div class="line"><a name="l04333"></a><span class="lineno"> 4333</span>&#160; </div>
<div class="line"><a name="l04334"></a><span class="lineno"> 4334</span>&#160;    <span class="comment">// Now that we have an instruction, try combining it to simplify it.</span></div>
<div class="line"><a name="l04335"></a><span class="lineno"> 4335</span>&#160;    <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l04336"></a><span class="lineno"> 4336</span>&#160;    <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CollectMetadataToCopy(</div>
<div class="line"><a name="l04337"></a><span class="lineno"> 4337</span>&#160;        <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, {LLVMContext::MD_dbg, LLVMContext::MD_annotation});</div>
<div class="line"><a name="l04338"></a><span class="lineno"> 4338</span>&#160; </div>
<div class="line"><a name="l04339"></a><span class="lineno"> 4339</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><a name="l04340"></a><span class="lineno"> 4340</span>&#160;    std::string OrigI;</div>
<div class="line"><a name="l04341"></a><span class="lineno"> 4341</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l04342"></a><span class="lineno"> 4342</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="classllvm_1_1raw__string__ostream.html">raw_string_ostream</a> <a class="code" href="namespacellvm_1_1X86AS.html#aea2591d7d017866934bcf72ee3dc8a31a1337cc82304bed6c1a811f1a7f308aca">SS</a>(OrigI); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;print(<a class="code" href="namespacellvm_1_1X86AS.html#aea2591d7d017866934bcf72ee3dc8a31a1337cc82304bed6c1a811f1a7f308aca">SS</a>); OrigI = <a class="code" href="namespacellvm_1_1X86AS.html#aea2591d7d017866934bcf72ee3dc8a31a1337cc82304bed6c1a811f1a7f308aca">SS</a>.str(););</div>
<div class="line"><a name="l04343"></a><span class="lineno"> 4343</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;IC: Visiting: &quot;</span> &lt;&lt; OrigI &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div>
<div class="line"><a name="l04344"></a><span class="lineno"> 4344</span>&#160; </div>
<div class="line"><a name="l04345"></a><span class="lineno"> 4345</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Result = visit(*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l04346"></a><span class="lineno"> 4346</span>&#160;      ++NumCombined;</div>
<div class="line"><a name="l04347"></a><span class="lineno"> 4347</span>&#160;      <span class="comment">// Should we replace the old instruction with a new one?</span></div>
<div class="line"><a name="l04348"></a><span class="lineno"> 4348</span>&#160;      <span class="keywordflow">if</span> (Result != <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l04349"></a><span class="lineno"> 4349</span>&#160;        <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;IC: Old = &quot;</span> &lt;&lt; *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> &lt;&lt; <span class="charliteral">&#39;\n&#39;</span></div>
<div class="line"><a name="l04350"></a><span class="lineno"> 4350</span>&#160;                          &lt;&lt; <span class="stringliteral">&quot;    New = &quot;</span> &lt;&lt; *Result &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div>
<div class="line"><a name="l04351"></a><span class="lineno"> 4351</span>&#160; </div>
<div class="line"><a name="l04352"></a><span class="lineno"> 4352</span>&#160;        Result-&gt;copyMetadata(*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>,</div>
<div class="line"><a name="l04353"></a><span class="lineno"> 4353</span>&#160;                             {LLVMContext::MD_dbg, LLVMContext::MD_annotation});</div>
<div class="line"><a name="l04354"></a><span class="lineno"> 4354</span>&#160;        <span class="comment">// Everything uses the new instruction now.</span></div>
<div class="line"><a name="l04355"></a><span class="lineno"> 4355</span>&#160;        <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;replaceAllUsesWith(Result);</div>
<div class="line"><a name="l04356"></a><span class="lineno"> 4356</span>&#160; </div>
<div class="line"><a name="l04357"></a><span class="lineno"> 4357</span>&#160;        <span class="comment">// Move the name to the new instruction first.</span></div>
<div class="line"><a name="l04358"></a><span class="lineno"> 4358</span>&#160;        Result-&gt;takeName(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l04359"></a><span class="lineno"> 4359</span>&#160; </div>
<div class="line"><a name="l04360"></a><span class="lineno"> 4360</span>&#160;        <span class="comment">// Insert the new instruction into the basic block...</span></div>
<div class="line"><a name="l04361"></a><span class="lineno"> 4361</span>&#160;        <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *InstParent = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getParent();</div>
<div class="line"><a name="l04362"></a><span class="lineno"> 4362</span>&#160;        <a class="code" href="classllvm_1_1BasicBlock.html#a98c0a84a5dfa8bce341c829709f171e5">BasicBlock::iterator</a> InsertPos = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getIterator();</div>
<div class="line"><a name="l04363"></a><span class="lineno"> 4363</span>&#160; </div>
<div class="line"><a name="l04364"></a><span class="lineno"> 4364</span>&#160;        <span class="comment">// Are we replace a PHI with something that isn&#39;t a PHI, or vice versa?</span></div>
<div class="line"><a name="l04365"></a><span class="lineno"> 4365</span>&#160;        <span class="keywordflow">if</span> (isa&lt;PHINode&gt;(Result) != isa&lt;PHINode&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l04366"></a><span class="lineno"> 4366</span>&#160;          <span class="comment">// We need to fix up the insertion point.</span></div>
<div class="line"><a name="l04367"></a><span class="lineno"> 4367</span>&#160;          <span class="keywordflow">if</span> (isa&lt;PHINode&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) <span class="comment">// PHI -&gt; Non-PHI</span></div>
<div class="line"><a name="l04368"></a><span class="lineno"> 4368</span>&#160;            InsertPos = InstParent-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a161fd4e9fa5367f64c2a4c9e921c3ad3">getFirstInsertionPt</a>();</div>
<div class="line"><a name="l04369"></a><span class="lineno"> 4369</span>&#160;          <span class="keywordflow">else</span> <span class="comment">// Non-PHI -&gt; PHI</span></div>
<div class="line"><a name="l04370"></a><span class="lineno"> 4370</span>&#160;            InsertPos = InstParent-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a46ef6115027606b67adcf4d28f3dac17">getFirstNonPHI</a>()-&gt;<a class="code" href="classllvm_1_1ilist__node__impl.html#af719fc783be6589465137d997701a432">getIterator</a>();</div>
<div class="line"><a name="l04371"></a><span class="lineno"> 4371</span>&#160;        }</div>
<div class="line"><a name="l04372"></a><span class="lineno"> 4372</span>&#160; </div>
<div class="line"><a name="l04373"></a><span class="lineno"> 4373</span>&#160;        Result-&gt;insertInto(InstParent, InsertPos);</div>
<div class="line"><a name="l04374"></a><span class="lineno"> 4374</span>&#160; </div>
<div class="line"><a name="l04375"></a><span class="lineno"> 4375</span>&#160;        <span class="comment">// Push the new instruction and any users onto the worklist.</span></div>
<div class="line"><a name="l04376"></a><span class="lineno"> 4376</span>&#160;        Worklist.pushUsersToWorkList(*Result);</div>
<div class="line"><a name="l04377"></a><span class="lineno"> 4377</span>&#160;        Worklist.push(Result);</div>
<div class="line"><a name="l04378"></a><span class="lineno"> 4378</span>&#160; </div>
<div class="line"><a name="l04379"></a><span class="lineno"> 4379</span>&#160;        eraseInstFromFunction(*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l04380"></a><span class="lineno"> 4380</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04381"></a><span class="lineno"> 4381</span>&#160;        <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;IC: Mod = &quot;</span> &lt;&lt; OrigI &lt;&lt; <span class="charliteral">&#39;\n&#39;</span></div>
<div class="line"><a name="l04382"></a><span class="lineno"> 4382</span>&#160;                          &lt;&lt; <span class="stringliteral">&quot;    New = &quot;</span> &lt;&lt; *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div>
<div class="line"><a name="l04383"></a><span class="lineno"> 4383</span>&#160; </div>
<div class="line"><a name="l04384"></a><span class="lineno"> 4384</span>&#160;        <span class="comment">// If the instruction was modified, it&#39;s possible that it is now dead.</span></div>
<div class="line"><a name="l04385"></a><span class="lineno"> 4385</span>&#160;        <span class="comment">// if so, remove it.</span></div>
<div class="line"><a name="l04386"></a><span class="lineno"> 4386</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a627b2f86ac433d829482d5a5a0f50668">isInstructionTriviallyDead</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, &amp;TLI)) {</div>
<div class="line"><a name="l04387"></a><span class="lineno"> 4387</span>&#160;          eraseInstFromFunction(*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l04388"></a><span class="lineno"> 4388</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04389"></a><span class="lineno"> 4389</span>&#160;          Worklist.pushUsersToWorkList(*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l04390"></a><span class="lineno"> 4390</span>&#160;          Worklist.push(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l04391"></a><span class="lineno"> 4391</span>&#160;        }</div>
<div class="line"><a name="l04392"></a><span class="lineno"> 4392</span>&#160;      }</div>
<div class="line"><a name="l04393"></a><span class="lineno"> 4393</span>&#160;      MadeIRChange = <span class="keyword">true</span>;</div>
<div class="line"><a name="l04394"></a><span class="lineno"> 4394</span>&#160;    }</div>
<div class="line"><a name="l04395"></a><span class="lineno"> 4395</span>&#160;  }</div>
<div class="line"><a name="l04396"></a><span class="lineno"> 4396</span>&#160; </div>
<div class="line"><a name="l04397"></a><span class="lineno"> 4397</span>&#160;  Worklist.zap();</div>
<div class="line"><a name="l04398"></a><span class="lineno"> 4398</span>&#160;  <span class="keywordflow">return</span> MadeIRChange;</div>
<div class="line"><a name="l04399"></a><span class="lineno"> 4399</span>&#160;}</div>
<div class="line"><a name="l04400"></a><span class="lineno"> 4400</span>&#160; </div>
<div class="line"><a name="l04401"></a><span class="lineno"> 4401</span>&#160;<span class="comment">// Track the scopes used by !alias.scope and !noalias. In a function, a</span></div>
<div class="line"><a name="l04402"></a><span class="lineno"> 4402</span>&#160;<span class="comment">// @llvm.experimental.noalias.scope.decl is only useful if that scope is used</span></div>
<div class="line"><a name="l04403"></a><span class="lineno"> 4403</span>&#160;<span class="comment">// by both sets. If not, the declaration of the scope can be safely omitted.</span></div>
<div class="line"><a name="l04404"></a><span class="lineno"> 4404</span>&#160;<span class="comment">// The MDNode of the scope can be omitted as well for the instructions that are</span></div>
<div class="line"><a name="l04405"></a><span class="lineno"> 4405</span>&#160;<span class="comment">// part of this function. We do not do that at this point, as this might become</span></div>
<div class="line"><a name="l04406"></a><span class="lineno"> 4406</span>&#160;<span class="comment">// too time consuming to do.</span></div>
<div class="line"><a name="l04407"></a><span class="lineno"><a class="line" href="classAliasScopeTracker.html"> 4407</a></span>&#160;<span class="keyword">class </span><a class="code" href="classAliasScopeTracker.html">AliasScopeTracker</a> {</div>
<div class="line"><a name="l04408"></a><span class="lineno"> 4408</span>&#160;  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;const MDNode *, 8&gt;</a> UsedAliasScopesAndLists;</div>
<div class="line"><a name="l04409"></a><span class="lineno"> 4409</span>&#160;  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;const MDNode *, 8&gt;</a> UsedNoAliasScopesAndLists;</div>
<div class="line"><a name="l04410"></a><span class="lineno"> 4410</span>&#160; </div>
<div class="line"><a name="l04411"></a><span class="lineno"> 4411</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l04412"></a><span class="lineno"><a class="line" href="classAliasScopeTracker.html#ab6c7ca8d33397896ff4fda4b5c023a40"> 4412</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classAliasScopeTracker.html#ab6c7ca8d33397896ff4fda4b5c023a40">analyse</a>(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l04413"></a><span class="lineno"> 4413</span>&#160;    <span class="comment">// This seems to be faster than checking &#39;mayReadOrWriteMemory()&#39;.</span></div>
<div class="line"><a name="l04414"></a><span class="lineno"> 4414</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;hasMetadataOtherThanDebugLoc())</div>
<div class="line"><a name="l04415"></a><span class="lineno"> 4415</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04416"></a><span class="lineno"> 4416</span>&#160; </div>
<div class="line"><a name="l04417"></a><span class="lineno"> 4417</span>&#160;    <span class="keyword">auto</span> Track = [](<a class="code" href="classllvm_1_1Metadata.html">Metadata</a> *ScopeList, <span class="keyword">auto</span> &amp;Container) {</div>
<div class="line"><a name="l04418"></a><span class="lineno"> 4418</span>&#160;      <span class="keyword">const</span> <span class="keyword">auto</span> *MDScopeList = dyn_cast_or_null&lt;MDNode&gt;(ScopeList);</div>
<div class="line"><a name="l04419"></a><span class="lineno"> 4419</span>&#160;      <span class="keywordflow">if</span> (!MDScopeList || !Container.insert(MDScopeList).second)</div>
<div class="line"><a name="l04420"></a><span class="lineno"> 4420</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04421"></a><span class="lineno"> 4421</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;<a class="code" href="classllvm_1_1MDOperand.html">MDOperand</a> : MDScopeList-&gt;operands())</div>
<div class="line"><a name="l04422"></a><span class="lineno"> 4422</span>&#160;        <span class="keywordflow">if</span> (<span class="keyword">auto</span> *MDScope = dyn_cast&lt;MDNode&gt;(<a class="code" href="classllvm_1_1MDOperand.html">MDOperand</a>))</div>
<div class="line"><a name="l04423"></a><span class="lineno"> 4423</span>&#160;          Container.insert(MDScope);</div>
<div class="line"><a name="l04424"></a><span class="lineno"> 4424</span>&#160;    };</div>
<div class="line"><a name="l04425"></a><span class="lineno"> 4425</span>&#160; </div>
<div class="line"><a name="l04426"></a><span class="lineno"> 4426</span>&#160;    Track(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getMetadata(LLVMContext::MD_alias_scope), UsedAliasScopesAndLists);</div>
<div class="line"><a name="l04427"></a><span class="lineno"> 4427</span>&#160;    Track(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getMetadata(LLVMContext::MD_noalias), UsedNoAliasScopesAndLists);</div>
<div class="line"><a name="l04428"></a><span class="lineno"> 4428</span>&#160;  }</div>
<div class="line"><a name="l04429"></a><span class="lineno"> 4429</span>&#160; </div>
<div class="line"><a name="l04430"></a><span class="lineno"><a class="line" href="classAliasScopeTracker.html#a426cdd40c6024520c943e7c3d11f1d78"> 4430</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classAliasScopeTracker.html#a426cdd40c6024520c943e7c3d11f1d78">isNoAliasScopeDeclDead</a>(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Inst) {</div>
<div class="line"><a name="l04431"></a><span class="lineno"> 4431</span>&#160;    <a class="code" href="classllvm_1_1NoAliasScopeDeclInst.html">NoAliasScopeDeclInst</a> *Decl = dyn_cast&lt;NoAliasScopeDeclInst&gt;(Inst);</div>
<div class="line"><a name="l04432"></a><span class="lineno"> 4432</span>&#160;    <span class="keywordflow">if</span> (!Decl)</div>
<div class="line"><a name="l04433"></a><span class="lineno"> 4433</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l04434"></a><span class="lineno"> 4434</span>&#160; </div>
<div class="line"><a name="l04435"></a><span class="lineno"> 4435</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Decl-&gt;<a class="code" href="classllvm_1_1Value.html#a9d7de807ebdfe1819df3ff6cb0f16158">use_empty</a>() &amp;&amp;</div>
<div class="line"><a name="l04436"></a><span class="lineno"> 4436</span>&#160;           <span class="stringliteral">&quot;llvm.experimental.noalias.scope.decl in use ?&quot;</span>);</div>
<div class="line"><a name="l04437"></a><span class="lineno"> 4437</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1MDNode.html">MDNode</a> *MDSL = Decl-&gt;<a class="code" href="classllvm_1_1NoAliasScopeDeclInst.html#a34e047de6b81bfbcd8a2ce7ae04d97b4">getScopeList</a>();</div>
<div class="line"><a name="l04438"></a><span class="lineno"> 4438</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(MDSL-&gt;<a class="code" href="classllvm_1_1MDNode.html#aa4068e37ec583962685e3567dc102ae5">getNumOperands</a>() == 1 &amp;&amp;</div>
<div class="line"><a name="l04439"></a><span class="lineno"> 4439</span>&#160;           <span class="stringliteral">&quot;llvm.experimental.noalias.scope should refer to a single scope&quot;</span>);</div>
<div class="line"><a name="l04440"></a><span class="lineno"> 4440</span>&#160;    <span class="keyword">auto</span> &amp;<a class="code" href="classllvm_1_1MDOperand.html">MDOperand</a> = MDSL-&gt;<a class="code" href="classllvm_1_1MDNode.html#a6cbc0453586a25c057a32161b38b8ce4">getOperand</a>(0);</div>
<div class="line"><a name="l04441"></a><span class="lineno"> 4441</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> *MD = dyn_cast&lt;MDNode&gt;(<a class="code" href="classllvm_1_1MDOperand.html">MDOperand</a>))</div>
<div class="line"><a name="l04442"></a><span class="lineno"> 4442</span>&#160;      <span class="keywordflow">return</span> !UsedAliasScopesAndLists.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#af74676a3c7447be34bd2c1da76ec0c48">contains</a>(MD) ||</div>
<div class="line"><a name="l04443"></a><span class="lineno"> 4443</span>&#160;             !UsedNoAliasScopesAndLists.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#af74676a3c7447be34bd2c1da76ec0c48">contains</a>(MD);</div>
<div class="line"><a name="l04444"></a><span class="lineno"> 4444</span>&#160; </div>
<div class="line"><a name="l04445"></a><span class="lineno"> 4445</span>&#160;    <span class="comment">// Not an MDNode ? throw away.</span></div>
<div class="line"><a name="l04446"></a><span class="lineno"> 4446</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l04447"></a><span class="lineno"> 4447</span>&#160;  }</div>
<div class="line"><a name="l04448"></a><span class="lineno"> 4448</span>&#160;};</div>
<div class="line"><a name="l04449"></a><span class="lineno"> 4449</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l04450"></a><span class="lineno"> 4450</span>&#160;<span class="comment">/// Populate the IC worklist from a function, by walking it in depth-first</span></div>
<div class="line"><a name="l04451"></a><span class="lineno"> 4451</span>&#160;<span class="comment">/// order and adding all reachable code to the worklist.</span></div>
<div class="line"><a name="l04452"></a><span class="lineno"> 4452</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l04453"></a><span class="lineno"> 4453</span>&#160;<span class="comment">/// This has a couple of tricks to make the code faster and more powerful.  In</span></div>
<div class="line"><a name="l04454"></a><span class="lineno"> 4454</span>&#160;<span class="comment">/// particular, we constant fold and DCE instructions as we go, to avoid adding</span></div>
<div class="line"><a name="l04455"></a><span class="lineno"> 4455</span>&#160;<span class="comment">/// them to the worklist (this significantly speeds up instcombine on code where</span></div>
<div class="line"><a name="l04456"></a><span class="lineno"> 4456</span>&#160;<span class="comment">/// many instructions are dead or constant).  Additionally, if we find a branch</span></div>
<div class="line"><a name="l04457"></a><span class="lineno"> 4457</span>&#160;<span class="comment">/// whose condition is a known constant, we only visit the reachable successors.</span></div>
<div class="line"><a name="l04458"></a><span class="lineno"><a class="line" href="InstructionCombining_8cpp.html#a247259f19ad922bde102feb163cd79dc"> 4458</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="InstructionCombining_8cpp.html#a247259f19ad922bde102feb163cd79dc">prepareICWorklistFromFunction</a>(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, <span class="keyword">const</span> <a class="code" href="classllvm_1_1DataLayout.html">DataLayout</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>,</div>
<div class="line"><a name="l04459"></a><span class="lineno"> 4459</span>&#160;                                          <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetLibraryInfo.html">TargetLibraryInfo</a> *TLI,</div>
<div class="line"><a name="l04460"></a><span class="lineno"> 4460</span>&#160;                                          <a class="code" href="classllvm_1_1InstructionWorklist.html">InstructionWorklist</a> &amp;ICWorklist) {</div>
<div class="line"><a name="l04461"></a><span class="lineno"> 4461</span>&#160;  <span class="keywordtype">bool</span> MadeIRChange = <span class="keyword">false</span>;</div>
<div class="line"><a name="l04462"></a><span class="lineno"> 4462</span>&#160;  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;BasicBlock *, 32&gt;</a> Visited;</div>
<div class="line"><a name="l04463"></a><span class="lineno"> 4463</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;BasicBlock*, 256&gt;</a> Worklist;</div>
<div class="line"><a name="l04464"></a><span class="lineno"> 4464</span>&#160;  Worklist.push_back(&amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.front());</div>
<div class="line"><a name="l04465"></a><span class="lineno"> 4465</span>&#160; </div>
<div class="line"><a name="l04466"></a><span class="lineno"> 4466</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Instruction *, 128&gt;</a> InstrsForInstructionWorklist;</div>
<div class="line"><a name="l04467"></a><span class="lineno"> 4467</span>&#160;  <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;Constant *, Constant *&gt;</a> FoldedConstants;</div>
<div class="line"><a name="l04468"></a><span class="lineno"> 4468</span>&#160;  <a class="code" href="classAliasScopeTracker.html">AliasScopeTracker</a> SeenAliasScopes;</div>
<div class="line"><a name="l04469"></a><span class="lineno"> 4469</span>&#160; </div>
<div class="line"><a name="l04470"></a><span class="lineno"> 4470</span>&#160;  <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l04471"></a><span class="lineno"> 4471</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> = Worklist.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a0c8ffe664a36e30d49c84d0aded2fe08">pop_back_val</a>();</div>
<div class="line"><a name="l04472"></a><span class="lineno"> 4472</span>&#160; </div>
<div class="line"><a name="l04473"></a><span class="lineno"> 4473</span>&#160;    <span class="comment">// We have now visited this block!  If we&#39;ve already been here, ignore it.</span></div>
<div class="line"><a name="l04474"></a><span class="lineno"> 4474</span>&#160;    <span class="keywordflow">if</span> (!Visited.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>).second)</div>
<div class="line"><a name="l04475"></a><span class="lineno"> 4475</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l04476"></a><span class="lineno"> 4476</span>&#160; </div>
<div class="line"><a name="l04477"></a><span class="lineno"> 4477</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;Inst : <a class="code" href="namespacellvm.html#a8154638df88e4eaa568b67b23d463dac">llvm::make_early_inc_range</a>(*<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>)) {</div>
<div class="line"><a name="l04478"></a><span class="lineno"> 4478</span>&#160;      <span class="comment">// ConstantProp instruction if trivially constant.</span></div>
<div class="line"><a name="l04479"></a><span class="lineno"> 4479</span>&#160;      <span class="keywordflow">if</span> (!Inst.use_empty() &amp;&amp;</div>
<div class="line"><a name="l04480"></a><span class="lineno"> 4480</span>&#160;          (Inst.getNumOperands() == 0 || isa&lt;Constant&gt;(Inst.getOperand(0))))</div>
<div class="line"><a name="l04481"></a><span class="lineno"> 4481</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = <a class="code" href="namespacellvm.html#ab6be6270337c6f7620007555247401ce">ConstantFoldInstruction</a>(&amp;Inst, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, TLI)) {</div>
<div class="line"><a name="l04482"></a><span class="lineno"> 4482</span>&#160;          <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;IC: ConstFold to: &quot;</span> &lt;&lt; *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> &lt;&lt; <span class="stringliteral">&quot; from: &quot;</span> &lt;&lt; Inst</div>
<div class="line"><a name="l04483"></a><span class="lineno"> 4483</span>&#160;                            &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div>
<div class="line"><a name="l04484"></a><span class="lineno"> 4484</span>&#160;          Inst.replaceAllUsesWith(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div>
<div class="line"><a name="l04485"></a><span class="lineno"> 4485</span>&#160;          ++NumConstProp;</div>
<div class="line"><a name="l04486"></a><span class="lineno"> 4486</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a627b2f86ac433d829482d5a5a0f50668">isInstructionTriviallyDead</a>(&amp;Inst, TLI))</div>
<div class="line"><a name="l04487"></a><span class="lineno"> 4487</span>&#160;            Inst.eraseFromParent();</div>
<div class="line"><a name="l04488"></a><span class="lineno"> 4488</span>&#160;          MadeIRChange = <span class="keyword">true</span>;</div>
<div class="line"><a name="l04489"></a><span class="lineno"> 4489</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l04490"></a><span class="lineno"> 4490</span>&#160;        }</div>
<div class="line"><a name="l04491"></a><span class="lineno"> 4491</span>&#160; </div>
<div class="line"><a name="l04492"></a><span class="lineno"> 4492</span>&#160;      <span class="comment">// See if we can constant fold its operands.</span></div>
<div class="line"><a name="l04493"></a><span class="lineno"> 4493</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Use.html">Use</a> &amp;U : Inst.operands()) {</div>
<div class="line"><a name="l04494"></a><span class="lineno"> 4494</span>&#160;        <span class="keywordflow">if</span> (!isa&lt;ConstantVector&gt;(U) &amp;&amp; !isa&lt;ConstantExpr&gt;(U))</div>
<div class="line"><a name="l04495"></a><span class="lineno"> 4495</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l04496"></a><span class="lineno"> 4496</span>&#160; </div>
<div class="line"><a name="l04497"></a><span class="lineno"> 4497</span>&#160;        <span class="keyword">auto</span> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = cast&lt;Constant&gt;(U);</div>
<div class="line"><a name="l04498"></a><span class="lineno"> 4498</span>&#160;        <a class="code" href="classllvm_1_1Constant.html">Constant</a> *&amp;FoldRes = FoldedConstants[<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>];</div>
<div class="line"><a name="l04499"></a><span class="lineno"> 4499</span>&#160;        <span class="keywordflow">if</span> (!FoldRes)</div>
<div class="line"><a name="l04500"></a><span class="lineno"> 4500</span>&#160;          FoldRes = <a class="code" href="namespacellvm.html#a5e655fd99a56d50b071fc26d8db5fd5b">ConstantFoldConstant</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, TLI);</div>
<div class="line"><a name="l04501"></a><span class="lineno"> 4501</span>&#160; </div>
<div class="line"><a name="l04502"></a><span class="lineno"> 4502</span>&#160;        <span class="keywordflow">if</span> (FoldRes != <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>) {</div>
<div class="line"><a name="l04503"></a><span class="lineno"> 4503</span>&#160;          <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;IC: ConstFold operand of: &quot;</span> &lt;&lt; Inst</div>
<div class="line"><a name="l04504"></a><span class="lineno"> 4504</span>&#160;                            &lt;&lt; <span class="stringliteral">&quot;\n    Old = &quot;</span> &lt;&lt; *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a></div>
<div class="line"><a name="l04505"></a><span class="lineno"> 4505</span>&#160;                            &lt;&lt; <span class="stringliteral">&quot;\n    New = &quot;</span> &lt;&lt; *FoldRes &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div>
<div class="line"><a name="l04506"></a><span class="lineno"> 4506</span>&#160;          U = FoldRes;</div>
<div class="line"><a name="l04507"></a><span class="lineno"> 4507</span>&#160;          MadeIRChange = <span class="keyword">true</span>;</div>
<div class="line"><a name="l04508"></a><span class="lineno"> 4508</span>&#160;        }</div>
<div class="line"><a name="l04509"></a><span class="lineno"> 4509</span>&#160;      }</div>
<div class="line"><a name="l04510"></a><span class="lineno"> 4510</span>&#160; </div>
<div class="line"><a name="l04511"></a><span class="lineno"> 4511</span>&#160;      <span class="comment">// Skip processing debug and pseudo intrinsics in InstCombine. Processing</span></div>
<div class="line"><a name="l04512"></a><span class="lineno"> 4512</span>&#160;      <span class="comment">// these call instructions consumes non-trivial amount of time and</span></div>
<div class="line"><a name="l04513"></a><span class="lineno"> 4513</span>&#160;      <span class="comment">// provides no value for the optimization.</span></div>
<div class="line"><a name="l04514"></a><span class="lineno"> 4514</span>&#160;      <span class="keywordflow">if</span> (!Inst.isDebugOrPseudoInst()) {</div>
<div class="line"><a name="l04515"></a><span class="lineno"> 4515</span>&#160;        InstrsForInstructionWorklist.push_back(&amp;Inst);</div>
<div class="line"><a name="l04516"></a><span class="lineno"> 4516</span>&#160;        SeenAliasScopes.<a class="code" href="classAliasScopeTracker.html#ab6c7ca8d33397896ff4fda4b5c023a40">analyse</a>(&amp;Inst);</div>
<div class="line"><a name="l04517"></a><span class="lineno"> 4517</span>&#160;      }</div>
<div class="line"><a name="l04518"></a><span class="lineno"> 4518</span>&#160;    }</div>
<div class="line"><a name="l04519"></a><span class="lineno"> 4519</span>&#160; </div>
<div class="line"><a name="l04520"></a><span class="lineno"> 4520</span>&#160;    <span class="comment">// Recursively visit successors.  If this is a branch or switch on a</span></div>
<div class="line"><a name="l04521"></a><span class="lineno"> 4521</span>&#160;    <span class="comment">// constant, only visit the reachable successor.</span></div>
<div class="line"><a name="l04522"></a><span class="lineno"> 4522</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *TI = <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getTerminator();</div>
<div class="line"><a name="l04523"></a><span class="lineno"> 4523</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a> *BI = dyn_cast&lt;BranchInst&gt;(TI)) {</div>
<div class="line"><a name="l04524"></a><span class="lineno"> 4524</span>&#160;      <span class="keywordflow">if</span> (BI-&gt;isConditional() &amp;&amp; isa&lt;ConstantInt&gt;(BI-&gt;getCondition())) {</div>
<div class="line"><a name="l04525"></a><span class="lineno"> 4525</span>&#160;        <span class="keywordtype">bool</span> CondVal = cast&lt;ConstantInt&gt;(BI-&gt;getCondition())-&gt;getZExtValue();</div>
<div class="line"><a name="l04526"></a><span class="lineno"> 4526</span>&#160;        <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *ReachableBB = BI-&gt;getSuccessor(!CondVal);</div>
<div class="line"><a name="l04527"></a><span class="lineno"> 4527</span>&#160;        Worklist.push_back(ReachableBB);</div>
<div class="line"><a name="l04528"></a><span class="lineno"> 4528</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l04529"></a><span class="lineno"> 4529</span>&#160;      }</div>
<div class="line"><a name="l04530"></a><span class="lineno"> 4530</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1SwitchInst.html">SwitchInst</a> *<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a> = dyn_cast&lt;SwitchInst&gt;(TI)) {</div>
<div class="line"><a name="l04531"></a><span class="lineno"> 4531</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a> = dyn_cast&lt;ConstantInt&gt;(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;getCondition())) {</div>
<div class="line"><a name="l04532"></a><span class="lineno"> 4532</span>&#160;        Worklist.push_back(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;findCaseValue(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>)-&gt;getCaseSuccessor());</div>
<div class="line"><a name="l04533"></a><span class="lineno"> 4533</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l04534"></a><span class="lineno"> 4534</span>&#160;      }</div>
<div class="line"><a name="l04535"></a><span class="lineno"> 4535</span>&#160;    }</div>
<div class="line"><a name="l04536"></a><span class="lineno"> 4536</span>&#160; </div>
<div class="line"><a name="l04537"></a><span class="lineno"> 4537</span>&#160;    <a class="code" href="namespacellvm.html#a39d3d23a084c4544ee5903203db10e8a">append_range</a>(Worklist, <a class="code" href="namespacellvm.html#a26e2a938b431eaa6eca2beaa96410c9d">successors</a>(TI));</div>
<div class="line"><a name="l04538"></a><span class="lineno"> 4538</span>&#160;  } <span class="keywordflow">while</span> (!Worklist.empty());</div>
<div class="line"><a name="l04539"></a><span class="lineno"> 4539</span>&#160; </div>
<div class="line"><a name="l04540"></a><span class="lineno"> 4540</span>&#160;  <span class="comment">// Remove instructions inside unreachable blocks. This prevents the</span></div>
<div class="line"><a name="l04541"></a><span class="lineno"> 4541</span>&#160;  <span class="comment">// instcombine code from having to deal with some bad special cases, and</span></div>
<div class="line"><a name="l04542"></a><span class="lineno"> 4542</span>&#160;  <span class="comment">// reduces use counts of instructions.</span></div>
<div class="line"><a name="l04543"></a><span class="lineno"> 4543</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> &amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> : <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>) {</div>
<div class="line"><a name="l04544"></a><span class="lineno"> 4544</span>&#160;    <span class="keywordflow">if</span> (Visited.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a1f475b0df44ebd7169e720fa1bf9169e">count</a>(&amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>))</div>
<div class="line"><a name="l04545"></a><span class="lineno"> 4545</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l04546"></a><span class="lineno"> 4546</span>&#160; </div>
<div class="line"><a name="l04547"></a><span class="lineno"> 4547</span>&#160;    <span class="keywordtype">unsigned</span> NumDeadInstInBB;</div>
<div class="line"><a name="l04548"></a><span class="lineno"> 4548</span>&#160;    <span class="keywordtype">unsigned</span> NumDeadDbgInstInBB;</div>
<div class="line"><a name="l04549"></a><span class="lineno"> 4549</span>&#160;    std::tie(NumDeadInstInBB, NumDeadDbgInstInBB) =</div>
<div class="line"><a name="l04550"></a><span class="lineno"> 4550</span>&#160;        <a class="code" href="namespacellvm.html#a1c9e22b633ee4e0727bba3c87db57296">removeAllNonTerminatorAndEHPadInstructions</a>(&amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div>
<div class="line"><a name="l04551"></a><span class="lineno"> 4551</span>&#160; </div>
<div class="line"><a name="l04552"></a><span class="lineno"> 4552</span>&#160;    MadeIRChange |= NumDeadInstInBB + NumDeadDbgInstInBB &gt; 0;</div>
<div class="line"><a name="l04553"></a><span class="lineno"> 4553</span>&#160;    NumDeadInst += NumDeadInstInBB;</div>
<div class="line"><a name="l04554"></a><span class="lineno"> 4554</span>&#160;  }</div>
<div class="line"><a name="l04555"></a><span class="lineno"> 4555</span>&#160; </div>
<div class="line"><a name="l04556"></a><span class="lineno"> 4556</span>&#160;  <span class="comment">// Once we&#39;ve found all of the instructions to add to instcombine&#39;s worklist,</span></div>
<div class="line"><a name="l04557"></a><span class="lineno"> 4557</span>&#160;  <span class="comment">// add them in reverse order.  This way instcombine will visit from the top</span></div>
<div class="line"><a name="l04558"></a><span class="lineno"> 4558</span>&#160;  <span class="comment">// of the function down.  This jives well with the way that it adds all uses</span></div>
<div class="line"><a name="l04559"></a><span class="lineno"> 4559</span>&#160;  <span class="comment">// of instructions to the worklist after doing a transformation, thus avoiding</span></div>
<div class="line"><a name="l04560"></a><span class="lineno"> 4560</span>&#160;  <span class="comment">// some N^2 behavior in pathological cases.</span></div>
<div class="line"><a name="l04561"></a><span class="lineno"> 4561</span>&#160;  ICWorklist.<a class="code" href="classllvm_1_1InstructionWorklist.html#afcc3810424bae0ed10e2cb24cf438227">reserve</a>(InstrsForInstructionWorklist.size());</div>
<div class="line"><a name="l04562"></a><span class="lineno"> 4562</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Inst : <a class="code" href="namespacellvm.html#a6b0ac1fa4f05de76413c5e0ca6334035">reverse</a>(InstrsForInstructionWorklist)) {</div>
<div class="line"><a name="l04563"></a><span class="lineno"> 4563</span>&#160;    <span class="comment">// DCE instruction if trivially dead. As we iterate in reverse program</span></div>
<div class="line"><a name="l04564"></a><span class="lineno"> 4564</span>&#160;    <span class="comment">// order here, we will clean up whole chains of dead instructions.</span></div>
<div class="line"><a name="l04565"></a><span class="lineno"> 4565</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a627b2f86ac433d829482d5a5a0f50668">isInstructionTriviallyDead</a>(Inst, TLI) ||</div>
<div class="line"><a name="l04566"></a><span class="lineno"> 4566</span>&#160;        SeenAliasScopes.<a class="code" href="classAliasScopeTracker.html#a426cdd40c6024520c943e7c3d11f1d78">isNoAliasScopeDeclDead</a>(Inst)) {</div>
<div class="line"><a name="l04567"></a><span class="lineno"> 4567</span>&#160;      ++NumDeadInst;</div>
<div class="line"><a name="l04568"></a><span class="lineno"> 4568</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;IC: DCE: &quot;</span> &lt;&lt; *Inst &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div>
<div class="line"><a name="l04569"></a><span class="lineno"> 4569</span>&#160;      <a class="code" href="namespacellvm.html#a26be1141b23850a2b4eb78021d99e862">salvageDebugInfo</a>(*Inst);</div>
<div class="line"><a name="l04570"></a><span class="lineno"> 4570</span>&#160;      Inst-&gt;eraseFromParent();</div>
<div class="line"><a name="l04571"></a><span class="lineno"> 4571</span>&#160;      MadeIRChange = <span class="keyword">true</span>;</div>
<div class="line"><a name="l04572"></a><span class="lineno"> 4572</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l04573"></a><span class="lineno"> 4573</span>&#160;    }</div>
<div class="line"><a name="l04574"></a><span class="lineno"> 4574</span>&#160; </div>
<div class="line"><a name="l04575"></a><span class="lineno"> 4575</span>&#160;    ICWorklist.<a class="code" href="classllvm_1_1InstructionWorklist.html#a87029746a970dab9ed9f32a106d86370">push</a>(Inst);</div>
<div class="line"><a name="l04576"></a><span class="lineno"> 4576</span>&#160;  }</div>
<div class="line"><a name="l04577"></a><span class="lineno"> 4577</span>&#160; </div>
<div class="line"><a name="l04578"></a><span class="lineno"> 4578</span>&#160;  <span class="keywordflow">return</span> MadeIRChange;</div>
<div class="line"><a name="l04579"></a><span class="lineno"> 4579</span>&#160;}</div>
<div class="line"><a name="l04580"></a><span class="lineno"> 4580</span>&#160; </div>
<div class="line"><a name="l04581"></a><span class="lineno"><a class="line" href="InstructionCombining_8cpp.html#a2b3700ceaf5c828fee30215dfcd63304"> 4581</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="InstructionCombining_8cpp.html#a2b3700ceaf5c828fee30215dfcd63304">combineInstructionsOverFunction</a>(</div>
<div class="line"><a name="l04582"></a><span class="lineno"> 4582</span>&#160;    <a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, <a class="code" href="classllvm_1_1InstructionWorklist.html">InstructionWorklist</a> &amp;Worklist, <a class="code" href="classllvm_1_1AAResults.html">AliasAnalysis</a> *AA,</div>
<div class="line"><a name="l04583"></a><span class="lineno"> 4583</span>&#160;    <a class="code" href="classllvm_1_1AssumptionCache.html">AssumptionCache</a> &amp;AC, <a class="code" href="classllvm_1_1TargetLibraryInfo.html">TargetLibraryInfo</a> &amp;TLI, <a class="code" href="classllvm_1_1TargetTransformInfo.html">TargetTransformInfo</a> &amp;<a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>,</div>
<div class="line"><a name="l04584"></a><span class="lineno"> 4584</span>&#160;    <a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> &amp;DT, <a class="code" href="classllvm_1_1OptimizationRemarkEmitter.html">OptimizationRemarkEmitter</a> &amp;ORE, <a class="code" href="classllvm_1_1BlockFrequencyInfo.html">BlockFrequencyInfo</a> *<a class="code" href="namespacellvm_1_1AMDGPUISD.html#a739d53294bc38cd6b0b23332f9994c0eafbca76f7875e080d97cee761de04d996">BFI</a>,</div>
<div class="line"><a name="l04585"></a><span class="lineno"> 4585</span>&#160;    <a class="code" href="classllvm_1_1ProfileSummaryInfo.html">ProfileSummaryInfo</a> *PSI, <span class="keywordtype">unsigned</span> MaxIterations, <a class="code" href="classllvm_1_1LoopInfo.html">LoopInfo</a> *LI) {</div>
<div class="line"><a name="l04586"></a><span class="lineno"> 4586</span>&#160;  <span class="keyword">auto</span> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a> = <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getParent()-&gt;getDataLayout();</div>
<div class="line"><a name="l04587"></a><span class="lineno"> 4587</span>&#160;  MaxIterations = <a class="code" href="namespacellvm.html#a57f2ca0e57f4f7b13f56f9aa16af3e0d">std::min</a>(MaxIterations, <a class="code" href="InstructionCombining_8cpp.html#a4d79676cd8860ab969121d292de048ef">LimitMaxIterations</a>.getValue());</div>
<div class="line"><a name="l04588"></a><span class="lineno"> 4588</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l04589"></a><span class="lineno"> 4589</span>&#160;<span class="comment">  /// Builder - This is an IRBuilder that automatically inserts new</span></div>
<div class="line"><a name="l04590"></a><span class="lineno"> 4590</span>&#160;<span class="comment">  /// instructions into the worklist when they are created.</span></div>
<div class="line"><a name="l04591"></a><span class="lineno"> 4591</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;TargetFolder, IRBuilderCallbackInserter&gt;</a> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>(</div>
<div class="line"><a name="l04592"></a><span class="lineno"> 4592</span>&#160;      <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getContext(), <a class="code" href="classllvm_1_1TargetFolder.html">TargetFolder</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>),</div>
<div class="line"><a name="l04593"></a><span class="lineno"> 4593</span>&#160;      <a class="code" href="classllvm_1_1IRBuilderCallbackInserter.html">IRBuilderCallbackInserter</a>([&amp;Worklist, &amp;AC](<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l04594"></a><span class="lineno"> 4594</span>&#160;        Worklist.<a class="code" href="classllvm_1_1InstructionWorklist.html#a7047d80c4bd7c774fccbd0293f7da341">add</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l04595"></a><span class="lineno"> 4595</span>&#160;        <span class="keywordflow">if</span> (<span class="keyword">auto</span> *Assume = dyn_cast&lt;AssumeInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l04596"></a><span class="lineno"> 4596</span>&#160;          AC.<a class="code" href="classllvm_1_1AssumptionCache.html#a7f02822253b078960693acc2f30d4817">registerAssumption</a>(Assume);</div>
<div class="line"><a name="l04597"></a><span class="lineno"> 4597</span>&#160;      }));</div>
<div class="line"><a name="l04598"></a><span class="lineno"> 4598</span>&#160; </div>
<div class="line"><a name="l04599"></a><span class="lineno"> 4599</span>&#160;  <span class="comment">// Lower dbg.declare intrinsics otherwise their value may be clobbered</span></div>
<div class="line"><a name="l04600"></a><span class="lineno"> 4600</span>&#160;  <span class="comment">// by instcombiner.</span></div>
<div class="line"><a name="l04601"></a><span class="lineno"> 4601</span>&#160;  <span class="keywordtype">bool</span> MadeIRChange = <span class="keyword">false</span>;</div>
<div class="line"><a name="l04602"></a><span class="lineno"> 4602</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="InstructionCombining_8cpp.html#a83a4700fc7e6914e0955efa1aac4441e">ShouldLowerDbgDeclare</a>)</div>
<div class="line"><a name="l04603"></a><span class="lineno"> 4603</span>&#160;    MadeIRChange = <a class="code" href="namespacellvm.html#a7994fd7ca0d8f8fcf2a9d18d151d0988">LowerDbgDeclare</a>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l04604"></a><span class="lineno"> 4604</span>&#160;  <span class="comment">// LowerDbgDeclare calls RemoveRedundantDbgInstrs, but LowerDbgDeclare will</span></div>
<div class="line"><a name="l04605"></a><span class="lineno"> 4605</span>&#160;  <span class="comment">// almost never return true when running an assignment tracking build. Take</span></div>
<div class="line"><a name="l04606"></a><span class="lineno"> 4606</span>&#160;  <span class="comment">// this opportunity to do some clean up for assignment tracking builds too.</span></div>
<div class="line"><a name="l04607"></a><span class="lineno"> 4607</span>&#160;  <span class="keywordflow">if</span> (!MadeIRChange &amp;&amp; <a class="code" href="namespacellvm.html#aa9ef2dbd1b7ce921093f7d4a7bd4cc5c">isAssignmentTrackingEnabled</a>(*<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getParent())) {</div>
<div class="line"><a name="l04608"></a><span class="lineno"> 4608</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> : <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>)</div>
<div class="line"><a name="l04609"></a><span class="lineno"> 4609</span>&#160;      <a class="code" href="namespacellvm.html#a08f3f942afc0ee9115a8f9fa87e9191d">RemoveRedundantDbgInstrs</a>(&amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div>
<div class="line"><a name="l04610"></a><span class="lineno"> 4610</span>&#160;  }</div>
<div class="line"><a name="l04611"></a><span class="lineno"> 4611</span>&#160; </div>
<div class="line"><a name="l04612"></a><span class="lineno"> 4612</span>&#160;  <span class="comment">// Iterate while there is work to do.</span></div>
<div class="line"><a name="l04613"></a><span class="lineno"> 4613</span>&#160;  <span class="keywordtype">unsigned</span> Iteration = 0;</div>
<div class="line"><a name="l04614"></a><span class="lineno"> 4614</span>&#160;  <span class="keywordflow">while</span> (<span class="keyword">true</span>) {</div>
<div class="line"><a name="l04615"></a><span class="lineno"> 4615</span>&#160;    ++NumWorklistIterations;</div>
<div class="line"><a name="l04616"></a><span class="lineno"> 4616</span>&#160;    ++Iteration;</div>
<div class="line"><a name="l04617"></a><span class="lineno"> 4617</span>&#160; </div>
<div class="line"><a name="l04618"></a><span class="lineno"> 4618</span>&#160;    <span class="keywordflow">if</span> (Iteration &gt; <a class="code" href="InstructionCombining_8cpp.html#a23b2990438f0256e1ae6c1141315aa4a">InfiniteLoopDetectionThreshold</a>) {</div>
<div class="line"><a name="l04619"></a><span class="lineno"> 4619</span>&#160;      <a class="code" href="namespacellvm.html#a7f2a3d4dcfee70225988aec53ff1e173">report_fatal_error</a>(</div>
<div class="line"><a name="l04620"></a><span class="lineno"> 4620</span>&#160;          <span class="stringliteral">&quot;Instruction Combining seems stuck in an infinite loop after &quot;</span> +</div>
<div class="line"><a name="l04621"></a><span class="lineno"> 4621</span>&#160;          <a class="code" href="classllvm_1_1Twine.html">Twine</a>(<a class="code" href="InstructionCombining_8cpp.html#a23b2990438f0256e1ae6c1141315aa4a">InfiniteLoopDetectionThreshold</a>) + <span class="stringliteral">&quot; iterations.&quot;</span>);</div>
<div class="line"><a name="l04622"></a><span class="lineno"> 4622</span>&#160;    }</div>
<div class="line"><a name="l04623"></a><span class="lineno"> 4623</span>&#160; </div>
<div class="line"><a name="l04624"></a><span class="lineno"> 4624</span>&#160;    <span class="keywordflow">if</span> (Iteration &gt; MaxIterations) {</div>
<div class="line"><a name="l04625"></a><span class="lineno"> 4625</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;\n\n[IC] Iteration limit #&quot;</span> &lt;&lt; MaxIterations</div>
<div class="line"><a name="l04626"></a><span class="lineno"> 4626</span>&#160;                        &lt;&lt; <span class="stringliteral">&quot; on &quot;</span> &lt;&lt; <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getName()</div>
<div class="line"><a name="l04627"></a><span class="lineno"> 4627</span>&#160;                        &lt;&lt; <span class="stringliteral">&quot; reached; stopping before reaching a fixpoint\n&quot;</span>);</div>
<div class="line"><a name="l04628"></a><span class="lineno"> 4628</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04629"></a><span class="lineno"> 4629</span>&#160;    }</div>
<div class="line"><a name="l04630"></a><span class="lineno"> 4630</span>&#160; </div>
<div class="line"><a name="l04631"></a><span class="lineno"> 4631</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;\n\nINSTCOMBINE ITERATION #&quot;</span> &lt;&lt; Iteration &lt;&lt; <span class="stringliteral">&quot; on &quot;</span></div>
<div class="line"><a name="l04632"></a><span class="lineno"> 4632</span>&#160;                      &lt;&lt; <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getName() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l04633"></a><span class="lineno"> 4633</span>&#160; </div>
<div class="line"><a name="l04634"></a><span class="lineno"> 4634</span>&#160;    MadeIRChange |= <a class="code" href="InstructionCombining_8cpp.html#a247259f19ad922bde102feb163cd79dc">prepareICWorklistFromFunction</a>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, &amp;TLI, Worklist);</div>
<div class="line"><a name="l04635"></a><span class="lineno"> 4635</span>&#160; </div>
<div class="line"><a name="l04636"></a><span class="lineno"> 4636</span>&#160;    <a class="code" href="classllvm_1_1InstCombinerImpl.html">InstCombinerImpl</a> IC(Worklist, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>, <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.hasMinSize(), AA, AC, TLI, <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>, DT,</div>
<div class="line"><a name="l04637"></a><span class="lineno"> 4637</span>&#160;                        ORE, <a class="code" href="namespacellvm_1_1AMDGPUISD.html#a739d53294bc38cd6b0b23332f9994c0eafbca76f7875e080d97cee761de04d996">BFI</a>, PSI, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, LI);</div>
<div class="line"><a name="l04638"></a><span class="lineno"> 4638</span>&#160;    IC.<a class="code" href="classllvm_1_1InstCombiner.html#a4bc1fafcc9582581002518df62792214">MaxArraySizeForCombine</a> = <a class="code" href="InstructionCombining_8cpp.html#a48ae0648edff8a871369bab3d3646ac0">MaxArraySize</a>;</div>
<div class="line"><a name="l04639"></a><span class="lineno"> 4639</span>&#160; </div>
<div class="line"><a name="l04640"></a><span class="lineno"> 4640</span>&#160;    <span class="keywordflow">if</span> (!IC.<a class="code" href="classllvm_1_1InstCombinerImpl.html#ac5d3cfa0755b34bcbd3f2298e9fa28ed">run</a>())</div>
<div class="line"><a name="l04641"></a><span class="lineno"> 4641</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04642"></a><span class="lineno"> 4642</span>&#160; </div>
<div class="line"><a name="l04643"></a><span class="lineno"> 4643</span>&#160;    MadeIRChange = <span class="keyword">true</span>;</div>
<div class="line"><a name="l04644"></a><span class="lineno"> 4644</span>&#160;  }</div>
<div class="line"><a name="l04645"></a><span class="lineno"> 4645</span>&#160; </div>
<div class="line"><a name="l04646"></a><span class="lineno"> 4646</span>&#160;  <span class="keywordflow">return</span> MadeIRChange;</div>
<div class="line"><a name="l04647"></a><span class="lineno"> 4647</span>&#160;}</div>
<div class="line"><a name="l04648"></a><span class="lineno"> 4648</span>&#160; </div>
<div class="line"><a name="l04649"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombinePass.html#a35e39a7ec3910c5a9d2037312783fb1c"> 4649</a></span>&#160;<a class="code" href="classllvm_1_1InstCombinePass.html#a35e39a7ec3910c5a9d2037312783fb1c">InstCombinePass::InstCombinePass</a>() : MaxIterations(<a class="code" href="InstructionCombining_8cpp.html#a4d79676cd8860ab969121d292de048ef">LimitMaxIterations</a>) {}</div>
<div class="line"><a name="l04650"></a><span class="lineno"> 4650</span>&#160; </div>
<div class="line"><a name="l04651"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombinePass.html#a6dc2bdda33772e787b33139860ae4a0c"> 4651</a></span>&#160;<a class="code" href="classllvm_1_1InstCombinePass.html#a35e39a7ec3910c5a9d2037312783fb1c">InstCombinePass::InstCombinePass</a>(<span class="keywordtype">unsigned</span> MaxIterations)</div>
<div class="line"><a name="l04652"></a><span class="lineno"> 4652</span>&#160;    : MaxIterations(MaxIterations) {}</div>
<div class="line"><a name="l04653"></a><span class="lineno"> 4653</span>&#160; </div>
<div class="line"><a name="l04654"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombinePass.html#aa1ffc7ad08181545bbc25eabac7f5aae"> 4654</a></span>&#160;<a class="code" href="classllvm_1_1PreservedAnalyses.html">PreservedAnalyses</a> <a class="code" href="classllvm_1_1InstCombinePass.html#aa1ffc7ad08181545bbc25eabac7f5aae">InstCombinePass::run</a>(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>,</div>
<div class="line"><a name="l04655"></a><span class="lineno"> 4655</span>&#160;                                       <a class="code" href="classllvm_1_1AnalysisManager.html">FunctionAnalysisManager</a> &amp;AM) {</div>
<div class="line"><a name="l04656"></a><span class="lineno"> 4656</span>&#160;  <span class="keyword">auto</span> &amp;AC = AM.<a class="code" href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">getResult</a>&lt;<a class="code" href="classllvm_1_1AssumptionAnalysis.html">AssumptionAnalysis</a>&gt;(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l04657"></a><span class="lineno"> 4657</span>&#160;  <span class="keyword">auto</span> &amp;DT = AM.<a class="code" href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">getResult</a>&lt;<a class="code" href="classllvm_1_1DominatorTreeAnalysis.html">DominatorTreeAnalysis</a>&gt;(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l04658"></a><span class="lineno"> 4658</span>&#160;  <span class="keyword">auto</span> &amp;TLI = AM.<a class="code" href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">getResult</a>&lt;<a class="code" href="classllvm_1_1TargetLibraryAnalysis.html">TargetLibraryAnalysis</a>&gt;(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l04659"></a><span class="lineno"> 4659</span>&#160;  <span class="keyword">auto</span> &amp;ORE = AM.<a class="code" href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">getResult</a>&lt;<a class="code" href="classllvm_1_1OptimizationRemarkEmitterAnalysis.html">OptimizationRemarkEmitterAnalysis</a>&gt;(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l04660"></a><span class="lineno"> 4660</span>&#160;  <span class="keyword">auto</span> &amp;<a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a> = AM.<a class="code" href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">getResult</a>&lt;<a class="code" href="classllvm_1_1TargetIRAnalysis.html">TargetIRAnalysis</a>&gt;(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l04661"></a><span class="lineno"> 4661</span>&#160; </div>
<div class="line"><a name="l04662"></a><span class="lineno"> 4662</span>&#160;  <span class="keyword">auto</span> *LI = AM.<a class="code" href="classllvm_1_1AnalysisManager.html#a90a202de107720c5c6af3a5bc275d8f5">getCachedResult</a>&lt;<a class="code" href="classllvm_1_1LoopAnalysis.html">LoopAnalysis</a>&gt;(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l04663"></a><span class="lineno"> 4663</span>&#160; </div>
<div class="line"><a name="l04664"></a><span class="lineno"> 4664</span>&#160;  <span class="keyword">auto</span> *AA = &amp;AM.<a class="code" href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">getResult</a>&lt;<a class="code" href="classllvm_1_1AAManager.html">AAManager</a>&gt;(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l04665"></a><span class="lineno"> 4665</span>&#160;  <span class="keyword">auto</span> &amp;MAMProxy = AM.<a class="code" href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">getResult</a>&lt;<a class="code" href="classllvm_1_1OuterAnalysisManagerProxy.html">ModuleAnalysisManagerFunctionProxy</a>&gt;(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l04666"></a><span class="lineno"> 4666</span>&#160;  <a class="code" href="classllvm_1_1ProfileSummaryInfo.html">ProfileSummaryInfo</a> *PSI =</div>
<div class="line"><a name="l04667"></a><span class="lineno"> 4667</span>&#160;      MAMProxy.getCachedResult&lt;<a class="code" href="classllvm_1_1ProfileSummaryAnalysis.html">ProfileSummaryAnalysis</a>&gt;(*<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getParent());</div>
<div class="line"><a name="l04668"></a><span class="lineno"> 4668</span>&#160;  <span class="keyword">auto</span> *<a class="code" href="namespacellvm_1_1AMDGPUISD.html#a739d53294bc38cd6b0b23332f9994c0eafbca76f7875e080d97cee761de04d996">BFI</a> = (PSI &amp;&amp; PSI-&gt;hasProfileSummary()) ?</div>
<div class="line"><a name="l04669"></a><span class="lineno"> 4669</span>&#160;      &amp;AM.<a class="code" href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">getResult</a>&lt;<a class="code" href="classllvm_1_1BlockFrequencyAnalysis.html">BlockFrequencyAnalysis</a>&gt;(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>) : <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l04670"></a><span class="lineno"> 4670</span>&#160; </div>
<div class="line"><a name="l04671"></a><span class="lineno"> 4671</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="InstructionCombining_8cpp.html#a2b3700ceaf5c828fee30215dfcd63304">combineInstructionsOverFunction</a>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, Worklist, AA, AC, TLI, <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>, DT, ORE,</div>
<div class="line"><a name="l04672"></a><span class="lineno"> 4672</span>&#160;                                       <a class="code" href="namespacellvm_1_1AMDGPUISD.html#a739d53294bc38cd6b0b23332f9994c0eafbca76f7875e080d97cee761de04d996">BFI</a>, PSI, MaxIterations, LI))</div>
<div class="line"><a name="l04673"></a><span class="lineno"> 4673</span>&#160;    <span class="comment">// No changes, all analyses are preserved.</span></div>
<div class="line"><a name="l04674"></a><span class="lineno"> 4674</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1PreservedAnalyses.html#a1258a1ff55557c27684010ebd7283712">PreservedAnalyses::all</a>();</div>
<div class="line"><a name="l04675"></a><span class="lineno"> 4675</span>&#160; </div>
<div class="line"><a name="l04676"></a><span class="lineno"> 4676</span>&#160;  <span class="comment">// Mark all the analyses that instcombine updates as preserved.</span></div>
<div class="line"><a name="l04677"></a><span class="lineno"> 4677</span>&#160;  <a class="code" href="classllvm_1_1PreservedAnalyses.html">PreservedAnalyses</a> PA;</div>
<div class="line"><a name="l04678"></a><span class="lineno"> 4678</span>&#160;  PA.<a class="code" href="classllvm_1_1PreservedAnalyses.html#a937c42f77e161349ce0f999e448c7027">preserveSet</a>&lt;<a class="code" href="classllvm_1_1CFGAnalyses.html">CFGAnalyses</a>&gt;();</div>
<div class="line"><a name="l04679"></a><span class="lineno"> 4679</span>&#160;  <span class="keywordflow">return</span> PA;</div>
<div class="line"><a name="l04680"></a><span class="lineno"> 4680</span>&#160;}</div>
<div class="line"><a name="l04681"></a><span class="lineno"> 4681</span>&#160; </div>
<div class="line"><a name="l04682"></a><span class="lineno"><a class="line" href="classllvm_1_1InstructionCombiningPass.html#a5acf47fe333b314ccdb4c0a26f39db97"> 4682</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1InstructionCombiningPass.html#a5acf47fe333b314ccdb4c0a26f39db97">InstructionCombiningPass::getAnalysisUsage</a>(<a class="code" href="classllvm_1_1AnalysisUsage.html">AnalysisUsage</a> &amp;AU)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l04683"></a><span class="lineno"> 4683</span>&#160;  AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#af11a6ebf7ab3c388234cb6d5378439a3">setPreservesCFG</a>();</div>
<div class="line"><a name="l04684"></a><span class="lineno"> 4684</span>&#160;  AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">addRequired</a>&lt;<a class="code" href="classllvm_1_1AAResultsWrapperPass.html">AAResultsWrapperPass</a>&gt;();</div>
<div class="line"><a name="l04685"></a><span class="lineno"> 4685</span>&#160;  AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">addRequired</a>&lt;<a class="code" href="classllvm_1_1AssumptionCacheTracker.html">AssumptionCacheTracker</a>&gt;();</div>
<div class="line"><a name="l04686"></a><span class="lineno"> 4686</span>&#160;  AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">addRequired</a>&lt;<a class="code" href="classllvm_1_1TargetLibraryInfoWrapperPass.html">TargetLibraryInfoWrapperPass</a>&gt;();</div>
<div class="line"><a name="l04687"></a><span class="lineno"> 4687</span>&#160;  AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">addRequired</a>&lt;<a class="code" href="classllvm_1_1TargetTransformInfoWrapperPass.html">TargetTransformInfoWrapperPass</a>&gt;();</div>
<div class="line"><a name="l04688"></a><span class="lineno"> 4688</span>&#160;  AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">addRequired</a>&lt;<a class="code" href="classllvm_1_1DominatorTreeWrapperPass.html">DominatorTreeWrapperPass</a>&gt;();</div>
<div class="line"><a name="l04689"></a><span class="lineno"> 4689</span>&#160;  AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">addRequired</a>&lt;<a class="code" href="classllvm_1_1OptimizationRemarkEmitterWrapperPass.html">OptimizationRemarkEmitterWrapperPass</a>&gt;();</div>
<div class="line"><a name="l04690"></a><span class="lineno"> 4690</span>&#160;  AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#a884f90190bca4bd354f2d5c91c264028">addPreserved</a>&lt;<a class="code" href="classllvm_1_1DominatorTreeWrapperPass.html">DominatorTreeWrapperPass</a>&gt;();</div>
<div class="line"><a name="l04691"></a><span class="lineno"> 4691</span>&#160;  AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#a884f90190bca4bd354f2d5c91c264028">addPreserved</a>&lt;<a class="code" href="classllvm_1_1AAResultsWrapperPass.html">AAResultsWrapperPass</a>&gt;();</div>
<div class="line"><a name="l04692"></a><span class="lineno"> 4692</span>&#160;  AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#a884f90190bca4bd354f2d5c91c264028">addPreserved</a>&lt;<a class="code" href="classllvm_1_1BasicAAWrapperPass.html">BasicAAWrapperPass</a>&gt;();</div>
<div class="line"><a name="l04693"></a><span class="lineno"> 4693</span>&#160;  AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#a884f90190bca4bd354f2d5c91c264028">addPreserved</a>&lt;<a class="code" href="classllvm_1_1GlobalsAAWrapperPass.html">GlobalsAAWrapperPass</a>&gt;();</div>
<div class="line"><a name="l04694"></a><span class="lineno"> 4694</span>&#160;  AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">addRequired</a>&lt;<a class="code" href="classllvm_1_1ProfileSummaryInfoWrapperPass.html">ProfileSummaryInfoWrapperPass</a>&gt;();</div>
<div class="line"><a name="l04695"></a><span class="lineno"> 4695</span>&#160;  <a class="code" href="classllvm_1_1LazyBlockFrequencyInfoPass.html#a8969b22606511eb0e2b2e028a3c0f332">LazyBlockFrequencyInfoPass::getLazyBFIAnalysisUsage</a>(AU);</div>
<div class="line"><a name="l04696"></a><span class="lineno"> 4696</span>&#160;}</div>
<div class="line"><a name="l04697"></a><span class="lineno"> 4697</span>&#160; </div>
<div class="line"><a name="l04698"></a><span class="lineno"><a class="line" href="classllvm_1_1InstructionCombiningPass.html#ab64b7e967adeebc9bacc8abd8ddce0c8"> 4698</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1InstructionCombiningPass.html#ab64b7e967adeebc9bacc8abd8ddce0c8">InstructionCombiningPass::runOnFunction</a>(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>) {</div>
<div class="line"><a name="l04699"></a><span class="lineno"> 4699</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1FunctionPass.html#af9f5f511d75e16f09a5520cb9444cfa8">skipFunction</a>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>))</div>
<div class="line"><a name="l04700"></a><span class="lineno"> 4700</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l04701"></a><span class="lineno"> 4701</span>&#160; </div>
<div class="line"><a name="l04702"></a><span class="lineno"> 4702</span>&#160;  <span class="comment">// Required analyses.</span></div>
<div class="line"><a name="l04703"></a><span class="lineno"> 4703</span>&#160;  <span class="keyword">auto</span> AA = &amp;getAnalysis&lt;AAResultsWrapperPass&gt;().getAAResults();</div>
<div class="line"><a name="l04704"></a><span class="lineno"> 4704</span>&#160;  <span class="keyword">auto</span> &amp;AC = getAnalysis&lt;AssumptionCacheTracker&gt;().getAssumptionCache(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l04705"></a><span class="lineno"> 4705</span>&#160;  <span class="keyword">auto</span> &amp;TLI = getAnalysis&lt;TargetLibraryInfoWrapperPass&gt;().getTLI(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l04706"></a><span class="lineno"> 4706</span>&#160;  <span class="keyword">auto</span> &amp;<a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a> = getAnalysis&lt;TargetTransformInfoWrapperPass&gt;().getTTI(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l04707"></a><span class="lineno"> 4707</span>&#160;  <span class="keyword">auto</span> &amp;DT = getAnalysis&lt;DominatorTreeWrapperPass&gt;().getDomTree();</div>
<div class="line"><a name="l04708"></a><span class="lineno"> 4708</span>&#160;  <span class="keyword">auto</span> &amp;ORE = getAnalysis&lt;OptimizationRemarkEmitterWrapperPass&gt;().getORE();</div>
<div class="line"><a name="l04709"></a><span class="lineno"> 4709</span>&#160; </div>
<div class="line"><a name="l04710"></a><span class="lineno"> 4710</span>&#160;  <span class="comment">// Optional analyses.</span></div>
<div class="line"><a name="l04711"></a><span class="lineno"> 4711</span>&#160;  <span class="keyword">auto</span> *LIWP = getAnalysisIfAvailable&lt;LoopInfoWrapperPass&gt;();</div>
<div class="line"><a name="l04712"></a><span class="lineno"> 4712</span>&#160;  <span class="keyword">auto</span> *LI = LIWP ? &amp;LIWP-&gt;getLoopInfo() : <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l04713"></a><span class="lineno"> 4713</span>&#160;  <a class="code" href="classllvm_1_1ProfileSummaryInfo.html">ProfileSummaryInfo</a> *PSI =</div>
<div class="line"><a name="l04714"></a><span class="lineno"> 4714</span>&#160;      &amp;getAnalysis&lt;ProfileSummaryInfoWrapperPass&gt;().getPSI();</div>
<div class="line"><a name="l04715"></a><span class="lineno"> 4715</span>&#160;  <a class="code" href="classllvm_1_1BlockFrequencyInfo.html">BlockFrequencyInfo</a> *<a class="code" href="namespacellvm_1_1AMDGPUISD.html#a739d53294bc38cd6b0b23332f9994c0eafbca76f7875e080d97cee761de04d996">BFI</a> =</div>
<div class="line"><a name="l04716"></a><span class="lineno"> 4716</span>&#160;      (PSI &amp;&amp; PSI-&gt;<a class="code" href="classllvm_1_1ProfileSummaryInfo.html#a11d1c1af51bf81a6a9f8f5191b5e3cf2">hasProfileSummary</a>()) ?</div>
<div class="line"><a name="l04717"></a><span class="lineno"> 4717</span>&#160;      &amp;getAnalysis&lt;LazyBlockFrequencyInfoPass&gt;().getBFI() :</div>
<div class="line"><a name="l04718"></a><span class="lineno"> 4718</span>&#160;      <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l04719"></a><span class="lineno"> 4719</span>&#160; </div>
<div class="line"><a name="l04720"></a><span class="lineno"> 4720</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="InstructionCombining_8cpp.html#a2b3700ceaf5c828fee30215dfcd63304">combineInstructionsOverFunction</a>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, Worklist, AA, AC, TLI, <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>, DT, ORE,</div>
<div class="line"><a name="l04721"></a><span class="lineno"> 4721</span>&#160;                                         <a class="code" href="namespacellvm_1_1AMDGPUISD.html#a739d53294bc38cd6b0b23332f9994c0eafbca76f7875e080d97cee761de04d996">BFI</a>, PSI, MaxIterations, LI);</div>
<div class="line"><a name="l04722"></a><span class="lineno"> 4722</span>&#160;}</div>
<div class="line"><a name="l04723"></a><span class="lineno"> 4723</span>&#160; </div>
<div class="line"><a name="l04724"></a><span class="lineno"> 4724</span>&#160;<span class="keywordtype">char</span> <a class="code" href="classllvm_1_1InstructionCombiningPass.html#ad5db0c25b136012cb2e8ac3fa98318da">InstructionCombiningPass::ID</a> = 0;</div>
<div class="line"><a name="l04725"></a><span class="lineno"> 4725</span>&#160; </div>
<div class="line"><a name="l04726"></a><span class="lineno"><a class="line" href="classllvm_1_1InstructionCombiningPass.html#a0dd4dac14ef239990364482706fd75f3"> 4726</a></span>&#160;<a class="code" href="classllvm_1_1InstructionCombiningPass.html#a0dd4dac14ef239990364482706fd75f3">InstructionCombiningPass::InstructionCombiningPass</a>()</div>
<div class="line"><a name="l04727"></a><span class="lineno"> 4727</span>&#160;    : <a class="code" href="classllvm_1_1FunctionPass.html">FunctionPass</a>(<a class="code" href="namespacellvm_1_1CallingConv.html#a188c0836f8c3528401f1c236fd93b977">ID</a>), MaxIterations(<a class="code" href="InstructionCombining_8cpp.html#a8b7341c151ccd1237c50ae5d7558920b">InstCombineDefaultMaxIterations</a>) {</div>
<div class="line"><a name="l04728"></a><span class="lineno"> 4728</span>&#160;  <a class="code" href="namespacellvm.html#af1419a855f9813cb9164ca88d90d690c">initializeInstructionCombiningPassPass</a>(*<a class="code" href="classllvm_1_1PassRegistry.html#a05a729900b76c89e808c6c3094921b2f">PassRegistry::getPassRegistry</a>());</div>
<div class="line"><a name="l04729"></a><span class="lineno"> 4729</span>&#160;}</div>
<div class="line"><a name="l04730"></a><span class="lineno"> 4730</span>&#160; </div>
<div class="line"><a name="l04731"></a><span class="lineno"><a class="line" href="classllvm_1_1InstructionCombiningPass.html#a0df8464d5cc81dfe77c799ca9bac2766"> 4731</a></span>&#160;<a class="code" href="classllvm_1_1InstructionCombiningPass.html#a0dd4dac14ef239990364482706fd75f3">InstructionCombiningPass::InstructionCombiningPass</a>(<span class="keywordtype">unsigned</span> MaxIterations)</div>
<div class="line"><a name="l04732"></a><span class="lineno"> 4732</span>&#160;    : <a class="code" href="classllvm_1_1FunctionPass.html">FunctionPass</a>(<a class="code" href="namespacellvm_1_1CallingConv.html#a188c0836f8c3528401f1c236fd93b977">ID</a>), MaxIterations(MaxIterations) {</div>
<div class="line"><a name="l04733"></a><span class="lineno"> 4733</span>&#160;  <a class="code" href="namespacellvm.html#af1419a855f9813cb9164ca88d90d690c">initializeInstructionCombiningPassPass</a>(*<a class="code" href="classllvm_1_1PassRegistry.html#a05a729900b76c89e808c6c3094921b2f">PassRegistry::getPassRegistry</a>());</div>
<div class="line"><a name="l04734"></a><span class="lineno"> 4734</span>&#160;}</div>
<div class="line"><a name="l04735"></a><span class="lineno"> 4735</span>&#160; </div>
<div class="line"><a name="l04736"></a><span class="lineno"> 4736</span>&#160;<a class="code" href="InstructionCombining_8cpp.html#a8a787de77e16e56d936abb2ad6ee4c8c">INITIALIZE_PASS_BEGIN</a>(<a class="code" href="classllvm_1_1InstructionCombiningPass.html">InstructionCombiningPass</a>, <span class="stringliteral">&quot;instcombine&quot;</span>,</div>
<div class="line"><a name="l04737"></a><span class="lineno"> 4737</span>&#160;                      <span class="stringliteral">&quot;Combine redundant instructions&quot;</span>, <span class="keyword">false</span>, <span class="keyword">false</span>)</div>
<div class="line"><a name="l04738"></a><span class="lineno"> 4738</span>&#160;<a class="code" href="SVEIntrinsicOpts_8cpp.html#a2bb87eb1bcbc74783a83ae945eb8fa36">INITIALIZE_PASS_DEPENDENCY</a>(<a class="code" href="classllvm_1_1AssumptionCacheTracker.html">AssumptionCacheTracker</a>)</div>
<div class="line"><a name="l04739"></a><span class="lineno"> 4739</span>&#160;<a class="code" href="SVEIntrinsicOpts_8cpp.html#a2bb87eb1bcbc74783a83ae945eb8fa36">INITIALIZE_PASS_DEPENDENCY</a>(<a class="code" href="classllvm_1_1TargetLibraryInfoWrapperPass.html">TargetLibraryInfoWrapperPass</a>)</div>
<div class="line"><a name="l04740"></a><span class="lineno"> 4740</span>&#160;<a class="code" href="SVEIntrinsicOpts_8cpp.html#a2bb87eb1bcbc74783a83ae945eb8fa36">INITIALIZE_PASS_DEPENDENCY</a>(<a class="code" href="classllvm_1_1TargetTransformInfoWrapperPass.html">TargetTransformInfoWrapperPass</a>)</div>
<div class="line"><a name="l04741"></a><span class="lineno"> 4741</span>&#160;<a class="code" href="SVEIntrinsicOpts_8cpp.html#a2bb87eb1bcbc74783a83ae945eb8fa36">INITIALIZE_PASS_DEPENDENCY</a>(<a class="code" href="classllvm_1_1DominatorTreeWrapperPass.html">DominatorTreeWrapperPass</a>)</div>
<div class="line"><a name="l04742"></a><span class="lineno"> 4742</span>&#160;<a class="code" href="SVEIntrinsicOpts_8cpp.html#a2bb87eb1bcbc74783a83ae945eb8fa36">INITIALIZE_PASS_DEPENDENCY</a>(<a class="code" href="classllvm_1_1AAResultsWrapperPass.html">AAResultsWrapperPass</a>)</div>
<div class="line"><a name="l04743"></a><span class="lineno"> 4743</span>&#160;<a class="code" href="SVEIntrinsicOpts_8cpp.html#a2bb87eb1bcbc74783a83ae945eb8fa36">INITIALIZE_PASS_DEPENDENCY</a>(<a class="code" href="classllvm_1_1GlobalsAAWrapperPass.html">GlobalsAAWrapperPass</a>)</div>
<div class="line"><a name="l04744"></a><span class="lineno"> 4744</span>&#160;<a class="code" href="SVEIntrinsicOpts_8cpp.html#a2bb87eb1bcbc74783a83ae945eb8fa36">INITIALIZE_PASS_DEPENDENCY</a>(<a class="code" href="classllvm_1_1OptimizationRemarkEmitterWrapperPass.html">OptimizationRemarkEmitterWrapperPass</a>)</div>
<div class="line"><a name="l04745"></a><span class="lineno"> 4745</span>&#160;<a class="code" href="SVEIntrinsicOpts_8cpp.html#a2bb87eb1bcbc74783a83ae945eb8fa36">INITIALIZE_PASS_DEPENDENCY</a>(<a class="code" href="classllvm_1_1LazyBlockFrequencyInfoPass.html">LazyBlockFrequencyInfoPass</a>)</div>
<div class="line"><a name="l04746"></a><span class="lineno"> 4746</span>&#160;<a class="code" href="SVEIntrinsicOpts_8cpp.html#a2bb87eb1bcbc74783a83ae945eb8fa36">INITIALIZE_PASS_DEPENDENCY</a>(<a class="code" href="classllvm_1_1ProfileSummaryInfoWrapperPass.html">ProfileSummaryInfoWrapperPass</a>)</div>
<div class="line"><a name="l04747"></a><span class="lineno"><a class="line" href="InstructionCombining_8cpp.html#a7d4d7e39548303ef4c1f5a0ed13a9c23"> 4747</a></span>&#160;<a class="code" href="PassSupport_8h.html#a74ce8276b89067e806f67c45a6d92575">INITIALIZE_PASS_END</a>(<a class="code" href="classllvm_1_1InstructionCombiningPass.html">InstructionCombiningPass</a>, &quot;<a class="code" href="InstructionCombining_8cpp.html#a7d4d7e39548303ef4c1f5a0ed13a9c23">instcombine</a>&quot;,</div>
<div class="line"><a name="l04748"></a><span class="lineno"><a class="line" href="InstructionCombining_8cpp.html#a9360db2a972441c49cdbbabb5b20cc27"> 4748</a></span>&#160;                    &quot;<a class="code" href="HexagonVectorCombine_8cpp.html#ab582deb65d0ec7f41efa6d8579daf0e1">Combine</a> redundant <a class="code" href="namespacellvm.html#a7e3e687ddfdcbacd404bcf17b917dd88">instructions</a>&quot;, <a class="code" href="namespacefalse.html">false</a>, <a class="code" href="namespacefalse.html">false</a>)</div>
<div class="line"><a name="l04749"></a><span class="lineno"> 4749</span>&#160; </div>
<div class="line"><a name="l04750"></a><span class="lineno"> 4750</span>&#160;<span class="comment">// Initialization Routines</span></div>
<div class="line"><a name="l04751"></a><span class="lineno"><a class="line" href="namespacellvm.html#aee2cbad0134e307a0d2f3dee1db34d7c"> 4751</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespacellvm.html">llvm</a>::<a class="code" href="namespacellvm.html#aee2cbad0134e307a0d2f3dee1db34d7c">initializeInstCombine</a>(<a class="code" href="classllvm_1_1PassRegistry.html">PassRegistry</a> &amp;<a class="code" href="classllvm_1_1Registry.html">Registry</a>) {</div>
<div class="line"><a name="l04752"></a><span class="lineno"> 4752</span>&#160;  <a class="code" href="namespacellvm.html#af1419a855f9813cb9164ca88d90d690c">initializeInstructionCombiningPassPass</a>(<a class="code" href="classllvm_1_1Registry.html">Registry</a>);</div>
<div class="line"><a name="l04753"></a><span class="lineno"> 4753</span>&#160;}</div>
<div class="line"><a name="l04754"></a><span class="lineno"> 4754</span>&#160; </div>
<div class="line"><a name="l04755"></a><span class="lineno"><a class="line" href="group__LLVMCInitialization.html#gaf7d731d72d80afb7917f7cd548da8298"> 4755</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="group__LLVMCInitialization.html#gaf7d731d72d80afb7917f7cd548da8298">LLVMInitializeInstCombine</a>(<a class="code" href="group__LLVMCSupportTypes.html#gab1ca1ff855478bc0f33874a1182e4b94">LLVMPassRegistryRef</a> R) {</div>
<div class="line"><a name="l04756"></a><span class="lineno"> 4756</span>&#160;  <a class="code" href="namespacellvm.html#af1419a855f9813cb9164ca88d90d690c">initializeInstructionCombiningPassPass</a>(*<a class="code" href="namespacellvm.html#aa3d613e3ad429bdb5b1a7d22796028e9">unwrap</a>(R));</div>
<div class="line"><a name="l04757"></a><span class="lineno"> 4757</span>&#160;}</div>
<div class="line"><a name="l04758"></a><span class="lineno"> 4758</span>&#160; </div>
<div class="line"><a name="l04759"></a><span class="lineno"><a class="line" href="namespacellvm.html#a195c85317ba5f5262812d33289c7a2b3"> 4759</a></span>&#160;<a class="code" href="classllvm_1_1FunctionPass.html">FunctionPass</a> *<a class="code" href="namespacellvm.html#a195c85317ba5f5262812d33289c7a2b3">llvm::createInstructionCombiningPass</a>() {</div>
<div class="line"><a name="l04760"></a><span class="lineno"> 4760</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1InstructionCombiningPass.html">InstructionCombiningPass</a>();</div>
<div class="line"><a name="l04761"></a><span class="lineno"> 4761</span>&#160;}</div>
<div class="line"><a name="l04762"></a><span class="lineno"> 4762</span>&#160; </div>
<div class="line"><a name="l04763"></a><span class="lineno"><a class="line" href="namespacellvm.html#ad0a62ea0f412d0323956a5694ea27611"> 4763</a></span>&#160;<a class="code" href="classllvm_1_1FunctionPass.html">FunctionPass</a> *<a class="code" href="namespacellvm.html#a195c85317ba5f5262812d33289c7a2b3">llvm::createInstructionCombiningPass</a>(<span class="keywordtype">unsigned</span> MaxIterations) {</div>
<div class="line"><a name="l04764"></a><span class="lineno"> 4764</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1InstructionCombiningPass.html">InstructionCombiningPass</a>(MaxIterations);</div>
<div class="line"><a name="l04765"></a><span class="lineno"> 4765</span>&#160;}</div>
<div class="line"><a name="l04766"></a><span class="lineno"> 4766</span>&#160; </div>
<div class="line"><a name="l04767"></a><span class="lineno"><a class="line" href="group__LLVMCTransformsInstCombine.html#gadf0c4085b4c34e8e45e2034511fb046b"> 4767</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="group__LLVMCTransformsInstCombine.html#gadf0c4085b4c34e8e45e2034511fb046b">LLVMAddInstructionCombiningPass</a>(<a class="code" href="group__LLVMCSupportTypes.html#ga45fccfac9832f829c5e12a8915e85f4c">LLVMPassManagerRef</a> PM) {</div>
<div class="line"><a name="l04768"></a><span class="lineno"> 4768</span>&#160;  <a class="code" href="namespacellvm.html#aa3d613e3ad429bdb5b1a7d22796028e9">unwrap</a>(PM)-&gt;add(<a class="code" href="namespacellvm.html#a195c85317ba5f5262812d33289c7a2b3">createInstructionCombiningPass</a>());</div>
<div class="line"><a name="l04769"></a><span class="lineno"> 4769</span>&#160;}</div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="anamespacellvm_html_a5d56157a385f8cd7d3e54ed87da1ba6aab34bedfd8d86f0adbefe4ae0e708f428"><div class="ttname"><a href="namespacellvm.html#a5d56157a385f8cd7d3e54ed87da1ba6aab34bedfd8d86f0adbefe4ae0e708f428">llvm::EHPersonality::MSVC_CXX</a></div><div class="ttdeci">@ MSVC_CXX</div></div>
<div class="ttc" id="aclassllvm_1_1NoAliasScopeDeclInst_html"><div class="ttname"><a href="classllvm_1_1NoAliasScopeDeclInst.html">llvm::NoAliasScopeDeclInst</a></div><div class="ttdef"><b>Definition:</b> <a href="IntrinsicInst_8h_source.html#l01429">IntrinsicInst.h:1429</a></div></div>
<div class="ttc" id="alib_2Target_2README_8txt_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">i</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2README_8txt_source.html#l00029">README.txt:29</a></div></div>
<div class="ttc" id="aclassllvm_1_1PreservedAnalyses_html"><div class="ttname"><a href="classllvm_1_1PreservedAnalyses.html">llvm::PreservedAnalyses</a></div><div class="ttdoc">A set of analyses that are preserved following a run of a transformation pass.</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00152">PassManager.h:152</a></div></div>
<div class="ttc" id="aclassllvm_1_1ExtractValueInst_html_adcb2c5c48153bf5892d78301517fe59b"><div class="ttname"><a href="classllvm_1_1ExtractValueInst.html#adcb2c5c48153bf5892d78301517fe59b">llvm::ExtractValueInst::hasIndices</a></div><div class="ttdeci">bool hasIndices() const</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02528">Instructions.h:2528</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a7653277511df1034148a37520a585bb5"><div class="ttname"><a href="classllvm_1_1Instruction.html#a7653277511df1034148a37520a585bb5">llvm::Instruction::isTerminator</a></div><div class="ttdeci">bool isTerminator() const</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00171">Instruction.h:171</a></div></div>
<div class="ttc" id="aclassllvm_1_1OuterAnalysisManagerProxy_html"><div class="ttname"><a href="classllvm_1_1OuterAnalysisManagerProxy.html">llvm::OuterAnalysisManagerProxy</a></div><div class="ttdoc">An analysis over an &quot;inner&quot; IR unit that provides access to an analysis manager over a &quot;outer&quot; IR uni...</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l01056">PassManager.h:1056</a></div></div>
<div class="ttc" id="aAssumptionCache_8h_html"><div class="ttname"><a href="AssumptionCache_8h.html">AssumptionCache.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1AAManager_html"><div class="ttname"><a href="classllvm_1_1AAManager.html">llvm::AAManager</a></div><div class="ttdoc">A manager for alias analyses.</div><div class="ttdef"><b>Definition:</b> <a href="AliasAnalysis_8h_source.html#l00885">AliasAnalysis.h:885</a></div></div>
<div class="ttc" id="aInstructionCombining_8cpp_html_a2c27d3aa3ffee14bf2194f7c0cbf9dfc"><div class="ttname"><a href="InstructionCombining_8cpp.html#a2c27d3aa3ffee14bf2194f7c0cbf9dfc">foldSelectGEP</a></div><div class="ttdeci">static Instruction * foldSelectGEP(GetElementPtrInst &amp;GEP, InstCombiner::BuilderTy &amp;Builder)</div><div class="ttdoc">Thread a GEP operation with constant indices through the constant true/false arms of a select.</div><div class="ttdef"><b>Definition:</b> <a href="InstructionCombining_8cpp_source.html#l01962">InstructionCombining.cpp:1962</a></div></div>
<div class="ttc" id="aREADME__ALTIVEC_8txt_html_a9d3ba236d13373cde794da2023acc7a0"><div class="ttname"><a href="README__ALTIVEC_8txt.html#a9d3ba236d13373cde794da2023acc7a0">Attrs</a></div><div class="ttdeci">Function Attrs</div><div class="ttdef"><b>Definition:</b> <a href="README__ALTIVEC_8txt_source.html#l00215">README_ALTIVEC.txt:215</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a8ad67a33bae235fe3cca1c3e5a91ed2d"><div class="ttname"><a href="classllvm_1_1Type.html#a8ad67a33bae235fe3cca1c3e5a91ed2d">llvm::Type::isSized</a></div><div class="ttdeci">bool isSized(SmallPtrSetImpl&lt; Type * &gt; *Visited=nullptr) const</div><div class="ttdoc">Return true if it makes sense to take the size of this type.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00295">Type.h:295</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetIRAnalysis_html"><div class="ttname"><a href="classllvm_1_1TargetIRAnalysis.html">llvm::TargetIRAnalysis</a></div><div class="ttdoc">Analysis pass providing the TargetTransformInfo.</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l02626">TargetTransformInfo.h:2626</a></div></div>
<div class="ttc" id="aclassllvm_1_1LandingPadInst_html_a1a7bd2918064a6043f8fc2bc8b081e61"><div class="ttname"><a href="classllvm_1_1LandingPadInst.html#a1a7bd2918064a6043f8fc2bc8b081e61">llvm::LandingPadInst::Create</a></div><div class="ttdeci">static LandingPadInst * Create(Type *RetTy, unsigned NumReservedClauses, const Twine &amp;NameStr=&quot;&quot;, Instruction *InsertBefore=nullptr)</div><div class="ttdoc">Constructors - NumReservedClauses is a hint for the number of incoming clauses that this landingpad w...</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l00225">Instructions.cpp:225</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a4f0027b9d05b27206b1882976fce9038"><div class="ttname"><a href="classllvm_1_1Instruction.html#a4f0027b9d05b27206b1882976fce9038">llvm::Instruction::isAssociative</a></div><div class="ttdeci">bool isAssociative() const LLVM_READONLY</div><div class="ttdoc">Return true if the instruction is associative:</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8cpp_source.html#l00801">Instruction.cpp:801</a></div></div>
<div class="ttc" id="aclassllvm_1_1GetElementPtrInst_html_a837e9f272fd070a5f8fc79c07a951106"><div class="ttname"><a href="classllvm_1_1GetElementPtrInst.html#a837e9f272fd070a5f8fc79c07a951106">llvm::GetElementPtrInst::setIsInBounds</a></div><div class="ttdeci">void setIsInBounds(bool b=true)</div><div class="ttdoc">Set or clear the inbounds flag on this GEP instruction.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l01938">Instructions.cpp:1938</a></div></div>
<div class="ttc" id="aIRTranslator_8cpp_html_abe44dfdea65b4f7e11e0a608ab708b76"><div class="ttname"><a href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a></div><div class="ttdeci">IRTranslator LLVM IR MI</div><div class="ttdef"><b>Definition:</b> <a href="IRTranslator_8cpp_source.html#l00109">IRTranslator.cpp:109</a></div></div>
<div class="ttc" id="anamespacellvm_html_ae7e24731676a84f7b8ae32ec978168ec"><div class="ttname"><a href="namespacellvm.html#ae7e24731676a84f7b8ae32ec978168ec">llvm::simplifyGEPInst</a></div><div class="ttdeci">Value * simplifyGEPInst(Type *SrcTy, Value *Ptr, ArrayRef&lt; Value * &gt; Indices, bool InBounds, const SimplifyQuery &amp;Q)</div><div class="ttdoc">Given operands for a GetElementPtrInst, fold the result or return null.</div><div class="ttdef"><b>Definition:</b> <a href="InstructionSimplify_8cpp_source.html#l04871">InstructionSimplify.cpp:4871</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_a694293446a074c3d64270e7671bb5052"><div class="ttname"><a href="classllvm_1_1APInt.html#a694293446a074c3d64270e7671bb5052">llvm::APInt::sadd_ov</a></div><div class="ttdeci">APInt sadd_ov(const APInt &amp;RHS, bool &amp;Overflow) const</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8cpp_source.html#l01926">APInt.cpp:1926</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombiner_html_ac1539f8fc8167c5be0eb439a4c5187fc"><div class="ttname"><a href="classllvm_1_1InstCombiner.html#ac1539f8fc8167c5be0eb439a4c5187fc">llvm::InstCombiner::targetSimplifyDemandedVectorEltsIntrinsic</a></div><div class="ttdeci">std::optional&lt; Value * &gt; targetSimplifyDemandedVectorEltsIntrinsic(IntrinsicInst &amp;II, APInt DemandedElts, APInt &amp;UndefElts, APInt &amp;UndefElts2, APInt &amp;UndefElts3, std::function&lt; void(Instruction *, unsigned, APInt, APInt &amp;)&gt; SimplifyAndSetOp)</div><div class="ttdef"><b>Definition:</b> <a href="InstructionCombining_8cpp_source.html#l00192">InstructionCombining.cpp:192</a></div></div>
<div class="ttc" id="anamespacellvm_html"><div class="ttname"><a href="namespacellvm.html">llvm</a></div><div class="ttdoc">This is an optimization pass for GlobalISel generic memory operations.</div><div class="ttdef"><b>Definition:</b> <a href="AddressRanges_8h_source.html#l00018">AddressRanges.h:18</a></div></div>
<div class="ttc" id="aInstructionCombining_8cpp_html_a247259f19ad922bde102feb163cd79dc"><div class="ttname"><a href="InstructionCombining_8cpp.html#a247259f19ad922bde102feb163cd79dc">prepareICWorklistFromFunction</a></div><div class="ttdeci">static bool prepareICWorklistFromFunction(Function &amp;F, const DataLayout &amp;DL, const TargetLibraryInfo *TLI, InstructionWorklist &amp;ICWorklist)</div><div class="ttdoc">Populate the IC worklist from a function, by walking it in depth-first order and adding all reachable...</div><div class="ttdef"><b>Definition:</b> <a href="InstructionCombining_8cpp_source.html#l04458">InstructionCombining.cpp:4458</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html_a563ffc2ff61c499b3be2e00100cb72fa"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#a563ffc2ff61c499b3be2e00100cb72fa">llvm::SmallVectorImpl::erase</a></div><div class="ttdeci">iterator erase(const_iterator CI)</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00741">SmallVector.h:741</a></div></div>
<div class="ttc" id="aclassllvm_1_1LandingPadInst_html_a0966e2f38f20609a643b5d5e3da8bae5"><div class="ttname"><a href="classllvm_1_1LandingPadInst.html#a0966e2f38f20609a643b5d5e3da8bae5">llvm::LandingPadInst::isCleanup</a></div><div class="ttdeci">bool isCleanup() const</div><div class="ttdoc">Return 'true' if this landingpad instruction is a cleanup.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03003">Instructions.h:3003</a></div></div>
<div class="ttc" id="aclassllvm_1_1Attribute_html_adf4d22686e85732b2fef71e3c45531c6"><div class="ttname"><a href="classllvm_1_1Attribute.html#adf4d22686e85732b2fef71e3c45531c6">llvm::Attribute::isValid</a></div><div class="ttdeci">bool isValid() const</div><div class="ttdoc">Return true if the attribute is any kind of attribute.</div><div class="ttdef"><b>Definition:</b> <a href="Attributes_8h_source.html#l00185">Attributes.h:185</a></div></div>
<div class="ttc" id="aclassllvm_1_1InvokeInst_html_ab659895cedd34fb668aab552ee3b9068"><div class="ttname"><a href="classllvm_1_1InvokeInst.html#ab659895cedd34fb668aab552ee3b9068">llvm::InvokeInst::Create</a></div><div class="ttdeci">static InvokeInst * Create(FunctionType *Ty, Value *Func, BasicBlock *IfNormal, BasicBlock *IfException, ArrayRef&lt; Value * &gt; Args, const Twine &amp;NameStr, Instruction *InsertBefore=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03858">Instructions.h:3858</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_aa75984a442f2379de0c66018201fa628"><div class="ttname"><a href="classllvm_1_1Type.html#aa75984a442f2379de0c66018201fa628">llvm::Type::getInt1Ty</a></div><div class="ttdeci">static IntegerType * getInt1Ty(LLVMContext &amp;C)</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00238">Type.cpp:238</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_ae755d569b6e5c69a8abbc6de50cf3f6b"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#ae755d569b6e5c69a8abbc6de50cf3f6b">llvm::InstCombinerImpl::visitGetElementPtrInst</a></div><div class="ttdeci">Instruction * visitGetElementPtrInst(GetElementPtrInst &amp;GEP)</div><div class="ttdef"><b>Definition:</b> <a href="InstructionCombining_8cpp_source.html#l02279">InstructionCombining.cpp:2279</a></div></div>
<div class="ttc" id="aInstructionCombining_8cpp_html_a7d1a4066f69b6c7a1b2f9e9cc3595de7"><div class="ttname"><a href="InstructionCombining_8cpp.html#a7d1a4066f69b6c7a1b2f9e9cc3595de7">foldOperationIntoSelectOperand</a></div><div class="ttdeci">static Value * foldOperationIntoSelectOperand(Instruction &amp;I, Value *SO, InstCombiner::BuilderTy &amp;Builder)</div><div class="ttdef"><b>Definition:</b> <a href="InstructionCombining_8cpp_source.html#l01054">InstructionCombining.cpp:1054</a></div></div>
<div class="ttc" id="aclassllvm_1_1CastInst_html_aa1a58843d7d645d5cf0390a68c7fd852"><div class="ttname"><a href="classllvm_1_1CastInst.html#aa1a58843d7d645d5cf0390a68c7fd852">llvm::CastInst::CreatePointerBitCastOrAddrSpaceCast</a></div><div class="ttdeci">static CastInst * CreatePointerBitCastOrAddrSpaceCast(Value *S, Type *Ty, const Twine &amp;Name, BasicBlock *InsertAtEnd)</div><div class="ttdoc">Create a BitCast or an AddrSpaceCast cast instruction.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l03483">Instructions.cpp:3483</a></div></div>
<div class="ttc" id="alib_2Target_2X86_2README_8txt_html_ac88fe1d3a61b056a4f64fbbb156a62ff"><div class="ttname"><a href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a></div><div class="ttdeci">We currently emits eax Perhaps this is what we really should generate is Is imull three or four cycles eax eax The current instruction priority is based on pattern complexity The former is more complex because it folds a load so the latter will not be emitted Perhaps we should use AddedComplexity to give LEA32r a higher priority We should always try to match LEA first since the LEA matching code does some estimate to determine whether the match is profitable if we care more about code then imull is better It s two bytes shorter than movl leal On a Pentium M</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2X86_2README_8txt_source.html#l00252">README.txt:252</a></div></div>
<div class="ttc" id="anamespacellvm_html_a8946e172b10c0ef5eaebb28ebb7662ad"><div class="ttname"><a href="namespacellvm.html#a8946e172b10c0ef5eaebb28ebb7662ad">llvm::ConvertDebugDeclareToDebugValue</a></div><div class="ttdeci">void ConvertDebugDeclareToDebugValue(DbgVariableIntrinsic *DII, StoreInst *SI, DIBuilder &amp;Builder)</div><div class="ttdoc">===------------------------------------------------------------------===// Dbg Intrinsic utilities</div><div class="ttdef"><b>Definition:</b> <a href="Transforms_2Utils_2Local_8cpp_source.html#l01523">Local.cpp:1523</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a4ba3a5be6c0e9b9e8a525de055836733"><div class="ttname"><a href="classllvm_1_1Instruction.html#a4ba3a5be6c0e9b9e8a525de055836733">llvm::Instruction::getModule</a></div><div class="ttdeci">const Module * getModule() const</div><div class="ttdoc">Return the module owning the function this instruction belongs to or nullptr it the function does not...</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8cpp_source.html#l00070">Instruction.cpp:70</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">llvm::CmpInst::ICMP_EQ</a></div><div class="ttdeci">@ ICMP_EQ</div><div class="ttdoc">equal</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00739">InstrTypes.h:739</a></div></div>
<div class="ttc" id="anamespacellvm_html_ac0be0d93ccd89dac00411b3a5a8bef87"><div class="ttname"><a href="namespacellvm.html#ac0be0d93ccd89dac00411b3a5a8bef87">llvm::isKnownNonNegative</a></div><div class="ttdeci">bool isKnownNonNegative(const Value *V, const DataLayout &amp;DL, unsigned Depth=0, AssumptionCache *AC=nullptr, const Instruction *CxtI=nullptr, const DominatorTree *DT=nullptr, bool UseInstrInfo=true)</div><div class="ttdoc">Returns true if the give value is known to be non-negative.</div><div class="ttdef"><b>Definition:</b> <a href="ValueTracking_8cpp_source.html#l00320">ValueTracking.cpp:320</a></div></div>
<div class="ttc" id="anamespacellvm_html_a02981de53fb6ffd384d39addc4d25f37"><div class="ttname"><a href="namespacellvm.html#a02981de53fb6ffd384d39addc4d25f37">llvm::drop_begin</a></div><div class="ttdeci">auto drop_begin(T &amp;&amp;RangeOrContainer, size_t N=1)</div><div class="ttdoc">Return a range covering RangeOrContainer with the first N elements excluded.</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l00386">STLExtras.h:386</a></div></div>
<div class="ttc" id="aclassllvm_1_1ReturnInst_html"><div class="ttname"><a href="classllvm_1_1ReturnInst.html">llvm::ReturnInst</a></div><div class="ttdoc">Return a value (possibly void), from a function.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03057">Instructions.h:3057</a></div></div>
<div class="ttc" id="anamespacellvm_html_aac36edd0f1ce976f0025c98e88d3830ea3a2d5fe857d8f9541136a124c2edec6c"><div class="ttname"><a href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830ea3a2d5fe857d8f9541136a124c2edec6c">llvm::RecurKind::Or</a></div><div class="ttdeci">@ Or</div><div class="ttdoc">Bitwise or logical OR of integers.</div></div>
<div class="ttc" id="astructllvm_1_1PatternMatch_1_1m__Mask_html"><div class="ttname"><a href="structllvm_1_1PatternMatch_1_1m__Mask.html">llvm::PatternMatch::m_Mask</a></div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01514">PatternMatch.h:1514</a></div></div>
<div class="ttc" id="anamespacellvm_html_a5d56157a385f8cd7d3e54ed87da1ba6aae83ea70f8c69153f8fb6aed8edc63ce8"><div class="ttname"><a href="namespacellvm.html#a5d56157a385f8cd7d3e54ed87da1ba6aae83ea70f8c69153f8fb6aed8edc63ce8">llvm::EHPersonality::GNU_C_SjLj</a></div><div class="ttdeci">@ GNU_C_SjLj</div></div>
<div class="ttc" id="aInstructionCombining_8cpp_html_a615b5564b60828081d3682b75710627c"><div class="ttname"><a href="InstructionCombining_8cpp.html#a615b5564b60828081d3682b75710627c">leftDistributesOverRight</a></div><div class="ttdeci">static bool leftDistributesOverRight(Instruction::BinaryOps LOp, Instruction::BinaryOps ROp)</div><div class="ttdoc">Return whether &quot;X LOp (Y ROp Z)&quot; is always equal to &quot;(X LOp Y) ROp (X LOp Z)&quot;.</div><div class="ttdef"><b>Definition:</b> <a href="InstructionCombining_8cpp_source.html#l00570">InstructionCombining.cpp:570</a></div></div>
<div class="ttc" id="aclassllvm_1_1PHINode_html_a1f0ff79b64a40d383b891f1baba89c6b"><div class="ttname"><a href="classllvm_1_1PHINode.html#a1f0ff79b64a40d383b891f1baba89c6b">llvm::PHINode::incoming_values</a></div><div class="ttdeci">op_range incoming_values()</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02784">Instructions.h:2784</a></div></div>
<div class="ttc" id="aclassllvm_1_1DataLayout_html"><div class="ttname"><a href="classllvm_1_1DataLayout.html">llvm::DataLayout</a></div><div class="ttdoc">A parsed version of the target data layout string in and methods for querying it.</div><div class="ttdef"><b>Definition:</b> <a href="DataLayout_8h_source.html#l00110">DataLayout.h:110</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a2d0036d2d7b30f510927731ba7a4f4b9"><div class="ttname"><a href="classllvm_1_1Instruction.html#a2d0036d2d7b30f510927731ba7a4f4b9">llvm::Instruction::isBitwiseLogicOp</a></div><div class="ttdeci">static bool isBitwiseLogicOp(unsigned Opcode)</div><div class="ttdoc">Determine if the Opcode is and/or/xor.</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00219">Instruction.h:219</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_a3a402430a1bbe70a9282dcb0e0b6a2cd"><div class="ttname"><a href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">llvm::Value::hasOneUse</a></div><div class="ttdeci">bool hasOneUse() const</div><div class="ttdoc">Return true if there is exactly one use of this value.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00434">Value.h:434</a></div></div>
<div class="ttc" id="aclassllvm_1_1generic__gep__type__iterator_html"><div class="ttname"><a href="classllvm_1_1generic__gep__type__iterator.html">llvm::generic_gep_type_iterator</a></div><div class="ttdef"><b>Definition:</b> <a href="GetElementPtrTypeIterator_8h_source.html#l00031">GetElementPtrTypeIterator.h:31</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_acadfa18c30c37d1660a10b23c470a35b"><div class="ttname"><a href="classllvm_1_1Instruction.html#acadfa18c30c37d1660a10b23c470a35b">llvm::Instruction::getInsertionPointAfterDef</a></div><div class="ttdeci">Instruction * getInsertionPointAfterDef()</div><div class="ttdoc">Get the first insertion point at which the result of this instruction is defined.</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8cpp_source.html#l00131">Instruction.cpp:131</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_aea9ba5a362fb88bd97349a302133dd03"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#aea9ba5a362fb88bd97349a302133dd03">llvm::InstCombinerImpl::visitBranchInst</a></div><div class="ttdeci">Instruction * visitBranchInst(BranchInst &amp;BI)</div><div class="ttdef"><b>Definition:</b> <a href="InstructionCombining_8cpp_source.html#l03178">InstructionCombining.cpp:3178</a></div></div>
<div class="ttc" id="aMetadata_8h_html"><div class="ttname"><a href="Metadata_8h.html">Metadata.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78b"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">llvm::CmpInst::Predicate</a></div><div class="ttdeci">Predicate</div><div class="ttdoc">This enumeration lists the possible predicates for CmpInst subclasses.</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00718">InstrTypes.h:718</a></div></div>
<div class="ttc" id="aclassllvm_1_1User_html_a0b931781aa589c6ebe64a76c1447e5b2"><div class="ttname"><a href="classllvm_1_1User.html#a0b931781aa589c6ebe64a76c1447e5b2">llvm::User::operands</a></div><div class="ttdeci">op_range operands()</div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00242">User.h:242</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a98c0a84a5dfa8bce341c829709f171e5"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a98c0a84a5dfa8bce341c829709f171e5">llvm::BasicBlock::iterator</a></div><div class="ttdeci">InstListType::iterator iterator</div><div class="ttdoc">Instruction iterators...</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00087">BasicBlock.h:87</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstructionCombiningPass_html_a5acf47fe333b314ccdb4c0a26f39db97"><div class="ttname"><a href="classllvm_1_1InstructionCombiningPass.html#a5acf47fe333b314ccdb4c0a26f39db97">llvm::InstructionCombiningPass::getAnalysisUsage</a></div><div class="ttdeci">void getAnalysisUsage(AnalysisUsage &amp;AU) const override</div><div class="ttdoc">getAnalysisUsage - This function should be overriden by passes that need analysis information to do t...</div><div class="ttdef"><b>Definition:</b> <a href="InstructionCombining_8cpp_source.html#l04682">InstructionCombining.cpp:4682</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_ac5d3cfa0755b34bcbd3f2298e9fa28ed"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#ac5d3cfa0755b34bcbd3f2298e9fa28ed">llvm::InstCombinerImpl::run</a></div><div class="ttdeci">bool run()</div><div class="ttdoc">Run the combiner over the entire worklist until it is empty.</div><div class="ttdef"><b>Definition:</b> <a href="InstructionCombining_8cpp_source.html#l04199">InstructionCombining.cpp:4199</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a38bee869ad41aebfef3de2641b12004c"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a38bee869ad41aebfef3de2641b12004c">llvm::BasicBlock::getParent</a></div><div class="ttdeci">const Function * getParent() const</div><div class="ttdoc">Return the enclosing method, or null if none.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00112">BasicBlock.h:112</a></div></div>
<div class="ttc" id="anamespacellvm_html_a5d56157a385f8cd7d3e54ed87da1ba6aa4d1f6c49eb4a44a6cc14725ba0cfe658"><div class="ttname"><a href="namespacellvm.html#a5d56157a385f8cd7d3e54ed87da1ba6aa4d1f6c49eb4a44a6cc14725ba0cfe658">llvm::EHPersonality::GNU_Ada</a></div><div class="ttdeci">@ GNU_Ada</div></div>
<div class="ttc" id="aIntrinsicInst_8h_html"><div class="ttname"><a href="IntrinsicInst_8h.html">IntrinsicInst.h</a></div></div>
<div class="ttc" id="astructllvm_1_1SimplifyQuery_html"><div class="ttname"><a href="structllvm_1_1SimplifyQuery.html">llvm::SimplifyQuery</a></div><div class="ttdef"><b>Definition:</b> <a href="InstructionSimplify_8h_source.html#l00093">InstructionSimplify.h:93</a></div></div>
<div class="ttc" id="aclassllvm_1_1DIBuilder_html"><div class="ttname"><a href="classllvm_1_1DIBuilder.html">llvm::DIBuilder</a></div><div class="ttdef"><b>Definition:</b> <a href="DIBuilder_8h_source.html#l00042">DIBuilder.h:42</a></div></div>
<div class="ttc" id="agroup__LLVMCSupportTypes_html_gab1ca1ff855478bc0f33874a1182e4b94"><div class="ttname"><a href="group__LLVMCSupportTypes.html#gab1ca1ff855478bc0f33874a1182e4b94">LLVMPassRegistryRef</a></div><div class="ttdeci">struct LLVMOpaquePassRegistry * LLVMPassRegistryRef</div><div class="ttdef"><b>Definition:</b> <a href="Types_8h_source.html#l00130">Types.h:130</a></div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisManager_html_ab9d3d5412c20747fd0110a046604f09a"><div class="ttname"><a href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">llvm::AnalysisManager::getResult</a></div><div class="ttdeci">PassT::Result &amp; getResult(IRUnitT &amp;IR, ExtraArgTs... ExtraArgs)</div><div class="ttdoc">Get the result of an analysis pass for a given IR unit.</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00774">PassManager.h:774</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_a1b94928a51545cb29d3e46b8ad94cb72"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#a1b94928a51545cb29d3e46b8ad94cb72">llvm::InstCombinerImpl::foldBinOpIntoSelectOrPhi</a></div><div class="ttdeci">Instruction * foldBinOpIntoSelectOrPhi(BinaryOperator &amp;I)</div><div class="ttdoc">This is a convenience wrapper function for the above two functions.</div><div class="ttdef"><b>Definition:</b> <a href="InstructionCombining_8cpp_source.html#l01363">InstructionCombining.cpp:1363</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html"><div class="ttname"><a href="classllvm_1_1Function.html">llvm::Function</a></div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00059">Function.h:59</a></div></div>
<div class="ttc" id="aclassllvm_1_1Loop_html"><div class="ttname"><a href="classllvm_1_1Loop.html">llvm::Loop</a></div><div class="ttdoc">Represents a single loop in the control flow graph.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00547">LoopInfo.h:547</a></div></div>
<div class="ttc" id="aclassllvm_1_1Attribute_html"><div class="ttname"><a href="classllvm_1_1Attribute.html">llvm::Attribute</a></div><div class="ttdef"><b>Definition:</b> <a href="Attributes_8h_source.html#l00067">Attributes.h:67</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_aca14d9ec64ba4ab7fb2cef37c57d9ce4"><div class="ttname"><a href="classllvm_1_1APInt.html#aca14d9ec64ba4ab7fb2cef37c57d9ce4">llvm::APInt::ule</a></div><div class="ttdeci">bool ule(const APInt &amp;RHS) const</div><div class="ttdoc">Unsigned less or equal comparison.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l01128">APInt.h:1128</a></div></div>
<div class="ttc" id="aTargetFolder_8h_html"><div class="ttname"><a href="TargetFolder_8h.html">TargetFolder.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1IntrinsicInst_html_a7ff64b3625b6f9020556ed05a5f72af4"><div class="ttname"><a href="classllvm_1_1IntrinsicInst.html#a7ff64b3625b6f9020556ed05a5f72af4">llvm::IntrinsicInst::getIntrinsicID</a></div><div class="ttdeci">Intrinsic::ID getIntrinsicID() const</div><div class="ttdoc">Return the intrinsic ID of this intrinsic.</div><div class="ttdef"><b>Definition:</b> <a href="IntrinsicInst_8h_source.html#l00054">IntrinsicInst.h:54</a></div></div>
<div class="ttc" id="aclassllvm_1_1raw__string__ostream_html"><div class="ttname"><a href="classllvm_1_1raw__string__ostream.html">llvm::raw_string_ostream</a></div><div class="ttdoc">A raw_ostream that writes to an std::string.</div><div class="ttdef"><b>Definition:</b> <a href="raw__ostream_8h_source.html#l00642">raw_ostream.h:642</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a2069641f358ef416658a2f321ca19d74"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a2069641f358ef416658a2f321ca19d74">llvm::BasicBlock::instructionsWithoutDebug</a></div><div class="ttdeci">iterator_range&lt; filter_iterator&lt; BasicBlock::const_iterator, std::function&lt; bool(const Instruction &amp;)&gt; &gt; &gt; instructionsWithoutDebug(bool SkipPseudoOp=true) const</div><div class="ttdoc">Return a const iterator range over the instructions in the block, skipping any debug instructions.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00103">BasicBlock.cpp:103</a></div></div>
<div class="ttc" id="astructllvm_1_1PatternMatch_1_1m__SplatOrUndefMask_html"><div class="ttname"><a href="structllvm_1_1PatternMatch_1_1m__SplatOrUndefMask.html">llvm::PatternMatch::m_SplatOrUndefMask</a></div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01535">PatternMatch.h:1535</a></div></div>
<div class="ttc" id="aclassllvm_1_1BitCastInst_html"><div class="ttname"><a href="classllvm_1_1BitCastInst.html">llvm::BitCastInst</a></div><div class="ttdoc">This class represents a no-op cast from one type to another.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l05258">Instructions.h:5258</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_a679f36556ace611ccc56580cb497973a"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#a679f36556ace611ccc56580cb497973a">llvm::InstCombinerImpl::visitExtractValueInst</a></div><div class="ttdeci">Instruction * visitExtractValueInst(ExtractValueInst &amp;EV)</div><div class="ttdef"><b>Definition:</b> <a href="InstructionCombining_8cpp_source.html#l03349">InstructionCombining.cpp:3349</a></div></div>
<div class="ttc" id="alib_2Target_2README_8txt_html_a2a2df5a25b9c703e74e82b48a75d0c3d"><div class="ttname"><a href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a></div><div class="ttdeci">instcombine should handle this C2 when C1</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2README_8txt_source.html#l00263">README.txt:263</a></div></div>
<div class="ttc" id="aclassllvm_1_1ProfileSummaryInfo_html_a11d1c1af51bf81a6a9f8f5191b5e3cf2"><div class="ttname"><a href="classllvm_1_1ProfileSummaryInfo.html#a11d1c1af51bf81a6a9f8f5191b5e3cf2">llvm::ProfileSummaryInfo::hasProfileSummary</a></div><div class="ttdeci">bool hasProfileSummary() const</div><div class="ttdoc">Returns true if profile summary is available.</div><div class="ttdef"><b>Definition:</b> <a href="ProfileSummaryInfo_8h_source.html#l00069">ProfileSummaryInfo.h:69</a></div></div>
<div class="ttc" id="aGetElementPtrTypeIterator_8h_html"><div class="ttname"><a href="GetElementPtrTypeIterator_8h.html">GetElementPtrTypeIterator.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_ab8a7ef433279aabf7f30fa5504a4d4ef"><div class="ttname"><a href="namespacellvm.html#ab8a7ef433279aabf7f30fa5504a4d4ef">llvm::isGuaranteedNotToBeUndefOrPoison</a></div><div class="ttdeci">bool isGuaranteedNotToBeUndefOrPoison(const Value *V, AssumptionCache *AC=nullptr, const Instruction *CtxI=nullptr, const DominatorTree *DT=nullptr, unsigned Depth=0)</div><div class="ttdoc">Return true if this function can prove that V does not have undef bits and is never poison.</div><div class="ttdef"><b>Definition:</b> <a href="ValueTracking_8cpp_source.html#l05581">ValueTracking.cpp:5581</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a4abb39a66573f61fda80469faa5d861d"><div class="ttname"><a href="classllvm_1_1Type.html#a4abb39a66573f61fda80469faa5d861d">llvm::Type::getScalarType</a></div><div class="ttdeci">Type * getScalarType() const</div><div class="ttdoc">If this is a vector type, return the element type, otherwise return 'this'.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00341">Type.h:341</a></div></div>
<div class="ttc" id="anamespacellvm_html_a26e2a938b431eaa6eca2beaa96410c9d"><div class="ttname"><a href="namespacellvm.html#a26e2a938b431eaa6eca2beaa96410c9d">llvm::successors</a></div><div class="ttdeci">auto successors(const MachineBasicBlock *BB)</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l01265">MachineBasicBlock.h:1265</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVector_html"><div class="ttname"><a href="classllvm_1_1SmallVector.html">llvm::SmallVector</a></div><div class="ttdoc">This is a 'vector' (really, a variable-sized array), optimized for the case when the array is small.</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l01199">SmallVector.h:1199</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfo_html_a2c34992cf5a6125fc637fbde99b88890"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html#a2c34992cf5a6125fc637fbde99b88890">llvm::TargetTransformInfo::instCombineIntrinsic</a></div><div class="ttdeci">std::optional&lt; Instruction * &gt; instCombineIntrinsic(InstCombiner &amp;IC, IntrinsicInst &amp;II) const</div><div class="ttdoc">Targets can implement their own combinations for target-specific intrinsics.</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8cpp_source.html#l00320">TargetTransformInfo.cpp:320</a></div></div>
<div class="ttc" id="aStatistic_8h_html"><div class="ttname"><a href="Statistic_8h.html">Statistic.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_aa9ef2dbd1b7ce921093f7d4a7bd4cc5c"><div class="ttname"><a href="namespacellvm.html#aa9ef2dbd1b7ce921093f7d4a7bd4cc5c">llvm::isAssignmentTrackingEnabled</a></div><div class="ttdeci">bool isAssignmentTrackingEnabled(const Module &amp;M)</div><div class="ttdoc">Return true if assignment tracking is enabled for module M.</div><div class="ttdef"><b>Definition:</b> <a href="DebugInfo_8cpp_source.html#l02037">DebugInfo.cpp:2037</a></div></div>
<div class="ttc" id="astructllvm_1_1PatternMatch_1_1m__SpecificMask_html"><div class="ttname"><a href="structllvm_1_1PatternMatch_1_1m__SpecificMask.html">llvm::PatternMatch::m_SpecificMask</a></div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01529">PatternMatch.h:1529</a></div></div>
<div class="ttc" id="aclassllvm_1_1LandingPadInst_html"><div class="ttname"><a href="classllvm_1_1LandingPadInst.html">llvm::LandingPadInst</a></div><div class="ttdoc">The landingpad instruction holds all of the information necessary to generate correct exception handl...</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02956">Instructions.h:2956</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a944c25ac9b73b02a17a20a08a25b9b21"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a944c25ac9b73b02a17a20a08a25b9b21">llvm::PatternMatch::m_Add</a></div><div class="ttdeci">BinaryOp_match&lt; LHS, RHS, Instruction::Add &gt; m_Add(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00979">PatternMatch.h:979</a></div></div>
<div class="ttc" id="anamespacellvm_html_a7b2175e18ff52174fad26b6b68818564"><div class="ttname"><a href="namespacellvm.html#a7b2175e18ff52174fad26b6b68818564">llvm::enumerate</a></div><div class="ttdeci">detail::enumerator&lt; R &gt; enumerate(R &amp;&amp;TheRange)</div><div class="ttdoc">Given an input range, returns a new range whose values are are pair (A,B) such that A is the 0-based ...</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l02264">STLExtras.h:2264</a></div></div>
<div class="ttc" id="aclassllvm_1_1FunctionPass_html_af9f5f511d75e16f09a5520cb9444cfa8"><div class="ttname"><a href="classllvm_1_1FunctionPass.html#af9f5f511d75e16f09a5520cb9444cfa8">llvm::FunctionPass::skipFunction</a></div><div class="ttdeci">bool skipFunction(const Function &amp;F) const</div><div class="ttdoc">Optional passes call this function to check whether the pass should be skipped.</div><div class="ttdef"><b>Definition:</b> <a href="Pass_8cpp_source.html#l00174">Pass.cpp:174</a></div></div>
<div class="ttc" id="aSupport_2ErrorHandling_8h_html"><div class="ttname"><a href="Support_2ErrorHandling_8h.html">ErrorHandling.h</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_af4feec45578e32fe65d8efc59112bc8e"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#af4feec45578e32fe65d8efc59112bc8e">llvm::PatternMatch::m_CombineOr</a></div><div class="ttdeci">match_combine_or&lt; LTy, RTy &gt; m_CombineOr(const LTy &amp;L, const RTy &amp;R)</div><div class="ttdoc">Combine two pattern matchers matching L || R.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00218">PatternMatch.h:218</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfo_html"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html">llvm::TargetTransformInfo</a></div><div class="ttdoc">This pass provides access to the codegen interfaces that are needed for IR-level transformations.</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l00196">TargetTransformInfo.h:196</a></div></div>
<div class="ttc" id="aLazyBlockFrequencyInfo_8h_html"><div class="ttname"><a href="LazyBlockFrequencyInfo_8h.html">LazyBlockFrequencyInfo.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a5ab2d0b0f0b8ceec3b907184e7567197"><div class="ttname"><a href="classllvm_1_1Type.html#a5ab2d0b0f0b8ceec3b907184e7567197">llvm::Type::getPointerAddressSpace</a></div><div class="ttdeci">unsigned getPointerAddressSpace() const</div><div class="ttdoc">Get the address space of this pointer or pointer vector type.</div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00729">DerivedTypes.h:729</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html_ae6a4da5f41fc6a36735cc1704c01ce60"><div class="ttname"><a href="classllvm_1_1Function.html#ae6a4da5f41fc6a36735cc1704c01ce60">llvm::Function::getEntryBlock</a></div><div class="ttdeci">const BasicBlock &amp; getEntryBlock() const</div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00735">Function.h:735</a></div></div>
<div class="ttc" id="aclassllvm_1_1IRBuilder_html"><div class="ttname"><a href="classllvm_1_1IRBuilder.html">llvm::IRBuilder&lt; TargetFolder, IRBuilderCallbackInserter &gt;</a></div></div>
<div class="ttc" id="aclassllvm_1_1InsertValueInst_html_a40315c7d4fb418dd3c967898ee070f40"><div class="ttname"><a href="classllvm_1_1InsertValueInst.html#a40315c7d4fb418dd3c967898ee070f40">llvm::InsertValueInst::Create</a></div><div class="ttdeci">static InsertValueInst * Create(Value *Agg, Value *Val, ArrayRef&lt; unsigned &gt; Idxs, const Twine &amp;NameStr=&quot;&quot;, Instruction *InsertBefore=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02605">Instructions.h:2605</a></div></div>
<div class="ttc" id="aInstructionCombining_8cpp_html_ac58ed8dba579141f3f64a3d16224e79c"><div class="ttname"><a href="InstructionCombining_8cpp.html#ac58ed8dba579141f3f64a3d16224e79c">getBinOpsForFactorization</a></div><div class="ttdeci">static Instruction::BinaryOps getBinOpsForFactorization(Instruction::BinaryOps TopOpcode, BinaryOperator *Op, Value *&amp;LHS, Value *&amp;RHS)</div><div class="ttdoc">This function predicates factorization using distributive laws.</div><div class="ttdef"><b>Definition:</b> <a href="InstructionCombining_8cpp_source.html#l00619">InstructionCombining.cpp:619</a></div></div>
<div class="ttc" id="aclassllvm_1_1CastInst_html_a643fe5a9e7042f032dae78109c2b1e72"><div class="ttname"><a href="classllvm_1_1CastInst.html#a643fe5a9e7042f032dae78109c2b1e72">llvm::CastInst::Create</a></div><div class="ttdeci">static CastInst * Create(Instruction::CastOps, Value *S, Type *Ty, const Twine &amp;Name=&quot;&quot;, Instruction *InsertBefore=nullptr)</div><div class="ttdoc">Provides a way to construct any of the CastInst subclasses using an opcode instead of the subclass's ...</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l03354">Instructions.cpp:3354</a></div></div>
<div class="ttc" id="aclassllvm_1_1PointerType_html_af8aeced5e71d2589fa3e9791043af5cb"><div class="ttname"><a href="classllvm_1_1PointerType.html#af8aeced5e71d2589fa3e9791043af5cb">llvm::PointerType::getAddressSpace</a></div><div class="ttdeci">unsigned getAddressSpace() const</div><div class="ttdoc">Return the address space of the Pointer type.</div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00682">DerivedTypes.h:682</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">llvm::CmpInst::ICMP_NE</a></div><div class="ttdeci">@ ICMP_NE</div><div class="ttdoc">not equal</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00740">InstrTypes.h:740</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_aa2a54b545d237ecfe450fd1292f7675e"><div class="ttname"><a href="classllvm_1_1CmpInst.html#aa2a54b545d237ecfe450fd1292f7675e">llvm::CmpInst::getInversePredicate</a></div><div class="ttdeci">Predicate getInversePredicate() const</div><div class="ttdoc">For example, EQ -&gt; NE, UGT -&gt; ULE, SLT -&gt; SGE, OEQ -&gt; UNE, UGT -&gt; OLE, OLT -&gt; UGE,...</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00832">InstrTypes.h:832</a></div></div>
<div class="ttc" id="anamespacellvm_html_a683448397460b5b16e0d9016fd7a273a"><div class="ttname"><a href="namespacellvm.html#a683448397460b5b16e0d9016fd7a273a">llvm::findDbgUsers</a></div><div class="ttdeci">void findDbgUsers(SmallVectorImpl&lt; DbgVariableIntrinsic * &gt; &amp;DbgInsts, Value *V)</div><div class="ttdoc">Finds the debug info intrinsics describing a value.</div><div class="ttdef"><b>Definition:</b> <a href="DebugInfo_8cpp_source.html#l00105">DebugInfo.cpp:105</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_a2511e442d198696042ad2a39cad89059"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#a2511e442d198696042ad2a39cad89059">llvm::InstCombinerImpl::foldUsingDistributiveLaws</a></div><div class="ttdeci">Value * foldUsingDistributiveLaws(BinaryOperator &amp;I)</div><div class="ttdoc">Tries to simplify binary operations which some other binary operation distributes over.</div><div class="ttdef"><b>Definition:</b> <a href="InstructionCombining_8cpp_source.html#l00778">InstructionCombining.cpp:778</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantRange_html_a1616515fc811646b8cc5e6625e36b954"><div class="ttname"><a href="classllvm_1_1ConstantRange.html#a1616515fc811646b8cc5e6625e36b954">llvm::ConstantRange::getEquivalentICmp</a></div><div class="ttdeci">bool getEquivalentICmp(CmpInst::Predicate &amp;Pred, APInt &amp;RHS) const</div><div class="ttdoc">Set up Pred and RHS such that ConstantRange::makeExactICmpRegion(Pred, RHS) == *this.</div><div class="ttdef"><b>Definition:</b> <a href="ConstantRange_8cpp_source.html#l00235">ConstantRange.cpp:235</a></div></div>
<div class="ttc" id="aValueTracking_8h_html"><div class="ttname"><a href="ValueTracking_8h.html">ValueTracking.h</a></div></div>
<div class="ttc" id="aTransforms_2Utils_2Local_8h_html"><div class="ttname"><a href="Transforms_2Utils_2Local_8h.html">Local.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfo_html_a3c63492d1e619b740c6e6d123efeb4f8"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html#a3c63492d1e619b740c6e6d123efeb4f8">llvm::TargetTransformInfo::simplifyDemandedVectorEltsIntrinsic</a></div><div class="ttdeci">std::optional&lt; Value * &gt; simplifyDemandedVectorEltsIntrinsic(InstCombiner &amp;IC, IntrinsicInst &amp;II, APInt DemandedElts, APInt &amp;UndefElts, APInt &amp;UndefElts2, APInt &amp;UndefElts3, std::function&lt; void(Instruction *, unsigned, APInt, APInt &amp;)&gt; SimplifyAndSetOp) const</div><div class="ttdoc">Can be used to implement target-specific instruction combining.</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8cpp_source.html#l00332">TargetTransformInfo.cpp:332</a></div></div>
<div class="ttc" id="aOptimizationRemarkEmitter_8h_html"><div class="ttname"><a href="OptimizationRemarkEmitter_8h.html">OptimizationRemarkEmitter.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1DominatorTree_html"><div class="ttname"><a href="classllvm_1_1DominatorTree.html">llvm::DominatorTree</a></div><div class="ttdoc">Concrete subclass of DominatorTreeBase that is used to compute a normal dominator tree.</div><div class="ttdef"><b>Definition:</b> <a href="Dominators_8h_source.html#l00166">Dominators.h:166</a></div></div>
<div class="ttc" id="aGlobalsModRef_8h_html"><div class="ttname"><a href="GlobalsModRef_8h.html">GlobalsModRef.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstructionWorklist_html_afcc3810424bae0ed10e2cb24cf438227"><div class="ttname"><a href="classllvm_1_1InstructionWorklist.html#afcc3810424bae0ed10e2cb24cf438227">llvm::InstructionWorklist::reserve</a></div><div class="ttdeci">void reserve(size_t Size)</div><div class="ttdef"><b>Definition:</b> <a href="InstructionWorklist_8h_source.html#l00079">InstructionWorklist.h:79</a></div></div>
<div class="ttc" id="anamespacellvm_1_1cl_html_a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6"><div class="ttname"><a href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">llvm::cl::Hidden</a></div><div class="ttdeci">@ Hidden</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00138">CommandLine.h:138</a></div></div>
<div class="ttc" id="aclassllvm_1_1NoAliasScopeDeclInst_html_a34e047de6b81bfbcd8a2ce7ae04d97b4"><div class="ttname"><a href="classllvm_1_1NoAliasScopeDeclInst.html#a34e047de6b81bfbcd8a2ce7ae04d97b4">llvm::NoAliasScopeDeclInst::getScopeList</a></div><div class="ttdeci">MDNode * getScopeList() const</div><div class="ttdef"><b>Definition:</b> <a href="IntrinsicInst_8h_source.html#l01439">IntrinsicInst.h:1439</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a4fd27a44c5fd9958fdd9150622129cd3"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a4fd27a44c5fd9958fdd9150622129cd3">llvm::PatternMatch::m_Br</a></div><div class="ttdeci">brc_match&lt; Cond_t, bind_ty&lt; BasicBlock &gt;, bind_ty&lt; BasicBlock &gt; &gt; m_Br(const Cond_t &amp;C, BasicBlock *&amp;T, BasicBlock *&amp;F)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01731">PatternMatch.h:1731</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombiner_html_a4bc1fafcc9582581002518df62792214"><div class="ttname"><a href="classllvm_1_1InstCombiner.html#a4bc1fafcc9582581002518df62792214">llvm::InstCombiner::MaxArraySizeForCombine</a></div><div class="ttdeci">uint64_t MaxArraySizeForCombine</div><div class="ttdoc">Maximum size of array considered when transforming.</div><div class="ttdef"><b>Definition:</b> <a href="InstCombiner_8h_source.html#l00053">InstCombiner.h:53</a></div></div>
<div class="ttc" id="aAPInt_8h_html"><div class="ttname"><a href="APInt_8h.html">APInt.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_af59c587eddc75748a1e201369cd3dbac"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#af59c587eddc75748a1e201369cd3dbac">llvm::InstCombinerImpl::freezeOtherUses</a></div><div class="ttdeci">bool freezeOtherUses(FreezeInst &amp;FI)</div><div class="ttdef"><b>Definition:</b> <a href="InstructionCombining_8cpp_source.html#l03932">InstructionCombining.cpp:3932</a></div></div>
<div class="ttc" id="aclassllvm_1_1LazyBlockFrequencyInfoPass_html_a8969b22606511eb0e2b2e028a3c0f332"><div class="ttname"><a href="classllvm_1_1LazyBlockFrequencyInfoPass.html#a8969b22606511eb0e2b2e028a3c0f332">llvm::LazyBlockFrequencyInfoPass::getLazyBFIAnalysisUsage</a></div><div class="ttdeci">static void getLazyBFIAnalysisUsage(AnalysisUsage &amp;AU)</div><div class="ttdoc">Helper for client passes to set up the analysis usage on behalf of this pass.</div><div class="ttdef"><b>Definition:</b> <a href="LazyBlockFrequencyInfo_8cpp_source.html#l00062">LazyBlockFrequencyInfo.cpp:62</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstructionCombiningPass_html_a0dd4dac14ef239990364482706fd75f3"><div class="ttname"><a href="classllvm_1_1InstructionCombiningPass.html#a0dd4dac14ef239990364482706fd75f3">llvm::InstructionCombiningPass::InstructionCombiningPass</a></div><div class="ttdeci">InstructionCombiningPass()</div><div class="ttdef"><b>Definition:</b> <a href="InstructionCombining_8cpp_source.html#l04726">InstructionCombining.cpp:4726</a></div></div>
<div class="ttc" id="anamespacellvm_html_a27faf96484ade7c93b43abca300a24e5"><div class="ttname"><a href="namespacellvm.html#a27faf96484ade7c93b43abca300a24e5">llvm::simplifyInstructionWithOperands</a></div><div class="ttdeci">Value * simplifyInstructionWithOperands(Instruction *I, ArrayRef&lt; Value * &gt; NewOps, const SimplifyQuery &amp;Q, OptimizationRemarkEmitter *ORE=nullptr)</div><div class="ttdoc">Like simplifyInstruction but the operands of I are replaced with NewOps.</div><div class="ttdef"><b>Definition:</b> <a href="InstructionSimplify_8cpp_source.html#l06722">InstructionSimplify.cpp:6722</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html"><div class="ttname"><a href="classllvm_1_1Type.html">llvm::Type</a></div><div class="ttdoc">The instances of the Type class are immutable: once they are created, they are never changed.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00045">Type.h:45</a></div></div>
<div class="ttc" id="aDetailedRecordsBackend_8cpp_html_a4fc34b120ed3bd1120c1eb36abbcd6af"><div class="ttname"><a href="DetailedRecordsBackend_8cpp.html#a4fc34b120ed3bd1120c1eb36abbcd6af">NL</a></div><div class="ttdeci">#define NL</div><div class="ttdef"><b>Definition:</b> <a href="DetailedRecordsBackend_8cpp_source.html#l00031">DetailedRecordsBackend.cpp:31</a></div></div>
<div class="ttc" id="aDenseMap_8h_html"><div class="ttname"><a href="DenseMap_8h.html">DenseMap.h</a></div></div>
<div class="ttc" id="astructllvm_1_1KnownBits_html_a8d63403d41c0e32f1ded472d8ec26e37"><div class="ttname"><a href="structllvm_1_1KnownBits.html#a8d63403d41c0e32f1ded472d8ec26e37">llvm::KnownBits::getConstant</a></div><div class="ttdeci">const APInt &amp; getConstant() const</div><div class="ttdoc">Returns the value when all bits have a known value.</div><div class="ttdef"><b>Definition:</b> <a href="KnownBits_8h_source.html#l00057">KnownBits.h:57</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_a512fe2c15ea651294688eeec1341644c"><div class="ttname"><a href="classllvm_1_1APInt.html#a512fe2c15ea651294688eeec1341644c">llvm::APInt::getBitWidth</a></div><div class="ttdeci">unsigned getBitWidth() const</div><div class="ttdoc">Return the number of bits in the APInt.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l01439">APInt.h:1439</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_ae289e620828eabb1dfe34c9ad322a81d"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#ae289e620828eabb1dfe34c9ad322a81d">llvm::InstCombinerImpl::visitAllocSite</a></div><div class="ttdeci">Instruction * visitAllocSite(Instruction &amp;FI)</div><div class="ttdef"><b>Definition:</b> <a href="InstructionCombining_8cpp_source.html#l02849">InstructionCombining.cpp:2849</a></div></div>
<div class="ttc" id="aMemoryBuiltins_8h_html"><div class="ttname"><a href="MemoryBuiltins_8h.html">MemoryBuiltins.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_a4ff10451ba01dc08fc0d38983c6743b7"><div class="ttname"><a href="namespacellvm.html#a4ff10451ba01dc08fc0d38983c6743b7">llvm::getReallocatedOperand</a></div><div class="ttdeci">Value * getReallocatedOperand(const CallBase *CB)</div><div class="ttdoc">If this is a call to a realloc function, return the reallocated operand.</div><div class="ttdef"><b>Definition:</b> <a href="MemoryBuiltins_8cpp_source.html#l00324">MemoryBuiltins.cpp:324</a></div></div>
<div class="ttc" id="aInstructionCombining_8cpp_html_adb5b11056d2ccf65787e4fce55fbc79f"><div class="ttname"><a href="InstructionCombining_8cpp.html#adb5b11056d2ccf65787e4fce55fbc79f">tryFactorization</a></div><div class="ttdeci">static Value * tryFactorization(BinaryOperator &amp;I, const SimplifyQuery &amp;SQ, InstCombiner::BuilderTy &amp;Builder, Instruction::BinaryOps InnerOpcode, Value *A, Value *B, Value *C, Value *D)</div><div class="ttdoc">This tries to simplify binary operations by factorizing out common terms (e.</div><div class="ttdef"><b>Definition:</b> <a href="InstructionCombining_8cpp_source.html#l00638">InstructionCombining.cpp:638</a></div></div>
<div class="ttc" id="aclassllvm_1_1AttributeList_html"><div class="ttname"><a href="classllvm_1_1AttributeList.html">llvm::AttributeList</a></div><div class="ttdef"><b>Definition:</b> <a href="Attributes_8h_source.html#l00432">Attributes.h:432</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallBase_html_ae0c55761fce39dd71617690b04385193"><div class="ttname"><a href="classllvm_1_1CallBase.html#ae0c55761fce39dd71617690b04385193">llvm::CallBase::getAttributes</a></div><div class="ttdeci">AttributeList getAttributes() const</div><div class="ttdoc">Return the parameter attributes for this call.</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l01484">InstrTypes.h:1484</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_ac5984d6827f6e6922bed00bf03ba9552"><div class="ttname"><a href="classllvm_1_1Instruction.html#ac5984d6827f6e6922bed00bf03ba9552">llvm::Instruction::isShift</a></div><div class="ttdeci">bool isShift() const</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00175">Instruction.h:175</a></div></div>
<div class="ttc" id="aEHPersonalities_8h_html"><div class="ttname"><a href="EHPersonalities_8h.html">EHPersonalities.h</a></div></div>
<div class="ttc" id="aInstructionCombining_8cpp_html_a23b2990438f0256e1ae6c1141315aa4a"><div class="ttname"><a href="InstructionCombining_8cpp.html#a23b2990438f0256e1ae6c1141315aa4a">InfiniteLoopDetectionThreshold</a></div><div class="ttdeci">static cl::opt&lt; unsigned &gt; InfiniteLoopDetectionThreshold(&quot;instcombine-infinite-loop-threshold&quot;, cl::desc(&quot;Number of instruction combining iterations considered an &quot; &quot;infinite loop&quot;), cl::init(InstCombineDefaultInfiniteLoopThreshold), cl::Hidden)</div></div>
<div class="ttc" id="aclassllvm_1_1SmallSet_html"><div class="ttname"><a href="classllvm_1_1SmallSet.html">llvm::SmallSet</a></div><div class="ttdoc">SmallSet - This maintains a set of unique values, optimizing for the case when the set is small (less...</div><div class="ttdef"><b>Definition:</b> <a href="SmallSet_8h_source.html#l00135">SmallSet.h:135</a></div></div>
<div class="ttc" id="aclassllvm_1_1ExtractValueInst_html_ae7f10273fba575e1cb0379621c5330ad"><div class="ttname"><a href="classllvm_1_1ExtractValueInst.html#ae7f10273fba575e1cb0379621c5330ad">llvm::ExtractValueInst::indices</a></div><div class="ttdeci">iterator_range&lt; idx_iterator &gt; indices() const</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02506">Instructions.h:2506</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombiner_html_aaeec6d7b5f74d07ed6e0e15fc652e327"><div class="ttname"><a href="classllvm_1_1InstCombiner.html#aaeec6d7b5f74d07ed6e0e15fc652e327">llvm::InstCombiner::targetInstCombineIntrinsic</a></div><div class="ttdeci">std::optional&lt; Instruction * &gt; targetInstCombineIntrinsic(IntrinsicInst &amp;II)</div><div class="ttdef"><b>Definition:</b> <a href="InstructionCombining_8cpp_source.html#l00173">InstructionCombining.cpp:173</a></div></div>
<div class="ttc" id="aclassllvm_1_1MemIntrinsic_html"><div class="ttname"><a href="classllvm_1_1MemIntrinsic.html">llvm::MemIntrinsic</a></div><div class="ttdoc">This is the common base class for memset/memcpy/memmove.</div><div class="ttdef"><b>Definition:</b> <a href="IntrinsicInst_8h_source.html#l01048">IntrinsicInst.h:1048</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a43ac4fbaaf63a88eb5ac05f6d3e5649c"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a43ac4fbaaf63a88eb5ac05f6d3e5649c">llvm::PatternMatch::m_BinOp</a></div><div class="ttdeci">class_match&lt; BinaryOperator &gt; m_BinOp()</div><div class="ttdoc">Match an arbitrary binary operation and ignore it.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00084">PatternMatch.h:84</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSet_html"><div class="ttname"><a href="classllvm_1_1SmallPtrSet.html">llvm::SmallPtrSet&lt; Value *, 16 &gt;</a></div></div>
<div class="ttc" id="anamespacellvm_1_1ore_html_a8f5533240c6722d987a2443cba42019d"><div class="ttname"><a href="namespacellvm_1_1ore.html#a8f5533240c6722d987a2443cba42019d">llvm::ore::NV</a></div><div class="ttdeci">DiagnosticInfoOptimizationBase::Argument NV</div><div class="ttdef"><b>Definition:</b> <a href="OptimizationRemarkEmitter_8h_source.html#l00136">OptimizationRemarkEmitter.h:136</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a64153676e101a130bbbaaf91635d253a"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a64153676e101a130bbbaaf91635d253a">llvm::PatternMatch::m_AShr</a></div><div class="ttdeci">BinaryOp_match&lt; LHS, RHS, Instruction::AShr &gt; m_AShr(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01123">PatternMatch.h:1123</a></div></div>
<div class="ttc" id="aInstructionCombining_8cpp_html_a42ac274c4dac68dda60e1d52a572b734"><div class="ttname"><a href="InstructionCombining_8cpp.html#a42ac274c4dac68dda60e1d52a572b734">isMustTailCall</a></div><div class="ttdeci">static bool isMustTailCall(Value *V)</div><div class="ttdef"><b>Definition:</b> <a href="InstructionCombining_8cpp_source.html#l03092">InstructionCombining.cpp:3092</a></div></div>
<div class="ttc" id="aOperator_8h_html"><div class="ttname"><a href="Operator_8h.html">Operator.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_a7228e6e33365005e35035cd8141e8aa9"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#a7228e6e33365005e35035cd8141e8aa9">llvm::InstCombinerImpl::Descale</a></div><div class="ttdeci">Value * Descale(Value *Val, APInt Scale, bool &amp;NoSignedWrap)</div><div class="ttdoc">Returns a value X such that Val = X * Scale, or null if none.</div><div class="ttdef"><b>Definition:</b> <a href="InstructionCombining_8cpp_source.html#l01411">InstructionCombining.cpp:1411</a></div></div>
<div class="ttc" id="anamespacellvm_html_ab4d4bc901fedd8857f647dcc2c0d71de"><div class="ttname"><a href="namespacellvm.html#ab4d4bc901fedd8857f647dcc2c0d71de">llvm::max</a></div><div class="ttdeci">Expected&lt; ExpressionValue &gt; max(const ExpressionValue &amp;Lhs, const ExpressionValue &amp;Rhs)</div><div class="ttdef"><b>Definition:</b> <a href="FileCheck_8cpp_source.html#l00337">FileCheck.cpp:337</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a59fb91d1691350f7d1b8e8a114e3f2a4"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a59fb91d1691350f7d1b8e8a114e3f2a4">llvm::BasicBlock::getSinglePredecessor</a></div><div class="ttdeci">const BasicBlock * getSinglePredecessor() const</div><div class="ttdoc">Return the predecessor of this block if it has a single predecessor block.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00284">BasicBlock.cpp:284</a></div></div>
<div class="ttc" id="aAMDGPURegBankSelect_8cpp_html_a14e0c000ed52e5fc187d4a885914cc1a"><div class="ttname"><a href="AMDGPURegBankSelect_8cpp.html#a14e0c000ed52e5fc187d4a885914cc1a">Select</a></div><div class="ttdeci">amdgpu AMDGPU Register Bank Select</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPURegBankSelect_8cpp_source.html#l00045">AMDGPURegBankSelect.cpp:45</a></div></div>
<div class="ttc" id="aX86PartialReduction_8cpp_html_a87b8bfbbe9d8f7146d7f20a5fb42efd0"><div class="ttname"><a href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a></div><div class="ttdeci">Value * RHS</div><div class="ttdef"><b>Definition:</b> <a href="X86PartialReduction_8cpp_source.html#l00076">X86PartialReduction.cpp:76</a></div></div>
<div class="ttc" id="agroup__LLVMCInitialization_html_gaf7d731d72d80afb7917f7cd548da8298"><div class="ttname"><a href="group__LLVMCInitialization.html#gaf7d731d72d80afb7917f7cd548da8298">LLVMInitializeInstCombine</a></div><div class="ttdeci">void LLVMInitializeInstCombine(LLVMPassRegistryRef R)</div><div class="ttdef"><b>Definition:</b> <a href="InstructionCombining_8cpp_source.html#l04755">InstructionCombining.cpp:4755</a></div></div>
<div class="ttc" id="aclassllvm_1_1ArrayType_html"><div class="ttname"><a href="classllvm_1_1ArrayType.html">llvm::ArrayType</a></div><div class="ttdoc">Class to represent array types.</div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00357">DerivedTypes.h:357</a></div></div>
<div class="ttc" id="aclassllvm_1_1BinaryOperator_html_a19cdbeffd437228c47a4410a4ed34aca"><div class="ttname"><a href="classllvm_1_1BinaryOperator.html#a19cdbeffd437228c47a4410a4ed34aca">llvm::BinaryOperator::CreateNeg</a></div><div class="ttdeci">NUW NUW NUW NUW Exact static Exact BinaryOperator * CreateNeg(Value *Op, const Twine &amp;Name=&quot;&quot;, Instruction *InsertBefore=nullptr)</div><div class="ttdoc">Helper functions to construct and inspect unary operations (NEG and NOT) via binary operators SUB and...</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l02966">Instructions.cpp:2966</a></div></div>
<div class="ttc" id="anamespacellvm_html_ac828b9b52935f87659a4adf237f820a3"><div class="ttname"><a href="namespacellvm.html#ac828b9b52935f87659a4adf237f820a3">llvm::gep_type_begin</a></div><div class="ttdeci">gep_type_iterator gep_type_begin(const User *GEP)</div><div class="ttdef"><b>Definition:</b> <a href="GetElementPtrTypeIterator_8h_source.html#l00123">GetElementPtrTypeIterator.h:123</a></div></div>
<div class="ttc" id="aclassllvm_1_1FastMathFlags_html"><div class="ttname"><a href="classllvm_1_1FastMathFlags.html">llvm::FastMathFlags</a></div><div class="ttdoc">Convenience struct for specifying and reasoning about fast-math flags.</div><div class="ttdef"><b>Definition:</b> <a href="FMF_8h_source.html#l00021">FMF.h:21</a></div></div>
<div class="ttc" id="aclassBaseType_html"><div class="ttname"><a href="classBaseType.html">BaseType</a></div></div>
<div class="ttc" id="anamespacellvm_html_a126a78caf2176eb39d879c899bdd749c"><div class="ttname"><a href="namespacellvm.html#a126a78caf2176eb39d879c899bdd749c">llvm::succ_empty</a></div><div class="ttdeci">bool succ_empty(const Instruction *I)</div><div class="ttdef"><b>Definition:</b> <a href="IR_2CFG_8h_source.html#l00255">CFG.h:255</a></div></div>
<div class="ttc" id="aInstructionCombining_8cpp_html_abbd47852a13b73290f4625f20c9018d8"><div class="ttname"><a href="InstructionCombining_8cpp.html#abbd47852a13b73290f4625f20c9018d8">isRemovableWrite</a></div><div class="ttdeci">static bool isRemovableWrite(CallBase &amp;CB, Value *UsedV, const TargetLibraryInfo &amp;TLI)</div><div class="ttdoc">Given a call CB which uses an address UsedV, return true if we can prove the call's only possible eff...</div><div class="ttdef"><b>Definition:</b> <a href="InstructionCombining_8cpp_source.html#l02725">InstructionCombining.cpp:2725</a></div></div>
<div class="ttc" id="aBasicAliasAnalysis_8h_html"><div class="ttname"><a href="BasicAliasAnalysis_8h.html">BasicAliasAnalysis.h</a></div></div>
<div class="ttc" id="aLegacyPassManager_8h_html"><div class="ttname"><a href="LegacyPassManager_8h.html">LegacyPassManager.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_abceff71202e0269065cf32a2f750a9be"><div class="ttname"><a href="classllvm_1_1Type.html#abceff71202e0269065cf32a2f750a9be">llvm::Type::getNonOpaquePointerElementType</a></div><div class="ttdeci">Type * getNonOpaquePointerElementType() const</div><div class="ttdoc">Only use this method in code that is not reachable with opaque pointers, or part of deprecated method...</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00416">Type.h:416</a></div></div>
<div class="ttc" id="aConstantFolding_8h_html"><div class="ttname"><a href="ConstantFolding_8h.html">ConstantFolding.h</a></div></div>
<div class="ttc" id="aUse_8h_html"><div class="ttname"><a href="Use_8h.html">Use.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_a5d56157a385f8cd7d3e54ed87da1ba6aa395fbfe74c30a81fe4f743ba95964c86"><div class="ttname"><a href="namespacellvm.html#a5d56157a385f8cd7d3e54ed87da1ba6aa395fbfe74c30a81fe4f743ba95964c86">llvm::EHPersonality::GNU_ObjC</a></div><div class="ttdeci">@ GNU_ObjC</div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_a60dd597765e178719e8d4caf44ba3b64"><div class="ttname"><a href="classllvm_1_1APInt.html#a60dd597765e178719e8d4caf44ba3b64">llvm::APInt::isMinValue</a></div><div class="ttdeci">bool isMinValue() const</div><div class="ttdoc">Determine if this is the smallest unsigned value.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00409">APInt.h:409</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a30dd396c5b40cd86c1591872e574ccdf"><div class="ttname"><a href="classllvm_1_1Type.html#a30dd396c5b40cd86c1591872e574ccdf">llvm::Type::getInt32Ty</a></div><div class="ttdeci">static IntegerType * getInt32Ty(LLVMContext &amp;C)</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00241">Type.cpp:241</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinePass_html_a35e39a7ec3910c5a9d2037312783fb1c"><div class="ttname"><a href="classllvm_1_1InstCombinePass.html#a35e39a7ec3910c5a9d2037312783fb1c">llvm::InstCombinePass::InstCombinePass</a></div><div class="ttdeci">InstCombinePass()</div><div class="ttdef"><b>Definition:</b> <a href="InstructionCombining_8cpp_source.html#l04649">InstructionCombining.cpp:4649</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstructionWorklist_html_a7047d80c4bd7c774fccbd0293f7da341"><div class="ttname"><a href="classllvm_1_1InstructionWorklist.html#a7047d80c4bd7c774fccbd0293f7da341">llvm::InstructionWorklist::add</a></div><div class="ttdeci">void add(Instruction *I)</div><div class="ttdoc">Add instruction to the worklist.</div><div class="ttdef"><b>Definition:</b> <a href="InstructionWorklist_8h_source.html#l00044">InstructionWorklist.h:44</a></div></div>
<div class="ttc" id="aDebug_8h_html_a08efc68d15935eb8889400a46c3749ba"><div class="ttname"><a href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a></div><div class="ttdeci">#define LLVM_DEBUG(X)</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8h_source.html#l00101">Debug.h:101</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchInst_html_a6550fe5bd437c1c3c6e237d726e36b90"><div class="ttname"><a href="classllvm_1_1BranchInst.html#a6550fe5bd437c1c3c6e237d726e36b90">llvm::BranchInst::swapSuccessors</a></div><div class="ttdeci">void swapSuccessors()</div><div class="ttdoc">Swap the successors of this branch instruction.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l01427">Instructions.cpp:1427</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_ad36c0bc30660bad4f2b79be90608ea60"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#ad36c0bc30660bad4f2b79be90608ea60">llvm::InstCombinerImpl::SimplifySelectsFeedingBinaryOp</a></div><div class="ttdeci">Value * SimplifySelectsFeedingBinaryOp(BinaryOperator &amp;I, Value *LHS, Value *RHS)</div><div class="ttdef"><b>Definition:</b> <a href="InstructionCombining_8cpp_source.html#l00870">InstructionCombining.cpp:870</a></div></div>
<div class="ttc" id="aMD5_8cpp_html_a96d73bbd7af15cb1fc38c3f4a3bd82e9"><div class="ttname"><a href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a></div><div class="ttdeci">#define F(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00055">MD5.cpp:55</a></div></div>
<div class="ttc" id="anamespacellvm_html_aee2cbad0134e307a0d2f3dee1db34d7c"><div class="ttname"><a href="namespacellvm.html#aee2cbad0134e307a0d2f3dee1db34d7c">llvm::initializeInstCombine</a></div><div class="ttdeci">void initializeInstCombine(PassRegistry &amp;)</div><div class="ttdoc">Initialize all passes linked into the InstCombine library.</div><div class="ttdef"><b>Definition:</b> <a href="InstructionCombining_8cpp_source.html#l04751">InstructionCombining.cpp:4751</a></div></div>
<div class="ttc" id="aKnownBits_8h_html"><div class="ttname"><a href="KnownBits_8h.html">KnownBits.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1LazyBlockFrequencyInfoPass_html"><div class="ttname"><a href="classllvm_1_1LazyBlockFrequencyInfoPass.html">llvm::LazyBlockFrequencyInfoPass</a></div><div class="ttdoc">This is an alternative analysis pass to BlockFrequencyInfoWrapperPass.</div><div class="ttdef"><b>Definition:</b> <a href="LazyBlockFrequencyInfo_8h_source.html#l00098">LazyBlockFrequencyInfo.h:98</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html"><div class="ttname"><a href="classllvm_1_1BasicBlock.html">llvm::BasicBlock</a></div><div class="ttdoc">LLVM Basic Block Representation.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00055">BasicBlock.h:55</a></div></div>
<div class="ttc" id="anamespacellvm_html_a9442ed00a8dff89558d50f9c150951ff"><div class="ttname"><a href="namespacellvm.html#a9442ed00a8dff89558d50f9c150951ff">llvm::simplifyExtractValueInst</a></div><div class="ttdeci">Value * simplifyExtractValueInst(Value *Agg, ArrayRef&lt; unsigned &gt; Idxs, const SimplifyQuery &amp;Q)</div><div class="ttdoc">Given operands for an ExtractValueInst, fold the result or return null.</div><div class="ttdef"><b>Definition:</b> <a href="InstructionSimplify_8cpp_source.html#l04976">InstructionSimplify.cpp:4976</a></div></div>
<div class="ttc" id="aInstructionCombining_8cpp_html_a2b3700ceaf5c828fee30215dfcd63304"><div class="ttname"><a href="InstructionCombining_8cpp.html#a2b3700ceaf5c828fee30215dfcd63304">combineInstructionsOverFunction</a></div><div class="ttdeci">static bool combineInstructionsOverFunction(Function &amp;F, InstructionWorklist &amp;Worklist, AliasAnalysis *AA, AssumptionCache &amp;AC, TargetLibraryInfo &amp;TLI, TargetTransformInfo &amp;TTI, DominatorTree &amp;DT, OptimizationRemarkEmitter &amp;ORE, BlockFrequencyInfo *BFI, ProfileSummaryInfo *PSI, unsigned MaxIterations, LoopInfo *LI)</div><div class="ttdef"><b>Definition:</b> <a href="InstructionCombining_8cpp_source.html#l04581">InstructionCombining.cpp:4581</a></div></div>
<div class="ttc" id="anamespacellvm_html_a43c6ebb4fd35ebd815d66a2df4eed0b9"><div class="ttname"><a href="namespacellvm.html#a43c6ebb4fd35ebd815d66a2df4eed0b9">llvm::gep_type_end</a></div><div class="ttdeci">gep_type_iterator gep_type_end(const User *GEP)</div><div class="ttdef"><b>Definition:</b> <a href="GetElementPtrTypeIterator_8h_source.html#l00130">GetElementPtrTypeIterator.h:130</a></div></div>
<div class="ttc" id="aclassllvm_1_1MDNode_html_aa4068e37ec583962685e3567dc102ae5"><div class="ttname"><a href="classllvm_1_1MDNode.html#aa4068e37ec583962685e3567dc102ae5">llvm::MDNode::getNumOperands</a></div><div class="ttdeci">unsigned getNumOperands() const</div><div class="ttdoc">Return number of MDNode operands.</div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8h_source.html#l01297">Metadata.h:1297</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_a2cf3d604e1fd1a965cce4e5c70fe05ca"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#a2cf3d604e1fd1a965cce4e5c70fe05ca">llvm::InstCombinerImpl::visitUnreachableInst</a></div><div class="ttdeci">Instruction * visitUnreachableInst(UnreachableInst &amp;I)</div><div class="ttdef"><b>Definition:</b> <a href="InstructionCombining_8cpp_source.html#l03122">InstructionCombining.cpp:3122</a></div></div>
<div class="ttc" id="anamespacellvm_html_a4e09435caee07f636a47006fa08b9ec4"><div class="ttname"><a href="namespacellvm.html#a4e09435caee07f636a47006fa08b9ec4">llvm::UndefMaskElem</a></div><div class="ttdeci">constexpr int UndefMaskElem</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02005">Instructions.h:2005</a></div></div>
<div class="ttc" id="aAliasAnalysis_8h_html"><div class="ttname"><a href="AliasAnalysis_8h.html">AliasAnalysis.h</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_aca6428e7fec51ba0b55594f469eb9691"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">llvm::PatternMatch::m_OneUse</a></div><div class="ttdeci">OneUse_match&lt; T &gt; m_OneUse(const T &amp;SubPattern)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00067">PatternMatch.h:67</a></div></div>
<div class="ttc" id="anamespacellvm_html_a7c46c742c31be54870e2038048e6b391"><div class="ttname"><a href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">llvm::dbgs</a></div><div class="ttdeci">raw_ostream &amp; dbgs()</div><div class="ttdoc">dbgs() - This returns a reference to a raw_ostream for debugging messages.</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8cpp_source.html#l00163">Debug.cpp:163</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantExpr_html_a554ab77949b0a16670a83ec3307501eb"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#a554ab77949b0a16670a83ec3307501eb">llvm::ConstantExpr::getSub</a></div><div class="ttdeci">static Constant * getSub(Constant *C1, Constant *C2, bool HasNUW=false, bool HasNSW=false)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l02664">Constants.cpp:2664</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_aebf722c3ce9439ef88175255d8669080"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#aebf722c3ce9439ef88175255d8669080">llvm::InstCombinerImpl::tryFactorizationFolds</a></div><div class="ttdeci">Value * tryFactorizationFolds(BinaryOperator &amp;I)</div><div class="ttdoc">This tries to simplify binary operations by factorizing out common terms (e.</div><div class="ttdef"><b>Definition:</b> <a href="InstructionCombining_8cpp_source.html#l00735">InstructionCombining.cpp:735</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantExpr_html_ab00c6dc5086df2a37cd2e78715968861"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#ab00c6dc5086df2a37cd2e78715968861">llvm::ConstantExpr::get</a></div><div class="ttdeci">static Constant * get(unsigned Opcode, Constant *C1, Constant *C2, unsigned Flags=0, Type *OnlyIfReducedTy=nullptr)</div><div class="ttdoc">get - Return a binary or shift operator constant expression, folding if possible.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l02263">Constants.cpp:2263</a></div></div>
<div class="ttc" id="anamespacellvm_html_accaca14b419cbac91ca6170523084a04"><div class="ttname"><a href="namespacellvm.html#accaca14b419cbac91ca6170523084a04">llvm::isAllocationFn</a></div><div class="ttdeci">bool isAllocationFn(const Value *V, const TargetLibraryInfo *TLI)</div><div class="ttdoc">Tests if a value is a call or invoke to a library function that allocates or reallocates memory (eith...</div><div class="ttdef"><b>Definition:</b> <a href="MemoryBuiltins_8cpp_source.html#l00287">MemoryBuiltins.cpp:287</a></div></div>
<div class="ttc" id="anamespacellvm_html_a8d508f23e2580095561902c39911fb9b"><div class="ttname"><a href="namespacellvm.html#a8d508f23e2580095561902c39911fb9b">llvm::classifyEHPersonality</a></div><div class="ttdeci">EHPersonality classifyEHPersonality(const Value *Pers)</div><div class="ttdoc">See if the given exception handling personality function is one that we understand.</div><div class="ttdef"><b>Definition:</b> <a href="EHPersonalities_8cpp_source.html#l00022">EHPersonalities.cpp:22</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_a9317f2efaf85a4afc7cde58a2c0d734b"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#a9317f2efaf85a4afc7cde58a2c0d734b">llvm::InstCombinerImpl::foldBinopWithPhiOperands</a></div><div class="ttdeci">Instruction * foldBinopWithPhiOperands(BinaryOperator &amp;BO)</div><div class="ttdoc">For a binary operator with 2 phi operands, try to hoist the binary operation before the phi.</div><div class="ttdef"><b>Definition:</b> <a href="InstructionCombining_8cpp_source.html#l01297">InstructionCombining.cpp:1297</a></div></div>
<div class="ttc" id="anamespacellvm_1_1BitmaskEnumDetail_html_a91efa71de05b0c2d00730a0279f58658"><div class="ttname"><a href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">llvm::BitmaskEnumDetail::Mask</a></div><div class="ttdeci">constexpr std::underlying_type_t&lt; E &gt; Mask()</div><div class="ttdoc">Get a bitmask with 1s in all places up to the high-order bit of E's largest value.</div><div class="ttdef"><b>Definition:</b> <a href="BitmaskEnum_8h_source.html#l00080">BitmaskEnum.h:80</a></div></div>
<div class="ttc" id="aIR_2Instruction_8h_html"><div class="ttname"><a href="IR_2Instruction_8h.html">Instruction.h</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_aac9e78b3aa02ec087c4621358f506718"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">llvm::PatternMatch::m_APInt</a></div><div class="ttdeci">apint_match m_APInt(const APInt *&amp;Res)</div><div class="ttdoc">Match a ConstantInt or splatted ConstantVector, binding the specified pointer to the contained APInt.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00278">PatternMatch.h:278</a></div></div>
<div class="ttc" id="aCommandLine_8h_html"><div class="ttname"><a href="CommandLine_8h.html">CommandLine.h</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_ac56cd25f664c1497623d26158a6c5997"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#ac56cd25f664c1497623d26158a6c5997">llvm::PatternMatch::m_c_BinOp</a></div><div class="ttdeci">AnyBinaryOp_match&lt; LHS, RHS, true &gt; m_c_BinOp(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdoc">Matches a BinaryOperator with LHS and RHS in either order.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l02226">PatternMatch.h:2226</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantExpr_html_ae9c2f00a962cb8e0316cf3548a5d8029"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#ae9c2f00a962cb8e0316cf3548a5d8029">llvm::ConstantExpr::getBinOpIdentity</a></div><div class="ttdeci">static Constant * getBinOpIdentity(unsigned Opcode, Type *Ty, bool AllowRHSConstant=false, bool NSZ=false)</div><div class="ttdoc">Return the identity constant for a binary opcode.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l02741">Constants.cpp:2741</a></div></div>
<div class="ttc" id="aX86PartialReduction_8cpp_html_a9e1483f7215664a2315c53c3558d9a8d"><div class="ttname"><a href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a></div><div class="ttdeci">Value * LHS</div><div class="ttdef"><b>Definition:</b> <a href="X86PartialReduction_8cpp_source.html#l00075">X86PartialReduction.cpp:75</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantInt_html"><div class="ttname"><a href="classllvm_1_1ConstantInt.html">llvm::ConstantInt</a></div><div class="ttdoc">This is the shared class of boolean and integer constants.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00078">Constants.h:78</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a2a394517076e7dd2bdcd7dde33dfcb7d"><div class="ttname"><a href="classllvm_1_1Type.html#a2a394517076e7dd2bdcd7dde33dfcb7d">llvm::Type::isArrayTy</a></div><div class="ttdeci">bool isArrayTy() const</div><div class="ttdoc">True if this is an instance of ArrayType.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00246">Type.h:246</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombiner_html_abc13043585e5845ce7fc26b858851ec9"><div class="ttname"><a href="classllvm_1_1InstCombiner.html#abc13043585e5845ce7fc26b858851ec9">llvm::InstCombiner::replaceOperand</a></div><div class="ttdeci">Instruction * replaceOperand(Instruction &amp;I, unsigned OpNum, Value *V)</div><div class="ttdoc">Replace operand of instruction and add old operand to the worklist.</div><div class="ttdef"><b>Definition:</b> <a href="InstCombiner_8h_source.html#l00442">InstCombiner.h:442</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_ab4e05d690df389b8b1477c90387b575f"><div class="ttname"><a href="classllvm_1_1Instruction.html#ab4e05d690df389b8b1477c90387b575f">llvm::Instruction::getOpcode</a></div><div class="ttdeci">unsigned getOpcode() const</div><div class="ttdoc">Returns a member of one of the enums like Instruction::Add.</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00168">Instruction.h:168</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_ac8c0157adbe12649beac0009c2f6ad8d"><div class="ttname"><a href="classllvm_1_1APInt.html#ac8c0157adbe12649beac0009c2f6ad8d">llvm::APInt::isNonNegative</a></div><div class="ttdeci">bool isNonNegative() const</div><div class="ttdoc">Determine if this APInt Value is non-negative (&gt;= 0)</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00317">APInt.h:317</a></div></div>
<div class="ttc" id="anamespacellvm_1_1X86AS_html_aea2591d7d017866934bcf72ee3dc8a31a1337cc82304bed6c1a811f1a7f308aca"><div class="ttname"><a href="namespacellvm_1_1X86AS.html#aea2591d7d017866934bcf72ee3dc8a31a1337cc82304bed6c1a811f1a7f308aca">llvm::X86AS::SS</a></div><div class="ttdeci">@ SS</div><div class="ttdef"><b>Definition:</b> <a href="X86_8h_source.html#l00202">X86.h:202</a></div></div>
<div class="ttc" id="aclassllvm_1_1BlockFrequencyInfo_html"><div class="ttname"><a href="classllvm_1_1BlockFrequencyInfo.html">llvm::BlockFrequencyInfo</a></div><div class="ttdoc">BlockFrequencyInfo pass uses BlockFrequencyInfoImpl implementation to estimate IR basic block frequen...</div><div class="ttdef"><b>Definition:</b> <a href="BlockFrequencyInfo_8h_source.html#l00037">BlockFrequencyInfo.h:37</a></div></div>
<div class="ttc" id="aclassAliasScopeTracker_html"><div class="ttname"><a href="classAliasScopeTracker.html">AliasScopeTracker</a></div><div class="ttdef"><b>Definition:</b> <a href="InstructionCombining_8cpp_source.html#l04407">InstructionCombining.cpp:4407</a></div></div>
<div class="ttc" id="anamespacellvm_html_a6339f2ad6701dc229c34ca4305596d3a"><div class="ttname"><a href="namespacellvm.html#a6339f2ad6701dc229c34ca4305596d3a">llvm::isSplatValue</a></div><div class="ttdeci">bool isSplatValue(const Value *V, int Index=-1, unsigned Depth=0)</div><div class="ttdoc">Return true if each element of the vector value V is poisoned or equal to every other non-poisoned el...</div><div class="ttdef"><b>Definition:</b> <a href="VectorUtils_8cpp_source.html#l00386">VectorUtils.cpp:386</a></div></div>
<div class="ttc" id="aclassllvm_1_1SelectInst_html_aa55fb74dd22008fdcc26a63f44576022"><div class="ttname"><a href="classllvm_1_1SelectInst.html#aa55fb74dd22008fdcc26a63f44576022">llvm::SelectInst::Create</a></div><div class="ttdeci">static SelectInst * Create(Value *C, Value *S1, Value *S2, const Twine &amp;NameStr=&quot;&quot;, Instruction *InsertBefore=nullptr, Instruction *MDFrom=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01777">Instructions.h:1777</a></div></div>
<div class="ttc" id="anamespacellvm_html_a12c01eba586da4db7ad4662e901b10a0"><div class="ttname"><a href="namespacellvm.html#a12c01eba586da4db7ad4662e901b10a0">llvm::simplifyFreezeInst</a></div><div class="ttdeci">Value * simplifyFreezeInst(Value *Op, const SimplifyQuery &amp;Q)</div><div class="ttdoc">Given an operand for a Freeze, see if we can fold the result.</div><div class="ttdef"><b>Definition:</b> <a href="InstructionSimplify_8cpp_source.html#l06571">InstructionSimplify.cpp:6571</a></div></div>
<div class="ttc" id="aInstructionCombining_8cpp_html_ac7f3587a2e9b666879ee5067a9593253"><div class="ttname"><a href="InstructionCombining_8cpp.html#ac7f3587a2e9b666879ee5067a9593253">hasNoUnsignedWrap</a></div><div class="ttdeci">static bool hasNoUnsignedWrap(BinaryOperator &amp;I)</div><div class="ttdef"><b>Definition:</b> <a href="InstructionCombining_8cpp_source.html#l00301">InstructionCombining.cpp:301</a></div></div>
<div class="ttc" id="aclassllvm_1_1AddrSpaceCastInst_html"><div class="ttname"><a href="classllvm_1_1AddrSpaceCastInst.html">llvm::AddrSpaceCastInst</a></div><div class="ttdoc">This class represents a conversion between pointers from one address space to another.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l05298">Instructions.h:5298</a></div></div>
<div class="ttc" id="aInstCombineInternal_8h_html"><div class="ttname"><a href="InstCombineInternal_8h.html">InstCombineInternal.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1PassRegistry_html_a05a729900b76c89e808c6c3094921b2f"><div class="ttname"><a href="classllvm_1_1PassRegistry.html#a05a729900b76c89e808c6c3094921b2f">llvm::PassRegistry::getPassRegistry</a></div><div class="ttdeci">static PassRegistry * getPassRegistry()</div><div class="ttdoc">getPassRegistry - Access the global registry object, which is automatically initialized at applicatio...</div><div class="ttdef"><b>Definition:</b> <a href="PassRegistry_8cpp_source.html#l00024">PassRegistry.cpp:24</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_addb87fe3f509b7803d3f5933ee24b560"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#addb87fe3f509b7803d3f5933ee24b560">llvm::PatternMatch::m_Select</a></div><div class="ttdeci">ThreeOps_match&lt; Cond, LHS, RHS, Instruction::Select &gt; m_Select(const Cond &amp;C, const LHS &amp;L, const RHS &amp;R)</div><div class="ttdoc">Matches SelectInst.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01462">PatternMatch.h:1462</a></div></div>
<div class="ttc" id="aclassllvm_1_1ArrayType_html_a1c35bd7a4fa08845607033aecc94423d"><div class="ttname"><a href="classllvm_1_1ArrayType.html#a1c35bd7a4fa08845607033aecc94423d">llvm::ArrayType::getNumElements</a></div><div class="ttdeci">uint64_t getNumElements() const</div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00369">DerivedTypes.h:369</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a247b6987d634040b8aa6fb9c5887b703"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a247b6987d634040b8aa6fb9c5887b703">llvm::PatternMatch::m_ZExtOrSExt</a></div><div class="ttdeci">match_combine_or&lt; CastClass_match&lt; OpTy, Instruction::ZExt &gt;, CastClass_match&lt; OpTy, Instruction::SExt &gt; &gt; m_ZExtOrSExt(const OpTy &amp;Op)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01648">PatternMatch.h:1648</a></div></div>
<div class="ttc" id="aConstants_8h_html"><div class="ttname"><a href="Constants_8h.html">Constants.h</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a25d956d9e0beadd47ce4bc255dfa811d"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">llvm::PatternMatch::match</a></div><div class="ttdeci">bool match(Val *V, const Pattern &amp;P)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00049">PatternMatch.h:49</a></div></div>
<div class="ttc" id="aclassllvm_1_1PHINode_html_a16c39eb6e60b42a40c399d8d65347bb6"><div class="ttname"><a href="classllvm_1_1PHINode.html#a16c39eb6e60b42a40c399d8d65347bb6">llvm::PHINode::getIncomingValue</a></div><div class="ttdeci">Value * getIncomingValue(unsigned i) const</div><div class="ttdoc">Return incoming value number x.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02794">Instructions.h:2794</a></div></div>
<div class="ttc" id="aclassllvm_1_1AAResults_html"><div class="ttname"><a href="classllvm_1_1AAResults.html">llvm::AAResults</a></div><div class="ttdef"><b>Definition:</b> <a href="AliasAnalysis_8h_source.html#l00294">AliasAnalysis.h:294</a></div></div>
<div class="ttc" id="aInstructionCombining_8cpp_html_a8a787de77e16e56d936abb2ad6ee4c8c"><div class="ttname"><a href="InstructionCombining_8cpp.html#a8a787de77e16e56d936abb2ad6ee4c8c">INITIALIZE_PASS_BEGIN</a></div><div class="ttdeci">INITIALIZE_PASS_BEGIN(InstructionCombiningPass, &quot;instcombine&quot;, &quot;Combine redundant instructions&quot;, false, false) INITIALIZE_PASS_END(InstructionCombiningPass</div></div>
<div class="ttc" id="aclassllvm_1_1Constant_html_ae4b6abe77abf42fb02081a6cc41a0132"><div class="ttname"><a href="classllvm_1_1Constant.html#ae4b6abe77abf42fb02081a6cc41a0132">llvm::Constant::isNullValue</a></div><div class="ttdeci">bool isNullValue() const</div><div class="ttdoc">Return true if this is the value that would be returned by getNullValue.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00076">Constants.cpp:76</a></div></div>
<div class="ttc" id="ainclude_2llvm_2Demangle_2README_8txt_html_a9d56f6c541a0ab888755f9bc198b8eca"><div class="ttname"><a href="include_2llvm_2Demangle_2README_8txt.html#a9d56f6c541a0ab888755f9bc198b8eca">f</a></div><div class="ttdeci">Itanium Name Demangler i e convert the string _Z1fv into f()&quot;. You can also use the CRTP base ManglingParser to perform some simple analysis on the mangled name</div></div>
<div class="ttc" id="aBuiltinGCs_8cpp_html_a6742d2e0a668baf1196ec69e158d5f15"><div class="ttname"><a href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a></div><div class="ttdeci">static GCRegistry::Add&lt; CoreCLRGC &gt; E(&quot;coreclr&quot;, &quot;CoreCLR-compatible GC&quot;)</div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a4166b451a572b1e5d3fea7250af53653"><div class="ttname"><a href="classllvm_1_1Instruction.html#a4166b451a572b1e5d3fea7250af53653">llvm::Instruction::setHasNoSignedWrap</a></div><div class="ttdeci">void setHasNoSignedWrap(bool b=true)</div><div class="ttdoc">Set or clear the nsw flag on this instruction, which must be an operator which supports this flag.</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8cpp_source.html#l00165">Instruction.cpp:165</a></div></div>
<div class="ttc" id="anamespacellvm_html_a964455f36837281d37f2a44e2fcb4cca"><div class="ttname"><a href="namespacellvm.html#a964455f36837281d37f2a44e2fcb4cca">llvm::ConstantFoldBinaryOpOperands</a></div><div class="ttdeci">Constant * ConstantFoldBinaryOpOperands(unsigned Opcode, Constant *LHS, Constant *RHS, const DataLayout &amp;DL)</div><div class="ttdoc">Attempt to constant fold a binary operation with the specified operands.</div><div class="ttdef"><b>Definition:</b> <a href="ConstantFolding_8cpp_source.html#l01335">ConstantFolding.cpp:1335</a></div></div>
<div class="ttc" id="aclassllvm_1_1User_html"><div class="ttname"><a href="classllvm_1_1User.html">llvm::User</a></div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00044">User.h:44</a></div></div>
<div class="ttc" id="anamespacellvm_html_a26a5e408fc09c5664d2bbb2d7fae154e"><div class="ttname"><a href="namespacellvm.html#a26a5e408fc09c5664d2bbb2d7fae154e">llvm::LibFunc</a></div><div class="ttdeci">LibFunc</div><div class="ttdef"><b>Definition:</b> <a href="TargetLibraryInfo_8h_source.html#l00036">TargetLibraryInfo.h:36</a></div></div>
<div class="ttc" id="aIntrinsics_8h_html"><div class="ttname"><a href="Intrinsics_8h.html">Intrinsics.h</a></div></div>
<div class="ttc" id="aREADME__ALTIVEC_8txt_html_a9aacd9146afe44bf656cd664e2a88c8c"><div class="ttname"><a href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a></div><div class="ttdeci">(vector float) vec_cmpeq(*A, *B) C</div><div class="ttdef"><b>Definition:</b> <a href="README__ALTIVEC_8txt_source.html#l00086">README_ALTIVEC.txt:86</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_a310291367c69513a53ec6d900ad2e060"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#a310291367c69513a53ec6d900ad2e060">llvm::InstCombinerImpl::foldOpIntoPhi</a></div><div class="ttdeci">Instruction * foldOpIntoPhi(Instruction &amp;I, PHINode *PN)</div><div class="ttdoc">Given a binary operator, cast instruction, or select which has a PHI node as operand #0,...</div><div class="ttdef"><b>Definition:</b> <a href="InstructionCombining_8cpp_source.html#l01178">InstructionCombining.cpp:1178</a></div></div>
<div class="ttc" id="aclassllvm_1_1LandingPadInst_html_a1d25e478c9de2656ce4c793a8b80e537"><div class="ttname"><a href="classllvm_1_1LandingPadInst.html#a1d25e478c9de2656ce4c793a8b80e537">llvm::LandingPadInst::getNumClauses</a></div><div class="ttdeci">unsigned getNumClauses() const</div><div class="ttdoc">Get the number of clauses for this landing pad.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03028">Instructions.h:3028</a></div></div>
<div class="ttc" id="aInstrTypes_8h_html"><div class="ttname"><a href="InstrTypes_8h.html">InstrTypes.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallBase_html_a83b8c9e572130f403445c0b0f69b837c"><div class="ttname"><a href="classllvm_1_1CallBase.html#a83b8c9e572130f403445c0b0f69b837c">llvm::CallBase::getCalledFunction</a></div><div class="ttdeci">Function * getCalledFunction() const</div><div class="ttdoc">Returns the function called, or null if this is an indirect function invocation or the function signa...</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l01406">InstrTypes.h:1406</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallBase_html_a9da3b29e8e71b9be4645874e1721207a"><div class="ttname"><a href="classllvm_1_1CallBase.html#a9da3b29e8e71b9be4645874e1721207a">llvm::CallBase::setAttributes</a></div><div class="ttdeci">void setAttributes(AttributeList A)</div><div class="ttdoc">Set the parameter attributes for this call.</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l01488">InstrTypes.h:1488</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a0ed5f3ab3c2e4196ee0cffffa080c062"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">llvm::BasicBlock::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdoc">Instruction iterator methods.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00314">BasicBlock.h:314</a></div></div>
<div class="ttc" id="aOcamlGCPrinter_8cpp_html_afcf2f797ed287a723263583c9b1c1bce"><div class="ttname"><a href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a></div><div class="ttdeci">static GCMetadataPrinterRegistry::Add&lt; OcamlGCMetadataPrinter &gt; Y(&quot;ocaml&quot;, &quot;ocaml 3.10-compatible collector&quot;)</div></div>
<div class="ttc" id="aInstructionWorklist_8h_html"><div class="ttname"><a href="InstructionWorklist_8h.html">InstructionWorklist.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallInst_html_a850d8262cd900958b3153c4aa080b2bb"><div class="ttname"><a href="classllvm_1_1CallInst.html#a850d8262cd900958b3153c4aa080b2bb">llvm::CallInst::Create</a></div><div class="ttdeci">static CallInst * Create(FunctionType *Ty, Value *F, const Twine &amp;NameStr=&quot;&quot;, Instruction *InsertBefore=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01528">Instructions.h:1528</a></div></div>
<div class="ttc" id="aSIInstrInfo_8cpp_html_a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791"><div class="ttname"><a href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a></div><div class="ttdeci">@ SI</div><div class="ttdef"><b>Definition:</b> <a href="SIInstrInfo_8cpp_source.html#l07993">SIInstrInfo.cpp:7993</a></div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisUsage_html"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html">llvm::AnalysisUsage</a></div><div class="ttdoc">Represent the analysis usage information of a pass.</div><div class="ttdef"><b>Definition:</b> <a href="PassAnalysisSupport_8h_source.html#l00047">PassAnalysisSupport.h:47</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_a397caaa6fe7aad6bb3d482f9fe157e71"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#a397caaa6fe7aad6bb3d482f9fe157e71">llvm::InstCombinerImpl::visitFreeze</a></div><div class="ttdeci">Instruction * visitFreeze(FreezeInst &amp;I)</div><div class="ttdef"><b>Definition:</b> <a href="InstructionCombining_8cpp_source.html#l03968">InstructionCombining.cpp:3968</a></div></div>
<div class="ttc" id="anamespacellvm_html_a5d56157a385f8cd7d3e54ed87da1ba6aa4c0484152e8ccb276b690a1f664b2480"><div class="ttname"><a href="namespacellvm.html#a5d56157a385f8cd7d3e54ed87da1ba6aa4c0484152e8ccb276b690a1f664b2480">llvm::EHPersonality::GNU_C</a></div><div class="ttdeci">@ GNU_C</div></div>
<div class="ttc" id="anamespacellvm_html_aa750395459fa1eb7130d6de8e3d074f6"><div class="ttname"><a href="namespacellvm.html#aa750395459fa1eb7130d6de8e3d074f6">llvm::simplifyBinOp</a></div><div class="ttdeci">Value * simplifyBinOp(unsigned Opcode, Value *LHS, Value *RHS, const SimplifyQuery &amp;Q)</div><div class="ttdoc">Given operands for a BinaryOperator, fold the result or return null.</div><div class="ttdef"><b>Definition:</b> <a href="InstructionSimplify_8cpp_source.html#l05812">InstructionSimplify.cpp:5812</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_a071e8d814b2b30b02544fad964227b8e"><div class="ttname"><a href="classllvm_1_1APInt.html#a071e8d814b2b30b02544fad964227b8e">llvm::APInt::getAllOnes</a></div><div class="ttdeci">static APInt getAllOnes(unsigned numBits)</div><div class="ttdoc">Return an APInt of a specified width with all bits set.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00214">APInt.h:214</a></div></div>
<div class="ttc" id="aInstructionCombining_8cpp_html_ac39bd0ff6a3f194647bdcc7f46cfde61"><div class="ttname"><a href="InstructionCombining_8cpp.html#ac39bd0ff6a3f194647bdcc7f46cfde61">DEBUG_COUNTER</a></div><div class="ttdeci">DEBUG_COUNTER(VisitCounter, &quot;instcombine-visit&quot;, &quot;Controls which instructions are visited&quot;)</div></div>
<div class="ttc" id="anamespacellvm_html_a20f356124998d05f7e605549cc2dda91"><div class="ttname"><a href="namespacellvm.html#a20f356124998d05f7e605549cc2dda91">llvm::canConstantFoldCallTo</a></div><div class="ttdeci">bool canConstantFoldCallTo(const CallBase *Call, const Function *F)</div><div class="ttdoc">canConstantFoldCallTo - Return true if its even possible to fold a call to the specified function.</div><div class="ttdef"><b>Definition:</b> <a href="ConstantFolding_8cpp_source.html#l01495">ConstantFolding.cpp:1495</a></div></div>
<div class="ttc" id="aTargetLibraryInfo_8h_html"><div class="ttname"><a href="TargetLibraryInfo_8h.html">TargetLibraryInfo.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a1bc022868b23918efa44df511f4d5b61"><div class="ttname"><a href="classllvm_1_1Type.html#a1bc022868b23918efa44df511f4d5b61">llvm::Type::isVectorTy</a></div><div class="ttdeci">bool isVectorTy() const</div><div class="ttdoc">True if this is an instance of VectorType.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00258">Type.h:258</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_a6ab9ce3ba2b714edf23aa74567ba4540"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#a6ab9ce3ba2b714edf23aa74567ba4540">llvm::InstCombinerImpl::visitUnconditionalBranchInst</a></div><div class="ttdeci">Instruction * visitUnconditionalBranchInst(BranchInst &amp;BI)</div><div class="ttdef"><b>Definition:</b> <a href="InstructionCombining_8cpp_source.html#l03149">InstructionCombining.cpp:3149</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a04353aa48874f9bda89ff9059cd1a5a6"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a04353aa48874f9bda89ff9059cd1a5a6">llvm::PatternMatch::m_Instruction</a></div><div class="ttdeci">bind_ty&lt; Instruction &gt; m_Instruction(Instruction *&amp;I)</div><div class="ttdoc">Match an instruction, capturing it if we match.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00716">PatternMatch.h:716</a></div></div>
<div class="ttc" id="alib_2Target_2README_8txt_html_ac3ac4028df71f10fda029660ef66594d"><div class="ttname"><a href="lib_2Target_2README_8txt.html#ac3ac4028df71f10fda029660ef66594d">l</a></div><div class="ttdeci">This requires reassociating to forms of expressions that are already something that reassoc doesn t think about yet These two functions should generate the same code on big endian int * l</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2README_8txt_source.html#l00100">README.txt:100</a></div></div>
<div class="ttc" id="anamespacellvm_1_1SPII_html_a1c7202c6054fef862bbed45957747cdfa36b3dd3b84fde3f8494a9b18af131856"><div class="ttname"><a href="namespacellvm_1_1SPII.html#a1c7202c6054fef862bbed45957747cdfa36b3dd3b84fde3f8494a9b18af131856">llvm::SPII::Store</a></div><div class="ttdeci">@ Store</div><div class="ttdef"><b>Definition:</b> <a href="SparcInstrInfo_8h_source.html#l00033">SparcInstrInfo.h:33</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a161fd4e9fa5367f64c2a4c9e921c3ad3"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a161fd4e9fa5367f64c2a4c9e921c3ad3">llvm::BasicBlock::getFirstInsertionPt</a></div><div class="ttdeci">const_iterator getFirstInsertionPt() const</div><div class="ttdoc">Returns an iterator to the first instruction in this block that is suitable for inserting a non-PHI i...</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00245">BasicBlock.cpp:245</a></div></div>
<div class="ttc" id="anamespacefalse_html"><div class="ttname"><a href="namespacefalse.html">false</a></div><div class="ttdef"><b>Definition:</b> <a href="StackSlotColoring_8cpp_source.html#l00141">StackSlotColoring.cpp:141</a></div></div>
<div class="ttc" id="aclassllvm_1_1VectorType_html_a59632c5deb0423a518ad984bdd04d41f"><div class="ttname"><a href="classllvm_1_1VectorType.html#a59632c5deb0423a518ad984bdd04d41f">llvm::VectorType::getElementCount</a></div><div class="ttdeci">ElementCount getElementCount() const</div><div class="ttdoc">Return an ElementCount instance to represent the (possibly scalable) number of elements in the vector...</div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00627">DerivedTypes.h:627</a></div></div>
<div class="ttc" id="anamespacellvm_1_1dwarf_html_a5d3c920b66ea797d6adb243862fdf47a"><div class="ttname"><a href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">llvm::dwarf::Index</a></div><div class="ttdeci">Index</div><div class="ttdef"><b>Definition:</b> <a href="Dwarf_8h_source.html#l00550">Dwarf.h:550</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a2cbdca7c8267aac6914d674f8e81841b"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a2cbdca7c8267aac6914d674f8e81841b">llvm::PatternMatch::m_ZExt</a></div><div class="ttdeci">CastClass_match&lt; OpTy, Instruction::ZExt &gt; m_ZExt(const OpTy &amp;Op)</div><div class="ttdoc">Matches ZExt.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01629">PatternMatch.h:1629</a></div></div>
<div class="ttc" id="anamespacellvm_html_affedc93ead6b25c57a7196d32ff11e89"><div class="ttname"><a href="namespacellvm.html#affedc93ead6b25c57a7196d32ff11e89">llvm::isPotentiallyReachable</a></div><div class="ttdeci">bool isPotentiallyReachable(const Instruction *From, const Instruction *To, const SmallPtrSetImpl&lt; BasicBlock * &gt; *ExclusionSet=nullptr, const DominatorTree *DT=nullptr, const LoopInfo *LI=nullptr)</div><div class="ttdoc">Determine whether instruction 'To' is reachable from 'From', without passing through any blocks in Ex...</div><div class="ttdef"><b>Definition:</b> <a href="CFG_8cpp_source.html#l00231">CFG.cpp:231</a></div></div>
<div class="ttc" id="aBuiltinGCs_8cpp_html_a7abf5fb4071cb25dbce06dfb5ee3c937"><div class="ttname"><a href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a></div><div class="ttdeci">static GCRegistry::Add&lt; OcamlGC &gt; B(&quot;ocaml&quot;, &quot;ocaml 3.10-compatible GC&quot;)</div></div>
<div class="ttc" id="anamespacellvm_html_a1c9e22b633ee4e0727bba3c87db57296"><div class="ttname"><a href="namespacellvm.html#a1c9e22b633ee4e0727bba3c87db57296">llvm::removeAllNonTerminatorAndEHPadInstructions</a></div><div class="ttdeci">std::pair&lt; unsigned, unsigned &gt; removeAllNonTerminatorAndEHPadInstructions(BasicBlock *BB)</div><div class="ttdoc">Remove all instructions from a basic block other than its terminator and any present EH pad instructi...</div><div class="ttdef"><b>Definition:</b> <a href="Transforms_2Utils_2Local_8cpp_source.html#l02226">Local.cpp:2226</a></div></div>
<div class="ttc" id="aclassllvm_1_1IntegerType_html"><div class="ttname"><a href="classllvm_1_1IntegerType.html">llvm::IntegerType</a></div><div class="ttdoc">Class to represent integer types.</div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00040">DerivedTypes.h:40</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_afa0b2fa29ba074f2b6ec9ac11163f2d9"><div class="ttname"><a href="classllvm_1_1Instruction.html#afa0b2fa29ba074f2b6ec9ac11163f2d9">llvm::Instruction::CastOps</a></div><div class="ttdeci">CastOps</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00823">Instruction.h:823</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantArray_html"><div class="ttname"><a href="classllvm_1_1ConstantArray.html">llvm::ConstantArray</a></div><div class="ttdoc">ConstantArray - Constant Array Declarations.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00409">Constants.h:409</a></div></div>
<div class="ttc" id="aclassllvm_1_1Constant_html_a4d51384de6e1798bb6aa875aebeea9f0"><div class="ttname"><a href="classllvm_1_1Constant.html#a4d51384de6e1798bb6aa875aebeea9f0">llvm::Constant::getAllOnesValue</a></div><div class="ttdeci">static Constant * getAllOnesValue(Type *Ty)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00403">Constants.cpp:403</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a741e3212cc4b9d94cd549d02d26e172b"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a741e3212cc4b9d94cd549d02d26e172b">llvm::PatternMatch::m_SDiv</a></div><div class="ttdeci">BinaryOp_match&lt; LHS, RHS, Instruction::SDiv &gt; m_SDiv(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01063">PatternMatch.h:1063</a></div></div>
<div class="ttc" id="aclassllvm_1_1BinaryOperator_html_a31bf07f3f61525486633bc1d0bbaf029"><div class="ttname"><a href="classllvm_1_1BinaryOperator.html#a31bf07f3f61525486633bc1d0bbaf029">llvm::BinaryOperator::getOpcode</a></div><div class="ttdeci">BinaryOps getOpcode() const</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00391">InstrTypes.h:391</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a677ac8d99ff3c2d32a95c21de9ed372c"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a677ac8d99ff3c2d32a95c21de9ed372c">llvm::PatternMatch::m_ConstantInt</a></div><div class="ttdeci">class_match&lt; ConstantInt &gt; m_ConstantInt()</div><div class="ttdoc">Match an arbitrary ConstantInt and ignore it.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00147">PatternMatch.h:147</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html"><div class="ttname"><a href="classllvm_1_1Instruction.html">llvm::Instruction</a></div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00041">Instruction.h:41</a></div></div>
<div class="ttc" id="aclassllvm_1_1ExtractValueInst_html_a949ac9df3b15e4f72940cea79d8298b5"><div class="ttname"><a href="classllvm_1_1ExtractValueInst.html#a949ac9df3b15e4f72940cea79d8298b5">llvm::ExtractValueInst::idx_end</a></div><div class="ttdeci">idx_iterator idx_end() const</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02505">Instructions.h:2505</a></div></div>
<div class="ttc" id="aclassllvm_1_1DebugCounter_html_a5aace8653ce3726ef07194dcf6bce2bf"><div class="ttname"><a href="classllvm_1_1DebugCounter.html#a5aace8653ce3726ef07194dcf6bce2bf">llvm::DebugCounter::shouldExecute</a></div><div class="ttdeci">static bool shouldExecute(unsigned CounterName)</div><div class="ttdef"><b>Definition:</b> <a href="DebugCounter_8h_source.html#l00072">DebugCounter.h:72</a></div></div>
<div class="ttc" id="aclassllvm_1_1DominatorTreeWrapperPass_html"><div class="ttname"><a href="classllvm_1_1DominatorTreeWrapperPass.html">llvm::DominatorTreeWrapperPass</a></div><div class="ttdoc">Legacy analysis pass which computes a DominatorTree.</div><div class="ttdef"><b>Definition:</b> <a href="Dominators_8h_source.html#l00314">Dominators.h:314</a></div></div>
<div class="ttc" id="aclassllvm_1_1PassRegistry_html"><div class="ttname"><a href="classllvm_1_1PassRegistry.html">llvm::PassRegistry</a></div><div class="ttdoc">PassRegistry - This class manages the registration and intitialization of the pass subsystem as appli...</div><div class="ttdef"><b>Definition:</b> <a href="PassRegistry_8h_source.html#l00038">PassRegistry.h:38</a></div></div>
<div class="ttc" id="anamespacellvm_html_aa3d613e3ad429bdb5b1a7d22796028e9"><div class="ttname"><a href="namespacellvm.html#aa3d613e3ad429bdb5b1a7d22796028e9">llvm::unwrap</a></div><div class="ttdeci">Attribute unwrap(LLVMAttributeRef Attr)</div><div class="ttdef"><b>Definition:</b> <a href="Attributes_8h_source.html#l00285">Attributes.h:285</a></div></div>
<div class="ttc" id="anamespacellvm_html_a7f2a3d4dcfee70225988aec53ff1e173"><div class="ttname"><a href="namespacellvm.html#a7f2a3d4dcfee70225988aec53ff1e173">llvm::report_fatal_error</a></div><div class="ttdeci">void report_fatal_error(Error Err, bool gen_crash_diag=true)</div><div class="ttdoc">Report a serious error, calling any installed error handler.</div><div class="ttdef"><b>Definition:</b> <a href="Testing_2Support_2Error_8cpp_source.html#l00145">Error.cpp:145</a></div></div>
<div class="ttc" id="anamespacellvm_html_a26be1141b23850a2b4eb78021d99e862"><div class="ttname"><a href="namespacellvm.html#a26be1141b23850a2b4eb78021d99e862">llvm::salvageDebugInfo</a></div><div class="ttdeci">void salvageDebugInfo(const MachineRegisterInfo &amp;MRI, MachineInstr &amp;MI)</div><div class="ttdoc">Assuming the instruction MI is going to be deleted, attempt to salvage debug users of MI by writing t...</div><div class="ttdef"><b>Definition:</b> <a href="CodeGen_2GlobalISel_2Utils_8cpp_source.html#l01367">Utils.cpp:1367</a></div></div>
<div class="ttc" id="anamespacellvm_html_a0bf75467957937ad23ad7be19f489934"><div class="ttname"><a href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">llvm::STATISTIC</a></div><div class="ttdeci">STATISTIC(NumFunctions, &quot;Total number of functions&quot;)</div></div>
<div class="ttc" id="aclassllvm_1_1LandingPadInst_html_a3a936522e13d33927dc23f0488e421d8"><div class="ttname"><a href="classllvm_1_1LandingPadInst.html#a3a936522e13d33927dc23f0488e421d8">llvm::LandingPadInst::addClause</a></div><div class="ttdeci">void addClause(Constant *ClauseVal)</div><div class="ttdoc">Add a catch or filter clause to the landing pad.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l00254">Instructions.cpp:254</a></div></div>
<div class="ttc" id="aclassllvm_1_1UndefValue_html_a4ae5ff22b700a42bcc5d889233721335"><div class="ttname"><a href="classllvm_1_1UndefValue.html#a4ae5ff22b700a42bcc5d889233721335">llvm::UndefValue::get</a></div><div class="ttdeci">static UndefValue * get(Type *T)</div><div class="ttdoc">Static factory methods - Return an 'undef' object of the specified type.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l01740">Constants.cpp:1740</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html">llvm::InstCombinerImpl</a></div><div class="ttdef"><b>Definition:</b> <a href="InstCombineInternal_8h_source.html#l00061">InstCombineInternal.h:61</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantInt_html_a969709dd49c28865a482d8b870f87c46"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">llvm::ConstantInt::get</a></div><div class="ttdeci">static Constant * get(Type *Ty, uint64_t V, bool IsSigned=false)</div><div class="ttdoc">If Ty is a vector type, return a Constant with a splat of the given value.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00887">Constants.cpp:887</a></div></div>
<div class="ttc" id="aInstructionCombining_8cpp_html_a6f35c3231e19a56dcbaa6c7f972472f5"><div class="ttname"><a href="InstructionCombining_8cpp.html#a6f35c3231e19a56dcbaa6c7f972472f5">MaxSinkNumUsers</a></div><div class="ttdeci">static cl::opt&lt; unsigned &gt; MaxSinkNumUsers(&quot;instcombine-max-sink-users&quot;, cl::init(32), cl::desc(&quot;Maximum number of undroppable users for instruction sinking&quot;))</div></div>
<div class="ttc" id="anamespacellvm_html_a3b1c5788b85ffa254be0e834edf5cf8f"><div class="ttname"><a href="namespacellvm.html#a3b1c5788b85ffa254be0e834edf5cf8f">llvm::getUnderlyingObject</a></div><div class="ttdeci">const Value * getUnderlyingObject(const Value *V, unsigned MaxLookup=6)</div><div class="ttdoc">This method strips off any GEP address adjustments and pointer casts from the specified value,...</div><div class="ttdef"><b>Definition:</b> <a href="ValueTracking_8cpp_source.html#l04567">ValueTracking.cpp:4567</a></div></div>
<div class="ttc" id="aSmallPtrSet_8h_html"><div class="ttname"><a href="SmallPtrSet_8h.html">SmallPtrSet.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_ab7805c1d4f86c20199da1dd1fab589f0"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#ab7805c1d4f86c20199da1dd1fab589f0">llvm::InstCombinerImpl::pushFreezeToPreventPoisonFromPropagating</a></div><div class="ttdeci">Value * pushFreezeToPreventPoisonFromPropagating(FreezeInst &amp;FI)</div><div class="ttdef"><b>Definition:</b> <a href="InstructionCombining_8cpp_source.html#l03804">InstructionCombining.cpp:3804</a></div></div>
<div class="ttc" id="agroup__LLVMCTransformsInstCombine_html_gadf0c4085b4c34e8e45e2034511fb046b"><div class="ttname"><a href="group__LLVMCTransformsInstCombine.html#gadf0c4085b4c34e8e45e2034511fb046b">LLVMAddInstructionCombiningPass</a></div><div class="ttdeci">void LLVMAddInstructionCombiningPass(LLVMPassManagerRef PM)</div><div class="ttdoc">See llvm::createInstructionCombiningPass function.</div><div class="ttdef"><b>Definition:</b> <a href="InstructionCombining_8cpp_source.html#l04767">InstructionCombining.cpp:4767</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html_a7efd1f0c1206d95e4fe01a9b49a57b82"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#a7efd1f0c1206d95e4fe01a9b49a57b82">llvm::SmallVectorImpl::append</a></div><div class="ttdeci">void append(ItTy in_start, ItTy in_end)</div><div class="ttdoc">Add the specified range to the end of the SmallVector.</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00687">SmallVector.h:687</a></div></div>
<div class="ttc" id="aPatternMatch_8h_html"><div class="ttname"><a href="PatternMatch_8h.html">PatternMatch.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a46ef6115027606b67adcf4d28f3dac17"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a46ef6115027606b67adcf4d28f3dac17">llvm::BasicBlock::getFirstNonPHI</a></div><div class="ttdeci">const Instruction * getFirstNonPHI() const</div><div class="ttdoc">Returns a pointer to the first instruction in this block that is not a PHINode instruction.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00208">BasicBlock.cpp:208</a></div></div>
<div class="ttc" id="aCorrelatedValuePropagation_8cpp_html_a52da671999cb61370bfe5c7e9fee966f"><div class="ttname"><a href="CorrelatedValuePropagation_8cpp.html#a52da671999cb61370bfe5c7e9fee966f">willNotOverflow</a></div><div class="ttdeci">static bool willNotOverflow(BinaryOpIntrinsic *BO, LazyValueInfo *LVI)</div><div class="ttdef"><b>Definition:</b> <a href="CorrelatedValuePropagation_8cpp_source.html#l00441">CorrelatedValuePropagation.cpp:441</a></div></div>
<div class="ttc" id="anamespacellvm_html_a08f3f942afc0ee9115a8f9fa87e9191d"><div class="ttname"><a href="namespacellvm.html#a08f3f942afc0ee9115a8f9fa87e9191d">llvm::RemoveRedundantDbgInstrs</a></div><div class="ttdeci">bool RemoveRedundantDbgInstrs(BasicBlock *BB)</div><div class="ttdoc">Try to remove redundant dbg.value instructions from given basic block.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlockUtils_8cpp_source.html#l00538">BasicBlockUtils.cpp:538</a></div></div>
<div class="ttc" id="anamespacellvm_1_1MCID_html_ab357441fcd1ea1f9b0d27c12700f6023a463baf545246fea9718664d933ffe66f"><div class="ttname"><a href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a463baf545246fea9718664d933ffe66f">llvm::MCID::Call</a></div><div class="ttdeci">@ Call</div><div class="ttdef"><b>Definition:</b> <a href="MCInstrDesc_8h_source.html#l00156">MCInstrDesc.h:156</a></div></div>
<div class="ttc" id="aclassllvm_1_1Metadata_html"><div class="ttname"><a href="classllvm_1_1Metadata.html">llvm::Metadata</a></div><div class="ttdoc">Root of the metadata hierarchy.</div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8h_source.html#l00061">Metadata.h:61</a></div></div>
<div class="ttc" id="aInstructionCombining_8cpp_html_a9f7798eb98807e7ce804788b339a6978"><div class="ttname"><a href="InstructionCombining_8cpp.html#a9f7798eb98807e7ce804788b339a6978">rightDistributesOverLeft</a></div><div class="ttdeci">static bool rightDistributesOverLeft(Instruction::BinaryOps LOp, Instruction::BinaryOps ROp)</div><div class="ttdoc">Return whether &quot;(X LOp Y) ROp Z&quot; is always equal to &quot;(X ROp Z) LOp (Y ROp Z)&quot;.</div><div class="ttdef"><b>Definition:</b> <a href="InstructionCombining_8cpp_source.html#l00591">InstructionCombining.cpp:591</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a0f8629c0ff1db9c384e378b2ca860f0a"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a0f8629c0ff1db9c384e378b2ca860f0a">llvm::PatternMatch::m_APIntAllowUndef</a></div><div class="ttdeci">apint_match m_APIntAllowUndef(const APInt *&amp;Res)</div><div class="ttdoc">Match APInt while allowing undefs in splat vector constants.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00284">PatternMatch.h:284</a></div></div>
<div class="ttc" id="aclassllvm_1_1PointerType_html_a92c4ce3a0a429509bc46cc3875a48c24"><div class="ttname"><a href="classllvm_1_1PointerType.html#a92c4ce3a0a429509bc46cc3875a48c24">llvm::PointerType::isOpaque</a></div><div class="ttdeci">bool isOpaque() const</div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00673">DerivedTypes.h:673</a></div></div>
<div class="ttc" id="aclassllvm_1_1CastInst_html_a6a1a810dc09bf349d1e1481931ce2baa"><div class="ttname"><a href="classllvm_1_1CastInst.html#a6a1a810dc09bf349d1e1481931ce2baa">llvm::CastInst::getSrcTy</a></div><div class="ttdeci">Type * getSrcTy() const</div><div class="ttdoc">Return the source type, as a convenience.</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00680">InstrTypes.h:680</a></div></div>
<div class="ttc" id="aclassllvm_1_1BlockFrequencyAnalysis_html"><div class="ttname"><a href="classllvm_1_1BlockFrequencyAnalysis.html">llvm::BlockFrequencyAnalysis</a></div><div class="ttdoc">Analysis pass which computes BlockFrequencyInfo.</div><div class="ttdef"><b>Definition:</b> <a href="BlockFrequencyInfo_8h_source.html#l00112">BlockFrequencyInfo.h:112</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_af9c2825ab53adf1bf8c9fa19ec89d986"><div class="ttname"><a href="classllvm_1_1Instruction.html#af9c2825ab53adf1bf8c9fa19ec89d986">llvm::Instruction::isIntDivRem</a></div><div class="ttdeci">bool isIntDivRem() const</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00174">Instruction.h:174</a></div></div>
<div class="ttc" id="aclassllvm_1_1PHINode_html_aef51af4b490af6b3bf2dfbc8737a8f9f"><div class="ttname"><a href="classllvm_1_1PHINode.html#aef51af4b490af6b3bf2dfbc8737a8f9f">llvm::PHINode::getNumIncomingValues</a></div><div class="ttdeci">unsigned getNumIncomingValues() const</div><div class="ttdoc">Return the number of incoming edges.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02790">Instructions.h:2790</a></div></div>
<div class="ttc" id="anamespacellvm_html_a5d56157a385f8cd7d3e54ed87da1ba6aa7939c43653700c52daa7a68a575c3ec5"><div class="ttname"><a href="namespacellvm.html#a5d56157a385f8cd7d3e54ed87da1ba6aa7939c43653700c52daa7a68a575c3ec5">llvm::EHPersonality::Wasm_CXX</a></div><div class="ttdeci">@ Wasm_CXX</div></div>
<div class="ttc" id="aInstructionCombining_8cpp_html_a4904699fe3329a5027ccd76991b0c1e4"><div class="ttname"><a href="InstructionCombining_8cpp.html#a4904699fe3329a5027ccd76991b0c1e4">ClearSubclassDataAfterReassociation</a></div><div class="ttdeci">static void ClearSubclassDataAfterReassociation(BinaryOperator &amp;I)</div><div class="ttdoc">Conservatively clears subclassOptionalData after a reassociation or commutation.</div><div class="ttdef"><b>Definition:</b> <a href="InstructionCombining_8cpp_source.html#l00314">InstructionCombining.cpp:314</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_a9d7de807ebdfe1819df3ff6cb0f16158"><div class="ttname"><a href="classllvm_1_1Value.html#a9d7de807ebdfe1819df3ff6cb0f16158">llvm::Value::use_empty</a></div><div class="ttdeci">bool use_empty() const</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00344">Value.h:344</a></div></div>
<div class="ttc" id="anamespacellvm_1_1CallingConv_html_a188c0836f8c3528401f1c236fd93b977"><div class="ttname"><a href="namespacellvm_1_1CallingConv.html#a188c0836f8c3528401f1c236fd93b977">llvm::CallingConv::ID</a></div><div class="ttdeci">unsigned ID</div><div class="ttdoc">LLVM IR allows to use arbitrary numbers as calling convention identifiers.</div><div class="ttdef"><b>Definition:</b> <a href="CallingConv_8h_source.html#l00024">CallingConv.h:24</a></div></div>
<div class="ttc" id="aType_8h_html"><div class="ttname"><a href="Type_8h.html">Type.h</a></div></div>
<div class="ttc" id="aErlangGCPrinter_8cpp_html_a74b474c0616ab55c1d9487f11fd31d26"><div class="ttname"><a href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a></div><div class="ttdeci">static GCMetadataPrinterRegistry::Add&lt; ErlangGCPrinter &gt; X(&quot;erlang&quot;, &quot;erlang-compatible garbage collector&quot;)</div></div>
<div class="ttc" id="aInstructionCombining_8cpp_html_aca7c31a6dcc095ed3c2831f6876c6dc0"><div class="ttname"><a href="InstructionCombining_8cpp.html#aca7c31a6dcc095ed3c2831f6876c6dc0">SoleWriteToDeadLocal</a></div><div class="ttdeci">static bool SoleWriteToDeadLocal(Instruction *I, TargetLibraryInfo &amp;TLI)</div><div class="ttdoc">Check for case where the call writes to an otherwise dead alloca.</div><div class="ttdef"><b>Definition:</b> <a href="InstructionCombining_8cpp_source.html#l04036">InstructionCombining.cpp:4036</a></div></div>
<div class="ttc" id="aPassSupport_8h_html_a74ce8276b89067e806f67c45a6d92575"><div class="ttname"><a href="PassSupport_8h.html#a74ce8276b89067e806f67c45a6d92575">INITIALIZE_PASS_END</a></div><div class="ttdeci">#define INITIALIZE_PASS_END(passName, arg, name, cfg, analysis)</div><div class="ttdef"><b>Definition:</b> <a href="PassSupport_8h_source.html#l00059">PassSupport.h:59</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_a225d5b1dcc0015e743f1dbbf348a9c36"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#a225d5b1dcc0015e743f1dbbf348a9c36">llvm::InstCombinerImpl::SimplifyAssociativeOrCommutative</a></div><div class="ttdeci">bool SimplifyAssociativeOrCommutative(BinaryOperator &amp;I)</div><div class="ttdoc">Performs a few simplifications for operators which are associative or commutative.</div><div class="ttdef"><b>Definition:</b> <a href="InstructionCombining_8cpp_source.html#l00409">InstructionCombining.cpp:409</a></div></div>
<div class="ttc" id="aInstructionCombining_8cpp_html_a41c00c458f7416c93927bc2f332b3898"><div class="ttname"><a href="InstructionCombining_8cpp.html#a41c00c458f7416c93927bc2f332b3898">simplifyAssocCastAssoc</a></div><div class="ttdeci">static bool simplifyAssocCastAssoc(BinaryOperator *BinOp1, InstCombinerImpl &amp;IC)</div><div class="ttdoc">Combine constant operands of associative operations either before or after a cast to eliminate one of...</div><div class="ttdef"><b>Definition:</b> <a href="InstructionCombining_8cpp_source.html#l00330">InstructionCombining.cpp:330</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a55743bd32282bf6f87aeb49237b1fb68"><div class="ttname"><a href="classllvm_1_1Instruction.html#a55743bd32282bf6f87aeb49237b1fb68">llvm::Instruction::isCommutative</a></div><div class="ttdeci">bool isCommutative() const LLVM_READONLY</div><div class="ttdoc">Return true if the instruction is commutative:</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8cpp_source.html#l00816">Instruction.cpp:816</a></div></div>
<div class="ttc" id="aIR_2CFG_8h_html"><div class="ttname"><a href="IR_2CFG_8h.html">CFG.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombiner_html_adccadc34e77a7a0982a0832ce2419a00"><div class="ttname"><a href="classllvm_1_1InstCombiner.html#adccadc34e77a7a0982a0832ce2419a00">llvm::InstCombiner::targetSimplifyDemandedUseBitsIntrinsic</a></div><div class="ttdeci">std::optional&lt; Value * &gt; targetSimplifyDemandedUseBitsIntrinsic(IntrinsicInst &amp;II, APInt DemandedMask, KnownBits &amp;Known, bool &amp;KnownBitsComputed)</div><div class="ttdef"><b>Definition:</b> <a href="InstructionCombining_8cpp_source.html#l00181">InstructionCombining.cpp:181</a></div></div>
<div class="ttc" id="aLoopInfo_8h_html"><div class="ttname"><a href="LoopInfo_8h.html">LoopInfo.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_a67aa349e8bb1aefc2a8a6ca18be9b87c"><div class="ttname"><a href="namespacellvm.html#a67aa349e8bb1aefc2a8a6ca18be9b87c">llvm::emitGEPOffset</a></div><div class="ttdeci">Value * emitGEPOffset(IRBuilderBase *Builder, const DataLayout &amp;DL, User *GEP, bool NoAssumptions=false)</div><div class="ttdoc">Given a getelementptr instruction/constantexpr, emit the code necessary to compute the offset from th...</div><div class="ttdef"><b>Definition:</b> <a href="Analysis_2Local_8cpp_source.html#l00022">Local.cpp:22</a></div></div>
<div class="ttc" id="aclassllvm_1_1ProfileSummaryInfo_html"><div class="ttname"><a href="classllvm_1_1ProfileSummaryInfo.html">llvm::ProfileSummaryInfo</a></div><div class="ttdoc">Analysis providing profile information.</div><div class="ttdef"><b>Definition:</b> <a href="ProfileSummaryInfo_8h_source.html#l00040">ProfileSummaryInfo.h:40</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchInst_html_aac456a62894c9f0f8e9f06373bbf40f0"><div class="ttname"><a href="classllvm_1_1BranchInst.html#aac456a62894c9f0f8e9f06373bbf40f0">llvm::BranchInst::getCondition</a></div><div class="ttdeci">Value * getCondition() const</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03220">Instructions.h:3220</a></div></div>
<div class="ttc" id="anamespacellvm_html_ab9cb77a3069c227792d6bade6faff422"><div class="ttname"><a href="namespacellvm.html#ab9cb77a3069c227792d6bade6faff422">llvm::getFreedOperand</a></div><div class="ttdeci">Value * getFreedOperand(const CallBase *CB, const TargetLibraryInfo *TLI)</div><div class="ttdoc">If this if a call to a free function, return the freed operand.</div><div class="ttdef"><b>Definition:</b> <a href="MemoryBuiltins_8cpp_source.html#l00546">MemoryBuiltins.cpp:546</a></div></div>
<div class="ttc" id="aInstructionCombining_8cpp_html_a46267953bff47a24cabb16bc64800b23"><div class="ttname"><a href="InstructionCombining_8cpp.html#a46267953bff47a24cabb16bc64800b23">constantFoldOperationIntoSelectOperand</a></div><div class="ttdeci">static Constant * constantFoldOperationIntoSelectOperand(Instruction &amp;I, SelectInst *SI, Value *SO)</div><div class="ttdef"><b>Definition:</b> <a href="InstructionCombining_8cpp_source.html#l01036">InstructionCombining.cpp:1036</a></div></div>
<div class="ttc" id="aADT_2tmp_8txt_html_a07ed0bfaa124c15897944fe3eaa971ab"><div class="ttname"><a href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a></div><div class="ttdeci">Class for arbitrary precision integers APInt is a functional replacement for common case unsigned integer type like unsigned long or uint64_t</div><div class="ttdef"><b>Definition:</b> <a href="ADT_2tmp_8txt_source.html#l00001">tmp.txt:1</a></div></div>
<div class="ttc" id="aclassllvm_1_1InvokeInst_html"><div class="ttname"><a href="classllvm_1_1InvokeInst.html">llvm::InvokeInst</a></div><div class="ttdoc">Invoke instruction.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03814">Instructions.h:3814</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_ac6d28a9b11139182134a9618028a0d07"><div class="ttname"><a href="classllvm_1_1Type.html#ac6d28a9b11139182134a9618028a0d07">llvm::Type::isIntegerTy</a></div><div class="ttdeci">bool isIntegerTy() const</div><div class="ttdoc">True if this is an instance of IntegerType.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00222">Type.h:222</a></div></div>
<div class="ttc" id="anamespacellvm_html_a74cdbd1e4f731e7d7cd83461b8b1de0b"><div class="ttname"><a href="namespacellvm.html#a74cdbd1e4f731e7d7cd83461b8b1de0b">llvm::sort</a></div><div class="ttdeci">void sort(IteratorTy Start, IteratorTy End)</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l01683">STLExtras.h:1683</a></div></div>
<div class="ttc" id="aclassllvm_1_1MDNode_html_a6cbc0453586a25c057a32161b38b8ce4"><div class="ttname"><a href="classllvm_1_1MDNode.html#a6cbc0453586a25c057a32161b38b8ce4">llvm::MDNode::getOperand</a></div><div class="ttdeci">const MDOperand &amp; getOperand(unsigned I) const</div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8h_source.html#l01291">Metadata.h:1291</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_aa03e017ef451ba2f6f504b0d40c2da2e"><div class="ttname"><a href="classllvm_1_1Instruction.html#aa03e017ef451ba2f6f504b0d40c2da2e">llvm::Instruction::willReturn</a></div><div class="ttdeci">bool willReturn() const LLVM_READONLY</div><div class="ttdoc">Return true if the instruction will return (unwinding is considered as a form of returning control fl...</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8cpp_source.html#l00754">Instruction.cpp:754</a></div></div>
<div class="ttc" id="aclassllvm_1_1VectorType_html"><div class="ttname"><a href="classllvm_1_1VectorType.html">llvm::VectorType</a></div><div class="ttdoc">Base class of all SIMD vector types.</div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00389">DerivedTypes.h:389</a></div></div>
<div class="ttc" id="aclassllvm_1_1IRBuilderBase_1_1FastMathFlagGuard_html"><div class="ttname"><a href="classllvm_1_1IRBuilderBase_1_1FastMathFlagGuard.html">llvm::IRBuilderBase::FastMathFlagGuard</a></div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l00383">IRBuilder.h:383</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_afc079797ba8cb5aa4d9ebfc4d85c4aab"><div class="ttname"><a href="classllvm_1_1Type.html#afc079797ba8cb5aa4d9ebfc4d85c4aab">llvm::Type::getArrayElementType</a></div><div class="ttdeci">Type * getArrayElementType() const</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00397">Type.h:397</a></div></div>
<div class="ttc" id="aHexagonVectorCombine_8cpp_html_ab582deb65d0ec7f41efa6d8579daf0e1"><div class="ttname"><a href="HexagonVectorCombine_8cpp.html#ab582deb65d0ec7f41efa6d8579daf0e1">Combine</a></div><div class="ttdeci">Hexagon Vector Combine</div><div class="ttdef"><b>Definition:</b> <a href="HexagonVectorCombine_8cpp_source.html#l02526">HexagonVectorCombine.cpp:2526</a></div></div>
<div class="ttc" id="aVectorUtils_8h_html"><div class="ttname"><a href="VectorUtils_8h.html">VectorUtils.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantExpr_html_af238147cf5453729781a0fcc7322e1c6"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#af238147cf5453729781a0fcc7322e1c6">llvm::ConstantExpr::getTrunc</a></div><div class="ttdeci">static Constant * getTrunc(Constant *C, Type *Ty, bool OnlyIfReduced=false)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l02091">Constants.cpp:2091</a></div></div>
<div class="ttc" id="aclassllvm_1_1GEPOperator_html_a608bf9c26922fc798bc8bd85601ce94d"><div class="ttname"><a href="classllvm_1_1GEPOperator.html#a608bf9c26922fc798bc8bd85601ce94d">llvm::GEPOperator::hasAllZeroIndices</a></div><div class="ttdeci">bool hasAllZeroIndices() const</div><div class="ttdoc">Return true if all of the indices of this GEP are zeros.</div><div class="ttdef"><b>Definition:</b> <a href="Operator_8h_source.html#l00454">Operator.h:454</a></div></div>
<div class="ttc" id="aInstructionCombining_8cpp_html_a87206032a21208e08473ae642c32e7d7"><div class="ttname"><a href="InstructionCombining_8cpp.html#a87206032a21208e08473ae642c32e7d7">InstCombineDefaultInfiniteLoopThreshold</a></div><div class="ttdeci">static constexpr unsigned InstCombineDefaultInfiniteLoopThreshold</div><div class="ttdef"><b>Definition:</b> <a href="InstructionCombining_8cpp_source.html#l00134">InstructionCombining.cpp:134</a></div></div>
<div class="ttc" id="aBasicBlock_8h_html"><div class="ttname"><a href="BasicBlock_8h.html">BasicBlock.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1cl_1_1opt_html"><div class="ttname"><a href="classllvm_1_1cl_1_1opt.html">llvm::cl::opt&lt; bool &gt;</a></div></div>
<div class="ttc" id="anamespacellvm_html_aaee5189b9c4db9ad666a88abaf1ee0c4ad7778d0c64b6ba21494c97f77a66885a"><div class="ttname"><a href="namespacellvm.html#aaee5189b9c4db9ad666a88abaf1ee0c4ad7778d0c64b6ba21494c97f77a66885a">llvm::ClrHandlerType::Filter</a></div><div class="ttdeci">@ Filter</div></div>
<div class="ttc" id="aclassllvm_1_1DbgVariableIntrinsic_html"><div class="ttname"><a href="classllvm_1_1DbgVariableIntrinsic.html">llvm::DbgVariableIntrinsic</a></div><div class="ttdoc">This is the common base class for debug info intrinsics for variables.</div><div class="ttdef"><b>Definition:</b> <a href="IntrinsicInst_8h_source.html#l00181">IntrinsicInst.h:181</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantExpr_html_afe6a25e856a1a63ffff098f05e3f26d2"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#afe6a25e856a1a63ffff098f05e3f26d2">llvm::ConstantExpr::getCompare</a></div><div class="ttdeci">static Constant * getCompare(unsigned short pred, Constant *C1, Constant *C2, bool OnlyIfReduced=false)</div><div class="ttdoc">Return an ICmp or FCmp comparison operator constant expression.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l02419">Constants.cpp:2419</a></div></div>
<div class="ttc" id="anamespacellvm_html_a5d56157a385f8cd7d3e54ed87da1ba6aa827e35d1ece0eb007816f52f42e87007"><div class="ttname"><a href="namespacellvm.html#a5d56157a385f8cd7d3e54ed87da1ba6aa827e35d1ece0eb007816f52f42e87007">llvm::EHPersonality::GNU_CXX_SjLj</a></div><div class="ttdeci">@ GNU_CXX_SjLj</div></div>
<div class="ttc" id="anamespacellvm_html_a7e3e687ddfdcbacd404bcf17b917dd88"><div class="ttname"><a href="namespacellvm.html#a7e3e687ddfdcbacd404bcf17b917dd88">llvm::instructions</a></div><div class="ttdeci">inst_range instructions(Function *F)</div><div class="ttdef"><b>Definition:</b> <a href="InstIterator_8h_source.html#l00133">InstIterator.h:133</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_ae77be336e228cf9aa00709a8606dfb98"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#ae77be336e228cf9aa00709a8606dfb98">llvm::PatternMatch::m_Zero</a></div><div class="ttdeci">is_zero m_Zero()</div><div class="ttdoc">Match any null constant or a vector with all elements equal to 0.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00537">PatternMatch.h:537</a></div></div>
<div class="ttc" id="aclassllvm_1_1StoreInst_html"><div class="ttname"><a href="classllvm_1_1StoreInst.html">llvm::StoreInst</a></div><div class="ttdoc">An instruction for storing to memory.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00301">Instructions.h:301</a></div></div>
<div class="ttc" id="aclassllvm_1_1Constant_html"><div class="ttname"><a href="classllvm_1_1Constant.html">llvm::Constant</a></div><div class="ttdoc">This is an important base class in LLVM.</div><div class="ttdef"><b>Definition:</b> <a href="Constant_8h_source.html#l00041">Constant.h:41</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a350f4fdc01c770b5cf6a8be2624ae3e5"><div class="ttname"><a href="classllvm_1_1Instruction.html#a350f4fdc01c770b5cf6a8be2624ae3e5">llvm::Instruction::hasNoSignedWrap</a></div><div class="ttdeci">bool hasNoSignedWrap() const LLVM_READONLY</div><div class="ttdoc">Determine whether the no signed wrap flag is set.</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8cpp_source.html#l00177">Instruction.cpp:177</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a1de3bd08ca83d6b976d4c8deacbf5e71"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a1de3bd08ca83d6b976d4c8deacbf5e71">llvm::PatternMatch::m_UnconditionalBr</a></div><div class="ttdeci">br_match m_UnconditionalBr(BasicBlock *&amp;Succ)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01710">PatternMatch.h:1710</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AMDGPU_1_1Hwreg_html_a6110fc30bc7311a6cf99814530362e21"><div class="ttname"><a href="namespacellvm_1_1AMDGPU_1_1Hwreg.html#a6110fc30bc7311a6cf99814530362e21">llvm::AMDGPU::Hwreg::Offset</a></div><div class="ttdeci">Offset</div><div class="ttdef"><b>Definition:</b> <a href="SIDefines_8h_source.html#l00432">SIDefines.h:432</a></div></div>
<div class="ttc" id="aclassllvm_1_1ICmpInst_html"><div class="ttname"><a href="classllvm_1_1ICmpInst.html">llvm::ICmpInst</a></div><div class="ttdoc">This instruction compares its operands according to the predicate given to the constructor.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01197">Instructions.h:1197</a></div></div>
<div class="ttc" id="aInstructionCombining_8cpp_html_ad3927c8a343c4413b417622bad485196"><div class="ttname"><a href="InstructionCombining_8cpp.html#ad3927c8a343c4413b417622bad485196">EnableCodeSinking</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; EnableCodeSinking(&quot;instcombine-code-sinking&quot;, cl::desc(&quot;Enable code sinking&quot;), cl::init(true))</div></div>
<div class="ttc" id="aclassllvm_1_1Constant_html_a174c8fd19771468c53842a7fde8ddce1"><div class="ttname"><a href="classllvm_1_1Constant.html#a174c8fd19771468c53842a7fde8ddce1">llvm::Constant::replaceUndefsWith</a></div><div class="ttdeci">static Constant * replaceUndefsWith(Constant *C, Constant *Replacement)</div><div class="ttdoc">Try to replace undefined constant C or undefined elements in C with Replacement.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00755">Constants.cpp:755</a></div></div>
<div class="ttc" id="astructllvm_1_1KnownBits_html_a1d90fff0f1479f662286338ffecd7f05"><div class="ttname"><a href="structllvm_1_1KnownBits.html#a1d90fff0f1479f662286338ffecd7f05">llvm::KnownBits::countMinLeadingOnes</a></div><div class="ttdeci">unsigned countMinLeadingOnes() const</div><div class="ttdoc">Returns the minimum number of leading one bits.</div><div class="ttdef"><b>Definition:</b> <a href="KnownBits_8h_source.html#l00248">KnownBits.h:248</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetLibraryInfoWrapperPass_html"><div class="ttname"><a href="classllvm_1_1TargetLibraryInfoWrapperPass.html">llvm::TargetLibraryInfoWrapperPass</a></div><div class="ttdef"><b>Definition:</b> <a href="TargetLibraryInfo_8h_source.html#l00565">TargetLibraryInfo.h:565</a></div></div>
<div class="ttc" id="aclassllvm_1_1ExtractValueInst_html_a1cccf41f6be0351ccceed2c6447ff04a"><div class="ttname"><a href="classllvm_1_1ExtractValueInst.html#a1cccf41f6be0351ccceed2c6447ff04a">llvm::ExtractValueInst::Create</a></div><div class="ttdeci">static ExtractValueInst * Create(Value *Agg, ArrayRef&lt; unsigned &gt; Idxs, const Twine &amp;NameStr=&quot;&quot;, Instruction *InsertBefore=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02481">Instructions.h:2481</a></div></div>
<div class="ttc" id="aProfileSummaryInfo_8h_html"><div class="ttname"><a href="ProfileSummaryInfo_8h.html">ProfileSummaryInfo.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_a8c064bbaef44753bce38ba88b8ba7588"><div class="ttname"><a href="namespacellvm.html#a8c064bbaef44753bce38ba88b8ba7588">llvm::canCreateUndefOrPoison</a></div><div class="ttdeci">bool canCreateUndefOrPoison(const Operator *Op, bool ConsiderFlagsAndMetadata=true)</div><div class="ttdoc">canCreateUndefOrPoison returns true if Op can create undef or poison from non-undef &amp; non-poison oper...</div><div class="ttdef"><b>Definition:</b> <a href="ValueTracking_8cpp_source.html#l05382">ValueTracking.cpp:5382</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfoWrapperPass_html"><div class="ttname"><a href="classllvm_1_1TargetTransformInfoWrapperPass.html">llvm::TargetTransformInfoWrapperPass</a></div><div class="ttdoc">Wrapper pass for TargetTransformInfo.</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l02682">TargetTransformInfo.h:2682</a></div></div>
<div class="ttc" id="aBuiltinGCs_8cpp_html_a9bf617fd3367180fb96cebccfaae8dfa"><div class="ttname"><a href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a></div><div class="ttdeci">static GCRegistry::Add&lt; StatepointGC &gt; D(&quot;statepoint-example&quot;, &quot;an example strategy for statepoint&quot;)</div></div>
<div class="ttc" id="aInstructionCombining_8cpp_html_a48ae0648edff8a871369bab3d3646ac0"><div class="ttname"><a href="InstructionCombining_8cpp.html#a48ae0648edff8a871369bab3d3646ac0">MaxArraySize</a></div><div class="ttdeci">static cl::opt&lt; unsigned &gt; MaxArraySize(&quot;instcombine-maxarray-size&quot;, cl::init(1024), cl::desc(&quot;Maximum array size considered when doing a combine&quot;))</div></div>
<div class="ttc" id="aclassllvm_1_1InstructionWorklist_html_a87029746a970dab9ed9f32a106d86370"><div class="ttname"><a href="classllvm_1_1InstructionWorklist.html#a87029746a970dab9ed9f32a106d86370">llvm::InstructionWorklist::push</a></div><div class="ttdeci">void push(Instruction *I)</div><div class="ttdoc">Push the instruction onto the worklist stack.</div><div class="ttdef"><b>Definition:</b> <a href="InstructionWorklist_8h_source.html#l00058">InstructionWorklist.h:58</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a2fd1d2dc14e22227cfa8238778ab87b8"><div class="ttname"><a href="classllvm_1_1Instruction.html#a2fd1d2dc14e22227cfa8238778ab87b8">llvm::Instruction::user_back</a></div><div class="ttdeci">Instruction * user_back()</div><div class="ttdoc">Specialize the methods defined in Value, as we know that an instruction can only be used by other ins...</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00087">Instruction.h:87</a></div></div>
<div class="ttc" id="aclassllvm_1_1AssumptionAnalysis_html"><div class="ttname"><a href="classllvm_1_1AssumptionAnalysis.html">llvm::AssumptionAnalysis</a></div><div class="ttdoc">A function analysis which provides an AssumptionCache.</div><div class="ttdef"><b>Definition:</b> <a href="AssumptionCache_8h_source.html#l00173">AssumptionCache.h:173</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_a24187c2e178af0df22dac26cd5229294"><div class="ttname"><a href="classllvm_1_1APInt.html#a24187c2e178af0df22dac26cd5229294">llvm::APInt::sdivrem</a></div><div class="ttdeci">static void sdivrem(const APInt &amp;LHS, const APInt &amp;RHS, APInt &amp;Quotient, APInt &amp;Remainder)</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8cpp_source.html#l01888">APInt.cpp:1888</a></div></div>
<div class="ttc" id="aSVEIntrinsicOpts_8cpp_html_a2bb87eb1bcbc74783a83ae945eb8fa36"><div class="ttname"><a href="SVEIntrinsicOpts_8cpp.html#a2bb87eb1bcbc74783a83ae945eb8fa36">INITIALIZE_PASS_DEPENDENCY</a></div><div class="ttdeci">INITIALIZE_PASS_DEPENDENCY(DominatorTreeWrapperPass)</div></div>
<div class="ttc" id="aclassllvm_1_1BasicAAWrapperPass_html"><div class="ttname"><a href="classllvm_1_1BasicAAWrapperPass.html">llvm::BasicAAWrapperPass</a></div><div class="ttdoc">Legacy wrapper pass to provide the BasicAAResult object.</div><div class="ttdef"><b>Definition:</b> <a href="BasicAliasAnalysis_8h_source.html#l00160">BasicAliasAnalysis.h:160</a></div></div>
<div class="ttc" id="aclassllvm_1_1PHINode_html_a089cccb6f231efee72abc76d0f9c695f"><div class="ttname"><a href="classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">llvm::PHINode::addIncoming</a></div><div class="ttdeci">void addIncoming(Value *V, BasicBlock *BB)</div><div class="ttdoc">Add an incoming value to the end of the PHI list.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02854">Instructions.h:2854</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a42569041ddafba7d40243e126af07f42"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a42569041ddafba7d40243e126af07f42">llvm::PatternMatch::m_Or</a></div><div class="ttdeci">BinaryOp_match&lt; LHS, RHS, Instruction::Or &gt; m_Or(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01099">PatternMatch.h:1099</a></div></div>
<div class="ttc" id="aclassAliasScopeTracker_html_ab6c7ca8d33397896ff4fda4b5c023a40"><div class="ttname"><a href="classAliasScopeTracker.html#ab6c7ca8d33397896ff4fda4b5c023a40">AliasScopeTracker::analyse</a></div><div class="ttdeci">void analyse(Instruction *I)</div><div class="ttdef"><b>Definition:</b> <a href="InstructionCombining_8cpp_source.html#l04412">InstructionCombining.cpp:4412</a></div></div>
<div class="ttc" id="anamespacellvm_1_1numbers_html_a92f4283d4e0e2ea1776894b3ae93640f"><div class="ttname"><a href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">llvm::numbers::e</a></div><div class="ttdeci">constexpr double e</div><div class="ttdef"><b>Definition:</b> <a href="MathExtras_8h_source.html#l00031">MathExtras.h:31</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_aec0ccdbde0581b3aae7f001634a34d8e"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#aec0ccdbde0581b3aae7f001634a34d8e">llvm::PatternMatch::m_ImmConstant</a></div><div class="ttdeci">match_combine_and&lt; class_match&lt; Constant &gt;, match_unless&lt; constantexpr_match &gt; &gt; m_ImmConstant()</div><div class="ttdoc">Match an arbitrary immediate Constant and ignore it.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00751">PatternMatch.h:751</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseMap_html"><div class="ttname"><a href="classllvm_1_1DenseMap.html">llvm::DenseMap</a></div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00714">DenseMap.h:714</a></div></div>
<div class="ttc" id="aIR_2DebugInfo_8h_html"><div class="ttname"><a href="IR_2DebugInfo_8h.html">DebugInfo.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1ExtractValueInst_html_afcd55a28a257b9ea1708f66671b13e6e"><div class="ttname"><a href="classllvm_1_1ExtractValueInst.html#afcd55a28a257b9ea1708f66671b13e6e">llvm::ExtractValueInst::idx_begin</a></div><div class="ttdeci">idx_iterator idx_begin() const</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02504">Instructions.h:2504</a></div></div>
<div class="ttc" id="aMD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00058">MD5.cpp:58</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantDataVector_html"><div class="ttname"><a href="classllvm_1_1ConstantDataVector.html">llvm::ConstantDataVector</a></div><div class="ttdoc">A vector constant whose element type is a simple 1/2/4/8-byte integer or float/double,...</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00752">Constants.h:752</a></div></div>
<div class="ttc" id="aclassllvm_1_1UndefValue_html"><div class="ttname"><a href="classllvm_1_1UndefValue.html">llvm::UndefValue</a></div><div class="ttdoc">'undef' values are things that do not have specified contents.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l01382">Constants.h:1382</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html_a8f040402288effcbdffb4f7c9748f067"><div class="ttname"><a href="classllvm_1_1Function.html#a8f040402288effcbdffb4f7c9748f067">llvm::Function::addDereferenceableOrNullParamAttr</a></div><div class="ttdeci">void addDereferenceableOrNullParamAttr(unsigned ArgNo, uint64_t Bytes)</div><div class="ttdoc">adds the dereferenceable_or_null attribute to the list of attributes for the given arg.</div><div class="ttdef"><b>Definition:</b> <a href="Function_8cpp_source.html#l00693">Function.cpp:693</a></div></div>
<div class="ttc" id="aclassllvm_1_1GetElementPtrInst_html"><div class="ttname"><a href="classllvm_1_1GetElementPtrInst.html">llvm::GetElementPtrInst</a></div><div class="ttdoc">an instruction for type-safe pointer arithmetic to access elements of arrays and structs</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00940">Instructions.h:940</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantExpr_html_aa5ad9e9e7cc67e1675d8d1631a73e625"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#aa5ad9e9e7cc67e1675d8d1631a73e625">llvm::ConstantExpr::getShl</a></div><div class="ttdeci">static Constant * getShl(Constant *C1, Constant *C2, bool HasNUW=false, bool HasNSW=false)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l02695">Constants.cpp:2695</a></div></div>
<div class="ttc" id="anamespacellvm_1_1cl_html_a10a041239ae1870cfcc064bfaa79fb65"><div class="ttname"><a href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">llvm::cl::init</a></div><div class="ttdeci">initializer&lt; Ty &gt; init(const Ty &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00445">CommandLine.h:445</a></div></div>
<div class="ttc" id="anamespacellvm_html_a8154638df88e4eaa568b67b23d463dac"><div class="ttname"><a href="namespacellvm.html#a8154638df88e4eaa568b67b23d463dac">llvm::make_early_inc_range</a></div><div class="ttdeci">iterator_range&lt; early_inc_iterator_impl&lt; detail::IterOfRange&lt; RangeT &gt; &gt; &gt; make_early_inc_range(RangeT &amp;&amp;Range)</div><div class="ttdoc">Make a range that does early increment to allow mutation of the underlying range without disrupting i...</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l00721">STLExtras.h:721</a></div></div>
<div class="ttc" id="anamespacellvm_html_a2f635b6d5c5f74d0c2e359897a5e7498"><div class="ttname"><a href="namespacellvm.html#a2f635b6d5c5f74d0c2e359897a5e7498">llvm::lowerObjectSizeCall</a></div><div class="ttdeci">Value * lowerObjectSizeCall(IntrinsicInst *ObjectSize, const DataLayout &amp;DL, const TargetLibraryInfo *TLI, bool MustSucceed)</div><div class="ttdoc">Try to turn a call to @llvm.objectsize into an integer value of the given Type.</div><div class="ttdef"><b>Definition:</b> <a href="MemoryBuiltins_8cpp_source.html#l00589">MemoryBuiltins.cpp:589</a></div></div>
<div class="ttc" id="aclassllvm_1_1DebugVariable_html"><div class="ttname"><a href="classllvm_1_1DebugVariable.html">llvm::DebugVariable</a></div><div class="ttdoc">Identifies a unique instance of a variable.</div><div class="ttdef"><b>Definition:</b> <a href="DebugInfoMetadata_8h_source.html#l03733">DebugInfoMetadata.h:3733</a></div></div>
<div class="ttc" id="aDIBuilder_8h_html"><div class="ttname"><a href="DIBuilder_8h.html">DIBuilder.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1ProfileSummaryInfoWrapperPass_html"><div class="ttname"><a href="classllvm_1_1ProfileSummaryInfoWrapperPass.html">llvm::ProfileSummaryInfoWrapperPass</a></div><div class="ttdoc">An analysis pass based on legacy pass manager to deliver ProfileSummaryInfo.</div><div class="ttdef"><b>Definition:</b> <a href="ProfileSummaryInfo_8h_source.html#l00194">ProfileSummaryInfo.h:194</a></div></div>
<div class="ttc" id="aclassllvm_1_1PointerType_html"><div class="ttname"><a href="classllvm_1_1PointerType.html">llvm::PointerType</a></div><div class="ttdoc">Class to represent pointers.</div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00632">DerivedTypes.h:632</a></div></div>
<div class="ttc" id="anamespacellvm_html_acd1cd968cb420c82d70926920fcdc7d7"><div class="ttname"><a href="namespacellvm.html#acd1cd968cb420c82d70926920fcdc7d7">llvm::is_contained</a></div><div class="ttdeci">bool is_contained(R &amp;&amp;Range, const E &amp;Element)</div><div class="ttdoc">Wrapper function around std::find to detect if an element exists in a container.</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l01869">STLExtras.h:1869</a></div></div>
<div class="ttc" id="aArrayRef_8h_html"><div class="ttname"><a href="ArrayRef_8h.html">ArrayRef.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1ICmpInst_html_abe8988eef2e6fc2baba032cb22afedd7"><div class="ttname"><a href="classllvm_1_1ICmpInst.html#abe8988eef2e6fc2baba032cb22afedd7">llvm::ICmpInst::isEquality</a></div><div class="ttdeci">static bool isEquality(Predicate P)</div><div class="ttdoc">Return true if this predicate is either EQ or NE.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01286">Instructions.h:1286</a></div></div>
<div class="ttc" id="aclassllvm_1_1LandingPadInst_html_a56a8919a6120a8c398b382e41c8b3f1e"><div class="ttname"><a href="classllvm_1_1LandingPadInst.html#a56a8919a6120a8c398b382e41c8b3f1e">llvm::LandingPadInst::getClause</a></div><div class="ttdeci">Constant * getClause(unsigned Idx) const</div><div class="ttdoc">Get the value of the clause at index Idx.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03013">Instructions.h:3013</a></div></div>
<div class="ttc" id="anamespacellvm_html_a56641197c50e1c7a9558446d14deadb3"><div class="ttname"><a href="namespacellvm.html#a56641197c50e1c7a9558446d14deadb3">llvm::isAllocLikeFn</a></div><div class="ttdeci">bool isAllocLikeFn(const Value *V, const TargetLibraryInfo *TLI)</div><div class="ttdoc">Tests if a value is a call or invoke to a library function that allocates memory (either malloc,...</div><div class="ttdef"><b>Definition:</b> <a href="MemoryBuiltins_8cpp_source.html#l00313">MemoryBuiltins.cpp:313</a></div></div>
<div class="ttc" id="aInstructionCombining_8cpp_html_a83a4700fc7e6914e0955efa1aac4441e"><div class="ttname"><a href="InstructionCombining_8cpp.html#a83a4700fc7e6914e0955efa1aac4441e">ShouldLowerDbgDeclare</a></div><div class="ttdeci">static cl::opt&lt; unsigned &gt; ShouldLowerDbgDeclare(&quot;instcombine-lower-dbg-declare&quot;, cl::Hidden, cl::init(true))</div></div>
<div class="ttc" id="aclassllvm_1_1GetElementPtrInst_html_a9a94c15dff322a963b566d486dd673b5"><div class="ttname"><a href="classllvm_1_1GetElementPtrInst.html#a9a94c15dff322a963b566d486dd673b5">llvm::GetElementPtrInst::CreateInBounds</a></div><div class="ttdeci">static GetElementPtrInst * CreateInBounds(Type *PointeeType, Value *Ptr, ArrayRef&lt; Value * &gt; IdxList, const Twine &amp;NameStr=&quot;&quot;, Instruction *InsertBefore=nullptr)</div><div class="ttdoc">Create an &quot;inbounds&quot; getelementptr.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00993">Instructions.h:993</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantVector_html"><div class="ttname"><a href="classllvm_1_1ConstantVector.html">llvm::ConstantVector</a></div><div class="ttdoc">Constant Vector Declarations.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00493">Constants.h:493</a></div></div>
<div class="ttc" id="aInstructionCombining_8cpp_html_a5d94ee8aaee00c42c11954aaa6022894"><div class="ttname"><a href="InstructionCombining_8cpp.html#a5d94ee8aaee00c42c11954aaa6022894">isAllocSiteRemovable</a></div><div class="ttdeci">static bool isAllocSiteRemovable(Instruction *AI, SmallVectorImpl&lt; WeakTrackingVH &gt; &amp;Users, const TargetLibraryInfo &amp;TLI)</div><div class="ttdef"><b>Definition:</b> <a href="InstructionCombining_8cpp_source.html#l02745">InstructionCombining.cpp:2745</a></div></div>
<div class="ttc" id="anamespacellvm_html_aa1f8f0633edd8b9a1c5ec15bb9fc5640"><div class="ttname"><a href="namespacellvm.html#aa1f8f0633edd8b9a1c5ec15bb9fc5640">llvm::computeKnownBits</a></div><div class="ttdeci">void computeKnownBits(const Value *V, KnownBits &amp;Known, const DataLayout &amp;DL, unsigned Depth=0, AssumptionCache *AC=nullptr, const Instruction *CxtI=nullptr, const DominatorTree *DT=nullptr, OptimizationRemarkEmitter *ORE=nullptr, bool UseInstrInfo=true)</div><div class="ttdoc">Determine which bits of V are known to be either zero or one and return them in the KnownZero/KnownOn...</div><div class="ttdef"><b>Definition:</b> <a href="ValueTracking_8cpp_source.html#l00186">ValueTracking.cpp:186</a></div></div>
<div class="ttc" id="aIRBuilder_8h_html"><div class="ttname"><a href="IRBuilder_8h.html">IRBuilder.h</a></div></div>
<div class="ttc" id="aSILowerControlFlow_8cpp_html_a4868c5d81c5ccc98c47aeab6244346a0"><div class="ttname"><a href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a></div><div class="ttdeci">assert(ImpDefSCC.getReg()==AMDGPU::SCC &amp;&amp;ImpDefSCC.isDef())</div></div>
<div class="ttc" id="aclassllvm_1_1FPMathOperator_html"><div class="ttname"><a href="classllvm_1_1FPMathOperator.html">llvm::FPMathOperator</a></div><div class="ttdoc">Utility class for floating point operations which can have information about relaxed accuracy require...</div><div class="ttdef"><b>Definition:</b> <a href="Operator_8h_source.html#l00170">Operator.h:170</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_ac3ed5602889a22db44a16e1b97fac5b8"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#ac3ed5602889a22db44a16e1b97fac5b8">llvm::PatternMatch::m_Sub</a></div><div class="ttdeci">BinaryOp_match&lt; LHS, RHS, Instruction::Sub &gt; m_Sub(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00991">PatternMatch.h:991</a></div></div>
<div class="ttc" id="anamespacellvm_html_a9b64313b5c1907066b7bab1c60a2ea08"><div class="ttname"><a href="namespacellvm.html#a9b64313b5c1907066b7bab1c60a2ea08">llvm::drop_end</a></div><div class="ttdeci">auto drop_end(T &amp;&amp;RangeOrContainer, size_t N=1)</div><div class="ttdoc">Return a range covering RangeOrContainer with the last N elements excluded.</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l00393">STLExtras.h:393</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a5cfdb1cd5ccaae5daa8e4b29b3bb6b82"><div class="ttname"><a href="classllvm_1_1Type.html#a5cfdb1cd5ccaae5daa8e4b29b3bb6b82">llvm::Type::getArrayNumElements</a></div><div class="ttdeci">uint64_t getArrayNumElements() const</div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00384">DerivedTypes.h:384</a></div></div>
<div class="ttc" id="anamespacestd_html_ab8424022895aee3e366fb9a32f2883cb"><div class="ttname"><a href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a></div><div class="ttdeci">void swap(llvm::BitVector &amp;LHS, llvm::BitVector &amp;RHS)</div><div class="ttdoc">Implement std::swap in terms of BitVector swap.</div><div class="ttdef"><b>Definition:</b> <a href="BitVector_8h_source.html#l00853">BitVector.h:853</a></div></div>
<div class="ttc" id="anamespacellvm_html_a24243d0f6646560894f96b01fddfc6da"><div class="ttname"><a href="namespacellvm.html#a24243d0f6646560894f96b01fddfc6da">llvm::salvageDebugInfoForDbgValues</a></div><div class="ttdeci">void salvageDebugInfoForDbgValues(Instruction &amp;I, ArrayRef&lt; DbgVariableIntrinsic * &gt; Insns)</div><div class="ttdoc">Implementation of salvageDebugInfo, applying only to instructions in Insns, rather than all debug use...</div><div class="ttdef"><b>Definition:</b> <a href="Transforms_2Utils_2Local_8cpp_source.html#l01865">Local.cpp:1865</a></div></div>
<div class="ttc" id="alib_2Target_2ARM_2README_8txt_html_ae2bb081d94f22e64ca6bc4bd58512a93"><div class="ttname"><a href="lib_2Target_2ARM_2README_8txt.html#ae2bb081d94f22e64ca6bc4bd58512a93">memcpy</a></div><div class="ttdeci">&lt;%struct.s * &gt; cast struct s *S to sbyte *&lt; sbyte * &gt; sbyte uint cast struct s *agg result to sbyte *&lt; sbyte * &gt; sbyte uint cast struct s *memtmp to sbyte *&lt; sbyte * &gt; sbyte uint ret void llc ends up issuing two memcpy or custom lower memcpy(of small size) to be ldmia/stmia. I think option 2 is better but the current register allocator cannot allocate a chunk of registers at a time. A feasible temporary solution is to use specific physical registers at the lowering time for small(&lt;</div></div>
<div class="ttc" id="aclassllvm_1_1ConstantExpr_html_a49b69843927f7cd96d866768b3aec92b"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#a49b69843927f7cd96d866768b3aec92b">llvm::ConstantExpr::getCast</a></div><div class="ttdeci">static Constant * getCast(unsigned ops, Constant *C, Type *Ty, bool OnlyIfReduced=false)</div><div class="ttdoc">Convenience function for getting a Cast operation.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l01973">Constants.cpp:1973</a></div></div>
<div class="ttc" id="aclassllvm_1_1generic__gep__type__iterator_html_aeb7ef34c0b96c3130c0029e648e2bd08"><div class="ttname"><a href="classllvm_1_1generic__gep__type__iterator.html#aeb7ef34c0b96c3130c0029e648e2bd08">llvm::generic_gep_type_iterator::getIndexedType</a></div><div class="ttdeci">Type * getIndexedType() const</div><div class="ttdef"><b>Definition:</b> <a href="GetElementPtrTypeIterator_8h_source.html#l00070">GetElementPtrTypeIterator.h:70</a></div></div>
<div class="ttc" id="astructllvm_1_1KnownBits_html_a7f47812e8e75b0616a97d7004e5fb909"><div class="ttname"><a href="structllvm_1_1KnownBits.html#a7f47812e8e75b0616a97d7004e5fb909">llvm::KnownBits::countMinLeadingZeros</a></div><div class="ttdeci">unsigned countMinLeadingZeros() const</div><div class="ttdoc">Returns the minimum number of leading zero bits.</div><div class="ttdef"><b>Definition:</b> <a href="KnownBits_8h_source.html#l00243">KnownBits.h:243</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a9a167f91db810097d281b1ed627f4575"><div class="ttname"><a href="classllvm_1_1Instruction.html#a9a167f91db810097d281b1ed627f4575">llvm::Instruction::getFastMathFlags</a></div><div class="ttdeci">FastMathFlags getFastMathFlags() const LLVM_READONLY</div><div class="ttdoc">Convenience function for getting all the fast-math flags, which must be an operator which supports th...</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8cpp_source.html#l00339">Instruction.cpp:339</a></div></div>
<div class="ttc" id="aclassllvm_1_1SelectInst_html"><div class="ttname"><a href="classllvm_1_1SelectInst.html">llvm::SelectInst</a></div><div class="ttdoc">This class represents the LLVM 'select' instruction.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01746">Instructions.h:1746</a></div></div>
<div class="ttc" id="aMemDepPrinter_8cpp_html_a470d8721ad7c3b718e9daeabdaeb4700"><div class="ttname"><a href="MemDepPrinter_8cpp.html#a470d8721ad7c3b718e9daeabdaeb4700">function</a></div><div class="ttdeci">print Print MemDeps of function</div><div class="ttdef"><b>Definition:</b> <a href="MemDepPrinter_8cpp_source.html#l00082">MemDepPrinter.cpp:82</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a300db8bf3acf4b1cff9a56ae53a8727c"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a300db8bf3acf4b1cff9a56ae53a8727c">llvm::PatternMatch::m_ConstantExpr</a></div><div class="ttdeci">constantexpr_match m_ConstantExpr()</div><div class="ttdoc">Match a constant expression or a constant that contains a constant expression.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00165">PatternMatch.h:165</a></div></div>
<div class="ttc" id="astructllvm_1_1SimplifyQuery_html_aaf05c1194f5c7869a00434c13c46c228"><div class="ttname"><a href="structllvm_1_1SimplifyQuery.html#aaf05c1194f5c7869a00434c13c46c228">llvm::SimplifyQuery::getWithInstruction</a></div><div class="ttdeci">SimplifyQuery getWithInstruction(Instruction *I) const</div><div class="ttdef"><b>Definition:</b> <a href="InstructionSimplify_8h_source.html#l00120">InstructionSimplify.h:120</a></div></div>
<div class="ttc" id="aclassllvm_1_1ArrayType_html_adf411edc4f135b570ab218079474ce77"><div class="ttname"><a href="classllvm_1_1ArrayType.html#adf411edc4f135b570ab218079474ce77">llvm::ArrayType::get</a></div><div class="ttdeci">static ArrayType * get(Type *ElementType, uint64_t NumElements)</div><div class="ttdoc">This static method is the primary way to construct an ArrayType.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00640">Type.cpp:640</a></div></div>
<div class="ttc" id="aclassllvm_1_1AssumptionCache_html_a7f02822253b078960693acc2f30d4817"><div class="ttname"><a href="classllvm_1_1AssumptionCache.html#a7f02822253b078960693acc2f30d4817">llvm::AssumptionCache::registerAssumption</a></div><div class="ttdeci">void registerAssumption(CondGuardInst *CI)</div><div class="ttdoc">Add an @llvm.assume intrinsic to this function's cache.</div><div class="ttdef"><b>Definition:</b> <a href="AssumptionCache_8cpp_source.html#l00231">AssumptionCache.cpp:231</a></div></div>
<div class="ttc" id="anamespacellvm_html_a5e0af1b16cab9e0efc63a6ce9de2b9cc"><div class="ttname"><a href="namespacellvm.html#a5e0af1b16cab9e0efc63a6ce9de2b9cc">llvm::simplifyAddInst</a></div><div class="ttdeci">Value * simplifyAddInst(Value *LHS, Value *RHS, bool IsNSW, bool IsNUW, const SimplifyQuery &amp;Q)</div><div class="ttdoc">Given operands for an Add, fold the result or return null.</div><div class="ttdef"><b>Definition:</b> <a href="InstructionSimplify_8cpp_source.html#l00698">InstructionSimplify.cpp:698</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstructionCombiningPass_html_ad5db0c25b136012cb2e8ac3fa98318da"><div class="ttname"><a href="classllvm_1_1InstructionCombiningPass.html#ad5db0c25b136012cb2e8ac3fa98318da">llvm::InstructionCombiningPass::ID</a></div><div class="ttdeci">static char ID</div><div class="ttdef"><b>Definition:</b> <a href="Transforms_2InstCombine_2InstCombine_8h_source.html#l00048">InstCombine.h:48</a></div></div>
<div class="ttc" id="aInstructionCombining_8cpp_html_ae4125133d683a4652b396ec3b18cd92e"><div class="ttname"><a href="InstructionCombining_8cpp.html#ae4125133d683a4652b396ec3b18cd92e">isCatchAll</a></div><div class="ttdeci">static bool isCatchAll(EHPersonality Personality, Constant *TypeInfo)</div><div class="ttdoc">Return 'true' if the given typeinfo will match anything.</div><div class="ttdef"><b>Definition:</b> <a href="InstructionCombining_8cpp_source.html#l03459">InstructionCombining.cpp:3459</a></div></div>
<div class="ttc" id="aclassllvm_1_1Module_html"><div class="ttname"><a href="classllvm_1_1Module.html">llvm::Module</a></div><div class="ttdoc">A Module instance is used to store all the information related to an LLVM module.</div><div class="ttdef"><b>Definition:</b> <a href="Module_8h_source.html#l00065">Module.h:65</a></div></div>
<div class="ttc" id="aclassllvm_1_1MDNode_html"><div class="ttname"><a href="classllvm_1_1MDNode.html">llvm::MDNode</a></div><div class="ttdoc">Metadata node.</div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8h_source.html#l00943">Metadata.h:943</a></div></div>
<div class="ttc" id="aInstructionCombining_8cpp_html_a8b7341c151ccd1237c50ae5d7558920b"><div class="ttname"><a href="InstructionCombining_8cpp.html#a8b7341c151ccd1237c50ae5d7558920b">InstCombineDefaultMaxIterations</a></div><div class="ttdeci">static constexpr unsigned InstCombineDefaultMaxIterations</div><div class="ttdef"><b>Definition:</b> <a href="InstructionCombining_8cpp_source.html#l00132">InstructionCombining.cpp:132</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_aadd209ba7e1bfa8113a609e09a7fe62f"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#aadd209ba7e1bfa8113a609e09a7fe62f">llvm::PatternMatch::m_Constant</a></div><div class="ttdeci">class_match&lt; Constant &gt; m_Constant()</div><div class="ttdoc">Match an arbitrary Constant and ignore it.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00144">PatternMatch.h:144</a></div></div>
<div class="ttc" id="aclassllvm_1_1IRBuilderCallbackInserter_html"><div class="ttname"><a href="classllvm_1_1IRBuilderCallbackInserter.html">llvm::IRBuilderCallbackInserter</a></div><div class="ttdoc">Provides an 'InsertHelper' that calls a user-provided callback after performing the default insertion...</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l00076">IRBuilder.h:76</a></div></div>
<div class="ttc" id="aVPlanSLP_8cpp_html_af04704e906a9654777e92a4612c58c13"><div class="ttname"><a href="VPlanSLP_8cpp.html#af04704e906a9654777e92a4612c58c13">getOpcode</a></div><div class="ttdeci">static std::optional&lt; unsigned &gt; getOpcode(ArrayRef&lt; VPValue * &gt; Values)</div><div class="ttdoc">Returns the opcode of Values or ~0 if they do not all agree.</div><div class="ttdef"><b>Definition:</b> <a href="VPlanSLP_8cpp_source.html#l00191">VPlanSLP.cpp:191</a></div></div>
<div class="ttc" id="anamespacellvm_html_a5d56157a385f8cd7d3e54ed87da1ba6aa05b0e25c98ba4300ca28989a35dab72a"><div class="ttname"><a href="namespacellvm.html#a5d56157a385f8cd7d3e54ed87da1ba6aa05b0e25c98ba4300ca28989a35dab72a">llvm::EHPersonality::CoreCLR</a></div><div class="ttdeci">@ CoreCLR</div></div>
<div class="ttc" id="aclassllvm_1_1GEPOperator_html"><div class="ttname"><a href="classllvm_1_1GEPOperator.html">llvm::GEPOperator</a></div><div class="ttdef"><b>Definition:</b> <a href="Operator_8h_source.html#l00378">Operator.h:378</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_a91100900b6eb1ae18127f1e1f8f8a40e"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#a91100900b6eb1ae18127f1e1f8f8a40e">llvm::InstCombinerImpl::visitSwitchInst</a></div><div class="ttdeci">Instruction * visitSwitchInst(SwitchInst &amp;SI)</div><div class="ttdef"><b>Definition:</b> <a href="InstructionCombining_8cpp_source.html#l03224">InstructionCombining.cpp:3224</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSetImpl_html_a1f475b0df44ebd7169e720fa1bf9169e"><div class="ttname"><a href="classllvm_1_1SmallPtrSetImpl.html#a1f475b0df44ebd7169e720fa1bf9169e">llvm::SmallPtrSetImpl::count</a></div><div class="ttdeci">size_type count(ConstPtrType Ptr) const</div><div class="ttdoc">count - Return 1 if the specified pointer is in the set, 0 otherwise.</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00383">SmallPtrSet.h:383</a></div></div>
<div class="ttc" id="aAssumeBundleBuilder_8cpp_html_afb136e0532bcaed86521b462e6538d62"><div class="ttname"><a href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a></div><div class="ttdeci">assume Assume Builder</div><div class="ttdef"><b>Definition:</b> <a href="AssumeBundleBuilder_8cpp_source.html#l00651">AssumeBundleBuilder.cpp:651</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchInst_html_ad56f6a9b5cd05940017c4544df48bc30"><div class="ttname"><a href="classllvm_1_1BranchInst.html#ad56f6a9b5cd05940017c4544df48bc30">llvm::BranchInst::isUnconditional</a></div><div class="ttdeci">bool isUnconditional() const</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03217">Instructions.h:3217</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a24bca8838396aa81b87de8e7ac774b19"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">llvm::PatternMatch::m_Value</a></div><div class="ttdeci">class_match&lt; Value &gt; m_Value()</div><div class="ttdoc">Match an arbitrary value and ignore it.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00076">PatternMatch.h:76</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html"><div class="ttname"><a href="classllvm_1_1APInt.html">llvm::APInt</a></div><div class="ttdoc">Class for arbitrary precision integers.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00075">APInt.h:75</a></div></div>
<div class="ttc" id="agroup__LLVMCSupportTypes_html_ga45fccfac9832f829c5e12a8915e85f4c"><div class="ttname"><a href="group__LLVMCSupportTypes.html#ga45fccfac9832f829c5e12a8915e85f4c">LLVMPassManagerRef</a></div><div class="ttdeci">struct LLVMOpaquePassManager * LLVMPassManagerRef</div><div class="ttdef"><b>Definition:</b> <a href="Types_8h_source.html#l00127">Types.h:127</a></div></div>
<div class="ttc" id="aM68kELFObjectWriter_8cpp_html_ae4a8bc3879d2282eefd72b16b12c2a37"><div class="ttname"><a href="M68kELFObjectWriter_8cpp.html#ae4a8bc3879d2282eefd72b16b12c2a37">getType</a></div><div class="ttdeci">static M68kRelType getType(unsigned Kind, MCSymbolRefExpr::VariantKind &amp;Modifier, bool &amp;IsPCRel)</div><div class="ttdef"><b>Definition:</b> <a href="M68kELFObjectWriter_8cpp_source.html#l00048">M68kELFObjectWriter.cpp:48</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_acbf4c17d9f1b9f6729602a3c2a6c5b9d"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#acbf4c17d9f1b9f6729602a3c2a6c5b9d">llvm::InstCombinerImpl::foldVectorBinop</a></div><div class="ttdeci">Instruction * foldVectorBinop(BinaryOperator &amp;Inst)</div><div class="ttdoc">Canonicalize the position of binops relative to shufflevector.</div><div class="ttdef"><b>Definition:</b> <a href="InstructionCombining_8cpp_source.html#l01651">InstructionCombining.cpp:1651</a></div></div>
<div class="ttc" id="aAnalysis_2CFG_8h_html"><div class="ttname"><a href="Analysis_2CFG_8h.html">CFG.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1GetElementPtrInst_html_a74c47d18ecd4ca3399785e6ae07134dc"><div class="ttname"><a href="classllvm_1_1GetElementPtrInst.html#a74c47d18ecd4ca3399785e6ae07134dc">llvm::GetElementPtrInst::Create</a></div><div class="ttdeci">static GetElementPtrInst * Create(Type *PointeeType, Value *Ptr, ArrayRef&lt; Value * &gt; IdxList, const Twine &amp;NameStr=&quot;&quot;, Instruction *InsertBefore=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00966">Instructions.h:966</a></div></div>
<div class="ttc" id="aclassllvm_1_1ProfileSummaryAnalysis_html"><div class="ttname"><a href="classllvm_1_1ProfileSummaryAnalysis.html">llvm::ProfileSummaryAnalysis</a></div><div class="ttdoc">An analysis pass based on the new PM to deliver ProfileSummaryInfo.</div><div class="ttdef"><b>Definition:</b> <a href="ProfileSummaryInfo_8h_source.html#l00212">ProfileSummaryInfo.h:212</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_aaab494a433fbb23bc68393ee8bcfc5ac"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#aaab494a433fbb23bc68393ee8bcfc5ac">llvm::PatternMatch::m_SExt</a></div><div class="ttdeci">CastClass_match&lt; OpTy, Instruction::SExt &gt; m_SExt(const OpTy &amp;Op)</div><div class="ttdoc">Matches SExt.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01623">PatternMatch.h:1623</a></div></div>
<div class="ttc" id="anamespacellvm_html_a72278be77e997abc4b0dbde1be280006"><div class="ttname"><a href="namespacellvm.html#a72278be77e997abc4b0dbde1be280006">llvm::ConstantFoldInstOperands</a></div><div class="ttdeci">Constant * ConstantFoldInstOperands(Instruction *I, ArrayRef&lt; Constant * &gt; Ops, const DataLayout &amp;DL, const TargetLibraryInfo *TLI=nullptr)</div><div class="ttdoc">ConstantFoldInstOperands - Attempt to constant fold an instruction with the specified operands.</div><div class="ttdef"><b>Definition:</b> <a href="ConstantFolding_8cpp_source.html#l01209">ConstantFolding.cpp:1209</a></div></div>
<div class="ttc" id="aclassllvm_1_1AssumptionCacheTracker_html"><div class="ttname"><a href="classllvm_1_1AssumptionCacheTracker.html">llvm::AssumptionCacheTracker</a></div><div class="ttdoc">An immutable pass that tracks lazily created AssumptionCache objects.</div><div class="ttdef"><b>Definition:</b> <a href="AssumptionCache_8h_source.html#l00202">AssumptionCache.h:202</a></div></div>
<div class="ttc" id="aclassllvm_1_1ArrayRef_html"><div class="ttname"><a href="classllvm_1_1ArrayRef.html">llvm::ArrayRef&lt; int &gt;</a></div></div>
<div class="ttc" id="anamespacellvm_html_a627b2f86ac433d829482d5a5a0f50668"><div class="ttname"><a href="namespacellvm.html#a627b2f86ac433d829482d5a5a0f50668">llvm::isInstructionTriviallyDead</a></div><div class="ttdeci">bool isInstructionTriviallyDead(Instruction *I, const TargetLibraryInfo *TLI=nullptr)</div><div class="ttdoc">Return true if the result produced by the instruction is not used, and the instruction will return.</div><div class="ttdef"><b>Definition:</b> <a href="Transforms_2Utils_2Local_8cpp_source.html#l00398">Local.cpp:398</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopInfo_html"><div class="ttname"><a href="classllvm_1_1LoopInfo.html">llvm::LoopInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l01108">LoopInfo.h:1108</a></div></div>
<div class="ttc" id="aclassllvm_1_1BinaryOperator_html"><div class="ttname"><a href="classllvm_1_1BinaryOperator.html">llvm::BinaryOperator</a></div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00187">InstrTypes.h:187</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_ae324de5041feaf7eb8433221cdaca9aa"><div class="ttname"><a href="classllvm_1_1APInt.html#ae324de5041feaf7eb8433221cdaca9aa">llvm::APInt::ssub_ov</a></div><div class="ttdeci">APInt ssub_ov(const APInt &amp;RHS, bool &amp;Overflow) const</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8cpp_source.html#l01939">APInt.cpp:1939</a></div></div>
<div class="ttc" id="aclassllvm_1_1OptimizationRemarkEmitter_html"><div class="ttname"><a href="classllvm_1_1OptimizationRemarkEmitter.html">llvm::OptimizationRemarkEmitter</a></div><div class="ttdoc">The optimization diagnostic interface.</div><div class="ttdef"><b>Definition:</b> <a href="OptimizationRemarkEmitter_8h_source.html#l00033">OptimizationRemarkEmitter.h:33</a></div></div>
<div class="ttc" id="anamespacellvm_html_a57f2ca0e57f4f7b13f56f9aa16af3e0d"><div class="ttname"><a href="namespacellvm.html#a57f2ca0e57f4f7b13f56f9aa16af3e0d">llvm::min</a></div><div class="ttdeci">Expected&lt; ExpressionValue &gt; min(const ExpressionValue &amp;Lhs, const ExpressionValue &amp;Rhs)</div><div class="ttdef"><b>Definition:</b> <a href="FileCheck_8cpp_source.html#l00357">FileCheck.cpp:357</a></div></div>
<div class="ttc" id="aX86PartialReduction_8cpp_html_ae0f503db91504a3f3440ab81260e4134"><div class="ttname"><a href="X86PartialReduction_8cpp.html#ae0f503db91504a3f3440ab81260e4134">Mul</a></div><div class="ttdeci">BinaryOperator * Mul</div><div class="ttdef"><b>Definition:</b> <a href="X86PartialReduction_8cpp_source.html#l00070">X86PartialReduction.cpp:70</a></div></div>
<div class="ttc" id="aDataLayout_8h_html"><div class="ttname"><a href="DataLayout_8h.html">DataLayout.h</a></div></div>
<div class="ttc" id="aBasicBlockSections_8cpp_html_a5fd0741d696f28faf65b33f6c6af8fda"><div class="ttname"><a href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a></div><div class="ttdeci">SmallVector&lt; MachineOperand, 4 &gt; Cond</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlockSections_8cpp_source.html#l00137">BasicBlockSections.cpp:137</a></div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisUsage_html_af11a6ebf7ab3c388234cb6d5378439a3"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html#af11a6ebf7ab3c388234cb6d5378439a3">llvm::AnalysisUsage::setPreservesCFG</a></div><div class="ttdeci">void setPreservesCFG()</div><div class="ttdoc">This function should be called by the pass, iff they do not:</div><div class="ttdef"><b>Definition:</b> <a href="Pass_8cpp_source.html#l00265">Pass.cpp:265</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_adea6dc2e42baa345b97be48b0370313d"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#adea6dc2e42baa345b97be48b0370313d">llvm::PatternMatch::m_Undef</a></div><div class="ttdeci">auto m_Undef()</div><div class="ttdoc">Match an arbitrary undef constant.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00136">PatternMatch.h:136</a></div></div>
<div class="ttc" id="aclassllvm_1_1AssumptionCache_html"><div class="ttname"><a href="classllvm_1_1AssumptionCache.html">llvm::AssumptionCache</a></div><div class="ttdoc">A cache of @llvm.assume calls within a function.</div><div class="ttdef"><b>Definition:</b> <a href="AssumptionCache_8h_source.html#l00042">AssumptionCache.h:42</a></div></div>
<div class="ttc" id="anamespacellvm_html_a5d56157a385f8cd7d3e54ed87da1ba6aa5fe2b2d01019e4b6a9828d4b9820a7ce"><div class="ttname"><a href="namespacellvm.html#a5d56157a385f8cd7d3e54ed87da1ba6aa5fe2b2d01019e4b6a9828d4b9820a7ce">llvm::EHPersonality::MSVC_TableSEH</a></div><div class="ttdeci">@ MSVC_TableSEH</div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e">llvm::CmpInst::ICMP_ULT</a></div><div class="ttdeci">@ ICMP_ULT</div><div class="ttdoc">unsigned less than</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00743">InstrTypes.h:743</a></div></div>
<div class="ttc" id="anamespacellvm_1_1logicalview_html_a9696bc411b0a7022c2cc78bff5173cefad7ed4ee1df437474d005188535f74875"><div class="ttname"><a href="namespacellvm_1_1logicalview.html#a9696bc411b0a7022c2cc78bff5173cefad7ed4ee1df437474d005188535f74875">llvm::logicalview::LVAttributeKind::Zero</a></div><div class="ttdeci">@ Zero</div></div>
<div class="ttc" id="anamespacellvm_html_a5d56157a385f8cd7d3e54ed87da1ba6aac19ef91dbd2fa5148e96a750c2b5c4cb"><div class="ttname"><a href="namespacellvm.html#a5d56157a385f8cd7d3e54ed87da1ba6aac19ef91dbd2fa5148e96a750c2b5c4cb">llvm::EHPersonality::GNU_CXX</a></div><div class="ttdeci">@ GNU_CXX</div></div>
<div class="ttc" id="aInstructionCombining_8cpp_html_acdf91a4a325f4977bb6f85de560fe9f7"><div class="ttname"><a href="InstructionCombining_8cpp.html#acdf91a4a325f4977bb6f85de560fe9f7">tryToMoveFreeBeforeNullTest</a></div><div class="ttdeci">static Instruction * tryToMoveFreeBeforeNullTest(CallInst &amp;FI, const DataLayout &amp;DL)</div><div class="ttdoc">Move the call to free before a NULL test.</div><div class="ttdef"><b>Definition:</b> <a href="InstructionCombining_8cpp_source.html#l02968">InstructionCombining.cpp:2968</a></div></div>
<div class="ttc" id="aSupport_2ErrorHandling_8h_html_ace243f5c25697a1107cce46626b3dc94"><div class="ttname"><a href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a></div><div class="ttdeci">#define llvm_unreachable(msg)</div><div class="ttdoc">Marks that the current location is not supposed to be reachable.</div><div class="ttdef"><b>Definition:</b> <a href="Support_2ErrorHandling_8h_source.html#l00143">ErrorHandling.h:143</a></div></div>
<div class="ttc" id="aclassllvm_1_1Constant_html_acd530d0571f320d47d37e7ae51cf70ff"><div class="ttname"><a href="classllvm_1_1Constant.html#acd530d0571f320d47d37e7ae51cf70ff">llvm::Constant::getAggregateElement</a></div><div class="ttdeci">Constant * getAggregateElement(unsigned Elt) const</div><div class="ttdoc">For aggregates (struct/array/vector) return the constant that corresponds to the specified element if...</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00418">Constants.cpp:418</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_a6393a2d4fe7e10b28a0dcc35f881567b"><div class="ttname"><a href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">llvm::Value::getType</a></div><div class="ttdeci">Type * getType() const</div><div class="ttdoc">All values are typed, get the type of this value.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00255">Value.h:255</a></div></div>
<div class="ttc" id="aclassllvm_1_1CFGAnalyses_html"><div class="ttname"><a href="classllvm_1_1CFGAnalyses.html">llvm::CFGAnalyses</a></div><div class="ttdoc">Represents analyses that only rely on functions' control flow.</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00113">PassManager.h:113</a></div></div>
<div class="ttc" id="anamespacellvm_html_a5d56157a385f8cd7d3e54ed87da1ba6aac3cb0fb563149ec44c47b526c7b0a0d2"><div class="ttname"><a href="namespacellvm.html#a5d56157a385f8cd7d3e54ed87da1ba6aac3cb0fb563149ec44c47b526c7b0a0d2">llvm::EHPersonality::XL_CXX</a></div><div class="ttdeci">@ XL_CXX</div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a74aa9daea070e2ad3394a3ec58b7316a"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a74aa9daea070e2ad3394a3ec58b7316a">llvm::BasicBlock::getUniquePredecessor</a></div><div class="ttdeci">const BasicBlock * getUniquePredecessor() const</div><div class="ttdoc">Return the predecessor of this block if it has a unique predecessor block.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00292">BasicBlock.cpp:292</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a6a66ebb3aa12757479a3c88de77d78f8"><div class="ttname"><a href="classllvm_1_1Instruction.html#a6a66ebb3aa12757479a3c88de77d78f8">llvm::Instruction::getFunction</a></div><div class="ttdeci">const Function * getFunction() const</div><div class="ttdoc">Return the function this instruction belongs to.</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8cpp_source.html#l00074">Instruction.cpp:74</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_afd3e8a6706810fef8cdbaf1f9f40dfbd"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#afd3e8a6706810fef8cdbaf1f9f40dfbd">llvm::PatternMatch::m_Shuffle</a></div><div class="ttdeci">TwoOps_match&lt; V1_t, V2_t, Instruction::ShuffleVector &gt; m_Shuffle(const V1_t &amp;v1, const V2_t &amp;v2)</div><div class="ttdoc">Matches ShuffleVectorInst independently of mask value.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01551">PatternMatch.h:1551</a></div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisUsage_html_a884f90190bca4bd354f2d5c91c264028"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html#a884f90190bca4bd354f2d5c91c264028">llvm::AnalysisUsage::addPreserved</a></div><div class="ttdeci">AnalysisUsage &amp; addPreserved()</div><div class="ttdoc">Add the specified Pass class to the set of analyses preserved by this pass.</div><div class="ttdef"><b>Definition:</b> <a href="PassAnalysisSupport_8h_source.html#l00098">PassAnalysisSupport.h:98</a></div></div>
<div class="ttc" id="aBasicAliasAnalysis_8cpp_html_a2675de1d8479c7b00387979714da43f7"><div class="ttname"><a href="BasicAliasAnalysis_8cpp.html#a2675de1d8479c7b00387979714da43f7">getParent</a></div><div class="ttdeci">static const Function * getParent(const Value *V)</div><div class="ttdef"><b>Definition:</b> <a href="BasicAliasAnalysis_8cpp_source.html#l00806">BasicAliasAnalysis.cpp:806</a></div></div>
<div class="ttc" id="aCompiler_8h_html"><div class="ttname"><a href="Compiler_8h.html">Compiler.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_a39d3d23a084c4544ee5903203db10e8a"><div class="ttname"><a href="namespacellvm.html#a39d3d23a084c4544ee5903203db10e8a">llvm::append_range</a></div><div class="ttdeci">void append_range(Container &amp;C, Range &amp;&amp;R)</div><div class="ttdoc">Wrapper function to append a range to a container.</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l02014">STLExtras.h:2014</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_ab3fc0225d8aaf8434026c3573f961f2c"><div class="ttname"><a href="classllvm_1_1Value.html#ab3fc0225d8aaf8434026c3573f961f2c">llvm::Value::getContext</a></div><div class="ttdeci">LLVMContext &amp; getContext() const</div><div class="ttdoc">All values hold a context through their type.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00994">Value.cpp:994</a></div></div>
<div class="ttc" id="aclassllvm_1_1IRBuilderBase_1_1InsertPointGuard_html"><div class="ttname"><a href="classllvm_1_1IRBuilderBase_1_1InsertPointGuard.html">llvm::IRBuilderBase::InsertPointGuard</a></div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l00361">IRBuilder.h:361</a></div></div>
<div class="ttc" id="aclassllvm_1_1ilist__node__impl_html_af719fc783be6589465137d997701a432"><div class="ttname"><a href="classllvm_1_1ilist__node__impl.html#af719fc783be6589465137d997701a432">llvm::ilist_node_impl::getIterator</a></div><div class="ttdeci">self_iterator getIterator()</div><div class="ttdef"><b>Definition:</b> <a href="ilist__node_8h_source.html#l00082">ilist_node.h:82</a></div></div>
<div class="ttc" id="aAArch64SLSHardening_8cpp_html_ad467c4ab9119043f9b7750ab986be61a"><div class="ttname"><a href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a></div><div class="ttdeci">MachineBasicBlock MachineBasicBlock::iterator DebugLoc DL</div><div class="ttdef"><b>Definition:</b> <a href="AArch64SLSHardening_8cpp_source.html#l00076">AArch64SLSHardening.cpp:76</a></div></div>
<div class="ttc" id="aclassllvm_1_1LandingPadInst_html_a794866f5c0f6877de0b1dd863ceaf93e"><div class="ttname"><a href="classllvm_1_1LandingPadInst.html#a794866f5c0f6877de0b1dd863ceaf93e">llvm::LandingPadInst::isFilter</a></div><div class="ttdeci">bool isFilter(unsigned Idx) const</div><div class="ttdoc">Return 'true' if the clause and index Idx is a filter clause.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03023">Instructions.h:3023</a></div></div>
<div class="ttc" id="aAnalysis_2Utils_2Local_8h_html"><div class="ttname"><a href="Analysis_2Utils_2Local_8h.html">Local.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html_af19ee1ec74467c699edd48f422b907a7"><div class="ttname"><a href="classllvm_1_1Function.html#af19ee1ec74467c699edd48f422b907a7">llvm::Function::isTargetIntrinsic</a></div><div class="ttdeci">static bool isTargetIntrinsic(Intrinsic::ID IID)</div><div class="ttdoc">isTargetIntrinsic - Returns true if IID is an intrinsic specific to a certain target.</div><div class="ttdef"><b>Definition:</b> <a href="Function_8cpp_source.html#l00827">Function.cpp:827</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantVector_html_ade9fa017ca3aa82f7694a47090547bc1"><div class="ttname"><a href="classllvm_1_1ConstantVector.html#ade9fa017ca3aa82f7694a47090547bc1">llvm::ConstantVector::get</a></div><div class="ttdeci">static Constant * get(ArrayRef&lt; Constant * &gt; V)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l01356">Constants.cpp:1356</a></div></div>
<div class="ttc" id="aclassllvm_1_1CastInst_html"><div class="ttname"><a href="classllvm_1_1CastInst.html">llvm::CastInst</a></div><div class="ttdoc">This is the base class for all instructions that perform data casts.</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00428">InstrTypes.h:428</a></div></div>
<div class="ttc" id="aBlockFrequencyInfo_8h_html"><div class="ttname"><a href="BlockFrequencyInfo_8h.html">BlockFrequencyInfo.h</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AMDGPUISD_html_a739d53294bc38cd6b0b23332f9994c0eafbca76f7875e080d97cee761de04d996"><div class="ttname"><a href="namespacellvm_1_1AMDGPUISD.html#a739d53294bc38cd6b0b23332f9994c0eafbca76f7875e080d97cee761de04d996">llvm::AMDGPUISD::BFI</a></div><div class="ttdeci">@ BFI</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPUISelLowering_8h_source.html#l00441">AMDGPUISelLowering.h:441</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_adb5c319f5905c1d3ca9eb5df546388c5"><div class="ttname"><a href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">llvm::Value::getName</a></div><div class="ttdeci">StringRef getName() const</div><div class="ttdoc">Return a constant reference to the value's name.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00308">Value.cpp:308</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a0566221f10834bfcea70965379745a20"><div class="ttname"><a href="classllvm_1_1Type.html#a0566221f10834bfcea70965379745a20">llvm::Type::getContext</a></div><div class="ttdeci">LLVMContext &amp; getContext() const</div><div class="ttdoc">Return the LLVMContext in which this type was uniqued.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00129">Type.h:129</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoadInst_html"><div class="ttname"><a href="classllvm_1_1LoadInst.html">llvm::LoadInst</a></div><div class="ttdoc">An instruction for reading from memory.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00177">Instructions.h:177</a></div></div>
<div class="ttc" id="ac_2Transforms_2InstCombine_8h_html"><div class="ttname"><a href="c_2Transforms_2InstCombine_8h.html">InstCombine.h</a></div></div>
<div class="ttc" id="aValueHandle_8h_html"><div class="ttname"><a href="ValueHandle_8h.html">ValueHandle.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_a5d56157a385f8cd7d3e54ed87da1ba6a"><div class="ttname"><a href="namespacellvm.html#a5d56157a385f8cd7d3e54ed87da1ba6a">llvm::EHPersonality</a></div><div class="ttdeci">EHPersonality</div><div class="ttdef"><b>Definition:</b> <a href="EHPersonalities_8h_source.html#l00021">EHPersonalities.h:21</a></div></div>
<div class="ttc" id="aclassllvm_1_1Constant_html_a0ebfdc2c511407c9ba517ccde6cad85f"><div class="ttname"><a href="classllvm_1_1Constant.html#a0ebfdc2c511407c9ba517ccde6cad85f">llvm::Constant::stripPointerCasts</a></div><div class="ttdeci">const Constant * stripPointerCasts() const</div><div class="ttdef"><b>Definition:</b> <a href="Constant_8h_source.html#l00213">Constant.h:213</a></div></div>
<div class="ttc" id="anamespacellvm_html_a5d56157a385f8cd7d3e54ed87da1ba6aa1d0ce965d5884b3d11d6f26fac012613"><div class="ttname"><a href="namespacellvm.html#a5d56157a385f8cd7d3e54ed87da1ba6aa1d0ce965d5884b3d11d6f26fac012613">llvm::EHPersonality::MSVC_X86SEH</a></div><div class="ttdeci">@ MSVC_X86SEH</div></div>
<div class="ttc" id="anamespacellvm_1_1Intrinsic_html_aefa39f6b622360ce4e947feb9f671b73"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#aefa39f6b622360ce4e947feb9f671b73">llvm::Intrinsic::getDeclaration</a></div><div class="ttdeci">Function * getDeclaration(Module *M, ID id, ArrayRef&lt; Type * &gt; Tys=std::nullopt)</div><div class="ttdoc">Create or insert an LLVM Function declaration for an intrinsic, and return it.</div><div class="ttdef"><b>Definition:</b> <a href="Function_8cpp_source.html#l01502">Function.cpp:1502</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_a966eb231e7d4e572874d2cb49b18faea"><div class="ttname"><a href="classllvm_1_1Value.html#a966eb231e7d4e572874d2cb49b18faea">llvm::Value::stripPointerCasts</a></div><div class="ttdeci">const Value * stripPointerCasts() const</div><div class="ttdoc">Strip off pointer casts, all-zero GEPs and address space casts.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00685">Value.cpp:685</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantInt_html_aa7cce62ac5cc6df09cce0535874336b7"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#aa7cce62ac5cc6df09cce0535874336b7">llvm::ConstantInt::getFalse</a></div><div class="ttdeci">static ConstantInt * getFalse(LLVMContext &amp;Context)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00842">Constants.cpp:842</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSetImplBase_html_a0e1c3175b0ac22fe3853651c28e1ecb8"><div class="ttname"><a href="classllvm_1_1SmallPtrSetImplBase.html#a0e1c3175b0ac22fe3853651c28e1ecb8">llvm::SmallPtrSetImplBase::size</a></div><div class="ttdeci">size_type size() const</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00093">SmallPtrSet.h:93</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstructionCombiningPass_html_ab64b7e967adeebc9bacc8abd8ddce0c8"><div class="ttname"><a href="classllvm_1_1InstructionCombiningPass.html#ab64b7e967adeebc9bacc8abd8ddce0c8">llvm::InstructionCombiningPass::runOnFunction</a></div><div class="ttdeci">bool runOnFunction(Function &amp;F) override</div><div class="ttdoc">runOnFunction - Virtual method overriden by subclasses to do the per-function processing of the pass.</div><div class="ttdef"><b>Definition:</b> <a href="InstructionCombining_8cpp_source.html#l04698">InstructionCombining.cpp:4698</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallBase_html_aa87fae97a8c702741eca5a95748af49d"><div class="ttname"><a href="classllvm_1_1CallBase.html#aa87fae97a8c702741eca5a95748af49d">llvm::CallBase::doesNotThrow</a></div><div class="ttdeci">bool doesNotThrow() const</div><div class="ttdoc">Determine if the call cannot unwind.</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l01908">InstrTypes.h:1908</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_ae7a4de5d3c7d0f2ba56e3933fb2007bf"><div class="ttname"><a href="classllvm_1_1Value.html#ae7a4de5d3c7d0f2ba56e3933fb2007bf">llvm::Value::stripAndAccumulateInBoundsConstantOffsets</a></div><div class="ttdeci">const Value * stripAndAccumulateInBoundsConstantOffsets(const DataLayout &amp;DL, APInt &amp;Offset) const</div><div class="ttdoc">This is a wrapper around stripAndAccumulateConstantOffsets with the in-bounds requirement set to fals...</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00724">Value.h:724</a></div></div>
<div class="ttc" id="anamespacellvm_html_a5d56157a385f8cd7d3e54ed87da1ba6aa88183b946cc5f0e8c96b2e66e1c74a7e"><div class="ttname"><a href="namespacellvm.html#a5d56157a385f8cd7d3e54ed87da1ba6aa88183b946cc5f0e8c96b2e66e1c74a7e">llvm::EHPersonality::Unknown</a></div><div class="ttdeci">@ Unknown</div></div>
<div class="ttc" id="alib_2Target_2README_8txt_html_a3a76669632041022e6976766a22bd2b0"><div class="ttname"><a href="lib_2Target_2README_8txt.html#a3a76669632041022e6976766a22bd2b0">j</a></div><div class="ttdeci">return j(j&lt;&lt; 16)</div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfo_html_ac17fdac44c73248d9e36df4fd8d93b28"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html#ac17fdac44c73248d9e36df4fd8d93b28">llvm::TargetTransformInfo::simplifyDemandedUseBitsIntrinsic</a></div><div class="ttdeci">std::optional&lt; Value * &gt; simplifyDemandedUseBitsIntrinsic(InstCombiner &amp;IC, IntrinsicInst &amp;II, APInt DemandedMask, KnownBits &amp;Known, bool &amp;KnownBitsComputed) const</div><div class="ttdoc">Can be used to implement target-specific instruction combining.</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8cpp_source.html#l00325">TargetTransformInfo.cpp:325</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a5ca8aa62fa8b3fe5bc0e8fbe5d8b8b7a"><div class="ttname"><a href="classllvm_1_1Instruction.html#a5ca8aa62fa8b3fe5bc0e8fbe5d8b8b7a">llvm::Instruction::setFastMathFlags</a></div><div class="ttdeci">void setFastMathFlags(FastMathFlags FMF)</div><div class="ttdoc">Convenience function for setting multiple fast-math flags on this instruction, which must be an opera...</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8cpp_source.html#l00289">Instruction.cpp:289</a></div></div>
<div class="ttc" id="aConstant_8h_html"><div class="ttname"><a href="Constant_8h.html">Constant.h</a></div></div>
<div class="ttc" id="anamespacellvm_1_1NVPTX_1_1PTXLdStInstCode_html_a91119cbee2be000c528a690252aee07ca24244a27b634ef3e256ab3c64c6fecd4"><div class="ttname"><a href="namespacellvm_1_1NVPTX_1_1PTXLdStInstCode.html#a91119cbee2be000c528a690252aee07ca24244a27b634ef3e256ab3c64c6fecd4">llvm::NVPTX::PTXLdStInstCode::V2</a></div><div class="ttdeci">@ V2</div><div class="ttdef"><b>Definition:</b> <a href="NVPTX_8h_source.html#l00124">NVPTX.h:124</a></div></div>
<div class="ttc" id="aclassllvm_1_1Attribute_html_a7a7458f7bdc291db1a43ad26f149cfed"><div class="ttname"><a href="classllvm_1_1Attribute.html#a7a7458f7bdc291db1a43ad26f149cfed">llvm::Attribute::getDereferenceableBytes</a></div><div class="ttdeci">uint64_t getDereferenceableBytes() const</div><div class="ttdoc">Returns the number of dereferenceable bytes from the dereferenceable attribute.</div><div class="ttdef"><b>Definition:</b> <a href="Attributes_8cpp_source.html#l00348">Attributes.cpp:348</a></div></div>
<div class="ttc" id="aInstructionCombining_8cpp_html_a13d41ea63582902162e0efd8a78a5ad5"><div class="ttname"><a href="InstructionCombining_8cpp.html#a13d41ea63582902162e0efd8a78a5ad5">shorter_filter</a></div><div class="ttdeci">static bool shorter_filter(const Value *LHS, const Value *RHS)</div><div class="ttdef"><b>Definition:</b> <a href="InstructionCombining_8cpp_source.html#l03487">InstructionCombining.cpp:3487</a></div></div>
<div class="ttc" id="aclassllvm_1_1Twine_html"><div class="ttname"><a href="classllvm_1_1Twine.html">llvm::Twine</a></div><div class="ttdoc">Twine - A lightweight data structure for efficiently representing the concatenation of temporary valu...</div><div class="ttdef"><b>Definition:</b> <a href="Twine_8h_source.html#l00081">Twine.h:81</a></div></div>
<div class="ttc" id="aclassllvm_1_1OptimizationRemarkEmitterWrapperPass_html"><div class="ttname"><a href="classllvm_1_1OptimizationRemarkEmitterWrapperPass.html">llvm::OptimizationRemarkEmitterWrapperPass</a></div><div class="ttdoc">OptimizationRemarkEmitter legacy analysis pass.</div><div class="ttdef"><b>Definition:</b> <a href="OptimizationRemarkEmitter_8h_source.html#l00146">OptimizationRemarkEmitter.h:146</a></div></div>
<div class="ttc" id="anamespacellvm_html_a076f93c387f454f0db13d4bc7d4e7f9c"><div class="ttname"><a href="namespacellvm.html#a076f93c387f454f0db13d4bc7d4e7f9c">llvm::stable_sort</a></div><div class="ttdeci">void stable_sort(R &amp;&amp;Range)</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l01948">STLExtras.h:1948</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_aef28063eb280fec69a391dd35c51666e"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#aef28063eb280fec69a391dd35c51666e">llvm::InstCombinerImpl::foldFreezeIntoRecurrence</a></div><div class="ttdeci">Instruction * foldFreezeIntoRecurrence(FreezeInst &amp;I, PHINode *PN)</div><div class="ttdef"><b>Definition:</b> <a href="InstructionCombining_8cpp_source.html#l03864">InstructionCombining.cpp:3864</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantInt_html_a82dbbd8e3688b0bc1eedb338864d0d0c"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#a82dbbd8e3688b0bc1eedb338864d0d0c">llvm::ConstantInt::getTrue</a></div><div class="ttdeci">static ConstantInt * getTrue(LLVMContext &amp;Context)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00835">Constants.cpp:835</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetFolder_html"><div class="ttname"><a href="classllvm_1_1TargetFolder.html">llvm::TargetFolder</a></div><div class="ttdoc">TargetFolder - Create constants with target dependent folding.</div><div class="ttdef"><b>Definition:</b> <a href="TargetFolder_8h_source.html#l00034">TargetFolder.h:34</a></div></div>
<div class="ttc" id="aInstructionCombining_8cpp_html_a2228ce002a49927fac8de298e2cab56b"><div class="ttname"><a href="InstructionCombining_8cpp.html#a2228ce002a49927fac8de298e2cab56b">findElementAtOffset</a></div><div class="ttdeci">static Type * findElementAtOffset(PointerType *PtrTy, int64_t IntOffset, SmallVectorImpl&lt; Value * &gt; &amp;NewIndices, const DataLayout &amp;DL)</div><div class="ttdoc">Given a pointer type and a constant offset, determine whether or not there is a sequence of GEP indic...</div><div class="ttdef"><b>Definition:</b> <a href="InstructionCombining_8cpp_source.html#l01381">InstructionCombining.cpp:1381</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_a317c64fd4cfebc88e79387b3821a629d"><div class="ttname"><a href="classllvm_1_1APInt.html#a317c64fd4cfebc88e79387b3821a629d">llvm::APInt::trunc</a></div><div class="ttdeci">APInt trunc(unsigned width) const</div><div class="ttdoc">Truncate to new width.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8cpp_source.html#l00898">APInt.cpp:898</a></div></div>
<div class="ttc" id="aclassllvm_1_1Constant_html_aa6574d526b3e38a28f688a7bb4325c2c"><div class="ttname"><a href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">llvm::Constant::getNullValue</a></div><div class="ttdeci">static Constant * getNullValue(Type *Ty)</div><div class="ttdoc">Constructor to create a '0' constant of arbitrary type.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00356">Constants.cpp:356</a></div></div>
<div class="ttc" id="astructllvm_1_1KnownBits_html"><div class="ttname"><a href="structllvm_1_1KnownBits.html">llvm::KnownBits</a></div><div class="ttdef"><b>Definition:</b> <a href="KnownBits_8h_source.html#l00023">KnownBits.h:23</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_a1f04e382556a817950fd0390aeaf9b0e"><div class="ttname"><a href="classllvm_1_1APInt.html#a1f04e382556a817950fd0390aeaf9b0e">llvm::APInt::isMinSignedValue</a></div><div class="ttdeci">bool isMinSignedValue() const</div><div class="ttdoc">Determine if this is the smallest signed value.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00415">APInt.h:415</a></div></div>
<div class="ttc" id="aclassAliasScopeTracker_html_a426cdd40c6024520c943e7c3d11f1d78"><div class="ttname"><a href="classAliasScopeTracker.html#a426cdd40c6024520c943e7c3d11f1d78">AliasScopeTracker::isNoAliasScopeDeclDead</a></div><div class="ttdeci">bool isNoAliasScopeDeclDead(Instruction *Inst)</div><div class="ttdef"><b>Definition:</b> <a href="InstructionCombining_8cpp_source.html#l04430">InstructionCombining.cpp:4430</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantExpr_html_afa29f0cd072ab9b3a2630681ffe5760f"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#afa29f0cd072ab9b3a2630681ffe5760f">llvm::ConstantExpr::getNeg</a></div><div class="ttdeci">static Constant * getNeg(Constant *C, bool HasNUW=false, bool HasNSW=false)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l02644">Constants.cpp:2644</a></div></div>
<div class="ttc" id="aclassllvm_1_1CastInst_html_a31d2885660f654b31d8741726c3ea8d9"><div class="ttname"><a href="classllvm_1_1CastInst.html#a31d2885660f654b31d8741726c3ea8d9">llvm::CastInst::CreateBitOrPointerCast</a></div><div class="ttdeci">static CastInst * CreateBitOrPointerCast(Value *S, Type *Ty, const Twine &amp;Name=&quot;&quot;, Instruction *InsertBefore=nullptr)</div><div class="ttdoc">Create a BitCast, a PtrToInt, or an IntToPTr cast instruction.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l03509">Instructions.cpp:3509</a></div></div>
<div class="ttc" id="aInstructionCombining_8cpp_html_af93581c21ffd5eccbb745274f226dbe7"><div class="ttname"><a href="InstructionCombining_8cpp.html#af93581c21ffd5eccbb745274f226dbe7">maintainNoSignedWrap</a></div><div class="ttdeci">static bool maintainNoSignedWrap(BinaryOperator &amp;I, Value *B, Value *C)</div><div class="ttdef"><b>Definition:</b> <a href="InstructionCombining_8cpp_source.html#l00278">InstructionCombining.cpp:278</a></div></div>
<div class="ttc" id="aclassllvm_1_1BinaryOperator_html_af85efaaa4ecdbcac97c45c8351d826b7"><div class="ttname"><a href="classllvm_1_1BinaryOperator.html#af85efaaa4ecdbcac97c45c8351d826b7">llvm::BinaryOperator::CreateNUW</a></div><div class="ttdeci">static BinaryOperator * CreateNUW(BinaryOps Opc, Value *V1, Value *V2, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00301">InstrTypes.h:301</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AMDGPU_1_1SendMsg_html_a8594419a4ddfad2c9a79279c490e466d"><div class="ttname"><a href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">llvm::AMDGPU::SendMsg::Op</a></div><div class="ttdeci">Op</div><div class="ttdef"><b>Definition:</b> <a href="SIDefines_8h_source.html#l00357">SIDefines.h:357</a></div></div>
<div class="ttc" id="aclassllvm_1_1PreservedAnalyses_html_a1258a1ff55557c27684010ebd7283712"><div class="ttname"><a href="classllvm_1_1PreservedAnalyses.html#a1258a1ff55557c27684010ebd7283712">llvm::PreservedAnalyses::all</a></div><div class="ttdeci">static PreservedAnalyses all()</div><div class="ttdoc">Construct a special preserved set that preserves all passes.</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00158">PassManager.h:158</a></div></div>
<div class="ttc" id="aclassllvm_1_1PHINode_html_ab0ff669b12c20c07137705c38872ec63"><div class="ttname"><a href="classllvm_1_1PHINode.html#ab0ff669b12c20c07137705c38872ec63">llvm::PHINode::Create</a></div><div class="ttdeci">static PHINode * Create(Type *Ty, unsigned NumReservedValues, const Twine &amp;NameStr=&quot;&quot;, Instruction *InsertBefore=nullptr)</div><div class="ttdoc">Constructors - NumReservedValues is a hint for the number of incoming edges that this phi node will h...</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02750">Instructions.h:2750</a></div></div>
<div class="ttc" id="aclassllvm_1_1GEPOperator_html_a3783a9756e9b9a1fe124622d27522713"><div class="ttname"><a href="classllvm_1_1GEPOperator.html#a3783a9756e9b9a1fe124622d27522713">llvm::GEPOperator::isInBounds</a></div><div class="ttdeci">bool isInBounds() const</div><div class="ttdoc">Test whether this is an inbounds GEP, as defined by LangRef.html.</div><div class="ttdef"><b>Definition:</b> <a href="Operator_8h_source.html#l00395">Operator.h:395</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallBase_html_adde2ea00dd2613ee41bfe91908e4e68e"><div class="ttname"><a href="classllvm_1_1CallBase.html#adde2ea00dd2613ee41bfe91908e4e68e">llvm::CallBase::arg_size</a></div><div class="ttdeci">unsigned arg_size() const</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l01349">InstrTypes.h:1349</a></div></div>
<div class="ttc" id="aclassllvm_1_1ExtractValueInst_html"><div class="ttname"><a href="classllvm_1_1ExtractValueInst.html">llvm::ExtractValueInst</a></div><div class="ttdoc">This instruction extracts a struct member or array element value from an aggregate value.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02455">Instructions.h:2455</a></div></div>
<div class="ttc" id="anamespacellvm_html_abff5a423c1f45e23958dde8ee695c9a9"><div class="ttname"><a href="namespacellvm.html#abff5a423c1f45e23958dde8ee695c9a9">llvm::isGuaranteedToTransferExecutionToSuccessor</a></div><div class="ttdeci">bool isGuaranteedToTransferExecutionToSuccessor(const Instruction *I)</div><div class="ttdoc">Return true if this function can prove that the instruction I will always transfer execution to one o...</div><div class="ttdef"><b>Definition:</b> <a href="ValueTracking_8cpp_source.html#l05612">ValueTracking.cpp:5612</a></div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisManager_html_a90a202de107720c5c6af3a5bc275d8f5"><div class="ttname"><a href="classllvm_1_1AnalysisManager.html#a90a202de107720c5c6af3a5bc275d8f5">llvm::AnalysisManager::getCachedResult</a></div><div class="ttdeci">PassT::Result * getCachedResult(IRUnitT &amp;IR) const</div><div class="ttdoc">Get the cached result of an analysis pass for a given IR unit.</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00793">PassManager.h:793</a></div></div>
<div class="ttc" id="aCasting_8h_html"><div class="ttname"><a href="Casting_8h.html">Casting.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1GetElementPtrInst_html_a056eabb719f475aa4c5a7e2ba11973b9"><div class="ttname"><a href="classllvm_1_1GetElementPtrInst.html#a056eabb719f475aa4c5a7e2ba11973b9">llvm::GetElementPtrInst::getTypeAtIndex</a></div><div class="ttdeci">static Type * getTypeAtIndex(Type *Ty, Value *Idx)</div><div class="ttdoc">Return the type of the element at the given index of an indexable type.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l01860">Instructions.cpp:1860</a></div></div>
<div class="ttc" id="anamespacellvm_html_a2787d1134842ab0b9be8694d95ccbdd7"><div class="ttname"><a href="namespacellvm.html#a2787d1134842ab0b9be8694d95ccbdd7">llvm::isRemovableAlloc</a></div><div class="ttdeci">bool isRemovableAlloc(const CallBase *V, const TargetLibraryInfo *TLI)</div><div class="ttdoc">Return true if this is a call to an allocation function that does not have side effects that we are r...</div><div class="ttdef"><b>Definition:</b> <a href="MemoryBuiltins_8cpp_source.html#l00330">MemoryBuiltins.cpp:330</a></div></div>
<div class="ttc" id="aFunction_8h_html"><div class="ttname"><a href="Function_8h.html">Function.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_a039111728e11b1cdf25e60446ae17f2a"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#a039111728e11b1cdf25e60446ae17f2a">llvm::InstCombinerImpl::FoldOpIntoSelect</a></div><div class="ttdeci">Instruction * FoldOpIntoSelect(Instruction &amp;Op, SelectInst *SI, bool FoldWithMultiUse=false)</div><div class="ttdoc">Given an instruction with a select as one operand and a constant as the other operand,...</div><div class="ttdef"><b>Definition:</b> <a href="InstructionCombining_8cpp_source.html#l01095">InstructionCombining.cpp:1095</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_a7c779ce2ba55bc94f52014fc25f3d520"><div class="ttname"><a href="classllvm_1_1Value.html#a7c779ce2ba55bc94f52014fc25f3d520">llvm::Value::hasNUses</a></div><div class="ttdeci">bool hasNUses(unsigned N) const</div><div class="ttdoc">Return true if this Value has exactly N uses.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00148">Value.cpp:148</a></div></div>
<div class="ttc" id="anamespacellvm_html_abee0df5f7f703bb4462aba260ba0a60f"><div class="ttname"><a href="namespacellvm.html#abee0df5f7f703bb4462aba260ba0a60f">llvm::BitWidth</a></div><div class="ttdeci">constexpr unsigned BitWidth</div><div class="ttdef"><b>Definition:</b> <a href="BitmaskEnum_8h_source.html#l00147">BitmaskEnum.h:147</a></div></div>
<div class="ttc" id="aDebugCounter_8h_html"><div class="ttname"><a href="DebugCounter_8h.html">DebugCounter.h</a></div></div>
<div class="ttc" id="aPassManager_8h_html"><div class="ttname"><a href="PassManager_8h.html">PassManager.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetLibraryInfo_html"><div class="ttname"><a href="classllvm_1_1TargetLibraryInfo.html">llvm::TargetLibraryInfo</a></div><div class="ttdoc">Provides information about what library functions are available for the current target.</div><div class="ttdef"><b>Definition:</b> <a href="TargetLibraryInfo_8h_source.html#l00234">TargetLibraryInfo.h:234</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_a6f1d5427c61a0f0159f6e85f41944c5c"><div class="ttname"><a href="classllvm_1_1APInt.html#a6f1d5427c61a0f0159f6e85f41944c5c">llvm::APInt::exactLogBase2</a></div><div class="ttdeci">int32_t exactLogBase2() const</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l01722">APInt.h:1722</a></div></div>
<div class="ttc" id="anamespacellvm_1_1ARCCC_html_a9a81d9a1b379cf08150b22e81d7dd006aceb189306b941666e679bf556207c1e4"><div class="ttname"><a href="namespacellvm_1_1ARCCC.html#a9a81d9a1b379cf08150b22e81d7dd006aceb189306b941666e679bf556207c1e4">llvm::ARCCC::Z</a></div><div class="ttdeci">@ Z</div><div class="ttdef"><b>Definition:</b> <a href="ARCInfo_8h_source.html#l00041">ARCInfo.h:41</a></div></div>
<div class="ttc" id="aclassllvm_1_1ExtractValueInst_html_ab87e7c5a729885396b3b045ad375e4b8"><div class="ttname"><a href="classllvm_1_1ExtractValueInst.html#ab87e7c5a729885396b3b045ad375e4b8">llvm::ExtractValueInst::getAggregateOperand</a></div><div class="ttdeci">Value * getAggregateOperand()</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02510">Instructions.h:2510</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantArray_html_a0900dacdc7ad8e3ea0cc92993c7fd422"><div class="ttname"><a href="classllvm_1_1ConstantArray.html#a0900dacdc7ad8e3ea0cc92993c7fd422">llvm::ConstantArray::get</a></div><div class="ttdeci">static Constant * get(ArrayType *T, ArrayRef&lt; Constant * &gt; V)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l01249">Constants.cpp:1249</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstructionWorklist_html"><div class="ttname"><a href="classllvm_1_1InstructionWorklist.html">llvm::InstructionWorklist</a></div><div class="ttdoc">InstructionWorklist - This is the worklist management logic for InstCombine and other simplification ...</div><div class="ttdef"><b>Definition:</b> <a href="InstructionWorklist_8h_source.html#l00025">InstructionWorklist.h:25</a></div></div>
<div class="ttc" id="aInstructionCombining_8cpp_html_a3bd26297d4422f25aaeacd40ffbbc478"><div class="ttname"><a href="InstructionCombining_8cpp.html#a3bd26297d4422f25aaeacd40ffbbc478">hasNoSignedWrap</a></div><div class="ttdeci">static bool hasNoSignedWrap(BinaryOperator &amp;I)</div><div class="ttdef"><b>Definition:</b> <a href="InstructionCombining_8cpp_source.html#l00306">InstructionCombining.cpp:306</a></div></div>
<div class="ttc" id="aInstructionCombining_8cpp_html_a501a6d252bd1e83fa86504b99c96bb3f"><div class="ttname"><a href="InstructionCombining_8cpp.html#a501a6d252bd1e83fa86504b99c96bb3f">TryToSinkInstruction</a></div><div class="ttdeci">static bool TryToSinkInstruction(Instruction *I, BasicBlock *DestBlock, TargetLibraryInfo &amp;TLI)</div><div class="ttdoc">Try to move the specified instruction from its current block into the beginning of DestBlock,...</div><div class="ttdef"><b>Definition:</b> <a href="InstructionCombining_8cpp_source.html#l04081">InstructionCombining.cpp:4081</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_ab99e879508d2ae156406ec757fc49f1b"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#ab99e879508d2ae156406ec757fc49f1b">llvm::InstCombinerImpl::visitGEPOfBitcast</a></div><div class="ttdeci">Instruction * visitGEPOfBitcast(BitCastInst *BCI, GetElementPtrInst &amp;GEP)</div><div class="ttdef"><b>Definition:</b> <a href="InstructionCombining_8cpp_source.html#l02175">InstructionCombining.cpp:2175</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a3ffbacd388121d5e3ba1c4360b7449d0"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a3ffbacd388121d5e3ba1c4360b7449d0">llvm::PatternMatch::m_PtrToInt</a></div><div class="ttdeci">CastClass_match&lt; OpTy, Instruction::PtrToInt &gt; m_PtrToInt(const OpTy &amp;Op)</div><div class="ttdoc">Matches PtrToInt.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01599">PatternMatch.h:1599</a></div></div>
<div class="ttc" id="anamespacellvm_1_1MCID_html_ab357441fcd1ea1f9b0d27c12700f6023a2b016c207343046b2bac45e69e76dcec"><div class="ttname"><a href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a2b016c207343046b2bac45e69e76dcec">llvm::MCID::Add</a></div><div class="ttdeci">@ Add</div><div class="ttdef"><b>Definition:</b> <a href="MCInstrDesc_8h_source.html#l00186">MCInstrDesc.h:186</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallSet_html_a1679469af9bb8ccfbe98441fb8228c79"><div class="ttname"><a href="classllvm_1_1SmallSet.html#a1679469af9bb8ccfbe98441fb8228c79">llvm::SmallSet::insert</a></div><div class="ttdeci">std::pair&lt; const_iterator, bool &gt; insert(const T &amp;V)</div><div class="ttdoc">insert - Insert an element into the set if it isn't already there.</div><div class="ttdef"><b>Definition:</b> <a href="SmallSet_8h_source.html#l00177">SmallSet.h:177</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_ac3376e3bd632ad72252638ae43295ce4"><div class="ttname"><a href="classllvm_1_1Instruction.html#ac3376e3bd632ad72252638ae43295ce4">llvm::Instruction::isBitwiseLogicOp</a></div><div class="ttdeci">bool isBitwiseLogicOp() const</div><div class="ttdoc">Return true if this is and/or/xor.</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00224">Instruction.h:224</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallBase_html_a7ac9329ef7292ee640d87f45ce7ae05c"><div class="ttname"><a href="classllvm_1_1CallBase.html#a7ac9329ef7292ee640d87f45ce7ae05c">llvm::CallBase::getCalledOperand</a></div><div class="ttdeci">Value * getCalledOperand() const</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l01399">InstrTypes.h:1399</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html_a6f77e4e800ba4dffd63e8ddb330062aa"><div class="ttname"><a href="classllvm_1_1Function.html#a6f77e4e800ba4dffd63e8ddb330062aa">llvm::Function::getPersonalityFn</a></div><div class="ttdeci">Constant * getPersonalityFn() const</div><div class="ttdoc">Get the personality function associated with this function.</div><div class="ttdef"><b>Definition:</b> <a href="Function_8cpp_source.html#l01995">Function.cpp:1995</a></div></div>
<div class="ttc" id="anamespacellvm_html_a7994fd7ca0d8f8fcf2a9d18d151d0988"><div class="ttname"><a href="namespacellvm.html#a7994fd7ca0d8f8fcf2a9d18d151d0988">llvm::LowerDbgDeclare</a></div><div class="ttdeci">bool LowerDbgDeclare(Function &amp;F)</div><div class="ttdoc">Lowers llvm.dbg.declare intrinsics into appropriate set of llvm.dbg.value intrinsics.</div><div class="ttdef"><b>Definition:</b> <a href="Transforms_2Utils_2Local_8cpp_source.html#l01637">Local.cpp:1637</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantRange_html"><div class="ttname"><a href="classllvm_1_1ConstantRange.html">llvm::ConstantRange</a></div><div class="ttdoc">This class represents a range of values.</div><div class="ttdef"><b>Definition:</b> <a href="ConstantRange_8h_source.html#l00047">ConstantRange.h:47</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_aca8fce65eb69a82aa10a635e2e79877a"><div class="ttname"><a href="classllvm_1_1APInt.html#aca8fce65eb69a82aa10a635e2e79877a">llvm::APInt::sext</a></div><div class="ttdeci">APInt sext(unsigned width) const</div><div class="ttdoc">Sign extend to a new width.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8cpp_source.html#l00946">APInt.cpp:946</a></div></div>
<div class="ttc" id="aclassllvm_1_1IntrinsicInst_html"><div class="ttname"><a href="classllvm_1_1IntrinsicInst.html">llvm::IntrinsicInst</a></div><div class="ttdoc">A wrapper class for inspecting calls to intrinsic functions.</div><div class="ttdef"><b>Definition:</b> <a href="IntrinsicInst_8h_source.html#l00047">IntrinsicInst.h:47</a></div></div>
<div class="ttc" id="anamespacellvm_html_a195c85317ba5f5262812d33289c7a2b3"><div class="ttname"><a href="namespacellvm.html#a195c85317ba5f5262812d33289c7a2b3">llvm::createInstructionCombiningPass</a></div><div class="ttdeci">FunctionPass * createInstructionCombiningPass()</div><div class="ttdef"><b>Definition:</b> <a href="InstructionCombining_8cpp_source.html#l04759">InstructionCombining.cpp:4759</a></div></div>
<div class="ttc" id="anamespacellvm_html_a291c4451c91c4aaee65308741793626a"><div class="ttname"><a href="namespacellvm.html#a291c4451c91c4aaee65308741793626a">llvm::getAllocationFamily</a></div><div class="ttdeci">std::optional&lt; StringRef &gt; getAllocationFamily(const Value *I, const TargetLibraryInfo *TLI)</div><div class="ttdoc">If a function is part of an allocation family (e.g.</div><div class="ttdef"><b>Definition:</b> <a href="MemoryBuiltins_8cpp_source.html#l00500">MemoryBuiltins.cpp:500</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a2ff0f084844b189a858647d637d47eba"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a2ff0f084844b189a858647d637d47eba">llvm::PatternMatch::m_Not</a></div><div class="ttdeci">BinaryOp_match&lt; cst_pred_ty&lt; is_all_ones &gt;, ValTy, Instruction::Xor, true &gt; m_Not(const ValTy &amp;V)</div><div class="ttdoc">Matches a 'Not' as 'xor V, -1' or 'xor -1, V'.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l02302">PatternMatch.h:2302</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_ac26154a24f393f523c87cc5f8239f36c"><div class="ttname"><a href="classllvm_1_1Instruction.html#ac26154a24f393f523c87cc5f8239f36c">llvm::Instruction::BinaryOps</a></div><div class="ttdeci">BinaryOps</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00809">Instruction.h:809</a></div></div>
<div class="ttc" id="aclassllvm_1_1DominatorTreeAnalysis_html"><div class="ttname"><a href="classllvm_1_1DominatorTreeAnalysis.html">llvm::DominatorTreeAnalysis</a></div><div class="ttdoc">Analysis pass which computes a DominatorTree.</div><div class="ttdef"><b>Definition:</b> <a href="Dominators_8h_source.html#l00279">Dominators.h:279</a></div></div>
<div class="ttc" id="aclassllvm_1_1ShuffleVectorInst_html"><div class="ttname"><a href="classllvm_1_1ShuffleVectorInst.html">llvm::ShuffleVectorInst</a></div><div class="ttdoc">This instruction constructs a fixed permutation of two input vectors.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02017">Instructions.h:2017</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a54155244e7b172a97fe5b3096d84fa97"><div class="ttname"><a href="classllvm_1_1Type.html#a54155244e7b172a97fe5b3096d84fa97">llvm::Type::isOpaquePointerTy</a></div><div class="ttdeci">bool isOpaquePointerTy() const</div><div class="ttdoc">True if this is an instance of an opaque PointerType.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00060">Type.cpp:60</a></div></div>
<div class="ttc" id="aInstructions_8h_html"><div class="ttname"><a href="Instructions_8h.html">Instructions.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1PreservedAnalyses_html_a937c42f77e161349ce0f999e448c7027"><div class="ttname"><a href="classllvm_1_1PreservedAnalyses.html#a937c42f77e161349ce0f999e448c7027">llvm::PreservedAnalyses::preserveSet</a></div><div class="ttdeci">void preserveSet()</div><div class="ttdoc">Mark an analysis set as preserved.</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00188">PassManager.h:188</a></div></div>
<div class="ttc" id="aclassllvm_1_1Constant_html_a0154da1d06b29a1d5649607ae2dfc389"><div class="ttname"><a href="classllvm_1_1Constant.html#a0154da1d06b29a1d5649607ae2dfc389">llvm::Constant::getIntegerValue</a></div><div class="ttdeci">static Constant * getIntegerValue(Type *Ty, const APInt &amp;V)</div><div class="ttdoc">Return the value for an integer or pointer constant, or a vector thereof, with the given scalar value...</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00386">Constants.cpp:386</a></div></div>
<div class="ttc" id="aclassllvm_1_1User_html_addec638786f763d967811b45cb662f1f"><div class="ttname"><a href="classllvm_1_1User.html#addec638786f763d967811b45cb662f1f">llvm::User::getNumOperands</a></div><div class="ttdeci">unsigned getNumOperands() const</div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00191">User.h:191</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a81eef9d7336f7ee43be79630d8e8ec86"><div class="ttname"><a href="classllvm_1_1Type.html#a81eef9d7336f7ee43be79630d8e8ec86">llvm::Type::isStructTy</a></div><div class="ttdeci">bool isStructTy() const</div><div class="ttdoc">True if this is an instance of StructType.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00243">Type.h:243</a></div></div>
<div class="ttc" id="aclassllvm_1_1Registry_html"><div class="ttname"><a href="classllvm_1_1Registry.html">llvm::Registry</a></div><div class="ttdoc">A global registry used in conjunction with static constructors to make pluggable components (like tar...</div><div class="ttdef"><b>Definition:</b> <a href="Registry_8h_source.html#l00044">Registry.h:44</a></div></div>
<div class="ttc" id="aSmallVector_8h_html"><div class="ttname"><a href="SmallVector_8h.html">SmallVector.h</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a2d9861feadd3a09792967a012559e7b2"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">llvm::PatternMatch::m_Specific</a></div><div class="ttdeci">specificval_ty m_Specific(const Value *V)</div><div class="ttdoc">Match if we have a specific specified value.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00772">PatternMatch.h:772</a></div></div>
<div class="ttc" id="aUser_8h_html"><div class="ttname"><a href="User_8h.html">User.h</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a3fe9b3ddb71b9fb53d9fc74b3a0710bf"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a3fe9b3ddb71b9fb53d9fc74b3a0710bf">llvm::PatternMatch::m_ICmp</a></div><div class="ttdeci">CmpClass_match&lt; LHS, RHS, ICmpInst, ICmpInst::Predicate &gt; m_ICmp(ICmpInst::Predicate &amp;Pred, const LHS &amp;L, const RHS &amp;R)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01394">PatternMatch.h:1394</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_a159bf794249e0567baf2a2a714d5c679"><div class="ttname"><a href="classllvm_1_1Value.html#a159bf794249e0567baf2a2a714d5c679">llvm::Value::DoPHITranslation</a></div><div class="ttdeci">const Value * DoPHITranslation(const BasicBlock *CurBB, const BasicBlock *PredBB) const</div><div class="ttdoc">Translate PHI node to its predecessor from the given basic block.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00986">Value.cpp:986</a></div></div>
<div class="ttc" id="aDominators_8h_html"><div class="ttname"><a href="Dominators_8h.html">Dominators.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html_ac5b936169badf0b703567eb960278648"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#ac5b936169badf0b703567eb960278648">llvm::SmallVectorImpl::iterator</a></div><div class="ttdeci">typename SuperClass::iterator iterator</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00581">SmallVector.h:581</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallBase_html_ab2caa29167597390ab2fc3cf30d70389"><div class="ttname"><a href="classllvm_1_1CallBase.html#ab2caa29167597390ab2fc3cf30d70389">llvm::CallBase::getArgOperand</a></div><div class="ttdeci">Value * getArgOperand(unsigned i) const</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l01351">InstrTypes.h:1351</a></div></div>
<div class="ttc" id="aclassllvm_1_1generic__gep__type__iterator_html_a9c393ed0a6b446c52d205a562ac8d544"><div class="ttname"><a href="classllvm_1_1generic__gep__type__iterator.html#a9c393ed0a6b446c52d205a562ac8d544">llvm::generic_gep_type_iterator::isStruct</a></div><div class="ttdeci">bool isStruct() const</div><div class="ttdef"><b>Definition:</b> <a href="GetElementPtrTypeIterator_8h_source.html#l00111">GetElementPtrTypeIterator.h:111</a></div></div>
<div class="ttc" id="aclassllvm_1_1FreezeInst_html"><div class="ttname"><a href="classllvm_1_1FreezeInst.html">llvm::FreezeInst</a></div><div class="ttdoc">This class represents a freeze function that returns random concrete value if an operand is either a ...</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l05440">Instructions.h:5440</a></div></div>
<div class="ttc" id="aregcomp_8c_html_a0240ac851181b84ac374872dc5434ee4"><div class="ttname"><a href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a></div><div class="ttdeci">#define N</div></div>
<div class="ttc" id="aclassllvm_1_1LandingPadInst_html_a74e94530fdc21fe0a7eb5465437c980f"><div class="ttname"><a href="classllvm_1_1LandingPadInst.html#a74e94530fdc21fe0a7eb5465437c980f">llvm::LandingPadInst::isCatch</a></div><div class="ttdeci">bool isCatch(unsigned Idx) const</div><div class="ttdoc">Return 'true' if the clause and index Idx is a catch clause.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03018">Instructions.h:3018</a></div></div>
<div class="ttc" id="aclassllvm_1_1AAResultsWrapperPass_html"><div class="ttname"><a href="classllvm_1_1AAResultsWrapperPass.html">llvm::AAResultsWrapperPass</a></div><div class="ttdoc">A wrapper pass to provide the legacy pass manager access to a suitably prepared AAResults object.</div><div class="ttdef"><b>Definition:</b> <a href="AliasAnalysis_8h_source.html#l00933">AliasAnalysis.h:933</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_ab9f68be0e2bcdf14f503f45edea63023"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#ab9f68be0e2bcdf14f503f45edea63023">llvm::BasicBlock::size</a></div><div class="ttdeci">size_t size() const</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00324">BasicBlock.h:324</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a1a7f07aaef6a3bee130bf0e0f0536802"><div class="ttname"><a href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">llvm::Instruction::getParent</a></div><div class="ttdeci">const BasicBlock * getParent() const</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00090">Instruction.h:90</a></div></div>
<div class="ttc" id="aInstructionCombining_8cpp_html_a4d79676cd8860ab969121d292de048ef"><div class="ttname"><a href="InstructionCombining_8cpp.html#a4d79676cd8860ab969121d292de048ef">LimitMaxIterations</a></div><div class="ttdeci">static cl::opt&lt; unsigned &gt; LimitMaxIterations(&quot;instcombine-max-iterations&quot;, cl::desc(&quot;Limit the maximum number of instruction combining iterations&quot;), cl::init(InstCombineDefaultMaxIterations))</div></div>
<div class="ttc" id="aInstructionSimplify_8h_html"><div class="ttname"><a href="InstructionSimplify_8h.html">InstructionSimplify.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html_a0c8ffe664a36e30d49c84d0aded2fe08"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#a0c8ffe664a36e30d49c84d0aded2fe08">llvm::SmallVectorImpl::pop_back_val</a></div><div class="ttdeci">T pop_back_val()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00677">SmallVector.h:677</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalsAAWrapperPass_html"><div class="ttname"><a href="classllvm_1_1GlobalsAAWrapperPass.html">llvm::GlobalsAAWrapperPass</a></div><div class="ttdoc">Legacy wrapper pass to provide the GlobalsAAResult object.</div><div class="ttdef"><b>Definition:</b> <a href="GlobalsModRef_8h_source.html#l00142">GlobalsModRef.h:142</a></div></div>
<div class="ttc" id="aclassllvm_1_1PHINode_html_a8ce0c4746a1ec805e66409d20ae93922"><div class="ttname"><a href="classllvm_1_1PHINode.html#a8ce0c4746a1ec805e66409d20ae93922">llvm::PHINode::getIncomingBlock</a></div><div class="ttdeci">BasicBlock * getIncomingBlock(unsigned i) const</div><div class="ttdoc">Return incoming basic block number i.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02814">Instructions.h:2814</a></div></div>
<div class="ttc" id="aclassllvm_1_1ArrayRef_html_a85ffb6531d4cda988ea81f18d4e56fb7"><div class="ttname"><a href="classllvm_1_1ArrayRef.html#a85ffb6531d4cda988ea81f18d4e56fb7">llvm::ArrayRef::size</a></div><div class="ttdeci">size_t size() const</div><div class="ttdoc">size - Get the array size.</div><div class="ttdef"><b>Definition:</b> <a href="ArrayRef_8h_source.html#l00163">ArrayRef.h:163</a></div></div>
<div class="ttc" id="aIVUsers_8cpp_html_a4e5b9edb51eec9dbca592075eb64dfcb"><div class="ttname"><a href="IVUsers_8cpp.html#a4e5b9edb51eec9dbca592075eb64dfcb">Users</a></div><div class="ttdeci">iv Induction Variable Users</div><div class="ttdef"><b>Definition:</b> <a href="IVUsers_8cpp_source.html#l00048">IVUsers.cpp:48</a></div></div>
<div class="ttc" id="aTargetTransformInfo_8h_html"><div class="ttname"><a href="TargetTransformInfo_8h.html">TargetTransformInfo.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_a7af99fa2202fcc7db245865dd1bcec1f"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#a7af99fa2202fcc7db245865dd1bcec1f">llvm::InstCombinerImpl::visitLandingPadInst</a></div><div class="ttdeci">Instruction * visitLandingPadInst(LandingPadInst &amp;LI)</div><div class="ttdef"><b>Definition:</b> <a href="InstructionCombining_8cpp_source.html#l03494">InstructionCombining.cpp:3494</a></div></div>
<div class="ttc" id="aclassllvm_1_1PHINode_html"><div class="ttname"><a href="classllvm_1_1PHINode.html">llvm::PHINode</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02708">Instructions.h:2708</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a8de021e28a3c04c9216ad8decf104f02"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">llvm::BasicBlock::getTerminator</a></div><div class="ttdeci">const Instruction * getTerminator() const LLVM_READONLY</div><div class="ttdoc">Returns the terminator instruction if the block is well formed or null if the block is not well forme...</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00127">BasicBlock.h:127</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html">llvm::PatternMatch</a></div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00047">PatternMatch.h:47</a></div></div>
<div class="ttc" id="aInstructionCombining_8cpp_html_a27dc41c474e5376ef7d1865735cfb3dd"><div class="ttname"><a href="InstructionCombining_8cpp.html#a27dc41c474e5376ef7d1865735cfb3dd">shouldMergeGEPs</a></div><div class="ttdeci">static bool shouldMergeGEPs(GEPOperator &amp;GEP, GEPOperator &amp;Src)</div><div class="ttdef"><b>Definition:</b> <a href="InstructionCombining_8cpp_source.html#l01399">InstructionCombining.cpp:1399</a></div></div>
<div class="ttc" id="astructllvm_1_1KnownBits_html_a5274c29c7da2473d342adfa98f34a025"><div class="ttname"><a href="structllvm_1_1KnownBits.html#a5274c29c7da2473d342adfa98f34a025">llvm::KnownBits::isConstant</a></div><div class="ttdeci">bool isConstant() const</div><div class="ttdoc">Returns true if we know the value of all bits.</div><div class="ttdef"><b>Definition:</b> <a href="KnownBits_8h_source.html#l00050">KnownBits.h:50</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a3e6d2896c39a84cfa6c47f34cdc584ff"><div class="ttname"><a href="classllvm_1_1Instruction.html#a3e6d2896c39a84cfa6c47f34cdc584ff">llvm::Instruction::copyIRFlags</a></div><div class="ttdeci">void copyIRFlags(const Value *V, bool IncludeWrapFlags=true)</div><div class="ttdoc">Convenience method to copy supported exact, fast-math, and (optionally) wrapping flags from V to this...</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8cpp_source.html#l00348">Instruction.cpp:348</a></div></div>
<div class="ttc" id="ablake3__impl_8h_html_a78823051d1dad34b9b3d8120112e674d"><div class="ttname"><a href="blake3__impl_8h.html#a78823051d1dad34b9b3d8120112e674d">IV</a></div><div class="ttdeci">static const uint32_t IV[8]</div><div class="ttdef"><b>Definition:</b> <a href="blake3__impl_8h_source.html#l00077">blake3_impl.h:77</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html">llvm::SmallVectorImpl&lt; Value * &gt;</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a5772946ca265c6a5c951cb331983daa5"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a5772946ca265c6a5c951cb331983daa5">llvm::PatternMatch::m_FCmp</a></div><div class="ttdeci">CmpClass_match&lt; LHS, RHS, FCmpInst, FCmpInst::Predicate &gt; m_FCmp(FCmpInst::Predicate &amp;Pred, const LHS &amp;L, const RHS &amp;R)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01400">PatternMatch.h:1400</a></div></div>
<div class="ttc" id="anamespacellvm_html_a6b0ac1fa4f05de76413c5e0ca6334035"><div class="ttname"><a href="namespacellvm.html#a6b0ac1fa4f05de76413c5e0ca6334035">llvm::reverse</a></div><div class="ttdeci">auto reverse(ContainerTy &amp;&amp;C)</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l00484">STLExtras.h:484</a></div></div>
<div class="ttc" id="anamespacellvm_html_a5e655fd99a56d50b071fc26d8db5fd5b"><div class="ttname"><a href="namespacellvm.html#a5e655fd99a56d50b071fc26d8db5fd5b">llvm::ConstantFoldConstant</a></div><div class="ttdeci">Constant * ConstantFoldConstant(const Constant *C, const DataLayout &amp;DL, const TargetLibraryInfo *TLI=nullptr)</div><div class="ttdoc">ConstantFoldConstant - Fold the constant using the specified DataLayout.</div><div class="ttdef"><b>Definition:</b> <a href="ConstantFolding_8cpp_source.html#l01203">ConstantFolding.cpp:1203</a></div></div>
<div class="ttc" id="aInstructionCombining_8cpp_html_a04d581f6b1ca4d25c0c0a7e97404151c"><div class="ttname"><a href="InstructionCombining_8cpp.html#a04d581f6b1ca4d25c0c0a7e97404151c">isNeverEqualToUnescapedAlloc</a></div><div class="ttdeci">static bool isNeverEqualToUnescapedAlloc(Value *V, const TargetLibraryInfo &amp;TLI, Instruction *AI)</div><div class="ttdef"><b>Definition:</b> <a href="InstructionCombining_8cpp_source.html#l02713">InstructionCombining.cpp:2713</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallBase_html"><div class="ttname"><a href="classllvm_1_1CallBase.html">llvm::CallBase</a></div><div class="ttdoc">Base class for all callable instructions (InvokeInst and CallInst) Holds everything related to callin...</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l01184">InstrTypes.h:1184</a></div></div>
<div class="ttc" id="aDerivedTypes_8h_html"><div class="ttname"><a href="DerivedTypes_8h.html">DerivedTypes.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisManager_html"><div class="ttname"><a href="classllvm_1_1AnalysisManager.html">llvm::AnalysisManager</a></div><div class="ttdoc">A container for analyses that lazily runs them and caches their results.</div><div class="ttdef"><b>Definition:</b> <a href="InstructionSimplify_8h_source.html#l00042">InstructionSimplify.h:42</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a2fed53ed2b3225752bd9e4fce4967361"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a2fed53ed2b3225752bd9e4fce4967361">llvm::PatternMatch::m_Neg</a></div><div class="ttdeci">BinaryOp_match&lt; cst_pred_ty&lt; is_zero_int &gt;, ValTy, Instruction::Sub &gt; m_Neg(const ValTy &amp;V)</div><div class="ttdoc">Matches a 'Neg' as 'sub 0, V'.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l02284">PatternMatch.h:2284</a></div></div>
<div class="ttc" id="aclassllvm_1_1IntegerType_html_a14f7b4f1aed38192fb6b7772eb506bdb"><div class="ttname"><a href="classllvm_1_1IntegerType.html#a14f7b4f1aed38192fb6b7772eb506bdb">llvm::IntegerType::get</a></div><div class="ttdeci">static IntegerType * get(LLVMContext &amp;C, unsigned NumBits)</div><div class="ttdoc">This static method is the primary way of constructing an IntegerType.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00313">Type.cpp:313</a></div></div>
<div class="ttc" id="aclassllvm_1_1FunctionPass_html"><div class="ttname"><a href="classllvm_1_1FunctionPass.html">llvm::FunctionPass</a></div><div class="ttdoc">FunctionPass class - This class is used to implement most global optimizations.</div><div class="ttdef"><b>Definition:</b> <a href="Pass_8h_source.html#l00308">Pass.h:308</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallInst_html"><div class="ttname"><a href="classllvm_1_1CallInst.html">llvm::CallInst</a></div><div class="ttdoc">This class represents a function call, abstracting a target machine's calling convention.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01485">Instructions.h:1485</a></div></div>
<div class="ttc" id="alib_2CodeGen_2README_8txt_html_a09776db24cf586ec9f1e18f3bae14099"><div class="ttname"><a href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a></div><div class="ttdeci">Common register allocation spilling lr str ldr sxth r3 ldr mla r4 can lr mov lr str ldr sxth r3 mla r4 and then merge mul and lr str ldr sxth r3 mla r4 It also increase the likelihood the store may become dead bb27 Successors according to LLVM BB</div><div class="ttdef"><b>Definition:</b> <a href="lib_2CodeGen_2README_8txt_source.html#l00039">README.txt:39</a></div></div>
<div class="ttc" id="aHexagonCommonGEP_8cpp_html_ad532e8710e50302e0a376b61c91fa91d"><div class="ttname"><a href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a></div><div class="ttdeci">Hexagon Common GEP</div><div class="ttdef"><b>Definition:</b> <a href="HexagonCommonGEP_8cpp_source.html#l00171">HexagonCommonGEP.cpp:171</a></div></div>
<div class="ttc" id="aclassllvm_1_1UnreachableInst_html"><div class="ttname"><a href="classllvm_1_1UnreachableInst.html">llvm::UnreachableInst</a></div><div class="ttdoc">This function has undefined behavior.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l04773">Instructions.h:4773</a></div></div>
<div class="ttc" id="astructllvm_1_1KnownBits_html_a4fdc09049a61f952b5d52788dbd2f69b"><div class="ttname"><a href="structllvm_1_1KnownBits.html#a4fdc09049a61f952b5d52788dbd2f69b">llvm::KnownBits::getBitWidth</a></div><div class="ttdeci">unsigned getBitWidth() const</div><div class="ttdoc">Get the bit width of this value.</div><div class="ttdef"><b>Definition:</b> <a href="KnownBits_8h_source.html#l00040">KnownBits.h:40</a></div></div>
<div class="ttc" id="aclassllvm_1_1MemoryLocation_html_ac8f8983c6b76d0e30f22fff86b281f16"><div class="ttname"><a href="classllvm_1_1MemoryLocation.html#ac8f8983c6b76d0e30f22fff86b281f16">llvm::MemoryLocation::getForDest</a></div><div class="ttdeci">static MemoryLocation getForDest(const MemIntrinsic *MI)</div><div class="ttdoc">Return a location representing the destination of a memory set or transfer.</div><div class="ttdef"><b>Definition:</b> <a href="MemoryLocation_8cpp_source.html#l00108">MemoryLocation.cpp:108</a></div></div>
<div class="ttc" id="aTransforms_2InstCombine_2InstCombine_8h_html"><div class="ttname"><a href="Transforms_2InstCombine_2InstCombine_8h.html">InstCombine.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisUsage_html_ae5c60fd282ee894c87ea02c3f0fcb6d0"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">llvm::AnalysisUsage::addRequired</a></div><div class="ttdeci">AnalysisUsage &amp; addRequired()</div><div class="ttdef"><b>Definition:</b> <a href="PassAnalysisSupport_8h_source.html#l00075">PassAnalysisSupport.h:75</a></div></div>
<div class="ttc" id="aBlockVerifier_8cpp_html_ae45c7d73c0ff5d177b59153ffae77f84"><div class="ttname"><a href="BlockVerifier_8cpp.html#ae45c7d73c0ff5d177b59153ffae77f84">From</a></div><div class="ttdeci">BlockVerifier::State From</div><div class="ttdef"><b>Definition:</b> <a href="BlockVerifier_8cpp_source.html#l00055">BlockVerifier.cpp:55</a></div></div>
<div class="ttc" id="aclassllvm_1_1SwitchInst_html"><div class="ttname"><a href="classllvm_1_1SwitchInst.html">llvm::SwitchInst</a></div><div class="ttdoc">Multiway switch.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03283">Instructions.h:3283</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_ae855357b6c5e6e7ed1869272708a3a84"><div class="ttname"><a href="classllvm_1_1Value.html#ae855357b6c5e6e7ed1869272708a3a84">llvm::Value::takeName</a></div><div class="ttdeci">void takeName(Value *V)</div><div class="ttdoc">Transfer the name from V to this value.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00381">Value.cpp:381</a></div></div>
<div class="ttc" id="aclassllvm_1_1User_html_abe1de1520a21f77ac57cc210bf0fb0b4"><div class="ttname"><a href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">llvm::User::getOperand</a></div><div class="ttdeci">Value * getOperand(unsigned i) const</div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00169">User.h:169</a></div></div>
<div class="ttc" id="astructllvm_1_1cl_1_1desc_html"><div class="ttname"><a href="structllvm_1_1cl_1_1desc.html">llvm::cl::desc</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00411">CommandLine.h:411</a></div></div>
<div class="ttc" id="anamespacellvm_html_a5d56157a385f8cd7d3e54ed87da1ba6aaf5e265d607cb720058fc166e00083fe8"><div class="ttname"><a href="namespacellvm.html#a5d56157a385f8cd7d3e54ed87da1ba6aaf5e265d607cb720058fc166e00083fe8">llvm::EHPersonality::Rust</a></div><div class="ttdeci">@ Rust</div></div>
<div class="ttc" id="aclassllvm_1_1BranchInst_html"><div class="ttname"><a href="classllvm_1_1BranchInst.html">llvm::BranchInst</a></div><div class="ttdoc">Conditional or Unconditional Branch instruction.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03139">Instructions.h:3139</a></div></div>
<div class="ttc" id="anamespacellvm_1_1M68kBeads_html_a7eeab1fe8f39bf89dcd7929b816ebfcca27d0e059322508a76f918503800ef1bd"><div class="ttname"><a href="namespacellvm_1_1M68kBeads.html#a7eeab1fe8f39bf89dcd7929b816ebfcca27d0e059322508a76f918503800ef1bd">llvm::M68kBeads::Term</a></div><div class="ttdeci">@ Term</div><div class="ttdef"><b>Definition:</b> <a href="M68kBaseInfo_8h_source.html#l00090">M68kBaseInfo.h:90</a></div></div>
<div class="ttc" id="anamespacellvm_html_ab6be6270337c6f7620007555247401ce"><div class="ttname"><a href="namespacellvm.html#ab6be6270337c6f7620007555247401ce">llvm::ConstantFoldInstruction</a></div><div class="ttdeci">Constant * ConstantFoldInstruction(Instruction *I, const DataLayout &amp;DL, const TargetLibraryInfo *TLI=nullptr)</div><div class="ttdoc">ConstantFoldInstruction - Try to constant fold the specified instruction.</div><div class="ttdef"><b>Definition:</b> <a href="ConstantFolding_8cpp_source.html#l01155">ConstantFolding.cpp:1155</a></div></div>
<div class="ttc" id="araw__ostream_8h_html"><div class="ttname"><a href="raw__ostream_8h.html">raw_ostream.h</a></div></div>
<div class="ttc" id="aInstructionCombining_8cpp_html_a7d4d7e39548303ef4c1f5a0ed13a9c23"><div class="ttname"><a href="InstructionCombining_8cpp.html#a7d4d7e39548303ef4c1f5a0ed13a9c23">instcombine</a></div><div class="ttdeci">instcombine</div><div class="ttdef"><b>Definition:</b> <a href="InstructionCombining_8cpp_source.html#l04747">InstructionCombining.cpp:4747</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSetImpl_html_af74676a3c7447be34bd2c1da76ec0c48"><div class="ttname"><a href="classllvm_1_1SmallPtrSetImpl.html#af74676a3c7447be34bd2c1da76ec0c48">llvm::SmallPtrSetImpl::contains</a></div><div class="ttdeci">bool contains(ConstPtrType Ptr) const</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00389">SmallPtrSet.h:389</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html_a499ea32ca1b8d16cedfe01d1e5b08f29"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#a499ea32ca1b8d16cedfe01d1e5b08f29">llvm::SmallVectorImpl::reserve</a></div><div class="ttdeci">void reserve(size_type N)</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00667">SmallVector.h:667</a></div></div>
<div class="ttc" id="aclassllvm_1_1InsertValueInst_html"><div class="ttname"><a href="classllvm_1_1InsertValueInst.html">llvm::InsertValueInst</a></div><div class="ttdoc">This instruction inserts a struct field of array element value into an aggregate value.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02566">Instructions.h:2566</a></div></div>
<div class="ttc" id="aclassllvm_1_1BinaryOperator_html_a02ce9966395063ac501ecbc1623deda4"><div class="ttname"><a href="classllvm_1_1BinaryOperator.html#a02ce9966395063ac501ecbc1623deda4">llvm::BinaryOperator::Create</a></div><div class="ttdeci">static BinaryOperator * Create(BinaryOps Op, Value *S1, Value *S2, const Twine &amp;Name=Twine(), Instruction *InsertBefore=nullptr)</div><div class="ttdoc">Construct a binary instruction, given the opcode and the two operands.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l02950">Instructions.cpp:2950</a></div></div>
<div class="ttc" id="aBasicBlockUtils_8h_html"><div class="ttname"><a href="BasicBlockUtils_8h.html">BasicBlockUtils.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_a629e02c312173d0da1b62288bc8fbd48"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#a629e02c312173d0da1b62288bc8fbd48">llvm::InstCombinerImpl::visitFree</a></div><div class="ttdeci">Instruction * visitFree(CallInst &amp;FI, Value *FreedOp)</div><div class="ttdef"><b>Definition:</b> <a href="InstructionCombining_8cpp_source.html#l03052">InstructionCombining.cpp:3052</a></div></div>
<div class="ttc" id="aValue_8h_html"><div class="ttname"><a href="Value_8h.html">Value.h</a></div></div>
<div class="ttc" id="aWebAssemblyRegStackify_8cpp_html_a3fe3a133bacc7200702bc7b0b13d092c"><div class="ttname"><a href="WebAssemblyRegStackify_8cpp.html#a3fe3a133bacc7200702bc7b0b13d092c">hasOneUse</a></div><div class="ttdeci">static bool hasOneUse(unsigned Reg, MachineInstr *Def, MachineRegisterInfo &amp;MRI, MachineDominatorTree &amp;MDT, LiveIntervals &amp;LIS)</div><div class="ttdef"><b>Definition:</b> <a href="WebAssemblyRegStackify_8cpp_source.html#l00283">WebAssemblyRegStackify.cpp:283</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_ad4201fc3d0958c5d8dff30af6fa45803"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#ad4201fc3d0958c5d8dff30af6fa45803">llvm::PatternMatch::m_VecReverse</a></div><div class="ttdeci">m_Intrinsic_Ty&lt; Opnd0 &gt;::Ty m_VecReverse(const Opnd0 &amp;Op0)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l02216">PatternMatch.h:2216</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_aab4db88f47575918879912e8ca511756"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#aab4db88f47575918879912e8ca511756">llvm::BasicBlock::getFirstNonPHIOrDbgOrAlloca</a></div><div class="ttdeci">const_iterator getFirstNonPHIOrDbgOrAlloca() const</div><div class="ttdoc">Returns an iterator to the first instruction in this block that is not a PHINode, a debug intrinsic,...</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00255">BasicBlock.cpp:255</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_a8b0688ee292d40a24ba7117b39d426bd"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#a8b0688ee292d40a24ba7117b39d426bd">llvm::InstCombinerImpl::visitReturnInst</a></div><div class="ttdeci">Instruction * visitReturnInst(ReturnInst &amp;RI)</div><div class="ttdef"><b>Definition:</b> <a href="InstructionCombining_8cpp_source.html#l03098">InstructionCombining.cpp:3098</a></div></div>
<div class="ttc" id="aInitializePasses_8h_html"><div class="ttname"><a href="InitializePasses_8h.html">InitializePasses.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1OptimizationRemarkEmitterAnalysis_html"><div class="ttname"><a href="classllvm_1_1OptimizationRemarkEmitterAnalysis.html">llvm::OptimizationRemarkEmitterAnalysis</a></div><div class="ttdef"><b>Definition:</b> <a href="OptimizationRemarkEmitter_8h_source.html#l00164">OptimizationRemarkEmitter.h:164</a></div></div>
<div class="ttc" id="aclassllvm_1_1ExtractValueInst_html_a9ba97b7365f7fb9a08ae25982806b2a6"><div class="ttname"><a href="classllvm_1_1ExtractValueInst.html#a9ba97b7365f7fb9a08ae25982806b2a6">llvm::ExtractValueInst::getIndices</a></div><div class="ttdeci">ArrayRef&lt; unsigned &gt; getIndices() const</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02520">Instructions.h:2520</a></div></div>
<div class="ttc" id="anamespacellvm_html_abe76d72cda6b2b4562c72accb510040b"><div class="ttname"><a href="namespacellvm.html#abe76d72cda6b2b4562c72accb510040b">llvm::isSafeToSpeculativelyExecute</a></div><div class="ttdeci">bool isSafeToSpeculativelyExecute(const Instruction *I, const Instruction *CtxI=nullptr, AssumptionCache *AC=nullptr, const DominatorTree *DT=nullptr, const TargetLibraryInfo *TLI=nullptr)</div><div class="ttdoc">Return true if the instruction does not have any effects besides calculating the result and does not ...</div><div class="ttdef"><b>Definition:</b> <a href="ValueTracking_8cpp_source.html#l04799">ValueTracking.cpp:4799</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html"><div class="ttname"><a href="classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00074">Value.h:74</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a37668d9884c78ac77254cf9fb8a4276a"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a37668d9884c78ac77254cf9fb8a4276a">llvm::PatternMatch::m_Shl</a></div><div class="ttdeci">BinaryOp_match&lt; LHS, RHS, Instruction::Shl &gt; m_Shl(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01111">PatternMatch.h:1111</a></div></div>
<div class="ttc" id="aDebug_8h_html"><div class="ttname"><a href="Debug_8h.html">Debug.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetLibraryAnalysis_html"><div class="ttname"><a href="classllvm_1_1TargetLibraryAnalysis.html">llvm::TargetLibraryAnalysis</a></div><div class="ttdoc">Analysis pass providing the TargetLibraryInfo.</div><div class="ttdef"><b>Definition:</b> <a href="TargetLibraryInfo_8h_source.html#l00540">TargetLibraryInfo.h:540</a></div></div>
<div class="ttc" id="aclassllvm_1_1VectorType_html_a8c90e6c50e795b17466482a04947690e"><div class="ttname"><a href="classllvm_1_1VectorType.html#a8c90e6c50e795b17466482a04947690e">llvm::VectorType::get</a></div><div class="ttdeci">static VectorType * get(Type *ElementType, ElementCount EC)</div><div class="ttdoc">This static method is the primary way to construct an VectorType.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00670">Type.cpp:670</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_ab4e0512c7e1c7adaa56677e3155685f1"><div class="ttname"><a href="classllvm_1_1Value.html#ab4e0512c7e1c7adaa56677e3155685f1">llvm::Value::users</a></div><div class="ttdeci">iterator_range&lt; user_iterator &gt; users()</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00421">Value.h:421</a></div></div>
<div class="ttc" id="aInstructionCombining_8cpp_html_ae8211efb4227b65cbdba75fd23cfb668"><div class="ttname"><a href="InstructionCombining_8cpp.html#ae8211efb4227b65cbdba75fd23cfb668">isMergedGEPInBounds</a></div><div class="ttdeci">static bool isMergedGEPInBounds(GEPOperator &amp;GEP1, GEPOperator &amp;GEP2)</div><div class="ttdef"><b>Definition:</b> <a href="InstructionCombining_8cpp_source.html#l01951">InstructionCombining.cpp:1951</a></div></div>
<div class="ttc" id="aclassllvm_1_1ArrayType_html_a7e5e750381e3dfafd746e95a0843bff7"><div class="ttname"><a href="classllvm_1_1ArrayType.html#a7e5e750381e3dfafd746e95a0843bff7">llvm::ArrayType::getElementType</a></div><div class="ttdeci">Type * getElementType() const</div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00370">DerivedTypes.h:370</a></div></div>
<div class="ttc" id="aclassllvm_1_1MDOperand_html"><div class="ttname"><a href="classllvm_1_1MDOperand.html">llvm::MDOperand</a></div><div class="ttdoc">Tracking metadata reference owned by Metadata.</div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8h_source.html#l00772">Metadata.h:772</a></div></div>
<div class="ttc" id="aclassllvm_1_1SrcOp_html"><div class="ttname"><a href="classllvm_1_1SrcOp.html">llvm::SrcOp</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineIRBuilder_8h_source.html#l00128">MachineIRBuilder.h:128</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_a22bc54f319e33d248b169116b757a143"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#a22bc54f319e33d248b169116b757a143">llvm::InstCombinerImpl::visitGEPOfGEP</a></div><div class="ttdeci">Instruction * visitGEPOfGEP(GetElementPtrInst &amp;GEP, GEPOperator *Src)</div><div class="ttdef"><b>Definition:</b> <a href="InstructionCombining_8cpp_source.html#l01986">InstructionCombining.cpp:1986</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a213e6c0ca6e838157373b9a6018c0769"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a213e6c0ca6e838157373b9a6018c0769">llvm::PatternMatch::m_LogicalAnd</a></div><div class="ttdeci">LogicalOp_match&lt; LHS, RHS, Instruction::And &gt; m_LogicalAnd(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdoc">Matches L &amp;&amp; R either in the form of L &amp; R or L ? R : false.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l02556">PatternMatch.h:2556</a></div></div>
<div class="ttc" id="aInstructionCombining_8cpp_html_a2029e9ec753baf78a37b12ce3d2dd7f8"><div class="ttname"><a href="InstructionCombining_8cpp.html#a2029e9ec753baf78a37b12ce3d2dd7f8">getIdentityValue</a></div><div class="ttdeci">static Value * getIdentityValue(Instruction::BinaryOps Opcode, Value *V)</div><div class="ttdoc">This function returns identity value for given opcode, which can be used to factor patterns like (X *...</div><div class="ttdef"><b>Definition:</b> <a href="InstructionCombining_8cpp_source.html#l00606">InstructionCombining.cpp:606</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchInst_html_ad97f2e60cf22f15e0cf617af52309031"><div class="ttname"><a href="classllvm_1_1BranchInst.html#ad97f2e60cf22f15e0cf617af52309031">llvm::BranchInst::getSuccessor</a></div><div class="ttdeci">BasicBlock * getSuccessor(unsigned i) const</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03232">Instructions.h:3232</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinePass_html_aa1ffc7ad08181545bbc25eabac7f5aae"><div class="ttname"><a href="classllvm_1_1InstCombinePass.html#aa1ffc7ad08181545bbc25eabac7f5aae">llvm::InstCombinePass::run</a></div><div class="ttdeci">PreservedAnalyses run(Function &amp;F, FunctionAnalysisManager &amp;AM)</div><div class="ttdef"><b>Definition:</b> <a href="InstructionCombining_8cpp_source.html#l04654">InstructionCombining.cpp:4654</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopAnalysis_html"><div class="ttname"><a href="classllvm_1_1LoopAnalysis.html">llvm::LoopAnalysis</a></div><div class="ttdoc">Analysis pass that exposes the LoopInfo for a function.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l01268">LoopInfo.h:1268</a></div></div>
<div class="ttc" id="anamespacellvm_html_af1419a855f9813cb9164ca88d90d690c"><div class="ttname"><a href="namespacellvm.html#af1419a855f9813cb9164ca88d90d690c">llvm::initializeInstructionCombiningPassPass</a></div><div class="ttdeci">void initializeInstructionCombiningPassPass(PassRegistry &amp;)</div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_af67d1f3a518964d80a109bb3d9d5cf1e"><div class="ttname"><a href="classllvm_1_1Instruction.html#af67d1f3a518964d80a109bb3d9d5cf1e">llvm::Instruction::moveBefore</a></div><div class="ttdeci">void moveBefore(Instruction *MovePos)</div><div class="ttdoc">Unlink this instruction from its current basic block and insert it into the basic block that MovePos ...</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8cpp_source.html#l00108">Instruction.cpp:108</a></div></div>
<div class="ttc" id="aclassllvm_1_1Use_html"><div class="ttname"><a href="classllvm_1_1Use.html">llvm::Use</a></div><div class="ttdoc">A Use represents the edge between a Value definition and its users.</div><div class="ttdef"><b>Definition:</b> <a href="Use_8h_source.html#l00043">Use.h:43</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a833daf718a49c5cd637d8c9ddeaebe07"><div class="ttname"><a href="classllvm_1_1Type.html#a833daf718a49c5cd637d8c9ddeaebe07">llvm::Type::getPrimitiveSizeInBits</a></div><div class="ttdeci">TypeSize getPrimitiveSizeInBits() const LLVM_READONLY</div><div class="ttdoc">Return the basic size of this type if it is a primitive type.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00163">Type.cpp:163</a></div></div>
<div class="ttc" id="aInitialization_8h_html"><div class="ttname"><a href="Initialization_8h.html">Initialization.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstructionCombiningPass_html"><div class="ttname"><a href="classllvm_1_1InstructionCombiningPass.html">llvm::InstructionCombiningPass</a></div><div class="ttdoc">The legacy pass manager's instcombine pass.</div><div class="ttdef"><b>Definition:</b> <a href="Transforms_2InstCombine_2InstCombine_8h_source.html#l00043">InstCombine.h:43</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSetImpl_html_a6bc6fb89fe2e91c25559a8631f56e27e"><div class="ttname"><a href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">llvm::SmallPtrSetImpl::insert</a></div><div class="ttdeci">std::pair&lt; iterator, bool &gt; insert(PtrType Ptr)</div><div class="ttdoc">Inserts Ptr if and only if there is no element in the container equal to Ptr.</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00365">SmallPtrSet.h:365</a></div></div>
<div class="ttc" id="anamespacellvm_1_1Intrinsic_html_a80add6b3b1cdaec560907995127adc16"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a80add6b3b1cdaec560907995127adc16">llvm::Intrinsic::ID</a></div><div class="ttdeci">unsigned ID</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l00039">TargetTransformInfo.h:39</a></div></div>
<div class="ttc" id="aclassllvm_1_1LandingPadInst_html_a97bc0afbd46cc7b3539e1cba861ac350"><div class="ttname"><a href="classllvm_1_1LandingPadInst.html#a97bc0afbd46cc7b3539e1cba861ac350">llvm::LandingPadInst::setCleanup</a></div><div class="ttdeci">void setCleanup(bool V)</div><div class="ttdoc">Indicate that this landingpad instruction is a cleanup.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03006">Instructions.h:3006</a></div></div>
<div class="ttc" id="aclassllvm_1_1PoisonValue_html_a1bf08613fb664a2e377a9a72c59a6b66"><div class="ttname"><a href="classllvm_1_1PoisonValue.html#a1bf08613fb664a2e377a9a72c59a6b66">llvm::PoisonValue::get</a></div><div class="ttdeci">static PoisonValue * get(Type *T)</div><div class="ttdoc">Static factory methods - Return an 'poison' object of the specified type.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l01759">Constants.cpp:1759</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantRange_html_aeddb6f4f9ffcb9e893e5cb321b7a7f83"><div class="ttname"><a href="classllvm_1_1ConstantRange.html#aeddb6f4f9ffcb9e893e5cb321b7a7f83">llvm::ConstantRange::makeExactNoWrapRegion</a></div><div class="ttdeci">static ConstantRange makeExactNoWrapRegion(Instruction::BinaryOps BinOp, const APInt &amp;Other, unsigned NoWrapKind)</div><div class="ttdoc">Produce the range that contains X if and only if &quot;X BinOp Other&quot; does not wrap.</div><div class="ttdef"><b>Definition:</b> <a href="ConstantRange_8cpp_source.html#l00355">ConstantRange.cpp:355</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Aug 7 2023 10:24:08 for LLVM by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LLVM: lib/Transforms/Utils/SampleProfileLoaderBaseUtil.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">LLVM
   &#160;<span id="projectnumber">17.0.0git</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a class="el" href="dir_a72932e0778af28115095468f6286ff8.html">Transforms</a></li><li class="navelem"><a class="el" href="dir_f75c00afeb315f44d76556a7c675e6e8.html">Utils</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">SampleProfileLoaderBaseUtil.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="SampleProfileLoaderBaseUtil_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//===- SampleProfileLoaderBaseUtil.cpp - Profile loader Util func ---------===//</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">// See https://llvm.org/LICENSE.txt for license information.</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">// This file implements the SampleProfileLoader base utility functions.</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160; </div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SampleProfileLoaderBaseUtil_8h.html">llvm/Transforms/Utils/SampleProfileLoaderBaseUtil.h</a>&quot;</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ProfileSummaryInfo_8h.html">llvm/Analysis/ProfileSummaryInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Constants_8h.html">llvm/IR/Constants.h</a>&quot;</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Module_8h.html">llvm/IR/Module.h</a>&quot;</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ModuleUtils_8h.html">llvm/Transforms/Utils/ModuleUtils.h</a>&quot;</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160; </div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespacellvm.html">llvm</a> {</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160; </div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;cl::opt&lt;unsigned&gt; <a class="code" href="namespacellvm.html#a5d0168711b41f5dfcb8cc9bc38adabbf">SampleProfileMaxPropagateIterations</a>(</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;    <span class="stringliteral">&quot;sample-profile-max-propagate-iterations&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(100),</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;    cl::desc(<span class="stringliteral">&quot;Maximum number of iterations to go through when propagating &quot;</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;             <span class="stringliteral">&quot;sample block/edge weights through the CFG.&quot;</span>));</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160; </div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;cl::opt&lt;unsigned&gt; <a class="code" href="namespacellvm.html#ac3bb2a12fc3a0f3e6a4a7b33e5ede867">SampleProfileRecordCoverage</a>(</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;    <span class="stringliteral">&quot;sample-profile-check-record-coverage&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(0), cl::value_desc(<span class="stringliteral">&quot;N&quot;</span>),</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;    cl::desc(<span class="stringliteral">&quot;Emit a warning if less than N% of records in the input profile &quot;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;             <span class="stringliteral">&quot;are matched to the IR.&quot;</span>));</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160; </div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;cl::opt&lt;unsigned&gt; <a class="code" href="namespacellvm.html#a529ab845125f6506d97dfa38d5aafddb">SampleProfileSampleCoverage</a>(</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;    <span class="stringliteral">&quot;sample-profile-check-sample-coverage&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(0), cl::value_desc(<span class="stringliteral">&quot;N&quot;</span>),</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;    cl::desc(<span class="stringliteral">&quot;Emit a warning if less than N% of samples in the input profile &quot;</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;             <span class="stringliteral">&quot;are matched to the IR.&quot;</span>));</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160; </div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;cl::opt&lt;bool&gt; <a class="code" href="namespacellvm.html#a057d4a17b9d5b14c1cba62e390c5bf3e">NoWarnSampleUnused</a>(</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;    <span class="stringliteral">&quot;no-warn-sample-unused&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">false</span>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;    cl::desc(<span class="stringliteral">&quot;Use this option to turn off/on warnings about function with &quot;</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;             <span class="stringliteral">&quot;samples but without debug information to use those samples. &quot;</span>));</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160; </div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;cl::opt&lt;bool&gt; <a class="code" href="namespacellvm.html#a765b03312883ea5c9c220bb9908cd66a">SampleProfileUseProfi</a>(</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;    <span class="stringliteral">&quot;sample-profile-use-profi&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    cl::desc(<span class="stringliteral">&quot;Use profi to infer block and edge counts.&quot;</span>));</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160; </div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="keyword">namespace </span>sampleprofutil {</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="comment">/// Return true if the given callsite is hot wrt to hot cutoff threshold.</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="comment">/// Functions that were inlined in the original binary will be represented</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="comment">/// in the inline stack in the sample profile. If the profile shows that</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="comment">/// the original inline decision was &quot;good&quot; (i.e., the callsite is executed</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="comment">/// frequently), then we will recreate the inline decision and apply the</span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="comment">/// profile from the inlined callsite.</span></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="comment">/// To decide whether an inlined callsite is hot, we compare the callsite</span></div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="comment">/// sample count with the hot cutoff computed by ProfileSummaryInfo, it is</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="comment">/// regarded as hot if the count is above the cutoff value.</span></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="comment">/// When ProfileAccurateForSymsInList is enabled and profile symbol list</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="comment">/// is present, functions in the profile symbol list but without profile will</span></div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="comment">/// be regarded as cold and much less inlining will happen in CGSCC inlining</span></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="comment">/// pass, so we tend to lower the hot criteria here to allow more early</span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="comment">/// inlining to happen for warm callsites and it is helpful for performance.</span></div>
<div class="line"><a name="l00064"></a><span class="lineno"><a class="line" href="namespacellvm_1_1sampleprofutil.html#ab6789a9522443425d339fa34c25f89d5">   64</a></span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> <a class="code" href="namespacellvm_1_1sampleprofutil.html#ab6789a9522443425d339fa34c25f89d5">callsiteIsHot</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1sampleprof_1_1FunctionSamples.html">FunctionSamples</a> *CallsiteFS, <a class="code" href="classllvm_1_1ProfileSummaryInfo.html">ProfileSummaryInfo</a> *PSI,</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;                   <span class="keywordtype">bool</span> ProfAccForSymsInList) {</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;  <span class="keywordflow">if</span> (!CallsiteFS)</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="comment">// The callsite was not inlined in the original binary.</span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160; </div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(PSI &amp;&amp; <span class="stringliteral">&quot;PSI is expected to be non null&quot;</span>);</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;  <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> CallsiteTotalSamples = CallsiteFS-&gt;<a class="code" href="classllvm_1_1sampleprof_1_1FunctionSamples.html#adb2786061d3e569b42b7d661ccc57484">getTotalSamples</a>();</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;  <span class="keywordflow">if</span> (ProfAccForSymsInList)</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    <span class="keywordflow">return</span> !PSI-&gt;<a class="code" href="classllvm_1_1ProfileSummaryInfo.html#a5f58eb949321536363605ac9920a95cb">isColdCount</a>(CallsiteTotalSamples);</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    <span class="keywordflow">return</span> PSI-&gt;<a class="code" href="classllvm_1_1ProfileSummaryInfo.html#ac46d4d55dd867977ba88d57a170e31de">isHotCount</a>(CallsiteTotalSamples);</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;}</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="comment">/// Mark as used the sample record for the given function samples at</span></div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="comment">/// (LineOffset, Discriminator).</span></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="comment">/// \returns true if this is the first time we mark the given record.</span></div>
<div class="line"><a name="l00081"></a><span class="lineno"><a class="line" href="classllvm_1_1sampleprofutil_1_1SampleCoverageTracker.html#adb303c9c849d1db014aac9dc66d344c8">   81</a></span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1sampleprofutil_1_1SampleCoverageTracker.html#adb303c9c849d1db014aac9dc66d344c8">SampleCoverageTracker::markSamplesUsed</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1sampleprof_1_1FunctionSamples.html">FunctionSamples</a> *<a class="code" href="namespacellvm_1_1X86AS.html#aea2591d7d017866934bcf72ee3dc8a31a5b3a782ccae295a254e2794ad30ad07f">FS</a>,</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;                                            <a class="code" href="classuint32__t.html">uint32_t</a> LineOffset,</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;                                            <a class="code" href="classuint32__t.html">uint32_t</a> Discriminator,</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;                                            <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> Samples) {</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;  <a class="code" href="structllvm_1_1sampleprof_1_1LineLocation.html">LineLocation</a> Loc(LineOffset, Discriminator);</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;  <span class="keywordtype">unsigned</span> &amp;Count = SampleCoverage[<a class="code" href="namespacellvm_1_1X86AS.html#aea2591d7d017866934bcf72ee3dc8a31a5b3a782ccae295a254e2794ad30ad07f">FS</a>][Loc];</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;  <span class="keywordtype">bool</span> FirstTime = (++Count == 1);</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;  <span class="keywordflow">if</span> (FirstTime)</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    TotalUsedSamples += Samples;</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;  <span class="keywordflow">return</span> FirstTime;</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;}</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="comment">/// Return the number of sample records that were applied from this profile.</span></div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="comment">/// This count does not include records from cold inlined callsites.</span></div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="comment"></span><span class="keywordtype">unsigned</span></div>
<div class="line"><a name="l00097"></a><span class="lineno"><a class="line" href="classllvm_1_1sampleprofutil_1_1SampleCoverageTracker.html#a3dd722b8bbc4b043fd9a360f68aead04">   97</a></span>&#160;<a class="code" href="classllvm_1_1sampleprofutil_1_1SampleCoverageTracker.html#a3dd722b8bbc4b043fd9a360f68aead04">SampleCoverageTracker::countUsedRecords</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1sampleprof_1_1FunctionSamples.html">FunctionSamples</a> *<a class="code" href="namespacellvm_1_1X86AS.html#aea2591d7d017866934bcf72ee3dc8a31a5b3a782ccae295a254e2794ad30ad07f">FS</a>,</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;                                        <a class="code" href="classllvm_1_1ProfileSummaryInfo.html">ProfileSummaryInfo</a> *PSI)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;  <span class="keyword">auto</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = SampleCoverage.<a class="code" href="classllvm_1_1DenseMapBase.html#a0c047f127ed4380a6f383d70bec4eb94">find</a>(<a class="code" href="namespacellvm_1_1X86AS.html#aea2591d7d017866934bcf72ee3dc8a31a5b3a782ccae295a254e2794ad30ad07f">FS</a>);</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160; </div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;  <span class="comment">// The size of the coverage map for FS represents the number of records</span></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;  <span class="comment">// that were marked used at least once.</span></div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;  <span class="keywordtype">unsigned</span> Count = (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != SampleCoverage.<a class="code" href="classllvm_1_1DenseMapBase.html#a65520b9c67759099e313d0f4e7b5ff9e">end</a>()) ? <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;second.size() : 0;</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160; </div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;  <span class="comment">// If there are inlined callsites in this function, count the samples found</span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;  <span class="comment">// in the respective bodies. However, do not bother counting callees with 0</span></div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;  <span class="comment">// total samples, these are callees that were never invoked at runtime.</span></div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : <a class="code" href="namespacellvm_1_1X86AS.html#aea2591d7d017866934bcf72ee3dc8a31a5b3a782ccae295a254e2794ad30ad07f">FS</a>-&gt;getCallsiteSamples())</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;J : <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.second) {</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1sampleprof_1_1FunctionSamples.html">FunctionSamples</a> *CalleeSamples = &amp;J.second;</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1sampleprofutil.html#ab6789a9522443425d339fa34c25f89d5">callsiteIsHot</a>(CalleeSamples, PSI, ProfAccForSymsInList))</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;        Count += <a class="code" href="classllvm_1_1sampleprofutil_1_1SampleCoverageTracker.html#a3dd722b8bbc4b043fd9a360f68aead04">countUsedRecords</a>(CalleeSamples, PSI);</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    }</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160; </div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;  <span class="keywordflow">return</span> Count;</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;}</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<span class="comment">/// Return the number of sample records in the body of this profile.</span></div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<span class="comment">/// This count does not include records from cold inlined callsites.</span></div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="comment"></span><span class="keywordtype">unsigned</span></div>
<div class="line"><a name="l00122"></a><span class="lineno"><a class="line" href="classllvm_1_1sampleprofutil_1_1SampleCoverageTracker.html#a115955d2509b80c7c2c435899404b086">  122</a></span>&#160;<a class="code" href="classllvm_1_1sampleprofutil_1_1SampleCoverageTracker.html#a115955d2509b80c7c2c435899404b086">SampleCoverageTracker::countBodyRecords</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1sampleprof_1_1FunctionSamples.html">FunctionSamples</a> *<a class="code" href="namespacellvm_1_1X86AS.html#aea2591d7d017866934bcf72ee3dc8a31a5b3a782ccae295a254e2794ad30ad07f">FS</a>,</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;                                        <a class="code" href="classllvm_1_1ProfileSummaryInfo.html">ProfileSummaryInfo</a> *PSI)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;  <span class="keywordtype">unsigned</span> Count = <a class="code" href="namespacellvm_1_1X86AS.html#aea2591d7d017866934bcf72ee3dc8a31a5b3a782ccae295a254e2794ad30ad07f">FS</a>-&gt;getBodySamples().size();</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160; </div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;  <span class="comment">// Only count records in hot callsites.</span></div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : <a class="code" href="namespacellvm_1_1X86AS.html#aea2591d7d017866934bcf72ee3dc8a31a5b3a782ccae295a254e2794ad30ad07f">FS</a>-&gt;getCallsiteSamples())</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;J : <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.second) {</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1sampleprof_1_1FunctionSamples.html">FunctionSamples</a> *CalleeSamples = &amp;J.second;</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1sampleprofutil.html#ab6789a9522443425d339fa34c25f89d5">callsiteIsHot</a>(CalleeSamples, PSI, ProfAccForSymsInList))</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;        Count += <a class="code" href="classllvm_1_1sampleprofutil_1_1SampleCoverageTracker.html#a115955d2509b80c7c2c435899404b086">countBodyRecords</a>(CalleeSamples, PSI);</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    }</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160; </div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;  <span class="keywordflow">return</span> Count;</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;}</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;<span class="comment">/// Return the number of samples collected in the body of this profile.</span></div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;<span class="comment">/// This count does not include samples from cold inlined callsites.</span></div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<span class="comment"></span><a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a></div>
<div class="line"><a name="l00141"></a><span class="lineno"><a class="line" href="classllvm_1_1sampleprofutil_1_1SampleCoverageTracker.html#a982cd37395d6c62bb2030d3e1b09b4d0">  141</a></span>&#160;<a class="code" href="classllvm_1_1sampleprofutil_1_1SampleCoverageTracker.html#a982cd37395d6c62bb2030d3e1b09b4d0">SampleCoverageTracker::countBodySamples</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1sampleprof_1_1FunctionSamples.html">FunctionSamples</a> *<a class="code" href="namespacellvm_1_1X86AS.html#aea2591d7d017866934bcf72ee3dc8a31a5b3a782ccae295a254e2794ad30ad07f">FS</a>,</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;                                        <a class="code" href="classllvm_1_1ProfileSummaryInfo.html">ProfileSummaryInfo</a> *PSI)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;  <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> <a class="code" href="namespacellvm.html#af5ab7a47bc553dfc3ee92daf969d0d7ca96b0141273eabab320119c467cdcaf17">Total</a> = 0;</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : <a class="code" href="namespacellvm_1_1X86AS.html#aea2591d7d017866934bcf72ee3dc8a31a5b3a782ccae295a254e2794ad30ad07f">FS</a>-&gt;getBodySamples())</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    <a class="code" href="namespacellvm.html#af5ab7a47bc553dfc3ee92daf969d0d7ca96b0141273eabab320119c467cdcaf17">Total</a> += <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.second.getSamples();</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160; </div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;  <span class="comment">// Only count samples in hot callsites.</span></div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : <a class="code" href="namespacellvm_1_1X86AS.html#aea2591d7d017866934bcf72ee3dc8a31a5b3a782ccae295a254e2794ad30ad07f">FS</a>-&gt;getCallsiteSamples())</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;J : <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.second) {</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1sampleprof_1_1FunctionSamples.html">FunctionSamples</a> *CalleeSamples = &amp;J.second;</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1sampleprofutil.html#ab6789a9522443425d339fa34c25f89d5">callsiteIsHot</a>(CalleeSamples, PSI, ProfAccForSymsInList))</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;        <a class="code" href="namespacellvm.html#af5ab7a47bc553dfc3ee92daf969d0d7ca96b0141273eabab320119c467cdcaf17">Total</a> += <a class="code" href="classllvm_1_1sampleprofutil_1_1SampleCoverageTracker.html#a982cd37395d6c62bb2030d3e1b09b4d0">countBodySamples</a>(CalleeSamples, PSI);</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    }</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160; </div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#af5ab7a47bc553dfc3ee92daf969d0d7ca96b0141273eabab320119c467cdcaf17">Total</a>;</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;}</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;<span class="comment">/// Return the fraction of sample records used in this profile.</span></div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;<span class="comment">/// The returned value is an unsigned integer in the range 0-100 indicating</span></div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;<span class="comment">/// the percentage of sample records that were used while applying this</span></div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;<span class="comment">/// profile to the associated function.</span></div>
<div class="line"><a name="l00163"></a><span class="lineno"><a class="line" href="classllvm_1_1sampleprofutil_1_1SampleCoverageTracker.html#a794d2f372a7bc1e5f5f90bd2bc5ca8d3">  163</a></span>&#160;<span class="comment"></span><span class="keywordtype">unsigned</span> <a class="code" href="classllvm_1_1sampleprofutil_1_1SampleCoverageTracker.html#a794d2f372a7bc1e5f5f90bd2bc5ca8d3">SampleCoverageTracker::computeCoverage</a>(<span class="keywordtype">unsigned</span> Used,</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;                                                <span class="keywordtype">unsigned</span> Total)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Used &lt;= <a class="code" href="namespacellvm.html#af5ab7a47bc553dfc3ee92daf969d0d7ca96b0141273eabab320119c467cdcaf17">Total</a> &amp;&amp;</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;         <span class="stringliteral">&quot;number of used records cannot exceed the total number of records&quot;</span>);</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#af5ab7a47bc553dfc3ee92daf969d0d7ca96b0141273eabab320119c467cdcaf17">Total</a> &gt; 0 ? Used * 100 / <a class="code" href="namespacellvm.html#af5ab7a47bc553dfc3ee92daf969d0d7ca96b0141273eabab320119c467cdcaf17">Total</a> : 100;</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;}</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;<span class="comment">/// Create a global variable to flag FSDiscriminators are used.</span></div>
<div class="line"><a name="l00171"></a><span class="lineno"><a class="line" href="namespacellvm_1_1sampleprofutil.html#a9495513e04a8f797cc8723887bdbd13c">  171</a></span>&#160;<span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="namespacellvm_1_1sampleprofutil.html#a9495513e04a8f797cc8723887bdbd13c">createFSDiscriminatorVariable</a>(<a class="code" href="classllvm_1_1Module.html">Module</a> *M) {</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *FSDiscriminatorVar = <span class="stringliteral">&quot;__llvm_fs_discriminator__&quot;</span>;</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>-&gt;getGlobalVariable(FSDiscriminatorVar))</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160; </div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;  <span class="keyword">auto</span> &amp;<a class="code" href="NVVMIntrRange_8cpp.html#afad351d7bf10ac0446b64e7827634e94">Context</a> = <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>-&gt;getContext();</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;  <span class="comment">// Place this variable to llvm.used so it won&#39;t be GC&#39;ed.</span></div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;  <a class="code" href="namespacellvm.html#ae879dd14ccc28696f3d8c7b484df3c9a">appendToUsed</a>(*<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>, {<span class="keyword">new</span> <a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a>(*<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>, <a class="code" href="classllvm_1_1Type.html#aa75984a442f2379de0c66018201fa628">Type::getInt1Ty</a>(<a class="code" href="NVVMIntrRange_8cpp.html#afad351d7bf10ac0446b64e7827634e94">Context</a>), <span class="keyword">true</span>,</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;                                       <a class="code" href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57ca696bb1c9b0b0e76bb70c61f68866452a">GlobalValue::WeakODRLinkage</a>,</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;                                       <a class="code" href="classllvm_1_1ConstantInt.html#a82dbbd8e3688b0bc1eedb338864d0d0c">ConstantInt::getTrue</a>(<a class="code" href="NVVMIntrRange_8cpp.html#afad351d7bf10ac0446b64e7827634e94">Context</a>),</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;                                       FSDiscriminatorVar)});</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;}</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160; </div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;} <span class="comment">// end of namespace sampleprofutil</span></div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;} <span class="comment">// end of namespace llvm</span></div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="anamespacellvm_html"><div class="ttname"><a href="namespacellvm.html">llvm</a></div><div class="ttdoc">This is an optimization pass for GlobalISel generic memory operations.</div><div class="ttdef"><b>Definition:</b> <a href="AddressRanges_8h_source.html#l00018">AddressRanges.h:18</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_aa75984a442f2379de0c66018201fa628"><div class="ttname"><a href="classllvm_1_1Type.html#aa75984a442f2379de0c66018201fa628">llvm::Type::getInt1Ty</a></div><div class="ttdeci">static IntegerType * getInt1Ty(LLVMContext &amp;C)</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00238">Type.cpp:238</a></div></div>
<div class="ttc" id="alib_2Target_2X86_2README_8txt_html_ac88fe1d3a61b056a4f64fbbb156a62ff"><div class="ttname"><a href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a></div><div class="ttdeci">We currently emits eax Perhaps this is what we really should generate is Is imull three or four cycles eax eax The current instruction priority is based on pattern complexity The former is more complex because it folds a load so the latter will not be emitted Perhaps we should use AddedComplexity to give LEA32r a higher priority We should always try to match LEA first since the LEA matching code does some estimate to determine whether the match is profitable if we care more about code then imull is better It s two bytes shorter than movl leal On a Pentium M</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2X86_2README_8txt_source.html#l00252">README.txt:252</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalVariable_html"><div class="ttname"><a href="classllvm_1_1GlobalVariable.html">llvm::GlobalVariable</a></div><div class="ttdef"><b>Definition:</b> <a href="GlobalVariable_8h_source.html#l00039">GlobalVariable.h:39</a></div></div>
<div class="ttc" id="anamespacellvm_1_1cl_html_a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6"><div class="ttname"><a href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">llvm::cl::Hidden</a></div><div class="ttdeci">@ Hidden</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00138">CommandLine.h:138</a></div></div>
<div class="ttc" id="anamespacellvm_html_af5ab7a47bc553dfc3ee92daf969d0d7ca96b0141273eabab320119c467cdcaf17"><div class="ttname"><a href="namespacellvm.html#af5ab7a47bc553dfc3ee92daf969d0d7ca96b0141273eabab320119c467cdcaf17">llvm::TensorType::Total</a></div><div class="ttdeci">@ Total</div></div>
<div class="ttc" id="aModule_8h_html"><div class="ttname"><a href="Module_8h.html">Module.h</a></div></div>
<div class="ttc" id="aNVVMIntrRange_8cpp_html_afad351d7bf10ac0446b64e7827634e94"><div class="ttname"><a href="NVVMIntrRange_8cpp.html#afad351d7bf10ac0446b64e7827634e94">Context</a></div><div class="ttdeci">LLVMContext &amp; Context</div><div class="ttdef"><b>Definition:</b> <a href="NVVMIntrRange_8cpp_source.html#l00066">NVVMIntrRange.cpp:66</a></div></div>
<div class="ttc" id="aclassllvm_1_1ProfileSummaryInfo_html_a5f58eb949321536363605ac9920a95cb"><div class="ttname"><a href="classllvm_1_1ProfileSummaryInfo.html#a5f58eb949321536363605ac9920a95cb">llvm::ProfileSummaryInfo::isColdCount</a></div><div class="ttdeci">bool isColdCount(uint64_t C) const</div><div class="ttdoc">Returns true if count C is considered cold.</div><div class="ttdef"><b>Definition:</b> <a href="ProfileSummaryInfo_8cpp_source.html#l00296">ProfileSummaryInfo.cpp:296</a></div></div>
<div class="ttc" id="aConstants_8h_html"><div class="ttname"><a href="Constants_8h.html">Constants.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1sampleprof_1_1FunctionSamples_html_adb2786061d3e569b42b7d661ccc57484"><div class="ttname"><a href="classllvm_1_1sampleprof_1_1FunctionSamples.html#adb2786061d3e569b42b7d661ccc57484">llvm::sampleprof::FunctionSamples::getTotalSamples</a></div><div class="ttdeci">uint64_t getTotalSamples() const</div><div class="ttdoc">Return the total number of samples collected inside the function.</div><div class="ttdef"><b>Definition:</b> <a href="SampleProf_8h_source.html#l00891">SampleProf.h:891</a></div></div>
<div class="ttc" id="anamespacellvm_1_1sampleprofutil_html_a9495513e04a8f797cc8723887bdbd13c"><div class="ttname"><a href="namespacellvm_1_1sampleprofutil.html#a9495513e04a8f797cc8723887bdbd13c">llvm::sampleprofutil::createFSDiscriminatorVariable</a></div><div class="ttdeci">void createFSDiscriminatorVariable(Module *M)</div><div class="ttdoc">Create a global variable to flag FSDiscriminators are used.</div><div class="ttdef"><b>Definition:</b> <a href="SampleProfileLoaderBaseUtil_8cpp_source.html#l00171">SampleProfileLoaderBaseUtil.cpp:171</a></div></div>
<div class="ttc" id="aSampleProfileLoaderBaseUtil_8h_html"><div class="ttname"><a href="SampleProfileLoaderBaseUtil_8h.html">SampleProfileLoaderBaseUtil.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1ProfileSummaryInfo_html"><div class="ttname"><a href="classllvm_1_1ProfileSummaryInfo.html">llvm::ProfileSummaryInfo</a></div><div class="ttdoc">Analysis providing profile information.</div><div class="ttdef"><b>Definition:</b> <a href="ProfileSummaryInfo_8h_source.html#l00040">ProfileSummaryInfo.h:40</a></div></div>
<div class="ttc" id="aADT_2tmp_8txt_html_a07ed0bfaa124c15897944fe3eaa971ab"><div class="ttname"><a href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a></div><div class="ttdeci">Class for arbitrary precision integers APInt is a functional replacement for common case unsigned integer type like unsigned long or uint64_t</div><div class="ttdef"><b>Definition:</b> <a href="ADT_2tmp_8txt_source.html#l00001">tmp.txt:1</a></div></div>
<div class="ttc" id="aclassllvm_1_1ProfileSummaryInfo_html_ac46d4d55dd867977ba88d57a170e31de"><div class="ttname"><a href="classllvm_1_1ProfileSummaryInfo.html#ac46d4d55dd867977ba88d57a170e31de">llvm::ProfileSummaryInfo::isHotCount</a></div><div class="ttdeci">bool isHotCount(uint64_t C) const</div><div class="ttdoc">Returns true if count C is considered hot.</div><div class="ttdef"><b>Definition:</b> <a href="ProfileSummaryInfo_8cpp_source.html#l00292">ProfileSummaryInfo.cpp:292</a></div></div>
<div class="ttc" id="aProfileSummaryInfo_8h_html"><div class="ttname"><a href="ProfileSummaryInfo_8h.html">ProfileSummaryInfo.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1sampleprof_1_1FunctionSamples_html"><div class="ttname"><a href="classllvm_1_1sampleprof_1_1FunctionSamples.html">llvm::sampleprof::FunctionSamples</a></div><div class="ttdoc">Representation of the samples collected for a function.</div><div class="ttdef"><b>Definition:</b> <a href="SampleProf_8h_source.html#l00726">SampleProf.h:726</a></div></div>
<div class="ttc" id="aMD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00058">MD5.cpp:58</a></div></div>
<div class="ttc" id="anamespacellvm_html_a765b03312883ea5c9c220bb9908cd66a"><div class="ttname"><a href="namespacellvm.html#a765b03312883ea5c9c220bb9908cd66a">llvm::SampleProfileUseProfi</a></div><div class="ttdeci">cl::opt&lt; bool &gt; SampleProfileUseProfi</div></div>
<div class="ttc" id="anamespacellvm_1_1cl_html_a10a041239ae1870cfcc064bfaa79fb65"><div class="ttname"><a href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">llvm::cl::init</a></div><div class="ttdeci">initializer&lt; Ty &gt; init(const Ty &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00445">CommandLine.h:445</a></div></div>
<div class="ttc" id="anamespacellvm_html_ae879dd14ccc28696f3d8c7b484df3c9a"><div class="ttname"><a href="namespacellvm.html#ae879dd14ccc28696f3d8c7b484df3c9a">llvm::appendToUsed</a></div><div class="ttdeci">void appendToUsed(Module &amp;M, ArrayRef&lt; GlobalValue * &gt; Values)</div><div class="ttdoc">Adds global values to the llvm.used list.</div><div class="ttdef"><b>Definition:</b> <a href="ModuleUtils_8cpp_source.html#l00109">ModuleUtils.cpp:109</a></div></div>
<div class="ttc" id="aclassllvm_1_1sampleprofutil_1_1SampleCoverageTracker_html_a982cd37395d6c62bb2030d3e1b09b4d0"><div class="ttname"><a href="classllvm_1_1sampleprofutil_1_1SampleCoverageTracker.html#a982cd37395d6c62bb2030d3e1b09b4d0">llvm::sampleprofutil::SampleCoverageTracker::countBodySamples</a></div><div class="ttdeci">uint64_t countBodySamples(const FunctionSamples *FS, ProfileSummaryInfo *PSI) const</div><div class="ttdoc">Return the number of samples collected in the body of this profile.</div><div class="ttdef"><b>Definition:</b> <a href="SampleProfileLoaderBaseUtil_8cpp_source.html#l00141">SampleProfileLoaderBaseUtil.cpp:141</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseMapBase_html_a0c047f127ed4380a6f383d70bec4eb94"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#a0c047f127ed4380a6f383d70bec4eb94">llvm::DenseMapBase::find</a></div><div class="ttdeci">iterator find(const_arg_type_t&lt; KeyT &gt; Val)</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00150">DenseMap.h:150</a></div></div>
<div class="ttc" id="aSILowerControlFlow_8cpp_html_a4868c5d81c5ccc98c47aeab6244346a0"><div class="ttname"><a href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a></div><div class="ttdeci">assert(ImpDefSCC.getReg()==AMDGPU::SCC &amp;&amp;ImpDefSCC.isDef())</div></div>
<div class="ttc" id="anamespacellvm_1_1X86AS_html_aea2591d7d017866934bcf72ee3dc8a31a5b3a782ccae295a254e2794ad30ad07f"><div class="ttname"><a href="namespacellvm_1_1X86AS.html#aea2591d7d017866934bcf72ee3dc8a31a5b3a782ccae295a254e2794ad30ad07f">llvm::X86AS::FS</a></div><div class="ttdeci">@ FS</div><div class="ttdef"><b>Definition:</b> <a href="X86_8h_source.html#l00201">X86.h:201</a></div></div>
<div class="ttc" id="aclassllvm_1_1Module_html"><div class="ttname"><a href="classllvm_1_1Module.html">llvm::Module</a></div><div class="ttdoc">A Module instance is used to store all the information related to an LLVM module.</div><div class="ttdef"><b>Definition:</b> <a href="Module_8h_source.html#l00065">Module.h:65</a></div></div>
<div class="ttc" id="astructllvm_1_1sampleprof_1_1LineLocation_html"><div class="ttname"><a href="structllvm_1_1sampleprof_1_1LineLocation.html">llvm::sampleprof::LineLocation</a></div><div class="ttdoc">Represents the relative location of an instruction.</div><div class="ttdef"><b>Definition:</b> <a href="SampleProf_8h_source.html#l00283">SampleProf.h:283</a></div></div>
<div class="ttc" id="aclassllvm_1_1sampleprofutil_1_1SampleCoverageTracker_html_a794d2f372a7bc1e5f5f90bd2bc5ca8d3"><div class="ttname"><a href="classllvm_1_1sampleprofutil_1_1SampleCoverageTracker.html#a794d2f372a7bc1e5f5f90bd2bc5ca8d3">llvm::sampleprofutil::SampleCoverageTracker::computeCoverage</a></div><div class="ttdeci">unsigned computeCoverage(unsigned Used, unsigned Total) const</div><div class="ttdoc">Return the fraction of sample records used in this profile.</div><div class="ttdef"><b>Definition:</b> <a href="SampleProfileLoaderBaseUtil_8cpp_source.html#l00163">SampleProfileLoaderBaseUtil.cpp:163</a></div></div>
<div class="ttc" id="anamespacellvm_html_a529ab845125f6506d97dfa38d5aafddb"><div class="ttname"><a href="namespacellvm.html#a529ab845125f6506d97dfa38d5aafddb">llvm::SampleProfileSampleCoverage</a></div><div class="ttdeci">cl::opt&lt; unsigned &gt; SampleProfileSampleCoverage</div></div>
<div class="ttc" id="aclassllvm_1_1GlobalValue_html_aedfa75f0c85c4aa85b257f066fbea57ca696bb1c9b0b0e76bb70c61f68866452a"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57ca696bb1c9b0b0e76bb70c61f68866452a">llvm::GlobalValue::WeakODRLinkage</a></div><div class="ttdeci">@ WeakODRLinkage</div><div class="ttdoc">Same, but only replaced by something equivalent.</div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00053">GlobalValue.h:53</a></div></div>
<div class="ttc" id="aclassllvm_1_1sampleprofutil_1_1SampleCoverageTracker_html_a115955d2509b80c7c2c435899404b086"><div class="ttname"><a href="classllvm_1_1sampleprofutil_1_1SampleCoverageTracker.html#a115955d2509b80c7c2c435899404b086">llvm::sampleprofutil::SampleCoverageTracker::countBodyRecords</a></div><div class="ttdeci">unsigned countBodyRecords(const FunctionSamples *FS, ProfileSummaryInfo *PSI) const</div><div class="ttdoc">Return the number of sample records in the body of this profile.</div><div class="ttdef"><b>Definition:</b> <a href="SampleProfileLoaderBaseUtil_8cpp_source.html#l00122">SampleProfileLoaderBaseUtil.cpp:122</a></div></div>
<div class="ttc" id="aclassuint32__t_html"><div class="ttname"><a href="classuint32__t.html">uint32_t</a></div></div>
<div class="ttc" id="aclassllvm_1_1sampleprofutil_1_1SampleCoverageTracker_html_a3dd722b8bbc4b043fd9a360f68aead04"><div class="ttname"><a href="classllvm_1_1sampleprofutil_1_1SampleCoverageTracker.html#a3dd722b8bbc4b043fd9a360f68aead04">llvm::sampleprofutil::SampleCoverageTracker::countUsedRecords</a></div><div class="ttdeci">unsigned countUsedRecords(const FunctionSamples *FS, ProfileSummaryInfo *PSI) const</div><div class="ttdoc">Return the number of sample records that were applied from this profile.</div><div class="ttdef"><b>Definition:</b> <a href="SampleProfileLoaderBaseUtil_8cpp_source.html#l00097">SampleProfileLoaderBaseUtil.cpp:97</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantInt_html_a82dbbd8e3688b0bc1eedb338864d0d0c"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#a82dbbd8e3688b0bc1eedb338864d0d0c">llvm::ConstantInt::getTrue</a></div><div class="ttdeci">static ConstantInt * getTrue(LLVMContext &amp;Context)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00835">Constants.cpp:835</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseMapBase_html_a65520b9c67759099e313d0f4e7b5ff9e"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#a65520b9c67759099e313d0f4e7b5ff9e">llvm::DenseMapBase::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00084">DenseMap.h:84</a></div></div>
<div class="ttc" id="anamespacellvm_1_1sampleprofutil_html_ab6789a9522443425d339fa34c25f89d5"><div class="ttname"><a href="namespacellvm_1_1sampleprofutil.html#ab6789a9522443425d339fa34c25f89d5">llvm::sampleprofutil::callsiteIsHot</a></div><div class="ttdeci">bool callsiteIsHot(const FunctionSamples *CallsiteFS, ProfileSummaryInfo *PSI, bool ProfAccForSymsInList)</div><div class="ttdoc">Return true if the given callsite is hot wrt to hot cutoff threshold.</div><div class="ttdef"><b>Definition:</b> <a href="SampleProfileLoaderBaseUtil_8cpp_source.html#l00064">SampleProfileLoaderBaseUtil.cpp:64</a></div></div>
<div class="ttc" id="aclassllvm_1_1sampleprofutil_1_1SampleCoverageTracker_html_adb303c9c849d1db014aac9dc66d344c8"><div class="ttname"><a href="classllvm_1_1sampleprofutil_1_1SampleCoverageTracker.html#adb303c9c849d1db014aac9dc66d344c8">llvm::sampleprofutil::SampleCoverageTracker::markSamplesUsed</a></div><div class="ttdeci">bool markSamplesUsed(const FunctionSamples *FS, uint32_t LineOffset, uint32_t Discriminator, uint64_t Samples)</div><div class="ttdoc">Mark as used the sample record for the given function samples at (LineOffset, Discriminator).</div><div class="ttdef"><b>Definition:</b> <a href="SampleProfileLoaderBaseUtil_8cpp_source.html#l00081">SampleProfileLoaderBaseUtil.cpp:81</a></div></div>
<div class="ttc" id="aModuleUtils_8h_html"><div class="ttname"><a href="ModuleUtils_8h.html">ModuleUtils.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_ac3bb2a12fc3a0f3e6a4a7b33e5ede867"><div class="ttname"><a href="namespacellvm.html#ac3bb2a12fc3a0f3e6a4a7b33e5ede867">llvm::SampleProfileRecordCoverage</a></div><div class="ttdeci">cl::opt&lt; unsigned &gt; SampleProfileRecordCoverage</div></div>
<div class="ttc" id="anamespacellvm_html_a5d0168711b41f5dfcb8cc9bc38adabbf"><div class="ttname"><a href="namespacellvm.html#a5d0168711b41f5dfcb8cc9bc38adabbf">llvm::SampleProfileMaxPropagateIterations</a></div><div class="ttdeci">cl::opt&lt; unsigned &gt; SampleProfileMaxPropagateIterations</div></div>
<div class="ttc" id="anamespacellvm_html_a057d4a17b9d5b14c1cba62e390c5bf3e"><div class="ttname"><a href="namespacellvm.html#a057d4a17b9d5b14c1cba62e390c5bf3e">llvm::NoWarnSampleUnused</a></div><div class="ttdeci">cl::opt&lt; bool &gt; NoWarnSampleUnused</div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Aug 7 2023 10:36:49 for LLVM by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LLVM: lib/Transforms/Instrumentation/PGOInstrumentation.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">LLVM
   &#160;<span id="projectnumber">17.0.0git</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a class="el" href="dir_a72932e0778af28115095468f6286ff8.html">Transforms</a></li><li class="navelem"><a class="el" href="dir_f844fca3b2393802daa002d01dc8623e.html">Instrumentation</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">PGOInstrumentation.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="PGOInstrumentation_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//===- PGOInstrumentation.cpp - MST-based PGO Instrumentation -------------===//</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">// See https://llvm.org/LICENSE.txt for license information.</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">// This file implements PGO instrumentation using a minimum spanning tree based</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">// on the following paper:</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">//   [1] Donald E. Knuth, Francis R. Stevenson. Optimal measurement of points</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">//   for program frequency counts. BIT Numerical Mathematics 1973, Volume 13,</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">//   Issue 3, pp 313-322</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">// The idea of the algorithm based on the fact that for each node (except for</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">// the entry and exit), the sum of incoming edge counts equals the sum of</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">// outgoing edge counts. The count of edge on spanning tree can be derived from</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">// those edges not on the spanning tree. Knuth proves this method instruments</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment">// the minimum number of edges.</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment">// The minimal spanning tree here is actually a maximum weight tree -- on-tree</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment">// edges have higher frequencies (more likely to execute). The idea is to</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment">// instrument those less frequently executed edges to reduce the runtime</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment">// overhead of instrumented binaries.</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment">// This file contains two passes:</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment">// (1) Pass PGOInstrumentationGen which instruments the IR to generate edge</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment">// count profile, and generates the instrumentation for indirect call</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment">// profiling.</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment">// (2) Pass PGOInstrumentationUse which reads the edge count profile and</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="comment">// annotates the branch weights. It also reads the indirect call value</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="comment">// profiling records and annotate the indirect call instructions.</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="comment">// To get the precise counter information, These two passes need to invoke at</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="comment">// the same compilation point (so they see the same IR). For pass</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="comment">// PGOInstrumentationGen, the real work is done in instrumentOneFunc(). For</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="comment">// pass PGOInstrumentationUse, the real work in done in class PGOUseFunc and</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="comment">// the profile is opened in module level and passed to each PGOUseFunc instance.</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="comment">// The shared code for PGOInstrumentationGen and PGOInstrumentationUse is put</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="comment">// in class FuncPGOInstrumentation.</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="comment">// Class PGOEdge represents a CFG edge and some auxiliary information. Class</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="comment">// BBInfo contains auxiliary information for each BB. These two classes are used</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="comment">// in pass PGOInstrumentationGen. Class PGOUseEdge and UseBBInfo are the derived</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="comment">// class of PGOEdge and BBInfo, respectively. They contains extra data structure</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="comment">// used in populating profile counters.</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="comment">// The MST implementation is in Class CFGMST (CFGMST.h).</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160; </div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="PGOInstrumentation_8h.html">llvm/Transforms/Instrumentation/PGOInstrumentation.h</a>&quot;</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CFGMST_8h.html">CFGMST.h</a>&quot;</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ValueProfileCollector_8h.html">ValueProfileCollector.h</a>&quot;</span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="APInt_8h.html">llvm/ADT/APInt.h</a>&quot;</span></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ArrayRef_8h.html">llvm/ADT/ArrayRef.h</a>&quot;</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="STLExtras_8h.html">llvm/ADT/STLExtras.h</a>&quot;</span></div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SmallVector_8h.html">llvm/ADT/SmallVector.h</a>&quot;</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Statistic_8h.html">llvm/ADT/Statistic.h</a>&quot;</span></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="StringRef_8h.html">llvm/ADT/StringRef.h</a>&quot;</span></div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Twine_8h.html">llvm/ADT/Twine.h</a>&quot;</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="iterator_8h.html">llvm/ADT/iterator.h</a>&quot;</span></div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="iterator__range_8h.html">llvm/ADT/iterator_range.h</a>&quot;</span></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="BlockFrequencyInfo_8h.html">llvm/Analysis/BlockFrequencyInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="BranchProbabilityInfo_8h.html">llvm/Analysis/BranchProbabilityInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Analysis_2CFG_8h.html">llvm/Analysis/CFG.h</a>&quot;</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LoopInfo_8h.html">llvm/Analysis/LoopInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MemoryBuiltins_8h.html">llvm/Analysis/MemoryBuiltins.h</a>&quot;</span></div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MemoryProfileInfo_8h.html">llvm/Analysis/MemoryProfileInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="OptimizationRemarkEmitter_8h.html">llvm/Analysis/OptimizationRemarkEmitter.h</a>&quot;</span></div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ProfileSummaryInfo_8h.html">llvm/Analysis/ProfileSummaryInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="TargetLibraryInfo_8h.html">llvm/Analysis/TargetLibraryInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Attributes_8h.html">llvm/IR/Attributes.h</a>&quot;</span></div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="BasicBlock_8h.html">llvm/IR/BasicBlock.h</a>&quot;</span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="IR_2CFG_8h.html">llvm/IR/CFG.h</a>&quot;</span></div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="IR_2Comdat_8h.html">llvm/IR/Comdat.h</a>&quot;</span></div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Constant_8h.html">llvm/IR/Constant.h</a>&quot;</span></div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Constants_8h.html">llvm/IR/Constants.h</a>&quot;</span></div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DiagnosticInfo_8h.html">llvm/IR/DiagnosticInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Dominators_8h.html">llvm/IR/Dominators.h</a>&quot;</span></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="EHPersonalities_8h.html">llvm/IR/EHPersonalities.h</a>&quot;</span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Function_8h.html">llvm/IR/Function.h</a>&quot;</span></div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="GlobalAlias_8h.html">llvm/IR/GlobalAlias.h</a>&quot;</span></div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="GlobalValue_8h.html">llvm/IR/GlobalValue.h</a>&quot;</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="GlobalVariable_8h.html">llvm/IR/GlobalVariable.h</a>&quot;</span></div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="IRBuilder_8h.html">llvm/IR/IRBuilder.h</a>&quot;</span></div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="InstVisitor_8h.html">llvm/IR/InstVisitor.h</a>&quot;</span></div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="InstrTypes_8h.html">llvm/IR/InstrTypes.h</a>&quot;</span></div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="IR_2Instruction_8h.html">llvm/IR/Instruction.h</a>&quot;</span></div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Instructions_8h.html">llvm/IR/Instructions.h</a>&quot;</span></div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="IntrinsicInst_8h.html">llvm/IR/IntrinsicInst.h</a>&quot;</span></div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Intrinsics_8h.html">llvm/IR/Intrinsics.h</a>&quot;</span></div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LLVMContext_8h.html">llvm/IR/LLVMContext.h</a>&quot;</span></div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MDBuilder_8h.html">llvm/IR/MDBuilder.h</a>&quot;</span></div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Module_8h.html">llvm/IR/Module.h</a>&quot;</span></div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="PassManager_8h.html">llvm/IR/PassManager.h</a>&quot;</span></div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ProfDataUtils_8h.html">llvm/IR/ProfDataUtils.h</a>&quot;</span></div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ProfileSummary_8h.html">llvm/IR/ProfileSummary.h</a>&quot;</span></div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Type_8h.html">llvm/IR/Type.h</a>&quot;</span></div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Value_8h.html">llvm/IR/Value.h</a>&quot;</span></div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="InstrProf_8h.html">llvm/ProfileData/InstrProf.h</a>&quot;</span></div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="InstrProfReader_8h.html">llvm/ProfileData/InstrProfReader.h</a>&quot;</span></div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="BLAKE3_8h.html">llvm/Support/BLAKE3.h</a>&quot;</span></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="BranchProbability_8h.html">llvm/Support/BranchProbability.h</a>&quot;</span></div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CRC_8h.html">llvm/Support/CRC.h</a>&quot;</span></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Casting_8h.html">llvm/Support/Casting.h</a>&quot;</span></div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CommandLine_8h.html">llvm/Support/CommandLine.h</a>&quot;</span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DOTGraphTraits_8h.html">llvm/Support/DOTGraphTraits.h</a>&quot;</span></div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Debug_8h.html">llvm/Support/Debug.h</a>&quot;</span></div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Support_2Error_8h.html">llvm/Support/Error.h</a>&quot;</span></div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Support_2ErrorHandling_8h.html">llvm/Support/ErrorHandling.h</a>&quot;</span></div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="GraphWriter_8h.html">llvm/Support/GraphWriter.h</a>&quot;</span></div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="HashBuilder_8h.html">llvm/Support/HashBuilder.h</a>&quot;</span></div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="VirtualFileSystem_8h.html">llvm/Support/VirtualFileSystem.h</a>&quot;</span></div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="raw__ostream_8h.html">llvm/Support/raw_ostream.h</a>&quot;</span></div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Triple_8h.html">llvm/TargetParser/Triple.h</a>&quot;</span></div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Instrumentation_8h.html">llvm/Transforms/Instrumentation.h</a>&quot;</span></div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="BasicBlockUtils_8h.html">llvm/Transforms/Utils/BasicBlockUtils.h</a>&quot;</span></div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MisExpect_8h.html">llvm/Transforms/Utils/MisExpect.h</a>&quot;</span></div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ModuleUtils_8h.html">llvm/Transforms/Utils/ModuleUtils.h</a>&quot;</span></div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;<span class="preprocessor">#include &lt;algorithm&gt;</span></div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<span class="preprocessor">#include &lt;cassert&gt;</span></div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="preprocessor">#include &lt;cstdint&gt;</span></div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;<span class="preprocessor">#include &lt;map&gt;</span></div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;<span class="preprocessor">#include &lt;memory&gt;</span></div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;<span class="preprocessor">#include &lt;numeric&gt;</span></div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;<span class="preprocessor">#include &lt;optional&gt;</span></div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;<span class="preprocessor">#include &lt;set&gt;</span></div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;<span class="preprocessor">#include &lt;string&gt;</span></div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<span class="preprocessor">#include &lt;unordered_map&gt;</span></div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;<span class="preprocessor">#include &lt;utility&gt;</span></div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;<span class="preprocessor">#include &lt;vector&gt;</span></div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160; </div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespacellvm.html">llvm</a>;</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespacellvm_1_1memprof.html">llvm::memprof</a>;</div>
<div class="line"><a name="l00134"></a><span class="lineno"><a class="line" href="PGOInstrumentation_8cpp.html#ac57dae906fe8ac64efe52571121b0fe1">  134</a></span>&#160;<span class="keyword">using</span> <a class="code" href="classllvm_1_1Function_1_1ProfileCount.html">ProfileCount</a> = <a class="code" href="PGOInstrumentation_8cpp.html#ac57dae906fe8ac64efe52571121b0fe1">Function::ProfileCount</a>;</div>
<div class="line"><a name="l00135"></a><span class="lineno"><a class="line" href="PGOInstrumentation_8cpp.html#a93b02dcc9ad7c8870705384937946426">  135</a></span>&#160;<span class="keyword">using</span> <a class="code" href="structllvm_1_1ValueProfileCollector_1_1CandidateInfo.html">VPCandidateInfo</a> = <a class="code" href="structllvm_1_1ValueProfileCollector_1_1CandidateInfo.html">ValueProfileCollector::CandidateInfo</a>;</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160; </div>
<div class="line"><a name="l00137"></a><span class="lineno"><a class="line" href="PGOInstrumentation_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">  137</a></span>&#160;<span class="preprocessor">#define DEBUG_TYPE &quot;pgo-instrumentation&quot;</span></div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160; </div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(NumOfPGOInstrument, <span class="stringliteral">&quot;Number of edges instrumented.&quot;</span>);</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(NumOfPGOSelectInsts, <span class="stringliteral">&quot;Number of select instruction instrumented.&quot;</span>);</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(NumOfPGOMemIntrinsics, <span class="stringliteral">&quot;Number of mem intrinsics instrumented.&quot;</span>);</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(NumOfPGOEdge, <span class="stringliteral">&quot;Number of edges.&quot;</span>);</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(NumOfPGOBB, <span class="stringliteral">&quot;Number of basic-blocks.&quot;</span>);</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(NumOfPGOSplit, <span class="stringliteral">&quot;Number of critical edge splits.&quot;</span>);</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(NumOfPGOFunc, <span class="stringliteral">&quot;Number of functions having valid profile counts.&quot;</span>);</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(NumOfPGOMismatch, <span class="stringliteral">&quot;Number of functions having mismatch profile.&quot;</span>);</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(NumOfPGOMissing, <span class="stringliteral">&quot;Number of functions without profile.&quot;</span>);</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(NumOfMemProfMissing, <span class="stringliteral">&quot;Number of functions without memory profile.&quot;</span>);</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(NumOfPGOICall, <span class="stringliteral">&quot;Number of indirect call value instrumentations.&quot;</span>);</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(NumOfCSPGOInstrument, <span class="stringliteral">&quot;Number of edges instrumented in CSPGO.&quot;</span>);</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(NumOfCSPGOSelectInsts,</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;          <span class="stringliteral">&quot;Number of select instruction instrumented in CSPGO.&quot;</span>);</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(NumOfCSPGOMemIntrinsics,</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;          <span class="stringliteral">&quot;Number of mem intrinsics instrumented in CSPGO.&quot;</span>);</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(NumOfCSPGOEdge, <span class="stringliteral">&quot;Number of edges in CSPGO.&quot;</span>);</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(NumOfCSPGOBB, <span class="stringliteral">&quot;Number of basic-blocks in CSPGO.&quot;</span>);</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(NumOfCSPGOSplit, <span class="stringliteral">&quot;Number of critical edge splits in CSPGO.&quot;</span>);</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(NumOfCSPGOFunc,</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;          <span class="stringliteral">&quot;Number of functions having valid profile counts in CSPGO.&quot;</span>);</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(NumOfCSPGOMismatch,</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;          <span class="stringliteral">&quot;Number of functions having mismatch profile in CSPGO.&quot;</span>);</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(NumOfCSPGOMissing, <span class="stringliteral">&quot;Number of functions without profile in CSPGO.&quot;</span>);</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160; </div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;<span class="comment">// Command line option to specify the file to read profile from. This is</span></div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;<span class="comment">// mainly used for testing.</span></div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;std::string&gt;</a></div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    <a class="code" href="PGOInstrumentation_8cpp.html#a99c391269e75325086b8a1e95890ddd8">PGOTestProfileFile</a>(<span class="stringliteral">&quot;pgo-test-profile-file&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="stringliteral">&quot;&quot;</span>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;                       <a class="code" href="structllvm_1_1cl_1_1value__desc.html">cl::value_desc</a>(<span class="stringliteral">&quot;filename&quot;</span>),</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;                       <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Specify the path of profile data file. This is&quot;</span></div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;                                <span class="stringliteral">&quot;mainly for test purpose.&quot;</span>));</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;std::string&gt;</a> <a class="code" href="PGOInstrumentation_8cpp.html#a27f871f575879ada4f8812e277d95db6">PGOTestProfileRemappingFile</a>(</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    <span class="stringliteral">&quot;pgo-test-profile-remapping-file&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="stringliteral">&quot;&quot;</span>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1value__desc.html">cl::value_desc</a>(<span class="stringliteral">&quot;filename&quot;</span>),</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Specify the path of profile remapping file. This is mainly for &quot;</span></div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;             <span class="stringliteral">&quot;test purpose.&quot;</span>));</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160; </div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;<span class="comment">// Command line option to disable value profiling. The default is false:</span></div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;<span class="comment">// i.e. value profiling is enabled by default. This is for debug purpose.</span></div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="PGOInstrumentation_8cpp.html#ada74fa2ec8933c6674ddded08aeef167">DisableValueProfiling</a>(<span class="stringliteral">&quot;disable-vp&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">false</span>),</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;                                           <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;                                           <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Disable Value Profiling&quot;</span>));</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160; </div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;<span class="comment">// Command line option to set the maximum number of VP annotations to write to</span></div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;<span class="comment">// the metadata for a single indirect call callsite.</span></div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;unsigned&gt;</a> <a class="code" href="PGOInstrumentation_8cpp.html#ae4da63e96545cd00e5e9fa8845586c57">MaxNumAnnotations</a>(</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    <span class="stringliteral">&quot;icp-max-annotations&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(3), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Max number of annotations for a single indirect &quot;</span></div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;             <span class="stringliteral">&quot;call callsite&quot;</span>));</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160; </div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;<span class="comment">// Command line option to set the maximum number of value annotations</span></div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;<span class="comment">// to write to the metadata for a single memop intrinsic.</span></div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;unsigned&gt;</a> <a class="code" href="PGOInstrumentation_8cpp.html#a5b7a21689e69a48710a11d5261cf057e">MaxNumMemOPAnnotations</a>(</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    <span class="stringliteral">&quot;memop-max-annotations&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(4), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Max number of preicise value annotations for a single memop&quot;</span></div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;             <span class="stringliteral">&quot;intrinsic&quot;</span>));</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160; </div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;<span class="comment">// Command line option to control appending FunctionHash to the name of a COMDAT</span></div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;<span class="comment">// function. This is to avoid the hash mismatch caused by the preinliner.</span></div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="PGOInstrumentation_8cpp.html#af695245be16902715ac76f9f780edd4c">DoComdatRenaming</a>(</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    <span class="stringliteral">&quot;do-comdat-renaming&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">false</span>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Append function hash to the name of COMDAT function to avoid &quot;</span></div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;             <span class="stringliteral">&quot;function hash mismatch due to the preinliner&quot;</span>));</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160; </div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;<span class="comment">// Command line option to enable/disable the warning about missing profile</span></div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;<span class="comment">// information.</span></div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a></div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    <a class="code" href="PGOInstrumentation_8cpp.html#af20b9ff6164a82cda5c7ea2269404a5b">PGOWarnMissing</a>(<span class="stringliteral">&quot;pgo-warn-missing-function&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">false</span>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;                   <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Use this option to turn on/off &quot;</span></div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;                            <span class="stringliteral">&quot;warnings about missing profile data for &quot;</span></div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;                            <span class="stringliteral">&quot;functions.&quot;</span>));</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160; </div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespacellvm.html">llvm</a> {</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;<span class="comment">// Command line option to enable/disable the warning about a hash mismatch in</span></div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;<span class="comment">// the profile data.</span></div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;<a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a></div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    <a class="code" href="namespacellvm.html#a9cec4f52857428ab9e0a8fd571e55d56">NoPGOWarnMismatch</a>(<span class="stringliteral">&quot;no-pgo-warn-mismatch&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">false</span>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;                      <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Use this option to turn off/on &quot;</span></div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;                               <span class="stringliteral">&quot;warnings about profile cfg mismatch.&quot;</span>));</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;} <span class="comment">// namespace llvm</span></div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160; </div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;<span class="comment">// Command line option to enable/disable the warning about a hash mismatch in</span></div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;<span class="comment">// the profile data for Comdat functions, which often turns out to be false</span></div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;<span class="comment">// positive due to the pre-instrumentation inline.</span></div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="PGOInstrumentation_8cpp.html#ac5c397084baa2b469105c5157b3f4556">NoPGOWarnMismatchComdatWeak</a>(</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    <span class="stringliteral">&quot;no-pgo-warn-mismatch-comdat-weak&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">true</span>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;The option is used to turn on/off &quot;</span></div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;             <span class="stringliteral">&quot;warnings about hash mismatch for comdat &quot;</span></div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;             <span class="stringliteral">&quot;or weak functions.&quot;</span>));</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160; </div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;<span class="comment">// Command line option to enable/disable select instruction instrumentation.</span></div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a></div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    <a class="code" href="PGOInstrumentation_8cpp.html#aa9fc7fa9e1e94557d9201ab1b5cd017e">PGOInstrSelect</a>(<span class="stringliteral">&quot;pgo-instr-select&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">true</span>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;                   <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Use this option to turn on/off SELECT &quot;</span></div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;                            <span class="stringliteral">&quot;instruction instrumentation. &quot;</span>));</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160; </div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;<span class="comment">// Command line option to turn on CFG dot or text dump of raw profile counts</span></div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;PGOViewCountsType&gt;</a> <a class="code" href="PGOInstrumentation_8cpp.html#a8d7fefca64ed0916ed11715c2a21ba32">PGOViewRawCounts</a>(</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    <span class="stringliteral">&quot;pgo-view-raw-counts&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;A boolean option to show CFG dag or text &quot;</span></div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;             <span class="stringliteral">&quot;with raw profile counts from &quot;</span></div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;             <span class="stringliteral">&quot;profile data. See also option &quot;</span></div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;             <span class="stringliteral">&quot;-pgo-view-counts. To limit graph &quot;</span></div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;             <span class="stringliteral">&quot;display to only one function, use &quot;</span></div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;             <span class="stringliteral">&quot;filtering option -view-bfi-func-name.&quot;</span>),</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    <a class="code" href="namespacellvm_1_1cl.html#a8fa743aa76b6902028f8a643dfb87171">cl::values</a>(<a class="code" href="CommandLine_8h.html#a187fd767976b311c09dff5e05ac0c1bc">clEnumValN</a>(<a class="code" href="namespacellvm.html#a726a37ae665057b176aba58871cf0616a3c9596b568bb5b8379c7242004e4a70a">PGOVCT_None</a>, <span class="stringliteral">&quot;none&quot;</span>, <span class="stringliteral">&quot;do not show.&quot;</span>),</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;               <a class="code" href="CommandLine_8h.html#a187fd767976b311c09dff5e05ac0c1bc">clEnumValN</a>(<a class="code" href="namespacellvm.html#a726a37ae665057b176aba58871cf0616a006586d50ef1cc2441c651e5e0653c4e">PGOVCT_Graph</a>, <span class="stringliteral">&quot;graph&quot;</span>, <span class="stringliteral">&quot;show a graph.&quot;</span>),</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;               <a class="code" href="CommandLine_8h.html#a187fd767976b311c09dff5e05ac0c1bc">clEnumValN</a>(<a class="code" href="namespacellvm.html#a726a37ae665057b176aba58871cf0616ac7b397abc7fb6a7e89be33a420289bc8">PGOVCT_Text</a>, <span class="stringliteral">&quot;text&quot;</span>, <span class="stringliteral">&quot;show in text.&quot;</span>)));</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160; </div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;<span class="comment">// Command line option to enable/disable memop intrinsic call.size profiling.</span></div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a></div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    <a class="code" href="PGOInstrumentation_8cpp.html#ae9fc9062a3d5b7b7dc9f687e248be7d8">PGOInstrMemOP</a>(<span class="stringliteral">&quot;pgo-instr-memop&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">true</span>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;                  <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Use this option to turn on/off &quot;</span></div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;                           <span class="stringliteral">&quot;memory intrinsic size profiling.&quot;</span>));</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160; </div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;<span class="comment">// Emit branch probability as optimization remarks.</span></div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a></div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    <a class="code" href="PGOInstrumentation_8cpp.html#ade95db220319f7e5d11ef6601e41b186">EmitBranchProbability</a>(<span class="stringliteral">&quot;pgo-emit-branch-prob&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">false</span>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;                          <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;When this option is on, the annotated &quot;</span></div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;                                   <span class="stringliteral">&quot;branch probability will be emitted as &quot;</span></div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;                                   <span class="stringliteral">&quot;optimization remarks: -{Rpass|&quot;</span></div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;                                   <span class="stringliteral">&quot;pass-remarks}=pgo-instrumentation&quot;</span>));</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160; </div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="PGOInstrumentation_8cpp.html#aa64a0f86c47358606fcb6bd03927e030">PGOInstrumentEntry</a>(</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    <span class="stringliteral">&quot;pgo-instrument-entry&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">false</span>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Force to instrument function entry basicblock.&quot;</span>));</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160; </div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="PGOInstrumentation_8cpp.html#a63fd72ea6df7c5a2aae8875fc5acb1ca">PGOFunctionEntryCoverage</a>(</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    <span class="stringliteral">&quot;pgo-function-entry-coverage&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;        <span class="stringliteral">&quot;Use this option to enable function entry coverage instrumentation.&quot;</span>));</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160; </div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a></div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    <a class="code" href="PGOInstrumentation_8cpp.html#a157a72a2ac898befbf836a3a87505084">PGOFixEntryCount</a>(<span class="stringliteral">&quot;pgo-fix-entry-count&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">true</span>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;                     <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Fix function entry count in profile use.&quot;</span>));</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160; </div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="PGOInstrumentation_8cpp.html#a80e1f3026ce040615474f3efff8f250e">PGOVerifyHotBFI</a>(</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    <span class="stringliteral">&quot;pgo-verify-hot-bfi&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">false</span>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Print out the non-match BFI count if a hot raw profile count &quot;</span></div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;             <span class="stringliteral">&quot;becomes non-hot, or a cold raw profile count becomes hot. &quot;</span></div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;             <span class="stringliteral">&quot;The print is enabled under -Rpass-analysis=pgo, or &quot;</span></div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;             <span class="stringliteral">&quot;internal option -pass-remakrs-analysis=pgo.&quot;</span>));</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160; </div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="PGOInstrumentation_8cpp.html#a9aaca6442eb66832c60ea0efb77a2486">PGOVerifyBFI</a>(</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    <span class="stringliteral">&quot;pgo-verify-bfi&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">false</span>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Print out mismatched BFI counts after setting profile metadata &quot;</span></div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;             <span class="stringliteral">&quot;The print is enabled under -Rpass-analysis=pgo, or &quot;</span></div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;             <span class="stringliteral">&quot;internal option -pass-remakrs-analysis=pgo.&quot;</span>));</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160; </div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;unsigned&gt;</a> <a class="code" href="PGOInstrumentation_8cpp.html#ac5599ed465f5265b08a7236fa44c5c9d">PGOVerifyBFIRatio</a>(</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    <span class="stringliteral">&quot;pgo-verify-bfi-ratio&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(2), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Set the threshold for pgo-verify-bfi:  only print out &quot;</span></div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;             <span class="stringliteral">&quot;mismatched BFI if the difference percentage is greater than &quot;</span></div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;             <span class="stringliteral">&quot;this value (in percentage).&quot;</span>));</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160; </div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;unsigned&gt;</a> <a class="code" href="PGOInstrumentation_8cpp.html#abd66a285984b7b8917e16298bc470a2b">PGOVerifyBFICutoff</a>(</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    <span class="stringliteral">&quot;pgo-verify-bfi-cutoff&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(5), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Set the threshold for pgo-verify-bfi: skip the counts whose &quot;</span></div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;             <span class="stringliteral">&quot;profile count value is below.&quot;</span>));</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160; </div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;std::string&gt;</a> <a class="code" href="PGOInstrumentation_8cpp.html#ac3b9bc99faa43a4c41864f15a4e8c2ef">PGOTraceFuncHash</a>(</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    <span class="stringliteral">&quot;pgo-trace-func-hash&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="stringliteral">&quot;-&quot;</span>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1value__desc.html">cl::value_desc</a>(<span class="stringliteral">&quot;function name&quot;</span>),</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Trace the hash of the function with this name.&quot;</span>));</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160; </div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;unsigned&gt;</a> <a class="code" href="PGOInstrumentation_8cpp.html#a7c5ef045038b4e138277f9325797286f">PGOFunctionSizeThreshold</a>(</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    <span class="stringliteral">&quot;pgo-function-size-threshold&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Do not instrument functions smaller than this threshold.&quot;</span>));</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160; </div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="PGOInstrumentation_8cpp.html#aa334ad4b71c2b831d61c82a055ff776d">MatchMemProf</a>(</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    <span class="stringliteral">&quot;pgo-match-memprof&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">true</span>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Perform matching and annotation of memprof profiles.&quot;</span>));</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160; </div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;unsigned&gt;</a> <a class="code" href="PGOInstrumentation_8cpp.html#aa3b6431905d5644fe983172f6cfa7a35">PGOFunctionCriticalEdgeThreshold</a>(</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    <span class="stringliteral">&quot;pgo-critical-edge-threshold&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(20000), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Do not instrument functions with the number of critical edges &quot;</span></div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;             <span class="stringliteral">&quot; greater than this threshold.&quot;</span>));</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160; </div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespacellvm.html">llvm</a> {</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;<span class="comment">// Command line option to turn on CFG dot dump after profile annotation.</span></div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;<span class="comment">// Defined in Analysis/BlockFrequencyInfo.cpp:  -pgo-view-counts</span></div>
<div class="line"><a name="l00321"></a><span class="lineno"><a class="line" href="namespacellvm.html#aa4f78f8e57089af990561a8ada04f0e4">  321</a></span>&#160;<span class="keyword">extern</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;PGOViewCountsType&gt;</a> <a class="code" href="namespacellvm.html#aa4f78f8e57089af990561a8ada04f0e4">PGOViewCounts</a>;</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160; </div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;<span class="comment">// Command line option to specify the name of the function for CFG dump</span></div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;<span class="comment">// Defined in Analysis/BlockFrequencyInfo.cpp:  -view-bfi-func-name=</span></div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;<span class="keyword">extern</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;std::string&gt;</a> <a class="code" href="namespacellvm.html#a6391a34afa5b4ed1a5e556a8cc4d971b">ViewBlockFreqFuncName</a>;</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160; </div>
<div class="line"><a name="l00327"></a><span class="lineno"><a class="line" href="namespacellvm.html#adbaf89bf10baba06502911701b74e51f">  327</a></span>&#160;<span class="keyword">extern</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="namespacellvm.html#adbaf89bf10baba06502911701b74e51f">DebugInfoCorrelate</a>;</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;} <span class="comment">// namespace llvm</span></div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160; </div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a></div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    <a class="code" href="PGOInstrumentation_8cpp.html#ab457c5811495a302a792ca0ba3e7818e">PGOOldCFGHashing</a>(<span class="stringliteral">&quot;pgo-instr-old-cfg-hashing&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">false</span>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;                     <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Use the old CFG function hashing&quot;</span>));</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160; </div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;<span class="comment">// Return a string describing the branch condition that can be</span></div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;<span class="comment">// used in static branch probability heuristics:</span></div>
<div class="line"><a name="l00336"></a><span class="lineno"><a class="line" href="PGOInstrumentation_8cpp.html#af0e4d9315f1815020f42edec6a27ad1f">  336</a></span>&#160;<span class="keyword">static</span> std::string <a class="code" href="PGOInstrumentation_8cpp.html#af0e4d9315f1815020f42edec6a27ad1f">getBranchCondString</a>(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *TI) {</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;  <a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a> *BI = dyn_cast&lt;BranchInst&gt;(TI);</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;  <span class="keywordflow">if</span> (!BI || !BI-&gt;<a class="code" href="classllvm_1_1BranchInst.html#a7e4be8b16fbd68c9045a388904044e01">isConditional</a>())</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    <span class="keywordflow">return</span> std::string();</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160; </div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a> = BI-&gt;<a class="code" href="classllvm_1_1BranchInst.html#aac456a62894c9f0f8e9f06373bbf40f0">getCondition</a>();</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;  <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> *CI = dyn_cast&lt;ICmpInst&gt;(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>);</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;  <span class="keywordflow">if</span> (!CI)</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    <span class="keywordflow">return</span> std::string();</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160; </div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;  std::string <a class="code" href="README__P9_8txt.html#ae070adaf1b4bf0e7c12fcae2b9c5ae67">result</a>;</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;  <a class="code" href="classllvm_1_1raw__string__ostream.html">raw_string_ostream</a> <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a>(<a class="code" href="README__P9_8txt.html#ae070adaf1b4bf0e7c12fcae2b9c5ae67">result</a>);</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;  <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; <a class="code" href="classllvm_1_1CmpInst.html#aa68a2d2c06a10b1e5a5bc778a107c0ba">CmpInst::getPredicateName</a>(CI-&gt;<a class="code" href="classllvm_1_1CmpInst.html#aa7414ba9f658ff1287d22a4b8fe81bcb">getPredicate</a>()) &lt;&lt; <span class="stringliteral">&quot;_&quot;</span>;</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;  CI-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0)-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a91bbc1ac424839ba7e85d2d8542c288a">print</a>(<a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160; </div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a> = CI-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(1);</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;  <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *CV = dyn_cast&lt;ConstantInt&gt;(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>);</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;  <span class="keywordflow">if</span> (CV) {</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    <span class="keywordflow">if</span> (CV-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#a882d55a6aa2028e1a5ad708b275334e0">isZero</a>())</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;      <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; <span class="stringliteral">&quot;_Zero&quot;</span>;</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (CV-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#a244bfbe5aae876e56cf5e62f0f27867a">isOne</a>())</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;      <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; <span class="stringliteral">&quot;_One&quot;</span>;</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (CV-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#a13cc1f5d3225f4ec063520a747acec4c">isMinusOne</a>())</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;      <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; <span class="stringliteral">&quot;_MinusOne&quot;</span>;</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;      <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; <span class="stringliteral">&quot;_Const&quot;</span>;</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;  }</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;  <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a>.<a class="code" href="classllvm_1_1raw__ostream.html#a520bdf57dfe3e73abb53d482893f0a27">flush</a>();</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="README__P9_8txt.html#ae070adaf1b4bf0e7c12fcae2b9c5ae67">result</a>;</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;}</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160; </div>
<div class="line"><a name="l00367"></a><span class="lineno"><a class="line" href="PGOInstrumentation_8cpp.html#afcf97c296d164d441069b79ca44b206c">  367</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="PGOInstrumentation_8cpp.html#afcf97c296d164d441069b79ca44b206c">ValueProfKindDescr</a>[] = {</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;<span class="preprocessor">#define VALUE_PROF_KIND(Enumerator, Value, Descr) Descr,</span></div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="InstrProfData_8inc.html">llvm/ProfileData/InstrProfData.inc</a>&quot;</span></div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;};</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160; </div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;<span class="comment">// Create a COMDAT variable INSTR_PROF_RAW_VERSION_VAR to make the runtime</span></div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;<span class="comment">// aware this is an ir_level profile so it can set the version flag.</span></div>
<div class="line"><a name="l00374"></a><span class="lineno"><a class="line" href="PGOInstrumentation_8cpp.html#a38fcde3c0125e4f07a85159aee2db323">  374</a></span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a> *<a class="code" href="PGOInstrumentation_8cpp.html#a38fcde3c0125e4f07a85159aee2db323">createIRLevelProfileFlagVar</a>(<a class="code" href="classllvm_1_1Module.html">Module</a> &amp;M, <span class="keywordtype">bool</span> IsCS) {</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a218a3df235546fc092fe0f463e6b714d">VarName</a>(INSTR_PROF_QUOTE(INSTR_PROF_RAW_VERSION_VAR));</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *IntTy64 = <a class="code" href="classllvm_1_1Type.html#a05186fa23e4d11b9855a9599ba87a4b7">Type::getInt64Ty</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getContext());</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;  <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> ProfileVersion = (INSTR_PROF_RAW_VERSION | VARIANT_MASK_IR_PROF);</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;  <span class="keywordflow">if</span> (IsCS)</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;    ProfileVersion |= VARIANT_MASK_CSIR_PROF;</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="PGOInstrumentation_8cpp.html#aa64a0f86c47358606fcb6bd03927e030">PGOInstrumentEntry</a>)</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    ProfileVersion |= VARIANT_MASK_INSTR_ENTRY;</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#adbaf89bf10baba06502911701b74e51f">DebugInfoCorrelate</a>)</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    ProfileVersion |= VARIANT_MASK_DBG_CORRELATE;</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="PGOInstrumentation_8cpp.html#a63fd72ea6df7c5a2aae8875fc5acb1ca">PGOFunctionEntryCoverage</a>)</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    ProfileVersion |=</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;        VARIANT_MASK_BYTE_COVERAGE | VARIANT_MASK_FUNCTION_ENTRY_ONLY;</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;  <span class="keyword">auto</span> IRLevelVersionVariable = <span class="keyword">new</span> <a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a>(</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;      <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>, IntTy64, <span class="keyword">true</span>, <a class="code" href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57ca8d13a9bcecfac72febceb1103afa048f">GlobalValue::WeakAnyLinkage</a>,</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;      <a class="code" href="classllvm_1_1Constant.html#a0154da1d06b29a1d5649607ae2dfc389">Constant::getIntegerValue</a>(IntTy64, <a class="code" href="classllvm_1_1APInt.html">APInt</a>(64, ProfileVersion)), <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a218a3df235546fc092fe0f463e6b714d">VarName</a>);</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;  IRLevelVersionVariable-&gt;setVisibility(<a class="code" href="classllvm_1_1GlobalValue.html#a9141f967188383108a69cc1b8ed3c195a7eade123587a08e674f2ca72e2443771">GlobalValue::HiddenVisibility</a>);</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;  <a class="code" href="classllvm_1_1Triple.html">Triple</a> TT(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getTargetTriple());</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;  <span class="keywordflow">if</span> (TT.supportsCOMDAT()) {</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    IRLevelVersionVariable-&gt;setLinkage(<a class="code" href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57ca6c93794d7b99cd433e96c53eadb15a6e">GlobalValue::ExternalLinkage</a>);</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    IRLevelVersionVariable-&gt;setComdat(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getOrInsertComdat(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a218a3df235546fc092fe0f463e6b714d">VarName</a>));</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;  }</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;  <span class="keywordflow">return</span> IRLevelVersionVariable;</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;}</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160; </div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;<span class="keyword">namespace </span>{</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;<span class="comment">/// The select instruction visitor plays three roles specified</span></div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;<span class="comment">/// by the mode. In \c VM_counting mode, it simply counts the number of</span></div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;<span class="comment">/// select instructions. In \c VM_instrument mode, it inserts code to count</span></div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;<span class="comment">/// the number times TrueValue of select is taken. In \c VM_annotate mode,</span></div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;<span class="comment">/// it reads the profile data and annotate the select instruction with metadata.</span></div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;<span class="comment"></span><span class="keyword">enum</span> VisitMode { VM_counting, VM_instrument, VM_annotate };</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;<span class="keyword">class </span>PGOUseFunc;</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;<span class="comment">/// Instruction Visitor class to visit select instructions.</span></div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;<span class="comment"></span><span class="keyword">struct </span>SelectInstVisitor : <span class="keyword">public</span> <a class="code" href="classllvm_1_1InstVisitor.html">InstVisitor</a>&lt;SelectInstVisitor&gt; {</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>;</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;  <span class="keywordtype">unsigned</span> NSIs = 0;             <span class="comment">// Number of select instructions instrumented.</span></div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;  VisitMode <a class="code" href="SIWholeQuadMode_8cpp.html#a0c198437833c48138f49e3589bd08773">Mode</a> = VM_counting;  <span class="comment">// Visiting mode.</span></div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;  <span class="keywordtype">unsigned</span> *CurCtrIdx = <span class="keyword">nullptr</span>; <span class="comment">// Pointer to current counter index.</span></div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;  <span class="keywordtype">unsigned</span> TotalNumCtrs = 0;     <span class="comment">// Total number of counters</span></div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;  <a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a> *FuncNameVar = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;  <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> FuncHash = 0;</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;  PGOUseFunc *UseFunc = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160; </div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;  SelectInstVisitor(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;Func) : <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>(<a class="code" href="namespacellvm_1_1ifs.html#adfe04e1a9cc096fb571e8372debaa67ea00d0b4f2d7dcdaaef835b97cf5d1e0df">Func</a>) {}</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160; </div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;  <span class="keywordtype">void</span> countSelects(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;Func) {</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    NSIs = 0;</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    <a class="code" href="SIWholeQuadMode_8cpp.html#a0c198437833c48138f49e3589bd08773">Mode</a> = VM_counting;</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    visit(Func);</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;  }</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160; </div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;  <span class="comment">// Visit the IR stream and instrument all select instructions. \p</span></div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;  <span class="comment">// Ind is a pointer to the counter index variable; \p TotalNC</span></div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;  <span class="comment">// is the total number of counters; \p FNV is the pointer to the</span></div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;  <span class="comment">// PGO function name var; \p FHash is the function hash.</span></div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;  <span class="keywordtype">void</span> instrumentSelects(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;Func, <span class="keywordtype">unsigned</span> *Ind, <span class="keywordtype">unsigned</span> TotalNC,</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;                         <a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a> *FNV, <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> FHash) {</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;    <a class="code" href="SIWholeQuadMode_8cpp.html#a0c198437833c48138f49e3589bd08773">Mode</a> = VM_instrument;</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;    CurCtrIdx = Ind;</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;    TotalNumCtrs = TotalNC;</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;    FuncHash = FHash;</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    FuncNameVar = FNV;</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    visit(Func);</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;  }</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160; </div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;  <span class="comment">// Visit the IR stream and annotate all select instructions.</span></div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;  <span class="keywordtype">void</span> annotateSelects(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;Func, PGOUseFunc *UF, <span class="keywordtype">unsigned</span> *Ind) {</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;    <a class="code" href="SIWholeQuadMode_8cpp.html#a0c198437833c48138f49e3589bd08773">Mode</a> = VM_annotate;</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;    UseFunc = UF;</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;    CurCtrIdx = Ind;</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    visit(Func);</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;  }</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160; </div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;  <span class="keywordtype">void</span> instrumentOneSelectInst(<a class="code" href="classllvm_1_1SelectInst.html">SelectInst</a> &amp;<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>);</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;  <span class="keywordtype">void</span> annotateOneSelectInst(<a class="code" href="classllvm_1_1SelectInst.html">SelectInst</a> &amp;<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>);</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160; </div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;  <span class="comment">// Visit \p SI instruction and perform tasks according to visit mode.</span></div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;  <span class="keywordtype">void</span> visitSelectInst(<a class="code" href="classllvm_1_1SelectInst.html">SelectInst</a> &amp;<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>);</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160; </div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;  <span class="comment">// Return the number of select instructions. This needs be called after</span></div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;  <span class="comment">// countSelects().</span></div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;  <span class="keywordtype">unsigned</span> getNumOfSelectInsts()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> NSIs; }</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;};</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160; </div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;} <span class="comment">// end anonymous namespace</span></div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160; </div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;<span class="keyword">namespace </span>{</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;<span class="comment">/// An MST based instrumentation for PGO</span></div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;<span class="comment">/// Implements a Minimum Spanning Tree (MST) based instrumentation for PGO</span></div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;<span class="comment">/// in the function level.</span></div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;<span class="comment"></span><span class="keyword">struct </span>PGOEdge {</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;  <span class="comment">// This class implements the CFG edges. Note the CFG can be a multi-graph.</span></div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;  <span class="comment">// So there might be multiple edges with same SrcBB and DestBB.</span></div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *SrcBB;</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *DestBB;</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;  <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> Weight;</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;  <span class="keywordtype">bool</span> InMST = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;  <span class="keywordtype">bool</span> Removed = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;  <span class="keywordtype">bool</span> IsCritical = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160; </div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;  PGOEdge(<span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Src, <span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Dest, <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> <a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa05c79fbfc58d9dd2851c467a1ef166bf">W</a> = 1)</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;      : SrcBB(Src), DestBB(Dest), Weight(<a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa05c79fbfc58d9dd2851c467a1ef166bf">W</a>) {}</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160; </div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;  <span class="comment">// Return the information string of an edge.</span></div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;  std::string infoString()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;    <span class="keywordflow">return</span> (<a class="code" href="classllvm_1_1Twine.html">Twine</a>(Removed ? <span class="stringliteral">&quot;-&quot;</span> : <span class="stringliteral">&quot; &quot;</span>) + (InMST ? <span class="stringliteral">&quot; &quot;</span> : <span class="stringliteral">&quot;*&quot;</span>) +</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;            (IsCritical ? <span class="stringliteral">&quot;c&quot;</span> : <span class="stringliteral">&quot; &quot;</span>) + <span class="stringliteral">&quot;  W=&quot;</span> + <a class="code" href="classllvm_1_1Twine.html">Twine</a>(Weight)).str();</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;  }</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;};</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160; </div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;<span class="comment">// This class stores the auxiliary information for each BB.</span></div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;<span class="keyword">struct </span>BBInfo {</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;  BBInfo *Group;</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;  <a class="code" href="classuint32__t.html">uint32_t</a> <a class="code" href="ELFObjHandler_8cpp.html#aef61945034b9431b804748fc317c5548">Index</a>;</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;  <a class="code" href="classuint32__t.html">uint32_t</a> Rank = 0;</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160; </div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;  BBInfo(<span class="keywordtype">unsigned</span> IX) : Group(<a class="code" href="lib_2Analysis_2README_8txt.html#ad5ccdce1179bbfb942a084b3005f360d">this</a>), <a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a>(IX) {}</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160; </div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;  <span class="comment">// Return the information string of this object.</span></div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;  std::string infoString()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;    <span class="keywordflow">return</span> (<a class="code" href="classllvm_1_1Twine.html">Twine</a>(<span class="stringliteral">&quot;Index=&quot;</span>) + <a class="code" href="classllvm_1_1Twine.html">Twine</a>(<a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a>)).str();</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;  }</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160; </div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;  <span class="comment">// Empty function -- only applicable to UseBBInfo.</span></div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;  <span class="keywordtype">void</span> addOutEdge(PGOEdge *<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> <a class="code" href="Compiler_8h.html#acc1c483f4b4ee2f17bb6643a3b353609">LLVM_ATTRIBUTE_UNUSED</a>) {}</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160; </div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;  <span class="comment">// Empty function -- only applicable to UseBBInfo.</span></div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;  <span class="keywordtype">void</span> addInEdge(PGOEdge *<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> <a class="code" href="Compiler_8h.html#acc1c483f4b4ee2f17bb6643a3b353609">LLVM_ATTRIBUTE_UNUSED</a>) {}</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;};</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160; </div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;<span class="comment">// This class implements the CFG edges. Note the CFG can be a multi-graph.</span></div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">class</span> Edge, <span class="keyword">class</span> BBInfo&gt; <span class="keyword">class </span>FuncPGOInstrumentation {</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;<span class="keyword">private</span>:</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>;</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160; </div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;  <span class="comment">// Is this is context-sensitive instrumentation.</span></div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;  <span class="keywordtype">bool</span> IsCS;</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160; </div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;  <span class="comment">// A map that stores the Comdat group in function F.</span></div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;  std::unordered_multimap&lt;Comdat *, GlobalValue *&gt; &amp;ComdatMembers;</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160; </div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;  <a class="code" href="classllvm_1_1ValueProfileCollector.html">ValueProfileCollector</a> VPC;</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160; </div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;  <span class="keywordtype">void</span> computeCFGHash();</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;  <span class="keywordtype">void</span> renameComdatFunction();</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160; </div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetLibraryInfo.html">TargetLibraryInfo</a> &amp;TLI;</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;  std::vector&lt;std::vector&lt;VPCandidateInfo&gt;&gt; ValueSites;</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;  SelectInstVisitor SIVisitor;</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;  std::string FuncName;</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;  <a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a> *FuncNameVar;</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160; </div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;  <span class="comment">// CFG hash value for this function.</span></div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;  <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> FunctionHash = 0;</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160; </div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;  <span class="comment">// The Minimum Spanning Tree of function CFG.</span></div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;  <a class="code" href="classllvm_1_1CFGMST.html">CFGMST&lt;Edge, BBInfo&gt;</a> MST;</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160; </div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;  <span class="comment">// Collect all the BBs that will be instrumented, and store them in</span></div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;  <span class="comment">// InstrumentBBs.</span></div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;  <span class="keywordtype">void</span> getInstrumentBBs(std::vector&lt;BasicBlock *&gt; &amp;InstrumentBBs);</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160; </div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;  <span class="comment">// Give an edge, find the BB that will be instrumented.</span></div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;  <span class="comment">// Return nullptr if there is no BB to be instrumented.</span></div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="GCOVProfiling_8cpp.html#a482096c5cef8fc258fc2960985313fce">getInstrBB</a>(Edge *<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>);</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160; </div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;  <span class="comment">// Return the auxiliary BB information.</span></div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;  BBInfo &amp;getBBInfo(<span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> MST.<a class="code" href="classllvm_1_1CFGMST.html#a17b5cf4be5972f880ce4aeece803b217">getBBInfo</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>); }</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160; </div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;  <span class="comment">// Return the auxiliary BB information if available.</span></div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;  BBInfo *findBBInfo(<span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> MST.<a class="code" href="classllvm_1_1CFGMST.html#af0de013f86c04f472a34136841b7e4c0">findBBInfo</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>); }</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160; </div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;  <span class="comment">// Dump edges and BB information.</span></div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;  <span class="keywordtype">void</span> dumpInfo(std::string Str = <span class="stringliteral">&quot;&quot;</span>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;    MST.<a class="code" href="classllvm_1_1CFGMST.html#af6d53cb002b3fe8f7c4b7a7c3323e4c0">dumpEdges</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>(), <a class="code" href="classllvm_1_1Twine.html">Twine</a>(<span class="stringliteral">&quot;Dump Function &quot;</span>) + FuncName + <span class="stringliteral">&quot; Hash: &quot;</span> +</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;                              <a class="code" href="classllvm_1_1Twine.html">Twine</a>(FunctionHash) + <span class="stringliteral">&quot;\t&quot;</span> + Str);</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;  }</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160; </div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;  FuncPGOInstrumentation(</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;      <a class="code" href="classllvm_1_1Function.html">Function</a> &amp;Func, <a class="code" href="classllvm_1_1TargetLibraryInfo.html">TargetLibraryInfo</a> &amp;TLI,</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;      std::unordered_multimap&lt;Comdat *, GlobalValue *&gt; &amp;ComdatMembers,</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;      <span class="keywordtype">bool</span> CreateGlobalVar = <span class="keyword">false</span>, <a class="code" href="classllvm_1_1BranchProbabilityInfo.html">BranchProbabilityInfo</a> *BPI = <span class="keyword">nullptr</span>,</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;      <a class="code" href="classllvm_1_1BlockFrequencyInfo.html">BlockFrequencyInfo</a> *<a class="code" href="namespacellvm_1_1AMDGPUISD.html#a739d53294bc38cd6b0b23332f9994c0eafbca76f7875e080d97cee761de04d996">BFI</a> = <span class="keyword">nullptr</span>, <span class="keywordtype">bool</span> IsCS = <span class="keyword">false</span>,</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;      <span class="keywordtype">bool</span> InstrumentFuncEntry = <span class="keyword">true</span>)</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;      : <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>(<a class="code" href="namespacellvm_1_1ifs.html#adfe04e1a9cc096fb571e8372debaa67ea00d0b4f2d7dcdaaef835b97cf5d1e0df">Func</a>), IsCS(IsCS), ComdatMembers(ComdatMembers), VPC(<a class="code" href="namespacellvm_1_1ifs.html#adfe04e1a9cc096fb571e8372debaa67ea00d0b4f2d7dcdaaef835b97cf5d1e0df">Func</a>, TLI),</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;        TLI(TLI), ValueSites(IPVK_Last + 1), SIVisitor(<a class="code" href="namespacellvm_1_1ifs.html#adfe04e1a9cc096fb571e8372debaa67ea00d0b4f2d7dcdaaef835b97cf5d1e0df">Func</a>),</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;        MST(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, InstrumentFuncEntry, BPI, <a class="code" href="namespacellvm_1_1AMDGPUISD.html#a739d53294bc38cd6b0b23332f9994c0eafbca76f7875e080d97cee761de04d996">BFI</a>) {</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;    <span class="comment">// This should be done before CFG hash computation.</span></div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;    SIVisitor.countSelects(Func);</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;    ValueSites[IPVK_MemOPSize] = VPC.<a class="code" href="classllvm_1_1ValueProfileCollector.html#a9051f7b5cb39eaecf1a333768670f72f">get</a>(IPVK_MemOPSize);</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;    <span class="keywordflow">if</span> (!IsCS) {</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;      NumOfPGOSelectInsts += SIVisitor.getNumOfSelectInsts();</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;      NumOfPGOMemIntrinsics += ValueSites[IPVK_MemOPSize].size();</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;      NumOfPGOBB += MST.<a class="code" href="classllvm_1_1CFGMST.html#ad6e6d6f54fcae7b985c43108e544d274">BBInfos</a>.size();</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;      ValueSites[IPVK_IndirectCallTarget] = VPC.<a class="code" href="classllvm_1_1ValueProfileCollector.html#a9051f7b5cb39eaecf1a333768670f72f">get</a>(IPVK_IndirectCallTarget);</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;      NumOfCSPGOSelectInsts += SIVisitor.getNumOfSelectInsts();</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;      NumOfCSPGOMemIntrinsics += ValueSites[IPVK_MemOPSize].size();</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;      NumOfCSPGOBB += MST.<a class="code" href="classllvm_1_1CFGMST.html#ad6e6d6f54fcae7b985c43108e544d274">BBInfos</a>.size();</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;    }</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160; </div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;    FuncName = <a class="code" href="namespacellvm.html#a133c5cb70e0ea68fc5e503b7a7732390">getPGOFuncName</a>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;    computeCFGHash();</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;    <span class="keywordflow">if</span> (!ComdatMembers.empty())</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;      renameComdatFunction();</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(dumpInfo(<span class="stringliteral">&quot;after CFGMST&quot;</span>));</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160; </div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> : MST.<a class="code" href="classllvm_1_1CFGMST.html#a4f5c3cf1b796e8a06de4665e74349bf9">AllEdges</a>) {</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>-&gt;Removed)</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;      IsCS ? NumOfCSPGOEdge++ : NumOfPGOEdge++;</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>-&gt;InMST)</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;        IsCS ? NumOfCSPGOInstrument++ : NumOfPGOInstrument++;</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;    }</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160; </div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;    <span class="keywordflow">if</span> (CreateGlobalVar)</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;      FuncNameVar = <a class="code" href="namespacellvm.html#a6791ec50da8cffef53eae412b5b90936">createPGOFuncNameVar</a>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, FuncName);</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;  }</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;};</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160; </div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;} <span class="comment">// end anonymous namespace</span></div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160; </div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;<span class="comment">// Compute Hash value for the CFG: the lower 32 bits are CRC32 of the index</span></div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;<span class="comment">// value of each BB in the CFG. The higher 32 bits are the CRC32 of the numbers</span></div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;<span class="comment">// of selects, indirect calls, mem ops and edges.</span></div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">class</span> Edge, <span class="keyword">class</span> BBInfo&gt;</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;<span class="keywordtype">void</span> FuncPGOInstrumentation&lt;Edge, BBInfo&gt;::computeCFGHash() {</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;  std::vector&lt;uint8_t&gt; Indexes;</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;  <a class="code" href="classllvm_1_1JamCRC.html">JamCRC</a> JC;</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> : <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>) {</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *TI = <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>.getTerminator();</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0, <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = TI-&gt;<a class="code" href="classllvm_1_1Instruction.html#a3287172f2d13af086e6d66364e8c6de3">getNumSuccessors</a>(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;      <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Succ = TI-&gt;<a class="code" href="classllvm_1_1Instruction.html#a6e5d2e18c81baaeec7dadc81a0dea993">getSuccessor</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;      <span class="keyword">auto</span> BI = findBBInfo(Succ);</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;      <span class="keywordflow">if</span> (BI == <span class="keyword">nullptr</span>)</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;      <a class="code" href="classuint32__t.html">uint32_t</a> <a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a> = BI-&gt;Index;</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> J = 0; J &lt; 4; J++)</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;        Indexes.push_back((uint8_t)(<a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a> &gt;&gt; (J * 8)));</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;    }</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;  }</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;  JC.<a class="code" href="classllvm_1_1JamCRC.html#af4c43564c4a47b6d9741736e3962e279">update</a>(Indexes);</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160; </div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;  <a class="code" href="classllvm_1_1JamCRC.html">JamCRC</a> JCH;</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="PGOInstrumentation_8cpp.html#ab457c5811495a302a792ca0ba3e7818e">PGOOldCFGHashing</a>) {</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;    <span class="comment">// Hash format for context sensitive profile. Reserve 4 bits for other</span></div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;    <span class="comment">// information.</span></div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;    FunctionHash = (<a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a>)SIVisitor.getNumOfSelectInsts() &lt;&lt; 56 |</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;                   (<a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a>)ValueSites[IPVK_IndirectCallTarget].<a class="code" href="namespacellvm.html#a10f3d955592ae2bc745f57e5b48ae115">size</a>() &lt;&lt; 48 |</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;                   <span class="comment">//(uint64_t)ValueSites[IPVK_MemOPSize].size() &lt;&lt; 40 |</span></div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;                   (<a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a>)MST.<a class="code" href="classllvm_1_1CFGMST.html#a4f5c3cf1b796e8a06de4665e74349bf9">AllEdges</a>.size() &lt;&lt; 32 | JC.<a class="code" href="classllvm_1_1JamCRC.html#a90e799935e361788dee83dfb9b2d5099">getCRC</a>();</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;    <span class="comment">// The higher 32 bits.</span></div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;    <span class="keyword">auto</span> updateJCH = [&amp;JCH](<a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> Num) {</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;      uint8_t <a class="code" href="namespacellvm.html#ae551fe3e2b167b36005b26473e993884a26aa2e7865f749b52f3b77991776c40d">Data</a>[8];</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;      <a class="code" href="namespacellvm_1_1support_1_1endian.html#a46eee35129898d0466b2af97eacb19ee">support::endian::write64le</a>(Data, Num);</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;      JCH.<a class="code" href="classllvm_1_1JamCRC.html#af4c43564c4a47b6d9741736e3962e279">update</a>(Data);</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;    };</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;    updateJCH((<a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a>)SIVisitor.getNumOfSelectInsts());</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;    updateJCH((<a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a>)ValueSites[IPVK_IndirectCallTarget].<a class="code" href="namespacellvm.html#a10f3d955592ae2bc745f57e5b48ae115">size</a>());</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;    updateJCH((<a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a>)ValueSites[IPVK_MemOPSize].<a class="code" href="namespacellvm.html#a10f3d955592ae2bc745f57e5b48ae115">size</a>());</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;    updateJCH((<a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a>)MST.<a class="code" href="classllvm_1_1CFGMST.html#a4f5c3cf1b796e8a06de4665e74349bf9">AllEdges</a>.size());</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160; </div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;    <span class="comment">// Hash format for context sensitive profile. Reserve 4 bits for other</span></div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;    <span class="comment">// information.</span></div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;    FunctionHash = (((<a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a>)JCH.<a class="code" href="classllvm_1_1JamCRC.html#a90e799935e361788dee83dfb9b2d5099">getCRC</a>()) &lt;&lt; 28) + JC.<a class="code" href="classllvm_1_1JamCRC.html#a90e799935e361788dee83dfb9b2d5099">getCRC</a>();</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;  }</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160; </div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;  <span class="comment">// Reserve bit 60-63 for other information purpose.</span></div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;  FunctionHash &amp;= 0x0FFFFFFFFFFFFFFF;</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;  <span class="keywordflow">if</span> (IsCS)</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;    <a class="code" href="structllvm_1_1NamedInstrProfRecord.html#ac51b9a380421e08532eb1e488863631d">NamedInstrProfRecord::setCSFlagInHash</a>(FunctionHash);</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Function Hash Computation for &quot;</span> &lt;&lt; <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getName() &lt;&lt; <span class="stringliteral">&quot;:\n&quot;</span></div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;                    &lt;&lt; <span class="stringliteral">&quot; CRC = &quot;</span> &lt;&lt; JC.<a class="code" href="classllvm_1_1JamCRC.html#a90e799935e361788dee83dfb9b2d5099">getCRC</a>()</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;                    &lt;&lt; <span class="stringliteral">&quot;, Selects = &quot;</span> &lt;&lt; SIVisitor.getNumOfSelectInsts()</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;                    &lt;&lt; <span class="stringliteral">&quot;, Edges = &quot;</span> &lt;&lt; MST.<a class="code" href="classllvm_1_1CFGMST.html#a4f5c3cf1b796e8a06de4665e74349bf9">AllEdges</a>.size() &lt;&lt; <span class="stringliteral">&quot;, ICSites = &quot;</span></div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;                    &lt;&lt; ValueSites[IPVK_IndirectCallTarget].size());</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="PGOInstrumentation_8cpp.html#ab457c5811495a302a792ca0ba3e7818e">PGOOldCFGHashing</a>) {</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;, Memops = &quot;</span> &lt;&lt; ValueSites[IPVK_MemOPSize].<a class="code" href="namespacellvm.html#a10f3d955592ae2bc745f57e5b48ae115">size</a>()</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;                      &lt;&lt; <span class="stringliteral">&quot;, High32 CRC = &quot;</span> &lt;&lt; JCH.<a class="code" href="classllvm_1_1JamCRC.html#a90e799935e361788dee83dfb9b2d5099">getCRC</a>());</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;  }</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;, Hash = &quot;</span> &lt;&lt; FunctionHash &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;);</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160; </div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="PGOInstrumentation_8cpp.html#ac3b9bc99faa43a4c41864f15a4e8c2ef">PGOTraceFuncHash</a> != <span class="stringliteral">&quot;-&quot;</span> &amp;&amp; <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getName().contains(<a class="code" href="PGOInstrumentation_8cpp.html#ac3b9bc99faa43a4c41864f15a4e8c2ef">PGOTraceFuncHash</a>))</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;    <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Funcname=&quot;</span> &lt;&lt; <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getName() &lt;&lt; <span class="stringliteral">&quot;, Hash=&quot;</span> &lt;&lt; FunctionHash</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;           &lt;&lt; <span class="stringliteral">&quot; in building &quot;</span> &lt;&lt; <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getParent()-&gt;getSourceFileName() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;}</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160; </div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;<span class="comment">// Check if we can safely rename this Comdat function.</span></div>
<div class="line"><a name="l00669"></a><span class="lineno"><a class="line" href="PGOInstrumentation_8cpp.html#a844eee3543e553d76f38adcc510b9c09">  669</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="PGOInstrumentation_8cpp.html#a844eee3543e553d76f38adcc510b9c09">canRenameComdat</a>(</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;    <a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>,</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;    std::unordered_multimap&lt;Comdat *, GlobalValue *&gt; &amp;ComdatMembers) {</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="PGOInstrumentation_8cpp.html#af695245be16902715ac76f9f780edd4c">DoComdatRenaming</a> || !<a class="code" href="namespacellvm.html#abbbd1b6fc4b1028641e564b0e972e18b">canRenameComdatFunc</a>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, <span class="keyword">true</span>))</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160; </div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;  <span class="comment">// FIXME: Current only handle those Comdat groups that only containing one</span></div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;  <span class="comment">// function.</span></div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;  <span class="comment">// (1) For a Comdat group containing multiple functions, we need to have a</span></div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;  <span class="comment">// unique postfix based on the hashes for each function. There is a</span></div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;  <span class="comment">// non-trivial code refactoring to do this efficiently.</span></div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;  <span class="comment">// (2) Variables can not be renamed, so we can not rename Comdat function in a</span></div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;  <span class="comment">// group including global vars.</span></div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;  <a class="code" href="classllvm_1_1Comdat.html">Comdat</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getComdat();</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;&amp;CM : <a class="code" href="namespacellvm.html#ad1a91b49e0c092818a0b82f6cc130a1b">make_range</a>(ComdatMembers.equal_range(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>))) {</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!isa&lt;GlobalAlias&gt;(CM.second));</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;    <a class="code" href="classllvm_1_1Function.html">Function</a> *FM = dyn_cast&lt;Function&gt;(CM.second);</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;    <span class="keywordflow">if</span> (FM != &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>)</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;  }</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;}</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160; </div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;<span class="comment">// Append the CFGHash to the Comdat function name.</span></div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">class</span> Edge, <span class="keyword">class</span> BBInfo&gt;</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;<span class="keywordtype">void</span> FuncPGOInstrumentation&lt;Edge, BBInfo&gt;::renameComdatFunction() {</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="PGOInstrumentation_8cpp.html#a844eee3543e553d76f38adcc510b9c09">canRenameComdat</a>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, ComdatMembers))</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;  std::string OrigName = <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getName().str();</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;  std::string NewFuncName =</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;      <a class="code" href="classllvm_1_1Twine.html">Twine</a>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getName() + <span class="stringliteral">&quot;.&quot;</span> + <a class="code" href="classllvm_1_1Twine.html">Twine</a>(FunctionHash)).<a class="code" href="classllvm_1_1Twine.html#a4c1c1093a7749409c70838678514cc7c">str</a>();</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;  <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.setName(<a class="code" href="classllvm_1_1Twine.html">Twine</a>(NewFuncName));</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;  <a class="code" href="classllvm_1_1GlobalAlias.html#a8a638534b520f72ab7f2c886da739a6c">GlobalAlias::create</a>(<a class="code" href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57ca8d13a9bcecfac72febceb1103afa048f">GlobalValue::WeakAnyLinkage</a>, OrigName, &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;  FuncName = <a class="code" href="classllvm_1_1Twine.html">Twine</a>(FuncName + <span class="stringliteral">&quot;.&quot;</span> + <a class="code" href="classllvm_1_1Twine.html">Twine</a>(FunctionHash)).<a class="code" href="classllvm_1_1Twine.html#a4c1c1093a7749409c70838678514cc7c">str</a>();</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;  <a class="code" href="classllvm_1_1Comdat.html">Comdat</a> *NewComdat;</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;  <a class="code" href="classllvm_1_1Module.html">Module</a> *<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a> = <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getParent();</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;  <span class="comment">// For AvailableExternallyLinkage functions, change the linkage to</span></div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;  <span class="comment">// LinkOnceODR and put them into comdat. This is because after renaming, there</span></div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;  <span class="comment">// is no backup external copy available for the function.</span></div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.hasComdat()) {</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getLinkage() == <a class="code" href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57caa67f293befacbbf974525116ccf2ff42">GlobalValue::AvailableExternallyLinkage</a>);</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;    NewComdat = <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>-&gt;getOrInsertComdat(<a class="code" href="classllvm_1_1StringRef.html">StringRef</a>(NewFuncName));</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;    <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.setLinkage(<a class="code" href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57caf2b592edf18170e7aff4e8f3bae3360c">GlobalValue::LinkOnceODRLinkage</a>);</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;    <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.setComdat(NewComdat);</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;  }</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160; </div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;  <span class="comment">// This function belongs to a single function Comdat group.</span></div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;  <a class="code" href="classllvm_1_1Comdat.html">Comdat</a> *OrigComdat = <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getComdat();</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;  std::string NewComdatName =</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;      <a class="code" href="classllvm_1_1Twine.html">Twine</a>(OrigComdat-&gt;<a class="code" href="classllvm_1_1Comdat.html#a699b34b3b6301ffc6632c7c6f643b96a">getName</a>() + <span class="stringliteral">&quot;.&quot;</span> + <a class="code" href="classllvm_1_1Twine.html">Twine</a>(FunctionHash)).<a class="code" href="classllvm_1_1Twine.html#a4c1c1093a7749409c70838678514cc7c">str</a>();</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;  NewComdat = <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>-&gt;getOrInsertComdat(<a class="code" href="classllvm_1_1StringRef.html">StringRef</a>(NewComdatName));</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;  NewComdat-&gt;<a class="code" href="classllvm_1_1Comdat.html#ad8e5834e05be0104c4d64a3b4edeb51b">setSelectionKind</a>(OrigComdat-&gt;<a class="code" href="classllvm_1_1Comdat.html#afad14be926fcf2e071f21f178f99c28d">getSelectionKind</a>());</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160; </div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;&amp;CM : <a class="code" href="namespacellvm.html#ad1a91b49e0c092818a0b82f6cc130a1b">make_range</a>(ComdatMembers.equal_range(OrigComdat))) {</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;    <span class="comment">// Must be a function.</span></div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;    cast&lt;Function&gt;(CM.second)-&gt;setComdat(NewComdat);</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;  }</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;}</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160; </div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;<span class="comment">// Collect all the BBs that will be instruments and return them in</span></div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;<span class="comment">// InstrumentBBs and setup InEdges/OutEdge for UseBBInfo.</span></div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">class</span> Edge, <span class="keyword">class</span> BBInfo&gt;</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;<span class="keywordtype">void</span> FuncPGOInstrumentation&lt;Edge, BBInfo&gt;::getInstrumentBBs(</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;    std::vector&lt;BasicBlock *&gt; &amp;InstrumentBBs) {</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;  <span class="comment">// Use a worklist as we will update the vector during the iteration.</span></div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;  std::vector&lt;Edge *&gt; EdgeList;</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;  EdgeList.reserve(MST.<a class="code" href="classllvm_1_1CFGMST.html#a4f5c3cf1b796e8a06de4665e74349bf9">AllEdges</a>.size());</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> : MST.<a class="code" href="classllvm_1_1CFGMST.html#a4f5c3cf1b796e8a06de4665e74349bf9">AllEdges</a>)</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;    EdgeList.push_back(<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>.get());</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160; </div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> : EdgeList) {</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *InstrBB = <a class="code" href="GCOVProfiling_8cpp.html#a482096c5cef8fc258fc2960985313fce">getInstrBB</a>(<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>);</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;    <span class="keywordflow">if</span> (InstrBB)</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;      InstrumentBBs.push_back(InstrBB);</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;  }</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160; </div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;  <span class="comment">// Set up InEdges/OutEdges for all BBs.</span></div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> : MST.<a class="code" href="classllvm_1_1CFGMST.html#a4f5c3cf1b796e8a06de4665e74349bf9">AllEdges</a>) {</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>-&gt;Removed)</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *SrcBB = <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>-&gt;SrcBB;</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *DestBB = <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>-&gt;DestBB;</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;    BBInfo &amp;SrcInfo = getBBInfo(SrcBB);</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;    BBInfo &amp;DestInfo = getBBInfo(DestBB);</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;    SrcInfo.addOutEdge(<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>.get());</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;    DestInfo.addInEdge(<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>.get());</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;  }</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;}</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160; </div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;<span class="comment">// Given a CFG E to be instrumented, find which BB to place the instrumented</span></div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;<span class="comment">// code. The function will split the critical edge if necessary.</span></div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">class</span> Edge, <span class="keyword">class</span> BBInfo&gt;</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="GCOVProfiling_8cpp.html#a482096c5cef8fc258fc2960985313fce">FuncPGOInstrumentation&lt;Edge, BBInfo&gt;::getInstrBB</a>(Edge *<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>) {</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>-&gt;InMST || <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>-&gt;Removed)</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160; </div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *SrcBB = <span class="keyword">const_cast&lt;</span><a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<span class="keyword">&gt;</span>(<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>-&gt;SrcBB);</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *DestBB = <span class="keyword">const_cast&lt;</span><a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<span class="keyword">&gt;</span>(<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>-&gt;DestBB);</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;  <span class="comment">// For a fake edge, instrument the real BB.</span></div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;  <span class="keywordflow">if</span> (SrcBB == <span class="keyword">nullptr</span>)</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;    <span class="keywordflow">return</span> DestBB;</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;  <span class="keywordflow">if</span> (DestBB == <span class="keyword">nullptr</span>)</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;    <span class="keywordflow">return</span> SrcBB;</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160; </div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;  <span class="keyword">auto</span> canInstrument = [](<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) -&gt; <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> * {</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;    <span class="comment">// There are basic blocks (such as catchswitch) cannot be instrumented.</span></div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;    <span class="comment">// If the returned first insertion point is the end of BB, skip this BB.</span></div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getFirstInsertionPt() == <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;end())</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>;</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;  };</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160; </div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;  <span class="comment">// Instrument the SrcBB if it has a single successor,</span></div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;  <span class="comment">// otherwise, the DestBB if this is not a critical edge.</span></div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *TI = SrcBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>();</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;  <span class="keywordflow">if</span> (TI-&gt;<a class="code" href="classllvm_1_1Instruction.html#a3287172f2d13af086e6d66364e8c6de3">getNumSuccessors</a>() &lt;= 1)</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;    <span class="keywordflow">return</span> canInstrument(SrcBB);</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>-&gt;IsCritical)</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;    <span class="keywordflow">return</span> canInstrument(DestBB);</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160; </div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;  <span class="comment">// Some IndirectBr critical edges cannot be split by the previous</span></div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;  <span class="comment">// SplitIndirectBrCriticalEdges call. Bail out.</span></div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;  <span class="keywordtype">unsigned</span> SuccNum = <a class="code" href="namespacellvm.html#a1b38a63d3be7413f335be5f2d81bb234">GetSuccessorNumber</a>(SrcBB, DestBB);</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *InstrBB =</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;      isa&lt;IndirectBrInst&gt;(TI) ? nullptr : <a class="code" href="namespacellvm.html#ab61955a622d233750894890e0704da5c">SplitCriticalEdge</a>(TI, SuccNum);</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;  <span class="keywordflow">if</span> (!InstrBB) {</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;        <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Fail to split critical edge: not instrument this edge.\n&quot;</span>);</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;  }</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;  <span class="comment">// For a critical edge, we have to split. Instrument the newly</span></div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;  <span class="comment">// created BB.</span></div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;  IsCS ? NumOfCSPGOSplit++ : NumOfPGOSplit++;</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Split critical edge: &quot;</span> &lt;&lt; getBBInfo(SrcBB).<a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a></div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;                    &lt;&lt; <span class="stringliteral">&quot; --&gt; &quot;</span> &lt;&lt; getBBInfo(DestBB).<a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a> &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;  <span class="comment">// Need to add two new edges. First one: Add new edge of SrcBB-&gt;InstrBB.</span></div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;  MST.<a class="code" href="classllvm_1_1CFGMST.html#a5a0430fa0b3b900c4edf415627cdc0d4">addEdge</a>(SrcBB, InstrBB, 0);</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;  <span class="comment">// Second one: Add new edge of InstrBB-&gt;DestBB.</span></div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;  Edge &amp;NewEdge1 = MST.<a class="code" href="classllvm_1_1CFGMST.html#a5a0430fa0b3b900c4edf415627cdc0d4">addEdge</a>(InstrBB, DestBB, 0);</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;  NewEdge1.InMST = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;  <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>-&gt;Removed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160; </div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;  <span class="keywordflow">return</span> canInstrument(InstrBB);</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;}</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160; </div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;<span class="comment">// When generating value profiling calls on Windows routines that make use of</span></div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;<span class="comment">// handler funclets for exception processing an operand bundle needs to attached</span></div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;<span class="comment">// to the called function. This routine will set \p OpBundles to contain the</span></div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;<span class="comment">// funclet information, if any is needed, that should be placed on the generated</span></div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;<span class="comment">// value profiling call for the value profile candidate call.</span></div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span></div>
<div class="line"><a name="l00821"></a><span class="lineno"><a class="line" href="PGOInstrumentation_8cpp.html#a5231b25125e1131002b5192820d3c969">  821</a></span>&#160;<a class="code" href="PGOInstrumentation_8cpp.html#a5231b25125e1131002b5192820d3c969">populateEHOperandBundle</a>(<a class="code" href="structllvm_1_1ValueProfileCollector_1_1CandidateInfo.html">VPCandidateInfo</a> &amp;Cand,</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;                        <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;BasicBlock *, ColorVector&gt;</a> &amp;BlockColors,</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;                        <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;OperandBundleDef&gt;</a> &amp;OpBundles) {</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;  <span class="keyword">auto</span> *OrigCall = dyn_cast&lt;CallBase&gt;(Cand.<a class="code" href="structllvm_1_1ValueProfileCollector_1_1CandidateInfo.html#a46eb56fff802a50f7bdb536adb6230af">AnnotatedInst</a>);</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;  <span class="keywordflow">if</span> (!OrigCall)</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160; </div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;  <span class="keywordflow">if</span> (!isa&lt;IntrinsicInst&gt;(OrigCall)) {</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;    <span class="comment">// The instrumentation call should belong to the same funclet as a</span></div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;    <span class="comment">// non-intrinsic call, so just copy the operand bundle, if any exists.</span></div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;    std::optional&lt;OperandBundleUse&gt; ParentFunclet =</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;        OrigCall-&gt;getOperandBundle(<a class="code" href="classllvm_1_1LLVMContext.html#a800c1300065ca1615d2f4fb88623afd5a8997c6b0930e2c05209e95e7172c6cf3">LLVMContext::OB_funclet</a>);</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;    <span class="keywordflow">if</span> (ParentFunclet)</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;      OpBundles.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a396fcfee6914c76974b73c3d203da6a5">emplace_back</a>(<a class="code" href="namespacellvm.html#a5536eb574f2ee4e022d04a0418d22fbd">OperandBundleDef</a>(*ParentFunclet));</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;    <span class="comment">// Intrinsics or other instructions do not get funclet information from the</span></div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;    <span class="comment">// front-end. Need to use the BlockColors that was computed by the routine</span></div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;    <span class="comment">// colorEHFunclets to determine whether a funclet is needed.</span></div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;    <span class="keywordflow">if</span> (!BlockColors.<a class="code" href="classllvm_1_1DenseMapBase.html#a49c487a9395a6c384be8544cfb2cfccf">empty</a>()) {</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1TinyPtrVector.html">ColorVector</a> &amp;CV = BlockColors.<a class="code" href="classllvm_1_1DenseMapBase.html#a0c047f127ed4380a6f383d70bec4eb94">find</a>(OrigCall-&gt;getParent())-&gt;second;</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(CV.<a class="code" href="classllvm_1_1TinyPtrVector.html#aac784c7664f3f6b8076756c6fb0eed74">size</a>() == 1 &amp;&amp; <span class="stringliteral">&quot;non-unique color for block!&quot;</span>);</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;      <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *EHPad = CV.<a class="code" href="classllvm_1_1TinyPtrVector.html#a3a26404d33061e8aaeab39c490181389">front</a>()-&gt;getFirstNonPHI();</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;      <span class="keywordflow">if</span> (EHPad-&gt;<a class="code" href="classllvm_1_1Instruction.html#a5d3d315f678bc76e43b27d18e5d72829">isEHPad</a>())</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;        OpBundles.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a396fcfee6914c76974b73c3d203da6a5">emplace_back</a>(<span class="stringliteral">&quot;funclet&quot;</span>, EHPad);</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;    }</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;  }</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;}</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160; </div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;<span class="comment">// Visit all edge and instrument the edges not in MST, and do value profiling.</span></div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;<span class="comment">// Critical edges will be split.</span></div>
<div class="line"><a name="l00851"></a><span class="lineno"><a class="line" href="PGOInstrumentation_8cpp.html#a4b1bfa0c2ee8a4cef8a76537a7bb71e0">  851</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="PGOInstrumentation_8cpp.html#a4b1bfa0c2ee8a4cef8a76537a7bb71e0">instrumentOneFunc</a>(</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;    <a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, <a class="code" href="classllvm_1_1Module.html">Module</a> *M, <a class="code" href="classllvm_1_1TargetLibraryInfo.html">TargetLibraryInfo</a> &amp;TLI, <a class="code" href="classllvm_1_1BranchProbabilityInfo.html">BranchProbabilityInfo</a> *BPI,</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;    <a class="code" href="classllvm_1_1BlockFrequencyInfo.html">BlockFrequencyInfo</a> *<a class="code" href="namespacellvm_1_1AMDGPUISD.html#a739d53294bc38cd6b0b23332f9994c0eafbca76f7875e080d97cee761de04d996">BFI</a>,</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;    std::unordered_multimap&lt;Comdat *, GlobalValue *&gt; &amp;ComdatMembers,</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;    <span class="keywordtype">bool</span> IsCS) {</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;  <span class="comment">// Split indirectbr critical edges here before computing the MST rather than</span></div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;  <span class="comment">// later in getInstrBB() to avoid invalidating it.</span></div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;  <a class="code" href="namespacellvm.html#a502009030bffff8a6992f4e4eb9380f5">SplitIndirectBrCriticalEdges</a>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, <span class="comment">/*IgnoreBlocksWithoutPHI=*/</span><span class="keyword">false</span>, BPI, <a class="code" href="namespacellvm_1_1AMDGPUISD.html#a739d53294bc38cd6b0b23332f9994c0eafbca76f7875e080d97cee761de04d996">BFI</a>);</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160; </div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;  FuncPGOInstrumentation&lt;PGOEdge, BBInfo&gt; FuncInfo(</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;      <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, TLI, ComdatMembers, <span class="keyword">true</span>, BPI, <a class="code" href="namespacellvm_1_1AMDGPUISD.html#a739d53294bc38cd6b0b23332f9994c0eafbca76f7875e080d97cee761de04d996">BFI</a>, IsCS, <a class="code" href="PGOInstrumentation_8cpp.html#aa64a0f86c47358606fcb6bd03927e030">PGOInstrumentEntry</a>);</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160; </div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *I8PtrTy = <a class="code" href="classllvm_1_1Type.html#a7fe9ccd4893f4e2caa826126c09545ea">Type::getInt8PtrTy</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>-&gt;getContext());</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;  <span class="keyword">auto</span> Name = <a class="code" href="classllvm_1_1ConstantExpr.html#ae79d05dd3d0b05e080e08f8c5c33f880">ConstantExpr::getBitCast</a>(FuncInfo.FuncNameVar, I8PtrTy);</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;  <span class="keyword">auto</span> CFGHash = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(<a class="code" href="classllvm_1_1Type.html#a05186fa23e4d11b9855a9599ba87a4b7">Type::getInt64Ty</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>-&gt;getContext()),</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;                                  FuncInfo.FunctionHash);</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="PGOInstrumentation_8cpp.html#a63fd72ea6df7c5a2aae8875fc5acb1ca">PGOFunctionEntryCoverage</a>) {</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;    <span class="keyword">auto</span> &amp;EntryBB = <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getEntryBlock();</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;    <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>(&amp;EntryBB, EntryBB.getFirstInsertionPt());</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;    <span class="comment">// llvm.instrprof.cover(i8* &lt;name&gt;, i64 &lt;hash&gt;, i32 &lt;num-counters&gt;,</span></div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;    <span class="comment">//                      i32 &lt;index&gt;)</span></div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;    <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCall(</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;        <a class="code" href="namespacellvm_1_1Intrinsic.html#aefa39f6b622360ce4e947feb9f671b73">Intrinsic::getDeclaration</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>, Intrinsic::instrprof_cover),</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;        {Name, CFGHash, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getInt32(1), <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getInt32(0)});</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;  }</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160; </div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;  std::vector&lt;BasicBlock *&gt; InstrumentBBs;</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;  FuncInfo.getInstrumentBBs(InstrumentBBs);</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;  <span class="keywordtype">unsigned</span> NumCounters =</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;      InstrumentBBs.size() + FuncInfo.SIVisitor.getNumOfSelectInsts();</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160; </div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;  <a class="code" href="classuint32__t.html">uint32_t</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0;</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> *InstrBB : InstrumentBBs) {</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;    <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>(InstrBB, InstrBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a161fd4e9fa5367f64c2a4c9e921c3ad3">getFirstInsertionPt</a>());</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.GetInsertPoint() != InstrBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0b4e7bee9b8575cc7db73329f1a561bd">end</a>() &amp;&amp;</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;           <span class="stringliteral">&quot;Cannot get the Instrumentation point&quot;</span>);</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;    <span class="comment">// llvm.instrprof.increment(i8* &lt;name&gt;, i64 &lt;hash&gt;, i32 &lt;num-counters&gt;,</span></div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;    <span class="comment">//                          i32 &lt;index&gt;)</span></div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;    <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCall(</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;        <a class="code" href="namespacellvm_1_1Intrinsic.html#aefa39f6b622360ce4e947feb9f671b73">Intrinsic::getDeclaration</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>, Intrinsic::instrprof_increment),</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;        {Name, CFGHash, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getInt32(NumCounters), <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getInt32(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>++)});</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;  }</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160; </div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;  <span class="comment">// Now instrument select instructions:</span></div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;  FuncInfo.SIVisitor.instrumentSelects(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, NumCounters, FuncInfo.FuncNameVar,</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;                                       FuncInfo.FunctionHash);</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> == NumCounters);</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160; </div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="PGOInstrumentation_8cpp.html#ada74fa2ec8933c6674ddded08aeef167">DisableValueProfiling</a>)</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160; </div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;  NumOfPGOICall += FuncInfo.ValueSites[IPVK_IndirectCallTarget].size();</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160; </div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;  <span class="comment">// Intrinsic function calls do not have funclet operand bundles needed for</span></div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;  <span class="comment">// Windows exception handling attached to them. However, if value profiling is</span></div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;  <span class="comment">// inserted for one of these calls, then a funclet value will need to be set</span></div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;  <span class="comment">// on the instrumentation call based on the funclet coloring.</span></div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;  <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;BasicBlock *, ColorVector&gt;</a> BlockColors;</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.hasPersonalityFn() &amp;&amp;</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;      <a class="code" href="namespacellvm.html#aa014490a40c9286ee7e026a2f579eea9">isFuncletEHPersonality</a>(<a class="code" href="namespacellvm.html#a8d508f23e2580095561902c39911fb9b">classifyEHPersonality</a>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getPersonalityFn())))</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;    BlockColors = <a class="code" href="namespacellvm.html#a3a3a97fed79c86bf242b0f090e1cb2e6">colorEHFunclets</a>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160; </div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;  <span class="comment">// For each VP Kind, walk the VP candidates and instrument each one.</span></div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classuint32__t.html">uint32_t</a> Kind = IPVK_First; Kind &lt;= IPVK_Last; ++Kind) {</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;    <span class="keywordtype">unsigned</span> SiteIndex = 0;</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;    <span class="keywordflow">if</span> (Kind == IPVK_MemOPSize &amp;&amp; !<a class="code" href="PGOInstrumentation_8cpp.html#ae9fc9062a3d5b7b7dc9f687e248be7d8">PGOInstrMemOP</a>)</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160; </div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="structllvm_1_1ValueProfileCollector_1_1CandidateInfo.html">VPCandidateInfo</a> Cand : FuncInfo.ValueSites[Kind]) {</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Instrument one VP &quot;</span> &lt;&lt; <a class="code" href="PGOInstrumentation_8cpp.html#afcf97c296d164d441069b79ca44b206c">ValueProfKindDescr</a>[Kind]</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;                        &lt;&lt; <span class="stringliteral">&quot; site: CallSite Index = &quot;</span> &lt;&lt; SiteIndex &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160; </div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;      <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>(Cand.InsertPt);</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.GetInsertPoint() != Cand.InsertPt-&gt;getParent()-&gt;end() &amp;&amp;</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;             <span class="stringliteral">&quot;Cannot get the Instrumentation point&quot;</span>);</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160; </div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *ToProfile = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;      <span class="keywordflow">if</span> (Cand.V-&gt;getType()-&gt;isIntegerTy())</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;        ToProfile = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateZExtOrTrunc(Cand.V, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getInt64Ty());</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Cand.V-&gt;getType()-&gt;isPointerTy())</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;        ToProfile = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreatePtrToInt(Cand.V, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getInt64Ty());</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(ToProfile &amp;&amp; <span class="stringliteral">&quot;value profiling Value is of unexpected type&quot;</span>);</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160; </div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;      <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;OperandBundleDef, 1&gt;</a> OpBundles;</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;      <a class="code" href="PGOInstrumentation_8cpp.html#a5231b25125e1131002b5192820d3c969">populateEHOperandBundle</a>(Cand, BlockColors, OpBundles);</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;      <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCall(</div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;          <a class="code" href="namespacellvm_1_1Intrinsic.html#aefa39f6b622360ce4e947feb9f671b73">Intrinsic::getDeclaration</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>, Intrinsic::instrprof_value_profile),</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;          {<a class="code" href="classllvm_1_1ConstantExpr.html#ae79d05dd3d0b05e080e08f8c5c33f880">ConstantExpr::getBitCast</a>(FuncInfo.FuncNameVar, I8PtrTy),</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;           <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getInt64(FuncInfo.FunctionHash), ToProfile,</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;           <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getInt32(Kind), <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getInt32(SiteIndex++)},</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;          OpBundles);</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;    }</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;  } <span class="comment">// IPVK_First &lt;= Kind &lt;= IPVK_Last</span></div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;}</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160; </div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;<span class="keyword">namespace </span>{</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160; </div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;<span class="comment">// This class represents a CFG edge in profile use compilation.</span></div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;<span class="keyword">struct </span>PGOUseEdge : <span class="keyword">public</span> PGOEdge {</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;  <span class="keywordtype">bool</span> CountValid = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;  <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> CountValue = 0;</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160; </div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;  PGOUseEdge(<span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Src, <span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Dest, <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> <a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa05c79fbfc58d9dd2851c467a1ef166bf">W</a> = 1)</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;      : PGOEdge(Src, Dest, <a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa05c79fbfc58d9dd2851c467a1ef166bf">W</a>) {}</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160; </div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;  <span class="comment">// Set edge count value</span></div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;  <span class="keywordtype">void</span> setEdgeCount(<a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> <a class="code" href="classllvm_1_1Value.html">Value</a>) {</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;    CountValue = <a class="code" href="namespacellvm_1_1TargetStackID.html#a71392100eb15ba746b1f898986f5d8a5">Value</a>;</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;    CountValid = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;  }</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160; </div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;  <span class="comment">// Return the information string for this object.</span></div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;  std::string infoString()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;    <span class="keywordflow">if</span> (!CountValid)</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;      <span class="keywordflow">return</span> PGOEdge::infoString();</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;    <span class="keywordflow">return</span> (<a class="code" href="classllvm_1_1Twine.html">Twine</a>(PGOEdge::infoString()) + <span class="stringliteral">&quot;  Count=&quot;</span> + <a class="code" href="classllvm_1_1Twine.html">Twine</a>(CountValue))</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;        .str();</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;  }</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;};</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160; </div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;<span class="keyword">using</span> DirectEdges = <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;PGOUseEdge *, 2&gt;</a>;</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160; </div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;<span class="comment">// This class stores the auxiliary information for each BB.</span></div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;<span class="keyword">struct </span>UseBBInfo : <span class="keyword">public</span> BBInfo {</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;  <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> CountValue = 0;</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;  <span class="keywordtype">bool</span> CountValid;</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;  int32_t UnknownCountInEdge = 0;</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;  int32_t UnknownCountOutEdge = 0;</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;  DirectEdges InEdges;</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;  DirectEdges OutEdges;</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160; </div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;  UseBBInfo(<span class="keywordtype">unsigned</span> IX) : BBInfo(IX), CountValid(<a class="code" href="namespacefalse.html">false</a>) {}</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160; </div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;  UseBBInfo(<span class="keywordtype">unsigned</span> IX, <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;      : BBInfo(IX), CountValue(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>), CountValid(<a class="code" href="BasicAliasAnalysis_8cpp.html#af6d5cafbdfc5313e65d990120021a3ec">true</a>) {}</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160; </div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;  <span class="comment">// Set the profile count value for this BB.</span></div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;  <span class="keywordtype">void</span> setBBInfoCount(<a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> <a class="code" href="classllvm_1_1Value.html">Value</a>) {</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;    CountValue = <a class="code" href="namespacellvm_1_1TargetStackID.html#a71392100eb15ba746b1f898986f5d8a5">Value</a>;</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;    CountValid = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;  }</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160; </div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;  <span class="comment">// Return the information string of this object.</span></div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;  std::string infoString()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;    <span class="keywordflow">if</span> (!CountValid)</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;      <span class="keywordflow">return</span> BBInfo::infoString();</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;    <span class="keywordflow">return</span> (<a class="code" href="classllvm_1_1Twine.html">Twine</a>(BBInfo::infoString()) + <span class="stringliteral">&quot;  Count=&quot;</span> + <a class="code" href="classllvm_1_1Twine.html">Twine</a>(CountValue)).str();</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;  }</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160; </div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;  <span class="comment">// Add an OutEdge and update the edge count.</span></div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;  <span class="keywordtype">void</span> addOutEdge(PGOUseEdge *<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>) {</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;    OutEdges.push_back(<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>);</div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;    UnknownCountOutEdge++;</div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;  }</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160; </div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;  <span class="comment">// Add an InEdge and update the edge count.</span></div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;  <span class="keywordtype">void</span> addInEdge(PGOUseEdge *<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>) {</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;    InEdges.push_back(<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>);</div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;    UnknownCountInEdge++;</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;  }</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;};</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160; </div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;} <span class="comment">// end anonymous namespace</span></div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160; </div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;<span class="comment">// Sum up the count values for all the edges.</span></div>
<div class="line"><a name="l01017"></a><span class="lineno"><a class="line" href="PGOInstrumentation_8cpp.html#abe1ab937183696b53ab6551e4c30bf29"> 1017</a></span>&#160;<span class="keyword">static</span> <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> <a class="code" href="PGOInstrumentation_8cpp.html#abe1ab937183696b53ab6551e4c30bf29">sumEdgeCount</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;PGOUseEdge *&gt;</a> Edges) {</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;  <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> <a class="code" href="namespacellvm.html#af5ab7a47bc553dfc3ee92daf969d0d7ca96b0141273eabab320119c467cdcaf17">Total</a> = 0;</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> : Edges) {</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>-&gt;Removed)</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;    <a class="code" href="namespacellvm.html#af5ab7a47bc553dfc3ee92daf969d0d7ca96b0141273eabab320119c467cdcaf17">Total</a> += <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>-&gt;CountValue;</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;  }</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#af5ab7a47bc553dfc3ee92daf969d0d7ca96b0141273eabab320119c467cdcaf17">Total</a>;</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;}</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160; </div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;<span class="keyword">namespace </span>{</div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160; </div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;<span class="keyword">class </span>PGOUseFunc {</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;  PGOUseFunc(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;Func, <a class="code" href="classllvm_1_1Module.html">Module</a> *Modu, <a class="code" href="classllvm_1_1TargetLibraryInfo.html">TargetLibraryInfo</a> &amp;TLI,</div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;             std::unordered_multimap&lt;Comdat *, GlobalValue *&gt; &amp;ComdatMembers,</div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;             <a class="code" href="classllvm_1_1BranchProbabilityInfo.html">BranchProbabilityInfo</a> *BPI, <a class="code" href="classllvm_1_1BlockFrequencyInfo.html">BlockFrequencyInfo</a> *BFIin,</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;             <a class="code" href="classllvm_1_1ProfileSummaryInfo.html">ProfileSummaryInfo</a> *PSI, <span class="keywordtype">bool</span> IsCS, <span class="keywordtype">bool</span> InstrumentFuncEntry)</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;      : <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>(<a class="code" href="namespacellvm_1_1ifs.html#adfe04e1a9cc096fb571e8372debaa67ea00d0b4f2d7dcdaaef835b97cf5d1e0df">Func</a>), <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>(Modu), <a class="code" href="namespacellvm_1_1AMDGPUISD.html#a739d53294bc38cd6b0b23332f9994c0eafbca76f7875e080d97cee761de04d996">BFI</a>(BFIin), PSI(PSI),</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;        FuncInfo(<a class="code" href="namespacellvm_1_1ifs.html#adfe04e1a9cc096fb571e8372debaa67ea00d0b4f2d7dcdaaef835b97cf5d1e0df">Func</a>, TLI, ComdatMembers, <a class="code" href="namespacefalse.html">false</a>, BPI, BFIin, IsCS,</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;                 InstrumentFuncEntry),</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;        FreqAttr(FFA_Normal), IsCS(IsCS) {}</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160; </div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;  <span class="comment">// Read counts for the instrumented BB from profile.</span></div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;  <span class="keywordtype">bool</span> readCounters(<a class="code" href="classllvm_1_1IndexedInstrProfReader.html">IndexedInstrProfReader</a> *PGOReader, <span class="keywordtype">bool</span> &amp;AllZeros,</div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;                    <a class="code" href="structllvm_1_1InstrProfRecord.html#a69bdbaedb4ae6b233e5eccac5ebc2d77">InstrProfRecord::CountPseudoKind</a> &amp;PseudoKind);</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160; </div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;  <span class="comment">// Read memprof data for the instrumented function from profile.</span></div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;  <span class="keywordtype">bool</span> readMemprof(<a class="code" href="classllvm_1_1IndexedInstrProfReader.html">IndexedInstrProfReader</a> *PGOReader);</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160; </div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;  <span class="comment">// Populate the counts for all BBs.</span></div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;  <span class="keywordtype">void</span> populateCounters();</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160; </div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;  <span class="comment">// Set the branch weights based on the count values.</span></div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="SimplifyCFG_8cpp.html#a4953dfe289f5d9ad59a7964c4c63c2a9">setBranchWeights</a>();</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160; </div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;  <span class="comment">// Annotate the value profile call sites for all value kind.</span></div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;  <span class="keywordtype">void</span> annotateValueSites();</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160; </div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;  <span class="comment">// Annotate the value profile call sites for one value kind.</span></div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;  <span class="keywordtype">void</span> annotateValueSites(<a class="code" href="classuint32__t.html">uint32_t</a> Kind);</div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160; </div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;  <span class="comment">// Annotate the irreducible loop header weights.</span></div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;  <span class="keywordtype">void</span> annotateIrrLoopHeaderWeights();</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160; </div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;  <span class="comment">// The hotness of the function from the profile count.</span></div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;  <span class="keyword">enum</span> FuncFreqAttr { FFA_Normal, FFA_Cold, FFA_Hot };</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160; </div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;  <span class="comment">// Return the function hotness from the profile.</span></div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;  FuncFreqAttr getFuncFreqAttr()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> FreqAttr; }</div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160; </div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;  <span class="comment">// Return the function hash.</span></div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;  <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> <a class="code" href="namespacellvm_1_1coverage_1_1accessors.html#ae52b19d4c976e143b7a6d3d2f7d029a3">getFuncHash</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> FuncInfo.FunctionHash; }</div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160; </div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;  <span class="comment">// Return the profile record for this function;</span></div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;  <a class="code" href="structllvm_1_1InstrProfRecord.html">InstrProfRecord</a> &amp;getProfileRecord() { <span class="keywordflow">return</span> ProfileRecord; }</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160; </div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;  <span class="comment">// Return the auxiliary BB information.</span></div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;  UseBBInfo &amp;getBBInfo(<span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;    <span class="keywordflow">return</span> FuncInfo.getBBInfo(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;  }</div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160; </div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;  <span class="comment">// Return the auxiliary BB information if available.</span></div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;  UseBBInfo *findBBInfo(<span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;    <span class="keywordflow">return</span> FuncInfo.findBBInfo(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;  }</div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160; </div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> &amp;getFunc()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>; }</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160; </div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;  <span class="keywordtype">void</span> dumpInfo(std::string Str = <span class="stringliteral">&quot;&quot;</span>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;    FuncInfo.dumpInfo(Str);</div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;  }</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160; </div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;  <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> getProgramMaxCount()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> ProgramMaxCount; }</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;<span class="keyword">private</span>:</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>;</div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;  <a class="code" href="classllvm_1_1Module.html">Module</a> *<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>;</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;  <a class="code" href="classllvm_1_1BlockFrequencyInfo.html">BlockFrequencyInfo</a> *<a class="code" href="namespacellvm_1_1AMDGPUISD.html#a739d53294bc38cd6b0b23332f9994c0eafbca76f7875e080d97cee761de04d996">BFI</a>;</div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;  <a class="code" href="classllvm_1_1ProfileSummaryInfo.html">ProfileSummaryInfo</a> *PSI;</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160; </div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;  <span class="comment">// This member stores the shared information with class PGOGenFunc.</span></div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;  FuncPGOInstrumentation&lt;PGOUseEdge, UseBBInfo&gt; FuncInfo;</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160; </div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;  <span class="comment">// The maximum count value in the profile. This is only used in PGO use</span></div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;  <span class="comment">// compilation.</span></div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;  <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> ProgramMaxCount;</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160; </div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;  <span class="comment">// Position of counter that remains to be read.</span></div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;  <a class="code" href="classuint32__t.html">uint32_t</a> CountPosition = 0;</div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160; </div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;  <span class="comment">// Total size of the profile count for this function.</span></div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;  <a class="code" href="classuint32__t.html">uint32_t</a> ProfileCountSize = 0;</div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160; </div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;  <span class="comment">// ProfileRecord for this function.</span></div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;  <a class="code" href="structllvm_1_1InstrProfRecord.html">InstrProfRecord</a> ProfileRecord;</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160; </div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;  <span class="comment">// Function hotness info derived from profile.</span></div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;  FuncFreqAttr FreqAttr;</div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160; </div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;  <span class="comment">// Is to use the context sensitive profile.</span></div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;  <span class="keywordtype">bool</span> IsCS;</div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160; </div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;  <span class="comment">// Find the Instrumented BB and set the value. Return false on error.</span></div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;  <span class="keywordtype">bool</span> setInstrumentedCounts(<span class="keyword">const</span> std::vector&lt;uint64_t&gt; &amp;CountFromProfile);</div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160; </div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;  <span class="comment">// Set the edge counter value for the unknown edge -- there should be only</span></div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;  <span class="comment">// one unknown edge.</span></div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;  <span class="keywordtype">void</span> setEdgeCount(DirectEdges &amp;Edges, <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> <a class="code" href="classllvm_1_1Value.html">Value</a>);</div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160; </div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;  <span class="comment">// Return FuncName string;</span></div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;  std::string getFuncName()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> FuncInfo.FuncName; }</div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160; </div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;  <span class="comment">// Set the hot/cold inline hints based on the count values.</span></div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;  <span class="comment">// FIXME: This function should be removed once the functionality in</span></div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;  <span class="comment">// the inliner is implemented.</span></div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;  <span class="keywordtype">void</span> markFunctionAttributes(<a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> EntryCount, <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> MaxCount) {</div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;    <span class="keywordflow">if</span> (PSI-&gt;<a class="code" href="classllvm_1_1ProfileSummaryInfo.html#ac46d4d55dd867977ba88d57a170e31de">isHotCount</a>(EntryCount))</div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;      FreqAttr = FFA_Hot;</div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (PSI-&gt;<a class="code" href="classllvm_1_1ProfileSummaryInfo.html#a5f58eb949321536363605ac9920a95cb">isColdCount</a>(MaxCount))</div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;      FreqAttr = FFA_Cold;</div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;  }</div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;};</div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160; </div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;} <span class="comment">// end anonymous namespace</span></div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160; </div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;<span class="comment">// Visit all the edges and assign the count value for the instrumented</span></div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;<span class="comment">// edges and the BB. Return false on error.</span></div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;<span class="keywordtype">bool</span> PGOUseFunc::setInstrumentedCounts(</div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;    <span class="keyword">const</span> std::vector&lt;uint64_t&gt; &amp;CountFromProfile) {</div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160; </div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;  std::vector&lt;BasicBlock *&gt; InstrumentBBs;</div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;  FuncInfo.getInstrumentBBs(InstrumentBBs);</div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;  <span class="keywordtype">unsigned</span> NumCounters =</div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;      InstrumentBBs.size() + FuncInfo.SIVisitor.getNumOfSelectInsts();</div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;  <span class="comment">// The number of counters here should match the number of counters</span></div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;  <span class="comment">// in profile. Return if they mismatch.</span></div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;  <span class="keywordflow">if</span> (NumCounters != CountFromProfile.size()) {</div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;  }</div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;  <span class="keyword">auto</span> *FuncEntry = &amp;*<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.begin();</div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160; </div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;  <span class="comment">// Set the profile count to the Instrumented BBs.</span></div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;  <a class="code" href="classuint32__t.html">uint32_t</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0;</div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *InstrBB : InstrumentBBs) {</div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;    <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> CountValue = CountFromProfile[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>++];</div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;    UseBBInfo &amp;<a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a> = getBBInfo(InstrBB);</div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;    <span class="comment">// If we reach here, we know that we have some nonzero count</span></div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;    <span class="comment">// values in this function. The entry count should not be 0.</span></div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;    <span class="comment">// Fix it if necessary.</span></div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;    <span class="keywordflow">if</span> (InstrBB == FuncEntry &amp;&amp; CountValue == 0)</div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;      CountValue = 1;</div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;    <a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>.setBBInfoCount(CountValue);</div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;  }</div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;  ProfileCountSize = CountFromProfile.size();</div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;  CountPosition = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160; </div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;  <span class="comment">// Set the edge count and update the count of unknown edges for BBs.</span></div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;  <span class="keyword">auto</span> setEdgeCount = [<span class="keyword">this</span>](PGOUseEdge *<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>, <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> <a class="code" href="namespacellvm_1_1TargetStackID.html#a71392100eb15ba746b1f898986f5d8a5">Value</a>) -&gt; <span class="keywordtype">void</span> {</div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;    <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>-&gt;setEdgeCount(<a class="code" href="classllvm_1_1Value.html">Value</a>);</div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;    this-&gt;getBBInfo(<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>-&gt;SrcBB).UnknownCountOutEdge--;</div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;    this-&gt;getBBInfo(<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>-&gt;DestBB).UnknownCountInEdge--;</div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;  };</div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160; </div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;  <span class="comment">// Set the profile count the Instrumented edges. There are BBs that not in</span></div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;  <span class="comment">// MST but not instrumented. Need to set the edge count value so that we can</span></div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;  <span class="comment">// populate the profile counts later.</span></div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> : FuncInfo.MST.AllEdges) {</div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>-&gt;Removed || <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>-&gt;InMST)</div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *SrcBB = <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>-&gt;SrcBB;</div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;    UseBBInfo &amp;SrcInfo = getBBInfo(SrcBB);</div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160; </div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;    <span class="comment">// If only one out-edge, the edge profile count should be the same as BB</span></div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;    <span class="comment">// profile count.</span></div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;    <span class="keywordflow">if</span> (SrcInfo.CountValid &amp;&amp; SrcInfo.OutEdges.size() == 1)</div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;      setEdgeCount(<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>.get(), SrcInfo.CountValue);</div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;    <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *DestBB = <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>-&gt;DestBB;</div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;      UseBBInfo &amp;DestInfo = getBBInfo(DestBB);</div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;      <span class="comment">// If only one in-edge, the edge profile count should be the same as BB</span></div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;      <span class="comment">// profile count.</span></div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;      <span class="keywordflow">if</span> (DestInfo.CountValid &amp;&amp; DestInfo.InEdges.size() == 1)</div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;        setEdgeCount(<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>.get(), DestInfo.CountValue);</div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;    }</div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>-&gt;CountValid)</div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;    <span class="comment">// E&#39;s count should have been set from profile. If not, this meenas E skips</span></div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;    <span class="comment">// the instrumentation. We set the count to 0.</span></div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;    setEdgeCount(<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>.get(), 0);</div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;  }</div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;}</div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160; </div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;<span class="comment">// Set the count value for the unknown edge. There should be one and only one</span></div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;<span class="comment">// unknown edge in Edges vector.</span></div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;<span class="keywordtype">void</span> PGOUseFunc::setEdgeCount(DirectEdges &amp;Edges, <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> <a class="code" href="classllvm_1_1Value.html">Value</a>) {</div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> : Edges) {</div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>-&gt;CountValid)</div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;    <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>-&gt;setEdgeCount(<a class="code" href="classllvm_1_1Value.html">Value</a>);</div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160; </div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;    getBBInfo(<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>-&gt;SrcBB).UnknownCountOutEdge--;</div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;    getBBInfo(<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>-&gt;DestBB).UnknownCountInEdge--;</div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;  }</div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;  <a class="code" href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Cannot find the unknown count edge&quot;</span>);</div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;}</div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160; </div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;<span class="comment">// Emit function metadata indicating PGO profile mismatch.</span></div>
<div class="line"><a name="l01226"></a><span class="lineno"><a class="line" href="PGOInstrumentation_8cpp.html#a1765b2301f26e0db70d0ba12b3a0e15a"> 1226</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="PGOInstrumentation_8cpp.html#a1765b2301f26e0db70d0ba12b3a0e15a">annotateFunctionWithHashMismatch</a>(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>,</div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;                                             <a class="code" href="classllvm_1_1LLVMContext.html">LLVMContext</a> &amp;ctx) {</div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> MetadataName[] = <span class="stringliteral">&quot;instr_prof_hash_mismatch&quot;</span>;</div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Metadata *, 2&gt;</a> Names;</div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;  <span class="comment">// If this metadata already exists, ignore.</span></div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;  <span class="keyword">auto</span> *Existing = <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getMetadata(LLVMContext::MD_annotation);</div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;  <span class="keywordflow">if</span> (Existing) {</div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;    <a class="code" href="classllvm_1_1MDTuple.html">MDTuple</a> *Tuple = cast&lt;MDTuple&gt;(Existing);</div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a> : Tuple-&gt;<a class="code" href="classllvm_1_1MDNode.html#a2ff0e0e87a2d1056a7b6d7d4b878c4ec">operands</a>()) {</div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;      <span class="keywordflow">if</span> (cast&lt;MDString&gt;(<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>.get())-&gt;getString() ==  MetadataName)</div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;      Names.push_back(<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>.get());</div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;    }</div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;  }</div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160; </div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;  <a class="code" href="classllvm_1_1MDBuilder.html">MDBuilder</a> MDB(ctx);</div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;  Names.push_back(MDB.<a class="code" href="classllvm_1_1MDBuilder.html#a7939b917f71d9664707d8ec51da88418">createString</a>(MetadataName));</div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;  <a class="code" href="classllvm_1_1MDNode.html">MDNode</a> *MD = <a class="code" href="classllvm_1_1MDTuple.html#aa905dc9d35b8732a290b468b0aee549d">MDTuple::get</a>(ctx, Names);</div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;  <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.setMetadata(LLVMContext::MD_annotation, MD);</div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;}</div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160; </div>
<div class="line"><a name="l01247"></a><span class="lineno"><a class="line" href="PGOInstrumentation_8cpp.html#ac596e9f9b5ee82be0da51a79cec7974b"> 1247</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="PGOInstrumentation_8cpp.html#ac596e9f9b5ee82be0da51a79cec7974b">addCallsiteMetadata</a>(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>,</div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;                                std::vector&lt;uint64_t&gt; &amp;InlinedCallStack,</div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;                                <a class="code" href="classllvm_1_1LLVMContext.html">LLVMContext</a> &amp;Ctx) {</div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;  <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.setMetadata(LLVMContext::MD_callsite,</div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;                <a class="code" href="namespacellvm_1_1memprof.html#a1b412464f78908112e627ee7bc54f99d">buildCallstackMetadata</a>(InlinedCallStack, Ctx));</div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;}</div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160; </div>
<div class="line"><a name="l01254"></a><span class="lineno"><a class="line" href="PGOInstrumentation_8cpp.html#a59956a56d1a2c15842922d6c2ba8de18"> 1254</a></span>&#160;<span class="keyword">static</span> <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> <a class="code" href="PGOInstrumentation_8cpp.html#a59956a56d1a2c15842922d6c2ba8de18">computeStackId</a>(<a class="code" href="classllvm_1_1GlobalValue.html#a3af0428ec6e48cb2f05c199b7b9f7e07">GlobalValue::GUID</a> <a class="code" href="classllvm_1_1Function.html">Function</a>, <a class="code" href="classuint32__t.html">uint32_t</a> LineOffset,</div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;                               <a class="code" href="classuint32__t.html">uint32_t</a> Column) {</div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;  <a class="code" href="classllvm_1_1HashBuilderImpl.html">llvm::HashBuilder&lt;llvm::TruncatedBLAKE3&lt;8&gt;</a>, <a class="code" href="namespacellvm_1_1support.html#ae0a227ae1b2ada1da82b40479251862ca30d1099d0325778e7b60550d84c621f0">llvm::support::endianness::little</a>&gt;</div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;      <a class="code" href="namespacellvm.html#a8408fc467bb0d3aad1ae8f371126c88b">HashBuilder</a>;</div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;  <a class="code" href="classllvm_1_1HashBuilderImpl.html">HashBuilder</a>.<a class="code" href="classllvm_1_1HashBuilderImpl.html#a6ec188c432de827580a434b46402e5ec">add</a>(<a class="code" href="classllvm_1_1Function.html">Function</a>, LineOffset, Column);</div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;  <a class="code" href="namespacellvm.html#a676f3f09c45be202a76f85427cfc507c">llvm::BLAKE3Result&lt;8&gt;</a> Hash = <a class="code" href="classllvm_1_1HashBuilderImpl.html">HashBuilder</a>.<a class="code" href="classllvm_1_1HashBuilderBase.html#ae0462a99c2eea825d51e05b963dc9291">final</a>();</div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;  <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> <a class="code" href="namespacellvm_1_1AMDGPU_1_1VGPRIndexMode.html#a9afd95476c40096a5898ba0f06370b3a">Id</a>;</div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;  <a class="code" href="lib_2Target_2ARM_2README_8txt.html#ae2bb081d94f22e64ca6bc4bd58512a93">std::memcpy</a>(&amp;<a class="code" href="namespacellvm_1_1AMDGPU_1_1VGPRIndexMode.html#a9afd95476c40096a5898ba0f06370b3a">Id</a>, Hash.data(), <span class="keyword">sizeof</span>(Hash));</div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1AMDGPU_1_1VGPRIndexMode.html#a9afd95476c40096a5898ba0f06370b3a">Id</a>;</div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;}</div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160; </div>
<div class="line"><a name="l01265"></a><span class="lineno"><a class="line" href="PGOInstrumentation_8cpp.html#ace0feba1b1ff9fe50a6521e0b50aa853"> 1265</a></span>&#160;<span class="keyword">static</span> <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> <a class="code" href="PGOInstrumentation_8cpp.html#a59956a56d1a2c15842922d6c2ba8de18">computeStackId</a>(<span class="keyword">const</span> <a class="code" href="structllvm_1_1memprof_1_1Frame.html">memprof::Frame</a> &amp;<a class="code" href="structllvm_1_1memprof_1_1Frame.html">Frame</a>) {</div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="PGOInstrumentation_8cpp.html#a59956a56d1a2c15842922d6c2ba8de18">computeStackId</a>(<a class="code" href="structllvm_1_1memprof_1_1Frame.html">Frame</a>.<a class="code" href="structllvm_1_1memprof_1_1Frame.html#a243439d38cab3f2e3a6bbcf1529e6fe5">Function</a>, <a class="code" href="structllvm_1_1memprof_1_1Frame.html">Frame</a>.<a class="code" href="structllvm_1_1memprof_1_1Frame.html#ae3b8be97956cbb13486f1c719dcaae83">LineOffset</a>, <a class="code" href="structllvm_1_1memprof_1_1Frame.html">Frame</a>.<a class="code" href="structllvm_1_1memprof_1_1Frame.html#a1fc75c195c13837def54d3e3b0fda3a3">Column</a>);</div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;}</div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160; </div>
<div class="line"><a name="l01269"></a><span class="lineno"><a class="line" href="PGOInstrumentation_8cpp.html#a359ef43d440c9bfc7d5dfd307fef221d"> 1269</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="PGOInstrumentation_8cpp.html#a359ef43d440c9bfc7d5dfd307fef221d">addCallStack</a>(<a class="code" href="classllvm_1_1memprof_1_1CallStackTrie.html">CallStackTrie</a> &amp;AllocTrie,</div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;                         <span class="keyword">const</span> <a class="code" href="structllvm_1_1memprof_1_1AllocationInfo.html">AllocationInfo</a> *<a class="code" href="structllvm_1_1AllocInfo.html">AllocInfo</a>) {</div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;uint64_t&gt;</a> StackIds;</div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> StackFrame : <a class="code" href="structllvm_1_1AllocInfo.html">AllocInfo</a>-&gt;CallStack)</div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;    StackIds.push_back(<a class="code" href="PGOInstrumentation_8cpp.html#a59956a56d1a2c15842922d6c2ba8de18">computeStackId</a>(StackFrame));</div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;  <span class="keyword">auto</span> <a class="code" href="MemoryBuiltins_8cpp.html#abb725d65acc814edc5c025fb8ee6d55b">AllocType</a> = <a class="code" href="namespacellvm_1_1memprof.html#adc745ebd4690ff67eccf4e11b0884764">getAllocType</a>(<a class="code" href="structllvm_1_1AllocInfo.html">AllocInfo</a>-&gt;Info.getMaxAccessCount(),</div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;                                <a class="code" href="structllvm_1_1AllocInfo.html">AllocInfo</a>-&gt;Info.getMinSize(),</div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;                                <a class="code" href="structllvm_1_1AllocInfo.html">AllocInfo</a>-&gt;Info.getMinLifetime());</div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;  AllocTrie.<a class="code" href="classllvm_1_1memprof_1_1CallStackTrie.html#a9a1e0bccf10c1de104a642f9574e7ea0">addCallStack</a>(<a class="code" href="MemoryBuiltins_8cpp.html#abb725d65acc814edc5c025fb8ee6d55b">AllocType</a>, StackIds);</div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;}</div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160; </div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;<span class="comment">// Helper to compare the InlinedCallStack computed from an instruction&#39;s debug</span></div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;<span class="comment">// info to a list of Frames from profile data (either the allocation data or a</span></div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;<span class="comment">// callsite). For callsites, the StartIndex to use in the Frame array may be</span></div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;<span class="comment">// non-zero.</span></div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span></div>
<div class="line"><a name="l01285"></a><span class="lineno"><a class="line" href="PGOInstrumentation_8cpp.html#ad75dfb23e6262d289f5d2d86566dcbdf"> 1285</a></span>&#160;<a class="code" href="PGOInstrumentation_8cpp.html#ad75dfb23e6262d289f5d2d86566dcbdf">stackFrameIncludesInlinedCallStack</a>(<a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;Frame&gt;</a> ProfileCallStack,</div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;                                   <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;uint64_t&gt;</a> InlinedCallStack,</div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;                                   <span class="keywordtype">unsigned</span> StartIndex = 0) {</div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;  <span class="keyword">auto</span> StackFrame = ProfileCallStack.<a class="code" href="classllvm_1_1ArrayRef.html#aab36927882fbfdcbb860d87fd9c30da8">begin</a>() + StartIndex;</div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;  <span class="keyword">auto</span> InlCallStackIter = InlinedCallStack.<a class="code" href="classllvm_1_1ArrayRef.html#aab36927882fbfdcbb860d87fd9c30da8">begin</a>();</div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;  <span class="keywordflow">for</span> (; StackFrame != ProfileCallStack.<a class="code" href="classllvm_1_1ArrayRef.html#a7ca5197533a9c1fb8a2bd30587fcec6b">end</a>() &amp;&amp;</div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;         InlCallStackIter != InlinedCallStack.<a class="code" href="classllvm_1_1ArrayRef.html#a7ca5197533a9c1fb8a2bd30587fcec6b">end</a>();</div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;       ++StackFrame, ++InlCallStackIter) {</div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;    <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> StackId = <a class="code" href="PGOInstrumentation_8cpp.html#a59956a56d1a2c15842922d6c2ba8de18">computeStackId</a>(*StackFrame);</div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;    <span class="keywordflow">if</span> (StackId != *InlCallStackIter)</div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;  }</div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;  <span class="comment">// Return true if we found and matched all stack ids from the call</span></div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;  <span class="comment">// instruction.</span></div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;  <span class="keywordflow">return</span> InlCallStackIter == InlinedCallStack.<a class="code" href="classllvm_1_1ArrayRef.html#a7ca5197533a9c1fb8a2bd30587fcec6b">end</a>();</div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;}</div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160; </div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;<span class="keywordtype">bool</span> PGOUseFunc::readMemprof(<a class="code" href="classllvm_1_1IndexedInstrProfReader.html">IndexedInstrProfReader</a> *PGOReader) {</div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="PGOInstrumentation_8cpp.html#aa334ad4b71c2b831d61c82a055ff776d">MatchMemProf</a>)</div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160; </div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;  <span class="keyword">auto</span> &amp;Ctx = <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>-&gt;getContext();</div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160; </div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;  <span class="keyword">auto</span> FuncGUID = <a class="code" href="classllvm_1_1GlobalValue.html#a71ee7e63264e4997a3340a781d44832e">Function::getGUID</a>(FuncInfo.FuncName);</div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;  <a class="code" href="classllvm_1_1Expected.html">Expected&lt;memprof::MemProfRecord&gt;</a> MemProfResult =</div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;      PGOReader-&gt;<a class="code" href="classllvm_1_1IndexedInstrProfReader.html#a08e38a87cd660517f3a9e1a88a66c875">getMemProfRecord</a>(FuncGUID);</div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Error.html">Error</a> <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = MemProfResult.<a class="code" href="classllvm_1_1Expected.html#a94789df4ebd03dc008e8adebaa66ac1f">takeError</a>()) {</div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;    <a class="code" href="namespacellvm.html#a2aa0f5c36ac6291f5d5f2b4efd9ffe70">handleAllErrors</a>(<a class="code" href="lib_2Target_2ARM_2README_8txt.html#ad3a99906764c35b2694ae90fa57744a5">std::move</a>(<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>), [&amp;](<span class="keyword">const</span> <a class="code" href="classllvm_1_1InstrProfError.html">InstrProfError</a> &amp;IPE) {</div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;      <span class="keyword">auto</span> Err = IPE.<a class="code" href="classllvm_1_1InstrProfError.html#a6e8a1d80ae07c47bbbcc323bf619e2c2">get</a>();</div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;      <span class="keywordtype">bool</span> SkipWarning = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Error in reading profile for Func &quot;</span></div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;                        &lt;&lt; FuncInfo.FuncName &lt;&lt; <span class="stringliteral">&quot;: &quot;</span>);</div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;      <span class="keywordflow">if</span> (Err == <a class="code" href="namespacellvm.html#aa218f6b22c8e271f5f9e92aa1fe51086ab87eee819cec0e1d8b2dfa938d14a77a">instrprof_error::unknown_function</a>) {</div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;        NumOfMemProfMissing++;</div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;        SkipWarning = !<a class="code" href="PGOInstrumentation_8cpp.html#af20b9ff6164a82cda5c7ea2269404a5b">PGOWarnMissing</a>;</div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;        <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;unknown function&quot;</span>);</div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Err == <a class="code" href="namespacellvm.html#aa218f6b22c8e271f5f9e92aa1fe51086acb2fe3792bca163395ce75d581440847">instrprof_error::hash_mismatch</a>) {</div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;        SkipWarning =</div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;            <a class="code" href="namespacellvm.html#a9cec4f52857428ab9e0a8fd571e55d56">NoPGOWarnMismatch</a> ||</div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;            (<a class="code" href="PGOInstrumentation_8cpp.html#ac5c397084baa2b469105c5157b3f4556">NoPGOWarnMismatchComdatWeak</a> &amp;&amp;</div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;             (<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.hasComdat() ||</div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;              <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getLinkage() == <a class="code" href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57caa67f293befacbbf974525116ccf2ff42">GlobalValue::AvailableExternallyLinkage</a>));</div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;        <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;hash mismatch (skip=&quot;</span> &lt;&lt; SkipWarning &lt;&lt; <span class="stringliteral">&quot;)&quot;</span>);</div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;      }</div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160; </div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;      <span class="keywordflow">if</span> (SkipWarning)</div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160; </div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;      std::string <a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#ad7fab8522e49be1b20c4db4fc431bd3c">Msg</a> =</div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;          (IPE.<a class="code" href="classllvm_1_1InstrProfError.html#a96b55da6ec9ae33927f592619ea801ba">message</a>() + <a class="code" href="classllvm_1_1Twine.html">Twine</a>(<span class="stringliteral">&quot; &quot;</span>) + <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getName().str() + <a class="code" href="classllvm_1_1Twine.html">Twine</a>(<span class="stringliteral">&quot; Hash = &quot;</span>) +</div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;           <a class="code" href="namespacellvm.html#a13c1b5a253da5da49ce33d03dc1efc07">std::to_string</a>(FuncInfo.FunctionHash))</div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;              .str();</div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160; </div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;      Ctx.diagnose(</div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;          <a class="code" href="classllvm_1_1DiagnosticInfoPGOProfile.html">DiagnosticInfoPGOProfile</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>-&gt;getName().data(), <a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#ad7fab8522e49be1b20c4db4fc431bd3c">Msg</a>, <a class="code" href="namespacellvm.html#abfcab32516704f11d146c757f402ad5ca1cde8c8828756cdaf2a93260e247ae31">DS_Warning</a>));</div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;    });</div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;  }</div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160; </div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;  <span class="comment">// Build maps of the location hash to all profile data with that leaf location</span></div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;  <span class="comment">// (allocation info and the callsites).</span></div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;  std::map&lt;uint64_t, std::set&lt;const AllocationInfo *&gt;&gt; LocHashToAllocInfo;</div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;  <span class="comment">// For the callsites we need to record the index of the associated frame in</span></div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;  <span class="comment">// the frame array (see comments below where the map entries are added).</span></div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;  std::map&lt;uint64_t, std::set&lt;std::pair&lt;const SmallVector&lt;Frame&gt; *, <span class="keywordtype">unsigned</span>&gt;&gt;&gt;</div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;      LocHashToCallSites;</div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span> MemProfRec = <a class="code" href="lib_2Target_2ARM_2README_8txt.html#ad3a99906764c35b2694ae90fa57744a5">std::move</a>(MemProfResult.<a class="code" href="classllvm_1_1Expected.html#ad26ecbb6920f4ea55f5ed4f64e52342d">get</a>());</div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;AI : MemProfRec.AllocSites) {</div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;    <span class="comment">// Associate the allocation info with the leaf frame. The later matching</span></div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;    <span class="comment">// code will match any inlined call sequences in the IR with a longer prefix</span></div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;    <span class="comment">// of call stack frames.</span></div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;    <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> StackId = <a class="code" href="PGOInstrumentation_8cpp.html#a59956a56d1a2c15842922d6c2ba8de18">computeStackId</a>(AI.CallStack[0]);</div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;    LocHashToAllocInfo[StackId].insert(&amp;AI);</div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;  }</div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;CS : MemProfRec.CallSites) {</div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;    <span class="comment">// Need to record all frames from leaf up to and including this function,</span></div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;    <span class="comment">// as any of these may or may not have been inlined at this point.</span></div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;    <span class="keywordtype">unsigned</span> Idx = 0;</div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;StackFrame : CS) {</div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;      <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> StackId = <a class="code" href="PGOInstrumentation_8cpp.html#a59956a56d1a2c15842922d6c2ba8de18">computeStackId</a>(StackFrame);</div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;      LocHashToCallSites[StackId].insert(std::make_pair(&amp;CS, Idx++));</div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;      <span class="comment">// Once we find this function, we can stop recording.</span></div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;      <span class="keywordflow">if</span> (StackFrame.Function == FuncGUID)</div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;    }</div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Idx &lt;= CS.size() &amp;&amp; CS[Idx - 1].Function == FuncGUID);</div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;  }</div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160; </div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;  <span class="keyword">auto</span> GetOffset = [](<span class="keyword">const</span> <a class="code" href="classllvm_1_1DILocation.html">DILocation</a> *DIL) {</div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;    <span class="keywordflow">return</span> (DIL-&gt;getLine() - DIL-&gt;getScope()-&gt;getSubprogram()-&gt;getLine()) &amp;</div>
<div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;           0xffff;</div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;  };</div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160; </div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;  <span class="comment">// Now walk the instructions, looking up the associated profile data using</span></div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;  <span class="comment">// dbug locations.</span></div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> : <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>) {</div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) {</div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.isDebugOrPseudoInst())</div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;      <span class="comment">// We are only interested in calls (allocation or interior call stack</span></div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;      <span class="comment">// context calls).</span></div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;      <span class="keyword">auto</span> *CI = dyn_cast&lt;CallBase&gt;(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;      <span class="keywordflow">if</span> (!CI)</div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;      <span class="keyword">auto</span> *CalledFunction = CI-&gt;getCalledFunction();</div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;      <span class="keywordflow">if</span> (CalledFunction &amp;&amp; CalledFunction-&gt;isIntrinsic())</div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;      <span class="comment">// List of call stack ids computed from the location hashes on debug</span></div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;      <span class="comment">// locations (leaf to inlined at root).</span></div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;      std::vector&lt;uint64_t&gt; InlinedCallStack;</div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;      <span class="comment">// Was the leaf location found in one of the profile maps?</span></div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;      <span class="keywordtype">bool</span> LeafFound = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;      <span class="comment">// If leaf was found in a map, iterators pointing to its location in both</span></div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;      <span class="comment">// of the maps. It might exist in neither, one, or both (the latter case</span></div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;      <span class="comment">// can happen because we don&#39;t currently have discriminators to</span></div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;      <span class="comment">// distinguish the case when a single line/col maps to both an allocation</span></div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;      <span class="comment">// and another callsite).</span></div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;      std::map&lt;uint64_t, std::set&lt;const AllocationInfo *&gt;&gt;::iterator</div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;          AllocInfoIter;</div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;      std::map&lt;uint64_t, std::set&lt;std::pair&lt;const SmallVector&lt;Frame&gt; *,</div>
<div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;                                            <span class="keywordtype">unsigned</span>&gt;&gt;&gt;::iterator CallSitesIter;</div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1DILocation.html">DILocation</a> *DIL = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getDebugLoc(); DIL != <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;           DIL = DIL-&gt;getInlinedAt()) {</div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;        <span class="comment">// Use C++ linkage name if possible. Need to compile with</span></div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;        <span class="comment">// -fdebug-info-for-profiling to get linkage name.</span></div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;        <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> <a class="code" href="namespacellvm_1_1GraphProgram.html#a0ad4685976f8c4d4a697a53fbe05d10b">Name</a> = DIL-&gt;getScope()-&gt;getSubprogram()-&gt;getLinkageName();</div>
<div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1GraphProgram.html#a0ad4685976f8c4d4a697a53fbe05d10b">Name</a>.empty())</div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;          <a class="code" href="namespacellvm_1_1GraphProgram.html#a0ad4685976f8c4d4a697a53fbe05d10b">Name</a> = DIL-&gt;getScope()-&gt;getSubprogram()-&gt;getName();</div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;        <span class="keyword">auto</span> CalleeGUID = <a class="code" href="classllvm_1_1GlobalValue.html#a71ee7e63264e4997a3340a781d44832e">Function::getGUID</a>(Name);</div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;        <span class="keyword">auto</span> StackId =</div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;            <a class="code" href="PGOInstrumentation_8cpp.html#a59956a56d1a2c15842922d6c2ba8de18">computeStackId</a>(CalleeGUID, GetOffset(DIL), DIL-&gt;getColumn());</div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;        <span class="comment">// LeafFound will only be false on the first iteration, since we either</span></div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;        <span class="comment">// set it true or break out of the loop below.</span></div>
<div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;        <span class="keywordflow">if</span> (!LeafFound) {</div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;          AllocInfoIter = LocHashToAllocInfo.find(StackId);</div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;          CallSitesIter = LocHashToCallSites.find(StackId);</div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;          <span class="comment">// Check if the leaf is in one of the maps. If not, no need to look</span></div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;          <span class="comment">// further at this call.</span></div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;          <span class="keywordflow">if</span> (AllocInfoIter == LocHashToAllocInfo.end() &amp;&amp;</div>
<div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;              CallSitesIter == LocHashToCallSites.end())</div>
<div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;          LeafFound = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;        }</div>
<div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;        InlinedCallStack.push_back(StackId);</div>
<div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;      }</div>
<div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;      <span class="comment">// If leaf not in either of the maps, skip inst.</span></div>
<div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;      <span class="keywordflow">if</span> (!LeafFound)</div>
<div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160; </div>
<div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;      <span class="comment">// First add !memprof metadata from allocation info, if we found the</span></div>
<div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;      <span class="comment">// instruction&#39;s leaf location in that map, and if the rest of the</span></div>
<div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;      <span class="comment">// instruction&#39;s locations match the prefix Frame locations on an</span></div>
<div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;      <span class="comment">// allocation context with the same leaf.</span></div>
<div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;      <span class="keywordflow">if</span> (AllocInfoIter != LocHashToAllocInfo.end()) {</div>
<div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;        <span class="comment">// Only consider allocations via new, to reduce unnecessary metadata,</span></div>
<div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;        <span class="comment">// since those are the only allocations that will be targeted initially.</span></div>
<div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm.html#adda9c09012e0e9cacf0018ab757c9044">isNewLikeFn</a>(CI, &amp;FuncInfo.TLI))</div>
<div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;        <span class="comment">// We may match this instruction&#39;s location list to multiple MIB</span></div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;        <span class="comment">// contexts. Add them to a Trie specialized for trimming the contexts to</span></div>
<div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;        <span class="comment">// the minimal needed to disambiguate contexts with unique behavior.</span></div>
<div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;        <a class="code" href="classllvm_1_1memprof_1_1CallStackTrie.html">CallStackTrie</a> AllocTrie;</div>
<div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;        <span class="keywordflow">for</span> (<span class="keyword">auto</span> *<a class="code" href="structllvm_1_1AllocInfo.html">AllocInfo</a> : AllocInfoIter-&gt;second) {</div>
<div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;          <span class="comment">// Check the full inlined call stack against this one.</span></div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;          <span class="comment">// If we found and thus matched all frames on the call, include</span></div>
<div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;          <span class="comment">// this MIB.</span></div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="PGOInstrumentation_8cpp.html#ad75dfb23e6262d289f5d2d86566dcbdf">stackFrameIncludesInlinedCallStack</a>(<a class="code" href="structllvm_1_1AllocInfo.html">AllocInfo</a>-&gt;CallStack,</div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;                                                 InlinedCallStack))</div>
<div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;            <a class="code" href="PGOInstrumentation_8cpp.html#a359ef43d440c9bfc7d5dfd307fef221d">addCallStack</a>(AllocTrie, <a class="code" href="structllvm_1_1AllocInfo.html">AllocInfo</a>);</div>
<div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;        }</div>
<div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;        <span class="comment">// We might not have matched any to the full inlined call stack.</span></div>
<div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;        <span class="comment">// But if we did, create and attach metadata, or a function attribute if</span></div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;        <span class="comment">// all contexts have identical profiled behavior.</span></div>
<div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;        <span class="keywordflow">if</span> (!AllocTrie.<a class="code" href="classllvm_1_1memprof_1_1CallStackTrie.html#a8764bb32436ceef74c9a8cdfc0da0e28">empty</a>()) {</div>
<div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;          <span class="comment">// MemprofMDAttached will be false if a function attribute was</span></div>
<div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;          <span class="comment">// attached.</span></div>
<div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;          <span class="keywordtype">bool</span> MemprofMDAttached = AllocTrie.<a class="code" href="classllvm_1_1memprof_1_1CallStackTrie.html#ab9f10c4267af88a1bd143a7260d2ac8f">buildAndAttachMIBMetadata</a>(CI);</div>
<div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;          <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(MemprofMDAttached == <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.hasMetadata(LLVMContext::MD_memprof));</div>
<div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;          <span class="keywordflow">if</span> (MemprofMDAttached) {</div>
<div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;            <span class="comment">// Add callsite metadata for the instruction&#39;s location list so that</span></div>
<div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;            <span class="comment">// it simpler later on to identify which part of the MIB contexts</span></div>
<div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;            <span class="comment">// are from this particular instruction (including during inlining,</span></div>
<div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;            <span class="comment">// when the callsite metdata will be updated appropriately).</span></div>
<div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;            <span class="comment">// FIXME: can this be changed to strip out the matching stack</span></div>
<div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;            <span class="comment">// context ids from the MIB contexts and not add any callsite</span></div>
<div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;            <span class="comment">// metadata here to save space?</span></div>
<div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;            <a class="code" href="PGOInstrumentation_8cpp.html#ac596e9f9b5ee82be0da51a79cec7974b">addCallsiteMetadata</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, InlinedCallStack, Ctx);</div>
<div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;          }</div>
<div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;        }</div>
<div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;      }</div>
<div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160; </div>
<div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;      <span class="comment">// Otherwise, add callsite metadata. If we reach here then we found the</span></div>
<div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;      <span class="comment">// instruction&#39;s leaf location in the callsites map and not the allocation</span></div>
<div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;      <span class="comment">// map.</span></div>
<div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(CallSitesIter != LocHashToCallSites.end());</div>
<div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">auto</span> CallStackIdx : CallSitesIter-&gt;second) {</div>
<div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;        <span class="comment">// If we found and thus matched all frames on the call, create and</span></div>
<div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;        <span class="comment">// attach call stack metadata.</span></div>
<div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="PGOInstrumentation_8cpp.html#ad75dfb23e6262d289f5d2d86566dcbdf">stackFrameIncludesInlinedCallStack</a>(</div>
<div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;                *CallStackIdx.first, InlinedCallStack, CallStackIdx.second)) {</div>
<div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;          <a class="code" href="PGOInstrumentation_8cpp.html#ac596e9f9b5ee82be0da51a79cec7974b">addCallsiteMetadata</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, InlinedCallStack, Ctx);</div>
<div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;          <span class="comment">// Only need to find one with a matching call stack and add a single</span></div>
<div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;          <span class="comment">// callsite metadata.</span></div>
<div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;        }</div>
<div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;      }</div>
<div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;    }</div>
<div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;  }</div>
<div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160; </div>
<div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;}</div>
<div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160; </div>
<div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;<span class="comment">// Read the profile from ProfileFileName and assign the value to the</span></div>
<div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;<span class="comment">// instrumented BB and the edges. This function also updates ProgramMaxCount.</span></div>
<div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;<span class="comment">// Return true if the profile are successfully read, and false on errors.</span></div>
<div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;<span class="keywordtype">bool</span> PGOUseFunc::readCounters(<a class="code" href="classllvm_1_1IndexedInstrProfReader.html">IndexedInstrProfReader</a> *PGOReader, <span class="keywordtype">bool</span> &amp;AllZeros,</div>
<div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;                              <a class="code" href="structllvm_1_1InstrProfRecord.html#a69bdbaedb4ae6b233e5eccac5ebc2d77">InstrProfRecord::CountPseudoKind</a> &amp;PseudoKind) {</div>
<div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;  <span class="keyword">auto</span> &amp;Ctx = <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>-&gt;getContext();</div>
<div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;  <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> MismatchedFuncSum = 0;</div>
<div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;  <a class="code" href="classllvm_1_1Expected.html">Expected&lt;InstrProfRecord&gt;</a> <a class="code" href="namespacellvm_1_1ms__demangle.html#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a> = PGOReader-&gt;<a class="code" href="classllvm_1_1IndexedInstrProfReader.html#a3a407188a6ba7b6157bba98b0df6c184">getInstrProfRecord</a>(</div>
<div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;      FuncInfo.FuncName, FuncInfo.FunctionHash, &amp;MismatchedFuncSum);</div>
<div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Error.html">Error</a> <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = <a class="code" href="namespacellvm_1_1ms__demangle.html#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a>.takeError()) {</div>
<div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;    <a class="code" href="namespacellvm.html#a2aa0f5c36ac6291f5d5f2b4efd9ffe70">handleAllErrors</a>(<a class="code" href="lib_2Target_2ARM_2README_8txt.html#ad3a99906764c35b2694ae90fa57744a5">std::move</a>(<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>), [&amp;](<span class="keyword">const</span> <a class="code" href="classllvm_1_1InstrProfError.html">InstrProfError</a> &amp;IPE) {</div>
<div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;      <span class="keyword">auto</span> Err = IPE.<a class="code" href="classllvm_1_1InstrProfError.html#a6e8a1d80ae07c47bbbcc323bf619e2c2">get</a>();</div>
<div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;      <span class="keywordtype">bool</span> SkipWarning = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Error in reading profile for Func &quot;</span></div>
<div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;                        &lt;&lt; FuncInfo.FuncName &lt;&lt; <span class="stringliteral">&quot;: &quot;</span>);</div>
<div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;      <span class="keywordflow">if</span> (Err == <a class="code" href="namespacellvm.html#aa218f6b22c8e271f5f9e92aa1fe51086ab87eee819cec0e1d8b2dfa938d14a77a">instrprof_error::unknown_function</a>) {</div>
<div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;        IsCS ? NumOfCSPGOMissing++ : NumOfPGOMissing++;</div>
<div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;        SkipWarning = !<a class="code" href="PGOInstrumentation_8cpp.html#af20b9ff6164a82cda5c7ea2269404a5b">PGOWarnMissing</a>;</div>
<div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;        <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;unknown function&quot;</span>);</div>
<div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Err == <a class="code" href="namespacellvm.html#aa218f6b22c8e271f5f9e92aa1fe51086acb2fe3792bca163395ce75d581440847">instrprof_error::hash_mismatch</a> ||</div>
<div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;                 Err == <a class="code" href="namespacellvm.html#aa218f6b22c8e271f5f9e92aa1fe51086a7596fdd04dba990373ab2f3da0c7dd3f">instrprof_error::malformed</a>) {</div>
<div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;        IsCS ? NumOfCSPGOMismatch++ : NumOfPGOMismatch++;</div>
<div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;        SkipWarning =</div>
<div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;            <a class="code" href="namespacellvm.html#a9cec4f52857428ab9e0a8fd571e55d56">NoPGOWarnMismatch</a> ||</div>
<div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;            (<a class="code" href="PGOInstrumentation_8cpp.html#ac5c397084baa2b469105c5157b3f4556">NoPGOWarnMismatchComdatWeak</a> &amp;&amp;</div>
<div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;             (<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.hasComdat() || <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getLinkage() == <a class="code" href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57ca8d13a9bcecfac72febceb1103afa048f">GlobalValue::WeakAnyLinkage</a> ||</div>
<div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;              <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getLinkage() == <a class="code" href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57caa67f293befacbbf974525116ccf2ff42">GlobalValue::AvailableExternallyLinkage</a>));</div>
<div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;        <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;hash mismatch (hash= &quot;</span> &lt;&lt; FuncInfo.FunctionHash</div>
<div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;                          &lt;&lt; <span class="stringliteral">&quot; skip=&quot;</span> &lt;&lt; SkipWarning &lt;&lt; <span class="stringliteral">&quot;)&quot;</span>);</div>
<div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;        <span class="comment">// Emit function metadata indicating PGO profile mismatch.</span></div>
<div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;        <a class="code" href="PGOInstrumentation_8cpp.html#a1765b2301f26e0db70d0ba12b3a0e15a">annotateFunctionWithHashMismatch</a>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>-&gt;getContext());</div>
<div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;      }</div>
<div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160; </div>
<div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot; IsCS=&quot;</span> &lt;&lt; IsCS &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;      <span class="keywordflow">if</span> (SkipWarning)</div>
<div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160; </div>
<div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;      std::string <a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#ad7fab8522e49be1b20c4db4fc431bd3c">Msg</a> =</div>
<div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;          IPE.<a class="code" href="classllvm_1_1InstrProfError.html#a96b55da6ec9ae33927f592619ea801ba">message</a>() + std::string(<span class="stringliteral">&quot; &quot;</span>) + <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getName().str() +</div>
<div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;          std::string(<span class="stringliteral">&quot; Hash = &quot;</span>) + <a class="code" href="namespacellvm.html#a13c1b5a253da5da49ce33d03dc1efc07">std::to_string</a>(FuncInfo.FunctionHash) +</div>
<div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;          std::string(<span class="stringliteral">&quot; up to &quot;</span>) + <a class="code" href="namespacellvm.html#a13c1b5a253da5da49ce33d03dc1efc07">std::to_string</a>(MismatchedFuncSum) +</div>
<div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;          std::string(<span class="stringliteral">&quot; count discarded&quot;</span>);</div>
<div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160; </div>
<div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;      Ctx.diagnose(</div>
<div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;          <a class="code" href="classllvm_1_1DiagnosticInfoPGOProfile.html">DiagnosticInfoPGOProfile</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>-&gt;getName().data(), <a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#ad7fab8522e49be1b20c4db4fc431bd3c">Msg</a>, <a class="code" href="namespacellvm.html#abfcab32516704f11d146c757f402ad5ca1cde8c8828756cdaf2a93260e247ae31">DS_Warning</a>));</div>
<div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;    });</div>
<div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;  }</div>
<div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;  ProfileRecord = <a class="code" href="lib_2Target_2ARM_2README_8txt.html#ad3a99906764c35b2694ae90fa57744a5">std::move</a>(<a class="code" href="namespacellvm_1_1ms__demangle.html#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a>.get());</div>
<div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;  PseudoKind = ProfileRecord.<a class="code" href="structllvm_1_1InstrProfRecord.html#a2f346f3e1d5674bdebde0b5017deec68">getCountPseudoKind</a>();</div>
<div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;  <span class="keywordflow">if</span> (PseudoKind != <a class="code" href="structllvm_1_1InstrProfRecord.html#a69bdbaedb4ae6b233e5eccac5ebc2d77ac46600297a1a6f13ed709e33fcc7ae4e">InstrProfRecord::NotPseudo</a>) {</div>
<div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;  }</div>
<div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;  std::vector&lt;uint64_t&gt; &amp;CountFromProfile = ProfileRecord.<a class="code" href="structllvm_1_1InstrProfRecord.html#a1b5488b65ab76c49ab7dd16115c23f56">Counts</a>;</div>
<div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160; </div>
<div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;  IsCS ? NumOfCSPGOFunc++ : NumOfPGOFunc++;</div>
<div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; CountFromProfile.size() &lt;&lt; <span class="stringliteral">&quot; counts\n&quot;</span>);</div>
<div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160; </div>
<div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;  <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> ValueSum = 0;</div>
<div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0, <a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a> = CountFromProfile.size(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> &lt; <a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>++) {</div>
<div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  &quot;</span> &lt;&lt; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> &lt;&lt; <span class="stringliteral">&quot;: &quot;</span> &lt;&lt; CountFromProfile[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>] &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;    ValueSum += CountFromProfile[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>];</div>
<div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;  }</div>
<div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;  AllZeros = (ValueSum == 0);</div>
<div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160; </div>
<div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;SUM =  &quot;</span> &lt;&lt; ValueSum &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160; </div>
<div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;  getBBInfo(<span class="keyword">nullptr</span>).UnknownCountOutEdge = 2;</div>
<div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;  getBBInfo(<span class="keyword">nullptr</span>).UnknownCountInEdge = 2;</div>
<div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160; </div>
<div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;  <span class="keywordflow">if</span> (!setInstrumentedCounts(CountFromProfile)) {</div>
<div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(</div>
<div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;        <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Inconsistent number of counts, skipping this function&quot;</span>);</div>
<div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;    Ctx.diagnose(<a class="code" href="classllvm_1_1DiagnosticInfoPGOProfile.html">DiagnosticInfoPGOProfile</a>(</div>
<div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;        <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>-&gt;getName().data(),</div>
<div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;        <a class="code" href="classllvm_1_1Twine.html">Twine</a>(<span class="stringliteral">&quot;Inconsistent number of counts in &quot;</span>) + <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getName().str()</div>
<div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;        + <a class="code" href="classllvm_1_1Twine.html">Twine</a>(<span class="stringliteral">&quot;: the profile may be stale or there is a function name collision.&quot;</span>),</div>
<div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;        <a class="code" href="namespacellvm.html#abfcab32516704f11d146c757f402ad5ca1cde8c8828756cdaf2a93260e247ae31">DS_Warning</a>));</div>
<div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;  }</div>
<div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;  ProgramMaxCount = PGOReader-&gt;<a class="code" href="classllvm_1_1IndexedInstrProfReader.html#a968f8089b6e0f9e04c41d59695376baa">getMaximumFunctionCount</a>(IsCS);</div>
<div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;}</div>
<div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160; </div>
<div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;<span class="comment">// Populate the counters from instrumented BBs to all BBs.</span></div>
<div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;<span class="comment">// In the end of this operation, all BBs should have a valid count value.</span></div>
<div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;<span class="keywordtype">void</span> PGOUseFunc::populateCounters() {</div>
<div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;  <span class="keywordtype">bool</span> Changes = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;  <span class="keywordtype">unsigned</span> NumPasses = 0;</div>
<div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;  <span class="keywordflow">while</span> (Changes) {</div>
<div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;    NumPasses++;</div>
<div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;    Changes = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160; </div>
<div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;    <span class="comment">// For efficient traversal, it&#39;s better to start from the end as most</span></div>
<div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;    <span class="comment">// of the instrumented edges are at the end.</span></div>
<div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> : <a class="code" href="namespacellvm.html#a6b0ac1fa4f05de76413c5e0ca6334035">reverse</a>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>)) {</div>
<div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;      UseBBInfo *Count = findBBInfo(&amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div>
<div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;      <span class="keywordflow">if</span> (Count == <span class="keyword">nullptr</span>)</div>
<div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;      <span class="keywordflow">if</span> (!Count-&gt;CountValid) {</div>
<div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;        <span class="keywordflow">if</span> (Count-&gt;UnknownCountOutEdge == 0) {</div>
<div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;          Count-&gt;CountValue = <a class="code" href="PGOInstrumentation_8cpp.html#abe1ab937183696b53ab6551e4c30bf29">sumEdgeCount</a>(Count-&gt;OutEdges);</div>
<div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;          Count-&gt;CountValid = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;          Changes = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Count-&gt;UnknownCountInEdge == 0) {</div>
<div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;          Count-&gt;CountValue = <a class="code" href="PGOInstrumentation_8cpp.html#abe1ab937183696b53ab6551e4c30bf29">sumEdgeCount</a>(Count-&gt;InEdges);</div>
<div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;          Count-&gt;CountValid = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;          Changes = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;        }</div>
<div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;      }</div>
<div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;      <span class="keywordflow">if</span> (Count-&gt;CountValid) {</div>
<div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;        <span class="keywordflow">if</span> (Count-&gt;UnknownCountOutEdge == 1) {</div>
<div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;          <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> <a class="code" href="namespacellvm.html#af5ab7a47bc553dfc3ee92daf969d0d7ca96b0141273eabab320119c467cdcaf17">Total</a> = 0;</div>
<div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;          <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> OutSum = <a class="code" href="PGOInstrumentation_8cpp.html#abe1ab937183696b53ab6551e4c30bf29">sumEdgeCount</a>(Count-&gt;OutEdges);</div>
<div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;          <span class="comment">// If the one of the successor block can early terminate (no-return),</span></div>
<div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;          <span class="comment">// we can end up with situation where out edge sum count is larger as</span></div>
<div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;          <span class="comment">// the source BB&#39;s count is collected by a post-dominated block.</span></div>
<div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;          <span class="keywordflow">if</span> (Count-&gt;CountValue &gt; OutSum)</div>
<div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;            <a class="code" href="namespacellvm.html#af5ab7a47bc553dfc3ee92daf969d0d7ca96b0141273eabab320119c467cdcaf17">Total</a> = Count-&gt;CountValue - OutSum;</div>
<div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;          setEdgeCount(Count-&gt;OutEdges, Total);</div>
<div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;          Changes = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;        }</div>
<div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;        <span class="keywordflow">if</span> (Count-&gt;UnknownCountInEdge == 1) {</div>
<div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;          <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> <a class="code" href="namespacellvm.html#af5ab7a47bc553dfc3ee92daf969d0d7ca96b0141273eabab320119c467cdcaf17">Total</a> = 0;</div>
<div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;          <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> InSum = <a class="code" href="PGOInstrumentation_8cpp.html#abe1ab937183696b53ab6551e4c30bf29">sumEdgeCount</a>(Count-&gt;InEdges);</div>
<div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;          <span class="keywordflow">if</span> (Count-&gt;CountValue &gt; InSum)</div>
<div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;            <a class="code" href="namespacellvm.html#af5ab7a47bc553dfc3ee92daf969d0d7ca96b0141273eabab320119c467cdcaf17">Total</a> = Count-&gt;CountValue - InSum;</div>
<div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;          setEdgeCount(Count-&gt;InEdges, Total);</div>
<div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;          Changes = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;        }</div>
<div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;      }</div>
<div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;    }</div>
<div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;  }</div>
<div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160; </div>
<div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Populate counts in &quot;</span> &lt;&lt; NumPasses &lt;&lt; <span class="stringliteral">&quot; passes.\n&quot;</span>);</div>
<div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;  (void) NumPasses;</div>
<div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;  <span class="comment">// Assert every BB has a valid counter.</span></div>
<div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> : <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>) {</div>
<div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;    <span class="keyword">auto</span> BI = findBBInfo(&amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div>
<div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;    <span class="keywordflow">if</span> (BI == <span class="keyword">nullptr</span>)</div>
<div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(BI-&gt;CountValid &amp;&amp; <span class="stringliteral">&quot;BB count is not valid&quot;</span>);</div>
<div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;  }</div>
<div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;  <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> FuncEntryCount = getBBInfo(&amp;*<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.begin()).CountValue;</div>
<div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;  <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> FuncMaxCount = FuncEntryCount;</div>
<div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> : <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>) {</div>
<div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;    <span class="keyword">auto</span> BI = findBBInfo(&amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div>
<div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;    <span class="keywordflow">if</span> (BI == <span class="keyword">nullptr</span>)</div>
<div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;    FuncMaxCount = <a class="code" href="namespacellvm.html#ab4d4bc901fedd8857f647dcc2c0d71de">std::max</a>(FuncMaxCount, BI-&gt;CountValue);</div>
<div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;  }</div>
<div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160; </div>
<div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;  <span class="comment">// Fix the obviously inconsistent entry count.</span></div>
<div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;  <span class="keywordflow">if</span> (FuncMaxCount &gt; 0 &amp;&amp; FuncEntryCount == 0)</div>
<div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;    FuncEntryCount = 1;</div>
<div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;  <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.setEntryCount(<a class="code" href="namespacellvm.html#a23d4c211faf80b8789923262b5b5ae77">ProfileCount</a>(FuncEntryCount, <a class="code" href="classllvm_1_1Function.html#a438d2f246b76817114ade2a005a6bcabac7dbc704eba08842e6acdde9cf6379ba">Function::PCT_Real</a>));</div>
<div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;  markFunctionAttributes(FuncEntryCount, FuncMaxCount);</div>
<div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160; </div>
<div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;  <span class="comment">// Now annotate select instructions</span></div>
<div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;  FuncInfo.SIVisitor.annotateSelects(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, <span class="keyword">this</span>, &amp;CountPosition);</div>
<div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(CountPosition == ProfileCountSize);</div>
<div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160; </div>
<div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(FuncInfo.dumpInfo(<span class="stringliteral">&quot;after reading profile.&quot;</span>));</div>
<div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;}</div>
<div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160; </div>
<div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;<span class="comment">// Assign the scaled count values to the BB with multiple out edges.</span></div>
<div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;<span class="keywordtype">void</span> <a class="code" href="SimplifyCFG_8cpp.html#a4953dfe289f5d9ad59a7964c4c63c2a9">PGOUseFunc::setBranchWeights</a>() {</div>
<div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;  <span class="comment">// Generate MD_prof metadata for every branch instruction.</span></div>
<div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;\nSetting branch weights for func &quot;</span> &lt;&lt; <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getName()</div>
<div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;                    &lt;&lt; <span class="stringliteral">&quot; IsCS=&quot;</span> &lt;&lt; IsCS &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> : <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>) {</div>
<div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *TI = <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>.getTerminator();</div>
<div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;    <span class="keywordflow">if</span> (TI-&gt;<a class="code" href="classllvm_1_1Instruction.html#a3287172f2d13af086e6d66364e8c6de3">getNumSuccessors</a>() &lt; 2)</div>
<div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;    <span class="keywordflow">if</span> (!(isa&lt;BranchInst&gt;(TI) || isa&lt;SwitchInst&gt;(TI) ||</div>
<div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;          isa&lt;IndirectBrInst&gt;(TI) || isa&lt;InvokeInst&gt;(TI) ||</div>
<div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;          isa&lt;CallBrInst&gt;(TI)))</div>
<div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160; </div>
<div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;    <span class="keywordflow">if</span> (getBBInfo(&amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>).CountValue == 0)</div>
<div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160; </div>
<div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;    <span class="comment">// We have a non-zero Branch BB.</span></div>
<div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;    <span class="keyword">const</span> UseBBInfo &amp;BBCountInfo = getBBInfo(&amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div>
<div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;    <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm_1_1Check.html#a067ee17412e800f03802fa9517685732a3450a9712780ac26b071f9da4288a396">Size</a> = BBCountInfo.OutEdges.size();</div>
<div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;uint64_t, 2&gt;</a> EdgeCounts(Size, 0);</div>
<div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;    <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> MaxCount = 0;</div>
<div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#a5a6a05b7d9e9efb3f7b098c20fa0088a">s</a> = 0; <a class="code" href="lib_2Target_2README_8txt.html#a5a6a05b7d9e9efb3f7b098c20fa0088a">s</a> &lt; <a class="code" href="namespacellvm_1_1Check.html#a067ee17412e800f03802fa9517685732a3450a9712780ac26b071f9da4288a396">Size</a>; <a class="code" href="lib_2Target_2README_8txt.html#a5a6a05b7d9e9efb3f7b098c20fa0088a">s</a>++) {</div>
<div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;      <span class="keyword">const</span> PGOUseEdge *<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = BBCountInfo.OutEdges[<a class="code" href="lib_2Target_2README_8txt.html#a5a6a05b7d9e9efb3f7b098c20fa0088a">s</a>];</div>
<div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *SrcBB = <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>-&gt;SrcBB;</div>
<div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *DestBB = <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>-&gt;DestBB;</div>
<div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;      <span class="keywordflow">if</span> (DestBB == <span class="keyword">nullptr</span>)</div>
<div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;      <span class="keywordtype">unsigned</span> SuccNum = <a class="code" href="namespacellvm.html#a1b38a63d3be7413f335be5f2d81bb234">GetSuccessorNumber</a>(SrcBB, DestBB);</div>
<div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;      <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> EdgeCount = <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>-&gt;CountValue;</div>
<div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;      <span class="keywordflow">if</span> (EdgeCount &gt; MaxCount)</div>
<div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;        MaxCount = EdgeCount;</div>
<div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;      EdgeCounts[SuccNum] = EdgeCount;</div>
<div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;    }</div>
<div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160; </div>
<div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;    <span class="keywordflow">if</span> (MaxCount)</div>
<div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;      <a class="code" href="namespacellvm.html#ad272ce4631595e235e560baf59dc1ffd">setProfMetadata</a>(M, TI, EdgeCounts, MaxCount);</div>
<div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;    <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;      <span class="comment">// A zero MaxCount can come about when we have a BB with a positive</span></div>
<div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;      <span class="comment">// count, and whose successor blocks all have 0 count. This can happen</span></div>
<div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;      <span class="comment">// when there is no exit block and the code exits via a noreturn function.</span></div>
<div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;      <span class="keyword">auto</span> &amp;Ctx = <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>-&gt;getContext();</div>
<div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;      Ctx.diagnose(<a class="code" href="classllvm_1_1DiagnosticInfoPGOProfile.html">DiagnosticInfoPGOProfile</a>(</div>
<div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;        <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>-&gt;getName().data(),</div>
<div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;        <a class="code" href="classllvm_1_1Twine.html">Twine</a>(<span class="stringliteral">&quot;Profile in &quot;</span>) + <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getName().str() +</div>
<div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;            <a class="code" href="classllvm_1_1Twine.html">Twine</a>(<span class="stringliteral">&quot; partially ignored&quot;</span>) +</div>
<div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;            <a class="code" href="classllvm_1_1Twine.html">Twine</a>(<span class="stringliteral">&quot;, possibly due to the lack of a return path.&quot;</span>),</div>
<div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;        <a class="code" href="namespacellvm.html#abfcab32516704f11d146c757f402ad5ca1cde8c8828756cdaf2a93260e247ae31">DS_Warning</a>));</div>
<div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;    }</div>
<div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;  }</div>
<div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;}</div>
<div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160; </div>
<div class="line"><a name="l01717"></a><span class="lineno"><a class="line" href="PGOInstrumentation_8cpp.html#add6e469a1c4babfb781d466def11319d"> 1717</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="PGOInstrumentation_8cpp.html#add6e469a1c4babfb781d466def11319d">isIndirectBrTarget</a>(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) {</div>
<div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Pred : <a class="code" href="namespacellvm.html#acb22fb04083152eee862457e42e8dc31">predecessors</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>)) {</div>
<div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;    <span class="keywordflow">if</span> (isa&lt;IndirectBrInst&gt;(Pred-&gt;getTerminator()))</div>
<div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;  }</div>
<div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;}</div>
<div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160; </div>
<div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;<span class="keywordtype">void</span> PGOUseFunc::annotateIrrLoopHeaderWeights() {</div>
<div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;\nAnnotating irreducible loop header weights.\n&quot;</span>);</div>
<div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;  <span class="comment">// Find irr loop headers</span></div>
<div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> : <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>) {</div>
<div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;    <span class="comment">// As a heuristic also annotate indrectbr targets as they have a high chance</span></div>
<div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;    <span class="comment">// to become an irreducible loop header after the indirectbr tail</span></div>
<div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;    <span class="comment">// duplication.</span></div>
<div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1AMDGPUISD.html#a739d53294bc38cd6b0b23332f9994c0eafbca76f7875e080d97cee761de04d996">BFI</a>-&gt;isIrrLoopHeader(&amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) || <a class="code" href="PGOInstrumentation_8cpp.html#add6e469a1c4babfb781d466def11319d">isIndirectBrTarget</a>(&amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>)) {</div>
<div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;      <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *TI = <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>.getTerminator();</div>
<div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;      <span class="keyword">const</span> UseBBInfo &amp;BBCountInfo = getBBInfo(&amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div>
<div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;      <a class="code" href="namespacellvm.html#a08c7dd6c9db484e7609dc95fca6cc55e">setIrrLoopHeaderMetadata</a>(M, TI, BBCountInfo.CountValue);</div>
<div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;    }</div>
<div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;  }</div>
<div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;}</div>
<div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160; </div>
<div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;<span class="keywordtype">void</span> SelectInstVisitor::instrumentOneSelectInst(<a class="code" href="classllvm_1_1SelectInst.html">SelectInst</a> &amp;<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>) {</div>
<div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="PGOInstrumentation_8cpp.html#a63fd72ea6df7c5a2aae8875fc5acb1ca">PGOFunctionEntryCoverage</a>)</div>
<div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;  <a class="code" href="classllvm_1_1Module.html">Module</a> *<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a> = <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getParent();</div>
<div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;  <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>(&amp;<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>);</div>
<div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *Int64Ty = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getInt64Ty();</div>
<div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *I8PtrTy = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getInt8PtrTy();</div>
<div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;  <span class="keyword">auto</span> *Step = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateZExt(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>.getCondition(), Int64Ty);</div>
<div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCall(</div>
<div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;      <a class="code" href="namespacellvm_1_1Intrinsic.html#aefa39f6b622360ce4e947feb9f671b73">Intrinsic::getDeclaration</a>(M, Intrinsic::instrprof_increment_step),</div>
<div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;      {<a class="code" href="classllvm_1_1ConstantExpr.html#ae79d05dd3d0b05e080e08f8c5c33f880">ConstantExpr::getBitCast</a>(FuncNameVar, I8PtrTy),</div>
<div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;       <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getInt64(FuncHash), <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getInt32(TotalNumCtrs),</div>
<div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;       <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getInt32(*CurCtrIdx), Step});</div>
<div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;  ++(*CurCtrIdx);</div>
<div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;}</div>
<div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160; </div>
<div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;<span class="keywordtype">void</span> SelectInstVisitor::annotateOneSelectInst(<a class="code" href="classllvm_1_1SelectInst.html">SelectInst</a> &amp;<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>) {</div>
<div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;  std::vector&lt;uint64_t&gt; &amp;CountFromProfile = UseFunc-&gt;getProfileRecord().Counts;</div>
<div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(*CurCtrIdx &lt; CountFromProfile.size() &amp;&amp;</div>
<div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;         <span class="stringliteral">&quot;Out of bound access of counters&quot;</span>);</div>
<div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;  <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> SCounts[2];</div>
<div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;  SCounts[0] = CountFromProfile[*CurCtrIdx]; <span class="comment">// True count</span></div>
<div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;  ++(*CurCtrIdx);</div>
<div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;  <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> TotalCount = 0;</div>
<div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;  <span class="keyword">auto</span> BI = UseFunc-&gt;findBBInfo(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>.getParent());</div>
<div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;  <span class="keywordflow">if</span> (BI != <span class="keyword">nullptr</span>)</div>
<div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;    TotalCount = BI-&gt;CountValue;</div>
<div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;  <span class="comment">// False Count</span></div>
<div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;  SCounts[1] = (TotalCount &gt; SCounts[0] ? TotalCount - SCounts[0] : 0);</div>
<div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;  <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> MaxCount = <a class="code" href="namespacellvm.html#ab4d4bc901fedd8857f647dcc2c0d71de">std::max</a>(SCounts[0], SCounts[1]);</div>
<div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;  <span class="keywordflow">if</span> (MaxCount)</div>
<div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;    <a class="code" href="namespacellvm.html#ad272ce4631595e235e560baf59dc1ffd">setProfMetadata</a>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getParent(), &amp;<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>, SCounts, MaxCount);</div>
<div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;}</div>
<div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160; </div>
<div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;<span class="keywordtype">void</span> SelectInstVisitor::visitSelectInst(<a class="code" href="classllvm_1_1SelectInst.html">SelectInst</a> &amp;<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>) {</div>
<div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="PGOInstrumentation_8cpp.html#aa9fc7fa9e1e94557d9201ab1b5cd017e">PGOInstrSelect</a>)</div>
<div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;  <span class="comment">// FIXME: do not handle this yet.</span></div>
<div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>.getCondition()-&gt;getType()-&gt;isVectorTy())</div>
<div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160; </div>
<div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;  <span class="keywordflow">switch</span> (<a class="code" href="SIWholeQuadMode_8cpp.html#a0c198437833c48138f49e3589bd08773">Mode</a>) {</div>
<div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;  <span class="keywordflow">case</span> VM_counting:</div>
<div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;    NSIs++;</div>
<div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;  <span class="keywordflow">case</span> VM_instrument:</div>
<div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;    instrumentOneSelectInst(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>);</div>
<div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;  <span class="keywordflow">case</span> VM_annotate:</div>
<div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;    annotateOneSelectInst(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>);</div>
<div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;  }</div>
<div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160; </div>
<div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;  <a class="code" href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Unknown visiting mode&quot;</span>);</div>
<div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;}</div>
<div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160; </div>
<div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;<span class="comment">// Traverse all valuesites and annotate the instructions for all value kind.</span></div>
<div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;<span class="keywordtype">void</span> PGOUseFunc::annotateValueSites() {</div>
<div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="PGOInstrumentation_8cpp.html#ada74fa2ec8933c6674ddded08aeef167">DisableValueProfiling</a>)</div>
<div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160; </div>
<div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;  <span class="comment">// Create the PGOFuncName meta data.</span></div>
<div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;  <a class="code" href="namespacellvm.html#a1986e27171aa79b40a0a4ae837dab71c">createPGOFuncNameMetadata</a>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, FuncInfo.FuncName);</div>
<div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160; </div>
<div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classuint32__t.html">uint32_t</a> Kind = IPVK_First; <a class="code" href="namespacellvm_1_1lltok.html#af353621f14cb4b4b3af5ffaff84076b1">Kind</a> &lt;= IPVK_Last; ++<a class="code" href="namespacellvm_1_1lltok.html#af353621f14cb4b4b3af5ffaff84076b1">Kind</a>)</div>
<div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;    annotateValueSites(Kind);</div>
<div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;}</div>
<div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160; </div>
<div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;<span class="comment">// Annotate the instructions for a specific value kind.</span></div>
<div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;<span class="keywordtype">void</span> PGOUseFunc::annotateValueSites(<a class="code" href="classuint32__t.html">uint32_t</a> Kind) {</div>
<div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Kind &lt;= IPVK_Last);</div>
<div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;  <span class="keywordtype">unsigned</span> ValueSiteIndex = 0;</div>
<div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;  <span class="keyword">auto</span> &amp;ValueSites = FuncInfo.ValueSites[<a class="code" href="namespacellvm_1_1lltok.html#af353621f14cb4b4b3af5ffaff84076b1">Kind</a>];</div>
<div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;  <span class="keywordtype">unsigned</span> NumValueSites = ProfileRecord.<a class="code" href="structllvm_1_1InstrProfRecord.html#a3dd06bc69eacd72f8824db216b46adf6">getNumValueSites</a>(Kind);</div>
<div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;  <span class="keywordflow">if</span> (NumValueSites != ValueSites.size()) {</div>
<div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;    <span class="keyword">auto</span> &amp;Ctx = <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>-&gt;getContext();</div>
<div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;    Ctx.diagnose(<a class="code" href="classllvm_1_1DiagnosticInfoPGOProfile.html">DiagnosticInfoPGOProfile</a>(</div>
<div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;        <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>-&gt;getName().data(),</div>
<div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;        <a class="code" href="classllvm_1_1Twine.html">Twine</a>(<span class="stringliteral">&quot;Inconsistent number of value sites for &quot;</span>) +</div>
<div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;            <a class="code" href="classllvm_1_1Twine.html">Twine</a>(<a class="code" href="PGOInstrumentation_8cpp.html#afcf97c296d164d441069b79ca44b206c">ValueProfKindDescr</a>[Kind]) +</div>
<div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;            <a class="code" href="classllvm_1_1Twine.html">Twine</a>(<span class="stringliteral">&quot; profiling in \&quot;&quot;</span>) + <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getName().str() +</div>
<div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;            <a class="code" href="classllvm_1_1Twine.html">Twine</a>(<span class="stringliteral">&quot;\&quot;, possibly due to the use of a stale profile.&quot;</span>),</div>
<div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;        <a class="code" href="namespacellvm.html#abfcab32516704f11d146c757f402ad5ca1cde8c8828756cdaf2a93260e247ae31">DS_Warning</a>));</div>
<div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;  }</div>
<div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160; </div>
<div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="structllvm_1_1ValueProfileCollector_1_1CandidateInfo.html">VPCandidateInfo</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : ValueSites) {</div>
<div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Read one value site profile (kind = &quot;</span> &lt;&lt; Kind</div>
<div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;                      &lt;&lt; <span class="stringliteral">&quot;): Index = &quot;</span> &lt;&lt; ValueSiteIndex &lt;&lt; <span class="stringliteral">&quot; out of &quot;</span></div>
<div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;                      &lt;&lt; NumValueSites &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;    <a class="code" href="namespacellvm.html#a68ee9c22fcc77e40d4ae44e5b37c7998">annotateValueSite</a>(*M, *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.AnnotatedInst, ProfileRecord,</div>
<div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;                      <span class="keyword">static_cast&lt;</span><a class="code" href="namespacellvm.html#aa3a544a0d0dd4971f6c79d9869a1ffee">InstrProfValueKind</a><span class="keyword">&gt;</span>(Kind), ValueSiteIndex,</div>
<div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;                      Kind == IPVK_MemOPSize ? <a class="code" href="PGOInstrumentation_8cpp.html#a5b7a21689e69a48710a11d5261cf057e">MaxNumMemOPAnnotations</a></div>
<div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;                                             : <a class="code" href="PGOInstrumentation_8cpp.html#ae4da63e96545cd00e5e9fa8845586c57">MaxNumAnnotations</a>);</div>
<div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;    ValueSiteIndex++;</div>
<div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;  }</div>
<div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;}</div>
<div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160; </div>
<div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;<span class="comment">// Collect the set of members for each Comdat in module M and store</span></div>
<div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;<span class="comment">// in ComdatMembers.</span></div>
<div class="line"><a name="l01840"></a><span class="lineno"><a class="line" href="PGOInstrumentation_8cpp.html#a33c507f28e0aa55010dd25f57a61f826"> 1840</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="PGOInstrumentation_8cpp.html#a33c507f28e0aa55010dd25f57a61f826">collectComdatMembers</a>(</div>
<div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;    <a class="code" href="classllvm_1_1Module.html">Module</a> &amp;M,</div>
<div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;    std::unordered_multimap&lt;Comdat *, GlobalValue *&gt; &amp;ComdatMembers) {</div>
<div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="PGOInstrumentation_8cpp.html#af695245be16902715ac76f9f780edd4c">DoComdatRenaming</a>)</div>
<div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> : <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>)</div>
<div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Comdat.html">Comdat</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getComdat())</div>
<div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;      ComdatMembers.insert(std::make_pair(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>));</div>
<div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a> &amp;GV : <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.globals())</div>
<div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Comdat.html">Comdat</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = GV.getComdat())</div>
<div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;      ComdatMembers.insert(std::make_pair(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, &amp;GV));</div>
<div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1GlobalAlias.html">GlobalAlias</a> &amp;GA : <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.aliases())</div>
<div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Comdat.html">Comdat</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = GA.getComdat())</div>
<div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;      ComdatMembers.insert(std::make_pair(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, &amp;GA));</div>
<div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;}</div>
<div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160; </div>
<div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;<span class="comment">// Don&#39;t perform PGO instrumeatnion / profile-use.</span></div>
<div class="line"><a name="l01857"></a><span class="lineno"><a class="line" href="PGOInstrumentation_8cpp.html#a2b31b32a49f601ea320bdeefc3209ff8"> 1857</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="PGOInstrumentation_8cpp.html#a2b31b32a49f601ea320bdeefc3209ff8">skipPGO</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>) {</div>
<div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.isDeclaration())</div>
<div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.hasFnAttribute(llvm::Attribute::NoProfile))</div>
<div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.hasFnAttribute(llvm::Attribute::SkipProfile))</div>
<div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getInstructionCount() &lt; <a class="code" href="PGOInstrumentation_8cpp.html#a7c5ef045038b4e138277f9325797286f">PGOFunctionSizeThreshold</a>)</div>
<div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160; </div>
<div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;  <span class="comment">// If there are too many critical edges, PGO might cause</span></div>
<div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;  <span class="comment">// compiler time problem. Skip PGO if the number of</span></div>
<div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;  <span class="comment">// critical edges execeed the threshold.</span></div>
<div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;  <span class="keywordtype">unsigned</span> NumCriticalEdges = 0;</div>
<div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> : <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>) {</div>
<div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *TI = <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>.getTerminator();</div>
<div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0, <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = TI-&gt;<a class="code" href="classllvm_1_1Instruction.html#a3287172f2d13af086e6d66364e8c6de3">getNumSuccessors</a>(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#ababcf5a1223c36cb7c547c5b34c6416c">isCriticalEdge</a>(TI, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;        NumCriticalEdges++;</div>
<div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;    }</div>
<div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;  }</div>
<div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;  <span class="keywordflow">if</span> (NumCriticalEdges &gt; <a class="code" href="PGOInstrumentation_8cpp.html#aa3b6431905d5644fe983172f6cfa7a35">PGOFunctionCriticalEdgeThreshold</a>) {</div>
<div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;In func &quot;</span> &lt;&lt; <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getName()</div>
<div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;                      &lt;&lt; <span class="stringliteral">&quot;, NumCriticalEdges=&quot;</span> &lt;&lt; NumCriticalEdges</div>
<div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;                      &lt;&lt; <span class="stringliteral">&quot; exceed the threshold. Skip PGO.\n&quot;</span>);</div>
<div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;  }</div>
<div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160; </div>
<div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;}</div>
<div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160; </div>
<div class="line"><a name="l01888"></a><span class="lineno"><a class="line" href="PGOInstrumentation_8cpp.html#a5eb681b475b437938f19f12f032892a8"> 1888</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="PGOInstrumentation_8cpp.html#a5eb681b475b437938f19f12f032892a8">InstrumentAllFunctions</a>(</div>
<div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;    <a class="code" href="classllvm_1_1Module.html">Module</a> &amp;M, <a class="code" href="classllvm_1_1function__ref.html">function_ref</a>&lt;<a class="code" href="classllvm_1_1TargetLibraryInfo.html">TargetLibraryInfo</a> &amp;(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;)&gt; LookupTLI,</div>
<div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;    <a class="code" href="classllvm_1_1function__ref.html">function_ref</a>&lt;<a class="code" href="classllvm_1_1BranchProbabilityInfo.html">BranchProbabilityInfo</a> *(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;)&gt; LookupBPI,</div>
<div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;    <a class="code" href="classllvm_1_1function__ref.html">function_ref</a>&lt;<a class="code" href="classllvm_1_1BlockFrequencyInfo.html">BlockFrequencyInfo</a> *(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;)&gt; LookupBFI, <span class="keywordtype">bool</span> IsCS) {</div>
<div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;  <span class="comment">// For the context-sensitve instrumentation, we should have a separated pass</span></div>
<div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;  <span class="comment">// (before LTO/ThinLTO linking) to create these variables.</span></div>
<div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;  <span class="keywordflow">if</span> (!IsCS)</div>
<div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;    <a class="code" href="PGOInstrumentation_8cpp.html#a38fcde3c0125e4f07a85159aee2db323">createIRLevelProfileFlagVar</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>, <span class="comment">/*IsCS=*/</span><span class="keyword">false</span>);</div>
<div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;  std::unordered_multimap&lt;Comdat *, GlobalValue *&gt; ComdatMembers;</div>
<div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;  <a class="code" href="PGOInstrumentation_8cpp.html#a33c507f28e0aa55010dd25f57a61f826">collectComdatMembers</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>, ComdatMembers);</div>
<div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160; </div>
<div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> : <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>) {</div>
<div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="PGOInstrumentation_8cpp.html#a2b31b32a49f601ea320bdeefc3209ff8">skipPGO</a>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>))</div>
<div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;    <span class="keyword">auto</span> &amp;TLI = LookupTLI(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;    <span class="keyword">auto</span> *BPI = LookupBPI(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;    <span class="keyword">auto</span> *<a class="code" href="namespacellvm_1_1AMDGPUISD.html#a739d53294bc38cd6b0b23332f9994c0eafbca76f7875e080d97cee761de04d996">BFI</a> = LookupBFI(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;    <a class="code" href="PGOInstrumentation_8cpp.html#a4b1bfa0c2ee8a4cef8a76537a7bb71e0">instrumentOneFunc</a>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, &amp;<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>, TLI, BPI, <a class="code" href="namespacellvm_1_1AMDGPUISD.html#a739d53294bc38cd6b0b23332f9994c0eafbca76f7875e080d97cee761de04d996">BFI</a>, ComdatMembers, IsCS);</div>
<div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;  }</div>
<div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;}</div>
<div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160; </div>
<div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;<a class="code" href="classllvm_1_1PreservedAnalyses.html">PreservedAnalyses</a></div>
<div class="line"><a name="l01911"></a><span class="lineno"><a class="line" href="classllvm_1_1PGOInstrumentationGenCreateVar.html#ae2b0af204b2b9dedfb6924940ddbe1c8"> 1911</a></span>&#160;<a class="code" href="classllvm_1_1PGOInstrumentationGenCreateVar.html#ae2b0af204b2b9dedfb6924940ddbe1c8">PGOInstrumentationGenCreateVar::run</a>(<a class="code" href="classllvm_1_1Module.html">Module</a> &amp;M, <a class="code" href="classllvm_1_1AnalysisManager.html">ModuleAnalysisManager</a> &amp;AM) {</div>
<div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;  <a class="code" href="namespacellvm.html#abd35d43ef05edd633413fa4cfa802c0e">createProfileFileNameVar</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>, CSInstrName);</div>
<div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;  <span class="comment">// The variable in a comdat may be discarded by LTO. Ensure the declaration</span></div>
<div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;  <span class="comment">// will be retained.</span></div>
<div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;  <a class="code" href="namespacellvm.html#aab730f72aa213d5ecc7d1101efda8811">appendToCompilerUsed</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>, <a class="code" href="PGOInstrumentation_8cpp.html#a38fcde3c0125e4f07a85159aee2db323">createIRLevelProfileFlagVar</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>, <span class="comment">/*IsCS=*/</span><span class="keyword">true</span>));</div>
<div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1PreservedAnalyses.html#a1258a1ff55557c27684010ebd7283712">PreservedAnalyses::all</a>();</div>
<div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;}</div>
<div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160; </div>
<div class="line"><a name="l01919"></a><span class="lineno"><a class="line" href="classllvm_1_1PGOInstrumentationGen.html#a50eda2327f190cc954cc195a5a615c99"> 1919</a></span>&#160;<a class="code" href="classllvm_1_1PreservedAnalyses.html">PreservedAnalyses</a> <a class="code" href="classllvm_1_1PGOInstrumentationGen.html#a50eda2327f190cc954cc195a5a615c99">PGOInstrumentationGen::run</a>(<a class="code" href="classllvm_1_1Module.html">Module</a> &amp;M,</div>
<div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;                                             <a class="code" href="classllvm_1_1AnalysisManager.html">ModuleAnalysisManager</a> &amp;AM) {</div>
<div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;  <span class="keyword">auto</span> &amp;<a class="code" href="PassBuilderBindings_8cpp.html#a83c7e5ca51099e4efa895791a02fb0ed">FAM</a> = AM.<a class="code" href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">getResult</a>&lt;<a class="code" href="classllvm_1_1InnerAnalysisManagerProxy.html">FunctionAnalysisManagerModuleProxy</a>&gt;(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>).getManager();</div>
<div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;  <span class="keyword">auto</span> LookupTLI = [&amp;<a class="code" href="PassBuilderBindings_8cpp.html#a83c7e5ca51099e4efa895791a02fb0ed">FAM</a>](<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>) -&gt; <a class="code" href="classllvm_1_1TargetLibraryInfo.html">TargetLibraryInfo</a> &amp; {</div>
<div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="PassBuilderBindings_8cpp.html#a83c7e5ca51099e4efa895791a02fb0ed">FAM</a>.<a class="code" href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">getResult</a>&lt;<a class="code" href="classllvm_1_1TargetLibraryAnalysis.html">TargetLibraryAnalysis</a>&gt;(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;  };</div>
<div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;  <span class="keyword">auto</span> LookupBPI = [&amp;<a class="code" href="PassBuilderBindings_8cpp.html#a83c7e5ca51099e4efa895791a02fb0ed">FAM</a>](<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>) {</div>
<div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;    <span class="keywordflow">return</span> &amp;<a class="code" href="PassBuilderBindings_8cpp.html#a83c7e5ca51099e4efa895791a02fb0ed">FAM</a>.<a class="code" href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">getResult</a>&lt;<a class="code" href="classllvm_1_1BranchProbabilityAnalysis.html">BranchProbabilityAnalysis</a>&gt;(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;  };</div>
<div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;  <span class="keyword">auto</span> LookupBFI = [&amp;<a class="code" href="PassBuilderBindings_8cpp.html#a83c7e5ca51099e4efa895791a02fb0ed">FAM</a>](<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>) {</div>
<div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;    <span class="keywordflow">return</span> &amp;<a class="code" href="PassBuilderBindings_8cpp.html#a83c7e5ca51099e4efa895791a02fb0ed">FAM</a>.<a class="code" href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">getResult</a>&lt;<a class="code" href="classllvm_1_1BlockFrequencyAnalysis.html">BlockFrequencyAnalysis</a>&gt;(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;  };</div>
<div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160; </div>
<div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="PGOInstrumentation_8cpp.html#a5eb681b475b437938f19f12f032892a8">InstrumentAllFunctions</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>, LookupTLI, LookupBPI, LookupBFI, IsCS))</div>
<div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1PreservedAnalyses.html#a1258a1ff55557c27684010ebd7283712">PreservedAnalyses::all</a>();</div>
<div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160; </div>
<div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1PreservedAnalyses.html#a03797a73044a81cbc6a3409d6c72ee8f">PreservedAnalyses::none</a>();</div>
<div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;}</div>
<div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160; </div>
<div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;<span class="comment">// Using the ratio b/w sums of profile count values and BFI count values to</span></div>
<div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;<span class="comment">// adjust the func entry count.</span></div>
<div class="line"><a name="l01940"></a><span class="lineno"><a class="line" href="PGOInstrumentation_8cpp.html#a13254d395258a157ea8ce4a0e1a96050"> 1940</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="PGOInstrumentation_8cpp.html#a13254d395258a157ea8ce4a0e1a96050">fixFuncEntryCount</a>(PGOUseFunc &amp;Func, <a class="code" href="classllvm_1_1LoopInfo.html">LoopInfo</a> &amp;LI,</div>
<div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;                              <a class="code" href="classllvm_1_1BranchProbabilityInfo.html">BranchProbabilityInfo</a> &amp;NBPI) {</div>
<div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> = Func.getFunc();</div>
<div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;  <a class="code" href="classllvm_1_1BlockFrequencyInfo.html">BlockFrequencyInfo</a> NBFI(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, NBPI, LI);</div>
<div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;  <span class="keyword">auto</span> BFIEntryCount = <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getEntryCount();</div>
<div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(BFIEntryCount &amp;&amp; (BFIEntryCount-&gt;getCount() &gt; 0) &amp;&amp;</div>
<div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;         <span class="stringliteral">&quot;Invalid BFI Entrycount&quot;</span>);</div>
<div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;  <span class="keyword">auto</span> SumCount = <a class="code" href="classllvm_1_1APFloat.html#af591f8d18d0d9773192a0ffcca41796e">APFloat::getZero</a>(<a class="code" href="structllvm_1_1APFloatBase.html#a6ba7c3d54a5a714f7a27861ee114cce3">APFloat::IEEEdouble</a>());</div>
<div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;  <span class="keyword">auto</span> SumBFICount = <a class="code" href="classllvm_1_1APFloat.html#af591f8d18d0d9773192a0ffcca41796e">APFloat::getZero</a>(<a class="code" href="structllvm_1_1APFloatBase.html#a6ba7c3d54a5a714f7a27861ee114cce3">APFloat::IEEEdouble</a>());</div>
<div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;BBI : <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>) {</div>
<div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;    <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> CountValue = 0;</div>
<div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;    <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> BFICountValue = 0;</div>
<div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;    <span class="keywordflow">if</span> (!Func.findBBInfo(&amp;BBI))</div>
<div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;    <span class="keyword">auto</span> BFICount = NBFI.<a class="code" href="classllvm_1_1BlockFrequencyInfo.html#a45e6b2c5c4e59ddc05ad9a2685706e75">getBlockProfileCount</a>(&amp;BBI);</div>
<div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;    CountValue = Func.getBBInfo(&amp;BBI).CountValue;</div>
<div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;    BFICountValue = *BFICount;</div>
<div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;    SumCount.add(<a class="code" href="namespacellvm_1_1lltok.html#af353621f14cb4b4b3af5ffaff84076b1a56697632782c9ab774d6c132a955674a">APFloat</a>(CountValue * 1.0), <a class="code" href="structllvm_1_1APFloatBase.html#a22ed74f1ed33c4d33f524a650ea536a6">APFloat::rmNearestTiesToEven</a>);</div>
<div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;    SumBFICount.add(<a class="code" href="namespacellvm_1_1lltok.html#af353621f14cb4b4b3af5ffaff84076b1a56697632782c9ab774d6c132a955674a">APFloat</a>(BFICountValue * 1.0), <a class="code" href="structllvm_1_1APFloatBase.html#a22ed74f1ed33c4d33f524a650ea536a6">APFloat::rmNearestTiesToEven</a>);</div>
<div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;  }</div>
<div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;  <span class="keywordflow">if</span> (SumCount.isZero())</div>
<div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160; </div>
<div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(SumBFICount.compare(<a class="code" href="classllvm_1_1APFloat.html">APFloat</a>(0.0)) == <a class="code" href="structllvm_1_1APFloatBase.html#a1373bb8e8796d3b0b642b42cf55296eca9f45fb1a56fb0564ec5ede93dad96cc4">APFloat::cmpGreaterThan</a> &amp;&amp;</div>
<div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;         <span class="stringliteral">&quot;Incorrect sum of BFI counts&quot;</span>);</div>
<div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;  <span class="keywordflow">if</span> (SumBFICount.compare(SumCount) == <a class="code" href="structllvm_1_1APFloatBase.html#a1373bb8e8796d3b0b642b42cf55296eca95e6b9c1e27b4949da4c40f5afb842a6">APFloat::cmpEqual</a>)</div>
<div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;  <span class="keywordtype">double</span> Scale = (SumCount / SumBFICount).convertToDouble();</div>
<div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;  <span class="keywordflow">if</span> (Scale &lt; 1.001 &amp;&amp; Scale &gt; 0.999)</div>
<div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160; </div>
<div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;  <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> FuncEntryCount = Func.getBBInfo(&amp;*<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.begin()).CountValue;</div>
<div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;  <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> NewEntryCount = 0.5 + FuncEntryCount * Scale;</div>
<div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;  <span class="keywordflow">if</span> (NewEntryCount == 0)</div>
<div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;    NewEntryCount = 1;</div>
<div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;  <span class="keywordflow">if</span> (NewEntryCount != FuncEntryCount) {</div>
<div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;    <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.setEntryCount(<a class="code" href="namespacellvm.html#a23d4c211faf80b8789923262b5b5ae77">ProfileCount</a>(NewEntryCount, <a class="code" href="classllvm_1_1Function.html#a438d2f246b76817114ade2a005a6bcabac7dbc704eba08842e6acdde9cf6379ba">Function::PCT_Real</a>));</div>
<div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;FixFuncEntryCount: in &quot;</span> &lt;&lt; <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getName()</div>
<div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;                      &lt;&lt; <span class="stringliteral">&quot;, entry_count &quot;</span> &lt;&lt; FuncEntryCount &lt;&lt; <span class="stringliteral">&quot; --&gt; &quot;</span></div>
<div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;                      &lt;&lt; NewEntryCount &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160;  }</div>
<div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;}</div>
<div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160; </div>
<div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;<span class="comment">// Compare the profile count values with BFI count values, and print out</span></div>
<div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;<span class="comment">// the non-matching ones.</span></div>
<div class="line"><a name="l01987"></a><span class="lineno"><a class="line" href="PGOInstrumentation_8cpp.html#a6c13c3a269c58cac403ad567c29d679e"> 1987</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="PGOInstrumentation_8cpp.html#a6c13c3a269c58cac403ad567c29d679e">verifyFuncBFI</a>(PGOUseFunc &amp;Func, <a class="code" href="classllvm_1_1LoopInfo.html">LoopInfo</a> &amp;LI,</div>
<div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;                          <a class="code" href="classllvm_1_1BranchProbabilityInfo.html">BranchProbabilityInfo</a> &amp;NBPI,</div>
<div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;                          <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> HotCountThreshold,</div>
<div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;                          <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> <a class="code" href="MachineFunctionSplitter_8cpp.html#a4808fae45e473d4aa7f3c64b7dc7f4ea">ColdCountThreshold</a>) {</div>
<div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> = Func.getFunc();</div>
<div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;  <a class="code" href="classllvm_1_1BlockFrequencyInfo.html">BlockFrequencyInfo</a> NBFI(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, NBPI, LI);</div>
<div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;  <span class="comment">//  bool PrintFunc = false;</span></div>
<div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;  <span class="keywordtype">bool</span> HotBBOnly = <a class="code" href="PGOInstrumentation_8cpp.html#a80e1f3026ce040615474f3efff8f250e">PGOVerifyHotBFI</a>;</div>
<div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;  std::string <a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#ad7fab8522e49be1b20c4db4fc431bd3c">Msg</a>;</div>
<div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;  <a class="code" href="classllvm_1_1OptimizationRemarkEmitter.html">OptimizationRemarkEmitter</a> ORE(&amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160; </div>
<div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;  <span class="keywordtype">unsigned</span> BBNum = 0, BBMisMatchNum = 0, NonZeroBBNum = 0;</div>
<div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;BBI : <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>) {</div>
<div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;    <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> CountValue = 0;</div>
<div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;    <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> BFICountValue = 0;</div>
<div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160; </div>
<div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160;    <span class="keywordflow">if</span> (Func.getBBInfo(&amp;BBI).CountValid)</div>
<div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;      CountValue = Func.getBBInfo(&amp;BBI).CountValue;</div>
<div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160; </div>
<div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;    BBNum++;</div>
<div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;    <span class="keywordflow">if</span> (CountValue)</div>
<div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160;      NonZeroBBNum++;</div>
<div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;    <span class="keyword">auto</span> BFICount = NBFI.<a class="code" href="classllvm_1_1BlockFrequencyInfo.html#a45e6b2c5c4e59ddc05ad9a2685706e75">getBlockProfileCount</a>(&amp;BBI);</div>
<div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;    <span class="keywordflow">if</span> (BFICount)</div>
<div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;      BFICountValue = *BFICount;</div>
<div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160; </div>
<div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;    <span class="keywordflow">if</span> (HotBBOnly) {</div>
<div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160;      <span class="keywordtype">bool</span> rawIsHot = CountValue &gt;= HotCountThreshold;</div>
<div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160;      <span class="keywordtype">bool</span> BFIIsHot = BFICountValue &gt;= HotCountThreshold;</div>
<div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160;      <span class="keywordtype">bool</span> rawIsCold = CountValue &lt;= <a class="code" href="MachineFunctionSplitter_8cpp.html#a4808fae45e473d4aa7f3c64b7dc7f4ea">ColdCountThreshold</a>;</div>
<div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160;      <span class="keywordtype">bool</span> ShowCount = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160;      <span class="keywordflow">if</span> (rawIsHot &amp;&amp; !BFIIsHot) {</div>
<div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;        <a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#ad7fab8522e49be1b20c4db4fc431bd3c">Msg</a> = <span class="stringliteral">&quot;raw-Hot to BFI-nonHot&quot;</span>;</div>
<div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;        ShowCount = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (rawIsCold &amp;&amp; BFIIsHot) {</div>
<div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160;        <a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#ad7fab8522e49be1b20c4db4fc431bd3c">Msg</a> = <span class="stringliteral">&quot;raw-Cold to BFI-Hot&quot;</span>;</div>
<div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160;        ShowCount = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;      }</div>
<div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;      <span class="keywordflow">if</span> (!ShowCount)</div>
<div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160;      <span class="keywordflow">if</span> ((CountValue &lt; <a class="code" href="PGOInstrumentation_8cpp.html#abd66a285984b7b8917e16298bc470a2b">PGOVerifyBFICutoff</a>) &amp;&amp;</div>
<div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160;          (BFICountValue &lt; <a class="code" href="PGOInstrumentation_8cpp.html#abd66a285984b7b8917e16298bc470a2b">PGOVerifyBFICutoff</a>))</div>
<div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;      <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> Diff = (BFICountValue &gt;= CountValue)</div>
<div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160;                          ? BFICountValue - CountValue</div>
<div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;                          : CountValue - BFICountValue;</div>
<div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160;      <span class="keywordflow">if</span> (Diff &lt;= CountValue / 100 * <a class="code" href="PGOInstrumentation_8cpp.html#ac5599ed465f5265b08a7236fa44c5c9d">PGOVerifyBFIRatio</a>)</div>
<div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160;    }</div>
<div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160;    BBMisMatchNum++;</div>
<div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160; </div>
<div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;    ORE.<a class="code" href="classllvm_1_1OptimizationRemarkEmitter.html#aae6a98aea85aa3af87357cc5448db499">emit</a>([&amp;]() {</div>
<div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;      <a class="code" href="classllvm_1_1OptimizationRemarkAnalysis.html">OptimizationRemarkAnalysis</a> <a class="code" href="namespacellvm.html#ac226f3d2b9ca090171a8e0a8cb92c343a91921ada405fd6ba65dff028df047cb6">Remark</a>(<a class="code" href="PGOInstrumentation_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">DEBUG_TYPE</a>, <span class="stringliteral">&quot;bfi-verify&quot;</span>,</div>
<div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160;                                        <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getSubprogram(), &amp;BBI);</div>
<div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;      <a class="code" href="namespacellvm.html#ac226f3d2b9ca090171a8e0a8cb92c343a91921ada405fd6ba65dff028df047cb6">Remark</a> &lt;&lt; <span class="stringliteral">&quot;BB &quot;</span> &lt;&lt; <a class="code" href="namespacellvm_1_1ore.html#a8f5533240c6722d987a2443cba42019d">ore::NV</a>(<span class="stringliteral">&quot;Block&quot;</span>, BBI.getName())</div>
<div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160;             &lt;&lt; <span class="stringliteral">&quot; Count=&quot;</span> &lt;&lt; <a class="code" href="namespacellvm_1_1ore.html#a8f5533240c6722d987a2443cba42019d">ore::NV</a>(<span class="stringliteral">&quot;Count&quot;</span>, CountValue)</div>
<div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;             &lt;&lt; <span class="stringliteral">&quot; BFI_Count=&quot;</span> &lt;&lt; <a class="code" href="namespacellvm_1_1ore.html#a8f5533240c6722d987a2443cba42019d">ore::NV</a>(<span class="stringliteral">&quot;Count&quot;</span>, BFICountValue);</div>
<div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#ad7fab8522e49be1b20c4db4fc431bd3c">Msg</a>.empty())</div>
<div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;        <a class="code" href="namespacellvm.html#ac226f3d2b9ca090171a8e0a8cb92c343a91921ada405fd6ba65dff028df047cb6">Remark</a> &lt;&lt; <span class="stringliteral">&quot; (&quot;</span> &lt;&lt; <a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#ad7fab8522e49be1b20c4db4fc431bd3c">Msg</a> &lt;&lt; <span class="stringliteral">&quot;)&quot;</span>;</div>
<div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#ac226f3d2b9ca090171a8e0a8cb92c343a91921ada405fd6ba65dff028df047cb6">Remark</a>;</div>
<div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;    });</div>
<div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;  }</div>
<div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;  <span class="keywordflow">if</span> (BBMisMatchNum)</div>
<div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;    ORE.<a class="code" href="classllvm_1_1OptimizationRemarkEmitter.html#aae6a98aea85aa3af87357cc5448db499">emit</a>([&amp;]() {</div>
<div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1OptimizationRemarkAnalysis.html">OptimizationRemarkAnalysis</a>(<a class="code" href="PGOInstrumentation_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">DEBUG_TYPE</a>, <span class="stringliteral">&quot;bfi-verify&quot;</span>,</div>
<div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160;                                        <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getSubprogram(), &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getEntryBlock())</div>
<div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;             &lt;&lt; <span class="stringliteral">&quot;In Func &quot;</span> &lt;&lt; <a class="code" href="namespacellvm_1_1ore.html#a8f5533240c6722d987a2443cba42019d">ore::NV</a>(<span class="stringliteral">&quot;Function&quot;</span>, <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getName())</div>
<div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;             &lt;&lt; <span class="stringliteral">&quot;: Num_of_BB=&quot;</span> &lt;&lt; <a class="code" href="namespacellvm_1_1ore.html#a8f5533240c6722d987a2443cba42019d">ore::NV</a>(<span class="stringliteral">&quot;Count&quot;</span>, BBNum)</div>
<div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;             &lt;&lt; <span class="stringliteral">&quot;, Num_of_non_zerovalue_BB=&quot;</span> &lt;&lt; <a class="code" href="namespacellvm_1_1ore.html#a8f5533240c6722d987a2443cba42019d">ore::NV</a>(<span class="stringliteral">&quot;Count&quot;</span>, NonZeroBBNum)</div>
<div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160;             &lt;&lt; <span class="stringliteral">&quot;, Num_of_mis_matching_BB=&quot;</span> &lt;&lt; <a class="code" href="namespacellvm_1_1ore.html#a8f5533240c6722d987a2443cba42019d">ore::NV</a>(<span class="stringliteral">&quot;Count&quot;</span>, BBMisMatchNum);</div>
<div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;    });</div>
<div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160;}</div>
<div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160; </div>
<div class="line"><a name="l02061"></a><span class="lineno"><a class="line" href="PGOInstrumentation_8cpp.html#af9aed68fe80c345b463bac679b1c18f3"> 2061</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="PGOInstrumentation_8cpp.html#af9aed68fe80c345b463bac679b1c18f3">annotateAllFunctions</a>(</div>
<div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160;    <a class="code" href="classllvm_1_1Module.html">Module</a> &amp;M, <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> ProfileFileName, <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> ProfileRemappingFileName,</div>
<div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160;    <a class="code" href="classllvm_1_1vfs_1_1FileSystem.html">vfs::FileSystem</a> &amp;<a class="code" href="namespacellvm_1_1X86AS.html#aea2591d7d017866934bcf72ee3dc8a31a5b3a782ccae295a254e2794ad30ad07f">FS</a>,</div>
<div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160;    <a class="code" href="classllvm_1_1function__ref.html">function_ref</a>&lt;<a class="code" href="classllvm_1_1TargetLibraryInfo.html">TargetLibraryInfo</a> &amp;(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;)&gt; LookupTLI,</div>
<div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160;    <a class="code" href="classllvm_1_1function__ref.html">function_ref</a>&lt;<a class="code" href="classllvm_1_1BranchProbabilityInfo.html">BranchProbabilityInfo</a> *(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;)&gt; LookupBPI,</div>
<div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;    <a class="code" href="classllvm_1_1function__ref.html">function_ref</a>&lt;<a class="code" href="classllvm_1_1BlockFrequencyInfo.html">BlockFrequencyInfo</a> *(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;)&gt; LookupBFI,</div>
<div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160;    <a class="code" href="classllvm_1_1ProfileSummaryInfo.html">ProfileSummaryInfo</a> *PSI, <span class="keywordtype">bool</span> IsCS) {</div>
<div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Read in profile counters: &quot;</span>);</div>
<div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;  <span class="keyword">auto</span> &amp;Ctx = <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getContext();</div>
<div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;  <span class="comment">// Read the counter array from file.</span></div>
<div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;  <span class="keyword">auto</span> ReaderOrErr = <a class="code" href="classllvm_1_1IndexedInstrProfReader.html#a071f65a20661e8049db465eae188ec72">IndexedInstrProfReader::create</a>(ProfileFileName, <a class="code" href="namespacellvm_1_1X86AS.html#aea2591d7d017866934bcf72ee3dc8a31a5b3a782ccae295a254e2794ad30ad07f">FS</a>,</div>
<div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;                                                    ProfileRemappingFileName);</div>
<div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Error.html">Error</a> <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = ReaderOrErr.takeError()) {</div>
<div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;    <a class="code" href="namespacellvm.html#a2aa0f5c36ac6291f5d5f2b4efd9ffe70">handleAllErrors</a>(<a class="code" href="lib_2Target_2ARM_2README_8txt.html#ad3a99906764c35b2694ae90fa57744a5">std::move</a>(<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>), [&amp;](<span class="keyword">const</span> <a class="code" href="classllvm_1_1ErrorInfoBase.html">ErrorInfoBase</a> &amp;EI) {</div>
<div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;      Ctx.diagnose(</div>
<div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;          <a class="code" href="classllvm_1_1DiagnosticInfoPGOProfile.html">DiagnosticInfoPGOProfile</a>(ProfileFileName.<a class="code" href="classllvm_1_1StringRef.html#ad04539d64efd58e70c5e828739cf718e">data</a>(), EI.<a class="code" href="classllvm_1_1ErrorInfoBase.html#a2b75e20ae30dbb4d4d96486653a9b710">message</a>()));</div>
<div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160;    });</div>
<div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;  }</div>
<div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160; </div>
<div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;  std::unique_ptr&lt;IndexedInstrProfReader&gt; PGOReader =</div>
<div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160;      <a class="code" href="lib_2Target_2ARM_2README_8txt.html#ad3a99906764c35b2694ae90fa57744a5">std::move</a>(ReaderOrErr.get());</div>
<div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160;  <span class="keywordflow">if</span> (!PGOReader) {</div>
<div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;    Ctx.diagnose(<a class="code" href="classllvm_1_1DiagnosticInfoPGOProfile.html">DiagnosticInfoPGOProfile</a>(ProfileFileName.<a class="code" href="classllvm_1_1StringRef.html#ad04539d64efd58e70c5e828739cf718e">data</a>(),</div>
<div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;                                          <a class="code" href="classllvm_1_1StringRef.html">StringRef</a>(<span class="stringliteral">&quot;Cannot get PGOReader&quot;</span>)));</div>
<div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;  }</div>
<div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;  <span class="keywordflow">if</span> (!PGOReader-&gt;hasCSIRLevelProfile() &amp;&amp; IsCS)</div>
<div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160; </div>
<div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;  <span class="comment">// TODO: might need to change the warning once the clang option is finalized.</span></div>
<div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;  <span class="keywordflow">if</span> (!PGOReader-&gt;isIRLevelProfile() &amp;&amp; !PGOReader-&gt;hasMemoryProfile()) {</div>
<div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;    Ctx.diagnose(<a class="code" href="classllvm_1_1DiagnosticInfoPGOProfile.html">DiagnosticInfoPGOProfile</a>(</div>
<div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;        ProfileFileName.<a class="code" href="classllvm_1_1StringRef.html#ad04539d64efd58e70c5e828739cf718e">data</a>(), <span class="stringliteral">&quot;Not an IR level instrumentation profile&quot;</span>));</div>
<div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160;  }</div>
<div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;  <span class="keywordflow">if</span> (PGOReader-&gt;hasSingleByteCoverage()) {</div>
<div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160;    Ctx.diagnose(<a class="code" href="classllvm_1_1DiagnosticInfoPGOProfile.html">DiagnosticInfoPGOProfile</a>(</div>
<div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160;        ProfileFileName.<a class="code" href="classllvm_1_1StringRef.html#ad04539d64efd58e70c5e828739cf718e">data</a>(),</div>
<div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;        <span class="stringliteral">&quot;Cannot use coverage profiles for optimization&quot;</span>));</div>
<div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;  }</div>
<div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;  <span class="keywordflow">if</span> (PGOReader-&gt;functionEntryOnly()) {</div>
<div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160;    Ctx.diagnose(<a class="code" href="classllvm_1_1DiagnosticInfoPGOProfile.html">DiagnosticInfoPGOProfile</a>(</div>
<div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;        ProfileFileName.<a class="code" href="classllvm_1_1StringRef.html#ad04539d64efd58e70c5e828739cf718e">data</a>(),</div>
<div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;        <span class="stringliteral">&quot;Function entry profiles are not yet supported for optimization&quot;</span>));</div>
<div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;  }</div>
<div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160; </div>
<div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160;  <span class="comment">// Add the profile summary (read from the header of the indexed summary) here</span></div>
<div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;  <span class="comment">// so that we can use it below when reading counters (which checks if the</span></div>
<div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160;  <span class="comment">// function should be marked with a cold or inlinehint attribute).</span></div>
<div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;  <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.setProfileSummary(PGOReader-&gt;getSummary(IsCS).getMD(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getContext()),</div>
<div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;                      IsCS ? <a class="code" href="classllvm_1_1ProfileSummary.html#aa5aa682b3904e88749fa973b3da370c2a1342349bb5356c363f057ba5d8203516">ProfileSummary::PSK_CSInstr</a></div>
<div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160;                           : <a class="code" href="classllvm_1_1ProfileSummary.html#aa5aa682b3904e88749fa973b3da370c2a8c847a58db35295f26d16ccbfcac6e0c">ProfileSummary::PSK_Instr</a>);</div>
<div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160;  PSI-&gt;<a class="code" href="classllvm_1_1ProfileSummaryInfo.html#a2600478d8188a85a14af8787024e1831">refresh</a>();</div>
<div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160; </div>
<div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;  std::unordered_multimap&lt;Comdat *, GlobalValue *&gt; ComdatMembers;</div>
<div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;  <a class="code" href="PGOInstrumentation_8cpp.html#a33c507f28e0aa55010dd25f57a61f826">collectComdatMembers</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>, ComdatMembers);</div>
<div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;  std::vector&lt;Function *&gt; HotFunctions;</div>
<div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;  std::vector&lt;Function *&gt; ColdFunctions;</div>
<div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160; </div>
<div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;  <span class="comment">// If the profile marked as always instrument the entry BB, do the</span></div>
<div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160;  <span class="comment">// same. Note this can be overwritten by the internal option in CFGMST.h</span></div>
<div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;  <span class="keywordtype">bool</span> InstrumentFuncEntry = PGOReader-&gt;instrEntryBBEnabled();</div>
<div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="PGOInstrumentation_8cpp.html#aa64a0f86c47358606fcb6bd03927e030">PGOInstrumentEntry</a>.<a class="code" href="classllvm_1_1cl_1_1Option.html#a2dc75fafb68e7669e776e19da7857cdf">getNumOccurrences</a>() &gt; 0)</div>
<div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160;    InstrumentFuncEntry = <a class="code" href="PGOInstrumentation_8cpp.html#aa64a0f86c47358606fcb6bd03927e030">PGOInstrumentEntry</a>;</div>
<div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> : <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>) {</div>
<div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="PGOInstrumentation_8cpp.html#a2b31b32a49f601ea320bdeefc3209ff8">skipPGO</a>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>))</div>
<div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160;    <span class="keyword">auto</span> &amp;TLI = LookupTLI(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160;    <span class="keyword">auto</span> *BPI = LookupBPI(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160;    <span class="keyword">auto</span> *<a class="code" href="namespacellvm_1_1AMDGPUISD.html#a739d53294bc38cd6b0b23332f9994c0eafbca76f7875e080d97cee761de04d996">BFI</a> = LookupBFI(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;    <span class="comment">// Split indirectbr critical edges here before computing the MST rather than</span></div>
<div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160;    <span class="comment">// later in getInstrBB() to avoid invalidating it.</span></div>
<div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160;    <a class="code" href="namespacellvm.html#a502009030bffff8a6992f4e4eb9380f5">SplitIndirectBrCriticalEdges</a>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, <span class="comment">/*IgnoreBlocksWithoutPHI=*/</span><span class="keyword">false</span>, BPI, <a class="code" href="namespacellvm_1_1AMDGPUISD.html#a739d53294bc38cd6b0b23332f9994c0eafbca76f7875e080d97cee761de04d996">BFI</a>);</div>
<div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160;    PGOUseFunc Func(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, &amp;<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>, TLI, ComdatMembers, BPI, <a class="code" href="namespacellvm_1_1AMDGPUISD.html#a739d53294bc38cd6b0b23332f9994c0eafbca76f7875e080d97cee761de04d996">BFI</a>, PSI, IsCS,</div>
<div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160;                    InstrumentFuncEntry);</div>
<div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160;    <span class="comment">// Read and match memprof first since we do this via debug info and can</span></div>
<div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;    <span class="comment">// match even if there is an IR mismatch detected for regular PGO below.</span></div>
<div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;    <span class="keywordflow">if</span> (PGOReader-&gt;hasMemoryProfile())</div>
<div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160;      Func.readMemprof(PGOReader.get());</div>
<div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160; </div>
<div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160;    <span class="keywordflow">if</span> (!PGOReader-&gt;isIRLevelProfile())</div>
<div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160; </div>
<div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160;    <span class="comment">// When PseudoKind is set to a vaule other than InstrProfRecord::NotPseudo,</span></div>
<div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160;    <span class="comment">// it means the profile for the function is unrepresentative and this</span></div>
<div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160;    <span class="comment">// function is actually hot / warm. We will reset the function hot / cold</span></div>
<div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160;    <span class="comment">// attribute and drop all the profile counters.</span></div>
<div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160;    <a class="code" href="structllvm_1_1InstrProfRecord.html#a69bdbaedb4ae6b233e5eccac5ebc2d77">InstrProfRecord::CountPseudoKind</a> PseudoKind = <a class="code" href="structllvm_1_1InstrProfRecord.html#a69bdbaedb4ae6b233e5eccac5ebc2d77ac46600297a1a6f13ed709e33fcc7ae4e">InstrProfRecord::NotPseudo</a>;</div>
<div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;    <span class="keywordtype">bool</span> AllZeros = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160;    <span class="keywordflow">if</span> (!Func.readCounters(PGOReader.get(), AllZeros, PseudoKind))</div>
<div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160;    <span class="keywordflow">if</span> (AllZeros) {</div>
<div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;      <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.setEntryCount(<a class="code" href="namespacellvm.html#a23d4c211faf80b8789923262b5b5ae77">ProfileCount</a>(0, <a class="code" href="classllvm_1_1Function.html#a438d2f246b76817114ade2a005a6bcabac7dbc704eba08842e6acdde9cf6379ba">Function::PCT_Real</a>));</div>
<div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;      <span class="keywordflow">if</span> (Func.getProgramMaxCount() != 0)</div>
<div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160;        ColdFunctions.push_back(&amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160;    }</div>
<div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160;    <span class="keywordflow">if</span> (PseudoKind != <a class="code" href="structllvm_1_1InstrProfRecord.html#a69bdbaedb4ae6b233e5eccac5ebc2d77ac46600297a1a6f13ed709e33fcc7ae4e">InstrProfRecord::NotPseudo</a>) {</div>
<div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160;      <span class="comment">// Clear function attribute cold.</span></div>
<div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.hasFnAttribute(<a class="code" href="namespacellvm_1_1CallingConv.html#a5b166ae228ebbfdb96736d6022f3feeda94ec9273479164e4aec1d5d91b71dc85">Attribute::Cold</a>))</div>
<div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160;        <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.removeFnAttr(<a class="code" href="namespacellvm_1_1CallingConv.html#a5b166ae228ebbfdb96736d6022f3feeda94ec9273479164e4aec1d5d91b71dc85">Attribute::Cold</a>);</div>
<div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160;      <span class="comment">// Set function attribute as hot.</span></div>
<div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160;      <span class="keywordflow">if</span> (PseudoKind == <a class="code" href="structllvm_1_1InstrProfRecord.html#a69bdbaedb4ae6b233e5eccac5ebc2d77af66fe9759d6bc934e927ced864653318">InstrProfRecord::PseudoHot</a>)</div>
<div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;        <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.addFnAttr(Attribute::Hot);</div>
<div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02169"></a><span class="lineno"> 2169</span>&#160;    }</div>
<div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160;    Func.populateCounters();</div>
<div class="line"><a name="l02171"></a><span class="lineno"> 2171</span>&#160;    Func.setBranchWeights();</div>
<div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160;    Func.annotateValueSites();</div>
<div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160;    Func.annotateIrrLoopHeaderWeights();</div>
<div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160;    PGOUseFunc::FuncFreqAttr FreqAttr = Func.getFuncFreqAttr();</div>
<div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160;    <span class="keywordflow">if</span> (FreqAttr == PGOUseFunc::FFA_Cold)</div>
<div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160;      ColdFunctions.push_back(&amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (FreqAttr == PGOUseFunc::FFA_Hot)</div>
<div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160;      HotFunctions.push_back(&amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#aa4f78f8e57089af990561a8ada04f0e4">PGOViewCounts</a> != <a class="code" href="namespacellvm.html#a726a37ae665057b176aba58871cf0616a3c9596b568bb5b8379c7242004e4a70a">PGOVCT_None</a> &amp;&amp;</div>
<div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160;        (<a class="code" href="namespacellvm.html#a6391a34afa5b4ed1a5e556a8cc4d971b">ViewBlockFreqFuncName</a>.empty() ||</div>
<div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160;         <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getName().equals(<a class="code" href="namespacellvm.html#a6391a34afa5b4ed1a5e556a8cc4d971b">ViewBlockFreqFuncName</a>))) {</div>
<div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160;      <a class="code" href="classllvm_1_1LoopInfo.html">LoopInfo</a> LI{<a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>)};</div>
<div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;      std::unique_ptr&lt;BranchProbabilityInfo&gt; NewBPI =</div>
<div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;          std::make_unique&lt;BranchProbabilityInfo&gt;(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, LI);</div>
<div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;      std::unique_ptr&lt;BlockFrequencyInfo&gt; NewBFI =</div>
<div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;          std::make_unique&lt;BlockFrequencyInfo&gt;(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, *NewBPI, LI);</div>
<div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#aa4f78f8e57089af990561a8ada04f0e4">PGOViewCounts</a> == <a class="code" href="namespacellvm.html#a726a37ae665057b176aba58871cf0616a006586d50ef1cc2441c651e5e0653c4e">PGOVCT_Graph</a>)</div>
<div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;        NewBFI-&gt;view();</div>
<div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#aa4f78f8e57089af990561a8ada04f0e4">PGOViewCounts</a> == <a class="code" href="namespacellvm.html#a726a37ae665057b176aba58871cf0616ac7b397abc7fb6a7e89be33a420289bc8">PGOVCT_Text</a>) {</div>
<div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;        <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;pgo-view-counts: &quot;</span> &lt;&lt; Func.getFunc().getName() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160;        NewBFI-&gt;print(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>());</div>
<div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160;      }</div>
<div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;    }</div>
<div class="line"><a name="l02194"></a><span class="lineno"> 2194</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="PGOInstrumentation_8cpp.html#a8d7fefca64ed0916ed11715c2a21ba32">PGOViewRawCounts</a> != <a class="code" href="namespacellvm.html#a726a37ae665057b176aba58871cf0616a3c9596b568bb5b8379c7242004e4a70a">PGOVCT_None</a> &amp;&amp;</div>
<div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160;        (<a class="code" href="namespacellvm.html#a6391a34afa5b4ed1a5e556a8cc4d971b">ViewBlockFreqFuncName</a>.empty() ||</div>
<div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160;         <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getName().equals(<a class="code" href="namespacellvm.html#a6391a34afa5b4ed1a5e556a8cc4d971b">ViewBlockFreqFuncName</a>))) {</div>
<div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="PGOInstrumentation_8cpp.html#a8d7fefca64ed0916ed11715c2a21ba32">PGOViewRawCounts</a> == <a class="code" href="namespacellvm.html#a726a37ae665057b176aba58871cf0616a006586d50ef1cc2441c651e5e0653c4e">PGOVCT_Graph</a>)</div>
<div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a6391a34afa5b4ed1a5e556a8cc4d971b">ViewBlockFreqFuncName</a>.empty())</div>
<div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160;          <a class="code" href="namespacellvm.html#ad6441cc53729e3cc831bd5c78b4349d0">WriteGraph</a>(&amp;Func, <a class="code" href="classllvm_1_1Twine.html">Twine</a>(<span class="stringliteral">&quot;PGORawCounts_&quot;</span>) + Func.getFunc().getName());</div>
<div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;          <a class="code" href="namespacellvm.html#ab8635363d4287c93f64c55ad5567fcf0">ViewGraph</a>(&amp;Func, <a class="code" href="classllvm_1_1Twine.html">Twine</a>(<span class="stringliteral">&quot;PGORawCounts_&quot;</span>) + Func.getFunc().getName());</div>
<div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="PGOInstrumentation_8cpp.html#a8d7fefca64ed0916ed11715c2a21ba32">PGOViewRawCounts</a> == <a class="code" href="namespacellvm.html#a726a37ae665057b176aba58871cf0616ac7b397abc7fb6a7e89be33a420289bc8">PGOVCT_Text</a>) {</div>
<div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;        <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;pgo-view-raw-counts: &quot;</span> &lt;&lt; Func.getFunc().getName() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;        Func.dumpInfo();</div>
<div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160;      }</div>
<div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;    }</div>
<div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160; </div>
<div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="PGOInstrumentation_8cpp.html#a9aaca6442eb66832c60ea0efb77a2486">PGOVerifyBFI</a> || <a class="code" href="PGOInstrumentation_8cpp.html#a80e1f3026ce040615474f3efff8f250e">PGOVerifyHotBFI</a> || <a class="code" href="PGOInstrumentation_8cpp.html#a157a72a2ac898befbf836a3a87505084">PGOFixEntryCount</a>) {</div>
<div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160;      <a class="code" href="classllvm_1_1LoopInfo.html">LoopInfo</a> LI{<a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>)};</div>
<div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;      <a class="code" href="classllvm_1_1BranchProbabilityInfo.html">BranchProbabilityInfo</a> NBPI(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, LI);</div>
<div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160; </div>
<div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;      <span class="comment">// Fix func entry count.</span></div>
<div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="PGOInstrumentation_8cpp.html#a157a72a2ac898befbf836a3a87505084">PGOFixEntryCount</a>)</div>
<div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;        <a class="code" href="PGOInstrumentation_8cpp.html#a13254d395258a157ea8ce4a0e1a96050">fixFuncEntryCount</a>(Func, LI, NBPI);</div>
<div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160; </div>
<div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160;      <span class="comment">// Verify BlockFrequency information.</span></div>
<div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;      <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> HotCountThreshold = 0, <a class="code" href="MachineFunctionSplitter_8cpp.html#a4808fae45e473d4aa7f3c64b7dc7f4ea">ColdCountThreshold</a> = 0;</div>
<div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="PGOInstrumentation_8cpp.html#a80e1f3026ce040615474f3efff8f250e">PGOVerifyHotBFI</a>) {</div>
<div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160;        HotCountThreshold = PSI-&gt;<a class="code" href="classllvm_1_1ProfileSummaryInfo.html#ae48ebfb8f85e9b59325d20cdc9299f0e">getOrCompHotCountThreshold</a>();</div>
<div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160;        <a class="code" href="MachineFunctionSplitter_8cpp.html#a4808fae45e473d4aa7f3c64b7dc7f4ea">ColdCountThreshold</a> = PSI-&gt;<a class="code" href="classllvm_1_1ProfileSummaryInfo.html#a10ecb24d8737d52d6d5875479dcd42e8">getOrCompColdCountThreshold</a>();</div>
<div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160;      }</div>
<div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;      <a class="code" href="PGOInstrumentation_8cpp.html#a6c13c3a269c58cac403ad567c29d679e">verifyFuncBFI</a>(Func, LI, NBPI, HotCountThreshold, <a class="code" href="MachineFunctionSplitter_8cpp.html#a4808fae45e473d4aa7f3c64b7dc7f4ea">ColdCountThreshold</a>);</div>
<div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160;    }</div>
<div class="line"><a name="l02224"></a><span class="lineno"> 2224</span>&#160;  }</div>
<div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160; </div>
<div class="line"><a name="l02226"></a><span class="lineno"> 2226</span>&#160;  <span class="comment">// Set function hotness attribute from the profile.</span></div>
<div class="line"><a name="l02227"></a><span class="lineno"> 2227</span>&#160;  <span class="comment">// We have to apply these attributes at the end because their presence</span></div>
<div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>&#160;  <span class="comment">// can affect the BranchProbabilityInfo of any callers, resulting in an</span></div>
<div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160;  <span class="comment">// inconsistent MST between prof-gen and prof-use.</span></div>
<div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> : HotFunctions) {</div>
<div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160;    <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;addFnAttr(Attribute::InlineHint);</div>
<div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Set inline attribute to function: &quot;</span> &lt;&lt; <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;getName()</div>
<div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160;                      &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>&#160;  }</div>
<div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> : ColdFunctions) {</div>
<div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160;    <span class="comment">// Only set when there is no Attribute::Hot set by the user. For Hot</span></div>
<div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;    <span class="comment">// attribute, user&#39;s annotation has the precedence over the profile.</span></div>
<div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;hasFnAttribute(Attribute::Hot)) {</div>
<div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160;      <span class="keyword">auto</span> &amp;Ctx = <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getContext();</div>
<div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160;      std::string <a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#ad7fab8522e49be1b20c4db4fc431bd3c">Msg</a> = std::string(<span class="stringliteral">&quot;Function &quot;</span>) + <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;getName().str() +</div>
<div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160;                        std::string(<span class="stringliteral">&quot; is annotated as a hot function but&quot;</span></div>
<div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160;                                    <span class="stringliteral">&quot; the profile is cold&quot;</span>);</div>
<div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160;      Ctx.diagnose(</div>
<div class="line"><a name="l02244"></a><span class="lineno"> 2244</span>&#160;          <a class="code" href="classllvm_1_1DiagnosticInfoPGOProfile.html">DiagnosticInfoPGOProfile</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getName().data(), <a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#ad7fab8522e49be1b20c4db4fc431bd3c">Msg</a>, <a class="code" href="namespacellvm.html#abfcab32516704f11d146c757f402ad5ca1cde8c8828756cdaf2a93260e247ae31">DS_Warning</a>));</div>
<div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160;    }</div>
<div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160;    <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;addFnAttr(<a class="code" href="namespacellvm_1_1CallingConv.html#a5b166ae228ebbfdb96736d6022f3feeda94ec9273479164e4aec1d5d91b71dc85">Attribute::Cold</a>);</div>
<div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Set cold attribute to function: &quot;</span> &lt;&lt; <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;getName()</div>
<div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160;                      &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;  }</div>
<div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02252"></a><span class="lineno"> 2252</span>&#160;}</div>
<div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160; </div>
<div class="line"><a name="l02254"></a><span class="lineno"><a class="line" href="classllvm_1_1PGOInstrumentationUse.html#a016467155ff27477979a58b78577db80"> 2254</a></span>&#160;<a class="code" href="classllvm_1_1PGOInstrumentationUse.html#a016467155ff27477979a58b78577db80">PGOInstrumentationUse::PGOInstrumentationUse</a>(</div>
<div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160;    std::string Filename, std::string RemappingFilename, <span class="keywordtype">bool</span> IsCS,</div>
<div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160;    <a class="code" href="classllvm_1_1IntrusiveRefCntPtr.html">IntrusiveRefCntPtr&lt;vfs::FileSystem&gt;</a> VFS)</div>
<div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160;    : ProfileFileName(<a class="code" href="namespacestd.html">std</a>::<a class="code" href="namespacellvm.html#abfc9c7ecf70f66901e439f7c04ef3dbb">move</a>(Filename)),</div>
<div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160;      ProfileRemappingFileName(<a class="code" href="namespacestd.html">std</a>::<a class="code" href="namespacellvm.html#abfc9c7ecf70f66901e439f7c04ef3dbb">move</a>(RemappingFilename)), IsCS(IsCS),</div>
<div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160;      <a class="code" href="namespacellvm_1_1X86AS.html#aea2591d7d017866934bcf72ee3dc8a31a5b3a782ccae295a254e2794ad30ad07f">FS</a>(<a class="code" href="namespacestd.html">std</a>::<a class="code" href="namespacellvm.html#abfc9c7ecf70f66901e439f7c04ef3dbb">move</a>(VFS)) {</div>
<div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="PGOInstrumentation_8cpp.html#a99c391269e75325086b8a1e95890ddd8">PGOTestProfileFile</a>.empty())</div>
<div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160;    ProfileFileName = <a class="code" href="PGOInstrumentation_8cpp.html#a99c391269e75325086b8a1e95890ddd8">PGOTestProfileFile</a>;</div>
<div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="PGOInstrumentation_8cpp.html#a27f871f575879ada4f8812e277d95db6">PGOTestProfileRemappingFile</a>.empty())</div>
<div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160;    ProfileRemappingFileName = <a class="code" href="PGOInstrumentation_8cpp.html#a27f871f575879ada4f8812e277d95db6">PGOTestProfileRemappingFile</a>;</div>
<div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160;  <span class="keywordflow">if</span> (!FS)</div>
<div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160;    FS = <a class="code" href="namespacellvm_1_1vfs.html#a9878c6a5a53d24e17c7c1002be31364c">vfs::getRealFileSystem</a>();</div>
<div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160;}</div>
<div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160; </div>
<div class="line"><a name="l02268"></a><span class="lineno"><a class="line" href="classllvm_1_1PGOInstrumentationUse.html#a59375b747523964f89162ae5708e805f"> 2268</a></span>&#160;<a class="code" href="classllvm_1_1PreservedAnalyses.html">PreservedAnalyses</a> <a class="code" href="classllvm_1_1PGOInstrumentationUse.html#a59375b747523964f89162ae5708e805f">PGOInstrumentationUse::run</a>(<a class="code" href="classllvm_1_1Module.html">Module</a> &amp;M,</div>
<div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160;                                             <a class="code" href="classllvm_1_1AnalysisManager.html">ModuleAnalysisManager</a> &amp;AM) {</div>
<div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>&#160; </div>
<div class="line"><a name="l02271"></a><span class="lineno"> 2271</span>&#160;  <span class="keyword">auto</span> &amp;<a class="code" href="PassBuilderBindings_8cpp.html#a83c7e5ca51099e4efa895791a02fb0ed">FAM</a> = AM.<a class="code" href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">getResult</a>&lt;<a class="code" href="classllvm_1_1InnerAnalysisManagerProxy.html">FunctionAnalysisManagerModuleProxy</a>&gt;(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>).getManager();</div>
<div class="line"><a name="l02272"></a><span class="lineno"> 2272</span>&#160;  <span class="keyword">auto</span> LookupTLI = [&amp;<a class="code" href="PassBuilderBindings_8cpp.html#a83c7e5ca51099e4efa895791a02fb0ed">FAM</a>](<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>) -&gt; <a class="code" href="classllvm_1_1TargetLibraryInfo.html">TargetLibraryInfo</a> &amp; {</div>
<div class="line"><a name="l02273"></a><span class="lineno"> 2273</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="PassBuilderBindings_8cpp.html#a83c7e5ca51099e4efa895791a02fb0ed">FAM</a>.<a class="code" href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">getResult</a>&lt;<a class="code" href="classllvm_1_1TargetLibraryAnalysis.html">TargetLibraryAnalysis</a>&gt;(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l02274"></a><span class="lineno"> 2274</span>&#160;  };</div>
<div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160;  <span class="keyword">auto</span> LookupBPI = [&amp;<a class="code" href="PassBuilderBindings_8cpp.html#a83c7e5ca51099e4efa895791a02fb0ed">FAM</a>](<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>) {</div>
<div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160;    <span class="keywordflow">return</span> &amp;<a class="code" href="PassBuilderBindings_8cpp.html#a83c7e5ca51099e4efa895791a02fb0ed">FAM</a>.<a class="code" href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">getResult</a>&lt;<a class="code" href="classllvm_1_1BranchProbabilityAnalysis.html">BranchProbabilityAnalysis</a>&gt;(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l02277"></a><span class="lineno"> 2277</span>&#160;  };</div>
<div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160;  <span class="keyword">auto</span> LookupBFI = [&amp;<a class="code" href="PassBuilderBindings_8cpp.html#a83c7e5ca51099e4efa895791a02fb0ed">FAM</a>](<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>) {</div>
<div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160;    <span class="keywordflow">return</span> &amp;<a class="code" href="PassBuilderBindings_8cpp.html#a83c7e5ca51099e4efa895791a02fb0ed">FAM</a>.<a class="code" href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">getResult</a>&lt;<a class="code" href="classllvm_1_1BlockFrequencyAnalysis.html">BlockFrequencyAnalysis</a>&gt;(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160;  };</div>
<div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160; </div>
<div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160;  <span class="keyword">auto</span> *PSI = &amp;AM.<a class="code" href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">getResult</a>&lt;<a class="code" href="classllvm_1_1ProfileSummaryAnalysis.html">ProfileSummaryAnalysis</a>&gt;(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>);</div>
<div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160; </div>
<div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="PGOInstrumentation_8cpp.html#af9aed68fe80c345b463bac679b1c18f3">annotateAllFunctions</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>, ProfileFileName, ProfileRemappingFileName, *FS,</div>
<div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160;                            LookupTLI, LookupBPI, LookupBFI, PSI, IsCS))</div>
<div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1PreservedAnalyses.html#a1258a1ff55557c27684010ebd7283712">PreservedAnalyses::all</a>();</div>
<div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160; </div>
<div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1PreservedAnalyses.html#a03797a73044a81cbc6a3409d6c72ee8f">PreservedAnalyses::none</a>();</div>
<div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160;}</div>
<div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160; </div>
<div class="line"><a name="l02291"></a><span class="lineno"><a class="line" href="PGOInstrumentation_8cpp.html#ad415a8c401ec5208bc818dacd94194a6"> 2291</a></span>&#160;<span class="keyword">static</span> std::string <a class="code" href="PGOInstrumentation_8cpp.html#ad415a8c401ec5208bc818dacd94194a6">getSimpleNodeName</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Node) {</div>
<div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160;  <span class="keywordflow">if</span> (!Node-&gt;getName().empty())</div>
<div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160;    <span class="keywordflow">return</span> std::string(Node-&gt;getName());</div>
<div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160; </div>
<div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160;  std::string SimpleNodeName;</div>
<div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160;  <a class="code" href="classllvm_1_1raw__string__ostream.html">raw_string_ostream</a> <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a>(SimpleNodeName);</div>
<div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;  Node-&gt;printAsOperand(<a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a>, <span class="keyword">false</span>);</div>
<div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a>.str();</div>
<div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160;}</div>
<div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160; </div>
<div class="line"><a name="l02301"></a><span class="lineno"><a class="line" href="namespacellvm.html#ad272ce4631595e235e560baf59dc1ffd"> 2301</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespacellvm.html#ad272ce4631595e235e560baf59dc1ffd">llvm::setProfMetadata</a>(<a class="code" href="classllvm_1_1Module.html">Module</a> *M, <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *TI,</div>
<div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160;                           <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;uint64_t&gt;</a> EdgeCounts,</div>
<div class="line"><a name="l02303"></a><span class="lineno"> 2303</span>&#160;                           <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> MaxCount) {</div>
<div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160;  <a class="code" href="classllvm_1_1MDBuilder.html">MDBuilder</a> MDB(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>-&gt;getContext());</div>
<div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(MaxCount &gt; 0 &amp;&amp; <span class="stringliteral">&quot;Bad max count&quot;</span>);</div>
<div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160;  <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> Scale = <a class="code" href="namespacellvm.html#abb99891c63212832f13146f418aed935">calculateCountScale</a>(MaxCount);</div>
<div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;unsigned, 4&gt;</a> Weights;</div>
<div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;ECI : EdgeCounts)</div>
<div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160;    Weights.push_back(<a class="code" href="namespacellvm.html#aa9a2cc174301c011647c95c88e0f89b0">scaleBranchCount</a>(ECI, Scale));</div>
<div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160; </div>
<div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Weight is: &quot;</span>; <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;<a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa05c79fbfc58d9dd2851c467a1ef166bf">W</a></div>
<div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;                                           : Weights) {</div>
<div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;    <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa05c79fbfc58d9dd2851c467a1ef166bf">W</a> &lt;&lt; <span class="stringliteral">&quot; &quot;</span>;</div>
<div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160;  } <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;);</div>
<div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160; </div>
<div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;  <a class="code" href="namespacellvm_1_1misexpect.html#a4c52059f91406714507309d168ff95b8">misexpect::checkExpectAnnotations</a>(*TI, Weights, <span class="comment">/*IsFrontend=*/</span><span class="keyword">false</span>);</div>
<div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160; </div>
<div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160;  TI-&gt;<a class="code" href="classllvm_1_1Instruction.html#a9247a212ea89acc9573fa7e7f557eaba">setMetadata</a>(LLVMContext::MD_prof, MDB.<a class="code" href="classllvm_1_1MDBuilder.html#ad910125a9cfd76aaad7f69469df22f66">createBranchWeights</a>(Weights));</div>
<div class="line"><a name="l02319"></a><span class="lineno"> 2319</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="PGOInstrumentation_8cpp.html#ade95db220319f7e5d11ef6601e41b186">EmitBranchProbability</a>) {</div>
<div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160;    std::string BrCondStr = <a class="code" href="PGOInstrumentation_8cpp.html#af0e4d9315f1815020f42edec6a27ad1f">getBranchCondString</a>(TI);</div>
<div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160;    <span class="keywordflow">if</span> (BrCondStr.empty())</div>
<div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160; </div>
<div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160;    <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> WSum =</div>
<div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160;        std::accumulate(Weights.begin(), Weights.end(), (<a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a>)0,</div>
<div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160;                        [](<a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> w1, <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> w2) { return w1 + w2; });</div>
<div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160;    <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> TotalCount =</div>
<div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160;        std::accumulate(EdgeCounts.begin(), EdgeCounts.end(), (<a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a>)0,</div>
<div class="line"><a name="l02329"></a><span class="lineno"> 2329</span>&#160;                        [](<a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> c1, <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> <a class="code" href="README-SSE_8txt.html#a9ac32a0342c0b841550ee0c2412a245e">c2</a>) { return c1 + c2; });</div>
<div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160;    Scale = <a class="code" href="namespacellvm.html#abb99891c63212832f13146f418aed935">calculateCountScale</a>(WSum);</div>
<div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160;    <a class="code" href="classllvm_1_1BranchProbability.html">BranchProbability</a> BP(<a class="code" href="namespacellvm.html#aa9a2cc174301c011647c95c88e0f89b0">scaleBranchCount</a>(Weights[0], Scale),</div>
<div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160;                         <a class="code" href="namespacellvm.html#aa9a2cc174301c011647c95c88e0f89b0">scaleBranchCount</a>(WSum, Scale));</div>
<div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160;    std::string BranchProbStr;</div>
<div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160;    <a class="code" href="classllvm_1_1raw__string__ostream.html">raw_string_ostream</a> <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a>(BranchProbStr);</div>
<div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160;    <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; BP;</div>
<div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160;    <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; <span class="stringliteral">&quot; (total count : &quot;</span> &lt;&lt; TotalCount &lt;&lt; <span class="stringliteral">&quot;)&quot;</span>;</div>
<div class="line"><a name="l02337"></a><span class="lineno"> 2337</span>&#160;    <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a>.<a class="code" href="classllvm_1_1raw__ostream.html#a520bdf57dfe3e73abb53d482893f0a27">flush</a>();</div>
<div class="line"><a name="l02338"></a><span class="lineno"> 2338</span>&#160;    <a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> = TI-&gt;<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>()-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a38bee869ad41aebfef3de2641b12004c">getParent</a>();</div>
<div class="line"><a name="l02339"></a><span class="lineno"> 2339</span>&#160;    <a class="code" href="classllvm_1_1OptimizationRemarkEmitter.html">OptimizationRemarkEmitter</a> ORE(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l02340"></a><span class="lineno"> 2340</span>&#160;    ORE.<a class="code" href="classllvm_1_1OptimizationRemarkEmitter.html#aae6a98aea85aa3af87357cc5448db499">emit</a>([&amp;]() {</div>
<div class="line"><a name="l02341"></a><span class="lineno"> 2341</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1OptimizationRemark.html">OptimizationRemark</a>(<a class="code" href="PGOInstrumentation_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">DEBUG_TYPE</a>, <span class="stringliteral">&quot;pgo-instrumentation&quot;</span>, TI)</div>
<div class="line"><a name="l02342"></a><span class="lineno"> 2342</span>&#160;             &lt;&lt; BrCondStr &lt;&lt; <span class="stringliteral">&quot; is true with probability : &quot;</span> &lt;&lt; BranchProbStr;</div>
<div class="line"><a name="l02343"></a><span class="lineno"> 2343</span>&#160;    });</div>
<div class="line"><a name="l02344"></a><span class="lineno"> 2344</span>&#160;  }</div>
<div class="line"><a name="l02345"></a><span class="lineno"> 2345</span>&#160;}</div>
<div class="line"><a name="l02346"></a><span class="lineno"> 2346</span>&#160; </div>
<div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespacellvm.html">llvm</a> {</div>
<div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160; </div>
<div class="line"><a name="l02349"></a><span class="lineno"><a class="line" href="namespacellvm.html#a08c7dd6c9db484e7609dc95fca6cc55e"> 2349</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespacellvm.html#a08c7dd6c9db484e7609dc95fca6cc55e">setIrrLoopHeaderMetadata</a>(<a class="code" href="classllvm_1_1Module.html">Module</a> *M, <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *TI, <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> Count) {</div>
<div class="line"><a name="l02350"></a><span class="lineno"> 2350</span>&#160;  <a class="code" href="classllvm_1_1MDBuilder.html">MDBuilder</a> MDB(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>-&gt;getContext());</div>
<div class="line"><a name="l02351"></a><span class="lineno"> 2351</span>&#160;  TI-&gt;<a class="code" href="classllvm_1_1Instruction.html#a9247a212ea89acc9573fa7e7f557eaba">setMetadata</a>(llvm::LLVMContext::MD_irr_loop,</div>
<div class="line"><a name="l02352"></a><span class="lineno"> 2352</span>&#160;                  MDB.<a class="code" href="classllvm_1_1MDBuilder.html#a7fb87fc21e00d45516f625f9dd4067eb">createIrrLoopHeaderWeight</a>(Count));</div>
<div class="line"><a name="l02353"></a><span class="lineno"> 2353</span>&#160;}</div>
<div class="line"><a name="l02354"></a><span class="lineno"> 2354</span>&#160; </div>
<div class="line"><a name="l02355"></a><span class="lineno"><a class="line" href="structllvm_1_1GraphTraits_3_01PGOUseFunc_01_5_01_4.html"> 2355</a></span>&#160;<span class="keyword">template</span> &lt;&gt; <span class="keyword">struct </span><a class="code" href="structllvm_1_1GraphTraits.html">GraphTraits</a>&lt;PGOUseFunc *&gt; {</div>
<div class="line"><a name="l02356"></a><span class="lineno"><a class="line" href="structllvm_1_1GraphTraits_3_01PGOUseFunc_01_5_01_4.html#a685538b10db02e3dd20a7708b8b61628"> 2356</a></span>&#160;  <span class="keyword">using</span> <a class="code" href="classllvm_1_1BasicBlock.html">NodeRef</a> = <span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *;</div>
<div class="line"><a name="l02357"></a><span class="lineno"><a class="line" href="structllvm_1_1GraphTraits_3_01PGOUseFunc_01_5_01_4.html#acd942279e63c7297a771c13c55633985"> 2357</a></span>&#160;  <span class="keyword">using</span> <a class="code" href="classllvm_1_1SuccIterator.html">ChildIteratorType</a> = <a class="code" href="namespacellvm.html#af8f47bdd38873dfc134c383fa01b303a">const_succ_iterator</a>;</div>
<div class="line"><a name="l02358"></a><span class="lineno"><a class="line" href="structllvm_1_1GraphTraits_3_01PGOUseFunc_01_5_01_4.html#ac733e11c94730a59cdae1b5b45488f9c"> 2358</a></span>&#160;  <span class="keyword">using</span> <a class="code" href="classllvm_1_1pointer__iterator.html">nodes_iterator</a> = <a class="code" href="classllvm_1_1pointer__iterator.html">pointer_iterator&lt;Function::const_iterator&gt;</a>;</div>
<div class="line"><a name="l02359"></a><span class="lineno"> 2359</span>&#160; </div>
<div class="line"><a name="l02360"></a><span class="lineno"><a class="line" href="structllvm_1_1GraphTraits_3_01PGOUseFunc_01_5_01_4.html#a2c6a6c6d928b62167d566a5010e5c2a4"> 2360</a></span>&#160;  <span class="keyword">static</span> <a class="code" href="classllvm_1_1BasicBlock.html">NodeRef</a> <a class="code" href="structllvm_1_1GraphTraits_3_01PGOUseFunc_01_5_01_4.html#a2c6a6c6d928b62167d566a5010e5c2a4">getEntryNode</a>(<span class="keyword">const</span> PGOUseFunc *<a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>) {</div>
<div class="line"><a name="l02361"></a><span class="lineno"> 2361</span>&#160;    <span class="keywordflow">return</span> &amp;<a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>-&gt;getFunc().front();</div>
<div class="line"><a name="l02362"></a><span class="lineno"> 2362</span>&#160;  }</div>
<div class="line"><a name="l02363"></a><span class="lineno"> 2363</span>&#160; </div>
<div class="line"><a name="l02364"></a><span class="lineno"><a class="line" href="structllvm_1_1GraphTraits_3_01PGOUseFunc_01_5_01_4.html#a34adae8e8e487d86a0dc804c351d50d7"> 2364</a></span>&#160;  <span class="keyword">static</span> <a class="code" href="classllvm_1_1SuccIterator.html">ChildIteratorType</a> <a class="code" href="structllvm_1_1GraphTraits_3_01PGOUseFunc_01_5_01_4.html#a34adae8e8e487d86a0dc804c351d50d7">child_begin</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">NodeRef</a> <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>) {</div>
<div class="line"><a name="l02365"></a><span class="lineno"> 2365</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#a3720211f6e6389ab53734b989bfb6fce">succ_begin</a>(<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>);</div>
<div class="line"><a name="l02366"></a><span class="lineno"> 2366</span>&#160;  }</div>
<div class="line"><a name="l02367"></a><span class="lineno"> 2367</span>&#160; </div>
<div class="line"><a name="l02368"></a><span class="lineno"><a class="line" href="structllvm_1_1GraphTraits_3_01PGOUseFunc_01_5_01_4.html#a118bfffc5d39b2c022855b2dc48b598d"> 2368</a></span>&#160;  <span class="keyword">static</span> <a class="code" href="classllvm_1_1SuccIterator.html">ChildIteratorType</a> <a class="code" href="structllvm_1_1GraphTraits_3_01PGOUseFunc_01_5_01_4.html#a118bfffc5d39b2c022855b2dc48b598d">child_end</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">NodeRef</a> <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>) { <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#a069c4ae2290101bde0f8d6a5074dc72b">succ_end</a>(<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>); }</div>
<div class="line"><a name="l02369"></a><span class="lineno"> 2369</span>&#160; </div>
<div class="line"><a name="l02370"></a><span class="lineno"><a class="line" href="structllvm_1_1GraphTraits_3_01PGOUseFunc_01_5_01_4.html#a7a2268b38d9494c882988c8d592d0dde"> 2370</a></span>&#160;  <span class="keyword">static</span> <a class="code" href="classllvm_1_1pointer__iterator.html">nodes_iterator</a> <a class="code" href="structllvm_1_1GraphTraits_3_01PGOUseFunc_01_5_01_4.html#a7a2268b38d9494c882988c8d592d0dde">nodes_begin</a>(<span class="keyword">const</span> PGOUseFunc *<a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>) {</div>
<div class="line"><a name="l02371"></a><span class="lineno"> 2371</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1pointer__iterator.html">nodes_iterator</a>(<a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>-&gt;getFunc().begin());</div>
<div class="line"><a name="l02372"></a><span class="lineno"> 2372</span>&#160;  }</div>
<div class="line"><a name="l02373"></a><span class="lineno"> 2373</span>&#160; </div>
<div class="line"><a name="l02374"></a><span class="lineno"><a class="line" href="structllvm_1_1GraphTraits_3_01PGOUseFunc_01_5_01_4.html#a5d8d5ca83eb5d9254823202d208a0bdd"> 2374</a></span>&#160;  <span class="keyword">static</span> <a class="code" href="classllvm_1_1pointer__iterator.html">nodes_iterator</a> <a class="code" href="structllvm_1_1GraphTraits_3_01PGOUseFunc_01_5_01_4.html#a5d8d5ca83eb5d9254823202d208a0bdd">nodes_end</a>(<span class="keyword">const</span> PGOUseFunc *<a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>) {</div>
<div class="line"><a name="l02375"></a><span class="lineno"> 2375</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1pointer__iterator.html">nodes_iterator</a>(<a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>-&gt;getFunc().end());</div>
<div class="line"><a name="l02376"></a><span class="lineno"> 2376</span>&#160;  }</div>
<div class="line"><a name="l02377"></a><span class="lineno"> 2377</span>&#160;};</div>
<div class="line"><a name="l02378"></a><span class="lineno"> 2378</span>&#160; </div>
<div class="line"><a name="l02379"></a><span class="lineno"><a class="line" href="structllvm_1_1DOTGraphTraits_3_01PGOUseFunc_01_5_01_4.html"> 2379</a></span>&#160;<span class="keyword">template</span> &lt;&gt; <span class="keyword">struct </span><a class="code" href="structllvm_1_1DOTGraphTraits.html">DOTGraphTraits</a>&lt;PGOUseFunc *&gt; : <a class="code" href="structllvm_1_1DefaultDOTGraphTraits.html">DefaultDOTGraphTraits</a> {</div>
<div class="line"><a name="l02380"></a><span class="lineno"><a class="line" href="structllvm_1_1DOTGraphTraits_3_01PGOUseFunc_01_5_01_4.html#a487770f6cea6552c3893dfecfed34f2c"> 2380</a></span>&#160;  <span class="keyword">explicit</span> <a class="code" href="structllvm_1_1DOTGraphTraits_3_01PGOUseFunc_01_5_01_4.html#a487770f6cea6552c3893dfecfed34f2c">DOTGraphTraits</a>(<span class="keywordtype">bool</span> <a class="code" href="SLPVectorizer_8cpp.html#a3ca9742688618517cc4690fb947fb609">isSimple</a> = <span class="keyword">false</span>)</div>
<div class="line"><a name="l02381"></a><span class="lineno"> 2381</span>&#160;      : <a class="code" href="structllvm_1_1DefaultDOTGraphTraits.html">DefaultDOTGraphTraits</a>(<a class="code" href="SLPVectorizer_8cpp.html#a3ca9742688618517cc4690fb947fb609">isSimple</a>) {}</div>
<div class="line"><a name="l02382"></a><span class="lineno"> 2382</span>&#160; </div>
<div class="line"><a name="l02383"></a><span class="lineno"><a class="line" href="structllvm_1_1DOTGraphTraits_3_01PGOUseFunc_01_5_01_4.html#a5b784c099711d175d1fb5610d28eadbc"> 2383</a></span>&#160;  <span class="keyword">static</span> std::string <a class="code" href="structllvm_1_1DOTGraphTraits_3_01PGOUseFunc_01_5_01_4.html#a5b784c099711d175d1fb5610d28eadbc">getGraphName</a>(<span class="keyword">const</span> PGOUseFunc *<a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>) {</div>
<div class="line"><a name="l02384"></a><span class="lineno"> 2384</span>&#160;    <span class="keywordflow">return</span> std::string(<a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>-&gt;getFunc().getName());</div>
<div class="line"><a name="l02385"></a><span class="lineno"> 2385</span>&#160;  }</div>
<div class="line"><a name="l02386"></a><span class="lineno"> 2386</span>&#160; </div>
<div class="line"><a name="l02387"></a><span class="lineno"><a class="line" href="structllvm_1_1DOTGraphTraits_3_01PGOUseFunc_01_5_01_4.html#a87fac7c81b9184969a6d22f0ae7840bc"> 2387</a></span>&#160;  std::string <a class="code" href="structllvm_1_1DOTGraphTraits_3_01PGOUseFunc_01_5_01_4.html#a87fac7c81b9184969a6d22f0ae7840bc">getNodeLabel</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Node, <span class="keyword">const</span> PGOUseFunc *Graph) {</div>
<div class="line"><a name="l02388"></a><span class="lineno"> 2388</span>&#160;    std::string Result;</div>
<div class="line"><a name="l02389"></a><span class="lineno"> 2389</span>&#160;    <a class="code" href="classllvm_1_1raw__string__ostream.html">raw_string_ostream</a> <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a>(Result);</div>
<div class="line"><a name="l02390"></a><span class="lineno"> 2390</span>&#160; </div>
<div class="line"><a name="l02391"></a><span class="lineno"> 2391</span>&#160;    <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; <a class="code" href="PGOInstrumentation_8cpp.html#ad415a8c401ec5208bc818dacd94194a6">getSimpleNodeName</a>(Node) &lt;&lt; <span class="stringliteral">&quot;:\\l&quot;</span>;</div>
<div class="line"><a name="l02392"></a><span class="lineno"> 2392</span>&#160;    UseBBInfo *BI = Graph-&gt;findBBInfo(Node);</div>
<div class="line"><a name="l02393"></a><span class="lineno"> 2393</span>&#160;    <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; <span class="stringliteral">&quot;Count : &quot;</span>;</div>
<div class="line"><a name="l02394"></a><span class="lineno"> 2394</span>&#160;    <span class="keywordflow">if</span> (BI &amp;&amp; BI-&gt;CountValid)</div>
<div class="line"><a name="l02395"></a><span class="lineno"> 2395</span>&#160;      <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; BI-&gt;CountValue &lt;&lt; <span class="stringliteral">&quot;\\l&quot;</span>;</div>
<div class="line"><a name="l02396"></a><span class="lineno"> 2396</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l02397"></a><span class="lineno"> 2397</span>&#160;      <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; <span class="stringliteral">&quot;Unknown\\l&quot;</span>;</div>
<div class="line"><a name="l02398"></a><span class="lineno"> 2398</span>&#160; </div>
<div class="line"><a name="l02399"></a><span class="lineno"> 2399</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="PGOInstrumentation_8cpp.html#aa9fc7fa9e1e94557d9201ab1b5cd017e">PGOInstrSelect</a>)</div>
<div class="line"><a name="l02400"></a><span class="lineno"> 2400</span>&#160;      <span class="keywordflow">return</span> Result;</div>
<div class="line"><a name="l02401"></a><span class="lineno"> 2401</span>&#160; </div>
<div class="line"><a name="l02402"></a><span class="lineno"> 2402</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : *Node) {</div>
<div class="line"><a name="l02403"></a><span class="lineno"> 2403</span>&#160;      <span class="keywordflow">if</span> (!isa&lt;SelectInst&gt;(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l02404"></a><span class="lineno"> 2404</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02405"></a><span class="lineno"> 2405</span>&#160;      <span class="comment">// Display scaled counts for SELECT instruction:</span></div>
<div class="line"><a name="l02406"></a><span class="lineno"> 2406</span>&#160;      <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; <span class="stringliteral">&quot;SELECT : { T = &quot;</span>;</div>
<div class="line"><a name="l02407"></a><span class="lineno"> 2407</span>&#160;      <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> TC, <a class="code" href="namespaceR600__InstFlag.html#a23106439cc906be24dc8953eedd3940da8949a42ff4563a29d1e70e18338fd522">FC</a>;</div>
<div class="line"><a name="l02408"></a><span class="lineno"> 2408</span>&#160;      <span class="keywordtype">bool</span> HasProf = <a class="code" href="namespacellvm.html#ac19cbbc4935a23e1d44f65e1eaba6b1d">extractBranchWeights</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, TC, <a class="code" href="namespaceR600__InstFlag.html#a23106439cc906be24dc8953eedd3940da8949a42ff4563a29d1e70e18338fd522">FC</a>);</div>
<div class="line"><a name="l02409"></a><span class="lineno"> 2409</span>&#160;      <span class="keywordflow">if</span> (!HasProf)</div>
<div class="line"><a name="l02410"></a><span class="lineno"> 2410</span>&#160;        <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; <span class="stringliteral">&quot;Unknown, F = Unknown }\\l&quot;</span>;</div>
<div class="line"><a name="l02411"></a><span class="lineno"> 2411</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l02412"></a><span class="lineno"> 2412</span>&#160;        <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; TC &lt;&lt; <span class="stringliteral">&quot;, F = &quot;</span> &lt;&lt; <a class="code" href="namespaceR600__InstFlag.html#a23106439cc906be24dc8953eedd3940da8949a42ff4563a29d1e70e18338fd522">FC</a> &lt;&lt; <span class="stringliteral">&quot; }\\l&quot;</span>;</div>
<div class="line"><a name="l02413"></a><span class="lineno"> 2413</span>&#160;    }</div>
<div class="line"><a name="l02414"></a><span class="lineno"> 2414</span>&#160;    <span class="keywordflow">return</span> Result;</div>
<div class="line"><a name="l02415"></a><span class="lineno"> 2415</span>&#160;  }</div>
<div class="line"><a name="l02416"></a><span class="lineno"> 2416</span>&#160;};</div>
<div class="line"><a name="l02417"></a><span class="lineno"> 2417</span>&#160; </div>
<div class="line"><a name="l02418"></a><span class="lineno"> 2418</span>&#160;} <span class="comment">// end namespace llvm</span></div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="anamespacellvm_1_1Check_html_a067ee17412e800f03802fa9517685732a3450a9712780ac26b071f9da4288a396"><div class="ttname"><a href="namespacellvm_1_1Check.html#a067ee17412e800f03802fa9517685732a3450a9712780ac26b071f9da4288a396">llvm::Check::Size</a></div><div class="ttdeci">@ Size</div><div class="ttdef"><b>Definition:</b> <a href="FileCheck_8h_source.html#l00077">FileCheck.h:77</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalValue_html_a3af0428ec6e48cb2f05c199b7b9f7e07"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#a3af0428ec6e48cb2f05c199b7b9f7e07">llvm::GlobalValue::GUID</a></div><div class="ttdeci">uint64_t GUID</div><div class="ttdoc">Declare a type to represent a global unique identifier for a global value.</div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00583">GlobalValue.h:583</a></div></div>
<div class="ttc" id="aPGOInstrumentation_8cpp_html_af695245be16902715ac76f9f780edd4c"><div class="ttname"><a href="PGOInstrumentation_8cpp.html#af695245be16902715ac76f9f780edd4c">DoComdatRenaming</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; DoComdatRenaming(&quot;do-comdat-renaming&quot;, cl::init(false), cl::Hidden, cl::desc(&quot;Append function hash to the name of COMDAT function to avoid &quot; &quot;function hash mismatch due to the preinliner&quot;))</div></div>
<div class="ttc" id="aclassllvm_1_1SuccIterator_html"><div class="ttname"><a href="classllvm_1_1SuccIterator.html">llvm::SuccIterator</a></div><div class="ttdef"><b>Definition:</b> <a href="IR_2CFG_8h_source.html#l00138">CFG.h:138</a></div></div>
<div class="ttc" id="anamespacellvm_html_adda9c09012e0e9cacf0018ab757c9044"><div class="ttname"><a href="namespacellvm.html#adda9c09012e0e9cacf0018ab757c9044">llvm::isNewLikeFn</a></div><div class="ttdeci">bool isNewLikeFn(const Value *V, const TargetLibraryInfo *TLI)</div><div class="ttdoc">Tests if a value is a call or invoke to a library function that allocates memory via new.</div><div class="ttdef"><b>Definition:</b> <a href="MemoryBuiltins_8cpp_source.html#l00300">MemoryBuiltins.cpp:300</a></div></div>
<div class="ttc" id="aclassllvm_1_1PreservedAnalyses_html"><div class="ttname"><a href="classllvm_1_1PreservedAnalyses.html">llvm::PreservedAnalyses</a></div><div class="ttdoc">A set of analyses that are preserved following a run of a transformation pass.</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00152">PassManager.h:152</a></div></div>
<div class="ttc" id="anamespacellvm_1_1lltok_html_af353621f14cb4b4b3af5ffaff84076b1a56697632782c9ab774d6c132a955674a"><div class="ttname"><a href="namespacellvm_1_1lltok.html#af353621f14cb4b4b3af5ffaff84076b1a56697632782c9ab774d6c132a955674a">llvm::lltok::APFloat</a></div><div class="ttdeci">@ APFloat</div><div class="ttdef"><b>Definition:</b> <a href="LLToken_8h_source.html#l00461">LLToken.h:461</a></div></div>
<div class="ttc" id="aInstrumentation_8h_html"><div class="ttname"><a href="Instrumentation_8h.html">Instrumentation.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_a1986e27171aa79b40a0a4ae837dab71c"><div class="ttname"><a href="namespacellvm.html#a1986e27171aa79b40a0a4ae837dab71c">llvm::createPGOFuncNameMetadata</a></div><div class="ttdeci">void createPGOFuncNameMetadata(Function &amp;F, StringRef PGOFuncName)</div><div class="ttdoc">Create the PGOFuncName meta data if PGOFuncName is different from function's raw name.</div><div class="ttdef"><b>Definition:</b> <a href="InstrProf_8cpp_source.html#l01123">InstrProf.cpp:1123</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a0b4e7bee9b8575cc7db73329f1a561bd"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a0b4e7bee9b8575cc7db73329f1a561bd">llvm::BasicBlock::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00316">BasicBlock.h:316</a></div></div>
<div class="ttc" id="aclassllvm_1_1PGOInstrumentationUse_html_a59375b747523964f89162ae5708e805f"><div class="ttname"><a href="classllvm_1_1PGOInstrumentationUse.html#a59375b747523964f89162ae5708e805f">llvm::PGOInstrumentationUse::run</a></div><div class="ttdeci">PreservedAnalyses run(Module &amp;M, ModuleAnalysisManager &amp;AM)</div><div class="ttdef"><b>Definition:</b> <a href="PGOInstrumentation_8cpp_source.html#l02268">PGOInstrumentation.cpp:2268</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a3287172f2d13af086e6d66364e8c6de3"><div class="ttname"><a href="classllvm_1_1Instruction.html#a3287172f2d13af086e6d66364e8c6de3">llvm::Instruction::getNumSuccessors</a></div><div class="ttdeci">unsigned getNumSuccessors() const LLVM_READONLY</div><div class="ttdoc">Return the number of successors that this instruction has.</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8cpp_source.html#l00823">Instruction.cpp:823</a></div></div>
<div class="ttc" id="anamespacellvm_html"><div class="ttname"><a href="namespacellvm.html">llvm</a></div><div class="ttdoc">This is an optimization pass for GlobalISel generic memory operations.</div><div class="ttdef"><b>Definition:</b> <a href="AddressRanges_8h_source.html#l00018">AddressRanges.h:18</a></div></div>
<div class="ttc" id="aPGOInstrumentation_8cpp_html_a13254d395258a157ea8ce4a0e1a96050"><div class="ttname"><a href="PGOInstrumentation_8cpp.html#a13254d395258a157ea8ce4a0e1a96050">fixFuncEntryCount</a></div><div class="ttdeci">static void fixFuncEntryCount(PGOUseFunc &amp;Func, LoopInfo &amp;LI, BranchProbabilityInfo &amp;NBPI)</div><div class="ttdef"><b>Definition:</b> <a href="PGOInstrumentation_8cpp_source.html#l01940">PGOInstrumentation.cpp:1940</a></div></div>
<div class="ttc" id="astructllvm_1_1DOTGraphTraits_3_01PGOUseFunc_01_5_01_4_html_a487770f6cea6552c3893dfecfed34f2c"><div class="ttname"><a href="structllvm_1_1DOTGraphTraits_3_01PGOUseFunc_01_5_01_4.html#a487770f6cea6552c3893dfecfed34f2c">llvm::DOTGraphTraits&lt; PGOUseFunc * &gt;::DOTGraphTraits</a></div><div class="ttdeci">DOTGraphTraits(bool isSimple=false)</div><div class="ttdef"><b>Definition:</b> <a href="PGOInstrumentation_8cpp_source.html#l02380">PGOInstrumentation.cpp:2380</a></div></div>
<div class="ttc" id="astructllvm_1_1APFloatBase_html_a1373bb8e8796d3b0b642b42cf55296eca9f45fb1a56fb0564ec5ede93dad96cc4"><div class="ttname"><a href="structllvm_1_1APFloatBase.html#a1373bb8e8796d3b0b642b42cf55296eca9f45fb1a56fb0564ec5ede93dad96cc4">llvm::APFloatBase::cmpGreaterThan</a></div><div class="ttdeci">@ cmpGreaterThan</div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l00210">APFloat.h:210</a></div></div>
<div class="ttc" id="alib_2Target_2X86_2README_8txt_html_ac88fe1d3a61b056a4f64fbbb156a62ff"><div class="ttname"><a href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a></div><div class="ttdeci">We currently emits eax Perhaps this is what we really should generate is Is imull three or four cycles eax eax The current instruction priority is based on pattern complexity The former is more complex because it folds a load so the latter will not be emitted Perhaps we should use AddedComplexity to give LEA32r a higher priority We should always try to match LEA first since the LEA matching code does some estimate to determine whether the match is profitable if we care more about code then imull is better It s two bytes shorter than movl leal On a Pentium M</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2X86_2README_8txt_source.html#l00252">README.txt:252</a></div></div>
<div class="ttc" id="aREADME-SSE_8txt_html_a9ac32a0342c0b841550ee0c2412a245e"><div class="ttname"><a href="README-SSE_8txt.html#a9ac32a0342c0b841550ee0c2412a245e">c2</a></div><div class="ttdeci">This might compile to this xmm1 xorps xmm0 movss xmm0 ret Now consider if the code caused xmm1 to get spilled This might produce this xmm1 movaps c2(%esp) ... xorps %xmm0</div></div>
<div class="ttc" id="aIR_2Comdat_8h_html"><div class="ttname"><a href="IR_2Comdat_8h.html">Comdat.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_ad1a91b49e0c092818a0b82f6cc130a1b"><div class="ttname"><a href="namespacellvm.html#ad1a91b49e0c092818a0b82f6cc130a1b">llvm::make_range</a></div><div class="ttdeci">iterator_range&lt; T &gt; make_range(T x, T y)</div><div class="ttdoc">Convenience function for iterating over sub-ranges.</div><div class="ttdef"><b>Definition:</b> <a href="iterator__range_8h_source.html#l00053">iterator_range.h:53</a></div></div>
<div class="ttc" id="aclassllvm_1_1Comdat_html_a699b34b3b6301ffc6632c7c6f643b96a"><div class="ttname"><a href="classllvm_1_1Comdat.html#a699b34b3b6301ffc6632c7c6f643b96a">llvm::Comdat::getName</a></div><div class="ttdeci">StringRef getName() const</div><div class="ttdef"><b>Definition:</b> <a href="Comdat_8cpp_source.html#l00028">Comdat.cpp:28</a></div></div>
<div class="ttc" id="aclassllvm_1_1JamCRC_html_af4c43564c4a47b6d9741736e3962e279"><div class="ttname"><a href="classllvm_1_1JamCRC.html#af4c43564c4a47b6d9741736e3962e279">llvm::JamCRC::update</a></div><div class="ttdeci">void update(ArrayRef&lt; uint8_t &gt; Data)</div><div class="ttdef"><b>Definition:</b> <a href="CRC_8cpp_source.html#l00103">CRC.cpp:103</a></div></div>
<div class="ttc" id="aPGOInstrumentation_8cpp_html_ac57dae906fe8ac64efe52571121b0fe1"><div class="ttname"><a href="PGOInstrumentation_8cpp.html#ac57dae906fe8ac64efe52571121b0fe1">ProfileCount</a></div><div class="ttdeci">Function::ProfileCount ProfileCount</div><div class="ttdef"><b>Definition:</b> <a href="PGOInstrumentation_8cpp_source.html#l00134">PGOInstrumentation.cpp:134</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a7fe9ccd4893f4e2caa826126c09545ea"><div class="ttname"><a href="classllvm_1_1Type.html#a7fe9ccd4893f4e2caa826126c09545ea">llvm::Type::getInt8PtrTy</a></div><div class="ttdeci">static PointerType * getInt8PtrTy(LLVMContext &amp;C, unsigned AS=0)</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00293">Type.cpp:293</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a38bee869ad41aebfef3de2641b12004c"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a38bee869ad41aebfef3de2641b12004c">llvm::BasicBlock::getParent</a></div><div class="ttdeci">const Function * getParent() const</div><div class="ttdoc">Return the enclosing method, or null if none.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00112">BasicBlock.h:112</a></div></div>
<div class="ttc" id="aIntrinsicInst_8h_html"><div class="ttname"><a href="IntrinsicInst_8h.html">IntrinsicInst.h</a></div></div>
<div class="ttc" id="astructllvm_1_1memprof_1_1Frame_html_ae3b8be97956cbb13486f1c719dcaae83"><div class="ttname"><a href="structllvm_1_1memprof_1_1Frame.html#ae3b8be97956cbb13486f1c719dcaae83">llvm::memprof::Frame::LineOffset</a></div><div class="ttdeci">uint32_t LineOffset</div><div class="ttdef"><b>Definition:</b> <a href="MemProf_8h_source.html#l00150">MemProf.h:150</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstrProfError_html_a96b55da6ec9ae33927f592619ea801ba"><div class="ttname"><a href="classllvm_1_1InstrProfError.html#a96b55da6ec9ae33927f592619ea801ba">llvm::InstrProfError::message</a></div><div class="ttdeci">std::string message() const override</div><div class="ttdoc">Return the error message as a string.</div><div class="ttdef"><b>Definition:</b> <a href="InstrProf_8cpp_source.html#l00257">InstrProf.cpp:257</a></div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisManager_html_ab9d3d5412c20747fd0110a046604f09a"><div class="ttname"><a href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">llvm::AnalysisManager::getResult</a></div><div class="ttdeci">PassT::Result &amp; getResult(IRUnitT &amp;IR, ExtraArgTs... ExtraArgs)</div><div class="ttdoc">Get the result of an analysis pass for a given IR unit.</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00774">PassManager.h:774</a></div></div>
<div class="ttc" id="anamespacellvm_html_a069c4ae2290101bde0f8d6a5074dc72b"><div class="ttname"><a href="namespacellvm.html#a069c4ae2290101bde0f8d6a5074dc72b">llvm::succ_end</a></div><div class="ttdeci">Interval::succ_iterator succ_end(Interval *I)</div><div class="ttdef"><b>Definition:</b> <a href="Interval_8h_source.html#l00102">Interval.h:102</a></div></div>
<div class="ttc" id="astructllvm_1_1InstrProfRecord_html_a2f346f3e1d5674bdebde0b5017deec68"><div class="ttname"><a href="structllvm_1_1InstrProfRecord.html#a2f346f3e1d5674bdebde0b5017deec68">llvm::InstrProfRecord::getCountPseudoKind</a></div><div class="ttdeci">CountPseudoKind getCountPseudoKind() const</div><div class="ttdef"><b>Definition:</b> <a href="InstrProf_8h_source.html#l00836">InstrProf.h:836</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalValue_html_a9141f967188383108a69cc1b8ed3c195a7eade123587a08e674f2ca72e2443771"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#a9141f967188383108a69cc1b8ed3c195a7eade123587a08e674f2ca72e2443771">llvm::GlobalValue::HiddenVisibility</a></div><div class="ttdeci">@ HiddenVisibility</div><div class="ttdoc">The GV is hidden.</div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00064">GlobalValue.h:64</a></div></div>
<div class="ttc" id="aclassllvm_1_1CFGMST_html_a17b5cf4be5972f880ce4aeece803b217"><div class="ttname"><a href="classllvm_1_1CFGMST.html#a17b5cf4be5972f880ce4aeece803b217">llvm::CFGMST::getBBInfo</a></div><div class="ttdeci">BBInfo &amp; getBBInfo(const BasicBlock *BB) const</div><div class="ttdef"><b>Definition:</b> <a href="CFGMST_8h_source.html#l00083">CFGMST.h:83</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html"><div class="ttname"><a href="classllvm_1_1Function.html">llvm::Function</a></div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00059">Function.h:59</a></div></div>
<div class="ttc" id="aProfileSummary_8h_html"><div class="ttname"><a href="ProfileSummary_8h.html">ProfileSummary.h</a></div></div>
<div class="ttc" id="aStringRef_8h_html"><div class="ttname"><a href="StringRef_8h.html">StringRef.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1raw__string__ostream_html"><div class="ttname"><a href="classllvm_1_1raw__string__ostream.html">llvm::raw_string_ostream</a></div><div class="ttdoc">A raw_ostream that writes to an std::string.</div><div class="ttdef"><b>Definition:</b> <a href="raw__ostream_8h_source.html#l00642">raw_ostream.h:642</a></div></div>
<div class="ttc" id="anamespacellvm_1_1memprof_html_adc745ebd4690ff67eccf4e11b0884764"><div class="ttname"><a href="namespacellvm_1_1memprof.html#adc745ebd4690ff67eccf4e11b0884764">llvm::memprof::getAllocType</a></div><div class="ttdeci">AllocationType getAllocType(uint64_t MaxAccessCount, uint64_t MinSize, uint64_t MinLifetime)</div><div class="ttdoc">Return the allocation type for a given set of memory profile values.</div><div class="ttdef"><b>Definition:</b> <a href="MemoryProfileInfo_8cpp_source.html#l00034">MemoryProfileInfo.cpp:34</a></div></div>
<div class="ttc" id="astructllvm_1_1DOTGraphTraits_3_01PGOUseFunc_01_5_01_4_html_a87fac7c81b9184969a6d22f0ae7840bc"><div class="ttname"><a href="structllvm_1_1DOTGraphTraits_3_01PGOUseFunc_01_5_01_4.html#a87fac7c81b9184969a6d22f0ae7840bc">llvm::DOTGraphTraits&lt; PGOUseFunc * &gt;::getNodeLabel</a></div><div class="ttdeci">std::string getNodeLabel(const BasicBlock *Node, const PGOUseFunc *Graph)</div><div class="ttdef"><b>Definition:</b> <a href="PGOInstrumentation_8cpp_source.html#l02387">PGOInstrumentation.cpp:2387</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVector_html"><div class="ttname"><a href="classllvm_1_1SmallVector.html">llvm::SmallVector</a></div><div class="ttdoc">This is a 'vector' (really, a variable-sized array), optimized for the case when the array is small.</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l01199">SmallVector.h:1199</a></div></div>
<div class="ttc" id="aStatistic_8h_html"><div class="ttname"><a href="Statistic_8h.html">Statistic.h</a></div></div>
<div class="ttc" id="anamespacellvm_1_1RISCVFenceField_html_a147be9e9780c1e33363ea572d4c7b25fa05c79fbfc58d9dd2851c467a1ef166bf"><div class="ttname"><a href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa05c79fbfc58d9dd2851c467a1ef166bf">llvm::RISCVFenceField::W</a></div><div class="ttdeci">@ W</div><div class="ttdef"><b>Definition:</b> <a href="RISCVBaseInfo_8h_source.html#l00279">RISCVBaseInfo.h:279</a></div></div>
<div class="ttc" id="aclassllvm_1_1ProfileSummaryInfo_html_ae48ebfb8f85e9b59325d20cdc9299f0e"><div class="ttname"><a href="classllvm_1_1ProfileSummaryInfo.html#ae48ebfb8f85e9b59325d20cdc9299f0e">llvm::ProfileSummaryInfo::getOrCompHotCountThreshold</a></div><div class="ttdeci">uint64_t getOrCompHotCountThreshold() const</div><div class="ttdoc">Returns HotCountThreshold if set.</div><div class="ttdef"><b>Definition:</b> <a href="ProfileSummaryInfo_8cpp_source.html#l00320">ProfileSummaryInfo.cpp:320</a></div></div>
<div class="ttc" id="aPGOInstrumentation_8cpp_html_a27f871f575879ada4f8812e277d95db6"><div class="ttname"><a href="PGOInstrumentation_8cpp.html#a27f871f575879ada4f8812e277d95db6">PGOTestProfileRemappingFile</a></div><div class="ttdeci">static cl::opt&lt; std::string &gt; PGOTestProfileRemappingFile(&quot;pgo-test-profile-remapping-file&quot;, cl::init(&quot;&quot;), cl::Hidden, cl::value_desc(&quot;filename&quot;), cl::desc(&quot;Specify the path of profile remapping file. This is mainly for &quot; &quot;test purpose.&quot;))</div></div>
<div class="ttc" id="anamespacellvm_html_a133c5cb70e0ea68fc5e503b7a7732390"><div class="ttname"><a href="namespacellvm.html#a133c5cb70e0ea68fc5e503b7a7732390">llvm::getPGOFuncName</a></div><div class="ttdeci">std::string getPGOFuncName(const Function &amp;F, bool InLTO=false, uint64_t Version=INSTR_PROF_INDEX_VERSION)</div><div class="ttdoc">Return the modified name for function F suitable to be used the key for profile lookup.</div><div class="ttdef"><b>Definition:</b> <a href="InstrProf_8cpp_source.html#l00301">InstrProf.cpp:301</a></div></div>
<div class="ttc" id="aPGOInstrumentation_8cpp_html_abe1ab937183696b53ab6551e4c30bf29"><div class="ttname"><a href="PGOInstrumentation_8cpp.html#abe1ab937183696b53ab6551e4c30bf29">sumEdgeCount</a></div><div class="ttdeci">static uint64_t sumEdgeCount(const ArrayRef&lt; PGOUseEdge * &gt; Edges)</div><div class="ttdef"><b>Definition:</b> <a href="PGOInstrumentation_8cpp_source.html#l01017">PGOInstrumentation.cpp:1017</a></div></div>
<div class="ttc" id="aSupport_2ErrorHandling_8h_html"><div class="ttname"><a href="Support_2ErrorHandling_8h.html">ErrorHandling.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstrProfError_html_a6e8a1d80ae07c47bbbcc323bf619e2c2"><div class="ttname"><a href="classllvm_1_1InstrProfError.html#a6e8a1d80ae07c47bbbcc323bf619e2c2">llvm::InstrProfError::get</a></div><div class="ttdeci">instrprof_error get() const</div><div class="ttdef"><b>Definition:</b> <a href="InstrProf_8h_source.html#l00353">InstrProf.h:353</a></div></div>
<div class="ttc" id="aclassllvm_1_1IRBuilder_html"><div class="ttname"><a href="classllvm_1_1IRBuilder.html">llvm::IRBuilder&lt;&gt;</a></div></div>
<div class="ttc" id="aPGOInstrumentation_8cpp_html_a9aaca6442eb66832c60ea0efb77a2486"><div class="ttname"><a href="PGOInstrumentation_8cpp.html#a9aaca6442eb66832c60ea0efb77a2486">PGOVerifyBFI</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; PGOVerifyBFI(&quot;pgo-verify-bfi&quot;, cl::init(false), cl::Hidden, cl::desc(&quot;Print out mismatched BFI counts after setting profile metadata &quot; &quot;The print is enabled under -Rpass-analysis=pgo, or &quot; &quot;internal option -pass-remakrs-analysis=pgo.&quot;))</div></div>
<div class="ttc" id="aclassllvm_1_1GlobalVariable_html"><div class="ttname"><a href="classllvm_1_1GlobalVariable.html">llvm::GlobalVariable</a></div><div class="ttdef"><b>Definition:</b> <a href="GlobalVariable_8h_source.html#l00039">GlobalVariable.h:39</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantExpr_html_ae79d05dd3d0b05e080e08f8c5c33f880"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#ae79d05dd3d0b05e080e08f8c5c33f880">llvm::ConstantExpr::getBitCast</a></div><div class="ttdeci">static Constant * getBitCast(Constant *C, Type *Ty, bool OnlyIfReduced=false)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l02229">Constants.cpp:2229</a></div></div>
<div class="ttc" id="anamespaceR600__InstFlag_html_a23106439cc906be24dc8953eedd3940da8949a42ff4563a29d1e70e18338fd522"><div class="ttname"><a href="namespaceR600__InstFlag.html#a23106439cc906be24dc8953eedd3940da8949a42ff4563a29d1e70e18338fd522">R600_InstFlag::FC</a></div><div class="ttdeci">@ FC</div><div class="ttdef"><b>Definition:</b> <a href="R600Defines_8h_source.html#l00032">R600Defines.h:32</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalAlias_html"><div class="ttname"><a href="classllvm_1_1GlobalAlias.html">llvm::GlobalAlias</a></div><div class="ttdef"><b>Definition:</b> <a href="GlobalAlias_8h_source.html#l00028">GlobalAlias.h:28</a></div></div>
<div class="ttc" id="aSupport_2Error_8h_html"><div class="ttname"><a href="Support_2Error_8h.html">Error.h</a></div></div>
<div class="ttc" id="aOptimizationRemarkEmitter_8h_html"><div class="ttname"><a href="OptimizationRemarkEmitter_8h.html">OptimizationRemarkEmitter.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1DominatorTree_html"><div class="ttname"><a href="classllvm_1_1DominatorTree.html">llvm::DominatorTree</a></div><div class="ttdoc">Concrete subclass of DominatorTreeBase that is used to compute a normal dominator tree.</div><div class="ttdef"><b>Definition:</b> <a href="Dominators_8h_source.html#l00166">Dominators.h:166</a></div></div>
<div class="ttc" id="aclassllvm_1_1Triple_html"><div class="ttname"><a href="classllvm_1_1Triple.html">llvm::Triple</a></div><div class="ttdoc">Triple - Helper class for working with autoconf configuration names.</div><div class="ttdef"><b>Definition:</b> <a href="Triple_8h_source.html#l00044">Triple.h:44</a></div></div>
<div class="ttc" id="aPassBuilderBindings_8cpp_html_a83c7e5ca51099e4efa895791a02fb0ed"><div class="ttname"><a href="PassBuilderBindings_8cpp.html#a83c7e5ca51099e4efa895791a02fb0ed">FAM</a></div><div class="ttdeci">FunctionAnalysisManager FAM</div><div class="ttdef"><b>Definition:</b> <a href="PassBuilderBindings_8cpp_source.html#l00059">PassBuilderBindings.cpp:59</a></div></div>
<div class="ttc" id="anamespacellvm_html_a6791ec50da8cffef53eae412b5b90936"><div class="ttname"><a href="namespacellvm.html#a6791ec50da8cffef53eae412b5b90936">llvm::createPGOFuncNameVar</a></div><div class="ttdeci">GlobalVariable * createPGOFuncNameVar(Function &amp;F, StringRef PGOFuncName)</div><div class="ttdoc">Create and return the global variable for function name used in PGO instrumentation.</div><div class="ttdef"><b>Definition:</b> <a href="InstrProf_8cpp_source.html#l00380">InstrProf.cpp:380</a></div></div>
<div class="ttc" id="anamespacellvm_1_1tgtok_html_abbc5259d649363016626e2529fabe0c5a218a3df235546fc092fe0f463e6b714d"><div class="ttname"><a href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a218a3df235546fc092fe0f463e6b714d">llvm::tgtok::VarName</a></div><div class="ttdeci">@ VarName</div><div class="ttdef"><b>Definition:</b> <a href="TGLexer_8h_source.html#l00072">TGLexer.h:72</a></div></div>
<div class="ttc" id="anamespacellvm_1_1coverage_1_1accessors_html_ae52b19d4c976e143b7a6d3d2f7d029a3"><div class="ttname"><a href="namespacellvm_1_1coverage_1_1accessors.html#ae52b19d4c976e143b7a6d3d2f7d029a3">llvm::coverage::accessors::getFuncHash</a></div><div class="ttdeci">uint64_t getFuncHash(const FuncRecordTy *Record)</div><div class="ttdoc">Return the structural hash associated with the function.</div><div class="ttdef"><b>Definition:</b> <a href="CoverageMapping_8h_source.html#l00790">CoverageMapping.h:790</a></div></div>
<div class="ttc" id="anamespacellvm_1_1cl_html_a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6"><div class="ttname"><a href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">llvm::cl::Hidden</a></div><div class="ttdeci">@ Hidden</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00138">CommandLine.h:138</a></div></div>
<div class="ttc" id="aAPInt_8h_html"><div class="ttname"><a href="APInt_8h.html">APInt.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1DILocation_html"><div class="ttname"><a href="classllvm_1_1DILocation.html">llvm::DILocation</a></div><div class="ttdoc">Debug location.</div><div class="ttdef"><b>Definition:</b> <a href="DebugInfoMetadata_8h_source.html#l01605">DebugInfoMetadata.h:1605</a></div></div>
<div class="ttc" id="aclassllvm_1_1PreservedAnalyses_html_a03797a73044a81cbc6a3409d6c72ee8f"><div class="ttname"><a href="classllvm_1_1PreservedAnalyses.html#a03797a73044a81cbc6a3409d6c72ee8f">llvm::PreservedAnalyses::none</a></div><div class="ttdeci">static PreservedAnalyses none()</div><div class="ttdoc">Convenience factory function for the empty preserved set.</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00155">PassManager.h:155</a></div></div>
<div class="ttc" id="aPGOInstrumentation_8cpp_html_aa9fc7fa9e1e94557d9201ab1b5cd017e"><div class="ttname"><a href="PGOInstrumentation_8cpp.html#aa9fc7fa9e1e94557d9201ab1b5cd017e">PGOInstrSelect</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; PGOInstrSelect(&quot;pgo-instr-select&quot;, cl::init(true), cl::Hidden, cl::desc(&quot;Use this option to turn on/off SELECT &quot; &quot;instruction instrumentation. &quot;))</div></div>
<div class="ttc" id="aclassllvm_1_1Type_html"><div class="ttname"><a href="classllvm_1_1Type.html">llvm::Type</a></div><div class="ttdoc">The instances of the Type class are immutable: once they are created, they are never changed.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00045">Type.h:45</a></div></div>
<div class="ttc" id="anamespacellvm_html_af5ab7a47bc553dfc3ee92daf969d0d7ca96b0141273eabab320119c467cdcaf17"><div class="ttname"><a href="namespacellvm.html#af5ab7a47bc553dfc3ee92daf969d0d7ca96b0141273eabab320119c467cdcaf17">llvm::TensorType::Total</a></div><div class="ttdeci">@ Total</div></div>
<div class="ttc" id="anamespacellvm_html_ab61955a622d233750894890e0704da5c"><div class="ttname"><a href="namespacellvm.html#ab61955a622d233750894890e0704da5c">llvm::SplitCriticalEdge</a></div><div class="ttdeci">BasicBlock * SplitCriticalEdge(Instruction *TI, unsigned SuccNum, const CriticalEdgeSplittingOptions &amp;Options=CriticalEdgeSplittingOptions(), const Twine &amp;BBName=&quot;&quot;)</div><div class="ttdoc">If this edge is a critical edge, insert a new node to split the critical edge.</div><div class="ttdef"><b>Definition:</b> <a href="BreakCriticalEdges_8cpp_source.html#l00101">BreakCriticalEdges.cpp:101</a></div></div>
<div class="ttc" id="aModule_8h_html"><div class="ttname"><a href="Module_8h.html">Module.h</a></div></div>
<div class="ttc" id="aMemoryBuiltins_8h_html"><div class="ttname"><a href="MemoryBuiltins_8h.html">MemoryBuiltins.h</a></div></div>
<div class="ttc" id="astructllvm_1_1GraphTraits_3_01PGOUseFunc_01_5_01_4_html_a5d8d5ca83eb5d9254823202d208a0bdd"><div class="ttname"><a href="structllvm_1_1GraphTraits_3_01PGOUseFunc_01_5_01_4.html#a5d8d5ca83eb5d9254823202d208a0bdd">llvm::GraphTraits&lt; PGOUseFunc * &gt;::nodes_end</a></div><div class="ttdeci">static nodes_iterator nodes_end(const PGOUseFunc *G)</div><div class="ttdef"><b>Definition:</b> <a href="PGOInstrumentation_8cpp_source.html#l02374">PGOInstrumentation.cpp:2374</a></div></div>
<div class="ttc" id="aEHPersonalities_8h_html"><div class="ttname"><a href="EHPersonalities_8h.html">EHPersonalities.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1memprof_1_1CallStackTrie_html_ab9f10c4267af88a1bd143a7260d2ac8f"><div class="ttname"><a href="classllvm_1_1memprof_1_1CallStackTrie.html#ab9f10c4267af88a1bd143a7260d2ac8f">llvm::memprof::CallStackTrie::buildAndAttachMIBMetadata</a></div><div class="ttdeci">bool buildAndAttachMIBMetadata(CallBase *CI)</div><div class="ttdoc">Build and attach the minimal necessary MIB metadata.</div><div class="ttdef"><b>Definition:</b> <a href="MemoryProfileInfo_8cpp_source.html#l00210">MemoryProfileInfo.cpp:210</a></div></div>
<div class="ttc" id="aclassllvm_1_1CFGMST_html_a4f5c3cf1b796e8a06de4665e74349bf9"><div class="ttname"><a href="classllvm_1_1CFGMST.html#a4f5c3cf1b796e8a06de4665e74349bf9">llvm::CFGMST::AllEdges</a></div><div class="ttdeci">std::vector&lt; std::unique_ptr&lt; Edge &gt; &gt; AllEdges</div><div class="ttdef"><b>Definition:</b> <a href="CFGMST_8h_source.html#l00045">CFGMST.h:45</a></div></div>
<div class="ttc" id="aclassllvm_1_1TinyPtrVector_html_a3a26404d33061e8aaeab39c490181389"><div class="ttname"><a href="classllvm_1_1TinyPtrVector.html#a3a26404d33061e8aaeab39c490181389">llvm::TinyPtrVector::front</a></div><div class="ttdeci">EltTy front() const</div><div class="ttdef"><b>Definition:</b> <a href="TinyPtrVector_8h_source.html#l00229">TinyPtrVector.h:229</a></div></div>
<div class="ttc" id="aPGOInstrumentation_8cpp_html_af9aed68fe80c345b463bac679b1c18f3"><div class="ttname"><a href="PGOInstrumentation_8cpp.html#af9aed68fe80c345b463bac679b1c18f3">annotateAllFunctions</a></div><div class="ttdeci">static bool annotateAllFunctions(Module &amp;M, StringRef ProfileFileName, StringRef ProfileRemappingFileName, vfs::FileSystem &amp;FS, function_ref&lt; TargetLibraryInfo &amp;(Function &amp;)&gt; LookupTLI, function_ref&lt; BranchProbabilityInfo *(Function &amp;)&gt; LookupBPI, function_ref&lt; BlockFrequencyInfo *(Function &amp;)&gt; LookupBFI, ProfileSummaryInfo *PSI, bool IsCS)</div><div class="ttdef"><b>Definition:</b> <a href="PGOInstrumentation_8cpp_source.html#l02061">PGOInstrumentation.cpp:2061</a></div></div>
<div class="ttc" id="astructllvm_1_1InstrProfRecord_html_a69bdbaedb4ae6b233e5eccac5ebc2d77af66fe9759d6bc934e927ced864653318"><div class="ttname"><a href="structllvm_1_1InstrProfRecord.html#a69bdbaedb4ae6b233e5eccac5ebc2d77af66fe9759d6bc934e927ced864653318">llvm::InstrProfRecord::PseudoHot</a></div><div class="ttdeci">@ PseudoHot</div><div class="ttdef"><b>Definition:</b> <a href="InstrProf_8h_source.html#l00829">InstrProf.h:829</a></div></div>
<div class="ttc" id="anamespacellvm_1_1ore_html_a8f5533240c6722d987a2443cba42019d"><div class="ttname"><a href="namespacellvm_1_1ore.html#a8f5533240c6722d987a2443cba42019d">llvm::ore::NV</a></div><div class="ttdeci">DiagnosticInfoOptimizationBase::Argument NV</div><div class="ttdef"><b>Definition:</b> <a href="OptimizationRemarkEmitter_8h_source.html#l00136">OptimizationRemarkEmitter.h:136</a></div></div>
<div class="ttc" id="aclassllvm_1_1JamCRC_html"><div class="ttname"><a href="classllvm_1_1JamCRC.html">llvm::JamCRC</a></div><div class="ttdef"><b>Definition:</b> <a href="CRC_8h_source.html#l00045">CRC.h:45</a></div></div>
<div class="ttc" id="astructllvm_1_1GraphTraits_3_01PGOUseFunc_01_5_01_4_html_a118bfffc5d39b2c022855b2dc48b598d"><div class="ttname"><a href="structllvm_1_1GraphTraits_3_01PGOUseFunc_01_5_01_4.html#a118bfffc5d39b2c022855b2dc48b598d">llvm::GraphTraits&lt; PGOUseFunc * &gt;::child_end</a></div><div class="ttdeci">static ChildIteratorType child_end(const NodeRef N)</div><div class="ttdef"><b>Definition:</b> <a href="PGOInstrumentation_8cpp_source.html#l02368">PGOInstrumentation.cpp:2368</a></div></div>
<div class="ttc" id="anamespacellvm_html_ab4d4bc901fedd8857f647dcc2c0d71de"><div class="ttname"><a href="namespacellvm.html#ab4d4bc901fedd8857f647dcc2c0d71de">llvm::max</a></div><div class="ttdeci">Expected&lt; ExpressionValue &gt; max(const ExpressionValue &amp;Lhs, const ExpressionValue &amp;Rhs)</div><div class="ttdef"><b>Definition:</b> <a href="FileCheck_8cpp_source.html#l00337">FileCheck.cpp:337</a></div></div>
<div class="ttc" id="anamespacellvm_html_ababcf5a1223c36cb7c547c5b34c6416c"><div class="ttname"><a href="namespacellvm.html#ababcf5a1223c36cb7c547c5b34c6416c">llvm::isCriticalEdge</a></div><div class="ttdeci">bool isCriticalEdge(const Instruction *TI, unsigned SuccNum, bool AllowIdenticalEdges=false)</div><div class="ttdoc">Return true if the specified edge is a critical edge.</div><div class="ttdef"><b>Definition:</b> <a href="CFG_8cpp_source.html#l00095">CFG.cpp:95</a></div></div>
<div class="ttc" id="anamespacellvm_html_ab8635363d4287c93f64c55ad5567fcf0"><div class="ttname"><a href="namespacellvm.html#ab8635363d4287c93f64c55ad5567fcf0">llvm::ViewGraph</a></div><div class="ttdeci">void ViewGraph(const GraphType &amp;G, const Twine &amp;Name, bool ShortNames=false, const Twine &amp;Title=&quot;&quot;, GraphProgram::Name Program=GraphProgram::DOT)</div><div class="ttdoc">ViewGraph - Emit a dot graph, run 'dot', run gv on the postscript file, then cleanup.</div><div class="ttdef"><b>Definition:</b> <a href="GraphWriter_8h_source.html#l00427">GraphWriter.h:427</a></div></div>
<div class="ttc" id="aclassllvm_1_1Expected_html"><div class="ttname"><a href="classllvm_1_1Expected.html">llvm::Expected</a></div><div class="ttdoc">Tagged union holding either a T or a Error.</div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l00041">APFloat.h:41</a></div></div>
<div class="ttc" id="aSTLExtras_8h_html"><div class="ttname"><a href="STLExtras_8h.html">STLExtras.h</a></div></div>
<div class="ttc" id="aX86PartialReduction_8cpp_html_a87b8bfbbe9d8f7146d7f20a5fb42efd0"><div class="ttname"><a href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a></div><div class="ttdeci">Value * RHS</div><div class="ttdef"><b>Definition:</b> <a href="X86PartialReduction_8cpp_source.html#l00076">X86PartialReduction.cpp:76</a></div></div>
<div class="ttc" id="anamespacellvm_html_abd35d43ef05edd633413fa4cfa802c0e"><div class="ttname"><a href="namespacellvm.html#abd35d43ef05edd633413fa4cfa802c0e">llvm::createProfileFileNameVar</a></div><div class="ttdeci">void createProfileFileNameVar(Module &amp;M, StringRef InstrProfileOutput)</div><div class="ttdef"><b>Definition:</b> <a href="InstrProf_8cpp_source.html#l01206">InstrProf.cpp:1206</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_aa68a2d2c06a10b1e5a5bc778a107c0ba"><div class="ttname"><a href="classllvm_1_1CmpInst.html#aa68a2d2c06a10b1e5a5bc778a107c0ba">llvm::CmpInst::getPredicateName</a></div><div class="ttdeci">static StringRef getPredicateName(Predicate P)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l04109">Instructions.cpp:4109</a></div></div>
<div class="ttc" id="aCFGMST_8h_html"><div class="ttname"><a href="CFGMST_8h.html">CFGMST.h</a></div></div>
<div class="ttc" id="aCompiler_8h_html_acc1c483f4b4ee2f17bb6643a3b353609"><div class="ttname"><a href="Compiler_8h.html#acc1c483f4b4ee2f17bb6643a3b353609">LLVM_ATTRIBUTE_UNUSED</a></div><div class="ttdeci">#define LLVM_ATTRIBUTE_UNUSED</div><div class="ttdef"><b>Definition:</b> <a href="Compiler_8h_source.html#l00172">Compiler.h:172</a></div></div>
<div class="ttc" id="anamespacellvm_html_a726a37ae665057b176aba58871cf0616ac7b397abc7fb6a7e89be33a420289bc8"><div class="ttname"><a href="namespacellvm.html#a726a37ae665057b176aba58871cf0616ac7b397abc7fb6a7e89be33a420289bc8">llvm::PGOVCT_Text</a></div><div class="ttdeci">@ PGOVCT_Text</div><div class="ttdef"><b>Definition:</b> <a href="BlockFrequencyInfo_8h_source.html#l00033">BlockFrequencyInfo.h:33</a></div></div>
<div class="ttc" id="anamespacellvm_html_ae551fe3e2b167b36005b26473e993884a26aa2e7865f749b52f3b77991776c40d"><div class="ttname"><a href="namespacellvm.html#ae551fe3e2b167b36005b26473e993884a26aa2e7865f749b52f3b77991776c40d">llvm::Data</a></div><div class="ttdeci">@ Data</div><div class="ttdef"><b>Definition:</b> <a href="SIMachineScheduler_8h_source.html#l00055">SIMachineScheduler.h:55</a></div></div>
<div class="ttc" id="aDebug_8h_html_a08efc68d15935eb8889400a46c3749ba"><div class="ttname"><a href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a></div><div class="ttdeci">#define LLVM_DEBUG(X)</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8h_source.html#l00101">Debug.h:101</a></div></div>
<div class="ttc" id="astructllvm_1_1InstrProfRecord_html"><div class="ttname"><a href="structllvm_1_1InstrProfRecord.html">llvm::InstrProfRecord</a></div><div class="ttdoc">Profiling information for a single function.</div><div class="ttdef"><b>Definition:</b> <a href="InstrProf_8h_source.html#l00730">InstrProf.h:730</a></div></div>
<div class="ttc" id="aMD5_8cpp_html_a96d73bbd7af15cb1fc38c3f4a3bd82e9"><div class="ttname"><a href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a></div><div class="ttdeci">#define F(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00055">MD5.cpp:55</a></div></div>
<div class="ttc" id="aInstrProfData_8inc_html"><div class="ttname"><a href="InstrProfData_8inc.html">InstrProfData.inc</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a9247a212ea89acc9573fa7e7f557eaba"><div class="ttname"><a href="classllvm_1_1Instruction.html#a9247a212ea89acc9573fa7e7f557eaba">llvm::Instruction::setMetadata</a></div><div class="ttdeci">void setMetadata(unsigned KindID, MDNode *Node)</div><div class="ttdoc">Set the metadata of the specified kind to the specified node.</div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8cpp_source.html#l01455">Metadata.cpp:1455</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html"><div class="ttname"><a href="classllvm_1_1BasicBlock.html">llvm::BasicBlock</a></div><div class="ttdoc">LLVM Basic Block Representation.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00055">BasicBlock.h:55</a></div></div>
<div class="ttc" id="aREADME__P9_8txt_html_ae070adaf1b4bf0e7c12fcae2b9c5ae67"><div class="ttname"><a href="README__P9_8txt.html#ae070adaf1b4bf0e7c12fcae2b9c5ae67">result</a></div><div class="ttdeci">It looks like we only need to define PPCfmarto for these because according to these instructions perform RTO on fma s result</div><div class="ttdef"><b>Definition:</b> <a href="README__P9_8txt_source.html#l00256">README_P9.txt:256</a></div></div>
<div class="ttc" id="aclassllvm_1_1memprof_1_1CallStackTrie_html_a8764bb32436ceef74c9a8cdfc0da0e28"><div class="ttname"><a href="classllvm_1_1memprof_1_1CallStackTrie.html#a8764bb32436ceef74c9a8cdfc0da0e28">llvm::memprof::CallStackTrie::empty</a></div><div class="ttdeci">bool empty() const</div><div class="ttdef"><b>Definition:</b> <a href="MemoryProfileInfo_8h_source.html#l00080">MemoryProfileInfo.h:80</a></div></div>
<div class="ttc" id="aPGOInstrumentation_8cpp_html_af20b9ff6164a82cda5c7ea2269404a5b"><div class="ttname"><a href="PGOInstrumentation_8cpp.html#af20b9ff6164a82cda5c7ea2269404a5b">PGOWarnMissing</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; PGOWarnMissing(&quot;pgo-warn-missing-function&quot;, cl::init(false), cl::Hidden, cl::desc(&quot;Use this option to turn on/off &quot; &quot;warnings about missing profile data for &quot; &quot;functions.&quot;))</div></div>
<div class="ttc" id="anamespacellvm_html_a7c46c742c31be54870e2038048e6b391"><div class="ttname"><a href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">llvm::dbgs</a></div><div class="ttdeci">raw_ostream &amp; dbgs()</div><div class="ttdoc">dbgs() - This returns a reference to a raw_ostream for debugging messages.</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8cpp_source.html#l00163">Debug.cpp:163</a></div></div>
<div class="ttc" id="anamespacellvm_html_a8d508f23e2580095561902c39911fb9b"><div class="ttname"><a href="namespacellvm.html#a8d508f23e2580095561902c39911fb9b">llvm::classifyEHPersonality</a></div><div class="ttdeci">EHPersonality classifyEHPersonality(const Value *Pers)</div><div class="ttdoc">See if the given exception handling personality function is one that we understand.</div><div class="ttdef"><b>Definition:</b> <a href="EHPersonalities_8cpp_source.html#l00022">EHPersonalities.cpp:22</a></div></div>
<div class="ttc" id="astructllvm_1_1memprof_1_1AllocationInfo_html"><div class="ttname"><a href="structllvm_1_1memprof_1_1AllocationInfo.html">llvm::memprof::AllocationInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="MemProf_8h_source.html#l00293">MemProf.h:293</a></div></div>
<div class="ttc" id="aIR_2Instruction_8h_html"><div class="ttname"><a href="IR_2Instruction_8h.html">Instruction.h</a></div></div>
<div class="ttc" id="aPGOInstrumentation_8cpp_html_aa64a0f86c47358606fcb6bd03927e030"><div class="ttname"><a href="PGOInstrumentation_8cpp.html#aa64a0f86c47358606fcb6bd03927e030">PGOInstrumentEntry</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; PGOInstrumentEntry(&quot;pgo-instrument-entry&quot;, cl::init(false), cl::Hidden, cl::desc(&quot;Force to instrument function entry basicblock.&quot;))</div></div>
<div class="ttc" id="aCommandLine_8h_html"><div class="ttname"><a href="CommandLine_8h.html">CommandLine.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1APFloat_html_af591f8d18d0d9773192a0ffcca41796e"><div class="ttname"><a href="classllvm_1_1APFloat.html#af591f8d18d0d9773192a0ffcca41796e">llvm::APFloat::getZero</a></div><div class="ttdeci">static APFloat getZero(const fltSemantics &amp;Sem, bool Negative=false)</div><div class="ttdoc">Factory for Positive and Negative Zero.</div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l00921">APFloat.h:921</a></div></div>
<div class="ttc" id="aclassllvm_1_1IndexedInstrProfReader_html_a3a407188a6ba7b6157bba98b0df6c184"><div class="ttname"><a href="classllvm_1_1IndexedInstrProfReader.html#a3a407188a6ba7b6157bba98b0df6c184">llvm::IndexedInstrProfReader::getInstrProfRecord</a></div><div class="ttdeci">Expected&lt; InstrProfRecord &gt; getInstrProfRecord(StringRef FuncName, uint64_t FuncHash, uint64_t *MismatchedFuncSum=nullptr)</div><div class="ttdoc">Return the NamedInstrProfRecord associated with FuncName and FuncHash.</div><div class="ttdef"><b>Definition:</b> <a href="InstrProfReader_8cpp_source.html#l01092">InstrProfReader.cpp:1092</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantInt_html"><div class="ttname"><a href="classllvm_1_1ConstantInt.html">llvm::ConstantInt</a></div><div class="ttdoc">This is the shared class of boolean and integer constants.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00078">Constants.h:78</a></div></div>
<div class="ttc" id="anamespacellvm_html_a726a37ae665057b176aba58871cf0616a006586d50ef1cc2441c651e5e0653c4e"><div class="ttname"><a href="namespacellvm.html#a726a37ae665057b176aba58871cf0616a006586d50ef1cc2441c651e5e0653c4e">llvm::PGOVCT_Graph</a></div><div class="ttdeci">@ PGOVCT_Graph</div><div class="ttdef"><b>Definition:</b> <a href="BlockFrequencyInfo_8h_source.html#l00033">BlockFrequencyInfo.h:33</a></div></div>
<div class="ttc" id="aPGOInstrumentation_8cpp_html_ac596e9f9b5ee82be0da51a79cec7974b"><div class="ttname"><a href="PGOInstrumentation_8cpp.html#ac596e9f9b5ee82be0da51a79cec7974b">addCallsiteMetadata</a></div><div class="ttdeci">static void addCallsiteMetadata(Instruction &amp;I, std::vector&lt; uint64_t &gt; &amp;InlinedCallStack, LLVMContext &amp;Ctx)</div><div class="ttdef"><b>Definition:</b> <a href="PGOInstrumentation_8cpp_source.html#l01247">PGOInstrumentation.cpp:1247</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchProbabilityAnalysis_html"><div class="ttname"><a href="classllvm_1_1BranchProbabilityAnalysis.html">llvm::BranchProbabilityAnalysis</a></div><div class="ttdoc">Analysis pass which computes BranchProbabilityInfo.</div><div class="ttdef"><b>Definition:</b> <a href="BranchProbabilityInfo_8h_source.html#l00413">BranchProbabilityInfo.h:413</a></div></div>
<div class="ttc" id="aclassllvm_1_1BlockFrequencyInfo_html"><div class="ttname"><a href="classllvm_1_1BlockFrequencyInfo.html">llvm::BlockFrequencyInfo</a></div><div class="ttdoc">BlockFrequencyInfo pass uses BlockFrequencyInfoImpl implementation to estimate IR basic block frequen...</div><div class="ttdef"><b>Definition:</b> <a href="BlockFrequencyInfo_8h_source.html#l00037">BlockFrequencyInfo.h:37</a></div></div>
<div class="ttc" id="aclassllvm_1_1ProfileSummaryInfo_html_a5f58eb949321536363605ac9920a95cb"><div class="ttname"><a href="classllvm_1_1ProfileSummaryInfo.html#a5f58eb949321536363605ac9920a95cb">llvm::ProfileSummaryInfo::isColdCount</a></div><div class="ttdeci">bool isColdCount(uint64_t C) const</div><div class="ttdoc">Returns true if count C is considered cold.</div><div class="ttdef"><b>Definition:</b> <a href="ProfileSummaryInfo_8cpp_source.html#l00296">ProfileSummaryInfo.cpp:296</a></div></div>
<div class="ttc" id="aGlobalValue_8h_html"><div class="ttname"><a href="GlobalValue_8h.html">GlobalValue.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_abb99891c63212832f13146f418aed935"><div class="ttname"><a href="namespacellvm.html#abb99891c63212832f13146f418aed935">llvm::calculateCountScale</a></div><div class="ttdeci">static uint64_t calculateCountScale(uint64_t MaxCount)</div><div class="ttdoc">Calculate what to divide by to scale counts.</div><div class="ttdef"><b>Definition:</b> <a href="Instrumentation_8h_source.html#l00157">Instrumentation.h:157</a></div></div>
<div class="ttc" id="aPGOInstrumentation_8cpp_html_a8d7fefca64ed0916ed11715c2a21ba32"><div class="ttname"><a href="PGOInstrumentation_8cpp.html#a8d7fefca64ed0916ed11715c2a21ba32">PGOViewRawCounts</a></div><div class="ttdeci">static cl::opt&lt; PGOViewCountsType &gt; PGOViewRawCounts(&quot;pgo-view-raw-counts&quot;, cl::Hidden, cl::desc(&quot;A boolean option to show CFG dag or text &quot; &quot;with raw profile counts from &quot; &quot;profile data. See also option &quot; &quot;-pgo-view-counts. To limit graph &quot; &quot;display to only one function, use &quot; &quot;filtering option -view-bfi-func-name.&quot;), cl::values(clEnumValN(PGOVCT_None, &quot;none&quot;, &quot;do not show.&quot;), clEnumValN(PGOVCT_Graph, &quot;graph&quot;, &quot;show a graph.&quot;), clEnumValN(PGOVCT_Text, &quot;text&quot;, &quot;show in text.&quot;)))</div></div>
<div class="ttc" id="aConstants_8h_html"><div class="ttname"><a href="Constants_8h.html">Constants.h</a></div></div>
<div class="ttc" id="astructllvm_1_1ValueProfileCollector_1_1CandidateInfo_html_a46eb56fff802a50f7bdb536adb6230af"><div class="ttname"><a href="structllvm_1_1ValueProfileCollector_1_1CandidateInfo.html#a46eb56fff802a50f7bdb536adb6230af">llvm::ValueProfileCollector::CandidateInfo::AnnotatedInst</a></div><div class="ttdeci">Instruction * AnnotatedInst</div><div class="ttdef"><b>Definition:</b> <a href="ValueProfileCollector_8h_source.html#l00062">ValueProfileCollector.h:62</a></div></div>
<div class="ttc" id="aBuiltinGCs_8cpp_html_a6742d2e0a668baf1196ec69e158d5f15"><div class="ttname"><a href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a></div><div class="ttdeci">static GCRegistry::Add&lt; CoreCLRGC &gt; E(&quot;coreclr&quot;, &quot;CoreCLR-compatible GC&quot;)</div></div>
<div class="ttc" id="anamespacellvm_html_abfcab32516704f11d146c757f402ad5ca1cde8c8828756cdaf2a93260e247ae31"><div class="ttname"><a href="namespacellvm.html#abfcab32516704f11d146c757f402ad5ca1cde8c8828756cdaf2a93260e247ae31">llvm::DS_Warning</a></div><div class="ttdeci">@ DS_Warning</div><div class="ttdef"><b>Definition:</b> <a href="DiagnosticInfo_8h_source.html#l00051">DiagnosticInfo.h:51</a></div></div>
<div class="ttc" id="aPGOInstrumentation_8cpp_html_af0e4d9315f1815020f42edec6a27ad1f"><div class="ttname"><a href="PGOInstrumentation_8cpp.html#af0e4d9315f1815020f42edec6a27ad1f">getBranchCondString</a></div><div class="ttdeci">static std::string getBranchCondString(Instruction *TI)</div><div class="ttdef"><b>Definition:</b> <a href="PGOInstrumentation_8cpp_source.html#l00336">PGOInstrumentation.cpp:336</a></div></div>
<div class="ttc" id="anamespacellvm_1_1support_html_ae0a227ae1b2ada1da82b40479251862ca30d1099d0325778e7b60550d84c621f0"><div class="ttname"><a href="namespacellvm_1_1support.html#ae0a227ae1b2ada1da82b40479251862ca30d1099d0325778e7b60550d84c621f0">llvm::support::little</a></div><div class="ttdeci">@ little</div><div class="ttdef"><b>Definition:</b> <a href="Endian_8h_source.html#l00027">Endian.h:27</a></div></div>
<div class="ttc" id="aclassllvm_1_1PGOInstrumentationGen_html_a50eda2327f190cc954cc195a5a615c99"><div class="ttname"><a href="classllvm_1_1PGOInstrumentationGen.html#a50eda2327f190cc954cc195a5a615c99">llvm::PGOInstrumentationGen::run</a></div><div class="ttdeci">PreservedAnalyses run(Module &amp;M, ModuleAnalysisManager &amp;AM)</div><div class="ttdef"><b>Definition:</b> <a href="PGOInstrumentation_8cpp_source.html#l01919">PGOInstrumentation.cpp:1919</a></div></div>
<div class="ttc" id="aIntrinsics_8h_html"><div class="ttname"><a href="Intrinsics_8h.html">Intrinsics.h</a></div></div>
<div class="ttc" id="aREADME__ALTIVEC_8txt_html_a9aacd9146afe44bf656cd664e2a88c8c"><div class="ttname"><a href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a></div><div class="ttdeci">(vector float) vec_cmpeq(*A, *B) C</div><div class="ttdef"><b>Definition:</b> <a href="README__ALTIVEC_8txt_source.html#l00086">README_ALTIVEC.txt:86</a></div></div>
<div class="ttc" id="anamespacellvm_html_a08c7dd6c9db484e7609dc95fca6cc55e"><div class="ttname"><a href="namespacellvm.html#a08c7dd6c9db484e7609dc95fca6cc55e">llvm::setIrrLoopHeaderMetadata</a></div><div class="ttdeci">void setIrrLoopHeaderMetadata(Module *M, Instruction *TI, uint64_t Count)</div><div class="ttdef"><b>Definition:</b> <a href="PGOInstrumentation_8cpp_source.html#l02349">PGOInstrumentation.cpp:2349</a></div></div>
<div class="ttc" id="aTwine_8h_html"><div class="ttname"><a href="Twine_8h.html">Twine.h</a></div></div>
<div class="ttc" id="aInstrTypes_8h_html"><div class="ttname"><a href="InstrTypes_8h.html">InstrTypes.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a91bbc1ac424839ba7e85d2d8542c288a"><div class="ttname"><a href="classllvm_1_1Type.html#a91bbc1ac424839ba7e85d2d8542c288a">llvm::Type::print</a></div><div class="ttdeci">void print(raw_ostream &amp;O, bool IsForDebug=false, bool NoDetails=false) const</div><div class="ttdoc">Print the current type.</div><div class="ttdef"><b>Definition:</b> <a href="AsmWriter_8cpp_source.html#l04673">AsmWriter.cpp:4673</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchProbabilityInfo_html"><div class="ttname"><a href="classllvm_1_1BranchProbabilityInfo.html">llvm::BranchProbabilityInfo</a></div><div class="ttdoc">Analysis providing branch probability information.</div><div class="ttdef"><b>Definition:</b> <a href="BranchProbabilityInfo_8h_source.html#l00113">BranchProbabilityInfo.h:113</a></div></div>
<div class="ttc" id="aclassllvm_1_1MDBuilder_html_ad910125a9cfd76aaad7f69469df22f66"><div class="ttname"><a href="classllvm_1_1MDBuilder.html#ad910125a9cfd76aaad7f69469df22f66">llvm::MDBuilder::createBranchWeights</a></div><div class="ttdeci">MDNode * createBranchWeights(uint32_t TrueWeight, uint32_t FalseWeight)</div><div class="ttdoc">Return metadata containing two branch weights.</div><div class="ttdef"><b>Definition:</b> <a href="MDBuilder_8cpp_source.html#l00037">MDBuilder.cpp:37</a></div></div>
<div class="ttc" id="aclassllvm_1_1MDNode_html_a2ff0e0e87a2d1056a7b6d7d4b878c4ec"><div class="ttname"><a href="classllvm_1_1MDNode.html#a2ff0e0e87a2d1056a7b6d7d4b878c4ec">llvm::MDNode::operands</a></div><div class="ttdeci">ArrayRef&lt; MDOperand &gt; operands() const</div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8h_source.html#l01289">Metadata.h:1289</a></div></div>
<div class="ttc" id="aSIInstrInfo_8cpp_html_a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791"><div class="ttname"><a href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a></div><div class="ttdeci">@ SI</div><div class="ttdef"><b>Definition:</b> <a href="SIInstrInfo_8cpp_source.html#l07993">SIInstrInfo.cpp:7993</a></div></div>
<div class="ttc" id="aclassllvm_1_1MDTuple_html"><div class="ttname"><a href="classllvm_1_1MDTuple.html">llvm::MDTuple</a></div><div class="ttdoc">Tuple of metadata.</div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8h_source.html#l01328">Metadata.h:1328</a></div></div>
<div class="ttc" id="anamespacellvm_html_abbbd1b6fc4b1028641e564b0e972e18b"><div class="ttname"><a href="namespacellvm.html#abbbd1b6fc4b1028641e564b0e972e18b">llvm::canRenameComdatFunc</a></div><div class="ttdeci">bool canRenameComdatFunc(const Function &amp;F, bool CheckAddressTaken=false)</div><div class="ttdoc">Check if we can safely rename this Comdat function.</div><div class="ttdef"><b>Definition:</b> <a href="InstrProf_8cpp_source.html#l01183">InstrProf.cpp:1183</a></div></div>
<div class="ttc" id="anamespacellvm_1_1ms__demangle_html_afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e"><div class="ttname"><a href="namespacellvm_1_1ms__demangle.html#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">llvm::ms_demangle::QualifierMangleMode::Result</a></div><div class="ttdeci">@ Result</div></div>
<div class="ttc" id="astructllvm_1_1InstrProfRecord_html_a3dd06bc69eacd72f8824db216b46adf6"><div class="ttname"><a href="structllvm_1_1InstrProfRecord.html#a3dd06bc69eacd72f8824db216b46adf6">llvm::InstrProfRecord::getNumValueSites</a></div><div class="ttdeci">uint32_t getNumValueSites(uint32_t ValueKind) const</div><div class="ttdoc">Return the number of instrumented sites for ValueKind.</div><div class="ttdef"><b>Definition:</b> <a href="InstrProf_8h_source.html#l00945">InstrProf.h:945</a></div></div>
<div class="ttc" id="aPGOInstrumentation_8cpp_html_aa334ad4b71c2b831d61c82a055ff776d"><div class="ttname"><a href="PGOInstrumentation_8cpp.html#aa334ad4b71c2b831d61c82a055ff776d">MatchMemProf</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; MatchMemProf(&quot;pgo-match-memprof&quot;, cl::init(true), cl::Hidden, cl::desc(&quot;Perform matching and annotation of memprof profiles.&quot;))</div></div>
<div class="ttc" id="aTargetLibraryInfo_8h_html"><div class="ttname"><a href="TargetLibraryInfo_8h.html">TargetLibraryInfo.h</a></div></div>
<div class="ttc" id="aCRC_8h_html"><div class="ttname"><a href="CRC_8h.html">CRC.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a161fd4e9fa5367f64c2a4c9e921c3ad3"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a161fd4e9fa5367f64c2a4c9e921c3ad3">llvm::BasicBlock::getFirstInsertionPt</a></div><div class="ttdeci">const_iterator getFirstInsertionPt() const</div><div class="ttdoc">Returns an iterator to the first instruction in this block that is suitable for inserting a non-PHI i...</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00245">BasicBlock.cpp:245</a></div></div>
<div class="ttc" id="anamespacefalse_html"><div class="ttname"><a href="namespacefalse.html">false</a></div><div class="ttdef"><b>Definition:</b> <a href="StackSlotColoring_8cpp_source.html#l00141">StackSlotColoring.cpp:141</a></div></div>
<div class="ttc" id="anamespacellvm_1_1dwarf_html_a5d3c920b66ea797d6adb243862fdf47a"><div class="ttname"><a href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">llvm::dwarf::Index</a></div><div class="ttdeci">Index</div><div class="ttdef"><b>Definition:</b> <a href="Dwarf_8h_source.html#l00550">Dwarf.h:550</a></div></div>
<div class="ttc" id="aclassllvm_1_1HashBuilderBase_html_ae0462a99c2eea825d51e05b963dc9291"><div class="ttname"><a href="classllvm_1_1HashBuilderBase.html#ae0462a99c2eea825d51e05b963dc9291">llvm::HashBuilderBase::final</a></div><div class="ttdeci">HashResultTy&lt; HasherT_ &gt; final()</div><div class="ttdoc">Forward to HasherT::final() if available.</div><div class="ttdef"><b>Definition:</b> <a href="HashBuilder_8h_source.html#l00066">HashBuilder.h:66</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html"><div class="ttname"><a href="classllvm_1_1Instruction.html">llvm::Instruction</a></div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00041">Instruction.h:41</a></div></div>
<div class="ttc" id="aMachineFunctionSplitter_8cpp_html_a4808fae45e473d4aa7f3c64b7dc7f4ea"><div class="ttname"><a href="MachineFunctionSplitter_8cpp.html#a4808fae45e473d4aa7f3c64b7dc7f4ea">ColdCountThreshold</a></div><div class="ttdeci">static cl::opt&lt; unsigned &gt; ColdCountThreshold(&quot;mfs-count-threshold&quot;, cl::desc(&quot;Minimum number of times a block must be executed to be retained.&quot;), cl::init(1), cl::Hidden)</div></div>
<div class="ttc" id="aInstrProf_8h_html"><div class="ttname"><a href="InstrProf_8h.html">InstrProf.h</a></div></div>
<div class="ttc" id="aMDBuilder_8h_html"><div class="ttname"><a href="MDBuilder_8h.html">MDBuilder.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_aab730f72aa213d5ecc7d1101efda8811"><div class="ttname"><a href="namespacellvm.html#aab730f72aa213d5ecc7d1101efda8811">llvm::appendToCompilerUsed</a></div><div class="ttdeci">void appendToCompilerUsed(Module &amp;M, ArrayRef&lt; GlobalValue * &gt; Values)</div><div class="ttdoc">Adds global values to the llvm.compiler.used list.</div><div class="ttdef"><b>Definition:</b> <a href="ModuleUtils_8cpp_source.html#l00113">ModuleUtils.cpp:113</a></div></div>
<div class="ttc" id="anamespacellvm_html_a0bf75467957937ad23ad7be19f489934"><div class="ttname"><a href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">llvm::STATISTIC</a></div><div class="ttdeci">STATISTIC(NumFunctions, &quot;Total number of functions&quot;)</div></div>
<div class="ttc" id="aclassllvm_1_1raw__ostream_html_a520bdf57dfe3e73abb53d482893f0a27"><div class="ttname"><a href="classllvm_1_1raw__ostream.html#a520bdf57dfe3e73abb53d482893f0a27">llvm::raw_ostream::flush</a></div><div class="ttdeci">void flush()</div><div class="ttdef"><b>Definition:</b> <a href="raw__ostream_8h_source.html#l00185">raw_ostream.h:185</a></div></div>
<div class="ttc" id="aclassllvm_1_1cl_1_1Option_html_a2dc75fafb68e7669e776e19da7857cdf"><div class="ttname"><a href="classllvm_1_1cl_1_1Option.html#a2dc75fafb68e7669e776e19da7857cdf">llvm::cl::Option::getNumOccurrences</a></div><div class="ttdeci">int getNumOccurrences() const</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00401">CommandLine.h:401</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantInt_html_a969709dd49c28865a482d8b870f87c46"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">llvm::ConstantInt::get</a></div><div class="ttdeci">static Constant * get(Type *Ty, uint64_t V, bool IsSigned=false)</div><div class="ttdoc">If Ty is a vector type, return a Constant with a splat of the given value.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00887">Constants.cpp:887</a></div></div>
<div class="ttc" id="aPGOInstrumentation_8cpp_html_a157a72a2ac898befbf836a3a87505084"><div class="ttname"><a href="PGOInstrumentation_8cpp.html#a157a72a2ac898befbf836a3a87505084">PGOFixEntryCount</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; PGOFixEntryCount(&quot;pgo-fix-entry-count&quot;, cl::init(true), cl::Hidden, cl::desc(&quot;Fix function entry count in profile use.&quot;))</div></div>
<div class="ttc" id="aclassllvm_1_1StringRef_html_ad04539d64efd58e70c5e828739cf718e"><div class="ttname"><a href="classllvm_1_1StringRef.html#ad04539d64efd58e70c5e828739cf718e">llvm::StringRef::data</a></div><div class="ttdeci">const char * data() const</div><div class="ttdoc">data - Get a pointer to the start of the string (which may not be null terminated).</div><div class="ttdef"><b>Definition:</b> <a href="StringRef_8h_source.html#l00131">StringRef.h:131</a></div></div>
<div class="ttc" id="aclassllvm_1_1HashBuilderImpl_html_a6ec188c432de827580a434b46402e5ec"><div class="ttname"><a href="classllvm_1_1HashBuilderImpl.html#a6ec188c432de827580a434b46402e5ec">llvm::HashBuilderImpl::add</a></div><div class="ttdeci">std::enable_if_t&lt; hashbuilder_detail::IsHashableData&lt; T &gt;::value, HashBuilderImpl &amp; &gt; add(T Value)</div><div class="ttdoc">Implement hashing for hashable data types, e.g. integral or enum values.</div><div class="ttdef"><b>Definition:</b> <a href="HashBuilder_8h_source.html#l00109">HashBuilder.h:109</a></div></div>
<div class="ttc" id="anamespacellvm_html_a5536eb574f2ee4e022d04a0418d22fbd"><div class="ttname"><a href="namespacellvm.html#a5536eb574f2ee4e022d04a0418d22fbd">llvm::OperandBundleDef</a></div><div class="ttdeci">OperandBundleDefT&lt; Value * &gt; OperandBundleDef</div><div class="ttdef"><b>Definition:</b> <a href="AutoUpgrade_8h_source.html#l00033">AutoUpgrade.h:33</a></div></div>
<div class="ttc" id="aHashBuilder_8h_html"><div class="ttname"><a href="HashBuilder_8h.html">HashBuilder.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html_a438d2f246b76817114ade2a005a6bcabac7dbc704eba08842e6acdde9cf6379ba"><div class="ttname"><a href="classllvm_1_1Function.html#a438d2f246b76817114ade2a005a6bcabac7dbc704eba08842e6acdde9cf6379ba">llvm::Function::PCT_Real</a></div><div class="ttdeci">@ PCT_Real</div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00247">Function.h:247</a></div></div>
<div class="ttc" id="aCSEInfo_8cpp_html_a75f8a8519c2c9b30e7c06dc5e256fffa"><div class="ttname"><a href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a></div><div class="ttdeci">Analysis containing CSE Info</div><div class="ttdef"><b>Definition:</b> <a href="CSEInfo_8cpp_source.html#l00027">CSEInfo.cpp:27</a></div></div>
<div class="ttc" id="aclassllvm_1_1CFGMST_html"><div class="ttname"><a href="classllvm_1_1CFGMST.html">llvm::CFGMST</a></div><div class="ttdoc">An union-find based Minimum Spanning Tree for CFG.</div><div class="ttdef"><b>Definition:</b> <a href="CFGMST_8h_source.html#l00039">CFGMST.h:39</a></div></div>
<div class="ttc" id="aclassllvm_1_1Comdat_html"><div class="ttname"><a href="classllvm_1_1Comdat.html">llvm::Comdat</a></div><div class="ttdef"><b>Definition:</b> <a href="IR_2Comdat_8h_source.html#l00033">Comdat.h:33</a></div></div>
<div class="ttc" id="anamespacellvm_html_aa9a2cc174301c011647c95c88e0f89b0"><div class="ttname"><a href="namespacellvm.html#aa9a2cc174301c011647c95c88e0f89b0">llvm::scaleBranchCount</a></div><div class="ttdeci">static uint32_t scaleBranchCount(uint64_t Count, uint64_t Scale)</div><div class="ttdoc">Scale an individual branch count.</div><div class="ttdef"><b>Definition:</b> <a href="Instrumentation_8h_source.html#l00167">Instrumentation.h:167</a></div></div>
<div class="ttc" id="aclassllvm_1_1BlockFrequencyAnalysis_html"><div class="ttname"><a href="classllvm_1_1BlockFrequencyAnalysis.html">llvm::BlockFrequencyAnalysis</a></div><div class="ttdoc">Analysis pass which computes BlockFrequencyInfo.</div><div class="ttdef"><b>Definition:</b> <a href="BlockFrequencyInfo_8h_source.html#l00112">BlockFrequencyInfo.h:112</a></div></div>
<div class="ttc" id="astructllvm_1_1GraphTraits_3_01PGOUseFunc_01_5_01_4_html_a2c6a6c6d928b62167d566a5010e5c2a4"><div class="ttname"><a href="structllvm_1_1GraphTraits_3_01PGOUseFunc_01_5_01_4.html#a2c6a6c6d928b62167d566a5010e5c2a4">llvm::GraphTraits&lt; PGOUseFunc * &gt;::getEntryNode</a></div><div class="ttdeci">static NodeRef getEntryNode(const PGOUseFunc *G)</div><div class="ttdef"><b>Definition:</b> <a href="PGOInstrumentation_8cpp_source.html#l02360">PGOInstrumentation.cpp:2360</a></div></div>
<div class="ttc" id="aPGOInstrumentation_8cpp_html_aa3b6431905d5644fe983172f6cfa7a35"><div class="ttname"><a href="PGOInstrumentation_8cpp.html#aa3b6431905d5644fe983172f6cfa7a35">PGOFunctionCriticalEdgeThreshold</a></div><div class="ttdeci">static cl::opt&lt; unsigned &gt; PGOFunctionCriticalEdgeThreshold(&quot;pgo-critical-edge-threshold&quot;, cl::init(20000), cl::Hidden, cl::desc(&quot;Do not instrument functions with the number of critical edges &quot; &quot; greater than this threshold.&quot;))</div></div>
<div class="ttc" id="anamespacellvm_1_1lltok_html_af353621f14cb4b4b3af5ffaff84076b1"><div class="ttname"><a href="namespacellvm_1_1lltok.html#af353621f14cb4b4b3af5ffaff84076b1">llvm::lltok::Kind</a></div><div class="ttdeci">Kind</div><div class="ttdef"><b>Definition:</b> <a href="LLToken_8h_source.html#l00018">LLToken.h:18</a></div></div>
<div class="ttc" id="aclassllvm_1_1ErrorInfoBase_html"><div class="ttname"><a href="classllvm_1_1ErrorInfoBase.html">llvm::ErrorInfoBase</a></div><div class="ttdoc">Base class for error info classes.</div><div class="ttdef"><b>Definition:</b> <a href="Support_2Error_8h_source.html#l00047">Error.h:47</a></div></div>
<div class="ttc" id="aclassllvm_1_1ErrorInfoBase_html_a2b75e20ae30dbb4d4d96486653a9b710"><div class="ttname"><a href="classllvm_1_1ErrorInfoBase.html#a2b75e20ae30dbb4d4d96486653a9b710">llvm::ErrorInfoBase::message</a></div><div class="ttdeci">virtual std::string message() const</div><div class="ttdoc">Return the error message as a string.</div><div class="ttdef"><b>Definition:</b> <a href="Support_2Error_8h_source.html#l00055">Error.h:55</a></div></div>
<div class="ttc" id="aType_8h_html"><div class="ttname"><a href="Type_8h.html">Type.h</a></div></div>
<div class="ttc" id="aBranchProbability_8h_html"><div class="ttname"><a href="BranchProbability_8h.html">BranchProbability.h</a></div></div>
<div class="ttc" id="aIR_2CFG_8h_html"><div class="ttname"><a href="IR_2CFG_8h.html">CFG.h</a></div></div>
<div class="ttc" id="aLoopInfo_8h_html"><div class="ttname"><a href="LoopInfo_8h.html">LoopInfo.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1ProfileSummaryInfo_html"><div class="ttname"><a href="classllvm_1_1ProfileSummaryInfo.html">llvm::ProfileSummaryInfo</a></div><div class="ttdoc">Analysis providing profile information.</div><div class="ttdef"><b>Definition:</b> <a href="ProfileSummaryInfo_8h_source.html#l00040">ProfileSummaryInfo.h:40</a></div></div>
<div class="ttc" id="astructllvm_1_1DOTGraphTraits_html"><div class="ttname"><a href="structllvm_1_1DOTGraphTraits.html">llvm::DOTGraphTraits</a></div><div class="ttdoc">DOTGraphTraits - Template class that can be specialized to customize how graphs are converted to 'dot...</div><div class="ttdef"><b>Definition:</b> <a href="DOTGraphTraits_8h_source.html#l00166">DOTGraphTraits.h:166</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchInst_html_aac456a62894c9f0f8e9f06373bbf40f0"><div class="ttname"><a href="classllvm_1_1BranchInst.html#aac456a62894c9f0f8e9f06373bbf40f0">llvm::BranchInst::getCondition</a></div><div class="ttdeci">Value * getCondition() const</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03220">Instructions.h:3220</a></div></div>
<div class="ttc" id="aclassllvm_1_1Twine_html_a4c1c1093a7749409c70838678514cc7c"><div class="ttname"><a href="classllvm_1_1Twine.html#a4c1c1093a7749409c70838678514cc7c">llvm::Twine::str</a></div><div class="ttdeci">std::string str() const</div><div class="ttdoc">Return the twine contents as a std::string.</div><div class="ttdef"><b>Definition:</b> <a href="Twine_8cpp_source.html#l00017">Twine.cpp:17</a></div></div>
<div class="ttc" id="aADT_2tmp_8txt_html_a07ed0bfaa124c15897944fe3eaa971ab"><div class="ttname"><a href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a></div><div class="ttdeci">Class for arbitrary precision integers APInt is a functional replacement for common case unsigned integer type like unsigned long or uint64_t</div><div class="ttdef"><b>Definition:</b> <a href="ADT_2tmp_8txt_source.html#l00001">tmp.txt:1</a></div></div>
<div class="ttc" id="aPGOInstrumentation_8cpp_html_ad415a8c401ec5208bc818dacd94194a6"><div class="ttname"><a href="PGOInstrumentation_8cpp.html#ad415a8c401ec5208bc818dacd94194a6">getSimpleNodeName</a></div><div class="ttdeci">static std::string getSimpleNodeName(const BasicBlock *Node)</div><div class="ttdef"><b>Definition:</b> <a href="PGOInstrumentation_8cpp_source.html#l02291">PGOInstrumentation.cpp:2291</a></div></div>
<div class="ttc" id="aPGOInstrumentation_8cpp_html_abd66a285984b7b8917e16298bc470a2b"><div class="ttname"><a href="PGOInstrumentation_8cpp.html#abd66a285984b7b8917e16298bc470a2b">PGOVerifyBFICutoff</a></div><div class="ttdeci">static cl::opt&lt; unsigned &gt; PGOVerifyBFICutoff(&quot;pgo-verify-bfi-cutoff&quot;, cl::init(5), cl::Hidden, cl::desc(&quot;Set the threshold for pgo-verify-bfi: skip the counts whose &quot; &quot;profile count value is below.&quot;))</div></div>
<div class="ttc" id="anamespacellvm_html_acb22fb04083152eee862457e42e8dc31"><div class="ttname"><a href="namespacellvm.html#acb22fb04083152eee862457e42e8dc31">llvm::predecessors</a></div><div class="ttdeci">auto predecessors(const MachineBasicBlock *BB)</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l01266">MachineBasicBlock.h:1266</a></div></div>
<div class="ttc" id="aPGOInstrumentation_8cpp_html_ade95db220319f7e5d11ef6601e41b186"><div class="ttname"><a href="PGOInstrumentation_8cpp.html#ade95db220319f7e5d11ef6601e41b186">EmitBranchProbability</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; EmitBranchProbability(&quot;pgo-emit-branch-prob&quot;, cl::init(false), cl::Hidden, cl::desc(&quot;When this option is on, the annotated &quot; &quot;branch probability will be emitted as &quot; &quot;optimization remarks: -{Rpass|&quot; &quot;pass-remarks}=pgo-instrumentation&quot;))</div></div>
<div class="ttc" id="aclassllvm_1_1function__ref_html"><div class="ttname"><a href="classllvm_1_1function__ref.html">llvm::function_ref</a></div><div class="ttdoc">An efficient, type-erasing, non-owning reference to a callable.</div><div class="ttdef"><b>Definition:</b> <a href="STLFunctionalExtras_8h_source.html#l00036">STLFunctionalExtras.h:36</a></div></div>
<div class="ttc" id="aPGOInstrumentation_8cpp_html_a4b1bfa0c2ee8a4cef8a76537a7bb71e0"><div class="ttname"><a href="PGOInstrumentation_8cpp.html#a4b1bfa0c2ee8a4cef8a76537a7bb71e0">instrumentOneFunc</a></div><div class="ttdeci">static void instrumentOneFunc(Function &amp;F, Module *M, TargetLibraryInfo &amp;TLI, BranchProbabilityInfo *BPI, BlockFrequencyInfo *BFI, std::unordered_multimap&lt; Comdat *, GlobalValue * &gt; &amp;ComdatMembers, bool IsCS)</div><div class="ttdef"><b>Definition:</b> <a href="PGOInstrumentation_8cpp_source.html#l00851">PGOInstrumentation.cpp:851</a></div></div>
<div class="ttc" id="aclassllvm_1_1MDBuilder_html_a7939b917f71d9664707d8ec51da88418"><div class="ttname"><a href="classllvm_1_1MDBuilder.html#a7939b917f71d9664707d8ec51da88418">llvm::MDBuilder::createString</a></div><div class="ttdeci">MDString * createString(StringRef Str)</div><div class="ttdoc">Return the given string as metadata.</div><div class="ttdef"><b>Definition:</b> <a href="MDBuilder_8cpp_source.html#l00020">MDBuilder.cpp:20</a></div></div>
<div class="ttc" id="aRDFGraph_8cpp_html_af153ca0eadca8bc464492b7aba7feb00"><div class="ttname"><a href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a></div><div class="ttdeci">const DataFlowGraph &amp; G</div><div class="ttdef"><b>Definition:</b> <a href="RDFGraph_8cpp_source.html#l00200">RDFGraph.cpp:200</a></div></div>
<div class="ttc" id="aPGOInstrumentation_8cpp_html_a80e1f3026ce040615474f3efff8f250e"><div class="ttname"><a href="PGOInstrumentation_8cpp.html#a80e1f3026ce040615474f3efff8f250e">PGOVerifyHotBFI</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; PGOVerifyHotBFI(&quot;pgo-verify-hot-bfi&quot;, cl::init(false), cl::Hidden, cl::desc(&quot;Print out the non-match BFI count if a hot raw profile count &quot; &quot;becomes non-hot, or a cold raw profile count becomes hot. &quot; &quot;The print is enabled under -Rpass-analysis=pgo, or &quot; &quot;internal option -pass-remakrs-analysis=pgo.&quot;))</div></div>
<div class="ttc" id="aclassllvm_1_1pointer__iterator_html"><div class="ttname"><a href="classllvm_1_1pointer__iterator.html">llvm::pointer_iterator</a></div><div class="ttdef"><b>Definition:</b> <a href="iterator_8h_source.html#l00344">iterator.h:344</a></div></div>
<div class="ttc" id="anamespacellvm_html_ac226f3d2b9ca090171a8e0a8cb92c343a91921ada405fd6ba65dff028df047cb6"><div class="ttname"><a href="namespacellvm.html#ac226f3d2b9ca090171a8e0a8cb92c343a91921ada405fd6ba65dff028df047cb6">llvm::HighlightColor::Remark</a></div><div class="ttdeci">@ Remark</div></div>
<div class="ttc" id="aBasicBlock_8h_html"><div class="ttname"><a href="BasicBlock_8h.html">BasicBlock.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1cl_1_1opt_html"><div class="ttname"><a href="classllvm_1_1cl_1_1opt.html">llvm::cl::opt</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l01410">CommandLine.h:1410</a></div></div>
<div class="ttc" id="aclassllvm_1_1APFloat_html"><div class="ttname"><a href="classllvm_1_1APFloat.html">llvm::APFloat</a></div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l00744">APFloat.h:744</a></div></div>
<div class="ttc" id="aInstrProfReader_8h_html"><div class="ttname"><a href="InstrProfReader_8h.html">InstrProfReader.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_a23d4c211faf80b8789923262b5b5ae77"><div class="ttname"><a href="namespacellvm.html#a23d4c211faf80b8789923262b5b5ae77">llvm::ProfileCount</a></div><div class="ttdeci">Function::ProfileCount ProfileCount</div><div class="ttdef"><b>Definition:</b> <a href="SampleProfileLoaderBaseImpl_8h_source.html#l00048">SampleProfileLoaderBaseImpl.h:48</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a6e5d2e18c81baaeec7dadc81a0dea993"><div class="ttname"><a href="classllvm_1_1Instruction.html#a6e5d2e18c81baaeec7dadc81a0dea993">llvm::Instruction::getSuccessor</a></div><div class="ttdeci">BasicBlock * getSuccessor(unsigned Idx) const LLVM_READONLY</div><div class="ttdoc">Return the specified successor. This instruction must be a terminator.</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8cpp_source.html#l00835">Instruction.cpp:835</a></div></div>
<div class="ttc" id="anamespacellvm_1_1vfs_html_a9878c6a5a53d24e17c7c1002be31364c"><div class="ttname"><a href="namespacellvm_1_1vfs.html#a9878c6a5a53d24e17c7c1002be31364c">llvm::vfs::getRealFileSystem</a></div><div class="ttdeci">IntrusiveRefCntPtr&lt; FileSystem &gt; getRealFileSystem()</div><div class="ttdoc">Gets an vfs::FileSystem for the 'real' file system, as seen by the operating system.</div><div class="ttdef"><b>Definition:</b> <a href="VirtualFileSystem_8cpp_source.html#l00375">VirtualFileSystem.cpp:375</a></div></div>
<div class="ttc" id="astructllvm_1_1memprof_1_1Frame_html"><div class="ttname"><a href="structllvm_1_1memprof_1_1Frame.html">llvm::memprof::Frame</a></div><div class="ttdef"><b>Definition:</b> <a href="MemProf_8h_source.html#l00142">MemProf.h:142</a></div></div>
<div class="ttc" id="anamespacellvm_1_1cl_html_a8fa743aa76b6902028f8a643dfb87171"><div class="ttname"><a href="namespacellvm_1_1cl.html#a8fa743aa76b6902028f8a643dfb87171">llvm::cl::values</a></div><div class="ttdeci">ValuesClass values(OptsTy... Options)</div><div class="ttdoc">Helper to build a ValuesClass by forwarding a variable number of arguments as an initializer list to ...</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00703">CommandLine.h:703</a></div></div>
<div class="ttc" id="aBranchProbabilityInfo_8h_html"><div class="ttname"><a href="BranchProbabilityInfo_8h.html">BranchProbabilityInfo.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_aa4f78f8e57089af990561a8ada04f0e4"><div class="ttname"><a href="namespacellvm.html#aa4f78f8e57089af990561a8ada04f0e4">llvm::PGOViewCounts</a></div><div class="ttdeci">cl::opt&lt; PGOViewCountsType &gt; PGOViewCounts(&quot;pgo-view-counts&quot;, cl::Hidden, cl::desc(&quot;A boolean option to show CFG dag or text with &quot; &quot;block profile counts and branch probabilities &quot; &quot;right after PGO profile annotation step. The &quot; &quot;profile counts are computed using branch &quot; &quot;probabilities from the runtime profile data and &quot; &quot;block frequency propagation algorithm. To view &quot; &quot;the raw counts from the profile, use option &quot; &quot;-pgo-view-raw-counts instead. To limit graph &quot; &quot;display to only one function, use filtering option &quot; &quot;-view-bfi-func-name.&quot;), cl::values(clEnumValN(PGOVCT_None, &quot;none&quot;, &quot;do not show.&quot;), clEnumValN(PGOVCT_Graph, &quot;graph&quot;, &quot;show a graph.&quot;), clEnumValN(PGOVCT_Text, &quot;text&quot;, &quot;show in text.&quot;)))</div><div class="ttdef"><b>Definition:</b> <a href="PGOInstrumentation_8cpp_source.html#l00321">PGOInstrumentation.cpp:321</a></div></div>
<div class="ttc" id="aclassllvm_1_1ICmpInst_html"><div class="ttname"><a href="classllvm_1_1ICmpInst.html">llvm::ICmpInst</a></div><div class="ttdoc">This instruction compares its operands according to the predicate given to the constructor.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01197">Instructions.h:1197</a></div></div>
<div class="ttc" id="aclassllvm_1_1ProfileSummaryInfo_html_ac46d4d55dd867977ba88d57a170e31de"><div class="ttname"><a href="classllvm_1_1ProfileSummaryInfo.html#ac46d4d55dd867977ba88d57a170e31de">llvm::ProfileSummaryInfo::isHotCount</a></div><div class="ttdeci">bool isHotCount(uint64_t C) const</div><div class="ttdoc">Returns true if count C is considered hot.</div><div class="ttdef"><b>Definition:</b> <a href="ProfileSummaryInfo_8cpp_source.html#l00292">ProfileSummaryInfo.cpp:292</a></div></div>
<div class="ttc" id="aELFObjHandler_8cpp_html_aef61945034b9431b804748fc317c5548"><div class="ttname"><a href="ELFObjHandler_8cpp.html#aef61945034b9431b804748fc317c5548">Index</a></div><div class="ttdeci">uint32_t Index</div><div class="ttdef"><b>Definition:</b> <a href="ELFObjHandler_8cpp_source.html#l00083">ELFObjHandler.cpp:83</a></div></div>
<div class="ttc" id="aPGOInstrumentation_8cpp_html_a5b7a21689e69a48710a11d5261cf057e"><div class="ttname"><a href="PGOInstrumentation_8cpp.html#a5b7a21689e69a48710a11d5261cf057e">MaxNumMemOPAnnotations</a></div><div class="ttdeci">static cl::opt&lt; unsigned &gt; MaxNumMemOPAnnotations(&quot;memop-max-annotations&quot;, cl::init(4), cl::Hidden, cl::desc(&quot;Max number of preicise value annotations for a single memop&quot; &quot;intrinsic&quot;))</div></div>
<div class="ttc" id="anamespacellvm_html_a3a3a97fed79c86bf242b0f090e1cb2e6"><div class="ttname"><a href="namespacellvm.html#a3a3a97fed79c86bf242b0f090e1cb2e6">llvm::colorEHFunclets</a></div><div class="ttdeci">DenseMap&lt; BasicBlock *, ColorVector &gt; colorEHFunclets(Function &amp;F)</div><div class="ttdoc">If an EH funclet personality is in use (see isFuncletEHPersonality), this will recompute which blocks...</div><div class="ttdef"><b>Definition:</b> <a href="EHPersonalities_8cpp_source.html#l00097">EHPersonalities.cpp:97</a></div></div>
<div class="ttc" id="aProfileSummaryInfo_8h_html"><div class="ttname"><a href="ProfileSummaryInfo_8h.html">ProfileSummaryInfo.h</a></div></div>
<div class="ttc" id="aPGOInstrumentation_8cpp_html_ab457c5811495a302a792ca0ba3e7818e"><div class="ttname"><a href="PGOInstrumentation_8cpp.html#ab457c5811495a302a792ca0ba3e7818e">PGOOldCFGHashing</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; PGOOldCFGHashing(&quot;pgo-instr-old-cfg-hashing&quot;, cl::init(false), cl::Hidden, cl::desc(&quot;Use the old CFG function hashing&quot;))</div></div>
<div class="ttc" id="aSimplifyCFG_8cpp_html_a4953dfe289f5d9ad59a7964c4c63c2a9"><div class="ttname"><a href="SimplifyCFG_8cpp.html#a4953dfe289f5d9ad59a7964c4c63c2a9">setBranchWeights</a></div><div class="ttdeci">static void setBranchWeights(SwitchInst *SI, ArrayRef&lt; uint32_t &gt; Weights)</div><div class="ttdef"><b>Definition:</b> <a href="SimplifyCFG_8cpp_source.html#l00863">SimplifyCFG.cpp:863</a></div></div>
<div class="ttc" id="aMisExpect_8h_html"><div class="ttname"><a href="MisExpect_8h.html">MisExpect.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1IndexedInstrProfReader_html"><div class="ttname"><a href="classllvm_1_1IndexedInstrProfReader.html">llvm::IndexedInstrProfReader</a></div><div class="ttdoc">Reader for the indexed binary instrprof format.</div><div class="ttdef"><b>Definition:</b> <a href="InstrProfReader_8h_source.html#l00594">InstrProfReader.h:594</a></div></div>
<div class="ttc" id="alib_2Target_2README_8txt_html_a5a6a05b7d9e9efb3f7b098c20fa0088a"><div class="ttname"><a href="lib_2Target_2README_8txt.html#a5a6a05b7d9e9efb3f7b098c20fa0088a">s</a></div><div class="ttdeci">multiplies can be turned into SHL s</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2README_8txt_source.html#l00370">README.txt:370</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalValue_html_aedfa75f0c85c4aa85b257f066fbea57ca8d13a9bcecfac72febceb1103afa048f"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57ca8d13a9bcecfac72febceb1103afa048f">llvm::GlobalValue::WeakAnyLinkage</a></div><div class="ttdeci">@ WeakAnyLinkage</div><div class="ttdoc">Keep one copy of named function when linking (weak)</div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00052">GlobalValue.h:52</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstrProfError_html"><div class="ttname"><a href="classllvm_1_1InstrProfError.html">llvm::InstrProfError</a></div><div class="ttdef"><b>Definition:</b> <a href="InstrProf_8h_source.html#l00338">InstrProf.h:338</a></div></div>
<div class="ttc" id="alib_2Target_2ARM_2README_8txt_html_ad3a99906764c35b2694ae90fa57744a5"><div class="ttname"><a href="lib_2Target_2ARM_2README_8txt.html#ad3a99906764c35b2694ae90fa57744a5">move</a></div><div class="ttdeci">compiles ldr LCPI1_0 ldr ldr mov lsr tst moveq r1 ldr LCPI1_1 and r0 bx lr It would be better to do something like to fold the shift into the conditional move</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2ARM_2README_8txt_source.html#l00546">README.txt:546</a></div></div>
<div class="ttc" id="aProfDataUtils_8h_html"><div class="ttname"><a href="ProfDataUtils_8h.html">ProfDataUtils.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1LLVMContext_html"><div class="ttname"><a href="classllvm_1_1LLVMContext.html">llvm::LLVMContext</a></div><div class="ttdoc">This is an important class for using LLVM in a threaded context.</div><div class="ttdef"><b>Definition:</b> <a href="LLVMContext_8h_source.html#l00067">LLVMContext.h:67</a></div></div>
<div class="ttc" id="aPGOInstrumentation_8h_html"><div class="ttname"><a href="PGOInstrumentation_8h.html">PGOInstrumentation.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseMap_html"><div class="ttname"><a href="classllvm_1_1DenseMap.html">llvm::DenseMap</a></div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00714">DenseMap.h:714</a></div></div>
<div class="ttc" id="astructllvm_1_1InstrProfRecord_html_a69bdbaedb4ae6b233e5eccac5ebc2d77ac46600297a1a6f13ed709e33fcc7ae4e"><div class="ttname"><a href="structllvm_1_1InstrProfRecord.html#a69bdbaedb4ae6b233e5eccac5ebc2d77ac46600297a1a6f13ed709e33fcc7ae4e">llvm::InstrProfRecord::NotPseudo</a></div><div class="ttdeci">@ NotPseudo</div><div class="ttdef"><b>Definition:</b> <a href="InstrProf_8h_source.html#l00828">InstrProf.h:828</a></div></div>
<div class="ttc" id="aBasicAliasAnalysis_8cpp_html_af6d5cafbdfc5313e65d990120021a3ec"><div class="ttname"><a href="BasicAliasAnalysis_8cpp.html#af6d5cafbdfc5313e65d990120021a3ec">true</a></div><div class="ttdeci">basic Basic Alias true</div><div class="ttdef"><b>Definition:</b> <a href="BasicAliasAnalysis_8cpp_source.html#l01804">BasicAliasAnalysis.cpp:1804</a></div></div>
<div class="ttc" id="aiterator_8h_html"><div class="ttname"><a href="iterator_8h.html">iterator.h</a></div></div>
<div class="ttc" id="aMD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00058">MD5.cpp:58</a></div></div>
<div class="ttc" id="anamespacellvm_html_a3720211f6e6389ab53734b989bfb6fce"><div class="ttname"><a href="namespacellvm.html#a3720211f6e6389ab53734b989bfb6fce">llvm::succ_begin</a></div><div class="ttdeci">Interval::succ_iterator succ_begin(Interval *I)</div><div class="ttdoc">succ_begin/succ_end - define methods so that Intervals may be used just like BasicBlocks can with the...</div><div class="ttdef"><b>Definition:</b> <a href="Interval_8h_source.html#l00099">Interval.h:99</a></div></div>
<div class="ttc" id="anamespacellvm_1_1cl_html_a10a041239ae1870cfcc064bfaa79fb65"><div class="ttname"><a href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">llvm::cl::init</a></div><div class="ttdeci">initializer&lt; Ty &gt; init(const Ty &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00445">CommandLine.h:445</a></div></div>
<div class="ttc" id="aPGOInstrumentation_8cpp_html_ac5599ed465f5265b08a7236fa44c5c9d"><div class="ttname"><a href="PGOInstrumentation_8cpp.html#ac5599ed465f5265b08a7236fa44c5c9d">PGOVerifyBFIRatio</a></div><div class="ttdeci">static cl::opt&lt; unsigned &gt; PGOVerifyBFIRatio(&quot;pgo-verify-bfi-ratio&quot;, cl::init(2), cl::Hidden, cl::desc(&quot;Set the threshold for pgo-verify-bfi:  only print out &quot; &quot;mismatched BFI if the difference percentage is greater than &quot; &quot;this value (in percentage).&quot;))</div></div>
<div class="ttc" id="anamespacellvm_html_a8408fc467bb0d3aad1ae8f371126c88b"><div class="ttname"><a href="namespacellvm.html#a8408fc467bb0d3aad1ae8f371126c88b">llvm::HashBuilder</a></div><div class="ttdeci">HashBuilderImpl&lt; HasherT,(Endianness==support::endianness::native ? support::endian::system_endianness() :Endianness)&gt; HashBuilder</div><div class="ttdoc">Interface to help hash various types through a hasher type.</div><div class="ttdef"><b>Definition:</b> <a href="HashBuilder_8h_source.html#l00401">HashBuilder.h:401</a></div></div>
<div class="ttc" id="aArrayRef_8h_html"><div class="ttname"><a href="ArrayRef_8h.html">ArrayRef.h</a></div></div>
<div class="ttc" id="anamespacellvm_1_1misexpect_html_a4c52059f91406714507309d168ff95b8"><div class="ttname"><a href="namespacellvm_1_1misexpect.html#a4c52059f91406714507309d168ff95b8">llvm::misexpect::checkExpectAnnotations</a></div><div class="ttdeci">void checkExpectAnnotations(Instruction &amp;I, const ArrayRef&lt; uint32_t &gt; ExistingWeights, bool IsFrontend)</div><div class="ttdoc">checkExpectAnnotations - compares PGO counters to the thresholds used for llvm.expect and warns if th...</div><div class="ttdef"><b>Definition:</b> <a href="MisExpect_8cpp_source.html#l00202">MisExpect.cpp:202</a></div></div>
<div class="ttc" id="aPGOInstrumentation_8cpp_html_a63fd72ea6df7c5a2aae8875fc5acb1ca"><div class="ttname"><a href="PGOInstrumentation_8cpp.html#a63fd72ea6df7c5a2aae8875fc5acb1ca">PGOFunctionEntryCoverage</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; PGOFunctionEntryCoverage(&quot;pgo-function-entry-coverage&quot;, cl::Hidden, cl::desc(&quot;Use this option to enable function entry coverage instrumentation.&quot;))</div></div>
<div class="ttc" id="aclassllvm_1_1DenseMapBase_html_a0c047f127ed4380a6f383d70bec4eb94"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#a0c047f127ed4380a6f383d70bec4eb94">llvm::DenseMapBase&lt; DenseMap&lt; KeyT, ValueT, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;, KeyT, ValueT, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;::find</a></div><div class="ttdeci">iterator find(const_arg_type_t&lt; KeyT &gt; Val)</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00150">DenseMap.h:150</a></div></div>
<div class="ttc" id="aclassllvm_1_1DiagnosticInfoPGOProfile_html"><div class="ttname"><a href="classllvm_1_1DiagnosticInfoPGOProfile.html">llvm::DiagnosticInfoPGOProfile</a></div><div class="ttdoc">Diagnostic information for the PGO profiler.</div><div class="ttdef"><b>Definition:</b> <a href="DiagnosticInfo_8h_source.html#l00274">DiagnosticInfo.h:274</a></div></div>
<div class="ttc" id="aIRBuilder_8h_html"><div class="ttname"><a href="IRBuilder_8h.html">IRBuilder.h</a></div></div>
<div class="ttc" id="aSILowerControlFlow_8cpp_html_a4868c5d81c5ccc98c47aeab6244346a0"><div class="ttname"><a href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a></div><div class="ttdeci">assert(ImpDefSCC.getReg()==AMDGPU::SCC &amp;&amp;ImpDefSCC.isDef())</div></div>
<div class="ttc" id="anamespacellvm_html_abfc9c7ecf70f66901e439f7c04ef3dbb"><div class="ttname"><a href="namespacellvm.html#abfc9c7ecf70f66901e439f7c04ef3dbb">llvm::move</a></div><div class="ttdeci">OutputIt move(R &amp;&amp;Range, OutputIt Out)</div><div class="ttdoc">Provide wrappers to std::move which take ranges instead of having to pass begin/end explicitly.</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l01862">STLExtras.h:1862</a></div></div>
<div class="ttc" id="anamespacellvm_html_a726a37ae665057b176aba58871cf0616a3c9596b568bb5b8379c7242004e4a70a"><div class="ttname"><a href="namespacellvm.html#a726a37ae665057b176aba58871cf0616a3c9596b568bb5b8379c7242004e4a70a">llvm::PGOVCT_None</a></div><div class="ttdeci">@ PGOVCT_None</div><div class="ttdef"><b>Definition:</b> <a href="BlockFrequencyInfo_8h_source.html#l00033">BlockFrequencyInfo.h:33</a></div></div>
<div class="ttc" id="anamespacellvm_html_aa218f6b22c8e271f5f9e92aa1fe51086ab87eee819cec0e1d8b2dfa938d14a77a"><div class="ttname"><a href="namespacellvm.html#aa218f6b22c8e271f5f9e92aa1fe51086ab87eee819cec0e1d8b2dfa938d14a77a">llvm::instrprof_error::unknown_function</a></div><div class="ttdeci">@ unknown_function</div></div>
<div class="ttc" id="alib_2Target_2ARM_2README_8txt_html_ae2bb081d94f22e64ca6bc4bd58512a93"><div class="ttname"><a href="lib_2Target_2ARM_2README_8txt.html#ae2bb081d94f22e64ca6bc4bd58512a93">memcpy</a></div><div class="ttdeci">&lt;%struct.s * &gt; cast struct s *S to sbyte *&lt; sbyte * &gt; sbyte uint cast struct s *agg result to sbyte *&lt; sbyte * &gt; sbyte uint cast struct s *memtmp to sbyte *&lt; sbyte * &gt; sbyte uint ret void llc ends up issuing two memcpy or custom lower memcpy(of small size) to be ldmia/stmia. I think option 2 is better but the current register allocator cannot allocate a chunk of registers at a time. A feasible temporary solution is to use specific physical registers at the lowering time for small(&lt;</div></div>
<div class="ttc" id="anamespacellvm_1_1X86AS_html_aea2591d7d017866934bcf72ee3dc8a31a5b3a782ccae295a254e2794ad30ad07f"><div class="ttname"><a href="namespacellvm_1_1X86AS.html#aea2591d7d017866934bcf72ee3dc8a31a5b3a782ccae295a254e2794ad30ad07f">llvm::X86AS::FS</a></div><div class="ttdeci">@ FS</div><div class="ttdef"><b>Definition:</b> <a href="X86_8h_source.html#l00201">X86.h:201</a></div></div>
<div class="ttc" id="aclassllvm_1_1OptimizationRemarkEmitter_html_aae6a98aea85aa3af87357cc5448db499"><div class="ttname"><a href="classllvm_1_1OptimizationRemarkEmitter.html#aae6a98aea85aa3af87357cc5448db499">llvm::OptimizationRemarkEmitter::emit</a></div><div class="ttdeci">void emit(DiagnosticInfoOptimizationBase &amp;OptDiag)</div><div class="ttdoc">Output the remark via the diagnostic handler and to the optimization record file.</div><div class="ttdef"><b>Definition:</b> <a href="OptimizationRemarkEmitter_8cpp_source.html#l00079">OptimizationRemarkEmitter.cpp:79</a></div></div>
<div class="ttc" id="anamespacellvm_html_a502009030bffff8a6992f4e4eb9380f5"><div class="ttname"><a href="namespacellvm.html#a502009030bffff8a6992f4e4eb9380f5">llvm::SplitIndirectBrCriticalEdges</a></div><div class="ttdeci">bool SplitIndirectBrCriticalEdges(Function &amp;F, bool IgnoreBlocksWithoutPHI, BranchProbabilityInfo *BPI=nullptr, BlockFrequencyInfo *BFI=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="BreakCriticalEdges_8cpp_source.html#l00338">BreakCriticalEdges.cpp:338</a></div></div>
<div class="ttc" id="aPGOInstrumentation_8cpp_html_ac3b9bc99faa43a4c41864f15a4e8c2ef"><div class="ttname"><a href="PGOInstrumentation_8cpp.html#ac3b9bc99faa43a4c41864f15a4e8c2ef">PGOTraceFuncHash</a></div><div class="ttdeci">static cl::opt&lt; std::string &gt; PGOTraceFuncHash(&quot;pgo-trace-func-hash&quot;, cl::init(&quot;-&quot;), cl::Hidden, cl::value_desc(&quot;function name&quot;), cl::desc(&quot;Trace the hash of the function with this name.&quot;))</div></div>
<div class="ttc" id="anamespacellvm_html_ad6441cc53729e3cc831bd5c78b4349d0"><div class="ttname"><a href="namespacellvm.html#ad6441cc53729e3cc831bd5c78b4349d0">llvm::WriteGraph</a></div><div class="ttdeci">raw_ostream &amp; WriteGraph(raw_ostream &amp;O, const GraphType &amp;G, bool ShortNames=false, const Twine &amp;Title=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="GraphWriter_8h_source.html#l00359">GraphWriter.h:359</a></div></div>
<div class="ttc" id="aclassllvm_1_1SelectInst_html"><div class="ttname"><a href="classllvm_1_1SelectInst.html">llvm::SelectInst</a></div><div class="ttdoc">This class represents the LLVM 'select' instruction.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01746">Instructions.h:1746</a></div></div>
<div class="ttc" id="aclassllvm_1_1IndexedInstrProfReader_html_a071f65a20661e8049db465eae188ec72"><div class="ttname"><a href="classllvm_1_1IndexedInstrProfReader.html#a071f65a20661e8049db465eae188ec72">llvm::IndexedInstrProfReader::create</a></div><div class="ttdeci">static Expected&lt; std::unique_ptr&lt; IndexedInstrProfReader &gt; &gt; create(const Twine &amp;Path, vfs::FileSystem &amp;FS, const Twine &amp;RemappingPath=&quot;&quot;)</div><div class="ttdoc">Factory method to create an indexed reader.</div><div class="ttdef"><b>Definition:</b> <a href="InstrProfReader_8cpp_source.html#l00201">InstrProfReader.cpp:201</a></div></div>
<div class="ttc" id="aiterator__range_8h_html"><div class="ttname"><a href="iterator__range_8h.html">iterator_range.h</a></div></div>
<div class="ttc" id="aSIWholeQuadMode_8cpp_html_a0c198437833c48138f49e3589bd08773"><div class="ttname"><a href="SIWholeQuadMode_8cpp.html#a0c198437833c48138f49e3589bd08773">Mode</a></div><div class="ttdeci">SI Whole Quad Mode</div><div class="ttdef"><b>Definition:</b> <a href="SIWholeQuadMode_8cpp_source.html#l00262">SIWholeQuadMode.cpp:262</a></div></div>
<div class="ttc" id="aclassllvm_1_1MDTuple_html_aa905dc9d35b8732a290b468b0aee549d"><div class="ttname"><a href="classllvm_1_1MDTuple.html#aa905dc9d35b8732a290b468b0aee549d">llvm::MDTuple::get</a></div><div class="ttdeci">static MDTuple * get(LLVMContext &amp;Context, ArrayRef&lt; Metadata * &gt; MDs)</div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8h_source.html#l01356">Metadata.h:1356</a></div></div>
<div class="ttc" id="aclassllvm_1_1Module_html"><div class="ttname"><a href="classllvm_1_1Module.html">llvm::Module</a></div><div class="ttdoc">A Module instance is used to store all the information related to an LLVM module.</div><div class="ttdef"><b>Definition:</b> <a href="Module_8h_source.html#l00065">Module.h:65</a></div></div>
<div class="ttc" id="anamespacellvm_html_aa3a544a0d0dd4971f6c79d9869a1ffee"><div class="ttname"><a href="namespacellvm.html#aa3a544a0d0dd4971f6c79d9869a1ffee">llvm::InstrProfValueKind</a></div><div class="ttdeci">InstrProfValueKind</div><div class="ttdef"><b>Definition:</b> <a href="InstrProf_8h_source.html#l00244">InstrProf.h:244</a></div></div>
<div class="ttc" id="aclassllvm_1_1MDNode_html"><div class="ttname"><a href="classllvm_1_1MDNode.html">llvm::MDNode</a></div><div class="ttdoc">Metadata node.</div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8h_source.html#l00943">Metadata.h:943</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseMapBase_html_a49c487a9395a6c384be8544cfb2cfccf"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#a49c487a9395a6c384be8544cfb2cfccf">llvm::DenseMapBase&lt; DenseMap&lt; KeyT, ValueT, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;, KeyT, ValueT, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;::empty</a></div><div class="ttdeci">bool empty() const</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00098">DenseMap.h:98</a></div></div>
<div class="ttc" id="aPGOInstrumentation_8cpp_html_ad78e062f62e0d6e453941fb4ca843e4d"><div class="ttname"><a href="PGOInstrumentation_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">DEBUG_TYPE</a></div><div class="ttdeci">#define DEBUG_TYPE</div><div class="ttdef"><b>Definition:</b> <a href="PGOInstrumentation_8cpp_source.html#l00137">PGOInstrumentation.cpp:137</a></div></div>
<div class="ttc" id="aAssumeBundleBuilder_8cpp_html_afb136e0532bcaed86521b462e6538d62"><div class="ttname"><a href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a></div><div class="ttdeci">assume Assume Builder</div><div class="ttdef"><b>Definition:</b> <a href="AssumeBundleBuilder_8cpp_source.html#l00651">AssumeBundleBuilder.cpp:651</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html"><div class="ttname"><a href="classllvm_1_1APInt.html">llvm::APInt</a></div><div class="ttdoc">Class for arbitrary precision integers.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00075">APInt.h:75</a></div></div>
<div class="ttc" id="aTriple_8h_html"><div class="ttname"><a href="Triple_8h.html">Triple.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_a1b38a63d3be7413f335be5f2d81bb234"><div class="ttname"><a href="namespacellvm.html#a1b38a63d3be7413f335be5f2d81bb234">llvm::GetSuccessorNumber</a></div><div class="ttdeci">unsigned GetSuccessorNumber(const BasicBlock *BB, const BasicBlock *Succ)</div><div class="ttdoc">Search for the specified successor of basic block BB and return its position in the terminator instru...</div><div class="ttdef"><b>Definition:</b> <a href="CFG_8cpp_source.html#l00079">CFG.cpp:79</a></div></div>
<div class="ttc" id="anamespacellvm_html_a10f3d955592ae2bc745f57e5b48ae115"><div class="ttname"><a href="namespacellvm.html#a10f3d955592ae2bc745f57e5b48ae115">llvm::size</a></div><div class="ttdeci">auto size(R &amp;&amp;Range, std::enable_if_t&lt; std::is_base_of&lt; std::random_access_iterator_tag, typename std::iterator_traits&lt; decltype(Range.begin())&gt;::iterator_category &gt;::value, void &gt; *=nullptr)</div><div class="ttdoc">Get the size of a range.</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l01716">STLExtras.h:1716</a></div></div>
<div class="ttc" id="aAnalysis_2CFG_8h_html"><div class="ttname"><a href="Analysis_2CFG_8h.html">CFG.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1ProfileSummaryAnalysis_html"><div class="ttname"><a href="classllvm_1_1ProfileSummaryAnalysis.html">llvm::ProfileSummaryAnalysis</a></div><div class="ttdoc">An analysis pass based on the new PM to deliver ProfileSummaryInfo.</div><div class="ttdef"><b>Definition:</b> <a href="ProfileSummaryInfo_8h_source.html#l00212">ProfileSummaryInfo.h:212</a></div></div>
<div class="ttc" id="aPGOInstrumentation_8cpp_html_a7c5ef045038b4e138277f9325797286f"><div class="ttname"><a href="PGOInstrumentation_8cpp.html#a7c5ef045038b4e138277f9325797286f">PGOFunctionSizeThreshold</a></div><div class="ttdeci">static cl::opt&lt; unsigned &gt; PGOFunctionSizeThreshold(&quot;pgo-function-size-threshold&quot;, cl::Hidden, cl::desc(&quot;Do not instrument functions smaller than this threshold.&quot;))</div></div>
<div class="ttc" id="aPGOInstrumentation_8cpp_html_a2b31b32a49f601ea320bdeefc3209ff8"><div class="ttname"><a href="PGOInstrumentation_8cpp.html#a2b31b32a49f601ea320bdeefc3209ff8">skipPGO</a></div><div class="ttdeci">static bool skipPGO(const Function &amp;F)</div><div class="ttdef"><b>Definition:</b> <a href="PGOInstrumentation_8cpp_source.html#l01857">PGOInstrumentation.cpp:1857</a></div></div>
<div class="ttc" id="aclassllvm_1_1HashBuilderImpl_html"><div class="ttname"><a href="classllvm_1_1HashBuilderImpl.html">llvm::HashBuilderImpl</a></div><div class="ttdoc">Implementation of the HashBuilder interface.</div><div class="ttdef"><b>Definition:</b> <a href="HashBuilder_8h_source.html#l00094">HashBuilder.h:94</a></div></div>
<div class="ttc" id="aclassllvm_1_1ProfileSummaryInfo_html_a2600478d8188a85a14af8787024e1831"><div class="ttname"><a href="classllvm_1_1ProfileSummaryInfo.html#a2600478d8188a85a14af8787024e1831">llvm::ProfileSummaryInfo::refresh</a></div><div class="ttdeci">void refresh()</div><div class="ttdoc">If no summary is present, attempt to refresh.</div><div class="ttdef"><b>Definition:</b> <a href="ProfileSummaryInfo_8cpp_source.html#l00060">ProfileSummaryInfo.cpp:60</a></div></div>
<div class="ttc" id="aclassllvm_1_1ArrayRef_html"><div class="ttname"><a href="classllvm_1_1ArrayRef.html">llvm::ArrayRef</a></div><div class="ttdoc">ArrayRef - Represent a constant reference to an array (0 or more elements consecutively in memory),...</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00033">APInt.h:33</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopInfo_html"><div class="ttname"><a href="classllvm_1_1LoopInfo.html">llvm::LoopInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l01108">LoopInfo.h:1108</a></div></div>
<div class="ttc" id="astructllvm_1_1DOTGraphTraits_3_01PGOUseFunc_01_5_01_4_html_a5b784c099711d175d1fb5610d28eadbc"><div class="ttname"><a href="structllvm_1_1DOTGraphTraits_3_01PGOUseFunc_01_5_01_4.html#a5b784c099711d175d1fb5610d28eadbc">llvm::DOTGraphTraits&lt; PGOUseFunc * &gt;::getGraphName</a></div><div class="ttdeci">static std::string getGraphName(const PGOUseFunc *G)</div><div class="ttdef"><b>Definition:</b> <a href="PGOInstrumentation_8cpp_source.html#l02383">PGOInstrumentation.cpp:2383</a></div></div>
<div class="ttc" id="aclassllvm_1_1OptimizationRemarkEmitter_html"><div class="ttname"><a href="classllvm_1_1OptimizationRemarkEmitter.html">llvm::OptimizationRemarkEmitter</a></div><div class="ttdoc">The optimization diagnostic interface.</div><div class="ttdef"><b>Definition:</b> <a href="OptimizationRemarkEmitter_8h_source.html#l00033">OptimizationRemarkEmitter.h:33</a></div></div>
<div class="ttc" id="astructllvm_1_1NamedInstrProfRecord_html_ac51b9a380421e08532eb1e488863631d"><div class="ttname"><a href="structllvm_1_1NamedInstrProfRecord.html#ac51b9a380421e08532eb1e488863631d">llvm::NamedInstrProfRecord::setCSFlagInHash</a></div><div class="ttdeci">static void setCSFlagInHash(uint64_t &amp;FuncHash)</div><div class="ttdef"><b>Definition:</b> <a href="InstrProf_8h_source.html#l00926">InstrProf.h:926</a></div></div>
<div class="ttc" id="aBasicBlockSections_8cpp_html_a5fd0741d696f28faf65b33f6c6af8fda"><div class="ttname"><a href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a></div><div class="ttdeci">SmallVector&lt; MachineOperand, 4 &gt; Cond</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlockSections_8cpp_source.html#l00137">BasicBlockSections.cpp:137</a></div></div>
<div class="ttc" id="astructllvm_1_1APFloatBase_html_a6ba7c3d54a5a714f7a27861ee114cce3"><div class="ttname"><a href="structllvm_1_1APFloatBase.html#a6ba7c3d54a5a714f7a27861ee114cce3">llvm::APFloatBase::IEEEdouble</a></div><div class="ttdeci">static const fltSemantics &amp; IEEEdouble() LLVM_READNONE</div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8cpp_source.html#l00247">APFloat.cpp:247</a></div></div>
<div class="ttc" id="aclassllvm_1_1TinyPtrVector_html_aac784c7664f3f6b8076756c6fb0eed74"><div class="ttname"><a href="classllvm_1_1TinyPtrVector.html#aac784c7664f3f6b8076756c6fb0eed74">llvm::TinyPtrVector::size</a></div><div class="ttdeci">unsigned size() const</div><div class="ttdef"><b>Definition:</b> <a href="TinyPtrVector_8h_source.html#l00171">TinyPtrVector.h:171</a></div></div>
<div class="ttc" id="aclassllvm_1_1StringRef_html"><div class="ttname"><a href="classllvm_1_1StringRef.html">llvm::StringRef</a></div><div class="ttdoc">StringRef - Represent a constant reference to a string, i.e.</div><div class="ttdef"><b>Definition:</b> <a href="StringRef_8h_source.html#l00050">StringRef.h:50</a></div></div>
<div class="ttc" id="alib_2Analysis_2README_8txt_html_ad5ccdce1179bbfb942a084b3005f360d"><div class="ttname"><a href="lib_2Analysis_2README_8txt.html#ad5ccdce1179bbfb942a084b3005f360d">this</a></div><div class="ttdeci">Analysis the ScalarEvolution expression for r is this</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Analysis_2README_8txt_source.html#l00008">README.txt:8</a></div></div>
<div class="ttc" id="aInstVisitor_8h_html"><div class="ttname"><a href="InstVisitor_8h.html">InstVisitor.h</a></div></div>
<div class="ttc" id="aPGOInstrumentation_8cpp_html_ae9fc9062a3d5b7b7dc9f687e248be7d8"><div class="ttname"><a href="PGOInstrumentation_8cpp.html#ae9fc9062a3d5b7b7dc9f687e248be7d8">PGOInstrMemOP</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; PGOInstrMemOP(&quot;pgo-instr-memop&quot;, cl::init(true), cl::Hidden, cl::desc(&quot;Use this option to turn on/off &quot; &quot;memory intrinsic size profiling.&quot;))</div></div>
<div class="ttc" id="aSupport_2ErrorHandling_8h_html_ace243f5c25697a1107cce46626b3dc94"><div class="ttname"><a href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a></div><div class="ttdeci">#define llvm_unreachable(msg)</div><div class="ttdoc">Marks that the current location is not supposed to be reachable.</div><div class="ttdef"><b>Definition:</b> <a href="Support_2ErrorHandling_8h_source.html#l00143">ErrorHandling.h:143</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_a6393a2d4fe7e10b28a0dcc35f881567b"><div class="ttname"><a href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">llvm::Value::getType</a></div><div class="ttdeci">Type * getType() const</div><div class="ttdoc">All values are typed, get the type of this value.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00255">Value.h:255</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantInt_html_a882d55a6aa2028e1a5ad708b275334e0"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#a882d55a6aa2028e1a5ad708b275334e0">llvm::ConstantInt::isZero</a></div><div class="ttdeci">bool isZero() const</div><div class="ttdoc">This is just a convenience method to make client code smaller for a common code.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00193">Constants.h:193</a></div></div>
<div class="ttc" id="aPGOInstrumentation_8cpp_html_a59956a56d1a2c15842922d6c2ba8de18"><div class="ttname"><a href="PGOInstrumentation_8cpp.html#a59956a56d1a2c15842922d6c2ba8de18">computeStackId</a></div><div class="ttdeci">static uint64_t computeStackId(GlobalValue::GUID Function, uint32_t LineOffset, uint32_t Column)</div><div class="ttdef"><b>Definition:</b> <a href="PGOInstrumentation_8cpp_source.html#l01254">PGOInstrumentation.cpp:1254</a></div></div>
<div class="ttc" id="aclassllvm_1_1Expected_html_ad26ecbb6920f4ea55f5ed4f64e52342d"><div class="ttname"><a href="classllvm_1_1Expected.html#ad26ecbb6920f4ea55f5ed4f64e52342d">llvm::Expected::get</a></div><div class="ttdeci">reference get()</div><div class="ttdoc">Returns a reference to the stored T value.</div><div class="ttdef"><b>Definition:</b> <a href="Support_2Error_8h_source.html#l00567">Error.h:567</a></div></div>
<div class="ttc" id="aclassuint32__t_html"><div class="ttname"><a href="classuint32__t.html">uint32_t</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchProbability_html"><div class="ttname"><a href="classllvm_1_1BranchProbability.html">llvm::BranchProbability</a></div><div class="ttdef"><b>Definition:</b> <a href="BranchProbability_8h_source.html#l00030">BranchProbability.h:30</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantInt_html_a13cc1f5d3225f4ec063520a747acec4c"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#a13cc1f5d3225f4ec063520a747acec4c">llvm::ConstantInt::isMinusOne</a></div><div class="ttdeci">bool isMinusOne() const</div><div class="ttdoc">This function will return true iff every bit in this constant is set to true.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00205">Constants.h:205</a></div></div>
<div class="ttc" id="aCommandLine_8h_html_a187fd767976b311c09dff5e05ac0c1bc"><div class="ttname"><a href="CommandLine_8h.html#a187fd767976b311c09dff5e05ac0c1bc">clEnumValN</a></div><div class="ttdeci">#define clEnumValN(ENUMVAL, FLAGNAME, DESC)</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00678">CommandLine.h:678</a></div></div>
<div class="ttc" id="alib_2Target_2ARM_2README_8txt_html_a1b45f45820a60c09244a87eb59824aec"><div class="ttname"><a href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a></div><div class="ttdeci">add sub stmia L5 ldr r0 bl L_printf $stub Instead of a and a wouldn t it be better to do three moves *Return an aggregate type is even return S</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2ARM_2README_8txt_source.html#l00210">README.txt:210</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstVisitor_html"><div class="ttname"><a href="classllvm_1_1InstVisitor.html">llvm::InstVisitor</a></div><div class="ttdoc">Base class for instruction visitors.</div><div class="ttdef"><b>Definition:</b> <a href="InstVisitor_8h_source.html#l00078">InstVisitor.h:78</a></div></div>
<div class="ttc" id="anamespacellvm_html_adbaf89bf10baba06502911701b74e51f"><div class="ttname"><a href="namespacellvm.html#adbaf89bf10baba06502911701b74e51f">llvm::DebugInfoCorrelate</a></div><div class="ttdeci">cl::opt&lt; bool &gt; DebugInfoCorrelate(&quot;debug-info-correlate&quot;, cl::desc(&quot;Use debug info to correlate profiles.&quot;), cl::init(false))</div><div class="ttdef"><b>Definition:</b> <a href="PGOInstrumentation_8cpp_source.html#l00327">PGOInstrumentation.cpp:327</a></div></div>
<div class="ttc" id="aBlockFrequencyInfo_8h_html"><div class="ttname"><a href="BlockFrequencyInfo_8h.html">BlockFrequencyInfo.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1ProfileSummary_html_aa5aa682b3904e88749fa973b3da370c2a1342349bb5356c363f057ba5d8203516"><div class="ttname"><a href="classllvm_1_1ProfileSummary.html#aa5aa682b3904e88749fa973b3da370c2a1342349bb5356c363f057ba5d8203516">llvm::ProfileSummary::PSK_CSInstr</a></div><div class="ttdeci">@ PSK_CSInstr</div><div class="ttdef"><b>Definition:</b> <a href="ProfileSummary_8h_source.html#l00047">ProfileSummary.h:47</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalValue_html_aedfa75f0c85c4aa85b257f066fbea57caa67f293befacbbf974525116ccf2ff42"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57caa67f293befacbbf974525116ccf2ff42">llvm::GlobalValue::AvailableExternallyLinkage</a></div><div class="ttdeci">@ AvailableExternallyLinkage</div><div class="ttdoc">Available for inspection, not emission.</div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00049">GlobalValue.h:49</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AMDGPUISD_html_a739d53294bc38cd6b0b23332f9994c0eafbca76f7875e080d97cee761de04d996"><div class="ttname"><a href="namespacellvm_1_1AMDGPUISD.html#a739d53294bc38cd6b0b23332f9994c0eafbca76f7875e080d97cee761de04d996">llvm::AMDGPUISD::BFI</a></div><div class="ttdeci">@ BFI</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPUISelLowering_8h_source.html#l00441">AMDGPUISelLowering.h:441</a></div></div>
<div class="ttc" id="aclassllvm_1_1OptimizationRemarkAnalysis_html"><div class="ttname"><a href="classllvm_1_1OptimizationRemarkAnalysis.html">llvm::OptimizationRemarkAnalysis</a></div><div class="ttdoc">Diagnostic information for optimization analysis remarks.</div><div class="ttdef"><b>Definition:</b> <a href="DiagnosticInfo_8h_source.html#l00780">DiagnosticInfo.h:780</a></div></div>
<div class="ttc" id="anamespacellvm_1_1ifs_html_adfe04e1a9cc096fb571e8372debaa67ea00d0b4f2d7dcdaaef835b97cf5d1e0df"><div class="ttname"><a href="namespacellvm_1_1ifs.html#adfe04e1a9cc096fb571e8372debaa67ea00d0b4f2d7dcdaaef835b97cf5d1e0df">llvm::ifs::IFSSymbolType::Func</a></div><div class="ttdeci">@ Func</div></div>
<div class="ttc" id="anamespacellvm_html_aa218f6b22c8e271f5f9e92aa1fe51086acb2fe3792bca163395ce75d581440847"><div class="ttname"><a href="namespacellvm.html#aa218f6b22c8e271f5f9e92aa1fe51086acb2fe3792bca163395ce75d581440847">llvm::instrprof_error::hash_mismatch</a></div><div class="ttdeci">@ hash_mismatch</div></div>
<div class="ttc" id="anamespacellvm_html_a9cec4f52857428ab9e0a8fd571e55d56"><div class="ttname"><a href="namespacellvm.html#a9cec4f52857428ab9e0a8fd571e55d56">llvm::NoPGOWarnMismatch</a></div><div class="ttdeci">cl::opt&lt; bool &gt; NoPGOWarnMismatch</div></div>
<div class="ttc" id="astructllvm_1_1GraphTraits_3_01PGOUseFunc_01_5_01_4_html_a7a2268b38d9494c882988c8d592d0dde"><div class="ttname"><a href="structllvm_1_1GraphTraits_3_01PGOUseFunc_01_5_01_4.html#a7a2268b38d9494c882988c8d592d0dde">llvm::GraphTraits&lt; PGOUseFunc * &gt;::nodes_begin</a></div><div class="ttdeci">static nodes_iterator nodes_begin(const PGOUseFunc *G)</div><div class="ttdef"><b>Definition:</b> <a href="PGOInstrumentation_8cpp_source.html#l02370">PGOInstrumentation.cpp:2370</a></div></div>
<div class="ttc" id="aVirtualFileSystem_8h_html"><div class="ttname"><a href="VirtualFileSystem_8h.html">VirtualFileSystem.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1PGOInstrumentationGenCreateVar_html_ae2b0af204b2b9dedfb6924940ddbe1c8"><div class="ttname"><a href="classllvm_1_1PGOInstrumentationGenCreateVar.html#ae2b0af204b2b9dedfb6924940ddbe1c8">llvm::PGOInstrumentationGenCreateVar::run</a></div><div class="ttdeci">PreservedAnalyses run(Module &amp;M, ModuleAnalysisManager &amp;AM)</div><div class="ttdef"><b>Definition:</b> <a href="PGOInstrumentation_8cpp_source.html#l01911">PGOInstrumentation.cpp:1911</a></div></div>
<div class="ttc" id="astructllvm_1_1memprof_1_1Frame_html_a243439d38cab3f2e3a6bbcf1529e6fe5"><div class="ttname"><a href="structllvm_1_1memprof_1_1Frame.html#a243439d38cab3f2e3a6bbcf1529e6fe5">llvm::memprof::Frame::Function</a></div><div class="ttdeci">GlobalValue::GUID Function</div><div class="ttdef"><b>Definition:</b> <a href="MemProf_8h_source.html#l00145">MemProf.h:145</a></div></div>
<div class="ttc" id="aSampleProfWriter_8cpp_html_ac5f3689931c7238da06ba00cf1002c62"><div class="ttname"><a href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a></div><div class="ttdeci">raw_pwrite_stream &amp; OS</div><div class="ttdef"><b>Definition:</b> <a href="SampleProfWriter_8cpp_source.html#l00053">SampleProfWriter.cpp:53</a></div></div>
<div class="ttc" id="anamespacellvm_1_1Intrinsic_html_aefa39f6b622360ce4e947feb9f671b73"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#aefa39f6b622360ce4e947feb9f671b73">llvm::Intrinsic::getDeclaration</a></div><div class="ttdeci">Function * getDeclaration(Module *M, ID id, ArrayRef&lt; Type * &gt; Tys=std::nullopt)</div><div class="ttdoc">Create or insert an LLVM Function declaration for an intrinsic, and return it.</div><div class="ttdef"><b>Definition:</b> <a href="Function_8cpp_source.html#l01502">Function.cpp:1502</a></div></div>
<div class="ttc" id="anamespacellvm_html_a68ee9c22fcc77e40d4ae44e5b37c7998"><div class="ttname"><a href="namespacellvm.html#a68ee9c22fcc77e40d4ae44e5b37c7998">llvm::annotateValueSite</a></div><div class="ttdeci">void annotateValueSite(Module &amp;M, Instruction &amp;Inst, const InstrProfRecord &amp;InstrProfR, InstrProfValueKind ValueKind, uint32_t SiteIndx, uint32_t MaxMDCount=3)</div><div class="ttdoc">Get the value profile data for value site SiteIdx from InstrProfR and annotate the instruction Inst w...</div><div class="ttdef"><b>Definition:</b> <a href="InstrProf_8cpp_source.html#l01018">InstrProf.cpp:1018</a></div></div>
<div class="ttc" id="anamespacellvm_1_1memprof_html_a1b412464f78908112e627ee7bc54f99d"><div class="ttname"><a href="namespacellvm_1_1memprof.html#a1b412464f78908112e627ee7bc54f99d">llvm::memprof::buildCallstackMetadata</a></div><div class="ttdeci">MDNode * buildCallstackMetadata(ArrayRef&lt; uint64_t &gt; CallStack, LLVMContext &amp;Ctx)</div><div class="ttdoc">Build callstack metadata from the provided list of call stack ids.</div><div class="ttdef"><b>Definition:</b> <a href="MemoryProfileInfo_8cpp_source.html#l00044">MemoryProfileInfo.cpp:44</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AMDGPU_1_1SendMsg_html_ad7fab8522e49be1b20c4db4fc431bd3c"><div class="ttname"><a href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#ad7fab8522e49be1b20c4db4fc431bd3c">llvm::AMDGPU::SendMsg::Msg</a></div><div class="ttdeci">const CustomOperand&lt; const MCSubtargetInfo &amp; &gt; Msg[]</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPUAsmUtils_8cpp_source.html#l00039">AMDGPUAsmUtils.cpp:39</a></div></div>
<div class="ttc" id="aPGOInstrumentation_8cpp_html_a1765b2301f26e0db70d0ba12b3a0e15a"><div class="ttname"><a href="PGOInstrumentation_8cpp.html#a1765b2301f26e0db70d0ba12b3a0e15a">annotateFunctionWithHashMismatch</a></div><div class="ttdeci">static void annotateFunctionWithHashMismatch(Function &amp;F, LLVMContext &amp;ctx)</div><div class="ttdef"><b>Definition:</b> <a href="PGOInstrumentation_8cpp_source.html#l01226">PGOInstrumentation.cpp:1226</a></div></div>
<div class="ttc" id="astructllvm_1_1memprof_1_1Frame_html_a1fc75c195c13837def54d3e3b0fda3a3"><div class="ttname"><a href="structllvm_1_1memprof_1_1Frame.html#a1fc75c195c13837def54d3e3b0fda3a3">llvm::memprof::Frame::Column</a></div><div class="ttdeci">uint32_t Column</div><div class="ttdef"><b>Definition:</b> <a href="MemProf_8h_source.html#l00153">MemProf.h:153</a></div></div>
<div class="ttc" id="aPGOInstrumentation_8cpp_html_ae4da63e96545cd00e5e9fa8845586c57"><div class="ttname"><a href="PGOInstrumentation_8cpp.html#ae4da63e96545cd00e5e9fa8845586c57">MaxNumAnnotations</a></div><div class="ttdeci">static cl::opt&lt; unsigned &gt; MaxNumAnnotations(&quot;icp-max-annotations&quot;, cl::init(3), cl::Hidden, cl::desc(&quot;Max number of annotations for a single indirect &quot; &quot;call callsite&quot;))</div></div>
<div class="ttc" id="anamespacellvm_1_1memprof_html"><div class="ttname"><a href="namespacellvm_1_1memprof.html">llvm::memprof</a></div><div class="ttdef"><b>Definition:</b> <a href="MemoryProfileInfo_8h_source.html#l00024">MemoryProfileInfo.h:24</a></div></div>
<div class="ttc" id="aAttributes_8h_html"><div class="ttname"><a href="Attributes_8h.html">Attributes.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1ValueProfileCollector_html"><div class="ttname"><a href="classllvm_1_1ValueProfileCollector.html">llvm::ValueProfileCollector</a></div><div class="ttdoc">Utility analysis that determines what values are worth profiling.</div><div class="ttdef"><b>Definition:</b> <a href="ValueProfileCollector_8h_source.html#l00057">ValueProfileCollector.h:57</a></div></div>
<div class="ttc" id="aConstant_8h_html"><div class="ttname"><a href="Constant_8h.html">Constant.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1Twine_html"><div class="ttname"><a href="classllvm_1_1Twine.html">llvm::Twine</a></div><div class="ttdoc">Twine - A lightweight data structure for efficiently representing the concatenation of temporary valu...</div><div class="ttdef"><b>Definition:</b> <a href="Twine_8h_source.html#l00081">Twine.h:81</a></div></div>
<div class="ttc" id="aPGOInstrumentation_8cpp_html_afcf97c296d164d441069b79ca44b206c"><div class="ttname"><a href="PGOInstrumentation_8cpp.html#afcf97c296d164d441069b79ca44b206c">ValueProfKindDescr</a></div><div class="ttdeci">static const char * ValueProfKindDescr[]</div><div class="ttdef"><b>Definition:</b> <a href="PGOInstrumentation_8cpp_source.html#l00367">PGOInstrumentation.cpp:367</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a05186fa23e4d11b9855a9599ba87a4b7"><div class="ttname"><a href="classllvm_1_1Type.html#a05186fa23e4d11b9855a9599ba87a4b7">llvm::Type::getInt64Ty</a></div><div class="ttdeci">static IntegerType * getInt64Ty(LLVMContext &amp;C)</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00242">Type.cpp:242</a></div></div>
<div class="ttc" id="aclassllvm_1_1vfs_1_1FileSystem_html"><div class="ttname"><a href="classllvm_1_1vfs_1_1FileSystem.html">llvm::vfs::FileSystem</a></div><div class="ttdoc">The virtual file system interface.</div><div class="ttdef"><b>Definition:</b> <a href="VirtualFileSystem_8h_source.html#l00267">VirtualFileSystem.h:267</a></div></div>
<div class="ttc" id="anamespacellvm_1_1GraphProgram_html_a0ad4685976f8c4d4a697a53fbe05d10b"><div class="ttname"><a href="namespacellvm_1_1GraphProgram.html#a0ad4685976f8c4d4a697a53fbe05d10b">llvm::GraphProgram::Name</a></div><div class="ttdeci">Name</div><div class="ttdef"><b>Definition:</b> <a href="GraphWriter_8h_source.html#l00050">GraphWriter.h:50</a></div></div>
<div class="ttc" id="aGraphWriter_8h_html"><div class="ttname"><a href="GraphWriter_8h.html">GraphWriter.h</a></div></div>
<div class="ttc" id="anamespacestd_html"><div class="ttname"><a href="namespacestd.html">std</a></div><div class="ttdef"><b>Definition:</b> <a href="BitVector_8h_source.html#l00851">BitVector.h:851</a></div></div>
<div class="ttc" id="aValueProfileCollector_8h_html"><div class="ttname"><a href="ValueProfileCollector_8h.html">ValueProfileCollector.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_a676f3f09c45be202a76f85427cfc507c"><div class="ttname"><a href="namespacellvm.html#a676f3f09c45be202a76f85427cfc507c">llvm::BLAKE3Result</a></div><div class="ttdeci">std::array&lt; uint8_t, NumBytes &gt; BLAKE3Result</div><div class="ttdoc">The constant LLVM_BLAKE3_OUT_LEN provides the default output length, 32 bytes, which is recommended f...</div><div class="ttdef"><b>Definition:</b> <a href="BLAKE3_8h_source.html#l00035">BLAKE3.h:35</a></div></div>
<div class="ttc" id="aclassllvm_1_1JamCRC_html_a90e799935e361788dee83dfb9b2d5099"><div class="ttname"><a href="classllvm_1_1JamCRC.html#a90e799935e361788dee83dfb9b2d5099">llvm::JamCRC::getCRC</a></div><div class="ttdeci">uint32_t getCRC() const</div><div class="ttdef"><b>Definition:</b> <a href="CRC_8h_source.html#l00052">CRC.h:52</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalAlias_html_a8a638534b520f72ab7f2c886da739a6c"><div class="ttname"><a href="classllvm_1_1GlobalAlias.html#a8a638534b520f72ab7f2c886da739a6c">llvm::GlobalAlias::create</a></div><div class="ttdeci">static GlobalAlias * create(Type *Ty, unsigned AddressSpace, LinkageTypes Linkage, const Twine &amp;Name, Constant *Aliasee, Module *Parent)</div><div class="ttdoc">If a parent module is specified, the alias is automatically inserted into the end of the specified mo...</div><div class="ttdef"><b>Definition:</b> <a href="Globals_8cpp_source.html#l00520">Globals.cpp:520</a></div></div>
<div class="ttc" id="aMemoryProfileInfo_8h_html"><div class="ttname"><a href="MemoryProfileInfo_8h.html">MemoryProfileInfo.h</a></div></div>
<div class="ttc" id="aPGOInstrumentation_8cpp_html_a844eee3543e553d76f38adcc510b9c09"><div class="ttname"><a href="PGOInstrumentation_8cpp.html#a844eee3543e553d76f38adcc510b9c09">canRenameComdat</a></div><div class="ttdeci">static bool canRenameComdat(Function &amp;F, std::unordered_multimap&lt; Comdat *, GlobalValue * &gt; &amp;ComdatMembers)</div><div class="ttdef"><b>Definition:</b> <a href="PGOInstrumentation_8cpp_source.html#l00669">PGOInstrumentation.cpp:669</a></div></div>
<div class="ttc" id="aclassllvm_1_1PreservedAnalyses_html_a1258a1ff55557c27684010ebd7283712"><div class="ttname"><a href="classllvm_1_1PreservedAnalyses.html#a1258a1ff55557c27684010ebd7283712">llvm::PreservedAnalyses::all</a></div><div class="ttdeci">static PreservedAnalyses all()</div><div class="ttdoc">Construct a special preserved set that preserves all passes.</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00158">PassManager.h:158</a></div></div>
<div class="ttc" id="aclassllvm_1_1ArrayRef_html_aab36927882fbfdcbb860d87fd9c30da8"><div class="ttname"><a href="classllvm_1_1ArrayRef.html#aab36927882fbfdcbb860d87fd9c30da8">llvm::ArrayRef::begin</a></div><div class="ttdeci">iterator begin() const</div><div class="ttdef"><b>Definition:</b> <a href="ArrayRef_8h_source.html#l00151">ArrayRef.h:151</a></div></div>
<div class="ttc" id="aBLAKE3_8h_html"><div class="ttname"><a href="BLAKE3_8h.html">BLAKE3.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1Error_html"><div class="ttname"><a href="classllvm_1_1Error.html">llvm::Error</a></div><div class="ttdoc">Lightweight error class with error context and mandatory checking.</div><div class="ttdef"><b>Definition:</b> <a href="Support_2Error_8h_source.html#l00156">Error.h:156</a></div></div>
<div class="ttc" id="aclassllvm_1_1ProfileSummaryInfo_html_a10ecb24d8737d52d6d5875479dcd42e8"><div class="ttname"><a href="classllvm_1_1ProfileSummaryInfo.html#a10ecb24d8737d52d6d5875479dcd42e8">llvm::ProfileSummaryInfo::getOrCompColdCountThreshold</a></div><div class="ttdeci">uint64_t getOrCompColdCountThreshold() const</div><div class="ttdoc">Returns ColdCountThreshold if set.</div><div class="ttdef"><b>Definition:</b> <a href="ProfileSummaryInfo_8cpp_source.html#l00324">ProfileSummaryInfo.cpp:324</a></div></div>
<div class="ttc" id="aGlobalVariable_8h_html"><div class="ttname"><a href="GlobalVariable_8h.html">GlobalVariable.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalValue_html_a71ee7e63264e4997a3340a781d44832e"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#a71ee7e63264e4997a3340a781d44832e">llvm::GlobalValue::getGUID</a></div><div class="ttdeci">GUID getGUID() const</div><div class="ttdoc">Return a 64-bit global unique ID constructed from global value name (i.e.</div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00591">GlobalValue.h:591</a></div></div>
<div class="ttc" id="aCasting_8h_html"><div class="ttname"><a href="Casting_8h.html">Casting.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1IndexedInstrProfReader_html_a08e38a87cd660517f3a9e1a88a66c875"><div class="ttname"><a href="classllvm_1_1IndexedInstrProfReader.html#a08e38a87cd660517f3a9e1a88a66c875">llvm::IndexedInstrProfReader::getMemProfRecord</a></div><div class="ttdeci">Expected&lt; memprof::MemProfRecord &gt; getMemProfRecord(uint64_t FuncNameHash)</div><div class="ttdoc">Return the memprof record for the function identified by llvm::md5(Name).</div><div class="ttdef"><b>Definition:</b> <a href="InstrProfReader_8cpp_source.html#l01138">InstrProfReader.cpp:1138</a></div></div>
<div class="ttc" id="aDiagnosticInfo_8h_html"><div class="ttname"><a href="DiagnosticInfo_8h.html">DiagnosticInfo.h</a></div></div>
<div class="ttc" id="aFunction_8h_html"><div class="ttname"><a href="Function_8h.html">Function.h</a></div></div>
<div class="ttc" id="aDOTGraphTraits_8h_html"><div class="ttname"><a href="DOTGraphTraits_8h.html">DOTGraphTraits.h</a></div></div>
<div class="ttc" id="anamespacellvm_1_1TargetStackID_html_a71392100eb15ba746b1f898986f5d8a5"><div class="ttname"><a href="namespacellvm_1_1TargetStackID.html#a71392100eb15ba746b1f898986f5d8a5">llvm::TargetStackID::Value</a></div><div class="ttdeci">Value</div><div class="ttdef"><b>Definition:</b> <a href="TargetFrameLowering_8h_source.html#l00027">TargetFrameLowering.h:27</a></div></div>
<div class="ttc" id="aPassManager_8h_html"><div class="ttname"><a href="PassManager_8h.html">PassManager.h</a></div></div>
<div class="ttc" id="astructllvm_1_1ValueProfileCollector_1_1CandidateInfo_html"><div class="ttname"><a href="structllvm_1_1ValueProfileCollector_1_1CandidateInfo.html">llvm::ValueProfileCollector::CandidateInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="ValueProfileCollector_8h_source.html#l00059">ValueProfileCollector.h:59</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetLibraryInfo_html"><div class="ttname"><a href="classllvm_1_1TargetLibraryInfo.html">llvm::TargetLibraryInfo</a></div><div class="ttdoc">Provides information about what library functions are available for the current target.</div><div class="ttdef"><b>Definition:</b> <a href="TargetLibraryInfo_8h_source.html#l00234">TargetLibraryInfo.h:234</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a5d3d315f678bc76e43b27d18e5d72829"><div class="ttname"><a href="classllvm_1_1Instruction.html#a5d3d315f678bc76e43b27d18e5d72829">llvm::Instruction::isEHPad</a></div><div class="ttdeci">bool isEHPad() const</div><div class="ttdoc">Return true if the instruction is a variety of EH-block.</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00685">Instruction.h:685</a></div></div>
<div class="ttc" id="aGCOVProfiling_8cpp_html_a482096c5cef8fc258fc2960985313fce"><div class="ttname"><a href="GCOVProfiling_8cpp.html#a482096c5cef8fc258fc2960985313fce">getInstrBB</a></div><div class="ttdeci">static BasicBlock * getInstrBB(CFGMST&lt; Edge, BBInfo &gt; &amp;MST, Edge &amp;E, const DenseSet&lt; const BasicBlock * &gt; &amp;ExecBlocks)</div><div class="ttdef"><b>Definition:</b> <a href="GCOVProfiling_8cpp_source.html#l00706">GCOVProfiling.cpp:706</a></div></div>
<div class="ttc" id="astructllvm_1_1cl_1_1value__desc_html"><div class="ttname"><a href="structllvm_1_1cl_1_1value__desc.html">llvm::cl::value_desc</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00420">CommandLine.h:420</a></div></div>
<div class="ttc" id="aclassllvm_1_1CFGMST_html_ad6e6d6f54fcae7b985c43108e544d274"><div class="ttname"><a href="classllvm_1_1CFGMST.html#ad6e6d6f54fcae7b985c43108e544d274">llvm::CFGMST::BBInfos</a></div><div class="ttdeci">DenseMap&lt; const BasicBlock *, std::unique_ptr&lt; BBInfo &gt; &gt; BBInfos</div><div class="ttdef"><b>Definition:</b> <a href="CFGMST_8h_source.html#l00048">CFGMST.h:48</a></div></div>
<div class="ttc" id="aclassllvm_1_1CFGMST_html_a5a0430fa0b3b900c4edf415627cdc0d4"><div class="ttname"><a href="classllvm_1_1CFGMST.html#a5a0430fa0b3b900c4edf415627cdc0d4">llvm::CFGMST::addEdge</a></div><div class="ttdeci">Edge &amp; addEdge(const BasicBlock *Src, const BasicBlock *Dest, uint64_t W)</div><div class="ttdef"><b>Definition:</b> <a href="CFGMST_8h_source.html#l00260">CFGMST.h:260</a></div></div>
<div class="ttc" id="aSLPVectorizer_8cpp_html_a3ca9742688618517cc4690fb947fb609"><div class="ttname"><a href="SLPVectorizer_8cpp.html#a3ca9742688618517cc4690fb947fb609">isSimple</a></div><div class="ttdeci">static bool isSimple(Instruction *I)</div><div class="ttdef"><b>Definition:</b> <a href="SLPVectorizer_8cpp_source.html#l00821">SLPVectorizer.cpp:821</a></div></div>
<div class="ttc" id="aPGOInstrumentation_8cpp_html_ad75dfb23e6262d289f5d2d86566dcbdf"><div class="ttname"><a href="PGOInstrumentation_8cpp.html#ad75dfb23e6262d289f5d2d86566dcbdf">stackFrameIncludesInlinedCallStack</a></div><div class="ttdeci">static bool stackFrameIncludesInlinedCallStack(ArrayRef&lt; Frame &gt; ProfileCallStack, ArrayRef&lt; uint64_t &gt; InlinedCallStack, unsigned StartIndex=0)</div><div class="ttdef"><b>Definition:</b> <a href="PGOInstrumentation_8cpp_source.html#l01285">PGOInstrumentation.cpp:1285</a></div></div>
<div class="ttc" id="aGlobalAlias_8h_html"><div class="ttname"><a href="GlobalAlias_8h.html">GlobalAlias.h</a></div></div>
<div class="ttc" id="aMemoryBuiltins_8cpp_html_abb725d65acc814edc5c025fb8ee6d55b"><div class="ttname"><a href="MemoryBuiltins_8cpp.html#abb725d65acc814edc5c025fb8ee6d55b">AllocType</a></div><div class="ttdeci">AllocType</div><div class="ttdef"><b>Definition:</b> <a href="MemoryBuiltins_8cpp_source.html#l00053">MemoryBuiltins.cpp:53</a></div></div>
<div class="ttc" id="aclassllvm_1_1MDBuilder_html"><div class="ttname"><a href="classllvm_1_1MDBuilder.html">llvm::MDBuilder</a></div><div class="ttdef"><b>Definition:</b> <a href="MDBuilder_8h_source.html#l00036">MDBuilder.h:36</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalValue_html_aedfa75f0c85c4aa85b257f066fbea57ca6c93794d7b99cd433e96c53eadb15a6e"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57ca6c93794d7b99cd433e96c53eadb15a6e">llvm::GlobalValue::ExternalLinkage</a></div><div class="ttdeci">@ ExternalLinkage</div><div class="ttdoc">Externally visible function.</div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00048">GlobalValue.h:48</a></div></div>
<div class="ttc" id="aclassllvm_1_1Comdat_html_ad8e5834e05be0104c4d64a3b4edeb51b"><div class="ttname"><a href="classllvm_1_1Comdat.html#ad8e5834e05be0104c4d64a3b4edeb51b">llvm::Comdat::setSelectionKind</a></div><div class="ttdeci">void setSelectionKind(SelectionKind Val)</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Comdat_8h_source.html#l00047">Comdat.h:47</a></div></div>
<div class="ttc" id="aclassllvm_1_1Expected_html_a94789df4ebd03dc008e8adebaa66ac1f"><div class="ttname"><a href="classllvm_1_1Expected.html#a94789df4ebd03dc008e8adebaa66ac1f">llvm::Expected::takeError</a></div><div class="ttdeci">Error takeError()</div><div class="ttdoc">Take ownership of the stored error.</div><div class="ttdef"><b>Definition:</b> <a href="Support_2Error_8h_source.html#l00597">Error.h:597</a></div></div>
<div class="ttc" id="aclassllvm_1_1OptimizationRemark_html"><div class="ttname"><a href="classllvm_1_1OptimizationRemark.html">llvm::OptimizationRemark</a></div><div class="ttdoc">Diagnostic information for applied optimization remarks.</div><div class="ttdef"><b>Definition:</b> <a href="DiagnosticInfo_8h_source.html#l00689">DiagnosticInfo.h:689</a></div></div>
<div class="ttc" id="astructllvm_1_1APFloatBase_html_a22ed74f1ed33c4d33f524a650ea536a6"><div class="ttname"><a href="structllvm_1_1APFloatBase.html#a22ed74f1ed33c4d33f524a650ea536a6">llvm::APFloatBase::rmNearestTiesToEven</a></div><div class="ttdeci">static constexpr roundingMode rmNearestTiesToEven</div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l00217">APFloat.h:217</a></div></div>
<div class="ttc" id="aPGOInstrumentation_8cpp_html_ac5c397084baa2b469105c5157b3f4556"><div class="ttname"><a href="PGOInstrumentation_8cpp.html#ac5c397084baa2b469105c5157b3f4556">NoPGOWarnMismatchComdatWeak</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; NoPGOWarnMismatchComdatWeak(&quot;no-pgo-warn-mismatch-comdat-weak&quot;, cl::init(true), cl::Hidden, cl::desc(&quot;The option is used to turn on/off &quot; &quot;warnings about hash mismatch for comdat &quot; &quot;or weak functions.&quot;))</div></div>
<div class="ttc" id="aInstructions_8h_html"><div class="ttname"><a href="Instructions_8h.html">Instructions.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1Constant_html_a0154da1d06b29a1d5649607ae2dfc389"><div class="ttname"><a href="classllvm_1_1Constant.html#a0154da1d06b29a1d5649607ae2dfc389">llvm::Constant::getIntegerValue</a></div><div class="ttdeci">static Constant * getIntegerValue(Type *Ty, const APInt &amp;V)</div><div class="ttdoc">Return the value for an integer or pointer constant, or a vector thereof, with the given scalar value...</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00386">Constants.cpp:386</a></div></div>
<div class="ttc" id="anamespacellvm_1_1support_1_1endian_html_a46eee35129898d0466b2af97eacb19ee"><div class="ttname"><a href="namespacellvm_1_1support_1_1endian.html#a46eee35129898d0466b2af97eacb19ee">llvm::support::endian::write64le</a></div><div class="ttdeci">void write64le(void *P, uint64_t V)</div><div class="ttdef"><b>Definition:</b> <a href="Endian_8h_source.html#l00417">Endian.h:417</a></div></div>
<div class="ttc" id="aSmallVector_8h_html"><div class="ttname"><a href="SmallVector_8h.html">SmallVector.h</a></div></div>
<div class="ttc" id="astructllvm_1_1GraphTraits_3_01PGOUseFunc_01_5_01_4_html_a34adae8e8e487d86a0dc804c351d50d7"><div class="ttname"><a href="structllvm_1_1GraphTraits_3_01PGOUseFunc_01_5_01_4.html#a34adae8e8e487d86a0dc804c351d50d7">llvm::GraphTraits&lt; PGOUseFunc * &gt;::child_begin</a></div><div class="ttdeci">static ChildIteratorType child_begin(const NodeRef N)</div><div class="ttdef"><b>Definition:</b> <a href="PGOInstrumentation_8cpp_source.html#l02364">PGOInstrumentation.cpp:2364</a></div></div>
<div class="ttc" id="aclassllvm_1_1memprof_1_1CallStackTrie_html"><div class="ttname"><a href="classllvm_1_1memprof_1_1CallStackTrie.html">llvm::memprof::CallStackTrie</a></div><div class="ttdoc">Class to build a trie of call stack contexts for a particular profiled allocation call,...</div><div class="ttdef"><b>Definition:</b> <a href="MemoryProfileInfo_8h_source.html#l00045">MemoryProfileInfo.h:45</a></div></div>
<div class="ttc" id="aDominators_8h_html"><div class="ttname"><a href="Dominators_8h.html">Dominators.h</a></div></div>
<div class="ttc" id="aPGOInstrumentation_8cpp_html_ada74fa2ec8933c6674ddded08aeef167"><div class="ttname"><a href="PGOInstrumentation_8cpp.html#ada74fa2ec8933c6674ddded08aeef167">DisableValueProfiling</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; DisableValueProfiling(&quot;disable-vp&quot;, cl::init(false), cl::Hidden, cl::desc(&quot;Disable Value Profiling&quot;))</div></div>
<div class="ttc" id="aModuleUtils_8h_html"><div class="ttname"><a href="ModuleUtils_8h.html">ModuleUtils.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1ProfileSummary_html_aa5aa682b3904e88749fa973b3da370c2a8c847a58db35295f26d16ccbfcac6e0c"><div class="ttname"><a href="classllvm_1_1ProfileSummary.html#aa5aa682b3904e88749fa973b3da370c2a8c847a58db35295f26d16ccbfcac6e0c">llvm::ProfileSummary::PSK_Instr</a></div><div class="ttdeci">@ PSK_Instr</div><div class="ttdef"><b>Definition:</b> <a href="ProfileSummary_8h_source.html#l00047">ProfileSummary.h:47</a></div></div>
<div class="ttc" id="aregcomp_8c_html_a0240ac851181b84ac374872dc5434ee4"><div class="ttname"><a href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a></div><div class="ttdeci">#define N</div></div>
<div class="ttc" id="aPGOInstrumentation_8cpp_html_a38fcde3c0125e4f07a85159aee2db323"><div class="ttname"><a href="PGOInstrumentation_8cpp.html#a38fcde3c0125e4f07a85159aee2db323">createIRLevelProfileFlagVar</a></div><div class="ttdeci">static GlobalVariable * createIRLevelProfileFlagVar(Module &amp;M, bool IsCS)</div><div class="ttdef"><b>Definition:</b> <a href="PGOInstrumentation_8cpp_source.html#l00374">PGOInstrumentation.cpp:374</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a1a7f07aaef6a3bee130bf0e0f0536802"><div class="ttname"><a href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">llvm::Instruction::getParent</a></div><div class="ttdeci">const BasicBlock * getParent() const</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00090">Instruction.h:90</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_aa7414ba9f658ff1287d22a4b8fe81bcb"><div class="ttname"><a href="classllvm_1_1CmpInst.html#aa7414ba9f658ff1287d22a4b8fe81bcb">llvm::CmpInst::getPredicate</a></div><div class="ttdeci">Predicate getPredicate() const</div><div class="ttdoc">Return the predicate for this instruction.</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00808">InstrTypes.h:808</a></div></div>
<div class="ttc" id="aPGOInstrumentation_8cpp_html_a99c391269e75325086b8a1e95890ddd8"><div class="ttname"><a href="PGOInstrumentation_8cpp.html#a99c391269e75325086b8a1e95890ddd8">PGOTestProfileFile</a></div><div class="ttdeci">static cl::opt&lt; std::string &gt; PGOTestProfileFile(&quot;pgo-test-profile-file&quot;, cl::init(&quot;&quot;), cl::Hidden, cl::value_desc(&quot;filename&quot;), cl::desc(&quot;Specify the path of profile data file. This is&quot; &quot;mainly for test purpose.&quot;))</div></div>
<div class="ttc" id="anamespacellvm_html_a13c1b5a253da5da49ce33d03dc1efc07"><div class="ttname"><a href="namespacellvm.html#a13c1b5a253da5da49ce33d03dc1efc07">llvm::to_string</a></div><div class="ttdeci">std::string to_string(const T &amp;Value)</div><div class="ttdef"><b>Definition:</b> <a href="ScopedPrinter_8h_source.html#l00085">ScopedPrinter.h:85</a></div></div>
<div class="ttc" id="anamespacellvm_html_ad272ce4631595e235e560baf59dc1ffd"><div class="ttname"><a href="namespacellvm.html#ad272ce4631595e235e560baf59dc1ffd">llvm::setProfMetadata</a></div><div class="ttdeci">void setProfMetadata(Module *M, Instruction *TI, ArrayRef&lt; uint64_t &gt; EdgeCounts, uint64_t MaxCount)</div><div class="ttdef"><b>Definition:</b> <a href="PGOInstrumentation_8cpp_source.html#l02301">PGOInstrumentation.cpp:2301</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a8de021e28a3c04c9216ad8decf104f02"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">llvm::BasicBlock::getTerminator</a></div><div class="ttdeci">const Instruction * getTerminator() const LLVM_READONLY</div><div class="ttdoc">Returns the terminator instruction if the block is well formed or null if the block is not well forme...</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00127">BasicBlock.h:127</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html">llvm::SmallVectorImpl</a></div><div class="ttdoc">This class consists of common code factored out of the SmallVector class to reduce code duplication b...</div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l00042">APFloat.h:42</a></div></div>
<div class="ttc" id="astructllvm_1_1DefaultDOTGraphTraits_html"><div class="ttname"><a href="structllvm_1_1DefaultDOTGraphTraits.html">llvm::DefaultDOTGraphTraits</a></div><div class="ttdoc">DefaultDOTGraphTraits - This class provides the default implementations of all of the DOTGraphTraits ...</div><div class="ttdef"><b>Definition:</b> <a href="DOTGraphTraits_8h_source.html#l00028">DOTGraphTraits.h:28</a></div></div>
<div class="ttc" id="anamespacellvm_html_aa218f6b22c8e271f5f9e92aa1fe51086a7596fdd04dba990373ab2f3da0c7dd3f"><div class="ttname"><a href="namespacellvm.html#aa218f6b22c8e271f5f9e92aa1fe51086a7596fdd04dba990373ab2f3da0c7dd3f">llvm::instrprof_error::malformed</a></div><div class="ttdeci">@ malformed</div></div>
<div class="ttc" id="anamespacellvm_html_a6b0ac1fa4f05de76413c5e0ca6334035"><div class="ttname"><a href="namespacellvm.html#a6b0ac1fa4f05de76413c5e0ca6334035">llvm::reverse</a></div><div class="ttdeci">auto reverse(ContainerTy &amp;&amp;C)</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l00484">STLExtras.h:484</a></div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisManager_html"><div class="ttname"><a href="classllvm_1_1AnalysisManager.html">llvm::AnalysisManager</a></div><div class="ttdoc">A container for analyses that lazily runs them and caches their results.</div><div class="ttdef"><b>Definition:</b> <a href="InstructionSimplify_8h_source.html#l00042">InstructionSimplify.h:42</a></div></div>
<div class="ttc" id="aPGOInstrumentation_8cpp_html_a6c13c3a269c58cac403ad567c29d679e"><div class="ttname"><a href="PGOInstrumentation_8cpp.html#a6c13c3a269c58cac403ad567c29d679e">verifyFuncBFI</a></div><div class="ttdeci">static void verifyFuncBFI(PGOUseFunc &amp;Func, LoopInfo &amp;LI, BranchProbabilityInfo &amp;NBPI, uint64_t HotCountThreshold, uint64_t ColdCountThreshold)</div><div class="ttdef"><b>Definition:</b> <a href="PGOInstrumentation_8cpp_source.html#l01987">PGOInstrumentation.cpp:1987</a></div></div>
<div class="ttc" id="aclassllvm_1_1BlockFrequencyInfo_html_a45e6b2c5c4e59ddc05ad9a2685706e75"><div class="ttname"><a href="classllvm_1_1BlockFrequencyInfo.html#a45e6b2c5c4e59ddc05ad9a2685706e75">llvm::BlockFrequencyInfo::getBlockProfileCount</a></div><div class="ttdeci">std::optional&lt; uint64_t &gt; getBlockProfileCount(const BasicBlock *BB, bool AllowSynthetic=false) const</div><div class="ttdoc">Returns the estimated profile count of BB.</div><div class="ttdef"><b>Definition:</b> <a href="BlockFrequencyInfo_8cpp_source.html#l00208">BlockFrequencyInfo.cpp:208</a></div></div>
<div class="ttc" id="aclassllvm_1_1InnerAnalysisManagerProxy_html"><div class="ttname"><a href="classllvm_1_1InnerAnalysisManagerProxy.html">llvm::InnerAnalysisManagerProxy</a></div><div class="ttdoc">An analysis over an &quot;outer&quot; IR unit that provides access to an analysis manager over an &quot;inner&quot; IR un...</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00931">PassManager.h:931</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantInt_html_a244bfbe5aae876e56cf5e62f0f27867a"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#a244bfbe5aae876e56cf5e62f0f27867a">llvm::ConstantInt::isOne</a></div><div class="ttdeci">bool isOne() const</div><div class="ttdoc">This is just a convenience method to make client code smaller for a common case.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00199">Constants.h:199</a></div></div>
<div class="ttc" id="astructllvm_1_1InstrProfRecord_html_a69bdbaedb4ae6b233e5eccac5ebc2d77"><div class="ttname"><a href="structllvm_1_1InstrProfRecord.html#a69bdbaedb4ae6b233e5eccac5ebc2d77">llvm::InstrProfRecord::CountPseudoKind</a></div><div class="ttdeci">CountPseudoKind</div><div class="ttdef"><b>Definition:</b> <a href="InstrProf_8h_source.html#l00827">InstrProf.h:827</a></div></div>
<div class="ttc" id="aPGOInstrumentation_8cpp_html_a5231b25125e1131002b5192820d3c969"><div class="ttname"><a href="PGOInstrumentation_8cpp.html#a5231b25125e1131002b5192820d3c969">populateEHOperandBundle</a></div><div class="ttdeci">static void populateEHOperandBundle(VPCandidateInfo &amp;Cand, DenseMap&lt; BasicBlock *, ColorVector &gt; &amp;BlockColors, SmallVectorImpl&lt; OperandBundleDef &gt; &amp;OpBundles)</div><div class="ttdef"><b>Definition:</b> <a href="PGOInstrumentation_8cpp_source.html#l00821">PGOInstrumentation.cpp:821</a></div></div>
<div class="ttc" id="anamespacellvm_html_ac19cbbc4935a23e1d44f65e1eaba6b1d"><div class="ttname"><a href="namespacellvm.html#ac19cbbc4935a23e1d44f65e1eaba6b1d">llvm::extractBranchWeights</a></div><div class="ttdeci">bool extractBranchWeights(const MDNode *ProfileData, SmallVectorImpl&lt; uint32_t &gt; &amp;Weights)</div><div class="ttdoc">Extract branch weights from MD_prof metadata.</div><div class="ttdef"><b>Definition:</b> <a href="ProfDataUtils_8cpp_source.html#l00122">ProfDataUtils.cpp:122</a></div></div>
<div class="ttc" id="alib_2CodeGen_2README_8txt_html_a09776db24cf586ec9f1e18f3bae14099"><div class="ttname"><a href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a></div><div class="ttdeci">Common register allocation spilling lr str ldr sxth r3 ldr mla r4 can lr mov lr str ldr sxth r3 mla r4 and then merge mul and lr str ldr sxth r3 mla r4 It also increase the likelihood the store may become dead bb27 Successors according to LLVM BB</div><div class="ttdef"><b>Definition:</b> <a href="lib_2CodeGen_2README_8txt_source.html#l00039">README.txt:39</a></div></div>
<div class="ttc" id="anamespacellvm_html_a6391a34afa5b4ed1a5e556a8cc4d971b"><div class="ttname"><a href="namespacellvm.html#a6391a34afa5b4ed1a5e556a8cc4d971b">llvm::ViewBlockFreqFuncName</a></div><div class="ttdeci">cl::opt&lt; std::string &gt; ViewBlockFreqFuncName(&quot;view-bfi-func-name&quot;, cl::Hidden, cl::desc(&quot;The option to specify &quot; &quot;the name of the function &quot; &quot;whose CFG will be displayed.&quot;))</div><div class="ttdef"><b>Definition:</b> <a href="MachineBlockFrequencyInfo_8cpp_source.html#l00066">MachineBlockFrequencyInfo.cpp:66</a></div></div>
<div class="ttc" id="astructllvm_1_1AllocInfo_html"><div class="ttname"><a href="structllvm_1_1AllocInfo.html">llvm::AllocInfo</a></div><div class="ttdoc">Summary of memprof metadata on allocations.</div><div class="ttdef"><b>Definition:</b> <a href="ModuleSummaryIndex_8h_source.html#l00341">ModuleSummaryIndex.h:341</a></div></div>
<div class="ttc" id="aPGOInstrumentation_8cpp_html_add6e469a1c4babfb781d466def11319d"><div class="ttname"><a href="PGOInstrumentation_8cpp.html#add6e469a1c4babfb781d466def11319d">isIndirectBrTarget</a></div><div class="ttdeci">static bool isIndirectBrTarget(BasicBlock *BB)</div><div class="ttdef"><b>Definition:</b> <a href="PGOInstrumentation_8cpp_source.html#l01717">PGOInstrumentation.cpp:1717</a></div></div>
<div class="ttc" id="astructllvm_1_1GraphTraits_html"><div class="ttname"><a href="structllvm_1_1GraphTraits.html">llvm::GraphTraits</a></div><div class="ttdef"><b>Definition:</b> <a href="GraphTraits_8h_source.html#l00037">GraphTraits.h:37</a></div></div>
<div class="ttc" id="aLLVMContext_8h_html"><div class="ttname"><a href="LLVMContext_8h.html">LLVMContext.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_af8f47bdd38873dfc134c383fa01b303a"><div class="ttname"><a href="namespacellvm.html#af8f47bdd38873dfc134c383fa01b303a">llvm::const_succ_iterator</a></div><div class="ttdeci">SuccIterator&lt; const Instruction, const BasicBlock &gt; const_succ_iterator</div><div class="ttdef"><b>Definition:</b> <a href="IR_2CFG_8h_source.html#l00243">CFG.h:243</a></div></div>
<div class="ttc" id="aclassllvm_1_1IndexedInstrProfReader_html_a968f8089b6e0f9e04c41d59695376baa"><div class="ttname"><a href="classllvm_1_1IndexedInstrProfReader.html#a968f8089b6e0f9e04c41d59695376baa">llvm::IndexedInstrProfReader::getMaximumFunctionCount</a></div><div class="ttdeci">uint64_t getMaximumFunctionCount(bool UseCS)</div><div class="ttdoc">Return the maximum of all known function counts.</div><div class="ttdef"><b>Definition:</b> <a href="InstrProfReader_8h_source.html#l00689">InstrProfReader.h:689</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_1_1ProfileCount_html"><div class="ttname"><a href="classllvm_1_1Function_1_1ProfileCount.html">llvm::Function::ProfileCount</a></div><div class="ttdoc">Class to represent profile counts.</div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00252">Function.h:252</a></div></div>
<div class="ttc" id="aclassllvm_1_1memprof_1_1CallStackTrie_html_a9a1e0bccf10c1de104a642f9574e7ea0"><div class="ttname"><a href="classllvm_1_1memprof_1_1CallStackTrie.html#a9a1e0bccf10c1de104a642f9574e7ea0">llvm::memprof::CallStackTrie::addCallStack</a></div><div class="ttdeci">void addCallStack(AllocationType AllocType, ArrayRef&lt; uint64_t &gt; StackIds)</div><div class="ttdoc">Add a call stack context with the given allocation type to the Trie.</div><div class="ttdef"><b>Definition:</b> <a href="MemoryProfileInfo_8cpp_source.html#l00100">MemoryProfileInfo.cpp:100</a></div></div>
<div class="ttc" id="aclassllvm_1_1User_html_abe1de1520a21f77ac57cc210bf0fb0b4"><div class="ttname"><a href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">llvm::User::getOperand</a></div><div class="ttdeci">Value * getOperand(unsigned i) const</div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00169">User.h:169</a></div></div>
<div class="ttc" id="astructllvm_1_1cl_1_1desc_html"><div class="ttname"><a href="structllvm_1_1cl_1_1desc.html">llvm::cl::desc</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00411">CommandLine.h:411</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchInst_html"><div class="ttname"><a href="classllvm_1_1BranchInst.html">llvm::BranchInst</a></div><div class="ttdoc">Conditional or Unconditional Branch instruction.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03139">Instructions.h:3139</a></div></div>
<div class="ttc" id="aclassllvm_1_1Comdat_html_afad14be926fcf2e071f21f178f99c28d"><div class="ttname"><a href="classllvm_1_1Comdat.html#afad14be926fcf2e071f21f178f99c28d">llvm::Comdat::getSelectionKind</a></div><div class="ttdeci">SelectionKind getSelectionKind() const</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Comdat_8h_source.html#l00046">Comdat.h:46</a></div></div>
<div class="ttc" id="araw__ostream_8h_html"><div class="ttname"><a href="raw__ostream_8h.html">raw_ostream.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1TinyPtrVector_html"><div class="ttname"><a href="classllvm_1_1TinyPtrVector.html">llvm::TinyPtrVector</a></div><div class="ttdoc">TinyPtrVector - This class is specialized for cases where there are normally 0 or 1 element in a vect...</div><div class="ttdef"><b>Definition:</b> <a href="TinyPtrVector_8h_source.html#l00029">TinyPtrVector.h:29</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AMDGPU_1_1VGPRIndexMode_html_a9afd95476c40096a5898ba0f06370b3a"><div class="ttname"><a href="namespacellvm_1_1AMDGPU_1_1VGPRIndexMode.html#a9afd95476c40096a5898ba0f06370b3a">llvm::AMDGPU::VGPRIndexMode::Id</a></div><div class="ttdeci">Id</div><div class="ttdef"><b>Definition:</b> <a href="SIDefines_8h_source.html#l00250">SIDefines.h:250</a></div></div>
<div class="ttc" id="anamespacellvm_1_1CallingConv_html_a5b166ae228ebbfdb96736d6022f3feeda94ec9273479164e4aec1d5d91b71dc85"><div class="ttname"><a href="namespacellvm_1_1CallingConv.html#a5b166ae228ebbfdb96736d6022f3feeda94ec9273479164e4aec1d5d91b71dc85">llvm::CallingConv::Cold</a></div><div class="ttdeci">@ Cold</div><div class="ttdoc">Attempts to make code in the caller as efficient as possible under the assumption that the call is no...</div><div class="ttdef"><b>Definition:</b> <a href="CallingConv_8h_source.html#l00047">CallingConv.h:47</a></div></div>
<div class="ttc" id="astructllvm_1_1APFloatBase_html_a1373bb8e8796d3b0b642b42cf55296eca95e6b9c1e27b4949da4c40f5afb842a6"><div class="ttname"><a href="structllvm_1_1APFloatBase.html#a1373bb8e8796d3b0b642b42cf55296eca95e6b9c1e27b4949da4c40f5afb842a6">llvm::APFloatBase::cmpEqual</a></div><div class="ttdeci">@ cmpEqual</div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l00209">APFloat.h:209</a></div></div>
<div class="ttc" id="aclassllvm_1_1LLVMContext_html_a800c1300065ca1615d2f4fb88623afd5a8997c6b0930e2c05209e95e7172c6cf3"><div class="ttname"><a href="classllvm_1_1LLVMContext.html#a800c1300065ca1615d2f4fb88623afd5a8997c6b0930e2c05209e95e7172c6cf3">llvm::LLVMContext::OB_funclet</a></div><div class="ttdeci">@ OB_funclet</div><div class="ttdef"><b>Definition:</b> <a href="LLVMContext_8h_source.html#l00090">LLVMContext.h:90</a></div></div>
<div class="ttc" id="aBasicBlockUtils_8h_html"><div class="ttname"><a href="BasicBlockUtils_8h.html">BasicBlockUtils.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalValue_html_aedfa75f0c85c4aa85b257f066fbea57caf2b592edf18170e7aff4e8f3bae3360c"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57caf2b592edf18170e7aff4e8f3bae3360c">llvm::GlobalValue::LinkOnceODRLinkage</a></div><div class="ttdeci">@ LinkOnceODRLinkage</div><div class="ttdoc">Same, but only replaced by something equivalent.</div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00051">GlobalValue.h:51</a></div></div>
<div class="ttc" id="aPGOInstrumentation_8cpp_html_a33c507f28e0aa55010dd25f57a61f826"><div class="ttname"><a href="PGOInstrumentation_8cpp.html#a33c507f28e0aa55010dd25f57a61f826">collectComdatMembers</a></div><div class="ttdeci">static void collectComdatMembers(Module &amp;M, std::unordered_multimap&lt; Comdat *, GlobalValue * &gt; &amp;ComdatMembers)</div><div class="ttdef"><b>Definition:</b> <a href="PGOInstrumentation_8cpp_source.html#l01840">PGOInstrumentation.cpp:1840</a></div></div>
<div class="ttc" id="aValue_8h_html"><div class="ttname"><a href="Value_8h.html">Value.h</a></div></div>
<div class="ttc" id="aPGOInstrumentation_8cpp_html_a359ef43d440c9bfc7d5dfd307fef221d"><div class="ttname"><a href="PGOInstrumentation_8cpp.html#a359ef43d440c9bfc7d5dfd307fef221d">addCallStack</a></div><div class="ttdeci">static void addCallStack(CallStackTrie &amp;AllocTrie, const AllocationInfo *AllocInfo)</div><div class="ttdef"><b>Definition:</b> <a href="PGOInstrumentation_8cpp_source.html#l01269">PGOInstrumentation.cpp:1269</a></div></div>
<div class="ttc" id="aclassllvm_1_1CFGMST_html_af6d53cb002b3fe8f7c4b7a7c3323e4c0"><div class="ttname"><a href="classllvm_1_1CFGMST.html#af6d53cb002b3fe8f7c4b7a7c3323e4c0">llvm::CFGMST::dumpEdges</a></div><div class="ttdeci">void dumpEdges(raw_ostream &amp;OS, const Twine &amp;Message) const</div><div class="ttdef"><b>Definition:</b> <a href="CFGMST_8h_source.html#l00241">CFGMST.h:241</a></div></div>
<div class="ttc" id="aclassllvm_1_1PGOInstrumentationUse_html_a016467155ff27477979a58b78577db80"><div class="ttname"><a href="classllvm_1_1PGOInstrumentationUse.html#a016467155ff27477979a58b78577db80">llvm::PGOInstrumentationUse::PGOInstrumentationUse</a></div><div class="ttdeci">PGOInstrumentationUse(std::string Filename=&quot;&quot;, std::string RemappingFilename=&quot;&quot;, bool IsCS=false, IntrusiveRefCntPtr&lt; vfs::FileSystem &gt; FS=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="PGOInstrumentation_8cpp_source.html#l02254">PGOInstrumentation.cpp:2254</a></div></div>
<div class="ttc" id="anamespacellvm_html_a2aa0f5c36ac6291f5d5f2b4efd9ffe70"><div class="ttname"><a href="namespacellvm.html#a2aa0f5c36ac6291f5d5f2b4efd9ffe70">llvm::handleAllErrors</a></div><div class="ttdeci">void handleAllErrors(Error E, HandlerTs &amp;&amp;... Handlers)</div><div class="ttdoc">Behaves the same as handleErrors, except that by contract all errors must be handled by the given han...</div><div class="ttdef"><b>Definition:</b> <a href="Support_2Error_8h_source.html#l00966">Error.h:966</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html"><div class="ttname"><a href="classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00074">Value.h:74</a></div></div>
<div class="ttc" id="aclassllvm_1_1CFGMST_html_af0de013f86c04f472a34136841b7e4c0"><div class="ttname"><a href="classllvm_1_1CFGMST.html#af0de013f86c04f472a34136841b7e4c0">llvm::CFGMST::findBBInfo</a></div><div class="ttdeci">BBInfo * findBBInfo(const BasicBlock *BB) const</div><div class="ttdef"><b>Definition:</b> <a href="CFGMST_8h_source.html#l00090">CFGMST.h:90</a></div></div>
<div class="ttc" id="aDebug_8h_html"><div class="ttname"><a href="Debug_8h.html">Debug.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetLibraryAnalysis_html"><div class="ttname"><a href="classllvm_1_1TargetLibraryAnalysis.html">llvm::TargetLibraryAnalysis</a></div><div class="ttdoc">Analysis pass providing the TargetLibraryInfo.</div><div class="ttdef"><b>Definition:</b> <a href="TargetLibraryInfo_8h_source.html#l00540">TargetLibraryInfo.h:540</a></div></div>
<div class="ttc" id="aclassllvm_1_1IntrusiveRefCntPtr_html"><div class="ttname"><a href="classllvm_1_1IntrusiveRefCntPtr.html">llvm::IntrusiveRefCntPtr</a></div><div class="ttdoc">A smart pointer to a reference-counted object that inherits from RefCountedBase or ThreadSafeRefCount...</div><div class="ttdef"><b>Definition:</b> <a href="IntrusiveRefCntPtr_8h_source.html#l00168">IntrusiveRefCntPtr.h:168</a></div></div>
<div class="ttc" id="astructllvm_1_1InstrProfRecord_html_a1b5488b65ab76c49ab7dd16115c23f56"><div class="ttname"><a href="structllvm_1_1InstrProfRecord.html#a1b5488b65ab76c49ab7dd16115c23f56">llvm::InstrProfRecord::Counts</a></div><div class="ttdeci">std::vector&lt; uint64_t &gt; Counts</div><div class="ttdef"><b>Definition:</b> <a href="InstrProf_8h_source.html#l00731">InstrProf.h:731</a></div></div>
<div class="ttc" id="aclassllvm_1_1ArrayRef_html_a7ca5197533a9c1fb8a2bd30587fcec6b"><div class="ttname"><a href="classllvm_1_1ArrayRef.html#a7ca5197533a9c1fb8a2bd30587fcec6b">llvm::ArrayRef::end</a></div><div class="ttdeci">iterator end() const</div><div class="ttdef"><b>Definition:</b> <a href="ArrayRef_8h_source.html#l00152">ArrayRef.h:152</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchInst_html_a7e4be8b16fbd68c9045a388904044e01"><div class="ttname"><a href="classllvm_1_1BranchInst.html#a7e4be8b16fbd68c9045a388904044e01">llvm::BranchInst::isConditional</a></div><div class="ttdeci">bool isConditional() const</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03218">Instructions.h:3218</a></div></div>
<div class="ttc" id="aclassllvm_1_1ValueProfileCollector_html_a9051f7b5cb39eaecf1a333768670f72f"><div class="ttname"><a href="classllvm_1_1ValueProfileCollector.html#a9051f7b5cb39eaecf1a333768670f72f">llvm::ValueProfileCollector::get</a></div><div class="ttdeci">std::vector&lt; CandidateInfo &gt; get(InstrProfValueKind Kind) const</div><div class="ttdoc">returns a list of value profiling candidates of the given kind</div><div class="ttdef"><b>Definition:</b> <a href="ValueProfileCollector_8cpp_source.html#l00073">ValueProfileCollector.cpp:73</a></div></div>
<div class="ttc" id="anamespacellvm_html_aa014490a40c9286ee7e026a2f579eea9"><div class="ttname"><a href="namespacellvm.html#aa014490a40c9286ee7e026a2f579eea9">llvm::isFuncletEHPersonality</a></div><div class="ttdeci">bool isFuncletEHPersonality(EHPersonality Pers)</div><div class="ttdoc">Returns true if this is a personality function that invokes handler funclets (which must return to it...</div><div class="ttdef"><b>Definition:</b> <a href="EHPersonalities_8h_source.html#l00064">EHPersonalities.h:64</a></div></div>
<div class="ttc" id="aclassllvm_1_1MDBuilder_html_a7fb87fc21e00d45516f625f9dd4067eb"><div class="ttname"><a href="classllvm_1_1MDBuilder.html#a7fb87fc21e00d45516f625f9dd4067eb">llvm::MDBuilder::createIrrLoopHeaderWeight</a></div><div class="ttdeci">MDNode * createIrrLoopHeaderWeight(uint64_t Weight)</div><div class="ttdoc">Return metadata containing an irreducible loop header weight.</div><div class="ttdef"><b>Definition:</b> <a href="MDBuilder_8cpp_source.html#l00330">MDBuilder.cpp:330</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html_a396fcfee6914c76974b73c3d203da6a5"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#a396fcfee6914c76974b73c3d203da6a5">llvm::SmallVectorImpl::emplace_back</a></div><div class="ttdeci">reference emplace_back(ArgTypes &amp;&amp;... Args)</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00941">SmallVector.h:941</a></div></div>
<div class="ttc" id="aPGOInstrumentation_8cpp_html_a5eb681b475b437938f19f12f032892a8"><div class="ttname"><a href="PGOInstrumentation_8cpp.html#a5eb681b475b437938f19f12f032892a8">InstrumentAllFunctions</a></div><div class="ttdeci">static bool InstrumentAllFunctions(Module &amp;M, function_ref&lt; TargetLibraryInfo &amp;(Function &amp;)&gt; LookupTLI, function_ref&lt; BranchProbabilityInfo *(Function &amp;)&gt; LookupBPI, function_ref&lt; BlockFrequencyInfo *(Function &amp;)&gt; LookupBFI, bool IsCS)</div><div class="ttdef"><b>Definition:</b> <a href="PGOInstrumentation_8cpp_source.html#l01888">PGOInstrumentation.cpp:1888</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Aug 7 2023 10:24:44 for LLVM by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LLVM: lib/Transforms/Utils/LoopPeel.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">LLVM
   &#160;<span id="projectnumber">17.0.0git</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a class="el" href="dir_a72932e0778af28115095468f6286ff8.html">Transforms</a></li><li class="navelem"><a class="el" href="dir_f75c00afeb315f44d76556a7c675e6e8.html">Utils</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">LoopPeel.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="LoopPeel_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//===- LoopPeel.cpp -------------------------------------------------------===//</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">// See https://llvm.org/LICENSE.txt for license information.</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">// Loop Peeling Utilities.</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160; </div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LoopPeel_8h.html">llvm/Transforms/Utils/LoopPeel.h</a>&quot;</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DenseMap_8h.html">llvm/ADT/DenseMap.h</a>&quot;</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SmallVector_8h.html">llvm/ADT/SmallVector.h</a>&quot;</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Statistic_8h.html">llvm/ADT/Statistic.h</a>&quot;</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Loads_8h.html">llvm/Analysis/Loads.h</a>&quot;</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LoopInfo_8h.html">llvm/Analysis/LoopInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LoopIterator_8h.html">llvm/Analysis/LoopIterator.h</a>&quot;</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ScalarEvolution_8h.html">llvm/Analysis/ScalarEvolution.h</a>&quot;</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ScalarEvolutionExpressions_8h.html">llvm/Analysis/ScalarEvolutionExpressions.h</a>&quot;</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="TargetTransformInfo_8h.html">llvm/Analysis/TargetTransformInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="BasicBlock_8h.html">llvm/IR/BasicBlock.h</a>&quot;</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Dominators_8h.html">llvm/IR/Dominators.h</a>&quot;</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Function_8h.html">llvm/IR/Function.h</a>&quot;</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="InstrTypes_8h.html">llvm/IR/InstrTypes.h</a>&quot;</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="IR_2Instruction_8h.html">llvm/IR/Instruction.h</a>&quot;</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Instructions_8h.html">llvm/IR/Instructions.h</a>&quot;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LLVMContext_8h.html">llvm/IR/LLVMContext.h</a>&quot;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MDBuilder_8h.html">llvm/IR/MDBuilder.h</a>&quot;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="PatternMatch_8h.html">llvm/IR/PatternMatch.h</a>&quot;</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ProfDataUtils_8h.html">llvm/IR/ProfDataUtils.h</a>&quot;</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Casting_8h.html">llvm/Support/Casting.h</a>&quot;</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CommandLine_8h.html">llvm/Support/CommandLine.h</a>&quot;</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Debug_8h.html">llvm/Support/Debug.h</a>&quot;</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="raw__ostream_8h.html">llvm/Support/raw_ostream.h</a>&quot;</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="BasicBlockUtils_8h.html">llvm/Transforms/Utils/BasicBlockUtils.h</a>&quot;</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Cloning_8h.html">llvm/Transforms/Utils/Cloning.h</a>&quot;</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LoopSimplify_8h.html">llvm/Transforms/Utils/LoopSimplify.h</a>&quot;</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LoopUtils_8h.html">llvm/Transforms/Utils/LoopUtils.h</a>&quot;</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ValueMapper_8h.html">llvm/Transforms/Utils/ValueMapper.h</a>&quot;</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#include &lt;algorithm&gt;</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &lt;cassert&gt;</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#include &lt;cstdint&gt;</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#include &lt;optional&gt;</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160; </div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespacellvm.html">llvm</a>;</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespacellvm_1_1PatternMatch.html">llvm::PatternMatch</a>;</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160; </div>
<div class="line"><a name="l00049"></a><span class="lineno"><a class="line" href="LoopPeel_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">   49</a></span>&#160;<span class="preprocessor">#define DEBUG_TYPE &quot;loop-peel&quot;</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160; </div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(NumPeeled, <span class="stringliteral">&quot;Number of loops peeled&quot;</span>);</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160; </div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;unsigned&gt;</a> <a class="code" href="LoopPeel_8cpp.html#aef4c7e0463b4cea18462fed1141cead5">UnrollPeelCount</a>(</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    <span class="stringliteral">&quot;unroll-peel-count&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Set the unroll peeling count, for testing purposes&quot;</span>));</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160; </div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    <a class="code" href="LoopPeel_8cpp.html#a5714fa22836848b9d701fa0a7dca1c2e">UnrollAllowPeeling</a>(<span class="stringliteral">&quot;unroll-allow-peeling&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">true</span>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;                       <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Allows loops to be peeled when the dynamic &quot;</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;                                <span class="stringliteral">&quot;trip count is known to be low.&quot;</span>));</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160; </div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    <a class="code" href="LoopPeel_8cpp.html#aeaa705f6e8562e660e7d8401a8d49b5e">UnrollAllowLoopNestsPeeling</a>(<span class="stringliteral">&quot;unroll-allow-loop-nests-peeling&quot;</span>,</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;                                <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">false</span>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;                                <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Allows loop nests to be peeled.&quot;</span>));</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160; </div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;unsigned&gt;</a> <a class="code" href="LoopPeel_8cpp.html#a5843a84a6e99ee35ed5c886180e988ca">UnrollPeelMaxCount</a>(</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    <span class="stringliteral">&quot;unroll-peel-max-count&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(7), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Max average trip count which will cause loop peeling.&quot;</span>));</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160; </div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;unsigned&gt;</a> <a class="code" href="LoopPeel_8cpp.html#a268021156ce360927a6b4211e64fd0ee">UnrollForcePeelCount</a>(</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    <span class="stringliteral">&quot;unroll-force-peel-count&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(0), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Force a peel count regardless of profiling information.&quot;</span>));</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160; </div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="LoopPeel_8cpp.html#a00d63adc9db07b4830444e86330a291d">DisableAdvancedPeeling</a>(</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    <span class="stringliteral">&quot;disable-advanced-peeling&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">false</span>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;        <span class="stringliteral">&quot;Disable advance peeling. Issues for convergent targets (D134803).&quot;</span>));</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160; </div>
<div class="line"><a name="l00080"></a><span class="lineno"><a class="line" href="LoopPeel_8cpp.html#a7f5685c46cf812c90576046af45cd7fa">   80</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="LoopPeel_8cpp.html#a7f5685c46cf812c90576046af45cd7fa">PeeledCountMetaData</a> = <span class="stringliteral">&quot;llvm.loop.peeled.count&quot;</span>;</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160; </div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="comment">// Check whether we are capable of peeling this loop.</span></div>
<div class="line"><a name="l00083"></a><span class="lineno"><a class="line" href="namespacellvm.html#a3aea1e78510aa7469457aade10808e51">   83</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="namespacellvm.html#a3aea1e78510aa7469457aade10808e51">llvm::canPeel</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Loop.html">Loop</a> *L) {</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;  <span class="comment">// Make sure the loop is in simplified form</span></div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;  <span class="keywordflow">if</span> (!L-&gt;<a class="code" href="classllvm_1_1Loop.html#ac233a2693163ed58305215ca2f6921e3">isLoopSimplifyForm</a>())</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="LoopPeel_8cpp.html#a00d63adc9db07b4830444e86330a291d">DisableAdvancedPeeling</a>)</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160; </div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;BasicBlock *, 4&gt;</a> Exits;</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;  L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#aed67883fd0d5f8356bb709b4d16ebe70">getUniqueNonLatchExitBlocks</a>(Exits);</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;  <span class="comment">// The latch must either be the only exiting block or all non-latch exit</span></div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;  <span class="comment">// blocks have either a deopt or unreachable terminator or compose a chain of</span></div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;  <span class="comment">// blocks where the last one is either deopt or unreachable terminated. Both</span></div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;  <span class="comment">// deopt and unreachable terminators are a strong indication they are not</span></div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;  <span class="comment">// taken. Note that this is a profitability check, not a legality check. Also</span></div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;  <span class="comment">// note that LoopPeeling currently can only update the branch weights of latch</span></div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;  <span class="comment">// blocks and branch weights to blocks with deopt or unreachable do not need</span></div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;  <span class="comment">// updating.</span></div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#a0d10fe510ced2849a8074fe81e5d04ce">llvm::all_of</a>(Exits, <a class="code" href="namespacellvm.html#a15055c7e3a33b44c293df24e4ba7bc5e">IsBlockFollowedByDeoptOrUnreachable</a>);</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;}</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160; </div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="keyword">namespace </span>{</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160; </div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="comment">// As a loop is peeled, it may be the case that Phi nodes become</span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="comment">// loop-invariant (ie, known because there is only one choice).</span></div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="comment">// For example, consider the following function:</span></div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;<span class="comment">//   void g(int);</span></div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;<span class="comment">//   void binary() {</span></div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;<span class="comment">//     int x = 0;</span></div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;<span class="comment">//     int y = 0;</span></div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;<span class="comment">//     int a = 0;</span></div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;<span class="comment">//     for(int i = 0; i &lt;100000; ++i) {</span></div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;<span class="comment">//       g(x);</span></div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;<span class="comment">//       x = y;</span></div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;<span class="comment">//       g(a);</span></div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;<span class="comment">//       y = a + 1;</span></div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<span class="comment">//       a = 5;</span></div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;<span class="comment">//     }</span></div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<span class="comment">//   }</span></div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="comment">// Peeling 3 iterations is beneficial because the values for x, y and a</span></div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;<span class="comment">// become known.  The IR for this loop looks something like the following:</span></div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;<span class="comment">//   %i = phi i32 [ 0, %entry ], [ %inc, %if.end ]</span></div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;<span class="comment">//   %a = phi i32 [ 0, %entry ], [ 5, %if.end ]</span></div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;<span class="comment">//   %y = phi i32 [ 0, %entry ], [ %add, %if.end ]</span></div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;<span class="comment">//   %x = phi i32 [ 0, %entry ], [ %y, %if.end ]</span></div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<span class="comment">//   ...</span></div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;<span class="comment">//   tail call void @_Z1gi(i32 signext %x)</span></div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;<span class="comment">//   tail call void @_Z1gi(i32 signext %a)</span></div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;<span class="comment">//   %add = add nuw nsw i32 %a, 1</span></div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;<span class="comment">//   %inc = add nuw nsw i32 %i, 1</span></div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;<span class="comment">//   %exitcond = icmp eq i32 %inc, 100000</span></div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;<span class="comment">//   br i1 %exitcond, label %for.cond.cleanup, label %for.body</span></div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;<span class="comment">// The arguments for the calls to g will become known after 3 iterations</span></div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;<span class="comment">// of the loop, because the phi nodes values become known after 3 iterations</span></div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;<span class="comment">// of the loop (ie, they are known on the 4th iteration, so peel 3 iterations).</span></div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;<span class="comment">// The first iteration has g(0), g(0); the second has g(0), g(5); the</span></div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<span class="comment">// third has g(1), g(5) and the fourth (and all subsequent) have g(6), g(5).</span></div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;<span class="comment">// Now consider the phi nodes:</span></div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;<span class="comment">//   %a is a phi with constants so it is determined after iteration 1.</span></div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;<span class="comment">//   %y is a phi based on a constant and %a so it is determined on</span></div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;<span class="comment">//     the iteration after %a is determined, so iteration 2.</span></div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;<span class="comment">//   %x is a phi based on a constant and %y so it is determined on</span></div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;<span class="comment">//     the iteration after %y, so iteration 3.</span></div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;<span class="comment">//   %i is based on itself (and is an induction variable) so it is</span></div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;<span class="comment">//     never determined.</span></div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;<span class="comment">// This means that peeling off 3 iterations will result in being able to</span></div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;<span class="comment">// remove the phi nodes for %a, %y, and %x.  The arguments for the</span></div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;<span class="comment">// corresponding calls to g are determined and the code for computing</span></div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;<span class="comment">// x, y, and a can be removed.</span></div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;<span class="comment">// The PhiAnalyzer class calculates how many times a loop should be</span></div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;<span class="comment">// peeled based on the above analysis of the phi nodes in the loop while</span></div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;<span class="comment">// respecting the maximum specified.</span></div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;<span class="keyword">class </span>PhiAnalyzer {</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;  PhiAnalyzer(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Loop.html">Loop</a> &amp;L, <span class="keywordtype">unsigned</span> MaxIterations);</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160; </div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;  <span class="comment">// Calculate the sufficient minimum number of iterations of the loop to peel</span></div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;  <span class="comment">// such that phi instructions become determined (subject to allowable limits)</span></div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;  std::optional&lt;unsigned&gt; calculateIterationsToPeel();</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160; </div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;<span class="keyword">protected</span>:</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;  <span class="keyword">using</span> PeelCounter = std::optional&lt;unsigned&gt;;</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;  <span class="keyword">const</span> PeelCounter Unknown = std::nullopt;</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160; </div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;  <span class="comment">// Add 1 respecting Unknown and return Unknown if result over MaxIterations</span></div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;  PeelCounter addOne(PeelCounter PC)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    <span class="keywordflow">if</span> (PC == Unknown)</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;      <span class="keywordflow">return</span> Unknown;</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    <span class="keywordflow">return</span> (*PC + 1 &lt;= MaxIterations) ? PeelCounter{*PC + 1} : <a class="code" href="namespacellvm_1_1pdb.html#a434cfa04e4ed34b7a901378557d4ca9eab5923ebc864d1679cf1c3a929c122037">Unknown</a>;</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;  }</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160; </div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;  <span class="comment">// Calculate the number of iterations after which the given value</span></div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;  <span class="comment">// becomes an invariant.</span></div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;  PeelCounter calculate(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Value.html">Value</a> &amp;);</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160; </div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1Loop.html">Loop</a> &amp;L;</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">unsigned</span> MaxIterations;</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160; </div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;  <span class="comment">// Map of Values to number of iterations to invariance</span></div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;  <a class="code" href="classllvm_1_1SmallDenseMap.html">SmallDenseMap&lt;const Value *, PeelCounter&gt;</a> IterationsToInvariance;</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;};</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160; </div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;PhiAnalyzer::PhiAnalyzer(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Loop.html">Loop</a> &amp;L, <span class="keywordtype">unsigned</span> MaxIterations)</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    : L(L), MaxIterations(MaxIterations) {</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="namespacellvm.html#a3aea1e78510aa7469457aade10808e51">canPeel</a>(&amp;L) &amp;&amp; <span class="stringliteral">&quot;loop is not suitable for peeling&quot;</span>);</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(MaxIterations &gt; 0 &amp;&amp; <span class="stringliteral">&quot;no peeling is allowed?&quot;</span>);</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;}</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160; </div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;<span class="comment">// This function calculates the number of iterations after which the value</span></div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;<span class="comment">// becomes an invariant. The pre-calculated values are memorized in a map.</span></div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;<span class="comment">// N.B. This number will be Unknown or &lt;= MaxIterations.</span></div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;<span class="comment">// The function is calculated according to the following definition:</span></div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;<span class="comment">// Given %x = phi &lt;Inputs from above the loop&gt;, ..., [%y, %back.edge].</span></div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;<span class="comment">//   F(%x) = G(%y) + 1 (N.B. [MaxIterations | Unknown] + 1 =&gt; Unknown)</span></div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;<span class="comment">//   G(%y) = 0 if %y is a loop invariant</span></div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;<span class="comment">//   G(%y) = G(%BackEdgeValue) if %y is a phi in the header block</span></div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;<span class="comment">//   G(%y) = TODO: if %y is an expression based on phis and loop invariants</span></div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;<span class="comment">//           The example looks like:</span></div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;<span class="comment">//           %x = phi(0, %a) &lt;-- becomes invariant starting from 3rd iteration.</span></div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;<span class="comment">//           %y = phi(0, 5)</span></div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;<span class="comment">//           %a = %y + 1</span></div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;<span class="comment">//   G(%y) = Unknown otherwise (including phi not in header block)</span></div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;PhiAnalyzer::PeelCounter PhiAnalyzer::calculate(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Value.html">Value</a> &amp;V) {</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;  <span class="comment">// If we already know the answer, take it from the map.</span></div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;  <span class="keyword">auto</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = IterationsToInvariance.find(&amp;V);</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != IterationsToInvariance.end())</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;second;</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160; </div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;  <span class="comment">// Place Unknown to map to avoid infinite recursion. Such</span></div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;  <span class="comment">// cycles can never stop on an invariant.</span></div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;  IterationsToInvariance[&amp;V] = <a class="code" href="namespacellvm_1_1pdb.html#a434cfa04e4ed34b7a901378557d4ca9eab5923ebc864d1679cf1c3a929c122037">Unknown</a>;</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160; </div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;  <span class="keywordflow">if</span> (L.<a class="code" href="classllvm_1_1Loop.html#a6cb6a58fb0ded82b4c7755fc4c27c86d">isLoopInvariant</a>(&amp;V))</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    <span class="comment">// Loop invariant so known at start.</span></div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    <span class="keywordflow">return</span> (IterationsToInvariance[&amp;V] = 0);</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *Phi = dyn_cast&lt;PHINode&gt;(&amp;V)) {</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    <span class="keywordflow">if</span> (Phi-&gt;getParent() != L.<a class="code" href="classllvm_1_1LoopBase.html#a58c5b170ea68b41e94ebb0019523a68f">getHeader</a>()) {</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;      <span class="comment">// Phi is not in header block so Unknown.</span></div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(IterationsToInvariance[&amp;V] == <a class="code" href="namespacellvm_1_1pdb.html#a434cfa04e4ed34b7a901378557d4ca9eab5923ebc864d1679cf1c3a929c122037">Unknown</a> &amp;&amp; <span class="stringliteral">&quot;unexpected value saved&quot;</span>);</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1pdb.html#a434cfa04e4ed34b7a901378557d4ca9eab5923ebc864d1679cf1c3a929c122037">Unknown</a>;</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    }</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    <span class="comment">// We need to analyze the input from the back edge and add 1.</span></div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Input = Phi-&gt;getIncomingValueForBlock(L.<a class="code" href="classllvm_1_1LoopBase.html#a1230fd674d2609b96527fe65eaf40b1b">getLoopLatch</a>());</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    PeelCounter Iterations = calculate(*Input);</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(IterationsToInvariance[Input] == Iterations &amp;&amp;</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;           <span class="stringliteral">&quot;unexpected value saved&quot;</span>);</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    <span class="keywordflow">return</span> (IterationsToInvariance[Phi] = addOne(Iterations));</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;  }</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = dyn_cast&lt;Instruction&gt;(&amp;V)) {</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    <span class="keywordflow">if</span> (isa&lt;CmpInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) || <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;isBinaryOp()) {</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;      <span class="comment">// Binary instructions get the max of the operands.</span></div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;      PeelCounter <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a> = calculate(*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(0));</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a> == <a class="code" href="namespacellvm_1_1pdb.html#a434cfa04e4ed34b7a901378557d4ca9eab5923ebc864d1679cf1c3a929c122037">Unknown</a>)</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1pdb.html#a434cfa04e4ed34b7a901378557d4ca9eab5923ebc864d1679cf1c3a929c122037">Unknown</a>;</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;      PeelCounter <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a> = calculate(*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(1));</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a> == <a class="code" href="namespacellvm_1_1pdb.html#a434cfa04e4ed34b7a901378557d4ca9eab5923ebc864d1679cf1c3a929c122037">Unknown</a>)</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1pdb.html#a434cfa04e4ed34b7a901378557d4ca9eab5923ebc864d1679cf1c3a929c122037">Unknown</a>;</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;      <span class="keywordflow">return</span> (IterationsToInvariance[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>] = {<a class="code" href="namespacellvm.html#ab4d4bc901fedd8857f647dcc2c0d71de">std::max</a>(*<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, *<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>)});</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    }</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;isCast())</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;      <span class="comment">// Cast instructions get the value of the operand.</span></div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;      <span class="keywordflow">return</span> (IterationsToInvariance[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>] = calculate(*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(0)));</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;  }</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;  <span class="comment">// TODO: handle more expressions</span></div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160; </div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;  <span class="comment">// Everything else is Unknown.</span></div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(IterationsToInvariance[&amp;V] == <a class="code" href="namespacellvm_1_1pdb.html#a434cfa04e4ed34b7a901378557d4ca9eab5923ebc864d1679cf1c3a929c122037">Unknown</a> &amp;&amp; <span class="stringliteral">&quot;unexpected value saved&quot;</span>);</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1pdb.html#a434cfa04e4ed34b7a901378557d4ca9eab5923ebc864d1679cf1c3a929c122037">Unknown</a>;</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;}</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160; </div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;std::optional&lt;unsigned&gt; PhiAnalyzer::calculateIterationsToPeel() {</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;  <span class="keywordtype">unsigned</span> Iterations = 0;</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;<a class="code" href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">PHI</a> : L.<a class="code" href="classllvm_1_1LoopBase.html#a58c5b170ea68b41e94ebb0019523a68f">getHeader</a>()-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a72516971c5734dc0f7546e64affca425">phis</a>()) {</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    PeelCounter ToInvariance = calculate(<a class="code" href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">PHI</a>);</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    <span class="keywordflow">if</span> (ToInvariance != <a class="code" href="namespacellvm_1_1pdb.html#a434cfa04e4ed34b7a901378557d4ca9eab5923ebc864d1679cf1c3a929c122037">Unknown</a>) {</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(*ToInvariance &lt;= MaxIterations &amp;&amp; <span class="stringliteral">&quot;bad result in phi analysis&quot;</span>);</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;      Iterations = <a class="code" href="namespacellvm.html#ab4d4bc901fedd8857f647dcc2c0d71de">std::max</a>(Iterations, *ToInvariance);</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;      <span class="keywordflow">if</span> (Iterations == MaxIterations)</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    }</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;  }</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((Iterations &lt;= MaxIterations) &amp;&amp; <span class="stringliteral">&quot;bad result in phi analysis&quot;</span>);</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;  <span class="keywordflow">return</span> Iterations ? std::optional&lt;unsigned&gt;(Iterations) : <a class="code" href="namespacestd.html">std</a>::nullopt;</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;}</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160; </div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;} <span class="comment">// unnamed namespace</span></div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160; </div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;<span class="comment">// Try to find any invariant memory reads that will become dereferenceable in</span></div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;<span class="comment">// the remainder loop after peeling. The load must also be used (transitively)</span></div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;<span class="comment">// by an exit condition. Returns the number of iterations to peel off (at the</span></div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;<span class="comment">// moment either 0 or 1).</span></div>
<div class="line"><a name="l00276"></a><span class="lineno"><a class="line" href="LoopPeel_8cpp.html#aaa1d9cfaf2d4ef4eca30ce71eb8c3a89">  276</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">unsigned</span> <a class="code" href="LoopPeel_8cpp.html#aaa1d9cfaf2d4ef4eca30ce71eb8c3a89">peelToTurnInvariantLoadsDerefencebale</a>(<a class="code" href="classllvm_1_1Loop.html">Loop</a> &amp;L,</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;                                                      <a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> &amp;DT,</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;                                                      <a class="code" href="classllvm_1_1AssumptionCache.html">AssumptionCache</a> *AC) {</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;  <span class="comment">// Skip loops with a single exiting block, because there should be no benefit</span></div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;  <span class="comment">// for the heuristic below.</span></div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;  <span class="keywordflow">if</span> (L.<a class="code" href="classllvm_1_1LoopBase.html#adf6f53d7652b471c995b7d10f3dd2729">getExitingBlock</a>())</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160; </div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;  <span class="comment">// All non-latch exit blocks must have an UnreachableInst terminator.</span></div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;  <span class="comment">// Otherwise the heuristic below may not be profitable.</span></div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;BasicBlock *, 4&gt;</a> Exits;</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;  L.<a class="code" href="classllvm_1_1LoopBase.html#aed67883fd0d5f8356bb709b4d16ebe70">getUniqueNonLatchExitBlocks</a>(Exits);</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a61d13d6824ec46c31260a4fd0997eda0">any_of</a>(Exits, [](<span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) {</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;        <span class="keywordflow">return</span> !isa&lt;UnreachableInst&gt;(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getTerminator());</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;      }))</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160; </div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;  <span class="comment">// Now look for invariant loads that dominate the latch and are not known to</span></div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;  <span class="comment">// be dereferenceable. If there are such loads and no writes, they will become</span></div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;  <span class="comment">// dereferenceable in the loop if the first iteration is peeled off. Also</span></div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;  <span class="comment">// collect the set of instructions controlled by such loads. Only peel if an</span></div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;  <span class="comment">// exit condition uses (transitively) such a load.</span></div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Header = L.<a class="code" href="classllvm_1_1LoopBase.html#a58c5b170ea68b41e94ebb0019523a68f">getHeader</a>();</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Latch = L.<a class="code" href="classllvm_1_1LoopBase.html#a1230fd674d2609b96527fe65eaf40b1b">getLoopLatch</a>();</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;Value *, 8&gt;</a> LoadUsers;</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1DataLayout.html">DataLayout</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a> = L.<a class="code" href="classllvm_1_1LoopBase.html#a58c5b170ea68b41e94ebb0019523a68f">getHeader</a>()-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#afc70e919c88c86159cc94cea29b6c210">getModule</a>()-&gt;<a class="code" href="classllvm_1_1Module.html#a6d883605206368bc536cc9ded97209b8">getDataLayout</a>();</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> : L.<a class="code" href="classllvm_1_1LoopBase.html#a40f34cc77d2b3bc73384f535c8101858">blocks</a>()) {</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) {</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.mayWriteToMemory())</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160; </div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;      <span class="keyword">auto</span> Iter = LoadUsers.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a153ea412ff7a0ba105111155d1e16128">find</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;      <span class="keywordflow">if</span> (Iter != LoadUsers.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a7004354fbee1c8cd74ed9001915e1db5">end</a>()) {</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *U : <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.users())</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;          LoadUsers.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(U);</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;      }</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;      <span class="comment">// Do not look for reads in the header; they can already be hoisted</span></div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;      <span class="comment">// without peeling.</span></div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> == Header)</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> *LI = dyn_cast&lt;LoadInst&gt;(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a> = LI-&gt;getPointerOperand();</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;        <span class="keywordflow">if</span> (DT.<a class="code" href="classllvm_1_1DominatorTree.html#a5c69311e8d44898dac36a155c3d8691d">dominates</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, Latch) &amp;&amp; L.<a class="code" href="classllvm_1_1Loop.html#a6cb6a58fb0ded82b4c7755fc4c27c86d">isLoopInvariant</a>(<a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>) &amp;&amp;</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;            !<a class="code" href="namespacellvm.html#abf1028e2af158aae1e00d3288ca013bb">isDereferenceablePointer</a>(<a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>, LI-&gt;getType(), <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, LI, AC, &amp;DT))</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;          <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *U : <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.users())</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;            LoadUsers.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(U);</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;      }</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    }</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;  }</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;BasicBlock *&gt;</a> ExitingBlocks;</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;  L.<a class="code" href="classllvm_1_1LoopBase.html#a46880fab7a9d5bd439725f2acc59b80d">getExitingBlocks</a>(ExitingBlocks);</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a61d13d6824ec46c31260a4fd0997eda0">any_of</a>(ExitingBlocks, [&amp;LoadUsers](<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Exiting) {</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;        <span class="keywordflow">return</span> LoadUsers.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#af74676a3c7447be34bd2c1da76ec0c48">contains</a>(Exiting-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>());</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;      }))</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;  <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;}</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160; </div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;<span class="comment">// Return the number of iterations to peel off that make conditions in the</span></div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;<span class="comment">// body true/false. For example, if we peel 2 iterations off the loop below,</span></div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;<span class="comment">// the condition i &lt; 2 can be evaluated at compile time.</span></div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;<span class="comment">//  for (i = 0; i &lt; n; i++)</span></div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;<span class="comment">//    if (i &lt; 2)</span></div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;<span class="comment">//      ..</span></div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;<span class="comment">//    else</span></div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;<span class="comment">//      ..</span></div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;<span class="comment">//   }</span></div>
<div class="line"><a name="l00343"></a><span class="lineno"><a class="line" href="LoopPeel_8cpp.html#a7098623cafc05376a44b27d202b03372">  343</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">unsigned</span> <a class="code" href="LoopPeel_8cpp.html#a7098623cafc05376a44b27d202b03372">countToEliminateCompares</a>(<a class="code" href="classllvm_1_1Loop.html">Loop</a> &amp;L, <span class="keywordtype">unsigned</span> MaxPeelCount,</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;                                         <a class="code" href="classllvm_1_1ScalarEvolution.html">ScalarEvolution</a> &amp;SE) {</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(L.<a class="code" href="classllvm_1_1Loop.html#ac233a2693163ed58305215ca2f6921e3">isLoopSimplifyForm</a>() &amp;&amp; <span class="stringliteral">&quot;Loop needs to be in loop simplify form&quot;</span>);</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;  <span class="keywordtype">unsigned</span> DesiredPeelCount = 0;</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160; </div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> : L.<a class="code" href="classllvm_1_1LoopBase.html#a40f34cc77d2b3bc73384f535c8101858">blocks</a>()) {</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    <span class="keyword">auto</span> *BI = dyn_cast&lt;BranchInst&gt;(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getTerminator());</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    <span class="keywordflow">if</span> (!BI || BI-&gt;isUnconditional())</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160; </div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    <span class="comment">// Ignore loop exit condition.</span></div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    <span class="keywordflow">if</span> (L.<a class="code" href="classllvm_1_1LoopBase.html#a1230fd674d2609b96527fe65eaf40b1b">getLoopLatch</a>() == <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>)</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160; </div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Condition = BI-&gt;getCondition();</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *LeftVal, *RightVal;</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">CmpInst::Predicate</a> Pred;</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Condition, <a class="code" href="namespacellvm_1_1PatternMatch.html#a3fe9b3ddb71b9fb53d9fc74b3a0710bf">m_ICmp</a>(Pred, <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(LeftVal), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(RightVal))))</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160; </div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEV.html">SCEV</a> *LeftSCEV = SE.<a class="code" href="classllvm_1_1ScalarEvolution.html#a30bd18ac905eacf3601bc6a553a9ff49">getSCEV</a>(LeftVal);</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEV.html">SCEV</a> *RightSCEV = SE.<a class="code" href="classllvm_1_1ScalarEvolution.html#a30bd18ac905eacf3601bc6a553a9ff49">getSCEV</a>(RightVal);</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160; </div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    <span class="comment">// Do not consider predicates that are known to be true or false</span></div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    <span class="comment">// independently of the loop iteration.</span></div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    <span class="keywordflow">if</span> (SE.<a class="code" href="classllvm_1_1ScalarEvolution.html#a4cd909a15a97a10de847579ea5e9f46a">evaluatePredicate</a>(Pred, LeftSCEV, RightSCEV))</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160; </div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    <span class="comment">// Check if we have a condition with one AddRec and one non AddRec</span></div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;    <span class="comment">// expression. Normalize LeftSCEV to be the AddRec.</span></div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    <span class="keywordflow">if</span> (!isa&lt;SCEVAddRecExpr&gt;(LeftSCEV)) {</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;      <span class="keywordflow">if</span> (isa&lt;SCEVAddRecExpr&gt;(RightSCEV)) {</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;        <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(LeftSCEV, RightSCEV);</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;        Pred = <a class="code" href="namespacellvm_1_1PPC.html#a0126350f85e64bcbddb8454a888b0b69">ICmpInst::getSwappedPredicate</a>(Pred);</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;      } <span class="keywordflow">else</span></div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;    }</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160; </div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEVAddRecExpr.html">SCEVAddRecExpr</a> *LeftAR = cast&lt;SCEVAddRecExpr&gt;(LeftSCEV);</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160; </div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    <span class="comment">// Avoid huge SCEV computations in the loop below, make sure we only</span></div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    <span class="comment">// consider AddRecs of the loop we are trying to peel.</span></div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    <span class="keywordflow">if</span> (!LeftAR-&gt;<a class="code" href="classllvm_1_1SCEVAddRecExpr.html#a54bb7394d874cbbef1d81e6bea89d4f3">isAffine</a>() || LeftAR-&gt;<a class="code" href="classllvm_1_1SCEVAddRecExpr.html#af6314c51a3cc5a619beb697246177bf0">getLoop</a>() != &amp;L)</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    <span class="keywordflow">if</span> (!(ICmpInst::isEquality(Pred) &amp;&amp; LeftAR-&gt;<a class="code" href="classllvm_1_1SCEVNAryExpr.html#a6429bca8fd0024ceb2d76ccaace43c4e">hasNoSelfWrap</a>()) &amp;&amp;</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;        !SE.<a class="code" href="classllvm_1_1ScalarEvolution.html#aa92b3e6375805368f9a24cf69ce73797">getMonotonicPredicateType</a>(LeftAR, Pred))</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160; </div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    <span class="comment">// Check if extending the current DesiredPeelCount lets us evaluate Pred</span></div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    <span class="comment">// or !Pred in the loop body statically.</span></div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    <span class="keywordtype">unsigned</span> NewPeelCount = DesiredPeelCount;</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160; </div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEV.html">SCEV</a> *IterVal = LeftAR-&gt;<a class="code" href="classllvm_1_1SCEVAddRecExpr.html#a33583576f220997d1c415df033559a57">evaluateAtIteration</a>(</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;        SE.<a class="code" href="classllvm_1_1ScalarEvolution.html#a2eb94d079d8416118f4aaed865ab05d7">getConstant</a>(LeftSCEV-&gt;<a class="code" href="classllvm_1_1SCEV.html#aefeda9454a5e8dfcec3deb106964832a">getType</a>(), NewPeelCount), SE);</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160; </div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    <span class="comment">// If the original condition is not known, get the negated predicate</span></div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    <span class="comment">// (which holds on the else branch) and check if it is known. This allows</span></div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;    <span class="comment">// us to peel of iterations that make the original condition false.</span></div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    <span class="keywordflow">if</span> (!SE.<a class="code" href="classllvm_1_1ScalarEvolution.html#a60a56343d06195ae01b61d087e672afd">isKnownPredicate</a>(Pred, IterVal, RightSCEV))</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;      Pred = ICmpInst::getInversePredicate(Pred);</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160; </div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEV.html">SCEV</a> *Step = LeftAR-&gt;<a class="code" href="classllvm_1_1SCEVAddRecExpr.html#a7eec28400b00678b1fb2b5f55ef7ac1b">getStepRecurrence</a>(SE);</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEV.html">SCEV</a> *NextIterVal = SE.<a class="code" href="classllvm_1_1ScalarEvolution.html#aef6d2bea715d1793e956f41ddeea2320">getAddExpr</a>(IterVal, Step);</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;    <span class="keyword">auto</span> PeelOneMoreIteration = [&amp;IterVal, &amp;NextIterVal, &amp;SE, Step,</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;                                 &amp;NewPeelCount]() {</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;      IterVal = NextIterVal;</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;      NextIterVal = SE.getAddExpr(IterVal, Step);</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;      NewPeelCount++;</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;    };</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160; </div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    <span class="keyword">auto</span> CanPeelOneMoreIteration = [&amp;NewPeelCount, &amp;MaxPeelCount]() {</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;      <span class="keywordflow">return</span> NewPeelCount &lt; MaxPeelCount;</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;    };</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160; </div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    <span class="keywordflow">while</span> (CanPeelOneMoreIteration() &amp;&amp;</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;           SE.isKnownPredicate(Pred, IterVal, RightSCEV))</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;      PeelOneMoreIteration();</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160; </div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;    <span class="comment">// With *that* peel count, does the predicate !Pred become known in the</span></div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;    <span class="comment">// first iteration of the loop body after peeling?</span></div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    <span class="keywordflow">if</span> (!SE.isKnownPredicate(ICmpInst::getInversePredicate(Pred), IterVal,</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;                             RightSCEV))</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;      <span class="keywordflow">continue</span>; <span class="comment">// If not, give up.</span></div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160; </div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    <span class="comment">// However, for equality comparisons, that isn&#39;t always sufficient to</span></div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    <span class="comment">// eliminate the comparsion in loop body, we may need to peel one more</span></div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    <span class="comment">// iteration. See if that makes !Pred become unknown again.</span></div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;    <span class="keywordflow">if</span> (ICmpInst::isEquality(Pred) &amp;&amp;</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;        !SE.isKnownPredicate(ICmpInst::getInversePredicate(Pred), NextIterVal,</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;                             RightSCEV) &amp;&amp;</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;        !SE.isKnownPredicate(Pred, IterVal, RightSCEV) &amp;&amp;</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;        SE.isKnownPredicate(Pred, NextIterVal, RightSCEV)) {</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;      <span class="keywordflow">if</span> (!CanPeelOneMoreIteration())</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;        <span class="keywordflow">continue</span>; <span class="comment">// Need to peel one more iteration, but can&#39;t. Give up.</span></div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;      PeelOneMoreIteration(); <span class="comment">// Great!</span></div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    }</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160; </div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    DesiredPeelCount = <a class="code" href="namespacellvm.html#ab4d4bc901fedd8857f647dcc2c0d71de">std::max</a>(DesiredPeelCount, NewPeelCount);</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;  }</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160; </div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;  <span class="keywordflow">return</span> DesiredPeelCount;</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;}</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;<span class="comment">/// This &quot;heuristic&quot; exactly matches implicit behavior which used to exist</span></div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;<span class="comment">/// inside getLoopEstimatedTripCount.  It was added here to keep an</span></div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;<span class="comment">/// improvement inside that API from causing peeling to become more aggressive.</span></div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;<span class="comment">/// This should probably be removed.</span></div>
<div class="line"><a name="l00450"></a><span class="lineno"><a class="line" href="LoopPeel_8cpp.html#a7d391dbabb8fc073db875548184a768d">  450</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="LoopPeel_8cpp.html#a7d391dbabb8fc073db875548184a768d">violatesLegacyMultiExitLoopCheck</a>(<a class="code" href="classllvm_1_1Loop.html">Loop</a> *L) {</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Latch = L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a1230fd674d2609b96527fe65eaf40b1b">getLoopLatch</a>();</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;  <span class="keywordflow">if</span> (!Latch)</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160; </div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;  <a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a> *LatchBR = dyn_cast&lt;BranchInst&gt;(Latch-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>());</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;  <span class="keywordflow">if</span> (!LatchBR || LatchBR-&gt;<a class="code" href="classllvm_1_1BranchInst.html#a96b8f11f6f21ca0321294669dab83b35">getNumSuccessors</a>() != 2 || !L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#af691775d5a45e28afbdb3e97cab22eee">isLoopExiting</a>(Latch))</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160; </div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((LatchBR-&gt;<a class="code" href="classllvm_1_1BranchInst.html#ad97f2e60cf22f15e0cf617af52309031">getSuccessor</a>(0) == L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a58c5b170ea68b41e94ebb0019523a68f">getHeader</a>() ||</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;          LatchBR-&gt;<a class="code" href="classllvm_1_1BranchInst.html#ad97f2e60cf22f15e0cf617af52309031">getSuccessor</a>(1) == L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a58c5b170ea68b41e94ebb0019523a68f">getHeader</a>()) &amp;&amp;</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;         <span class="stringliteral">&quot;At least one edge out of the latch must go to the header&quot;</span>);</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160; </div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;BasicBlock *, 4&gt;</a> ExitBlocks;</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;  L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#aed67883fd0d5f8356bb709b4d16ebe70">getUniqueNonLatchExitBlocks</a>(ExitBlocks);</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#a61d13d6824ec46c31260a4fd0997eda0">any_of</a>(ExitBlocks, [](<span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *EB) {</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;      <span class="keywordflow">return</span> !EB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a6796a84f02394ce6ebef227c866cd5eb">getTerminatingDeoptimizeCall</a>();</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;    });</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;}</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160; </div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160; </div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;<span class="comment">// Return the number of iterations we want to peel off.</span></div>
<div class="line"><a name="l00472"></a><span class="lineno"><a class="line" href="namespacellvm.html#a1b8329ea8794c1e6fa1294a1e5a463dd">  472</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespacellvm.html#a1b8329ea8794c1e6fa1294a1e5a463dd">llvm::computePeelCount</a>(<a class="code" href="classllvm_1_1Loop.html">Loop</a> *L, <span class="keywordtype">unsigned</span> LoopSize,</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;                            <a class="code" href="structllvm_1_1TargetTransformInfo_1_1PeelingPreferences.html">TargetTransformInfo::PeelingPreferences</a> &amp;PP,</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;                            <span class="keywordtype">unsigned</span> TripCount, <a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> &amp;DT,</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;                            <a class="code" href="classllvm_1_1ScalarEvolution.html">ScalarEvolution</a> &amp;SE, <a class="code" href="classllvm_1_1AssumptionCache.html">AssumptionCache</a> *AC,</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;                            <span class="keywordtype">unsigned</span> Threshold) {</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(LoopSize &gt; 0 &amp;&amp; <span class="stringliteral">&quot;Zero loop size is not allowed!&quot;</span>);</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;  <span class="comment">// Save the PP.PeelCount value set by the target in</span></div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;  <span class="comment">// TTI.getPeelingPreferences or by the flag -unroll-peel-count.</span></div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;  <span class="keywordtype">unsigned</span> TargetPeelCount = PP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1PeelingPreferences.html#a93102207c7c9430df6ef02447446de9b">PeelCount</a>;</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;  PP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1PeelingPreferences.html#a93102207c7c9430df6ef02447446de9b">PeelCount</a> = 0;</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm.html#a3aea1e78510aa7469457aade10808e51">canPeel</a>(L))</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160; </div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;  <span class="comment">// Only try to peel innermost loops by default.</span></div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;  <span class="comment">// The constraint can be relaxed by the target in TTI.getPeelingPreferences</span></div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;  <span class="comment">// or by the flag -unroll-allow-loop-nests-peeling.</span></div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;  <span class="keywordflow">if</span> (!PP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1PeelingPreferences.html#a71809834780876145831c63077461284">AllowLoopNestsPeeling</a> &amp;&amp; !L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a16165c1e5da45acaa086c3a54a188d34">isInnermost</a>())</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160; </div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;  <span class="comment">// If the user provided a peel count, use that.</span></div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;  <span class="keywordtype">bool</span> UserPeelCount = <a class="code" href="LoopPeel_8cpp.html#a268021156ce360927a6b4211e64fd0ee">UnrollForcePeelCount</a>.getNumOccurrences() &gt; 0;</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;  <span class="keywordflow">if</span> (UserPeelCount) {</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Force-peeling first &quot;</span> &lt;&lt; <a class="code" href="LoopPeel_8cpp.html#a268021156ce360927a6b4211e64fd0ee">UnrollForcePeelCount</a></div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;                      &lt;&lt; <span class="stringliteral">&quot; iterations.\n&quot;</span>);</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;    PP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1PeelingPreferences.html#a93102207c7c9430df6ef02447446de9b">PeelCount</a> = <a class="code" href="LoopPeel_8cpp.html#a268021156ce360927a6b4211e64fd0ee">UnrollForcePeelCount</a>;</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;    PP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1PeelingPreferences.html#a89c02eecae37f89bf86f71336630858d">PeelProfiledIterations</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;  }</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160; </div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;  <span class="comment">// Skip peeling if it&#39;s disabled.</span></div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;  <span class="keywordflow">if</span> (!PP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1PeelingPreferences.html#a3421601051b06ed7b52a09696bd595b2">AllowPeeling</a>)</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160; </div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;  <span class="comment">// Check that we can peel at least one iteration.</span></div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;  <span class="keywordflow">if</span> (2 * LoopSize &gt; Threshold)</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160; </div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;  <span class="keywordtype">unsigned</span> AlreadyPeeled = 0;</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> Peeled = <a class="code" href="namespacellvm.html#a9b3cfe2d1603665824476c30368b8eb1">getOptionalIntLoopAttribute</a>(L, <a class="code" href="LoopPeel_8cpp.html#a7f5685c46cf812c90576046af45cd7fa">PeeledCountMetaData</a>))</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;    AlreadyPeeled = *Peeled;</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;  <span class="comment">// Stop if we already peeled off the maximum number of iterations.</span></div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;  <span class="keywordflow">if</span> (AlreadyPeeled &gt;= <a class="code" href="LoopPeel_8cpp.html#a5843a84a6e99ee35ed5c886180e988ca">UnrollPeelMaxCount</a>)</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160; </div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;  <span class="comment">// Pay respect to limitations implied by loop size and the max peel count.</span></div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;  <span class="keywordtype">unsigned</span> MaxPeelCount = <a class="code" href="LoopPeel_8cpp.html#a5843a84a6e99ee35ed5c886180e988ca">UnrollPeelMaxCount</a>;</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;  MaxPeelCount = <a class="code" href="namespacellvm.html#a57f2ca0e57f4f7b13f56f9aa16af3e0d">std::min</a>(MaxPeelCount, Threshold / LoopSize - 1);</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160; </div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;  <span class="comment">// Start the max computation with the PP.PeelCount value set by the target</span></div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;  <span class="comment">// in TTI.getPeelingPreferences or by the flag -unroll-peel-count.</span></div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;  <span class="keywordtype">unsigned</span> DesiredPeelCount = TargetPeelCount;</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160; </div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;  <span class="comment">// Here we try to get rid of Phis which become invariants after 1, 2, ..., N</span></div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;  <span class="comment">// iterations of the loop. For this we compute the number for iterations after</span></div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;  <span class="comment">// which every Phi is guaranteed to become an invariant, and try to peel the</span></div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;  <span class="comment">// maximum number of iterations among these values, thus turning all those</span></div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;  <span class="comment">// Phis into invariants.</span></div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;  <span class="keywordflow">if</span> (MaxPeelCount &gt; DesiredPeelCount) {</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;    <span class="comment">// Check how many iterations are useful for resolving Phis</span></div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;    <span class="keyword">auto</span> NumPeels = PhiAnalyzer(*L, MaxPeelCount).calculateIterationsToPeel();</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;    <span class="keywordflow">if</span> (NumPeels)</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;      DesiredPeelCount = <a class="code" href="namespacellvm.html#ab4d4bc901fedd8857f647dcc2c0d71de">std::max</a>(DesiredPeelCount, *NumPeels);</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;  }</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160; </div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;  DesiredPeelCount = <a class="code" href="namespacellvm.html#ab4d4bc901fedd8857f647dcc2c0d71de">std::max</a>(DesiredPeelCount,</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;                              <a class="code" href="LoopPeel_8cpp.html#a7098623cafc05376a44b27d202b03372">countToEliminateCompares</a>(*L, MaxPeelCount, SE));</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160; </div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;  <span class="keywordflow">if</span> (DesiredPeelCount == 0)</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;    DesiredPeelCount = <a class="code" href="LoopPeel_8cpp.html#aaa1d9cfaf2d4ef4eca30ce71eb8c3a89">peelToTurnInvariantLoadsDerefencebale</a>(*L, DT, AC);</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160; </div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;  <span class="keywordflow">if</span> (DesiredPeelCount &gt; 0) {</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;    DesiredPeelCount = <a class="code" href="namespacellvm.html#a57f2ca0e57f4f7b13f56f9aa16af3e0d">std::min</a>(DesiredPeelCount, MaxPeelCount);</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;    <span class="comment">// Consider max peel count limitation.</span></div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(DesiredPeelCount &gt; 0 &amp;&amp; <span class="stringliteral">&quot;Wrong loop size estimation?&quot;</span>);</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;    <span class="keywordflow">if</span> (DesiredPeelCount + AlreadyPeeled &lt;= <a class="code" href="LoopPeel_8cpp.html#a5843a84a6e99ee35ed5c886180e988ca">UnrollPeelMaxCount</a>) {</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Peel &quot;</span> &lt;&lt; DesiredPeelCount</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;                        &lt;&lt; <span class="stringliteral">&quot; iteration(s) to turn&quot;</span></div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;                        &lt;&lt; <span class="stringliteral">&quot; some Phis into invariants.\n&quot;</span>);</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;      PP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1PeelingPreferences.html#a93102207c7c9430df6ef02447446de9b">PeelCount</a> = DesiredPeelCount;</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;      PP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1PeelingPreferences.html#a89c02eecae37f89bf86f71336630858d">PeelProfiledIterations</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;    }</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;  }</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160; </div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;  <span class="comment">// Bail if we know the statically calculated trip count.</span></div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;  <span class="comment">// In this case we rather prefer partial unrolling.</span></div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;  <span class="keywordflow">if</span> (TripCount)</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160; </div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;  <span class="comment">// Do not apply profile base peeling if it is disabled.</span></div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;  <span class="keywordflow">if</span> (!PP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1PeelingPreferences.html#a89c02eecae37f89bf86f71336630858d">PeelProfiledIterations</a>)</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;  <span class="comment">// If we don&#39;t know the trip count, but have reason to believe the average</span></div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;  <span class="comment">// trip count is low, peeling should be beneficial, since we will usually</span></div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;  <span class="comment">// hit the peeled section.</span></div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;  <span class="comment">// We only do this in the presence of profile information, since otherwise</span></div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;  <span class="comment">// our estimates of the trip count are not reliable enough.</span></div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;  <span class="keywordflow">if</span> (L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a58c5b170ea68b41e94ebb0019523a68f">getHeader</a>()-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a38bee869ad41aebfef3de2641b12004c">getParent</a>()-&gt;<a class="code" href="classllvm_1_1Function.html#a9084ce2576fad285c1c0dc1e165dd4b6">hasProfileData</a>()) {</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="LoopPeel_8cpp.html#a7d391dbabb8fc073db875548184a768d">violatesLegacyMultiExitLoopCheck</a>(L))</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;    std::optional&lt;unsigned&gt; EstimatedTripCount = <a class="code" href="namespacellvm.html#a0b3c6dc8e7df65d2385acfe9657abd03">getLoopEstimatedTripCount</a>(L);</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;    <span class="keywordflow">if</span> (!EstimatedTripCount)</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160; </div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Profile-based estimated trip count is &quot;</span></div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;                      &lt;&lt; *EstimatedTripCount &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160; </div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;    <span class="keywordflow">if</span> (*EstimatedTripCount) {</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;      <span class="keywordflow">if</span> (*EstimatedTripCount + AlreadyPeeled &lt;= MaxPeelCount) {</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;        <span class="keywordtype">unsigned</span> PeelCount = *EstimatedTripCount;</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;        <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Peeling first &quot;</span> &lt;&lt; PeelCount &lt;&lt; <span class="stringliteral">&quot; iterations.\n&quot;</span>);</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;        PP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1PeelingPreferences.html#a93102207c7c9430df6ef02447446de9b">PeelCount</a> = PeelCount;</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;      }</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Already peel count: &quot;</span> &lt;&lt; AlreadyPeeled &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Max peel count: &quot;</span> &lt;&lt; <a class="code" href="LoopPeel_8cpp.html#a5843a84a6e99ee35ed5c886180e988ca">UnrollPeelMaxCount</a> &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Loop cost: &quot;</span> &lt;&lt; LoopSize &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Max peel cost: &quot;</span> &lt;&lt; Threshold &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Max peel count by cost: &quot;</span></div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;                        &lt;&lt; (Threshold / LoopSize - 1) &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;    }</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;  }</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;}</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160; </div>
<div class="line"><a name="l00596"></a><span class="lineno"><a class="line" href="structWeightInfo.html">  596</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structWeightInfo.html">WeightInfo</a> {</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;  <span class="comment">// Weights for current iteration.</span></div>
<div class="line"><a name="l00598"></a><span class="lineno"><a class="line" href="structWeightInfo.html#a79bc95d0a4dfb8b3f4c7f5da4c72ff8e">  598</a></span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;uint32_t&gt;</a> <a class="code" href="structWeightInfo.html#a79bc95d0a4dfb8b3f4c7f5da4c72ff8e">Weights</a>;</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;  <span class="comment">// Weights to subtract after each iteration.</span></div>
<div class="line"><a name="l00600"></a><span class="lineno"><a class="line" href="structWeightInfo.html#afcdb4745743d71dcdf4d80b3f6692065">  600</a></span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;uint32_t&gt;</a> <a class="code" href="structWeightInfo.html#afcdb4745743d71dcdf4d80b3f6692065">SubWeights</a>;</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;};</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;<span class="comment">/// Update the branch weights of an exiting block of a peeled-off loop</span></div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;<span class="comment">/// iteration.</span></div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;<span class="comment">/// Let F is a weight of the edge to continue (fallthrough) into the loop.</span></div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;<span class="comment">/// Let E is a weight of the edge to an exit.</span></div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;<span class="comment">/// F/(F+E) is a probability to go to loop and E/(F+E) is a probability to</span></div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;<span class="comment">/// go to exit.</span></div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;<span class="comment">/// Then, Estimated ExitCount = F / E.</span></div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;<span class="comment">/// For I-th (counting from 0) peeled off iteration we set the the weights for</span></div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;<span class="comment">/// the peeled exit as (EC - I, 1). It gives us reasonable distribution,</span></div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;<span class="comment">/// The probability to go to exit 1/(EC-I) increases. At the same time</span></div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;<span class="comment">/// the estimated exit count in the remainder loop reduces by I.</span></div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;<span class="comment">/// To avoid dealing with division rounding we can just multiple both part</span></div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;<span class="comment">/// of weights to E and use weight as (F - I * E, E).</span></div>
<div class="line"><a name="l00616"></a><span class="lineno"><a class="line" href="LoopPeel_8cpp.html#a070d953c06601ec34680fdc35c867b17">  616</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="LoopPeel_8cpp.html#a070d953c06601ec34680fdc35c867b17">updateBranchWeights</a>(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="namespacellvm_1_1M68kBeads.html#a7eeab1fe8f39bf89dcd7929b816ebfcca27d0e059322508a76f918503800ef1bd">Term</a>, <a class="code" href="structWeightInfo.html">WeightInfo</a> &amp;<a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>) {</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;  <a class="code" href="classllvm_1_1MDBuilder.html">MDBuilder</a> MDB(<a class="code" href="namespacellvm_1_1M68kBeads.html#a7eeab1fe8f39bf89dcd7929b816ebfcca27d0e059322508a76f918503800ef1bd">Term</a>-&gt;getContext());</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;  <a class="code" href="namespacellvm_1_1M68kBeads.html#a7eeab1fe8f39bf89dcd7929b816ebfcca27d0e059322508a76f918503800ef1bd">Term</a>-&gt;setMetadata(LLVMContext::MD_prof,</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;                    MDB.<a class="code" href="classllvm_1_1MDBuilder.html#ad910125a9cfd76aaad7f69469df22f66">createBranchWeights</a>(<a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>.Weights));</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> [Idx, SubWeight] : <a class="code" href="namespacellvm.html#a7b2175e18ff52174fad26b6b68818564">enumerate</a>(<a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>.SubWeights))</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;    <span class="keywordflow">if</span> (SubWeight != 0)</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;      <a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>.Weights[Idx] = <a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>.Weights[Idx] &gt; SubWeight</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;                              ? <a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>.Weights[Idx] - SubWeight</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;                              : 1;</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;}</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;<span class="comment">/// Initialize the weights for all exiting blocks.</span></div>
<div class="line"><a name="l00628"></a><span class="lineno"><a class="line" href="LoopPeel_8cpp.html#acd8a7753c2685a14185133433c0bbf26">  628</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="LoopPeel_8cpp.html#acd8a7753c2685a14185133433c0bbf26">initBranchWeights</a>(<a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;Instruction *, WeightInfo&gt;</a> &amp;WeightInfos,</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;                              <a class="code" href="classllvm_1_1Loop.html">Loop</a> *L) {</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;BasicBlock *&gt;</a> ExitingBlocks;</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;  L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a46880fab7a9d5bd439725f2acc59b80d">getExitingBlocks</a>(ExitingBlocks);</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *ExitingBlock : ExitingBlocks) {</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="namespacellvm_1_1M68kBeads.html#a7eeab1fe8f39bf89dcd7929b816ebfcca27d0e059322508a76f918503800ef1bd">Term</a> = ExitingBlock-&gt;getTerminator();</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;uint32_t&gt;</a> Weights;</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm.html#ac19cbbc4935a23e1d44f65e1eaba6b1d">extractBranchWeights</a>(*<a class="code" href="namespacellvm_1_1M68kBeads.html#a7eeab1fe8f39bf89dcd7929b816ebfcca27d0e059322508a76f918503800ef1bd">Term</a>, Weights))</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160; </div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;    <span class="comment">// See the comment on updateBranchWeights() for an explanation of what we</span></div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;    <span class="comment">// do here.</span></div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;    <a class="code" href="classuint32__t.html">uint32_t</a> FallThroughWeights = 0;</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;    <a class="code" href="classuint32__t.html">uint32_t</a> ExitWeights = 0;</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> [Succ, Weight] : <a class="code" href="namespacellvm.html#a2edb650de7b28add81349f5abf7ed7aa">zip</a>(<a class="code" href="namespacellvm.html#a26e2a938b431eaa6eca2beaa96410c9d">successors</a>(<a class="code" href="namespacellvm_1_1M68kBeads.html#a7eeab1fe8f39bf89dcd7929b816ebfcca27d0e059322508a76f918503800ef1bd">Term</a>), Weights)) {</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;      <span class="keywordflow">if</span> (L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a04337b572d34ea413c35dbac5d75530b">contains</a>(Succ))</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;        FallThroughWeights += Weight;</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;        ExitWeights += Weight;</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;    }</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160; </div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;    <span class="comment">// Don&#39;t try to update weights for degenerate case.</span></div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;    <span class="keywordflow">if</span> (FallThroughWeights == 0)</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160; </div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;uint32_t&gt;</a> SubWeights;</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> [Succ, Weight] : <a class="code" href="namespacellvm.html#a2edb650de7b28add81349f5abf7ed7aa">zip</a>(<a class="code" href="namespacellvm.html#a26e2a938b431eaa6eca2beaa96410c9d">successors</a>(<a class="code" href="namespacellvm_1_1M68kBeads.html#a7eeab1fe8f39bf89dcd7929b816ebfcca27d0e059322508a76f918503800ef1bd">Term</a>), Weights)) {</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;      <span class="keywordflow">if</span> (!L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a04337b572d34ea413c35dbac5d75530b">contains</a>(Succ)) {</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;        <span class="comment">// Exit weights stay the same.</span></div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;        SubWeights.push_back(0);</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;      }</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160; </div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;      <span class="comment">// Subtract exit weights on each iteration, distributed across all</span></div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;      <span class="comment">// fallthrough edges.</span></div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;      <span class="keywordtype">double</span> <a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa05c79fbfc58d9dd2851c467a1ef166bf">W</a> = (<a class="code" href="README-SSE_8txt.html#a698e4bd87a8adc0c042ae6b6e10ee6e1">double</a>)Weight / (<span class="keywordtype">double</span>)FallThroughWeights;</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;      SubWeights.push_back((<a class="code" href="classuint32__t.html">uint32_t</a>)(ExitWeights * <a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa05c79fbfc58d9dd2851c467a1ef166bf">W</a>));</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;    }</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160; </div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;    WeightInfos.<a class="code" href="classllvm_1_1DenseMapBase.html#a99f811d53704275b4158c62a2dd138d9">insert</a>({<a class="code" href="namespacellvm_1_1M68kBeads.html#a7eeab1fe8f39bf89dcd7929b816ebfcca27d0e059322508a76f918503800ef1bd">Term</a>, {<a class="code" href="lib_2Target_2ARM_2README_8txt.html#ad3a99906764c35b2694ae90fa57744a5">std::move</a>(Weights), <a class="code" href="lib_2Target_2ARM_2README_8txt.html#ad3a99906764c35b2694ae90fa57744a5">std::move</a>(SubWeights)}});</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;  }</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;}</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;<span class="comment">/// Update the weights of original exiting block after peeling off all</span></div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;<span class="comment">/// iterations.</span></div>
<div class="line"><a name="l00673"></a><span class="lineno"><a class="line" href="LoopPeel_8cpp.html#ac937a3fd995e7397be78d706199e61c0">  673</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="LoopPeel_8cpp.html#ac937a3fd995e7397be78d706199e61c0">fixupBranchWeights</a>(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="namespacellvm_1_1M68kBeads.html#a7eeab1fe8f39bf89dcd7929b816ebfcca27d0e059322508a76f918503800ef1bd">Term</a>, <span class="keyword">const</span> <a class="code" href="structWeightInfo.html">WeightInfo</a> &amp;<a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>) {</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;  <a class="code" href="classllvm_1_1MDBuilder.html">MDBuilder</a> MDB(<a class="code" href="namespacellvm_1_1M68kBeads.html#a7eeab1fe8f39bf89dcd7929b816ebfcca27d0e059322508a76f918503800ef1bd">Term</a>-&gt;getContext());</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;  <a class="code" href="namespacellvm_1_1M68kBeads.html#a7eeab1fe8f39bf89dcd7929b816ebfcca27d0e059322508a76f918503800ef1bd">Term</a>-&gt;setMetadata(LLVMContext::MD_prof,</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;                    MDB.<a class="code" href="classllvm_1_1MDBuilder.html#ad910125a9cfd76aaad7f69469df22f66">createBranchWeights</a>(<a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>.Weights));</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;}</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;<span class="comment">/// Clones the body of the loop L, putting it between \p InsertTop and \p</span></div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;<span class="comment">/// InsertBot.</span></div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;<span class="comment">/// \param IterNumber The serial number of the iteration currently being</span></div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;<span class="comment">/// peeled off.</span></div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;<span class="comment">/// \param ExitEdges The exit edges of the original loop.</span></div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;<span class="comment">/// \param[out] NewBlocks A list of the blocks in the newly created clone</span></div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;<span class="comment">/// \param[out] VMap The value map between the loop and the new clone.</span></div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;<span class="comment">/// \param LoopBlocks A helper for DFS-traversal of the loop.</span></div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;<span class="comment">/// \param LVMap A value-map that maps instructions from the original loop to</span></div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;<span class="comment">/// instructions in the last peeled-off iteration.</span></div>
<div class="line"><a name="l00689"></a><span class="lineno"><a class="line" href="LoopPeel_8cpp.html#a01fd139cc69e032081156e44c017248e">  689</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="LoopPeel_8cpp.html#a01fd139cc69e032081156e44c017248e">cloneLoopBlocks</a>(</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;    <a class="code" href="classllvm_1_1Loop.html">Loop</a> *L, <span class="keywordtype">unsigned</span> IterNumber, <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *InsertTop, <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *InsertBot,</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;    <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl</a>&lt;std::pair&lt;BasicBlock *, BasicBlock *&gt;&gt; &amp;ExitEdges,</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;    <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;BasicBlock *&gt;</a> &amp;NewBlocks, <a class="code" href="classllvm_1_1LoopBlocksDFS.html">LoopBlocksDFS</a> &amp;LoopBlocks,</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;    <a class="code" href="classllvm_1_1ValueMap.html">ValueToValueMapTy</a> &amp;VMap, <a class="code" href="classllvm_1_1ValueMap.html">ValueToValueMapTy</a> &amp;LVMap, <a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> *DT,</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;    <a class="code" href="classllvm_1_1LoopInfo.html">LoopInfo</a> *LI, <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;MDNode *&gt;</a> LoopLocalNoAliasDeclScopes,</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;    <a class="code" href="classllvm_1_1ScalarEvolution.html">ScalarEvolution</a> &amp;SE) {</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Header = L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a58c5b170ea68b41e94ebb0019523a68f">getHeader</a>();</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Latch = L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a1230fd674d2609b96527fe65eaf40b1b">getLoopLatch</a>();</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *PreHeader = L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#ac3280e7f76f955403fe17eacf126b90d">getLoopPreheader</a>();</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160; </div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> = Header-&gt;getParent();</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;  <a class="code" href="classllvm_1_1LoopBlocksDFS.html#a0c1bb1134650f3f69f5921d57fb50b78">LoopBlocksDFS::RPOIterator</a> BlockBegin = LoopBlocks.<a class="code" href="classllvm_1_1LoopBlocksDFS.html#a003fe6215d300fc9720b1b056cdf4c23">beginRPO</a>();</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;  <a class="code" href="classllvm_1_1LoopBlocksDFS.html#a0c1bb1134650f3f69f5921d57fb50b78">LoopBlocksDFS::RPOIterator</a> BlockEnd = LoopBlocks.<a class="code" href="classllvm_1_1LoopBlocksDFS.html#aeebda6b0288bea7cd706111624ca73f6">endRPO</a>();</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;  <a class="code" href="classllvm_1_1Loop.html">Loop</a> *ParentLoop = L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a62733c3335a87750623dbfc5b3ae4f6c">getParentLoop</a>();</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160; </div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;  <span class="comment">// For each block in the original loop, create a new copy,</span></div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;  <span class="comment">// and update the value map with the newly created values.</span></div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1LoopBlocksDFS.html#a0c1bb1134650f3f69f5921d57fb50b78">LoopBlocksDFS::RPOIterator</a> <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> = BlockBegin; <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> != BlockEnd; ++<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) {</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *NewBB = <a class="code" href="namespacellvm.html#a6befe133f42d6a8e07ba98372d7f9c60">CloneBasicBlock</a>(*<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, VMap, <span class="stringliteral">&quot;.peel&quot;</span>, <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;    NewBlocks.push_back(NewBB);</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160; </div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;    <span class="comment">// If an original block is an immediate child of the loop L, its copy</span></div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;    <span class="comment">// is a child of a ParentLoop after peeling. If a block is a child of</span></div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;    <span class="comment">// a nested loop, it is handled in the cloneLoop() call below.</span></div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;    <span class="keywordflow">if</span> (ParentLoop &amp;&amp; LI-&gt;<a class="code" href="classllvm_1_1LoopInfoBase.html#a7a7c8e0e4f836c13c015b62e18f386bd">getLoopFor</a>(*<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) == L)</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;      ParentLoop-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a63f099d3bf7cf97eb3ae2d630e3d1afc">addBasicBlockToLoop</a>(NewBB, *LI);</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160; </div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;    VMap[*<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>] = NewBB;</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160; </div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;    <span class="comment">// If dominator tree is available, insert nodes to represent cloned blocks.</span></div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;    <span class="keywordflow">if</span> (DT) {</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;      <span class="keywordflow">if</span> (Header == *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>)</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;        DT-&gt;<a class="code" href="classllvm_1_1DominatorTreeBase.html#a4d417f72d43729d07de3b3d2f58893cc">addNewBlock</a>(NewBB, InsertTop);</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;      <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;        <a class="code" href="classllvm_1_1DomTreeNodeBase.html">DomTreeNode</a> *IDom = DT-&gt;<a class="code" href="classllvm_1_1DominatorTreeBase.html#a4344e66fb61ea313a85a9e054124ac55">getNode</a>(*BB)-&gt;<a class="code" href="classllvm_1_1DomTreeNodeBase.html#aa22cb3ff8c95bb05185acad8c569d4b6">getIDom</a>();</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;        <span class="comment">// VMap must contain entry for IDom, as the iteration order is RPO.</span></div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;        DT-&gt;<a class="code" href="classllvm_1_1DominatorTreeBase.html#a4d417f72d43729d07de3b3d2f58893cc">addNewBlock</a>(NewBB, cast&lt;BasicBlock&gt;(VMap[IDom-&gt;<a class="code" href="classllvm_1_1DomTreeNodeBase.html#a6a15a030098342e06ea73e1241d614c9">getBlock</a>()]));</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;      }</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;    }</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;  }</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160; </div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;  {</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;    <span class="comment">// Identify what other metadata depends on the cloned version. After</span></div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;    <span class="comment">// cloning, replace the metadata with the corrected version for both</span></div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;    <span class="comment">// memory instructions and noalias intrinsics.</span></div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;    std::string <a class="code" href="namespacellvm_1_1MipsISD.html#a422daf9aa810935178671306b651d69ba88a797f57846adb2c382b3732b471913">Ext</a> = (<a class="code" href="classllvm_1_1Twine.html">Twine</a>(<span class="stringliteral">&quot;Peel&quot;</span>) + <a class="code" href="classllvm_1_1Twine.html">Twine</a>(IterNumber)).str();</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;    <a class="code" href="namespacellvm.html#ab7abd0e34c17dcb201a4138dc65cc067">cloneAndAdaptNoAliasScopes</a>(LoopLocalNoAliasDeclScopes, NewBlocks,</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;                               Header-&gt;getContext(), <a class="code" href="namespacellvm_1_1MipsISD.html#a422daf9aa810935178671306b651d69ba88a797f57846adb2c382b3732b471913">Ext</a>);</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;  }</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160; </div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;  <span class="comment">// Recursively create the new Loop objects for nested loops, if any,</span></div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;  <span class="comment">// to preserve LoopInfo.</span></div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Loop.html">Loop</a> *ChildLoop : *L) {</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;    <a class="code" href="namespacellvm.html#afe8e2e0edcd7756ff5985b8798270c5d">cloneLoop</a>(ChildLoop, ParentLoop, VMap, LI, <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;  }</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160; </div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;  <span class="comment">// Hook-up the control flow for the newly inserted blocks.</span></div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;  <span class="comment">// The new header is hooked up directly to the &quot;top&quot;, which is either</span></div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;  <span class="comment">// the original loop preheader (for the first iteration) or the previous</span></div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;  <span class="comment">// iteration&#39;s exiting block (for every other iteration)</span></div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;  InsertTop-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>()-&gt;<a class="code" href="classllvm_1_1Instruction.html#ae959364e4640ac025bbc046d3d7c7e61">setSuccessor</a>(0, cast&lt;BasicBlock&gt;(VMap[Header]));</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160; </div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;  <span class="comment">// Similarly, for the latch:</span></div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;  <span class="comment">// The original exiting edge is still hooked up to the loop exit.</span></div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;  <span class="comment">// The backedge now goes to the &quot;bottom&quot;, which is either the loop&#39;s real</span></div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;  <span class="comment">// header (for the last peeled iteration) or the copied header of the next</span></div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;  <span class="comment">// iteration (for every other iteration)</span></div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *NewLatch = cast&lt;BasicBlock&gt;(VMap[Latch]);</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;  <span class="keyword">auto</span> *LatchTerm = cast&lt;Instruction&gt;(NewLatch-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>());</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> idx = 0, <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a> = LatchTerm-&gt;getNumSuccessors(); idx &lt; <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a>; ++idx)</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;    <span class="keywordflow">if</span> (LatchTerm-&gt;getSuccessor(idx) == Header) {</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;      LatchTerm-&gt;setSuccessor(idx, InsertBot);</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;    }</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;  <span class="keywordflow">if</span> (DT)</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;    DT-&gt;<a class="code" href="classllvm_1_1DominatorTreeBase.html#a2881c226e1c102190d54c3b664330aba">changeImmediateDominator</a>(InsertBot, NewLatch);</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160; </div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;  <span class="comment">// The new copy of the loop body starts with a bunch of PHI nodes</span></div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;  <span class="comment">// that pick an incoming value from either the preheader, or the previous</span></div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;  <span class="comment">// loop iteration. Since this copy is no longer part of the loop, we</span></div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;  <span class="comment">// resolve this statically:</span></div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;  <span class="comment">// For the first iteration, we use the value from the preheader directly.</span></div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;  <span class="comment">// For any other iteration, we replace the phi with the value generated by</span></div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;  <span class="comment">// the immediately preceding clone of the loop body (which represents</span></div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;  <span class="comment">// the previous iteration).</span></div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html#a98c0a84a5dfa8bce341c829709f171e5">BasicBlock::iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = Header-&gt;begin(); isa&lt;PHINode&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>); ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;    <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *NewPHI = cast&lt;PHINode&gt;(VMap[&amp;*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>]);</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;    <span class="keywordflow">if</span> (IterNumber == 0) {</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;      VMap[&amp;*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>] = NewPHI-&gt;<a class="code" href="classllvm_1_1PHINode.html#adfb61ffe25c950c75c86310245b3ef39">getIncomingValueForBlock</a>(PreHeader);</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *LatchVal = NewPHI-&gt;<a class="code" href="classllvm_1_1PHINode.html#adfb61ffe25c950c75c86310245b3ef39">getIncomingValueForBlock</a>(Latch);</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;      <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *LatchInst = dyn_cast&lt;Instruction&gt;(LatchVal);</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;      <span class="keywordflow">if</span> (LatchInst &amp;&amp; L-&gt;contains(LatchInst))</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;        VMap[&amp;*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>] = LVMap[LatchInst];</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;        VMap[&amp;*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>] = LatchVal;</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;    }</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;    NewPHI-&gt;<a class="code" href="classllvm_1_1Instruction.html#ae6b978645b8ac72d1a35e1298ffdd4f0">eraseFromParent</a>();</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;  }</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160; </div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;  <span class="comment">// Fix up the outgoing values - we need to add a value for the iteration</span></div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;  <span class="comment">// we&#39;ve just created. Note that this must happen *after* the incoming</span></div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;  <span class="comment">// values are adjusted, since the value going out of the latch may also be</span></div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;  <span class="comment">// a value coming into the header.</span></div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> Edge : ExitEdges)</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1PHINode.html">PHINode</a> &amp;<a class="code" href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">PHI</a> : Edge.second-&gt;phis()) {</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *LatchVal = <a class="code" href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">PHI</a>.getIncomingValueForBlock(Edge.first);</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;      <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *LatchInst = dyn_cast&lt;Instruction&gt;(LatchVal);</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;      <span class="keywordflow">if</span> (LatchInst &amp;&amp; L-&gt;contains(LatchInst))</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;        LatchVal = VMap[LatchVal];</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;      <a class="code" href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">PHI</a>.addIncoming(LatchVal, cast&lt;BasicBlock&gt;(VMap[Edge.first]));</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;      SE.<a class="code" href="classllvm_1_1ScalarEvolution.html#a804545e5b568edec8b970da32cd37359">forgetValue</a>(&amp;<a class="code" href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">PHI</a>);</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;    }</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160; </div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;  <span class="comment">// LastValueMap is updated with the values for the current loop</span></div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;  <span class="comment">// which are used the next time this function is called.</span></div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> KV : VMap)</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;    LVMap[KV.first] = KV.second;</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;}</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160; </div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;<a class="code" href="structllvm_1_1TargetTransformInfo_1_1PeelingPreferences.html">TargetTransformInfo::PeelingPreferences</a></div>
<div class="line"><a name="l00811"></a><span class="lineno"><a class="line" href="namespacellvm.html#a6e86d0ac2e968adc60290ca52da02e42">  811</a></span>&#160;<a class="code" href="namespacellvm.html#a6e86d0ac2e968adc60290ca52da02e42">llvm::gatherPeelingPreferences</a>(<a class="code" href="classllvm_1_1Loop.html">Loop</a> *L, <a class="code" href="classllvm_1_1ScalarEvolution.html">ScalarEvolution</a> &amp;SE,</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;                               <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetTransformInfo.html">TargetTransformInfo</a> &amp;<a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>,</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;                               std::optional&lt;bool&gt; UserAllowPeeling,</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;                               std::optional&lt;bool&gt; UserAllowProfileBasedPeeling,</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;                               <span class="keywordtype">bool</span> UnrollingSpecficValues) {</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;  <a class="code" href="structllvm_1_1TargetTransformInfo_1_1PeelingPreferences.html">TargetTransformInfo::PeelingPreferences</a> PP;</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160; </div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;  <span class="comment">// Set the default values.</span></div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;  PP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1PeelingPreferences.html#a93102207c7c9430df6ef02447446de9b">PeelCount</a> = 0;</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;  PP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1PeelingPreferences.html#a3421601051b06ed7b52a09696bd595b2">AllowPeeling</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;  PP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1PeelingPreferences.html#a71809834780876145831c63077461284">AllowLoopNestsPeeling</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;  PP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1PeelingPreferences.html#a89c02eecae37f89bf86f71336630858d">PeelProfiledIterations</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160; </div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;  <span class="comment">// Get the target specifc values.</span></div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;  <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>.<a class="code" href="classllvm_1_1TargetTransformInfo.html#af513fb5e9b4731b5b8315d757d5a252f">getPeelingPreferences</a>(L, SE, PP);</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160; </div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;  <span class="comment">// User specified values using cl::opt.</span></div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;  <span class="keywordflow">if</span> (UnrollingSpecficValues) {</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="LoopPeel_8cpp.html#aef4c7e0463b4cea18462fed1141cead5">UnrollPeelCount</a>.getNumOccurrences() &gt; 0)</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;      PP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1PeelingPreferences.html#a93102207c7c9430df6ef02447446de9b">PeelCount</a> = <a class="code" href="LoopPeel_8cpp.html#aef4c7e0463b4cea18462fed1141cead5">UnrollPeelCount</a>;</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="LoopPeel_8cpp.html#a5714fa22836848b9d701fa0a7dca1c2e">UnrollAllowPeeling</a>.<a class="code" href="classllvm_1_1cl_1_1Option.html#a2dc75fafb68e7669e776e19da7857cdf">getNumOccurrences</a>() &gt; 0)</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;      PP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1PeelingPreferences.html#a3421601051b06ed7b52a09696bd595b2">AllowPeeling</a> = <a class="code" href="LoopPeel_8cpp.html#a5714fa22836848b9d701fa0a7dca1c2e">UnrollAllowPeeling</a>;</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="LoopPeel_8cpp.html#aeaa705f6e8562e660e7d8401a8d49b5e">UnrollAllowLoopNestsPeeling</a>.<a class="code" href="classllvm_1_1cl_1_1Option.html#a2dc75fafb68e7669e776e19da7857cdf">getNumOccurrences</a>() &gt; 0)</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;      PP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1PeelingPreferences.html#a71809834780876145831c63077461284">AllowLoopNestsPeeling</a> = <a class="code" href="LoopPeel_8cpp.html#aeaa705f6e8562e660e7d8401a8d49b5e">UnrollAllowLoopNestsPeeling</a>;</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;  }</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160; </div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;  <span class="comment">// User specifed values provided by argument.</span></div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;  <span class="keywordflow">if</span> (UserAllowPeeling)</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;    PP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1PeelingPreferences.html#a3421601051b06ed7b52a09696bd595b2">AllowPeeling</a> = *UserAllowPeeling;</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;  <span class="keywordflow">if</span> (UserAllowProfileBasedPeeling)</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;    PP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1PeelingPreferences.html#a89c02eecae37f89bf86f71336630858d">PeelProfiledIterations</a> = *UserAllowProfileBasedPeeling;</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160; </div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;  <span class="keywordflow">return</span> PP;</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;}</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;<span class="comment">/// Peel off the first \p PeelCount iterations of loop \p L.</span></div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;<span class="comment">/// Note that this does not peel them off as a single straight-line block.</span></div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;<span class="comment">/// Rather, each iteration is peeled off separately, and needs to check the</span></div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;<span class="comment">/// exit condition.</span></div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;<span class="comment">/// For loops that dynamically execute \p PeelCount iterations or less</span></div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;<span class="comment">/// this provides a benefit, since the peeled off iterations, which account</span></div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;<span class="comment">/// for the bulk of dynamic execution, can be further simplified by scalar</span></div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;<span class="comment">/// optimizations.</span></div>
<div class="line"><a name="l00855"></a><span class="lineno"><a class="line" href="namespacellvm.html#afdb3eec2f46233c924c30c0838a3c8fe">  855</a></span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> <a class="code" href="namespacellvm.html#afdb3eec2f46233c924c30c0838a3c8fe">llvm::peelLoop</a>(<a class="code" href="classllvm_1_1Loop.html">Loop</a> *L, <span class="keywordtype">unsigned</span> PeelCount, <a class="code" href="classllvm_1_1LoopInfo.html">LoopInfo</a> *LI,</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;                    <a class="code" href="classllvm_1_1ScalarEvolution.html">ScalarEvolution</a> *SE, <a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> &amp;DT, <a class="code" href="classllvm_1_1AssumptionCache.html">AssumptionCache</a> *AC,</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;                    <span class="keywordtype">bool</span> PreserveLCSSA, <a class="code" href="classllvm_1_1ValueMap.html">ValueToValueMapTy</a> &amp;LVMap) {</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(PeelCount &gt; 0 &amp;&amp; <span class="stringliteral">&quot;Attempt to peel out zero iterations?&quot;</span>);</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="namespacellvm.html#a3aea1e78510aa7469457aade10808e51">canPeel</a>(L) &amp;&amp; <span class="stringliteral">&quot;Attempt to peel a loop which is not peelable?&quot;</span>);</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160; </div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;  <a class="code" href="classllvm_1_1LoopBlocksDFS.html">LoopBlocksDFS</a> LoopBlocks(L);</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;  LoopBlocks.<a class="code" href="classllvm_1_1LoopBlocksDFS.html#ab38fc97602eaec1838f2b86624001ae1">perform</a>(LI);</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160; </div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Header = L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a58c5b170ea68b41e94ebb0019523a68f">getHeader</a>();</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *PreHeader = L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#ac3280e7f76f955403fe17eacf126b90d">getLoopPreheader</a>();</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Latch = L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a1230fd674d2609b96527fe65eaf40b1b">getLoopLatch</a>();</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;std::pair&lt;BasicBlock *, BasicBlock *&gt;</a>, 4&gt; ExitEdges;</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;  L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#aad953b1e46f8bd2ca82b9cb7285a66a7">getExitEdges</a>(ExitEdges);</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160; </div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;  <span class="comment">// Remember dominators of blocks we might reach through exits to change them</span></div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;  <span class="comment">// later. Immediate dominator of such block might change, because we add more</span></div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;  <span class="comment">// routes which can lead to the exit: we can reach it from the peeled</span></div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;  <span class="comment">// iterations too.</span></div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;  <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;BasicBlock *, BasicBlock *&gt;</a> NonLoopBlocksIDom;</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> : L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a40f34cc77d2b3bc73384f535c8101858">blocks</a>()) {</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;    <span class="keyword">auto</span> *BBDomNode = DT.<a class="code" href="classllvm_1_1DominatorTreeBase.html#a4344e66fb61ea313a85a9e054124ac55">getNode</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;BasicBlock *, 16&gt;</a> ChildrenToUpdate;</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> *ChildDomNode : BBDomNode-&gt;children()) {</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;      <span class="keyword">auto</span> *ChildBB = ChildDomNode-&gt;getBlock();</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;      <span class="keywordflow">if</span> (!L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a04337b572d34ea413c35dbac5d75530b">contains</a>(ChildBB))</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;        ChildrenToUpdate.push_back(ChildBB);</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;    }</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;    <span class="comment">// The new idom of the block will be the nearest common dominator</span></div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;    <span class="comment">// of all copies of the previous idom. This is equivalent to the</span></div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;    <span class="comment">// nearest common dominator of the previous idom and the first latch,</span></div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;    <span class="comment">// which dominates all copies of the previous idom.</span></div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *NewIDom = DT.<a class="code" href="classllvm_1_1DominatorTree.html#a2ec50ab2c78eff965caf3da71cd08be4">findNearestCommonDominator</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, Latch);</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> *ChildBB : ChildrenToUpdate)</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;      NonLoopBlocksIDom[ChildBB] = NewIDom;</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;  }</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160; </div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> = Header-&gt;getParent();</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160; </div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;  <span class="comment">// Set up all the necessary basic blocks. It is convenient to split the</span></div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;  <span class="comment">// preheader into 3 parts - two blocks to anchor the peeled copy of the loop</span></div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;  <span class="comment">// body, and a new preheader for the &quot;real&quot; loop.</span></div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160; </div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;  <span class="comment">// Peeling the first iteration transforms.</span></div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;  <span class="comment">// PreHeader:</span></div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;  <span class="comment">// ...</span></div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;  <span class="comment">// Header:</span></div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;  <span class="comment">//   LoopBody</span></div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;  <span class="comment">//   If (cond) goto Header</span></div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;  <span class="comment">// Exit:</span></div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;  <span class="comment">// into</span></div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;  <span class="comment">// InsertTop:</span></div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;  <span class="comment">//   LoopBody</span></div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;  <span class="comment">//   If (!cond) goto Exit</span></div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;  <span class="comment">// InsertBot:</span></div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;  <span class="comment">// NewPreHeader:</span></div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;  <span class="comment">// ...</span></div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;  <span class="comment">// Header:</span></div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;  <span class="comment">//  LoopBody</span></div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;  <span class="comment">//  If (cond) goto Header</span></div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;  <span class="comment">// Exit:</span></div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;  <span class="comment">// Each following iteration will split the current bottom anchor in two,</span></div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;  <span class="comment">// and put the new copy of the loop body between these two blocks. That is,</span></div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;  <span class="comment">// after peeling another iteration from the example above, we&#39;ll split</span></div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;  <span class="comment">// InsertBot, and get:</span></div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;  <span class="comment">// InsertTop:</span></div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;  <span class="comment">//   LoopBody</span></div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;  <span class="comment">//   If (!cond) goto Exit</span></div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;  <span class="comment">// InsertBot:</span></div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;  <span class="comment">//   LoopBody</span></div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;  <span class="comment">//   If (!cond) goto Exit</span></div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;  <span class="comment">// InsertBot.next:</span></div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;  <span class="comment">// NewPreHeader:</span></div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;  <span class="comment">// ...</span></div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;  <span class="comment">// Header:</span></div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;  <span class="comment">//  LoopBody</span></div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;  <span class="comment">//  If (cond) goto Header</span></div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;  <span class="comment">// Exit:</span></div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160; </div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *InsertTop = <a class="code" href="namespacellvm.html#adf83581f514774264d616eef5706cf6e">SplitEdge</a>(PreHeader, Header, &amp;DT, LI);</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *InsertBot =</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;      <a class="code" href="namespacellvm.html#ad295cb34421c21507bc9cdefe1ba3f16">SplitBlock</a>(InsertTop, InsertTop-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>(), &amp;DT, LI);</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *NewPreHeader =</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;      <a class="code" href="namespacellvm.html#ad295cb34421c21507bc9cdefe1ba3f16">SplitBlock</a>(InsertBot, InsertBot-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>(), &amp;DT, LI);</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160; </div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;  InsertTop-&gt;<a class="code" href="classllvm_1_1Value.html#a35ee267850af7c235474a8c46c7ac5af">setName</a>(Header-&gt;getName() + <span class="stringliteral">&quot;.peel.begin&quot;</span>);</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;  InsertBot-&gt;<a class="code" href="classllvm_1_1Value.html#a35ee267850af7c235474a8c46c7ac5af">setName</a>(Header-&gt;getName() + <span class="stringliteral">&quot;.peel.next&quot;</span>);</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;  NewPreHeader-&gt;<a class="code" href="classllvm_1_1Value.html#a35ee267850af7c235474a8c46c7ac5af">setName</a>(PreHeader-&gt;<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>() + <span class="stringliteral">&quot;.peel.newph&quot;</span>);</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160; </div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *LatchTerm =</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;      cast&lt;Instruction&gt;(cast&lt;BasicBlock&gt;(Latch)-&gt;getTerminator());</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160; </div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;  <span class="comment">// If we have branch weight information, we&#39;ll want to update it for the</span></div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;  <span class="comment">// newly created branches.</span></div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;  <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;Instruction *, WeightInfo&gt;</a> Weights;</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;  <a class="code" href="LoopPeel_8cpp.html#acd8a7753c2685a14185133433c0bbf26">initBranchWeights</a>(Weights, L);</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160; </div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;  <span class="comment">// Identify what noalias metadata is inside the loop: if it is inside the</span></div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;  <span class="comment">// loop, the associated metadata must be cloned for each iteration.</span></div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;MDNode *, 6&gt;</a> LoopLocalNoAliasDeclScopes;</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;  <a class="code" href="namespacellvm.html#ade9551bcb1121539a279452fec71f9eb">identifyNoAliasScopesToClone</a>(L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a5cc113cb783ab6e5ca7b69241431c19c">getBlocks</a>(), LoopLocalNoAliasDeclScopes);</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160; </div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;  <span class="comment">// For each peeled-off iteration, make a copy of the loop.</span></div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> Iter = 0; Iter &lt; PeelCount; ++Iter) {</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;BasicBlock *, 8&gt;</a> NewBlocks;</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;    <a class="code" href="classllvm_1_1ValueMap.html">ValueToValueMapTy</a> VMap;</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160; </div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;    <a class="code" href="LoopPeel_8cpp.html#a01fd139cc69e032081156e44c017248e">cloneLoopBlocks</a>(L, Iter, InsertTop, InsertBot, ExitEdges, NewBlocks,</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;                    LoopBlocks, VMap, LVMap, &amp;DT, LI,</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;                    LoopLocalNoAliasDeclScopes, *SE);</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160; </div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;    <span class="comment">// Remap to use values from the current iteration instead of the</span></div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;    <span class="comment">// previous one.</span></div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;    <a class="code" href="namespacellvm.html#ab8ec5c940fbc440c992716fbe4a48636">remapInstructionsInBlocks</a>(NewBlocks, VMap);</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160; </div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;    <span class="comment">// Update IDoms of the blocks reachable through exits.</span></div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;    <span class="keywordflow">if</span> (Iter == 0)</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">auto</span> BBIDom : NonLoopBlocksIDom)</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;        DT.<a class="code" href="classllvm_1_1DominatorTreeBase.html#a2881c226e1c102190d54c3b664330aba">changeImmediateDominator</a>(BBIDom.first,</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;                                     cast&lt;BasicBlock&gt;(LVMap[BBIDom.second]));</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;<span class="preprocessor">#ifdef EXPENSIVE_CHECKS</span></div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(DT.<a class="code" href="classllvm_1_1DominatorTreeBase.html#a1f08f2925fec05b265e540d29066b9c8">verify</a>(<a class="code" href="namespacellvm_1_1Sched.html#ac1547cccaf660851fcd6863d1e60309ea258d0fc76498bc434cf57e73ea5adbfc">DominatorTree::VerificationLevel::Fast</a>));</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160; </div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;[<a class="code" href="namespacellvm_1_1M68kBeads.html#a7eeab1fe8f39bf89dcd7929b816ebfcca27d0e059322508a76f918503800ef1bd">Term</a>, <a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>] : Weights) {</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;      <span class="keyword">auto</span> *TermCopy = cast&lt;Instruction&gt;(VMap[<a class="code" href="namespacellvm_1_1M68kBeads.html#a7eeab1fe8f39bf89dcd7929b816ebfcca27d0e059322508a76f918503800ef1bd">Term</a>]);</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;      <a class="code" href="LoopPeel_8cpp.html#a070d953c06601ec34680fdc35c867b17">updateBranchWeights</a>(TermCopy, <a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>);</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;    }</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160; </div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;    <span class="comment">// Remove Loop metadata from the latch branch instruction</span></div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;    <span class="comment">// because it is not the Loop&#39;s latch branch anymore.</span></div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;    <span class="keyword">auto</span> *LatchTermCopy = cast&lt;Instruction&gt;(VMap[LatchTerm]);</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;    LatchTermCopy-&gt;setMetadata(LLVMContext::MD_loop, <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160; </div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;    InsertTop = InsertBot;</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;    InsertBot = <a class="code" href="namespacellvm.html#ad295cb34421c21507bc9cdefe1ba3f16">SplitBlock</a>(InsertBot, InsertBot-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>(), &amp;DT, LI);</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;    InsertBot-&gt;<a class="code" href="classllvm_1_1Value.html#a35ee267850af7c235474a8c46c7ac5af">setName</a>(Header-&gt;getName() + <span class="stringliteral">&quot;.peel.next&quot;</span>);</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160; </div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;    <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;splice(InsertTop-&gt;<a class="code" href="classllvm_1_1ilist__node__impl.html#af719fc783be6589465137d997701a432">getIterator</a>(), <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, NewBlocks[0]-&gt;getIterator(),</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;              <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;end());</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;  }</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160; </div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;  <span class="comment">// Now adjust the phi nodes in the loop header to get their initial values</span></div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;  <span class="comment">// from the last peeled-off iteration instead of the preheader.</span></div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html#a98c0a84a5dfa8bce341c829709f171e5">BasicBlock::iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = Header-&gt;begin(); isa&lt;PHINode&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>); ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;    <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *<a class="code" href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">PHI</a> = cast&lt;PHINode&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *NewVal = <a class="code" href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">PHI</a>-&gt;getIncomingValueForBlock(Latch);</div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *LatchInst = dyn_cast&lt;Instruction&gt;(NewVal);</div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;    <span class="keywordflow">if</span> (LatchInst &amp;&amp; L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a04337b572d34ea413c35dbac5d75530b">contains</a>(LatchInst))</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;      NewVal = LVMap[LatchInst];</div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160; </div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;    <a class="code" href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">PHI</a>-&gt;setIncomingValueForBlock(NewPreHeader, NewVal);</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;  }</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160; </div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;[<a class="code" href="namespacellvm_1_1M68kBeads.html#a7eeab1fe8f39bf89dcd7929b816ebfcca27d0e059322508a76f918503800ef1bd">Term</a>, <a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>] : Weights)</div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;    <a class="code" href="LoopPeel_8cpp.html#ac937a3fd995e7397be78d706199e61c0">fixupBranchWeights</a>(<a class="code" href="namespacellvm_1_1M68kBeads.html#a7eeab1fe8f39bf89dcd7929b816ebfcca27d0e059322508a76f918503800ef1bd">Term</a>, <a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>);</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160; </div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;  <span class="comment">// Update Metadata for count of peeled off iterations.</span></div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;  <span class="keywordtype">unsigned</span> AlreadyPeeled = 0;</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> Peeled = <a class="code" href="namespacellvm.html#a9b3cfe2d1603665824476c30368b8eb1">getOptionalIntLoopAttribute</a>(L, <a class="code" href="LoopPeel_8cpp.html#a7f5685c46cf812c90576046af45cd7fa">PeeledCountMetaData</a>))</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;    AlreadyPeeled = *Peeled;</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;  <a class="code" href="namespacellvm.html#a55c9054d63d1c6a39e9c09ba13a482fa">addStringMetadataToLoop</a>(L, <a class="code" href="LoopPeel_8cpp.html#a7f5685c46cf812c90576046af45cd7fa">PeeledCountMetaData</a>, AlreadyPeeled + PeelCount);</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160; </div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Loop.html">Loop</a> *ParentLoop = L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a62733c3335a87750623dbfc5b3ae4f6c">getParentLoop</a>())</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;    L = ParentLoop;</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160; </div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;  <span class="comment">// We modified the loop, update SE.</span></div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;  SE-&gt;<a class="code" href="classllvm_1_1ScalarEvolution.html#a7d5bfa1ac3c7c096af6b26fb95cd699d">forgetTopmostLoop</a>(L);</div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160; </div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;<span class="preprocessor">#ifdef EXPENSIVE_CHECKS</span></div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;  <span class="comment">// Finally DomtTree must be correct.</span></div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(DT.<a class="code" href="classllvm_1_1DominatorTreeBase.html#a1f08f2925fec05b265e540d29066b9c8">verify</a>(<a class="code" href="namespacellvm_1_1Sched.html#ac1547cccaf660851fcd6863d1e60309ea258d0fc76498bc434cf57e73ea5adbfc">DominatorTree::VerificationLevel::Fast</a>));</div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160; </div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;  <span class="comment">// FIXME: Incrementally update loop-simplify</span></div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;  <a class="code" href="namespacellvm.html#a0083a69883e0f97e111dbff064c60f42">simplifyLoop</a>(L, &amp;DT, LI, SE, AC, <span class="keyword">nullptr</span>, PreserveLCSSA);</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160; </div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;  NumPeeled++;</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160; </div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;}</div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="aLoopPeel_8cpp_html_aef4c7e0463b4cea18462fed1141cead5"><div class="ttname"><a href="LoopPeel_8cpp.html#aef4c7e0463b4cea18462fed1141cead5">UnrollPeelCount</a></div><div class="ttdeci">static cl::opt&lt; unsigned &gt; UnrollPeelCount(&quot;unroll-peel-count&quot;, cl::Hidden, cl::desc(&quot;Set the unroll peeling count, for testing purposes&quot;))</div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a6796a84f02394ce6ebef227c866cd5eb"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a6796a84f02394ce6ebef227c866cd5eb">llvm::BasicBlock::getTerminatingDeoptimizeCall</a></div><div class="ttdeci">const CallInst * getTerminatingDeoptimizeCall() const</div><div class="ttdoc">Returns the call instruction calling @llvm.experimental.deoptimize prior to the terminating return in...</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00181">BasicBlock.cpp:181</a></div></div>
<div class="ttc" id="aclassllvm_1_1Loop_html_a6cb6a58fb0ded82b4c7755fc4c27c86d"><div class="ttname"><a href="classllvm_1_1Loop.html#a6cb6a58fb0ded82b4c7755fc4c27c86d">llvm::Loop::isLoopInvariant</a></div><div class="ttdeci">bool isLoopInvariant(const Value *V) const</div><div class="ttdoc">Return true if the specified value is loop invariant.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8cpp_source.html#l00060">LoopInfo.cpp:60</a></div></div>
<div class="ttc" id="anamespacellvm_html"><div class="ttname"><a href="namespacellvm.html">llvm</a></div><div class="ttdoc">This is an optimization pass for GlobalISel generic memory operations.</div><div class="ttdef"><b>Definition:</b> <a href="AddressRanges_8h_source.html#l00018">AddressRanges.h:18</a></div></div>
<div class="ttc" id="aLoopSimplify_8h_html"><div class="ttname"><a href="LoopSimplify_8h.html">LoopSimplify.h</a></div></div>
<div class="ttc" id="aValueMapper_8h_html"><div class="ttname"><a href="ValueMapper_8h.html">ValueMapper.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1DataLayout_html"><div class="ttname"><a href="classllvm_1_1DataLayout.html">llvm::DataLayout</a></div><div class="ttdoc">A parsed version of the target data layout string in and methods for querying it.</div><div class="ttdef"><b>Definition:</b> <a href="DataLayout_8h_source.html#l00110">DataLayout.h:110</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78b"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">llvm::CmpInst::Predicate</a></div><div class="ttdeci">Predicate</div><div class="ttdoc">This enumeration lists the possible predicates for CmpInst subclasses.</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00718">InstrTypes.h:718</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a98c0a84a5dfa8bce341c829709f171e5"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a98c0a84a5dfa8bce341c829709f171e5">llvm::BasicBlock::iterator</a></div><div class="ttdeci">InstListType::iterator iterator</div><div class="ttdoc">Instruction iterators...</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00087">BasicBlock.h:87</a></div></div>
<div class="ttc" id="aAMDGPURewriteUndefForPHI_8cpp_html_a2e83cb1bc3f5e8986cbd14575755a134"><div class="ttname"><a href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">PHI</a></div><div class="ttdeci">Rewrite undef for PHI</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPURewriteUndefForPHI_8cpp_source.html#l00101">AMDGPURewriteUndefForPHI.cpp:101</a></div></div>
<div class="ttc" id="aclassllvm_1_1SCEVAddRecExpr_html_a54bb7394d874cbbef1d81e6bea89d4f3"><div class="ttname"><a href="classllvm_1_1SCEVAddRecExpr.html#a54bb7394d874cbbef1d81e6bea89d4f3">llvm::SCEVAddRecExpr::isAffine</a></div><div class="ttdeci">bool isAffine() const</div><div class="ttdoc">Return true if this represents an expression A + B*x where A and B are loop invariant values.</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolutionExpressions_8h_source.html#l00358">ScalarEvolutionExpressions.h:358</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a38bee869ad41aebfef3de2641b12004c"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a38bee869ad41aebfef3de2641b12004c">llvm::BasicBlock::getParent</a></div><div class="ttdeci">const Function * getParent() const</div><div class="ttdoc">Return the enclosing method, or null if none.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00112">BasicBlock.h:112</a></div></div>
<div class="ttc" id="aLoads_8h_html"><div class="ttname"><a href="Loads_8h.html">Loads.h</a></div></div>
<div class="ttc" id="aLoopPeel_8cpp_html_a7d391dbabb8fc073db875548184a768d"><div class="ttname"><a href="LoopPeel_8cpp.html#a7d391dbabb8fc073db875548184a768d">violatesLegacyMultiExitLoopCheck</a></div><div class="ttdeci">static bool violatesLegacyMultiExitLoopCheck(Loop *L)</div><div class="ttdoc">This &quot;heuristic&quot; exactly matches implicit behavior which used to exist inside getLoopEstimatedTripCou...</div><div class="ttdef"><b>Definition:</b> <a href="LoopPeel_8cpp_source.html#l00450">LoopPeel.cpp:450</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html"><div class="ttname"><a href="classllvm_1_1Function.html">llvm::Function</a></div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00059">Function.h:59</a></div></div>
<div class="ttc" id="aclassllvm_1_1Loop_html"><div class="ttname"><a href="classllvm_1_1Loop.html">llvm::Loop</a></div><div class="ttdoc">Represents a single loop in the control flow graph.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00547">LoopInfo.h:547</a></div></div>
<div class="ttc" id="anamespacellvm_html_a1b8329ea8794c1e6fa1294a1e5a463dd"><div class="ttname"><a href="namespacellvm.html#a1b8329ea8794c1e6fa1294a1e5a463dd">llvm::computePeelCount</a></div><div class="ttdeci">void computePeelCount(Loop *L, unsigned LoopSize, TargetTransformInfo::PeelingPreferences &amp;PP, unsigned TripCount, DominatorTree &amp;DT, ScalarEvolution &amp;SE, AssumptionCache *AC=nullptr, unsigned Threshold=UINT_MAX)</div><div class="ttdef"><b>Definition:</b> <a href="LoopPeel_8cpp_source.html#l00472">LoopPeel.cpp:472</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopBase_html_a04337b572d34ea413c35dbac5d75530b"><div class="ttname"><a href="classllvm_1_1LoopBase.html#a04337b572d34ea413c35dbac5d75530b">llvm::LoopBase::contains</a></div><div class="ttdeci">bool contains(const LoopT *L) const</div><div class="ttdoc">Return true if the specified loop is contained within in this loop.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00139">LoopInfo.h:139</a></div></div>
<div class="ttc" id="aREADME-SSE_8txt_html_a698e4bd87a8adc0c042ae6b6e10ee6e1"><div class="ttname"><a href="README-SSE_8txt.html#a698e4bd87a8adc0c042ae6b6e10ee6e1">double</a></div><div class="ttdeci">into xmm2 addss xmm2 xmm1 xmm3 addss xmm3 movaps xmm0 unpcklps xmm0 ret seems silly when it could just be one addps Expand libm rounding functions main should enable SSE DAZ mode and other fast SSE modes Think about doing i64 math in SSE regs on x86 This testcase should have no SSE instructions in and only one load from a constant double</div><div class="ttdef"><b>Definition:</b> <a href="README-SSE_8txt_source.html#l00085">README-SSE.txt:85</a></div></div>
<div class="ttc" id="anamespacellvm_html_a26e2a938b431eaa6eca2beaa96410c9d"><div class="ttname"><a href="namespacellvm.html#a26e2a938b431eaa6eca2beaa96410c9d">llvm::successors</a></div><div class="ttdeci">auto successors(const MachineBasicBlock *BB)</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l01265">MachineBasicBlock.h:1265</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVector_html"><div class="ttname"><a href="classllvm_1_1SmallVector.html">llvm::SmallVector</a></div><div class="ttdoc">This is a 'vector' (really, a variable-sized array), optimized for the case when the array is small.</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l01199">SmallVector.h:1199</a></div></div>
<div class="ttc" id="aStatistic_8h_html"><div class="ttname"><a href="Statistic_8h.html">Statistic.h</a></div></div>
<div class="ttc" id="astructllvm_1_1TargetTransformInfo_1_1PeelingPreferences_html_a3421601051b06ed7b52a09696bd595b2"><div class="ttname"><a href="structllvm_1_1TargetTransformInfo_1_1PeelingPreferences.html#a3421601051b06ed7b52a09696bd595b2">llvm::TargetTransformInfo::PeelingPreferences::AllowPeeling</a></div><div class="ttdeci">bool AllowPeeling</div><div class="ttdoc">Allow peeling off loop iterations.</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l00553">TargetTransformInfo.h:553</a></div></div>
<div class="ttc" id="anamespacellvm_1_1RISCVFenceField_html_a147be9e9780c1e33363ea572d4c7b25fa05c79fbfc58d9dd2851c467a1ef166bf"><div class="ttname"><a href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa05c79fbfc58d9dd2851c467a1ef166bf">llvm::RISCVFenceField::W</a></div><div class="ttdeci">@ W</div><div class="ttdef"><b>Definition:</b> <a href="RISCVBaseInfo_8h_source.html#l00279">RISCVBaseInfo.h:279</a></div></div>
<div class="ttc" id="anamespacellvm_html_a7b2175e18ff52174fad26b6b68818564"><div class="ttname"><a href="namespacellvm.html#a7b2175e18ff52174fad26b6b68818564">llvm::enumerate</a></div><div class="ttdeci">detail::enumerator&lt; R &gt; enumerate(R &amp;&amp;TheRange)</div><div class="ttdoc">Given an input range, returns a new range whose values are are pair (A,B) such that A is the 0-based ...</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l02264">STLExtras.h:2264</a></div></div>
<div class="ttc" id="aLoopPeel_8cpp_html_a5843a84a6e99ee35ed5c886180e988ca"><div class="ttname"><a href="LoopPeel_8cpp.html#a5843a84a6e99ee35ed5c886180e988ca">UnrollPeelMaxCount</a></div><div class="ttdeci">static cl::opt&lt; unsigned &gt; UnrollPeelMaxCount(&quot;unroll-peel-max-count&quot;, cl::init(7), cl::Hidden, cl::desc(&quot;Max average trip count which will cause loop peeling.&quot;))</div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfo_html"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html">llvm::TargetTransformInfo</a></div><div class="ttdoc">This pass provides access to the codegen interfaces that are needed for IR-level transformations.</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l00196">TargetTransformInfo.h:196</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallDenseMap_html"><div class="ttname"><a href="classllvm_1_1SmallDenseMap.html">llvm::SmallDenseMap</a></div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00880">DenseMap.h:880</a></div></div>
<div class="ttc" id="aclassllvm_1_1ScalarEvolution_html"><div class="ttname"><a href="classllvm_1_1ScalarEvolution.html">llvm::ScalarEvolution</a></div><div class="ttdoc">The main scalar evolution driver.</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8h_source.html#l00452">ScalarEvolution.h:452</a></div></div>
<div class="ttc" id="aclassllvm_1_1DominatorTree_html"><div class="ttname"><a href="classllvm_1_1DominatorTree.html">llvm::DominatorTree</a></div><div class="ttdoc">Concrete subclass of DominatorTreeBase that is used to compute a normal dominator tree.</div><div class="ttdef"><b>Definition:</b> <a href="Dominators_8h_source.html#l00166">Dominators.h:166</a></div></div>
<div class="ttc" id="anamespacellvm_1_1cl_html_a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6"><div class="ttname"><a href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">llvm::cl::Hidden</a></div><div class="ttdeci">@ Hidden</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00138">CommandLine.h:138</a></div></div>
<div class="ttc" id="aScalarEvolution_8h_html"><div class="ttname"><a href="ScalarEvolution_8h.html">ScalarEvolution.h</a></div></div>
<div class="ttc" id="aDenseMap_8h_html"><div class="ttname"><a href="DenseMap_8h.html">DenseMap.h</a></div></div>
<div class="ttc" id="astructllvm_1_1TargetTransformInfo_1_1PeelingPreferences_html"><div class="ttname"><a href="structllvm_1_1TargetTransformInfo_1_1PeelingPreferences.html">llvm::TargetTransformInfo::PeelingPreferences</a></div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l00547">TargetTransformInfo.h:547</a></div></div>
<div class="ttc" id="aLoopPeel_8cpp_html_a070d953c06601ec34680fdc35c867b17"><div class="ttname"><a href="LoopPeel_8cpp.html#a070d953c06601ec34680fdc35c867b17">updateBranchWeights</a></div><div class="ttdeci">static void updateBranchWeights(Instruction *Term, WeightInfo &amp;Info)</div><div class="ttdoc">Update the branch weights of an exiting block of a peeled-off loop iteration.</div><div class="ttdef"><b>Definition:</b> <a href="LoopPeel_8cpp_source.html#l00616">LoopPeel.cpp:616</a></div></div>
<div class="ttc" id="aclassllvm_1_1DominatorTreeBase_html_a4344e66fb61ea313a85a9e054124ac55"><div class="ttname"><a href="classllvm_1_1DominatorTreeBase.html#a4344e66fb61ea313a85a9e054124ac55">llvm::DominatorTreeBase::getNode</a></div><div class="ttdeci">DomTreeNodeBase&lt; NodeT &gt; * getNode(const NodeT *BB) const</div><div class="ttdoc">getNode - return the (Post)DominatorTree node for the specified basic block.</div><div class="ttdef"><b>Definition:</b> <a href="GenericDomTree_8h_source.html#l00367">GenericDomTree.h:367</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopBase_html_aad953b1e46f8bd2ca82b9cb7285a66a7"><div class="ttname"><a href="classllvm_1_1LoopBase.html#aad953b1e46f8bd2ca82b9cb7285a66a7">llvm::LoopBase::getExitEdges</a></div><div class="ttdeci">void getExitEdges(SmallVectorImpl&lt; Edge &gt; &amp;ExitEdges) const</div><div class="ttdoc">Return all pairs of (inside_block,outside_block).</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfoImpl_8h_source.html#l00164">LoopInfoImpl.h:164</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchInst_html_a96b8f11f6f21ca0321294669dab83b35"><div class="ttname"><a href="classllvm_1_1BranchInst.html#a96b8f11f6f21ca0321294669dab83b35">llvm::BranchInst::getNumSuccessors</a></div><div class="ttdeci">unsigned getNumSuccessors() const</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03230">Instructions.h:3230</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSet_html"><div class="ttname"><a href="classllvm_1_1SmallPtrSet.html">llvm::SmallPtrSet</a></div><div class="ttdoc">SmallPtrSet - This class implements a set which is optimized for holding SmallSize or less elements.</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00450">SmallPtrSet.h:450</a></div></div>
<div class="ttc" id="anamespacellvm_html_ab4d4bc901fedd8857f647dcc2c0d71de"><div class="ttname"><a href="namespacellvm.html#ab4d4bc901fedd8857f647dcc2c0d71de">llvm::max</a></div><div class="ttdeci">Expected&lt; ExpressionValue &gt; max(const ExpressionValue &amp;Lhs, const ExpressionValue &amp;Rhs)</div><div class="ttdef"><b>Definition:</b> <a href="FileCheck_8cpp_source.html#l00337">FileCheck.cpp:337</a></div></div>
<div class="ttc" id="aX86PartialReduction_8cpp_html_a87b8bfbbe9d8f7146d7f20a5fb42efd0"><div class="ttname"><a href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a></div><div class="ttdeci">Value * RHS</div><div class="ttdef"><b>Definition:</b> <a href="X86PartialReduction_8cpp_source.html#l00076">X86PartialReduction.cpp:76</a></div></div>
<div class="ttc" id="anamespacellvm_html_a3aea1e78510aa7469457aade10808e51"><div class="ttname"><a href="namespacellvm.html#a3aea1e78510aa7469457aade10808e51">llvm::canPeel</a></div><div class="ttdeci">bool canPeel(const Loop *L)</div><div class="ttdef"><b>Definition:</b> <a href="LoopPeel_8cpp_source.html#l00083">LoopPeel.cpp:83</a></div></div>
<div class="ttc" id="aclassllvm_1_1DomTreeNodeBase_html_aa22cb3ff8c95bb05185acad8c569d4b6"><div class="ttname"><a href="classllvm_1_1DomTreeNodeBase.html#aa22cb3ff8c95bb05185acad8c569d4b6">llvm::DomTreeNodeBase::getIDom</a></div><div class="ttdeci">DomTreeNodeBase * getIDom() const</div><div class="ttdef"><b>Definition:</b> <a href="GenericDomTree_8h_source.html#l00090">GenericDomTree.h:90</a></div></div>
<div class="ttc" id="anamespacellvm_1_1Sched_html_ac1547cccaf660851fcd6863d1e60309ea258d0fc76498bc434cf57e73ea5adbfc"><div class="ttname"><a href="namespacellvm_1_1Sched.html#ac1547cccaf660851fcd6863d1e60309ea258d0fc76498bc434cf57e73ea5adbfc">llvm::Sched::Fast</a></div><div class="ttdeci">@ Fast</div><div class="ttdef"><b>Definition:</b> <a href="TargetLowering_8h_source.html#l00105">TargetLowering.h:105</a></div></div>
<div class="ttc" id="astructWeightInfo_html"><div class="ttname"><a href="structWeightInfo.html">WeightInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="LoopPeel_8cpp_source.html#l00596">LoopPeel.cpp:596</a></div></div>
<div class="ttc" id="aDebug_8h_html_a08efc68d15935eb8889400a46c3749ba"><div class="ttname"><a href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a></div><div class="ttdeci">#define LLVM_DEBUG(X)</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8h_source.html#l00101">Debug.h:101</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopBlocksDFS_html_a003fe6215d300fc9720b1b056cdf4c23"><div class="ttname"><a href="classllvm_1_1LoopBlocksDFS.html#a003fe6215d300fc9720b1b056cdf4c23">llvm::LoopBlocksDFS::beginRPO</a></div><div class="ttdeci">RPOIterator beginRPO() const</div><div class="ttdoc">Reverse iterate over the cached postorder blocks.</div><div class="ttdef"><b>Definition:</b> <a href="LoopIterator_8h_source.html#l00136">LoopIterator.h:136</a></div></div>
<div class="ttc" id="aMD5_8cpp_html_a96d73bbd7af15cb1fc38c3f4a3bd82e9"><div class="ttname"><a href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a></div><div class="ttdeci">#define F(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00055">MD5.cpp:55</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html"><div class="ttname"><a href="classllvm_1_1BasicBlock.html">llvm::BasicBlock</a></div><div class="ttdoc">LLVM Basic Block Representation.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00055">BasicBlock.h:55</a></div></div>
<div class="ttc" id="anamespacellvm_html_a7c46c742c31be54870e2038048e6b391"><div class="ttname"><a href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">llvm::dbgs</a></div><div class="ttdeci">raw_ostream &amp; dbgs()</div><div class="ttdoc">dbgs() - This returns a reference to a raw_ostream for debugging messages.</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8cpp_source.html#l00163">Debug.cpp:163</a></div></div>
<div class="ttc" id="aclassllvm_1_1DominatorTree_html_a5c69311e8d44898dac36a155c3d8691d"><div class="ttname"><a href="classllvm_1_1DominatorTree.html#a5c69311e8d44898dac36a155c3d8691d">llvm::DominatorTree::dominates</a></div><div class="ttdeci">bool dominates(const BasicBlock *BB, const Use &amp;U) const</div><div class="ttdoc">Return true if the (end of the) basic block BB dominates the use U.</div><div class="ttdef"><b>Definition:</b> <a href="Dominators_8cpp_source.html#l00122">Dominators.cpp:122</a></div></div>
<div class="ttc" id="aLoopPeel_8cpp_html_a7f5685c46cf812c90576046af45cd7fa"><div class="ttname"><a href="LoopPeel_8cpp.html#a7f5685c46cf812c90576046af45cd7fa">PeeledCountMetaData</a></div><div class="ttdeci">static const char * PeeledCountMetaData</div><div class="ttdef"><b>Definition:</b> <a href="LoopPeel_8cpp_source.html#l00080">LoopPeel.cpp:80</a></div></div>
<div class="ttc" id="aIR_2Instruction_8h_html"><div class="ttname"><a href="IR_2Instruction_8h.html">Instruction.h</a></div></div>
<div class="ttc" id="aCommandLine_8h_html"><div class="ttname"><a href="CommandLine_8h.html">CommandLine.h</a></div></div>
<div class="ttc" id="aX86PartialReduction_8cpp_html_a9e1483f7215664a2315c53c3558d9a8d"><div class="ttname"><a href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a></div><div class="ttdeci">Value * LHS</div><div class="ttdef"><b>Definition:</b> <a href="X86PartialReduction_8cpp_source.html#l00075">X86PartialReduction.cpp:75</a></div></div>
<div class="ttc" id="astructWeightInfo_html_afcdb4745743d71dcdf4d80b3f6692065"><div class="ttname"><a href="structWeightInfo.html#afcdb4745743d71dcdf4d80b3f6692065">WeightInfo::SubWeights</a></div><div class="ttdeci">const SmallVector&lt; uint32_t &gt; SubWeights</div><div class="ttdef"><b>Definition:</b> <a href="LoopPeel_8cpp_source.html#l00600">LoopPeel.cpp:600</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopBase_html_a62733c3335a87750623dbfc5b3ae4f6c"><div class="ttname"><a href="classllvm_1_1LoopBase.html#a62733c3335a87750623dbfc5b3ae4f6c">llvm::LoopBase::getParentLoop</a></div><div class="ttdeci">LoopT * getParentLoop() const</div><div class="ttdoc">Return the parent loop if it exists or nullptr for top level loops.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00114">LoopInfo.h:114</a></div></div>
<div class="ttc" id="anamespacellvm_html_a0d10fe510ced2849a8074fe81e5d04ce"><div class="ttname"><a href="namespacellvm.html#a0d10fe510ced2849a8074fe81e5d04ce">llvm::all_of</a></div><div class="ttdeci">bool all_of(R &amp;&amp;range, UnaryPredicate P)</div><div class="ttdoc">Provide wrappers to std::all_of which take ranges instead of having to pass begin/end explicitly.</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l01735">STLExtras.h:1735</a></div></div>
<div class="ttc" id="astructllvm_1_1TargetTransformInfo_1_1PeelingPreferences_html_a89c02eecae37f89bf86f71336630858d"><div class="ttname"><a href="structllvm_1_1TargetTransformInfo_1_1PeelingPreferences.html#a89c02eecae37f89bf86f71336630858d">llvm::TargetTransformInfo::PeelingPreferences::PeelProfiledIterations</a></div><div class="ttdeci">bool PeelProfiledIterations</div><div class="ttdoc">Allow peeling basing on profile.</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l00560">TargetTransformInfo.h:560</a></div></div>
<div class="ttc" id="astructWeightInfo_html_a79bc95d0a4dfb8b3f4c7f5da4c72ff8e"><div class="ttname"><a href="structWeightInfo.html#a79bc95d0a4dfb8b3f4c7f5da4c72ff8e">WeightInfo::Weights</a></div><div class="ttdeci">SmallVector&lt; uint32_t &gt; Weights</div><div class="ttdef"><b>Definition:</b> <a href="LoopPeel_8cpp_source.html#l00598">LoopPeel.cpp:598</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a25d956d9e0beadd47ce4bc255dfa811d"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">llvm::PatternMatch::match</a></div><div class="ttdeci">bool match(Val *V, const Pattern &amp;P)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00049">PatternMatch.h:49</a></div></div>
<div class="ttc" id="aLoopPeel_8cpp_html_a7098623cafc05376a44b27d202b03372"><div class="ttname"><a href="LoopPeel_8cpp.html#a7098623cafc05376a44b27d202b03372">countToEliminateCompares</a></div><div class="ttdeci">static unsigned countToEliminateCompares(Loop &amp;L, unsigned MaxPeelCount, ScalarEvolution &amp;SE)</div><div class="ttdef"><b>Definition:</b> <a href="LoopPeel_8cpp_source.html#l00343">LoopPeel.cpp:343</a></div></div>
<div class="ttc" id="aInstrTypes_8h_html"><div class="ttname"><a href="InstrTypes_8h.html">InstrTypes.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1MDBuilder_html_ad910125a9cfd76aaad7f69469df22f66"><div class="ttname"><a href="classllvm_1_1MDBuilder.html#ad910125a9cfd76aaad7f69469df22f66">llvm::MDBuilder::createBranchWeights</a></div><div class="ttdeci">MDNode * createBranchWeights(uint32_t TrueWeight, uint32_t FalseWeight)</div><div class="ttdoc">Return metadata containing two branch weights.</div><div class="ttdef"><b>Definition:</b> <a href="MDBuilder_8cpp_source.html#l00037">MDBuilder.cpp:37</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PPC_html_a0126350f85e64bcbddb8454a888b0b69"><div class="ttname"><a href="namespacellvm_1_1PPC.html#a0126350f85e64bcbddb8454a888b0b69">llvm::PPC::getSwappedPredicate</a></div><div class="ttdeci">Predicate getSwappedPredicate(Predicate Opcode)</div><div class="ttdoc">Assume the condition register is set by MI(a,b), return the predicate if we modify the instructions s...</div><div class="ttdef"><b>Definition:</b> <a href="PPCPredicates_8cpp_source.html#l00052">PPCPredicates.cpp:52</a></div></div>
<div class="ttc" id="aLoopPeel_8cpp_html_a268021156ce360927a6b4211e64fd0ee"><div class="ttname"><a href="LoopPeel_8cpp.html#a268021156ce360927a6b4211e64fd0ee">UnrollForcePeelCount</a></div><div class="ttdeci">static cl::opt&lt; unsigned &gt; UnrollForcePeelCount(&quot;unroll-force-peel-count&quot;, cl::init(0), cl::Hidden, cl::desc(&quot;Force a peel count regardless of profiling information.&quot;))</div></div>
<div class="ttc" id="anamespacellvm_html_afe8e2e0edcd7756ff5985b8798270c5d"><div class="ttname"><a href="namespacellvm.html#afe8e2e0edcd7756ff5985b8798270c5d">llvm::cloneLoop</a></div><div class="ttdeci">Loop * cloneLoop(Loop *L, Loop *PL, ValueToValueMapTy &amp;VM, LoopInfo *LI, LPPassManager *LPM)</div><div class="ttdoc">Recursively clone the specified loop and all of its children, mapping the blocks with the specified m...</div><div class="ttdef"><b>Definition:</b> <a href="LoopUtils_8cpp_source.html#l01541">LoopUtils.cpp:1541</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopBase_html_a40f34cc77d2b3bc73384f535c8101858"><div class="ttname"><a href="classllvm_1_1LoopBase.html#a40f34cc77d2b3bc73384f535c8101858">llvm::LoopBase::blocks</a></div><div class="ttdeci">iterator_range&lt; block_iterator &gt; blocks() const</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00195">LoopInfo.h:195</a></div></div>
<div class="ttc" id="aclassllvm_1_1PHINode_html_adfb61ffe25c950c75c86310245b3ef39"><div class="ttname"><a href="classllvm_1_1PHINode.html#adfb61ffe25c950c75c86310245b3ef39">llvm::PHINode::getIncomingValueForBlock</a></div><div class="ttdeci">Value * getIncomingValueForBlock(const BasicBlock *BB) const</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02889">Instructions.h:2889</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopBase_html_a5cc113cb783ab6e5ca7b69241431c19c"><div class="ttname"><a href="classllvm_1_1LoopBase.html#a5cc113cb783ab6e5ca7b69241431c19c">llvm::LoopBase::getBlocks</a></div><div class="ttdeci">ArrayRef&lt; BlockT * &gt; getBlocks() const</div><div class="ttdoc">Get a list of the basic blocks which make up this loop.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00188">LoopInfo.h:188</a></div></div>
<div class="ttc" id="aclassllvm_1_1ScalarEvolution_html_a60a56343d06195ae01b61d087e672afd"><div class="ttname"><a href="classllvm_1_1ScalarEvolution.html#a60a56343d06195ae01b61d087e672afd">llvm::ScalarEvolution::isKnownPredicate</a></div><div class="ttdeci">bool isKnownPredicate(ICmpInst::Predicate Pred, const SCEV *LHS, const SCEV *RHS)</div><div class="ttdoc">Test if the given expression is known to satisfy the condition described by Pred, LHS,...</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8cpp_source.html#l10904">ScalarEvolution.cpp:10904</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html"><div class="ttname"><a href="classllvm_1_1Instruction.html">llvm::Instruction</a></div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00041">Instruction.h:41</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopBlocksDFS_html_aeebda6b0288bea7cd706111624ca73f6"><div class="ttname"><a href="classllvm_1_1LoopBlocksDFS.html#aeebda6b0288bea7cd706111624ca73f6">llvm::LoopBlocksDFS::endRPO</a></div><div class="ttdeci">RPOIterator endRPO() const</div><div class="ttdef"><b>Definition:</b> <a href="LoopIterator_8h_source.html#l00140">LoopIterator.h:140</a></div></div>
<div class="ttc" id="aMDBuilder_8h_html"><div class="ttname"><a href="MDBuilder_8h.html">MDBuilder.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a72516971c5734dc0f7546e64affca425"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a72516971c5734dc0f7546e64affca425">llvm::BasicBlock::phis</a></div><div class="ttdeci">iterator_range&lt; const_phi_iterator &gt; phis() const</div><div class="ttdoc">Returns a range that iterates over the phis in the basic block.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00372">BasicBlock.h:372</a></div></div>
<div class="ttc" id="anamespacellvm_html_a0bf75467957937ad23ad7be19f489934"><div class="ttname"><a href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">llvm::STATISTIC</a></div><div class="ttdeci">STATISTIC(NumFunctions, &quot;Total number of functions&quot;)</div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_a35ee267850af7c235474a8c46c7ac5af"><div class="ttname"><a href="classllvm_1_1Value.html#a35ee267850af7c235474a8c46c7ac5af">llvm::Value::setName</a></div><div class="ttdeci">void setName(const Twine &amp;Name)</div><div class="ttdoc">Change the name of the value.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00375">Value.cpp:375</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopBase_html_a46880fab7a9d5bd439725f2acc59b80d"><div class="ttname"><a href="classllvm_1_1LoopBase.html#a46880fab7a9d5bd439725f2acc59b80d">llvm::LoopBase::getExitingBlocks</a></div><div class="ttdeci">void getExitingBlocks(SmallVectorImpl&lt; BlockT * &gt; &amp;ExitingBlocks) const</div><div class="ttdoc">Return all blocks inside the loop that have successors outside of the loop.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfoImpl_8h_source.html#l00033">LoopInfoImpl.h:33</a></div></div>
<div class="ttc" id="aclassllvm_1_1cl_1_1Option_html_a2dc75fafb68e7669e776e19da7857cdf"><div class="ttname"><a href="classllvm_1_1cl_1_1Option.html#a2dc75fafb68e7669e776e19da7857cdf">llvm::cl::Option::getNumOccurrences</a></div><div class="ttdeci">int getNumOccurrences() const</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00401">CommandLine.h:401</a></div></div>
<div class="ttc" id="aLoopUtils_8h_html"><div class="ttname"><a href="LoopUtils_8h.html">LoopUtils.h</a></div></div>
<div class="ttc" id="aCSEInfo_8cpp_html_a75f8a8519c2c9b30e7c06dc5e256fffa"><div class="ttname"><a href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a></div><div class="ttdeci">Analysis containing CSE Info</div><div class="ttdef"><b>Definition:</b> <a href="CSEInfo_8cpp_source.html#l00027">CSEInfo.cpp:27</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_afc70e919c88c86159cc94cea29b6c210"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#afc70e919c88c86159cc94cea29b6c210">llvm::BasicBlock::getModule</a></div><div class="ttdeci">const Module * getModule() const</div><div class="ttdoc">Return the module owning the function this basic block belongs to, or nullptr if the function does no...</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00146">BasicBlock.cpp:146</a></div></div>
<div class="ttc" id="aclassllvm_1_1DominatorTreeBase_html_a2881c226e1c102190d54c3b664330aba"><div class="ttname"><a href="classllvm_1_1DominatorTreeBase.html#a2881c226e1c102190d54c3b664330aba">llvm::DominatorTreeBase::changeImmediateDominator</a></div><div class="ttdeci">void changeImmediateDominator(DomTreeNodeBase&lt; NodeT &gt; *N, DomTreeNodeBase&lt; NodeT &gt; *NewIDom)</div><div class="ttdoc">changeImmediateDominator - This method is used to update the dominator tree information when a node's...</div><div class="ttdef"><b>Definition:</b> <a href="GenericDomTree_8h_source.html#l00672">GenericDomTree.h:672</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopBase_html_adf6f53d7652b471c995b7d10f3dd2729"><div class="ttname"><a href="classllvm_1_1LoopBase.html#adf6f53d7652b471c995b7d10f3dd2729">llvm::LoopBase::getExitingBlock</a></div><div class="ttdeci">BlockT * getExitingBlock() const</div><div class="ttdoc">If getExitingBlocks would return exactly one block, return that block.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfoImpl_8h_source.html#l00048">LoopInfoImpl.h:48</a></div></div>
<div class="ttc" id="aPatternMatch_8h_html"><div class="ttname"><a href="PatternMatch_8h.html">PatternMatch.h</a></div></div>
<div class="ttc" id="aLoopIterator_8h_html"><div class="ttname"><a href="LoopIterator_8h.html">LoopIterator.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_afdb3eec2f46233c924c30c0838a3c8fe"><div class="ttname"><a href="namespacellvm.html#afdb3eec2f46233c924c30c0838a3c8fe">llvm::peelLoop</a></div><div class="ttdeci">bool peelLoop(Loop *L, unsigned PeelCount, LoopInfo *LI, ScalarEvolution *SE, DominatorTree &amp;DT, AssumptionCache *AC, bool PreserveLCSSA, ValueToValueMapTy &amp;VMap)</div><div class="ttdoc">VMap is the value-map that maps instructions from the original loop to instructions in the last peele...</div><div class="ttdef"><b>Definition:</b> <a href="LoopPeel_8cpp_source.html#l00855">LoopPeel.cpp:855</a></div></div>
<div class="ttc" id="aLoopInfo_8h_html"><div class="ttname"><a href="LoopInfo_8h.html">LoopInfo.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1ScalarEvolution_html_a30bd18ac905eacf3601bc6a553a9ff49"><div class="ttname"><a href="classllvm_1_1ScalarEvolution.html#a30bd18ac905eacf3601bc6a553a9ff49">llvm::ScalarEvolution::getSCEV</a></div><div class="ttdeci">const SCEV * getSCEV(Value *V)</div><div class="ttdoc">Return a SCEV expression for the full generality of the specified expression.</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8cpp_source.html#l04534">ScalarEvolution.cpp:4534</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopBlocksDFS_html_a0c1bb1134650f3f69f5921d57fb50b78"><div class="ttname"><a href="classllvm_1_1LoopBlocksDFS.html#a0c1bb1134650f3f69f5921d57fb50b78">llvm::LoopBlocksDFS::RPOIterator</a></div><div class="ttdeci">std::vector&lt; BasicBlock * &gt;::const_reverse_iterator RPOIterator</div><div class="ttdef"><b>Definition:</b> <a href="LoopIterator_8h_source.html#l00101">LoopIterator.h:101</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopBlocksDFS_html"><div class="ttname"><a href="classllvm_1_1LoopBlocksDFS.html">llvm::LoopBlocksDFS</a></div><div class="ttdoc">Store the result of a depth first search within basic blocks contained by a single loop.</div><div class="ttdef"><b>Definition:</b> <a href="LoopIterator_8h_source.html#l00097">LoopIterator.h:97</a></div></div>
<div class="ttc" id="anamespacellvm_html_ab7abd0e34c17dcb201a4138dc65cc067"><div class="ttname"><a href="namespacellvm.html#ab7abd0e34c17dcb201a4138dc65cc067">llvm::cloneAndAdaptNoAliasScopes</a></div><div class="ttdeci">void cloneAndAdaptNoAliasScopes(ArrayRef&lt; MDNode * &gt; NoAliasDeclScopes, ArrayRef&lt; BasicBlock * &gt; NewBlocks, LLVMContext &amp;Context, StringRef Ext)</div><div class="ttdoc">Clone the specified noalias decl scopes.</div><div class="ttdef"><b>Definition:</b> <a href="CloneFunction_8cpp_source.html#l01143">CloneFunction.cpp:1143</a></div></div>
<div class="ttc" id="aclassllvm_1_1ScalarEvolution_html_a4cd909a15a97a10de847579ea5e9f46a"><div class="ttname"><a href="classllvm_1_1ScalarEvolution.html#a4cd909a15a97a10de847579ea5e9f46a">llvm::ScalarEvolution::evaluatePredicate</a></div><div class="ttdeci">std::optional&lt; bool &gt; evaluatePredicate(ICmpInst::Predicate Pred, const SCEV *LHS, const SCEV *RHS)</div><div class="ttdoc">Check whether the condition described by Pred, LHS, and RHS is true or false.</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8cpp_source.html#l10919">ScalarEvolution.cpp:10919</a></div></div>
<div class="ttc" id="aclassllvm_1_1Loop_html_ac233a2693163ed58305215ca2f6921e3"><div class="ttname"><a href="classllvm_1_1Loop.html#ac233a2693163ed58305215ca2f6921e3">llvm::Loop::isLoopSimplifyForm</a></div><div class="ttdeci">bool isLoopSimplifyForm() const</div><div class="ttdoc">Return true if the Loop is in the form that the LoopSimplify form transforms loops to,...</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8cpp_source.html#l00479">LoopInfo.cpp:479</a></div></div>
<div class="ttc" id="anamespacellvm_html_a6befe133f42d6a8e07ba98372d7f9c60"><div class="ttname"><a href="namespacellvm.html#a6befe133f42d6a8e07ba98372d7f9c60">llvm::CloneBasicBlock</a></div><div class="ttdeci">BasicBlock * CloneBasicBlock(const BasicBlock *BB, ValueToValueMapTy &amp;VMap, const Twine &amp;NameSuffix=&quot;&quot;, Function *F=nullptr, ClonedCodeInfo *CodeInfo=nullptr, DebugInfoFinder *DIFinder=nullptr)</div><div class="ttdoc">Return a copy of the specified basic block, but without embedding the block into a particular functio...</div><div class="ttdef"><b>Definition:</b> <a href="CloneFunction_8cpp_source.html#l00042">CloneFunction.cpp:42</a></div></div>
<div class="ttc" id="aBasicBlock_8h_html"><div class="ttname"><a href="BasicBlock_8h.html">BasicBlock.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1cl_1_1opt_html"><div class="ttname"><a href="classllvm_1_1cl_1_1opt.html">llvm::cl::opt</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l01410">CommandLine.h:1410</a></div></div>
<div class="ttc" id="aclassllvm_1_1SCEV_html"><div class="ttname"><a href="classllvm_1_1SCEV.html">llvm::SCEV</a></div><div class="ttdoc">This class represents an analyzed expression in the program.</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8h_source.html#l00075">ScalarEvolution.h:75</a></div></div>
<div class="ttc" id="anamespacellvm_1_1MipsISD_html_a422daf9aa810935178671306b651d69ba88a797f57846adb2c382b3732b471913"><div class="ttname"><a href="namespacellvm_1_1MipsISD.html#a422daf9aa810935178671306b651d69ba88a797f57846adb2c382b3732b471913">llvm::MipsISD::Ext</a></div><div class="ttdeci">@ Ext</div><div class="ttdef"><b>Definition:</b> <a href="MipsISelLowering_8h_source.html#l00159">MipsISelLowering.h:159</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSetImpl_html_a153ea412ff7a0ba105111155d1e16128"><div class="ttname"><a href="classllvm_1_1SmallPtrSetImpl.html#a153ea412ff7a0ba105111155d1e16128">llvm::SmallPtrSetImpl::find</a></div><div class="ttdeci">iterator find(ConstPtrType Ptr) const</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00386">SmallPtrSet.h:386</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_ae6b978645b8ac72d1a35e1298ffdd4f0"><div class="ttname"><a href="classllvm_1_1Instruction.html#ae6b978645b8ac72d1a35e1298ffdd4f0">llvm::Instruction::eraseFromParent</a></div><div class="ttdeci">SymbolTableList&lt; Instruction &gt;::iterator eraseFromParent()</div><div class="ttdoc">This method unlinks 'this' from the containing basic block and deletes it.</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8cpp_source.html#l00082">Instruction.cpp:82</a></div></div>
<div class="ttc" id="aclassllvm_1_1DomTreeNodeBase_html_a6a15a030098342e06ea73e1241d614c9"><div class="ttname"><a href="classllvm_1_1DomTreeNodeBase.html#a6a15a030098342e06ea73e1241d614c9">llvm::DomTreeNodeBase::getBlock</a></div><div class="ttdeci">NodeT * getBlock() const</div><div class="ttdef"><b>Definition:</b> <a href="GenericDomTree_8h_source.html#l00089">GenericDomTree.h:89</a></div></div>
<div class="ttc" id="anamespacellvm_1_1pdb_html_a434cfa04e4ed34b7a901378557d4ca9eab5923ebc864d1679cf1c3a929c122037"><div class="ttname"><a href="namespacellvm_1_1pdb.html#a434cfa04e4ed34b7a901378557d4ca9eab5923ebc864d1679cf1c3a929c122037">llvm::pdb::Unknown</a></div><div class="ttdeci">@ Unknown</div><div class="ttdef"><b>Definition:</b> <a href="PDBTypes_8h_source.html#l00396">PDBTypes.h:396</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSetImpl_html_a7004354fbee1c8cd74ed9001915e1db5"><div class="ttname"><a href="classllvm_1_1SmallPtrSetImpl.html#a7004354fbee1c8cd74ed9001915e1db5">llvm::SmallPtrSetImpl::end</a></div><div class="ttdeci">iterator end() const</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00408">SmallPtrSet.h:408</a></div></div>
<div class="ttc" id="anamespacellvm_html_a55c9054d63d1c6a39e9c09ba13a482fa"><div class="ttname"><a href="namespacellvm.html#a55c9054d63d1c6a39e9c09ba13a482fa">llvm::addStringMetadataToLoop</a></div><div class="ttdeci">void addStringMetadataToLoop(Loop *TheLoop, const char *MDString, unsigned V=0)</div><div class="ttdoc">Set input string into loop metadata by keeping other values intact.</div><div class="ttdef"><b>Definition:</b> <a href="LoopUtils_8cpp_source.html#l00214">LoopUtils.cpp:214</a></div></div>
<div class="ttc" id="alib_2Target_2ARM_2README_8txt_html_ad3a99906764c35b2694ae90fa57744a5"><div class="ttname"><a href="lib_2Target_2ARM_2README_8txt.html#ad3a99906764c35b2694ae90fa57744a5">move</a></div><div class="ttdeci">compiles ldr LCPI1_0 ldr ldr mov lsr tst moveq r1 ldr LCPI1_1 and r0 bx lr It would be better to do something like to fold the shift into the conditional move</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2ARM_2README_8txt_source.html#l00546">README.txt:546</a></div></div>
<div class="ttc" id="aProfDataUtils_8h_html"><div class="ttname"><a href="ProfDataUtils_8h.html">ProfDataUtils.h</a></div></div>
<div class="ttc" id="anamespacellvm_1_1numbers_html_a92f4283d4e0e2ea1776894b3ae93640f"><div class="ttname"><a href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">llvm::numbers::e</a></div><div class="ttdeci">constexpr double e</div><div class="ttdef"><b>Definition:</b> <a href="MathExtras_8h_source.html#l00031">MathExtras.h:31</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseMap_html"><div class="ttname"><a href="classllvm_1_1DenseMap.html">llvm::DenseMap</a></div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00714">DenseMap.h:714</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopInfoBase_html_a7a7c8e0e4f836c13c015b62e18f386bd"><div class="ttname"><a href="classllvm_1_1LoopInfoBase.html#a7a7c8e0e4f836c13c015b62e18f386bd">llvm::LoopInfoBase::getLoopFor</a></div><div class="ttdeci">LoopT * getLoopFor(const BlockT *BB) const</div><div class="ttdoc">Return the inner most loop that BB lives in.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00992">LoopInfo.h:992</a></div></div>
<div class="ttc" id="aMD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00058">MD5.cpp:58</a></div></div>
<div class="ttc" id="aCloning_8h_html"><div class="ttname"><a href="Cloning_8h.html">Cloning.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1SCEVNAryExpr_html_a6429bca8fd0024ceb2d76ccaace43c4e"><div class="ttname"><a href="classllvm_1_1SCEVNAryExpr.html#a6429bca8fd0024ceb2d76ccaace43c4e">llvm::SCEVNAryExpr::hasNoSelfWrap</a></div><div class="ttdeci">bool hasNoSelfWrap() const</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolutionExpressions_8h_source.html#l00217">ScalarEvolutionExpressions.h:217</a></div></div>
<div class="ttc" id="anamespacellvm_1_1cl_html_a10a041239ae1870cfcc064bfaa79fb65"><div class="ttname"><a href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">llvm::cl::init</a></div><div class="ttdeci">initializer&lt; Ty &gt; init(const Ty &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00445">CommandLine.h:445</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopBase_html_ac3280e7f76f955403fe17eacf126b90d"><div class="ttname"><a href="classllvm_1_1LoopBase.html#ac3280e7f76f955403fe17eacf126b90d">llvm::LoopBase::getLoopPreheader</a></div><div class="ttdeci">BlockT * getLoopPreheader() const</div><div class="ttdoc">If there is a preheader for this loop, return it.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfoImpl_8h_source.html#l00183">LoopInfoImpl.h:183</a></div></div>
<div class="ttc" id="aclassllvm_1_1ScalarEvolution_html_a804545e5b568edec8b970da32cd37359"><div class="ttname"><a href="classllvm_1_1ScalarEvolution.html#a804545e5b568edec8b970da32cd37359">llvm::ScalarEvolution::forgetValue</a></div><div class="ttdeci">void forgetValue(Value *V)</div><div class="ttdoc">This method should be called by the client when it has changed a value in a way that may effect its v...</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8cpp_source.html#l08523">ScalarEvolution.cpp:8523</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopBlocksDFS_html_ab38fc97602eaec1838f2b86624001ae1"><div class="ttname"><a href="classllvm_1_1LoopBlocksDFS.html#ab38fc97602eaec1838f2b86624001ae1">llvm::LoopBlocksDFS::perform</a></div><div class="ttdeci">void perform(LoopInfo *LI)</div><div class="ttdoc">Traverse the loop blocks and store the DFS result.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8cpp_source.html#l01222">LoopInfo.cpp:1222</a></div></div>
<div class="ttc" id="astructllvm_1_1TargetTransformInfo_1_1PeelingPreferences_html_a71809834780876145831c63077461284"><div class="ttname"><a href="structllvm_1_1TargetTransformInfo_1_1PeelingPreferences.html#a71809834780876145831c63077461284">llvm::TargetTransformInfo::PeelingPreferences::AllowLoopNestsPeeling</a></div><div class="ttdeci">bool AllowLoopNestsPeeling</div><div class="ttdoc">Allow peeling off loop iterations for loop nests.</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l00555">TargetTransformInfo.h:555</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopBase_html_a1230fd674d2609b96527fe65eaf40b1b"><div class="ttname"><a href="classllvm_1_1LoopBase.html#a1230fd674d2609b96527fe65eaf40b1b">llvm::LoopBase::getLoopLatch</a></div><div class="ttdeci">BlockT * getLoopLatch() const</div><div class="ttdoc">If there is a single latch block for this loop, return it.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfoImpl_8h_source.html#l00232">LoopInfoImpl.h:232</a></div></div>
<div class="ttc" id="aSILowerControlFlow_8cpp_html_a4868c5d81c5ccc98c47aeab6244346a0"><div class="ttname"><a href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a></div><div class="ttdeci">assert(ImpDefSCC.getReg()==AMDGPU::SCC &amp;&amp;ImpDefSCC.isDef())</div></div>
<div class="ttc" id="anamespacestd_html_ab8424022895aee3e366fb9a32f2883cb"><div class="ttname"><a href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a></div><div class="ttdeci">void swap(llvm::BitVector &amp;LHS, llvm::BitVector &amp;RHS)</div><div class="ttdoc">Implement std::swap in terms of BitVector swap.</div><div class="ttdef"><b>Definition:</b> <a href="BitVector_8h_source.html#l00853">BitVector.h:853</a></div></div>
<div class="ttc" id="aTargetLibraryInfo_8cpp_html_aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053"><div class="ttname"><a href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a></div><div class="ttdeci">@ Ptr</div><div class="ttdef"><b>Definition:</b> <a href="TargetLibraryInfo_8cpp_source.html#l00062">TargetLibraryInfo.cpp:62</a></div></div>
<div class="ttc" id="aclassllvm_1_1ScalarEvolution_html_a7d5bfa1ac3c7c096af6b26fb95cd699d"><div class="ttname"><a href="classllvm_1_1ScalarEvolution.html#a7d5bfa1ac3c7c096af6b26fb95cd699d">llvm::ScalarEvolution::forgetTopmostLoop</a></div><div class="ttdeci">void forgetTopmostLoop(const Loop *L)</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8cpp_source.html#l08519">ScalarEvolution.cpp:8519</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a24bca8838396aa81b87de8e7ac774b19"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">llvm::PatternMatch::m_Value</a></div><div class="ttdeci">class_match&lt; Value &gt; m_Value()</div><div class="ttdoc">Match an arbitrary value and ignore it.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00076">PatternMatch.h:76</a></div></div>
<div class="ttc" id="astructllvm_1_1TargetTransformInfo_1_1PeelingPreferences_html_a93102207c7c9430df6ef02447446de9b"><div class="ttname"><a href="structllvm_1_1TargetTransformInfo_1_1PeelingPreferences.html#a93102207c7c9430df6ef02447446de9b">llvm::TargetTransformInfo::PeelingPreferences::PeelCount</a></div><div class="ttdeci">unsigned PeelCount</div><div class="ttdoc">A forced peeling factor (the number of bodied of the original loop that should be peeled off before t...</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l00551">TargetTransformInfo.h:551</a></div></div>
<div class="ttc" id="anamespacellvm_html_a9b3cfe2d1603665824476c30368b8eb1"><div class="ttname"><a href="namespacellvm.html#a9b3cfe2d1603665824476c30368b8eb1">llvm::getOptionalIntLoopAttribute</a></div><div class="ttdeci">std::optional&lt; int &gt; getOptionalIntLoopAttribute(const Loop *TheLoop, StringRef Name)</div><div class="ttdoc">Find named metadata for a loop with an integer value.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8cpp_source.html#l01089">LoopInfo.cpp:1089</a></div></div>
<div class="ttc" id="aclassllvm_1_1ArrayRef_html"><div class="ttname"><a href="classllvm_1_1ArrayRef.html">llvm::ArrayRef</a></div><div class="ttdoc">ArrayRef - Represent a constant reference to an array (0 or more elements consecutively in memory),...</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00033">APInt.h:33</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopInfo_html"><div class="ttname"><a href="classllvm_1_1LoopInfo.html">llvm::LoopInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l01108">LoopInfo.h:1108</a></div></div>
<div class="ttc" id="aclassllvm_1_1ScalarEvolution_html_aa92b3e6375805368f9a24cf69ce73797"><div class="ttname"><a href="classllvm_1_1ScalarEvolution.html#aa92b3e6375805368f9a24cf69ce73797">llvm::ScalarEvolution::getMonotonicPredicateType</a></div><div class="ttdeci">std::optional&lt; MonotonicPredicateType &gt; getMonotonicPredicateType(const SCEVAddRecExpr *LHS, ICmpInst::Predicate Pred)</div><div class="ttdoc">If, for all loop invariant X, the predicate &quot;LHS `Pred` X&quot; is monotonically increasing or decreasing,...</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8cpp_source.html#l10962">ScalarEvolution.cpp:10962</a></div></div>
<div class="ttc" id="anamespacellvm_html_a57f2ca0e57f4f7b13f56f9aa16af3e0d"><div class="ttname"><a href="namespacellvm.html#a57f2ca0e57f4f7b13f56f9aa16af3e0d">llvm::min</a></div><div class="ttdeci">Expected&lt; ExpressionValue &gt; min(const ExpressionValue &amp;Lhs, const ExpressionValue &amp;Rhs)</div><div class="ttdef"><b>Definition:</b> <a href="FileCheck_8cpp_source.html#l00357">FileCheck.cpp:357</a></div></div>
<div class="ttc" id="anamespacellvm_html_a61d13d6824ec46c31260a4fd0997eda0"><div class="ttname"><a href="namespacellvm.html#a61d13d6824ec46c31260a4fd0997eda0">llvm::any_of</a></div><div class="ttdeci">bool any_of(R &amp;&amp;range, UnaryPredicate P)</div><div class="ttdoc">Provide wrappers to std::any_of which take ranges instead of having to pass begin/end explicitly.</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l01742">STLExtras.h:1742</a></div></div>
<div class="ttc" id="anamespacellvm_html_abf1028e2af158aae1e00d3288ca013bb"><div class="ttname"><a href="namespacellvm.html#abf1028e2af158aae1e00d3288ca013bb">llvm::isDereferenceablePointer</a></div><div class="ttdeci">bool isDereferenceablePointer(const Value *V, Type *Ty, const DataLayout &amp;DL, const Instruction *CtxI=nullptr, AssumptionCache *AC=nullptr, const DominatorTree *DT=nullptr, const TargetLibraryInfo *TLI=nullptr)</div><div class="ttdoc">Return true if this is always a dereferenceable pointer.</div><div class="ttdef"><b>Definition:</b> <a href="Loads_8cpp_source.html#l00221">Loads.cpp:221</a></div></div>
<div class="ttc" id="anamespacellvm_html_ade9551bcb1121539a279452fec71f9eb"><div class="ttname"><a href="namespacellvm.html#ade9551bcb1121539a279452fec71f9eb">llvm::identifyNoAliasScopesToClone</a></div><div class="ttdeci">void identifyNoAliasScopesToClone(ArrayRef&lt; BasicBlock * &gt; BBs, SmallVectorImpl&lt; MDNode * &gt; &amp;NoAliasDeclScopes)</div><div class="ttdoc">Find the 'llvm.experimental.noalias.scope.decl' intrinsics in the specified basic blocks and extract ...</div><div class="ttdef"><b>Definition:</b> <a href="CloneFunction_8cpp_source.html#l01180">CloneFunction.cpp:1180</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_ae959364e4640ac025bbc046d3d7c7e61"><div class="ttname"><a href="classllvm_1_1Instruction.html#ae959364e4640ac025bbc046d3d7c7e61">llvm::Instruction::setSuccessor</a></div><div class="ttdeci">void setSuccessor(unsigned Idx, BasicBlock *BB)</div><div class="ttdoc">Update the specified successor to point at the provided block.</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8cpp_source.html#l00847">Instruction.cpp:847</a></div></div>
<div class="ttc" id="aclassllvm_1_1AssumptionCache_html"><div class="ttname"><a href="classllvm_1_1AssumptionCache.html">llvm::AssumptionCache</a></div><div class="ttdoc">A cache of @llvm.assume calls within a function.</div><div class="ttdef"><b>Definition:</b> <a href="AssumptionCache_8h_source.html#l00042">AssumptionCache.h:42</a></div></div>
<div class="ttc" id="aclassllvm_1_1ScalarEvolution_html_a2eb94d079d8416118f4aaed865ab05d7"><div class="ttname"><a href="classllvm_1_1ScalarEvolution.html#a2eb94d079d8416118f4aaed865ab05d7">llvm::ScalarEvolution::getConstant</a></div><div class="ttdeci">const SCEV * getConstant(ConstantInt *V)</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8cpp_source.html#l00497">ScalarEvolution.cpp:497</a></div></div>
<div class="ttc" id="aLoopPeel_8cpp_html_aeaa705f6e8562e660e7d8401a8d49b5e"><div class="ttname"><a href="LoopPeel_8cpp.html#aeaa705f6e8562e660e7d8401a8d49b5e">UnrollAllowLoopNestsPeeling</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; UnrollAllowLoopNestsPeeling(&quot;unroll-allow-loop-nests-peeling&quot;, cl::init(false), cl::Hidden, cl::desc(&quot;Allows loop nests to be peeled.&quot;))</div></div>
<div class="ttc" id="aclassuint32__t_html"><div class="ttname"><a href="classuint32__t.html">uint32_t</a></div></div>
<div class="ttc" id="aclassllvm_1_1ilist__node__impl_html_af719fc783be6589465137d997701a432"><div class="ttname"><a href="classllvm_1_1ilist__node__impl.html#af719fc783be6589465137d997701a432">llvm::ilist_node_impl::getIterator</a></div><div class="ttdeci">self_iterator getIterator()</div><div class="ttdef"><b>Definition:</b> <a href="ilist__node_8h_source.html#l00082">ilist_node.h:82</a></div></div>
<div class="ttc" id="aAArch64SLSHardening_8cpp_html_ad467c4ab9119043f9b7750ab986be61a"><div class="ttname"><a href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a></div><div class="ttdeci">MachineBasicBlock MachineBasicBlock::iterator DebugLoc DL</div><div class="ttdef"><b>Definition:</b> <a href="AArch64SLSHardening_8cpp_source.html#l00076">AArch64SLSHardening.cpp:76</a></div></div>
<div class="ttc" id="anamespacellvm_html_a6e86d0ac2e968adc60290ca52da02e42"><div class="ttname"><a href="namespacellvm.html#a6e86d0ac2e968adc60290ca52da02e42">llvm::gatherPeelingPreferences</a></div><div class="ttdeci">TargetTransformInfo::PeelingPreferences gatherPeelingPreferences(Loop *L, ScalarEvolution &amp;SE, const TargetTransformInfo &amp;TTI, std::optional&lt; bool &gt; UserAllowPeeling, std::optional&lt; bool &gt; UserAllowProfileBasedPeeling, bool UnrollingSpecficValues=false)</div><div class="ttdef"><b>Definition:</b> <a href="LoopPeel_8cpp_source.html#l00811">LoopPeel.cpp:811</a></div></div>
<div class="ttc" id="aLoopPeel_8cpp_html_a5714fa22836848b9d701fa0a7dca1c2e"><div class="ttname"><a href="LoopPeel_8cpp.html#a5714fa22836848b9d701fa0a7dca1c2e">UnrollAllowPeeling</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; UnrollAllowPeeling(&quot;unroll-allow-peeling&quot;, cl::init(true), cl::Hidden, cl::desc(&quot;Allows loops to be peeled when the dynamic &quot; &quot;trip count is known to be low.&quot;))</div></div>
<div class="ttc" id="aclassllvm_1_1DomTreeNodeBase_html"><div class="ttname"><a href="classllvm_1_1DomTreeNodeBase.html">llvm::DomTreeNodeBase&lt; BasicBlock &gt;</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_adb5c319f5905c1d3ca9eb5df546388c5"><div class="ttname"><a href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">llvm::Value::getName</a></div><div class="ttdeci">StringRef getName() const</div><div class="ttdoc">Return a constant reference to the value's name.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00308">Value.cpp:308</a></div></div>
<div class="ttc" id="aclassllvm_1_1ValueMap_html"><div class="ttname"><a href="classllvm_1_1ValueMap.html">llvm::ValueMap&lt; const Value *, WeakTrackingVH &gt;</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseMapBase_html_a99f811d53704275b4158c62a2dd138d9"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#a99f811d53704275b4158c62a2dd138d9">llvm::DenseMapBase&lt; DenseMap&lt; KeyT, ValueT, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;, KeyT, ValueT, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;::insert</a></div><div class="ttdeci">std::pair&lt; iterator, bool &gt; insert(const std::pair&lt; KeyT, ValueT &gt; &amp;KV)</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00207">DenseMap.h:207</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopBase_html_aed67883fd0d5f8356bb709b4d16ebe70"><div class="ttname"><a href="classllvm_1_1LoopBase.html#aed67883fd0d5f8356bb709b4d16ebe70">llvm::LoopBase::getUniqueNonLatchExitBlocks</a></div><div class="ttdeci">void getUniqueNonLatchExitBlocks(SmallVectorImpl&lt; BlockT * &gt; &amp;ExitBlocks) const</div><div class="ttdoc">Return all unique successor blocks of this loop except successors from Latch block are not considered...</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfoImpl_8h_source.html#l00149">LoopInfoImpl.h:149</a></div></div>
<div class="ttc" id="aclassllvm_1_1DominatorTreeBase_html_a4d417f72d43729d07de3b3d2f58893cc"><div class="ttname"><a href="classllvm_1_1DominatorTreeBase.html#a4d417f72d43729d07de3b3d2f58893cc">llvm::DominatorTreeBase::addNewBlock</a></div><div class="ttdeci">DomTreeNodeBase&lt; NodeT &gt; * addNewBlock(NodeT *BB, NodeT *DomBB)</div><div class="ttdoc">Add a new node to the dominator tree information.</div><div class="ttdef"><b>Definition:</b> <a href="GenericDomTree_8h_source.html#l00636">GenericDomTree.h:636</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopBase_html_a16165c1e5da45acaa086c3a54a188d34"><div class="ttname"><a href="classllvm_1_1LoopBase.html#a16165c1e5da45acaa086c3a54a188d34">llvm::LoopBase::isInnermost</a></div><div class="ttdeci">bool isInnermost() const</div><div class="ttdoc">Return true if the loop does not contain any (natural) loops.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00182">LoopInfo.h:182</a></div></div>
<div class="ttc" id="anamespacellvm_html_adf83581f514774264d616eef5706cf6e"><div class="ttname"><a href="namespacellvm.html#adf83581f514774264d616eef5706cf6e">llvm::SplitEdge</a></div><div class="ttdeci">BasicBlock * SplitEdge(BasicBlock *From, BasicBlock *To, DominatorTree *DT=nullptr, LoopInfo *LI=nullptr, MemorySSAUpdater *MSSAU=nullptr, const Twine &amp;BBName=&quot;&quot;)</div><div class="ttdoc">Split the edge connecting the specified blocks, and return the newly created basic block between From...</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlockUtils_8cpp_source.html#l00615">BasicBlockUtils.cpp:615</a></div></div>
<div class="ttc" id="aclassllvm_1_1Twine_html"><div class="ttname"><a href="classllvm_1_1Twine.html">llvm::Twine</a></div><div class="ttdoc">Twine - A lightweight data structure for efficiently representing the concatenation of temporary valu...</div><div class="ttdef"><b>Definition:</b> <a href="Twine_8h_source.html#l00081">Twine.h:81</a></div></div>
<div class="ttc" id="aLoopPeel_8cpp_html_ac937a3fd995e7397be78d706199e61c0"><div class="ttname"><a href="LoopPeel_8cpp.html#ac937a3fd995e7397be78d706199e61c0">fixupBranchWeights</a></div><div class="ttdeci">static void fixupBranchWeights(Instruction *Term, const WeightInfo &amp;Info)</div><div class="ttdoc">Update the weights of original exiting block after peeling off all iterations.</div><div class="ttdef"><b>Definition:</b> <a href="LoopPeel_8cpp_source.html#l00673">LoopPeel.cpp:673</a></div></div>
<div class="ttc" id="aclassllvm_1_1SCEVAddRecExpr_html_af6314c51a3cc5a619beb697246177bf0"><div class="ttname"><a href="classllvm_1_1SCEVAddRecExpr.html#af6314c51a3cc5a619beb697246177bf0">llvm::SCEVAddRecExpr::getLoop</a></div><div class="ttdeci">const Loop * getLoop() const</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolutionExpressions_8h_source.html#l00342">ScalarEvolutionExpressions.h:342</a></div></div>
<div class="ttc" id="anamespacestd_html"><div class="ttname"><a href="namespacestd.html">std</a></div><div class="ttdef"><b>Definition:</b> <a href="BitVector_8h_source.html#l00851">BitVector.h:851</a></div></div>
<div class="ttc" id="aLoopPeel_8cpp_html_acd8a7753c2685a14185133433c0bbf26"><div class="ttname"><a href="LoopPeel_8cpp.html#acd8a7753c2685a14185133433c0bbf26">initBranchWeights</a></div><div class="ttdeci">static void initBranchWeights(DenseMap&lt; Instruction *, WeightInfo &gt; &amp;WeightInfos, Loop *L)</div><div class="ttdoc">Initialize the weights for all exiting blocks.</div><div class="ttdef"><b>Definition:</b> <a href="LoopPeel_8cpp_source.html#l00628">LoopPeel.cpp:628</a></div></div>
<div class="ttc" id="aclassllvm_1_1SCEVAddRecExpr_html"><div class="ttname"><a href="classllvm_1_1SCEVAddRecExpr.html">llvm::SCEVAddRecExpr</a></div><div class="ttdoc">This node represents a polynomial recurrence on the trip count of the specified loop.</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolutionExpressions_8h_source.html#l00330">ScalarEvolutionExpressions.h:330</a></div></div>
<div class="ttc" id="aCasting_8h_html"><div class="ttname"><a href="Casting_8h.html">Casting.h</a></div></div>
<div class="ttc" id="aFunction_8h_html"><div class="ttname"><a href="Function_8h.html">Function.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopBase_html_a58c5b170ea68b41e94ebb0019523a68f"><div class="ttname"><a href="classllvm_1_1LoopBase.html#a58c5b170ea68b41e94ebb0019523a68f">llvm::LoopBase::getHeader</a></div><div class="ttdeci">BlockT * getHeader() const</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00105">LoopInfo.h:105</a></div></div>
<div class="ttc" id="anamespacellvm_html_ab8ec5c940fbc440c992716fbe4a48636"><div class="ttname"><a href="namespacellvm.html#ab8ec5c940fbc440c992716fbe4a48636">llvm::remapInstructionsInBlocks</a></div><div class="ttdeci">void remapInstructionsInBlocks(ArrayRef&lt; BasicBlock * &gt; Blocks, ValueToValueMapTy &amp;VMap)</div><div class="ttdoc">Remaps instructions in Blocks using the mapping in VMap.</div><div class="ttdef"><b>Definition:</b> <a href="CloneFunction_8cpp_source.html#l00940">CloneFunction.cpp:940</a></div></div>
<div class="ttc" id="aclassllvm_1_1DominatorTree_html_a2ec50ab2c78eff965caf3da71cd08be4"><div class="ttname"><a href="classllvm_1_1DominatorTree.html#a2ec50ab2c78eff965caf3da71cd08be4">llvm::DominatorTree::findNearestCommonDominator</a></div><div class="ttdeci">Instruction * findNearestCommonDominator(Instruction *I1, Instruction *I2) const</div><div class="ttdoc">Find the nearest instruction I that dominates both I1 and I2, in the sense that a result produced bef...</div><div class="ttdef"><b>Definition:</b> <a href="Dominators_8cpp_source.html#l00358">Dominators.cpp:358</a></div></div>
<div class="ttc" id="anamespacellvm_html_a0083a69883e0f97e111dbff064c60f42"><div class="ttname"><a href="namespacellvm.html#a0083a69883e0f97e111dbff064c60f42">llvm::simplifyLoop</a></div><div class="ttdeci">bool simplifyLoop(Loop *L, DominatorTree *DT, LoopInfo *LI, ScalarEvolution *SE, AssumptionCache *AC, MemorySSAUpdater *MSSAU, bool PreserveLCSSA)</div><div class="ttdoc">Simplify each loop in a loop nest recursively.</div><div class="ttdef"><b>Definition:</b> <a href="LoopSimplify_8cpp_source.html#l00708">LoopSimplify.cpp:708</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html_a9084ce2576fad285c1c0dc1e165dd4b6"><div class="ttname"><a href="classllvm_1_1Function.html#a9084ce2576fad285c1c0dc1e165dd4b6">llvm::Function::hasProfileData</a></div><div class="ttdeci">bool hasProfileData(bool IncludeSynthetic=false) const</div><div class="ttdoc">Return true if the function is annotated with profile data.</div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00289">Function.h:289</a></div></div>
<div class="ttc" id="aclassllvm_1_1MDBuilder_html"><div class="ttname"><a href="classllvm_1_1MDBuilder.html">llvm::MDBuilder</a></div><div class="ttdef"><b>Definition:</b> <a href="MDBuilder_8h_source.html#l00036">MDBuilder.h:36</a></div></div>
<div class="ttc" id="aScalarEvolutionExpressions_8h_html"><div class="ttname"><a href="ScalarEvolutionExpressions_8h.html">ScalarEvolutionExpressions.h</a></div></div>
<div class="ttc" id="aInstructions_8h_html"><div class="ttname"><a href="Instructions_8h.html">Instructions.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_a15055c7e3a33b44c293df24e4ba7bc5e"><div class="ttname"><a href="namespacellvm.html#a15055c7e3a33b44c293df24e4ba7bc5e">llvm::IsBlockFollowedByDeoptOrUnreachable</a></div><div class="ttdeci">bool IsBlockFollowedByDeoptOrUnreachable(const BasicBlock *BB)</div><div class="ttdoc">Check if we can prove that all paths starting from this block converge to a block that either has a @...</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlockUtils_8cpp_source.html#l00596">BasicBlockUtils.cpp:596</a></div></div>
<div class="ttc" id="aLoopPeel_8cpp_html_aaa1d9cfaf2d4ef4eca30ce71eb8c3a89"><div class="ttname"><a href="LoopPeel_8cpp.html#aaa1d9cfaf2d4ef4eca30ce71eb8c3a89">peelToTurnInvariantLoadsDerefencebale</a></div><div class="ttdeci">static unsigned peelToTurnInvariantLoadsDerefencebale(Loop &amp;L, DominatorTree &amp;DT, AssumptionCache *AC)</div><div class="ttdef"><b>Definition:</b> <a href="LoopPeel_8cpp_source.html#l00276">LoopPeel.cpp:276</a></div></div>
<div class="ttc" id="aSmallVector_8h_html"><div class="ttname"><a href="SmallVector_8h.html">SmallVector.h</a></div></div>
<div class="ttc" id="aLoopPeel_8cpp_html_a01fd139cc69e032081156e44c017248e"><div class="ttname"><a href="LoopPeel_8cpp.html#a01fd139cc69e032081156e44c017248e">cloneLoopBlocks</a></div><div class="ttdeci">static void cloneLoopBlocks(Loop *L, unsigned IterNumber, BasicBlock *InsertTop, BasicBlock *InsertBot, SmallVectorImpl&lt; std::pair&lt; BasicBlock *, BasicBlock * &gt;&gt; &amp;ExitEdges, SmallVectorImpl&lt; BasicBlock * &gt; &amp;NewBlocks, LoopBlocksDFS &amp;LoopBlocks, ValueToValueMapTy &amp;VMap, ValueToValueMapTy &amp;LVMap, DominatorTree *DT, LoopInfo *LI, ArrayRef&lt; MDNode * &gt; LoopLocalNoAliasDeclScopes, ScalarEvolution &amp;SE)</div><div class="ttdoc">Clones the body of the loop L, putting it between InsertTop and InsertBot.</div><div class="ttdef"><b>Definition:</b> <a href="LoopPeel_8cpp_source.html#l00689">LoopPeel.cpp:689</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopBase_html_a63f099d3bf7cf97eb3ae2d630e3d1afc"><div class="ttname"><a href="classllvm_1_1LoopBase.html#a63f099d3bf7cf97eb3ae2d630e3d1afc">llvm::LoopBase::addBasicBlockToLoop</a></div><div class="ttdeci">void addBasicBlockToLoop(BlockT *NewBB, LoopInfoBase&lt; BlockT, LoopT &gt; &amp;LI)</div><div class="ttdoc">This method is used by other analyses to update loop information.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfoImpl_8h_source.html#l00258">LoopInfoImpl.h:258</a></div></div>
<div class="ttc" id="anamespacellvm_html_a2edb650de7b28add81349f5abf7ed7aa"><div class="ttname"><a href="namespacellvm.html#a2edb650de7b28add81349f5abf7ed7aa">llvm::zip</a></div><div class="ttdeci">detail::zippy&lt; detail::zip_shortest, T, U, Args... &gt; zip(T &amp;&amp;t, U &amp;&amp;u, Args &amp;&amp;...args)</div><div class="ttdoc">zip iterator for two or more iteratable types.</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l00882">STLExtras.h:882</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a3fe9b3ddb71b9fb53d9fc74b3a0710bf"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a3fe9b3ddb71b9fb53d9fc74b3a0710bf">llvm::PatternMatch::m_ICmp</a></div><div class="ttdeci">CmpClass_match&lt; LHS, RHS, ICmpInst, ICmpInst::Predicate &gt; m_ICmp(ICmpInst::Predicate &amp;Pred, const LHS &amp;L, const RHS &amp;R)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01394">PatternMatch.h:1394</a></div></div>
<div class="ttc" id="aDominators_8h_html"><div class="ttname"><a href="Dominators_8h.html">Dominators.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1DominatorTreeBase_html_a1f08f2925fec05b265e540d29066b9c8"><div class="ttname"><a href="classllvm_1_1DominatorTreeBase.html#a1f08f2925fec05b265e540d29066b9c8">llvm::DominatorTreeBase::verify</a></div><div class="ttdeci">bool verify(VerificationLevel VL=VerificationLevel::Full) const</div><div class="ttdoc">verify - checks if the tree is correct.</div><div class="ttdef"><b>Definition:</b> <a href="GenericDomTree_8h_source.html#l00819">GenericDomTree.h:819</a></div></div>
<div class="ttc" id="aTargetTransformInfo_8h_html"><div class="ttname"><a href="TargetTransformInfo_8h.html">TargetTransformInfo.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfo_html_af513fb5e9b4731b5b8315d757d5a252f"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html#af513fb5e9b4731b5b8315d757d5a252f">llvm::TargetTransformInfo::getPeelingPreferences</a></div><div class="ttdeci">void getPeelingPreferences(Loop *L, ScalarEvolution &amp;SE, PeelingPreferences &amp;PP) const</div><div class="ttdoc">Get target-customized preferences for the generic loop peeling transformation.</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8cpp_source.html#l00348">TargetTransformInfo.cpp:348</a></div></div>
<div class="ttc" id="aclassllvm_1_1PHINode_html"><div class="ttname"><a href="classllvm_1_1PHINode.html">llvm::PHINode</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02708">Instructions.h:2708</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a8de021e28a3c04c9216ad8decf104f02"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">llvm::BasicBlock::getTerminator</a></div><div class="ttdeci">const Instruction * getTerminator() const LLVM_READONLY</div><div class="ttdoc">Returns the terminator instruction if the block is well formed or null if the block is not well forme...</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00127">BasicBlock.h:127</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html">llvm::PatternMatch</a></div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00047">PatternMatch.h:47</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html">llvm::SmallVectorImpl</a></div><div class="ttdoc">This class consists of common code factored out of the SmallVector class to reduce code duplication b...</div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l00042">APFloat.h:42</a></div></div>
<div class="ttc" id="aclassllvm_1_1Module_html_a6d883605206368bc536cc9ded97209b8"><div class="ttname"><a href="classllvm_1_1Module.html#a6d883605206368bc536cc9ded97209b8">llvm::Module::getDataLayout</a></div><div class="ttdeci">const DataLayout &amp; getDataLayout() const</div><div class="ttdoc">Get the data layout for the module's target platform.</div><div class="ttdef"><b>Definition:</b> <a href="Module_8cpp_source.html#l00398">Module.cpp:398</a></div></div>
<div class="ttc" id="aclassllvm_1_1SCEV_html_aefeda9454a5e8dfcec3deb106964832a"><div class="ttname"><a href="classllvm_1_1SCEV.html#aefeda9454a5e8dfcec3deb106964832a">llvm::SCEV::getType</a></div><div class="ttdeci">Type * getType() const</div><div class="ttdoc">Return the LLVM type of this SCEV expression.</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8cpp_source.html#l00401">ScalarEvolution.cpp:401</a></div></div>
<div class="ttc" id="aclassllvm_1_1ScalarEvolution_html_aef6d2bea715d1793e956f41ddeea2320"><div class="ttname"><a href="classllvm_1_1ScalarEvolution.html#aef6d2bea715d1793e956f41ddeea2320">llvm::ScalarEvolution::getAddExpr</a></div><div class="ttdeci">const SCEV * getAddExpr(SmallVectorImpl&lt; const SCEV * &gt; &amp;Ops, SCEV::NoWrapFlags Flags=SCEV::FlagAnyWrap, unsigned Depth=0)</div><div class="ttdoc">Get a canonical add expression, or something simpler if possible.</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8cpp_source.html#l02537">ScalarEvolution.cpp:2537</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopBase_html_af691775d5a45e28afbdb3e97cab22eee"><div class="ttname"><a href="classllvm_1_1LoopBase.html#af691775d5a45e28afbdb3e97cab22eee">llvm::LoopBase::isLoopExiting</a></div><div class="ttdeci">bool isLoopExiting(const BlockT *BB) const</div><div class="ttdoc">True if terminator in the block can branch to another block that is outside of the current loop.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00242">LoopInfo.h:242</a></div></div>
<div class="ttc" id="anamespacellvm_html_ac19cbbc4935a23e1d44f65e1eaba6b1d"><div class="ttname"><a href="namespacellvm.html#ac19cbbc4935a23e1d44f65e1eaba6b1d">llvm::extractBranchWeights</a></div><div class="ttdeci">bool extractBranchWeights(const MDNode *ProfileData, SmallVectorImpl&lt; uint32_t &gt; &amp;Weights)</div><div class="ttdoc">Extract branch weights from MD_prof metadata.</div><div class="ttdef"><b>Definition:</b> <a href="ProfDataUtils_8cpp_source.html#l00122">ProfDataUtils.cpp:122</a></div></div>
<div class="ttc" id="alib_2CodeGen_2README_8txt_html_a09776db24cf586ec9f1e18f3bae14099"><div class="ttname"><a href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a></div><div class="ttdeci">Common register allocation spilling lr str ldr sxth r3 ldr mla r4 can lr mov lr str ldr sxth r3 mla r4 and then merge mul and lr str ldr sxth r3 mla r4 It also increase the likelihood the store may become dead bb27 Successors according to LLVM BB</div><div class="ttdef"><b>Definition:</b> <a href="lib_2CodeGen_2README_8txt_source.html#l00039">README.txt:39</a></div></div>
<div class="ttc" id="aLLVMContext_8h_html"><div class="ttname"><a href="LLVMContext_8h.html">LLVMContext.h</a></div></div>
<div class="ttc" id="astructllvm_1_1cl_1_1desc_html"><div class="ttname"><a href="structllvm_1_1cl_1_1desc.html">llvm::cl::desc</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00411">CommandLine.h:411</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchInst_html"><div class="ttname"><a href="classllvm_1_1BranchInst.html">llvm::BranchInst</a></div><div class="ttdoc">Conditional or Unconditional Branch instruction.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03139">Instructions.h:3139</a></div></div>
<div class="ttc" id="anamespacellvm_1_1M68kBeads_html_a7eeab1fe8f39bf89dcd7929b816ebfcca27d0e059322508a76f918503800ef1bd"><div class="ttname"><a href="namespacellvm_1_1M68kBeads.html#a7eeab1fe8f39bf89dcd7929b816ebfcca27d0e059322508a76f918503800ef1bd">llvm::M68kBeads::Term</a></div><div class="ttdeci">@ Term</div><div class="ttdef"><b>Definition:</b> <a href="M68kBaseInfo_8h_source.html#l00090">M68kBaseInfo.h:90</a></div></div>
<div class="ttc" id="araw__ostream_8h_html"><div class="ttname"><a href="raw__ostream_8h.html">raw_ostream.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSetImpl_html_af74676a3c7447be34bd2c1da76ec0c48"><div class="ttname"><a href="classllvm_1_1SmallPtrSetImpl.html#af74676a3c7447be34bd2c1da76ec0c48">llvm::SmallPtrSetImpl::contains</a></div><div class="ttdeci">bool contains(ConstPtrType Ptr) const</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00389">SmallPtrSet.h:389</a></div></div>
<div class="ttc" id="aLoopPeel_8h_html"><div class="ttname"><a href="LoopPeel_8h.html">LoopPeel.h</a></div></div>
<div class="ttc" id="aBasicBlockUtils_8h_html"><div class="ttname"><a href="BasicBlockUtils_8h.html">BasicBlockUtils.h</a></div></div>
<div class="ttc" id="aLoopPeel_8cpp_html_a00d63adc9db07b4830444e86330a291d"><div class="ttname"><a href="LoopPeel_8cpp.html#a00d63adc9db07b4830444e86330a291d">DisableAdvancedPeeling</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; DisableAdvancedPeeling(&quot;disable-advanced-peeling&quot;, cl::init(false), cl::Hidden, cl::desc(&quot;Disable advance peeling. Issues for convergent targets (D134803).&quot;))</div></div>
<div class="ttc" id="anamespacellvm_html_ad295cb34421c21507bc9cdefe1ba3f16"><div class="ttname"><a href="namespacellvm.html#ad295cb34421c21507bc9cdefe1ba3f16">llvm::SplitBlock</a></div><div class="ttdeci">BasicBlock * SplitBlock(BasicBlock *Old, Instruction *SplitPt, DominatorTree *DT, LoopInfo *LI=nullptr, MemorySSAUpdater *MSSAU=nullptr, const Twine &amp;BBName=&quot;&quot;, bool Before=false)</div><div class="ttdoc">Split the specified block at the specified instruction.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlockUtils_8cpp_source.html#l00935">BasicBlockUtils.cpp:935</a></div></div>
<div class="ttc" id="anamespacellvm_html_a0b3c6dc8e7df65d2385acfe9657abd03"><div class="ttname"><a href="namespacellvm.html#a0b3c6dc8e7df65d2385acfe9657abd03">llvm::getLoopEstimatedTripCount</a></div><div class="ttdeci">std::optional&lt; unsigned &gt; getLoopEstimatedTripCount(Loop *L, unsigned *EstimatedLoopInvocationWeight=nullptr)</div><div class="ttdoc">Returns a loop's estimated trip count based on branch weight metadata.</div><div class="ttdef"><b>Definition:</b> <a href="LoopUtils_8cpp_source.html#l00811">LoopUtils.cpp:811</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html"><div class="ttname"><a href="classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00074">Value.h:74</a></div></div>
<div class="ttc" id="aDebug_8h_html"><div class="ttname"><a href="Debug_8h.html">Debug.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchInst_html_ad97f2e60cf22f15e0cf617af52309031"><div class="ttname"><a href="classllvm_1_1BranchInst.html#ad97f2e60cf22f15e0cf617af52309031">llvm::BranchInst::getSuccessor</a></div><div class="ttdeci">BasicBlock * getSuccessor(unsigned i) const</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03232">Instructions.h:3232</a></div></div>
<div class="ttc" id="aclassllvm_1_1SCEVAddRecExpr_html_a7eec28400b00678b1fb2b5f55ef7ac1b"><div class="ttname"><a href="classllvm_1_1SCEVAddRecExpr.html#a7eec28400b00678b1fb2b5f55ef7ac1b">llvm::SCEVAddRecExpr::getStepRecurrence</a></div><div class="ttdeci">const SCEV * getStepRecurrence(ScalarEvolution &amp;SE) const</div><div class="ttdoc">Constructs and returns the recurrence indicating how much this expression steps by.</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolutionExpressions_8h_source.html#l00348">ScalarEvolutionExpressions.h:348</a></div></div>
<div class="ttc" id="aclassllvm_1_1SCEVAddRecExpr_html_a33583576f220997d1c415df033559a57"><div class="ttname"><a href="classllvm_1_1SCEVAddRecExpr.html#a33583576f220997d1c415df033559a57">llvm::SCEVAddRecExpr::evaluateAtIteration</a></div><div class="ttdeci">const SCEV * evaluateAtIteration(const SCEV *It, ScalarEvolution &amp;SE) const</div><div class="ttdoc">Return the value of this chain of recurrences at the specified iteration number.</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8cpp_source.html#l01034">ScalarEvolution.cpp:1034</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSetImpl_html_a6bc6fb89fe2e91c25559a8631f56e27e"><div class="ttname"><a href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">llvm::SmallPtrSetImpl::insert</a></div><div class="ttdeci">std::pair&lt; iterator, bool &gt; insert(PtrType Ptr)</div><div class="ttdoc">Inserts Ptr if and only if there is no element in the container equal to Ptr.</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00365">SmallPtrSet.h:365</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Aug 7 2023 10:36:00 for LLVM by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LLVM: include/llvm/MCA/Support.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">LLVM
   &#160;<span id="projectnumber">17.0.0git</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="dir_dcde91663b8816e1e2311938ccd8f690.html">llvm</a></li><li class="navelem"><a class="el" href="dir_e10184ddeeb4432dba6c949335d8ab8d.html">MCA</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Support.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="MCA_2Support_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//===--------------------- Support.h ----------------------------*- C++ -*-===//</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">// See https://llvm.org/LICENSE.txt for license information.</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span><span class="comment"></span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">/// \file</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">/// Helper functions used by various pipeline components.</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"></span><span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160; </div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#ifndef LLVM_MCA_SUPPORT_H</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#define LLVM_MCA_SUPPORT_H</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160; </div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ArrayRef_8h.html">llvm/ADT/ArrayRef.h</a>&quot;</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SmallVector_8h.html">llvm/ADT/SmallVector.h</a>&quot;</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MCSchedule_8h.html">llvm/MC/MCSchedule.h</a>&quot;</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Support_2Error_8h.html">llvm/Support/Error.h</a>&quot;</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MathExtras_8h.html">llvm/Support/MathExtras.h</a>&quot;</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160; </div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespacellvm.html">llvm</a> {</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="keyword">namespace </span>mca {</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160; </div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</div>
<div class="line"><a name="l00027"></a><span class="lineno"><a class="line" href="classllvm_1_1mca_1_1InstructionError.html">   27</a></span>&#160;<span class="keyword">class </span><a class="code" href="classllvm_1_1mca_1_1InstructionError.html">InstructionError</a> : <span class="keyword">public</span> <a class="code" href="classllvm_1_1ErrorInfo.html">ErrorInfo</a>&lt;InstructionError&lt;T&gt;&gt; {</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00029"></a><span class="lineno"><a class="line" href="classllvm_1_1mca_1_1InstructionError.html#a558aace5d90ba84cb72009e0ab17f044">   29</a></span>&#160;  <span class="keyword">static</span> <span class="keywordtype">char</span> <a class="code" href="classllvm_1_1mca_1_1InstructionError.html#a558aace5d90ba84cb72009e0ab17f044">ID</a>;</div>
<div class="line"><a name="l00030"></a><span class="lineno"><a class="line" href="classllvm_1_1mca_1_1InstructionError.html#af854363550c230d6a1c7d8effdce2df8">   30</a></span>&#160;  std::string <a class="code" href="classllvm_1_1mca_1_1InstructionError.html#af854363550c230d6a1c7d8effdce2df8">Message</a>;</div>
<div class="line"><a name="l00031"></a><span class="lineno"><a class="line" href="classllvm_1_1mca_1_1InstructionError.html#a7c8fb73871af67048c29997aa8684da9">   31</a></span>&#160;  <span class="keyword">const</span> <a class="code" href="Mips16ISelLowering_8cpp.html#a0acb682b8260ab1c60b918599864e2e5">T</a> &amp;<a class="code" href="classllvm_1_1mca_1_1InstructionError.html#a7c8fb73871af67048c29997aa8684da9">Inst</a>;</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160; </div>
<div class="line"><a name="l00033"></a><span class="lineno"><a class="line" href="classllvm_1_1mca_1_1InstructionError.html#adacc0de3b6ea80a93847bf7a638cad83">   33</a></span>&#160;  <a class="code" href="classllvm_1_1mca_1_1InstructionError.html#adacc0de3b6ea80a93847bf7a638cad83">InstructionError</a>(std::string M, <span class="keyword">const</span> T &amp;MCI)</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;      : <a class="code" href="classllvm_1_1mca_1_1InstructionError.html#af854363550c230d6a1c7d8effdce2df8">Message</a>(<a class="code" href="namespacestd.html">std</a>::<a class="code" href="namespacellvm.html#abfc9c7ecf70f66901e439f7c04ef3dbb">move</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>)), <a class="code" href="classllvm_1_1mca_1_1InstructionError.html#a7c8fb73871af67048c29997aa8684da9">Inst</a>(MCI) {}</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160; </div>
<div class="line"><a name="l00036"></a><span class="lineno"><a class="line" href="classllvm_1_1mca_1_1InstructionError.html#ab8d795f321cd9b11955a82cde37d6faf">   36</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classllvm_1_1mca_1_1InstructionError.html#ab8d795f321cd9b11955a82cde37d6faf">log</a>(<a class="code" href="classllvm_1_1raw__ostream.html">raw_ostream</a> &amp;<a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a>)<span class="keyword"> const override </span>{ <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; <a class="code" href="classllvm_1_1mca_1_1InstructionError.html#af854363550c230d6a1c7d8effdce2df8">Message</a>; }</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160; </div>
<div class="line"><a name="l00038"></a><span class="lineno"><a class="line" href="classllvm_1_1mca_1_1InstructionError.html#a67eecd6b929032f759330ed4c06ff91f">   38</a></span>&#160;  std::error_code <a class="code" href="classllvm_1_1mca_1_1InstructionError.html#a67eecd6b929032f759330ed4c06ff91f">convertToErrorCode</a>()<span class="keyword"> const override </span>{</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#a2b43c21951d0948b34bcf7019949032d">inconvertibleErrorCode</a>();</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;  }</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;};</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160; </div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt; <span class="keywordtype">char</span> <a class="code" href="classllvm_1_1mca_1_1InstructionError.html#a558aace5d90ba84cb72009e0ab17f044">InstructionError&lt;T&gt;::ID</a>;</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="comment">/// This class represents the number of cycles per resource (fractions of</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="comment">/// cycles).  That quantity is managed here as a ratio, and accessed via the</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="comment">/// double cast-operator below.  The two quantities, number of cycles and</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="comment">/// number of resources, are kept separate.  This is used by the</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="comment">/// ResourcePressureView to calculate the average resource cycles</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="comment">/// per instruction/iteration.</span></div>
<div class="line"><a name="l00051"></a><span class="lineno"><a class="line" href="classllvm_1_1mca_1_1ResourceCycles.html">   51</a></span>&#160;<span class="comment"></span><span class="keyword">class </span><a class="code" href="classllvm_1_1mca_1_1ResourceCycles.html">ResourceCycles</a> {</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;  <span class="keywordtype">unsigned</span> Numerator, Denominator;</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160; </div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00055"></a><span class="lineno"><a class="line" href="classllvm_1_1mca_1_1ResourceCycles.html#a587bc8981801ed9e6a7d11d4b0c3bb41">   55</a></span>&#160;  <a class="code" href="classllvm_1_1mca_1_1ResourceCycles.html#a587bc8981801ed9e6a7d11d4b0c3bb41">ResourceCycles</a>() : Numerator(0), Denominator(1) {}</div>
<div class="line"><a name="l00056"></a><span class="lineno"><a class="line" href="classllvm_1_1mca_1_1ResourceCycles.html#a1943b17cbb8806e0283b4bdef609c399">   56</a></span>&#160;  <a class="code" href="classllvm_1_1mca_1_1ResourceCycles.html#a1943b17cbb8806e0283b4bdef609c399">ResourceCycles</a>(<span class="keywordtype">unsigned</span> Cycles, <span class="keywordtype">unsigned</span> ResourceUnits = 1)</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;      : Numerator(Cycles), Denominator(ResourceUnits) {}</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160; </div>
<div class="line"><a name="l00059"></a><span class="lineno"><a class="line" href="classllvm_1_1mca_1_1ResourceCycles.html#a4b26988b289e8ab2493b95e3594837fe">   59</a></span>&#160;  <span class="keyword">operator</span> <a class="code" href="README-SSE_8txt.html#a698e4bd87a8adc0c042ae6b6e10ee6e1">double</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Denominator &amp;&amp; <span class="stringliteral">&quot;Invalid denominator (must be non-zero).&quot;</span>);</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    <span class="keywordflow">return</span> (Denominator == 1) ? Numerator : (<a class="code" href="README-SSE_8txt.html#a698e4bd87a8adc0c042ae6b6e10ee6e1">double</a>)Numerator / Denominator;</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;  }</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160; </div>
<div class="line"><a name="l00064"></a><span class="lineno"><a class="line" href="classllvm_1_1mca_1_1ResourceCycles.html#a289f8924606008253333048c866fd6e7">   64</a></span>&#160;  <span class="keywordtype">unsigned</span> <a class="code" href="classllvm_1_1mca_1_1ResourceCycles.html#a289f8924606008253333048c866fd6e7">getNumerator</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> Numerator; }</div>
<div class="line"><a name="l00065"></a><span class="lineno"><a class="line" href="classllvm_1_1mca_1_1ResourceCycles.html#a26dabf923bdf882ae7263c313fe10110">   65</a></span>&#160;  <span class="keywordtype">unsigned</span> <a class="code" href="classllvm_1_1mca_1_1ResourceCycles.html#a26dabf923bdf882ae7263c313fe10110">getDenominator</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> Denominator; }</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160; </div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;  <span class="comment">// Add the components of RHS to this instance.  Instead of calculating</span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;  <span class="comment">// the final value here, we keep track of the numerator and denominator</span></div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;  <span class="comment">// separately, to reduce floating point error.</span></div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;  <a class="code" href="classllvm_1_1mca_1_1ResourceCycles.html">ResourceCycles</a> &amp;<a class="code" href="classllvm_1_1mca_1_1ResourceCycles.html#afb4b6c9b77d6abb2ef19c3268f10031a">operator+=</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1mca_1_1ResourceCycles.html">ResourceCycles</a> &amp;<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>);</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;};</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="comment">/// Populates vector Masks with processor resource masks.</span></div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="comment">/// The number of bits set in a mask depends on the processor resource type.</span></div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="comment">/// Each processor resource mask has at least one bit set. For groups, the</span></div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="comment">/// number of bits set in the mask is equal to the cardinality of the group plus</span></div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="comment">/// one. Excluding the most significant bit, the remaining bits in the mask</span></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="comment">/// identify processor resources that are part of the group.</span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="comment">/// Example:</span></div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="comment">///  ResourceA  -- Mask: 0b001</span></div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="comment">///  ResourceB  -- Mask: 0b010</span></div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="comment">///  ResourceAB -- Mask: 0b100 U (ResourceA::Mask | ResourceB::Mask) == 0b111</span></div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="comment">/// ResourceAB is a processor resource group containing ResourceA and ResourceB.</span></div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="comment">/// Each resource mask uniquely identifies a resource; both ResourceA and</span></div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="comment">/// ResourceB only have one bit set.</span></div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="comment">/// ResourceAB is a group; excluding the most significant bit in the mask, the</span></div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="comment">/// remaining bits identify the composition of the group.</span></div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="comment">/// Resource masks are used by the ResourceManager to solve set membership</span></div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<span class="comment">/// problems with simple bit manipulation operations.</span></div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="namespacellvm_1_1mca.html#ae1d3c5a1f43dcec43774a3767b41e447">computeProcResourceMasks</a>(<span class="keyword">const</span> <a class="code" href="structllvm_1_1MCSchedModel.html">MCSchedModel</a> &amp;SM,</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;                              <a class="code" href="classllvm_1_1MutableArrayRef.html">MutableArrayRef&lt;uint64_t&gt;</a> Masks);</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160; </div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<span class="comment">// Returns the index of the highest bit set. For resource masks, the position of</span></div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="comment">// the highest bit set can be used to construct a resource mask identifier.</span></div>
<div class="line"><a name="l00100"></a><span class="lineno"><a class="line" href="namespacellvm_1_1mca.html#ae652ac0aafced9e7ef6249d3b4e50171">  100</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm_1_1mca.html#ae652ac0aafced9e7ef6249d3b4e50171">getResourceStateIndex</a>(<a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a>) {</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a> &amp;&amp; <span class="stringliteral">&quot;Processor Resource Mask cannot be zero!&quot;</span>);</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#a4f42ed6fd2569fa43f03814a17f9d94a">llvm::Log2_64</a>(<a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a>);</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;}</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="comment">/// Compute the reciprocal block throughput from a set of processor resource</span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="comment">/// cycles. The reciprocal block throughput is computed as the MAX between:</span></div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="comment">///  - NumMicroOps / DispatchWidth</span></div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;<span class="comment">///  - ProcResourceCycles / #ProcResourceUnits  (for every consumed resource).</span></div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;<span class="comment"></span><span class="keywordtype">double</span> <a class="code" href="namespacellvm_1_1mca.html#a0a98238e0b4ad204e6bf241ab4cefe47">computeBlockRThroughput</a>(<span class="keyword">const</span> <a class="code" href="structllvm_1_1MCSchedModel.html">MCSchedModel</a> &amp;SM, <span class="keywordtype">unsigned</span> DispatchWidth,</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;                               <span class="keywordtype">unsigned</span> NumMicroOps,</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;                               <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;unsigned&gt;</a> ProcResourceUsage);</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;} <span class="comment">// namespace mca</span></div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;} <span class="comment">// namespace llvm</span></div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160; </div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;<span class="preprocessor">#endif // LLVM_MCA_SUPPORT_H</span></div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="aMathExtras_8h_html"><div class="ttname"><a href="MathExtras_8h.html">MathExtras.h</a></div></div>
<div class="ttc" id="anamespacellvm_html"><div class="ttname"><a href="namespacellvm.html">llvm</a></div><div class="ttdoc">This is an optimization pass for GlobalISel generic memory operations.</div><div class="ttdef"><b>Definition:</b> <a href="AddressRanges_8h_source.html#l00018">AddressRanges.h:18</a></div></div>
<div class="ttc" id="alib_2Target_2X86_2README_8txt_html_ac88fe1d3a61b056a4f64fbbb156a62ff"><div class="ttname"><a href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a></div><div class="ttdeci">We currently emits eax Perhaps this is what we really should generate is Is imull three or four cycles eax eax The current instruction priority is based on pattern complexity The former is more complex because it folds a load so the latter will not be emitted Perhaps we should use AddedComplexity to give LEA32r a higher priority We should always try to match LEA first since the LEA matching code does some estimate to determine whether the match is profitable if we care more about code then imull is better It s two bytes shorter than movl leal On a Pentium M</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2X86_2README_8txt_source.html#l00252">README.txt:252</a></div></div>
<div class="ttc" id="aREADME-SSE_8txt_html_a698e4bd87a8adc0c042ae6b6e10ee6e1"><div class="ttname"><a href="README-SSE_8txt.html#a698e4bd87a8adc0c042ae6b6e10ee6e1">double</a></div><div class="ttdeci">into xmm2 addss xmm2 xmm1 xmm3 addss xmm3 movaps xmm0 unpcklps xmm0 ret seems silly when it could just be one addps Expand libm rounding functions main should enable SSE DAZ mode and other fast SSE modes Think about doing i64 math in SSE regs on x86 This testcase should have no SSE instructions in and only one load from a constant double</div><div class="ttdef"><b>Definition:</b> <a href="README-SSE_8txt_source.html#l00085">README-SSE.txt:85</a></div></div>
<div class="ttc" id="aSupport_2Error_8h_html"><div class="ttname"><a href="Support_2Error_8h.html">Error.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1mca_1_1ResourceCycles_html_a289f8924606008253333048c866fd6e7"><div class="ttname"><a href="classllvm_1_1mca_1_1ResourceCycles.html#a289f8924606008253333048c866fd6e7">llvm::mca::ResourceCycles::getNumerator</a></div><div class="ttdeci">unsigned getNumerator() const</div><div class="ttdef"><b>Definition:</b> <a href="MCA_2Support_8h_source.html#l00064">Support.h:64</a></div></div>
<div class="ttc" id="aMips16ISelLowering_8cpp_html_a0acb682b8260ab1c60b918599864e2e5"><div class="ttname"><a href="Mips16ISelLowering_8cpp.html#a0acb682b8260ab1c60b918599864e2e5">T</a></div><div class="ttdeci">#define T</div><div class="ttdef"><b>Definition:</b> <a href="Mips16ISelLowering_8cpp_source.html#l00341">Mips16ISelLowering.cpp:341</a></div></div>
<div class="ttc" id="aclassllvm_1_1mca_1_1InstructionError_html_adacc0de3b6ea80a93847bf7a638cad83"><div class="ttname"><a href="classllvm_1_1mca_1_1InstructionError.html#adacc0de3b6ea80a93847bf7a638cad83">llvm::mca::InstructionError::InstructionError</a></div><div class="ttdeci">InstructionError(std::string M, const T &amp;MCI)</div><div class="ttdef"><b>Definition:</b> <a href="MCA_2Support_8h_source.html#l00033">Support.h:33</a></div></div>
<div class="ttc" id="aX86PartialReduction_8cpp_html_a87b8bfbbe9d8f7146d7f20a5fb42efd0"><div class="ttname"><a href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a></div><div class="ttdeci">Value * RHS</div><div class="ttdef"><b>Definition:</b> <a href="X86PartialReduction_8cpp_source.html#l00076">X86PartialReduction.cpp:76</a></div></div>
<div class="ttc" id="anamespacellvm_1_1BitmaskEnumDetail_html_a91efa71de05b0c2d00730a0279f58658"><div class="ttname"><a href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">llvm::BitmaskEnumDetail::Mask</a></div><div class="ttdeci">constexpr std::underlying_type_t&lt; E &gt; Mask()</div><div class="ttdoc">Get a bitmask with 1s in all places up to the high-order bit of E's largest value.</div><div class="ttdef"><b>Definition:</b> <a href="BitmaskEnum_8h_source.html#l00080">BitmaskEnum.h:80</a></div></div>
<div class="ttc" id="anamespacellvm_1_1mca_html_a0a98238e0b4ad204e6bf241ab4cefe47"><div class="ttname"><a href="namespacellvm_1_1mca.html#a0a98238e0b4ad204e6bf241ab4cefe47">llvm::mca::computeBlockRThroughput</a></div><div class="ttdeci">double computeBlockRThroughput(const MCSchedModel &amp;SM, unsigned DispatchWidth, unsigned NumMicroOps, ArrayRef&lt; unsigned &gt; ProcResourceUsage)</div><div class="ttdoc">Compute the reciprocal block throughput from a set of processor resource cycles.</div><div class="ttdef"><b>Definition:</b> <a href="Support_8cpp_source.html#l00083">Support.cpp:83</a></div></div>
<div class="ttc" id="anamespacellvm_html_a4f42ed6fd2569fa43f03814a17f9d94a"><div class="ttname"><a href="namespacellvm.html#a4f42ed6fd2569fa43f03814a17f9d94a">llvm::Log2_64</a></div><div class="ttdeci">unsigned Log2_64(uint64_t Value)</div><div class="ttdoc">Return the floor log base 2 of the specified value, -1 if the value is zero.</div><div class="ttdef"><b>Definition:</b> <a href="MathExtras_8h_source.html#l00388">MathExtras.h:388</a></div></div>
<div class="ttc" id="aclassllvm_1_1MutableArrayRef_html"><div class="ttname"><a href="classllvm_1_1MutableArrayRef.html">llvm::MutableArrayRef</a></div><div class="ttdoc">MutableArrayRef - Represent a mutable reference to an array (0 or more elements consecutively in memo...</div><div class="ttdef"><b>Definition:</b> <a href="ArrayRef_8h_source.html#l00027">ArrayRef.h:27</a></div></div>
<div class="ttc" id="aclassllvm_1_1mca_1_1InstructionError_html_a7c8fb73871af67048c29997aa8684da9"><div class="ttname"><a href="classllvm_1_1mca_1_1InstructionError.html#a7c8fb73871af67048c29997aa8684da9">llvm::mca::InstructionError::Inst</a></div><div class="ttdeci">const T &amp; Inst</div><div class="ttdef"><b>Definition:</b> <a href="MCA_2Support_8h_source.html#l00031">Support.h:31</a></div></div>
<div class="ttc" id="aclassllvm_1_1mca_1_1ResourceCycles_html_afb4b6c9b77d6abb2ef19c3268f10031a"><div class="ttname"><a href="classllvm_1_1mca_1_1ResourceCycles.html#afb4b6c9b77d6abb2ef19c3268f10031a">llvm::mca::ResourceCycles::operator+=</a></div><div class="ttdeci">ResourceCycles &amp; operator+=(const ResourceCycles &amp;RHS)</div><div class="ttdef"><b>Definition:</b> <a href="Support_8cpp_source.html#l00024">Support.cpp:24</a></div></div>
<div class="ttc" id="aclassllvm_1_1raw__ostream_html"><div class="ttname"><a href="classllvm_1_1raw__ostream.html">llvm::raw_ostream</a></div><div class="ttdoc">This class implements an extremely fast bulk output stream that can only output to a stream.</div><div class="ttdef"><b>Definition:</b> <a href="raw__ostream_8h_source.html#l00052">raw_ostream.h:52</a></div></div>
<div class="ttc" id="aADT_2tmp_8txt_html_a07ed0bfaa124c15897944fe3eaa971ab"><div class="ttname"><a href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a></div><div class="ttdeci">Class for arbitrary precision integers APInt is a functional replacement for common case unsigned integer type like unsigned long or uint64_t</div><div class="ttdef"><b>Definition:</b> <a href="ADT_2tmp_8txt_source.html#l00001">tmp.txt:1</a></div></div>
<div class="ttc" id="aclassllvm_1_1mca_1_1InstructionError_html_a558aace5d90ba84cb72009e0ab17f044"><div class="ttname"><a href="classllvm_1_1mca_1_1InstructionError.html#a558aace5d90ba84cb72009e0ab17f044">llvm::mca::InstructionError::ID</a></div><div class="ttdeci">static char ID</div><div class="ttdef"><b>Definition:</b> <a href="MCA_2Support_8h_source.html#l00029">Support.h:29</a></div></div>
<div class="ttc" id="aMCSchedule_8h_html"><div class="ttname"><a href="MCSchedule_8h.html">MCSchedule.h</a></div></div>
<div class="ttc" id="aArrayRef_8h_html"><div class="ttname"><a href="ArrayRef_8h.html">ArrayRef.h</a></div></div>
<div class="ttc" id="aSILowerControlFlow_8cpp_html_a4868c5d81c5ccc98c47aeab6244346a0"><div class="ttname"><a href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a></div><div class="ttdeci">assert(ImpDefSCC.getReg()==AMDGPU::SCC &amp;&amp;ImpDefSCC.isDef())</div></div>
<div class="ttc" id="anamespacellvm_html_abfc9c7ecf70f66901e439f7c04ef3dbb"><div class="ttname"><a href="namespacellvm.html#abfc9c7ecf70f66901e439f7c04ef3dbb">llvm::move</a></div><div class="ttdeci">OutputIt move(R &amp;&amp;Range, OutputIt Out)</div><div class="ttdoc">Provide wrappers to std::move which take ranges instead of having to pass begin/end explicitly.</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l01862">STLExtras.h:1862</a></div></div>
<div class="ttc" id="aclassllvm_1_1ErrorInfo_html"><div class="ttname"><a href="classllvm_1_1ErrorInfo.html">llvm::ErrorInfo</a></div><div class="ttdoc">Base class for user error types.</div><div class="ttdef"><b>Definition:</b> <a href="Support_2Error_8h_source.html#l00348">Error.h:348</a></div></div>
<div class="ttc" id="aclassllvm_1_1mca_1_1InstructionError_html_a67eecd6b929032f759330ed4c06ff91f"><div class="ttname"><a href="classllvm_1_1mca_1_1InstructionError.html#a67eecd6b929032f759330ed4c06ff91f">llvm::mca::InstructionError::convertToErrorCode</a></div><div class="ttdeci">std::error_code convertToErrorCode() const override</div><div class="ttdoc">Convert this error to a std::error_code.</div><div class="ttdef"><b>Definition:</b> <a href="MCA_2Support_8h_source.html#l00038">Support.h:38</a></div></div>
<div class="ttc" id="aclassllvm_1_1ArrayRef_html"><div class="ttname"><a href="classllvm_1_1ArrayRef.html">llvm::ArrayRef&lt; unsigned &gt;</a></div></div>
<div class="ttc" id="aSampleProfWriter_8cpp_html_ac5f3689931c7238da06ba00cf1002c62"><div class="ttname"><a href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a></div><div class="ttdeci">raw_pwrite_stream &amp; OS</div><div class="ttdef"><b>Definition:</b> <a href="SampleProfWriter_8cpp_source.html#l00053">SampleProfWriter.cpp:53</a></div></div>
<div class="ttc" id="anamespacestd_html"><div class="ttname"><a href="namespacestd.html">std</a></div><div class="ttdef"><b>Definition:</b> <a href="BitVector_8h_source.html#l00851">BitVector.h:851</a></div></div>
<div class="ttc" id="anamespacellvm_html_a2b43c21951d0948b34bcf7019949032d"><div class="ttname"><a href="namespacellvm.html#a2b43c21951d0948b34bcf7019949032d">llvm::inconvertibleErrorCode</a></div><div class="ttdeci">std::error_code inconvertibleErrorCode()</div><div class="ttdoc">The value returned by this function can be returned from convertToErrorCode for Error values where no...</div><div class="ttdef"><b>Definition:</b> <a href="Testing_2Support_2Error_8cpp_source.html#l00079">Error.cpp:79</a></div></div>
<div class="ttc" id="astructllvm_1_1MCSchedModel_html"><div class="ttname"><a href="structllvm_1_1MCSchedModel.html">llvm::MCSchedModel</a></div><div class="ttdoc">Machine model for scheduling, bundling, and heuristics.</div><div class="ttdef"><b>Definition:</b> <a href="MCSchedule_8h_source.html#l00244">MCSchedule.h:244</a></div></div>
<div class="ttc" id="anamespacellvm_1_1mca_html_ae652ac0aafced9e7ef6249d3b4e50171"><div class="ttname"><a href="namespacellvm_1_1mca.html#ae652ac0aafced9e7ef6249d3b4e50171">llvm::mca::getResourceStateIndex</a></div><div class="ttdeci">unsigned getResourceStateIndex(uint64_t Mask)</div><div class="ttdef"><b>Definition:</b> <a href="MCA_2Support_8h_source.html#l00100">Support.h:100</a></div></div>
<div class="ttc" id="aclassllvm_1_1mca_1_1InstructionError_html_ab8d795f321cd9b11955a82cde37d6faf"><div class="ttname"><a href="classllvm_1_1mca_1_1InstructionError.html#ab8d795f321cd9b11955a82cde37d6faf">llvm::mca::InstructionError::log</a></div><div class="ttdeci">void log(raw_ostream &amp;OS) const override</div><div class="ttdoc">Print an error message to an output stream.</div><div class="ttdef"><b>Definition:</b> <a href="MCA_2Support_8h_source.html#l00036">Support.h:36</a></div></div>
<div class="ttc" id="aSmallVector_8h_html"><div class="ttname"><a href="SmallVector_8h.html">SmallVector.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1mca_1_1ResourceCycles_html_a26dabf923bdf882ae7263c313fe10110"><div class="ttname"><a href="classllvm_1_1mca_1_1ResourceCycles.html#a26dabf923bdf882ae7263c313fe10110">llvm::mca::ResourceCycles::getDenominator</a></div><div class="ttdeci">unsigned getDenominator() const</div><div class="ttdef"><b>Definition:</b> <a href="MCA_2Support_8h_source.html#l00065">Support.h:65</a></div></div>
<div class="ttc" id="aclassllvm_1_1mca_1_1ResourceCycles_html_a1943b17cbb8806e0283b4bdef609c399"><div class="ttname"><a href="classllvm_1_1mca_1_1ResourceCycles.html#a1943b17cbb8806e0283b4bdef609c399">llvm::mca::ResourceCycles::ResourceCycles</a></div><div class="ttdeci">ResourceCycles(unsigned Cycles, unsigned ResourceUnits=1)</div><div class="ttdef"><b>Definition:</b> <a href="MCA_2Support_8h_source.html#l00056">Support.h:56</a></div></div>
<div class="ttc" id="aclassllvm_1_1mca_1_1InstructionError_html_af854363550c230d6a1c7d8effdce2df8"><div class="ttname"><a href="classllvm_1_1mca_1_1InstructionError.html#af854363550c230d6a1c7d8effdce2df8">llvm::mca::InstructionError::Message</a></div><div class="ttdeci">std::string Message</div><div class="ttdef"><b>Definition:</b> <a href="MCA_2Support_8h_source.html#l00030">Support.h:30</a></div></div>
<div class="ttc" id="aclassllvm_1_1mca_1_1InstructionError_html"><div class="ttname"><a href="classllvm_1_1mca_1_1InstructionError.html">llvm::mca::InstructionError</a></div><div class="ttdef"><b>Definition:</b> <a href="MCA_2Support_8h_source.html#l00027">Support.h:27</a></div></div>
<div class="ttc" id="aclassllvm_1_1mca_1_1ResourceCycles_html"><div class="ttname"><a href="classllvm_1_1mca_1_1ResourceCycles.html">llvm::mca::ResourceCycles</a></div><div class="ttdoc">This class represents the number of cycles per resource (fractions of cycles).</div><div class="ttdef"><b>Definition:</b> <a href="MCA_2Support_8h_source.html#l00051">Support.h:51</a></div></div>
<div class="ttc" id="anamespacellvm_1_1mca_html_ae1d3c5a1f43dcec43774a3767b41e447"><div class="ttname"><a href="namespacellvm_1_1mca.html#ae1d3c5a1f43dcec43774a3767b41e447">llvm::mca::computeProcResourceMasks</a></div><div class="ttdeci">void computeProcResourceMasks(const MCSchedModel &amp;SM, MutableArrayRef&lt; uint64_t &gt; Masks)</div><div class="ttdoc">Populates vector Masks with processor resource masks.</div><div class="ttdef"><b>Definition:</b> <a href="Support_8cpp_source.html#l00040">Support.cpp:40</a></div></div>
<div class="ttc" id="aclassllvm_1_1mca_1_1ResourceCycles_html_a587bc8981801ed9e6a7d11d4b0c3bb41"><div class="ttname"><a href="classllvm_1_1mca_1_1ResourceCycles.html#a587bc8981801ed9e6a7d11d4b0c3bb41">llvm::mca::ResourceCycles::ResourceCycles</a></div><div class="ttdeci">ResourceCycles()</div><div class="ttdef"><b>Definition:</b> <a href="MCA_2Support_8h_source.html#l00055">Support.h:55</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Aug 7 2023 09:45:56 for LLVM by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>

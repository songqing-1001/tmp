<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LLVM: lib/Transforms/Scalar/LICM.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">LLVM
   &#160;<span id="projectnumber">17.0.0git</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a class="el" href="dir_a72932e0778af28115095468f6286ff8.html">Transforms</a></li><li class="navelem"><a class="el" href="dir_e6e1f1f37d351595fa984b942927b205.html">Scalar</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">LICM.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="LICM_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//===-- LICM.cpp - Loop Invariant Code Motion Pass ------------------------===//</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">// See https://llvm.org/LICENSE.txt for license information.</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">// This pass performs loop invariant code motion, attempting to remove as much</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">// code from the body of a loop as possible.  It does this by either hoisting</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">// code into the preheader block, or by sinking code to the exit blocks if it is</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">// safe.  This pass also promotes must-aliased memory locations in the loop to</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">// live in registers, thus hoisting and sinking &quot;invariant&quot; loads and stores.</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">// Hoisting operations out of loops is a canonicalization transform.  It</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">// enables and simplifies subsequent optimizations in the middle-end.</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">// Rematerialization of hoisted instructions to reduce register pressure is the</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment">// responsibility of the back-end, which has more accurate information about</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment">// register pressure and also handles other optimizations than LICM that</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment">// increase live-ranges.</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment">// This pass uses alias analysis for two purposes:</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment">//  1. Moving loop invariant loads and calls out of loops.  If we can determine</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment">//     that a load or call inside of a loop never aliases anything stored to,</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment">//     we can hoist it or sink it like any other instruction.</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment">//  2. Scalar Promotion of Memory - If there is a store instruction inside of</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment">//     the loop, we try to move the store to happen AFTER the loop instead of</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment">//     inside of the loop.  This can only happen if a few conditions are true:</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="comment">//       A. The pointer stored through is loop invariant</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="comment">//       B. There are no stores or loads in the loop which _may_ alias the</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="comment">//          pointer.  There are no calls in the loop which mod/ref the pointer.</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="comment">//     If these conditions are true, we can promote the loads and stores in the</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="comment">//     loop of the pointer to use a temporary alloca&#39;d variable.  We then use</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="comment">//     the SSAUpdater to construct the appropriate SSA form for the value.</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160; </div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LICM_8h.html">llvm/Transforms/Scalar/LICM.h</a>&quot;</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="PriorityWorklist_8h.html">llvm/ADT/PriorityWorklist.h</a>&quot;</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SetOperations_8h.html">llvm/ADT/SetOperations.h</a>&quot;</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Statistic_8h.html">llvm/ADT/Statistic.h</a>&quot;</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="AliasAnalysis_8h.html">llvm/Analysis/AliasAnalysis.h</a>&quot;</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="AliasSetTracker_8h.html">llvm/Analysis/AliasSetTracker.h</a>&quot;</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="AssumptionCache_8h.html">llvm/Analysis/AssumptionCache.h</a>&quot;</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CaptureTracking_8h.html">llvm/Analysis/CaptureTracking.h</a>&quot;</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ConstantFolding_8h.html">llvm/Analysis/ConstantFolding.h</a>&quot;</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Analysis_2GuardUtils_8h.html">llvm/Analysis/GuardUtils.h</a>&quot;</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LazyBlockFrequencyInfo_8h.html">llvm/Analysis/LazyBlockFrequencyInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Loads_8h.html">llvm/Analysis/Loads.h</a>&quot;</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LoopInfo_8h.html">llvm/Analysis/LoopInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LoopIterator_8h.html">llvm/Analysis/LoopIterator.h</a>&quot;</span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LoopNestAnalysis_8h.html">llvm/Analysis/LoopNestAnalysis.h</a>&quot;</span></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LoopPass_8h.html">llvm/Analysis/LoopPass.h</a>&quot;</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MemorySSA_8h.html">llvm/Analysis/MemorySSA.h</a>&quot;</span></div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MemorySSAUpdater_8h.html">llvm/Analysis/MemorySSAUpdater.h</a>&quot;</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MustExecute_8h.html">llvm/Analysis/MustExecute.h</a>&quot;</span></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="OptimizationRemarkEmitter_8h.html">llvm/Analysis/OptimizationRemarkEmitter.h</a>&quot;</span></div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ScalarEvolution_8h.html">llvm/Analysis/ScalarEvolution.h</a>&quot;</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="TargetLibraryInfo_8h.html">llvm/Analysis/TargetLibraryInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="TargetTransformInfo_8h.html">llvm/Analysis/TargetTransformInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ValueTracking_8h.html">llvm/Analysis/ValueTracking.h</a>&quot;</span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="IR_2CFG_8h.html">llvm/IR/CFG.h</a>&quot;</span></div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Constants_8h.html">llvm/IR/Constants.h</a>&quot;</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DataLayout_8h.html">llvm/IR/DataLayout.h</a>&quot;</span></div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DebugInfoMetadata_8h.html">llvm/IR/DebugInfoMetadata.h</a>&quot;</span></div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DerivedTypes_8h.html">llvm/IR/DerivedTypes.h</a>&quot;</span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Dominators_8h.html">llvm/IR/Dominators.h</a>&quot;</span></div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Instructions_8h.html">llvm/IR/Instructions.h</a>&quot;</span></div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="IntrinsicInst_8h.html">llvm/IR/IntrinsicInst.h</a>&quot;</span></div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LLVMContext_8h.html">llvm/IR/LLVMContext.h</a>&quot;</span></div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Metadata_8h.html">llvm/IR/Metadata.h</a>&quot;</span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="PatternMatch_8h.html">llvm/IR/PatternMatch.h</a>&quot;</span></div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="PredIteratorCache_8h.html">llvm/IR/PredIteratorCache.h</a>&quot;</span></div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="InitializePasses_8h.html">llvm/InitializePasses.h</a>&quot;</span></div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CommandLine_8h.html">llvm/Support/CommandLine.h</a>&quot;</span></div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Debug_8h.html">llvm/Support/Debug.h</a>&quot;</span></div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="raw__ostream_8h.html">llvm/Support/raw_ostream.h</a>&quot;</span></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="TargetOptions_8h.html">llvm/Target/TargetOptions.h</a>&quot;</span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Transforms_2Scalar_8h.html">llvm/Transforms/Scalar.h</a>&quot;</span></div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="AssumeBundleBuilder_8h.html">llvm/Transforms/Utils/AssumeBundleBuilder.h</a>&quot;</span></div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="BasicBlockUtils_8h.html">llvm/Transforms/Utils/BasicBlockUtils.h</a>&quot;</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Transforms_2Utils_2Local_8h.html">llvm/Transforms/Utils/Local.h</a>&quot;</span></div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LoopUtils_8h.html">llvm/Transforms/Utils/LoopUtils.h</a>&quot;</span></div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SSAUpdater_8h.html">llvm/Transforms/Utils/SSAUpdater.h</a>&quot;</span></div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="preprocessor">#include &lt;algorithm&gt;</span></div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="preprocessor">#include &lt;utility&gt;</span></div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespacellvm.html">llvm</a>;</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160; </div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespacellvm.html">llvm</a> {</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="keyword">class </span><a class="code" href="classllvm_1_1LPMUpdater.html">LPMUpdater</a>;</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;} <span class="comment">// namespace llvm</span></div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160; </div>
<div class="line"><a name="l00094"></a><span class="lineno"><a class="line" href="LICM_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">   94</a></span>&#160;<span class="preprocessor">#define DEBUG_TYPE &quot;licm&quot;</span></div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160; </div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(NumCreatedBlocks, <span class="stringliteral">&quot;Number of blocks created&quot;</span>);</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(NumClonedBranches, <span class="stringliteral">&quot;Number of branches cloned&quot;</span>);</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(NumSunk, <span class="stringliteral">&quot;Number of instructions sunk out of loop&quot;</span>);</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(NumHoisted, <span class="stringliteral">&quot;Number of instructions hoisted out of loop&quot;</span>);</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(NumMovedLoads, <span class="stringliteral">&quot;Number of load insts hoisted or sunk&quot;</span>);</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(NumMovedCalls, <span class="stringliteral">&quot;Number of call insts hoisted or sunk&quot;</span>);</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(NumPromotionCandidates, <span class="stringliteral">&quot;Number of promotion candidates&quot;</span>);</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(NumLoadPromoted, <span class="stringliteral">&quot;Number of load-only promotions&quot;</span>);</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(NumLoadStorePromoted, <span class="stringliteral">&quot;Number of load and store promotions&quot;</span>);</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="comment">/// Memory promotion is enabled by default.</span></div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a></div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    <a class="code" href="LICM_8cpp.html#a943a824fb962481a8f6b46f5a17371cc">DisablePromotion</a>(<span class="stringliteral">&quot;disable-licm-promotion&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">false</span>),</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;                     <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Disable memory promotion in LICM pass&quot;</span>));</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160; </div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="LICM_8cpp.html#ac7588f9346497ff9a8a966766c7c6bbc">ControlFlowHoisting</a>(</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    <span class="stringliteral">&quot;licm-control-flow-hoisting&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">false</span>),</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Enable control flow (and PHI) hoisting in LICM&quot;</span>));</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160; </div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a></div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    <a class="code" href="LICM_8cpp.html#aa6d0cb32febae79312745abec8e550c8">SingleThread</a>(<span class="stringliteral">&quot;licm-force-thread-model-single&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">false</span>),</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;                 <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Force thread model single in LICM pass&quot;</span>));</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160; </div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;uint32_t&gt;</a> <a class="code" href="LICM_8cpp.html#af381f6f01f617f2195adc0ab06aee4fd">MaxNumUsesTraversed</a>(</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    <span class="stringliteral">&quot;licm-max-num-uses-traversed&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(8),</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Max num uses visited for identifying load &quot;</span></div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;             <span class="stringliteral">&quot;invariance in loop using invariant start (default = 8)&quot;</span>));</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160; </div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;<span class="comment">// Experimental option to allow imprecision in LICM in pathological cases, in</span></div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;<span class="comment">// exchange for faster compile. This is to be removed if MemorySSA starts to</span></div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;<span class="comment">// address the same issue. LICM calls MemorySSAWalker&#39;s</span></div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;<span class="comment">// getClobberingMemoryAccess, up to the value of the Cap, getting perfect</span></div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<span class="comment">// accuracy. Afterwards, LICM will call into MemorySSA&#39;s getDefiningAccess,</span></div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;<span class="comment">// which may not be precise, since optimizeUses is capped. The result is</span></div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;<span class="comment">// correct, but we may not get as &quot;far up&quot; as possible to get which access is</span></div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;<span class="comment">// clobbering the one queried.</span></div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;<a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;unsigned&gt;</a> <a class="code" href="namespacellvm.html#af0eea3fd894969f858eee273ba9f0b9b">llvm::SetLicmMssaOptCap</a>(</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    <span class="stringliteral">&quot;licm-mssa-optimization-cap&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(100), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Enable imprecision in LICM in pathological cases, in exchange &quot;</span></div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;             <span class="stringliteral">&quot;for faster compile. Caps the MemorySSA clobbering calls.&quot;</span>));</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160; </div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;<span class="comment">// Experimentally, memory promotion carries less importance than sinking and</span></div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;<span class="comment">// hoisting. Limit when we do promotion when using MemorySSA, in order to save</span></div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;<span class="comment">// compile time.</span></div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;unsigned&gt;</a> <a class="code" href="namespacellvm.html#ad9c3fae5a25cf9c407f7b07a86067ab5">llvm::SetLicmMssaNoAccForPromotionCap</a>(</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    <span class="stringliteral">&quot;licm-mssa-max-acc-promotion&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(250), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;[LICM &amp; MemorySSA] When MSSA in LICM is disabled, this has no &quot;</span></div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;             <span class="stringliteral">&quot;effect. When MSSA in LICM is enabled, then this is the maximum &quot;</span></div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;             <span class="stringliteral">&quot;number of accesses allowed to be present in a loop in order to &quot;</span></div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;             <span class="stringliteral">&quot;enable memory promotion.&quot;</span>));</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160; </div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="LICM_8cpp.html#aabae34d2dbed5dde1865f19ccbe4cb81">inSubLoop</a>(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, <a class="code" href="classllvm_1_1Loop.html">Loop</a> *CurLoop, <a class="code" href="classllvm_1_1LoopInfo.html">LoopInfo</a> *LI);</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="LICM_8cpp.html#a20be54e1ec24a63f98accb9d9944b3ed">isNotUsedOrFreeInLoop</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <span class="keyword">const</span> <a class="code" href="classllvm_1_1Loop.html">Loop</a> *CurLoop,</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;                                  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LoopSafetyInfo.html">LoopSafetyInfo</a> *SafetyInfo,</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;                                  <a class="code" href="classllvm_1_1TargetTransformInfo.html">TargetTransformInfo</a> *<a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>, <span class="keywordtype">bool</span> &amp;FreeInLoop,</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;                                  <span class="keywordtype">bool</span> LoopNestMode);</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="LICM_8cpp.html#a3a3a3183a327e1186dbe900032390ec6">hoist</a>(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <span class="keyword">const</span> <a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> *DT, <span class="keyword">const</span> <a class="code" href="classllvm_1_1Loop.html">Loop</a> *CurLoop,</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;                  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Dest, <a class="code" href="classllvm_1_1ICFLoopSafetyInfo.html">ICFLoopSafetyInfo</a> *SafetyInfo,</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;                  <a class="code" href="classllvm_1_1MemorySSAUpdater.html">MemorySSAUpdater</a> &amp;MSSAU, <a class="code" href="classllvm_1_1ScalarEvolution.html">ScalarEvolution</a> *SE,</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;                  <a class="code" href="classllvm_1_1OptimizationRemarkEmitter.html">OptimizationRemarkEmitter</a> *ORE);</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="LICM_8cpp.html#a52b8b307321627e612e77041260ece84">sink</a>(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1LoopInfo.html">LoopInfo</a> *LI, <a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> *DT,</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;                 <span class="keyword">const</span> <a class="code" href="classllvm_1_1Loop.html">Loop</a> *CurLoop, <a class="code" href="classllvm_1_1ICFLoopSafetyInfo.html">ICFLoopSafetyInfo</a> *SafetyInfo,</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;                 <a class="code" href="classllvm_1_1MemorySSAUpdater.html">MemorySSAUpdater</a> &amp;MSSAU, <a class="code" href="classllvm_1_1OptimizationRemarkEmitter.html">OptimizationRemarkEmitter</a> *ORE);</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="LICM_8cpp.html#ab63d5eb7a9919d4e5f2c8d614e9bda97">isSafeToExecuteUnconditionally</a>(</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;Inst, <span class="keyword">const</span> <a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> *DT, <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetLibraryInfo.html">TargetLibraryInfo</a> *TLI,</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1Loop.html">Loop</a> *CurLoop, <span class="keyword">const</span> <a class="code" href="classllvm_1_1LoopSafetyInfo.html">LoopSafetyInfo</a> *SafetyInfo,</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    <a class="code" href="classllvm_1_1OptimizationRemarkEmitter.html">OptimizationRemarkEmitter</a> *ORE, <span class="keyword">const</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *CtxI,</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    <a class="code" href="classllvm_1_1AssumptionCache.html">AssumptionCache</a> *AC, <span class="keywordtype">bool</span> AllowSpeculation);</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="LICM_8cpp.html#a0a473c402b8ddf9660f82fa84ba38b59">pointerInvalidatedByLoop</a>(<a class="code" href="classllvm_1_1MemorySSA.html">MemorySSA</a> *MSSA, <a class="code" href="classllvm_1_1MemoryUse.html">MemoryUse</a> *MU,</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;                                     <a class="code" href="classllvm_1_1Loop.html">Loop</a> *CurLoop, <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>,</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;                                     <a class="code" href="classllvm_1_1SinkAndHoistLICMFlags.html">SinkAndHoistLICMFlags</a> &amp;Flags);</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="LICM_8cpp.html#aed7e046ac6f7dd5ff0edb6e7b7a30e2e">pointerInvalidatedByBlock</a>(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> &amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, <a class="code" href="classllvm_1_1MemorySSA.html">MemorySSA</a> &amp;MSSA,</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;                                      <a class="code" href="classllvm_1_1MemoryUse.html">MemoryUse</a> &amp;MU);</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="LICM_8cpp.html#a25f0b41add9507b8eafadfbc4a090d6c">cloneInstructionInExitBlock</a>(</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> &amp;ExitBlock, <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> &amp;PN, <span class="keyword">const</span> <a class="code" href="classllvm_1_1LoopInfo.html">LoopInfo</a> *LI,</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1LoopSafetyInfo.html">LoopSafetyInfo</a> *SafetyInfo, <a class="code" href="classllvm_1_1MemorySSAUpdater.html">MemorySSAUpdater</a> &amp;MSSAU);</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160; </div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="LICM_8cpp.html#ab0cfc793d55940eac67854827dd365e9">eraseInstruction</a>(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1ICFLoopSafetyInfo.html">ICFLoopSafetyInfo</a> &amp;SafetyInfo,</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;                             <a class="code" href="classllvm_1_1MemorySSAUpdater.html">MemorySSAUpdater</a> &amp;MSSAU);</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160; </div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="LICM_8cpp.html#a4d17de7bbbee910e1e79e900ec72129f">moveInstructionBefore</a>(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;Dest,</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;                                  <a class="code" href="classllvm_1_1ICFLoopSafetyInfo.html">ICFLoopSafetyInfo</a> &amp;SafetyInfo,</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;                                  <a class="code" href="classllvm_1_1MemorySSAUpdater.html">MemorySSAUpdater</a> &amp;MSSAU, <a class="code" href="classllvm_1_1ScalarEvolution.html">ScalarEvolution</a> *SE);</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160; </div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="LICM_8cpp.html#a8046d863469d9c33287fa4a673d00571">foreachMemoryAccess</a>(<a class="code" href="classllvm_1_1MemorySSA.html">MemorySSA</a> *MSSA, <a class="code" href="classllvm_1_1Loop.html">Loop</a> *L,</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;                                <a class="code" href="classllvm_1_1function__ref.html">function_ref</a>&lt;<span class="keywordtype">void</span>(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *)&gt; Fn);</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;<span class="keyword">using</span> <a class="code" href="LICM_8cpp.html#ada0f9c9edeb41edd1e5fc9e879b9dafc">PointersAndHasReadsOutsideSet</a> =</div>
<div class="line"><a name="l00183"></a><span class="lineno"><a class="line" href="LICM_8cpp.html#ada0f9c9edeb41edd1e5fc9e879b9dafc">  183</a></span>&#160;    std::pair&lt;SmallSetVector&lt;Value *, 8&gt;, <span class="keywordtype">bool</span>&gt;;</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;PointersAndHasReadsOutsideSet, 0&gt;</a></div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;<a class="code" href="LICM_8cpp.html#a37ddbdd8cb4efa5072282498fdc1ac65">collectPromotionCandidates</a>(<a class="code" href="classllvm_1_1MemorySSA.html">MemorySSA</a> *MSSA, <a class="code" href="classllvm_1_1AAResults.html">AliasAnalysis</a> *AA, <a class="code" href="classllvm_1_1Loop.html">Loop</a> *L);</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160; </div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;<span class="keyword">namespace </span>{</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;<span class="keyword">struct </span>LoopInvariantCodeMotion {</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;  <span class="keywordtype">bool</span> runOnLoop(<a class="code" href="classllvm_1_1Loop.html">Loop</a> *L, <a class="code" href="classllvm_1_1AAResults.html">AAResults</a> *AA, <a class="code" href="classllvm_1_1LoopInfo.html">LoopInfo</a> *LI, <a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> *DT,</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;                 <a class="code" href="classllvm_1_1AssumptionCache.html">AssumptionCache</a> *AC, <a class="code" href="classllvm_1_1TargetLibraryInfo.html">TargetLibraryInfo</a> *TLI,</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;                 <a class="code" href="classllvm_1_1TargetTransformInfo.html">TargetTransformInfo</a> *<a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>, <a class="code" href="classllvm_1_1ScalarEvolution.html">ScalarEvolution</a> *SE, <a class="code" href="classllvm_1_1MemorySSA.html">MemorySSA</a> *MSSA,</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;                 <a class="code" href="classllvm_1_1OptimizationRemarkEmitter.html">OptimizationRemarkEmitter</a> *ORE, <span class="keywordtype">bool</span> LoopNestMode = <span class="keyword">false</span>);</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160; </div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;  LoopInvariantCodeMotion(<span class="keywordtype">unsigned</span> LicmMssaOptCap,</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;                          <span class="keywordtype">unsigned</span> LicmMssaNoAccForPromotionCap,</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;                          <span class="keywordtype">bool</span> LicmAllowSpeculation)</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;      : LicmMssaOptCap(LicmMssaOptCap),</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;        LicmMssaNoAccForPromotionCap(LicmMssaNoAccForPromotionCap),</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;        LicmAllowSpeculation(LicmAllowSpeculation) {}</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160; </div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;<span class="keyword">private</span>:</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;  <span class="keywordtype">unsigned</span> LicmMssaOptCap;</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;  <span class="keywordtype">unsigned</span> LicmMssaNoAccForPromotionCap;</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;  <span class="keywordtype">bool</span> LicmAllowSpeculation;</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;};</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160; </div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;<span class="keyword">struct </span>LegacyLICMPass : <span class="keyword">public</span> <a class="code" href="classllvm_1_1LoopPass.html">LoopPass</a> {</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">char</span> <a class="code" href="namespacellvm_1_1CallingConv.html#a188c0836f8c3528401f1c236fd93b977">ID</a>; <span class="comment">// Pass identification, replacement for typeid</span></div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;  LegacyLICMPass(</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;      <span class="keywordtype">unsigned</span> LicmMssaOptCap = <a class="code" href="namespacellvm.html#af0eea3fd894969f858eee273ba9f0b9b">SetLicmMssaOptCap</a>,</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;      <span class="keywordtype">unsigned</span> LicmMssaNoAccForPromotionCap = <a class="code" href="namespacellvm.html#ad9c3fae5a25cf9c407f7b07a86067ab5">SetLicmMssaNoAccForPromotionCap</a>,</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;      <span class="keywordtype">bool</span> LicmAllowSpeculation = <span class="keyword">true</span>)</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;      : <a class="code" href="classllvm_1_1LoopPass.html">LoopPass</a>(<a class="code" href="namespacellvm_1_1CallingConv.html#a188c0836f8c3528401f1c236fd93b977">ID</a>), LICM(LicmMssaOptCap, LicmMssaNoAccForPromotionCap,</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;                           LicmAllowSpeculation) {</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    <a class="code" href="namespacellvm.html#a2d13a2fc9f1e7b66fb65014013f41614">initializeLegacyLICMPassPass</a>(*<a class="code" href="classllvm_1_1PassRegistry.html#a05a729900b76c89e808c6c3094921b2f">PassRegistry::getPassRegistry</a>());</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;  }</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160; </div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;  <span class="keywordtype">bool</span> runOnLoop(<a class="code" href="classllvm_1_1Loop.html">Loop</a> *L, <a class="code" href="classllvm_1_1LPPassManager.html">LPPassManager</a> &amp;LPM)<span class="keyword"> override </span>{</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    <span class="keywordflow">if</span> (skipLoop(L))</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160; </div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Perform LICM on Loop with header at block &quot;</span></div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;                      &lt;&lt; L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a58c5b170ea68b41e94ebb0019523a68f">getHeader</a>()-&gt;<a class="code" href="classllvm_1_1Value.html#a391ffe96dd8c686b0d2620c7fb25f8a5">getNameOrAsOperand</a>() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160; </div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    <a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> = L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a58c5b170ea68b41e94ebb0019523a68f">getHeader</a>()-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a38bee869ad41aebfef3de2641b12004c">getParent</a>();</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160; </div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    <span class="keyword">auto</span> *SE = getAnalysisIfAvailable&lt;ScalarEvolutionWrapperPass&gt;();</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    <a class="code" href="classllvm_1_1MemorySSA.html">MemorySSA</a> *MSSA = &amp;getAnalysis&lt;MemorySSAWrapperPass&gt;().getMSSA();</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    <span class="comment">// For the old PM, we can&#39;t use OptimizationRemarkEmitter as an analysis</span></div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    <span class="comment">// pass. Function analyses need to be preserved across loop transformations</span></div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    <span class="comment">// but ORE cannot be preserved (see comment before the pass definition).</span></div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    <a class="code" href="classllvm_1_1OptimizationRemarkEmitter.html">OptimizationRemarkEmitter</a> ORE(L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a58c5b170ea68b41e94ebb0019523a68f">getHeader</a>()-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a38bee869ad41aebfef3de2641b12004c">getParent</a>());</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    <span class="keywordflow">return</span> LICM.runOnLoop(</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;        L, &amp;getAnalysis&lt;AAResultsWrapperPass&gt;().getAAResults(),</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;        &amp;getAnalysis&lt;LoopInfoWrapperPass&gt;().getLoopInfo(),</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;        &amp;getAnalysis&lt;DominatorTreeWrapperPass&gt;().getDomTree(),</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;        &amp;getAnalysis&lt;AssumptionCacheTracker&gt;().getAssumptionCache(*<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>),</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;        &amp;getAnalysis&lt;TargetLibraryInfoWrapperPass&gt;().getTLI(*<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>),</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;        &amp;getAnalysis&lt;TargetTransformInfoWrapperPass&gt;().getTTI(*<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>),</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;        SE ? &amp;SE-&gt;getSE() : <span class="keyword">nullptr</span>, MSSA, &amp;ORE);</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;  }</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;<span class="comment">  /// This transformation requires natural loop information &amp; requires that</span></div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;<span class="comment">  /// loop preheaders be inserted into the CFG...</span></div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;<span class="comment">  ///</span></div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> getAnalysisUsage(<a class="code" href="classllvm_1_1AnalysisUsage.html">AnalysisUsage</a> &amp;AU)<span class="keyword"> const override </span>{</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#a884f90190bca4bd354f2d5c91c264028">addPreserved</a>&lt;<a class="code" href="classllvm_1_1DominatorTreeWrapperPass.html">DominatorTreeWrapperPass</a>&gt;();</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#a884f90190bca4bd354f2d5c91c264028">addPreserved</a>&lt;<a class="code" href="classllvm_1_1LoopInfoWrapperPass.html">LoopInfoWrapperPass</a>&gt;();</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">addRequired</a>&lt;<a class="code" href="classllvm_1_1TargetLibraryInfoWrapperPass.html">TargetLibraryInfoWrapperPass</a>&gt;();</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">addRequired</a>&lt;<a class="code" href="classllvm_1_1MemorySSAWrapperPass.html">MemorySSAWrapperPass</a>&gt;();</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#a884f90190bca4bd354f2d5c91c264028">addPreserved</a>&lt;<a class="code" href="classllvm_1_1MemorySSAWrapperPass.html">MemorySSAWrapperPass</a>&gt;();</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">addRequired</a>&lt;<a class="code" href="classllvm_1_1TargetTransformInfoWrapperPass.html">TargetTransformInfoWrapperPass</a>&gt;();</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">addRequired</a>&lt;<a class="code" href="classllvm_1_1AssumptionCacheTracker.html">AssumptionCacheTracker</a>&gt;();</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    <a class="code" href="namespacellvm.html#a92caae34bfacc63bda0f23d5d005a89e">getLoopAnalysisUsage</a>(AU);</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    <a class="code" href="classllvm_1_1LazyBlockFrequencyInfoPass.html#a8969b22606511eb0e2b2e028a3c0f332">LazyBlockFrequencyInfoPass::getLazyBFIAnalysisUsage</a>(AU);</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#a884f90190bca4bd354f2d5c91c264028">addPreserved</a>&lt;<a class="code" href="classllvm_1_1LazyBlockFrequencyInfoPass.html">LazyBlockFrequencyInfoPass</a>&gt;();</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#a884f90190bca4bd354f2d5c91c264028">addPreserved</a>&lt;<a class="code" href="classllvm_1_1LazyBranchProbabilityInfoPass.html">LazyBranchProbabilityInfoPass</a>&gt;();</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;  }</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160; </div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;<span class="keyword">private</span>:</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;  LoopInvariantCodeMotion LICM;</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;};</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;} <span class="comment">// namespace</span></div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160; </div>
<div class="line"><a name="l00265"></a><span class="lineno"><a class="line" href="classllvm_1_1LICMPass.html#aa540c3d95adfef29cc520491ce4ebdab">  265</a></span>&#160;<a class="code" href="classllvm_1_1PreservedAnalyses.html">PreservedAnalyses</a> <a class="code" href="classllvm_1_1LICMPass.html#aa540c3d95adfef29cc520491ce4ebdab">LICMPass::run</a>(<a class="code" href="classllvm_1_1Loop.html">Loop</a> &amp;L, <a class="code" href="classllvm_1_1AnalysisManager.html">LoopAnalysisManager</a> &amp;AM,</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;                                <a class="code" href="structllvm_1_1LoopStandardAnalysisResults.html">LoopStandardAnalysisResults</a> &amp;AR, <a class="code" href="classllvm_1_1LPMUpdater.html">LPMUpdater</a> &amp;) {</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;  <span class="keywordflow">if</span> (!AR.<a class="code" href="structllvm_1_1LoopStandardAnalysisResults.html#a1cfb392c267da10531478c2f42baa603">MSSA</a>)</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    <a class="code" href="namespacellvm.html#a7f2a3d4dcfee70225988aec53ff1e173">report_fatal_error</a>(<span class="stringliteral">&quot;LICM requires MemorySSA (loop-mssa)&quot;</span>,</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;                       <span class="comment">/*GenCrashDiag*/</span><span class="keyword">false</span>);</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160; </div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;  <span class="comment">// For the new PM, we also can&#39;t use OptimizationRemarkEmitter as an analysis</span></div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;  <span class="comment">// pass.  Function analyses need to be preserved across loop transformations</span></div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;  <span class="comment">// but ORE cannot be preserved (see comment before the pass definition).</span></div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;  <a class="code" href="classllvm_1_1OptimizationRemarkEmitter.html">OptimizationRemarkEmitter</a> ORE(L.<a class="code" href="classllvm_1_1LoopBase.html#a58c5b170ea68b41e94ebb0019523a68f">getHeader</a>()-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a38bee869ad41aebfef3de2641b12004c">getParent</a>());</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160; </div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;  LoopInvariantCodeMotion LICM(Opts.<a class="code" href="structllvm_1_1LICMOptions.html#a24c46f6e3f03db048c13edbb1f36a466">MssaOptCap</a>, Opts.<a class="code" href="structllvm_1_1LICMOptions.html#a3412294e2ef0260cffe61bf9dda53157">MssaNoAccForPromotionCap</a>,</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;                               Opts.<a class="code" href="structllvm_1_1LICMOptions.html#ae4652abbffa2d78b52cd028b1995726a">AllowSpeculation</a>);</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;  <span class="keywordflow">if</span> (!LICM.runOnLoop(&amp;L, &amp;AR.<a class="code" href="structllvm_1_1LoopStandardAnalysisResults.html#abd7da877be8576011299f4fcaaf299be">AA</a>, &amp;AR.<a class="code" href="structllvm_1_1LoopStandardAnalysisResults.html#aa09379aa4435be95eb717dd9b5d8b4c5">LI</a>, &amp;AR.<a class="code" href="structllvm_1_1LoopStandardAnalysisResults.html#aaa96df870a1b3d7ffc56bec3eb0b0cff">DT</a>, &amp;AR.<a class="code" href="structllvm_1_1LoopStandardAnalysisResults.html#a902b4712394a3b3450893634b3302893">AC</a>, &amp;AR.<a class="code" href="structllvm_1_1LoopStandardAnalysisResults.html#a9e363c1eaf112166372e2d52704981fb">TLI</a>, &amp;AR.<a class="code" href="structllvm_1_1LoopStandardAnalysisResults.html#a3444a9359f5f17f1694f82c41d5fd574">TTI</a>,</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;                      &amp;AR.<a class="code" href="structllvm_1_1LoopStandardAnalysisResults.html#a124376878e24aef4252795ba9fea420f">SE</a>, AR.<a class="code" href="structllvm_1_1LoopStandardAnalysisResults.html#a1cfb392c267da10531478c2f42baa603">MSSA</a>, &amp;ORE))</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1PreservedAnalyses.html#a1258a1ff55557c27684010ebd7283712">PreservedAnalyses::all</a>();</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160; </div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;  <span class="keyword">auto</span> PA = <a class="code" href="namespacellvm.html#ac7294ba4e105807674fe3a394437fcc1">getLoopPassPreservedAnalyses</a>();</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160; </div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;  PA.preserve&lt;<a class="code" href="classllvm_1_1DominatorTreeAnalysis.html">DominatorTreeAnalysis</a>&gt;();</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;  PA.preserve&lt;<a class="code" href="classllvm_1_1LoopAnalysis.html">LoopAnalysis</a>&gt;();</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;  PA.preserve&lt;<a class="code" href="classllvm_1_1MemorySSAAnalysis.html">MemorySSAAnalysis</a>&gt;();</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160; </div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;  <span class="keywordflow">return</span> PA;</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;}</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160; </div>
<div class="line"><a name="l00291"></a><span class="lineno"><a class="line" href="classllvm_1_1LICMPass.html#a60cd761f9058b8203f4a4d8fbb31fb98">  291</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1LICMPass.html#a60cd761f9058b8203f4a4d8fbb31fb98">LICMPass::printPipeline</a>(</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    <a class="code" href="classllvm_1_1raw__ostream.html">raw_ostream</a> &amp;<a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a>, <a class="code" href="classllvm_1_1function__ref.html">function_ref</a>&lt;<a class="code" href="classllvm_1_1StringRef.html">StringRef</a>(<a class="code" href="classllvm_1_1StringRef.html">StringRef</a>)&gt; MapClassName2PassName) {</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;  <span class="keyword">static_cast&lt;</span><a class="code" href="structllvm_1_1PassInfoMixin.html">PassInfoMixin&lt;LICMPass&gt;</a> *<span class="keyword">&gt;</span>(<span class="keyword">this</span>)-&gt;<a class="code" href="classllvm_1_1LICMPass.html#a60cd761f9058b8203f4a4d8fbb31fb98">printPipeline</a>(</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;      <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a>, MapClassName2PassName);</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160; </div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;  <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; <span class="stringliteral">&quot;&lt;&quot;</span>;</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;  <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; (Opts.<a class="code" href="structllvm_1_1LICMOptions.html#ae4652abbffa2d78b52cd028b1995726a">AllowSpeculation</a> ? <span class="stringliteral">&quot;&quot;</span> : <span class="stringliteral">&quot;no-&quot;</span>) &lt;&lt; <span class="stringliteral">&quot;allowspeculation&quot;</span>;</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;  <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; <span class="stringliteral">&quot;&gt;&quot;</span>;</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;}</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160; </div>
<div class="line"><a name="l00301"></a><span class="lineno"><a class="line" href="classllvm_1_1LNICMPass.html#a1ddd3ffe6782be6b893dcf33dcf4e3c0">  301</a></span>&#160;<a class="code" href="classllvm_1_1PreservedAnalyses.html">PreservedAnalyses</a> <a class="code" href="classllvm_1_1LNICMPass.html#a1ddd3ffe6782be6b893dcf33dcf4e3c0">LNICMPass::run</a>(<a class="code" href="classllvm_1_1LoopNest.html">LoopNest</a> &amp;LN, <a class="code" href="classllvm_1_1AnalysisManager.html">LoopAnalysisManager</a> &amp;AM,</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;                                 <a class="code" href="structllvm_1_1LoopStandardAnalysisResults.html">LoopStandardAnalysisResults</a> &amp;AR,</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;                                 <a class="code" href="classllvm_1_1LPMUpdater.html">LPMUpdater</a> &amp;) {</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;  <span class="keywordflow">if</span> (!AR.<a class="code" href="structllvm_1_1LoopStandardAnalysisResults.html#a1cfb392c267da10531478c2f42baa603">MSSA</a>)</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    <a class="code" href="namespacellvm.html#a7f2a3d4dcfee70225988aec53ff1e173">report_fatal_error</a>(<span class="stringliteral">&quot;LNICM requires MemorySSA (loop-mssa)&quot;</span>,</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;                       <span class="comment">/*GenCrashDiag*/</span><span class="keyword">false</span>);</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160; </div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;  <span class="comment">// For the new PM, we also can&#39;t use OptimizationRemarkEmitter as an analysis</span></div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;  <span class="comment">// pass.  Function analyses need to be preserved across loop transformations</span></div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;  <span class="comment">// but ORE cannot be preserved (see comment before the pass definition).</span></div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;  <a class="code" href="classllvm_1_1OptimizationRemarkEmitter.html">OptimizationRemarkEmitter</a> ORE(LN.<a class="code" href="classllvm_1_1LoopNest.html#ac047689641fc4a651c1fc58b85dc555b">getParent</a>());</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160; </div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;  LoopInvariantCodeMotion LICM(Opts.<a class="code" href="structllvm_1_1LICMOptions.html#a24c46f6e3f03db048c13edbb1f36a466">MssaOptCap</a>, Opts.<a class="code" href="structllvm_1_1LICMOptions.html#a3412294e2ef0260cffe61bf9dda53157">MssaNoAccForPromotionCap</a>,</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;                               Opts.<a class="code" href="structllvm_1_1LICMOptions.html#ae4652abbffa2d78b52cd028b1995726a">AllowSpeculation</a>);</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160; </div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;  <a class="code" href="classllvm_1_1Loop.html">Loop</a> &amp;OutermostLoop = LN.<a class="code" href="classllvm_1_1LoopNest.html#ac9a27bb5250b3aadddc4696c07678dd0">getOutermostLoop</a>();</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;  <span class="keywordtype">bool</span> Changed = LICM.runOnLoop(&amp;OutermostLoop, &amp;AR.<a class="code" href="structllvm_1_1LoopStandardAnalysisResults.html#abd7da877be8576011299f4fcaaf299be">AA</a>, &amp;AR.<a class="code" href="structllvm_1_1LoopStandardAnalysisResults.html#aa09379aa4435be95eb717dd9b5d8b4c5">LI</a>, &amp;AR.<a class="code" href="structllvm_1_1LoopStandardAnalysisResults.html#aaa96df870a1b3d7ffc56bec3eb0b0cff">DT</a>, &amp;AR.<a class="code" href="structllvm_1_1LoopStandardAnalysisResults.html#a902b4712394a3b3450893634b3302893">AC</a>,</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;                                &amp;AR.<a class="code" href="structllvm_1_1LoopStandardAnalysisResults.html#a9e363c1eaf112166372e2d52704981fb">TLI</a>, &amp;AR.<a class="code" href="structllvm_1_1LoopStandardAnalysisResults.html#a3444a9359f5f17f1694f82c41d5fd574">TTI</a>, &amp;AR.<a class="code" href="structllvm_1_1LoopStandardAnalysisResults.html#a124376878e24aef4252795ba9fea420f">SE</a>, AR.<a class="code" href="structllvm_1_1LoopStandardAnalysisResults.html#a1cfb392c267da10531478c2f42baa603">MSSA</a>, &amp;ORE, <span class="keyword">true</span>);</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160; </div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;  <span class="keywordflow">if</span> (!Changed)</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1PreservedAnalyses.html#a1258a1ff55557c27684010ebd7283712">PreservedAnalyses::all</a>();</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160; </div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;  <span class="keyword">auto</span> PA = <a class="code" href="namespacellvm.html#ac7294ba4e105807674fe3a394437fcc1">getLoopPassPreservedAnalyses</a>();</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160; </div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;  PA.preserve&lt;<a class="code" href="classllvm_1_1DominatorTreeAnalysis.html">DominatorTreeAnalysis</a>&gt;();</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;  PA.preserve&lt;<a class="code" href="classllvm_1_1LoopAnalysis.html">LoopAnalysis</a>&gt;();</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;  PA.preserve&lt;<a class="code" href="classllvm_1_1MemorySSAAnalysis.html">MemorySSAAnalysis</a>&gt;();</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160; </div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;  <span class="keywordflow">return</span> PA;</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;}</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160; </div>
<div class="line"><a name="l00332"></a><span class="lineno"><a class="line" href="classllvm_1_1LNICMPass.html#aac0763a4080e98e1e198ea76b2d0ccc5">  332</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1LNICMPass.html#aac0763a4080e98e1e198ea76b2d0ccc5">LNICMPass::printPipeline</a>(</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    <a class="code" href="classllvm_1_1raw__ostream.html">raw_ostream</a> &amp;<a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a>, <a class="code" href="classllvm_1_1function__ref.html">function_ref</a>&lt;<a class="code" href="classllvm_1_1StringRef.html">StringRef</a>(<a class="code" href="classllvm_1_1StringRef.html">StringRef</a>)&gt; MapClassName2PassName) {</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;  <span class="keyword">static_cast&lt;</span><a class="code" href="structllvm_1_1PassInfoMixin.html">PassInfoMixin&lt;LNICMPass&gt;</a> *<span class="keyword">&gt;</span>(<span class="keyword">this</span>)-&gt;<a class="code" href="classllvm_1_1LNICMPass.html#aac0763a4080e98e1e198ea76b2d0ccc5">printPipeline</a>(</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;      <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a>, MapClassName2PassName);</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160; </div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;  <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; <span class="stringliteral">&quot;&lt;&quot;</span>;</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;  <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; (Opts.<a class="code" href="structllvm_1_1LICMOptions.html#ae4652abbffa2d78b52cd028b1995726a">AllowSpeculation</a> ? <span class="stringliteral">&quot;&quot;</span> : <span class="stringliteral">&quot;no-&quot;</span>) &lt;&lt; <span class="stringliteral">&quot;allowspeculation&quot;</span>;</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;  <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; <span class="stringliteral">&quot;&gt;&quot;</span>;</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;}</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160; </div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;<span class="keywordtype">char</span> <a class="code" href="namespacellvm_1_1AArch64PACKey.html#abf4394f452bde3f544999858d71e4b46">LegacyLICMPass::ID</a> = 0;</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;<a class="code" href="LICM_8cpp.html#aea8a4c201b5630473d49bddbb5f5c221">INITIALIZE_PASS_BEGIN</a>(LegacyLICMPass, <span class="stringliteral">&quot;licm&quot;</span>, <span class="stringliteral">&quot;Loop Invariant Code Motion&quot;</span>,</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;                      <span class="keyword">false</span>, <span class="keyword">false</span>)</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;<a class="code" href="SVEIntrinsicOpts_8cpp.html#a2bb87eb1bcbc74783a83ae945eb8fa36">INITIALIZE_PASS_DEPENDENCY</a>(<a class="code" href="classllvm_1_1LoopPass.html">LoopPass</a>)</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;<a class="code" href="SVEIntrinsicOpts_8cpp.html#a2bb87eb1bcbc74783a83ae945eb8fa36">INITIALIZE_PASS_DEPENDENCY</a>(<a class="code" href="classllvm_1_1TargetLibraryInfoWrapperPass.html">TargetLibraryInfoWrapperPass</a>)</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;<a class="code" href="SVEIntrinsicOpts_8cpp.html#a2bb87eb1bcbc74783a83ae945eb8fa36">INITIALIZE_PASS_DEPENDENCY</a>(<a class="code" href="classllvm_1_1TargetTransformInfoWrapperPass.html">TargetTransformInfoWrapperPass</a>)</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;<a class="code" href="SVEIntrinsicOpts_8cpp.html#a2bb87eb1bcbc74783a83ae945eb8fa36">INITIALIZE_PASS_DEPENDENCY</a>(<a class="code" href="classllvm_1_1MemorySSAWrapperPass.html">MemorySSAWrapperPass</a>)</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;<a class="code" href="SVEIntrinsicOpts_8cpp.html#a2bb87eb1bcbc74783a83ae945eb8fa36">INITIALIZE_PASS_DEPENDENCY</a>(LazyBFIPass)</div>
<div class="line"><a name="l00350"></a><span class="lineno"><a class="line" href="LICM_8cpp.html#a7db10a6ced2f9a67bd4f40d5ed05489d">  350</a></span>&#160;<a class="code" href="PassSupport_8h.html#a74ce8276b89067e806f67c45a6d92575">INITIALIZE_PASS_END</a>(LegacyLICMPass, &quot;<a class="code" href="LICM_8cpp.html#a9daa918c2c6be9aa9ca401f69cc75302">licm</a>&quot;, &quot;<a class="code" href="classllvm_1_1Loop.html">Loop</a> Invariant Code <a class="code" href="LICM_8cpp.html#a7db10a6ced2f9a67bd4f40d5ed05489d">Motion</a>&quot;, <a class="code" href="namespacefalse.html">false</a>,</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;                    <a class="code" href="namespacefalse.html">false</a>)</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160; </div>
<div class="line"><a name="l00353"></a><span class="lineno"><a class="line" href="namespacellvm.html#a52fe42f45635485443c10aa9de4e7825">  353</a></span>&#160;<a class="code" href="classllvm_1_1Pass.html">Pass</a> *<a class="code" href="namespacellvm.html">llvm</a>::<a class="code" href="namespacellvm.html#a52fe42f45635485443c10aa9de4e7825">createLICMPass</a>() { <span class="keywordflow">return</span> <span class="keyword">new</span> LegacyLICMPass(); }</div>
<div class="line"><a name="l00354"></a><span class="lineno"><a class="line" href="namespacellvm.html#a661c95fb716ed869a3b790ee81abc86d">  354</a></span>&#160;<a class="code" href="classllvm_1_1Pass.html">Pass</a> *<a class="code" href="namespacellvm.html#a52fe42f45635485443c10aa9de4e7825">llvm::createLICMPass</a>(<span class="keywordtype">unsigned</span> LicmMssaOptCap,</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;                           <span class="keywordtype">unsigned</span> LicmMssaNoAccForPromotionCap,</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;                           <span class="keywordtype">bool</span> LicmAllowSpeculation) {</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">new</span> LegacyLICMPass(LicmMssaOptCap, LicmMssaNoAccForPromotionCap,</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;                            LicmAllowSpeculation);</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;}</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160; </div>
<div class="line"><a name="l00361"></a><span class="lineno"><a class="line" href="classllvm_1_1SinkAndHoistLICMFlags.html#a77e141cb6d8c31d5ffe92c577e3fac3a">  361</a></span>&#160;<a class="code" href="classllvm_1_1SinkAndHoistLICMFlags.html#a0ea8d15c6ae6458dcc802674099846e2">llvm::SinkAndHoistLICMFlags::SinkAndHoistLICMFlags</a>(<span class="keywordtype">bool</span> IsSink, <a class="code" href="classllvm_1_1Loop.html">Loop</a> *L,</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;                                                   <a class="code" href="classllvm_1_1MemorySSA.html">MemorySSA</a> *MSSA)</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;    : <a class="code" href="classllvm_1_1SinkAndHoistLICMFlags.html">SinkAndHoistLICMFlags</a>(<a class="code" href="namespacellvm.html#af0eea3fd894969f858eee273ba9f0b9b">SetLicmMssaOptCap</a>, <a class="code" href="namespacellvm.html#ad9c3fae5a25cf9c407f7b07a86067ab5">SetLicmMssaNoAccForPromotionCap</a>,</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;                            IsSink, L, MSSA) {}</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160; </div>
<div class="line"><a name="l00366"></a><span class="lineno"><a class="line" href="classllvm_1_1SinkAndHoistLICMFlags.html#a0ea8d15c6ae6458dcc802674099846e2">  366</a></span>&#160;<a class="code" href="classllvm_1_1SinkAndHoistLICMFlags.html#a0ea8d15c6ae6458dcc802674099846e2">llvm::SinkAndHoistLICMFlags::SinkAndHoistLICMFlags</a>(</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    <span class="keywordtype">unsigned</span> LicmMssaOptCap, <span class="keywordtype">unsigned</span> LicmMssaNoAccForPromotionCap, <span class="keywordtype">bool</span> IsSink,</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    <a class="code" href="classllvm_1_1Loop.html">Loop</a> *L, <a class="code" href="classllvm_1_1MemorySSA.html">MemorySSA</a> *MSSA)</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    : LicmMssaOptCap(LicmMssaOptCap),</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;      LicmMssaNoAccForPromotionCap(LicmMssaNoAccForPromotionCap),</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;      IsSink(IsSink) {</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(((L != <span class="keyword">nullptr</span>) == (MSSA != <span class="keyword">nullptr</span>)) &amp;&amp;</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;         <span class="stringliteral">&quot;Unexpected values for SinkAndHoistLICMFlags&quot;</span>);</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;  <span class="keywordflow">if</span> (!MSSA)</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160; </div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;  <span class="keywordtype">unsigned</span> AccessCapCount = 0;</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> : L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a5cc113cb783ab6e5ca7b69241431c19c">getBlocks</a>())</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">const</span> <span class="keyword">auto</span> *Accesses = MSSA-&gt;<a class="code" href="classllvm_1_1MemorySSA.html#aaff19b909f903fe2a431e97424ffced5">getBlockAccesses</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>))</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;MA : *Accesses) {</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;        (void)MA;</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;        ++AccessCapCount;</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;        <span class="keywordflow">if</span> (AccessCapCount &gt; <a class="code" href="classllvm_1_1SinkAndHoistLICMFlags.html#a5b17bcf5d3d17fb80bc652430ef0dc7d">LicmMssaNoAccForPromotionCap</a>) {</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;          <a class="code" href="classllvm_1_1SinkAndHoistLICMFlags.html#a000032fb000f184a0e40d407d3c68a9b">NoOfMemAccTooLarge</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;          <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;        }</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;      }</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;}</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;<span class="comment">/// Hoist expressions out of the specified loop. Note, alias info for inner</span></div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;<span class="comment">/// loop is not preserved so it is not a good idea to run LICM multiple</span></div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;<span class="comment">/// times on one loop.</span></div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> LoopInvariantCodeMotion::runOnLoop(<a class="code" href="classllvm_1_1Loop.html">Loop</a> *L, <a class="code" href="classllvm_1_1AAResults.html">AAResults</a> *AA, <a class="code" href="classllvm_1_1LoopInfo.html">LoopInfo</a> *LI,</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;                                        <a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> *DT, <a class="code" href="classllvm_1_1AssumptionCache.html">AssumptionCache</a> *AC,</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;                                        <a class="code" href="classllvm_1_1TargetLibraryInfo.html">TargetLibraryInfo</a> *TLI,</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;                                        <a class="code" href="classllvm_1_1TargetTransformInfo.html">TargetTransformInfo</a> *<a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>,</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;                                        <a class="code" href="classllvm_1_1ScalarEvolution.html">ScalarEvolution</a> *SE, <a class="code" href="classllvm_1_1MemorySSA.html">MemorySSA</a> *MSSA,</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;                                        <a class="code" href="classllvm_1_1OptimizationRemarkEmitter.html">OptimizationRemarkEmitter</a> *ORE,</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;                                        <span class="keywordtype">bool</span> LoopNestMode) {</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;  <span class="keywordtype">bool</span> Changed = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160; </div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(L-&gt;<a class="code" href="classllvm_1_1Loop.html#a021a92f02d7e959877a4154277fc5c91">isLCSSAForm</a>(*DT) &amp;&amp; <span class="stringliteral">&quot;Loop is not in LCSSA form.&quot;</span>);</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;  MSSA-&gt;<a class="code" href="classllvm_1_1MemorySSA.html#acd30a2d319950c138d97d5b3356342b5">ensureOptimizedUses</a>();</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160; </div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;  <span class="comment">// If this loop has metadata indicating that LICM is not to be performed then</span></div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;  <span class="comment">// just exit.</span></div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#aa61b7b49f32233419331f8132b39e77d">hasDisableLICMTransformsHint</a>(L)) {</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;  }</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160; </div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;  <span class="comment">// Don&#39;t sink stores from loops with coroutine suspend instructions.</span></div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;  <span class="comment">// LICM would sink instructions into the default destination of</span></div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;  <span class="comment">// the coroutine switch. The default destination of the switch is to</span></div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;  <span class="comment">// handle the case where the coroutine is suspended, by which point the</span></div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;  <span class="comment">// coroutine frame may have been destroyed. No instruction can be sunk there.</span></div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;  <span class="comment">// FIXME: This would unfortunately hurt the performance of coroutines, however</span></div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;  <span class="comment">// there is currently no general solution for this. Similar issues could also</span></div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;  <span class="comment">// potentially happen in other passes where instructions are being moved</span></div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;  <span class="comment">// across that edge.</span></div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;  <span class="keywordtype">bool</span> HasCoroSuspendInst = <a class="code" href="namespacellvm.html#a61d13d6824ec46c31260a4fd0997eda0">llvm::any_of</a>(L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a5cc113cb783ab6e5ca7b69241431c19c">getBlocks</a>(), [](<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) {</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;    return llvm::any_of(*BB, [](Instruction &amp;I) {</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;      IntrinsicInst *II = dyn_cast&lt;IntrinsicInst&gt;(&amp;I);</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;      return II &amp;&amp; II-&gt;getIntrinsicID() == Intrinsic::coro_suspend;</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    });</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;  });</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160; </div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;  <a class="code" href="classllvm_1_1MemorySSAUpdater.html">MemorySSAUpdater</a> MSSAU(MSSA);</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;  <a class="code" href="classllvm_1_1SinkAndHoistLICMFlags.html">SinkAndHoistLICMFlags</a> <a class="code" href="namespacellvm_1_1omp.html#a16d7c5f77008a84ae20bf4a5c41e51f0a4ea7801f17a4e5485e8b050c052fb443">Flags</a>(LicmMssaOptCap, LicmMssaNoAccForPromotionCap,</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;                              <span class="comment">/*IsSink=*/</span><span class="keyword">true</span>, L, MSSA);</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160; </div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;  <span class="comment">// Get the preheader block to move instructions into...</span></div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Preheader = L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#ac3280e7f76f955403fe17eacf126b90d">getLoopPreheader</a>();</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160; </div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;  <span class="comment">// Compute loop safety information.</span></div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;  <a class="code" href="classllvm_1_1ICFLoopSafetyInfo.html">ICFLoopSafetyInfo</a> SafetyInfo;</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;  SafetyInfo.<a class="code" href="classllvm_1_1ICFLoopSafetyInfo.html#aca2badb4637a1c884bebc80828feac0a">computeLoopSafetyInfo</a>(L);</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160; </div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;  <span class="comment">// We want to visit all of the instructions in this loop... that are not parts</span></div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;  <span class="comment">// of our subloops (they have already had their invariants hoisted out of</span></div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;  <span class="comment">// their loop, into this loop, so there is no need to process the BODIES of</span></div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;  <span class="comment">// the subloops).</span></div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;  <span class="comment">// Traverse the body of the loop in depth first order on the dominator tree so</span></div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;  <span class="comment">// that we are guaranteed to see definitions before we see uses.  This allows</span></div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;  <span class="comment">// us to sink instructions in one pass, without iteration.  After sinking</span></div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;  <span class="comment">// instructions, we perform another pass to hoist them out of the loop.</span></div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;  <span class="keywordflow">if</span> (L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#ae7ebc88c9b32b51b749bd5bbcfaa5fb8">hasDedicatedExits</a>())</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;    Changed |=</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;        LoopNestMode</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;            ? <a class="code" href="namespacellvm.html#af1236d17bc9dd1041e95f1724eb9cfa6">sinkRegionForLoopNest</a>(DT-&gt;<a class="code" href="classllvm_1_1DominatorTreeBase.html#a4344e66fb61ea313a85a9e054124ac55">getNode</a>(L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a58c5b170ea68b41e94ebb0019523a68f">getHeader</a>()), AA, LI, DT,</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;                                    TLI, <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>, L, MSSAU, &amp;SafetyInfo, Flags, ORE)</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;            : <a class="code" href="namespacellvm.html#ad30fb60072e2996200ea591628e33c5a">sinkRegion</a>(DT-&gt;getNode(L-&gt;getHeader()), AA, LI, DT, TLI, <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>, L,</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;                         MSSAU, &amp;SafetyInfo, <a class="code" href="namespacellvm_1_1omp.html#a16d7c5f77008a84ae20bf4a5c41e51f0a4ea7801f17a4e5485e8b050c052fb443">Flags</a>, ORE);</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;  <a class="code" href="namespacellvm_1_1omp.html#a16d7c5f77008a84ae20bf4a5c41e51f0a4ea7801f17a4e5485e8b050c052fb443">Flags</a>.setIsSink(<span class="keyword">false</span>);</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;  <span class="keywordflow">if</span> (Preheader)</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;    Changed |= <a class="code" href="namespacellvm.html#a5efa2c3e00054566f1baaebc766461a4">hoistRegion</a>(DT-&gt;<a class="code" href="classllvm_1_1DominatorTreeBase.html#a4344e66fb61ea313a85a9e054124ac55">getNode</a>(L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a58c5b170ea68b41e94ebb0019523a68f">getHeader</a>()), AA, LI, DT, AC, TLI, L,</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;                           MSSAU, SE, &amp;SafetyInfo, Flags, ORE, LoopNestMode,</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;                           LicmAllowSpeculation);</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160; </div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;  <span class="comment">// Now that all loop invariants have been removed from the loop, promote any</span></div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;  <span class="comment">// memory references to scalars that we can.</span></div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;  <span class="comment">// Don&#39;t sink stores from loops without dedicated block exits. Exits</span></div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;  <span class="comment">// containing indirect branches are not transformed by loop simplify,</span></div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;  <span class="comment">// make sure we catch that. An additional load may be generated in the</span></div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;  <span class="comment">// preheader for SSA updater, so also avoid sinking when no preheader</span></div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;  <span class="comment">// is available.</span></div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="LICM_8cpp.html#a943a824fb962481a8f6b46f5a17371cc">DisablePromotion</a> &amp;&amp; Preheader &amp;&amp; L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#ae7ebc88c9b32b51b749bd5bbcfaa5fb8">hasDedicatedExits</a>() &amp;&amp;</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;      !<a class="code" href="namespacellvm_1_1omp.html#a16d7c5f77008a84ae20bf4a5c41e51f0a4ea7801f17a4e5485e8b050c052fb443">Flags</a>.tooManyMemoryAccesses() &amp;&amp; !HasCoroSuspendInst) {</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;    <span class="comment">// Figure out the loop exits and their insertion points</span></div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;BasicBlock *, 8&gt;</a> ExitBlocks;</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;    L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#ae069a12f0a2d2deb69e30b439a91190e">getUniqueExitBlocks</a>(ExitBlocks);</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160; </div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;    <span class="comment">// We can&#39;t insert into a catchswitch.</span></div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;    <span class="keywordtype">bool</span> HasCatchSwitch = <a class="code" href="namespacellvm.html#a61d13d6824ec46c31260a4fd0997eda0">llvm::any_of</a>(ExitBlocks, [](<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Exit) {</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;      <span class="keywordflow">return</span> isa&lt;CatchSwitchInst&gt;(Exit-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>());</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;    });</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160; </div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;    <span class="keywordflow">if</span> (!HasCatchSwitch) {</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;      <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Instruction *, 8&gt;</a> InsertPts;</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;      <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;MemoryAccess *, 8&gt;</a> MSSAInsertPts;</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;      InsertPts.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a499ea32ca1b8d16cedfe01d1e5b08f29">reserve</a>(ExitBlocks.size());</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;      MSSAInsertPts.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a499ea32ca1b8d16cedfe01d1e5b08f29">reserve</a>(ExitBlocks.size());</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *ExitBlock : ExitBlocks) {</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;        InsertPts.push_back(&amp;*ExitBlock-&gt;getFirstInsertionPt());</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;        MSSAInsertPts.push_back(<span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;      }</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160; </div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;      <a class="code" href="classllvm_1_1PredIteratorCache.html">PredIteratorCache</a> <a class="code" href="PassBuilderBindings_8cpp.html#ad4d247df65c12507f447383be37d7ccb">PIC</a>;</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160; </div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;      <span class="comment">// Promoting one set of accesses may make the pointers for another set</span></div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;      <span class="comment">// loop invariant, so run this in a loop.</span></div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;      <span class="keywordtype">bool</span> Promoted = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;      <span class="keywordtype">bool</span> LocalPromoted;</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;      <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;        LocalPromoted = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;        <span class="keywordflow">for</span> (<span class="keyword">auto</span> [PointerMustAliases, HasReadsOutsideSet] :</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;             <a class="code" href="LICM_8cpp.html#a37ddbdd8cb4efa5072282498fdc1ac65">collectPromotionCandidates</a>(MSSA, AA, L)) {</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;          LocalPromoted |= <a class="code" href="namespacellvm.html#ab8c575d798aa9fd14ce698726467d31b">promoteLoopAccessesToScalars</a>(</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;              PointerMustAliases, ExitBlocks, InsertPts, MSSAInsertPts, <a class="code" href="PassBuilderBindings_8cpp.html#ad4d247df65c12507f447383be37d7ccb">PIC</a>, LI,</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;              DT, AC, TLI, <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>, L, MSSAU, &amp;SafetyInfo, ORE,</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;              LicmAllowSpeculation, HasReadsOutsideSet);</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;        }</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;        Promoted |= LocalPromoted;</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;      } <span class="keywordflow">while</span> (LocalPromoted);</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160; </div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;      <span class="comment">// Once we have promoted values across the loop body we have to</span></div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;      <span class="comment">// recursively reform LCSSA as any nested loop may now have values defined</span></div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;      <span class="comment">// within the loop used in the outer loop.</span></div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;      <span class="comment">// FIXME: This is really heavy handed. It would be a bit better to use an</span></div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;      <span class="comment">// SSAUpdater strategy during promotion that was LCSSA aware and reformed</span></div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;      <span class="comment">// it as it went.</span></div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;      <span class="keywordflow">if</span> (Promoted)</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;        <a class="code" href="namespacellvm.html#a30e47ae014eb35bea24e45097c2bd731">formLCSSARecursively</a>(*L, *DT, LI, SE);</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160; </div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;      Changed |= Promoted;</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;    }</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;  }</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160; </div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;  <span class="comment">// Check that neither this loop nor its parent have had LCSSA broken. LICM is</span></div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;  <span class="comment">// specifically moving instructions across the loop boundary and so it is</span></div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;  <span class="comment">// especially in need of basic functional correctness checking here.</span></div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(L-&gt;<a class="code" href="classllvm_1_1Loop.html#a021a92f02d7e959877a4154277fc5c91">isLCSSAForm</a>(*DT) &amp;&amp; <span class="stringliteral">&quot;Loop not left in LCSSA form after LICM!&quot;</span>);</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a0fa33dfd6ffaaae721fc05b6941263aa">isOutermost</a>() || L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a62733c3335a87750623dbfc5b3ae4f6c">getParentLoop</a>()-&gt;<a class="code" href="classllvm_1_1Loop.html#a021a92f02d7e959877a4154277fc5c91">isLCSSAForm</a>(*DT)) &amp;&amp;</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;         <span class="stringliteral">&quot;Parent loop not left in LCSSA form after LICM!&quot;</span>);</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160; </div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#aa29fe161c408879ada30c90ebbf55dcf">VerifyMemorySSA</a>)</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;    MSSA-&gt;<a class="code" href="classllvm_1_1MemorySSA.html#a88b10d37f671e58cf138ac84a8257c17">verifyMemorySSA</a>();</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160; </div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;  <span class="keywordflow">if</span> (Changed &amp;&amp; SE)</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;    SE-&gt;<a class="code" href="classllvm_1_1ScalarEvolution.html#abb9c0178bec51fd25f95b4399faa569c">forgetLoopDispositions</a>();</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;  <span class="keywordflow">return</span> Changed;</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;}</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;<span class="comment">/// Walk the specified region of the CFG (defined by all blocks dominated by</span></div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;<span class="comment">/// the specified block, and that are in the current loop) in reverse depth</span></div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;<span class="comment">/// first order w.r.t the DominatorTree.  This allows us to visit uses before</span></div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;<span class="comment">/// definitions, allowing us to sink a loop body in one pass without iteration.</span></div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00539"></a><span class="lineno"><a class="line" href="namespacellvm.html#ad30fb60072e2996200ea591628e33c5a">  539</a></span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> <a class="code" href="namespacellvm.html#ad30fb60072e2996200ea591628e33c5a">llvm::sinkRegion</a>(<a class="code" href="classllvm_1_1DomTreeNodeBase.html">DomTreeNode</a> *<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>, <a class="code" href="classllvm_1_1AAResults.html">AAResults</a> *AA, <a class="code" href="classllvm_1_1LoopInfo.html">LoopInfo</a> *LI,</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;                      <a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> *DT, <a class="code" href="classllvm_1_1TargetLibraryInfo.html">TargetLibraryInfo</a> *TLI,</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;                      <a class="code" href="classllvm_1_1TargetTransformInfo.html">TargetTransformInfo</a> *<a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>, <a class="code" href="classllvm_1_1Loop.html">Loop</a> *CurLoop,</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;                      <a class="code" href="classllvm_1_1MemorySSAUpdater.html">MemorySSAUpdater</a> &amp;MSSAU, <a class="code" href="classllvm_1_1ICFLoopSafetyInfo.html">ICFLoopSafetyInfo</a> *SafetyInfo,</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;                      <a class="code" href="classllvm_1_1SinkAndHoistLICMFlags.html">SinkAndHoistLICMFlags</a> &amp;Flags,</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;                      <a class="code" href="classllvm_1_1OptimizationRemarkEmitter.html">OptimizationRemarkEmitter</a> *ORE, <a class="code" href="classllvm_1_1Loop.html">Loop</a> *OutermostLoop) {</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160; </div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;  <span class="comment">// Verify inputs.</span></div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a> != <span class="keyword">nullptr</span> &amp;&amp; AA != <span class="keyword">nullptr</span> &amp;&amp; LI != <span class="keyword">nullptr</span> &amp;&amp; DT != <span class="keyword">nullptr</span> &amp;&amp;</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;         CurLoop != <span class="keyword">nullptr</span> &amp;&amp; SafetyInfo != <span class="keyword">nullptr</span> &amp;&amp;</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;         <span class="stringliteral">&quot;Unexpected input to sinkRegion.&quot;</span>);</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160; </div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;  <span class="comment">// We want to visit children before parents. We will enqueue all the parents</span></div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;  <span class="comment">// before their children in the worklist and process the worklist in reverse</span></div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;  <span class="comment">// order.</span></div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;DomTreeNode *, 16&gt;</a> Worklist = <a class="code" href="namespacellvm.html#a0690f49d8a34d0f21d523c6ad489028e">collectChildrenInLoop</a>(<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>, CurLoop);</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160; </div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;  <span class="keywordtype">bool</span> Changed = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1DomTreeNodeBase.html">DomTreeNode</a> *DTN : <a class="code" href="namespacellvm.html#a6b0ac1fa4f05de76413c5e0ca6334035">reverse</a>(Worklist)) {</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> = DTN-&gt;getBlock();</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;    <span class="comment">// Only need to process the contents of this block if it is not part of a</span></div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;    <span class="comment">// subloop (which would already have been processed).</span></div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="LICM_8cpp.html#aabae34d2dbed5dde1865f19ccbe4cb81">inSubLoop</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, CurLoop, LI))</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160; </div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html#a98c0a84a5dfa8bce341c829709f171e5">BasicBlock::iterator</a> II = <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;end(); II != <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;begin();) {</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;      <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = *--II;</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160; </div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;      <span class="comment">// The instruction is not used in the loop if it is dead.  In this case,</span></div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;      <span class="comment">// we just delete it instead of sinking it.</span></div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a627b2f86ac433d829482d5a5a0f50668">isInstructionTriviallyDead</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, TLI)) {</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;        <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LICM deleting dead inst: &quot;</span> &lt;&lt; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;        <a class="code" href="namespacellvm.html#aa39ca296d9689933bb0279c9ac3ee1fc">salvageKnowledge</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;        <a class="code" href="namespacellvm.html#a26be1141b23850a2b4eb78021d99e862">salvageDebugInfo</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;        ++II;</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;        <a class="code" href="LICM_8cpp.html#ab0cfc793d55940eac67854827dd365e9">eraseInstruction</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, *SafetyInfo, MSSAU);</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;        Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;      }</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160; </div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;      <span class="comment">// Check to see if we can sink this instruction to the exit blocks</span></div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;      <span class="comment">// of the loop.  We can do this if the all users of the instruction are</span></div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;      <span class="comment">// outside of the loop.  In this case, it doesn&#39;t even matter if the</span></div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;      <span class="comment">// operands of the instruction are loop invariant.</span></div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;      <span class="comment">//</span></div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;      <span class="keywordtype">bool</span> FreeInLoop = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;      <span class="keywordtype">bool</span> LoopNestMode = OutermostLoop != <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.mayHaveSideEffects() &amp;&amp;</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;          <a class="code" href="LICM_8cpp.html#a20be54e1ec24a63f98accb9d9944b3ed">isNotUsedOrFreeInLoop</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, LoopNestMode ? OutermostLoop : CurLoop,</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;                                SafetyInfo, <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>, FreeInLoop, LoopNestMode) &amp;&amp;</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;          <a class="code" href="namespacellvm.html#a158e2caed73e4b5d2ad70c1b2a0e0cc8">canSinkOrHoistInst</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, AA, DT, CurLoop, MSSAU, <span class="keyword">true</span>, Flags, ORE)) {</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="LICM_8cpp.html#a52b8b307321627e612e77041260ece84">sink</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, LI, DT, CurLoop, SafetyInfo, MSSAU, ORE)) {</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;          <span class="keywordflow">if</span> (!FreeInLoop) {</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;            ++II;</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;            <a class="code" href="namespacellvm.html#a26be1141b23850a2b4eb78021d99e862">salvageDebugInfo</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;            <a class="code" href="LICM_8cpp.html#ab0cfc793d55940eac67854827dd365e9">eraseInstruction</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, *SafetyInfo, MSSAU);</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;          }</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;          Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;        }</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;      }</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;    }</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;  }</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#aa29fe161c408879ada30c90ebbf55dcf">VerifyMemorySSA</a>)</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;    MSSAU.<a class="code" href="classllvm_1_1MemorySSAUpdater.html#a4121a20238504099c3466fa62ec877d5">getMemorySSA</a>()-&gt;<a class="code" href="classllvm_1_1MemorySSA.html#a88b10d37f671e58cf138ac84a8257c17">verifyMemorySSA</a>();</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;  <span class="keywordflow">return</span> Changed;</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;}</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160; </div>
<div class="line"><a name="l00606"></a><span class="lineno"><a class="line" href="namespacellvm.html#af1236d17bc9dd1041e95f1724eb9cfa6">  606</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="namespacellvm.html#af1236d17bc9dd1041e95f1724eb9cfa6">llvm::sinkRegionForLoopNest</a>(<a class="code" href="classllvm_1_1DomTreeNodeBase.html">DomTreeNode</a> *<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>, <a class="code" href="classllvm_1_1AAResults.html">AAResults</a> *AA, <a class="code" href="classllvm_1_1LoopInfo.html">LoopInfo</a> *LI,</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;                                 <a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> *DT, <a class="code" href="classllvm_1_1TargetLibraryInfo.html">TargetLibraryInfo</a> *TLI,</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;                                 <a class="code" href="classllvm_1_1TargetTransformInfo.html">TargetTransformInfo</a> *<a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>, <a class="code" href="classllvm_1_1Loop.html">Loop</a> *CurLoop,</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;                                 <a class="code" href="classllvm_1_1MemorySSAUpdater.html">MemorySSAUpdater</a> &amp;MSSAU,</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;                                 <a class="code" href="classllvm_1_1ICFLoopSafetyInfo.html">ICFLoopSafetyInfo</a> *SafetyInfo,</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;                                 <a class="code" href="classllvm_1_1SinkAndHoistLICMFlags.html">SinkAndHoistLICMFlags</a> &amp;Flags,</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;                                 <a class="code" href="classllvm_1_1OptimizationRemarkEmitter.html">OptimizationRemarkEmitter</a> *ORE) {</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160; </div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;  <span class="keywordtype">bool</span> Changed = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;  <a class="code" href="classllvm_1_1SmallPriorityWorklist.html">SmallPriorityWorklist&lt;Loop *, 4&gt;</a> Worklist;</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;  Worklist.<a class="code" href="classllvm_1_1PriorityWorklist.html#af74058cc2f8163b1d7128b467432a09b">insert</a>(CurLoop);</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;  <a class="code" href="namespacellvm.html#ab7a106c600cf32852298d9041e8c8044">appendLoopsToWorklist</a>(*CurLoop, Worklist);</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;  <span class="keywordflow">while</span> (!Worklist.<a class="code" href="classllvm_1_1PriorityWorklist.html#adc2ef5f0964becc28dfa58a7abc2f1e7">empty</a>()) {</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;    <a class="code" href="classllvm_1_1Loop.html">Loop</a> *L = Worklist.<a class="code" href="classllvm_1_1PriorityWorklist.html#ab89ceb7695256590499de818b5360c54">pop_back_val</a>();</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;    Changed |= <a class="code" href="namespacellvm.html#ad30fb60072e2996200ea591628e33c5a">sinkRegion</a>(DT-&gt;<a class="code" href="classllvm_1_1DominatorTreeBase.html#a4344e66fb61ea313a85a9e054124ac55">getNode</a>(L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a58c5b170ea68b41e94ebb0019523a68f">getHeader</a>()), AA, LI, DT, TLI, <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>, L,</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;                          MSSAU, SafetyInfo, Flags, ORE, CurLoop);</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;  }</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;  <span class="keywordflow">return</span> Changed;</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;}</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160; </div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;<span class="keyword">namespace </span>{</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;<span class="comment">// This is a helper class for hoistRegion to make it able to hoist control flow</span></div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;<span class="comment">// in order to be able to hoist phis. The way this works is that we initially</span></div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;<span class="comment">// start hoisting to the loop preheader, and when we see a loop invariant branch</span></div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;<span class="comment">// we make note of this. When we then come to hoist an instruction that&#39;s</span></div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;<span class="comment">// conditional on such a branch we duplicate the branch and the relevant control</span></div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;<span class="comment">// flow, then hoist the instruction into the block corresponding to its original</span></div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;<span class="comment">// block in the duplicated control flow.</span></div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;<span class="keyword">class </span>ControlFlowHoister {</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;<span class="keyword">private</span>:</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;  <span class="comment">// Information about the loop we are hoisting from</span></div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;  <a class="code" href="classllvm_1_1LoopInfo.html">LoopInfo</a> *LI;</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;  <a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> *DT;</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;  <a class="code" href="classllvm_1_1Loop.html">Loop</a> *CurLoop;</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;  <a class="code" href="classllvm_1_1MemorySSAUpdater.html">MemorySSAUpdater</a> &amp;MSSAU;</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160; </div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;  <span class="comment">// A map of blocks in the loop to the block their instructions will be hoisted</span></div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;  <span class="comment">// to.</span></div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;  <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;BasicBlock *, BasicBlock *&gt;</a> HoistDestinationMap;</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160; </div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;  <span class="comment">// The branches that we can hoist, mapped to the block that marks a</span></div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;  <span class="comment">// convergence point of their control flow.</span></div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;  <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;BranchInst *, BasicBlock *&gt;</a> HoistableBranches;</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160; </div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;  ControlFlowHoister(<a class="code" href="classllvm_1_1LoopInfo.html">LoopInfo</a> *LI, <a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> *DT, <a class="code" href="classllvm_1_1Loop.html">Loop</a> *CurLoop,</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;                     <a class="code" href="classllvm_1_1MemorySSAUpdater.html">MemorySSAUpdater</a> &amp;MSSAU)</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;      : LI(LI), DT(DT), CurLoop(CurLoop), MSSAU(MSSAU) {}</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160; </div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;  <span class="keywordtype">void</span> registerPossiblyHoistableBranch(<a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a> *BI) {</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;    <span class="comment">// We can only hoist conditional branches with loop invariant operands.</span></div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="LICM_8cpp.html#ac7588f9346497ff9a8a966766c7c6bbc">ControlFlowHoisting</a> || !BI-&gt;<a class="code" href="classllvm_1_1BranchInst.html#a7e4be8b16fbd68c9045a388904044e01">isConditional</a>() ||</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;        !CurLoop-&gt;<a class="code" href="classllvm_1_1Loop.html#a54e82aea5fab8cf3a878003444f25ee7">hasLoopInvariantOperands</a>(BI))</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160; </div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;    <span class="comment">// The branch destinations need to be in the loop, and we don&#39;t gain</span></div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;    <span class="comment">// anything by duplicating conditional branches with duplicate successors,</span></div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;    <span class="comment">// as it&#39;s essentially the same as an unconditional branch.</span></div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *TrueDest = BI-&gt;<a class="code" href="classllvm_1_1BranchInst.html#ad97f2e60cf22f15e0cf617af52309031">getSuccessor</a>(0);</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *FalseDest = BI-&gt;<a class="code" href="classllvm_1_1BranchInst.html#ad97f2e60cf22f15e0cf617af52309031">getSuccessor</a>(1);</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;    <span class="keywordflow">if</span> (!CurLoop-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a04337b572d34ea413c35dbac5d75530b">contains</a>(TrueDest) || !CurLoop-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a04337b572d34ea413c35dbac5d75530b">contains</a>(FalseDest) ||</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;        TrueDest == FalseDest)</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160; </div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;    <span class="comment">// We can hoist BI if one branch destination is the successor of the other,</span></div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;    <span class="comment">// or both have common successor which we check by seeing if the</span></div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;    <span class="comment">// intersection of their successors is non-empty.</span></div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;    <span class="comment">// TODO: This could be expanded to allowing branches where both ends</span></div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;    <span class="comment">// eventually converge to a single block.</span></div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;    <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;BasicBlock *, 4&gt;</a> TrueDestSucc, FalseDestSucc;</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;    TrueDestSucc.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(<a class="code" href="namespacellvm.html#a3720211f6e6389ab53734b989bfb6fce">succ_begin</a>(TrueDest), <a class="code" href="namespacellvm.html#a069c4ae2290101bde0f8d6a5074dc72b">succ_end</a>(TrueDest));</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;    FalseDestSucc.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(<a class="code" href="namespacellvm.html#a3720211f6e6389ab53734b989bfb6fce">succ_begin</a>(FalseDest), <a class="code" href="namespacellvm.html#a069c4ae2290101bde0f8d6a5074dc72b">succ_end</a>(FalseDest));</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *CommonSucc = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;    <span class="keywordflow">if</span> (TrueDestSucc.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a1f475b0df44ebd7169e720fa1bf9169e">count</a>(FalseDest)) {</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;      CommonSucc = FalseDest;</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (FalseDestSucc.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a1f475b0df44ebd7169e720fa1bf9169e">count</a>(TrueDest)) {</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;      CommonSucc = TrueDest;</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;      <a class="code" href="namespacellvm.html#a2162d123f222998300d308bdefdb38b9">set_intersect</a>(TrueDestSucc, FalseDestSucc);</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;      <span class="comment">// If there&#39;s one common successor use that.</span></div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;      <span class="keywordflow">if</span> (TrueDestSucc.<a class="code" href="classllvm_1_1SmallPtrSetImplBase.html#a0e1c3175b0ac22fe3853651c28e1ecb8">size</a>() == 1)</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;        CommonSucc = *TrueDestSucc.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#abf73a826b5d6f739eb4af48ddf14c5b4">begin</a>();</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;      <span class="comment">// If there&#39;s more than one pick whichever appears first in the block list</span></div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;      <span class="comment">// (we can&#39;t use the value returned by TrueDestSucc.begin() as it&#39;s</span></div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;      <span class="comment">// unpredicatable which element gets returned).</span></div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!TrueDestSucc.<a class="code" href="classllvm_1_1SmallPtrSetImplBase.html#af8a50544090e81ac83601aff8f4b0142">empty</a>()) {</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;        <a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> = TrueDest-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a38bee869ad41aebfef3de2641b12004c">getParent</a>();</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;        <span class="keyword">auto</span> IsSucc = [&amp;](<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> &amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) { <span class="keywordflow">return</span> TrueDestSucc.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a1f475b0df44ebd7169e720fa1bf9169e">count</a>(&amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>); };</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;        <span class="keyword">auto</span> It = <a class="code" href="namespacellvm.html#ac78c09ae232b2ce188ff590d51e3c268">llvm::find_if</a>(*<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, IsSucc);</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;        <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(It != <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;end() &amp;&amp; <span class="stringliteral">&quot;Could not find successor in function&quot;</span>);</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;        CommonSucc = &amp;*It;</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;      }</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;    }</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;    <span class="comment">// The common successor has to be dominated by the branch, as otherwise</span></div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;    <span class="comment">// there will be some other path to the successor that will not be</span></div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;    <span class="comment">// controlled by this branch so any phi we hoist would be controlled by the</span></div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;    <span class="comment">// wrong condition. This also takes care of avoiding hoisting of loop back</span></div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;    <span class="comment">// edges.</span></div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;    <span class="comment">// TODO: In some cases this could be relaxed if the successor is dominated</span></div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;    <span class="comment">// by another block that&#39;s been hoisted and we can guarantee that the</span></div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;    <span class="comment">// control flow has been replicated exactly.</span></div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;    <span class="keywordflow">if</span> (CommonSucc &amp;&amp; DT-&gt;<a class="code" href="classllvm_1_1DominatorTree.html#a5c69311e8d44898dac36a155c3d8691d">dominates</a>(BI, CommonSucc))</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;      HoistableBranches[BI] = CommonSucc;</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;  }</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160; </div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;  <span class="keywordtype">bool</span> canHoistPHI(<a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *PN) {</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;    <span class="comment">// The phi must have loop invariant operands.</span></div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="LICM_8cpp.html#ac7588f9346497ff9a8a966766c7c6bbc">ControlFlowHoisting</a> || !CurLoop-&gt;<a class="code" href="classllvm_1_1Loop.html#a54e82aea5fab8cf3a878003444f25ee7">hasLoopInvariantOperands</a>(PN))</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;    <span class="comment">// We can hoist phis if the block they are in is the target of hoistable</span></div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;    <span class="comment">// branches which cover all of the predecessors of the block.</span></div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;    <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;BasicBlock *, 8&gt;</a> PredecessorBlocks;</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> = PN-&gt;<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>();</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *PredBB : <a class="code" href="namespacellvm.html#acb22fb04083152eee862457e42e8dc31">predecessors</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>))</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;      PredecessorBlocks.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(PredBB);</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;    <span class="comment">// If we have less predecessor blocks than predecessors then the phi will</span></div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;    <span class="comment">// have more than one incoming value for the same block which we can&#39;t</span></div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;    <span class="comment">// handle.</span></div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;    <span class="comment">// TODO: This could be handled be erasing some of the duplicate incoming</span></div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;    <span class="comment">// values.</span></div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;    <span class="keywordflow">if</span> (PredecessorBlocks.<a class="code" href="classllvm_1_1SmallPtrSetImplBase.html#a0e1c3175b0ac22fe3853651c28e1ecb8">size</a>() != <a class="code" href="namespacellvm.html#ae6d1c31d74bbaaa9e42bcbdc10a499f2">pred_size</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>))</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;Pair : HoistableBranches) {</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;      <span class="keywordflow">if</span> (Pair.second == <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) {</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;        <span class="comment">// Which blocks are predecessors via this branch depends on if the</span></div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;        <span class="comment">// branch is triangle-like or diamond-like.</span></div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;        <span class="keywordflow">if</span> (Pair.first-&gt;getSuccessor(0) == <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) {</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;          PredecessorBlocks.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a11045c7973ab24a8d6315b61fa337d4e">erase</a>(Pair.first-&gt;getParent());</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;          PredecessorBlocks.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a11045c7973ab24a8d6315b61fa337d4e">erase</a>(Pair.first-&gt;getSuccessor(1));</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Pair.first-&gt;getSuccessor(1) == <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) {</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;          PredecessorBlocks.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a11045c7973ab24a8d6315b61fa337d4e">erase</a>(Pair.first-&gt;getParent());</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;          PredecessorBlocks.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a11045c7973ab24a8d6315b61fa337d4e">erase</a>(Pair.first-&gt;getSuccessor(0));</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;          PredecessorBlocks.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a11045c7973ab24a8d6315b61fa337d4e">erase</a>(Pair.first-&gt;getSuccessor(0));</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;          PredecessorBlocks.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a11045c7973ab24a8d6315b61fa337d4e">erase</a>(Pair.first-&gt;getSuccessor(1));</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;        }</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;      }</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;    }</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;    <span class="comment">// PredecessorBlocks will now be empty if for every predecessor of BB we</span></div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;    <span class="comment">// found a hoistable branch source.</span></div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;    <span class="keywordflow">return</span> PredecessorBlocks.<a class="code" href="classllvm_1_1SmallPtrSetImplBase.html#af8a50544090e81ac83601aff8f4b0142">empty</a>();</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;  }</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160; </div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *getOrCreateHoistedBlock(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) {</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="LICM_8cpp.html#ac7588f9346497ff9a8a966766c7c6bbc">ControlFlowHoisting</a>)</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;      <span class="keywordflow">return</span> CurLoop-&gt;<a class="code" href="classllvm_1_1LoopBase.html#ac3280e7f76f955403fe17eacf126b90d">getLoopPreheader</a>();</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;    <span class="comment">// If BB has already been hoisted, return that</span></div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;    <span class="keywordflow">if</span> (HoistDestinationMap.<a class="code" href="classllvm_1_1DenseMapBase.html#a53408c95a7bfb5443b43fb2134c3eb23">count</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>))</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;      <span class="keywordflow">return</span> HoistDestinationMap[<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>];</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160; </div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;    <span class="comment">// Check if this block is conditional based on a pending branch</span></div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;    <span class="keyword">auto</span> HasBBAsSuccessor =</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;        [&amp;](<a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;BranchInst *, BasicBlock *&gt;::value_type</a> &amp;Pair) {</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;          <span class="keywordflow">return</span> <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> != Pair.second &amp;&amp; (Pair.first-&gt;getSuccessor(0) == <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> ||</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;                                       Pair.first-&gt;getSuccessor(1) == <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;        };</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;    <span class="keyword">auto</span> It = <a class="code" href="namespacellvm.html#ac78c09ae232b2ce188ff590d51e3c268">llvm::find_if</a>(HoistableBranches, HasBBAsSuccessor);</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160; </div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;    <span class="comment">// If not involved in a pending branch, hoist to preheader</span></div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *InitialPreheader = CurLoop-&gt;<a class="code" href="classllvm_1_1LoopBase.html#ac3280e7f76f955403fe17eacf126b90d">getLoopPreheader</a>();</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;    <span class="keywordflow">if</span> (It == HoistableBranches.end()) {</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LICM using &quot;</span></div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;                        &lt;&lt; InitialPreheader-&gt;<a class="code" href="classllvm_1_1Value.html#a391ffe96dd8c686b0d2620c7fb25f8a5">getNameOrAsOperand</a>()</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;                        &lt;&lt; <span class="stringliteral">&quot; as hoist destination for &quot;</span></div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;                        &lt;&lt; <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getNameOrAsOperand() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;      HoistDestinationMap[<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>] = InitialPreheader;</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;      <span class="keywordflow">return</span> InitialPreheader;</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;    }</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;    <a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a> *BI = It-&gt;first;</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="namespacellvm.html#ac78c09ae232b2ce188ff590d51e3c268">std::find_if</a>(++It, HoistableBranches.end(), HasBBAsSuccessor) ==</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;               HoistableBranches.end() &amp;&amp;</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;           <span class="stringliteral">&quot;BB is expected to be the target of at most one branch&quot;</span>);</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160; </div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;    <a class="code" href="classllvm_1_1LLVMContext.html">LLVMContext</a> &amp;<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getContext();</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *TrueDest = BI-&gt;<a class="code" href="classllvm_1_1BranchInst.html#ad97f2e60cf22f15e0cf617af52309031">getSuccessor</a>(0);</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *FalseDest = BI-&gt;<a class="code" href="classllvm_1_1BranchInst.html#ad97f2e60cf22f15e0cf617af52309031">getSuccessor</a>(1);</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *CommonSucc = HoistableBranches[BI];</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *HoistTarget = getOrCreateHoistedBlock(BI-&gt;<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>());</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160; </div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;    <span class="comment">// Create hoisted versions of blocks that currently don&#39;t have them</span></div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;    <span class="keyword">auto</span> CreateHoistedBlock = [&amp;](<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Orig) {</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;      <span class="keywordflow">if</span> (HoistDestinationMap.<a class="code" href="classllvm_1_1DenseMapBase.html#a53408c95a7bfb5443b43fb2134c3eb23">count</a>(Orig))</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;        <span class="keywordflow">return</span> HoistDestinationMap[Orig];</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;      <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="namespacellvm_1_1ms__demangle.html#a851a17f7dc73f9988807242926dcc645a03c2e7e41ffc181a4e84080b4710e81e">New</a> =</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;          BasicBlock::Create(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, Orig-&gt;getName() + <span class="stringliteral">&quot;.licm&quot;</span>, Orig-&gt;getParent());</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;      HoistDestinationMap[Orig] = <a class="code" href="namespacellvm_1_1ms__demangle.html#a851a17f7dc73f9988807242926dcc645a03c2e7e41ffc181a4e84080b4710e81e">New</a>;</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;      DT-&gt;<a class="code" href="classllvm_1_1DominatorTreeBase.html#a4d417f72d43729d07de3b3d2f58893cc">addNewBlock</a>(New, HoistTarget);</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;      <span class="keywordflow">if</span> (CurLoop-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a62733c3335a87750623dbfc5b3ae4f6c">getParentLoop</a>())</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;        CurLoop-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a62733c3335a87750623dbfc5b3ae4f6c">getParentLoop</a>()-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a63f099d3bf7cf97eb3ae2d630e3d1afc">addBasicBlockToLoop</a>(New, *LI);</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;      ++NumCreatedBlocks;</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LICM created &quot;</span> &lt;&lt; <a class="code" href="namespacellvm_1_1ms__demangle.html#a851a17f7dc73f9988807242926dcc645a03c2e7e41ffc181a4e84080b4710e81e">New</a>-&gt;getName()</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;                        &lt;&lt; <span class="stringliteral">&quot; as hoist destination for &quot;</span> &lt;&lt; Orig-&gt;getName()</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;                        &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1ms__demangle.html#a851a17f7dc73f9988807242926dcc645a03c2e7e41ffc181a4e84080b4710e81e">New</a>;</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;    };</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *HoistTrueDest = CreateHoistedBlock(TrueDest);</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *HoistFalseDest = CreateHoistedBlock(FalseDest);</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *HoistCommonSucc = CreateHoistedBlock(CommonSucc);</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160; </div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;    <span class="comment">// Link up these blocks with branches.</span></div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;    <span class="keywordflow">if</span> (!HoistCommonSucc-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>()) {</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;      <span class="comment">// The new common successor we&#39;ve generated will branch to whatever that</span></div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;      <span class="comment">// hoist target branched to.</span></div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;      <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *TargetSucc = HoistTarget-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a79c007dcf9fff57e1569e778d7885b5e">getSingleSuccessor</a>();</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(TargetSucc &amp;&amp; <span class="stringliteral">&quot;Expected hoist target to have a single successor&quot;</span>);</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;      HoistCommonSucc-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a41da369a9d31d911c8af724d5630f724">moveBefore</a>(TargetSucc);</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;      BranchInst::Create(TargetSucc, HoistCommonSucc);</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;    }</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;    <span class="keywordflow">if</span> (!HoistTrueDest-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>()) {</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;      HoistTrueDest-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a41da369a9d31d911c8af724d5630f724">moveBefore</a>(HoistCommonSucc);</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;      BranchInst::Create(HoistCommonSucc, HoistTrueDest);</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;    }</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;    <span class="keywordflow">if</span> (!HoistFalseDest-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>()) {</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;      HoistFalseDest-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a41da369a9d31d911c8af724d5630f724">moveBefore</a>(HoistCommonSucc);</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;      BranchInst::Create(HoistCommonSucc, HoistFalseDest);</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;    }</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160; </div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;    <span class="comment">// If BI is being cloned to what was originally the preheader then</span></div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;    <span class="comment">// HoistCommonSucc will now be the new preheader.</span></div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;    <span class="keywordflow">if</span> (HoistTarget == InitialPreheader) {</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;      <span class="comment">// Phis in the loop header now need to use the new preheader.</span></div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;      InitialPreheader-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a089e003bb688e55b9a91ed4e7fed3678">replaceSuccessorsPhiUsesWith</a>(HoistCommonSucc);</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;      MSSAU.<a class="code" href="classllvm_1_1MemorySSAUpdater.html#ae6b63bcaa1f6638b608f911cd04341e2">wireOldPredecessorsToNewImmediatePredecessor</a>(</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;          HoistTarget-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a79c007dcf9fff57e1569e778d7885b5e">getSingleSuccessor</a>(), HoistCommonSucc, {HoistTarget});</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;      <span class="comment">// The new preheader dominates the loop header.</span></div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;      <a class="code" href="classllvm_1_1DomTreeNodeBase.html">DomTreeNode</a> *PreheaderNode = DT-&gt;<a class="code" href="classllvm_1_1DominatorTreeBase.html#a4344e66fb61ea313a85a9e054124ac55">getNode</a>(HoistCommonSucc);</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;      <a class="code" href="classllvm_1_1DomTreeNodeBase.html">DomTreeNode</a> *HeaderNode = DT-&gt;<a class="code" href="classllvm_1_1DominatorTreeBase.html#a4344e66fb61ea313a85a9e054124ac55">getNode</a>(CurLoop-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a58c5b170ea68b41e94ebb0019523a68f">getHeader</a>());</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;      DT-&gt;<a class="code" href="classllvm_1_1DominatorTreeBase.html#a2881c226e1c102190d54c3b664330aba">changeImmediateDominator</a>(HeaderNode, PreheaderNode);</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;      <span class="comment">// The preheader hoist destination is now the new preheader, with the</span></div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;      <span class="comment">// exception of the hoist destination of this branch.</span></div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;Pair : HoistDestinationMap)</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;        <span class="keywordflow">if</span> (Pair.second == InitialPreheader &amp;&amp; Pair.first != BI-&gt;<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>())</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;          Pair.second = HoistCommonSucc;</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;    }</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160; </div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;    <span class="comment">// Now finally clone BI.</span></div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;    <a class="code" href="namespacellvm.html#a016a85f7487f995fe80141e102a7a5ae">ReplaceInstWithInst</a>(</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;        HoistTarget-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>(),</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;        BranchInst::Create(HoistTrueDest, HoistFalseDest, BI-&gt;<a class="code" href="classllvm_1_1BranchInst.html#aac456a62894c9f0f8e9f06373bbf40f0">getCondition</a>()));</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;    ++NumClonedBranches;</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160; </div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(CurLoop-&gt;<a class="code" href="classllvm_1_1LoopBase.html#ac3280e7f76f955403fe17eacf126b90d">getLoopPreheader</a>() &amp;&amp;</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;           <span class="stringliteral">&quot;Hoisting blocks should not have destroyed preheader&quot;</span>);</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;    <span class="keywordflow">return</span> HoistDestinationMap[<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>];</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;  }</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;};</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;} <span class="comment">// namespace</span></div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;<span class="comment">/// Walk the specified region of the CFG (defined by all blocks dominated by</span></div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;<span class="comment">/// the specified block, and that are in the current loop) in depth first</span></div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;<span class="comment">/// order w.r.t the DominatorTree.  This allows us to visit definitions before</span></div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;<span class="comment">/// uses, allowing us to hoist a loop body in one pass without iteration.</span></div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00859"></a><span class="lineno"><a class="line" href="namespacellvm.html#a5efa2c3e00054566f1baaebc766461a4">  859</a></span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> <a class="code" href="namespacellvm.html#a5efa2c3e00054566f1baaebc766461a4">llvm::hoistRegion</a>(<a class="code" href="classllvm_1_1DomTreeNodeBase.html">DomTreeNode</a> *<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>, <a class="code" href="classllvm_1_1AAResults.html">AAResults</a> *AA, <a class="code" href="classllvm_1_1LoopInfo.html">LoopInfo</a> *LI,</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;                       <a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> *DT, <a class="code" href="classllvm_1_1AssumptionCache.html">AssumptionCache</a> *AC,</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;                       <a class="code" href="classllvm_1_1TargetLibraryInfo.html">TargetLibraryInfo</a> *TLI, <a class="code" href="classllvm_1_1Loop.html">Loop</a> *CurLoop,</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;                       <a class="code" href="classllvm_1_1MemorySSAUpdater.html">MemorySSAUpdater</a> &amp;MSSAU, <a class="code" href="classllvm_1_1ScalarEvolution.html">ScalarEvolution</a> *SE,</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;                       <a class="code" href="classllvm_1_1ICFLoopSafetyInfo.html">ICFLoopSafetyInfo</a> *SafetyInfo,</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;                       <a class="code" href="classllvm_1_1SinkAndHoistLICMFlags.html">SinkAndHoistLICMFlags</a> &amp;Flags,</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;                       <a class="code" href="classllvm_1_1OptimizationRemarkEmitter.html">OptimizationRemarkEmitter</a> *ORE, <span class="keywordtype">bool</span> LoopNestMode,</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;                       <span class="keywordtype">bool</span> AllowSpeculation) {</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;  <span class="comment">// Verify inputs.</span></div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a> != <span class="keyword">nullptr</span> &amp;&amp; AA != <span class="keyword">nullptr</span> &amp;&amp; LI != <span class="keyword">nullptr</span> &amp;&amp; DT != <span class="keyword">nullptr</span> &amp;&amp;</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;         CurLoop != <span class="keyword">nullptr</span> &amp;&amp; SafetyInfo != <span class="keyword">nullptr</span> &amp;&amp;</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;         <span class="stringliteral">&quot;Unexpected input to hoistRegion.&quot;</span>);</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160; </div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;  ControlFlowHoister CFH(LI, DT, CurLoop, MSSAU);</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160; </div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;  <span class="comment">// Keep track of instructions that have been hoisted, as they may need to be</span></div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;  <span class="comment">// re-hoisted if they end up not dominating all of their uses.</span></div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Instruction *, 16&gt;</a> HoistedInstructions;</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160; </div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;  <span class="comment">// For PHI hoisting to work we need to hoist blocks before their successors.</span></div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;  <span class="comment">// We can do this by iterating through the blocks in the loop in reverse</span></div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;  <span class="comment">// post-order.</span></div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;  <a class="code" href="classllvm_1_1LoopBlocksRPO.html">LoopBlocksRPO</a> Worklist(CurLoop);</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;  Worklist.<a class="code" href="classllvm_1_1LoopBlocksRPO.html#ad75769a81e0bebc6db0793566a4486fb">perform</a>(LI);</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;  <span class="keywordtype">bool</span> Changed = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> : Worklist) {</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;    <span class="comment">// Only need to process the contents of this block if it is not part of a</span></div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;    <span class="comment">// subloop (which would already have been processed).</span></div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;    <span class="keywordflow">if</span> (!LoopNestMode &amp;&amp; <a class="code" href="LICM_8cpp.html#aabae34d2dbed5dde1865f19ccbe4cb81">inSubLoop</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, CurLoop, LI))</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160; </div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : <a class="code" href="namespacellvm.html#a8154638df88e4eaa568b67b23d463dac">llvm::make_early_inc_range</a>(*<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>)) {</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;      <span class="comment">// Try constant folding this instruction.  If all the operands are</span></div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;      <span class="comment">// constants, it is technically hoistable, but it would be better to</span></div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;      <span class="comment">// just fold it.</span></div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = <a class="code" href="namespacellvm.html#ab6be6270337c6f7620007555247401ce">ConstantFoldInstruction</a>(</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;              &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getModule()-&gt;getDataLayout(), TLI)) {</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;        <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LICM folding inst: &quot;</span> &lt;&lt; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> &lt;&lt; <span class="stringliteral">&quot;  --&gt; &quot;</span> &lt;&lt; *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a></div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;                          &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;        <span class="comment">// FIXME MSSA: Such replacements may make accesses unoptimized (D51960).</span></div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;        <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.replaceAllUsesWith(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a627b2f86ac433d829482d5a5a0f50668">isInstructionTriviallyDead</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, TLI))</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;          <a class="code" href="LICM_8cpp.html#ab0cfc793d55940eac67854827dd365e9">eraseInstruction</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, *SafetyInfo, MSSAU);</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;        Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;      }</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160; </div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;      <span class="comment">// Try hoisting the instruction out to the preheader.  We can only do</span></div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;      <span class="comment">// this if all of the operands of the instruction are loop invariant and</span></div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;      <span class="comment">// if it is safe to hoist the instruction. We also check block frequency</span></div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;      <span class="comment">// to make sure instruction only gets hoisted into colder blocks.</span></div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;      <span class="comment">// TODO: It may be safe to hoist if we are hoisting to a conditional block</span></div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;      <span class="comment">// and we have accurately duplicated the control flow from the loop header</span></div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;      <span class="comment">// to that block.</span></div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;      <span class="keywordflow">if</span> (CurLoop-&gt;<a class="code" href="classllvm_1_1Loop.html#a54e82aea5fab8cf3a878003444f25ee7">hasLoopInvariantOperands</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &amp;&amp;</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;          <a class="code" href="namespacellvm.html#a158e2caed73e4b5d2ad70c1b2a0e0cc8">canSinkOrHoistInst</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, AA, DT, CurLoop, MSSAU, <span class="keyword">true</span>, Flags, ORE) &amp;&amp;</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;          <a class="code" href="LICM_8cpp.html#ab63d5eb7a9919d4e5f2c8d614e9bda97">isSafeToExecuteUnconditionally</a>(</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;              <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, DT, TLI, CurLoop, SafetyInfo, ORE,</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;              CurLoop-&gt;<a class="code" href="classllvm_1_1LoopBase.html#ac3280e7f76f955403fe17eacf126b90d">getLoopPreheader</a>()-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>(), AC,</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;              AllowSpeculation)) {</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;        <a class="code" href="LICM_8cpp.html#a3a3a3183a327e1186dbe900032390ec6">hoist</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, DT, CurLoop, CFH.getOrCreateHoistedBlock(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>), SafetyInfo,</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;              MSSAU, SE, ORE);</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;        HoistedInstructions.push_back(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;        Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;      }</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160; </div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;      <span class="comment">// Attempt to remove floating point division out of the loop by</span></div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;      <span class="comment">// converting it to a reciprocal multiplication.</span></div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOpcode() == Instruction::FDiv &amp;&amp; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.hasAllowReciprocal() &amp;&amp;</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;          CurLoop-&gt;<a class="code" href="classllvm_1_1Loop.html#a6cb6a58fb0ded82b4c7755fc4c27c86d">isLoopInvariant</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(1))) {</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;        <span class="keyword">auto</span> Divisor = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(1);</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;        <span class="keyword">auto</span> One = <a class="code" href="classllvm_1_1ConstantFP.html#a5eb8f7a5d3cfdd127ad9db2e425e14eb">llvm::ConstantFP::get</a>(Divisor-&gt;getType(), 1.0);</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;        <span class="keyword">auto</span> ReciprocalDivisor = BinaryOperator::CreateFDiv(One, Divisor);</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;        ReciprocalDivisor-&gt;setFastMathFlags(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getFastMathFlags());</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;        SafetyInfo-&gt;<a class="code" href="classllvm_1_1ICFLoopSafetyInfo.html#acaf635590a74bf4fdc2822b6f877afb7">insertInstructionTo</a>(ReciprocalDivisor, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getParent());</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;        ReciprocalDivisor-&gt;insertBefore(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160; </div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;        <span class="keyword">auto</span> Product =</div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;            BinaryOperator::CreateFMul(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(0), ReciprocalDivisor);</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;        Product-&gt;setFastMathFlags(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getFastMathFlags());</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;        SafetyInfo-&gt;<a class="code" href="classllvm_1_1ICFLoopSafetyInfo.html#acaf635590a74bf4fdc2822b6f877afb7">insertInstructionTo</a>(Product, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getParent());</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;        Product-&gt;insertAfter(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;        <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.replaceAllUsesWith(Product);</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;        <a class="code" href="LICM_8cpp.html#ab0cfc793d55940eac67854827dd365e9">eraseInstruction</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, *SafetyInfo, MSSAU);</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160; </div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;        <a class="code" href="LICM_8cpp.html#a3a3a3183a327e1186dbe900032390ec6">hoist</a>(*ReciprocalDivisor, DT, CurLoop, CFH.getOrCreateHoistedBlock(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>),</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;              SafetyInfo, MSSAU, SE, ORE);</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;        HoistedInstructions.push_back(ReciprocalDivisor);</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;        Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;      }</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160; </div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;      <span class="keyword">auto</span> IsInvariantStart = [&amp;](<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;        <span class="keyword">using namespace </span>PatternMatch;</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.use_empty() &amp;&amp;</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;               <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, m_Intrinsic&lt;Intrinsic::invariant_start&gt;());</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;      };</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;      <span class="keyword">auto</span> MustExecuteWithoutWritesBefore = [&amp;](<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;        <span class="keywordflow">return</span> SafetyInfo-&gt;<a class="code" href="classllvm_1_1ICFLoopSafetyInfo.html#ab40701961745d6467fa8e23b1e451c12">isGuaranteedToExecute</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, DT, CurLoop) &amp;&amp;</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;               SafetyInfo-&gt;<a class="code" href="classllvm_1_1ICFLoopSafetyInfo.html#a639eff65ee8e468b3891fbe67db54788">doesNotWriteMemoryBefore</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, CurLoop);</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;      };</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;      <span class="keywordflow">if</span> ((IsInvariantStart(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) || <a class="code" href="namespacellvm.html#a656efdcee3deb029763304d3e741a2d1">isGuard</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) &amp;&amp;</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;          CurLoop-&gt;<a class="code" href="classllvm_1_1Loop.html#a54e82aea5fab8cf3a878003444f25ee7">hasLoopInvariantOperands</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &amp;&amp;</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;          MustExecuteWithoutWritesBefore(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;        <a class="code" href="LICM_8cpp.html#a3a3a3183a327e1186dbe900032390ec6">hoist</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, DT, CurLoop, CFH.getOrCreateHoistedBlock(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>), SafetyInfo,</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;              MSSAU, SE, ORE);</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;        HoistedInstructions.push_back(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;        Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;      }</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160; </div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *PN = dyn_cast&lt;PHINode&gt;(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;        <span class="keywordflow">if</span> (CFH.canHoistPHI(PN)) {</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;          <span class="comment">// Redirect incoming blocks first to ensure that we create hoisted</span></div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;          <span class="comment">// versions of those blocks before we hoist the phi.</span></div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;          <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; PN-&gt;<a class="code" href="classllvm_1_1PHINode.html#aef51af4b490af6b3bf2dfbc8737a8f9f">getNumIncomingValues</a>(); ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;            PN-&gt;<a class="code" href="classllvm_1_1PHINode.html#a5ba57877c55dfdbe6e3bbfdacd9ef8c1">setIncomingBlock</a>(</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;                <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>, CFH.getOrCreateHoistedBlock(PN-&gt;<a class="code" href="classllvm_1_1PHINode.html#a8ce0c4746a1ec805e66409d20ae93922">getIncomingBlock</a>(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)));</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;          <a class="code" href="LICM_8cpp.html#a3a3a3183a327e1186dbe900032390ec6">hoist</a>(*PN, DT, CurLoop, CFH.getOrCreateHoistedBlock(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>), SafetyInfo,</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;                MSSAU, SE, ORE);</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;          <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(DT-&gt;<a class="code" href="classllvm_1_1DominatorTree.html#a5c69311e8d44898dac36a155c3d8691d">dominates</a>(PN, <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) &amp;&amp; <span class="stringliteral">&quot;Conditional PHIs not expected&quot;</span>);</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;          Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;        }</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;      }</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160; </div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;      <span class="comment">// Remember possibly hoistable branches so we can actually hoist them</span></div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;      <span class="comment">// later if needed.</span></div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a> *BI = dyn_cast&lt;BranchInst&gt;(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;        CFH.registerPossiblyHoistableBranch(BI);</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;    }</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;  }</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160; </div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;  <span class="comment">// If we hoisted instructions to a conditional block they may not dominate</span></div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;  <span class="comment">// their uses that weren&#39;t hoisted (such as phis where some operands are not</span></div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;  <span class="comment">// loop invariant). If so make them unconditional by moving them to their</span></div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;  <span class="comment">// immediate dominator. We iterate through the instructions in reverse order</span></div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;  <span class="comment">// which ensures that when we rehoist an instruction we rehoist its operands,</span></div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;  <span class="comment">// and also keep track of where in the block we are rehoisting to to make sure</span></div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;  <span class="comment">// that we rehoist instructions before the instructions that use them.</span></div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *HoistPoint = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="LICM_8cpp.html#ac7588f9346497ff9a8a966766c7c6bbc">ControlFlowHoisting</a>) {</div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : <a class="code" href="namespacellvm.html#a6b0ac1fa4f05de76413c5e0ca6334035">reverse</a>(HoistedInstructions)) {</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm.html#a0d10fe510ced2849a8074fe81e5d04ce">llvm::all_of</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;uses(),</div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;                        [&amp;](<a class="code" href="classllvm_1_1Use.html">Use</a> &amp;U) { return DT-&gt;dominates(I, U); })) {</div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;        <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Dominator =</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;            DT-&gt;<a class="code" href="classllvm_1_1DominatorTreeBase.html#a4344e66fb61ea313a85a9e054124ac55">getNode</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getParent())-&gt;<a class="code" href="classllvm_1_1DomTreeNodeBase.html#aa22cb3ff8c95bb05185acad8c569d4b6">getIDom</a>()-&gt;<a class="code" href="classllvm_1_1DomTreeNodeBase.html#a6a15a030098342e06ea73e1241d614c9">getBlock</a>();</div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;        <span class="keywordflow">if</span> (!HoistPoint || !DT-&gt;<a class="code" href="classllvm_1_1DominatorTree.html#a5c69311e8d44898dac36a155c3d8691d">dominates</a>(HoistPoint-&gt;<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>(), Dominator)) {</div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;          <span class="keywordflow">if</span> (HoistPoint)</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;            <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(DT-&gt;<a class="code" href="classllvm_1_1DominatorTree.html#a5c69311e8d44898dac36a155c3d8691d">dominates</a>(Dominator, HoistPoint-&gt;<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>()) &amp;&amp;</div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;                   <span class="stringliteral">&quot;New hoist point expected to dominate old hoist point&quot;</span>);</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;          HoistPoint = Dominator-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>();</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;        }</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;        <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LICM rehoisting to &quot;</span></div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;                          &lt;&lt; HoistPoint-&gt;<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>()-&gt;<a class="code" href="classllvm_1_1Value.html#a391ffe96dd8c686b0d2620c7fb25f8a5">getNameOrAsOperand</a>()</div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;                          &lt;&lt; <span class="stringliteral">&quot;: &quot;</span> &lt;&lt; *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;        <a class="code" href="LICM_8cpp.html#a4d17de7bbbee910e1e79e900ec72129f">moveInstructionBefore</a>(*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, *HoistPoint, *SafetyInfo, MSSAU, SE);</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;        HoistPoint = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;        Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;      }</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;    }</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;  }</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#aa29fe161c408879ada30c90ebbf55dcf">VerifyMemorySSA</a>)</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;    MSSAU.<a class="code" href="classllvm_1_1MemorySSAUpdater.html#a4121a20238504099c3466fa62ec877d5">getMemorySSA</a>()-&gt;<a class="code" href="classllvm_1_1MemorySSA.html#a88b10d37f671e58cf138ac84a8257c17">verifyMemorySSA</a>();</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160; </div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;    <span class="comment">// Now that we&#39;ve finished hoisting make sure that LI and DT are still</span></div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;    <span class="comment">// valid.</span></div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;<span class="preprocessor">#ifdef EXPENSIVE_CHECKS</span></div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;  <span class="keywordflow">if</span> (Changed) {</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(DT-&gt;<a class="code" href="classllvm_1_1DominatorTreeBase.html#a1f08f2925fec05b265e540d29066b9c8">verify</a>(<a class="code" href="namespacellvm_1_1Sched.html#ac1547cccaf660851fcd6863d1e60309ea258d0fc76498bc434cf57e73ea5adbfc">DominatorTree::VerificationLevel::Fast</a>) &amp;&amp;</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;           <span class="stringliteral">&quot;Dominator tree verification failed&quot;</span>);</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;    LI-&gt;<a class="code" href="classllvm_1_1LoopInfoBase.html#a17a8f7aba5cca5c7f9faa779a3c4bc37">verify</a>(*DT);</div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;  }</div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160; </div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;  <span class="keywordflow">return</span> Changed;</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;}</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160; </div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;<span class="comment">// Return true if LI is invariant within scope of the loop. LI is invariant if</span></div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;<span class="comment">// CurLoop is dominated by an invariant.start representing the same memory</span></div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;<span class="comment">// location and size as the memory location LI loads from, and also the</span></div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;<span class="comment">// invariant.start has no uses.</span></div>
<div class="line"><a name="l01042"></a><span class="lineno"><a class="line" href="LICM_8cpp.html#a831a5dec04e512d616fccb6e1f474e79"> 1042</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="LICM_8cpp.html#a831a5dec04e512d616fccb6e1f474e79">isLoadInvariantInLoop</a>(<a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a> *LI, <a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> *DT,</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;                                  <a class="code" href="classllvm_1_1Loop.html">Loop</a> *CurLoop) {</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ELFObjHandler_8cpp.html#a9df82a8be2f17e80535a8937bf23e022">Addr</a> = LI-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0);</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1DataLayout.html">DataLayout</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a> = LI-&gt;<a class="code" href="classllvm_1_1Instruction.html#a4ba3a5be6c0e9b9e8a525de055836733">getModule</a>()-&gt;<a class="code" href="classllvm_1_1Module.html#a6d883605206368bc536cc9ded97209b8">getDataLayout</a>();</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1TypeSize.html">TypeSize</a> LocSizeInBits = <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getTypeSizeInBits(LI-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>());</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160; </div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;  <span class="comment">// It is not currently possible for clang to generate an invariant.start</span></div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;  <span class="comment">// intrinsic with scalable vector types because we don&#39;t support thread local</span></div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;  <span class="comment">// sizeless types and we don&#39;t permit sizeless types in structs or classes.</span></div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;  <span class="comment">// Furthermore, even if support is added for this in future the intrinsic</span></div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;  <span class="comment">// itself is defined to have a size of -1 for variable sized objects. This</span></div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;  <span class="comment">// makes it impossible to verify if the intrinsic envelops our region of</span></div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;  <span class="comment">// interest. For example, both &lt;vscale x 32 x i8&gt; and &lt;vscale x 16 x i8&gt;</span></div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;  <span class="comment">// types would have a -1 parameter, but the former is clearly double the size</span></div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;  <span class="comment">// of the latter.</span></div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;  <span class="keywordflow">if</span> (LocSizeInBits.<a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#a9188f84e1dd67530330dcab9cae787d7">isScalable</a>())</div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160; </div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;  <span class="comment">// if the type is i8 addrspace(x)*, we know this is the type of</span></div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;  <span class="comment">// llvm.invariant.start operand</span></div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;  <span class="keyword">auto</span> *PtrInt8Ty = <a class="code" href="lib_2Target_2PowerPC_2README_8txt.html#aa91241c8c54738377749dc47ee489e0d">PointerType::get</a>(Type::getInt8Ty(LI-&gt;<a class="code" href="classllvm_1_1Value.html#ab3fc0225d8aaf8434026c3573f961f2c">getContext</a>()),</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;                                     LI-&gt;<a class="code" href="classllvm_1_1LoadInst.html#a161c2db145827f4e181e7fe662b53a81">getPointerAddressSpace</a>());</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;  <span class="keywordtype">unsigned</span> BitcastsVisited = 0;</div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;  <span class="comment">// Look through bitcasts until we reach the i8* type (this is invariant.start</span></div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;  <span class="comment">// operand type).</span></div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;  <span class="keywordflow">while</span> (<a class="code" href="ELFObjHandler_8cpp.html#a9df82a8be2f17e80535a8937bf23e022">Addr</a>-&gt;getType() != PtrInt8Ty) {</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;    <span class="keyword">auto</span> *BC = dyn_cast&lt;BitCastInst&gt;(<a class="code" href="ELFObjHandler_8cpp.html#a9df82a8be2f17e80535a8937bf23e022">Addr</a>);</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;    <span class="comment">// Avoid traversing high number of bitcast uses.</span></div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;    <span class="keywordflow">if</span> (++BitcastsVisited &gt; <a class="code" href="LICM_8cpp.html#af381f6f01f617f2195adc0ab06aee4fd">MaxNumUsesTraversed</a> || !BC)</div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;    <a class="code" href="ELFObjHandler_8cpp.html#a9df82a8be2f17e80535a8937bf23e022">Addr</a> = BC-&gt;getOperand(0);</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;  }</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;  <span class="comment">// If we&#39;ve ended up at a global/constant, bail. We shouldn&#39;t be looking at</span></div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;  <span class="comment">// uselists for non-local Values in a loop pass.</span></div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;  <span class="keywordflow">if</span> (isa&lt;Constant&gt;(<a class="code" href="ELFObjHandler_8cpp.html#a9df82a8be2f17e80535a8937bf23e022">Addr</a>))</div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160; </div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;  <span class="keywordtype">unsigned</span> UsesVisited = 0;</div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;  <span class="comment">// Traverse all uses of the load operand value, to see if invariant.start is</span></div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;  <span class="comment">// one of the uses, and whether it dominates the load instruction.</span></div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> *U : <a class="code" href="ELFObjHandler_8cpp.html#a9df82a8be2f17e80535a8937bf23e022">Addr</a>-&gt;users()) {</div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;    <span class="comment">// Avoid traversing for Load operand with high number of users.</span></div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;    <span class="keywordflow">if</span> (++UsesVisited &gt; <a class="code" href="LICM_8cpp.html#af381f6f01f617f2195adc0ab06aee4fd">MaxNumUsesTraversed</a>)</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;    <a class="code" href="classllvm_1_1IntrinsicInst.html">IntrinsicInst</a> *II = dyn_cast&lt;IntrinsicInst&gt;(U);</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;    <span class="comment">// If there are escaping uses of invariant.start instruction, the load maybe</span></div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;    <span class="comment">// non-invariant.</span></div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;    <span class="keywordflow">if</span> (!II || II-&gt;<a class="code" href="classllvm_1_1IntrinsicInst.html#a7ff64b3625b6f9020556ed05a5f72af4">getIntrinsicID</a>() != Intrinsic::invariant_start ||</div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;        !II-&gt;<a class="code" href="classllvm_1_1Value.html#a9d7de807ebdfe1819df3ff6cb0f16158">use_empty</a>())</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;    <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *InvariantSize = cast&lt;ConstantInt&gt;(II-&gt;<a class="code" href="classllvm_1_1CallBase.html#ab2caa29167597390ab2fc3cf30d70389">getArgOperand</a>(0));</div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;    <span class="comment">// The intrinsic supports having a -1 argument for variable sized objects</span></div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;    <span class="comment">// so we should check for that here.</span></div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;    <span class="keywordflow">if</span> (InvariantSize-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#a2a8c8be274f3bd351e083ab3828c14c7">isNegative</a>())</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;    <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> InvariantSizeInBits = InvariantSize-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#aa8f4be0661aa64f5b1f20b15e93bb403">getSExtValue</a>() * 8;</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;    <span class="comment">// Confirm the invariant.start location size contains the load operand size</span></div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;    <span class="comment">// in bits. Also, the invariant.start should dominate the load, and we</span></div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;    <span class="comment">// should not hoist the load out of a loop that contains this dominating</span></div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;    <span class="comment">// invariant.start.</span></div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;    <span class="keywordflow">if</span> (LocSizeInBits.<a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#a33880aaca0ad05e5f1557f079305bde5">getFixedValue</a>() &lt;= InvariantSizeInBits &amp;&amp;</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;        DT-&gt;<a class="code" href="classllvm_1_1DominatorTreeBase.html#ade6d93f9485649bade540a37ec163058">properlyDominates</a>(II-&gt;<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>(), CurLoop-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a58c5b170ea68b41e94ebb0019523a68f">getHeader</a>()))</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;  }</div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160; </div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;}</div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160; </div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;<span class="keyword">namespace </span>{<span class="comment"></span></div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;<span class="comment">/// Return true if-and-only-if we know how to (mechanically) both hoist and</span></div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;<span class="comment">/// sink a given instruction out of a loop.  Does not address legality</span></div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;<span class="comment">/// concerns such as aliasing or speculation safety.</span></div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> isHoistableAndSinkableInst(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;  <span class="comment">// Only these instructions are hoistable/sinkable.</span></div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;  <span class="keywordflow">return</span> (isa&lt;LoadInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) || isa&lt;StoreInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) || isa&lt;CallInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) ||</div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;          isa&lt;FenceInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) || isa&lt;CastInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) || isa&lt;UnaryOperator&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) ||</div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;          isa&lt;BinaryOperator&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) || isa&lt;SelectInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) ||</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;          isa&lt;GetElementPtrInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) || isa&lt;CmpInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) ||</div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;          isa&lt;InsertElementInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) || isa&lt;ExtractElementInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) ||</div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;          isa&lt;ShuffleVectorInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) || isa&lt;ExtractValueInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) ||</div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;          isa&lt;InsertValueInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) || isa&lt;FreezeInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>));</div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;}<span class="comment"></span></div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;<span class="comment">/// Return true if MSSA knows there are no MemoryDefs in the loop.</span></div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> isReadOnly(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MemorySSAUpdater.html">MemorySSAUpdater</a> &amp;MSSAU, <span class="keyword">const</span> <a class="code" href="classllvm_1_1Loop.html">Loop</a> *L) {</div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> : L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a5cc113cb783ab6e5ca7b69241431c19c">getBlocks</a>())</div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;    <span class="keywordflow">if</span> (MSSAU.<a class="code" href="classllvm_1_1MemorySSAUpdater.html#a4121a20238504099c3466fa62ec877d5">getMemorySSA</a>()-&gt;<a class="code" href="classllvm_1_1MemorySSA.html#a65b7c715bf28eb17cfd012dd9bc3ad4b">getBlockDefs</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>))</div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;}</div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;<span class="comment">/// Return true if I is the only Instruction with a MemoryAccess in L.</span></div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> isOnlyMemoryAccess(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <span class="keyword">const</span> <a class="code" href="classllvm_1_1Loop.html">Loop</a> *L,</div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;                        <span class="keyword">const</span> <a class="code" href="classllvm_1_1MemorySSAUpdater.html">MemorySSAUpdater</a> &amp;MSSAU) {</div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> : L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a5cc113cb783ab6e5ca7b69241431c19c">getBlocks</a>())</div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> *Accs = MSSAU.<a class="code" href="classllvm_1_1MemorySSAUpdater.html#a4121a20238504099c3466fa62ec877d5">getMemorySSA</a>()-&gt;<a class="code" href="classllvm_1_1MemorySSA.html#aaff19b909f903fe2a431e97424ffced5">getBlockAccesses</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>)) {</div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;      <span class="keywordtype">int</span> NotAPhi = 0;</div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;Acc : *Accs) {</div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;        <span class="keywordflow">if</span> (isa&lt;MemoryPhi&gt;(&amp;Acc))</div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;        <span class="keyword">const</span> <span class="keyword">auto</span> *MUD = cast&lt;MemoryUseOrDef&gt;(&amp;Acc);</div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;        <span class="keywordflow">if</span> (MUD-&gt;getMemoryInst() != <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> || NotAPhi++ == 1)</div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;      }</div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;    }</div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;}</div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;}</div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160; </div>
<div class="line"><a name="l01150"></a><span class="lineno"><a class="line" href="namespacellvm.html#a158e2caed73e4b5d2ad70c1b2a0e0cc8"> 1150</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="namespacellvm.html#a158e2caed73e4b5d2ad70c1b2a0e0cc8">llvm::canSinkOrHoistInst</a>(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1AAResults.html">AAResults</a> *AA, <a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> *DT,</div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;                              <a class="code" href="classllvm_1_1Loop.html">Loop</a> *CurLoop, <a class="code" href="classllvm_1_1MemorySSAUpdater.html">MemorySSAUpdater</a> &amp;MSSAU,</div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;                              <span class="keywordtype">bool</span> TargetExecutesOncePerLoop,</div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;                              <a class="code" href="classllvm_1_1SinkAndHoistLICMFlags.html">SinkAndHoistLICMFlags</a> &amp;Flags,</div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;                              <a class="code" href="classllvm_1_1OptimizationRemarkEmitter.html">OptimizationRemarkEmitter</a> *ORE) {</div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;  <span class="comment">// If we don&#39;t understand the instruction, bail early.</span></div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;  <span class="keywordflow">if</span> (!isHoistableAndSinkableInst(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160; </div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;  <a class="code" href="classllvm_1_1MemorySSA.html">MemorySSA</a> *MSSA = MSSAU.<a class="code" href="classllvm_1_1MemorySSAUpdater.html#a4121a20238504099c3466fa62ec877d5">getMemorySSA</a>();</div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;  <span class="comment">// Loads have extra constraints we have to verify before we can hoist them.</span></div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a> *LI = dyn_cast&lt;LoadInst&gt;(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;    <span class="keywordflow">if</span> (!LI-&gt;isUnordered())</div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="comment">// Don&#39;t sink/hoist volatile or ordered atomic loads!</span></div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160; </div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;    <span class="comment">// Loads from constant memory are always safe to move, even if they end up</span></div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;    <span class="comment">// in the same alias set as something that ends up being modified.</span></div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm.html#a728f79528ca8659e15d00c1e6818b316">isModSet</a>(AA-&gt;<a class="code" href="classllvm_1_1AAResults.html#a7785e563bd969eb1f63d26eca6873eb6">getModRefInfoMask</a>(LI-&gt;getOperand(0))))</div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;    <span class="keywordflow">if</span> (LI-&gt;hasMetadata(LLVMContext::MD_invariant_load))</div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160; </div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;    <span class="keywordflow">if</span> (LI-&gt;isAtomic() &amp;&amp; !TargetExecutesOncePerLoop)</div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="comment">// Don&#39;t risk duplicating unordered loads</span></div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160; </div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;    <span class="comment">// This checks for an invariant.start dominating the load.</span></div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="LICM_8cpp.html#a831a5dec04e512d616fccb6e1f474e79">isLoadInvariantInLoop</a>(LI, DT, CurLoop))</div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160; </div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;    <span class="keywordtype">bool</span> Invalidated = <a class="code" href="LICM_8cpp.html#a0a473c402b8ddf9660f82fa84ba38b59">pointerInvalidatedByLoop</a>(</div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;        MSSA, cast&lt;MemoryUse&gt;(MSSA-&gt;<a class="code" href="classllvm_1_1MemorySSA.html#a4ece07ee1030856099726901d0eef81b">getMemoryAccess</a>(LI)), CurLoop, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, Flags);</div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;    <span class="comment">// Check loop-invariant address because this may also be a sinkable load</span></div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;    <span class="comment">// whose address is not necessarily loop-invariant.</span></div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;    <span class="keywordflow">if</span> (ORE &amp;&amp; Invalidated &amp;&amp; CurLoop-&gt;<a class="code" href="classllvm_1_1Loop.html#a6cb6a58fb0ded82b4c7755fc4c27c86d">isLoopInvariant</a>(LI-&gt;getPointerOperand()))</div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;      ORE-&gt;<a class="code" href="classllvm_1_1OptimizationRemarkEmitter.html#aae6a98aea85aa3af87357cc5448db499">emit</a>([&amp;]() {</div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1OptimizationRemarkMissed.html">OptimizationRemarkMissed</a>(</div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;                   <a class="code" href="LICM_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">DEBUG_TYPE</a>, <span class="stringliteral">&quot;LoadWithLoopInvariantAddressInvalidated&quot;</span>, LI)</div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;               &lt;&lt; <span class="stringliteral">&quot;failed to move load with loop-invariant address &quot;</span></div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;                  <span class="stringliteral">&quot;because the loop may invalidate its value&quot;</span>;</div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;      });</div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160; </div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;    <span class="keywordflow">return</span> !Invalidated;</div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *CI = dyn_cast&lt;CallInst&gt;(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;    <span class="comment">// Don&#39;t sink or hoist dbg info; it&#39;s legal, but not useful.</span></div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;    <span class="keywordflow">if</span> (isa&lt;DbgInfoIntrinsic&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160; </div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;    <span class="comment">// Don&#39;t sink calls which can throw.</span></div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;    <span class="keywordflow">if</span> (CI-&gt;mayThrow())</div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160; </div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;    <span class="comment">// Convergent attribute has been used on operations that involve</span></div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;    <span class="comment">// inter-thread communication which results are implicitly affected by the</span></div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;    <span class="comment">// enclosing control flows. It is not safe to hoist or sink such operations</span></div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;    <span class="comment">// across control flow.</span></div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;    <span class="keywordflow">if</span> (CI-&gt;isConvergent())</div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160; </div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;    <span class="keyword">using namespace </span>PatternMatch;</div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(CI, m_Intrinsic&lt;Intrinsic::assume&gt;()))</div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;      <span class="comment">// Assumes don&#39;t actually alias anything or throw</span></div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160; </div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(CI, m_Intrinsic&lt;Intrinsic::experimental_widenable_condition&gt;()))</div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;      <span class="comment">// Widenable conditions don&#39;t actually alias anything or throw</span></div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160; </div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;    <span class="comment">// Handle simple cases by querying alias analysis.</span></div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;    <a class="code" href="classllvm_1_1MemoryEffects.html">MemoryEffects</a> Behavior = AA-&gt;<a class="code" href="classllvm_1_1AAResults.html#a98f54e18da022cdb497fbbeed4488276">getMemoryEffects</a>(CI);</div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;    <span class="keywordflow">if</span> (Behavior.<a class="code" href="classllvm_1_1MemoryEffects.html#a5e215734f00c96489db57a352b0439cc">doesNotAccessMemory</a>())</div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;    <span class="keywordflow">if</span> (Behavior.<a class="code" href="classllvm_1_1MemoryEffects.html#a2c4da7a8e6662256338058f15e038c31">onlyReadsMemory</a>()) {</div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;      <span class="comment">// A readonly argmemonly function only reads from memory pointed to by</span></div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;      <span class="comment">// it&#39;s arguments with arbitrary offsets.  If we can prove there are no</span></div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;      <span class="comment">// writes to this memory in the loop, we can hoist or sink.</span></div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;      <span class="keywordflow">if</span> (Behavior.<a class="code" href="classllvm_1_1MemoryEffects.html#a05319d3cd9be33731ba884642cf1df76">onlyAccessesArgPointees</a>()) {</div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;        <span class="comment">// TODO: expand to writeable arguments</span></div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a> : CI-&gt;args())</div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>-&gt;getType()-&gt;isPointerTy() &amp;&amp;</div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;              <a class="code" href="LICM_8cpp.html#a0a473c402b8ddf9660f82fa84ba38b59">pointerInvalidatedByLoop</a>(</div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;                  MSSA, cast&lt;MemoryUse&gt;(MSSA-&gt;<a class="code" href="classllvm_1_1MemorySSA.html#a4ece07ee1030856099726901d0eef81b">getMemoryAccess</a>(CI)), CurLoop, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>,</div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;                  Flags))</div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;      }</div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160; </div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;      <span class="comment">// If this call only reads from memory and there are no writes to memory</span></div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;      <span class="comment">// in the loop, we can hoist or sink the call as appropriate.</span></div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;      <span class="keywordflow">if</span> (isReadOnly(MSSAU, CurLoop))</div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;    }</div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160; </div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;    <span class="comment">// FIXME: This should use mod/ref information to see if we can hoist or</span></div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;    <span class="comment">// sink the call.</span></div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160; </div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">auto</span> *FI = dyn_cast&lt;FenceInst&gt;(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;    <span class="comment">// Fences alias (most) everything to provide ordering.  For the moment,</span></div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;    <span class="comment">// just give up if there are any other memory operations in the loop.</span></div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;    <span class="keywordflow">return</span> isOnlyMemoryAccess(FI, CurLoop, MSSAU);</div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">auto</span> *<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a> = dyn_cast&lt;StoreInst&gt;(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;isUnordered())</div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="comment">// Don&#39;t sink/hoist volatile or ordered atomic store!</span></div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160; </div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;    <span class="comment">// We can only hoist a store that we can prove writes a value which is not</span></div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;    <span class="comment">// read or overwritten within the loop.  For those cases, we fallback to</span></div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;    <span class="comment">// load store promotion instead.  TODO: We can extend this to cases where</span></div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;    <span class="comment">// there is exactly one write to the location and that write dominates an</span></div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;    <span class="comment">// arbitrary number of reads in the loop.</span></div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;    <span class="keywordflow">if</span> (isOnlyMemoryAccess(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>, CurLoop, MSSAU))</div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;    <span class="comment">// If there are more accesses than the Promotion cap or no &quot;quota&quot; to</span></div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;    <span class="comment">// check clobber, then give up as we&#39;re not walking a list that long.</span></div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;    <span class="keywordflow">if</span> (Flags.tooManyMemoryAccesses() || Flags.tooManyClobberingCalls())</div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;    <span class="comment">// If there are interfering Uses (i.e. their defining access is in the</span></div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;    <span class="comment">// loop), or ordered loads (stored as Defs!), don&#39;t move this store.</span></div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;    <span class="comment">// Could do better here, but this is conservatively correct.</span></div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;    <span class="comment">// TODO: Cache set of Uses on the first walk in runOnLoop, update when</span></div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;    <span class="comment">// moving accesses. Can also extend to dominating uses.</span></div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;    <span class="keyword">auto</span> *SIMD = MSSA-&gt;<a class="code" href="classllvm_1_1MemorySSA.html#a4ece07ee1030856099726901d0eef81b">getMemoryAccess</a>(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>);</div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> : CurLoop-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a5cc113cb783ab6e5ca7b69241431c19c">getBlocks</a>())</div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> *Accesses = MSSA-&gt;<a class="code" href="classllvm_1_1MemorySSA.html#aaff19b909f903fe2a431e97424ffced5">getBlockAccesses</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>)) {</div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;        <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;MA : *Accesses)</div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;          <span class="keywordflow">if</span> (<span class="keyword">const</span> <span class="keyword">auto</span> *MU = dyn_cast&lt;MemoryUse&gt;(&amp;MA)) {</div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;            <span class="keyword">auto</span> *MD = MU-&gt;<a class="code" href="classllvm_1_1MemoryUseOrDef.html#abc4e1b6cc483cfd57ca75c4ab92bd360">getDefiningAccess</a>();</div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;            <span class="keywordflow">if</span> (!MSSA-&gt;<a class="code" href="classllvm_1_1MemorySSA.html#ae3b89ffde42778289bcbd8a187199420">isLiveOnEntryDef</a>(MD) &amp;&amp;</div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;                CurLoop-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a04337b572d34ea413c35dbac5d75530b">contains</a>(MD-&gt;getBlock()))</div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;              <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;            <span class="comment">// Disable hoisting past potentially interfering loads. Optimized</span></div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;            <span class="comment">// Uses may point to an access outside the loop, as getClobbering</span></div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;            <span class="comment">// checks the previous iteration when walking the backedge.</span></div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;            <span class="comment">// FIXME: More precise: no Uses that alias SI.</span></div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;            <span class="keywordflow">if</span> (!Flags.getIsSink() &amp;&amp; !MSSA-&gt;<a class="code" href="classllvm_1_1MemorySSA.html#a56004f54560e9950f6eb148cb5dfa0a3">dominates</a>(SIMD, MU))</div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;              <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;          } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">const</span> <span class="keyword">auto</span> *MD = dyn_cast&lt;MemoryDef&gt;(&amp;MA)) {</div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;            <span class="keywordflow">if</span> (<span class="keyword">auto</span> *LI = dyn_cast&lt;LoadInst&gt;(MD-&gt;getMemoryInst())) {</div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;              (void)LI; <span class="comment">// Silence warning.</span></div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;              <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!LI-&gt;isUnordered() &amp;&amp; <span class="stringliteral">&quot;Expected unordered load&quot;</span>);</div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;              <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;            }</div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;            <span class="comment">// Any call, while it may not be clobbering SI, it may be a use.</span></div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;            <span class="keywordflow">if</span> (<span class="keyword">auto</span> *CI = dyn_cast&lt;CallInst&gt;(MD-&gt;getMemoryInst())) {</div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;              <span class="comment">// Check if the call may read from the memory location written</span></div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;              <span class="comment">// to by SI. Check CI&#39;s attributes and arguments; the number of</span></div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;              <span class="comment">// such checks performed is limited above by NoOfMemAccTooLarge.</span></div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;              <a class="code" href="namespacellvm.html#a9db8c44b250b90e3ab7e4d144e7c9c2e">ModRefInfo</a> <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a> = AA-&gt;<a class="code" href="classllvm_1_1AAResults.html#a2205e49ace8bb2fd9934342ff6a25e13">getModRefInfo</a>(CI, <a class="code" href="lib_2Target_2PowerPC_2README_8txt.html#aa91241c8c54738377749dc47ee489e0d">MemoryLocation::get</a>(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>));</div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;              <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a854abfc88bcd24e3878e2c9ab1f70fd3">isModOrRefSet</a>(<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>))</div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;            }</div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;          }</div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;      }</div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;    <span class="keyword">auto</span> *<a class="code" href="namespacellvm_1_1Sched.html#ac1547cccaf660851fcd6863d1e60309eac13545a6345c7d5b3c9cc8932ad3b0e9">Source</a> = MSSA-&gt;<a class="code" href="classllvm_1_1MemorySSA.html#a2ef6f9107316d963f20b9003b7668c4e">getSkipSelfWalker</a>()-&gt;<a class="code" href="classllvm_1_1MemorySSAWalker.html#a95d0e423957d029a78e5868f539e9cce">getClobberingMemoryAccess</a>(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>);</div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;    Flags.incrementClobberingCalls();</div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;    <span class="comment">// If there are no clobbering Defs in the loop, store is safe to hoist.</span></div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;    <span class="keywordflow">return</span> MSSA-&gt;<a class="code" href="classllvm_1_1MemorySSA.html#ae3b89ffde42778289bcbd8a187199420">isLiveOnEntryDef</a>(<a class="code" href="namespacellvm_1_1Sched.html#ac1547cccaf660851fcd6863d1e60309eac13545a6345c7d5b3c9cc8932ad3b0e9">Source</a>) ||</div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;           !CurLoop-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a04337b572d34ea413c35dbac5d75530b">contains</a>(<a class="code" href="namespacellvm_1_1Sched.html#ac1547cccaf660851fcd6863d1e60309eac13545a6345c7d5b3c9cc8932ad3b0e9">Source</a>-&gt;getBlock());</div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;  }</div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160; </div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.mayReadOrWriteMemory() &amp;&amp; <span class="stringliteral">&quot;unhandled aliasing&quot;</span>);</div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160; </div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;  <span class="comment">// We&#39;ve established mechanical ability and aliasing, it&#39;s up to the caller</span></div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;  <span class="comment">// to check fault safety</span></div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;}</div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;<span class="comment">/// Returns true if a PHINode is a trivially replaceable with an</span></div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;<span class="comment">/// Instruction.</span></div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;<span class="comment">/// This is true when all incoming values are that instruction.</span></div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;<span class="comment">/// This pattern occurs most often with LCSSA PHI nodes.</span></div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l01321"></a><span class="lineno"><a class="line" href="LICM_8cpp.html#ad0eaec807c54661058d9a1aed11195d9"> 1321</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="LICM_8cpp.html#ad0eaec807c54661058d9a1aed11195d9">isTriviallyReplaceablePHI</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> &amp;PN, <span class="keyword">const</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *IncValue : PN.<a class="code" href="classllvm_1_1PHINode.html#a1f0ff79b64a40d383b891f1baba89c6b">incoming_values</a>())</div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;    <span class="keywordflow">if</span> (IncValue != &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160; </div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;}</div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;<span class="comment">/// Return true if the instruction is free in the loop.</span></div>
<div class="line"><a name="l01330"></a><span class="lineno"><a class="line" href="LICM_8cpp.html#ae9fc07f464d6601a68b115021375a54b"> 1330</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="LICM_8cpp.html#ae9fc07f464d6601a68b115021375a54b">isFreeInLoop</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <span class="keyword">const</span> <a class="code" href="classllvm_1_1Loop.html">Loop</a> *CurLoop,</div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;                         <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetTransformInfo.html">TargetTransformInfo</a> *<a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>) {</div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;  <a class="code" href="classllvm_1_1InstructionCost.html">InstructionCost</a> CostI =</div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;      <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>-&gt;<a class="code" href="classllvm_1_1TargetTransformInfo.html#ac77dbedcfd916a5c9b58e753b2678a98">getInstructionCost</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, TargetTransformInfo::TCK_SizeAndLatency);</div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160; </div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a> = dyn_cast&lt;GetElementPtrInst&gt;(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;    <span class="keywordflow">if</span> (CostI != TargetTransformInfo::TCC_Free)</div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;    <span class="comment">// For a GEP, we cannot simply use getInstructionCost because currently</span></div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;    <span class="comment">// it optimistically assumes that a GEP will fold into addressing mode</span></div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;    <span class="comment">// regardless of its users.</span></div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> = <a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>-&gt;getParent();</div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1User.html">User</a> *U : <a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>-&gt;users()) {</div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *UI = cast&lt;Instruction&gt;(U);</div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;      <span class="keywordflow">if</span> (CurLoop-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a04337b572d34ea413c35dbac5d75530b">contains</a>(UI) &amp;&amp;</div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;          (<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> != UI-&gt;<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>() ||</div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;           (!isa&lt;StoreInst&gt;(UI) &amp;&amp; !isa&lt;LoadInst&gt;(UI))))</div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;    }</div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;  }</div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160; </div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;  <span class="keywordflow">return</span> CostI == TargetTransformInfo::TCC_Free;</div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;}</div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;<span class="comment">/// Return true if the only users of this instruction are outside of</span></div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;<span class="comment">/// the loop. If this is true, we can sink the instruction to the exit</span></div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;<span class="comment">/// blocks of the loop.</span></div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;<span class="comment">/// We also return true if the instruction could be folded away in lowering.</span></div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;<span class="comment">/// (e.g.,  a GEP can be folded into a load as an addressing mode in the loop).</span></div>
<div class="line"><a name="l01361"></a><span class="lineno"><a class="line" href="LICM_8cpp.html#a20be54e1ec24a63f98accb9d9944b3ed"> 1361</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="LICM_8cpp.html#a20be54e1ec24a63f98accb9d9944b3ed">isNotUsedOrFreeInLoop</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <span class="keyword">const</span> <a class="code" href="classllvm_1_1Loop.html">Loop</a> *CurLoop,</div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;                                  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LoopSafetyInfo.html">LoopSafetyInfo</a> *SafetyInfo,</div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;                                  <a class="code" href="classllvm_1_1TargetTransformInfo.html">TargetTransformInfo</a> *<a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>, <span class="keywordtype">bool</span> &amp;FreeInLoop,</div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;                                  <span class="keywordtype">bool</span> LoopNestMode) {</div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span> &amp;BlockColors = SafetyInfo-&gt;<a class="code" href="classllvm_1_1LoopSafetyInfo.html#a59204639c099ab5d774e8f5cf929ed9d">getBlockColors</a>();</div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;  <span class="keywordtype">bool</span> IsFree = <a class="code" href="LICM_8cpp.html#ae9fc07f464d6601a68b115021375a54b">isFreeInLoop</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, CurLoop, <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>);</div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1User.html">User</a> *U : <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.users()) {</div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *UI = cast&lt;Instruction&gt;(U);</div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *PN = dyn_cast&lt;PHINode&gt;(UI)) {</div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> = PN-&gt;<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>();</div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;      <span class="comment">// We cannot sink uses in catchswitches.</span></div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;      <span class="keywordflow">if</span> (isa&lt;CatchSwitchInst&gt;(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getTerminator()))</div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160; </div>
<div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;      <span class="comment">// We need to sink a callsite to a unique funclet.  Avoid sinking if the</span></div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;      <span class="comment">// phi use is too muddled.</span></div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;      <span class="keywordflow">if</span> (isa&lt;CallInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;        <span class="keywordflow">if</span> (!BlockColors.empty() &amp;&amp;</div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;            BlockColors.find(<span class="keyword">const_cast&lt;</span><a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<span class="keyword">&gt;</span>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>))-&gt;second.size() != 1)</div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160; </div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;      <span class="keywordflow">if</span> (LoopNestMode) {</div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;        <span class="keywordflow">while</span> (isa&lt;PHINode&gt;(UI) &amp;&amp; UI-&gt;<a class="code" href="classllvm_1_1Value.html#a2e987c6af902aad6baa39bd5b7ef322c">hasOneUser</a>() &amp;&amp;</div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;               UI-&gt;<a class="code" href="classllvm_1_1User.html#addec638786f763d967811b45cb662f1f">getNumOperands</a>() == 1) {</div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;          <span class="keywordflow">if</span> (!CurLoop-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a04337b572d34ea413c35dbac5d75530b">contains</a>(UI))</div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;          UI = cast&lt;Instruction&gt;(UI-&gt;<a class="code" href="classllvm_1_1Instruction.html#a2fd1d2dc14e22227cfa8238778ab87b8">user_back</a>());</div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;        }</div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;      }</div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;    }</div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160; </div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;    <span class="keywordflow">if</span> (CurLoop-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a04337b572d34ea413c35dbac5d75530b">contains</a>(UI)) {</div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;      <span class="keywordflow">if</span> (IsFree) {</div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;        FreeInLoop = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;      }</div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;    }</div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;  }</div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;}</div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160; </div>
<div class="line"><a name="l01403"></a><span class="lineno"><a class="line" href="LICM_8cpp.html#a25f0b41add9507b8eafadfbc4a090d6c"> 1403</a></span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="LICM_8cpp.html#a25f0b41add9507b8eafadfbc4a090d6c">cloneInstructionInExitBlock</a>(</div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> &amp;ExitBlock, <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> &amp;PN, <span class="keyword">const</span> <a class="code" href="classllvm_1_1LoopInfo.html">LoopInfo</a> *LI,</div>
<div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1LoopSafetyInfo.html">LoopSafetyInfo</a> *SafetyInfo, <a class="code" href="classllvm_1_1MemorySSAUpdater.html">MemorySSAUpdater</a> &amp;MSSAU) {</div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *New;</div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *CI = dyn_cast&lt;CallInst&gt;(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> &amp;BlockColors = SafetyInfo-&gt;<a class="code" href="classllvm_1_1LoopSafetyInfo.html#a59204639c099ab5d774e8f5cf929ed9d">getBlockColors</a>();</div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160; </div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;    <span class="comment">// Sinking call-sites need to be handled differently from other</span></div>
<div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;    <span class="comment">// instructions.  The cloned call-site needs a funclet bundle operand</span></div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;    <span class="comment">// appropriate for its location in the CFG.</span></div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;OperandBundleDef, 1&gt;</a> OpBundles;</div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> BundleIdx = 0, BundleEnd = CI-&gt;getNumOperandBundles();</div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;         BundleIdx != BundleEnd; ++BundleIdx) {</div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;      <a class="code" href="structllvm_1_1OperandBundleUse.html">OperandBundleUse</a> Bundle = CI-&gt;getOperandBundleAt(BundleIdx);</div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;      <span class="keywordflow">if</span> (Bundle.<a class="code" href="structllvm_1_1OperandBundleUse.html#a6386ca6c50ec4ef5d9a0f13e7fe8f0c9">getTagID</a>() == LLVMContext::OB_funclet)</div>
<div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160; </div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;      OpBundles.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a396fcfee6914c76974b73c3d203da6a5">emplace_back</a>(Bundle);</div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;    }</div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160; </div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;    <span class="keywordflow">if</span> (!BlockColors.empty()) {</div>
<div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1TinyPtrVector.html">ColorVector</a> &amp;CV = BlockColors.find(&amp;ExitBlock)-&gt;second;</div>
<div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(CV.<a class="code" href="classllvm_1_1TinyPtrVector.html#aac784c7664f3f6b8076756c6fb0eed74">size</a>() == 1 &amp;&amp; <span class="stringliteral">&quot;non-unique color for exit block!&quot;</span>);</div>
<div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;      <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *BBColor = CV.<a class="code" href="classllvm_1_1TinyPtrVector.html#a3a26404d33061e8aaeab39c490181389">front</a>();</div>
<div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;      <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *EHPad = BBColor-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a46ef6115027606b67adcf4d28f3dac17">getFirstNonPHI</a>();</div>
<div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;      <span class="keywordflow">if</span> (EHPad-&gt;<a class="code" href="classllvm_1_1Instruction.html#a5d3d315f678bc76e43b27d18e5d72829">isEHPad</a>())</div>
<div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;        OpBundles.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a396fcfee6914c76974b73c3d203da6a5">emplace_back</a>(<span class="stringliteral">&quot;funclet&quot;</span>, EHPad);</div>
<div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;    }</div>
<div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160; </div>
<div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;    New = CallInst::Create(CI, OpBundles);</div>
<div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;    New = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.clone();</div>
<div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;  }</div>
<div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160; </div>
<div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;  New-&gt;insertInto(&amp;ExitBlock, ExitBlock.<a class="code" href="classllvm_1_1BasicBlock.html#a161fd4e9fa5367f64c2a4c9e921c3ad3">getFirstInsertionPt</a>());</div>
<div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getName().empty())</div>
<div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;    New-&gt;setName(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getName() + <span class="stringliteral">&quot;.le&quot;</span>);</div>
<div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160; </div>
<div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;  <span class="keywordflow">if</span> (MSSAU.<a class="code" href="classllvm_1_1MemorySSAUpdater.html#a4121a20238504099c3466fa62ec877d5">getMemorySSA</a>()-&gt;<a class="code" href="classllvm_1_1MemorySSA.html#a4ece07ee1030856099726901d0eef81b">getMemoryAccess</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;    <span class="comment">// Create a new MemoryAccess and let MemorySSA set its defining access.</span></div>
<div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;    <a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *NewMemAcc = MSSAU.<a class="code" href="classllvm_1_1MemorySSAUpdater.html#a8d0093ed3e69ff491615a2ced017b1af">createMemoryAccessInBB</a>(</div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;        New, <span class="keyword">nullptr</span>, New-&gt;getParent(), MemorySSA::Beginning);</div>
<div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;    <span class="keywordflow">if</span> (NewMemAcc) {</div>
<div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> *MemDef = dyn_cast&lt;MemoryDef&gt;(NewMemAcc))</div>
<div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;        MSSAU.<a class="code" href="classllvm_1_1MemorySSAUpdater.html#a21fc5eae685ef3e2dce4403a75d5ff2f">insertDef</a>(MemDef, <span class="comment">/*RenameUses=*/</span><span class="keyword">true</span>);</div>
<div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;      <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;        <span class="keyword">auto</span> *MemUse = cast&lt;MemoryUse&gt;(NewMemAcc);</div>
<div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;        MSSAU.<a class="code" href="classllvm_1_1MemorySSAUpdater.html#a9ab9d33dbeb44b5ba49ab27201e6bd76">insertUse</a>(MemUse, <span class="comment">/*RenameUses=*/</span><span class="keyword">true</span>);</div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;      }</div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;    }</div>
<div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;  }</div>
<div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160; </div>
<div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;  <span class="comment">// Build LCSSA PHI nodes for any in-loop operands (if legal).  Note that</span></div>
<div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;  <span class="comment">// this is particularly cheap because we can rip off the PHI node that we&#39;re</span></div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;  <span class="comment">// replacing for the number and blocks of the predecessors.</span></div>
<div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;  <span class="comment">// OPT: If this shows up in a profile, we can instead finish sinking all</span></div>
<div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;  <span class="comment">// invariant instructions, and then walk their operands to re-establish</span></div>
<div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;  <span class="comment">// LCSSA. That will eliminate creating PHI nodes just to nuke them when</span></div>
<div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;  <span class="comment">// sinking bottom-up.</span></div>
<div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Use.html">Use</a> &amp;<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a> : New-&gt;operands())</div>
<div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;    <span class="keywordflow">if</span> (LI-&gt;<a class="code" href="classllvm_1_1LoopInfo.html#a3aec1235e89c8e7a3d6f60ba97071b65">wouldBeOutOfLoopUseRequiringLCSSA</a>(<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>.get(), PN.<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>())) {</div>
<div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;      <span class="keyword">auto</span> *OInst = cast&lt;Instruction&gt;(<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>.get());</div>
<div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;      <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *OpPN =</div>
<div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;        PHINode::Create(OInst-&gt;getType(), PN.<a class="code" href="classllvm_1_1PHINode.html#aef51af4b490af6b3bf2dfbc8737a8f9f">getNumIncomingValues</a>(),</div>
<div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;                        OInst-&gt;getName() + <span class="stringliteral">&quot;.lcssa&quot;</span>, &amp;ExitBlock.<a class="code" href="classllvm_1_1BasicBlock.html#ab706e7ebb1969c5e34f28bfcf2ff719e">front</a>());</div>
<div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a> = PN.<a class="code" href="classllvm_1_1PHINode.html#aef51af4b490af6b3bf2dfbc8737a8f9f">getNumIncomingValues</a>(); <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a>; ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div>
<div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;        OpPN-&gt;<a class="code" href="classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">addIncoming</a>(OInst, PN.<a class="code" href="classllvm_1_1PHINode.html#a8ce0c4746a1ec805e66409d20ae93922">getIncomingBlock</a>(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>));</div>
<div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;      <a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a> = OpPN;</div>
<div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;    }</div>
<div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;  <span class="keywordflow">return</span> New;</div>
<div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;}</div>
<div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160; </div>
<div class="line"><a name="l01475"></a><span class="lineno"><a class="line" href="LICM_8cpp.html#ab0cfc793d55940eac67854827dd365e9"> 1475</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="LICM_8cpp.html#ab0cfc793d55940eac67854827dd365e9">eraseInstruction</a>(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1ICFLoopSafetyInfo.html">ICFLoopSafetyInfo</a> &amp;SafetyInfo,</div>
<div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;                             <a class="code" href="classllvm_1_1MemorySSAUpdater.html">MemorySSAUpdater</a> &amp;MSSAU) {</div>
<div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;  MSSAU.<a class="code" href="classllvm_1_1MemorySSAUpdater.html#abcf78af37d56a9b72a49c65428210758">removeMemoryAccess</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;  SafetyInfo.<a class="code" href="classllvm_1_1ICFLoopSafetyInfo.html#aac2d5ff012ca10eb45c8b8cbca188dd6">removeInstruction</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;  <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.eraseFromParent();</div>
<div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;}</div>
<div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160; </div>
<div class="line"><a name="l01482"></a><span class="lineno"><a class="line" href="LICM_8cpp.html#a4d17de7bbbee910e1e79e900ec72129f"> 1482</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="LICM_8cpp.html#a4d17de7bbbee910e1e79e900ec72129f">moveInstructionBefore</a>(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;Dest,</div>
<div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;                                  <a class="code" href="classllvm_1_1ICFLoopSafetyInfo.html">ICFLoopSafetyInfo</a> &amp;SafetyInfo,</div>
<div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;                                  <a class="code" href="classllvm_1_1MemorySSAUpdater.html">MemorySSAUpdater</a> &amp;MSSAU,</div>
<div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;                                  <a class="code" href="classllvm_1_1ScalarEvolution.html">ScalarEvolution</a> *SE) {</div>
<div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;  SafetyInfo.<a class="code" href="classllvm_1_1ICFLoopSafetyInfo.html#aac2d5ff012ca10eb45c8b8cbca188dd6">removeInstruction</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;  SafetyInfo.<a class="code" href="classllvm_1_1ICFLoopSafetyInfo.html#acaf635590a74bf4fdc2822b6f877afb7">insertInstructionTo</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, Dest.<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>());</div>
<div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;  <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.moveBefore(&amp;Dest);</div>
<div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1MemoryUseOrDef.html">MemoryUseOrDef</a> *OldMemAcc = cast_or_null&lt;MemoryUseOrDef&gt;(</div>
<div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;          MSSAU.<a class="code" href="classllvm_1_1MemorySSAUpdater.html#a4121a20238504099c3466fa62ec877d5">getMemorySSA</a>()-&gt;<a class="code" href="classllvm_1_1MemorySSA.html#a4ece07ee1030856099726901d0eef81b">getMemoryAccess</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)))</div>
<div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;    MSSAU.<a class="code" href="classllvm_1_1MemorySSAUpdater.html#ae26e0fb4a78dc439a03ac42c4ba6e674">moveToPlace</a>(OldMemAcc, Dest.<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>(), MemorySSA::BeforeTerminator);</div>
<div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;  <span class="keywordflow">if</span> (SE)</div>
<div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;    SE-&gt;<a class="code" href="classllvm_1_1ScalarEvolution.html#a804545e5b568edec8b970da32cd37359">forgetValue</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;}</div>
<div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160; </div>
<div class="line"><a name="l01496"></a><span class="lineno"><a class="line" href="LICM_8cpp.html#a052100e379294ec39b8805736bb2a9af"> 1496</a></span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="LICM_8cpp.html#a052100e379294ec39b8805736bb2a9af">sinkThroughTriviallyReplaceablePHI</a>(</div>
<div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;    <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *TPN, <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1LoopInfo.html">LoopInfo</a> *LI,</div>
<div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;    <a class="code" href="classllvm_1_1SmallDenseMap.html">SmallDenseMap&lt;BasicBlock *, Instruction *, 32&gt;</a> &amp;SunkCopies,</div>
<div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1LoopSafetyInfo.html">LoopSafetyInfo</a> *SafetyInfo, <span class="keyword">const</span> <a class="code" href="classllvm_1_1Loop.html">Loop</a> *CurLoop,</div>
<div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;    <a class="code" href="classllvm_1_1MemorySSAUpdater.html">MemorySSAUpdater</a> &amp;MSSAU) {</div>
<div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="LICM_8cpp.html#ad0eaec807c54661058d9a1aed11195d9">isTriviallyReplaceablePHI</a>(*TPN, *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &amp;&amp;</div>
<div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;         <span class="stringliteral">&quot;Expect only trivially replaceable PHI&quot;</span>);</div>
<div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *ExitBlock = TPN-&gt;<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>();</div>
<div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *New;</div>
<div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;  <span class="keyword">auto</span> It = SunkCopies.<a class="code" href="classllvm_1_1DenseMapBase.html#a0c047f127ed4380a6f383d70bec4eb94">find</a>(ExitBlock);</div>
<div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;  <span class="keywordflow">if</span> (It != SunkCopies.<a class="code" href="classllvm_1_1DenseMapBase.html#a65520b9c67759099e313d0f4e7b5ff9e">end</a>())</div>
<div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;    New = It-&gt;second;</div>
<div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;    New = SunkCopies[ExitBlock] = <a class="code" href="LICM_8cpp.html#a25f0b41add9507b8eafadfbc4a090d6c">cloneInstructionInExitBlock</a>(</div>
<div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;        *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, *ExitBlock, *TPN, LI, SafetyInfo, MSSAU);</div>
<div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;  <span class="keywordflow">return</span> New;</div>
<div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;}</div>
<div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160; </div>
<div class="line"><a name="l01514"></a><span class="lineno"><a class="line" href="LICM_8cpp.html#a425e6fe374356efd05a49cab7e020166"> 1514</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="LICM_8cpp.html#a425e6fe374356efd05a49cab7e020166">canSplitPredecessors</a>(<a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *PN, <a class="code" href="classllvm_1_1LoopSafetyInfo.html">LoopSafetyInfo</a> *SafetyInfo) {</div>
<div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> = PN-&gt;<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>();</div>
<div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;canSplitPredecessors())</div>
<div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;  <span class="comment">// It&#39;s not impossible to split EHPad blocks, but if BlockColors already exist</span></div>
<div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;  <span class="comment">// it require updating BlockColors for all offspring blocks accordingly. By</span></div>
<div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;  <span class="comment">// skipping such corner case, we can make updating BlockColors after splitting</span></div>
<div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;  <span class="comment">// predecessor fairly simple.</span></div>
<div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;  <span class="keywordflow">if</span> (!SafetyInfo-&gt;<a class="code" href="classllvm_1_1LoopSafetyInfo.html#a59204639c099ab5d774e8f5cf929ed9d">getBlockColors</a>().empty() &amp;&amp; <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getFirstNonPHI()-&gt;isEHPad())</div>
<div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *BBPred : <a class="code" href="namespacellvm.html#acb22fb04083152eee862457e42e8dc31">predecessors</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>)) {</div>
<div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;    <span class="keywordflow">if</span> (isa&lt;IndirectBrInst&gt;(BBPred-&gt;getTerminator()))</div>
<div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;  }</div>
<div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;}</div>
<div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160; </div>
<div class="line"><a name="l01531"></a><span class="lineno"><a class="line" href="LICM_8cpp.html#a0bb855d418108ea53140e71d7b35a2cd"> 1531</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="LICM_8cpp.html#a0bb855d418108ea53140e71d7b35a2cd">splitPredecessorsOfLoopExit</a>(<a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *PN, <a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> *DT,</div>
<div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;                                        <a class="code" href="classllvm_1_1LoopInfo.html">LoopInfo</a> *LI, <span class="keyword">const</span> <a class="code" href="classllvm_1_1Loop.html">Loop</a> *CurLoop,</div>
<div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;                                        <a class="code" href="classllvm_1_1LoopSafetyInfo.html">LoopSafetyInfo</a> *SafetyInfo,</div>
<div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;                                        <a class="code" href="classllvm_1_1MemorySSAUpdater.html">MemorySSAUpdater</a> *MSSAU) {</div>
<div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;BasicBlock *, 32&gt;</a> ExitBlocks;</div>
<div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;  CurLoop-&gt;<a class="code" href="classllvm_1_1LoopBase.html#ae069a12f0a2d2deb69e30b439a91190e">getUniqueExitBlocks</a>(ExitBlocks);</div>
<div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;BasicBlock *, 32&gt;</a> ExitBlockSet(ExitBlocks.begin(),</div>
<div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;                                             ExitBlocks.end());</div>
<div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *ExitBB = PN-&gt;<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>();</div>
<div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(ExitBlockSet.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a1f475b0df44ebd7169e720fa1bf9169e">count</a>(ExitBB) &amp;&amp; <span class="stringliteral">&quot;Expect the PHI is in an exit block.&quot;</span>);</div>
<div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160; </div>
<div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;  <span class="comment">// Split predecessors of the loop exit to make instructions in the loop are</span></div>
<div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;  <span class="comment">// exposed to exit blocks through trivially replaceable PHIs while keeping the</span></div>
<div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;  <span class="comment">// loop in the canonical form where each predecessor of each exit block should</span></div>
<div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;  <span class="comment">// be contained within the loop. For example, this will convert the loop below</span></div>
<div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;  <span class="comment">// from</span></div>
<div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;  <span class="comment">// LB1:</span></div>
<div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;  <span class="comment">//   %v1 =</span></div>
<div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;  <span class="comment">//   br %LE, %LB2</span></div>
<div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;  <span class="comment">// LB2:</span></div>
<div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;  <span class="comment">//   %v2 =</span></div>
<div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;  <span class="comment">//   br %LE, %LB1</span></div>
<div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;  <span class="comment">// LE:</span></div>
<div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;  <span class="comment">//   %p = phi [%v1, %LB1], [%v2, %LB2] &lt;-- non-trivially replaceable</span></div>
<div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;  <span class="comment">// to</span></div>
<div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;  <span class="comment">// LB1:</span></div>
<div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;  <span class="comment">//   %v1 =</span></div>
<div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;  <span class="comment">//   br %LE.split, %LB2</span></div>
<div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;  <span class="comment">// LB2:</span></div>
<div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;  <span class="comment">//   %v2 =</span></div>
<div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;  <span class="comment">//   br %LE.split2, %LB1</span></div>
<div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;  <span class="comment">// LE.split:</span></div>
<div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;  <span class="comment">//   %p1 = phi [%v1, %LB1]  &lt;-- trivially replaceable</span></div>
<div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;  <span class="comment">//   br %LE</span></div>
<div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;  <span class="comment">// LE.split2:</span></div>
<div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;  <span class="comment">//   %p2 = phi [%v2, %LB2]  &lt;-- trivially replaceable</span></div>
<div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;  <span class="comment">//   br %LE</span></div>
<div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;  <span class="comment">// LE:</span></div>
<div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;  <span class="comment">//   %p = phi [%p1, %LE.split], [%p2, %LE.split2]</span></div>
<div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span> &amp;BlockColors = SafetyInfo-&gt;<a class="code" href="classllvm_1_1LoopSafetyInfo.html#a59204639c099ab5d774e8f5cf929ed9d">getBlockColors</a>();</div>
<div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;  <a class="code" href="classllvm_1_1SmallSetVector.html">SmallSetVector&lt;BasicBlock *, 8&gt;</a> PredBBs(<a class="code" href="namespacellvm.html#a7e108932dc3da5294aed99a353aac9c4">pred_begin</a>(ExitBB), <a class="code" href="namespacellvm.html#a5eeaf08e96168c2cac8960f87f0ef360">pred_end</a>(ExitBB));</div>
<div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;  <span class="keywordflow">while</span> (!PredBBs.<a class="code" href="classllvm_1_1SetVector.html#aaf9ee38b9973681c1720aaf03af3a069">empty</a>()) {</div>
<div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *PredBB = *PredBBs.<a class="code" href="classllvm_1_1SetVector.html#adb13793b98ab59209a5309d26f831850">begin</a>();</div>
<div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(CurLoop-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a04337b572d34ea413c35dbac5d75530b">contains</a>(PredBB) &amp;&amp;</div>
<div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;           <span class="stringliteral">&quot;Expect all predecessors are in the loop&quot;</span>);</div>
<div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;    <span class="keywordflow">if</span> (PN-&gt;<a class="code" href="classllvm_1_1PHINode.html#ae9562b96f6f3fa41bd36538c080035ee">getBasicBlockIndex</a>(PredBB) &gt;= 0) {</div>
<div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;      <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *NewPred = <a class="code" href="namespacellvm.html#a9d391b6acc6d90c9b8a8442324b1aa6f">SplitBlockPredecessors</a>(</div>
<div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;          ExitBB, PredBB, <span class="stringliteral">&quot;.split.loop.exit&quot;</span>, DT, LI, MSSAU, <span class="keyword">true</span>);</div>
<div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;      <span class="comment">// Since we do not allow splitting EH-block with BlockColors in</span></div>
<div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;      <span class="comment">// canSplitPredecessors(), we can simply assign predecessor&#39;s color to</span></div>
<div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;      <span class="comment">// the new block.</span></div>
<div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;      <span class="keywordflow">if</span> (!BlockColors.empty())</div>
<div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;        <span class="comment">// Grab a reference to the ColorVector to be inserted before getting the</span></div>
<div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;        <span class="comment">// reference to the vector we are copying because inserting the new</span></div>
<div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;        <span class="comment">// element in BlockColors might cause the map to be reallocated.</span></div>
<div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;        SafetyInfo-&gt;<a class="code" href="classllvm_1_1LoopSafetyInfo.html#a0df7330d9f0c855c85a81c0fcf8844a7">copyColors</a>(NewPred, PredBB);</div>
<div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;    }</div>
<div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;    PredBBs.<a class="code" href="classllvm_1_1SetVector.html#a6357ff5654c7cbe5fed8516dc8328eb4">remove</a>(PredBB);</div>
<div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;  }</div>
<div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;}</div>
<div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;<span class="comment">/// When an instruction is found to only be used outside of the loop, this</span></div>
<div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;<span class="comment">/// function moves it to the exit blocks and patches up SSA form as needed.</span></div>
<div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;<span class="comment">/// This method is guaranteed to remove the original instruction from its</span></div>
<div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;<span class="comment">/// position, and may either delete it or move it to outside of the loop.</span></div>
<div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l01603"></a><span class="lineno"><a class="line" href="LICM_8cpp.html#a52b8b307321627e612e77041260ece84"> 1603</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="LICM_8cpp.html#a52b8b307321627e612e77041260ece84">sink</a>(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1LoopInfo.html">LoopInfo</a> *LI, <a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> *DT,</div>
<div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;                 <span class="keyword">const</span> <a class="code" href="classllvm_1_1Loop.html">Loop</a> *CurLoop, <a class="code" href="classllvm_1_1ICFLoopSafetyInfo.html">ICFLoopSafetyInfo</a> *SafetyInfo,</div>
<div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;                 <a class="code" href="classllvm_1_1MemorySSAUpdater.html">MemorySSAUpdater</a> &amp;MSSAU, <a class="code" href="classllvm_1_1OptimizationRemarkEmitter.html">OptimizationRemarkEmitter</a> *ORE) {</div>
<div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;  <span class="keywordtype">bool</span> Changed = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LICM sinking instruction: &quot;</span> &lt;&lt; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160; </div>
<div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;  <span class="comment">// Iterate over users to be ready for actual sinking. Replace users via</span></div>
<div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;  <span class="comment">// unreachable blocks with undef and make all user PHIs trivially replaceable.</span></div>
<div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;Instruction *, 8&gt;</a> VisitedUsers;</div>
<div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Value.html#acd2fbee42afeb868be98aaae56528636">Value::user_iterator</a> UI = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.user_begin(), UE = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.user_end(); UI != UE;) {</div>
<div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;    <span class="keyword">auto</span> *<a class="code" href="classllvm_1_1User.html">User</a> = cast&lt;Instruction&gt;(*UI);</div>
<div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;    <a class="code" href="classllvm_1_1Use.html">Use</a> &amp;U = UI.getUse();</div>
<div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;    ++UI;</div>
<div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160; </div>
<div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;    <span class="keywordflow">if</span> (VisitedUsers.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a1f475b0df44ebd7169e720fa1bf9169e">count</a>(<a class="code" href="classllvm_1_1User.html">User</a>) || CurLoop-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a04337b572d34ea413c35dbac5d75530b">contains</a>(<a class="code" href="classllvm_1_1User.html">User</a>))</div>
<div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160; </div>
<div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;    <span class="keywordflow">if</span> (!DT-&gt;<a class="code" href="classllvm_1_1DominatorTree.html#a1a70f2c359aadd76a72aaaede16aca4a">isReachableFromEntry</a>(<a class="code" href="classllvm_1_1User.html">User</a>-&gt;getParent())) {</div>
<div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;      U = <a class="code" href="lib_2Target_2PowerPC_2README_8txt.html#aa91241c8c54738377749dc47ee489e0d">PoisonValue::get</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getType());</div>
<div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;      Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;    }</div>
<div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160; </div>
<div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;    <span class="comment">// The user must be a PHI node.</span></div>
<div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;    <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *PN = cast&lt;PHINode&gt;(<a class="code" href="classllvm_1_1User.html">User</a>);</div>
<div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160; </div>
<div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;    <span class="comment">// Surprisingly, instructions can be used outside of loops without any</span></div>
<div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;    <span class="comment">// exits.  This can only happen in PHI nodes if the incoming block is</span></div>
<div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;    <span class="comment">// unreachable.</span></div>
<div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> = PN-&gt;<a class="code" href="classllvm_1_1PHINode.html#a8ce0c4746a1ec805e66409d20ae93922">getIncomingBlock</a>(U);</div>
<div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;    <span class="keywordflow">if</span> (!DT-&gt;<a class="code" href="classllvm_1_1DominatorTree.html#a1a70f2c359aadd76a72aaaede16aca4a">isReachableFromEntry</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>)) {</div>
<div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;      U = <a class="code" href="lib_2Target_2PowerPC_2README_8txt.html#aa91241c8c54738377749dc47ee489e0d">PoisonValue::get</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getType());</div>
<div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;      Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;    }</div>
<div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160; </div>
<div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;    VisitedUsers.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(PN);</div>
<div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="LICM_8cpp.html#ad0eaec807c54661058d9a1aed11195d9">isTriviallyReplaceablePHI</a>(*PN, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160; </div>
<div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="LICM_8cpp.html#a425e6fe374356efd05a49cab7e020166">canSplitPredecessors</a>(PN, SafetyInfo))</div>
<div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;      <span class="keywordflow">return</span> Changed;</div>
<div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160; </div>
<div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;    <span class="comment">// Split predecessors of the PHI so that we can make users trivially</span></div>
<div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;    <span class="comment">// replaceable.</span></div>
<div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;    <a class="code" href="LICM_8cpp.html#a0bb855d418108ea53140e71d7b35a2cd">splitPredecessorsOfLoopExit</a>(PN, DT, LI, CurLoop, SafetyInfo, &amp;MSSAU);</div>
<div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160; </div>
<div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;    <span class="comment">// Should rebuild the iterators, as they may be invalidated by</span></div>
<div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;    <span class="comment">// splitPredecessorsOfLoopExit().</span></div>
<div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;    UI = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.user_begin();</div>
<div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;    UE = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.user_end();</div>
<div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;  }</div>
<div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160; </div>
<div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;  <span class="keywordflow">if</span> (VisitedUsers.<a class="code" href="classllvm_1_1SmallPtrSetImplBase.html#af8a50544090e81ac83601aff8f4b0142">empty</a>())</div>
<div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;    <span class="keywordflow">return</span> Changed;</div>
<div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160; </div>
<div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;  ORE-&gt;<a class="code" href="classllvm_1_1OptimizationRemarkEmitter.html#aae6a98aea85aa3af87357cc5448db499">emit</a>([&amp;]() {</div>
<div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1OptimizationRemark.html">OptimizationRemark</a>(<a class="code" href="LICM_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">DEBUG_TYPE</a>, <span class="stringliteral">&quot;InstSunk&quot;</span>, &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div>
<div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;           &lt;&lt; <span class="stringliteral">&quot;sinking &quot;</span> &lt;&lt; <a class="code" href="namespacellvm_1_1ore.html#a8f5533240c6722d987a2443cba42019d">ore::NV</a>(<span class="stringliteral">&quot;Inst&quot;</span>, &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;  });</div>
<div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;  <span class="keywordflow">if</span> (isa&lt;LoadInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;    ++NumMovedLoads;</div>
<div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (isa&lt;CallInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;    ++NumMovedCalls;</div>
<div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;  ++NumSunk;</div>
<div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160; </div>
<div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;BasicBlock *, 32&gt;</a> ExitBlocks;</div>
<div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;  CurLoop-&gt;<a class="code" href="classllvm_1_1LoopBase.html#ae069a12f0a2d2deb69e30b439a91190e">getUniqueExitBlocks</a>(ExitBlocks);</div>
<div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;BasicBlock *, 32&gt;</a> ExitBlockSet(ExitBlocks.begin(),</div>
<div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;                                             ExitBlocks.end());</div>
<div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160; </div>
<div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;  <span class="comment">// Clones of this instruction. Don&#39;t create more than one per exit block!</span></div>
<div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;  <a class="code" href="classllvm_1_1SmallDenseMap.html">SmallDenseMap&lt;BasicBlock *, Instruction *, 32&gt;</a> SunkCopies;</div>
<div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160; </div>
<div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;  <span class="comment">// If this instruction is only used outside of the loop, then all users are</span></div>
<div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;  <span class="comment">// PHI nodes in exit blocks due to LCSSA form. Just RAUW them with clones of</span></div>
<div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;  <span class="comment">// the instruction.</span></div>
<div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;  <span class="comment">// First check if I is worth sinking for all uses. Sink only when it is worth</span></div>
<div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;  <span class="comment">// across all uses.</span></div>
<div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;  <a class="code" href="classllvm_1_1SmallSetVector.html">SmallSetVector&lt;User*, 8&gt;</a> <a class="code" href="IVUsers_8cpp.html#a4e5b9edb51eec9dbca592075eb64dfcb">Users</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.user_begin(), <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.user_end());</div>
<div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> *UI : <a class="code" href="IVUsers_8cpp.html#a4e5b9edb51eec9dbca592075eb64dfcb">Users</a>) {</div>
<div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;    <span class="keyword">auto</span> *<a class="code" href="classllvm_1_1User.html">User</a> = cast&lt;Instruction&gt;(UI);</div>
<div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160; </div>
<div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;    <span class="keywordflow">if</span> (CurLoop-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a04337b572d34ea413c35dbac5d75530b">contains</a>(<a class="code" href="classllvm_1_1User.html">User</a>))</div>
<div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160; </div>
<div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;    <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *PN = cast&lt;PHINode&gt;(<a class="code" href="classllvm_1_1User.html">User</a>);</div>
<div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(ExitBlockSet.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a1f475b0df44ebd7169e720fa1bf9169e">count</a>(PN-&gt;<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>()) &amp;&amp;</div>
<div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;           <span class="stringliteral">&quot;The LCSSA PHI is not in an exit block!&quot;</span>);</div>
<div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160; </div>
<div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;    <span class="comment">// The PHI must be trivially replaceable.</span></div>
<div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *New = <a class="code" href="LICM_8cpp.html#a052100e379294ec39b8805736bb2a9af">sinkThroughTriviallyReplaceablePHI</a>(</div>
<div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;        PN, &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, LI, SunkCopies, SafetyInfo, CurLoop, MSSAU);</div>
<div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;    PN-&gt;<a class="code" href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">replaceAllUsesWith</a>(New);</div>
<div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;    <a class="code" href="LICM_8cpp.html#ab0cfc793d55940eac67854827dd365e9">eraseInstruction</a>(*PN, *SafetyInfo, MSSAU);</div>
<div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;    Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;  }</div>
<div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;  <span class="keywordflow">return</span> Changed;</div>
<div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;}</div>
<div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;<span class="comment">/// When an instruction is found to only use loop invariant operands that</span></div>
<div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;<span class="comment">/// is safe to hoist, this instruction is called to do the dirty work.</span></div>
<div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l01708"></a><span class="lineno"><a class="line" href="LICM_8cpp.html#a3a3a3183a327e1186dbe900032390ec6"> 1708</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="LICM_8cpp.html#a3a3a3183a327e1186dbe900032390ec6">hoist</a>(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <span class="keyword">const</span> <a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> *DT, <span class="keyword">const</span> <a class="code" href="classllvm_1_1Loop.html">Loop</a> *CurLoop,</div>
<div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;                  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Dest, <a class="code" href="classllvm_1_1ICFLoopSafetyInfo.html">ICFLoopSafetyInfo</a> *SafetyInfo,</div>
<div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;                  <a class="code" href="classllvm_1_1MemorySSAUpdater.html">MemorySSAUpdater</a> &amp;MSSAU, <a class="code" href="classllvm_1_1ScalarEvolution.html">ScalarEvolution</a> *SE,</div>
<div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;                  <a class="code" href="classllvm_1_1OptimizationRemarkEmitter.html">OptimizationRemarkEmitter</a> *ORE) {</div>
<div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LICM hoisting to &quot;</span> &lt;&lt; Dest-&gt;<a class="code" href="classllvm_1_1Value.html#a391ffe96dd8c686b0d2620c7fb25f8a5">getNameOrAsOperand</a>() &lt;&lt; <span class="stringliteral">&quot;: &quot;</span></div>
<div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;                    &lt;&lt; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;  ORE-&gt;<a class="code" href="classllvm_1_1OptimizationRemarkEmitter.html#aae6a98aea85aa3af87357cc5448db499">emit</a>([&amp;]() {</div>
<div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1OptimizationRemark.html">OptimizationRemark</a>(<a class="code" href="LICM_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">DEBUG_TYPE</a>, <span class="stringliteral">&quot;Hoisted&quot;</span>, &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &lt;&lt; <span class="stringliteral">&quot;hoisting &quot;</span></div>
<div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;                                                         &lt;&lt; <a class="code" href="namespacellvm_1_1ore.html#a8f5533240c6722d987a2443cba42019d">ore::NV</a>(<span class="stringliteral">&quot;Inst&quot;</span>, &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;  });</div>
<div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160; </div>
<div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;  <span class="comment">// Metadata can be dependent on conditions we are hoisting above.</span></div>
<div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;  <span class="comment">// Conservatively strip all metadata on the instruction unless we were</span></div>
<div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;  <span class="comment">// guaranteed to execute I if we entered the loop, in which case the metadata</span></div>
<div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;  <span class="comment">// is valid in the loop preheader.</span></div>
<div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;  <span class="comment">// Similarly, If I is a call and it is not guaranteed to execute in the loop,</span></div>
<div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;  <span class="comment">// then moving to the preheader means we should strip attributes on the call</span></div>
<div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;  <span class="comment">// that can cause UB since we may be hoisting above conditions that allowed</span></div>
<div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;  <span class="comment">// inferring those attributes. They may not be valid at the preheader.</span></div>
<div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;  <span class="keywordflow">if</span> ((<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.hasMetadataOtherThanDebugLoc() || isa&lt;CallInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) &amp;&amp;</div>
<div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;      <span class="comment">// The check on hasMetadataOtherThanDebugLoc is to prevent us from burning</span></div>
<div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;      <span class="comment">// time in isGuaranteedToExecute if we don&#39;t actually have anything to</span></div>
<div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;      <span class="comment">// drop.  It is a compile time optimization, not required for correctness.</span></div>
<div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;      !SafetyInfo-&gt;<a class="code" href="classllvm_1_1ICFLoopSafetyInfo.html#ab40701961745d6467fa8e23b1e451c12">isGuaranteedToExecute</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, DT, CurLoop))</div>
<div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;    <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.dropUndefImplyingAttrsAndUnknownMetadata();</div>
<div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160; </div>
<div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;  <span class="keywordflow">if</span> (isa&lt;PHINode&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;    <span class="comment">// Move the new node to the end of the phi list in the destination block.</span></div>
<div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;    <a class="code" href="LICM_8cpp.html#a4d17de7bbbee910e1e79e900ec72129f">moveInstructionBefore</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, *Dest-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a46ef6115027606b67adcf4d28f3dac17">getFirstNonPHI</a>(), *SafetyInfo, MSSAU, SE);</div>
<div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;    <span class="comment">// Move the new node to the destination block, before its terminator.</span></div>
<div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;    <a class="code" href="LICM_8cpp.html#a4d17de7bbbee910e1e79e900ec72129f">moveInstructionBefore</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, *Dest-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>(), *SafetyInfo, MSSAU, SE);</div>
<div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160; </div>
<div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;  <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.updateLocationAfterHoist();</div>
<div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160; </div>
<div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;  <span class="keywordflow">if</span> (isa&lt;LoadInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;    ++NumMovedLoads;</div>
<div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (isa&lt;CallInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;    ++NumMovedCalls;</div>
<div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;  ++NumHoisted;</div>
<div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;}</div>
<div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;<span class="comment">/// Only sink or hoist an instruction if it is not a trapping instruction,</span></div>
<div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;<span class="comment">/// or if the instruction is known not to trap when moved to the preheader.</span></div>
<div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;<span class="comment">/// or if it is a trapping instruction and is guaranteed to execute.</span></div>
<div class="line"><a name="l01753"></a><span class="lineno"><a class="line" href="LICM_8cpp.html#ab63d5eb7a9919d4e5f2c8d614e9bda97"> 1753</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="LICM_8cpp.html#ab63d5eb7a9919d4e5f2c8d614e9bda97">isSafeToExecuteUnconditionally</a>(</div>
<div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;Inst, <span class="keyword">const</span> <a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> *DT, <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetLibraryInfo.html">TargetLibraryInfo</a> *TLI,</div>
<div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1Loop.html">Loop</a> *CurLoop, <span class="keyword">const</span> <a class="code" href="classllvm_1_1LoopSafetyInfo.html">LoopSafetyInfo</a> *SafetyInfo,</div>
<div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;    <a class="code" href="classllvm_1_1OptimizationRemarkEmitter.html">OptimizationRemarkEmitter</a> *ORE, <span class="keyword">const</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *CtxI,</div>
<div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;    <a class="code" href="classllvm_1_1AssumptionCache.html">AssumptionCache</a> *AC, <span class="keywordtype">bool</span> AllowSpeculation) {</div>
<div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;  <span class="keywordflow">if</span> (AllowSpeculation &amp;&amp;</div>
<div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;      <a class="code" href="namespacellvm.html#abe76d72cda6b2b4562c72accb510040b">isSafeToSpeculativelyExecute</a>(&amp;Inst, CtxI, AC, DT, TLI))</div>
<div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160; </div>
<div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;  <span class="keywordtype">bool</span> GuaranteedToExecute =</div>
<div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;      SafetyInfo-&gt;<a class="code" href="classllvm_1_1LoopSafetyInfo.html#ade3159656909189106a047b76935827b">isGuaranteedToExecute</a>(Inst, DT, CurLoop);</div>
<div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160; </div>
<div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;  <span class="keywordflow">if</span> (!GuaranteedToExecute) {</div>
<div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;    <span class="keyword">auto</span> *LI = dyn_cast&lt;LoadInst&gt;(&amp;Inst);</div>
<div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;    <span class="keywordflow">if</span> (LI &amp;&amp; CurLoop-&gt;<a class="code" href="classllvm_1_1Loop.html#a6cb6a58fb0ded82b4c7755fc4c27c86d">isLoopInvariant</a>(LI-&gt;getPointerOperand()))</div>
<div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;      ORE-&gt;<a class="code" href="classllvm_1_1OptimizationRemarkEmitter.html#aae6a98aea85aa3af87357cc5448db499">emit</a>([&amp;]() {</div>
<div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1OptimizationRemarkMissed.html">OptimizationRemarkMissed</a>(</div>
<div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;                   <a class="code" href="LICM_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">DEBUG_TYPE</a>, <span class="stringliteral">&quot;LoadWithLoopInvariantAddressCondExecuted&quot;</span>, LI)</div>
<div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;               &lt;&lt; <span class="stringliteral">&quot;failed to hoist load with loop-invariant address &quot;</span></div>
<div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;                  <span class="stringliteral">&quot;because load is conditionally executed&quot;</span>;</div>
<div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;      });</div>
<div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;  }</div>
<div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160; </div>
<div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;  <span class="keywordflow">return</span> GuaranteedToExecute;</div>
<div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;}</div>
<div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160; </div>
<div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;<span class="keyword">namespace </span>{</div>
<div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;<span class="keyword">class </span>LoopPromoter : <span class="keyword">public</span> <a class="code" href="classllvm_1_1LoadAndStorePromoter.html">LoadAndStorePromoter</a> {</div>
<div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *SomePtr; <span class="comment">// Designated pointer to store to.</span></div>
<div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;  <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;BasicBlock *&gt;</a> &amp;LoopExitBlocks;</div>
<div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;  <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;Instruction *&gt;</a> &amp;LoopInsertPts;</div>
<div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;  <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;MemoryAccess *&gt;</a> &amp;MSSAInsertPts;</div>
<div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;  <a class="code" href="classllvm_1_1PredIteratorCache.html">PredIteratorCache</a> &amp;PredCache;</div>
<div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;  <a class="code" href="classllvm_1_1MemorySSAUpdater.html">MemorySSAUpdater</a> &amp;MSSAU;</div>
<div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;  <a class="code" href="classllvm_1_1LoopInfo.html">LoopInfo</a> &amp;LI;</div>
<div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;  <a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a> <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>;</div>
<div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;  <a class="code" href="structllvm_1_1Align.html">Align</a> Alignment;</div>
<div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;  <span class="keywordtype">bool</span> UnorderedAtomic;</div>
<div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;  <a class="code" href="structllvm_1_1AAMDNodes.html">AAMDNodes</a> AATags;</div>
<div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;  <a class="code" href="classllvm_1_1ICFLoopSafetyInfo.html">ICFLoopSafetyInfo</a> &amp;SafetyInfo;</div>
<div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;  <span class="keywordtype">bool</span> CanInsertStoresInExitBlocks;</div>
<div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;  <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;const Instruction *&gt;</a> <a class="code" href="ARMLowOverheadLoops_8cpp.html#a0a0971d62011c35b29ff4a2325d45e93">Uses</a>;</div>
<div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160; </div>
<div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;  <span class="comment">// We&#39;re about to add a use of V in a loop exit block.  Insert an LCSSA phi</span></div>
<div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;  <span class="comment">// (if legal) if doing so would add an out-of-loop use to an instruction</span></div>
<div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;  <span class="comment">// defined in-loop.</span></div>
<div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *maybeInsertLCSSAPHI(<a class="code" href="classllvm_1_1Value.html">Value</a> *V, <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;    <span class="keywordflow">if</span> (!LI.<a class="code" href="classllvm_1_1LoopInfo.html#a3aec1235e89c8e7a3d6f60ba97071b65">wouldBeOutOfLoopUseRequiringLCSSA</a>(V, <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>))</div>
<div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;      <span class="keywordflow">return</span> V;</div>
<div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160; </div>
<div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = cast&lt;Instruction&gt;(V);</div>
<div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;    <span class="comment">// We need to create an LCSSA PHI node for the incoming value and</span></div>
<div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;    <span class="comment">// store that.</span></div>
<div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;    <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *PN = <a class="code" href="classllvm_1_1PHINode.html#ab0ff669b12c20c07137705c38872ec63">PHINode::Create</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getType(), PredCache.<a class="code" href="classllvm_1_1PredIteratorCache.html#a968659c3d46a40a0028a6d9e9537c9cc">size</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>),</div>
<div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;                                  <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getName() + <span class="stringliteral">&quot;.lcssa&quot;</span>, &amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;front());</div>
<div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Pred : PredCache.<a class="code" href="classllvm_1_1PredIteratorCache.html#aae381f8d8d1f6000c2eb811232cefde2">get</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>))</div>
<div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;      PN-&gt;<a class="code" href="classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">addIncoming</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, Pred);</div>
<div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;    <span class="keywordflow">return</span> PN;</div>
<div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;  }</div>
<div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160; </div>
<div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;  LoopPromoter(<a class="code" href="classllvm_1_1Value.html">Value</a> *SP, <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;const Instruction *&gt;</a> Insts, <a class="code" href="classllvm_1_1SSAUpdater.html">SSAUpdater</a> &amp;<a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>,</div>
<div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;               <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;BasicBlock *&gt;</a> &amp;LEB,</div>
<div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;               <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;Instruction *&gt;</a> &amp;LIP,</div>
<div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;               <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;MemoryAccess *&gt;</a> &amp;MSSAIP, <a class="code" href="classllvm_1_1PredIteratorCache.html">PredIteratorCache</a> &amp;<a class="code" href="PassBuilderBindings_8cpp.html#ad4d247df65c12507f447383be37d7ccb">PIC</a>,</div>
<div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;               <a class="code" href="classllvm_1_1MemorySSAUpdater.html">MemorySSAUpdater</a> &amp;MSSAU, <a class="code" href="classllvm_1_1LoopInfo.html">LoopInfo</a> &amp;li, <a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a> dl,</div>
<div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;               <a class="code" href="structllvm_1_1Align.html">Align</a> Alignment, <span class="keywordtype">bool</span> UnorderedAtomic, <span class="keyword">const</span> <a class="code" href="structllvm_1_1AAMDNodes.html">AAMDNodes</a> &amp;AATags,</div>
<div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;               <a class="code" href="classllvm_1_1ICFLoopSafetyInfo.html">ICFLoopSafetyInfo</a> &amp;SafetyInfo, <span class="keywordtype">bool</span> CanInsertStoresInExitBlocks)</div>
<div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;      : <a class="code" href="classllvm_1_1LoadAndStorePromoter.html">LoadAndStorePromoter</a>(Insts, <a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>), SomePtr(SP), LoopExitBlocks(LEB),</div>
<div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;        LoopInsertPts(LIP), MSSAInsertPts(MSSAIP), PredCache(<a class="code" href="PassBuilderBindings_8cpp.html#ad4d247df65c12507f447383be37d7ccb">PIC</a>), MSSAU(MSSAU),</div>
<div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;        LI(li), <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>(<a class="code" href="namespacestd.html">std</a>::<a class="code" href="lib_2Target_2ARM_2README_8txt.html#ad3a99906764c35b2694ae90fa57744a5">move</a>(dl)), Alignment(Alignment),</div>
<div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;        UnorderedAtomic(UnorderedAtomic), AATags(AATags),</div>
<div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;        SafetyInfo(SafetyInfo),</div>
<div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;        CanInsertStoresInExitBlocks(CanInsertStoresInExitBlocks), <a class="code" href="ARMLowOverheadLoops_8cpp.html#a0a0971d62011c35b29ff4a2325d45e93">Uses</a>(Insts) {}</div>
<div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160; </div>
<div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;  <span class="keywordtype">void</span> insertStoresInLoopExitBlocks() {</div>
<div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;    <span class="comment">// Insert stores after in the loop exit blocks.  Each exit block gets a</span></div>
<div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;    <span class="comment">// store of the live-out values that feed them.  Since we&#39;ve already told</span></div>
<div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;    <span class="comment">// the SSA updater about the defs in the loop and the preheader</span></div>
<div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;    <span class="comment">// definition, it is all set and we can start using it.</span></div>
<div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;    <a class="code" href="classllvm_1_1DIAssignID.html">DIAssignID</a> *NewID = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a> = LoopExitBlocks.size(); <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a>; ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;      <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *ExitBlock = LoopExitBlocks[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *LiveInValue = <a class="code" href="MemorySSA_8cpp.html#a20a60bdac22b099d87d8cb0c1d554120">SSA</a>.GetValueInMiddleOfBlock(ExitBlock);</div>
<div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;      LiveInValue = maybeInsertLCSSAPHI(LiveInValue, ExitBlock);</div>
<div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a> = maybeInsertLCSSAPHI(SomePtr, ExitBlock);</div>
<div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;      <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *InsertPos = LoopInsertPts[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;      <a class="code" href="classllvm_1_1StoreInst.html">StoreInst</a> *NewSI = <span class="keyword">new</span> <a class="code" href="classllvm_1_1StoreInst.html">StoreInst</a>(LiveInValue, <a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>, InsertPos);</div>
<div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;      <span class="keywordflow">if</span> (UnorderedAtomic)</div>
<div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;        NewSI-&gt;<a class="code" href="classllvm_1_1StoreInst.html#a731befae7b8a9a1a2efda559c5420a7f">setOrdering</a>(<a class="code" href="README__P9_8txt.html#a0afe4617fad145d6ced5a18fd739cf06">AtomicOrdering::Unordered</a>);</div>
<div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;      NewSI-&gt;<a class="code" href="classllvm_1_1StoreInst.html#a55195fa18cf783fe74de0cced1ca6eb3">setAlignment</a>(Alignment);</div>
<div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;      NewSI-&gt;<a class="code" href="classllvm_1_1Instruction.html#ae8f5bf5cc06f696b52c709677df00fbf">setDebugLoc</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>);</div>
<div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;      <span class="comment">// Attach DIAssignID metadata to the new store, generating it on the</span></div>
<div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;      <span class="comment">// first loop iteration.</span></div>
<div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> == 0) {</div>
<div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;        <span class="comment">// NewSI will have its DIAssignID set here if there are any stores in</span></div>
<div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;        <span class="comment">// Uses with a DIAssignID attachment. This merged ID will then be</span></div>
<div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;        <span class="comment">// attached to the other inserted stores (in the branch below).</span></div>
<div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;        NewSI-&gt;<a class="code" href="classllvm_1_1Instruction.html#a2711d3bc7c6c769a8f34c7fc3937169d">mergeDIAssignID</a>(<a class="code" href="ARMLowOverheadLoops_8cpp.html#a0a0971d62011c35b29ff4a2325d45e93">Uses</a>);</div>
<div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;        NewID = cast_or_null&lt;DIAssignID&gt;(</div>
<div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;            NewSI-&gt;<a class="code" href="classllvm_1_1Instruction.html#ae22f493ba8327ce92e87d3b96bce7017">getMetadata</a>(LLVMContext::MD_DIAssignID));</div>
<div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;        <span class="comment">// Attach the DIAssignID (or nullptr) merged from Uses in the branch</span></div>
<div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;        <span class="comment">// above.</span></div>
<div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;        NewSI-&gt;<a class="code" href="classllvm_1_1Instruction.html#a9247a212ea89acc9573fa7e7f557eaba">setMetadata</a>(LLVMContext::MD_DIAssignID, NewID);</div>
<div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;      }</div>
<div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160; </div>
<div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;      <span class="keywordflow">if</span> (AATags)</div>
<div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;        NewSI-&gt;<a class="code" href="classllvm_1_1Instruction.html#a4dd9b6c5bb93e01393c47dbe60f8b23f">setAAMetadata</a>(AATags);</div>
<div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160; </div>
<div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;      <a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *MSSAInsertPoint = MSSAInsertPts[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;      <a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *NewMemAcc;</div>
<div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;      <span class="keywordflow">if</span> (!MSSAInsertPoint) {</div>
<div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;        NewMemAcc = MSSAU.<a class="code" href="classllvm_1_1MemorySSAUpdater.html#a8d0093ed3e69ff491615a2ced017b1af">createMemoryAccessInBB</a>(</div>
<div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;            NewSI, <span class="keyword">nullptr</span>, NewSI-&gt;<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>(), MemorySSA::Beginning);</div>
<div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;        NewMemAcc =</div>
<div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;            MSSAU.<a class="code" href="classllvm_1_1MemorySSAUpdater.html#acf9a0bb25aae89d274ee9ae7dd0cf9b2">createMemoryAccessAfter</a>(NewSI, <span class="keyword">nullptr</span>, MSSAInsertPoint);</div>
<div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;      }</div>
<div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;      MSSAInsertPts[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>] = NewMemAcc;</div>
<div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;      MSSAU.<a class="code" href="classllvm_1_1MemorySSAUpdater.html#a21fc5eae685ef3e2dce4403a75d5ff2f">insertDef</a>(cast&lt;MemoryDef&gt;(NewMemAcc), <span class="keyword">true</span>);</div>
<div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;      <span class="comment">// FIXME: true for safety, false may still be correct.</span></div>
<div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;    }</div>
<div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;  }</div>
<div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160; </div>
<div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classllvm_1_1LoadAndStorePromoter.html#a0559a676152aa1421ed8ff6a4dfde66b">doExtraRewritesBeforeFinalDeletion</a>()<span class="keyword"> override </span>{</div>
<div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;    <span class="keywordflow">if</span> (CanInsertStoresInExitBlocks)</div>
<div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;      insertStoresInLoopExitBlocks();</div>
<div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;  }</div>
<div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160; </div>
<div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classllvm_1_1LoadAndStorePromoter.html#a012fcb5ec538c2210ad15e8afcf061ed">instructionDeleted</a>(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)<span class="keyword"> const override </span>{</div>
<div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;    SafetyInfo.<a class="code" href="classllvm_1_1ICFLoopSafetyInfo.html#aac2d5ff012ca10eb45c8b8cbca188dd6">removeInstruction</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;    MSSAU.<a class="code" href="classllvm_1_1MemorySSAUpdater.html#abcf78af37d56a9b72a49c65428210758">removeMemoryAccess</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;  }</div>
<div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160; </div>
<div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1LoadAndStorePromoter.html#aee1b74c8b9813e189733f6c5a63495e6">shouldDelete</a>(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)<span class="keyword"> const override </span>{</div>
<div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;    <span class="keywordflow">if</span> (isa&lt;StoreInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;      <span class="keywordflow">return</span> CanInsertStoresInExitBlocks;</div>
<div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;  }</div>
<div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;};</div>
<div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160; </div>
<div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;<span class="keywordtype">bool</span> isNotCapturedBeforeOrInLoop(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *V, <span class="keyword">const</span> <a class="code" href="classllvm_1_1Loop.html">Loop</a> *L,</div>
<div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;                                 <a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> *DT) {</div>
<div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;  <span class="comment">// We can perform the captured-before check against any instruction in the</span></div>
<div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;  <span class="comment">// loop header, as the loop header is reachable from any instruction inside</span></div>
<div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;  <span class="comment">// the loop.</span></div>
<div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;  <span class="comment">// TODO: ReturnCaptures=true shouldn&#39;t be necessary here.</span></div>
<div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;  <span class="keywordflow">return</span> !<a class="code" href="namespacellvm.html#a3693cec8e936224ad3e5748debe73b75">PointerMayBeCapturedBefore</a>(V, <span class="comment">/* ReturnCaptures */</span> <span class="keyword">true</span>,</div>
<div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;                                     <span class="comment">/* StoreCaptures */</span> <span class="keyword">true</span>,</div>
<div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;                                     L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a58c5b170ea68b41e94ebb0019523a68f">getHeader</a>()-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>(), DT);</div>
<div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;}</div>
<div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;<span class="comment">/// Return true if we can prove that a caller cannot inspect the object if an</span></div>
<div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;<span class="comment">/// unwind occurs inside the loop.</span></div>
<div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> isNotVisibleOnUnwindInLoop(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *Object, <span class="keyword">const</span> <a class="code" href="classllvm_1_1Loop.html">Loop</a> *L,</div>
<div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;                                <a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> *DT) {</div>
<div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;  <span class="keywordtype">bool</span> RequiresNoCaptureBeforeUnwind;</div>
<div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm.html#a894b02a1122caccc0ed5eb9b321d22bb">isNotVisibleOnUnwind</a>(Object, RequiresNoCaptureBeforeUnwind))</div>
<div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160; </div>
<div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;  <span class="keywordflow">return</span> !RequiresNoCaptureBeforeUnwind ||</div>
<div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;         isNotCapturedBeforeOrInLoop(Object, L, DT);</div>
<div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;}</div>
<div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160; </div>
<div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;<span class="keywordtype">bool</span> isWritableObject(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *Object) {</div>
<div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;  <span class="comment">// TODO: Alloca might not be writable after its lifetime ends.</span></div>
<div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;  <span class="comment">// See https://github.com/llvm/llvm-project/issues/51838.</span></div>
<div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;  <span class="keywordflow">if</span> (isa&lt;AllocaInst&gt;(Object))</div>
<div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160; </div>
<div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;  <span class="comment">// TODO: Also handle sret.</span></div>
<div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *<a class="code" href="README__ALTIVEC_8txt.html#a015846b6188ce15e08cd94c74a9df1a3">A</a> = dyn_cast&lt;Argument&gt;(Object))</div>
<div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="README__ALTIVEC_8txt.html#a015846b6188ce15e08cd94c74a9df1a3">A</a>-&gt;hasByValAttr();</div>
<div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160; </div>
<div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *<a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a> = dyn_cast&lt;GlobalVariable&gt;(Object))</div>
<div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;    <span class="keywordflow">return</span> !<a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>-&gt;isConstant();</div>
<div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160; </div>
<div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;  <span class="comment">// TODO: Noalias has nothing to do with writability, this should check for</span></div>
<div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;  <span class="comment">// an allocator function.</span></div>
<div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#a433468826ef20b5ddb53704fc38363fc">isNoAliasCall</a>(Object);</div>
<div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;}</div>
<div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160; </div>
<div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;<span class="keywordtype">bool</span> isThreadLocalObject(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *Object, <span class="keyword">const</span> <a class="code" href="classllvm_1_1Loop.html">Loop</a> *L, <a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> *DT,</div>
<div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;                         <a class="code" href="classllvm_1_1TargetTransformInfo.html">TargetTransformInfo</a> *<a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>) {</div>
<div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;  <span class="comment">// The object must be function-local to start with, and then not captured</span></div>
<div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;  <span class="comment">// before/in the loop.</span></div>
<div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;  <span class="keywordflow">return</span> (<a class="code" href="namespacellvm.html#abe71bc4610a9dc7aa3a6c6e0e28fc14a">isIdentifiedFunctionLocal</a>(Object) &amp;&amp;</div>
<div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;          isNotCapturedBeforeOrInLoop(Object, L, DT)) ||</div>
<div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;         (<a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>-&gt;<a class="code" href="classllvm_1_1TargetTransformInfo.html#a3ba50f0bbbe7b4ae53a66e70c614cce2">isSingleThreaded</a>() || <a class="code" href="LICM_8cpp.html#aa6d0cb32febae79312745abec8e550c8">SingleThread</a>);</div>
<div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;}</div>
<div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160; </div>
<div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;} <span class="comment">// namespace</span></div>
<div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;<span class="comment">/// Try to promote memory values to scalars by sinking stores out of the</span></div>
<div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;<span class="comment">/// loop and moving loads to before the loop.  We do this by looping over</span></div>
<div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;<span class="comment">/// the stores in the loop, looking for stores to Must pointers which are</span></div>
<div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;<span class="comment">/// loop invariant.</span></div>
<div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l01952"></a><span class="lineno"><a class="line" href="namespacellvm.html#ab8c575d798aa9fd14ce698726467d31b"> 1952</a></span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> <a class="code" href="namespacellvm.html#ab8c575d798aa9fd14ce698726467d31b">llvm::promoteLoopAccessesToScalars</a>(</div>
<div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1SmallSetVector.html">SmallSetVector&lt;Value *, 8&gt;</a> &amp;PointerMustAliases,</div>
<div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;    <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;BasicBlock *&gt;</a> &amp;ExitBlocks,</div>
<div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;    <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;Instruction *&gt;</a> &amp;InsertPts,</div>
<div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;    <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;MemoryAccess *&gt;</a> &amp;MSSAInsertPts, <a class="code" href="classllvm_1_1PredIteratorCache.html">PredIteratorCache</a> &amp;<a class="code" href="PassBuilderBindings_8cpp.html#ad4d247df65c12507f447383be37d7ccb">PIC</a>,</div>
<div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;    <a class="code" href="classllvm_1_1LoopInfo.html">LoopInfo</a> *LI, <a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> *DT, <a class="code" href="classllvm_1_1AssumptionCache.html">AssumptionCache</a> *AC,</div>
<div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetLibraryInfo.html">TargetLibraryInfo</a> *TLI, <a class="code" href="classllvm_1_1TargetTransformInfo.html">TargetTransformInfo</a> *<a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>, <a class="code" href="classllvm_1_1Loop.html">Loop</a> *CurLoop,</div>
<div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;    <a class="code" href="classllvm_1_1MemorySSAUpdater.html">MemorySSAUpdater</a> &amp;MSSAU, <a class="code" href="classllvm_1_1ICFLoopSafetyInfo.html">ICFLoopSafetyInfo</a> *SafetyInfo,</div>
<div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;    <a class="code" href="classllvm_1_1OptimizationRemarkEmitter.html">OptimizationRemarkEmitter</a> *ORE, <span class="keywordtype">bool</span> AllowSpeculation,</div>
<div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;    <span class="keywordtype">bool</span> HasReadsOutsideSet) {</div>
<div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;  <span class="comment">// Verify inputs.</span></div>
<div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(LI != <span class="keyword">nullptr</span> &amp;&amp; DT != <span class="keyword">nullptr</span> &amp;&amp; CurLoop != <span class="keyword">nullptr</span> &amp;&amp;</div>
<div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;         SafetyInfo != <span class="keyword">nullptr</span> &amp;&amp;</div>
<div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;         <span class="stringliteral">&quot;Unexpected Input to promoteLoopAccessesToScalars&quot;</span>);</div>
<div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160; </div>
<div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>({</div>
<div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;    <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Trying to promote set of must-aliased pointers:\n&quot;</span>;</div>
<div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a> : PointerMustAliases)</div>
<div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;      <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  &quot;</span> &lt;&lt; *<a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a> &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;  });</div>
<div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;  ++NumPromotionCandidates;</div>
<div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160; </div>
<div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *SomePtr = *PointerMustAliases.<a class="code" href="classllvm_1_1SetVector.html#adb13793b98ab59209a5309d26f831850">begin</a>();</div>
<div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Preheader = CurLoop-&gt;<a class="code" href="classllvm_1_1LoopBase.html#ac3280e7f76f955403fe17eacf126b90d">getLoopPreheader</a>();</div>
<div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160; </div>
<div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;  <span class="comment">// It is not safe to promote a load/store from the loop if the load/store is</span></div>
<div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;  <span class="comment">// conditional.  For example, turning:</span></div>
<div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;  <span class="comment">//    for () { if (c) *P += 1; }</span></div>
<div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160;  <span class="comment">// into:</span></div>
<div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;  <span class="comment">//    tmp = *P;  for () { if (c) tmp +=1; } *P = tmp;</span></div>
<div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;  <span class="comment">// is not safe, because *P may only be valid to access if &#39;c&#39; is true.</span></div>
<div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;  <span class="comment">// The safety property divides into two parts:</span></div>
<div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;  <span class="comment">// p1) The memory may not be dereferenceable on entry to the loop.  In this</span></div>
<div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;  <span class="comment">//    case, we can&#39;t insert the required load in the preheader.</span></div>
<div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;  <span class="comment">// p2) The memory model does not allow us to insert a store along any dynamic</span></div>
<div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;  <span class="comment">//    path which did not originally have one.</span></div>
<div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;  <span class="comment">// If at least one store is guaranteed to execute, both properties are</span></div>
<div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;  <span class="comment">// satisfied, and promotion is legal.</span></div>
<div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;  <span class="comment">// This, however, is not a necessary condition. Even if no store/load is</span></div>
<div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;  <span class="comment">// guaranteed to execute, we can still establish these properties.</span></div>
<div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;  <span class="comment">// We can establish (p1) by proving that hoisting the load into the preheader</span></div>
<div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;  <span class="comment">// is safe (i.e. proving dereferenceability on all paths through the loop). We</span></div>
<div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;  <span class="comment">// can use any access within the alias set to prove dereferenceability,</span></div>
<div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160;  <span class="comment">// since they&#39;re all must alias.</span></div>
<div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;  <span class="comment">// There are two ways establish (p2):</span></div>
<div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160;  <span class="comment">// a) Prove the location is thread-local. In this case the memory model</span></div>
<div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;  <span class="comment">// requirement does not apply, and stores are safe to insert.</span></div>
<div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;  <span class="comment">// b) Prove a store dominates every exit block. In this case, if an exit</span></div>
<div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160;  <span class="comment">// blocks is reached, the original dynamic path would have taken us through</span></div>
<div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;  <span class="comment">// the store, so inserting a store into the exit block is safe. Note that this</span></div>
<div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;  <span class="comment">// is different from the store being guaranteed to execute. For instance,</span></div>
<div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;  <span class="comment">// if an exception is thrown on the first iteration of the loop, the original</span></div>
<div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160;  <span class="comment">// store is never executed, but the exit blocks are not executed either.</span></div>
<div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160; </div>
<div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160;  <span class="keywordtype">bool</span> DereferenceableInPH = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160;  <span class="keywordtype">bool</span> StoreIsGuanteedToExecute = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160;  <span class="keywordtype">bool</span> FoundLoadToPromote = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160;  <span class="comment">// Goes from Unknown to either Safe or Unsafe, but can&#39;t switch between them.</span></div>
<div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160;  <span class="keyword">enum</span> {</div>
<div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;    StoreSafe,</div>
<div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;    StoreUnsafe,</div>
<div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160;    StoreSafetyUnknown,</div>
<div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160;  } StoreSafety = StoreSafetyUnknown;</div>
<div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160; </div>
<div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Instruction *, 64&gt;</a> LoopUses;</div>
<div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160; </div>
<div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;  <span class="comment">// We start with an alignment of one and try to find instructions that allow</span></div>
<div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;  <span class="comment">// us to prove better alignment.</span></div>
<div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160;  <a class="code" href="structllvm_1_1Align.html">Align</a> Alignment;</div>
<div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160;  <span class="comment">// Keep track of which types of access we see</span></div>
<div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160;  <span class="keywordtype">bool</span> SawUnorderedAtomic = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;  <span class="keywordtype">bool</span> SawNotAtomic = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160;  <a class="code" href="structllvm_1_1AAMDNodes.html">AAMDNodes</a> AATags;</div>
<div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160; </div>
<div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1DataLayout.html">DataLayout</a> &amp;MDL = Preheader-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#afc70e919c88c86159cc94cea29b6c210">getModule</a>()-&gt;<a class="code" href="classllvm_1_1Module.html#a6d883605206368bc536cc9ded97209b8">getDataLayout</a>();</div>
<div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160; </div>
<div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160;  <span class="comment">// If there are reads outside the promoted set, then promoting stores is</span></div>
<div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160;  <span class="comment">// definitely not safe.</span></div>
<div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160;  <span class="keywordflow">if</span> (HasReadsOutsideSet)</div>
<div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;    StoreSafety = StoreUnsafe;</div>
<div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160; </div>
<div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160;  <span class="keywordflow">if</span> (StoreSafety == StoreSafetyUnknown &amp;&amp; SafetyInfo-&gt;<a class="code" href="classllvm_1_1ICFLoopSafetyInfo.html#ac037c7db5068a141e231cab8b2daeef2">anyBlockMayThrow</a>()) {</div>
<div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;    <span class="comment">// If a loop can throw, we have to insert a store along each unwind edge.</span></div>
<div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160;    <span class="comment">// That said, we can&#39;t actually make the unwind edge explicit. Therefore,</span></div>
<div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;    <span class="comment">// we have to prove that the store is dead along the unwind edge.  We do</span></div>
<div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;    <span class="comment">// this by proving that the caller can&#39;t have a reference to the object</span></div>
<div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;    <span class="comment">// after return and thus can&#39;t possibly load from the object.</span></div>
<div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm.html#a1855f41d4a13b499837ed703cff6b389a497031794414a552435f90151ac3b54b">Object</a> = <a class="code" href="namespacellvm.html#a3b1c5788b85ffa254be0e834edf5cf8f">getUnderlyingObject</a>(SomePtr);</div>
<div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;    <span class="keywordflow">if</span> (!isNotVisibleOnUnwindInLoop(<a class="code" href="namespacellvm.html#a1855f41d4a13b499837ed703cff6b389a497031794414a552435f90151ac3b54b">Object</a>, CurLoop, DT))</div>
<div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;      StoreSafety = StoreUnsafe;</div>
<div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;  }</div>
<div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160; </div>
<div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;  <span class="comment">// Check that all accesses to pointers in the alias set use the same type.</span></div>
<div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160;  <span class="comment">// We cannot (yet) promote a memory location that is loaded and stored in</span></div>
<div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;  <span class="comment">// different sizes.  While we are at it, collect alignment and AA info.</span></div>
<div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *AccessTy = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *ASIV : PointerMustAliases) {</div>
<div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Use.html">Use</a> &amp;U : ASIV-&gt;<a class="code" href="classllvm_1_1Value.html#aecb93439702247fe5353a9966f7cefcd">uses</a>()) {</div>
<div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;      <span class="comment">// Ignore instructions that are outside the loop.</span></div>
<div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160;      <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *UI = dyn_cast&lt;Instruction&gt;(U.getUser());</div>
<div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160;      <span class="keywordflow">if</span> (!UI || !CurLoop-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a04337b572d34ea413c35dbac5d75530b">contains</a>(UI))</div>
<div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160; </div>
<div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160;      <span class="comment">// If there is an non-load/store instruction in the loop, we can&#39;t promote</span></div>
<div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160;      <span class="comment">// it.</span></div>
<div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a> *<a class="code" href="namespacellvm_1_1SPII.html#a1c7202c6054fef862bbed45957747cdfa5069619ca8fdce305534f3fe85091a0f">Load</a> = dyn_cast&lt;LoadInst&gt;(UI)) {</div>
<div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1SPII.html#a1c7202c6054fef862bbed45957747cdfa5069619ca8fdce305534f3fe85091a0f">Load</a>-&gt;isUnordered())</div>
<div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160; </div>
<div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;        SawUnorderedAtomic |= <a class="code" href="namespacellvm_1_1SPII.html#a1c7202c6054fef862bbed45957747cdfa5069619ca8fdce305534f3fe85091a0f">Load</a>-&gt;isAtomic();</div>
<div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;        SawNotAtomic |= !<a class="code" href="namespacellvm_1_1SPII.html#a1c7202c6054fef862bbed45957747cdfa5069619ca8fdce305534f3fe85091a0f">Load</a>-&gt;isAtomic();</div>
<div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;        FoundLoadToPromote = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160; </div>
<div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;        <a class="code" href="structllvm_1_1Align.html">Align</a> InstAlignment = <a class="code" href="namespacellvm_1_1SPII.html#a1c7202c6054fef862bbed45957747cdfa5069619ca8fdce305534f3fe85091a0f">Load</a>-&gt;getAlign();</div>
<div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160; </div>
<div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;        <span class="comment">// Note that proving a load safe to speculate requires proving</span></div>
<div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;        <span class="comment">// sufficient alignment at the target location.  Proving it guaranteed</span></div>
<div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160;        <span class="comment">// to execute does as well.  Thus we can increase our guaranteed</span></div>
<div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160;        <span class="comment">// alignment as well.</span></div>
<div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;        <span class="keywordflow">if</span> (!DereferenceableInPH || (InstAlignment &gt; Alignment))</div>
<div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="LICM_8cpp.html#ab63d5eb7a9919d4e5f2c8d614e9bda97">isSafeToExecuteUnconditionally</a>(</div>
<div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;                  *<a class="code" href="namespacellvm_1_1SPII.html#a1c7202c6054fef862bbed45957747cdfa5069619ca8fdce305534f3fe85091a0f">Load</a>, DT, TLI, CurLoop, SafetyInfo, ORE,</div>
<div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160;                  Preheader-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>(), AC, AllowSpeculation)) {</div>
<div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160;            DereferenceableInPH = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;            Alignment = <a class="code" href="namespacellvm.html#ab4d4bc901fedd8857f647dcc2c0d71de">std::max</a>(Alignment, InstAlignment);</div>
<div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;          }</div>
<div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1StoreInst.html">StoreInst</a> *<a class="code" href="namespacellvm_1_1SPII.html#a1c7202c6054fef862bbed45957747cdfa36b3dd3b84fde3f8494a9b18af131856">Store</a> = dyn_cast&lt;StoreInst&gt;(UI)) {</div>
<div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;        <span class="comment">// Stores *of* the pointer are not interesting, only stores *to* the</span></div>
<div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;        <span class="comment">// pointer.</span></div>
<div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;        <span class="keywordflow">if</span> (U.getOperandNo() != <a class="code" href="HWAddressSanitizer_8cpp.html#ad5c3fea3e9699b6299cc037334eeb83e">StoreInst::getPointerOperandIndex</a>())</div>
<div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1SPII.html#a1c7202c6054fef862bbed45957747cdfa36b3dd3b84fde3f8494a9b18af131856">Store</a>-&gt;isUnordered())</div>
<div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160; </div>
<div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;        SawUnorderedAtomic |= <a class="code" href="namespacellvm_1_1SPII.html#a1c7202c6054fef862bbed45957747cdfa36b3dd3b84fde3f8494a9b18af131856">Store</a>-&gt;isAtomic();</div>
<div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160;        SawNotAtomic |= !<a class="code" href="namespacellvm_1_1SPII.html#a1c7202c6054fef862bbed45957747cdfa36b3dd3b84fde3f8494a9b18af131856">Store</a>-&gt;isAtomic();</div>
<div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160; </div>
<div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;        <span class="comment">// If the store is guaranteed to execute, both properties are satisfied.</span></div>
<div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160;        <span class="comment">// We may want to check if a store is guaranteed to execute even if we</span></div>
<div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160;        <span class="comment">// already know that promotion is safe, since it may have higher</span></div>
<div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;        <span class="comment">// alignment than any other guaranteed stores, in which case we can</span></div>
<div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;        <span class="comment">// raise the alignment on the promoted store.</span></div>
<div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;        <a class="code" href="structllvm_1_1Align.html">Align</a> InstAlignment = <a class="code" href="namespacellvm_1_1SPII.html#a1c7202c6054fef862bbed45957747cdfa36b3dd3b84fde3f8494a9b18af131856">Store</a>-&gt;getAlign();</div>
<div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;        <span class="keywordtype">bool</span> GuaranteedToExecute =</div>
<div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160;            SafetyInfo-&gt;<a class="code" href="classllvm_1_1ICFLoopSafetyInfo.html#ab40701961745d6467fa8e23b1e451c12">isGuaranteedToExecute</a>(*UI, DT, CurLoop);</div>
<div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;        StoreIsGuanteedToExecute |= GuaranteedToExecute;</div>
<div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;        <span class="keywordflow">if</span> (GuaranteedToExecute) {</div>
<div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;          DereferenceableInPH = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;          <span class="keywordflow">if</span> (StoreSafety == StoreSafetyUnknown)</div>
<div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160;            StoreSafety = StoreSafe;</div>
<div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160;          Alignment = <a class="code" href="namespacellvm.html#ab4d4bc901fedd8857f647dcc2c0d71de">std::max</a>(Alignment, InstAlignment);</div>
<div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;        }</div>
<div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160; </div>
<div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;        <span class="comment">// If a store dominates all exit blocks, it is safe to sink.</span></div>
<div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;        <span class="comment">// As explained above, if an exit block was executed, a dominating</span></div>
<div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160;        <span class="comment">// store must have been executed at least once, so we are not</span></div>
<div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160;        <span class="comment">// introducing stores on paths that did not have them.</span></div>
<div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;        <span class="comment">// Note that this only looks at explicit exit blocks. If we ever</span></div>
<div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;        <span class="comment">// start sinking stores into unwind edges (see above), this will break.</span></div>
<div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;        <span class="keywordflow">if</span> (StoreSafety == StoreSafetyUnknown &amp;&amp;</div>
<div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;            <a class="code" href="namespacellvm.html#a0d10fe510ced2849a8074fe81e5d04ce">llvm::all_of</a>(ExitBlocks, [&amp;](<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Exit) {</div>
<div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;              <span class="keywordflow">return</span> DT-&gt;<a class="code" href="classllvm_1_1DominatorTree.html#a5c69311e8d44898dac36a155c3d8691d">dominates</a>(<a class="code" href="namespacellvm_1_1SPII.html#a1c7202c6054fef862bbed45957747cdfa36b3dd3b84fde3f8494a9b18af131856">Store</a>-&gt;getParent(), Exit);</div>
<div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;            }))</div>
<div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;          StoreSafety = StoreSafe;</div>
<div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160; </div>
<div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;        <span class="comment">// If the store is not guaranteed to execute, we may still get</span></div>
<div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160;        <span class="comment">// deref info through it.</span></div>
<div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160;        <span class="keywordflow">if</span> (!DereferenceableInPH) {</div>
<div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160;          DereferenceableInPH = <a class="code" href="Loads_8cpp.html#a3e49ed1824b63334071840d20aab03ba">isDereferenceableAndAlignedPointer</a>(</div>
<div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160;              <a class="code" href="namespacellvm_1_1SPII.html#a1c7202c6054fef862bbed45957747cdfa36b3dd3b84fde3f8494a9b18af131856">Store</a>-&gt;getPointerOperand(), <a class="code" href="namespacellvm_1_1SPII.html#a1c7202c6054fef862bbed45957747cdfa36b3dd3b84fde3f8494a9b18af131856">Store</a>-&gt;getValueOperand()-&gt;getType(),</div>
<div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160;              <a class="code" href="namespacellvm_1_1SPII.html#a1c7202c6054fef862bbed45957747cdfa36b3dd3b84fde3f8494a9b18af131856">Store</a>-&gt;getAlign(), MDL, Preheader-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>(), AC, DT, TLI);</div>
<div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160;        }</div>
<div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160;      } <span class="keywordflow">else</span></div>
<div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160;        <span class="keywordflow">continue</span>; <span class="comment">// Not a load or store.</span></div>
<div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160; </div>
<div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160;      <span class="keywordflow">if</span> (!AccessTy)</div>
<div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160;        AccessTy = <a class="code" href="namespacellvm.html#a48b30f2688526d0f45900a47cd6b6654">getLoadStoreType</a>(UI);</div>
<div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (AccessTy != <a class="code" href="namespacellvm.html#a48b30f2688526d0f45900a47cd6b6654">getLoadStoreType</a>(UI))</div>
<div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160; </div>
<div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;      <span class="comment">// Merge the AA tags.</span></div>
<div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;      <span class="keywordflow">if</span> (LoopUses.empty()) {</div>
<div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160;        <span class="comment">// On the first load/store, just take its AA tags.</span></div>
<div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160;        AATags = UI-&gt;<a class="code" href="classllvm_1_1Instruction.html#aade703948f2fdabdc65868bdf42d3141">getAAMetadata</a>();</div>
<div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (AATags) {</div>
<div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160;        AATags = AATags.<a class="code" href="structllvm_1_1AAMDNodes.html#a6b173e97523275314f3f2b433a5f71a9">merge</a>(UI-&gt;<a class="code" href="classllvm_1_1Instruction.html#aade703948f2fdabdc65868bdf42d3141">getAAMetadata</a>());</div>
<div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160;      }</div>
<div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160; </div>
<div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160;      LoopUses.push_back(UI);</div>
<div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160;    }</div>
<div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160;  }</div>
<div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160; </div>
<div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;  <span class="comment">// If we found both an unordered atomic instruction and a non-atomic memory</span></div>
<div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160;  <span class="comment">// access, bail.  We can&#39;t blindly promote non-atomic to atomic since we</span></div>
<div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160;  <span class="comment">// might not be able to lower the result.  We can&#39;t downgrade since that</span></div>
<div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160;  <span class="comment">// would violate memory model.  Also, align 0 is an error for atomics.</span></div>
<div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;  <span class="keywordflow">if</span> (SawUnorderedAtomic &amp;&amp; SawNotAtomic)</div>
<div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160; </div>
<div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160;  <span class="comment">// If we&#39;re inserting an atomic load in the preheader, we must be able to</span></div>
<div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160;  <span class="comment">// lower it.  We&#39;re only guaranteed to be able to lower naturally aligned</span></div>
<div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160;  <span class="comment">// atomics.</span></div>
<div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160;  <span class="keywordflow">if</span> (SawUnorderedAtomic &amp;&amp; Alignment &lt; MDL.<a class="code" href="classllvm_1_1DataLayout.html#acfcd22eb38dbfe1acbf138754297437a">getTypeStoreSize</a>(AccessTy))</div>
<div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160; </div>
<div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160;  <span class="comment">// If we couldn&#39;t prove we can hoist the load, bail.</span></div>
<div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160;  <span class="keywordflow">if</span> (!DereferenceableInPH) {</div>
<div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Not promoting: Not dereferenceable in preheader\n&quot;</span>);</div>
<div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02169"></a><span class="lineno"> 2169</span>&#160;  }</div>
<div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160; </div>
<div class="line"><a name="l02171"></a><span class="lineno"> 2171</span>&#160;  <span class="comment">// We know we can hoist the load, but don&#39;t have a guaranteed store.</span></div>
<div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160;  <span class="comment">// Check whether the location is writable and thread-local. If it is, then we</span></div>
<div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160;  <span class="comment">// can insert stores along paths which originally didn&#39;t have them without</span></div>
<div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160;  <span class="comment">// violating the memory model.</span></div>
<div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160;  <span class="keywordflow">if</span> (StoreSafety == StoreSafetyUnknown) {</div>
<div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm.html#a1855f41d4a13b499837ed703cff6b389a497031794414a552435f90151ac3b54b">Object</a> = <a class="code" href="namespacellvm.html#a3b1c5788b85ffa254be0e834edf5cf8f">getUnderlyingObject</a>(SomePtr);</div>
<div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160;    <span class="keywordflow">if</span> (isWritableObject(<a class="code" href="namespacellvm.html#a1855f41d4a13b499837ed703cff6b389a497031794414a552435f90151ac3b54b">Object</a>) &amp;&amp;</div>
<div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160;        isThreadLocalObject(<a class="code" href="namespacellvm.html#a1855f41d4a13b499837ed703cff6b389a497031794414a552435f90151ac3b54b">Object</a>, CurLoop, DT, <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>))</div>
<div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160;      StoreSafety = StoreSafe;</div>
<div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160;  }</div>
<div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160; </div>
<div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160;  <span class="comment">// If we&#39;ve still failed to prove we can sink the store, hoist the load</span></div>
<div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;  <span class="comment">// only, if possible.</span></div>
<div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;  <span class="keywordflow">if</span> (StoreSafety != StoreSafe &amp;&amp; !FoundLoadToPromote)</div>
<div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;    <span class="comment">// If we cannot hoist the load either, give up.</span></div>
<div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160; </div>
<div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;  <span class="comment">// Lets do the promotion!</span></div>
<div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;  <span class="keywordflow">if</span> (StoreSafety == StoreSafe) {</div>
<div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LICM: Promoting load/store of the value: &quot;</span> &lt;&lt; *SomePtr</div>
<div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160;                      &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div>
<div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160;    ++NumLoadStorePromoted;</div>
<div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02194"></a><span class="lineno"> 2194</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LICM: Promoting load of the value: &quot;</span> &lt;&lt; *SomePtr</div>
<div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160;                      &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div>
<div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160;    ++NumLoadPromoted;</div>
<div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160;  }</div>
<div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160; </div>
<div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160;  ORE-&gt;<a class="code" href="classllvm_1_1OptimizationRemarkEmitter.html#aae6a98aea85aa3af87357cc5448db499">emit</a>([&amp;]() {</div>
<div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1OptimizationRemark.html">OptimizationRemark</a>(<a class="code" href="LICM_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">DEBUG_TYPE</a>, <span class="stringliteral">&quot;PromoteLoopAccessesToScalar&quot;</span>,</div>
<div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;                              LoopUses[0])</div>
<div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;           &lt;&lt; <span class="stringliteral">&quot;Moving accesses to memory location out of the loop&quot;</span>;</div>
<div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;  });</div>
<div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160; </div>
<div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160;  <span class="comment">// Look at all the loop uses, and try to merge their locations.</span></div>
<div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;  std::vector&lt;const DILocation *&gt; LoopUsesLocs;</div>
<div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> *U : LoopUses)</div>
<div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160;    LoopUsesLocs.push_back(U-&gt;getDebugLoc().get());</div>
<div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160;  <span class="keyword">auto</span> <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a> = <a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a>(DILocation::getMergedLocations(LoopUsesLocs));</div>
<div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160; </div>
<div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;  <span class="comment">// We use the SSAUpdater interface to insert phi nodes as required.</span></div>
<div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;PHINode *, 16&gt;</a> NewPHIs;</div>
<div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;  <a class="code" href="classllvm_1_1SSAUpdater.html">SSAUpdater</a> <a class="code" href="MemorySSA_8cpp.html#a20a60bdac22b099d87d8cb0c1d554120">SSA</a>(&amp;NewPHIs);</div>
<div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;  LoopPromoter Promoter(SomePtr, LoopUses, <a class="code" href="MemorySSA_8cpp.html#a20a60bdac22b099d87d8cb0c1d554120">SSA</a>, ExitBlocks, InsertPts,</div>
<div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160;                        MSSAInsertPts, <a class="code" href="PassBuilderBindings_8cpp.html#ad4d247df65c12507f447383be37d7ccb">PIC</a>, MSSAU, *LI, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, Alignment,</div>
<div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160;                        SawUnorderedAtomic, AATags, *SafetyInfo,</div>
<div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;                        StoreSafety == StoreSafe);</div>
<div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160; </div>
<div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160;  <span class="comment">// Set up the preheader to have a definition of the value.  It is the live-out</span></div>
<div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160;  <span class="comment">// value from the preheader that uses in the loop will use.</span></div>
<div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160;  <a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a> *PreheaderLoad = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;  <span class="keywordflow">if</span> (FoundLoadToPromote || !StoreIsGuanteedToExecute) {</div>
<div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160;    PreheaderLoad =</div>
<div class="line"><a name="l02224"></a><span class="lineno"> 2224</span>&#160;        <span class="keyword">new</span> <a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a>(AccessTy, SomePtr, SomePtr-&gt;<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>() + <span class="stringliteral">&quot;.promoted&quot;</span>,</div>
<div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160;                     Preheader-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>());</div>
<div class="line"><a name="l02226"></a><span class="lineno"> 2226</span>&#160;    <span class="keywordflow">if</span> (SawUnorderedAtomic)</div>
<div class="line"><a name="l02227"></a><span class="lineno"> 2227</span>&#160;      PreheaderLoad-&gt;<a class="code" href="classllvm_1_1LoadInst.html#a46adba111f7580ebfbb869a008de1818">setOrdering</a>(<a class="code" href="README__P9_8txt.html#a0afe4617fad145d6ced5a18fd739cf06">AtomicOrdering::Unordered</a>);</div>
<div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>&#160;    PreheaderLoad-&gt;<a class="code" href="classllvm_1_1LoadInst.html#a2b1268b642e9bf4373b6fb31c482c9ca">setAlignment</a>(Alignment);</div>
<div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160;    PreheaderLoad-&gt;<a class="code" href="classllvm_1_1Instruction.html#ae8f5bf5cc06f696b52c709677df00fbf">setDebugLoc</a>(<a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a>());</div>
<div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160;    <span class="keywordflow">if</span> (AATags)</div>
<div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160;      PreheaderLoad-&gt;<a class="code" href="classllvm_1_1Instruction.html#a4dd9b6c5bb93e01393c47dbe60f8b23f">setAAMetadata</a>(AATags);</div>
<div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160; </div>
<div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160;    <a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *PreheaderLoadMemoryAccess = MSSAU.<a class="code" href="classllvm_1_1MemorySSAUpdater.html#a8d0093ed3e69ff491615a2ced017b1af">createMemoryAccessInBB</a>(</div>
<div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>&#160;        PreheaderLoad, <span class="keyword">nullptr</span>, PreheaderLoad-&gt;<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>(), MemorySSA::End);</div>
<div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160;    <a class="code" href="classllvm_1_1MemoryUse.html">MemoryUse</a> *NewMemUse = cast&lt;MemoryUse&gt;(PreheaderLoadMemoryAccess);</div>
<div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160;    MSSAU.<a class="code" href="classllvm_1_1MemorySSAUpdater.html#a9ab9d33dbeb44b5ba49ab27201e6bd76">insertUse</a>(NewMemUse, <span class="comment">/*RenameUses=*/</span><span class="keyword">true</span>);</div>
<div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;    <a class="code" href="MemorySSA_8cpp.html#a20a60bdac22b099d87d8cb0c1d554120">SSA</a>.AddAvailableValue(Preheader, PreheaderLoad);</div>
<div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160;    <a class="code" href="MemorySSA_8cpp.html#a20a60bdac22b099d87d8cb0c1d554120">SSA</a>.AddAvailableValue(Preheader, <a class="code" href="lib_2Target_2PowerPC_2README_8txt.html#aa91241c8c54738377749dc47ee489e0d">PoisonValue::get</a>(AccessTy));</div>
<div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160;  }</div>
<div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160; </div>
<div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#aa29fe161c408879ada30c90ebbf55dcf">VerifyMemorySSA</a>)</div>
<div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160;    MSSAU.<a class="code" href="classllvm_1_1MemorySSAUpdater.html#a4121a20238504099c3466fa62ec877d5">getMemorySSA</a>()-&gt;<a class="code" href="classllvm_1_1MemorySSA.html#a88b10d37f671e58cf138ac84a8257c17">verifyMemorySSA</a>();</div>
<div class="line"><a name="l02244"></a><span class="lineno"> 2244</span>&#160;  <span class="comment">// Rewrite all the loads in the loop and remember all the definitions from</span></div>
<div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160;  <span class="comment">// stores in the loop.</span></div>
<div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160;  Promoter.run(LoopUses);</div>
<div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160; </div>
<div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#aa29fe161c408879ada30c90ebbf55dcf">VerifyMemorySSA</a>)</div>
<div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160;    MSSAU.<a class="code" href="classllvm_1_1MemorySSAUpdater.html#a4121a20238504099c3466fa62ec877d5">getMemorySSA</a>()-&gt;<a class="code" href="classllvm_1_1MemorySSA.html#a88b10d37f671e58cf138ac84a8257c17">verifyMemorySSA</a>();</div>
<div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;  <span class="comment">// If the SSAUpdater didn&#39;t use the load in the preheader, just zap it now.</span></div>
<div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160;  <span class="keywordflow">if</span> (PreheaderLoad &amp;&amp; PreheaderLoad-&gt;<a class="code" href="classllvm_1_1Value.html#a9d7de807ebdfe1819df3ff6cb0f16158">use_empty</a>())</div>
<div class="line"><a name="l02252"></a><span class="lineno"> 2252</span>&#160;    <a class="code" href="LICM_8cpp.html#ab0cfc793d55940eac67854827dd365e9">eraseInstruction</a>(*PreheaderLoad, *SafetyInfo, MSSAU);</div>
<div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160; </div>
<div class="line"><a name="l02254"></a><span class="lineno"> 2254</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160;}</div>
<div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160; </div>
<div class="line"><a name="l02257"></a><span class="lineno"><a class="line" href="LICM_8cpp.html#a8046d863469d9c33287fa4a673d00571"> 2257</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="LICM_8cpp.html#a8046d863469d9c33287fa4a673d00571">foreachMemoryAccess</a>(<a class="code" href="classllvm_1_1MemorySSA.html">MemorySSA</a> *MSSA, <a class="code" href="classllvm_1_1Loop.html">Loop</a> *L,</div>
<div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160;                                <a class="code" href="classllvm_1_1function__ref.html">function_ref</a>&lt;<span class="keywordtype">void</span>(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *)&gt; Fn) {</div>
<div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> : L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a40f34cc77d2b3bc73384f535c8101858">blocks</a>())</div>
<div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">const</span> <span class="keyword">auto</span> *Accesses = MSSA-&gt;<a class="code" href="classllvm_1_1MemorySSA.html#aaff19b909f903fe2a431e97424ffced5">getBlockAccesses</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>))</div>
<div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;Access : *Accesses)</div>
<div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160;        <span class="keywordflow">if</span> (<span class="keyword">const</span> <span class="keyword">auto</span> *MUD = dyn_cast&lt;MemoryUseOrDef&gt;(&amp;Access))</div>
<div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160;          Fn(MUD-&gt;getMemoryInst());</div>
<div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160;}</div>
<div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160; </div>
<div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160;<span class="comment">// The bool indicates whether there might be reads outside the set, in which</span></div>
<div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160;<span class="comment">// case only loads may be promoted.</span></div>
<div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;PointersAndHasReadsOutsideSet, 0&gt;</a></div>
<div class="line"><a name="l02269"></a><span class="lineno"><a class="line" href="LICM_8cpp.html#a37ddbdd8cb4efa5072282498fdc1ac65"> 2269</a></span>&#160;<a class="code" href="LICM_8cpp.html#a37ddbdd8cb4efa5072282498fdc1ac65">collectPromotionCandidates</a>(<a class="code" href="classllvm_1_1MemorySSA.html">MemorySSA</a> *MSSA, <a class="code" href="classllvm_1_1AAResults.html">AliasAnalysis</a> *AA, <a class="code" href="classllvm_1_1Loop.html">Loop</a> *L) {</div>
<div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>&#160;  <a class="code" href="classllvm_1_1BatchAAResults.html">BatchAAResults</a> BatchAA(*AA);</div>
<div class="line"><a name="l02271"></a><span class="lineno"> 2271</span>&#160;  <a class="code" href="classllvm_1_1AliasSetTracker.html">AliasSetTracker</a> AST(BatchAA);</div>
<div class="line"><a name="l02272"></a><span class="lineno"> 2272</span>&#160; </div>
<div class="line"><a name="l02273"></a><span class="lineno"> 2273</span>&#160;  <span class="keyword">auto</span> IsPotentiallyPromotable = [L](<span class="keyword">const</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l02274"></a><span class="lineno"> 2274</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">const</span> <span class="keyword">auto</span> *<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a> = dyn_cast&lt;StoreInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160;      <span class="keywordflow">return</span> L-&gt;<a class="code" href="classllvm_1_1Loop.html#a6cb6a58fb0ded82b4c7755fc4c27c86d">isLoopInvariant</a>(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;getPointerOperand());</div>
<div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">const</span> <span class="keyword">auto</span> *LI = dyn_cast&lt;LoadInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l02277"></a><span class="lineno"> 2277</span>&#160;      <span class="keywordflow">return</span> L-&gt;<a class="code" href="classllvm_1_1Loop.html#a6cb6a58fb0ded82b4c7755fc4c27c86d">isLoopInvariant</a>(LI-&gt;getPointerOperand());</div>
<div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160;  };</div>
<div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160; </div>
<div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160;  <span class="comment">// Populate AST with potentially promotable accesses.</span></div>
<div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160;  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;Value *, 16&gt;</a> AttemptingPromotion;</div>
<div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160;  <a class="code" href="LICM_8cpp.html#a8046d863469d9c33287fa4a673d00571">foreachMemoryAccess</a>(MSSA, L, [&amp;](<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160;    <span class="keywordflow">if</span> (IsPotentiallyPromotable(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160;      AttemptingPromotion.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160;      AST.<a class="code" href="classllvm_1_1AliasSetTracker.html#aac3f7966cd23097c118eb53fc6c19661">add</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160;    }</div>
<div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160;  });</div>
<div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160; </div>
<div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160;  <span class="comment">// We&#39;re only interested in must-alias sets that contain a mod.</span></div>
<div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;PointerIntPair&lt;const AliasSet *, 1, bool&gt;</a>, 8&gt; Sets;</div>
<div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1AliasSet.html">AliasSet</a> &amp;AS : AST)</div>
<div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160;    <span class="keywordflow">if</span> (!AS.isForwardingAliasSet() &amp;&amp; AS.isMod() &amp;&amp; AS.isMustAlias())</div>
<div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160;      Sets.push_back({&amp;AS, <span class="keyword">false</span>});</div>
<div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160; </div>
<div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160;  <span class="keywordflow">if</span> (Sets.empty())</div>
<div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;    <span class="keywordflow">return</span> {}; <span class="comment">// Nothing to promote...</span></div>
<div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160; </div>
<div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160;  <span class="comment">// Discard any sets for which there is an aliasing non-promotable access.</span></div>
<div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160;  <a class="code" href="LICM_8cpp.html#a8046d863469d9c33287fa4a673d00571">foreachMemoryAccess</a>(MSSA, L, [&amp;](<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160;    <span class="keywordflow">if</span> (AttemptingPromotion.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#af74676a3c7447be34bd2c1da76ec0c48">contains</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02303"></a><span class="lineno"> 2303</span>&#160; </div>
<div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160;    <a class="code" href="namespacellvm.html#ac9a7de5a04920954ac964059cfc428ad">llvm::erase_if</a>(Sets, [&amp;](<a class="code" href="classllvm_1_1PointerIntPair.html">PointerIntPair&lt;const AliasSet *, 1, bool&gt;</a> &amp;Pair) {</div>
<div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160;      ModRefInfo MR = Pair.getPointer()-&gt;aliasesUnknownInst(I, BatchAA);</div>
<div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160;      <span class="comment">// Cannot promote if there are writes outside the set.</span></div>
<div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160;      if (isModSet(MR))</div>
<div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160;        return true;</div>
<div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160;      if (isRefSet(MR)) {</div>
<div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160;        <span class="comment">// Remember reads outside the set.</span></div>
<div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160;        Pair.setInt(true);</div>
<div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;        <span class="comment">// If this is a mod-only set and there are reads outside the set,</span></div>
<div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;        <span class="comment">// we will not be able to promote, so bail out early.</span></div>
<div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160;        return !Pair.getPointer()-&gt;isRef();</div>
<div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160;      }</div>
<div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160;    });</div>
<div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160;  });</div>
<div class="line"><a name="l02319"></a><span class="lineno"> 2319</span>&#160; </div>
<div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;std::pair&lt;SmallSetVector&lt;Value *, 8&gt;</a>, <span class="keywordtype">bool</span>&gt;, 0&gt; <a class="code" href="namespacellvm_1_1ms__demangle.html#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a>;</div>
<div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> [Set, HasReadsOutsideSet] : Sets) {</div>
<div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160;    <a class="code" href="classllvm_1_1SmallSetVector.html">SmallSetVector&lt;Value *, 8&gt;</a> PointerMustAliases;</div>
<div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;ASI : *Set)</div>
<div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160;      PointerMustAliases.<a class="code" href="classllvm_1_1SetVector.html#a72d928b7fc2c5f2d56c6ac0265fd9c6e">insert</a>(ASI.getValue());</div>
<div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160;    <a class="code" href="namespacellvm_1_1ms__demangle.html#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a>.emplace_back(<a class="code" href="lib_2Target_2ARM_2README_8txt.html#ad3a99906764c35b2694ae90fa57744a5">std::move</a>(PointerMustAliases), HasReadsOutsideSet);</div>
<div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160;  }</div>
<div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160; </div>
<div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1ms__demangle.html#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a>;</div>
<div class="line"><a name="l02329"></a><span class="lineno"> 2329</span>&#160;}</div>
<div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160; </div>
<div class="line"><a name="l02331"></a><span class="lineno"><a class="line" href="LICM_8cpp.html#a0a473c402b8ddf9660f82fa84ba38b59"> 2331</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="LICM_8cpp.html#a0a473c402b8ddf9660f82fa84ba38b59">pointerInvalidatedByLoop</a>(<a class="code" href="classllvm_1_1MemorySSA.html">MemorySSA</a> *MSSA, <a class="code" href="classllvm_1_1MemoryUse.html">MemoryUse</a> *MU,</div>
<div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160;                                     <a class="code" href="classllvm_1_1Loop.html">Loop</a> *CurLoop, <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>,</div>
<div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160;                                     <a class="code" href="classllvm_1_1SinkAndHoistLICMFlags.html">SinkAndHoistLICMFlags</a> &amp;Flags) {</div>
<div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160;  <span class="comment">// For hoisting, use the walker to determine safety</span></div>
<div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160;  <span class="keywordflow">if</span> (!Flags.getIsSink()) {</div>
<div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160;    <a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *<a class="code" href="namespacellvm_1_1Sched.html#ac1547cccaf660851fcd6863d1e60309eac13545a6345c7d5b3c9cc8932ad3b0e9">Source</a>;</div>
<div class="line"><a name="l02337"></a><span class="lineno"> 2337</span>&#160;    <span class="comment">// See declaration of SetLicmMssaOptCap for usage details.</span></div>
<div class="line"><a name="l02338"></a><span class="lineno"> 2338</span>&#160;    <span class="keywordflow">if</span> (Flags.tooManyClobberingCalls())</div>
<div class="line"><a name="l02339"></a><span class="lineno"> 2339</span>&#160;      <a class="code" href="namespacellvm_1_1Sched.html#ac1547cccaf660851fcd6863d1e60309eac13545a6345c7d5b3c9cc8932ad3b0e9">Source</a> = MU-&gt;<a class="code" href="classllvm_1_1MemoryUseOrDef.html#abc4e1b6cc483cfd57ca75c4ab92bd360">getDefiningAccess</a>();</div>
<div class="line"><a name="l02340"></a><span class="lineno"> 2340</span>&#160;    <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02341"></a><span class="lineno"> 2341</span>&#160;      <a class="code" href="namespacellvm_1_1Sched.html#ac1547cccaf660851fcd6863d1e60309eac13545a6345c7d5b3c9cc8932ad3b0e9">Source</a> = MSSA-&gt;<a class="code" href="classllvm_1_1MemorySSA.html#a2ef6f9107316d963f20b9003b7668c4e">getSkipSelfWalker</a>()-&gt;<a class="code" href="classllvm_1_1MemorySSAWalker.html#a95d0e423957d029a78e5868f539e9cce">getClobberingMemoryAccess</a>(MU);</div>
<div class="line"><a name="l02342"></a><span class="lineno"> 2342</span>&#160;      Flags.incrementClobberingCalls();</div>
<div class="line"><a name="l02343"></a><span class="lineno"> 2343</span>&#160;    }</div>
<div class="line"><a name="l02344"></a><span class="lineno"> 2344</span>&#160;    <span class="keywordflow">return</span> !MSSA-&gt;<a class="code" href="classllvm_1_1MemorySSA.html#ae3b89ffde42778289bcbd8a187199420">isLiveOnEntryDef</a>(<a class="code" href="namespacellvm_1_1Sched.html#ac1547cccaf660851fcd6863d1e60309eac13545a6345c7d5b3c9cc8932ad3b0e9">Source</a>) &amp;&amp;</div>
<div class="line"><a name="l02345"></a><span class="lineno"> 2345</span>&#160;           CurLoop-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a04337b572d34ea413c35dbac5d75530b">contains</a>(<a class="code" href="namespacellvm_1_1Sched.html#ac1547cccaf660851fcd6863d1e60309eac13545a6345c7d5b3c9cc8932ad3b0e9">Source</a>-&gt;getBlock());</div>
<div class="line"><a name="l02346"></a><span class="lineno"> 2346</span>&#160;  }</div>
<div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>&#160; </div>
<div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160;  <span class="comment">// For sinking, we&#39;d need to check all Defs below this use. The getClobbering</span></div>
<div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160;  <span class="comment">// call will look on the backedge of the loop, but will check aliasing with</span></div>
<div class="line"><a name="l02350"></a><span class="lineno"> 2350</span>&#160;  <span class="comment">// the instructions on the previous iteration.</span></div>
<div class="line"><a name="l02351"></a><span class="lineno"> 2351</span>&#160;  <span class="comment">// For example:</span></div>
<div class="line"><a name="l02352"></a><span class="lineno"> 2352</span>&#160;  <span class="comment">// for (i ... )</span></div>
<div class="line"><a name="l02353"></a><span class="lineno"> 2353</span>&#160;  <span class="comment">//   load a[i] ( Use (LoE)</span></div>
<div class="line"><a name="l02354"></a><span class="lineno"> 2354</span>&#160;  <span class="comment">//   store a[i] ( 1 = Def (2), with 2 = Phi for the loop.</span></div>
<div class="line"><a name="l02355"></a><span class="lineno"> 2355</span>&#160;  <span class="comment">//   i++;</span></div>
<div class="line"><a name="l02356"></a><span class="lineno"> 2356</span>&#160;  <span class="comment">// The load sees no clobbering inside the loop, as the backedge alias check</span></div>
<div class="line"><a name="l02357"></a><span class="lineno"> 2357</span>&#160;  <span class="comment">// does phi translation, and will check aliasing against store a[i-1].</span></div>
<div class="line"><a name="l02358"></a><span class="lineno"> 2358</span>&#160;  <span class="comment">// However sinking the load outside the loop, below the store is incorrect.</span></div>
<div class="line"><a name="l02359"></a><span class="lineno"> 2359</span>&#160; </div>
<div class="line"><a name="l02360"></a><span class="lineno"> 2360</span>&#160;  <span class="comment">// For now, only sink if there are no Defs in the loop, and the existing ones</span></div>
<div class="line"><a name="l02361"></a><span class="lineno"> 2361</span>&#160;  <span class="comment">// precede the use and are in the same block.</span></div>
<div class="line"><a name="l02362"></a><span class="lineno"> 2362</span>&#160;  <span class="comment">// FIXME: Increase precision: Safe to sink if Use post dominates the Def;</span></div>
<div class="line"><a name="l02363"></a><span class="lineno"> 2363</span>&#160;  <span class="comment">// needs PostDominatorTreeAnalysis.</span></div>
<div class="line"><a name="l02364"></a><span class="lineno"> 2364</span>&#160;  <span class="comment">// FIXME: More precise: no Defs that alias this Use.</span></div>
<div class="line"><a name="l02365"></a><span class="lineno"> 2365</span>&#160;  <span class="keywordflow">if</span> (Flags.tooManyMemoryAccesses())</div>
<div class="line"><a name="l02366"></a><span class="lineno"> 2366</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02367"></a><span class="lineno"> 2367</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> : CurLoop-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a5cc113cb783ab6e5ca7b69241431c19c">getBlocks</a>())</div>
<div class="line"><a name="l02368"></a><span class="lineno"> 2368</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="LICM_8cpp.html#aed7e046ac6f7dd5ff0edb6e7b7a30e2e">pointerInvalidatedByBlock</a>(*<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, *MSSA, *MU))</div>
<div class="line"><a name="l02369"></a><span class="lineno"> 2369</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02370"></a><span class="lineno"> 2370</span>&#160;  <span class="comment">// When sinking, the source block may not be part of the loop so check it.</span></div>
<div class="line"><a name="l02371"></a><span class="lineno"> 2371</span>&#160;  <span class="keywordflow">if</span> (!CurLoop-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a04337b572d34ea413c35dbac5d75530b">contains</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l02372"></a><span class="lineno"> 2372</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="LICM_8cpp.html#aed7e046ac6f7dd5ff0edb6e7b7a30e2e">pointerInvalidatedByBlock</a>(*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getParent(), *MSSA, *MU);</div>
<div class="line"><a name="l02373"></a><span class="lineno"> 2373</span>&#160; </div>
<div class="line"><a name="l02374"></a><span class="lineno"> 2374</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02375"></a><span class="lineno"> 2375</span>&#160;}</div>
<div class="line"><a name="l02376"></a><span class="lineno"> 2376</span>&#160; </div>
<div class="line"><a name="l02377"></a><span class="lineno"><a class="line" href="LICM_8cpp.html#aed7e046ac6f7dd5ff0edb6e7b7a30e2e"> 2377</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="LICM_8cpp.html#aed7e046ac6f7dd5ff0edb6e7b7a30e2e">pointerInvalidatedByBlock</a>(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> &amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, <a class="code" href="classllvm_1_1MemorySSA.html">MemorySSA</a> &amp;MSSA, <a class="code" href="classllvm_1_1MemoryUse.html">MemoryUse</a> &amp;MU) {</div>
<div class="line"><a name="l02378"></a><span class="lineno"> 2378</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">const</span> <span class="keyword">auto</span> *Accesses = MSSA.<a class="code" href="classllvm_1_1MemorySSA.html#a65b7c715bf28eb17cfd012dd9bc3ad4b">getBlockDefs</a>(&amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>))</div>
<div class="line"><a name="l02379"></a><span class="lineno"> 2379</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;MA : *Accesses)</div>
<div class="line"><a name="l02380"></a><span class="lineno"> 2380</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">const</span> <span class="keyword">auto</span> *MD = dyn_cast&lt;MemoryDef&gt;(&amp;MA))</div>
<div class="line"><a name="l02381"></a><span class="lineno"> 2381</span>&#160;        <span class="keywordflow">if</span> (MU.<a class="code" href="classllvm_1_1MemoryAccess.html#aa468ad3fa68bdf6703c391deaec97706">getBlock</a>() != MD-&gt;getBlock() || !MSSA.<a class="code" href="classllvm_1_1MemorySSA.html#ade88aedcbd2b55711000cf3e36c0fc91">locallyDominates</a>(MD, &amp;MU))</div>
<div class="line"><a name="l02382"></a><span class="lineno"> 2382</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02383"></a><span class="lineno"> 2383</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02384"></a><span class="lineno"> 2384</span>&#160;}</div>
<div class="line"><a name="l02385"></a><span class="lineno"> 2385</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02386"></a><span class="lineno"> 2386</span>&#160;<span class="comment">/// Little predicate that returns true if the specified basic block is in</span></div>
<div class="line"><a name="l02387"></a><span class="lineno"> 2387</span>&#160;<span class="comment">/// a subloop of the current one, not the current one itself.</span></div>
<div class="line"><a name="l02388"></a><span class="lineno"> 2388</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l02389"></a><span class="lineno"><a class="line" href="LICM_8cpp.html#aabae34d2dbed5dde1865f19ccbe4cb81"> 2389</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="LICM_8cpp.html#aabae34d2dbed5dde1865f19ccbe4cb81">inSubLoop</a>(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, <a class="code" href="classllvm_1_1Loop.html">Loop</a> *CurLoop, <a class="code" href="classllvm_1_1LoopInfo.html">LoopInfo</a> *LI) {</div>
<div class="line"><a name="l02390"></a><span class="lineno"> 2390</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(CurLoop-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a04337b572d34ea413c35dbac5d75530b">contains</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) &amp;&amp; <span class="stringliteral">&quot;Only valid if BB is IN the loop&quot;</span>);</div>
<div class="line"><a name="l02391"></a><span class="lineno"> 2391</span>&#160;  <span class="keywordflow">return</span> LI-&gt;<a class="code" href="classllvm_1_1LoopInfoBase.html#a7a7c8e0e4f836c13c015b62e18f386bd">getLoopFor</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) != CurLoop;</div>
<div class="line"><a name="l02392"></a><span class="lineno"> 2392</span>&#160;}</div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="alib_2Target_2README_8txt_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">i</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2README_8txt_source.html#l00029">README.txt:29</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstructionCost_html"><div class="ttname"><a href="classllvm_1_1InstructionCost.html">llvm::InstructionCost</a></div><div class="ttdef"><b>Definition:</b> <a href="InstructionCost_8h_source.html#l00029">InstructionCost.h:29</a></div></div>
<div class="ttc" id="aclassllvm_1_1PreservedAnalyses_html"><div class="ttname"><a href="classllvm_1_1PreservedAnalyses.html">llvm::PreservedAnalyses</a></div><div class="ttdoc">A set of analyses that are preserved following a run of a transformation pass.</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00152">PassManager.h:152</a></div></div>
<div class="ttc" id="aclassllvm_1_1BatchAAResults_html"><div class="ttname"><a href="classllvm_1_1BatchAAResults.html">llvm::BatchAAResults</a></div><div class="ttdoc">This class is a wrapper over an AAResults, and it is intended to be used only when there are no IR ch...</div><div class="ttdef"><b>Definition:</b> <a href="AliasAnalysis_8h_source.html#l00612">AliasAnalysis.h:612</a></div></div>
<div class="ttc" id="aAssumptionCache_8h_html"><div class="ttname"><a href="AssumptionCache_8h.html">AssumptionCache.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopSafetyInfo_html_ade3159656909189106a047b76935827b"><div class="ttname"><a href="classllvm_1_1LoopSafetyInfo.html#ade3159656909189106a047b76935827b">llvm::LoopSafetyInfo::isGuaranteedToExecute</a></div><div class="ttdeci">virtual bool isGuaranteedToExecute(const Instruction &amp;Inst, const DominatorTree *DT, const Loop *CurLoop) const =0</div><div class="ttdoc">Returns true if the instruction in a loop is guaranteed to execute at least once (under the assumptio...</div></div>
<div class="ttc" id="aclassllvm_1_1OptimizationRemarkMissed_html"><div class="ttname"><a href="classllvm_1_1OptimizationRemarkMissed.html">llvm::OptimizationRemarkMissed</a></div><div class="ttdoc">Diagnostic information for missed-optimization remarks.</div><div class="ttdef"><b>Definition:</b> <a href="DiagnosticInfo_8h_source.html#l00734">DiagnosticInfo.h:734</a></div></div>
<div class="ttc" id="aclassllvm_1_1Loop_html_a6cb6a58fb0ded82b4c7755fc4c27c86d"><div class="ttname"><a href="classllvm_1_1Loop.html#a6cb6a58fb0ded82b4c7755fc4c27c86d">llvm::Loop::isLoopInvariant</a></div><div class="ttdeci">bool isLoopInvariant(const Value *V) const</div><div class="ttdoc">Return true if the specified value is loop invariant.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8cpp_source.html#l00060">LoopInfo.cpp:60</a></div></div>
<div class="ttc" id="anamespacellvm_html"><div class="ttname"><a href="namespacellvm.html">llvm</a></div><div class="ttdoc">This is an optimization pass for GlobalISel generic memory operations.</div><div class="ttdef"><b>Definition:</b> <a href="AddressRanges_8h_source.html#l00018">AddressRanges.h:18</a></div></div>
<div class="ttc" id="aLICM_8cpp_html_a3a3a3183a327e1186dbe900032390ec6"><div class="ttname"><a href="LICM_8cpp.html#a3a3a3183a327e1186dbe900032390ec6">hoist</a></div><div class="ttdeci">static void hoist(Instruction &amp;I, const DominatorTree *DT, const Loop *CurLoop, BasicBlock *Dest, ICFLoopSafetyInfo *SafetyInfo, MemorySSAUpdater &amp;MSSAU, ScalarEvolution *SE, OptimizationRemarkEmitter *ORE)</div><div class="ttdoc">When an instruction is found to only use loop invariant operands that is safe to hoist,...</div><div class="ttdef"><b>Definition:</b> <a href="LICM_8cpp_source.html#l01708">LICM.cpp:1708</a></div></div>
<div class="ttc" id="aclassllvm_1_1MemorySSA_html_a88b10d37f671e58cf138ac84a8257c17"><div class="ttname"><a href="classllvm_1_1MemorySSA.html#a88b10d37f671e58cf138ac84a8257c17">llvm::MemorySSA::verifyMemorySSA</a></div><div class="ttdeci">void verifyMemorySSA(VerificationLevel=VerificationLevel::Fast) const</div><div class="ttdoc">Verify that MemorySSA is self consistent (IE definitions dominate all uses, uses appear in the right ...</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8cpp_source.html#l01863">MemorySSA.cpp:1863</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfo_html_ac77dbedcfd916a5c9b58e753b2678a98"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html#ac77dbedcfd916a5c9b58e753b2678a98">llvm::TargetTransformInfo::getInstructionCost</a></div><div class="ttdeci">InstructionCost getInstructionCost(const User *U, ArrayRef&lt; const Value * &gt; Operands, TargetCostKind CostKind) const</div><div class="ttdoc">Estimate the cost of a given IR user when lowered.</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8cpp_source.html#l00230">TargetTransformInfo.cpp:230</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a4ba3a5be6c0e9b9e8a525de055836733"><div class="ttname"><a href="classllvm_1_1Instruction.html#a4ba3a5be6c0e9b9e8a525de055836733">llvm::Instruction::getModule</a></div><div class="ttdeci">const Module * getModule() const</div><div class="ttdoc">Return the module owning the function this instruction belongs to or nullptr it the function does not...</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8cpp_source.html#l00070">Instruction.cpp:70</a></div></div>
<div class="ttc" id="astructllvm_1_1LoopStandardAnalysisResults_html_a902b4712394a3b3450893634b3302893"><div class="ttname"><a href="structllvm_1_1LoopStandardAnalysisResults.html#a902b4712394a3b3450893634b3302893">llvm::LoopStandardAnalysisResults::AC</a></div><div class="ttdeci">AssumptionCache &amp; AC</div><div class="ttdef"><b>Definition:</b> <a href="LoopAnalysisManager_8h_source.html#l00053">LoopAnalysisManager.h:53</a></div></div>
<div class="ttc" id="anamespacellvm_html_a2d13a2fc9f1e7b66fb65014013f41614"><div class="ttname"><a href="namespacellvm.html#a2d13a2fc9f1e7b66fb65014013f41614">llvm::initializeLegacyLICMPassPass</a></div><div class="ttdeci">void initializeLegacyLICMPassPass(PassRegistry &amp;)</div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSetImpl_html_a11045c7973ab24a8d6315b61fa337d4e"><div class="ttname"><a href="classllvm_1_1SmallPtrSetImpl.html#a11045c7973ab24a8d6315b61fa337d4e">llvm::SmallPtrSetImpl::erase</a></div><div class="ttdeci">bool erase(PtrType Ptr)</div><div class="ttdoc">erase - If the set contains the specified pointer, remove it and return true, otherwise return false.</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00379">SmallPtrSet.h:379</a></div></div>
<div class="ttc" id="aclassllvm_1_1PHINode_html_a1f0ff79b64a40d383b891f1baba89c6b"><div class="ttname"><a href="classllvm_1_1PHINode.html#a1f0ff79b64a40d383b891f1baba89c6b">llvm::PHINode::incoming_values</a></div><div class="ttdeci">op_range incoming_values()</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02784">Instructions.h:2784</a></div></div>
<div class="ttc" id="aclassllvm_1_1DataLayout_html"><div class="ttname"><a href="classllvm_1_1DataLayout.html">llvm::DataLayout</a></div><div class="ttdoc">A parsed version of the target data layout string in and methods for querying it.</div><div class="ttdef"><b>Definition:</b> <a href="DataLayout_8h_source.html#l00110">DataLayout.h:110</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AArch64PACKey_html_abf4394f452bde3f544999858d71e4b46"><div class="ttname"><a href="namespacellvm_1_1AArch64PACKey.html#abf4394f452bde3f544999858d71e4b46">llvm::AArch64PACKey::ID</a></div><div class="ttdeci">ID</div><div class="ttdef"><b>Definition:</b> <a href="AArch64BaseInfo_8h_source.html#l00790">AArch64BaseInfo.h:790</a></div></div>
<div class="ttc" id="anamespacellvm_html_a016a85f7487f995fe80141e102a7a5ae"><div class="ttname"><a href="namespacellvm.html#a016a85f7487f995fe80141e102a7a5ae">llvm::ReplaceInstWithInst</a></div><div class="ttdeci">void ReplaceInstWithInst(BasicBlock *BB, BasicBlock::iterator &amp;BI, Instruction *I)</div><div class="ttdoc">Replace the instruction specified by BI with the instruction specified by I.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlockUtils_8cpp_source.html#l00576">BasicBlockUtils.cpp:576</a></div></div>
<div class="ttc" id="aMetadata_8h_html"><div class="ttname"><a href="Metadata_8h.html">Metadata.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a98c0a84a5dfa8bce341c829709f171e5"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a98c0a84a5dfa8bce341c829709f171e5">llvm::BasicBlock::iterator</a></div><div class="ttdeci">InstListType::iterator iterator</div><div class="ttdoc">Instruction iterators...</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00087">BasicBlock.h:87</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a38bee869ad41aebfef3de2641b12004c"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a38bee869ad41aebfef3de2641b12004c">llvm::BasicBlock::getParent</a></div><div class="ttdeci">const Function * getParent() const</div><div class="ttdoc">Return the enclosing method, or null if none.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00112">BasicBlock.h:112</a></div></div>
<div class="ttc" id="aIntrinsicInst_8h_html"><div class="ttname"><a href="IntrinsicInst_8h.html">IntrinsicInst.h</a></div></div>
<div class="ttc" id="aDebugInfoMetadata_8h_html"><div class="ttname"><a href="DebugInfoMetadata_8h.html">DebugInfoMetadata.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoadAndStorePromoter_html"><div class="ttname"><a href="classllvm_1_1LoadAndStorePromoter.html">llvm::LoadAndStorePromoter</a></div><div class="ttdoc">Helper class for promoting a collection of loads and stores into SSA Form using the SSAUpdater.</div><div class="ttdef"><b>Definition:</b> <a href="SSAUpdater_8h_source.html#l00147">SSAUpdater.h:147</a></div></div>
<div class="ttc" id="aTransforms_2Scalar_8h_html"><div class="ttname"><a href="Transforms_2Scalar_8h.html">Scalar.h</a></div></div>
<div class="ttc" id="aSetOperations_8h_html"><div class="ttname"><a href="SetOperations_8h.html">SetOperations.h</a></div></div>
<div class="ttc" id="astructllvm_1_1PassInfoMixin_html"><div class="ttname"><a href="structllvm_1_1PassInfoMixin.html">llvm::PassInfoMixin&lt; LICMPass &gt;</a></div></div>
<div class="ttc" id="anamespacellvm_html_a069c4ae2290101bde0f8d6a5074dc72b"><div class="ttname"><a href="namespacellvm.html#a069c4ae2290101bde0f8d6a5074dc72b">llvm::succ_end</a></div><div class="ttdeci">Interval::succ_iterator succ_end(Interval *I)</div><div class="ttdef"><b>Definition:</b> <a href="Interval_8h_source.html#l00102">Interval.h:102</a></div></div>
<div class="ttc" id="aLoads_8h_html"><div class="ttname"><a href="Loads_8h.html">Loads.h</a></div></div>
<div class="ttc" id="aMemorySSAUpdater_8h_html"><div class="ttname"><a href="MemorySSAUpdater_8h.html">MemorySSAUpdater.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html"><div class="ttname"><a href="classllvm_1_1Function.html">llvm::Function</a></div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00059">Function.h:59</a></div></div>
<div class="ttc" id="aclassllvm_1_1Loop_html"><div class="ttname"><a href="classllvm_1_1Loop.html">llvm::Loop</a></div><div class="ttdoc">Represents a single loop in the control flow graph.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00547">LoopInfo.h:547</a></div></div>
<div class="ttc" id="aclassllvm_1_1PredIteratorCache_html"><div class="ttname"><a href="classllvm_1_1PredIteratorCache.html">llvm::PredIteratorCache</a></div><div class="ttdoc">PredIteratorCache - This class is an extremely trivial cache for predecessor iterator queries.</div><div class="ttdef"><b>Definition:</b> <a href="PredIteratorCache_8h_source.html#l00027">PredIteratorCache.h:27</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopBase_html_a04337b572d34ea413c35dbac5d75530b"><div class="ttname"><a href="classllvm_1_1LoopBase.html#a04337b572d34ea413c35dbac5d75530b">llvm::LoopBase::contains</a></div><div class="ttdeci">bool contains(const LoopT *L) const</div><div class="ttdoc">Return true if the specified loop is contained within in this loop.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00139">LoopInfo.h:139</a></div></div>
<div class="ttc" id="aclassllvm_1_1IntrinsicInst_html_a7ff64b3625b6f9020556ed05a5f72af4"><div class="ttname"><a href="classllvm_1_1IntrinsicInst.html#a7ff64b3625b6f9020556ed05a5f72af4">llvm::IntrinsicInst::getIntrinsicID</a></div><div class="ttdeci">Intrinsic::ID getIntrinsicID() const</div><div class="ttdoc">Return the intrinsic ID of this intrinsic.</div><div class="ttdef"><b>Definition:</b> <a href="IntrinsicInst_8h_source.html#l00054">IntrinsicInst.h:54</a></div></div>
<div class="ttc" id="aclassllvm_1_1details_1_1FixedOrScalableQuantity_html_a9188f84e1dd67530330dcab9cae787d7"><div class="ttname"><a href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#a9188f84e1dd67530330dcab9cae787d7">llvm::details::FixedOrScalableQuantity::isScalable</a></div><div class="ttdeci">constexpr bool isScalable() const</div><div class="ttdoc">Returns whether the quantity is scaled by a runtime quantity (vscale).</div><div class="ttdef"><b>Definition:</b> <a href="TypeSize_8h_source.html#l00166">TypeSize.h:166</a></div></div>
<div class="ttc" id="aclassllvm_1_1PriorityWorklist_html_af74058cc2f8163b1d7128b467432a09b"><div class="ttname"><a href="classllvm_1_1PriorityWorklist.html#af74058cc2f8163b1d7128b467432a09b">llvm::PriorityWorklist&lt; T, SmallVector&lt; T, N &gt;, SmallDenseMap&lt; T, ptrdiff_t &gt; &gt;::insert</a></div><div class="ttdeci">bool insert(const T &amp;X)</div><div class="ttdoc">Insert a new element into the PriorityWorklist.</div><div class="ttdef"><b>Definition:</b> <a href="PriorityWorklist_8h_source.html#l00090">PriorityWorklist.h:90</a></div></div>
<div class="ttc" id="anamespacellvm_html_ad9c3fae5a25cf9c407f7b07a86067ab5"><div class="ttname"><a href="namespacellvm.html#ad9c3fae5a25cf9c407f7b07a86067ab5">llvm::SetLicmMssaNoAccForPromotionCap</a></div><div class="ttdeci">cl::opt&lt; unsigned &gt; SetLicmMssaNoAccForPromotionCap</div></div>
<div class="ttc" id="aclassllvm_1_1SmallVector_html"><div class="ttname"><a href="classllvm_1_1SmallVector.html">llvm::SmallVector</a></div><div class="ttdoc">This is a 'vector' (really, a variable-sized array), optimized for the case when the array is small.</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l01199">SmallVector.h:1199</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopInfoBase_html_a17a8f7aba5cca5c7f9faa779a3c4bc37"><div class="ttname"><a href="classllvm_1_1LoopInfoBase.html#a17a8f7aba5cca5c7f9faa779a3c4bc37">llvm::LoopInfoBase::verify</a></div><div class="ttdeci">void verify(const DominatorTreeBase&lt; BlockT, false &gt; &amp;DomTree) const</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfoImpl_8h_source.html#l00699">LoopInfoImpl.h:699</a></div></div>
<div class="ttc" id="aStatistic_8h_html"><div class="ttname"><a href="Statistic_8h.html">Statistic.h</a></div></div>
<div class="ttc" id="aCaptureTracking_8h_html"><div class="ttname"><a href="CaptureTracking_8h.html">CaptureTracking.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1DataLayout_html_acfcd22eb38dbfe1acbf138754297437a"><div class="ttname"><a href="classllvm_1_1DataLayout.html#acfcd22eb38dbfe1acbf138754297437a">llvm::DataLayout::getTypeStoreSize</a></div><div class="ttdeci">TypeSize getTypeStoreSize(Type *Ty) const</div><div class="ttdoc">Returns the maximum number of bytes that may be overwritten by storing the specified type.</div><div class="ttdef"><b>Definition:</b> <a href="DataLayout_8h_source.html#l00468">DataLayout.h:468</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfo_html"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html">llvm::TargetTransformInfo</a></div><div class="ttdoc">This pass provides access to the codegen interfaces that are needed for IR-level transformations.</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l00196">TargetTransformInfo.h:196</a></div></div>
<div class="ttc" id="aLazyBlockFrequencyInfo_8h_html"><div class="ttname"><a href="LazyBlockFrequencyInfo_8h.html">LazyBlockFrequencyInfo.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a089e003bb688e55b9a91ed4e7fed3678"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a089e003bb688e55b9a91ed4e7fed3678">llvm::BasicBlock::replaceSuccessorsPhiUsesWith</a></div><div class="ttdeci">void replaceSuccessorsPhiUsesWith(BasicBlock *Old, BasicBlock *New)</div><div class="ttdoc">Update all phi nodes in this basic block's successors to refer to basic block New instead of basic bl...</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00498">BasicBlock.cpp:498</a></div></div>
<div class="ttc" id="anamespacellvm_html_ac9a7de5a04920954ac964059cfc428ad"><div class="ttname"><a href="namespacellvm.html#ac9a7de5a04920954ac964059cfc428ad">llvm::erase_if</a></div><div class="ttdeci">void erase_if(Container &amp;C, UnaryPredicate P)</div><div class="ttdoc">Provide a container algorithm similar to C++ Library Fundamentals v2's erase_if which is equivalent t...</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l01998">STLExtras.h:1998</a></div></div>
<div class="ttc" id="aLICM_8cpp_html_a831a5dec04e512d616fccb6e1f474e79"><div class="ttname"><a href="LICM_8cpp.html#a831a5dec04e512d616fccb6e1f474e79">isLoadInvariantInLoop</a></div><div class="ttdeci">static bool isLoadInvariantInLoop(LoadInst *LI, DominatorTree *DT, Loop *CurLoop)</div><div class="ttdef"><b>Definition:</b> <a href="LICM_8cpp_source.html#l01042">LICM.cpp:1042</a></div></div>
<div class="ttc" id="anamespacellvm_html_a728f79528ca8659e15d00c1e6818b316"><div class="ttname"><a href="namespacellvm.html#a728f79528ca8659e15d00c1e6818b316">llvm::isModSet</a></div><div class="ttdeci">bool isModSet(const ModRefInfo MRI)</div><div class="ttdef"><b>Definition:</b> <a href="ModRef_8h_source.html#l00048">ModRef.h:48</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallDenseMap_html"><div class="ttname"><a href="classllvm_1_1SmallDenseMap.html">llvm::SmallDenseMap</a></div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00880">DenseMap.h:880</a></div></div>
<div class="ttc" id="aclassllvm_1_1ScalarEvolution_html"><div class="ttname"><a href="classllvm_1_1ScalarEvolution.html">llvm::ScalarEvolution</a></div><div class="ttdoc">The main scalar evolution driver.</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8h_source.html#l00452">ScalarEvolution.h:452</a></div></div>
<div class="ttc" id="aclassllvm_1_1MemorySSA_html_a56004f54560e9950f6eb148cb5dfa0a3"><div class="ttname"><a href="classllvm_1_1MemorySSA.html#a56004f54560e9950f6eb148cb5dfa0a3">llvm::MemorySSA::dominates</a></div><div class="ttdeci">bool dominates(const MemoryAccess *A, const MemoryAccess *B) const</div><div class="ttdoc">Given two memory accesses in potentially different blocks, determine whether MemoryAccess A dominates...</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8cpp_source.html#l02116">MemorySSA.cpp:2116</a></div></div>
<div class="ttc" id="aLICM_8cpp_html_ab0cfc793d55940eac67854827dd365e9"><div class="ttname"><a href="LICM_8cpp.html#ab0cfc793d55940eac67854827dd365e9">eraseInstruction</a></div><div class="ttdeci">static void eraseInstruction(Instruction &amp;I, ICFLoopSafetyInfo &amp;SafetyInfo, MemorySSAUpdater &amp;MSSAU)</div><div class="ttdef"><b>Definition:</b> <a href="LICM_8cpp_source.html#l01475">LICM.cpp:1475</a></div></div>
<div class="ttc" id="aValueTracking_8h_html"><div class="ttname"><a href="ValueTracking_8h.html">ValueTracking.h</a></div></div>
<div class="ttc" id="aTransforms_2Utils_2Local_8h_html"><div class="ttname"><a href="Transforms_2Utils_2Local_8h.html">Local.h</a></div></div>
<div class="ttc" id="aOptimizationRemarkEmitter_8h_html"><div class="ttname"><a href="OptimizationRemarkEmitter_8h.html">OptimizationRemarkEmitter.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1DominatorTree_html"><div class="ttname"><a href="classllvm_1_1DominatorTree.html">llvm::DominatorTree</a></div><div class="ttdoc">Concrete subclass of DominatorTreeBase that is used to compute a normal dominator tree.</div><div class="ttdef"><b>Definition:</b> <a href="Dominators_8h_source.html#l00166">Dominators.h:166</a></div></div>
<div class="ttc" id="anamespacellvm_html_a92caae34bfacc63bda0f23d5d005a89e"><div class="ttname"><a href="namespacellvm.html#a92caae34bfacc63bda0f23d5d005a89e">llvm::getLoopAnalysisUsage</a></div><div class="ttdeci">void getLoopAnalysisUsage(AnalysisUsage &amp;AU)</div><div class="ttdoc">Helper to consistently add the set of standard passes to a loop pass's AnalysisUsage.</div><div class="ttdef"><b>Definition:</b> <a href="LoopUtils_8cpp_source.html#l00141">LoopUtils.cpp:141</a></div></div>
<div class="ttc" id="aclassllvm_1_1AliasSetTracker_html"><div class="ttname"><a href="classllvm_1_1AliasSetTracker.html">llvm::AliasSetTracker</a></div><div class="ttdef"><b>Definition:</b> <a href="AliasSetTracker_8h_source.html#l00306">AliasSetTracker.h:306</a></div></div>
<div class="ttc" id="anamespacellvm_1_1cl_html_a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6"><div class="ttname"><a href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">llvm::cl::Hidden</a></div><div class="ttdeci">@ Hidden</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00138">CommandLine.h:138</a></div></div>
<div class="ttc" id="anamespacellvm_html_a48b30f2688526d0f45900a47cd6b6654"><div class="ttname"><a href="namespacellvm.html#a48b30f2688526d0f45900a47cd6b6654">llvm::getLoadStoreType</a></div><div class="ttdeci">Type * getLoadStoreType(Value *I)</div><div class="ttdoc">A helper function that returns the type of a load or store instruction.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l05408">Instructions.h:5408</a></div></div>
<div class="ttc" id="astructllvm_1_1AAMDNodes_html"><div class="ttname"><a href="structllvm_1_1AAMDNodes.html">llvm::AAMDNodes</a></div><div class="ttdoc">A collection of metadata nodes that might be associated with a memory access used by the alias-analys...</div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8h_source.html#l00651">Metadata.h:651</a></div></div>
<div class="ttc" id="aclassllvm_1_1LazyBlockFrequencyInfoPass_html_a8969b22606511eb0e2b2e028a3c0f332"><div class="ttname"><a href="classllvm_1_1LazyBlockFrequencyInfoPass.html#a8969b22606511eb0e2b2e028a3c0f332">llvm::LazyBlockFrequencyInfoPass::getLazyBFIAnalysisUsage</a></div><div class="ttdeci">static void getLazyBFIAnalysisUsage(AnalysisUsage &amp;AU)</div><div class="ttdoc">Helper for client passes to set up the analysis usage on behalf of this pass.</div><div class="ttdef"><b>Definition:</b> <a href="LazyBlockFrequencyInfo_8cpp_source.html#l00062">LazyBlockFrequencyInfo.cpp:62</a></div></div>
<div class="ttc" id="aScalarEvolution_8h_html"><div class="ttname"><a href="ScalarEvolution_8h.html">ScalarEvolution.h</a></div></div>
<div class="ttc" id="aLICM_8cpp_html_af381f6f01f617f2195adc0ab06aee4fd"><div class="ttname"><a href="LICM_8cpp.html#af381f6f01f617f2195adc0ab06aee4fd">MaxNumUsesTraversed</a></div><div class="ttdeci">static cl::opt&lt; uint32_t &gt; MaxNumUsesTraversed(&quot;licm-max-num-uses-traversed&quot;, cl::Hidden, cl::init(8), cl::desc(&quot;Max num uses visited for identifying load &quot; &quot;invariance in loop using invariant start (default = 8)&quot;))</div></div>
<div class="ttc" id="aclassllvm_1_1Type_html"><div class="ttname"><a href="classllvm_1_1Type.html">llvm::Type</a></div><div class="ttdoc">The instances of the Type class are immutable: once they are created, they are never changed.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00045">Type.h:45</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopInfoWrapperPass_html"><div class="ttname"><a href="classllvm_1_1LoopInfoWrapperPass.html">llvm::LoopInfoWrapperPass</a></div><div class="ttdoc">The legacy pass manager's analysis pass to compute loop information.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l01293">LoopInfo.h:1293</a></div></div>
<div class="ttc" id="astructllvm_1_1LoopStandardAnalysisResults_html"><div class="ttname"><a href="structllvm_1_1LoopStandardAnalysisResults.html">llvm::LoopStandardAnalysisResults</a></div><div class="ttdoc">The adaptor from a function pass to a loop pass computes these analyses and makes them available to t...</div><div class="ttdef"><b>Definition:</b> <a href="LoopAnalysisManager_8h_source.html#l00051">LoopAnalysisManager.h:51</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a79c007dcf9fff57e1569e778d7885b5e"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a79c007dcf9fff57e1569e778d7885b5e">llvm::BasicBlock::getSingleSuccessor</a></div><div class="ttdeci">const BasicBlock * getSingleSuccessor() const</div><div class="ttdoc">Return the successor of this block if it has a single successor.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00314">BasicBlock.cpp:314</a></div></div>
<div class="ttc" id="aclassllvm_1_1StoreInst_html_a55195fa18cf783fe74de0cced1ca6eb3"><div class="ttname"><a href="classllvm_1_1StoreInst.html#a55195fa18cf783fe74de0cced1ca6eb3">llvm::StoreInst::setAlignment</a></div><div class="ttdeci">void setAlignment(Align Align)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00349">Instructions.h:349</a></div></div>
<div class="ttc" id="aPassBuilderBindings_8cpp_html_ad4d247df65c12507f447383be37d7ccb"><div class="ttname"><a href="PassBuilderBindings_8cpp.html#ad4d247df65c12507f447383be37d7ccb">PIC</a></div><div class="ttdeci">PassInstrumentationCallbacks PIC</div><div class="ttdef"><b>Definition:</b> <a href="PassBuilderBindings_8cpp_source.html#l00055">PassBuilderBindings.cpp:55</a></div></div>
<div class="ttc" id="aclassllvm_1_1DominatorTreeBase_html_a4344e66fb61ea313a85a9e054124ac55"><div class="ttname"><a href="classllvm_1_1DominatorTreeBase.html#a4344e66fb61ea313a85a9e054124ac55">llvm::DominatorTreeBase::getNode</a></div><div class="ttdeci">DomTreeNodeBase&lt; NodeT &gt; * getNode(const NodeT *BB) const</div><div class="ttdoc">getNode - return the (Post)DominatorTree node for the specified basic block.</div><div class="ttdef"><b>Definition:</b> <a href="GenericDomTree_8h_source.html#l00367">GenericDomTree.h:367</a></div></div>
<div class="ttc" id="anamespacellvm_html_aa61b7b49f32233419331f8132b39e77d"><div class="ttname"><a href="namespacellvm.html#aa61b7b49f32233419331f8132b39e77d">llvm::hasDisableLICMTransformsHint</a></div><div class="ttdeci">bool hasDisableLICMTransformsHint(const Loop *L)</div><div class="ttdoc">Look for the loop attribute that disables the LICM transformation heuristics.</div><div class="ttdef"><b>Definition:</b> <a href="LoopUtils_8cpp_source.html#l00348">LoopUtils.cpp:348</a></div></div>
<div class="ttc" id="anamespacellvm_html_a854abfc88bcd24e3878e2c9ab1f70fd3"><div class="ttname"><a href="namespacellvm.html#a854abfc88bcd24e3878e2c9ab1f70fd3">llvm::isModOrRefSet</a></div><div class="ttdeci">bool isModOrRefSet(const ModRefInfo MRI)</div><div class="ttdef"><b>Definition:</b> <a href="ModRef_8h_source.html#l00042">ModRef.h:42</a></div></div>
<div class="ttc" id="aLICM_8cpp_html_ad78e062f62e0d6e453941fb4ca843e4d"><div class="ttname"><a href="LICM_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">DEBUG_TYPE</a></div><div class="ttdeci">#define DEBUG_TYPE</div><div class="ttdef"><b>Definition:</b> <a href="LICM_8cpp_source.html#l00094">LICM.cpp:94</a></div></div>
<div class="ttc" id="aclassllvm_1_1TinyPtrVector_html_a3a26404d33061e8aaeab39c490181389"><div class="ttname"><a href="classllvm_1_1TinyPtrVector.html#a3a26404d33061e8aaeab39c490181389">llvm::TinyPtrVector::front</a></div><div class="ttdeci">EltTy front() const</div><div class="ttdef"><b>Definition:</b> <a href="TinyPtrVector_8h_source.html#l00229">TinyPtrVector.h:229</a></div></div>
<div class="ttc" id="aLICM_8cpp_html_ac7588f9346497ff9a8a966766c7c6bbc"><div class="ttname"><a href="LICM_8cpp.html#ac7588f9346497ff9a8a966766c7c6bbc">ControlFlowHoisting</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; ControlFlowHoisting(&quot;licm-control-flow-hoisting&quot;, cl::Hidden, cl::init(false), cl::desc(&quot;Enable control flow (and PHI) hoisting in LICM&quot;))</div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_a2e987c6af902aad6baa39bd5b7ef322c"><div class="ttname"><a href="classllvm_1_1Value.html#a2e987c6af902aad6baa39bd5b7ef322c">llvm::Value::hasOneUser</a></div><div class="ttdeci">bool hasOneUser() const</div><div class="ttdoc">Return true if there is exactly one user of this value.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00156">Value.cpp:156</a></div></div>
<div class="ttc" id="anamespacellvm_html_a30e47ae014eb35bea24e45097c2bd731"><div class="ttname"><a href="namespacellvm.html#a30e47ae014eb35bea24e45097c2bd731">llvm::formLCSSARecursively</a></div><div class="ttdeci">bool formLCSSARecursively(Loop &amp;L, const DominatorTree &amp;DT, const LoopInfo *LI, ScalarEvolution *SE)</div><div class="ttdoc">Put a loop nest into LCSSA form.</div><div class="ttdef"><b>Definition:</b> <a href="LCSSA_8cpp_source.html#l00410">LCSSA.cpp:410</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseMapBase_html_a53408c95a7bfb5443b43fb2134c3eb23"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#a53408c95a7bfb5443b43fb2134c3eb23">llvm::DenseMapBase&lt; DenseMap&lt; KeyT, ValueT, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;, KeyT, ValueT, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;::count</a></div><div class="ttdeci">size_type count(const_arg_type_t&lt; KeyT &gt; Val) const</div><div class="ttdoc">Return 1 if the specified key is in the map, 0 otherwise.</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00145">DenseMap.h:145</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSet_html"><div class="ttname"><a href="classllvm_1_1SmallPtrSet.html">llvm::SmallPtrSet</a></div><div class="ttdoc">SmallPtrSet - This class implements a set which is optimized for holding SmallSize or less elements.</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00450">SmallPtrSet.h:450</a></div></div>
<div class="ttc" id="anamespacellvm_1_1ore_html_a8f5533240c6722d987a2443cba42019d"><div class="ttname"><a href="namespacellvm_1_1ore.html#a8f5533240c6722d987a2443cba42019d">llvm::ore::NV</a></div><div class="ttdeci">DiagnosticInfoOptimizationBase::Argument NV</div><div class="ttdef"><b>Definition:</b> <a href="OptimizationRemarkEmitter_8h_source.html#l00136">OptimizationRemarkEmitter.h:136</a></div></div>
<div class="ttc" id="anamespacellvm_html_ab4d4bc901fedd8857f647dcc2c0d71de"><div class="ttname"><a href="namespacellvm.html#ab4d4bc901fedd8857f647dcc2c0d71de">llvm::max</a></div><div class="ttdeci">Expected&lt; ExpressionValue &gt; max(const ExpressionValue &amp;Lhs, const ExpressionValue &amp;Rhs)</div><div class="ttdef"><b>Definition:</b> <a href="FileCheck_8cpp_source.html#l00337">FileCheck.cpp:337</a></div></div>
<div class="ttc" id="anamespacellvm_html_ad30fb60072e2996200ea591628e33c5a"><div class="ttname"><a href="namespacellvm.html#ad30fb60072e2996200ea591628e33c5a">llvm::sinkRegion</a></div><div class="ttdeci">bool sinkRegion(DomTreeNode *, AAResults *, LoopInfo *, DominatorTree *, TargetLibraryInfo *, TargetTransformInfo *, Loop *CurLoop, MemorySSAUpdater &amp;, ICFLoopSafetyInfo *, SinkAndHoistLICMFlags &amp;, OptimizationRemarkEmitter *, Loop *OutermostLoop=nullptr)</div><div class="ttdoc">Walk the specified region of the CFG (defined by all blocks dominated by the specified block,...</div><div class="ttdef"><b>Definition:</b> <a href="LICM_8cpp_source.html#l00539">LICM.cpp:539</a></div></div>
<div class="ttc" id="aclassllvm_1_1SinkAndHoistLICMFlags_html_a5b17bcf5d3d17fb80bc652430ef0dc7d"><div class="ttname"><a href="classllvm_1_1SinkAndHoistLICMFlags.html#a5b17bcf5d3d17fb80bc652430ef0dc7d">llvm::SinkAndHoistLICMFlags::LicmMssaNoAccForPromotionCap</a></div><div class="ttdeci">unsigned LicmMssaNoAccForPromotionCap</div><div class="ttdef"><b>Definition:</b> <a href="LoopUtils_8h_source.html#l00134">LoopUtils.h:134</a></div></div>
<div class="ttc" id="aclassllvm_1_1DomTreeNodeBase_html_aa22cb3ff8c95bb05185acad8c569d4b6"><div class="ttname"><a href="classllvm_1_1DomTreeNodeBase.html#aa22cb3ff8c95bb05185acad8c569d4b6">llvm::DomTreeNodeBase::getIDom</a></div><div class="ttdeci">DomTreeNodeBase * getIDom() const</div><div class="ttdef"><b>Definition:</b> <a href="GenericDomTree_8h_source.html#l00090">GenericDomTree.h:90</a></div></div>
<div class="ttc" id="aclassllvm_1_1MemoryUse_html"><div class="ttname"><a href="classllvm_1_1MemoryUse.html">llvm::MemoryUse</a></div><div class="ttdoc">Represents read-only accesses to memory.</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8h_source.html#l00312">MemorySSA.h:312</a></div></div>
<div class="ttc" id="astructllvm_1_1LoopStandardAnalysisResults_html_aaa96df870a1b3d7ffc56bec3eb0b0cff"><div class="ttname"><a href="structllvm_1_1LoopStandardAnalysisResults.html#aaa96df870a1b3d7ffc56bec3eb0b0cff">llvm::LoopStandardAnalysisResults::DT</a></div><div class="ttdeci">DominatorTree &amp; DT</div><div class="ttdef"><b>Definition:</b> <a href="LoopAnalysisManager_8h_source.html#l00054">LoopAnalysisManager.h:54</a></div></div>
<div class="ttc" id="anamespacellvm_1_1Sched_html_ac1547cccaf660851fcd6863d1e60309ea258d0fc76498bc434cf57e73ea5adbfc"><div class="ttname"><a href="namespacellvm_1_1Sched.html#ac1547cccaf660851fcd6863d1e60309ea258d0fc76498bc434cf57e73ea5adbfc">llvm::Sched::Fast</a></div><div class="ttdeci">@ Fast</div><div class="ttdef"><b>Definition:</b> <a href="TargetLowering_8h_source.html#l00105">TargetLowering.h:105</a></div></div>
<div class="ttc" id="anamespacellvm_html_a158e2caed73e4b5d2ad70c1b2a0e0cc8"><div class="ttname"><a href="namespacellvm.html#a158e2caed73e4b5d2ad70c1b2a0e0cc8">llvm::canSinkOrHoistInst</a></div><div class="ttdeci">bool canSinkOrHoistInst(Instruction &amp;I, AAResults *AA, DominatorTree *DT, Loop *CurLoop, MemorySSAUpdater &amp;MSSAU, bool TargetExecutesOncePerLoop, SinkAndHoistLICMFlags &amp;LICMFlags, OptimizationRemarkEmitter *ORE=nullptr)</div><div class="ttdoc">Returns true if is legal to hoist or sink this instruction disregarding the possible introduction of ...</div><div class="ttdef"><b>Definition:</b> <a href="LICM_8cpp_source.html#l01150">LICM.cpp:1150</a></div></div>
<div class="ttc" id="anamespacellvm_1_1SPII_html_a1c7202c6054fef862bbed45957747cdfa5069619ca8fdce305534f3fe85091a0f"><div class="ttname"><a href="namespacellvm_1_1SPII.html#a1c7202c6054fef862bbed45957747cdfa5069619ca8fdce305534f3fe85091a0f">llvm::SPII::Load</a></div><div class="ttdeci">@ Load</div><div class="ttdef"><b>Definition:</b> <a href="SparcInstrInfo_8h_source.html#l00032">SparcInstrInfo.h:32</a></div></div>
<div class="ttc" id="aConstantFolding_8h_html"><div class="ttname"><a href="ConstantFolding_8h.html">ConstantFolding.h</a></div></div>
<div class="ttc" id="aMustExecute_8h_html"><div class="ttname"><a href="MustExecute_8h.html">MustExecute.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1MemorySSAUpdater_html_a8d0093ed3e69ff491615a2ced017b1af"><div class="ttname"><a href="classllvm_1_1MemorySSAUpdater.html#a8d0093ed3e69ff491615a2ced017b1af">llvm::MemorySSAUpdater::createMemoryAccessInBB</a></div><div class="ttdeci">MemoryAccess * createMemoryAccessInBB(Instruction *I, MemoryAccess *Definition, const BasicBlock *BB, MemorySSA::InsertionPlace Point)</div><div class="ttdoc">Create a MemoryAccess in MemorySSA at a specified point in a block, with a specified clobbering defin...</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSAUpdater_8cpp_source.html#l01429">MemorySSAUpdater.cpp:1429</a></div></div>
<div class="ttc" id="aDebug_8h_html_a08efc68d15935eb8889400a46c3749ba"><div class="ttname"><a href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a></div><div class="ttdeci">#define LLVM_DEBUG(X)</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8h_source.html#l00101">Debug.h:101</a></div></div>
<div class="ttc" id="aMD5_8cpp_html_a96d73bbd7af15cb1fc38c3f4a3bd82e9"><div class="ttname"><a href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a></div><div class="ttdeci">#define F(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00055">MD5.cpp:55</a></div></div>
<div class="ttc" id="anamespacellvm_html_ab8c575d798aa9fd14ce698726467d31b"><div class="ttname"><a href="namespacellvm.html#ab8c575d798aa9fd14ce698726467d31b">llvm::promoteLoopAccessesToScalars</a></div><div class="ttdeci">bool promoteLoopAccessesToScalars(const SmallSetVector&lt; Value *, 8 &gt; &amp;, SmallVectorImpl&lt; BasicBlock * &gt; &amp;, SmallVectorImpl&lt; Instruction * &gt; &amp;, SmallVectorImpl&lt; MemoryAccess * &gt; &amp;, PredIteratorCache &amp;, LoopInfo *, DominatorTree *, AssumptionCache *AC, const TargetLibraryInfo *, TargetTransformInfo *, Loop *, MemorySSAUpdater &amp;, ICFLoopSafetyInfo *, OptimizationRemarkEmitter *, bool AllowSpeculation, bool HasReadsOutsideSet)</div><div class="ttdoc">Try to promote memory values to scalars by sinking stores out of the loop and moving loads to before ...</div><div class="ttdef"><b>Definition:</b> <a href="LICM_8cpp_source.html#l01952">LICM.cpp:1952</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a9247a212ea89acc9573fa7e7f557eaba"><div class="ttname"><a href="classllvm_1_1Instruction.html#a9247a212ea89acc9573fa7e7f557eaba">llvm::Instruction::setMetadata</a></div><div class="ttdeci">void setMetadata(unsigned KindID, MDNode *Node)</div><div class="ttdoc">Set the metadata of the specified kind to the specified node.</div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8cpp_source.html#l01455">Metadata.cpp:1455</a></div></div>
<div class="ttc" id="aLICM_8cpp_html_a25f0b41add9507b8eafadfbc4a090d6c"><div class="ttname"><a href="LICM_8cpp.html#a25f0b41add9507b8eafadfbc4a090d6c">cloneInstructionInExitBlock</a></div><div class="ttdeci">static Instruction * cloneInstructionInExitBlock(Instruction &amp;I, BasicBlock &amp;ExitBlock, PHINode &amp;PN, const LoopInfo *LI, const LoopSafetyInfo *SafetyInfo, MemorySSAUpdater &amp;MSSAU)</div><div class="ttdef"><b>Definition:</b> <a href="LICM_8cpp_source.html#l01403">LICM.cpp:1403</a></div></div>
<div class="ttc" id="aARMLowOverheadLoops_8cpp_html_a0a0971d62011c35b29ff4a2325d45e93"><div class="ttname"><a href="ARMLowOverheadLoops_8cpp.html#a0a0971d62011c35b29ff4a2325d45e93">Uses</a></div><div class="ttdeci">SmallPtrSet&lt; MachineInstr *, 2 &gt; Uses</div><div class="ttdef"><b>Definition:</b> <a href="ARMLowOverheadLoops_8cpp_source.html#l00590">ARMLowOverheadLoops.cpp:590</a></div></div>
<div class="ttc" id="aclassllvm_1_1LazyBlockFrequencyInfoPass_html"><div class="ttname"><a href="classllvm_1_1LazyBlockFrequencyInfoPass.html">llvm::LazyBlockFrequencyInfoPass</a></div><div class="ttdoc">This is an alternative analysis pass to BlockFrequencyInfoWrapperPass.</div><div class="ttdef"><b>Definition:</b> <a href="LazyBlockFrequencyInfo_8h_source.html#l00098">LazyBlockFrequencyInfo.h:98</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html"><div class="ttname"><a href="classllvm_1_1BasicBlock.html">llvm::BasicBlock</a></div><div class="ttdoc">LLVM Basic Block Representation.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00055">BasicBlock.h:55</a></div></div>
<div class="ttc" id="aAliasAnalysis_8h_html"><div class="ttname"><a href="AliasAnalysis_8h.html">AliasAnalysis.h</a></div></div>
<div class="ttc" id="aLICM_8cpp_html_a9daa918c2c6be9aa9ca401f69cc75302"><div class="ttname"><a href="LICM_8cpp.html#a9daa918c2c6be9aa9ca401f69cc75302">licm</a></div><div class="ttdeci">licm</div><div class="ttdef"><b>Definition:</b> <a href="LICM_8cpp_source.html#l00350">LICM.cpp:350</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopBlocksRPO_html"><div class="ttname"><a href="classllvm_1_1LoopBlocksRPO.html">llvm::LoopBlocksRPO</a></div><div class="ttdoc">Wrapper class to LoopBlocksDFS that provides a standard begin()/end() interface for the DFS reverse p...</div><div class="ttdef"><b>Definition:</b> <a href="LoopIterator_8h_source.html#l00172">LoopIterator.h:172</a></div></div>
<div class="ttc" id="anamespacellvm_html_a656efdcee3deb029763304d3e741a2d1"><div class="ttname"><a href="namespacellvm.html#a656efdcee3deb029763304d3e741a2d1">llvm::isGuard</a></div><div class="ttdeci">bool isGuard(const User *U)</div><div class="ttdoc">Returns true iff U has semantics of a guard expressed in a form of call of llvm.experimental....</div><div class="ttdef"><b>Definition:</b> <a href="Analysis_2GuardUtils_8cpp_source.html#l00018">GuardUtils.cpp:18</a></div></div>
<div class="ttc" id="anamespacellvm_html_a7c46c742c31be54870e2038048e6b391"><div class="ttname"><a href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">llvm::dbgs</a></div><div class="ttdeci">raw_ostream &amp; dbgs()</div><div class="ttdoc">dbgs() - This returns a reference to a raw_ostream for debugging messages.</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8cpp_source.html#l00163">Debug.cpp:163</a></div></div>
<div class="ttc" id="aclassllvm_1_1MemoryEffects_html"><div class="ttname"><a href="classllvm_1_1MemoryEffects.html">llvm::MemoryEffects</a></div><div class="ttdoc">Summary of how a function affects memory in the program.</div><div class="ttdef"><b>Definition:</b> <a href="ModRef_8h_source.html#l00063">ModRef.h:63</a></div></div>
<div class="ttc" id="anamespacellvm_html_abe71bc4610a9dc7aa3a6c6e0e28fc14a"><div class="ttname"><a href="namespacellvm.html#abe71bc4610a9dc7aa3a6c6e0e28fc14a">llvm::isIdentifiedFunctionLocal</a></div><div class="ttdeci">bool isIdentifiedFunctionLocal(const Value *V)</div><div class="ttdoc">Return true if V is umabigously identified at the function-level.</div><div class="ttdef"><b>Definition:</b> <a href="AliasAnalysis_8cpp_source.html#l00890">AliasAnalysis.cpp:890</a></div></div>
<div class="ttc" id="aclassllvm_1_1DominatorTree_html_a5c69311e8d44898dac36a155c3d8691d"><div class="ttname"><a href="classllvm_1_1DominatorTree.html#a5c69311e8d44898dac36a155c3d8691d">llvm::DominatorTree::dominates</a></div><div class="ttdeci">bool dominates(const BasicBlock *BB, const Use &amp;U) const</div><div class="ttdoc">Return true if the (end of the) basic block BB dominates the use U.</div><div class="ttdef"><b>Definition:</b> <a href="Dominators_8cpp_source.html#l00122">Dominators.cpp:122</a></div></div>
<div class="ttc" id="aPriorityWorklist_8h_html"><div class="ttname"><a href="PriorityWorklist_8h.html">PriorityWorklist.h</a></div></div>
<div class="ttc" id="aCommandLine_8h_html"><div class="ttname"><a href="CommandLine_8h.html">CommandLine.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1SetVector_html_a6357ff5654c7cbe5fed8516dc8328eb4"><div class="ttname"><a href="classllvm_1_1SetVector.html#a6357ff5654c7cbe5fed8516dc8328eb4">llvm::SetVector&lt; T, SmallVector&lt; T, N &gt;, SmallDenseSet&lt; T, N &gt; &gt;::remove</a></div><div class="ttdeci">bool remove(const value_type &amp;X)</div><div class="ttdoc">Remove an item from the set vector.</div><div class="ttdef"><b>Definition:</b> <a href="SetVector_8h_source.html#l00157">SetVector.h:157</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantInt_html"><div class="ttname"><a href="classllvm_1_1ConstantInt.html">llvm::ConstantInt</a></div><div class="ttdoc">This is the shared class of boolean and integer constants.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00078">Constants.h:78</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopBase_html_a62733c3335a87750623dbfc5b3ae4f6c"><div class="ttname"><a href="classllvm_1_1LoopBase.html#a62733c3335a87750623dbfc5b3ae4f6c">llvm::LoopBase::getParentLoop</a></div><div class="ttdeci">LoopT * getParentLoop() const</div><div class="ttdoc">Return the parent loop if it exists or nullptr for top level loops.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00114">LoopInfo.h:114</a></div></div>
<div class="ttc" id="aclassllvm_1_1MemorySSAUpdater_html_a9ab9d33dbeb44b5ba49ab27201e6bd76"><div class="ttname"><a href="classllvm_1_1MemorySSAUpdater.html#a9ab9d33dbeb44b5ba49ab27201e6bd76">llvm::MemorySSAUpdater::insertUse</a></div><div class="ttdeci">void insertUse(MemoryUse *Use, bool RenameUses=false)</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSAUpdater_8cpp_source.html#l00238">MemorySSAUpdater.cpp:238</a></div></div>
<div class="ttc" id="anamespacellvm_html_a0d10fe510ced2849a8074fe81e5d04ce"><div class="ttname"><a href="namespacellvm.html#a0d10fe510ced2849a8074fe81e5d04ce">llvm::all_of</a></div><div class="ttdeci">bool all_of(R &amp;&amp;range, UnaryPredicate P)</div><div class="ttdoc">Provide wrappers to std::all_of which take ranges instead of having to pass begin/end explicitly.</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l01735">STLExtras.h:1735</a></div></div>
<div class="ttc" id="aclassllvm_1_1StoreInst_html_a731befae7b8a9a1a2efda559c5420a7f"><div class="ttname"><a href="classllvm_1_1StoreInst.html#a731befae7b8a9a1a2efda559c5420a7f">llvm::StoreInst::setOrdering</a></div><div class="ttdeci">void setOrdering(AtomicOrdering Ordering)</div><div class="ttdoc">Sets the ordering constraint of this store instruction.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00360">Instructions.h:360</a></div></div>
<div class="ttc" id="anamespacellvm_html_a433468826ef20b5ddb53704fc38363fc"><div class="ttname"><a href="namespacellvm.html#a433468826ef20b5ddb53704fc38363fc">llvm::isNoAliasCall</a></div><div class="ttdeci">bool isNoAliasCall(const Value *V)</div><div class="ttdoc">Return true if this pointer is returned by a noalias function.</div><div class="ttdef"><b>Definition:</b> <a href="AliasAnalysis_8cpp_source.html#l00866">AliasAnalysis.cpp:866</a></div></div>
<div class="ttc" id="aclassllvm_1_1MemorySSAWrapperPass_html"><div class="ttname"><a href="classllvm_1_1MemorySSAWrapperPass.html">llvm::MemorySSAWrapperPass</a></div><div class="ttdoc">Legacy analysis pass which computes MemorySSA.</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8h_source.html#l00986">MemorySSA.h:986</a></div></div>
<div class="ttc" id="aclassllvm_1_1SetVector_html_adb13793b98ab59209a5309d26f831850"><div class="ttname"><a href="classllvm_1_1SetVector.html#adb13793b98ab59209a5309d26f831850">llvm::SetVector&lt; T, SmallVector&lt; T, N &gt;, SmallDenseSet&lt; T, N &gt; &gt;::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdoc">Get an iterator to the beginning of the SetVector.</div><div class="ttdef"><b>Definition:</b> <a href="SetVector_8h_source.html#l00082">SetVector.h:82</a></div></div>
<div class="ttc" id="aclassllvm_1_1PassRegistry_html_a05a729900b76c89e808c6c3094921b2f"><div class="ttname"><a href="classllvm_1_1PassRegistry.html#a05a729900b76c89e808c6c3094921b2f">llvm::PassRegistry::getPassRegistry</a></div><div class="ttdeci">static PassRegistry * getPassRegistry()</div><div class="ttdoc">getPassRegistry - Access the global registry object, which is automatically initialized at applicatio...</div><div class="ttdef"><b>Definition:</b> <a href="PassRegistry_8cpp_source.html#l00024">PassRegistry.cpp:24</a></div></div>
<div class="ttc" id="astructllvm_1_1LICMOptions_html_ae4652abbffa2d78b52cd028b1995726a"><div class="ttname"><a href="structllvm_1_1LICMOptions.html#ae4652abbffa2d78b52cd028b1995726a">llvm::LICMOptions::AllowSpeculation</a></div><div class="ttdeci">bool AllowSpeculation</div><div class="ttdef"><b>Definition:</b> <a href="LICM_8h_source.html#l00051">LICM.h:51</a></div></div>
<div class="ttc" id="aConstants_8h_html"><div class="ttname"><a href="Constants_8h.html">Constants.h</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a25d956d9e0beadd47ce4bc255dfa811d"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">llvm::PatternMatch::match</a></div><div class="ttdeci">bool match(Val *V, const Pattern &amp;P)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00049">PatternMatch.h:49</a></div></div>
<div class="ttc" id="aLICM_8cpp_html_aabae34d2dbed5dde1865f19ccbe4cb81"><div class="ttname"><a href="LICM_8cpp.html#aabae34d2dbed5dde1865f19ccbe4cb81">inSubLoop</a></div><div class="ttdeci">static bool inSubLoop(BasicBlock *BB, Loop *CurLoop, LoopInfo *LI)</div><div class="ttdoc">Little predicate that returns true if the specified basic block is in a subloop of the current one,...</div><div class="ttdef"><b>Definition:</b> <a href="LICM_8cpp_source.html#l02389">LICM.cpp:2389</a></div></div>
<div class="ttc" id="aclassllvm_1_1AAResults_html"><div class="ttname"><a href="classllvm_1_1AAResults.html">llvm::AAResults</a></div><div class="ttdef"><b>Definition:</b> <a href="AliasAnalysis_8h_source.html#l00294">AliasAnalysis.h:294</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopSafetyInfo_html"><div class="ttname"><a href="classllvm_1_1LoopSafetyInfo.html">llvm::LoopSafetyInfo</a></div><div class="ttdoc">Captures loop safety information.</div><div class="ttdef"><b>Definition:</b> <a href="MustExecute_8h_source.html#l00060">MustExecute.h:60</a></div></div>
<div class="ttc" id="aclassllvm_1_1MemorySSA_html_ae3b89ffde42778289bcbd8a187199420"><div class="ttname"><a href="classllvm_1_1MemorySSA.html#ae3b89ffde42778289bcbd8a187199420">llvm::MemorySSA::isLiveOnEntryDef</a></div><div class="ttdeci">bool isLiveOnEntryDef(const MemoryAccess *MA) const</div><div class="ttdoc">Return true if MA represents the live on entry value.</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8h_source.html#l00737">MemorySSA.h:737</a></div></div>
<div class="ttc" id="aLICM_8cpp_html_a8046d863469d9c33287fa4a673d00571"><div class="ttname"><a href="LICM_8cpp.html#a8046d863469d9c33287fa4a673d00571">foreachMemoryAccess</a></div><div class="ttdeci">static void foreachMemoryAccess(MemorySSA *MSSA, Loop *L, function_ref&lt; void(Instruction *)&gt; Fn)</div><div class="ttdef"><b>Definition:</b> <a href="LICM_8cpp_source.html#l02257">LICM.cpp:2257</a></div></div>
<div class="ttc" id="aclassllvm_1_1PredIteratorCache_html_a968659c3d46a40a0028a6d9e9537c9cc"><div class="ttname"><a href="classllvm_1_1PredIteratorCache.html#a968659c3d46a40a0028a6d9e9537c9cc">llvm::PredIteratorCache::size</a></div><div class="ttdeci">size_t size(BasicBlock *BB) const</div><div class="ttdef"><b>Definition:</b> <a href="PredIteratorCache_8h_source.html#l00065">PredIteratorCache.h:65</a></div></div>
<div class="ttc" id="aclassllvm_1_1SinkAndHoistLICMFlags_html_a0ea8d15c6ae6458dcc802674099846e2"><div class="ttname"><a href="classllvm_1_1SinkAndHoistLICMFlags.html#a0ea8d15c6ae6458dcc802674099846e2">llvm::SinkAndHoistLICMFlags::SinkAndHoistLICMFlags</a></div><div class="ttdeci">SinkAndHoistLICMFlags(unsigned LicmMssaOptCap, unsigned LicmMssaNoAccForPromotionCap, bool IsSink, Loop *L=nullptr, MemorySSA *MSSA=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="LICM_8cpp_source.html#l00366">LICM.cpp:366</a></div></div>
<div class="ttc" id="aclassllvm_1_1User_html"><div class="ttname"><a href="classllvm_1_1User.html">llvm::User</a></div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00044">User.h:44</a></div></div>
<div class="ttc" id="aREADME__ALTIVEC_8txt_html_a9aacd9146afe44bf656cd664e2a88c8c"><div class="ttname"><a href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a></div><div class="ttdeci">(vector float) vec_cmpeq(*A, *B) C</div><div class="ttdef"><b>Definition:</b> <a href="README__ALTIVEC_8txt_source.html#l00086">README_ALTIVEC.txt:86</a></div></div>
<div class="ttc" id="aclassllvm_1_1AAResults_html_a2205e49ace8bb2fd9934342ff6a25e13"><div class="ttname"><a href="classllvm_1_1AAResults.html#a2205e49ace8bb2fd9934342ff6a25e13">llvm::AAResults::getModRefInfo</a></div><div class="ttdeci">ModRefInfo getModRefInfo(const Instruction *I, const std::optional&lt; MemoryLocation &gt; &amp;OptLoc)</div><div class="ttdoc">Check whether or not an instruction may read or write the optionally specified memory location.</div><div class="ttdef"><b>Definition:</b> <a href="AliasAnalysis_8h_source.html#l00488">AliasAnalysis.h:488</a></div></div>
<div class="ttc" id="aclassllvm_1_1SinkAndHoistLICMFlags_html"><div class="ttname"><a href="classllvm_1_1SinkAndHoistLICMFlags.html">llvm::SinkAndHoistLICMFlags</a></div><div class="ttdoc">Flags controlling how much is checked when sinking or hoisting instructions.</div><div class="ttdef"><b>Definition:</b> <a href="LoopUtils_8h_source.html#l00114">LoopUtils.h:114</a></div></div>
<div class="ttc" id="aSIInstrInfo_8cpp_html_a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791"><div class="ttname"><a href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a></div><div class="ttdeci">@ SI</div><div class="ttdef"><b>Definition:</b> <a href="SIInstrInfo_8cpp_source.html#l07993">SIInstrInfo.cpp:7993</a></div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisUsage_html"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html">llvm::AnalysisUsage</a></div><div class="ttdoc">Represent the analysis usage information of a pass.</div><div class="ttdef"><b>Definition:</b> <a href="PassAnalysisSupport_8h_source.html#l00047">PassAnalysisSupport.h:47</a></div></div>
<div class="ttc" id="anamespacellvm_1_1ms__demangle_html_afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e"><div class="ttname"><a href="namespacellvm_1_1ms__demangle.html#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">llvm::ms_demangle::QualifierMangleMode::Result</a></div><div class="ttdeci">@ Result</div></div>
<div class="ttc" id="aclassllvm_1_1AliasSet_html"><div class="ttname"><a href="classllvm_1_1AliasSet.html">llvm::AliasSet</a></div><div class="ttdef"><b>Definition:</b> <a href="AliasSetTracker_8h_source.html#l00049">AliasSetTracker.h:49</a></div></div>
<div class="ttc" id="astructllvm_1_1LICMOptions_html_a24c46f6e3f03db048c13edbb1f36a466"><div class="ttname"><a href="structllvm_1_1LICMOptions.html#a24c46f6e3f03db048c13edbb1f36a466">llvm::LICMOptions::MssaOptCap</a></div><div class="ttdeci">unsigned MssaOptCap</div><div class="ttdef"><b>Definition:</b> <a href="LICM_8h_source.html#l00049">LICM.h:49</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopBase_html_a40f34cc77d2b3bc73384f535c8101858"><div class="ttname"><a href="classllvm_1_1LoopBase.html#a40f34cc77d2b3bc73384f535c8101858">llvm::LoopBase::blocks</a></div><div class="ttdeci">iterator_range&lt; block_iterator &gt; blocks() const</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00195">LoopInfo.h:195</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopSafetyInfo_html_a59204639c099ab5d774e8f5cf929ed9d"><div class="ttname"><a href="classllvm_1_1LoopSafetyInfo.html#a59204639c099ab5d774e8f5cf929ed9d">llvm::LoopSafetyInfo::getBlockColors</a></div><div class="ttdeci">const DenseMap&lt; BasicBlock *, ColorVector &gt; &amp; getBlockColors() const</div><div class="ttdoc">Returns block colors map that is used to update funclet operand bundles.</div><div class="ttdef"><b>Definition:</b> <a href="MustExecute_8cpp_source.html#l00032">MustExecute.cpp:32</a></div></div>
<div class="ttc" id="aTargetLibraryInfo_8h_html"><div class="ttname"><a href="TargetLibraryInfo_8h.html">TargetLibraryInfo.h</a></div></div>
<div class="ttc" id="aAssumeBundleBuilder_8h_html"><div class="ttname"><a href="AssumeBundleBuilder_8h.html">AssumeBundleBuilder.h</a></div></div>
<div class="ttc" id="anamespacellvm_1_1SPII_html_a1c7202c6054fef862bbed45957747cdfa36b3dd3b84fde3f8494a9b18af131856"><div class="ttname"><a href="namespacellvm_1_1SPII.html#a1c7202c6054fef862bbed45957747cdfa36b3dd3b84fde3f8494a9b18af131856">llvm::SPII::Store</a></div><div class="ttdeci">@ Store</div><div class="ttdef"><b>Definition:</b> <a href="SparcInstrInfo_8h_source.html#l00033">SparcInstrInfo.h:33</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_aecb93439702247fe5353a9966f7cefcd"><div class="ttname"><a href="classllvm_1_1Value.html#aecb93439702247fe5353a9966f7cefcd">llvm::Value::uses</a></div><div class="ttdeci">iterator_range&lt; use_iterator &gt; uses()</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00376">Value.h:376</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a161fd4e9fa5367f64c2a4c9e921c3ad3"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a161fd4e9fa5367f64c2a4c9e921c3ad3">llvm::BasicBlock::getFirstInsertionPt</a></div><div class="ttdeci">const_iterator getFirstInsertionPt() const</div><div class="ttdoc">Returns an iterator to the first instruction in this block that is suitable for inserting a non-PHI i...</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00245">BasicBlock.cpp:245</a></div></div>
<div class="ttc" id="anamespacefalse_html"><div class="ttname"><a href="namespacefalse.html">false</a></div><div class="ttdef"><b>Definition:</b> <a href="StackSlotColoring_8cpp_source.html#l00141">StackSlotColoring.cpp:141</a></div></div>
<div class="ttc" id="aclassllvm_1_1MemoryEffects_html_a5e215734f00c96489db57a352b0439cc"><div class="ttname"><a href="classllvm_1_1MemoryEffects.html#a5e215734f00c96489db57a352b0439cc">llvm::MemoryEffects::doesNotAccessMemory</a></div><div class="ttdeci">bool doesNotAccessMemory() const</div><div class="ttdoc">Whether this function accesses no memory.</div><div class="ttdef"><b>Definition:</b> <a href="ModRef_8h_source.html#l00191">ModRef.h:191</a></div></div>
<div class="ttc" id="aclassllvm_1_1MemorySSAUpdater_html_ae26e0fb4a78dc439a03ac42c4ba6e674"><div class="ttname"><a href="classllvm_1_1MemorySSAUpdater.html#ae26e0fb4a78dc439a03ac42c4ba6e674">llvm::MemorySSAUpdater::moveToPlace</a></div><div class="ttdeci">void moveToPlace(MemoryUseOrDef *What, BasicBlock *BB, MemorySSA::InsertionPlace Where)</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSAUpdater_8cpp_source.html#l01200">MemorySSAUpdater.cpp:1200</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopBase_html_a5cc113cb783ab6e5ca7b69241431c19c"><div class="ttname"><a href="classllvm_1_1LoopBase.html#a5cc113cb783ab6e5ca7b69241431c19c">llvm::LoopBase::getBlocks</a></div><div class="ttdeci">ArrayRef&lt; BlockT * &gt; getBlocks() const</div><div class="ttdoc">Get a list of the basic blocks which make up this loop.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00188">LoopInfo.h:188</a></div></div>
<div class="ttc" id="aclassllvm_1_1AAResults_html_a98f54e18da022cdb497fbbeed4488276"><div class="ttname"><a href="classllvm_1_1AAResults.html#a98f54e18da022cdb497fbbeed4488276">llvm::AAResults::getMemoryEffects</a></div><div class="ttdeci">MemoryEffects getMemoryEffects(const CallBase *Call)</div><div class="ttdoc">Return the behavior of the given call site.</div><div class="ttdef"><b>Definition:</b> <a href="AliasAnalysis_8cpp_source.html#l00387">AliasAnalysis.cpp:387</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html"><div class="ttname"><a href="classllvm_1_1Instruction.html">llvm::Instruction</a></div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00041">Instruction.h:41</a></div></div>
<div class="ttc" id="aclassllvm_1_1DominatorTreeWrapperPass_html"><div class="ttname"><a href="classllvm_1_1DominatorTreeWrapperPass.html">llvm::DominatorTreeWrapperPass</a></div><div class="ttdoc">Legacy analysis pass which computes a DominatorTree.</div><div class="ttdef"><b>Definition:</b> <a href="Dominators_8h_source.html#l00314">Dominators.h:314</a></div></div>
<div class="ttc" id="anamespacellvm_html_a7f2a3d4dcfee70225988aec53ff1e173"><div class="ttname"><a href="namespacellvm.html#a7f2a3d4dcfee70225988aec53ff1e173">llvm::report_fatal_error</a></div><div class="ttdeci">void report_fatal_error(Error Err, bool gen_crash_diag=true)</div><div class="ttdoc">Report a serious error, calling any installed error handler.</div><div class="ttdef"><b>Definition:</b> <a href="Testing_2Support_2Error_8cpp_source.html#l00145">Error.cpp:145</a></div></div>
<div class="ttc" id="anamespacellvm_html_a26be1141b23850a2b4eb78021d99e862"><div class="ttname"><a href="namespacellvm.html#a26be1141b23850a2b4eb78021d99e862">llvm::salvageDebugInfo</a></div><div class="ttdeci">void salvageDebugInfo(const MachineRegisterInfo &amp;MRI, MachineInstr &amp;MI)</div><div class="ttdoc">Assuming the instruction MI is going to be deleted, attempt to salvage debug users of MI by writing t...</div><div class="ttdef"><b>Definition:</b> <a href="CodeGen_2GlobalISel_2Utils_8cpp_source.html#l01367">Utils.cpp:1367</a></div></div>
<div class="ttc" id="anamespacellvm_html_a0bf75467957937ad23ad7be19f489934"><div class="ttname"><a href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">llvm::STATISTIC</a></div><div class="ttdeci">STATISTIC(NumFunctions, &quot;Total number of functions&quot;)</div></div>
<div class="ttc" id="aclassllvm_1_1raw__ostream_html"><div class="ttname"><a href="classllvm_1_1raw__ostream.html">llvm::raw_ostream</a></div><div class="ttdoc">This class implements an extremely fast bulk output stream that can only output to a stream.</div><div class="ttdef"><b>Definition:</b> <a href="raw__ostream_8h_source.html#l00052">raw_ostream.h:52</a></div></div>
<div class="ttc" id="aclassllvm_1_1MemorySSA_html_aaff19b909f903fe2a431e97424ffced5"><div class="ttname"><a href="classllvm_1_1MemorySSA.html#aaff19b909f903fe2a431e97424ffced5">llvm::MemorySSA::getBlockAccesses</a></div><div class="ttdeci">const AccessList * getBlockAccesses(const BasicBlock *BB) const</div><div class="ttdoc">Return the list of MemoryAccess's for a given basic block.</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8h_source.html#l00757">MemorySSA.h:757</a></div></div>
<div class="ttc" id="aLoopUtils_8h_html"><div class="ttname"><a href="LoopUtils_8h.html">LoopUtils.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_a3b1c5788b85ffa254be0e834edf5cf8f"><div class="ttname"><a href="namespacellvm.html#a3b1c5788b85ffa254be0e834edf5cf8f">llvm::getUnderlyingObject</a></div><div class="ttdeci">const Value * getUnderlyingObject(const Value *V, unsigned MaxLookup=6)</div><div class="ttdoc">This method strips off any GEP address adjustments and pointer casts from the specified value,...</div><div class="ttdef"><b>Definition:</b> <a href="ValueTracking_8cpp_source.html#l04567">ValueTracking.cpp:4567</a></div></div>
<div class="ttc" id="aclassllvm_1_1LPPassManager_html"><div class="ttname"><a href="classllvm_1_1LPPassManager.html">llvm::LPPassManager</a></div><div class="ttdef"><b>Definition:</b> <a href="LoopPass_8h_source.html#l00076">LoopPass.h:76</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_aade703948f2fdabdc65868bdf42d3141"><div class="ttname"><a href="classllvm_1_1Instruction.html#aade703948f2fdabdc65868bdf42d3141">llvm::Instruction::getAAMetadata</a></div><div class="ttdeci">AAMDNodes getAAMetadata() const</div><div class="ttdoc">Returns the AA metadata for this instruction.</div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8cpp_source.html#l01499">Metadata.cpp:1499</a></div></div>
<div class="ttc" id="anamespacellvm_html_a9d391b6acc6d90c9b8a8442324b1aa6f"><div class="ttname"><a href="namespacellvm.html#a9d391b6acc6d90c9b8a8442324b1aa6f">llvm::SplitBlockPredecessors</a></div><div class="ttdeci">BasicBlock * SplitBlockPredecessors(BasicBlock *BB, ArrayRef&lt; BasicBlock * &gt; Preds, const char *Suffix, DominatorTree *DT, LoopInfo *LI=nullptr, MemorySSAUpdater *MSSAU=nullptr, bool PreserveLCSSA=false)</div><div class="ttdoc">This method introduces at least one new basic block into the function and moves some of the predecess...</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlockUtils_8cpp_source.html#l01272">BasicBlockUtils.cpp:1272</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_afc70e919c88c86159cc94cea29b6c210"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#afc70e919c88c86159cc94cea29b6c210">llvm::BasicBlock::getModule</a></div><div class="ttdeci">const Module * getModule() const</div><div class="ttdoc">Return the module owning the function this basic block belongs to, or nullptr if the function does no...</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00146">BasicBlock.cpp:146</a></div></div>
<div class="ttc" id="aclassllvm_1_1DominatorTreeBase_html_a2881c226e1c102190d54c3b664330aba"><div class="ttname"><a href="classllvm_1_1DominatorTreeBase.html#a2881c226e1c102190d54c3b664330aba">llvm::DominatorTreeBase::changeImmediateDominator</a></div><div class="ttdeci">void changeImmediateDominator(DomTreeNodeBase&lt; NodeT &gt; *N, DomTreeNodeBase&lt; NodeT &gt; *NewIDom)</div><div class="ttdoc">changeImmediateDominator - This method is used to update the dominator tree information when a node's...</div><div class="ttdef"><b>Definition:</b> <a href="GenericDomTree_8h_source.html#l00672">GenericDomTree.h:672</a></div></div>
<div class="ttc" id="aPatternMatch_8h_html"><div class="ttname"><a href="PatternMatch_8h.html">PatternMatch.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a46ef6115027606b67adcf4d28f3dac17"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a46ef6115027606b67adcf4d28f3dac17">llvm::BasicBlock::getFirstNonPHI</a></div><div class="ttdeci">const Instruction * getFirstNonPHI() const</div><div class="ttdoc">Returns a pointer to the first instruction in this block that is not a PHINode instruction.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00208">BasicBlock.cpp:208</a></div></div>
<div class="ttc" id="astructllvm_1_1Align_html"><div class="ttname"><a href="structllvm_1_1Align.html">llvm::Align</a></div><div class="ttdoc">This struct is a compact representation of a valid (non-zero power of two) alignment.</div><div class="ttdef"><b>Definition:</b> <a href="Alignment_8h_source.html#l00039">Alignment.h:39</a></div></div>
<div class="ttc" id="anamespacellvm_html_af1236d17bc9dd1041e95f1724eb9cfa6"><div class="ttname"><a href="namespacellvm.html#af1236d17bc9dd1041e95f1724eb9cfa6">llvm::sinkRegionForLoopNest</a></div><div class="ttdeci">bool sinkRegionForLoopNest(DomTreeNode *, AAResults *, LoopInfo *, DominatorTree *, TargetLibraryInfo *, TargetTransformInfo *, Loop *, MemorySSAUpdater &amp;, ICFLoopSafetyInfo *, SinkAndHoistLICMFlags &amp;, OptimizationRemarkEmitter *)</div><div class="ttdoc">Call sinkRegion on loops contained within the specified loop in order from innermost to outermost.</div><div class="ttdef"><b>Definition:</b> <a href="LICM_8cpp_source.html#l00606">LICM.cpp:606</a></div></div>
<div class="ttc" id="aclassllvm_1_1SetVector_html_aaf9ee38b9973681c1720aaf03af3a069"><div class="ttname"><a href="classllvm_1_1SetVector.html#aaf9ee38b9973681c1720aaf03af3a069">llvm::SetVector&lt; T, SmallVector&lt; T, N &gt;, SmallDenseSet&lt; T, N &gt; &gt;::empty</a></div><div class="ttdeci">bool empty() const</div><div class="ttdoc">Determine if the SetVector is empty or not.</div><div class="ttdef"><b>Definition:</b> <a href="SetVector_8h_source.html#l00072">SetVector.h:72</a></div></div>
<div class="ttc" id="aclassllvm_1_1PHINode_html_aef51af4b490af6b3bf2dfbc8737a8f9f"><div class="ttname"><a href="classllvm_1_1PHINode.html#aef51af4b490af6b3bf2dfbc8737a8f9f">llvm::PHINode::getNumIncomingValues</a></div><div class="ttdeci">unsigned getNumIncomingValues() const</div><div class="ttdoc">Return the number of incoming edges.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02790">Instructions.h:2790</a></div></div>
<div class="ttc" id="aclassllvm_1_1MemoryAccess_html_aa468ad3fa68bdf6703c391deaec97706"><div class="ttname"><a href="classllvm_1_1MemoryAccess.html#aa468ad3fa68bdf6703c391deaec97706">llvm::MemoryAccess::getBlock</a></div><div class="ttdeci">BasicBlock * getBlock() const</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8h_source.html#l00164">MemorySSA.h:164</a></div></div>
<div class="ttc" id="aLoopIterator_8h_html"><div class="ttname"><a href="LoopIterator_8h.html">LoopIterator.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_a9d7de807ebdfe1819df3ff6cb0f16158"><div class="ttname"><a href="classllvm_1_1Value.html#a9d7de807ebdfe1819df3ff6cb0f16158">llvm::Value::use_empty</a></div><div class="ttdeci">bool use_empty() const</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00344">Value.h:344</a></div></div>
<div class="ttc" id="anamespacellvm_1_1CallingConv_html_a188c0836f8c3528401f1c236fd93b977"><div class="ttname"><a href="namespacellvm_1_1CallingConv.html#a188c0836f8c3528401f1c236fd93b977">llvm::CallingConv::ID</a></div><div class="ttdeci">unsigned ID</div><div class="ttdoc">LLVM IR allows to use arbitrary numbers as calling convention identifiers.</div><div class="ttdef"><b>Definition:</b> <a href="CallingConv_8h_source.html#l00024">CallingConv.h:24</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_ae22f493ba8327ce92e87d3b96bce7017"><div class="ttname"><a href="classllvm_1_1Instruction.html#ae22f493ba8327ce92e87d3b96bce7017">llvm::Instruction::getMetadata</a></div><div class="ttdeci">MDNode * getMetadata(unsigned KindID) const</div><div class="ttdoc">Get the metadata of given kind attached to this Instruction.</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00275">Instruction.h:275</a></div></div>
<div class="ttc" id="aPassSupport_8h_html_a74ce8276b89067e806f67c45a6d92575"><div class="ttname"><a href="PassSupport_8h.html#a74ce8276b89067e806f67c45a6d92575">INITIALIZE_PASS_END</a></div><div class="ttdeci">#define INITIALIZE_PASS_END(passName, arg, name, cfg, analysis)</div><div class="ttdef"><b>Definition:</b> <a href="PassSupport_8h_source.html#l00059">PassSupport.h:59</a></div></div>
<div class="ttc" id="aclassllvm_1_1MemorySSA_html_ade88aedcbd2b55711000cf3e36c0fc91"><div class="ttname"><a href="classllvm_1_1MemorySSA.html#ade88aedcbd2b55711000cf3e36c0fc91">llvm::MemorySSA::locallyDominates</a></div><div class="ttdeci">bool locallyDominates(const MemoryAccess *A, const MemoryAccess *B) const</div><div class="ttdoc">Given two memory accesses in the same basic block, determine whether MemoryAccess A dominates MemoryA...</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8cpp_source.html#l02085">MemorySSA.cpp:2085</a></div></div>
<div class="ttc" id="astructllvm_1_1OperandBundleUse_html_a6386ca6c50ec4ef5d9a0f13e7fe8f0c9"><div class="ttname"><a href="structllvm_1_1OperandBundleUse.html#a6386ca6c50ec4ef5d9a0f13e7fe8f0c9">llvm::OperandBundleUse::getTagID</a></div><div class="ttdeci">uint32_t getTagID() const</div><div class="ttdoc">Return the tag of this operand bundle as an integer.</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l01107">InstrTypes.h:1107</a></div></div>
<div class="ttc" id="aIR_2CFG_8h_html"><div class="ttname"><a href="IR_2CFG_8h.html">CFG.h</a></div></div>
<div class="ttc" id="aLoopInfo_8h_html"><div class="ttname"><a href="LoopInfo_8h.html">LoopInfo.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchInst_html_aac456a62894c9f0f8e9f06373bbf40f0"><div class="ttname"><a href="classllvm_1_1BranchInst.html#aac456a62894c9f0f8e9f06373bbf40f0">llvm::BranchInst::getCondition</a></div><div class="ttdeci">Value * getCondition() const</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03220">Instructions.h:3220</a></div></div>
<div class="ttc" id="aADT_2tmp_8txt_html_a07ed0bfaa124c15897944fe3eaa971ab"><div class="ttname"><a href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a></div><div class="ttdeci">Class for arbitrary precision integers APInt is a functional replacement for common case unsigned integer type like unsigned long or uint64_t</div><div class="ttdef"><b>Definition:</b> <a href="ADT_2tmp_8txt_source.html#l00001">tmp.txt:1</a></div></div>
<div class="ttc" id="anamespacellvm_html_acb22fb04083152eee862457e42e8dc31"><div class="ttname"><a href="namespacellvm.html#acb22fb04083152eee862457e42e8dc31">llvm::predecessors</a></div><div class="ttdeci">auto predecessors(const MachineBasicBlock *BB)</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l01266">MachineBasicBlock.h:1266</a></div></div>
<div class="ttc" id="anamespacellvm_html_a1855f41d4a13b499837ed703cff6b389a497031794414a552435f90151ac3b54b"><div class="ttname"><a href="namespacellvm.html#a1855f41d4a13b499837ed703cff6b389a497031794414a552435f90151ac3b54b">llvm::OutputFileType::Object</a></div><div class="ttdeci">@ Object</div></div>
<div class="ttc" id="aclassllvm_1_1function__ref_html"><div class="ttname"><a href="classllvm_1_1function__ref.html">llvm::function_ref</a></div><div class="ttdoc">An efficient, type-erasing, non-owning reference to a callable.</div><div class="ttdef"><b>Definition:</b> <a href="STLFunctionalExtras_8h_source.html#l00036">STLFunctionalExtras.h:36</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSetImplBase_html_af8a50544090e81ac83601aff8f4b0142"><div class="ttname"><a href="classllvm_1_1SmallPtrSetImplBase.html#af8a50544090e81ac83601aff8f4b0142">llvm::SmallPtrSetImplBase::empty</a></div><div class="ttdeci">bool empty() const</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00092">SmallPtrSet.h:92</a></div></div>
<div class="ttc" id="aRDFGraph_8cpp_html_af153ca0eadca8bc464492b7aba7feb00"><div class="ttname"><a href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a></div><div class="ttdeci">const DataFlowGraph &amp; G</div><div class="ttdef"><b>Definition:</b> <a href="RDFGraph_8cpp_source.html#l00200">RDFGraph.cpp:200</a></div></div>
<div class="ttc" id="aLICM_8cpp_html_ad0eaec807c54661058d9a1aed11195d9"><div class="ttname"><a href="LICM_8cpp.html#ad0eaec807c54661058d9a1aed11195d9">isTriviallyReplaceablePHI</a></div><div class="ttdeci">static bool isTriviallyReplaceablePHI(const PHINode &amp;PN, const Instruction &amp;I)</div><div class="ttdoc">Returns true if a PHINode is a trivially replaceable with an Instruction.</div><div class="ttdef"><b>Definition:</b> <a href="LICM_8cpp_source.html#l01321">LICM.cpp:1321</a></div></div>
<div class="ttc" id="anamespacellvm_html_ac7294ba4e105807674fe3a394437fcc1"><div class="ttname"><a href="namespacellvm.html#ac7294ba4e105807674fe3a394437fcc1">llvm::getLoopPassPreservedAnalyses</a></div><div class="ttdeci">PreservedAnalyses getLoopPassPreservedAnalyses()</div><div class="ttdoc">Returns the minimum set of Analyses that all loop passes must preserve.</div><div class="ttdef"><b>Definition:</b> <a href="LoopAnalysisManager_8cpp_source.html#l00138">LoopAnalysisManager.cpp:138</a></div></div>
<div class="ttc" id="aclassllvm_1_1cl_1_1opt_html"><div class="ttname"><a href="classllvm_1_1cl_1_1opt.html">llvm::cl::opt&lt; bool &gt;</a></div></div>
<div class="ttc" id="aMemorySSA_8cpp_html_a20a60bdac22b099d87d8cb0c1d554120"><div class="ttname"><a href="MemorySSA_8cpp.html#a20a60bdac22b099d87d8cb0c1d554120">SSA</a></div><div class="ttdeci">Memory SSA</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8cpp_source.html#l00071">MemorySSA.cpp:71</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoadInst_html_a161c2db145827f4e181e7fe662b53a81"><div class="ttname"><a href="classllvm_1_1LoadInst.html#a161c2db145827f4e181e7fe662b53a81">llvm::LoadInst::getPointerAddressSpace</a></div><div class="ttdeci">unsigned getPointerAddressSpace() const</div><div class="ttdoc">Returns the address space of the pointer operand.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00270">Instructions.h:270</a></div></div>
<div class="ttc" id="aclassllvm_1_1StoreInst_html"><div class="ttname"><a href="classllvm_1_1StoreInst.html">llvm::StoreInst</a></div><div class="ttdoc">An instruction for storing to memory.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00301">Instructions.h:301</a></div></div>
<div class="ttc" id="aclassllvm_1_1Constant_html"><div class="ttname"><a href="classllvm_1_1Constant.html">llvm::Constant</a></div><div class="ttdoc">This is an important base class in LLVM.</div><div class="ttdef"><b>Definition:</b> <a href="Constant_8h_source.html#l00041">Constant.h:41</a></div></div>
<div class="ttc" id="aclassllvm_1_1AliasSetTracker_html_aac3f7966cd23097c118eb53fc6c19661"><div class="ttname"><a href="classllvm_1_1AliasSetTracker.html#aac3f7966cd23097c118eb53fc6c19661">llvm::AliasSetTracker::add</a></div><div class="ttdeci">void add(Value *Ptr, LocationSize Size, const AAMDNodes &amp;AAInfo)</div><div class="ttdoc">These methods are used to add different types of instructions to the alias sets.</div><div class="ttdef"><b>Definition:</b> <a href="AliasSetTracker_8cpp_source.html#l00369">AliasSetTracker.cpp:369</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_a391ffe96dd8c686b0d2620c7fb25f8a5"><div class="ttname"><a href="classllvm_1_1Value.html#a391ffe96dd8c686b0d2620c7fb25f8a5">llvm::Value::getNameOrAsOperand</a></div><div class="ttdeci">std::string getNameOrAsOperand() const</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00443">Value.cpp:443</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoadAndStorePromoter_html_aee1b74c8b9813e189733f6c5a63495e6"><div class="ttname"><a href="classllvm_1_1LoadAndStorePromoter.html#aee1b74c8b9813e189733f6c5a63495e6">llvm::LoadAndStorePromoter::shouldDelete</a></div><div class="ttdeci">virtual bool shouldDelete(Instruction *I) const</div><div class="ttdoc">Return false if a sub-class wants to keep one of the loads/stores after the SSA construction.</div><div class="ttdef"><b>Definition:</b> <a href="SSAUpdater_8h_source.html#l00186">SSAUpdater.h:186</a></div></div>
<div class="ttc" id="aclassllvm_1_1DomTreeNodeBase_html_a6a15a030098342e06ea73e1241d614c9"><div class="ttname"><a href="classllvm_1_1DomTreeNodeBase.html#a6a15a030098342e06ea73e1241d614c9">llvm::DomTreeNodeBase::getBlock</a></div><div class="ttdeci">NodeT * getBlock() const</div><div class="ttdef"><b>Definition:</b> <a href="GenericDomTree_8h_source.html#l00089">GenericDomTree.h:89</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetLibraryInfoWrapperPass_html"><div class="ttname"><a href="classllvm_1_1TargetLibraryInfoWrapperPass.html">llvm::TargetLibraryInfoWrapperPass</a></div><div class="ttdef"><b>Definition:</b> <a href="TargetLibraryInfo_8h_source.html#l00565">TargetLibraryInfo.h:565</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopPass_html"><div class="ttname"><a href="classllvm_1_1LoopPass.html">llvm::LoopPass</a></div><div class="ttdef"><b>Definition:</b> <a href="LoopPass_8h_source.html#l00028">LoopPass.h:28</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfoWrapperPass_html"><div class="ttname"><a href="classllvm_1_1TargetTransformInfoWrapperPass.html">llvm::TargetTransformInfoWrapperPass</a></div><div class="ttdoc">Wrapper pass for TargetTransformInfo.</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l02682">TargetTransformInfo.h:2682</a></div></div>
<div class="ttc" id="aclassllvm_1_1MemorySSAUpdater_html"><div class="ttname"><a href="classllvm_1_1MemorySSAUpdater.html">llvm::MemorySSAUpdater</a></div><div class="ttdef"><b>Definition:</b> <a href="MemorySSAUpdater_8h_source.html#l00054">MemorySSAUpdater.h:54</a></div></div>
<div class="ttc" id="aclassllvm_1_1LPMUpdater_html"><div class="ttname"><a href="classllvm_1_1LPMUpdater.html">llvm::LPMUpdater</a></div><div class="ttdoc">This class provides an interface for updating the loop pass manager based on mutations to the loop ne...</div><div class="ttdef"><b>Definition:</b> <a href="LoopPassManager_8h_source.html#l00262">LoopPassManager.h:262</a></div></div>
<div class="ttc" id="aclassllvm_1_1MemorySSAUpdater_html_a4121a20238504099c3466fa62ec877d5"><div class="ttname"><a href="classllvm_1_1MemorySSAUpdater.html#a4121a20238504099c3466fa62ec877d5">llvm::MemorySSAUpdater::getMemorySSA</a></div><div class="ttdeci">MemorySSA * getMemorySSA() const</div><div class="ttdoc">Get handle on MemorySSA.</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSAUpdater_8h_source.html#l00242">MemorySSAUpdater.h:242</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoadInst_html_a46adba111f7580ebfbb869a008de1818"><div class="ttname"><a href="classllvm_1_1LoadInst.html#a46adba111f7580ebfbb869a008de1818">llvm::LoadInst::setOrdering</a></div><div class="ttdeci">void setOrdering(AtomicOrdering Ordering)</div><div class="ttdoc">Sets the ordering constraint of this load instruction.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00234">Instructions.h:234</a></div></div>
<div class="ttc" id="aELFObjHandler_8cpp_html_a9df82a8be2f17e80535a8937bf23e022"><div class="ttname"><a href="ELFObjHandler_8cpp.html#a9df82a8be2f17e80535a8937bf23e022">Addr</a></div><div class="ttdeci">uint64_t Addr</div><div class="ttdef"><b>Definition:</b> <a href="ELFObjHandler_8cpp_source.html#l00079">ELFObjHandler.cpp:79</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopBase_html_ae069a12f0a2d2deb69e30b439a91190e"><div class="ttname"><a href="classllvm_1_1LoopBase.html#ae069a12f0a2d2deb69e30b439a91190e">llvm::LoopBase::getUniqueExitBlocks</a></div><div class="ttdeci">void getUniqueExitBlocks(SmallVectorImpl&lt; BlockT * &gt; &amp;ExitBlocks) const</div><div class="ttdoc">Return all unique successor blocks of this loop.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfoImpl_8h_source.html#l00142">LoopInfoImpl.h:142</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a2fd1d2dc14e22227cfa8238778ab87b8"><div class="ttname"><a href="classllvm_1_1Instruction.html#a2fd1d2dc14e22227cfa8238778ab87b8">llvm::Instruction::user_back</a></div><div class="ttdeci">Instruction * user_back()</div><div class="ttdoc">Specialize the methods defined in Value, as we know that an instruction can only be used by other ins...</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00087">Instruction.h:87</a></div></div>
<div class="ttc" id="aclassllvm_1_1PHINode_html_a5ba57877c55dfdbe6e3bbfdacd9ef8c1"><div class="ttname"><a href="classllvm_1_1PHINode.html#a5ba57877c55dfdbe6e3bbfdacd9ef8c1">llvm::PHINode::setIncomingBlock</a></div><div class="ttdeci">void setIncomingBlock(unsigned i, BasicBlock *BB)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02833">Instructions.h:2833</a></div></div>
<div class="ttc" id="aSVEIntrinsicOpts_8cpp_html_a2bb87eb1bcbc74783a83ae945eb8fa36"><div class="ttname"><a href="SVEIntrinsicOpts_8cpp.html#a2bb87eb1bcbc74783a83ae945eb8fa36">INITIALIZE_PASS_DEPENDENCY</a></div><div class="ttdeci">INITIALIZE_PASS_DEPENDENCY(DominatorTreeWrapperPass)</div></div>
<div class="ttc" id="aclassllvm_1_1SmallPriorityWorklist_html"><div class="ttname"><a href="classllvm_1_1SmallPriorityWorklist.html">llvm::SmallPriorityWorklist</a></div><div class="ttdoc">A version of PriorityWorklist that selects small size optimized data structures for the vector and ma...</div><div class="ttdef"><b>Definition:</b> <a href="PriorityWorklist_8h_source.html#l00255">PriorityWorklist.h:255</a></div></div>
<div class="ttc" id="aclassllvm_1_1PHINode_html_a089cccb6f231efee72abc76d0f9c695f"><div class="ttname"><a href="classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">llvm::PHINode::addIncoming</a></div><div class="ttdeci">void addIncoming(Value *V, BasicBlock *BB)</div><div class="ttdoc">Add an incoming value to the end of the PHI list.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02854">Instructions.h:2854</a></div></div>
<div class="ttc" id="alib_2Target_2ARM_2README_8txt_html_ad3a99906764c35b2694ae90fa57744a5"><div class="ttname"><a href="lib_2Target_2ARM_2README_8txt.html#ad3a99906764c35b2694ae90fa57744a5">move</a></div><div class="ttdeci">compiles ldr LCPI1_0 ldr ldr mov lsr tst moveq r1 ldr LCPI1_1 and r0 bx lr It would be better to do something like to fold the shift into the conditional move</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2ARM_2README_8txt_source.html#l00546">README.txt:546</a></div></div>
<div class="ttc" id="aclassllvm_1_1LLVMContext_html"><div class="ttname"><a href="classllvm_1_1LLVMContext.html">llvm::LLVMContext</a></div><div class="ttdoc">This is an important class for using LLVM in a threaded context.</div><div class="ttdef"><b>Definition:</b> <a href="LLVMContext_8h_source.html#l00067">LLVMContext.h:67</a></div></div>
<div class="ttc" id="anamespacellvm_1_1numbers_html_a92f4283d4e0e2ea1776894b3ae93640f"><div class="ttname"><a href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">llvm::numbers::e</a></div><div class="ttdeci">constexpr double e</div><div class="ttdef"><b>Definition:</b> <a href="MathExtras_8h_source.html#l00031">MathExtras.h:31</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseMap_html"><div class="ttname"><a href="classllvm_1_1DenseMap.html">llvm::DenseMap</a></div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00714">DenseMap.h:714</a></div></div>
<div class="ttc" id="aclassllvm_1_1ICFLoopSafetyInfo_html_ac037c7db5068a141e231cab8b2daeef2"><div class="ttname"><a href="classllvm_1_1ICFLoopSafetyInfo.html#ac037c7db5068a141e231cab8b2daeef2">llvm::ICFLoopSafetyInfo::anyBlockMayThrow</a></div><div class="ttdeci">bool anyBlockMayThrow() const override</div><div class="ttdoc">Returns true iff any block of the loop for which this info is contains an instruction that may throw ...</div><div class="ttdef"><b>Definition:</b> <a href="MustExecute_8cpp_source.html#l00075">MustExecute.cpp:75</a></div></div>
<div class="ttc" id="aclassllvm_1_1MemorySSA_html"><div class="ttname"><a href="classllvm_1_1MemorySSA.html">llvm::MemorySSA</a></div><div class="ttdoc">Encapsulates MemorySSA, including all data associated with memory accesses.</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8h_source.html#l00700">MemorySSA.h:700</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopInfoBase_html_a7a7c8e0e4f836c13c015b62e18f386bd"><div class="ttname"><a href="classllvm_1_1LoopInfoBase.html#a7a7c8e0e4f836c13c015b62e18f386bd">llvm::LoopInfoBase::getLoopFor</a></div><div class="ttdeci">LoopT * getLoopFor(const BlockT *BB) const</div><div class="ttdoc">Return the inner most loop that BB lives in.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00992">LoopInfo.h:992</a></div></div>
<div class="ttc" id="aMD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00058">MD5.cpp:58</a></div></div>
<div class="ttc" id="aclassllvm_1_1MemorySSA_html_a4ece07ee1030856099726901d0eef81b"><div class="ttname"><a href="classllvm_1_1MemorySSA.html#a4ece07ee1030856099726901d0eef81b">llvm::MemorySSA::getMemoryAccess</a></div><div class="ttdeci">MemoryUseOrDef * getMemoryAccess(const Instruction *I) const</div><div class="ttdoc">Given a memory Mod/Ref'ing instruction, get the MemorySSA access associated with it.</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8h_source.html#l00717">MemorySSA.h:717</a></div></div>
<div class="ttc" id="aPredIteratorCache_8h_html"><div class="ttname"><a href="PredIteratorCache_8h.html">PredIteratorCache.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_a3720211f6e6389ab53734b989bfb6fce"><div class="ttname"><a href="namespacellvm.html#a3720211f6e6389ab53734b989bfb6fce">llvm::succ_begin</a></div><div class="ttdeci">Interval::succ_iterator succ_begin(Interval *I)</div><div class="ttdoc">succ_begin/succ_end - define methods so that Intervals may be used just like BasicBlocks can with the...</div><div class="ttdef"><b>Definition:</b> <a href="Interval_8h_source.html#l00099">Interval.h:99</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoadInst_html_a2b1268b642e9bf4373b6fb31c482c9ca"><div class="ttname"><a href="classllvm_1_1LoadInst.html#a2b1268b642e9bf4373b6fb31c482c9ca">llvm::LoadInst::setAlignment</a></div><div class="ttdeci">void setAlignment(Align Align)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00224">Instructions.h:224</a></div></div>
<div class="ttc" id="anamespacellvm_1_1cl_html_a10a041239ae1870cfcc064bfaa79fb65"><div class="ttname"><a href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">llvm::cl::init</a></div><div class="ttdeci">initializer&lt; Ty &gt; init(const Ty &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00445">CommandLine.h:445</a></div></div>
<div class="ttc" id="anamespacellvm_html_a8154638df88e4eaa568b67b23d463dac"><div class="ttname"><a href="namespacellvm.html#a8154638df88e4eaa568b67b23d463dac">llvm::make_early_inc_range</a></div><div class="ttdeci">iterator_range&lt; early_inc_iterator_impl&lt; detail::IterOfRange&lt; RangeT &gt; &gt; &gt; make_early_inc_range(RangeT &amp;&amp;Range)</div><div class="ttdoc">Make a range that does early increment to allow mutation of the underlying range without disrupting i...</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l00721">STLExtras.h:721</a></div></div>
<div class="ttc" id="aclassllvm_1_1PHINode_html_ae9562b96f6f3fa41bd36538c080035ee"><div class="ttname"><a href="classllvm_1_1PHINode.html#ae9562b96f6f3fa41bd36538c080035ee">llvm::PHINode::getBasicBlockIndex</a></div><div class="ttdeci">int getBasicBlockIndex(const BasicBlock *BB) const</div><div class="ttdoc">Return the first index of the specified basic block in the value list for this PHI.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02882">Instructions.h:2882</a></div></div>
<div class="ttc" id="aclassllvm_1_1MemoryEffects_html_a2c4da7a8e6662256338058f15e038c31"><div class="ttname"><a href="classllvm_1_1MemoryEffects.html#a2c4da7a8e6662256338058f15e038c31">llvm::MemoryEffects::onlyReadsMemory</a></div><div class="ttdeci">bool onlyReadsMemory() const</div><div class="ttdoc">Whether this function only (at most) reads memory.</div><div class="ttdef"><b>Definition:</b> <a href="ModRef_8h_source.html#l00194">ModRef.h:194</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopBase_html_ac3280e7f76f955403fe17eacf126b90d"><div class="ttname"><a href="classllvm_1_1LoopBase.html#ac3280e7f76f955403fe17eacf126b90d">llvm::LoopBase::getLoopPreheader</a></div><div class="ttdeci">BlockT * getLoopPreheader() const</div><div class="ttdoc">If there is a preheader for this loop, return it.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfoImpl_8h_source.html#l00183">LoopInfoImpl.h:183</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSetImpl_html_abf73a826b5d6f739eb4af48ddf14c5b4"><div class="ttname"><a href="classllvm_1_1SmallPtrSetImpl.html#abf73a826b5d6f739eb4af48ddf14c5b4">llvm::SmallPtrSetImpl::begin</a></div><div class="ttdeci">iterator begin() const</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00403">SmallPtrSet.h:403</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_ae8f5bf5cc06f696b52c709677df00fbf"><div class="ttname"><a href="classllvm_1_1Instruction.html#ae8f5bf5cc06f696b52c709677df00fbf">llvm::Instruction::setDebugLoc</a></div><div class="ttdeci">void setDebugLoc(DebugLoc Loc)</div><div class="ttdoc">Set the debug location information for this instruction.</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00355">Instruction.h:355</a></div></div>
<div class="ttc" id="aclassllvm_1_1ScalarEvolution_html_a804545e5b568edec8b970da32cd37359"><div class="ttname"><a href="classllvm_1_1ScalarEvolution.html#a804545e5b568edec8b970da32cd37359">llvm::ScalarEvolution::forgetValue</a></div><div class="ttdeci">void forgetValue(Value *V)</div><div class="ttdoc">This method should be called by the client when it has changed a value in a way that may effect its v...</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8cpp_source.html#l08523">ScalarEvolution.cpp:8523</a></div></div>
<div class="ttc" id="aclassllvm_1_1ICFLoopSafetyInfo_html_a639eff65ee8e468b3891fbe67db54788"><div class="ttname"><a href="classllvm_1_1ICFLoopSafetyInfo.html#a639eff65ee8e468b3891fbe67db54788">llvm::ICFLoopSafetyInfo::doesNotWriteMemoryBefore</a></div><div class="ttdeci">bool doesNotWriteMemoryBefore(const BasicBlock *BB, const Loop *CurLoop) const</div><div class="ttdoc">Returns true if we could not execute a memory-modifying instruction before we enter BB under assumpti...</div><div class="ttdef"><b>Definition:</b> <a href="MustExecute_8cpp_source.html#l00284">MustExecute.cpp:284</a></div></div>
<div class="ttc" id="aclassllvm_1_1PriorityWorklist_html_adc2ef5f0964becc28dfa58a7abc2f1e7"><div class="ttname"><a href="classllvm_1_1PriorityWorklist.html#adc2ef5f0964becc28dfa58a7abc2f1e7">llvm::PriorityWorklist&lt; T, SmallVector&lt; T, N &gt;, SmallDenseMap&lt; T, ptrdiff_t &gt; &gt;::empty</a></div><div class="ttdeci">bool empty() const</div><div class="ttdoc">Determine if the PriorityWorklist is empty or not.</div><div class="ttdef"><b>Definition:</b> <a href="PriorityWorklist_8h_source.html#l00067">PriorityWorklist.h:67</a></div></div>
<div class="ttc" id="aLICM_8cpp_html_a0bb855d418108ea53140e71d7b35a2cd"><div class="ttname"><a href="LICM_8cpp.html#a0bb855d418108ea53140e71d7b35a2cd">splitPredecessorsOfLoopExit</a></div><div class="ttdeci">static void splitPredecessorsOfLoopExit(PHINode *PN, DominatorTree *DT, LoopInfo *LI, const Loop *CurLoop, LoopSafetyInfo *SafetyInfo, MemorySSAUpdater *MSSAU)</div><div class="ttdef"><b>Definition:</b> <a href="LICM_8cpp_source.html#l01531">LICM.cpp:1531</a></div></div>
<div class="ttc" id="aclassllvm_1_1details_1_1FixedOrScalableQuantity_html_a33880aaca0ad05e5f1557f079305bde5"><div class="ttname"><a href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#a33880aaca0ad05e5f1557f079305bde5">llvm::details::FixedOrScalableQuantity::getFixedValue</a></div><div class="ttdeci">constexpr ScalarTy getFixedValue() const</div><div class="ttdef"><b>Definition:</b> <a href="TypeSize_8h_source.html#l00182">TypeSize.h:182</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseMapBase_html_a0c047f127ed4380a6f383d70bec4eb94"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#a0c047f127ed4380a6f383d70bec4eb94">llvm::DenseMapBase&lt; SmallDenseMap&lt; KeyT, ValueT, 4, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;, KeyT, ValueT, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;::find</a></div><div class="ttdeci">iterator find(const_arg_type_t&lt; KeyT &gt; Val)</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00150">DenseMap.h:150</a></div></div>
<div class="ttc" id="anamespacellvm_html_a9db8c44b250b90e3ab7e4d144e7c9c2e"><div class="ttname"><a href="namespacellvm.html#a9db8c44b250b90e3ab7e4d144e7c9c2e">llvm::ModRefInfo</a></div><div class="ttdeci">ModRefInfo</div><div class="ttdoc">Flags indicating whether a memory access modifies or references memory.</div><div class="ttdef"><b>Definition:</b> <a href="ModRef_8h_source.html#l00027">ModRef.h:27</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopBase_html_ae7ebc88c9b32b51b749bd5bbcfaa5fb8"><div class="ttname"><a href="classllvm_1_1LoopBase.html#ae7ebc88c9b32b51b749bd5bbcfaa5fb8">llvm::LoopBase::hasDedicatedExits</a></div><div class="ttdeci">bool hasDedicatedExits() const</div><div class="ttdoc">Return true if no exit block for the loop has a predecessor that is outside the loop.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfoImpl_8h_source.html#l00112">LoopInfoImpl.h:112</a></div></div>
<div class="ttc" id="aSILowerControlFlow_8cpp_html_a4868c5d81c5ccc98c47aeab6244346a0"><div class="ttname"><a href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a></div><div class="ttdeci">assert(ImpDefSCC.getReg()==AMDGPU::SCC &amp;&amp;ImpDefSCC.isDef())</div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a2711d3bc7c6c769a8f34c7fc3937169d"><div class="ttname"><a href="classllvm_1_1Instruction.html#a2711d3bc7c6c769a8f34c7fc3937169d">llvm::Instruction::mergeDIAssignID</a></div><div class="ttdeci">void mergeDIAssignID(ArrayRef&lt; const Instruction * &gt; SourceInstructions)</div><div class="ttdoc">Merge the DIAssignID metadata from this instruction and those attached to instructions in SourceInstr...</div><div class="ttdef"><b>Definition:</b> <a href="DebugInfo_8cpp_source.html#l00901">DebugInfo.cpp:901</a></div></div>
<div class="ttc" id="aclassllvm_1_1LNICMPass_html_a1ddd3ffe6782be6b893dcf33dcf4e3c0"><div class="ttname"><a href="classllvm_1_1LNICMPass.html#a1ddd3ffe6782be6b893dcf33dcf4e3c0">llvm::LNICMPass::run</a></div><div class="ttdeci">PreservedAnalyses run(LoopNest &amp;L, LoopAnalysisManager &amp;AM, LoopStandardAnalysisResults &amp;AR, LPMUpdater &amp;U)</div><div class="ttdef"><b>Definition:</b> <a href="LICM_8cpp_source.html#l00301">LICM.cpp:301</a></div></div>
<div class="ttc" id="aLICM_8cpp_html_aa6d0cb32febae79312745abec8e550c8"><div class="ttname"><a href="LICM_8cpp.html#aa6d0cb32febae79312745abec8e550c8">SingleThread</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; SingleThread(&quot;licm-force-thread-model-single&quot;, cl::Hidden, cl::init(false), cl::desc(&quot;Force thread model single in LICM pass&quot;))</div></div>
<div class="ttc" id="aclassllvm_1_1OptimizationRemarkEmitter_html_aae6a98aea85aa3af87357cc5448db499"><div class="ttname"><a href="classllvm_1_1OptimizationRemarkEmitter.html#aae6a98aea85aa3af87357cc5448db499">llvm::OptimizationRemarkEmitter::emit</a></div><div class="ttdeci">void emit(DiagnosticInfoOptimizationBase &amp;OptDiag)</div><div class="ttdoc">Output the remark via the diagnostic handler and to the optimization record file.</div><div class="ttdef"><b>Definition:</b> <a href="OptimizationRemarkEmitter_8cpp_source.html#l00079">OptimizationRemarkEmitter.cpp:79</a></div></div>
<div class="ttc" id="aclassllvm_1_1LNICMPass_html_aac0763a4080e98e1e198ea76b2d0ccc5"><div class="ttname"><a href="classllvm_1_1LNICMPass.html#aac0763a4080e98e1e198ea76b2d0ccc5">llvm::LNICMPass::printPipeline</a></div><div class="ttdeci">void printPipeline(raw_ostream &amp;OS, function_ref&lt; StringRef(StringRef)&gt; MapClassName2PassName)</div><div class="ttdef"><b>Definition:</b> <a href="LICM_8cpp_source.html#l00332">LICM.cpp:332</a></div></div>
<div class="ttc" id="aclassllvm_1_1DominatorTree_html_a1a70f2c359aadd76a72aaaede16aca4a"><div class="ttname"><a href="classllvm_1_1DominatorTree.html#a1a70f2c359aadd76a72aaaede16aca4a">llvm::DominatorTree::isReachableFromEntry</a></div><div class="ttdeci">bool isReachableFromEntry(const Use &amp;U) const</div><div class="ttdoc">Provide an overload for a Use.</div><div class="ttdef"><b>Definition:</b> <a href="Dominators_8cpp_source.html#l00335">Dominators.cpp:335</a></div></div>
<div class="ttc" id="aTargetLibraryInfo_8cpp_html_aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053"><div class="ttname"><a href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a></div><div class="ttdeci">@ Ptr</div><div class="ttdef"><b>Definition:</b> <a href="TargetLibraryInfo_8cpp_source.html#l00062">TargetLibraryInfo.cpp:62</a></div></div>
<div class="ttc" id="aLICM_8cpp_html_ae9fc07f464d6601a68b115021375a54b"><div class="ttname"><a href="LICM_8cpp.html#ae9fc07f464d6601a68b115021375a54b">isFreeInLoop</a></div><div class="ttdeci">static bool isFreeInLoop(const Instruction &amp;I, const Loop *CurLoop, const TargetTransformInfo *TTI)</div><div class="ttdoc">Return true if the instruction is free in the loop.</div><div class="ttdef"><b>Definition:</b> <a href="LICM_8cpp_source.html#l01330">LICM.cpp:1330</a></div></div>
<div class="ttc" id="aLoopNestAnalysis_8h_html"><div class="ttname"><a href="LoopNestAnalysis_8h.html">LoopNestAnalysis.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_aa39ca296d9689933bb0279c9ac3ee1fc"><div class="ttname"><a href="namespacellvm.html#aa39ca296d9689933bb0279c9ac3ee1fc">llvm::salvageKnowledge</a></div><div class="ttdeci">void salvageKnowledge(Instruction *I, AssumptionCache *AC=nullptr, DominatorTree *DT=nullptr)</div><div class="ttdoc">Calls BuildAssumeFromInst and if the resulting llvm.assume is valid insert if before I.</div><div class="ttdef"><b>Definition:</b> <a href="AssumeBundleBuilder_8cpp_source.html#l00293">AssumeBundleBuilder.cpp:293</a></div></div>
<div class="ttc" id="anamespacellvm_html_a5efa2c3e00054566f1baaebc766461a4"><div class="ttname"><a href="namespacellvm.html#a5efa2c3e00054566f1baaebc766461a4">llvm::hoistRegion</a></div><div class="ttdeci">bool hoistRegion(DomTreeNode *, AAResults *, LoopInfo *, DominatorTree *, AssumptionCache *, TargetLibraryInfo *, Loop *, MemorySSAUpdater &amp;, ScalarEvolution *, ICFLoopSafetyInfo *, SinkAndHoistLICMFlags &amp;, OptimizationRemarkEmitter *, bool, bool AllowSpeculation)</div><div class="ttdoc">Walk the specified region of the CFG (defined by all blocks dominated by the specified block,...</div><div class="ttdef"><b>Definition:</b> <a href="LICM_8cpp_source.html#l00859">LICM.cpp:859</a></div></div>
<div class="ttc" id="aLICM_8cpp_html_aed7e046ac6f7dd5ff0edb6e7b7a30e2e"><div class="ttname"><a href="LICM_8cpp.html#aed7e046ac6f7dd5ff0edb6e7b7a30e2e">pointerInvalidatedByBlock</a></div><div class="ttdeci">static bool pointerInvalidatedByBlock(BasicBlock &amp;BB, MemorySSA &amp;MSSA, MemoryUse &amp;MU)</div><div class="ttdef"><b>Definition:</b> <a href="LICM_8cpp_source.html#l02377">LICM.cpp:2377</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopNest_html_ac9a27bb5250b3aadddc4696c07678dd0"><div class="ttname"><a href="classllvm_1_1LoopNest.html#ac9a27bb5250b3aadddc4696c07678dd0">llvm::LoopNest::getOutermostLoop</a></div><div class="ttdeci">Loop &amp; getOutermostLoop() const</div><div class="ttdoc">Return the outermost loop in the loop nest.</div><div class="ttdef"><b>Definition:</b> <a href="LoopNestAnalysis_8h_source.html#l00080">LoopNestAnalysis.h:80</a></div></div>
<div class="ttc" id="aclassllvm_1_1MemorySSAAnalysis_html"><div class="ttname"><a href="classllvm_1_1MemorySSAAnalysis.html">llvm::MemorySSAAnalysis</a></div><div class="ttdoc">An analysis that produces MemorySSA for a function.</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8h_source.html#l00936">MemorySSA.h:936</a></div></div>
<div class="ttc" id="anamespacellvm_html_a0690f49d8a34d0f21d523c6ad489028e"><div class="ttname"><a href="namespacellvm.html#a0690f49d8a34d0f21d523c6ad489028e">llvm::collectChildrenInLoop</a></div><div class="ttdeci">SmallVector&lt; DomTreeNode *, 16 &gt; collectChildrenInLoop(DomTreeNode *N, const Loop *CurLoop)</div><div class="ttdoc">Does a BFS from a given node to all of its children inside a given loop.</div><div class="ttdef"><b>Definition:</b> <a href="LoopUtils_8cpp_source.html#l00450">LoopUtils.cpp:450</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSetImpl_html_a1f475b0df44ebd7169e720fa1bf9169e"><div class="ttname"><a href="classllvm_1_1SmallPtrSetImpl.html#a1f475b0df44ebd7169e720fa1bf9169e">llvm::SmallPtrSetImpl::count</a></div><div class="ttdeci">size_type count(ConstPtrType Ptr) const</div><div class="ttdoc">count - Return 1 if the specified pointer is in the set, 0 otherwise.</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00383">SmallPtrSet.h:383</a></div></div>
<div class="ttc" id="aclassllvm_1_1SetVector_html_a72d928b7fc2c5f2d56c6ac0265fd9c6e"><div class="ttname"><a href="classllvm_1_1SetVector.html#a72d928b7fc2c5f2d56c6ac0265fd9c6e">llvm::SetVector&lt; T, SmallVector&lt; T, N &gt;, SmallDenseSet&lt; T, N &gt; &gt;::insert</a></div><div class="ttdeci">bool insert(const value_type &amp;X)</div><div class="ttdoc">Insert a new element into the SetVector.</div><div class="ttdef"><b>Definition:</b> <a href="SetVector_8h_source.html#l00141">SetVector.h:141</a></div></div>
<div class="ttc" id="aclassllvm_1_1SinkAndHoistLICMFlags_html_a000032fb000f184a0e40d407d3c68a9b"><div class="ttname"><a href="classllvm_1_1SinkAndHoistLICMFlags.html#a000032fb000f184a0e40d407d3c68a9b">llvm::SinkAndHoistLICMFlags::NoOfMemAccTooLarge</a></div><div class="ttdeci">bool NoOfMemAccTooLarge</div><div class="ttdef"><b>Definition:</b> <a href="LoopUtils_8h_source.html#l00131">LoopUtils.h:131</a></div></div>
<div class="ttc" id="aclassllvm_1_1ScalarEvolution_html_abb9c0178bec51fd25f95b4399faa569c"><div class="ttname"><a href="classllvm_1_1ScalarEvolution.html#abb9c0178bec51fd25f95b4399faa569c">llvm::ScalarEvolution::forgetLoopDispositions</a></div><div class="ttdeci">void forgetLoopDispositions()</div><div class="ttdoc">Called when the client has changed the disposition of values in this loop.</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8cpp_source.html#l08550">ScalarEvolution.cpp:8550</a></div></div>
<div class="ttc" id="aclassllvm_1_1MemorySSAWalker_html_a95d0e423957d029a78e5868f539e9cce"><div class="ttname"><a href="classllvm_1_1MemorySSAWalker.html#a95d0e423957d029a78e5868f539e9cce">llvm::MemorySSAWalker::getClobberingMemoryAccess</a></div><div class="ttdeci">MemoryAccess * getClobberingMemoryAccess(const Instruction *I, BatchAAResults &amp;AA)</div><div class="ttdoc">Given a memory Mod/Ref/ModRef'ing instruction, calling this will give you the nearest dominating Memo...</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8h_source.html#l01046">MemorySSA.h:1046</a></div></div>
<div class="ttc" id="aLICM_8cpp_html_ada0f9c9edeb41edd1e5fc9e879b9dafc"><div class="ttname"><a href="LICM_8cpp.html#ada0f9c9edeb41edd1e5fc9e879b9dafc">PointersAndHasReadsOutsideSet</a></div><div class="ttdeci">std::pair&lt; SmallSetVector&lt; Value *, 8 &gt;, bool &gt; PointersAndHasReadsOutsideSet</div><div class="ttdef"><b>Definition:</b> <a href="LICM_8cpp_source.html#l00183">LICM.cpp:183</a></div></div>
<div class="ttc" id="aTargetOptions_8h_html"><div class="ttname"><a href="TargetOptions_8h.html">TargetOptions.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1MemorySSAUpdater_html_acf9a0bb25aae89d274ee9ae7dd0cf9b2"><div class="ttname"><a href="classllvm_1_1MemorySSAUpdater.html#acf9a0bb25aae89d274ee9ae7dd0cf9b2">llvm::MemorySSAUpdater::createMemoryAccessAfter</a></div><div class="ttdeci">MemoryUseOrDef * createMemoryAccessAfter(Instruction *I, MemoryAccess *Definition, MemoryAccess *InsertPt)</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSAUpdater_8cpp_source.html#l01447">MemorySSAUpdater.cpp:1447</a></div></div>
<div class="ttc" id="anamespacellvm_1_1Sched_html_ac1547cccaf660851fcd6863d1e60309eac13545a6345c7d5b3c9cc8932ad3b0e9"><div class="ttname"><a href="namespacellvm_1_1Sched.html#ac1547cccaf660851fcd6863d1e60309eac13545a6345c7d5b3c9cc8932ad3b0e9">llvm::Sched::Source</a></div><div class="ttdeci">@ Source</div><div class="ttdef"><b>Definition:</b> <a href="TargetLowering_8h_source.html#l00100">TargetLowering.h:100</a></div></div>
<div class="ttc" id="aLoads_8cpp_html_a3e49ed1824b63334071840d20aab03ba"><div class="ttname"><a href="Loads_8cpp.html#a3e49ed1824b63334071840d20aab03ba">isDereferenceableAndAlignedPointer</a></div><div class="ttdeci">static bool isDereferenceableAndAlignedPointer(const Value *V, Align Alignment, const APInt &amp;Size, const DataLayout &amp;DL, const Instruction *CtxI, AssumptionCache *AC, const DominatorTree *DT, const TargetLibraryInfo *TLI, SmallPtrSetImpl&lt; const Value * &gt; &amp;Visited, unsigned MaxDepth)</div><div class="ttdoc">Test if V is always a pointer to allocated and suitably aligned memory for a simple load or store.</div><div class="ttdef"><b>Definition:</b> <a href="Loads_8cpp_source.html#l00039">Loads.cpp:39</a></div></div>
<div class="ttc" id="aclassllvm_1_1AssumptionCacheTracker_html"><div class="ttname"><a href="classllvm_1_1AssumptionCacheTracker.html">llvm::AssumptionCacheTracker</a></div><div class="ttdoc">An immutable pass that tracks lazily created AssumptionCache objects.</div><div class="ttdef"><b>Definition:</b> <a href="AssumptionCache_8h_source.html#l00202">AssumptionCache.h:202</a></div></div>
<div class="ttc" id="aclassllvm_1_1ArrayRef_html"><div class="ttname"><a href="classllvm_1_1ArrayRef.html">llvm::ArrayRef</a></div><div class="ttdoc">ArrayRef - Represent a constant reference to an array (0 or more elements consecutively in memory),...</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00033">APInt.h:33</a></div></div>
<div class="ttc" id="anamespacellvm_html_a627b2f86ac433d829482d5a5a0f50668"><div class="ttname"><a href="namespacellvm.html#a627b2f86ac433d829482d5a5a0f50668">llvm::isInstructionTriviallyDead</a></div><div class="ttdeci">bool isInstructionTriviallyDead(Instruction *I, const TargetLibraryInfo *TLI=nullptr)</div><div class="ttdoc">Return true if the result produced by the instruction is not used, and the instruction will return.</div><div class="ttdef"><b>Definition:</b> <a href="Transforms_2Utils_2Local_8cpp_source.html#l00398">Local.cpp:398</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopInfo_html"><div class="ttname"><a href="classllvm_1_1LoopInfo.html">llvm::LoopInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l01108">LoopInfo.h:1108</a></div></div>
<div class="ttc" id="astructllvm_1_1AAMDNodes_html_a6b173e97523275314f3f2b433a5f71a9"><div class="ttname"><a href="structllvm_1_1AAMDNodes.html#a6b173e97523275314f3f2b433a5f71a9">llvm::AAMDNodes::merge</a></div><div class="ttdeci">AAMDNodes merge(const AAMDNodes &amp;Other) const</div><div class="ttdoc">Given two sets of AAMDNodes applying to potentially different locations, determine the best AAMDNodes...</div><div class="ttdef"><b>Definition:</b> <a href="TypeBasedAliasAnalysis_8cpp_source.html#l00522">TypeBasedAliasAnalysis.cpp:522</a></div></div>
<div class="ttc" id="aclassllvm_1_1OptimizationRemarkEmitter_html"><div class="ttname"><a href="classllvm_1_1OptimizationRemarkEmitter.html">llvm::OptimizationRemarkEmitter</a></div><div class="ttdoc">The optimization diagnostic interface.</div><div class="ttdef"><b>Definition:</b> <a href="OptimizationRemarkEmitter_8h_source.html#l00033">OptimizationRemarkEmitter.h:33</a></div></div>
<div class="ttc" id="aclassllvm_1_1MemorySSAUpdater_html_a21fc5eae685ef3e2dce4403a75d5ff2f"><div class="ttname"><a href="classllvm_1_1MemorySSAUpdater.html#a21fc5eae685ef3e2dce4403a75d5ff2f">llvm::MemorySSAUpdater::insertDef</a></div><div class="ttdeci">void insertDef(MemoryDef *Def, bool RenameUses=false)</div><div class="ttdoc">Insert a definition into the MemorySSA IR.</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSAUpdater_8cpp_source.html#l00307">MemorySSAUpdater.cpp:307</a></div></div>
<div class="ttc" id="anamespacellvm_html_a61d13d6824ec46c31260a4fd0997eda0"><div class="ttname"><a href="namespacellvm.html#a61d13d6824ec46c31260a4fd0997eda0">llvm::any_of</a></div><div class="ttdeci">bool any_of(R &amp;&amp;range, UnaryPredicate P)</div><div class="ttdoc">Provide wrappers to std::any_of which take ranges instead of having to pass begin/end explicitly.</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l01742">STLExtras.h:1742</a></div></div>
<div class="ttc" id="aDataLayout_8h_html"><div class="ttname"><a href="DataLayout_8h.html">DataLayout.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1TinyPtrVector_html_aac784c7664f3f6b8076756c6fb0eed74"><div class="ttname"><a href="classllvm_1_1TinyPtrVector.html#aac784c7664f3f6b8076756c6fb0eed74">llvm::TinyPtrVector::size</a></div><div class="ttdeci">unsigned size() const</div><div class="ttdef"><b>Definition:</b> <a href="TinyPtrVector_8h_source.html#l00171">TinyPtrVector.h:171</a></div></div>
<div class="ttc" id="aclassllvm_1_1MemorySSA_html_a2ef6f9107316d963f20b9003b7668c4e"><div class="ttname"><a href="classllvm_1_1MemorySSA.html#a2ef6f9107316d963f20b9003b7668c4e">llvm::MemorySSA::getSkipSelfWalker</a></div><div class="ttdeci">MemorySSAWalker * getSkipSelfWalker()</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8cpp_source.html#l01571">MemorySSA.cpp:1571</a></div></div>
<div class="ttc" id="aclassllvm_1_1StringRef_html"><div class="ttname"><a href="classllvm_1_1StringRef.html">llvm::StringRef</a></div><div class="ttdoc">StringRef - Represent a constant reference to a string, i.e.</div><div class="ttdef"><b>Definition:</b> <a href="StringRef_8h_source.html#l00050">StringRef.h:50</a></div></div>
<div class="ttc" id="aclassllvm_1_1AssumptionCache_html"><div class="ttname"><a href="classllvm_1_1AssumptionCache.html">llvm::AssumptionCache</a></div><div class="ttdoc">A cache of @llvm.assume calls within a function.</div><div class="ttdef"><b>Definition:</b> <a href="AssumptionCache_8h_source.html#l00042">AssumptionCache.h:42</a></div></div>
<div class="ttc" id="aLoopPass_8h_html"><div class="ttname"><a href="LoopPass_8h.html">LoopPass.h</a></div></div>
<div class="ttc" id="aLICM_8cpp_html_a7db10a6ced2f9a67bd4f40d5ed05489d"><div class="ttname"><a href="LICM_8cpp.html#a7db10a6ced2f9a67bd4f40d5ed05489d">Motion</a></div><div class="ttdeci">Loop Invariant Code Motion</div><div class="ttdef"><b>Definition:</b> <a href="LICM_8cpp_source.html#l00350">LICM.cpp:350</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_a6393a2d4fe7e10b28a0dcc35f881567b"><div class="ttname"><a href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">llvm::Value::getType</a></div><div class="ttdeci">Type * getType() const</div><div class="ttdoc">All values are typed, get the type of this value.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00255">Value.h:255</a></div></div>
<div class="ttc" id="aclassllvm_1_1MemorySSA_html_a65b7c715bf28eb17cfd012dd9bc3ad4b"><div class="ttname"><a href="classllvm_1_1MemorySSA.html#a65b7c715bf28eb17cfd012dd9bc3ad4b">llvm::MemorySSA::getBlockDefs</a></div><div class="ttdeci">const DefsList * getBlockDefs(const BasicBlock *BB) const</div><div class="ttdoc">Return the list of MemoryDef's and MemoryPhi's for a given basic block.</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8h_source.html#l00765">MemorySSA.h:765</a></div></div>
<div class="ttc" id="anamespacellvm_html_a894b02a1122caccc0ed5eb9b321d22bb"><div class="ttname"><a href="namespacellvm.html#a894b02a1122caccc0ed5eb9b321d22bb">llvm::isNotVisibleOnUnwind</a></div><div class="ttdeci">bool isNotVisibleOnUnwind(const Value *Object, bool &amp;RequiresNoCaptureBeforeUnwind)</div><div class="ttdoc">Return true if Object memory is not visible after an unwind, in the sense that program semantics cann...</div><div class="ttdef"><b>Definition:</b> <a href="AliasAnalysis_8cpp_source.html#l00916">AliasAnalysis.cpp:916</a></div></div>
<div class="ttc" id="anamespacellvm_html_ab7a106c600cf32852298d9041e8c8044"><div class="ttname"><a href="namespacellvm.html#ab7a106c600cf32852298d9041e8c8044">llvm::appendLoopsToWorklist</a></div><div class="ttdeci">void appendLoopsToWorklist(RangeT &amp;&amp;, SmallPriorityWorklist&lt; Loop *, 4 &gt; &amp;)</div><div class="ttdoc">Utility that implements appending of loops onto a worklist given a range.</div><div class="ttdef"><b>Definition:</b> <a href="LoopUtils_8cpp_source.html#l01524">LoopUtils.cpp:1524</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopBase_html_a0fa33dfd6ffaaae721fc05b6941263aa"><div class="ttname"><a href="classllvm_1_1LoopBase.html#a0fa33dfd6ffaaae721fc05b6941263aa">llvm::LoopBase::isOutermost</a></div><div class="ttdeci">bool isOutermost() const</div><div class="ttdoc">Return true if the loop does not have a parent (natural) loop.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00185">LoopInfo.h:185</a></div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisUsage_html_a884f90190bca4bd354f2d5c91c264028"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html#a884f90190bca4bd354f2d5c91c264028">llvm::AnalysisUsage::addPreserved</a></div><div class="ttdeci">AnalysisUsage &amp; addPreserved()</div><div class="ttdoc">Add the specified Pass class to the set of analyses preserved by this pass.</div><div class="ttdef"><b>Definition:</b> <a href="PassAnalysisSupport_8h_source.html#l00098">PassAnalysisSupport.h:98</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_a3ab5fc45117b450e8bb04e564cb6e5f2"><div class="ttname"><a href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">llvm::Value::replaceAllUsesWith</a></div><div class="ttdeci">void replaceAllUsesWith(Value *V)</div><div class="ttdoc">Change all uses of this to point to a new Value.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00532">Value.cpp:532</a></div></div>
<div class="ttc" id="aREADME__ALTIVEC_8txt_html_a015846b6188ce15e08cd94c74a9df1a3"><div class="ttname"><a href="README__ALTIVEC_8txt.html#a015846b6188ce15e08cd94c74a9df1a3">A</a></div><div class="ttdeci">* A</div><div class="ttdef"><b>Definition:</b> <a href="README__ALTIVEC_8txt_source.html#l00089">README_ALTIVEC.txt:89</a></div></div>
<div class="ttc" id="anamespacellvm_1_1ms__demangle_html_a851a17f7dc73f9988807242926dcc645a03c2e7e41ffc181a4e84080b4710e81e"><div class="ttname"><a href="namespacellvm_1_1ms__demangle.html#a851a17f7dc73f9988807242926dcc645a03c2e7e41ffc181a4e84080b4710e81e">llvm::ms_demangle::IntrinsicFunctionKind::New</a></div><div class="ttdeci">@ New</div></div>
<div class="ttc" id="astructllvm_1_1OperandBundleUse_html"><div class="ttname"><a href="structllvm_1_1OperandBundleUse.html">llvm::OperandBundleUse</a></div><div class="ttdoc">A lightweight accessor for an operand bundle meant to be passed around by value.</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l01079">InstrTypes.h:1079</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_ab3fc0225d8aaf8434026c3573f961f2c"><div class="ttname"><a href="classllvm_1_1Value.html#ab3fc0225d8aaf8434026c3573f961f2c">llvm::Value::getContext</a></div><div class="ttdeci">LLVMContext &amp; getContext() const</div><div class="ttdoc">All values hold a context through their type.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00994">Value.cpp:994</a></div></div>
<div class="ttc" id="aAArch64SLSHardening_8cpp_html_ad467c4ab9119043f9b7750ab986be61a"><div class="ttname"><a href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a></div><div class="ttdeci">MachineBasicBlock MachineBasicBlock::iterator DebugLoc DL</div><div class="ttdef"><b>Definition:</b> <a href="AArch64SLSHardening_8cpp_source.html#l00076">AArch64SLSHardening.cpp:76</a></div></div>
<div class="ttc" id="astructllvm_1_1LoopStandardAnalysisResults_html_aa09379aa4435be95eb717dd9b5d8b4c5"><div class="ttname"><a href="structllvm_1_1LoopStandardAnalysisResults.html#aa09379aa4435be95eb717dd9b5d8b4c5">llvm::LoopStandardAnalysisResults::LI</a></div><div class="ttdeci">LoopInfo &amp; LI</div><div class="ttdef"><b>Definition:</b> <a href="LoopAnalysisManager_8h_source.html#l00055">LoopAnalysisManager.h:55</a></div></div>
<div class="ttc" id="alib_2Target_2ARM_2README_8txt_html_a1b45f45820a60c09244a87eb59824aec"><div class="ttname"><a href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a></div><div class="ttdeci">add sub stmia L5 ldr r0 bl L_printf $stub Instead of a and a wouldn t it be better to do three moves *Return an aggregate type is even return S</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2ARM_2README_8txt_source.html#l00210">README.txt:210</a></div></div>
<div class="ttc" id="aclassllvm_1_1ICFLoopSafetyInfo_html_acaf635590a74bf4fdc2822b6f877afb7"><div class="ttname"><a href="classllvm_1_1ICFLoopSafetyInfo.html#acaf635590a74bf4fdc2822b6f877afb7">llvm::ICFLoopSafetyInfo::insertInstructionTo</a></div><div class="ttdeci">void insertInstructionTo(const Instruction *Inst, const BasicBlock *BB)</div><div class="ttdoc">Inform the safety info that we are planning to insert a new instruction Inst into the basic block BB.</div><div class="ttdef"><b>Definition:</b> <a href="MustExecute_8cpp_source.html#l00093">MustExecute.cpp:93</a></div></div>
<div class="ttc" id="aclassllvm_1_1DominatorTreeBase_html_ade6d93f9485649bade540a37ec163058"><div class="ttname"><a href="classllvm_1_1DominatorTreeBase.html#ade6d93f9485649bade540a37ec163058">llvm::DominatorTreeBase::properlyDominates</a></div><div class="ttdeci">bool properlyDominates(const DomTreeNodeBase&lt; NodeT &gt; *A, const DomTreeNodeBase&lt; NodeT &gt; *B) const</div><div class="ttdoc">properlyDominates - Returns true iff A dominates B and A != B.</div><div class="ttdef"><b>Definition:</b> <a href="GenericDomTree_8h_source.html#l00408">GenericDomTree.h:408</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopNest_html_ac047689641fc4a651c1fc58b85dc555b"><div class="ttname"><a href="classllvm_1_1LoopNest.html#ac047689641fc4a651c1fc58b85dc555b">llvm::LoopNest::getParent</a></div><div class="ttdeci">Function * getParent() const</div><div class="ttdoc">Return the function to which the loop-nest belongs.</div><div class="ttdef"><b>Definition:</b> <a href="LoopNestAnalysis_8h_source.html#l00176">LoopNestAnalysis.h:176</a></div></div>
<div class="ttc" id="aSSAUpdater_8h_html"><div class="ttname"><a href="SSAUpdater_8h.html">SSAUpdater.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantInt_html_aa8f4be0661aa64f5b1f20b15e93bb403"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#aa8f4be0661aa64f5b1f20b15e93bb403">llvm::ConstantInt::getSExtValue</a></div><div class="ttdeci">int64_t getSExtValue() const</div><div class="ttdoc">Return the constant as a 64-bit integer value after it has been sign extended as appropriate for the ...</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00147">Constants.h:147</a></div></div>
<div class="ttc" id="aclassllvm_1_1Loop_html_a54e82aea5fab8cf3a878003444f25ee7"><div class="ttname"><a href="classllvm_1_1Loop.html#a54e82aea5fab8cf3a878003444f25ee7">llvm::Loop::hasLoopInvariantOperands</a></div><div class="ttdeci">bool hasLoopInvariantOperands(const Instruction *I) const</div><div class="ttdoc">Return true if all the operands of the specified instruction are loop invariant.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8cpp_source.html#l00066">LoopInfo.cpp:66</a></div></div>
<div class="ttc" id="aclassllvm_1_1MemoryAccess_html"><div class="ttname"><a href="classllvm_1_1MemoryAccess.html">llvm::MemoryAccess</a></div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8h_source.html#l00142">MemorySSA.h:142</a></div></div>
<div class="ttc" id="aclassllvm_1_1DomTreeNodeBase_html"><div class="ttname"><a href="classllvm_1_1DomTreeNodeBase.html">llvm::DomTreeNodeBase&lt; BasicBlock &gt;</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_adb5c319f5905c1d3ca9eb5df546388c5"><div class="ttname"><a href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">llvm::Value::getName</a></div><div class="ttdeci">StringRef getName() const</div><div class="ttdoc">Return a constant reference to the value's name.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00308">Value.cpp:308</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoadInst_html"><div class="ttname"><a href="classllvm_1_1LoadInst.html">llvm::LoadInst</a></div><div class="ttdoc">An instruction for reading from memory.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00177">Instructions.h:177</a></div></div>
<div class="ttc" id="aclassllvm_1_1DominatorTreeBase_html_a4d417f72d43729d07de3b3d2f58893cc"><div class="ttname"><a href="classllvm_1_1DominatorTreeBase.html#a4d417f72d43729d07de3b3d2f58893cc">llvm::DominatorTreeBase::addNewBlock</a></div><div class="ttdeci">DomTreeNodeBase&lt; NodeT &gt; * addNewBlock(NodeT *BB, NodeT *DomBB)</div><div class="ttdoc">Add a new node to the dominator tree information.</div><div class="ttdef"><b>Definition:</b> <a href="GenericDomTree_8h_source.html#l00636">GenericDomTree.h:636</a></div></div>
<div class="ttc" id="aSampleProfWriter_8cpp_html_ac5f3689931c7238da06ba00cf1002c62"><div class="ttname"><a href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a></div><div class="ttdeci">raw_pwrite_stream &amp; OS</div><div class="ttdef"><b>Definition:</b> <a href="SampleProfWriter_8cpp_source.html#l00053">SampleProfWriter.cpp:53</a></div></div>
<div class="ttc" id="aAArch64AdvSIMDScalarPass_8cpp_html_aacd2ab195054a3e6a74bfbb9d5d571c8"><div class="ttname"><a href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a></div><div class="ttdeci">unsigned const MachineRegisterInfo * MRI</div><div class="ttdef"><b>Definition:</b> <a href="AArch64AdvSIMDScalarPass_8cpp_source.html#l00105">AArch64AdvSIMDScalarPass.cpp:105</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSetImplBase_html_a0e1c3175b0ac22fe3853651c28e1ecb8"><div class="ttname"><a href="classllvm_1_1SmallPtrSetImplBase.html#a0e1c3175b0ac22fe3853651c28e1ecb8">llvm::SmallPtrSetImplBase::size</a></div><div class="ttdeci">size_type size() const</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00093">SmallPtrSet.h:93</a></div></div>
<div class="ttc" id="anamespacellvm_html_ac78c09ae232b2ce188ff590d51e3c268"><div class="ttname"><a href="namespacellvm.html#ac78c09ae232b2ce188ff590d51e3c268">llvm::find_if</a></div><div class="ttdeci">auto find_if(R &amp;&amp;Range, UnaryPredicate P)</div><div class="ttdoc">Provide wrappers to std::find_if which take ranges instead of having to pass begin/end explicitly.</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l01762">STLExtras.h:1762</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_ab706e7ebb1969c5e34f28bfcf2ff719e"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#ab706e7ebb1969c5e34f28bfcf2ff719e">llvm::BasicBlock::front</a></div><div class="ttdeci">const Instruction &amp; front() const</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00326">BasicBlock.h:326</a></div></div>
<div class="ttc" id="aclassllvm_1_1MemorySSA_html_acd30a2d319950c138d97d5b3356342b5"><div class="ttname"><a href="classllvm_1_1MemorySSA.html#acd30a2d319950c138d97d5b3356342b5">llvm::MemorySSA::ensureOptimizedUses</a></div><div class="ttdeci">void ensureOptimizedUses()</div><div class="ttdoc">By default, uses are not optimized during MemorySSA construction.</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8cpp_source.html#l02143">MemorySSA.cpp:2143</a></div></div>
<div class="ttc" id="aclassllvm_1_1ICFLoopSafetyInfo_html_aac2d5ff012ca10eb45c8b8cbca188dd6"><div class="ttname"><a href="classllvm_1_1ICFLoopSafetyInfo.html#aac2d5ff012ca10eb45c8b8cbca188dd6">llvm::ICFLoopSafetyInfo::removeInstruction</a></div><div class="ttdeci">void removeInstruction(const Instruction *Inst)</div><div class="ttdoc">Inform safety info that we are planning to remove the instruction Inst from its block.</div><div class="ttdef"><b>Definition:</b> <a href="MustExecute_8cpp_source.html#l00099">MustExecute.cpp:99</a></div></div>
<div class="ttc" id="aHWAddressSanitizer_8cpp_html_ad5c3fea3e9699b6299cc037334eeb83e"><div class="ttname"><a href="HWAddressSanitizer_8cpp.html#ad5c3fea3e9699b6299cc037334eeb83e">getPointerOperandIndex</a></div><div class="ttdeci">static unsigned getPointerOperandIndex(Instruction *I)</div><div class="ttdef"><b>Definition:</b> <a href="HWAddressSanitizer_8cpp_source.html#l00777">HWAddressSanitizer.cpp:777</a></div></div>
<div class="ttc" id="anamespacestd_html"><div class="ttname"><a href="namespacestd.html">std</a></div><div class="ttdef"><b>Definition:</b> <a href="BitVector_8h_source.html#l00851">BitVector.h:851</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_acd2fbee42afeb868be98aaae56528636"><div class="ttname"><a href="classllvm_1_1Value.html#acd2fbee42afeb868be98aaae56528636">llvm::Value::user_iterator</a></div><div class="ttdeci">user_iterator_impl&lt; User &gt; user_iterator</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00390">Value.h:390</a></div></div>
<div class="ttc" id="aclassllvm_1_1MemoryUseOrDef_html_abc4e1b6cc483cfd57ca75c4ab92bd360"><div class="ttname"><a href="classllvm_1_1MemoryUseOrDef.html#abc4e1b6cc483cfd57ca75c4ab92bd360">llvm::MemoryUseOrDef::getDefiningAccess</a></div><div class="ttdeci">MemoryAccess * getDefiningAccess() const</div><div class="ttdoc">Get the access that produces the memory state used by this Use.</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8h_source.html#l00262">MemorySSA.h:262</a></div></div>
<div class="ttc" id="astructllvm_1_1LoopStandardAnalysisResults_html_a3444a9359f5f17f1694f82c41d5fd574"><div class="ttname"><a href="structllvm_1_1LoopStandardAnalysisResults.html#a3444a9359f5f17f1694f82c41d5fd574">llvm::LoopStandardAnalysisResults::TTI</a></div><div class="ttdeci">TargetTransformInfo &amp; TTI</div><div class="ttdef"><b>Definition:</b> <a href="LoopAnalysisManager_8h_source.html#l00058">LoopAnalysisManager.h:58</a></div></div>
<div class="ttc" id="alib_2Target_2PowerPC_2README_8txt_html_aa91241c8c54738377749dc47ee489e0d"><div class="ttname"><a href="lib_2Target_2PowerPC_2README_8txt.html#aa91241c8c54738377749dc47ee489e0d">get</a></div><div class="ttdeci">Should compile to something r4 addze r3 instead we get</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2PowerPC_2README_8txt_source.html#l00024">README.txt:24</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseMapBase_html_a65520b9c67759099e313d0f4e7b5ff9e"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#a65520b9c67759099e313d0f4e7b5ff9e">llvm::DenseMapBase&lt; SmallDenseMap&lt; KeyT, ValueT, 4, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;, KeyT, ValueT, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00084">DenseMap.h:84</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AMDGPU_1_1SendMsg_html_a8594419a4ddfad2c9a79279c490e466d"><div class="ttname"><a href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">llvm::AMDGPU::SendMsg::Op</a></div><div class="ttdeci">Op</div><div class="ttdef"><b>Definition:</b> <a href="SIDefines_8h_source.html#l00357">SIDefines.h:357</a></div></div>
<div class="ttc" id="aclassllvm_1_1ICFLoopSafetyInfo_html"><div class="ttname"><a href="classllvm_1_1ICFLoopSafetyInfo.html">llvm::ICFLoopSafetyInfo</a></div><div class="ttdoc">This implementation of LoopSafetyInfo use ImplicitControlFlowTracking to give precise answers on &quot;may...</div><div class="ttdef"><b>Definition:</b> <a href="MustExecute_8h_source.html#l00132">MustExecute.h:132</a></div></div>
<div class="ttc" id="aclassllvm_1_1PreservedAnalyses_html_a1258a1ff55557c27684010ebd7283712"><div class="ttname"><a href="classllvm_1_1PreservedAnalyses.html#a1258a1ff55557c27684010ebd7283712">llvm::PreservedAnalyses::all</a></div><div class="ttdeci">static PreservedAnalyses all()</div><div class="ttdoc">Construct a special preserved set that preserves all passes.</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00158">PassManager.h:158</a></div></div>
<div class="ttc" id="aclassllvm_1_1PHINode_html_ab0ff669b12c20c07137705c38872ec63"><div class="ttname"><a href="classllvm_1_1PHINode.html#ab0ff669b12c20c07137705c38872ec63">llvm::PHINode::Create</a></div><div class="ttdeci">static PHINode * Create(Type *Ty, unsigned NumReservedValues, const Twine &amp;NameStr=&quot;&quot;, Instruction *InsertBefore=nullptr)</div><div class="ttdoc">Constructors - NumReservedValues is a hint for the number of incoming edges that this phi node will h...</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02750">Instructions.h:2750</a></div></div>
<div class="ttc" id="aclassllvm_1_1MemorySSAUpdater_html_ae6b63bcaa1f6638b608f911cd04341e2"><div class="ttname"><a href="classllvm_1_1MemorySSAUpdater.html#ae6b63bcaa1f6638b608f911cd04341e2">llvm::MemorySSAUpdater::wireOldPredecessorsToNewImmediatePredecessor</a></div><div class="ttdeci">void wireOldPredecessorsToNewImmediatePredecessor(BasicBlock *Old, BasicBlock *New, ArrayRef&lt; BasicBlock * &gt; Preds, bool IdenticalEdgesWereMerged=true)</div><div class="ttdoc">A new empty BasicBlock (New) now branches directly to Old.</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSAUpdater_8cpp_source.html#l01268">MemorySSAUpdater.cpp:1268</a></div></div>
<div class="ttc" id="anamespacellvm_html_a5eeaf08e96168c2cac8960f87f0ef360"><div class="ttname"><a href="namespacellvm.html#a5eeaf08e96168c2cac8960f87f0ef360">llvm::pred_end</a></div><div class="ttdeci">Interval::pred_iterator pred_end(Interval *I)</div><div class="ttdef"><b>Definition:</b> <a href="Interval_8h_source.html#l00112">Interval.h:112</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantFP_html_a5eb8f7a5d3cfdd127ad9db2e425e14eb"><div class="ttname"><a href="classllvm_1_1ConstantFP.html#a5eb8f7a5d3cfdd127ad9db2e425e14eb">llvm::ConstantFP::get</a></div><div class="ttdeci">static Constant * get(Type *Ty, double V)</div><div class="ttdoc">This returns a ConstantFP, or a vector containing a splat of a ConstantFP, for the specified value in...</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00934">Constants.cpp:934</a></div></div>
<div class="ttc" id="aclassllvm_1_1TypeSize_html"><div class="ttname"><a href="classllvm_1_1TypeSize.html">llvm::TypeSize</a></div><div class="ttdef"><b>Definition:</b> <a href="TypeSize_8h_source.html#l00314">TypeSize.h:314</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a4dd9b6c5bb93e01393c47dbe60f8b23f"><div class="ttname"><a href="classllvm_1_1Instruction.html#a4dd9b6c5bb93e01393c47dbe60f8b23f">llvm::Instruction::setAAMetadata</a></div><div class="ttdeci">void setAAMetadata(const AAMDNodes &amp;N)</div><div class="ttdoc">Sets the AA metadata on this instruction from the AAMDNodes structure.</div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8cpp_source.html#l01513">Metadata.cpp:1513</a></div></div>
<div class="ttc" id="aclassllvm_1_1LICMPass_html_a60cd761f9058b8203f4a4d8fbb31fb98"><div class="ttname"><a href="classllvm_1_1LICMPass.html#a60cd761f9058b8203f4a4d8fbb31fb98">llvm::LICMPass::printPipeline</a></div><div class="ttdeci">void printPipeline(raw_ostream &amp;OS, function_ref&lt; StringRef(StringRef)&gt; MapClassName2PassName)</div><div class="ttdef"><b>Definition:</b> <a href="LICM_8cpp_source.html#l00291">LICM.cpp:291</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopBase_html_a58c5b170ea68b41e94ebb0019523a68f"><div class="ttname"><a href="classllvm_1_1LoopBase.html#a58c5b170ea68b41e94ebb0019523a68f">llvm::LoopBase::getHeader</a></div><div class="ttdeci">BlockT * getHeader() const</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00105">LoopInfo.h:105</a></div></div>
<div class="ttc" id="astructllvm_1_1LICMOptions_html_a3412294e2ef0260cffe61bf9dda53157"><div class="ttname"><a href="structllvm_1_1LICMOptions.html#a3412294e2ef0260cffe61bf9dda53157">llvm::LICMOptions::MssaNoAccForPromotionCap</a></div><div class="ttdeci">unsigned MssaNoAccForPromotionCap</div><div class="ttdef"><b>Definition:</b> <a href="LICM_8h_source.html#l00050">LICM.h:50</a></div></div>
<div class="ttc" id="aLICM_8cpp_html_a052100e379294ec39b8805736bb2a9af"><div class="ttname"><a href="LICM_8cpp.html#a052100e379294ec39b8805736bb2a9af">sinkThroughTriviallyReplaceablePHI</a></div><div class="ttdeci">static Instruction * sinkThroughTriviallyReplaceablePHI(PHINode *TPN, Instruction *I, LoopInfo *LI, SmallDenseMap&lt; BasicBlock *, Instruction *, 32 &gt; &amp;SunkCopies, const LoopSafetyInfo *SafetyInfo, const Loop *CurLoop, MemorySSAUpdater &amp;MSSAU)</div><div class="ttdef"><b>Definition:</b> <a href="LICM_8cpp_source.html#l01496">LICM.cpp:1496</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetLibraryInfo_html"><div class="ttname"><a href="classllvm_1_1TargetLibraryInfo.html">llvm::TargetLibraryInfo</a></div><div class="ttdoc">Provides information about what library functions are available for the current target.</div><div class="ttdef"><b>Definition:</b> <a href="TargetLibraryInfo_8h_source.html#l00234">TargetLibraryInfo.h:234</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a5d3d315f678bc76e43b27d18e5d72829"><div class="ttname"><a href="classllvm_1_1Instruction.html#a5d3d315f678bc76e43b27d18e5d72829">llvm::Instruction::isEHPad</a></div><div class="ttdeci">bool isEHPad() const</div><div class="ttdoc">Return true if the instruction is a variety of EH-block.</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00685">Instruction.h:685</a></div></div>
<div class="ttc" id="aclassllvm_1_1MemoryUseOrDef_html"><div class="ttname"><a href="classllvm_1_1MemoryUseOrDef.html">llvm::MemoryUseOrDef</a></div><div class="ttdoc">Class that has the common methods + fields of memory uses/defs.</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8h_source.html#l00252">MemorySSA.h:252</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopSafetyInfo_html_a0df7330d9f0c855c85a81c0fcf8844a7"><div class="ttname"><a href="classllvm_1_1LoopSafetyInfo.html#a0df7330d9f0c855c85a81c0fcf8844a7">llvm::LoopSafetyInfo::copyColors</a></div><div class="ttdeci">void copyColors(BasicBlock *New, BasicBlock *Old)</div><div class="ttdoc">Copy colors of block Old into the block New.</div><div class="ttdef"><b>Definition:</b> <a href="MustExecute_8cpp_source.html#l00036">MustExecute.cpp:36</a></div></div>
<div class="ttc" id="aREADME__P9_8txt_html_a0afe4617fad145d6ced5a18fd739cf06"><div class="ttname"><a href="README__P9_8txt.html#a0afe4617fad145d6ced5a18fd739cf06">Unordered</a></div><div class="ttdeci">QP Compare Ordered Unordered</div><div class="ttdef"><b>Definition:</b> <a href="README__P9_8txt_source.html#l00299">README_P9.txt:299</a></div></div>
<div class="ttc" id="astructllvm_1_1LoopStandardAnalysisResults_html_a124376878e24aef4252795ba9fea420f"><div class="ttname"><a href="structllvm_1_1LoopStandardAnalysisResults.html#a124376878e24aef4252795ba9fea420f">llvm::LoopStandardAnalysisResults::SE</a></div><div class="ttdeci">ScalarEvolution &amp; SE</div><div class="ttdef"><b>Definition:</b> <a href="LoopAnalysisManager_8h_source.html#l00056">LoopAnalysisManager.h:56</a></div></div>
<div class="ttc" id="astructllvm_1_1LoopStandardAnalysisResults_html_abd7da877be8576011299f4fcaaf299be"><div class="ttname"><a href="structllvm_1_1LoopStandardAnalysisResults.html#abd7da877be8576011299f4fcaaf299be">llvm::LoopStandardAnalysisResults::AA</a></div><div class="ttdeci">AAResults &amp; AA</div><div class="ttdef"><b>Definition:</b> <a href="LoopAnalysisManager_8h_source.html#l00052">LoopAnalysisManager.h:52</a></div></div>
<div class="ttc" id="aclassllvm_1_1PriorityWorklist_html_ab89ceb7695256590499de818b5360c54"><div class="ttname"><a href="classllvm_1_1PriorityWorklist.html#ab89ceb7695256590499de818b5360c54">llvm::PriorityWorklist&lt; T, SmallVector&lt; T, N &gt;, SmallDenseMap&lt; T, ptrdiff_t &gt; &gt;::pop_back_val</a></div><div class="ttdeci">T pop_back_val()</div><div class="ttdef"><b>Definition:</b> <a href="PriorityWorklist_8h_source.html#l00153">PriorityWorklist.h:153</a></div></div>
<div class="ttc" id="aclassllvm_1_1IntrinsicInst_html"><div class="ttname"><a href="classllvm_1_1IntrinsicInst.html">llvm::IntrinsicInst</a></div><div class="ttdoc">A wrapper class for inspecting calls to intrinsic functions.</div><div class="ttdef"><b>Definition:</b> <a href="IntrinsicInst_8h_source.html#l00047">IntrinsicInst.h:47</a></div></div>
<div class="ttc" id="aAnalysis_2GuardUtils_8h_html"><div class="ttname"><a href="Analysis_2GuardUtils_8h.html">GuardUtils.h</a></div></div>
<div class="ttc" id="aLICM_8cpp_html_a943a824fb962481a8f6b46f5a17371cc"><div class="ttname"><a href="LICM_8cpp.html#a943a824fb962481a8f6b46f5a17371cc">DisablePromotion</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; DisablePromotion(&quot;disable-licm-promotion&quot;, cl::Hidden, cl::init(false), cl::desc(&quot;Disable memory promotion in LICM pass&quot;))</div><div class="ttdoc">Memory promotion is enabled by default.</div></div>
<div class="ttc" id="aclassllvm_1_1MemoryEffects_html_a05319d3cd9be33731ba884642cf1df76"><div class="ttname"><a href="classllvm_1_1MemoryEffects.html#a05319d3cd9be33731ba884642cf1df76">llvm::MemoryEffects::onlyAccessesArgPointees</a></div><div class="ttdeci">bool onlyAccessesArgPointees() const</div><div class="ttdoc">Whether this function only (at most) accesses argument memory.</div><div class="ttdef"><b>Definition:</b> <a href="ModRef_8h_source.html#l00200">ModRef.h:200</a></div></div>
<div class="ttc" id="anamespacellvm_html_a7e108932dc3da5294aed99a353aac9c4"><div class="ttname"><a href="namespacellvm.html#a7e108932dc3da5294aed99a353aac9c4">llvm::pred_begin</a></div><div class="ttdeci">Interval::pred_iterator pred_begin(Interval *I)</div><div class="ttdoc">pred_begin/pred_end - define methods so that Intervals may be used just like BasicBlocks can with the...</div><div class="ttdef"><b>Definition:</b> <a href="Interval_8h_source.html#l00109">Interval.h:109</a></div></div>
<div class="ttc" id="aclassllvm_1_1DominatorTreeAnalysis_html"><div class="ttname"><a href="classllvm_1_1DominatorTreeAnalysis.html">llvm::DominatorTreeAnalysis</a></div><div class="ttdoc">Analysis pass which computes a DominatorTree.</div><div class="ttdef"><b>Definition:</b> <a href="Dominators_8h_source.html#l00279">Dominators.h:279</a></div></div>
<div class="ttc" id="aclassllvm_1_1OptimizationRemark_html"><div class="ttname"><a href="classllvm_1_1OptimizationRemark.html">llvm::OptimizationRemark</a></div><div class="ttdoc">Diagnostic information for applied optimization remarks.</div><div class="ttdef"><b>Definition:</b> <a href="DiagnosticInfo_8h_source.html#l00689">DiagnosticInfo.h:689</a></div></div>
<div class="ttc" id="aclassllvm_1_1Pass_html"><div class="ttname"><a href="classllvm_1_1Pass.html">llvm::Pass</a></div><div class="ttdoc">Pass interface - Implemented by all 'passes'.</div><div class="ttdef"><b>Definition:</b> <a href="Pass_8h_source.html#l00091">Pass.h:91</a></div></div>
<div class="ttc" id="anamespacellvm_html_a52fe42f45635485443c10aa9de4e7825"><div class="ttname"><a href="namespacellvm.html#a52fe42f45635485443c10aa9de4e7825">llvm::createLICMPass</a></div><div class="ttdeci">Pass * createLICMPass()</div><div class="ttdef"><b>Definition:</b> <a href="LICM_8cpp_source.html#l00353">LICM.cpp:353</a></div></div>
<div class="ttc" id="aMemorySSA_8h_html"><div class="ttname"><a href="MemorySSA_8h.html">MemorySSA.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1AAResults_html_a7785e563bd969eb1f63d26eca6873eb6"><div class="ttname"><a href="classllvm_1_1AAResults.html#a7785e563bd969eb1f63d26eca6873eb6">llvm::AAResults::getModRefInfoMask</a></div><div class="ttdeci">ModRefInfo getModRefInfoMask(const MemoryLocation &amp;Loc, bool IgnoreLocals=false)</div><div class="ttdoc">Returns a bitmask that should be unconditionally applied to the ModRef info of a memory location.</div><div class="ttdef"><b>Definition:</b> <a href="AliasAnalysis_8cpp_source.html#l00149">AliasAnalysis.cpp:149</a></div></div>
<div class="ttc" id="aInstructions_8h_html"><div class="ttname"><a href="Instructions_8h.html">Instructions.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1User_html_addec638786f763d967811b45cb662f1f"><div class="ttname"><a href="classllvm_1_1User.html#addec638786f763d967811b45cb662f1f">llvm::User::getNumOperands</a></div><div class="ttdeci">unsigned getNumOperands() const</div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00191">User.h:191</a></div></div>
<div class="ttc" id="aclassllvm_1_1PointerIntPair_html"><div class="ttname"><a href="classllvm_1_1PointerIntPair.html">llvm::PointerIntPair</a></div><div class="ttdoc">PointerIntPair - This class implements a pair of a pointer and small integer.</div><div class="ttdef"><b>Definition:</b> <a href="PointerIntPair_8h_source.html#l00046">PointerIntPair.h:46</a></div></div>
<div class="ttc" id="aclassllvm_1_1LICMPass_html_aa540c3d95adfef29cc520491ce4ebdab"><div class="ttname"><a href="classllvm_1_1LICMPass.html#aa540c3d95adfef29cc520491ce4ebdab">llvm::LICMPass::run</a></div><div class="ttdeci">PreservedAnalyses run(Loop &amp;L, LoopAnalysisManager &amp;AM, LoopStandardAnalysisResults &amp;AR, LPMUpdater &amp;U)</div><div class="ttdef"><b>Definition:</b> <a href="LICM_8cpp_source.html#l00265">LICM.cpp:265</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantInt_html_a2a8c8be274f3bd351e083ab3828c14c7"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#a2a8c8be274f3bd351e083ab3828c14c7">llvm::ConstantInt::isNegative</a></div><div class="ttdeci">bool isNegative() const</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00188">Constants.h:188</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a41da369a9d31d911c8af724d5630f724"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a41da369a9d31d911c8af724d5630f724">llvm::BasicBlock::moveBefore</a></div><div class="ttdeci">void moveBefore(BasicBlock *MovePos)</div><div class="ttdoc">Unlink this basic block from its current function and insert it into the function that MovePos lives ...</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00136">BasicBlock.cpp:136</a></div></div>
<div class="ttc" id="aLICM_8cpp_html_a4d17de7bbbee910e1e79e900ec72129f"><div class="ttname"><a href="LICM_8cpp.html#a4d17de7bbbee910e1e79e900ec72129f">moveInstructionBefore</a></div><div class="ttdeci">static void moveInstructionBefore(Instruction &amp;I, Instruction &amp;Dest, ICFLoopSafetyInfo &amp;SafetyInfo, MemorySSAUpdater &amp;MSSAU, ScalarEvolution *SE)</div><div class="ttdef"><b>Definition:</b> <a href="LICM_8cpp_source.html#l01482">LICM.cpp:1482</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopBase_html_a63f099d3bf7cf97eb3ae2d630e3d1afc"><div class="ttname"><a href="classllvm_1_1LoopBase.html#a63f099d3bf7cf97eb3ae2d630e3d1afc">llvm::LoopBase::addBasicBlockToLoop</a></div><div class="ttdeci">void addBasicBlockToLoop(BlockT *NewBB, LoopInfoBase&lt; BlockT, LoopT &gt; &amp;LI)</div><div class="ttdoc">This method is used by other analyses to update loop information.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfoImpl_8h_source.html#l00258">LoopInfoImpl.h:258</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoadAndStorePromoter_html_a0559a676152aa1421ed8ff6a4dfde66b"><div class="ttname"><a href="classllvm_1_1LoadAndStorePromoter.html#a0559a676152aa1421ed8ff6a4dfde66b">llvm::LoadAndStorePromoter::doExtraRewritesBeforeFinalDeletion</a></div><div class="ttdeci">virtual void doExtraRewritesBeforeFinalDeletion()</div><div class="ttdoc">This hook is invoked after all the stores are found and inserted as available values.</div><div class="ttdef"><b>Definition:</b> <a href="SSAUpdater_8h_source.html#l00172">SSAUpdater.h:172</a></div></div>
<div class="ttc" id="aDominators_8h_html"><div class="ttname"><a href="Dominators_8h.html">Dominators.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1DIAssignID_html"><div class="ttname"><a href="classllvm_1_1DIAssignID.html">llvm::DIAssignID</a></div><div class="ttdoc">Assignment ID.</div><div class="ttdef"><b>Definition:</b> <a href="DebugInfoMetadata_8h_source.html#l00302">DebugInfoMetadata.h:302</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallBase_html_ab2caa29167597390ab2fc3cf30d70389"><div class="ttname"><a href="classllvm_1_1CallBase.html#ab2caa29167597390ab2fc3cf30d70389">llvm::CallBase::getArgOperand</a></div><div class="ttdeci">Value * getArgOperand(unsigned i) const</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l01351">InstrTypes.h:1351</a></div></div>
<div class="ttc" id="aregcomp_8c_html_a0240ac851181b84ac374872dc5434ee4"><div class="ttname"><a href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a></div><div class="ttdeci">#define N</div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a1a7f07aaef6a3bee130bf0e0f0536802"><div class="ttname"><a href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">llvm::Instruction::getParent</a></div><div class="ttdeci">const BasicBlock * getParent() const</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00090">Instruction.h:90</a></div></div>
<div class="ttc" id="aclassllvm_1_1ICFLoopSafetyInfo_html_aca2badb4637a1c884bebc80828feac0a"><div class="ttname"><a href="classllvm_1_1ICFLoopSafetyInfo.html#aca2badb4637a1c884bebc80828feac0a">llvm::ICFLoopSafetyInfo::computeLoopSafetyInfo</a></div><div class="ttdeci">void computeLoopSafetyInfo(const Loop *CurLoop) override</div><div class="ttdoc">Computes safety information for a loop checks loop body &amp; header for the possibility of may throw exc...</div><div class="ttdef"><b>Definition:</b> <a href="MustExecute_8cpp_source.html#l00079">MustExecute.cpp:79</a></div></div>
<div class="ttc" id="aclassllvm_1_1PHINode_html_a8ce0c4746a1ec805e66409d20ae93922"><div class="ttname"><a href="classllvm_1_1PHINode.html#a8ce0c4746a1ec805e66409d20ae93922">llvm::PHINode::getIncomingBlock</a></div><div class="ttdeci">BasicBlock * getIncomingBlock(unsigned i) const</div><div class="ttdoc">Return incoming basic block number i.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02814">Instructions.h:2814</a></div></div>
<div class="ttc" id="aLICM_8cpp_html_aea8a4c201b5630473d49bddbb5f5c221"><div class="ttname"><a href="LICM_8cpp.html#aea8a4c201b5630473d49bddbb5f5c221">INITIALIZE_PASS_BEGIN</a></div><div class="ttdeci">INITIALIZE_PASS_BEGIN(LegacyLICMPass, &quot;licm&quot;, &quot;Loop Invariant Code Motion&quot;, false, false) INITIALIZE_PASS_END(LegacyLICMPass</div></div>
<div class="ttc" id="aclassllvm_1_1DominatorTreeBase_html_a1f08f2925fec05b265e540d29066b9c8"><div class="ttname"><a href="classllvm_1_1DominatorTreeBase.html#a1f08f2925fec05b265e540d29066b9c8">llvm::DominatorTreeBase::verify</a></div><div class="ttdeci">bool verify(VerificationLevel VL=VerificationLevel::Full) const</div><div class="ttdoc">verify - checks if the tree is correct.</div><div class="ttdef"><b>Definition:</b> <a href="GenericDomTree_8h_source.html#l00819">GenericDomTree.h:819</a></div></div>
<div class="ttc" id="aIVUsers_8cpp_html_a4e5b9edb51eec9dbca592075eb64dfcb"><div class="ttname"><a href="IVUsers_8cpp.html#a4e5b9edb51eec9dbca592075eb64dfcb">Users</a></div><div class="ttdeci">iv Induction Variable Users</div><div class="ttdef"><b>Definition:</b> <a href="IVUsers_8cpp_source.html#l00048">IVUsers.cpp:48</a></div></div>
<div class="ttc" id="aTargetTransformInfo_8h_html"><div class="ttname"><a href="TargetTransformInfo_8h.html">TargetTransformInfo.h</a></div></div>
<div class="ttc" id="astructllvm_1_1LoopStandardAnalysisResults_html_a1cfb392c267da10531478c2f42baa603"><div class="ttname"><a href="structllvm_1_1LoopStandardAnalysisResults.html#a1cfb392c267da10531478c2f42baa603">llvm::LoopStandardAnalysisResults::MSSA</a></div><div class="ttdeci">MemorySSA * MSSA</div><div class="ttdef"><b>Definition:</b> <a href="LoopAnalysisManager_8h_source.html#l00061">LoopAnalysisManager.h:61</a></div></div>
<div class="ttc" id="aclassllvm_1_1PHINode_html"><div class="ttname"><a href="classllvm_1_1PHINode.html">llvm::PHINode</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02708">Instructions.h:2708</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a8de021e28a3c04c9216ad8decf104f02"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">llvm::BasicBlock::getTerminator</a></div><div class="ttdeci">const Instruction * getTerminator() const LLVM_READONLY</div><div class="ttdoc">Returns the terminator instruction if the block is well formed or null if the block is not well forme...</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00127">BasicBlock.h:127</a></div></div>
<div class="ttc" id="aLICM_8h_html"><div class="ttname"><a href="LICM_8h.html">LICM.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_a2162d123f222998300d308bdefdb38b9"><div class="ttname"><a href="namespacellvm.html#a2162d123f222998300d308bdefdb38b9">llvm::set_intersect</a></div><div class="ttdeci">void set_intersect(S1Ty &amp;S1, const S2Ty &amp;S2)</div><div class="ttdoc">set_intersect(A, B) - Compute A := A ^ B Identical to set_intersection, except that it works on set&lt;&gt;...</div><div class="ttdef"><b>Definition:</b> <a href="SetOperations_8h_source.html#l00040">SetOperations.h:40</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html">llvm::SmallVectorImpl&lt; BasicBlock * &gt;</a></div></div>
<div class="ttc" id="aclassllvm_1_1Loop_html_a021a92f02d7e959877a4154277fc5c91"><div class="ttname"><a href="classllvm_1_1Loop.html#a021a92f02d7e959877a4154277fc5c91">llvm::Loop::isLCSSAForm</a></div><div class="ttdeci">bool isLCSSAForm(const DominatorTree &amp;DT, bool IgnoreTokens=true) const</div><div class="ttdoc">Return true if the Loop is in LCSSA form.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8cpp_source.html#l00462">LoopInfo.cpp:462</a></div></div>
<div class="ttc" id="anamespacellvm_html_a6b0ac1fa4f05de76413c5e0ca6334035"><div class="ttname"><a href="namespacellvm.html#a6b0ac1fa4f05de76413c5e0ca6334035">llvm::reverse</a></div><div class="ttdeci">auto reverse(ContainerTy &amp;&amp;C)</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l00484">STLExtras.h:484</a></div></div>
<div class="ttc" id="anamespacellvm_html_ae6d1c31d74bbaaa9e42bcbdc10a499f2"><div class="ttname"><a href="namespacellvm.html#ae6d1c31d74bbaaa9e42bcbdc10a499f2">llvm::pred_size</a></div><div class="ttdeci">unsigned pred_size(const MachineBasicBlock *BB)</div><div class="ttdef"><b>Definition:</b> <a href="MachineSSAContext_8h_source.html#l00032">MachineSSAContext.h:32</a></div></div>
<div class="ttc" id="aclassllvm_1_1PredIteratorCache_html_aae381f8d8d1f6000c2eb811232cefde2"><div class="ttname"><a href="classllvm_1_1PredIteratorCache.html#aae381f8d8d1f6000c2eb811232cefde2">llvm::PredIteratorCache::get</a></div><div class="ttdeci">ArrayRef&lt; BasicBlock * &gt; get(BasicBlock *BB)</div><div class="ttdef"><b>Definition:</b> <a href="PredIteratorCache_8h_source.html#l00066">PredIteratorCache.h:66</a></div></div>
<div class="ttc" id="aclassllvm_1_1Module_html_a6d883605206368bc536cc9ded97209b8"><div class="ttname"><a href="classllvm_1_1Module.html#a6d883605206368bc536cc9ded97209b8">llvm::Module::getDataLayout</a></div><div class="ttdeci">const DataLayout &amp; getDataLayout() const</div><div class="ttdoc">Get the data layout for the module's target platform.</div><div class="ttdef"><b>Definition:</b> <a href="Module_8cpp_source.html#l00398">Module.cpp:398</a></div></div>
<div class="ttc" id="aLICM_8cpp_html_a20be54e1ec24a63f98accb9d9944b3ed"><div class="ttname"><a href="LICM_8cpp.html#a20be54e1ec24a63f98accb9d9944b3ed">isNotUsedOrFreeInLoop</a></div><div class="ttdeci">static bool isNotUsedOrFreeInLoop(const Instruction &amp;I, const Loop *CurLoop, const LoopSafetyInfo *SafetyInfo, TargetTransformInfo *TTI, bool &amp;FreeInLoop, bool LoopNestMode)</div><div class="ttdoc">Return true if the only users of this instruction are outside of the loop.</div><div class="ttdef"><b>Definition:</b> <a href="LICM_8cpp_source.html#l01361">LICM.cpp:1361</a></div></div>
<div class="ttc" id="aDerivedTypes_8h_html"><div class="ttname"><a href="DerivedTypes_8h.html">DerivedTypes.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallSetVector_html"><div class="ttname"><a href="classllvm_1_1SmallSetVector.html">llvm::SmallSetVector</a></div><div class="ttdoc">A SetVector that performs no allocations if smaller than a certain size.</div><div class="ttdef"><b>Definition:</b> <a href="SetVector_8h_source.html#l00300">SetVector.h:300</a></div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisManager_html"><div class="ttname"><a href="classllvm_1_1AnalysisManager.html">llvm::AnalysisManager</a></div><div class="ttdoc">A container for analyses that lazily runs them and caches their results.</div><div class="ttdef"><b>Definition:</b> <a href="InstructionSimplify_8h_source.html#l00042">InstructionSimplify.h:42</a></div></div>
<div class="ttc" id="aLICM_8cpp_html_a0a473c402b8ddf9660f82fa84ba38b59"><div class="ttname"><a href="LICM_8cpp.html#a0a473c402b8ddf9660f82fa84ba38b59">pointerInvalidatedByLoop</a></div><div class="ttdeci">static bool pointerInvalidatedByLoop(MemorySSA *MSSA, MemoryUse *MU, Loop *CurLoop, Instruction &amp;I, SinkAndHoistLICMFlags &amp;Flags)</div><div class="ttdef"><b>Definition:</b> <a href="LICM_8cpp_source.html#l02331">LICM.cpp:2331</a></div></div>
<div class="ttc" id="aAliasSetTracker_8h_html"><div class="ttname"><a href="AliasSetTracker_8h.html">AliasSetTracker.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallInst_html"><div class="ttname"><a href="classllvm_1_1CallInst.html">llvm::CallInst</a></div><div class="ttdoc">This class represents a function call, abstracting a target machine's calling convention.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01485">Instructions.h:1485</a></div></div>
<div class="ttc" id="anamespacellvm_1_1omp_html_a16d7c5f77008a84ae20bf4a5c41e51f0a4ea7801f17a4e5485e8b050c052fb443"><div class="ttname"><a href="namespacellvm_1_1omp.html#a16d7c5f77008a84ae20bf4a5c41e51f0a4ea7801f17a4e5485e8b050c052fb443">llvm::omp::RTLDependInfoFields::Flags</a></div><div class="ttdeci">@ Flags</div></div>
<div class="ttc" id="alib_2CodeGen_2README_8txt_html_a09776db24cf586ec9f1e18f3bae14099"><div class="ttname"><a href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a></div><div class="ttdeci">Common register allocation spilling lr str ldr sxth r3 ldr mla r4 can lr mov lr str ldr sxth r3 mla r4 and then merge mul and lr str ldr sxth r3 mla r4 It also increase the likelihood the store may become dead bb27 Successors according to LLVM BB</div><div class="ttdef"><b>Definition:</b> <a href="lib_2CodeGen_2README_8txt_source.html#l00039">README.txt:39</a></div></div>
<div class="ttc" id="aHexagonCommonGEP_8cpp_html_ad532e8710e50302e0a376b61c91fa91d"><div class="ttname"><a href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a></div><div class="ttdeci">Hexagon Common GEP</div><div class="ttdef"><b>Definition:</b> <a href="HexagonCommonGEP_8cpp_source.html#l00171">HexagonCommonGEP.cpp:171</a></div></div>
<div class="ttc" id="aclassllvm_1_1ICFLoopSafetyInfo_html_ab40701961745d6467fa8e23b1e451c12"><div class="ttname"><a href="classllvm_1_1ICFLoopSafetyInfo.html#ab40701961745d6467fa8e23b1e451c12">llvm::ICFLoopSafetyInfo::isGuaranteedToExecute</a></div><div class="ttdeci">bool isGuaranteedToExecute(const Instruction &amp;Inst, const DominatorTree *DT, const Loop *CurLoop) const override</div><div class="ttdoc">Returns true if the instruction in a loop is guaranteed to execute at least once (under the assumptio...</div><div class="ttdef"><b>Definition:</b> <a href="MustExecute_8cpp_source.html#l00277">MustExecute.cpp:277</a></div></div>
<div class="ttc" id="aLICM_8cpp_html_ab63d5eb7a9919d4e5f2c8d614e9bda97"><div class="ttname"><a href="LICM_8cpp.html#ab63d5eb7a9919d4e5f2c8d614e9bda97">isSafeToExecuteUnconditionally</a></div><div class="ttdeci">static bool isSafeToExecuteUnconditionally(Instruction &amp;Inst, const DominatorTree *DT, const TargetLibraryInfo *TLI, const Loop *CurLoop, const LoopSafetyInfo *SafetyInfo, OptimizationRemarkEmitter *ORE, const Instruction *CtxI, AssumptionCache *AC, bool AllowSpeculation)</div><div class="ttdoc">Only sink or hoist an instruction if it is not a trapping instruction, or if the instruction is known...</div><div class="ttdef"><b>Definition:</b> <a href="LICM_8cpp_source.html#l01753">LICM.cpp:1753</a></div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisUsage_html_ae5c60fd282ee894c87ea02c3f0fcb6d0"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">llvm::AnalysisUsage::addRequired</a></div><div class="ttdeci">AnalysisUsage &amp; addRequired()</div><div class="ttdef"><b>Definition:</b> <a href="PassAnalysisSupport_8h_source.html#l00075">PassAnalysisSupport.h:75</a></div></div>
<div class="ttc" id="anamespacellvm_html_aa29fe161c408879ada30c90ebbf55dcf"><div class="ttname"><a href="namespacellvm.html#aa29fe161c408879ada30c90ebbf55dcf">llvm::VerifyMemorySSA</a></div><div class="ttdeci">bool VerifyMemorySSA</div><div class="ttdoc">Enables verification of MemorySSA.</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8cpp_source.html#l00089">MemorySSA.cpp:89</a></div></div>
<div class="ttc" id="aLLVMContext_8h_html"><div class="ttname"><a href="LLVMContext_8h.html">LLVMContext.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1DebugLoc_html"><div class="ttname"><a href="classllvm_1_1DebugLoc.html">llvm::DebugLoc</a></div><div class="ttdoc">A debug info location.</div><div class="ttdef"><b>Definition:</b> <a href="DebugLoc_8h_source.html#l00033">DebugLoc.h:33</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoadAndStorePromoter_html_a012fcb5ec538c2210ad15e8afcf061ed"><div class="ttname"><a href="classllvm_1_1LoadAndStorePromoter.html#a012fcb5ec538c2210ad15e8afcf061ed">llvm::LoadAndStorePromoter::instructionDeleted</a></div><div class="ttdeci">virtual void instructionDeleted(Instruction *I) const</div><div class="ttdoc">Called before each instruction is deleted.</div><div class="ttdef"><b>Definition:</b> <a href="SSAUpdater_8h_source.html#l00179">SSAUpdater.h:179</a></div></div>
<div class="ttc" id="aclassllvm_1_1User_html_abe1de1520a21f77ac57cc210bf0fb0b4"><div class="ttname"><a href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">llvm::User::getOperand</a></div><div class="ttdeci">Value * getOperand(unsigned i) const</div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00169">User.h:169</a></div></div>
<div class="ttc" id="astructllvm_1_1cl_1_1desc_html"><div class="ttname"><a href="structllvm_1_1cl_1_1desc.html">llvm::cl::desc</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00411">CommandLine.h:411</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchInst_html"><div class="ttname"><a href="classllvm_1_1BranchInst.html">llvm::BranchInst</a></div><div class="ttdoc">Conditional or Unconditional Branch instruction.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03139">Instructions.h:3139</a></div></div>
<div class="ttc" id="anamespacellvm_html_ab6be6270337c6f7620007555247401ce"><div class="ttname"><a href="namespacellvm.html#ab6be6270337c6f7620007555247401ce">llvm::ConstantFoldInstruction</a></div><div class="ttdeci">Constant * ConstantFoldInstruction(Instruction *I, const DataLayout &amp;DL, const TargetLibraryInfo *TLI=nullptr)</div><div class="ttdoc">ConstantFoldInstruction - Try to constant fold the specified instruction.</div><div class="ttdef"><b>Definition:</b> <a href="ConstantFolding_8cpp_source.html#l01155">ConstantFolding.cpp:1155</a></div></div>
<div class="ttc" id="araw__ostream_8h_html"><div class="ttname"><a href="raw__ostream_8h.html">raw_ostream.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopBlocksRPO_html_ad75769a81e0bebc6db0793566a4486fb"><div class="ttname"><a href="classllvm_1_1LoopBlocksRPO.html#ad75769a81e0bebc6db0793566a4486fb">llvm::LoopBlocksRPO::perform</a></div><div class="ttdeci">void perform(LoopInfo *LI)</div><div class="ttdoc">Traverse the loop blocks and store the DFS result.</div><div class="ttdef"><b>Definition:</b> <a href="LoopIterator_8h_source.html#l00180">LoopIterator.h:180</a></div></div>
<div class="ttc" id="aclassllvm_1_1TinyPtrVector_html"><div class="ttname"><a href="classllvm_1_1TinyPtrVector.html">llvm::TinyPtrVector</a></div><div class="ttdoc">TinyPtrVector - This class is specialized for cases where there are normally 0 or 1 element in a vect...</div><div class="ttdef"><b>Definition:</b> <a href="TinyPtrVector_8h_source.html#l00029">TinyPtrVector.h:29</a></div></div>
<div class="ttc" id="aclassllvm_1_1SSAUpdater_html"><div class="ttname"><a href="classllvm_1_1SSAUpdater.html">llvm::SSAUpdater</a></div><div class="ttdoc">Helper class for SSA formation on a set of values defined in multiple blocks.</div><div class="ttdef"><b>Definition:</b> <a href="SSAUpdater_8h_source.html#l00039">SSAUpdater.h:39</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfo_html_a3ba50f0bbbe7b4ae53a66e70c614cce2"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html#a3ba50f0bbbe7b4ae53a66e70c614cce2">llvm::TargetTransformInfo::isSingleThreaded</a></div><div class="ttdeci">bool isSingleThreaded() const</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8cpp_source.html#l00284">TargetTransformInfo.cpp:284</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSetImpl_html_af74676a3c7447be34bd2c1da76ec0c48"><div class="ttname"><a href="classllvm_1_1SmallPtrSetImpl.html#af74676a3c7447be34bd2c1da76ec0c48">llvm::SmallPtrSetImpl::contains</a></div><div class="ttdeci">bool contains(ConstPtrType Ptr) const</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00389">SmallPtrSet.h:389</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html_a499ea32ca1b8d16cedfe01d1e5b08f29"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#a499ea32ca1b8d16cedfe01d1e5b08f29">llvm::SmallVectorImpl::reserve</a></div><div class="ttdeci">void reserve(size_type N)</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00667">SmallVector.h:667</a></div></div>
<div class="ttc" id="aLICM_8cpp_html_a52b8b307321627e612e77041260ece84"><div class="ttname"><a href="LICM_8cpp.html#a52b8b307321627e612e77041260ece84">sink</a></div><div class="ttdeci">static bool sink(Instruction &amp;I, LoopInfo *LI, DominatorTree *DT, const Loop *CurLoop, ICFLoopSafetyInfo *SafetyInfo, MemorySSAUpdater &amp;MSSAU, OptimizationRemarkEmitter *ORE)</div><div class="ttdoc">When an instruction is found to only be used outside of the loop, this function moves it to the exit ...</div><div class="ttdef"><b>Definition:</b> <a href="LICM_8cpp_source.html#l01603">LICM.cpp:1603</a></div></div>
<div class="ttc" id="aBasicBlockUtils_8h_html"><div class="ttname"><a href="BasicBlockUtils_8h.html">BasicBlockUtils.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_af0eea3fd894969f858eee273ba9f0b9b"><div class="ttname"><a href="namespacellvm.html#af0eea3fd894969f858eee273ba9f0b9b">llvm::SetLicmMssaOptCap</a></div><div class="ttdeci">cl::opt&lt; unsigned &gt; SetLicmMssaOptCap</div></div>
<div class="ttc" id="aLICM_8cpp_html_a37ddbdd8cb4efa5072282498fdc1ac65"><div class="ttname"><a href="LICM_8cpp.html#a37ddbdd8cb4efa5072282498fdc1ac65">collectPromotionCandidates</a></div><div class="ttdeci">static SmallVector&lt; PointersAndHasReadsOutsideSet, 0 &gt; collectPromotionCandidates(MemorySSA *MSSA, AliasAnalysis *AA, Loop *L)</div><div class="ttdef"><b>Definition:</b> <a href="LICM_8cpp_source.html#l02269">LICM.cpp:2269</a></div></div>
<div class="ttc" id="aclassllvm_1_1LazyBranchProbabilityInfoPass_html"><div class="ttname"><a href="classllvm_1_1LazyBranchProbabilityInfoPass.html">llvm::LazyBranchProbabilityInfoPass</a></div><div class="ttdoc">This is an alternative analysis pass to BranchProbabilityInfoWrapperPass.</div><div class="ttdef"><b>Definition:</b> <a href="LazyBranchProbabilityInfo_8h_source.html#l00050">LazyBranchProbabilityInfo.h:50</a></div></div>
<div class="ttc" id="astructllvm_1_1LoopStandardAnalysisResults_html_a9e363c1eaf112166372e2d52704981fb"><div class="ttname"><a href="structllvm_1_1LoopStandardAnalysisResults.html#a9e363c1eaf112166372e2d52704981fb">llvm::LoopStandardAnalysisResults::TLI</a></div><div class="ttdeci">TargetLibraryInfo &amp; TLI</div><div class="ttdef"><b>Definition:</b> <a href="LoopAnalysisManager_8h_source.html#l00057">LoopAnalysisManager.h:57</a></div></div>
<div class="ttc" id="aInitializePasses_8h_html"><div class="ttname"><a href="InitializePasses_8h.html">InitializePasses.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_a3693cec8e936224ad3e5748debe73b75"><div class="ttname"><a href="namespacellvm.html#a3693cec8e936224ad3e5748debe73b75">llvm::PointerMayBeCapturedBefore</a></div><div class="ttdeci">bool PointerMayBeCapturedBefore(const Value *V, bool ReturnCaptures, bool StoreCaptures, const Instruction *I, const DominatorTree *DT, bool IncludeI=false, unsigned MaxUsesToExplore=0, const LoopInfo *LI=nullptr)</div><div class="ttdoc">PointerMayBeCapturedBefore - Return true if this pointer value may be captured by the enclosing funct...</div><div class="ttdef"><b>Definition:</b> <a href="CaptureTracking_8cpp_source.html#l00254">CaptureTracking.cpp:254</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopNest_html"><div class="ttname"><a href="classllvm_1_1LoopNest.html">llvm::LoopNest</a></div><div class="ttdoc">This class represents a loop nest and can be used to query its properties.</div><div class="ttdef"><b>Definition:</b> <a href="LoopNestAnalysis_8h_source.html#l00028">LoopNestAnalysis.h:28</a></div></div>
<div class="ttc" id="anamespacellvm_html_abe76d72cda6b2b4562c72accb510040b"><div class="ttname"><a href="namespacellvm.html#abe76d72cda6b2b4562c72accb510040b">llvm::isSafeToSpeculativelyExecute</a></div><div class="ttdeci">bool isSafeToSpeculativelyExecute(const Instruction *I, const Instruction *CtxI=nullptr, AssumptionCache *AC=nullptr, const DominatorTree *DT=nullptr, const TargetLibraryInfo *TLI=nullptr)</div><div class="ttdoc">Return true if the instruction does not have any effects besides calculating the result and does not ...</div><div class="ttdef"><b>Definition:</b> <a href="ValueTracking_8cpp_source.html#l04799">ValueTracking.cpp:4799</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html"><div class="ttname"><a href="classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00074">Value.h:74</a></div></div>
<div class="ttc" id="aDebug_8h_html"><div class="ttname"><a href="Debug_8h.html">Debug.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchInst_html_a7e4be8b16fbd68c9045a388904044e01"><div class="ttname"><a href="classllvm_1_1BranchInst.html#a7e4be8b16fbd68c9045a388904044e01">llvm::BranchInst::isConditional</a></div><div class="ttdeci">bool isConditional() const</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03218">Instructions.h:3218</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchInst_html_ad97f2e60cf22f15e0cf617af52309031"><div class="ttname"><a href="classllvm_1_1BranchInst.html#ad97f2e60cf22f15e0cf617af52309031">llvm::BranchInst::getSuccessor</a></div><div class="ttdeci">BasicBlock * getSuccessor(unsigned i) const</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03232">Instructions.h:3232</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopAnalysis_html"><div class="ttname"><a href="classllvm_1_1LoopAnalysis.html">llvm::LoopAnalysis</a></div><div class="ttdoc">Analysis pass that exposes the LoopInfo for a function.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l01268">LoopInfo.h:1268</a></div></div>
<div class="ttc" id="aclassllvm_1_1MemorySSAUpdater_html_abcf78af37d56a9b72a49c65428210758"><div class="ttname"><a href="classllvm_1_1MemorySSAUpdater.html#abcf78af37d56a9b72a49c65428210758">llvm::MemorySSAUpdater::removeMemoryAccess</a></div><div class="ttdeci">void removeMemoryAccess(MemoryAccess *, bool OptimizePhis=false)</div><div class="ttdoc">Remove a MemoryAccess from MemorySSA, including updating all definitions and uses.</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSAUpdater_8cpp_source.html#l01305">MemorySSAUpdater.cpp:1305</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopInfo_html_a3aec1235e89c8e7a3d6f60ba97071b65"><div class="ttname"><a href="classllvm_1_1LoopInfo.html#a3aec1235e89c8e7a3d6f60ba97071b65">llvm::LoopInfo::wouldBeOutOfLoopUseRequiringLCSSA</a></div><div class="ttdeci">bool wouldBeOutOfLoopUseRequiringLCSSA(const Value *V, const BasicBlock *ExitBB) const</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8cpp_source.html#l00933">LoopInfo.cpp:933</a></div></div>
<div class="ttc" id="aLICM_8cpp_html_a425e6fe374356efd05a49cab7e020166"><div class="ttname"><a href="LICM_8cpp.html#a425e6fe374356efd05a49cab7e020166">canSplitPredecessors</a></div><div class="ttdeci">static bool canSplitPredecessors(PHINode *PN, LoopSafetyInfo *SafetyInfo)</div><div class="ttdef"><b>Definition:</b> <a href="LICM_8cpp_source.html#l01514">LICM.cpp:1514</a></div></div>
<div class="ttc" id="aclassllvm_1_1Use_html"><div class="ttname"><a href="classllvm_1_1Use.html">llvm::Use</a></div><div class="ttdoc">A Use represents the edge between a Value definition and its users.</div><div class="ttdef"><b>Definition:</b> <a href="Use_8h_source.html#l00043">Use.h:43</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html_a396fcfee6914c76974b73c3d203da6a5"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#a396fcfee6914c76974b73c3d203da6a5">llvm::SmallVectorImpl::emplace_back</a></div><div class="ttdeci">reference emplace_back(ArgTypes &amp;&amp;... Args)</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00941">SmallVector.h:941</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSetImpl_html_a6bc6fb89fe2e91c25559a8631f56e27e"><div class="ttname"><a href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">llvm::SmallPtrSetImpl::insert</a></div><div class="ttdeci">std::pair&lt; iterator, bool &gt; insert(PtrType Ptr)</div><div class="ttdoc">Inserts Ptr if and only if there is no element in the container equal to Ptr.</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00365">SmallPtrSet.h:365</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Aug 7 2023 10:31:40 for LLVM by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>

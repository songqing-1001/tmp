<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LLVM: include/llvm/Analysis/BranchProbabilityInfo.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">LLVM
   &#160;<span id="projectnumber">17.0.0git</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="dir_dcde91663b8816e1e2311938ccd8f690.html">llvm</a></li><li class="navelem"><a class="el" href="dir_97cdd6ae7e6843add574fb55e792badd.html">Analysis</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">BranchProbabilityInfo.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="BranchProbabilityInfo_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//===- BranchProbabilityInfo.h - Branch Probability Analysis ----*- C++ -*-===//</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">// See https://llvm.org/LICENSE.txt for license information.</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">// This pass is used to evaluate branch probabilties.</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160; </div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#ifndef LLVM_ANALYSIS_BRANCHPROBABILITYINFO_H</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#define LLVM_ANALYSIS_BRANCHPROBABILITYINFO_H</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160; </div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DenseMap_8h.html">llvm/ADT/DenseMap.h</a>&quot;</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DenseMapInfo_8h.html">llvm/ADT/DenseMapInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DenseSet_8h.html">llvm/ADT/DenseSet.h</a>&quot;</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="BasicBlock_8h.html">llvm/IR/BasicBlock.h</a>&quot;</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="IR_2CFG_8h.html">llvm/IR/CFG.h</a>&quot;</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="PassManager_8h.html">llvm/IR/PassManager.h</a>&quot;</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ValueHandle_8h.html">llvm/IR/ValueHandle.h</a>&quot;</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Pass_8h.html">llvm/Pass.h</a>&quot;</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="BranchProbability_8h.html">llvm/Support/BranchProbability.h</a>&quot;</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &lt;algorithm&gt;</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &lt;cassert&gt;</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &lt;cstdint&gt;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &lt;memory&gt;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &lt;utility&gt;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160; </div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespacellvm.html">llvm</a> {</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160; </div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="keyword">class </span><a class="code" href="namespacellvm_1_1codeview.html#adfebd8c4ae29ccd84c600c1e65d6b807a86408593c34af77fdd90df932f8b5261">Function</a>;</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="keyword">class </span>Loop;</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="keyword">class </span>LoopInfo;</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="keyword">class </span>raw_ostream;</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="keyword">class </span>DominatorTree;</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="keyword">class </span>PostDominatorTree;</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="keyword">class </span>TargetLibraryInfo;</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="keyword">class </span><a class="code" href="namespacellvm_1_1TargetStackID.html#a71392100eb15ba746b1f898986f5d8a5">Value</a>;</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="comment">/// Analysis providing branch probability information.</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="comment">/// This is a function analysis which provides information on the relative</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="comment">/// probabilities of each &quot;edge&quot; in the function&#39;s CFG where such an edge is</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="comment">/// defined by a pair (PredBlock and an index in the successors). The</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="comment">/// probability of an edge from one block is always relative to the</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="comment">/// probabilities of other edges from the block. The probabilites of all edges</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="comment">/// from a block sum to exactly one (100%).</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="comment">/// We use a pair (PredBlock and an index in the successors) to uniquely</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="comment">/// identify an edge, since we can have multiple edges from Src to Dst.</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="comment">/// As an example, we can have a switch which jumps to Dst with value 0 and</span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="comment">/// value 10.</span></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="comment">/// Process of computing branch probabilities can be logically viewed as three</span></div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="comment">/// step process:</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="comment">///   First, if there is a profile information associated with the branch then</span></div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="comment">/// it is trivially translated to branch probabilities. There is one exception</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="comment">/// from this rule though. Probabilities for edges leading to &quot;unreachable&quot;</span></div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="comment">/// blocks (blocks with the estimated weight not greater than</span></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="comment">/// UNREACHABLE_WEIGHT) are evaluated according to static estimation and</span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="comment">/// override profile information. If no branch probabilities were calculated</span></div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="comment">/// on this step then take the next one.</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="comment">///   Second, estimate absolute execution weights for each block based on</span></div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="comment">/// statically known information. Roots of such information are &quot;cold&quot;,</span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="comment">/// &quot;unreachable&quot;, &quot;noreturn&quot; and &quot;unwind&quot; blocks. Those blocks get their</span></div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="comment">/// weights set to BlockExecWeight::COLD, BlockExecWeight::UNREACHABLE,</span></div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="comment">/// BlockExecWeight::NORETURN and BlockExecWeight::UNWIND respectively. Then the</span></div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="comment">/// weights are propagated to the other blocks up the domination line. In</span></div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="comment">/// addition, if all successors have estimated weights set then maximum of these</span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="comment">/// weights assigned to the block itself (while this is not ideal heuristic in</span></div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="comment">/// theory it&#39;s simple and works reasonably well in most cases) and the process</span></div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="comment">/// repeats. Once the process of weights propagation converges branch</span></div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="comment">/// probabilities are set for all such branches that have at least one successor</span></div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="comment">/// with the weight set. Default execution weight (BlockExecWeight::DEFAULT) is</span></div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="comment">/// used for any successors which doesn&#39;t have its weight set. For loop back</span></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="comment">/// branches we use their weights scaled by loop trip count equal to</span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="comment">/// &#39;LBH_TAKEN_WEIGHT/LBH_NOTTAKEN_WEIGHT&#39;.</span></div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="comment">/// Here is a simple example demonstrating how the described algorithm works.</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="comment">///          BB1</span></div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="comment">///         /   \</span></div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="comment">///        v     v</span></div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="comment">///      BB2     BB3</span></div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="comment">///     /   \</span></div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="comment">///    v     v</span></div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="comment">///  ColdBB  UnreachBB</span></div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<span class="comment">/// Initially, ColdBB is associated with COLD_WEIGHT and UnreachBB with</span></div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="comment">/// UNREACHABLE_WEIGHT. COLD_WEIGHT is set to BB2 as maximum between its</span></div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<span class="comment">/// successors. BB1 and BB3 has no explicit estimated weights and assumed to</span></div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="comment">/// have DEFAULT_WEIGHT. Based on assigned weights branches will have the</span></div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="comment">/// following probabilities:</span></div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;<span class="comment">/// P(BB1-&gt;BB2) = COLD_WEIGHT/(COLD_WEIGHT + DEFAULT_WEIGHT) =</span></div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<span class="comment">///   0xffff / (0xffff + 0xfffff) = 0.0588(5.9%)</span></div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="comment">/// P(BB1-&gt;BB3) = DEFAULT_WEIGHT_WEIGHT/(COLD_WEIGHT + DEFAULT_WEIGHT) =</span></div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;<span class="comment">///          0xfffff / (0xffff + 0xfffff) = 0.941(94.1%)</span></div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;<span class="comment">/// P(BB2-&gt;ColdBB) = COLD_WEIGHT/(COLD_WEIGHT + UNREACHABLE_WEIGHT) = 1(100%)</span></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;<span class="comment">/// P(BB2-&gt;UnreachBB) =</span></div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="comment">///   UNREACHABLE_WEIGHT/(COLD_WEIGHT+UNREACHABLE_WEIGHT) = 0(0%)</span></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="comment">/// If no branch probabilities were calculated on this step then take the next</span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="comment">/// one.</span></div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;<span class="comment">///   Third, apply different kinds of local heuristics for each individual</span></div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;<span class="comment">/// branch until first match. For example probability of a pointer to be null is</span></div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;<span class="comment">/// estimated as PH_TAKEN_WEIGHT/(PH_TAKEN_WEIGHT + PH_NONTAKEN_WEIGHT). If</span></div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;<span class="comment">/// no local heuristic has been matched then branch is left with no explicit</span></div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;<span class="comment">/// probability set and assumed to have default probability.</span></div>
<div class="line"><a name="l00113"></a><span class="lineno"><a class="line" href="classllvm_1_1BranchProbabilityInfo.html">  113</a></span>&#160;<span class="comment"></span><span class="keyword">class </span><a class="code" href="classllvm_1_1BranchProbabilityInfo.html">BranchProbabilityInfo</a> {</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;  <a class="code" href="classllvm_1_1BranchProbabilityInfo.html#a771cb111ac312594590e53c1f3699fda">BranchProbabilityInfo</a>() = <span class="keywordflow">default</span>;</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160; </div>
<div class="line"><a name="l00117"></a><span class="lineno"><a class="line" href="classllvm_1_1BranchProbabilityInfo.html#ad18bab54d5bb7925300874713924714b">  117</a></span>&#160;  <a class="code" href="classllvm_1_1BranchProbabilityInfo.html#ad18bab54d5bb7925300874713924714b">BranchProbabilityInfo</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, <span class="keyword">const</span> <a class="code" href="classllvm_1_1LoopInfo.html">LoopInfo</a> &amp;LI,</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;                        <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetLibraryInfo.html">TargetLibraryInfo</a> *TLI = <span class="keyword">nullptr</span>,</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;                        <a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> *DT = <span class="keyword">nullptr</span>,</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;                        <a class="code" href="classllvm_1_1PostDominatorTree.html">PostDominatorTree</a> *PDT = <span class="keyword">nullptr</span>) {</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    <a class="code" href="classllvm_1_1BranchProbabilityInfo.html#a54c3911cf4abbcd272fa99a303823942">calculate</a>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, LI, TLI, DT, PDT);</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;  }</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160; </div>
<div class="line"><a name="l00124"></a><span class="lineno"><a class="line" href="classllvm_1_1BranchProbabilityInfo.html#ab030c39bf198b14c4420c1c5e6c16114">  124</a></span>&#160;  <a class="code" href="classllvm_1_1BranchProbabilityInfo.html#ab030c39bf198b14c4420c1c5e6c16114">BranchProbabilityInfo</a>(<a class="code" href="classllvm_1_1BranchProbabilityInfo.html">BranchProbabilityInfo</a> &amp;&amp;<a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>)</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;      : Probs(<a class="code" href="namespacestd.html">std</a>::<a class="code" href="namespacellvm.html#abfc9c7ecf70f66901e439f7c04ef3dbb">move</a>(<a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>.Probs)), LastF(<a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>.LastF),</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;        EstimatedBlockWeight(<a class="code" href="namespacestd.html">std</a>::<a class="code" href="namespacellvm.html#abfc9c7ecf70f66901e439f7c04ef3dbb">move</a>(<a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>.EstimatedBlockWeight)) {}</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160; </div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;  <a class="code" href="classllvm_1_1BranchProbabilityInfo.html#a771cb111ac312594590e53c1f3699fda">BranchProbabilityInfo</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1BranchProbabilityInfo.html">BranchProbabilityInfo</a> &amp;) = <span class="keyword">delete</span>;</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;  <a class="code" href="classllvm_1_1BranchProbabilityInfo.html">BranchProbabilityInfo</a> &amp;<a class="code" href="classllvm_1_1BranchProbabilityInfo.html#a7e0961f9bd7bb01f20c5213e39fa8b08">operator=</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1BranchProbabilityInfo.html">BranchProbabilityInfo</a> &amp;) = <span class="keyword">delete</span>;</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160; </div>
<div class="line"><a name="l00131"></a><span class="lineno"><a class="line" href="classllvm_1_1BranchProbabilityInfo.html#a3339cf5c24b9bb9b62ab28592cffbb5c">  131</a></span>&#160;  <a class="code" href="classllvm_1_1BranchProbabilityInfo.html">BranchProbabilityInfo</a> &amp;<a class="code" href="classllvm_1_1BranchProbabilityInfo.html#a3339cf5c24b9bb9b62ab28592cffbb5c">operator=</a>(<a class="code" href="classllvm_1_1BranchProbabilityInfo.html">BranchProbabilityInfo</a> &amp;&amp;<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>) {</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    <a class="code" href="classllvm_1_1BranchProbabilityInfo.html#a884b41d94b6ffea3302b48b3ab14fd58">releaseMemory</a>();</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    Probs = <a class="code" href="lib_2Target_2ARM_2README_8txt.html#ad3a99906764c35b2694ae90fa57744a5">std::move</a>(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>.Probs);</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    EstimatedBlockWeight = <a class="code" href="lib_2Target_2ARM_2README_8txt.html#ad3a99906764c35b2694ae90fa57744a5">std::move</a>(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>.EstimatedBlockWeight);</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;  }</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160; </div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1BranchProbabilityInfo.html#a41951a9cbc849c4e0f2930f594c08847">invalidate</a>(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;, <span class="keyword">const</span> <a class="code" href="classllvm_1_1PreservedAnalyses.html">PreservedAnalyses</a> &amp;PA,</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;                  <a class="code" href="classllvm_1_1AnalysisManager_1_1Invalidator.html">FunctionAnalysisManager::Invalidator</a> &amp;);</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160; </div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classllvm_1_1BranchProbabilityInfo.html#a884b41d94b6ffea3302b48b3ab14fd58">releaseMemory</a>();</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160; </div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classllvm_1_1BranchProbabilityInfo.html#acea510110989b4372eae3d2e68fcf04d">print</a>(<a class="code" href="classllvm_1_1raw__ostream.html">raw_ostream</a> &amp;<a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a>) <span class="keyword">const</span>;</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;<span class="comment">  /// Get an edge&#39;s probability, relative to other out-edges of the Src.</span></div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;<span class="comment">  ///</span></div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;<span class="comment">  /// This routine provides access to the fractional probability between zero</span></div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;<span class="comment">  /// (0%) and one (100%) of this edge executing, relative to other edges</span></div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;<span class="comment">  /// leaving the &#39;Src&#39; block. The returned probability is never zero, and can</span></div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;<span class="comment">  /// only be one if the source block has only one successor.</span></div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1BranchProbability.html">BranchProbability</a> <a class="code" href="classllvm_1_1BranchProbabilityInfo.html#a46502d648608aa13cb485ed4af447d88">getEdgeProbability</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Src,</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;                                       <span class="keywordtype">unsigned</span> IndexInSuccessors) <span class="keyword">const</span>;</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;<span class="comment">  /// Get the probability of going from Src to Dst.</span></div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;<span class="comment">  ///</span></div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;<span class="comment">  /// It returns the sum of all probabilities for edges from Src to Dst.</span></div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1BranchProbability.html">BranchProbability</a> <a class="code" href="classllvm_1_1BranchProbabilityInfo.html#a46502d648608aa13cb485ed4af447d88">getEdgeProbability</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Src,</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;                                       <span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Dst) <span class="keyword">const</span>;</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160; </div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;  <a class="code" href="classllvm_1_1BranchProbability.html">BranchProbability</a> <a class="code" href="classllvm_1_1BranchProbabilityInfo.html#a46502d648608aa13cb485ed4af447d88">getEdgeProbability</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Src,</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;                                       <a class="code" href="classllvm_1_1SuccIterator.html">const_succ_iterator</a> Dst) <span class="keyword">const</span>;</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;<span class="comment">  /// Test if an edge is hot relative to other out-edges of the Src.</span></div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;<span class="comment">  ///</span></div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;<span class="comment">  /// Check whether this edge out of the source block is &#39;hot&#39;. We define hot</span></div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;<span class="comment">  /// as having a relative probability &gt;= 80%.</span></div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;<span class="comment"></span>  <span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1BranchProbabilityInfo.html#aa2da8547348736e285afd8af9093a83d">isEdgeHot</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Src, <span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Dst) <span class="keyword">const</span>;</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;<span class="comment">  /// Print an edge&#39;s probability.</span></div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;<span class="comment">  ///</span></div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;<span class="comment">  /// Retrieves an edge&#39;s probability similarly to \see getEdgeProbability, but</span></div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;<span class="comment">  /// then prints that probability to the provided stream. That stream is then</span></div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;<span class="comment">  /// returned.</span></div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1raw__ostream.html">raw_ostream</a> &amp;<a class="code" href="classllvm_1_1BranchProbabilityInfo.html#ae13ac2ed5c40e40fff6ace158e7c0cf3">printEdgeProbability</a>(<a class="code" href="classllvm_1_1raw__ostream.html">raw_ostream</a> &amp;<a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a>, <span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Src,</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;                                    <span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Dst) <span class="keyword">const</span>;</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160; </div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;<span class="keyword">public</span>:<span class="comment"></span></div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;<span class="comment">  /// Set the raw probabilities for all edges from the given block.</span></div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;<span class="comment">  ///</span></div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;<span class="comment">  /// This allows a pass to explicitly set edge probabilities for a block. It</span></div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;<span class="comment">  /// can be used when updating the CFG to update the branch probability</span></div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;<span class="comment">  /// information.</span></div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> <a class="code" href="classllvm_1_1BranchProbabilityInfo.html#a145edc209aa2f628c73c9cf860eeeb5c">setEdgeProbability</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Src,</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;                          <span class="keyword">const</span> <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;BranchProbability&gt;</a> &amp;Probs);</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;<span class="comment">  /// Copy outgoing edge probabilities from \p Src to \p Dst.</span></div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;<span class="comment">  ///</span></div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;<span class="comment">  /// This allows to keep probabilities unset for the destination if they were</span></div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;<span class="comment">  /// unset for source.</span></div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> <a class="code" href="classllvm_1_1BranchProbabilityInfo.html#af095c82360c397be730c08feb78264e9">copyEdgeProbabilities</a>(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Src, <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Dst);</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160; </div>
<div class="line"><a name="l00192"></a><span class="lineno"><a class="line" href="classllvm_1_1BranchProbabilityInfo.html#a4e4a47209688ad8c4359d4bf0f020f14">  192</a></span>&#160;  <span class="keyword">static</span> <a class="code" href="classllvm_1_1BranchProbability.html">BranchProbability</a> <a class="code" href="classllvm_1_1BranchProbabilityInfo.html#a4e4a47209688ad8c4359d4bf0f020f14">getBranchProbStackProtector</a>(<span class="keywordtype">bool</span> IsLikely) {</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classllvm_1_1BranchProbability.html">BranchProbability</a> LikelyProb((1u &lt;&lt; 20) - 1, 1u &lt;&lt; 20);</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    <span class="keywordflow">return</span> IsLikely ? LikelyProb : LikelyProb.<a class="code" href="classllvm_1_1BranchProbability.html#aaee6034264d5d0782e5d1489360730d9">getCompl</a>();</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;  }</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160; </div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classllvm_1_1BranchProbabilityInfo.html#a54c3911cf4abbcd272fa99a303823942">calculate</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, <span class="keyword">const</span> <a class="code" href="classllvm_1_1LoopInfo.html">LoopInfo</a> &amp;LI,</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;                 <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetLibraryInfo.html">TargetLibraryInfo</a> *TLI, <a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> *DT,</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;                 <a class="code" href="classllvm_1_1PostDominatorTree.html">PostDominatorTree</a> *PDT);</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;<span class="comment">  /// Forget analysis results for the given basic block.</span></div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> <a class="code" href="classllvm_1_1BranchProbabilityInfo.html#a0afb8520349ae7dc725ebfbb0532dbb1">eraseBlock</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160; </div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;  <span class="comment">// Data structure to track SCCs for handling irreducible loops.</span></div>
<div class="line"><a name="l00205"></a><span class="lineno"><a class="line" href="classllvm_1_1BranchProbabilityInfo_1_1SccInfo.html">  205</a></span>&#160;  <span class="keyword">class </span><a class="code" href="classllvm_1_1BranchProbabilityInfo_1_1SccInfo.html">SccInfo</a> {</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    <span class="comment">// Enum of types to classify basic blocks in SCC. Basic block belonging to</span></div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    <span class="comment">// SCC is &#39;Inner&#39; until it is either &#39;Header&#39; or &#39;Exiting&#39;. Note that a</span></div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    <span class="comment">// basic block can be &#39;Header&#39; and &#39;Exiting&#39; at the same time.</span></div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    <span class="keyword">enum</span> SccBlockType {</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;      Inner = 0x0,</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;      Header = 0x1,</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;      Exiting = 0x2,</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    };</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    <span class="comment">// Map of basic blocks to SCC IDs they belong to. If basic block doesn&#39;t</span></div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    <span class="comment">// belong to any SCC it is not in the map.</span></div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    <span class="keyword">using</span> <a class="code" href="classllvm_1_1DenseMap.html">SccMap</a> = <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;const BasicBlock *, int&gt;</a>;</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    <span class="comment">// Each basic block in SCC is attributed with one or several types from</span></div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    <span class="comment">// SccBlockType. Map value has uint32_t type (instead of SccBlockType)</span></div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    <span class="comment">// since basic block may be for example &quot;Header&quot; and &quot;Exiting&quot; at the same</span></div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    <span class="comment">// time and we need to be able to keep more than one value from</span></div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    <span class="comment">// SccBlockType.</span></div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    <span class="keyword">using</span> <a class="code" href="classllvm_1_1DenseMap.html">SccBlockTypeMap</a> = <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;const BasicBlock *, uint32_t&gt;</a>;</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    <span class="comment">// Vector containing classification of basic blocks for all  SCCs where i&#39;th</span></div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    <span class="comment">// vector element corresponds to SCC with ID equal to i.</span></div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    <span class="keyword">using</span> SccBlockTypeMaps = std::vector&lt;SccBlockTypeMap&gt;;</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160; </div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    <a class="code" href="classllvm_1_1DenseMap.html">SccMap</a> SccNums;</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    SccBlockTypeMaps SccBlocks;</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160; </div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;  <span class="keyword">public</span>:</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    <span class="keyword">explicit</span> <a class="code" href="classllvm_1_1BranchProbabilityInfo_1_1SccInfo.html#adb1204788a33211be05a6a01356e78d0">SccInfo</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;<span class="comment">    /// If \p BB belongs to some SCC then ID of that SCC is returned, otherwise</span></div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;<span class="comment">    /// -1 is returned. If \p BB belongs to more than one SCC at the same time</span></div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;<span class="comment">    /// result is undefined.</span></div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;<span class="comment"></span>    <span class="keywordtype">int</span> <a class="code" href="classllvm_1_1BranchProbabilityInfo_1_1SccInfo.html#af2b37a5830be4881f3995e017ecd8473">getSCCNum</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) <span class="keyword">const</span>;<span class="comment"></span></div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;<span class="comment">    /// Returns true if \p BB is a &#39;header&#39; block in SCC with \p SccNum ID,</span></div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;<span class="comment">    /// false otherwise.</span></div>
<div class="line"><a name="l00239"></a><span class="lineno"><a class="line" href="classllvm_1_1BranchProbabilityInfo_1_1SccInfo.html#a2e8c63ab0125e479a7145ce999a1f7a5">  239</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1BranchProbabilityInfo_1_1SccInfo.html#a2e8c63ab0125e479a7145ce999a1f7a5">isSCCHeader</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, <span class="keywordtype">int</span> SccNum)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;      <span class="keywordflow">return</span> getSccBlockType(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, SccNum) &amp; Header;</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    }<span class="comment"></span></div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;<span class="comment">    /// Returns true if \p BB is an &#39;exiting&#39; block in SCC with \p SccNum ID,</span></div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;<span class="comment">    /// false otherwise.</span></div>
<div class="line"><a name="l00244"></a><span class="lineno"><a class="line" href="classllvm_1_1BranchProbabilityInfo_1_1SccInfo.html#ad2fe989982caf7a59655a6b04386ea95">  244</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1BranchProbabilityInfo_1_1SccInfo.html#ad2fe989982caf7a59655a6b04386ea95">isSCCExitingBlock</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, <span class="keywordtype">int</span> SccNum)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;      <span class="keywordflow">return</span> getSccBlockType(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, SccNum) &amp; Exiting;</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    }<span class="comment"></span></div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;<span class="comment">    /// Fills in \p Enters vector with all such blocks that don&#39;t belong to</span></div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;<span class="comment">    /// SCC with \p SccNum ID but there is an edge to a block belonging to the</span></div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;<span class="comment">    /// SCC.</span></div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;<span class="comment"></span>    <span class="keywordtype">void</span> <a class="code" href="classllvm_1_1BranchProbabilityInfo_1_1SccInfo.html#aa45126829059172e7a55b24547167673">getSccEnterBlocks</a>(<span class="keywordtype">int</span> SccNum,</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;                           <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;BasicBlock *&gt;</a> &amp;Enters) <span class="keyword">const</span>;<span class="comment"></span></div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;<span class="comment">    /// Fills in \p Exits vector with all such blocks that don&#39;t belong to</span></div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;<span class="comment">    /// SCC with \p SccNum ID but there is an edge from a block belonging to the</span></div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;<span class="comment">    /// SCC.</span></div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;<span class="comment"></span>    <span class="keywordtype">void</span> <a class="code" href="classllvm_1_1BranchProbabilityInfo_1_1SccInfo.html#adf3e2e7e5049244c18140cf77a7baf2c">getSccExitBlocks</a>(<span class="keywordtype">int</span> SccNum,</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;                          <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;BasicBlock *&gt;</a> &amp;Exits) <span class="keyword">const</span>;</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160; </div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;  <span class="keyword">private</span>:<span class="comment"></span></div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;<span class="comment">    /// Returns \p BB&#39;s type according to classification given by SccBlockType</span></div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;<span class="comment">    /// enum. Please note that \p BB must belong to SSC with \p SccNum ID.</span></div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;<span class="comment"></span>    <a class="code" href="classuint32__t.html">uint32_t</a> getSccBlockType(<span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, <span class="keywordtype">int</span> SccNum) <span class="keyword">const</span>;<span class="comment"></span></div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;<span class="comment">    /// Calculates \p BB&#39;s type and stores it in internal data structures for</span></div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;<span class="comment">    /// future use. Please note that \p BB must belong to SSC with \p SccNum ID.</span></div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;<span class="comment"></span>    <span class="keywordtype">void</span> calculateSccBlockType(<span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, <span class="keywordtype">int</span> SccNum);</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;  };</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160; </div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;<span class="keyword">private</span>:</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;  <span class="comment">// We need to store CallbackVH&#39;s in order to correctly handle basic block</span></div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;  <span class="comment">// removal.</span></div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;  <span class="keyword">class </span>BasicBlockCallbackVH final : <span class="keyword">public</span> <a class="code" href="classllvm_1_1CallbackVH.html">CallbackVH</a> {</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    <a class="code" href="classllvm_1_1BranchProbabilityInfo.html">BranchProbabilityInfo</a> *BPI;</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160; </div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    <span class="keywordtype">void</span> deleted()<span class="keyword"> override </span>{</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(BPI != <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;      BPI-&gt;eraseBlock(cast&lt;BasicBlock&gt;(getValPtr()));</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    }</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160; </div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;  <span class="keyword">public</span>:</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    BasicBlockCallbackVH(<span class="keyword">const</span> <a class="code" href="namespacellvm_1_1TargetStackID.html#a71392100eb15ba746b1f898986f5d8a5">Value</a> *V, <a class="code" href="classllvm_1_1BranchProbabilityInfo.html#a771cb111ac312594590e53c1f3699fda">BranchProbabilityInfo</a> *BPI = <span class="keyword">nullptr</span>)</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;        : CallbackVH(const_cast&lt;<a class="code" href="namespacellvm_1_1TargetStackID.html#a71392100eb15ba746b1f898986f5d8a5">Value</a> *&gt;(V)), BPI(BPI) {}</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;  };</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;<span class="comment">  /// Pair of Loop and SCC ID number. Used to unify handling of normal and</span></div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;<span class="comment">  /// SCC based loop representations.</span></div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;<span class="comment"></span>  <span class="keyword">using</span> LoopData = std::pair&lt;Loop *, int&gt;;<span class="comment"></span></div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;<span class="comment">  /// Helper class to keep basic block along with its loop data information.</span></div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;<span class="comment"></span>  <span class="keyword">class </span>LoopBlock {</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;  <span class="keyword">public</span>:</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    <span class="keyword">explicit</span> LoopBlock(<span class="keyword">const</span> <a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a8472e46f9e4db168c5610ecdfb05dbaf">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, <span class="keyword">const</span> LoopInfo &amp;LI,</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;                       <span class="keyword">const</span> SccInfo &amp;SccI);</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160; </div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    <span class="keyword">const</span> <a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a8472e46f9e4db168c5610ecdfb05dbaf">BasicBlock</a> *getBlock()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>; }</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    <a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a8472e46f9e4db168c5610ecdfb05dbaf">BasicBlock</a> *getBlock() { <span class="keywordflow">return</span> <span class="keyword">const_cast&lt;</span><a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a8472e46f9e4db168c5610ecdfb05dbaf">BasicBlock</a> *<span class="keyword">&gt;</span>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>); }</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    LoopData getLoopData()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85a7289f7156c17c31399fe5226bf556781">LD</a>; }</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    Loop *getLoop()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85a7289f7156c17c31399fe5226bf556781">LD</a>.first; }</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    <span class="keywordtype">int</span> getSccNum()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85a7289f7156c17c31399fe5226bf556781">LD</a>.second; }</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160; </div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    <span class="keywordtype">bool</span> belongsToLoop()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> getLoop() || getSccNum() != -1; }</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    <span class="keywordtype">bool</span> belongsToSameLoop(<span class="keyword">const</span> LoopBlock &amp;LB)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;      <span class="keywordflow">return</span> (LB.getLoop() &amp;&amp; getLoop() == LB.getLoop()) ||</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;             (LB.getSccNum() != -1 &amp;&amp; getSccNum() == LB.getSccNum());</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    }</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160; </div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;  <span class="keyword">private</span>:</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    <span class="keyword">const</span> <a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a8472e46f9e4db168c5610ecdfb05dbaf">BasicBlock</a> *<span class="keyword">const</span> <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    LoopData <a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85a7289f7156c17c31399fe5226bf556781">LD</a> = {<span class="keyword">nullptr</span>, -1};</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;  };</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160; </div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;  <span class="comment">// Pair of LoopBlocks representing an edge from first to second block.</span></div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;  <span class="keyword">using</span> LoopEdge = std::pair&lt;const LoopBlock &amp;, const LoopBlock &amp;&gt;;</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160; </div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;  DenseSet&lt;BasicBlockCallbackVH, DenseMapInfo&lt;Value*&gt;&gt; Handles;</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160; </div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;  <span class="comment">// Since we allow duplicate edges from one basic block to another, we use</span></div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;  <span class="comment">// a pair (PredBlock and an index in the successors) to specify an edge.</span></div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;  <span class="keyword">using</span> Edge = std::pair&lt;const BasicBlock *, unsigned&gt;;</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160; </div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;  DenseMap&lt;Edge, BranchProbability&gt; Probs;</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;<span class="comment">  /// Track the last function we run over for printing.</span></div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;<span class="comment"></span>  <span class="keyword">const</span> <a class="code" href="namespacellvm_1_1codeview.html#adfebd8c4ae29ccd84c600c1e65d6b807a86408593c34af77fdd90df932f8b5261">Function</a> *LastF = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160; </div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;  <span class="keyword">const</span> LoopInfo *LI = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;<span class="comment">  /// Keeps information about all SCCs in a function.</span></div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;<span class="comment"></span>  std::unique_ptr&lt;const SccInfo&gt; SccI;</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;<span class="comment">  /// Keeps mapping of a basic block to its estimated weight.</span></div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;<span class="comment"></span>  SmallDenseMap&lt;const BasicBlock *, uint32_t&gt; EstimatedBlockWeight;</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;<span class="comment">  /// Keeps mapping of a loop to estimated weight to enter the loop.</span></div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;<span class="comment"></span>  SmallDenseMap&lt;LoopData, uint32_t&gt; EstimatedLoopWeight;</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;<span class="comment">  /// Helper to construct LoopBlock for \p BB.</span></div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;<span class="comment"></span>  LoopBlock getLoopBlock(<span class="keyword">const</span> <a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a8472e46f9e4db168c5610ecdfb05dbaf">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    <span class="keywordflow">return</span> LoopBlock(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, *LI, *SccI.get());</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;  }</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;<span class="comment">  /// Returns true if destination block belongs to some loop and source block is</span></div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;<span class="comment">  /// either doesn&#39;t belong to any loop or belongs to a loop which is not inner</span></div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;<span class="comment">  /// relative to the destination block.</span></div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;<span class="comment"></span>  <span class="keywordtype">bool</span> isLoopEnteringEdge(<span class="keyword">const</span> LoopEdge &amp;Edge) <span class="keyword">const</span>;<span class="comment"></span></div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;<span class="comment">  /// Returns true if source block belongs to some loop and destination block is</span></div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;<span class="comment">  /// either doesn&#39;t belong to any loop or belongs to a loop which is not inner</span></div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;<span class="comment">  /// relative to the source block.</span></div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;<span class="comment"></span>  <span class="keywordtype">bool</span> isLoopExitingEdge(<span class="keyword">const</span> LoopEdge &amp;Edge) <span class="keyword">const</span>;<span class="comment"></span></div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;<span class="comment">  /// Returns true if \p Edge is either enters to or exits from some loop, false</span></div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;<span class="comment">  /// in all other cases.</span></div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;<span class="comment"></span>  <span class="keywordtype">bool</span> isLoopEnteringExitingEdge(<span class="keyword">const</span> LoopEdge &amp;Edge) <span class="keyword">const</span>;<span class="comment"></span></div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;<span class="comment">  /// Returns true if source and destination blocks belongs to the same loop and</span></div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;<span class="comment">  /// destination block is loop header.</span></div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;<span class="comment"></span>  <span class="keywordtype">bool</span> isLoopBackEdge(<span class="keyword">const</span> LoopEdge &amp;Edge) <span class="keyword">const</span>;</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;  <span class="comment">// Fills in \p Enters vector with all &quot;enter&quot; blocks to a loop \LB belongs to.</span></div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;  <span class="keywordtype">void</span> getLoopEnterBlocks(<span class="keyword">const</span> LoopBlock &amp;LB,</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;                          SmallVectorImpl&lt;BasicBlock *&gt; &amp;Enters) <span class="keyword">const</span>;</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;  <span class="comment">// Fills in \p Exits vector with all &quot;exit&quot; blocks from a loop \LB belongs to.</span></div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;  <span class="keywordtype">void</span> getLoopExitBlocks(<span class="keyword">const</span> LoopBlock &amp;LB,</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;                         SmallVectorImpl&lt;BasicBlock *&gt; &amp;Exits) <span class="keyword">const</span>;</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;<span class="comment">  /// Returns estimated weight for \p BB. std::nullopt if \p BB has no estimated</span></div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;<span class="comment">  /// weight.</span></div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;<span class="comment"></span>  std::optional&lt;uint32_t&gt; getEstimatedBlockWeight(<span class="keyword">const</span> <a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a8472e46f9e4db168c5610ecdfb05dbaf">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) <span class="keyword">const</span>;</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;<span class="comment">  /// Returns estimated weight to enter \p L. In other words it is weight of</span></div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;<span class="comment">  /// loop&#39;s header block not scaled by trip count. Returns std::nullopt if \p L</span></div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;<span class="comment">  /// has no no estimated weight.</span></div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;<span class="comment"></span>  std::optional&lt;uint32_t&gt; getEstimatedLoopWeight(<span class="keyword">const</span> LoopData &amp;L) <span class="keyword">const</span>;</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;<span class="comment">  /// Return estimated weight for \p Edge. Returns std::nullopt if estimated</span></div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;<span class="comment">  /// weight is unknown.</span></div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;<span class="comment"></span>  std::optional&lt;uint32_t&gt; getEstimatedEdgeWeight(<span class="keyword">const</span> LoopEdge &amp;Edge) <span class="keyword">const</span>;</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;<span class="comment">  /// Iterates over all edges leading from \p SrcBB to \p Successors and</span></div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;<span class="comment">  /// returns maximum of all estimated weights. If at least one edge has unknown</span></div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;<span class="comment">  /// estimated weight std::nullopt is returned.</span></div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;<span class="comment"></span>  <span class="keyword">template</span> &lt;<span class="keyword">class</span> IterT&gt;</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;  std::optional&lt;uint32_t&gt;</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;  getMaxEstimatedEdgeWeight(<span class="keyword">const</span> LoopBlock &amp;SrcBB,</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;                            iterator_range&lt;IterT&gt; Successors) <span class="keyword">const</span>;</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;<span class="comment">  /// If \p LoopBB has no estimated weight then set it to \p BBWeight and</span></div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;<span class="comment">  /// return true. Otherwise \p BB&#39;s weight remains unchanged and false is</span></div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;<span class="comment">  /// returned. In addition all blocks/loops that might need their weight to be</span></div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;<span class="comment">  /// re-estimated are put into BlockWorkList/LoopWorkList.</span></div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;<span class="comment"></span>  <span class="keywordtype">bool</span> updateEstimatedBlockWeight(LoopBlock &amp;LoopBB, <a class="code" href="classuint32__t.html">uint32_t</a> BBWeight,</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;                                  SmallVectorImpl&lt;BasicBlock *&gt; &amp;BlockWorkList,</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;                                  SmallVectorImpl&lt;LoopBlock&gt; &amp;LoopWorkList);</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;<span class="comment">  /// Starting from \p LoopBB (including \p LoopBB itself) propagate \p BBWeight</span></div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;<span class="comment">  /// up the domination tree.</span></div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> propagateEstimatedBlockWeight(<span class="keyword">const</span> LoopBlock &amp;LoopBB, DominatorTree *DT,</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;                                     PostDominatorTree *PDT, <a class="code" href="classuint32__t.html">uint32_t</a> BBWeight,</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;                                     SmallVectorImpl&lt;BasicBlock *&gt; &amp;WorkList,</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;                                     SmallVectorImpl&lt;LoopBlock&gt; &amp;LoopWorkList);</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;<span class="comment">  /// Returns block&#39;s weight encoded in the IR.</span></div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;<span class="comment"></span>  std::optional&lt;uint32_t&gt; getInitialEstimatedBlockWeight(<span class="keyword">const</span> <a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a8472e46f9e4db168c5610ecdfb05dbaf">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160; </div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;  <span class="comment">// Computes estimated weights for all blocks in \p F.</span></div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;  <span class="keywordtype">void</span> computeEestimateBlockWeight(<span class="keyword">const</span> Function &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, DominatorTree *DT,</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;                                   PostDominatorTree *PDT);</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;<span class="comment">  /// Based on computed weights by \p computeEstimatedBlockWeight set</span></div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;<span class="comment">  /// probabilities on branches.</span></div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;<span class="comment"></span>  <span class="keywordtype">bool</span> calcEstimatedHeuristics(<span class="keyword">const</span> <a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a8472e46f9e4db168c5610ecdfb05dbaf">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;  <span class="keywordtype">bool</span> calcMetadataWeights(<span class="keyword">const</span> <a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a8472e46f9e4db168c5610ecdfb05dbaf">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;  <span class="keywordtype">bool</span> calcPointerHeuristics(<span class="keyword">const</span> <a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a8472e46f9e4db168c5610ecdfb05dbaf">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;  <span class="keywordtype">bool</span> calcZeroHeuristics(<span class="keyword">const</span> <a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a8472e46f9e4db168c5610ecdfb05dbaf">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, <span class="keyword">const</span> TargetLibraryInfo *TLI);</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;  <span class="keywordtype">bool</span> calcFloatingPointHeuristics(<span class="keyword">const</span> <a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a8472e46f9e4db168c5610ecdfb05dbaf">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;};</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;<span class="comment">/// Analysis pass which computes \c BranchProbabilityInfo.</span></div>
<div class="line"><a name="l00413"></a><span class="lineno"><a class="line" href="classllvm_1_1BranchProbabilityAnalysis.html">  413</a></span>&#160;<span class="comment"></span><span class="keyword">class </span><a class="code" href="classllvm_1_1BranchProbabilityAnalysis.html">BranchProbabilityAnalysis</a></div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    : <span class="keyword">public</span> <a class="code" href="structllvm_1_1AnalysisInfoMixin.html">AnalysisInfoMixin</a>&lt;BranchProbabilityAnalysis&gt; {</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;  <span class="keyword">friend</span> <a class="code" href="structllvm_1_1AnalysisInfoMixin.html">AnalysisInfoMixin&lt;BranchProbabilityAnalysis&gt;</a>;</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160; </div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;  <span class="keyword">static</span> <a class="code" href="structllvm_1_1AnalysisKey.html">AnalysisKey</a> Key;</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160; </div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;<span class="keyword">public</span>:<span class="comment"></span></div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;<span class="comment">  /// Provide the result type for this analysis pass.</span></div>
<div class="line"><a name="l00421"></a><span class="lineno"><a class="line" href="classllvm_1_1BranchProbabilityAnalysis.html#a8aa0715a0cf6de18a07f161081f8b049">  421</a></span>&#160;<span class="comment"></span>  <span class="keyword">using</span> <a class="code" href="classllvm_1_1BranchProbabilityInfo.html">Result</a> = <a class="code" href="classllvm_1_1BranchProbabilityInfo.html">BranchProbabilityInfo</a>;</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;<span class="comment">  /// Run the analysis pass over a function and produce BPI.</span></div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1BranchProbabilityInfo.html">BranchProbabilityInfo</a> <a class="code" href="classllvm_1_1BranchProbabilityAnalysis.html#a16f8c5851cffc6f908a232089fc71de6">run</a>(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, <a class="code" href="classllvm_1_1AnalysisManager.html">FunctionAnalysisManager</a> &amp;AM);</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;};</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;<span class="comment">/// Printer pass for the \c BranchProbabilityAnalysis results.</span></div>
<div class="line"><a name="l00428"></a><span class="lineno"><a class="line" href="classllvm_1_1BranchProbabilityPrinterPass.html">  428</a></span>&#160;<span class="comment"></span><span class="keyword">class </span><a class="code" href="classllvm_1_1BranchProbabilityPrinterPass.html">BranchProbabilityPrinterPass</a></div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    : <span class="keyword">public</span> <a class="code" href="structllvm_1_1PassInfoMixin.html">PassInfoMixin</a>&lt;BranchProbabilityPrinterPass&gt; {</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;  <a class="code" href="classllvm_1_1raw__ostream.html">raw_ostream</a> &amp;OS;</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160; </div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00433"></a><span class="lineno"><a class="line" href="classllvm_1_1BranchProbabilityPrinterPass.html#a1cd0b7ccfc950eca06cc3f7f42507f53">  433</a></span>&#160;  <span class="keyword">explicit</span> <a class="code" href="classllvm_1_1BranchProbabilityPrinterPass.html#a1cd0b7ccfc950eca06cc3f7f42507f53">BranchProbabilityPrinterPass</a>(<a class="code" href="classllvm_1_1raw__ostream.html">raw_ostream</a> &amp;OS) : <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a>(<a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a>) {}</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160; </div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;  <a class="code" href="classllvm_1_1PreservedAnalyses.html">PreservedAnalyses</a> <a class="code" href="classllvm_1_1BranchProbabilityPrinterPass.html#af8bbfa323a4917223612dff12067110b">run</a>(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, <a class="code" href="classllvm_1_1AnalysisManager.html">FunctionAnalysisManager</a> &amp;AM);</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;};</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;<span class="comment">/// Legacy analysis pass which computes \c BranchProbabilityInfo.</span></div>
<div class="line"><a name="l00439"></a><span class="lineno"><a class="line" href="classllvm_1_1BranchProbabilityInfoWrapperPass.html">  439</a></span>&#160;<span class="comment"></span><span class="keyword">class </span><a class="code" href="classllvm_1_1BranchProbabilityInfoWrapperPass.html">BranchProbabilityInfoWrapperPass</a> : <span class="keyword">public</span> <a class="code" href="classllvm_1_1FunctionPass.html">FunctionPass</a> {</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;  <a class="code" href="classllvm_1_1BranchProbabilityInfo.html">BranchProbabilityInfo</a> BPI;</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160; </div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00443"></a><span class="lineno"><a class="line" href="classllvm_1_1BranchProbabilityInfoWrapperPass.html#a702dc2b869d1d2dc906729f781e68479">  443</a></span>&#160;  <span class="keyword">static</span> <span class="keywordtype">char</span> <a class="code" href="classllvm_1_1BranchProbabilityInfoWrapperPass.html#a702dc2b869d1d2dc906729f781e68479">ID</a>;</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160; </div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;  <a class="code" href="classllvm_1_1BranchProbabilityInfoWrapperPass.html#a9b02436688f4921a0ff96e38d8c4c3dd">BranchProbabilityInfoWrapperPass</a>();</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160; </div>
<div class="line"><a name="l00447"></a><span class="lineno"><a class="line" href="classllvm_1_1BranchProbabilityInfoWrapperPass.html#aa0fc5c70e8fc1e83d0f1ba8e35600528">  447</a></span>&#160;  <a class="code" href="classllvm_1_1BranchProbabilityInfo.html">BranchProbabilityInfo</a> &amp;<a class="code" href="classllvm_1_1BranchProbabilityInfoWrapperPass.html#aa0fc5c70e8fc1e83d0f1ba8e35600528">getBPI</a>() { <span class="keywordflow">return</span> BPI; }</div>
<div class="line"><a name="l00448"></a><span class="lineno"><a class="line" href="classllvm_1_1BranchProbabilityInfoWrapperPass.html#ac0b94f96f52faa8bc6588d692e137e33">  448</a></span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1BranchProbabilityInfo.html">BranchProbabilityInfo</a> &amp;<a class="code" href="classllvm_1_1BranchProbabilityInfoWrapperPass.html#ac0b94f96f52faa8bc6588d692e137e33">getBPI</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> BPI; }</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160; </div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classllvm_1_1BranchProbabilityInfoWrapperPass.html#a398c57492156d37f18c5f633ab737624">getAnalysisUsage</a>(<a class="code" href="classllvm_1_1AnalysisUsage.html">AnalysisUsage</a> &amp;AU) <span class="keyword">const override</span>;</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1BranchProbabilityInfoWrapperPass.html#ad32017b091b9ec5d6d88187d44ede817">runOnFunction</a>(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>) <span class="keyword">override</span>;</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classllvm_1_1BranchProbabilityInfoWrapperPass.html#a0ccbb62e69f0b8b82adf27d9b15b3c52">releaseMemory</a>() <span class="keyword">override</span>;</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classllvm_1_1BranchProbabilityInfoWrapperPass.html#aea35b7bd5d6b626c207cf02414fa5093">print</a>(<a class="code" href="classllvm_1_1raw__ostream.html">raw_ostream</a> &amp;<a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a>, <span class="keyword">const</span> <a class="code" href="classllvm_1_1Module.html">Module</a> *M = <span class="keyword">nullptr</span>) <span class="keyword">const override</span>;</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;};</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160; </div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;} <span class="comment">// end namespace llvm</span></div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160; </div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;<span class="preprocessor">#endif // LLVM_ANALYSIS_BRANCHPROBABILITYINFO_H</span></div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="aclassllvm_1_1SuccIterator_html"><div class="ttname"><a href="classllvm_1_1SuccIterator.html">llvm::SuccIterator</a></div><div class="ttdef"><b>Definition:</b> <a href="IR_2CFG_8h_source.html#l00138">CFG.h:138</a></div></div>
<div class="ttc" id="aclassllvm_1_1PreservedAnalyses_html"><div class="ttname"><a href="classllvm_1_1PreservedAnalyses.html">llvm::PreservedAnalyses</a></div><div class="ttdoc">A set of analyses that are preserved following a run of a transformation pass.</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00152">PassManager.h:152</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchProbabilityPrinterPass_html"><div class="ttname"><a href="classllvm_1_1BranchProbabilityPrinterPass.html">llvm::BranchProbabilityPrinterPass</a></div><div class="ttdoc">Printer pass for the BranchProbabilityAnalysis results.</div><div class="ttdef"><b>Definition:</b> <a href="BranchProbabilityInfo_8h_source.html#l00428">BranchProbabilityInfo.h:428</a></div></div>
<div class="ttc" id="anamespacellvm_html"><div class="ttname"><a href="namespacellvm.html">llvm</a></div><div class="ttdoc">This is an optimization pass for GlobalISel generic memory operations.</div><div class="ttdef"><b>Definition:</b> <a href="AddressRanges_8h_source.html#l00018">AddressRanges.h:18</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchProbabilityInfo_1_1SccInfo_html_adf3e2e7e5049244c18140cf77a7baf2c"><div class="ttname"><a href="classllvm_1_1BranchProbabilityInfo_1_1SccInfo.html#adf3e2e7e5049244c18140cf77a7baf2c">llvm::BranchProbabilityInfo::SccInfo::getSccExitBlocks</a></div><div class="ttdeci">void getSccExitBlocks(int SccNum, SmallVectorImpl&lt; BasicBlock * &gt; &amp;Exits) const</div><div class="ttdoc">Fills in Exits vector with all such blocks that don't belong to SCC with SccNum ID but there is an ed...</div><div class="ttdef"><b>Definition:</b> <a href="BranchProbabilityInfo_8cpp_source.html#l00259">BranchProbabilityInfo.cpp:259</a></div></div>
<div class="ttc" id="astructllvm_1_1PassInfoMixin_html"><div class="ttname"><a href="structllvm_1_1PassInfoMixin.html">llvm::PassInfoMixin</a></div><div class="ttdoc">A CRTP mix-in to automatically provide informational APIs needed for passes.</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00371">PassManager.h:371</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html"><div class="ttname"><a href="classllvm_1_1Function.html">llvm::Function</a></div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00059">Function.h:59</a></div></div>
<div class="ttc" id="aPass_8h_html"><div class="ttname"><a href="Pass_8h.html">Pass.h</a></div></div>
<div class="ttc" id="anamespacellvm_1_1ARM__MB_html_ad70272e2a9ec2a7e3a497458e1edbc85a7289f7156c17c31399fe5226bf556781"><div class="ttname"><a href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85a7289f7156c17c31399fe5226bf556781">llvm::ARM_MB::LD</a></div><div class="ttdeci">@ LD</div><div class="ttdef"><b>Definition:</b> <a href="MCTargetDesc_2ARMBaseInfo_8h_source.html#l00072">ARMBaseInfo.h:72</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchProbabilityInfo_html_a3339cf5c24b9bb9b62ab28592cffbb5c"><div class="ttname"><a href="classllvm_1_1BranchProbabilityInfo.html#a3339cf5c24b9bb9b62ab28592cffbb5c">llvm::BranchProbabilityInfo::operator=</a></div><div class="ttdeci">BranchProbabilityInfo &amp; operator=(BranchProbabilityInfo &amp;&amp;RHS)</div><div class="ttdef"><b>Definition:</b> <a href="BranchProbabilityInfo_8h_source.html#l00131">BranchProbabilityInfo.h:131</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchProbabilityInfo_1_1SccInfo_html_a2e8c63ab0125e479a7145ce999a1f7a5"><div class="ttname"><a href="classllvm_1_1BranchProbabilityInfo_1_1SccInfo.html#a2e8c63ab0125e479a7145ce999a1f7a5">llvm::BranchProbabilityInfo::SccInfo::isSCCHeader</a></div><div class="ttdeci">bool isSCCHeader(const BasicBlock *BB, int SccNum) const</div><div class="ttdoc">Returns true if BB is a 'header' block in SCC with SccNum ID, false otherwise.</div><div class="ttdef"><b>Definition:</b> <a href="BranchProbabilityInfo_8h_source.html#l00239">BranchProbabilityInfo.h:239</a></div></div>
<div class="ttc" id="aclassllvm_1_1DominatorTree_html"><div class="ttname"><a href="classllvm_1_1DominatorTree.html">llvm::DominatorTree</a></div><div class="ttdoc">Concrete subclass of DominatorTreeBase that is used to compute a normal dominator tree.</div><div class="ttdef"><b>Definition:</b> <a href="Dominators_8h_source.html#l00166">Dominators.h:166</a></div></div>
<div class="ttc" id="aDenseMap_8h_html"><div class="ttname"><a href="DenseMap_8h.html">DenseMap.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchProbabilityInfo_html_a884b41d94b6ffea3302b48b3ab14fd58"><div class="ttname"><a href="classllvm_1_1BranchProbabilityInfo.html#a884b41d94b6ffea3302b48b3ab14fd58">llvm::BranchProbabilityInfo::releaseMemory</a></div><div class="ttdeci">void releaseMemory()</div><div class="ttdef"><b>Definition:</b> <a href="BranchProbabilityInfo_8cpp_source.html#l01058">BranchProbabilityInfo.cpp:1058</a></div></div>
<div class="ttc" id="aX86PartialReduction_8cpp_html_a87b8bfbbe9d8f7146d7f20a5fb42efd0"><div class="ttname"><a href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a></div><div class="ttdeci">Value * RHS</div><div class="ttdef"><b>Definition:</b> <a href="X86PartialReduction_8cpp_source.html#l00076">X86PartialReduction.cpp:76</a></div></div>
<div class="ttc" id="aMD5_8cpp_html_a96d73bbd7af15cb1fc38c3f4a3bd82e9"><div class="ttname"><a href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a></div><div class="ttdeci">#define F(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00055">MD5.cpp:55</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchProbabilityInfo_html_ad18bab54d5bb7925300874713924714b"><div class="ttname"><a href="classllvm_1_1BranchProbabilityInfo.html#ad18bab54d5bb7925300874713924714b">llvm::BranchProbabilityInfo::BranchProbabilityInfo</a></div><div class="ttdeci">BranchProbabilityInfo(const Function &amp;F, const LoopInfo &amp;LI, const TargetLibraryInfo *TLI=nullptr, DominatorTree *DT=nullptr, PostDominatorTree *PDT=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="BranchProbabilityInfo_8h_source.html#l00117">BranchProbabilityInfo.h:117</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html"><div class="ttname"><a href="classllvm_1_1BasicBlock.html">llvm::BasicBlock</a></div><div class="ttdoc">LLVM Basic Block Representation.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00055">BasicBlock.h:55</a></div></div>
<div class="ttc" id="aAMDGPULibCalls_8cpp_html_afecf1cc1292b07f57d343c0f4d682044"><div class="ttname"><a href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a></div><div class="ttdeci">amdgpu Simplify well known AMD library false FunctionCallee Value * Arg</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULibCalls_8cpp_source.html#l00187">AMDGPULibCalls.cpp:187</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchProbabilityAnalysis_html"><div class="ttname"><a href="classllvm_1_1BranchProbabilityAnalysis.html">llvm::BranchProbabilityAnalysis</a></div><div class="ttdoc">Analysis pass which computes BranchProbabilityInfo.</div><div class="ttdef"><b>Definition:</b> <a href="BranchProbabilityInfo_8h_source.html#l00413">BranchProbabilityInfo.h:413</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchProbabilityInfoWrapperPass_html"><div class="ttname"><a href="classllvm_1_1BranchProbabilityInfoWrapperPass.html">llvm::BranchProbabilityInfoWrapperPass</a></div><div class="ttdoc">Legacy analysis pass which computes BranchProbabilityInfo.</div><div class="ttdef"><b>Definition:</b> <a href="BranchProbabilityInfo_8h_source.html#l00439">BranchProbabilityInfo.h:439</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchProbabilityInfo_1_1SccInfo_html_aa45126829059172e7a55b24547167673"><div class="ttname"><a href="classllvm_1_1BranchProbabilityInfo_1_1SccInfo.html#aa45126829059172e7a55b24547167673">llvm::BranchProbabilityInfo::SccInfo::getSccEnterBlocks</a></div><div class="ttdeci">void getSccEnterBlocks(int SccNum, SmallVectorImpl&lt; BasicBlock * &gt; &amp;Enters) const</div><div class="ttdoc">Fills in Enters vector with all such blocks that don't belong to SCC with SccNum ID but there is an e...</div><div class="ttdef"><b>Definition:</b> <a href="BranchProbabilityInfo_8cpp_source.html#l00247">BranchProbabilityInfo.cpp:247</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchProbabilityInfo_html_ab030c39bf198b14c4420c1c5e6c16114"><div class="ttname"><a href="classllvm_1_1BranchProbabilityInfo.html#ab030c39bf198b14c4420c1c5e6c16114">llvm::BranchProbabilityInfo::BranchProbabilityInfo</a></div><div class="ttdeci">BranchProbabilityInfo(BranchProbabilityInfo &amp;&amp;Arg)</div><div class="ttdef"><b>Definition:</b> <a href="BranchProbabilityInfo_8h_source.html#l00124">BranchProbabilityInfo.h:124</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchProbabilityInfo_1_1SccInfo_html_ad2fe989982caf7a59655a6b04386ea95"><div class="ttname"><a href="classllvm_1_1BranchProbabilityInfo_1_1SccInfo.html#ad2fe989982caf7a59655a6b04386ea95">llvm::BranchProbabilityInfo::SccInfo::isSCCExitingBlock</a></div><div class="ttdeci">bool isSCCExitingBlock(const BasicBlock *BB, int SccNum) const</div><div class="ttdoc">Returns true if BB is an 'exiting' block in SCC with SccNum ID, false otherwise.</div><div class="ttdef"><b>Definition:</b> <a href="BranchProbabilityInfo_8h_source.html#l00244">BranchProbabilityInfo.h:244</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchProbabilityInfoWrapperPass_html_aa0fc5c70e8fc1e83d0f1ba8e35600528"><div class="ttname"><a href="classllvm_1_1BranchProbabilityInfoWrapperPass.html#aa0fc5c70e8fc1e83d0f1ba8e35600528">llvm::BranchProbabilityInfoWrapperPass::getBPI</a></div><div class="ttdeci">BranchProbabilityInfo &amp; getBPI()</div><div class="ttdef"><b>Definition:</b> <a href="BranchProbabilityInfo_8h_source.html#l00447">BranchProbabilityInfo.h:447</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchProbabilityInfo_html"><div class="ttname"><a href="classllvm_1_1BranchProbabilityInfo.html">llvm::BranchProbabilityInfo</a></div><div class="ttdoc">Analysis providing branch probability information.</div><div class="ttdef"><b>Definition:</b> <a href="BranchProbabilityInfo_8h_source.html#l00113">BranchProbabilityInfo.h:113</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchProbabilityInfo_html_a771cb111ac312594590e53c1f3699fda"><div class="ttname"><a href="classllvm_1_1BranchProbabilityInfo.html#a771cb111ac312594590e53c1f3699fda">llvm::BranchProbabilityInfo::BranchProbabilityInfo</a></div><div class="ttdeci">BranchProbabilityInfo()=default</div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisUsage_html"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html">llvm::AnalysisUsage</a></div><div class="ttdoc">Represent the analysis usage information of a pass.</div><div class="ttdef"><b>Definition:</b> <a href="PassAnalysisSupport_8h_source.html#l00047">PassAnalysisSupport.h:47</a></div></div>
<div class="ttc" id="aDenseSet_8h_html"><div class="ttname"><a href="DenseSet_8h.html">DenseSet.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchProbabilityAnalysis_html_a16f8c5851cffc6f908a232089fc71de6"><div class="ttname"><a href="classllvm_1_1BranchProbabilityAnalysis.html#a16f8c5851cffc6f908a232089fc71de6">llvm::BranchProbabilityAnalysis::run</a></div><div class="ttdeci">BranchProbabilityInfo run(Function &amp;F, FunctionAnalysisManager &amp;AM)</div><div class="ttdoc">Run the analysis pass over a function and produce BPI.</div><div class="ttdef"><b>Definition:</b> <a href="BranchProbabilityInfo_8cpp_source.html#l01305">BranchProbabilityInfo.cpp:1305</a></div></div>
<div class="ttc" id="aclassllvm_1_1raw__ostream_html"><div class="ttname"><a href="classllvm_1_1raw__ostream.html">llvm::raw_ostream</a></div><div class="ttdoc">This class implements an extremely fast bulk output stream that can only output to a stream.</div><div class="ttdef"><b>Definition:</b> <a href="raw__ostream_8h_source.html#l00052">raw_ostream.h:52</a></div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisManager_1_1Invalidator_html"><div class="ttname"><a href="classllvm_1_1AnalysisManager_1_1Invalidator.html">llvm::AnalysisManager::Invalidator</a></div><div class="ttdoc">API to communicate dependencies between analyses during invalidation.</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00661">PassManager.h:661</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchProbabilityPrinterPass_html_a1cd0b7ccfc950eca06cc3f7f42507f53"><div class="ttname"><a href="classllvm_1_1BranchProbabilityPrinterPass.html#a1cd0b7ccfc950eca06cc3f7f42507f53">llvm::BranchProbabilityPrinterPass::BranchProbabilityPrinterPass</a></div><div class="ttdeci">BranchProbabilityPrinterPass(raw_ostream &amp;OS)</div><div class="ttdef"><b>Definition:</b> <a href="BranchProbabilityInfo_8h_source.html#l00433">BranchProbabilityInfo.h:433</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchProbabilityInfo_html_a4e4a47209688ad8c4359d4bf0f020f14"><div class="ttname"><a href="classllvm_1_1BranchProbabilityInfo.html#a4e4a47209688ad8c4359d4bf0f020f14">llvm::BranchProbabilityInfo::getBranchProbStackProtector</a></div><div class="ttdeci">static BranchProbability getBranchProbStackProtector(bool IsLikely)</div><div class="ttdef"><b>Definition:</b> <a href="BranchProbabilityInfo_8h_source.html#l00192">BranchProbabilityInfo.h:192</a></div></div>
<div class="ttc" id="aBranchProbability_8h_html"><div class="ttname"><a href="BranchProbability_8h.html">BranchProbability.h</a></div></div>
<div class="ttc" id="aIR_2CFG_8h_html"><div class="ttname"><a href="IR_2CFG_8h.html">CFG.h</a></div></div>
<div class="ttc" id="aBasicBlock_8h_html"><div class="ttname"><a href="BasicBlock_8h.html">BasicBlock.h</a></div></div>
<div class="ttc" id="alib_2Target_2ARM_2README_8txt_html_ad3a99906764c35b2694ae90fa57744a5"><div class="ttname"><a href="lib_2Target_2ARM_2README_8txt.html#ad3a99906764c35b2694ae90fa57744a5">move</a></div><div class="ttdeci">compiles ldr LCPI1_0 ldr ldr mov lsr tst moveq r1 ldr LCPI1_1 and r0 bx lr It would be better to do something like to fold the shift into the conditional move</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2ARM_2README_8txt_source.html#l00546">README.txt:546</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchProbabilityInfo_html_af095c82360c397be730c08feb78264e9"><div class="ttname"><a href="classllvm_1_1BranchProbabilityInfo.html#af095c82360c397be730c08feb78264e9">llvm::BranchProbabilityInfo::copyEdgeProbabilities</a></div><div class="ttdeci">void copyEdgeProbabilities(BasicBlock *Src, BasicBlock *Dst)</div><div class="ttdoc">Copy outgoing edge probabilities from Src to Dst.</div><div class="ttdef"><b>Definition:</b> <a href="BranchProbabilityInfo_8cpp_source.html#l01159">BranchProbabilityInfo.cpp:1159</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseMap_html"><div class="ttname"><a href="classllvm_1_1DenseMap.html">llvm::DenseMap&lt; const BasicBlock *, int &gt;</a></div></div>
<div class="ttc" id="astructllvm_1_1AnalysisKey_html"><div class="ttname"><a href="structllvm_1_1AnalysisKey.html">llvm::AnalysisKey</a></div><div class="ttdoc">A special type used by analysis passes to provide an address that identifies that particular analysis...</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00069">PassManager.h:69</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchProbabilityInfoWrapperPass_html_a0ccbb62e69f0b8b82adf27d9b15b3c52"><div class="ttname"><a href="classllvm_1_1BranchProbabilityInfoWrapperPass.html#a0ccbb62e69f0b8b82adf27d9b15b3c52">llvm::BranchProbabilityInfoWrapperPass::releaseMemory</a></div><div class="ttdeci">void releaseMemory() override</div><div class="ttdoc">releaseMemory() - This member can be implemented by a pass if it wants to be able to release its memo...</div><div class="ttdef"><b>Definition:</b> <a href="BranchProbabilityInfo_8cpp_source.html#l01296">BranchProbabilityInfo.cpp:1296</a></div></div>
<div class="ttc" id="aSILowerControlFlow_8cpp_html_a4868c5d81c5ccc98c47aeab6244346a0"><div class="ttname"><a href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a></div><div class="ttdeci">assert(ImpDefSCC.getReg()==AMDGPU::SCC &amp;&amp;ImpDefSCC.isDef())</div></div>
<div class="ttc" id="anamespacellvm_html_abfc9c7ecf70f66901e439f7c04ef3dbb"><div class="ttname"><a href="namespacellvm.html#abfc9c7ecf70f66901e439f7c04ef3dbb">llvm::move</a></div><div class="ttdeci">OutputIt move(R &amp;&amp;Range, OutputIt Out)</div><div class="ttdoc">Provide wrappers to std::move which take ranges instead of having to pass begin/end explicitly.</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l01862">STLExtras.h:1862</a></div></div>
<div class="ttc" id="anamespacellvm_1_1ISD_html_a22ea9cec080dd5f4f47ba234c2f59110a8472e46f9e4db168c5610ecdfb05dbaf"><div class="ttname"><a href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a8472e46f9e4db168c5610ecdfb05dbaf">llvm::ISD::BasicBlock</a></div><div class="ttdeci">@ BasicBlock</div><div class="ttdoc">Various leaf nodes.</div><div class="ttdef"><b>Definition:</b> <a href="ISDOpcodes_8h_source.html#l00071">ISDOpcodes.h:71</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchProbabilityInfo_html_a0afb8520349ae7dc725ebfbb0532dbb1"><div class="ttname"><a href="classllvm_1_1BranchProbabilityInfo.html#a0afb8520349ae7dc725ebfbb0532dbb1">llvm::BranchProbabilityInfo::eraseBlock</a></div><div class="ttdeci">void eraseBlock(const BasicBlock *BB)</div><div class="ttdoc">Forget analysis results for the given basic block.</div><div class="ttdef"><b>Definition:</b> <a href="BranchProbabilityInfo_8cpp_source.html#l01190">BranchProbabilityInfo.cpp:1190</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchProbabilityInfoWrapperPass_html_aea35b7bd5d6b626c207cf02414fa5093"><div class="ttname"><a href="classllvm_1_1BranchProbabilityInfoWrapperPass.html#aea35b7bd5d6b626c207cf02414fa5093">llvm::BranchProbabilityInfoWrapperPass::print</a></div><div class="ttdeci">void print(raw_ostream &amp;OS, const Module *M=nullptr) const override</div><div class="ttdoc">print - Print out the internal state of the pass.</div><div class="ttdef"><b>Definition:</b> <a href="BranchProbabilityInfo_8cpp_source.html#l01298">BranchProbabilityInfo.cpp:1298</a></div></div>
<div class="ttc" id="aclassllvm_1_1Module_html"><div class="ttname"><a href="classllvm_1_1Module.html">llvm::Module</a></div><div class="ttdoc">A Module instance is used to store all the information related to an LLVM module.</div><div class="ttdef"><b>Definition:</b> <a href="Module_8h_source.html#l00065">Module.h:65</a></div></div>
<div class="ttc" id="astructllvm_1_1AnalysisInfoMixin_html"><div class="ttname"><a href="structllvm_1_1AnalysisInfoMixin.html">llvm::AnalysisInfoMixin</a></div><div class="ttdoc">A CRTP mix-in that provides informational APIs needed for analysis passes.</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00394">PassManager.h:394</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchProbabilityInfo_html_a46502d648608aa13cb485ed4af447d88"><div class="ttname"><a href="classllvm_1_1BranchProbabilityInfo.html#a46502d648608aa13cb485ed4af447d88">llvm::BranchProbabilityInfo::getEdgeProbability</a></div><div class="ttdeci">BranchProbability getEdgeProbability(const BasicBlock *Src, unsigned IndexInSuccessors) const</div><div class="ttdoc">Get an edge's probability, relative to other out-edges of the Src.</div><div class="ttdef"><b>Definition:</b> <a href="BranchProbabilityInfo_8cpp_source.html#l01095">BranchProbabilityInfo.cpp:1095</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchProbabilityInfo_html_a145edc209aa2f628c73c9cf860eeeb5c"><div class="ttname"><a href="classllvm_1_1BranchProbabilityInfo.html#a145edc209aa2f628c73c9cf860eeeb5c">llvm::BranchProbabilityInfo::setEdgeProbability</a></div><div class="ttdeci">void setEdgeProbability(const BasicBlock *Src, const SmallVectorImpl&lt; BranchProbability &gt; &amp;Probs)</div><div class="ttdoc">Set the raw probabilities for all edges from the given block.</div><div class="ttdef"><b>Definition:</b> <a href="BranchProbabilityInfo_8cpp_source.html#l01132">BranchProbabilityInfo.cpp:1132</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopInfo_html"><div class="ttname"><a href="classllvm_1_1LoopInfo.html">llvm::LoopInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l01108">LoopInfo.h:1108</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchProbabilityInfoWrapperPass_html_a9b02436688f4921a0ff96e38d8c4c3dd"><div class="ttname"><a href="classllvm_1_1BranchProbabilityInfoWrapperPass.html#a9b02436688f4921a0ff96e38d8c4c3dd">llvm::BranchProbabilityInfoWrapperPass::BranchProbabilityInfoWrapperPass</a></div><div class="ttdeci">BranchProbabilityInfoWrapperPass()</div><div class="ttdef"><b>Definition:</b> <a href="BranchProbabilityInfo_8cpp_source.html#l00072">BranchProbabilityInfo.cpp:72</a></div></div>
<div class="ttc" id="aclassllvm_1_1PostDominatorTree_html"><div class="ttname"><a href="classllvm_1_1PostDominatorTree.html">llvm::PostDominatorTree</a></div><div class="ttdoc">PostDominatorTree Class - Concrete subclass of DominatorTree that is used to compute the post-dominat...</div><div class="ttdef"><b>Definition:</b> <a href="PostDominators_8h_source.html#l00028">PostDominators.h:28</a></div></div>
<div class="ttc" id="aclassuint32__t_html"><div class="ttname"><a href="classuint32__t.html">uint32_t</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchProbability_html"><div class="ttname"><a href="classllvm_1_1BranchProbability.html">llvm::BranchProbability</a></div><div class="ttdef"><b>Definition:</b> <a href="BranchProbability_8h_source.html#l00030">BranchProbability.h:30</a></div></div>
<div class="ttc" id="aValueHandle_8h_html"><div class="ttname"><a href="ValueHandle_8h.html">ValueHandle.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchProbabilityInfo_html_ae13ac2ed5c40e40fff6ace158e7c0cf3"><div class="ttname"><a href="classllvm_1_1BranchProbabilityInfo.html#ae13ac2ed5c40e40fff6ace158e7c0cf3">llvm::BranchProbabilityInfo::printEdgeProbability</a></div><div class="ttdeci">raw_ostream &amp; printEdgeProbability(raw_ostream &amp;OS, const BasicBlock *Src, const BasicBlock *Dst) const</div><div class="ttdoc">Print an edge's probability.</div><div class="ttdef"><b>Definition:</b> <a href="BranchProbabilityInfo_8cpp_source.html#l01179">BranchProbabilityInfo.cpp:1179</a></div></div>
<div class="ttc" id="aSampleProfWriter_8cpp_html_ac5f3689931c7238da06ba00cf1002c62"><div class="ttname"><a href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a></div><div class="ttdeci">raw_pwrite_stream &amp; OS</div><div class="ttdef"><b>Definition:</b> <a href="SampleProfWriter_8cpp_source.html#l00053">SampleProfWriter.cpp:53</a></div></div>
<div class="ttc" id="anamespacestd_html"><div class="ttname"><a href="namespacestd.html">std</a></div><div class="ttdef"><b>Definition:</b> <a href="BitVector_8h_source.html#l00851">BitVector.h:851</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchProbabilityInfoWrapperPass_html_ad32017b091b9ec5d6d88187d44ede817"><div class="ttname"><a href="classllvm_1_1BranchProbabilityInfoWrapperPass.html#ad32017b091b9ec5d6d88187d44ede817">llvm::BranchProbabilityInfoWrapperPass::runOnFunction</a></div><div class="ttdeci">bool runOnFunction(Function &amp;F) override</div><div class="ttdoc">runOnFunction - Virtual method overriden by subclasses to do the per-function processing of the pass.</div><div class="ttdef"><b>Definition:</b> <a href="BranchProbabilityInfo_8cpp_source.html#l01285">BranchProbabilityInfo.cpp:1285</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchProbabilityInfo_html_acea510110989b4372eae3d2e68fcf04d"><div class="ttname"><a href="classllvm_1_1BranchProbabilityInfo.html#acea510110989b4372eae3d2e68fcf04d">llvm::BranchProbabilityInfo::print</a></div><div class="ttdeci">void print(raw_ostream &amp;OS) const</div><div class="ttdef"><b>Definition:</b> <a href="BranchProbabilityInfo_8cpp_source.html#l01072">BranchProbabilityInfo.cpp:1072</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchProbabilityInfo_html_a7e0961f9bd7bb01f20c5213e39fa8b08"><div class="ttname"><a href="classllvm_1_1BranchProbabilityInfo.html#a7e0961f9bd7bb01f20c5213e39fa8b08">llvm::BranchProbabilityInfo::operator=</a></div><div class="ttdeci">BranchProbabilityInfo &amp; operator=(const BranchProbabilityInfo &amp;)=delete</div></div>
<div class="ttc" id="anamespacellvm_1_1TargetStackID_html_a71392100eb15ba746b1f898986f5d8a5"><div class="ttname"><a href="namespacellvm_1_1TargetStackID.html#a71392100eb15ba746b1f898986f5d8a5">llvm::TargetStackID::Value</a></div><div class="ttdeci">Value</div><div class="ttdef"><b>Definition:</b> <a href="TargetFrameLowering_8h_source.html#l00027">TargetFrameLowering.h:27</a></div></div>
<div class="ttc" id="aPassManager_8h_html"><div class="ttname"><a href="PassManager_8h.html">PassManager.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetLibraryInfo_html"><div class="ttname"><a href="classllvm_1_1TargetLibraryInfo.html">llvm::TargetLibraryInfo</a></div><div class="ttdoc">Provides information about what library functions are available for the current target.</div><div class="ttdef"><b>Definition:</b> <a href="TargetLibraryInfo_8h_source.html#l00234">TargetLibraryInfo.h:234</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchProbabilityInfo_1_1SccInfo_html"><div class="ttname"><a href="classllvm_1_1BranchProbabilityInfo_1_1SccInfo.html">llvm::BranchProbabilityInfo::SccInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="BranchProbabilityInfo_8h_source.html#l00205">BranchProbabilityInfo.h:205</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchProbabilityInfo_html_a54c3911cf4abbcd272fa99a303823942"><div class="ttname"><a href="classllvm_1_1BranchProbabilityInfo.html#a54c3911cf4abbcd272fa99a303823942">llvm::BranchProbabilityInfo::calculate</a></div><div class="ttdeci">void calculate(const Function &amp;F, const LoopInfo &amp;LI, const TargetLibraryInfo *TLI, DominatorTree *DT, PostDominatorTree *PDT)</div><div class="ttdef"><b>Definition:</b> <a href="BranchProbabilityInfo_8cpp_source.html#l01212">BranchProbabilityInfo.cpp:1212</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallbackVH_html"><div class="ttname"><a href="classllvm_1_1CallbackVH.html">llvm::CallbackVH</a></div><div class="ttdoc">Value handle with callbacks on RAUW and destruction.</div><div class="ttdef"><b>Definition:</b> <a href="ValueHandle_8h_source.html#l00383">ValueHandle.h:383</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchProbability_html_aaee6034264d5d0782e5d1489360730d9"><div class="ttname"><a href="classllvm_1_1BranchProbability.html#aaee6034264d5d0782e5d1489360730d9">llvm::BranchProbability::getCompl</a></div><div class="ttdeci">BranchProbability getCompl() const</div><div class="ttdef"><b>Definition:</b> <a href="BranchProbability_8h_source.html#l00069">BranchProbability.h:69</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchProbabilityInfoWrapperPass_html_ac0b94f96f52faa8bc6588d692e137e33"><div class="ttname"><a href="classllvm_1_1BranchProbabilityInfoWrapperPass.html#ac0b94f96f52faa8bc6588d692e137e33">llvm::BranchProbabilityInfoWrapperPass::getBPI</a></div><div class="ttdeci">const BranchProbabilityInfo &amp; getBPI() const</div><div class="ttdef"><b>Definition:</b> <a href="BranchProbabilityInfo_8h_source.html#l00448">BranchProbabilityInfo.h:448</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchProbabilityInfo_html_aa2da8547348736e285afd8af9093a83d"><div class="ttname"><a href="classllvm_1_1BranchProbabilityInfo.html#aa2da8547348736e285afd8af9093a83d">llvm::BranchProbabilityInfo::isEdgeHot</a></div><div class="ttdeci">bool isEdgeHot(const BasicBlock *Src, const BasicBlock *Dst) const</div><div class="ttdoc">Test if an edge is hot relative to other out-edges of the Src.</div><div class="ttdef"><b>Definition:</b> <a href="BranchProbabilityInfo_8cpp_source.html#l01084">BranchProbabilityInfo.cpp:1084</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchProbabilityInfoWrapperPass_html_a702dc2b869d1d2dc906729f781e68479"><div class="ttname"><a href="classllvm_1_1BranchProbabilityInfoWrapperPass.html#a702dc2b869d1d2dc906729f781e68479">llvm::BranchProbabilityInfoWrapperPass::ID</a></div><div class="ttdeci">static char ID</div><div class="ttdef"><b>Definition:</b> <a href="BranchProbabilityInfo_8h_source.html#l00443">BranchProbabilityInfo.h:443</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html">llvm::SmallVectorImpl</a></div><div class="ttdoc">This class consists of common code factored out of the SmallVector class to reduce code duplication b...</div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l00042">APFloat.h:42</a></div></div>
<div class="ttc" id="aDenseMapInfo_8h_html"><div class="ttname"><a href="DenseMapInfo_8h.html">DenseMapInfo.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisManager_html"><div class="ttname"><a href="classllvm_1_1AnalysisManager.html">llvm::AnalysisManager</a></div><div class="ttdoc">A container for analyses that lazily runs them and caches their results.</div><div class="ttdef"><b>Definition:</b> <a href="InstructionSimplify_8h_source.html#l00042">InstructionSimplify.h:42</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchProbabilityInfo_html_a41951a9cbc849c4e0f2930f594c08847"><div class="ttname"><a href="classllvm_1_1BranchProbabilityInfo.html#a41951a9cbc849c4e0f2930f594c08847">llvm::BranchProbabilityInfo::invalidate</a></div><div class="ttdeci">bool invalidate(Function &amp;, const PreservedAnalyses &amp;PA, FunctionAnalysisManager::Invalidator &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="BranchProbabilityInfo_8cpp_source.html#l01063">BranchProbabilityInfo.cpp:1063</a></div></div>
<div class="ttc" id="aclassllvm_1_1FunctionPass_html"><div class="ttname"><a href="classllvm_1_1FunctionPass.html">llvm::FunctionPass</a></div><div class="ttdoc">FunctionPass class - This class is used to implement most global optimizations.</div><div class="ttdef"><b>Definition:</b> <a href="Pass_8h_source.html#l00308">Pass.h:308</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchProbabilityInfoWrapperPass_html_a398c57492156d37f18c5f633ab737624"><div class="ttname"><a href="classllvm_1_1BranchProbabilityInfoWrapperPass.html#a398c57492156d37f18c5f633ab737624">llvm::BranchProbabilityInfoWrapperPass::getAnalysisUsage</a></div><div class="ttdeci">void getAnalysisUsage(AnalysisUsage &amp;AU) const override</div><div class="ttdoc">getAnalysisUsage - This function should be overriden by passes that need analysis information to do t...</div><div class="ttdef"><b>Definition:</b> <a href="BranchProbabilityInfo_8cpp_source.html#l01272">BranchProbabilityInfo.cpp:1272</a></div></div>
<div class="ttc" id="alib_2CodeGen_2README_8txt_html_a09776db24cf586ec9f1e18f3bae14099"><div class="ttname"><a href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a></div><div class="ttdeci">Common register allocation spilling lr str ldr sxth r3 ldr mla r4 can lr mov lr str ldr sxth r3 mla r4 and then merge mul and lr str ldr sxth r3 mla r4 It also increase the likelihood the store may become dead bb27 Successors according to LLVM BB</div><div class="ttdef"><b>Definition:</b> <a href="lib_2CodeGen_2README_8txt_source.html#l00039">README.txt:39</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchProbabilityPrinterPass_html_af8bbfa323a4917223612dff12067110b"><div class="ttname"><a href="classllvm_1_1BranchProbabilityPrinterPass.html#af8bbfa323a4917223612dff12067110b">llvm::BranchProbabilityPrinterPass::run</a></div><div class="ttdeci">PreservedAnalyses run(Function &amp;F, FunctionAnalysisManager &amp;AM)</div><div class="ttdef"><b>Definition:</b> <a href="BranchProbabilityInfo_8cpp_source.html#l01315">BranchProbabilityInfo.cpp:1315</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchProbabilityInfo_1_1SccInfo_html_af2b37a5830be4881f3995e017ecd8473"><div class="ttname"><a href="classllvm_1_1BranchProbabilityInfo_1_1SccInfo.html#af2b37a5830be4881f3995e017ecd8473">llvm::BranchProbabilityInfo::SccInfo::getSCCNum</a></div><div class="ttdeci">int getSCCNum(const BasicBlock *BB) const</div><div class="ttdoc">If BB belongs to some SCC then ID of that SCC is returned, otherwise -1 is returned.</div><div class="ttdef"><b>Definition:</b> <a href="BranchProbabilityInfo_8cpp_source.html#l00240">BranchProbabilityInfo.cpp:240</a></div></div>
<div class="ttc" id="anamespacellvm_1_1codeview_html_adfebd8c4ae29ccd84c600c1e65d6b807a86408593c34af77fdd90df932f8b5261"><div class="ttname"><a href="namespacellvm_1_1codeview.html#adfebd8c4ae29ccd84c600c1e65d6b807a86408593c34af77fdd90df932f8b5261">llvm::codeview::PublicSymFlags::Function</a></div><div class="ttdeci">@ Function</div></div>
<div class="ttc" id="aclassllvm_1_1BranchProbabilityInfo_1_1SccInfo_html_adb1204788a33211be05a6a01356e78d0"><div class="ttname"><a href="classllvm_1_1BranchProbabilityInfo_1_1SccInfo.html#adb1204788a33211be05a6a01356e78d0">llvm::BranchProbabilityInfo::SccInfo::SccInfo</a></div><div class="ttdeci">SccInfo(const Function &amp;F)</div><div class="ttdef"><b>Definition:</b> <a href="BranchProbabilityInfo_8cpp_source.html#l00217">BranchProbabilityInfo.cpp:217</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Aug 7 2023 09:42:06 for LLVM by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LLVM: llvm::sampleprofutil Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">LLVM
   &#160;<span id="projectnumber">17.0.0git</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacellvm.html">llvm</a></li><li class="navelem"><a class="el" href="namespacellvm_1_1sampleprofutil.html">sampleprofutil</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">llvm::sampleprofutil Namespace Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classllvm_1_1sampleprofutil_1_1SampleCoverageTracker.html">SampleCoverageTracker</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ab6789a9522443425d339fa34c25f89d5"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacellvm_1_1sampleprofutil.html#ab6789a9522443425d339fa34c25f89d5">callsiteIsHot</a> (<a class="el" href="AArch64PromoteConstant_8cpp.html#a90f8350fecae261c25be85d38b451bff">const</a> <a class="el" href="classllvm_1_1sampleprof_1_1FunctionSamples.html">FunctionSamples</a> *CallsiteFS, <a class="el" href="classllvm_1_1ProfileSummaryInfo.html">ProfileSummaryInfo</a> *PSI, bool ProfAccForSymsInList)</td></tr>
<tr class="memdesc:ab6789a9522443425d339fa34c25f89d5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return true if the given callsite is hot wrt to hot cutoff threshold.  <a href="namespacellvm_1_1sampleprofutil.html#ab6789a9522443425d339fa34c25f89d5">More...</a><br /></td></tr>
<tr class="separator:ab6789a9522443425d339fa34c25f89d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9495513e04a8f797cc8723887bdbd13c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacellvm_1_1sampleprofutil.html#a9495513e04a8f797cc8723887bdbd13c">createFSDiscriminatorVariable</a> (<a class="el" href="classllvm_1_1Module.html">Module</a> *M)</td></tr>
<tr class="memdesc:a9495513e04a8f797cc8723887bdbd13c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a global variable to flag FSDiscriminators are used.  <a href="namespacellvm_1_1sampleprofutil.html#a9495513e04a8f797cc8723887bdbd13c">More...</a><br /></td></tr>
<tr class="separator:a9495513e04a8f797cc8723887bdbd13c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="ab6789a9522443425d339fa34c25f89d5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab6789a9522443425d339fa34c25f89d5">&#9670;&nbsp;</a></span>callsiteIsHot()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool llvm::sampleprofutil::callsiteIsHot </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="AArch64PromoteConstant_8cpp.html#a90f8350fecae261c25be85d38b451bff">const</a> <a class="el" href="classllvm_1_1sampleprof_1_1FunctionSamples.html">FunctionSamples</a> *&#160;</td>
          <td class="paramname"><em>CallsiteFS</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classllvm_1_1ProfileSummaryInfo.html">ProfileSummaryInfo</a> *&#160;</td>
          <td class="paramname"><em>PSI</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>ProfAccForSymsInList</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return true if the given callsite is hot wrt to hot cutoff threshold. </p>
<p>Functions that were inlined in the original binary will be represented in the inline stack in the sample profile. If the profile shows that the original inline decision was "good" (i.e., the callsite is executed frequently), then we will recreate the inline decision and apply the profile from the inlined callsite.</p>
<p>To decide whether an inlined callsite is hot, we compare the callsite sample count with the hot cutoff computed by <a class="el" href="classllvm_1_1ProfileSummaryInfo.html" title="Analysis providing profile information.">ProfileSummaryInfo</a>, it is regarded as hot if the count is above the cutoff value.</p>
<p>When ProfileAccurateForSymsInList is enabled and profile symbol list is present, functions in the profile symbol list but without profile will be regarded as cold and much less inlining will happen in CGSCC inlining pass, so we tend to lower the hot criteria here to allow more early inlining to happen for warm callsites and it is helpful for performance. </p>

<p class="definition">Definition at line <a class="el" href="SampleProfileLoaderBaseUtil_8cpp_source.html#l00064">64</a> of file <a class="el" href="SampleProfileLoaderBaseUtil_8cpp_source.html">SampleProfileLoaderBaseUtil.cpp</a>.</p>

<p class="reference">References <a class="el" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert()</a>, <a class="el" href="SampleProf_8h_source.html#l00891">llvm::sampleprof::FunctionSamples::getTotalSamples()</a>, <a class="el" href="ProfileSummaryInfo_8cpp_source.html#l00296">llvm::ProfileSummaryInfo::isColdCount()</a>, <a class="el" href="ProfileSummaryInfo_8cpp_source.html#l00292">llvm::ProfileSummaryInfo::isHotCount()</a>, and <a class="el" href="ADT_2tmp_8txt_source.html#l00001">uint64_t</a>.</p>

<p class="reference">Referenced by <a class="el" href="SampleProfileLoaderBaseUtil_8cpp_source.html#l00122">llvm::sampleprofutil::SampleCoverageTracker::countBodyRecords()</a>, <a class="el" href="SampleProfileLoaderBaseUtil_8cpp_source.html#l00141">llvm::sampleprofutil::SampleCoverageTracker::countBodySamples()</a>, and <a class="el" href="SampleProfileLoaderBaseUtil_8cpp_source.html#l00097">llvm::sampleprofutil::SampleCoverageTracker::countUsedRecords()</a>.</p>

</div>
</div>
<a id="a9495513e04a8f797cc8723887bdbd13c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9495513e04a8f797cc8723887bdbd13c">&#9670;&nbsp;</a></span>createFSDiscriminatorVariable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void llvm::sampleprofutil::createFSDiscriminatorVariable </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classllvm_1_1Module.html">Module</a> *&#160;</td>
          <td class="paramname"><em>M</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a global variable to flag FSDiscriminators are used. </p>

<p class="definition">Definition at line <a class="el" href="SampleProfileLoaderBaseUtil_8cpp_source.html#l00171">171</a> of file <a class="el" href="SampleProfileLoaderBaseUtil_8cpp_source.html">SampleProfileLoaderBaseUtil.cpp</a>.</p>

<p class="reference">References <a class="el" href="ModuleUtils_8cpp_source.html#l00109">llvm::appendToUsed()</a>, <a class="el" href="NVVMIntrRange_8cpp_source.html#l00066">Context</a>, <a class="el" href="Type_8cpp_source.html#l00238">llvm::Type::getInt1Ty()</a>, <a class="el" href="Constants_8cpp_source.html#l00835">llvm::ConstantInt::getTrue()</a>, <a class="el" href="lib_2Target_2X86_2README_8txt_source.html#l00252">M</a>, and <a class="el" href="GlobalValue_8h_source.html#l00053">llvm::GlobalValue::WeakODRLinkage</a>.</p>

<p class="reference">Referenced by <a class="el" href="AddDiscriminators_8cpp_source.html#l00170">addDiscriminators()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Aug 7 2023 12:11:28 for LLVM by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>

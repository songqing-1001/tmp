<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LLVM: lib/Transforms/Scalar/ConstantHoisting.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">LLVM
   &#160;<span id="projectnumber">17.0.0git</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a class="el" href="dir_a72932e0778af28115095468f6286ff8.html">Transforms</a></li><li class="navelem"><a class="el" href="dir_e6e1f1f37d351595fa984b942927b205.html">Scalar</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">ConstantHoisting.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="ConstantHoisting_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//===- ConstantHoisting.cpp - Prepare code for expensive constants --------===//</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">// See https://llvm.org/LICENSE.txt for license information.</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">// This pass identifies expensive constants to hoist and coalesces them to</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">// better prepare it for SelectionDAG-based code generation. This works around</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">// the limitations of the basic-block-at-a-time approach.</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">// First it scans all instructions for integer constants and calculates its</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">// cost. If the constant can be folded into the instruction (the cost is</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">// TCC_Free) or the cost is just a simple operation (TCC_BASIC), then we don&#39;t</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">// consider it expensive and leave it alone. This is the default behavior and</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">// the default implementation of getIntImmCostInst will always return TCC_Free.</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment">// If the cost is more than TCC_BASIC, then the integer constant can&#39;t be folded</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment">// into the instruction and it might be beneficial to hoist the constant.</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment">// Similar constants are coalesced to reduce register pressure and</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment">// materialization code.</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment">// When a constant is hoisted, it is also hidden behind a bitcast to force it to</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment">// be live-out of the basic block. Otherwise the constant would be just</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment">// duplicated and each basic block would have its own copy in the SelectionDAG.</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment">// The SelectionDAG recognizes such constants as opaque and doesn&#39;t perform</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment">// certain transformations on them, which would create a new expensive constant.</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="comment">// This optimization is only applied to integer constants in instructions and</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="comment">// simple (this means not nested) constant cast expressions. For example:</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="comment">// %0 = load i64* inttoptr (i64 big_constant to i64*)</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160; </div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ConstantHoisting_8h.html">llvm/Transforms/Scalar/ConstantHoisting.h</a>&quot;</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="APInt_8h.html">llvm/ADT/APInt.h</a>&quot;</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DenseMap_8h.html">llvm/ADT/DenseMap.h</a>&quot;</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SmallPtrSet_8h.html">llvm/ADT/SmallPtrSet.h</a>&quot;</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SmallVector_8h.html">llvm/ADT/SmallVector.h</a>&quot;</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Statistic_8h.html">llvm/ADT/Statistic.h</a>&quot;</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="BlockFrequencyInfo_8h.html">llvm/Analysis/BlockFrequencyInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ProfileSummaryInfo_8h.html">llvm/Analysis/ProfileSummaryInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="TargetTransformInfo_8h.html">llvm/Analysis/TargetTransformInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="BasicBlock_8h.html">llvm/IR/BasicBlock.h</a>&quot;</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Constants_8h.html">llvm/IR/Constants.h</a>&quot;</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DebugInfoMetadata_8h.html">llvm/IR/DebugInfoMetadata.h</a>&quot;</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Dominators_8h.html">llvm/IR/Dominators.h</a>&quot;</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Function_8h.html">llvm/IR/Function.h</a>&quot;</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="InstrTypes_8h.html">llvm/IR/InstrTypes.h</a>&quot;</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="IR_2Instruction_8h.html">llvm/IR/Instruction.h</a>&quot;</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Instructions_8h.html">llvm/IR/Instructions.h</a>&quot;</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="IntrinsicInst_8h.html">llvm/IR/IntrinsicInst.h</a>&quot;</span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Operator_8h.html">llvm/IR/Operator.h</a>&quot;</span></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Value_8h.html">llvm/IR/Value.h</a>&quot;</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="InitializePasses_8h.html">llvm/InitializePasses.h</a>&quot;</span></div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Pass_8h.html">llvm/Pass.h</a>&quot;</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="BlockFrequency_8h.html">llvm/Support/BlockFrequency.h</a>&quot;</span></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Casting_8h.html">llvm/Support/Casting.h</a>&quot;</span></div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CommandLine_8h.html">llvm/Support/CommandLine.h</a>&quot;</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Debug_8h.html">llvm/Support/Debug.h</a>&quot;</span></div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="raw__ostream_8h.html">llvm/Support/raw_ostream.h</a>&quot;</span></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Transforms_2Scalar_8h.html">llvm/Transforms/Scalar.h</a>&quot;</span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Transforms_2Utils_2Local_8h.html">llvm/Transforms/Utils/Local.h</a>&quot;</span></div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SizeOpts_8h.html">llvm/Transforms/Utils/SizeOpts.h</a>&quot;</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="preprocessor">#include &lt;algorithm&gt;</span></div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="preprocessor">#include &lt;cassert&gt;</span></div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="preprocessor">#include &lt;cstdint&gt;</span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="preprocessor">#include &lt;iterator&gt;</span></div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="preprocessor">#include &lt;tuple&gt;</span></div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="preprocessor">#include &lt;utility&gt;</span></div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160; </div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespacellvm.html">llvm</a>;</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="keyword">using namespace </span><a class="code" href="ConstantHoisting_8cpp.html#ab70e43d6443d2e8107cdf0dc2d7874f7">consthoist</a>;</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160; </div>
<div class="line"><a name="l00075"></a><span class="lineno"><a class="line" href="ConstantHoisting_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">   75</a></span>&#160;<span class="preprocessor">#define DEBUG_TYPE &quot;consthoist&quot;</span></div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160; </div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(NumConstantsHoisted, <span class="stringliteral">&quot;Number of constants hoisted&quot;</span>);</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(NumConstantsRebased, <span class="stringliteral">&quot;Number of constants rebased&quot;</span>);</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160; </div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="ConstantHoisting_8cpp.html#a03753ef110db115d5fb1af7c0983eff5">ConstHoistWithBlockFrequency</a>(</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    <span class="stringliteral">&quot;consthoist-with-block-frequency&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">true</span>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Enable the use of the block frequency analysis to reduce the &quot;</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;             <span class="stringliteral">&quot;chance to execute const materialization more frequently than &quot;</span></div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;             <span class="stringliteral">&quot;without hoisting.&quot;</span>));</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160; </div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="ConstantHoisting_8cpp.html#abdb778394efe076ecd10eac8c4c17ed8">ConstHoistGEP</a>(</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    <span class="stringliteral">&quot;consthoist-gep&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">false</span>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Try hoisting constant gep expressions&quot;</span>));</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160; </div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;unsigned&gt;</a></div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<a class="code" href="ConstantHoisting_8cpp.html#a84a4f80b4c2717978208d98888fd7cdb">MinNumOfDependentToRebase</a>(<span class="stringliteral">&quot;consthoist-min-num-to-rebase&quot;</span>,</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Do not rebase if number of dependent constants of a Base is less &quot;</span></div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;             <span class="stringliteral">&quot;than this number.&quot;</span>),</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(0), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>);</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160; </div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="keyword">namespace </span>{</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<span class="comment">/// The constant hoisting pass.</span></div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="comment"></span><span class="keyword">class </span>ConstantHoistingLegacyPass : <span class="keyword">public</span> <a class="code" href="classllvm_1_1FunctionPass.html">FunctionPass</a> {</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">char</span> <a class="code" href="namespacellvm_1_1CallingConv.html#a188c0836f8c3528401f1c236fd93b977">ID</a>; <span class="comment">// Pass identification, replacement for typeid</span></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160; </div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;  ConstantHoistingLegacyPass() : <a class="code" href="classllvm_1_1FunctionPass.html">FunctionPass</a>(<a class="code" href="namespacellvm_1_1CallingConv.html#a188c0836f8c3528401f1c236fd93b977">ID</a>) {</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    <a class="code" href="namespacellvm.html#afa30e0e80b9349cc68a05562ac303461">initializeConstantHoistingLegacyPassPass</a>(*<a class="code" href="classllvm_1_1PassRegistry.html#a05a729900b76c89e808c6c3094921b2f">PassRegistry::getPassRegistry</a>());</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;  }</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160; </div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="EntryExitInstrumenter_8cpp.html#a3985f1f39349428d17f0d2b81ebc6349">runOnFunction</a>(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;Fn) <span class="keyword">override</span>;</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160; </div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;  <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> getPassName()<span class="keyword"> const override </span>{ <span class="keywordflow">return</span> <span class="stringliteral">&quot;Constant Hoisting&quot;</span>; }</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160; </div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;  <span class="keywordtype">void</span> getAnalysisUsage(<a class="code" href="classllvm_1_1AnalysisUsage.html">AnalysisUsage</a> &amp;AU)<span class="keyword"> const override </span>{</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#af11a6ebf7ab3c388234cb6d5378439a3">setPreservesCFG</a>();</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="ConstantHoisting_8cpp.html#a03753ef110db115d5fb1af7c0983eff5">ConstHoistWithBlockFrequency</a>)</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;      AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">addRequired</a>&lt;<a class="code" href="classllvm_1_1BlockFrequencyInfoWrapperPass.html">BlockFrequencyInfoWrapperPass</a>&gt;();</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">addRequired</a>&lt;<a class="code" href="classllvm_1_1DominatorTreeWrapperPass.html">DominatorTreeWrapperPass</a>&gt;();</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">addRequired</a>&lt;<a class="code" href="classllvm_1_1ProfileSummaryInfoWrapperPass.html">ProfileSummaryInfoWrapperPass</a>&gt;();</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">addRequired</a>&lt;<a class="code" href="classllvm_1_1TargetTransformInfoWrapperPass.html">TargetTransformInfoWrapperPass</a>&gt;();</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;  }</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160; </div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<span class="keyword">private</span>:</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;  <a class="code" href="classllvm_1_1ConstantHoistingPass.html">ConstantHoistingPass</a> Impl;</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;};</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160; </div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;} <span class="comment">// end anonymous namespace</span></div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160; </div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;<span class="keywordtype">char</span> <a class="code" href="namespacellvm_1_1AArch64PACKey.html#abf4394f452bde3f544999858d71e4b46">ConstantHoistingLegacyPass::ID</a> = 0;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160; </div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<a class="code" href="ConstantHoisting_8cpp.html#a93f57b76764f70277aa130c9b4604eac">INITIALIZE_PASS_BEGIN</a>(ConstantHoistingLegacyPass, <span class="stringliteral">&quot;consthoist&quot;</span>,</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;                      <span class="stringliteral">&quot;Constant Hoisting&quot;</span>, <span class="keyword">false</span>, <span class="keyword">false</span>)</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;<a class="code" href="SVEIntrinsicOpts_8cpp.html#a2bb87eb1bcbc74783a83ae945eb8fa36">INITIALIZE_PASS_DEPENDENCY</a>(<a class="code" href="classllvm_1_1BlockFrequencyInfoWrapperPass.html">BlockFrequencyInfoWrapperPass</a>)</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;<a class="code" href="SVEIntrinsicOpts_8cpp.html#a2bb87eb1bcbc74783a83ae945eb8fa36">INITIALIZE_PASS_DEPENDENCY</a>(<a class="code" href="classllvm_1_1DominatorTreeWrapperPass.html">DominatorTreeWrapperPass</a>)</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;<a class="code" href="SVEIntrinsicOpts_8cpp.html#a2bb87eb1bcbc74783a83ae945eb8fa36">INITIALIZE_PASS_DEPENDENCY</a>(<a class="code" href="classllvm_1_1ProfileSummaryInfoWrapperPass.html">ProfileSummaryInfoWrapperPass</a>)</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;<a class="code" href="SVEIntrinsicOpts_8cpp.html#a2bb87eb1bcbc74783a83ae945eb8fa36">INITIALIZE_PASS_DEPENDENCY</a>(<a class="code" href="classllvm_1_1TargetTransformInfoWrapperPass.html">TargetTransformInfoWrapperPass</a>)</div>
<div class="line"><a name="l00134"></a><span class="lineno"><a class="line" href="ConstantHoisting_8cpp.html#ab70e43d6443d2e8107cdf0dc2d7874f7">  134</a></span>&#160;<a class="code" href="PassSupport_8h.html#a74ce8276b89067e806f67c45a6d92575">INITIALIZE_PASS_END</a>(ConstantHoistingLegacyPass, &quot;<a class="code" href="ConstantHoisting_8cpp.html#ab70e43d6443d2e8107cdf0dc2d7874f7">consthoist</a>&quot;,</div>
<div class="line"><a name="l00135"></a><span class="lineno"><a class="line" href="ConstantHoisting_8cpp.html#aa31d68a00d95b1fabf45b0595784951d">  135</a></span>&#160;                    &quot;<a class="code" href="classllvm_1_1Constant.html">Constant</a> <a class="code" href="ConstantHoisting_8cpp.html#aa31d68a00d95b1fabf45b0595784951d">Hoisting</a>&quot;, <a class="code" href="namespacefalse.html">false</a>, <a class="code" href="namespacefalse.html">false</a>)</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160; </div>
<div class="line"><a name="l00137"></a><span class="lineno"><a class="line" href="namespacellvm.html#a20cd404d5848ed2897115687638ad66c">  137</a></span>&#160;<a class="code" href="classllvm_1_1FunctionPass.html">FunctionPass</a> *<a class="code" href="namespacellvm.html">llvm</a>::<a class="code" href="namespacellvm.html#a20cd404d5848ed2897115687638ad66c">createConstantHoistingPass</a>() {</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">new</span> ConstantHoistingLegacyPass();</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;}</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;<span class="comment">/// Perform the constant hoisting optimization for the given function.</span></div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> <a class="code" href="EntryExitInstrumenter_8cpp.html#a3985f1f39349428d17f0d2b81ebc6349">ConstantHoistingLegacyPass::runOnFunction</a>(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;Fn) {</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;  <span class="keywordflow">if</span> (skipFunction(Fn))</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160; </div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;********** Begin Constant Hoisting **********\n&quot;</span>);</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;********** Function: &quot;</span> &lt;&lt; Fn.<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>() &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160; </div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;  <span class="keywordtype">bool</span> MadeChange =</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;      Impl.runImpl(Fn, getAnalysis&lt;TargetTransformInfoWrapperPass&gt;().getTTI(Fn),</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;                   getAnalysis&lt;DominatorTreeWrapperPass&gt;().getDomTree(),</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;                   <a class="code" href="ConstantHoisting_8cpp.html#a03753ef110db115d5fb1af7c0983eff5">ConstHoistWithBlockFrequency</a></div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;                       ? &amp;getAnalysis&lt;BlockFrequencyInfoWrapperPass&gt;().getBFI()</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;                       : <span class="keyword">nullptr</span>,</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;                   Fn.<a class="code" href="classllvm_1_1Function.html#ae6a4da5f41fc6a36735cc1704c01ce60">getEntryBlock</a>(),</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;                   &amp;getAnalysis&lt;ProfileSummaryInfoWrapperPass&gt;().getPSI());</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160; </div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;  <span class="keywordflow">if</span> (MadeChange) {</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;********** Function after Constant Hoisting: &quot;</span></div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;                      &lt;&lt; Fn.<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>() &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; Fn);</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;  }</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;********** End Constant Hoisting **********\n&quot;</span>);</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160; </div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;  <span class="keywordflow">return</span> MadeChange;</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;}</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;<span class="comment">/// Find the constant materialization insertion point.</span></div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *ConstantHoistingPass::findMatInsertPt(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Inst,</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;                                                   <span class="keywordtype">unsigned</span> Idx)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;  <span class="comment">// If the operand is a cast instruction, then we have to materialize the</span></div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;  <span class="comment">// constant before the cast instruction.</span></div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;  <span class="keywordflow">if</span> (Idx != ~0U) {</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Opnd = Inst-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(Idx);</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> <a class="code" href="classllvm_1_1CastInst.html">CastInst</a> = dyn_cast&lt;Instruction&gt;(Opnd))</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1CastInst.html">CastInst</a>-&gt;<a class="code" href="classllvm_1_1Instruction.html#a27997849d8982bf226891024fd68daee">isCast</a>())</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1CastInst.html">CastInst</a>;</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;  }</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160; </div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;  <span class="comment">// The simple and common case. This also includes constant expressions.</span></div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;  <span class="keywordflow">if</span> (!isa&lt;PHINode&gt;(Inst) &amp;&amp; !Inst-&gt;<a class="code" href="classllvm_1_1Instruction.html#a5d3d315f678bc76e43b27d18e5d72829">isEHPad</a>())</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    <span class="keywordflow">return</span> Inst;</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160; </div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;  <span class="comment">// We can&#39;t insert directly before a phi node or an eh pad. Insert before</span></div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;  <span class="comment">// the terminator of the incoming or dominating block.</span></div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Entry != Inst-&gt;<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>() &amp;&amp; <span class="stringliteral">&quot;PHI or landing pad in entry block!&quot;</span>);</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *InsertionBlock = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;  <span class="keywordflow">if</span> (Idx != ~0U &amp;&amp; isa&lt;PHINode&gt;(Inst)) {</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    InsertionBlock = cast&lt;PHINode&gt;(Inst)-&gt;getIncomingBlock(Idx);</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    <span class="keywordflow">if</span> (!InsertionBlock-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#ac9c170fde1808bbd4436a0dbd6d5e755">isEHPad</a>()) {</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;      <span class="keywordflow">return</span> InsertionBlock-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>();</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    }</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    InsertionBlock = Inst-&gt;<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>();</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;  }</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160; </div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;  <span class="comment">// This must be an EH pad. Iterate over immediate dominators until we find a</span></div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;  <span class="comment">// non-EH pad. We need to skip over catchswitch blocks, which are both EH pads</span></div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;  <span class="comment">// and terminators.</span></div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;  <span class="keyword">auto</span> *IDom = DT-&gt;getNode(InsertionBlock)-&gt;getIDom();</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;  <span class="keywordflow">while</span> (IDom-&gt;getBlock()-&gt;isEHPad()) {</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Entry != IDom-&gt;getBlock() &amp;&amp; <span class="stringliteral">&quot;eh pad in entry block&quot;</span>);</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    IDom = IDom-&gt;getIDom();</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;  }</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160; </div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;  <span class="keywordflow">return</span> IDom-&gt;getBlock()-&gt;getTerminator();</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;}</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;<span class="comment">/// Given \p BBs as input, find another set of BBs which collectively</span></div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;<span class="comment">/// dominates \p BBs and have the minimal sum of frequencies. Return the BB</span></div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;<span class="comment">/// set found in \p BBs.</span></div>
<div class="line"><a name="l00212"></a><span class="lineno"><a class="line" href="ConstantHoisting_8cpp.html#a48a060decf79d58559a8e9e28df764f0">  212</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="ConstantHoisting_8cpp.html#a48a060decf79d58559a8e9e28df764f0">findBestInsertionSet</a>(<a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> &amp;DT, <a class="code" href="classllvm_1_1BlockFrequencyInfo.html">BlockFrequencyInfo</a> &amp;<a class="code" href="namespacellvm_1_1AMDGPUISD.html#a739d53294bc38cd6b0b23332f9994c0eafbca76f7875e080d97cee761de04d996">BFI</a>,</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;                                 <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Entry,</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;                                 <a class="code" href="classllvm_1_1SetVector.html">SetVector&lt;BasicBlock *&gt;</a> &amp;BBs) {</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!BBs.<a class="code" href="classllvm_1_1SetVector.html#a21c2c6ae5ec23004dc4020eacf83bbce">count</a>(Entry) &amp;&amp; <span class="stringliteral">&quot;Assume Entry is not in BBs&quot;</span>);</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;  <span class="comment">// Nodes on the current path to the root.</span></div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;BasicBlock *, 8&gt;</a> Path;</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;  <span class="comment">// Candidates includes any block &#39;BB&#39; in set &#39;BBs&#39; that is not strictly</span></div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;  <span class="comment">// dominated by any other blocks in set &#39;BBs&#39;, and all nodes in the path</span></div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;  <span class="comment">// in the dominator tree from Entry to &#39;BB&#39;.</span></div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;BasicBlock *, 16&gt;</a> Candidates;</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> : BBs) {</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    <span class="comment">// Ignore unreachable basic blocks.</span></div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    <span class="keywordflow">if</span> (!DT.<a class="code" href="classllvm_1_1DominatorTree.html#a1a70f2c359aadd76a72aaaede16aca4a">isReachableFromEntry</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>))</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    Path.clear();</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    <span class="comment">// Walk up the dominator tree until Entry or another BB in BBs</span></div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    <span class="comment">// is reached. Insert the nodes on the way to the Path.</span></div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Node = <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>;</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    <span class="comment">// The &quot;Path&quot; is a candidate path to be added into Candidates set.</span></div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="MachineLateInstrsCleanup_8cpp.html#a1705fe175d6d933d516bee5ba700abaa">isCandidate</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;      Path.insert(Node);</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;      <span class="keywordflow">if</span> (Node == Entry || Candidates.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a1f475b0df44ebd7169e720fa1bf9169e">count</a>(Node)) {</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;        <a class="code" href="MachineLateInstrsCleanup_8cpp.html#a1705fe175d6d933d516bee5ba700abaa">isCandidate</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;      }</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(DT.<a class="code" href="classllvm_1_1DominatorTreeBase.html#a4344e66fb61ea313a85a9e054124ac55">getNode</a>(Node)-&gt;<a class="code" href="classllvm_1_1DomTreeNodeBase.html#aa22cb3ff8c95bb05185acad8c569d4b6">getIDom</a>() &amp;&amp;</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;             <span class="stringliteral">&quot;Entry doens&#39;t dominate current Node&quot;</span>);</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;      Node = DT.<a class="code" href="classllvm_1_1DominatorTreeBase.html#a4344e66fb61ea313a85a9e054124ac55">getNode</a>(Node)-&gt;<a class="code" href="classllvm_1_1DomTreeNodeBase.html#aa22cb3ff8c95bb05185acad8c569d4b6">getIDom</a>()-&gt;<a class="code" href="classllvm_1_1DomTreeNodeBase.html#a6a15a030098342e06ea73e1241d614c9">getBlock</a>();</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    } <span class="keywordflow">while</span> (!BBs.count(Node));</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160; </div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    <span class="comment">// If isCandidate is false, Node is another Block in BBs dominating</span></div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    <span class="comment">// current &#39;BB&#39;. Drop the nodes on the Path.</span></div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="MachineLateInstrsCleanup_8cpp.html#a1705fe175d6d933d516bee5ba700abaa">isCandidate</a>)</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160; </div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    <span class="comment">// Add nodes on the Path into Candidates.</span></div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    Candidates.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(Path.begin(), Path.end());</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;  }</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160; </div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;  <span class="comment">// Sort the nodes in Candidates in top-down order and save the nodes</span></div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;  <span class="comment">// in Orders.</span></div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;  <span class="keywordtype">unsigned</span> Idx = 0;</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;BasicBlock *, 16&gt;</a> Orders;</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;  Orders.push_back(Entry);</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;  <span class="keywordflow">while</span> (Idx != Orders.size()) {</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Node = Orders[Idx++];</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> *ChildDomNode : DT.<a class="code" href="classllvm_1_1DominatorTreeBase.html#a4344e66fb61ea313a85a9e054124ac55">getNode</a>(Node)-&gt;<a class="code" href="classllvm_1_1DomTreeNodeBase.html#ad809413059b01b7a8eee4de0816e8b46">children</a>()) {</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;      <span class="keywordflow">if</span> (Candidates.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a1f475b0df44ebd7169e720fa1bf9169e">count</a>(ChildDomNode-&gt;getBlock()))</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;        Orders.push_back(ChildDomNode-&gt;getBlock());</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    }</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;  }</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160; </div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;  <span class="comment">// Visit Orders in bottom-up order.</span></div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;  <span class="keyword">using</span> InsertPtsCostPair =</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;      std::pair&lt;SetVector&lt;BasicBlock *&gt;, <a class="code" href="classllvm_1_1BlockFrequency.html">BlockFrequency</a>&gt;;</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160; </div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;  <span class="comment">// InsertPtsMap is a map from a BB to the best insertion points for the</span></div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;  <span class="comment">// subtree of BB (subtree not including the BB itself).</span></div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;  <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;BasicBlock *, InsertPtsCostPair&gt;</a> InsertPtsMap;</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;  InsertPtsMap.<a class="code" href="classllvm_1_1DenseMapBase.html#ae292a4b96e7f74eb95a4176ddba7b821">reserve</a>(Orders.size() + 1);</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Node : <a class="code" href="namespacellvm.html#a6b0ac1fa4f05de76413c5e0ca6334035">llvm::reverse</a>(Orders)) {</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    <span class="keywordtype">bool</span> NodeInBBs = BBs.count(Node);</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    <span class="keyword">auto</span> &amp;InsertPts = InsertPtsMap[Node].first;</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    <a class="code" href="classllvm_1_1BlockFrequency.html">BlockFrequency</a> &amp;InsertPtsFreq = InsertPtsMap[Node].second;</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160; </div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    <span class="comment">// Return the optimal insert points in BBs.</span></div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    <span class="keywordflow">if</span> (Node == Entry) {</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;      BBs.<a class="code" href="classllvm_1_1DenseMapBase.html#adf4e7878fc0b3b8dcde545178564190d">clear</a>();</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;      <span class="keywordflow">if</span> (InsertPtsFreq &gt; <a class="code" href="namespacellvm_1_1AMDGPUISD.html#a739d53294bc38cd6b0b23332f9994c0eafbca76f7875e080d97cee761de04d996">BFI</a>.getBlockFreq(Node) ||</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;          (InsertPtsFreq == <a class="code" href="namespacellvm_1_1AMDGPUISD.html#a739d53294bc38cd6b0b23332f9994c0eafbca76f7875e080d97cee761de04d996">BFI</a>.getBlockFreq(Node) &amp;&amp; InsertPts.size() &gt; 1))</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;        BBs.insert(Entry);</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;        BBs.insert(InsertPts.begin(), InsertPts.end());</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    }</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160; </div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Parent = DT.<a class="code" href="classllvm_1_1DominatorTreeBase.html#a4344e66fb61ea313a85a9e054124ac55">getNode</a>(Node)-&gt;<a class="code" href="classllvm_1_1DomTreeNodeBase.html#aa22cb3ff8c95bb05185acad8c569d4b6">getIDom</a>()-&gt;<a class="code" href="classllvm_1_1DomTreeNodeBase.html#a6a15a030098342e06ea73e1241d614c9">getBlock</a>();</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    <span class="comment">// Initially, ParentInsertPts is empty and ParentPtsFreq is 0. Every child</span></div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    <span class="comment">// will update its parent&#39;s ParentInsertPts and ParentPtsFreq.</span></div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    <span class="keyword">auto</span> &amp;ParentInsertPts = InsertPtsMap[Parent].first;</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    <a class="code" href="classllvm_1_1BlockFrequency.html">BlockFrequency</a> &amp;ParentPtsFreq = InsertPtsMap[Parent].second;</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    <span class="comment">// Choose to insert in Node or in subtree of Node.</span></div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    <span class="comment">// Don&#39;t hoist to EHPad because we may not find a proper place to insert</span></div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    <span class="comment">// in EHPad.</span></div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    <span class="comment">// If the total frequency of InsertPts is the same as the frequency of the</span></div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    <span class="comment">// target Node, and InsertPts contains more than one nodes, choose hoisting</span></div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    <span class="comment">// to reduce code size.</span></div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    <span class="keywordflow">if</span> (NodeInBBs ||</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;        (!Node-&gt;isEHPad() &amp;&amp;</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;         (InsertPtsFreq &gt; <a class="code" href="namespacellvm_1_1AMDGPUISD.html#a739d53294bc38cd6b0b23332f9994c0eafbca76f7875e080d97cee761de04d996">BFI</a>.getBlockFreq(Node) ||</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;          (InsertPtsFreq == <a class="code" href="namespacellvm_1_1AMDGPUISD.html#a739d53294bc38cd6b0b23332f9994c0eafbca76f7875e080d97cee761de04d996">BFI</a>.getBlockFreq(Node) &amp;&amp; InsertPts.size() &gt; 1)))) {</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;      ParentInsertPts.<a class="code" href="classllvm_1_1DenseMapBase.html#a99f811d53704275b4158c62a2dd138d9">insert</a>(Node);</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;      ParentPtsFreq += <a class="code" href="namespacellvm_1_1AMDGPUISD.html#a739d53294bc38cd6b0b23332f9994c0eafbca76f7875e080d97cee761de04d996">BFI</a>.getBlockFreq(Node);</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;      ParentInsertPts.insert(InsertPts.begin(), InsertPts.end());</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;      ParentPtsFreq += InsertPtsFreq;</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    }</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;  }</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;}</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;<span class="comment">/// Find an insertion point that dominates all uses.</span></div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1SetVector.html">SetVector&lt;Instruction *&gt;</a> ConstantHoistingPass::findConstantInsertionPoint(</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    <span class="keyword">const</span> <a class="code" href="structllvm_1_1consthoist_1_1ConstantInfo.html">ConstantInfo</a> &amp;ConstInfo)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!ConstInfo.<a class="code" href="structllvm_1_1consthoist_1_1ConstantInfo.html#aaf246806726648b2f0a4914d7ed81713">RebasedConstants</a>.empty() &amp;&amp; <span class="stringliteral">&quot;Invalid constant info entry.&quot;</span>);</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;  <span class="comment">// Collect all basic blocks.</span></div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;  <a class="code" href="classllvm_1_1SetVector.html">SetVector&lt;BasicBlock *&gt;</a> BBs;</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;  <a class="code" href="classllvm_1_1SetVector.html">SetVector&lt;Instruction *&gt;</a> InsertPts;</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span> &amp;RCI : ConstInfo.<a class="code" href="structllvm_1_1consthoist_1_1ConstantInfo.html#aaf246806726648b2f0a4914d7ed81713">RebasedConstants</a>)</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span> &amp;U : RCI.Uses)</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;      BBs.<a class="code" href="classllvm_1_1SetVector.html#a72d928b7fc2c5f2d56c6ac0265fd9c6e">insert</a>(findMatInsertPt(U.Inst, U.OpndIdx)-&gt;getParent());</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160; </div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;  <span class="keywordflow">if</span> (BBs.<a class="code" href="classllvm_1_1SetVector.html#a21c2c6ae5ec23004dc4020eacf83bbce">count</a>(Entry)) {</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    InsertPts.<a class="code" href="classllvm_1_1SetVector.html#a72d928b7fc2c5f2d56c6ac0265fd9c6e">insert</a>(&amp;Entry-&gt;front());</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    <span class="keywordflow">return</span> InsertPts;</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;  }</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160; </div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1AMDGPUISD.html#a739d53294bc38cd6b0b23332f9994c0eafbca76f7875e080d97cee761de04d996">BFI</a>) {</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    <a class="code" href="ConstantHoisting_8cpp.html#a48a060decf79d58559a8e9e28df764f0">findBestInsertionSet</a>(*DT, *<a class="code" href="namespacellvm_1_1AMDGPUISD.html#a739d53294bc38cd6b0b23332f9994c0eafbca76f7875e080d97cee761de04d996">BFI</a>, Entry, BBs);</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> : BBs) {</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;      <a class="code" href="classllvm_1_1BasicBlock.html#a98c0a84a5dfa8bce341c829709f171e5">BasicBlock::iterator</a> InsertPt = <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;begin();</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;      <span class="keywordflow">for</span> (; isa&lt;PHINode&gt;(InsertPt) || InsertPt-&gt;isEHPad(); ++InsertPt)</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;        ;</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;      InsertPts.<a class="code" href="classllvm_1_1SetVector.html#a72d928b7fc2c5f2d56c6ac0265fd9c6e">insert</a>(&amp;*InsertPt);</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    }</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    <span class="keywordflow">return</span> InsertPts;</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;  }</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160; </div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;  <span class="keywordflow">while</span> (BBs.size() &gt;= 2) {</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, *BB1, *BB2;</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    BB1 = BBs.pop_back_val();</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    BB2 = BBs.pop_back_val();</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> = DT-&gt;findNearestCommonDominator(BB1, BB2);</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> == Entry) {</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;      InsertPts.<a class="code" href="classllvm_1_1SetVector.html#a72d928b7fc2c5f2d56c6ac0265fd9c6e">insert</a>(&amp;Entry-&gt;front());</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;      <span class="keywordflow">return</span> InsertPts;</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    }</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    BBs.<a class="code" href="classllvm_1_1SetVector.html#a72d928b7fc2c5f2d56c6ac0265fd9c6e">insert</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;  }</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((BBs.size() == 1) &amp;&amp; <span class="stringliteral">&quot;Expected only one element.&quot;</span>);</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;FirstInst = (*BBs.begin())-&gt;front();</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;  InsertPts.<a class="code" href="classllvm_1_1SetVector.html#a72d928b7fc2c5f2d56c6ac0265fd9c6e">insert</a>(findMatInsertPt(&amp;FirstInst));</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;  <span class="keywordflow">return</span> InsertPts;</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;}</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;<span class="comment">/// Record constant integer ConstInt for instruction Inst at operand</span></div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;<span class="comment">/// index Idx.</span></div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;<span class="comment">/// The operand at index Idx is not necessarily the constant integer itself. It</span></div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;<span class="comment">/// could also be a cast instruction or a constant expression that uses the</span></div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;<span class="comment">/// constant integer.</span></div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> ConstantHoistingPass::collectConstantCandidates(</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    ConstCandMapType &amp;ConstCandMap, <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Inst, <span class="keywordtype">unsigned</span> Idx,</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *ConstInt) {</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;  <a class="code" href="classllvm_1_1InstructionCost.html">InstructionCost</a> <a class="code" href="InlineOrder_8cpp.html#a7ee6f0cb51c3b9056199e9a0001fe8c3a20b4f77bd00b4f63a49ec8e08f3bf6a6">Cost</a>;</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;  <span class="comment">// Ask the target about the cost of materializing the constant for the given</span></div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;  <span class="comment">// instruction and operand index.</span></div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> IntrInst = dyn_cast&lt;IntrinsicInst&gt;(Inst))</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;    <a class="code" href="InlineOrder_8cpp.html#a7ee6f0cb51c3b9056199e9a0001fe8c3a20b4f77bd00b4f63a49ec8e08f3bf6a6">Cost</a> = <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>-&gt;<a class="code" href="classllvm_1_1TargetTransformInfo.html#a6abe636878bffb348ed313016ab1c21b">getIntImmCostIntrin</a>(IntrInst-&gt;getIntrinsicID(), Idx,</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;                                    ConstInt-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#a4b001d9b458035fbbfc154d52d354ee9">getValue</a>(), ConstInt-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#afe3ce7fc89f36474eb0369cbb792c05a">getType</a>(),</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;                                    <a class="code" href="classllvm_1_1TargetTransformInfo.html#a706f223f760b55668fbae74202b816bba7f80055e1969cb850739546467460ad8">TargetTransformInfo::TCK_SizeAndLatency</a>);</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    <a class="code" href="InlineOrder_8cpp.html#a7ee6f0cb51c3b9056199e9a0001fe8c3a20b4f77bd00b4f63a49ec8e08f3bf6a6">Cost</a> = <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>-&gt;<a class="code" href="classllvm_1_1TargetTransformInfo.html#a6c5798a479ce88e66e1b53d70d678332">getIntImmCostInst</a>(</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;        Inst-&gt;<a class="code" href="classllvm_1_1Instruction.html#ab4e05d690df389b8b1477c90387b575f">getOpcode</a>(), Idx, ConstInt-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#a4b001d9b458035fbbfc154d52d354ee9">getValue</a>(), ConstInt-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#afe3ce7fc89f36474eb0369cbb792c05a">getType</a>(),</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;        <a class="code" href="classllvm_1_1TargetTransformInfo.html#a706f223f760b55668fbae74202b816bba7f80055e1969cb850739546467460ad8">TargetTransformInfo::TCK_SizeAndLatency</a>, Inst);</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160; </div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;  <span class="comment">// Ignore cheap integer constants.</span></div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;  <span class="keywordflow">if</span> (Cost &gt; <a class="code" href="classllvm_1_1TargetTransformInfo.html#ac44f6b9fdbb5f9cc199f8329cb0b272cae46c9eecc49bd2dc253c607e78a0fb86">TargetTransformInfo::TCC_Basic</a>) {</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    ConstCandMapType::iterator Itr;</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="namespacellvm_1_1logicalview.html#a9696bc411b0a7022c2cc78bff5173cefa157d034f9c98a305eb73776582550027">Inserted</a>;</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    ConstPtrUnionType Cand = ConstInt;</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    std::tie(Itr, Inserted) = ConstCandMap.insert(std::make_pair(Cand, 0));</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    <span class="keywordflow">if</span> (Inserted) {</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;      ConstIntCandVec.push_back(<a class="code" href="structllvm_1_1consthoist_1_1ConstantCandidate.html">ConstantCandidate</a>(ConstInt));</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;      Itr-&gt;second = ConstIntCandVec.size() - 1;</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    }</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    ConstIntCandVec[Itr-&gt;second].addUser(Inst, Idx, *<a class="code" href="InlineOrder_8cpp.html#a7ee6f0cb51c3b9056199e9a0001fe8c3a20b4f77bd00b4f63a49ec8e08f3bf6a6">Cost</a>.getValue());</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<span class="keywordflow">if</span> (isa&lt;ConstantInt&gt;(Inst-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(Idx))) <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>()</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;                   &lt;&lt; <span class="stringliteral">&quot;Collect constant &quot;</span> &lt;&lt; *ConstInt &lt;&lt; <span class="stringliteral">&quot; from &quot;</span> &lt;&lt; *Inst</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;                   &lt;&lt; <span class="stringliteral">&quot; with cost &quot;</span> &lt;&lt; Cost &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;               <span class="keywordflow">else</span> <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Collect constant &quot;</span> &lt;&lt; *ConstInt</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;                           &lt;&lt; <span class="stringliteral">&quot; indirectly from &quot;</span> &lt;&lt; *Inst &lt;&lt; <span class="stringliteral">&quot; via &quot;</span></div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;                           &lt;&lt; *Inst-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(Idx) &lt;&lt; <span class="stringliteral">&quot; with cost &quot;</span> &lt;&lt; <a class="code" href="InlineOrder_8cpp.html#a7ee6f0cb51c3b9056199e9a0001fe8c3a20b4f77bd00b4f63a49ec8e08f3bf6a6">Cost</a></div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;                           &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;);</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;  }</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;}</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;<span class="comment">/// Record constant GEP expression for instruction Inst at operand index Idx.</span></div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> ConstantHoistingPass::collectConstantCandidates(</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    ConstCandMapType &amp;ConstCandMap, <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Inst, <span class="keywordtype">unsigned</span> Idx,</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    <a class="code" href="classllvm_1_1ConstantExpr.html">ConstantExpr</a> *ConstExpr) {</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;  <span class="comment">// TODO: Handle vector GEPs</span></div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;  <span class="keywordflow">if</span> (ConstExpr-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a1bc022868b23918efa44df511f4d5b61">isVectorTy</a>())</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160; </div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;  <a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a> *BaseGV = dyn_cast&lt;GlobalVariable&gt;(ConstExpr-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0));</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;  <span class="keywordflow">if</span> (!BaseGV)</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160; </div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;  <span class="comment">// Get offset from the base GV.</span></div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;  <a class="code" href="classllvm_1_1PointerType.html">PointerType</a> *GVPtrTy = cast&lt;PointerType&gt;(BaseGV-&gt;<a class="code" href="classllvm_1_1GlobalValue.html#a92041fc7f781ba4fe708eec99139b72f">getType</a>());</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;  <a class="code" href="classllvm_1_1IntegerType.html">IntegerType</a> *PtrIntTy = <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>-&gt;getIntPtrType(*Ctx, GVPtrTy-&gt;<a class="code" href="classllvm_1_1PointerType.html#af8aeced5e71d2589fa3e9791043af5cb">getAddressSpace</a>());</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;  <a class="code" href="classllvm_1_1APInt.html">APInt</a> <a class="code" href="namespacellvm_1_1AMDGPU_1_1Hwreg.html#a6110fc30bc7311a6cf99814530362e21">Offset</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>-&gt;getTypeSizeInBits(PtrIntTy), <span class="comment">/*val*/</span>0, <span class="comment">/*isSigned*/</span><span class="keyword">true</span>);</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;  <span class="keyword">auto</span> *GEPO = cast&lt;GEPOperator&gt;(ConstExpr);</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160; </div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;  <span class="comment">// TODO: If we have a mix of inbounds and non-inbounds GEPs, then basing a</span></div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;  <span class="comment">// non-inbounds GEP on an inbounds GEP is potentially incorrect. Restrict to</span></div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;  <span class="comment">// inbounds GEP for now -- alternatively, we could drop inbounds from the</span></div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;  <span class="comment">// constant expression,</span></div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;  <span class="keywordflow">if</span> (!GEPO-&gt;isInBounds())</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160; </div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;  <span class="keywordflow">if</span> (!GEPO-&gt;accumulateConstantOffset(*<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, Offset))</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160; </div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1AMDGPU_1_1Hwreg.html#a6110fc30bc7311a6cf99814530362e21">Offset</a>.isIntN(32))</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160; </div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;  <span class="comment">// A constant GEP expression that has a GlobalVariable as base pointer is</span></div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;  <span class="comment">// usually lowered to a load from constant pool. Such operation is unlikely</span></div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;  <span class="comment">// to be cheaper than compute it by &lt;Base + Offset&gt;, which can be lowered to</span></div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;  <span class="comment">// an ADD instruction or folded into Load/Store instruction.</span></div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;  <a class="code" href="classllvm_1_1InstructionCost.html">InstructionCost</a> <a class="code" href="InlineOrder_8cpp.html#a7ee6f0cb51c3b9056199e9a0001fe8c3a20b4f77bd00b4f63a49ec8e08f3bf6a6">Cost</a> =</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;      <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>-&gt;<a class="code" href="classllvm_1_1TargetTransformInfo.html#a6c5798a479ce88e66e1b53d70d678332">getIntImmCostInst</a>(<a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a2b016c207343046b2bac45e69e76dcec">Instruction::Add</a>, 1, Offset, PtrIntTy,</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;                             <a class="code" href="classllvm_1_1TargetTransformInfo.html#a706f223f760b55668fbae74202b816bba7f80055e1969cb850739546467460ad8">TargetTransformInfo::TCK_SizeAndLatency</a>, Inst);</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;  ConstCandVecType &amp;ExprCandVec = ConstGEPCandMap[BaseGV];</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;  ConstCandMapType::iterator Itr;</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="namespacellvm_1_1logicalview.html#a9696bc411b0a7022c2cc78bff5173cefa157d034f9c98a305eb73776582550027">Inserted</a>;</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;  ConstPtrUnionType Cand = ConstExpr;</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;  std::tie(Itr, Inserted) = ConstCandMap.insert(std::make_pair(Cand, 0));</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;  <span class="keywordflow">if</span> (Inserted) {</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;    ExprCandVec.push_back(<a class="code" href="structllvm_1_1consthoist_1_1ConstantCandidate.html">ConstantCandidate</a>(</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;        <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(<a class="code" href="classllvm_1_1Type.html#a30dd396c5b40cd86c1591872e574ccdf">Type::getInt32Ty</a>(*Ctx), <a class="code" href="namespacellvm_1_1AMDGPU_1_1Hwreg.html#a6110fc30bc7311a6cf99814530362e21">Offset</a>.getLimitedValue()),</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;        ConstExpr));</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;    Itr-&gt;second = ExprCandVec.size() - 1;</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;  }</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;  ExprCandVec[Itr-&gt;second].addUser(Inst, Idx, *<a class="code" href="InlineOrder_8cpp.html#a7ee6f0cb51c3b9056199e9a0001fe8c3a20b4f77bd00b4f63a49ec8e08f3bf6a6">Cost</a>.getValue());</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;}</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;<span class="comment">/// Check the operand for instruction Inst at index Idx.</span></div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> ConstantHoistingPass::collectConstantCandidates(</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;    ConstCandMapType &amp;ConstCandMap, <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Inst, <span class="keywordtype">unsigned</span> Idx) {</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Opnd = Inst-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(Idx);</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160; </div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;  <span class="comment">// Visit constant integers.</span></div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> ConstInt = dyn_cast&lt;ConstantInt&gt;(Opnd)) {</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;    collectConstantCandidates(ConstCandMap, Inst, Idx, ConstInt);</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;  }</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160; </div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;  <span class="comment">// Visit cast instructions that have constant integers.</span></div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> <a class="code" href="classllvm_1_1CastInst.html">CastInst</a> = dyn_cast&lt;Instruction&gt;(Opnd)) {</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;    <span class="comment">// Only visit cast instructions, which have been skipped. All other</span></div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;    <span class="comment">// instructions should have already been visited.</span></div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classllvm_1_1CastInst.html">CastInst</a>-&gt;<a class="code" href="classllvm_1_1Instruction.html#a27997849d8982bf226891024fd68daee">isCast</a>())</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160; </div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> *ConstInt = dyn_cast&lt;ConstantInt&gt;(<a class="code" href="classllvm_1_1CastInst.html">CastInst</a>-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0))) {</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;      <span class="comment">// Pretend the constant is directly used by the instruction and ignore</span></div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;      <span class="comment">// the cast instruction.</span></div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;      collectConstantCandidates(ConstCandMap, Inst, Idx, ConstInt);</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;    }</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;  }</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160; </div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;  <span class="comment">// Visit constant expressions that have constant integers.</span></div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> ConstExpr = dyn_cast&lt;ConstantExpr&gt;(Opnd)) {</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;    <span class="comment">// Handle constant gep expressions.</span></div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="ConstantHoisting_8cpp.html#abdb778394efe076ecd10eac8c4c17ed8">ConstHoistGEP</a> &amp;&amp; isa&lt;GEPOperator&gt;(ConstExpr))</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;      collectConstantCandidates(ConstCandMap, Inst, Idx, ConstExpr);</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160; </div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;    <span class="comment">// Only visit constant cast expressions.</span></div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;    <span class="keywordflow">if</span> (!ConstExpr-&gt;<a class="code" href="classllvm_1_1ConstantExpr.html#a2c9fe4fbe6ac4c180d6d2547c05d33c9">isCast</a>())</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160; </div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> ConstInt = dyn_cast&lt;ConstantInt&gt;(ConstExpr-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0))) {</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;      <span class="comment">// Pretend the constant is directly used by the instruction and ignore</span></div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;      <span class="comment">// the constant expression.</span></div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;      collectConstantCandidates(ConstCandMap, Inst, Idx, ConstInt);</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;    }</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;  }</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;}</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;<span class="comment">/// Scan the instruction for expensive integer constants and record them</span></div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;<span class="comment">/// in the constant candidate vector.</span></div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> ConstantHoistingPass::collectConstantCandidates(</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;    ConstCandMapType &amp;ConstCandMap, <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Inst) {</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;  <span class="comment">// Skip all cast instructions. They are visited indirectly later on.</span></div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;  <span class="keywordflow">if</span> (Inst-&gt;<a class="code" href="classllvm_1_1Instruction.html#a27997849d8982bf226891024fd68daee">isCast</a>())</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160; </div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;  <span class="comment">// Scan all operands.</span></div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> Idx = 0, <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = Inst-&gt;<a class="code" href="classllvm_1_1User.html#addec638786f763d967811b45cb662f1f">getNumOperands</a>(); Idx != <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>; ++Idx) {</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;    <span class="comment">// The cost of materializing the constants (defined in</span></div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;    <span class="comment">// `TargetTransformInfo::getIntImmCostInst`) for instructions which only</span></div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;    <span class="comment">// take constant variables is lower than `TargetTransformInfo::TCC_Basic`.</span></div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;    <span class="comment">// So it&#39;s safe for us to collect constant candidates from all</span></div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;    <span class="comment">// IntrinsicInsts.</span></div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#ab42e397923eec18d3ab8ea88d280b63c">canReplaceOperandWithVariable</a>(Inst, Idx)) {</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;      collectConstantCandidates(ConstCandMap, Inst, Idx);</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;    }</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;  } <span class="comment">// end of for all operands</span></div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;}</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;<span class="comment">/// Collect all integer constants in the function that cannot be folded</span></div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;<span class="comment">/// into an instruction itself.</span></div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> ConstantHoistingPass::collectConstantCandidates(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;Fn) {</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;  ConstCandMapType ConstCandMap;</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> &amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> : Fn) {</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;    <span class="comment">// Ignore unreachable basic blocks.</span></div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;    <span class="keywordflow">if</span> (!DT-&gt;isReachableFromEntry(&amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>))</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;Inst : <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>)</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;      collectConstantCandidates(ConstCandMap, &amp;Inst);</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;  }</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;}</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160; </div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;<span class="comment">// This helper function is necessary to deal with values that have different</span></div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;<span class="comment">// bit widths (APInt Operator- does not like that). If the value cannot be</span></div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;<span class="comment">// represented in uint64 we return an &quot;empty&quot; APInt. This is then interpreted</span></div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;<span class="comment">// as the value is not in range.</span></div>
<div class="line"><a name="l00534"></a><span class="lineno"><a class="line" href="ConstantHoisting_8cpp.html#ad7c40f6d655ecf11953a69676430f0e3">  534</a></span>&#160;<span class="keyword">static</span> std::optional&lt;APInt&gt; <a class="code" href="ConstantHoisting_8cpp.html#ad7c40f6d655ecf11953a69676430f0e3">calculateOffsetDiff</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> &amp;V1,</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;                                                <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> &amp;<a class="code" href="namespacellvm_1_1NVPTX_1_1PTXLdStInstCode.html#a91119cbee2be000c528a690252aee07ca24244a27b634ef3e256ab3c64c6fecd4">V2</a>) {</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;  std::optional&lt;APInt&gt; Res;</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;  <span class="keywordtype">unsigned</span> BW = V1.<a class="code" href="classllvm_1_1APInt.html#a512fe2c15ea651294688eeec1341644c">getBitWidth</a>() &gt; <a class="code" href="namespacellvm_1_1NVPTX_1_1PTXLdStInstCode.html#a91119cbee2be000c528a690252aee07ca24244a27b634ef3e256ab3c64c6fecd4">V2</a>.getBitWidth() ?</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;                V1.<a class="code" href="classllvm_1_1APInt.html#a512fe2c15ea651294688eeec1341644c">getBitWidth</a>() : <a class="code" href="namespacellvm_1_1NVPTX_1_1PTXLdStInstCode.html#a91119cbee2be000c528a690252aee07ca24244a27b634ef3e256ab3c64c6fecd4">V2</a>.getBitWidth();</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;  <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> LimVal1 = V1.<a class="code" href="classllvm_1_1APInt.html#ab01d8694a759a934e01f1c558c3ce862">getLimitedValue</a>();</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;  <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> LimVal2 = <a class="code" href="namespacellvm_1_1NVPTX_1_1PTXLdStInstCode.html#a91119cbee2be000c528a690252aee07ca24244a27b634ef3e256ab3c64c6fecd4">V2</a>.getLimitedValue();</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160; </div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;  <span class="keywordflow">if</span> (LimVal1 == ~0ULL || LimVal2 == ~0ULL)</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;    <span class="keywordflow">return</span> Res;</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160; </div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;  <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> Diff = LimVal1 - LimVal2;</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a>(BW, Diff, <span class="keyword">true</span>);</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;}</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160; </div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;<span class="comment">// From a list of constants, one needs to picked as the base and the other</span></div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;<span class="comment">// constants will be transformed into an offset from that base constant. The</span></div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;<span class="comment">// question is which we can pick best? For example, consider these constants</span></div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;<span class="comment">// and their number of uses:</span></div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;<span class="comment">//  Constants| 2 | 4 | 12 | 42 |</span></div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;<span class="comment">//  NumUses  | 3 | 2 |  8 |  7 |</span></div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;<span class="comment">// Selecting constant 12 because it has the most uses will generate negative</span></div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;<span class="comment">// offsets for constants 2 and 4 (i.e. -10 and -8 respectively). If negative</span></div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;<span class="comment">// offsets lead to less optimal code generation, then there might be better</span></div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;<span class="comment">// solutions. Suppose immediates in the range of 0..35 are most optimally</span></div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;<span class="comment">// supported by the architecture, then selecting constant 2 is most optimal</span></div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;<span class="comment">// because this will generate offsets: 0, 2, 10, 40. Offsets 0, 2 and 10 are in</span></div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;<span class="comment">// range 0..35, and thus 3 + 2 + 8 = 13 uses are in range. Selecting 12 would</span></div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;<span class="comment">// have only 8 uses in range, so choosing 2 as a base is more optimal. Thus, in</span></div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;<span class="comment">// selecting the base constant the range of the offsets is a very important</span></div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;<span class="comment">// factor too that we take into account here. This algorithm calculates a total</span></div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;<span class="comment">// costs for selecting a constant as the base and substract the costs if</span></div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;<span class="comment">// immediates are out of range. It has quadratic complexity, so we call this</span></div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;<span class="comment">// function only when we&#39;re optimising for size and there are less than 100</span></div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;<span class="comment">// constants, we fall back to the straightforward algorithm otherwise</span></div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;<span class="comment">// which does not do all the offset calculations.</span></div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;<span class="keywordtype">unsigned</span></div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;ConstantHoistingPass::maximizeConstantsInRange(ConstCandVecType::iterator <a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>,</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;                                           ConstCandVecType::iterator <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>,</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;                                           ConstCandVecType::iterator &amp;MaxCostItr) {</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;  <span class="keywordtype">unsigned</span> NumUses = 0;</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160; </div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;  <span class="keywordtype">bool</span> OptForSize = Entry-&gt;getParent()-&gt;hasOptSize() ||</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;                    <a class="code" href="namespacellvm.html#a3af72f14ea20f2c762c751d2d49e5ea3">llvm::shouldOptimizeForSize</a>(Entry-&gt;getParent(), PSI, <a class="code" href="namespacellvm_1_1AMDGPUISD.html#a739d53294bc38cd6b0b23332f9994c0eafbca76f7875e080d97cee761de04d996">BFI</a>,</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;                                                <a class="code" href="namespacellvm.html#aec7c967a5416fa6e154433965357a50ea089e7eb4db258e05f70eef4ed5aa10bb">PGSOQueryType::IRPass</a>);</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;  <span class="keywordflow">if</span> (!OptForSize || std::distance(<a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>,<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>) &gt; 100) {</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> ConstCand = <a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>; ConstCand != <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>; ++ConstCand) {</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;      NumUses += ConstCand-&gt;Uses.size();</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;      <span class="keywordflow">if</span> (ConstCand-&gt;CumulativeCost &gt; MaxCostItr-&gt;CumulativeCost)</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;        MaxCostItr = ConstCand;</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;    }</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;    <span class="keywordflow">return</span> NumUses;</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;  }</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160; </div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;== Maximize constants in range ==\n&quot;</span>);</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;  <a class="code" href="classllvm_1_1InstructionCost.html">InstructionCost</a> MaxCost = -1;</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> ConstCand = <a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>; ConstCand != <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>; ++ConstCand) {</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;    <span class="keyword">auto</span> <a class="code" href="classllvm_1_1Value.html">Value</a> = ConstCand-&gt;ConstInt-&gt;getValue();</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *Ty = ConstCand-&gt;ConstInt-&gt;getType();</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;    <a class="code" href="classllvm_1_1InstructionCost.html">InstructionCost</a> <a class="code" href="InlineOrder_8cpp.html#a7ee6f0cb51c3b9056199e9a0001fe8c3a20b4f77bd00b4f63a49ec8e08f3bf6a6">Cost</a> = 0;</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;    NumUses += ConstCand-&gt;Uses.size();</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;= Constant: &quot;</span> &lt;&lt; ConstCand-&gt;ConstInt-&gt;getValue()</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;                      &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160; </div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> <a class="code" href="classllvm_1_1User.html">User</a> : ConstCand-&gt;Uses) {</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;      <span class="keywordtype">unsigned</span> Opcode = <a class="code" href="classllvm_1_1User.html">User</a>.Inst-&gt;getOpcode();</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;      <span class="keywordtype">unsigned</span> OpndIdx = <a class="code" href="classllvm_1_1User.html">User</a>.OpndIdx;</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;      <a class="code" href="InlineOrder_8cpp.html#a7ee6f0cb51c3b9056199e9a0001fe8c3a20b4f77bd00b4f63a49ec8e08f3bf6a6">Cost</a> += <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>-&gt;<a class="code" href="classllvm_1_1TargetTransformInfo.html#a6c5798a479ce88e66e1b53d70d678332">getIntImmCostInst</a>(Opcode, OpndIdx, <a class="code" href="classllvm_1_1Value.html">Value</a>, Ty,</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;                                     <a class="code" href="classllvm_1_1TargetTransformInfo.html#a706f223f760b55668fbae74202b816bba7f80055e1969cb850739546467460ad8">TargetTransformInfo::TCK_SizeAndLatency</a>);</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Cost: &quot;</span> &lt;&lt; Cost &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160; </div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">auto</span> C2 = <a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>; C2 != <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>; ++C2) {</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;        std::optional&lt;APInt&gt; Diff = <a class="code" href="ConstantHoisting_8cpp.html#ad7c40f6d655ecf11953a69676430f0e3">calculateOffsetDiff</a>(</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;            C2-&gt;ConstInt-&gt;getValue(), ConstCand-&gt;ConstInt-&gt;getValue());</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;        <span class="keywordflow">if</span> (Diff) {</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;          <span class="keyword">const</span> <a class="code" href="classllvm_1_1InstructionCost.html">InstructionCost</a> ImmCosts =</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;              <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>-&gt;<a class="code" href="classllvm_1_1TargetTransformInfo.html#aa8771f57e56c0bc0e9ace92ede634839">getIntImmCodeSizeCost</a>(Opcode, OpndIdx, *Diff, Ty);</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;          <a class="code" href="InlineOrder_8cpp.html#a7ee6f0cb51c3b9056199e9a0001fe8c3a20b4f77bd00b4f63a49ec8e08f3bf6a6">Cost</a> -= ImmCosts;</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;          <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Offset &quot;</span> &lt;&lt; *Diff &lt;&lt; <span class="stringliteral">&quot; &quot;</span></div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;                            &lt;&lt; <span class="stringliteral">&quot;has penalty: &quot;</span> &lt;&lt; ImmCosts &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;                            &lt;&lt; <span class="stringliteral">&quot;Adjusted cost: &quot;</span> &lt;&lt; Cost &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;        }</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;      }</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;    }</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Cumulative cost: &quot;</span> &lt;&lt; Cost &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;    <span class="keywordflow">if</span> (Cost &gt; MaxCost) {</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;      MaxCost = <a class="code" href="InlineOrder_8cpp.html#a7ee6f0cb51c3b9056199e9a0001fe8c3a20b4f77bd00b4f63a49ec8e08f3bf6a6">Cost</a>;</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;      MaxCostItr = ConstCand;</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;New candidate: &quot;</span> &lt;&lt; MaxCostItr-&gt;ConstInt-&gt;getValue()</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;                        &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;    }</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;  }</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;  <span class="keywordflow">return</span> NumUses;</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;}</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;<span class="comment">/// Find the base constant within the given range and rebase all other</span></div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;<span class="comment">/// constants with respect to the base constant.</span></div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> ConstantHoistingPass::findAndMakeBaseConstant(</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;    ConstCandVecType::iterator <a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>, ConstCandVecType::iterator <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>,</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;    <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;consthoist::ConstantInfo&gt;</a> &amp;ConstInfoVec) {</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;  <span class="keyword">auto</span> MaxCostItr = <a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>;</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;  <span class="keywordtype">unsigned</span> NumUses = maximizeConstantsInRange(<a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>, <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>, MaxCostItr);</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160; </div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;  <span class="comment">// Don&#39;t hoist constants that have only one use.</span></div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;  <span class="keywordflow">if</span> (NumUses &lt;= 1)</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160; </div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;  <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *ConstInt = MaxCostItr-&gt;ConstInt;</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;  <a class="code" href="classllvm_1_1ConstantExpr.html">ConstantExpr</a> *ConstExpr = MaxCostItr-&gt;ConstExpr;</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;  <a class="code" href="structllvm_1_1consthoist_1_1ConstantInfo.html">ConstantInfo</a> ConstInfo;</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;  ConstInfo.<a class="code" href="structllvm_1_1consthoist_1_1ConstantInfo.html#ac38b380ae0d9a5b94284de3194f95343">BaseInt</a> = ConstInt;</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;  ConstInfo.<a class="code" href="structllvm_1_1consthoist_1_1ConstantInfo.html#a50ee843d46243d34f678cae647a7bdf0">BaseExpr</a> = ConstExpr;</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *Ty = ConstInt-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#afe3ce7fc89f36474eb0369cbb792c05a">getType</a>();</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160; </div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;  <span class="comment">// Rebase the constants with respect to the base constant.</span></div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> ConstCand = <a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>; ConstCand != <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>; ++ConstCand) {</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;    <a class="code" href="classllvm_1_1APInt.html">APInt</a> Diff = ConstCand-&gt;ConstInt-&gt;getValue() - ConstInt-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#a4b001d9b458035fbbfc154d52d354ee9">getValue</a>();</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;    <a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="namespacellvm_1_1AMDGPU_1_1Hwreg.html#a6110fc30bc7311a6cf99814530362e21">Offset</a> = Diff == 0 ? nullptr : <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Ty, Diff);</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *ConstTy =</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;        ConstCand-&gt;ConstExpr ? ConstCand-&gt;ConstExpr-&gt;getType() : <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;    ConstInfo.<a class="code" href="structllvm_1_1consthoist_1_1ConstantInfo.html#aaf246806726648b2f0a4914d7ed81713">RebasedConstants</a>.push_back(</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;      <a class="code" href="structllvm_1_1consthoist_1_1RebasedConstantInfo.html">RebasedConstantInfo</a>(<a class="code" href="lib_2Target_2ARM_2README_8txt.html#ad3a99906764c35b2694ae90fa57744a5">std::move</a>(ConstCand-&gt;Uses), Offset, ConstTy));</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;  }</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;  ConstInfoVec.push_back(<a class="code" href="lib_2Target_2ARM_2README_8txt.html#ad3a99906764c35b2694ae90fa57744a5">std::move</a>(ConstInfo));</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;}</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;<span class="comment">/// Finds and combines constant candidates that can be easily</span></div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;<span class="comment">/// rematerialized with an add from a common base constant.</span></div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> ConstantHoistingPass::findBaseConstants(<a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a> *BaseGV) {</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;  <span class="comment">// If BaseGV is nullptr, find base among candidate constant integers;</span></div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;  <span class="comment">// Otherwise find base among constant GEPs that share the same BaseGV.</span></div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;  ConstCandVecType &amp;ConstCandVec = BaseGV ?</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;      ConstGEPCandMap[BaseGV] : ConstIntCandVec;</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;  ConstInfoVecType &amp;ConstInfoVec = BaseGV ?</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;      ConstGEPInfoMap[BaseGV] : ConstIntInfoVec;</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160; </div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;  <span class="comment">// Sort the constants by value and type. This invalidates the mapping!</span></div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;  <a class="code" href="namespacellvm.html#a076f93c387f454f0db13d4bc7d4e7f9c">llvm::stable_sort</a>(ConstCandVec, [](<span class="keyword">const</span> <a class="code" href="structllvm_1_1consthoist_1_1ConstantCandidate.html">ConstantCandidate</a> &amp;<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>,</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;                                     <span class="keyword">const</span> <a class="code" href="structllvm_1_1consthoist_1_1ConstantCandidate.html">ConstantCandidate</a> &amp;<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>) {</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>.ConstInt-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>() != <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>.ConstInt-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>())</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>.ConstInt-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;getBitWidth() &lt;</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;             <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>.ConstInt-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;getBitWidth();</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>.ConstInt-&gt;getValue().ult(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>.ConstInt-&gt;getValue());</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;  });</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160; </div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;  <span class="comment">// Simple linear scan through the sorted constant candidate vector for viable</span></div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;  <span class="comment">// merge candidates.</span></div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;  <span class="keyword">auto</span> MinValItr = ConstCandVec.begin();</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> <a class="code" href="RISCVRedundantCopyElimination_8cpp.html#a77c69067ae8279bc00ab8757731e90d7">CC</a> = std::next(ConstCandVec.begin()), <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = ConstCandVec.end();</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;       <a class="code" href="RISCVRedundantCopyElimination_8cpp.html#a77c69067ae8279bc00ab8757731e90d7">CC</a> != <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>; ++<a class="code" href="RISCVRedundantCopyElimination_8cpp.html#a77c69067ae8279bc00ab8757731e90d7">CC</a>) {</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;    <span class="keywordflow">if</span> (MinValItr-&gt;ConstInt-&gt;getType() == <a class="code" href="RISCVRedundantCopyElimination_8cpp.html#a77c69067ae8279bc00ab8757731e90d7">CC</a>-&gt;ConstInt-&gt;getType()) {</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;      <a class="code" href="classllvm_1_1Type.html">Type</a> *MemUseValTy = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;U : <a class="code" href="RISCVRedundantCopyElimination_8cpp.html#a77c69067ae8279bc00ab8757731e90d7">CC</a>-&gt;Uses) {</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;        <span class="keyword">auto</span> *UI = U.Inst;</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a> *LI = dyn_cast&lt;LoadInst&gt;(UI)) {</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;          MemUseValTy = LI-&gt;getType();</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1StoreInst.html">StoreInst</a> *<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a> = dyn_cast&lt;StoreInst&gt;(UI)) {</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;          <span class="comment">// Make sure the constant is used as pointer operand of the StoreInst.</span></div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;getPointerOperand() == <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;getOperand(U.OpndIdx)) {</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;            MemUseValTy = <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;getValueOperand()-&gt;getType();</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;          }</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;        }</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;      }</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160; </div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;      <span class="comment">// Check if the constant is in range of an add with immediate.</span></div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;      <a class="code" href="classllvm_1_1APInt.html">APInt</a> Diff = <a class="code" href="RISCVRedundantCopyElimination_8cpp.html#a77c69067ae8279bc00ab8757731e90d7">CC</a>-&gt;ConstInt-&gt;getValue() - MinValItr-&gt;ConstInt-&gt;getValue();</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;      <span class="keywordflow">if</span> ((Diff.<a class="code" href="classllvm_1_1APInt.html#a512fe2c15ea651294688eeec1341644c">getBitWidth</a>() &lt;= 64) &amp;&amp;</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;          <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>-&gt;<a class="code" href="classllvm_1_1TargetTransformInfo.html#a7f5c32f4b5bd13b1279016cd9a6db37b">isLegalAddImmediate</a>(Diff.<a class="code" href="classllvm_1_1APInt.html#af2daa0ee117afefed4c82eee55bf97b7">getSExtValue</a>()) &amp;&amp;</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;          <span class="comment">// Check if Diff can be used as offset in addressing mode of the user</span></div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;          <span class="comment">// memory instruction.</span></div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;          (!MemUseValTy || <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>-&gt;<a class="code" href="classllvm_1_1TargetTransformInfo.html#a5c84ca19e254840865cd33cc5aaedb81">isLegalAddressingMode</a>(MemUseValTy,</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;           <span class="comment">/*BaseGV*/</span><span class="keyword">nullptr</span>, <span class="comment">/*BaseOffset*/</span>Diff.<a class="code" href="classllvm_1_1APInt.html#af2daa0ee117afefed4c82eee55bf97b7">getSExtValue</a>(),</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;           <span class="comment">/*HasBaseReg*/</span><span class="keyword">true</span>, <span class="comment">/*Scale*/</span>0)))</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;    }</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;    <span class="comment">// We either have now a different constant type or the constant is not in</span></div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;    <span class="comment">// range of an add with immediate anymore.</span></div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;    findAndMakeBaseConstant(MinValItr, <a class="code" href="RISCVRedundantCopyElimination_8cpp.html#a77c69067ae8279bc00ab8757731e90d7">CC</a>, ConstInfoVec);</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;    <span class="comment">// Start a new base constant search.</span></div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;    MinValItr = <a class="code" href="RISCVRedundantCopyElimination_8cpp.html#a77c69067ae8279bc00ab8757731e90d7">CC</a>;</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;  }</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;  <span class="comment">// Finalize the last base constant search.</span></div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;  findAndMakeBaseConstant(MinValItr, ConstCandVec.end(), ConstInfoVec);</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;}</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;<span class="comment">/// Updates the operand at Idx in instruction Inst with the result of</span></div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;<span class="comment">///        instruction Mat. If the instruction is a PHI node then special</span></div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;<span class="comment">///        handling for duplicate values from the same incoming basic block is</span></div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;<span class="comment">///        required.</span></div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;<span class="comment">/// \return The update will always succeed, but the return value indicated if</span></div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;<span class="comment">///         Mat was used for the update or not.</span></div>
<div class="line"><a name="l00729"></a><span class="lineno"><a class="line" href="ConstantHoisting_8cpp.html#a0b724dd85384f743a87c3815aace6037">  729</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="ConstantHoisting_8cpp.html#a0b724dd85384f743a87c3815aace6037">updateOperand</a>(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Inst, <span class="keywordtype">unsigned</span> Idx, <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Mat) {</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> <a class="code" href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">PHI</a> = dyn_cast&lt;PHINode&gt;(Inst)) {</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;    <span class="comment">// Check if any previous operand of the PHI node has the same incoming basic</span></div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;    <span class="comment">// block. This is a very odd case that happens when the incoming basic block</span></div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;    <span class="comment">// has a switch statement. In this case use the same value as the previous</span></div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;    <span class="comment">// operand(s), otherwise we will fail verification due to different values.</span></div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;    <span class="comment">// The values are actually the same, but the variable names are different</span></div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;    <span class="comment">// and the verifier doesn&#39;t like that.</span></div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *IncomingBB = <a class="code" href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">PHI</a>-&gt;getIncomingBlock(Idx);</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; Idx; ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">PHI</a>-&gt;getIncomingBlock(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) == IncomingBB) {</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *IncomingVal = <a class="code" href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">PHI</a>-&gt;getIncomingValue(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;        Inst-&gt;<a class="code" href="classllvm_1_1User.html#a5fa9b8e1842b354f64c1ba6be0a4a17f">setOperand</a>(Idx, IncomingVal);</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;      }</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;    }</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;  }</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160; </div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;  Inst-&gt;<a class="code" href="classllvm_1_1User.html#a5fa9b8e1842b354f64c1ba6be0a4a17f">setOperand</a>(Idx, Mat);</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;}</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;<span class="comment">/// Emit materialization code for all rebased constants and update their</span></div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;<span class="comment">/// users.</span></div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> ConstantHoistingPass::emitBaseConstants(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Base,</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;                                             <a class="code" href="classllvm_1_1Constant.html">Constant</a> *Offset,</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;                                             <a class="code" href="classllvm_1_1Type.html">Type</a> *Ty,</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;                                             <span class="keyword">const</span> <a class="code" href="structllvm_1_1consthoist_1_1ConstantUser.html">ConstantUser</a> &amp;ConstUser) {</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Mat = <a class="code" href="namespacellvm_1_1sampleprof.html#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">Base</a>;</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160; </div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;  <span class="comment">// The same offset can be dereferenced to different types in nested struct.</span></div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;  <span class="keywordflow">if</span> (!Offset &amp;&amp; Ty &amp;&amp; Ty != <a class="code" href="namespacellvm_1_1sampleprof.html#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">Base</a>-&gt;getType())</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;    <a class="code" href="namespacellvm_1_1AMDGPU_1_1Hwreg.html#a6110fc30bc7311a6cf99814530362e21">Offset</a> = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(<a class="code" href="classllvm_1_1Type.html#a30dd396c5b40cd86c1591872e574ccdf">Type::getInt32Ty</a>(*Ctx), 0);</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160; </div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;  <span class="keywordflow">if</span> (Offset) {</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *InsertionPt = findMatInsertPt(ConstUser.<a class="code" href="structllvm_1_1consthoist_1_1ConstantUser.html#af6553e392174b2ad889153bd256e63ee">Inst</a>,</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;                                               ConstUser.<a class="code" href="structllvm_1_1consthoist_1_1ConstantUser.html#a11606ea0399b3ef78a7eff94f420035e">OpndIdx</a>);</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;    <span class="keywordflow">if</span> (Ty) {</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;      <span class="comment">// Constant being rebased is a ConstantExpr.</span></div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;      <a class="code" href="classllvm_1_1PointerType.html">PointerType</a> *Int8PtrTy = <a class="code" href="classllvm_1_1Type.html#a7fe9ccd4893f4e2caa826126c09545ea">Type::getInt8PtrTy</a>(*Ctx,</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;          cast&lt;PointerType&gt;(Ty)-&gt;<a class="code" href="namespacellvm_1_1AVR.html#a72f5caee7436dfc130b92f2545cf727b">getAddressSpace</a>());</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;      <a class="code" href="namespacellvm_1_1sampleprof.html#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">Base</a> = <span class="keyword">new</span> <a class="code" href="classllvm_1_1BitCastInst.html">BitCastInst</a>(Base, Int8PtrTy, <span class="stringliteral">&quot;base_bitcast&quot;</span>, InsertionPt);</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;      Mat = <a class="code" href="classllvm_1_1GetElementPtrInst.html#a74c47d18ecd4ca3399785e6ae07134dc">GetElementPtrInst::Create</a>(<a class="code" href="classllvm_1_1Type.html#a7ba5de75f50bb4a4ba920698edf39b28">Type::getInt8Ty</a>(*Ctx), Base,</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;          Offset, <span class="stringliteral">&quot;mat_gep&quot;</span>, InsertionPt);</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;      Mat = <span class="keyword">new</span> <a class="code" href="classllvm_1_1BitCastInst.html">BitCastInst</a>(Mat, Ty, <span class="stringliteral">&quot;mat_bitcast&quot;</span>, InsertionPt);</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;    } <span class="keywordflow">else</span></div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;      <span class="comment">// Constant being rebased is a ConstantInt.</span></div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;      Mat = <a class="code" href="classllvm_1_1BinaryOperator.html#a02ce9966395063ac501ecbc1623deda4">BinaryOperator::Create</a>(<a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a2b016c207343046b2bac45e69e76dcec">Instruction::Add</a>, Base, Offset,</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;                                 <span class="stringliteral">&quot;const_mat&quot;</span>, InsertionPt);</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160; </div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Materialize constant (&quot;</span> &lt;&lt; *<a class="code" href="namespacellvm_1_1sampleprof.html#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">Base</a>-&gt;getOperand(0)</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;                      &lt;&lt; <span class="stringliteral">&quot; + &quot;</span> &lt;&lt; *Offset &lt;&lt; <span class="stringliteral">&quot;) in BB &quot;</span></div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;                      &lt;&lt; Mat-&gt;<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>()-&gt;<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>() &lt;&lt; <span class="charliteral">&#39;\n&#39;</span></div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;                      &lt;&lt; *Mat &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;    Mat-&gt;<a class="code" href="classllvm_1_1Instruction.html#ae8f5bf5cc06f696b52c709677df00fbf">setDebugLoc</a>(ConstUser.<a class="code" href="structllvm_1_1consthoist_1_1ConstantUser.html#af6553e392174b2ad889153bd256e63ee">Inst</a>-&gt;<a class="code" href="classllvm_1_1Instruction.html#ab4f3bf98b5054831b608852e33427814">getDebugLoc</a>());</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;  }</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Opnd = ConstUser.<a class="code" href="structllvm_1_1consthoist_1_1ConstantUser.html#af6553e392174b2ad889153bd256e63ee">Inst</a>-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(ConstUser.<a class="code" href="structllvm_1_1consthoist_1_1ConstantUser.html#a11606ea0399b3ef78a7eff94f420035e">OpndIdx</a>);</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160; </div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;  <span class="comment">// Visit constant integer.</span></div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;  <span class="keywordflow">if</span> (isa&lt;ConstantInt&gt;(Opnd)) {</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Update: &quot;</span> &lt;&lt; *ConstUser.<a class="code" href="structllvm_1_1consthoist_1_1ConstantUser.html#af6553e392174b2ad889153bd256e63ee">Inst</a> &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="ConstantHoisting_8cpp.html#a0b724dd85384f743a87c3815aace6037">updateOperand</a>(ConstUser.<a class="code" href="structllvm_1_1consthoist_1_1ConstantUser.html#af6553e392174b2ad889153bd256e63ee">Inst</a>, ConstUser.<a class="code" href="structllvm_1_1consthoist_1_1ConstantUser.html#a11606ea0399b3ef78a7eff94f420035e">OpndIdx</a>, Mat) &amp;&amp; Offset)</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;      Mat-&gt;<a class="code" href="classllvm_1_1Instruction.html#ae6b978645b8ac72d1a35e1298ffdd4f0">eraseFromParent</a>();</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;To    : &quot;</span> &lt;&lt; *ConstUser.<a class="code" href="structllvm_1_1consthoist_1_1ConstantUser.html#af6553e392174b2ad889153bd256e63ee">Inst</a> &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;  }</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160; </div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;  <span class="comment">// Visit cast instruction.</span></div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> <a class="code" href="classllvm_1_1CastInst.html">CastInst</a> = dyn_cast&lt;Instruction&gt;(Opnd)) {</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="classllvm_1_1CastInst.html">CastInst</a>-&gt;<a class="code" href="classllvm_1_1Instruction.html#a27997849d8982bf226891024fd68daee">isCast</a>() &amp;&amp; <span class="stringliteral">&quot;Expected an cast instruction!&quot;</span>);</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;    <span class="comment">// Check if we already have visited this cast instruction before to avoid</span></div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;    <span class="comment">// unnecessary cloning.</span></div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *&amp;ClonedCastInst = ClonedCastMap[<a class="code" href="classllvm_1_1CastInst.html">CastInst</a>];</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;    <span class="keywordflow">if</span> (!ClonedCastInst) {</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;      ClonedCastInst = <a class="code" href="classllvm_1_1CastInst.html">CastInst</a>-&gt;<a class="code" href="classllvm_1_1Instruction.html#a0a4d51e372293abe5e5f6dac133e80a6">clone</a>();</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;      ClonedCastInst-&gt;<a class="code" href="classllvm_1_1User.html#a5fa9b8e1842b354f64c1ba6be0a4a17f">setOperand</a>(0, Mat);</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;      ClonedCastInst-&gt;<a class="code" href="classllvm_1_1Instruction.html#af09e4096de244d2fb345891328714a63">insertAfter</a>(<a class="code" href="classllvm_1_1CastInst.html">CastInst</a>);</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;      <span class="comment">// Use the same debug location as the original cast instruction.</span></div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;      ClonedCastInst-&gt;<a class="code" href="classllvm_1_1Instruction.html#ae8f5bf5cc06f696b52c709677df00fbf">setDebugLoc</a>(<a class="code" href="classllvm_1_1CastInst.html">CastInst</a>-&gt;<a class="code" href="classllvm_1_1Instruction.html#ab4f3bf98b5054831b608852e33427814">getDebugLoc</a>());</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Clone instruction: &quot;</span> &lt;&lt; *<a class="code" href="classllvm_1_1CastInst.html">CastInst</a> &lt;&lt; <span class="charliteral">&#39;\n&#39;</span></div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;                        &lt;&lt; <span class="stringliteral">&quot;To               : &quot;</span> &lt;&lt; *ClonedCastInst &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;    }</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160; </div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Update: &quot;</span> &lt;&lt; *ConstUser.<a class="code" href="structllvm_1_1consthoist_1_1ConstantUser.html#af6553e392174b2ad889153bd256e63ee">Inst</a> &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;    <a class="code" href="ConstantHoisting_8cpp.html#a0b724dd85384f743a87c3815aace6037">updateOperand</a>(ConstUser.<a class="code" href="structllvm_1_1consthoist_1_1ConstantUser.html#af6553e392174b2ad889153bd256e63ee">Inst</a>, ConstUser.<a class="code" href="structllvm_1_1consthoist_1_1ConstantUser.html#a11606ea0399b3ef78a7eff94f420035e">OpndIdx</a>, ClonedCastInst);</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;To    : &quot;</span> &lt;&lt; *ConstUser.<a class="code" href="structllvm_1_1consthoist_1_1ConstantUser.html#af6553e392174b2ad889153bd256e63ee">Inst</a> &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;  }</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160; </div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;  <span class="comment">// Visit constant expression.</span></div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> ConstExpr = dyn_cast&lt;ConstantExpr&gt;(Opnd)) {</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;    <span class="keywordflow">if</span> (isa&lt;GEPOperator&gt;(ConstExpr)) {</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;      <span class="comment">// Operand is a ConstantGEP, replace it.</span></div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;      <a class="code" href="ConstantHoisting_8cpp.html#a0b724dd85384f743a87c3815aace6037">updateOperand</a>(ConstUser.<a class="code" href="structllvm_1_1consthoist_1_1ConstantUser.html#af6553e392174b2ad889153bd256e63ee">Inst</a>, ConstUser.<a class="code" href="structllvm_1_1consthoist_1_1ConstantUser.html#a11606ea0399b3ef78a7eff94f420035e">OpndIdx</a>, Mat);</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;    }</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160; </div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;    <span class="comment">// Aside from constant GEPs, only constant cast expressions are collected.</span></div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(ConstExpr-&gt;<a class="code" href="classllvm_1_1ConstantExpr.html#a2c9fe4fbe6ac4c180d6d2547c05d33c9">isCast</a>() &amp;&amp; <span class="stringliteral">&quot;ConstExpr should be a cast&quot;</span>);</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *ConstExprInst = ConstExpr-&gt;<a class="code" href="classllvm_1_1ConstantExpr.html#a6beea5e7f30c60013e22e34a664d4045">getAsInstruction</a>(</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;        findMatInsertPt(ConstUser.<a class="code" href="structllvm_1_1consthoist_1_1ConstantUser.html#af6553e392174b2ad889153bd256e63ee">Inst</a>, ConstUser.<a class="code" href="structllvm_1_1consthoist_1_1ConstantUser.html#a11606ea0399b3ef78a7eff94f420035e">OpndIdx</a>));</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;    ConstExprInst-&gt;<a class="code" href="classllvm_1_1User.html#a5fa9b8e1842b354f64c1ba6be0a4a17f">setOperand</a>(0, Mat);</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160; </div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;    <span class="comment">// Use the same debug location as the instruction we are about to update.</span></div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;    ConstExprInst-&gt;<a class="code" href="classllvm_1_1Instruction.html#ae8f5bf5cc06f696b52c709677df00fbf">setDebugLoc</a>(ConstUser.<a class="code" href="structllvm_1_1consthoist_1_1ConstantUser.html#af6553e392174b2ad889153bd256e63ee">Inst</a>-&gt;<a class="code" href="classllvm_1_1Instruction.html#ab4f3bf98b5054831b608852e33427814">getDebugLoc</a>());</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160; </div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Create instruction: &quot;</span> &lt;&lt; *ConstExprInst &lt;&lt; <span class="charliteral">&#39;\n&#39;</span></div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;                      &lt;&lt; <span class="stringliteral">&quot;From              : &quot;</span> &lt;&lt; *ConstExpr &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Update: &quot;</span> &lt;&lt; *ConstUser.<a class="code" href="structllvm_1_1consthoist_1_1ConstantUser.html#af6553e392174b2ad889153bd256e63ee">Inst</a> &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="ConstantHoisting_8cpp.html#a0b724dd85384f743a87c3815aace6037">updateOperand</a>(ConstUser.<a class="code" href="structllvm_1_1consthoist_1_1ConstantUser.html#af6553e392174b2ad889153bd256e63ee">Inst</a>, ConstUser.<a class="code" href="structllvm_1_1consthoist_1_1ConstantUser.html#a11606ea0399b3ef78a7eff94f420035e">OpndIdx</a>, ConstExprInst)) {</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;      ConstExprInst-&gt;<a class="code" href="classllvm_1_1Instruction.html#ae6b978645b8ac72d1a35e1298ffdd4f0">eraseFromParent</a>();</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;      <span class="keywordflow">if</span> (Offset)</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;        Mat-&gt;<a class="code" href="classllvm_1_1Instruction.html#ae6b978645b8ac72d1a35e1298ffdd4f0">eraseFromParent</a>();</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;    }</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;To    : &quot;</span> &lt;&lt; *ConstUser.<a class="code" href="structllvm_1_1consthoist_1_1ConstantUser.html#af6553e392174b2ad889153bd256e63ee">Inst</a> &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;  }</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;}</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;<span class="comment">/// Hoist and hide the base constant behind a bitcast and emit</span></div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;<span class="comment">/// materialization code for derived constants.</span></div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> ConstantHoistingPass::emitBaseConstants(<a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a> *BaseGV) {</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;  <span class="keywordtype">bool</span> MadeChange = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;  <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;consthoist::ConstantInfo&gt;</a> &amp;ConstInfoVec =</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;      BaseGV ? ConstGEPInfoMap[BaseGV] : ConstIntInfoVec;</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span> &amp;ConstInfo : ConstInfoVec) {</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;    <a class="code" href="classllvm_1_1SetVector.html">SetVector&lt;Instruction *&gt;</a> IPSet = findConstantInsertionPoint(ConstInfo);</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;    <span class="comment">// We can have an empty set if the function contains unreachable blocks.</span></div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;    <span class="keywordflow">if</span> (IPSet.<a class="code" href="classllvm_1_1SetVector.html#aaf9ee38b9973681c1720aaf03af3a069">empty</a>())</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160; </div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;    <span class="keywordtype">unsigned</span> UsesNum = 0;</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;    <span class="keywordtype">unsigned</span> ReBasesNum = 0;</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;    <span class="keywordtype">unsigned</span> NotRebasedNum = 0;</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *IP : IPSet) {</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;      <span class="comment">// First, collect constants depending on this IP of the base.</span></div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;      <span class="keywordtype">unsigned</span> <a class="code" href="ARMLowOverheadLoops_8cpp.html#a0a0971d62011c35b29ff4a2325d45e93">Uses</a> = 0;</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;      <span class="keyword">using</span> RebasedUse = std::tuple&lt;Constant *, Type *, ConstantUser&gt;;</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;      <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;RebasedUse, 4&gt;</a> ToBeRebased;</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span> &amp;RCI : ConstInfo.<a class="code" href="structllvm_1_1consthoist_1_1ConstantInfo.html#aaf246806726648b2f0a4914d7ed81713">RebasedConstants</a>) {</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;        <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span> &amp;U : RCI.Uses) {</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;          <a class="code" href="ARMLowOverheadLoops_8cpp.html#a0a0971d62011c35b29ff4a2325d45e93">Uses</a>++;</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;          <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *OrigMatInsertBB =</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;              findMatInsertPt(U.Inst, U.OpndIdx)-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a38bee869ad41aebfef3de2641b12004c">getParent</a>();</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;          <span class="comment">// If Base constant is to be inserted in multiple places,</span></div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;          <span class="comment">// generate rebase for U using the Base dominating U.</span></div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;          <span class="keywordflow">if</span> (IPSet.size() == 1 ||</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;              DT-&gt;dominates(IP-&gt;getParent(), OrigMatInsertBB))</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;            ToBeRebased.push_back(RebasedUse(RCI.Offset, RCI.Ty, U));</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;        }</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;      }</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;      UsesNum = <a class="code" href="ARMLowOverheadLoops_8cpp.html#a0a0971d62011c35b29ff4a2325d45e93">Uses</a>;</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160; </div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;      <span class="comment">// If only few constants depend on this IP of base, skip rebasing,</span></div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;      <span class="comment">// assuming the base and the rebased have the same materialization cost.</span></div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;      <span class="keywordflow">if</span> (ToBeRebased.size() &lt; <a class="code" href="ConstantHoisting_8cpp.html#a84a4f80b4c2717978208d98888fd7cdb">MinNumOfDependentToRebase</a>) {</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;        NotRebasedNum += ToBeRebased.size();</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;      }</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160; </div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;      <span class="comment">// Emit an instance of the base at this IP.</span></div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;      <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="namespacellvm_1_1sampleprof.html#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">Base</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;      <span class="comment">// Hoist and hide the base constant behind a bitcast.</span></div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;      <span class="keywordflow">if</span> (ConstInfo.<a class="code" href="structllvm_1_1consthoist_1_1ConstantInfo.html#a50ee843d46243d34f678cae647a7bdf0">BaseExpr</a>) {</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;        <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(BaseGV &amp;&amp; <span class="stringliteral">&quot;A base constant expression must have an base GV&quot;</span>);</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;        <a class="code" href="classllvm_1_1Type.html">Type</a> *Ty = ConstInfo.<a class="code" href="structllvm_1_1consthoist_1_1ConstantInfo.html#a50ee843d46243d34f678cae647a7bdf0">BaseExpr</a>-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>();</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;        <a class="code" href="namespacellvm_1_1sampleprof.html#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">Base</a> = <span class="keyword">new</span> <a class="code" href="classllvm_1_1BitCastInst.html">BitCastInst</a>(ConstInfo.<a class="code" href="structllvm_1_1consthoist_1_1ConstantInfo.html#a50ee843d46243d34f678cae647a7bdf0">BaseExpr</a>, Ty, <span class="stringliteral">&quot;const&quot;</span>, IP);</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;        <a class="code" href="classllvm_1_1IntegerType.html">IntegerType</a> *Ty = ConstInfo.<a class="code" href="structllvm_1_1consthoist_1_1ConstantInfo.html#ac38b380ae0d9a5b94284de3194f95343">BaseInt</a>-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#afe3ce7fc89f36474eb0369cbb792c05a">getType</a>();</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;        <a class="code" href="namespacellvm_1_1sampleprof.html#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">Base</a> = <span class="keyword">new</span> <a class="code" href="classllvm_1_1BitCastInst.html">BitCastInst</a>(ConstInfo.<a class="code" href="structllvm_1_1consthoist_1_1ConstantInfo.html#ac38b380ae0d9a5b94284de3194f95343">BaseInt</a>, Ty, <span class="stringliteral">&quot;const&quot;</span>, IP);</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;      }</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160; </div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;      <a class="code" href="namespacellvm_1_1sampleprof.html#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">Base</a>-&gt;setDebugLoc(IP-&gt;getDebugLoc());</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160; </div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Hoist constant (&quot;</span> &lt;&lt; *ConstInfo.<a class="code" href="structllvm_1_1consthoist_1_1ConstantInfo.html#ac38b380ae0d9a5b94284de3194f95343">BaseInt</a></div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;                        &lt;&lt; <span class="stringliteral">&quot;) to BB &quot;</span> &lt;&lt; IP-&gt;getParent()-&gt;<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>() &lt;&lt; <span class="charliteral">&#39;\n&#39;</span></div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;                        &lt;&lt; *Base &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160; </div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;      <span class="comment">// Emit materialization code for rebased constants depending on this IP.</span></div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span> &amp;R : ToBeRebased) {</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;        <a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="namespacellvm_1_1AMDGPU_1_1IsaInfo.html#ab6e8b39aa26af871d8ede5fa8c791ee6ad15305d7a4e34e02489c74a5ef542f36">Off</a> = std::get&lt;0&gt;(R);</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;        <a class="code" href="classllvm_1_1Type.html">Type</a> *Ty = std::get&lt;1&gt;(R);</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;        <a class="code" href="structllvm_1_1consthoist_1_1ConstantUser.html">ConstantUser</a> U = std::get&lt;2&gt;(R);</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;        emitBaseConstants(Base, Off, Ty, U);</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;        ReBasesNum++;</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;        <span class="comment">// Use the same debug location as the last user of the constant.</span></div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;        <a class="code" href="namespacellvm_1_1sampleprof.html#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">Base</a>-&gt;setDebugLoc(<a class="code" href="classllvm_1_1DILocation.html#accc5dccb020fb7b324fcfb2d221c1a19">DILocation::getMergedLocation</a>(</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;            <a class="code" href="namespacellvm_1_1sampleprof.html#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">Base</a>-&gt;getDebugLoc(), U.<a class="code" href="structllvm_1_1consthoist_1_1ConstantUser.html#af6553e392174b2ad889153bd256e63ee">Inst</a>-&gt;<a class="code" href="classllvm_1_1Instruction.html#ab4f3bf98b5054831b608852e33427814">getDebugLoc</a>()));</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;      }</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!<a class="code" href="namespacellvm_1_1sampleprof.html#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">Base</a>-&gt;use_empty() &amp;&amp; <span class="stringliteral">&quot;The use list is empty!?&quot;</span>);</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(isa&lt;Instruction&gt;(<a class="code" href="namespacellvm_1_1sampleprof.html#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">Base</a>-&gt;user_back()) &amp;&amp;</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;             <span class="stringliteral">&quot;All uses should be instructions.&quot;</span>);</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;    }</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;    (void)UsesNum;</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;    (void)ReBasesNum;</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;    (void)NotRebasedNum;</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;    <span class="comment">// Expect all uses are rebased after rebase is done.</span></div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(UsesNum == (ReBasesNum + NotRebasedNum) &amp;&amp;</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;           <span class="stringliteral">&quot;Not all uses are rebased&quot;</span>);</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160; </div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;    NumConstantsHoisted++;</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160; </div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;    <span class="comment">// Base constant is also included in ConstInfo.RebasedConstants, so</span></div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;    <span class="comment">// deduct 1 from ConstInfo.RebasedConstants.size().</span></div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;    NumConstantsRebased += ConstInfo.<a class="code" href="structllvm_1_1consthoist_1_1ConstantInfo.html#aaf246806726648b2f0a4914d7ed81713">RebasedConstants</a>.size() - 1;</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160; </div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;    MadeChange = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;  }</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;  <span class="keywordflow">return</span> MadeChange;</div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;}</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;<span class="comment">/// Check all cast instructions we made a copy of and remove them if they</span></div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;<span class="comment">/// have no more users.</span></div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> ConstantHoistingPass::deleteDeadCastInst()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : ClonedCastMap)</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.first-&gt;use_empty())</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;      <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.first-&gt;eraseFromParent();</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;}</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;<span class="comment">/// Optimize expensive integer constants in the given function.</span></div>
<div class="line"><a name="l00949"></a><span class="lineno"><a class="line" href="classllvm_1_1ConstantHoistingPass.html#a778bef41059be563431e55a70168520a">  949</a></span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1ConstantHoistingPass.html#a778bef41059be563431e55a70168520a">ConstantHoistingPass::runImpl</a>(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;Fn, <a class="code" href="classllvm_1_1TargetTransformInfo.html">TargetTransformInfo</a> &amp;<a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>,</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;                                   <a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> &amp;DT, <a class="code" href="classllvm_1_1BlockFrequencyInfo.html">BlockFrequencyInfo</a> *<a class="code" href="namespacellvm_1_1AMDGPUISD.html#a739d53294bc38cd6b0b23332f9994c0eafbca76f7875e080d97cee761de04d996">BFI</a>,</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;                                   <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> &amp;Entry, <a class="code" href="classllvm_1_1ProfileSummaryInfo.html">ProfileSummaryInfo</a> *PSI) {</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;  this-&gt;TTI = &amp;<a class="code" href="namespacellvm.html#aa0d69e81725c10fa5407f0bf34462068">TTI</a>;</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;  this-&gt;DT = &amp;DT;</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;  this-&gt;BFI = <a class="code" href="namespacellvm_1_1AMDGPUISD.html#a739d53294bc38cd6b0b23332f9994c0eafbca76f7875e080d97cee761de04d996">BFI</a>;</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;  this-&gt;<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a> = &amp;Fn.<a class="code" href="classllvm_1_1GlobalValue.html#a9e1fc23a17e97d2d1732e753ae9251ac">getParent</a>()-&gt;<a class="code" href="classllvm_1_1Module.html#a6d883605206368bc536cc9ded97209b8">getDataLayout</a>();</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;  this-&gt;Ctx = &amp;Fn.<a class="code" href="classllvm_1_1Function.html#a9fffac2512fe651f0d5e37e27f5bd51c">getContext</a>();</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;  this-&gt;Entry = &amp;Entry;</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;  this-&gt;PSI = PSI;</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;  <span class="comment">// Collect all constant candidates.</span></div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;  collectConstantCandidates(Fn);</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160; </div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;  <span class="comment">// Combine constants that can be easily materialized with an add from a common</span></div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;  <span class="comment">// base constant.</span></div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;  <span class="keywordflow">if</span> (!ConstIntCandVec.empty())</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;    findBaseConstants(<span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;MapEntry : ConstGEPCandMap)</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;    <span class="keywordflow">if</span> (!MapEntry.second.empty())</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;      findBaseConstants(MapEntry.first);</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160; </div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;  <span class="comment">// Finally hoist the base constant and emit materialization code for dependent</span></div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;  <span class="comment">// constants.</span></div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;  <span class="keywordtype">bool</span> MadeChange = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;  <span class="keywordflow">if</span> (!ConstIntInfoVec.empty())</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;    MadeChange = emitBaseConstants(<span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;MapEntry : ConstGEPInfoMap)</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;    <span class="keywordflow">if</span> (!MapEntry.second.empty())</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;      MadeChange |= emitBaseConstants(MapEntry.first);</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160; </div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160; </div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;  <span class="comment">// Cleanup dead instructions.</span></div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;  deleteDeadCastInst();</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160; </div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;  <a class="code" href="BlockFrequencyInfoImpl_8cpp.html#a3419f1e4b5a20b3ec28ae5f1f3c6f32b">cleanup</a>();</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160; </div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;  <span class="keywordflow">return</span> MadeChange;</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;}</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160; </div>
<div class="line"><a name="l00988"></a><span class="lineno"><a class="line" href="classllvm_1_1ConstantHoistingPass.html#abe3f0e309e575379e5bae02d1907f394">  988</a></span>&#160;<a class="code" href="classllvm_1_1PreservedAnalyses.html">PreservedAnalyses</a> <a class="code" href="classllvm_1_1ConstantHoistingPass.html#abe3f0e309e575379e5bae02d1907f394">ConstantHoistingPass::run</a>(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>,</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;                                            <a class="code" href="classllvm_1_1AnalysisManager.html">FunctionAnalysisManager</a> &amp;AM) {</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;  <span class="keyword">auto</span> &amp;DT = AM.<a class="code" href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">getResult</a>&lt;<a class="code" href="classllvm_1_1DominatorTreeAnalysis.html">DominatorTreeAnalysis</a>&gt;(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;  <span class="keyword">auto</span> &amp;<a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a> = AM.<a class="code" href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">getResult</a>&lt;<a class="code" href="classllvm_1_1TargetIRAnalysis.html">TargetIRAnalysis</a>&gt;(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;  <span class="keyword">auto</span> <a class="code" href="namespacellvm_1_1AMDGPUISD.html#a739d53294bc38cd6b0b23332f9994c0eafbca76f7875e080d97cee761de04d996">BFI</a> = <a class="code" href="ConstantHoisting_8cpp.html#a03753ef110db115d5fb1af7c0983eff5">ConstHoistWithBlockFrequency</a></div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;                 ? &amp;AM.<a class="code" href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">getResult</a>&lt;<a class="code" href="classllvm_1_1BlockFrequencyAnalysis.html">BlockFrequencyAnalysis</a>&gt;(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>)</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;                 : <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;  <span class="keyword">auto</span> &amp;MAMProxy = AM.<a class="code" href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">getResult</a>&lt;<a class="code" href="classllvm_1_1OuterAnalysisManagerProxy.html">ModuleAnalysisManagerFunctionProxy</a>&gt;(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;  <span class="keyword">auto</span> *PSI = MAMProxy.getCachedResult&lt;<a class="code" href="classllvm_1_1ProfileSummaryAnalysis.html">ProfileSummaryAnalysis</a>&gt;(*<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getParent());</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="ExpandLargeDivRem_8cpp.html#ae64f9cd0977a8b47570154312540d7d2">runImpl</a>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>, DT, <a class="code" href="namespacellvm_1_1AMDGPUISD.html#a739d53294bc38cd6b0b23332f9994c0eafbca76f7875e080d97cee761de04d996">BFI</a>, <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getEntryBlock(), PSI))</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1PreservedAnalyses.html#a1258a1ff55557c27684010ebd7283712">PreservedAnalyses::all</a>();</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160; </div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;  <a class="code" href="classllvm_1_1PreservedAnalyses.html">PreservedAnalyses</a> PA;</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;  PA.<a class="code" href="classllvm_1_1PreservedAnalyses.html#a937c42f77e161349ce0f999e448c7027">preserveSet</a>&lt;<a class="code" href="classllvm_1_1CFGAnalyses.html">CFGAnalyses</a>&gt;();</div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;  <span class="keywordflow">return</span> PA;</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;}</div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="alib_2Target_2README_8txt_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">i</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2README_8txt_source.html#l00029">README.txt:29</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstructionCost_html"><div class="ttname"><a href="classllvm_1_1InstructionCost.html">llvm::InstructionCost</a></div><div class="ttdef"><b>Definition:</b> <a href="InstructionCost_8h_source.html#l00029">InstructionCost.h:29</a></div></div>
<div class="ttc" id="aConstantHoisting_8cpp_html_aa31d68a00d95b1fabf45b0595784951d"><div class="ttname"><a href="ConstantHoisting_8cpp.html#aa31d68a00d95b1fabf45b0595784951d">Hoisting</a></div><div class="ttdeci">Constant Hoisting</div><div class="ttdef"><b>Definition:</b> <a href="ConstantHoisting_8cpp_source.html#l00135">ConstantHoisting.cpp:135</a></div></div>
<div class="ttc" id="aclassllvm_1_1PreservedAnalyses_html"><div class="ttname"><a href="classllvm_1_1PreservedAnalyses.html">llvm::PreservedAnalyses</a></div><div class="ttdoc">A set of analyses that are preserved following a run of a transformation pass.</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00152">PassManager.h:152</a></div></div>
<div class="ttc" id="aclassllvm_1_1OuterAnalysisManagerProxy_html"><div class="ttname"><a href="classllvm_1_1OuterAnalysisManagerProxy.html">llvm::OuterAnalysisManagerProxy</a></div><div class="ttdoc">An analysis over an &quot;inner&quot; IR unit that provides access to an analysis manager over a &quot;outer&quot; IR uni...</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l01056">PassManager.h:1056</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetIRAnalysis_html"><div class="ttname"><a href="classllvm_1_1TargetIRAnalysis.html">llvm::TargetIRAnalysis</a></div><div class="ttdoc">Analysis pass providing the TargetTransformInfo.</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l02626">TargetTransformInfo.h:2626</a></div></div>
<div class="ttc" id="anamespacellvm_html"><div class="ttname"><a href="namespacellvm.html">llvm</a></div><div class="ttdoc">This is an optimization pass for GlobalISel generic memory operations.</div><div class="ttdef"><b>Definition:</b> <a href="AddressRanges_8h_source.html#l00018">AddressRanges.h:18</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AArch64PACKey_html_abf4394f452bde3f544999858d71e4b46"><div class="ttname"><a href="namespacellvm_1_1AArch64PACKey.html#abf4394f452bde3f544999858d71e4b46">llvm::AArch64PACKey::ID</a></div><div class="ttdeci">ID</div><div class="ttdef"><b>Definition:</b> <a href="AArch64BaseInfo_8h_source.html#l00790">AArch64BaseInfo.h:790</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a7fe9ccd4893f4e2caa826126c09545ea"><div class="ttname"><a href="classllvm_1_1Type.html#a7fe9ccd4893f4e2caa826126c09545ea">llvm::Type::getInt8PtrTy</a></div><div class="ttdeci">static PointerType * getInt8PtrTy(LLVMContext &amp;C, unsigned AS=0)</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00293">Type.cpp:293</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a98c0a84a5dfa8bce341c829709f171e5"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a98c0a84a5dfa8bce341c829709f171e5">llvm::BasicBlock::iterator</a></div><div class="ttdeci">InstListType::iterator iterator</div><div class="ttdoc">Instruction iterators...</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00087">BasicBlock.h:87</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantInt_html_afe3ce7fc89f36474eb0369cbb792c05a"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#afe3ce7fc89f36474eb0369cbb792c05a">llvm::ConstantInt::getType</a></div><div class="ttdeci">IntegerType * getType() const</div><div class="ttdoc">getType - Specialize the getType() method to always return an IntegerType, which reduces the amount o...</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00172">Constants.h:172</a></div></div>
<div class="ttc" id="aAMDGPURewriteUndefForPHI_8cpp_html_a2e83cb1bc3f5e8986cbd14575755a134"><div class="ttname"><a href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">PHI</a></div><div class="ttdeci">Rewrite undef for PHI</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPURewriteUndefForPHI_8cpp_source.html#l00101">AMDGPURewriteUndefForPHI.cpp:101</a></div></div>
<div class="ttc" id="astructllvm_1_1consthoist_1_1ConstantCandidate_html"><div class="ttname"><a href="structllvm_1_1consthoist_1_1ConstantCandidate.html">llvm::consthoist::ConstantCandidate</a></div><div class="ttdoc">Keeps track of a constant candidate and its uses.</div><div class="ttdef"><b>Definition:</b> <a href="ConstantHoisting_8h_source.html#l00079">ConstantHoisting.h:79</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a38bee869ad41aebfef3de2641b12004c"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a38bee869ad41aebfef3de2641b12004c">llvm::BasicBlock::getParent</a></div><div class="ttdeci">const Function * getParent() const</div><div class="ttdoc">Return the enclosing method, or null if none.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00112">BasicBlock.h:112</a></div></div>
<div class="ttc" id="aIntrinsicInst_8h_html"><div class="ttname"><a href="IntrinsicInst_8h.html">IntrinsicInst.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1DILocation_html_accc5dccb020fb7b324fcfb2d221c1a19"><div class="ttname"><a href="classllvm_1_1DILocation.html#accc5dccb020fb7b324fcfb2d221c1a19">llvm::DILocation::getMergedLocation</a></div><div class="ttdeci">static const DILocation * getMergedLocation(const DILocation *LocA, const DILocation *LocB)</div><div class="ttdoc">When two instructions are combined into a single instruction we also need to combine the original loc...</div><div class="ttdef"><b>Definition:</b> <a href="DebugInfoMetadata_8cpp_source.html#l00108">DebugInfoMetadata.cpp:108</a></div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisManager_html_ab9d3d5412c20747fd0110a046604f09a"><div class="ttname"><a href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">llvm::AnalysisManager::getResult</a></div><div class="ttdeci">PassT::Result &amp; getResult(IRUnitT &amp;IR, ExtraArgTs... ExtraArgs)</div><div class="ttdoc">Get the result of an analysis pass for a given IR unit.</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00774">PassManager.h:774</a></div></div>
<div class="ttc" id="aDebugInfoMetadata_8h_html"><div class="ttname"><a href="DebugInfoMetadata_8h.html">DebugInfoMetadata.h</a></div></div>
<div class="ttc" id="aTransforms_2Scalar_8h_html"><div class="ttname"><a href="Transforms_2Scalar_8h.html">Scalar.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html"><div class="ttname"><a href="classllvm_1_1Function.html">llvm::Function</a></div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00059">Function.h:59</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a27997849d8982bf226891024fd68daee"><div class="ttname"><a href="classllvm_1_1Instruction.html#a27997849d8982bf226891024fd68daee">llvm::Instruction::isCast</a></div><div class="ttdeci">bool isCast() const</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00176">Instruction.h:176</a></div></div>
<div class="ttc" id="astructllvm_1_1consthoist_1_1ConstantInfo_html_aaf246806726648b2f0a4914d7ed81713"><div class="ttname"><a href="structllvm_1_1consthoist_1_1ConstantInfo.html#aaf246806726648b2f0a4914d7ed81713">llvm::consthoist::ConstantInfo::RebasedConstants</a></div><div class="ttdeci">RebasedConstantListType RebasedConstants</div><div class="ttdef"><b>Definition:</b> <a href="ConstantHoisting_8h_source.html#l00118">ConstantHoisting.h:118</a></div></div>
<div class="ttc" id="aPass_8h_html"><div class="ttname"><a href="Pass_8h.html">Pass.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantExpr_html_a6beea5e7f30c60013e22e34a664d4045"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#a6beea5e7f30c60013e22e34a664d4045">llvm::ConstantExpr::getAsInstruction</a></div><div class="ttdeci">Instruction * getAsInstruction(Instruction *InsertBefore=nullptr) const</div><div class="ttdoc">Returns an Instruction which implements the same operation as this ConstantExpr.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l03423">Constants.cpp:3423</a></div></div>
<div class="ttc" id="aclassllvm_1_1BlockFrequencyInfoWrapperPass_html"><div class="ttname"><a href="classllvm_1_1BlockFrequencyInfoWrapperPass.html">llvm::BlockFrequencyInfoWrapperPass</a></div><div class="ttdoc">Legacy analysis pass which computes BlockFrequencyInfo.</div><div class="ttdef"><b>Definition:</b> <a href="BlockFrequencyInfo_8h_source.html#l00138">BlockFrequencyInfo.h:138</a></div></div>
<div class="ttc" id="aclassllvm_1_1BitCastInst_html"><div class="ttname"><a href="classllvm_1_1BitCastInst.html">llvm::BitCastInst</a></div><div class="ttdoc">This class represents a no-op cast from one type to another.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l05258">Instructions.h:5258</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantInt_html_a4b001d9b458035fbbfc154d52d354ee9"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#a4b001d9b458035fbbfc154d52d354ee9">llvm::ConstantInt::getValue</a></div><div class="ttdeci">const APInt &amp; getValue() const</div><div class="ttdoc">Return the constant as an APInt value reference.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00132">Constants.h:132</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVector_html"><div class="ttname"><a href="classllvm_1_1SmallVector.html">llvm::SmallVector</a></div><div class="ttdoc">This is a 'vector' (really, a variable-sized array), optimized for the case when the array is small.</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l01199">SmallVector.h:1199</a></div></div>
<div class="ttc" id="aStatistic_8h_html"><div class="ttname"><a href="Statistic_8h.html">Statistic.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_af2daa0ee117afefed4c82eee55bf97b7"><div class="ttname"><a href="classllvm_1_1APInt.html#af2daa0ee117afefed4c82eee55bf97b7">llvm::APInt::getSExtValue</a></div><div class="ttdeci">int64_t getSExtValue() const</div><div class="ttdoc">Get sign extended value.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l01516">APInt.h:1516</a></div></div>
<div class="ttc" id="aSizeOpts_8h_html"><div class="ttname"><a href="SizeOpts_8h.html">SizeOpts.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfo_html"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html">llvm::TargetTransformInfo</a></div><div class="ttdoc">This pass provides access to the codegen interfaces that are needed for IR-level transformations.</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l00196">TargetTransformInfo.h:196</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html_ae6a4da5f41fc6a36735cc1704c01ce60"><div class="ttname"><a href="classllvm_1_1Function.html#ae6a4da5f41fc6a36735cc1704c01ce60">llvm::Function::getEntryBlock</a></div><div class="ttdeci">const BasicBlock &amp; getEntryBlock() const</div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00735">Function.h:735</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalVariable_html"><div class="ttname"><a href="classllvm_1_1GlobalVariable.html">llvm::GlobalVariable</a></div><div class="ttdef"><b>Definition:</b> <a href="GlobalVariable_8h_source.html#l00039">GlobalVariable.h:39</a></div></div>
<div class="ttc" id="aclassllvm_1_1PointerType_html_af8aeced5e71d2589fa3e9791043af5cb"><div class="ttname"><a href="classllvm_1_1PointerType.html#af8aeced5e71d2589fa3e9791043af5cb">llvm::PointerType::getAddressSpace</a></div><div class="ttdeci">unsigned getAddressSpace() const</div><div class="ttdoc">Return the address space of the Pointer type.</div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00682">DerivedTypes.h:682</a></div></div>
<div class="ttc" id="aTransforms_2Utils_2Local_8h_html"><div class="ttname"><a href="Transforms_2Utils_2Local_8h.html">Local.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1DominatorTree_html"><div class="ttname"><a href="classllvm_1_1DominatorTree.html">llvm::DominatorTree</a></div><div class="ttdoc">Concrete subclass of DominatorTreeBase that is used to compute a normal dominator tree.</div><div class="ttdef"><b>Definition:</b> <a href="Dominators_8h_source.html#l00166">Dominators.h:166</a></div></div>
<div class="ttc" id="anamespacellvm_1_1cl_html_a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6"><div class="ttname"><a href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">llvm::cl::Hidden</a></div><div class="ttdeci">@ Hidden</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00138">CommandLine.h:138</a></div></div>
<div class="ttc" id="aBlockFrequencyInfoImpl_8cpp_html_a3419f1e4b5a20b3ec28ae5f1f3c6f32b"><div class="ttname"><a href="BlockFrequencyInfoImpl_8cpp.html#a3419f1e4b5a20b3ec28ae5f1f3c6f32b">cleanup</a></div><div class="ttdeci">static void cleanup(BlockFrequencyInfoImplBase &amp;BFI)</div><div class="ttdoc">Clear all memory not needed downstream.</div><div class="ttdef"><b>Definition:</b> <a href="BlockFrequencyInfoImpl_8cpp_source.html#l00303">BlockFrequencyInfoImpl.cpp:303</a></div></div>
<div class="ttc" id="aAPInt_8h_html"><div class="ttname"><a href="APInt_8h.html">APInt.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html_a9fffac2512fe651f0d5e37e27f5bd51c"><div class="ttname"><a href="classllvm_1_1Function.html#a9fffac2512fe651f0d5e37e27f5bd51c">llvm::Function::getContext</a></div><div class="ttdeci">LLVMContext &amp; getContext() const</div><div class="ttdoc">getContext - Return a reference to the LLVMContext associated with this function.</div><div class="ttdef"><b>Definition:</b> <a href="Function_8cpp_source.html#l00315">Function.cpp:315</a></div></div>
<div class="ttc" id="aBlockFrequency_8h_html"><div class="ttname"><a href="BlockFrequency_8h.html">BlockFrequency.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html"><div class="ttname"><a href="classllvm_1_1Type.html">llvm::Type</a></div><div class="ttdoc">The instances of the Type class are immutable: once they are created, they are never changed.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00045">Type.h:45</a></div></div>
<div class="ttc" id="aDenseMap_8h_html"><div class="ttname"><a href="DenseMap_8h.html">DenseMap.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_a512fe2c15ea651294688eeec1341644c"><div class="ttname"><a href="classllvm_1_1APInt.html#a512fe2c15ea651294688eeec1341644c">llvm::APInt::getBitWidth</a></div><div class="ttdeci">unsigned getBitWidth() const</div><div class="ttdoc">Return the number of bits in the APInt.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l01439">APInt.h:1439</a></div></div>
<div class="ttc" id="aclassllvm_1_1DominatorTreeBase_html_a4344e66fb61ea313a85a9e054124ac55"><div class="ttname"><a href="classllvm_1_1DominatorTreeBase.html#a4344e66fb61ea313a85a9e054124ac55">llvm::DominatorTreeBase::getNode</a></div><div class="ttdeci">DomTreeNodeBase&lt; NodeT &gt; * getNode(const NodeT *BB) const</div><div class="ttdoc">getNode - return the (Post)DominatorTree node for the specified basic block.</div><div class="ttdef"><b>Definition:</b> <a href="GenericDomTree_8h_source.html#l00367">GenericDomTree.h:367</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSet_html"><div class="ttname"><a href="classllvm_1_1SmallPtrSet.html">llvm::SmallPtrSet</a></div><div class="ttdoc">SmallPtrSet - This class implements a set which is optimized for holding SmallSize or less elements.</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00450">SmallPtrSet.h:450</a></div></div>
<div class="ttc" id="aOperator_8h_html"><div class="ttname"><a href="Operator_8h.html">Operator.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfo_html_aa8771f57e56c0bc0e9ace92ede634839"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html#aa8771f57e56c0bc0e9ace92ede634839">llvm::TargetTransformInfo::getIntImmCodeSizeCost</a></div><div class="ttdeci">InstructionCost getIntImmCodeSizeCost(unsigned Opc, unsigned Idx, const APInt &amp;Imm, Type *Ty) const</div><div class="ttdoc">Return the expected cost for the given integer when optimising for size.</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8cpp_source.html#l00608">TargetTransformInfo.cpp:608</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfo_html_a6abe636878bffb348ed313016ab1c21b"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html#a6abe636878bffb348ed313016ab1c21b">llvm::TargetTransformInfo::getIntImmCostIntrin</a></div><div class="ttdeci">InstructionCost getIntImmCostIntrin(Intrinsic::ID IID, unsigned Idx, const APInt &amp;Imm, Type *Ty, TargetCostKind CostKind) const</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8cpp_source.html#l00635">TargetTransformInfo.cpp:635</a></div></div>
<div class="ttc" id="aConstantHoisting_8cpp_html_ab70e43d6443d2e8107cdf0dc2d7874f7"><div class="ttname"><a href="ConstantHoisting_8cpp.html#ab70e43d6443d2e8107cdf0dc2d7874f7">consthoist</a></div><div class="ttdeci">consthoist</div><div class="ttdef"><b>Definition:</b> <a href="ConstantHoisting_8cpp_source.html#l00134">ConstantHoisting.cpp:134</a></div></div>
<div class="ttc" id="aX86PartialReduction_8cpp_html_a87b8bfbbe9d8f7146d7f20a5fb42efd0"><div class="ttname"><a href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a></div><div class="ttdeci">Value * RHS</div><div class="ttdef"><b>Definition:</b> <a href="X86PartialReduction_8cpp_source.html#l00076">X86PartialReduction.cpp:76</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfo_html_a6c5798a479ce88e66e1b53d70d678332"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html#a6c5798a479ce88e66e1b53d70d678332">llvm::TargetTransformInfo::getIntImmCostInst</a></div><div class="ttdeci">InstructionCost getIntImmCostInst(unsigned Opc, unsigned Idx, const APInt &amp;Imm, Type *Ty, TargetCostKind CostKind, Instruction *Inst=nullptr) const</div><div class="ttdoc">Return the expected cost of materialization for the given integer immediate of the specified type for...</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8cpp_source.html#l00625">TargetTransformInfo.cpp:625</a></div></div>
<div class="ttc" id="aclassllvm_1_1DomTreeNodeBase_html_aa22cb3ff8c95bb05185acad8c569d4b6"><div class="ttname"><a href="classllvm_1_1DomTreeNodeBase.html#aa22cb3ff8c95bb05185acad8c569d4b6">llvm::DomTreeNodeBase::getIDom</a></div><div class="ttdeci">DomTreeNodeBase * getIDom() const</div><div class="ttdef"><b>Definition:</b> <a href="GenericDomTree_8h_source.html#l00090">GenericDomTree.h:90</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a7ba5de75f50bb4a4ba920698edf39b28"><div class="ttname"><a href="classllvm_1_1Type.html#a7ba5de75f50bb4a4ba920698edf39b28">llvm::Type::getInt8Ty</a></div><div class="ttdeci">static IntegerType * getInt8Ty(LLVMContext &amp;C)</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00239">Type.cpp:239</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a30dd396c5b40cd86c1591872e574ccdf"><div class="ttname"><a href="classllvm_1_1Type.html#a30dd396c5b40cd86c1591872e574ccdf">llvm::Type::getInt32Ty</a></div><div class="ttdeci">static IntegerType * getInt32Ty(LLVMContext &amp;C)</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00241">Type.cpp:241</a></div></div>
<div class="ttc" id="aDebug_8h_html_a08efc68d15935eb8889400a46c3749ba"><div class="ttname"><a href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a></div><div class="ttdeci">#define LLVM_DEBUG(X)</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8h_source.html#l00101">Debug.h:101</a></div></div>
<div class="ttc" id="aMD5_8cpp_html_a96d73bbd7af15cb1fc38c3f4a3bd82e9"><div class="ttname"><a href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a></div><div class="ttdeci">#define F(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00055">MD5.cpp:55</a></div></div>
<div class="ttc" id="aMachineLateInstrsCleanup_8cpp_html_a1705fe175d6d933d516bee5ba700abaa"><div class="ttname"><a href="MachineLateInstrsCleanup_8cpp.html#a1705fe175d6d933d516bee5ba700abaa">isCandidate</a></div><div class="ttdeci">static bool isCandidate(const MachineInstr *MI, Register &amp;DefedReg, Register FrameReg)</div><div class="ttdef"><b>Definition:</b> <a href="MachineLateInstrsCleanup_8cpp_source.html#l00149">MachineLateInstrsCleanup.cpp:149</a></div></div>
<div class="ttc" id="aARMLowOverheadLoops_8cpp_html_a0a0971d62011c35b29ff4a2325d45e93"><div class="ttname"><a href="ARMLowOverheadLoops_8cpp.html#a0a0971d62011c35b29ff4a2325d45e93">Uses</a></div><div class="ttdeci">SmallPtrSet&lt; MachineInstr *, 2 &gt; Uses</div><div class="ttdef"><b>Definition:</b> <a href="ARMLowOverheadLoops_8cpp_source.html#l00590">ARMLowOverheadLoops.cpp:590</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html"><div class="ttname"><a href="classllvm_1_1BasicBlock.html">llvm::BasicBlock</a></div><div class="ttdoc">LLVM Basic Block Representation.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00055">BasicBlock.h:55</a></div></div>
<div class="ttc" id="anamespacellvm_html_a7c46c742c31be54870e2038048e6b391"><div class="ttname"><a href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">llvm::dbgs</a></div><div class="ttdeci">raw_ostream &amp; dbgs()</div><div class="ttdoc">dbgs() - This returns a reference to a raw_ostream for debugging messages.</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8cpp_source.html#l00163">Debug.cpp:163</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AVR_html_a72f5caee7436dfc130b92f2545cf727b"><div class="ttname"><a href="namespacellvm_1_1AVR.html#a72f5caee7436dfc130b92f2545cf727b">llvm::AVR::getAddressSpace</a></div><div class="ttdeci">AddressSpace getAddressSpace(T *V)</div><div class="ttdef"><b>Definition:</b> <a href="AVR_8h_source.html#l00066">AVR.h:66</a></div></div>
<div class="ttc" id="aIR_2Instruction_8h_html"><div class="ttname"><a href="IR_2Instruction_8h.html">Instruction.h</a></div></div>
<div class="ttc" id="aCommandLine_8h_html"><div class="ttname"><a href="CommandLine_8h.html">CommandLine.h</a></div></div>
<div class="ttc" id="aX86PartialReduction_8cpp_html_a9e1483f7215664a2315c53c3558d9a8d"><div class="ttname"><a href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a></div><div class="ttdeci">Value * LHS</div><div class="ttdef"><b>Definition:</b> <a href="X86PartialReduction_8cpp_source.html#l00075">X86PartialReduction.cpp:75</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantInt_html"><div class="ttname"><a href="classllvm_1_1ConstantInt.html">llvm::ConstantInt</a></div><div class="ttdoc">This is the shared class of boolean and integer constants.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00078">Constants.h:78</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_af09e4096de244d2fb345891328714a63"><div class="ttname"><a href="classllvm_1_1Instruction.html#af09e4096de244d2fb345891328714a63">llvm::Instruction::insertAfter</a></div><div class="ttdeci">void insertAfter(Instruction *InsertPos)</div><div class="ttdoc">Insert an unlinked instruction into a basic block immediately after the specified instruction.</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8cpp_source.html#l00094">Instruction.cpp:94</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_ab4e05d690df389b8b1477c90387b575f"><div class="ttname"><a href="classllvm_1_1Instruction.html#ab4e05d690df389b8b1477c90387b575f">llvm::Instruction::getOpcode</a></div><div class="ttdeci">unsigned getOpcode() const</div><div class="ttdoc">Returns a member of one of the enums like Instruction::Add.</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00168">Instruction.h:168</a></div></div>
<div class="ttc" id="aclassllvm_1_1BlockFrequencyInfo_html"><div class="ttname"><a href="classllvm_1_1BlockFrequencyInfo.html">llvm::BlockFrequencyInfo</a></div><div class="ttdoc">BlockFrequencyInfo pass uses BlockFrequencyInfoImpl implementation to estimate IR basic block frequen...</div><div class="ttdef"><b>Definition:</b> <a href="BlockFrequencyInfo_8h_source.html#l00037">BlockFrequencyInfo.h:37</a></div></div>
<div class="ttc" id="anamespacellvm_html_a3af72f14ea20f2c762c751d2d49e5ea3"><div class="ttname"><a href="namespacellvm.html#a3af72f14ea20f2c762c751d2d49e5ea3">llvm::shouldOptimizeForSize</a></div><div class="ttdeci">bool shouldOptimizeForSize(const MachineFunction *MF, ProfileSummaryInfo *PSI, const MachineBlockFrequencyInfo *BFI, PGSOQueryType QueryType=PGSOQueryType::Other)</div><div class="ttdoc">Returns true if machine function MF is suggested to be size-optimized based on the profile.</div><div class="ttdef"><b>Definition:</b> <a href="MachineSizeOpts_8cpp_source.html#l00183">MachineSizeOpts.cpp:183</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantHoistingPass_html_a778bef41059be563431e55a70168520a"><div class="ttname"><a href="classllvm_1_1ConstantHoistingPass.html#a778bef41059be563431e55a70168520a">llvm::ConstantHoistingPass::runImpl</a></div><div class="ttdeci">bool runImpl(Function &amp;F, TargetTransformInfo &amp;TTI, DominatorTree &amp;DT, BlockFrequencyInfo *BFI, BasicBlock &amp;Entry, ProfileSummaryInfo *PSI)</div><div class="ttdoc">Optimize expensive integer constants in the given function.</div><div class="ttdef"><b>Definition:</b> <a href="ConstantHoisting_8cpp_source.html#l00949">ConstantHoisting.cpp:949</a></div></div>
<div class="ttc" id="aclassllvm_1_1PassRegistry_html_a05a729900b76c89e808c6c3094921b2f"><div class="ttname"><a href="classllvm_1_1PassRegistry.html#a05a729900b76c89e808c6c3094921b2f">llvm::PassRegistry::getPassRegistry</a></div><div class="ttdeci">static PassRegistry * getPassRegistry()</div><div class="ttdoc">getPassRegistry - Access the global registry object, which is automatically initialized at applicatio...</div><div class="ttdef"><b>Definition:</b> <a href="PassRegistry_8cpp_source.html#l00024">PassRegistry.cpp:24</a></div></div>
<div class="ttc" id="astructllvm_1_1consthoist_1_1ConstantUser_html_a11606ea0399b3ef78a7eff94f420035e"><div class="ttname"><a href="structllvm_1_1consthoist_1_1ConstantUser.html#a11606ea0399b3ef78a7eff94f420035e">llvm::consthoist::ConstantUser::OpndIdx</a></div><div class="ttdeci">unsigned OpndIdx</div><div class="ttdef"><b>Definition:</b> <a href="ConstantHoisting_8h_source.html#l00071">ConstantHoisting.h:71</a></div></div>
<div class="ttc" id="aConstants_8h_html"><div class="ttname"><a href="Constants_8h.html">Constants.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_a20cd404d5848ed2897115687638ad66c"><div class="ttname"><a href="namespacellvm.html#a20cd404d5848ed2897115687638ad66c">llvm::createConstantHoistingPass</a></div><div class="ttdeci">FunctionPass * createConstantHoistingPass()</div><div class="ttdef"><b>Definition:</b> <a href="ConstantHoisting_8cpp_source.html#l00137">ConstantHoisting.cpp:137</a></div></div>
<div class="ttc" id="aInlineOrder_8cpp_html_a7ee6f0cb51c3b9056199e9a0001fe8c3a20b4f77bd00b4f63a49ec8e08f3bf6a6"><div class="ttname"><a href="InlineOrder_8cpp.html#a7ee6f0cb51c3b9056199e9a0001fe8c3a20b4f77bd00b4f63a49ec8e08f3bf6a6">InlinePriorityMode::Cost</a></div><div class="ttdeci">@ Cost</div></div>
<div class="ttc" id="aBuiltinGCs_8cpp_html_a6742d2e0a668baf1196ec69e158d5f15"><div class="ttname"><a href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a></div><div class="ttdeci">static GCRegistry::Add&lt; CoreCLRGC &gt; E(&quot;coreclr&quot;, &quot;CoreCLR-compatible GC&quot;)</div></div>
<div class="ttc" id="aclassllvm_1_1User_html"><div class="ttname"><a href="classllvm_1_1User.html">llvm::User</a></div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00044">User.h:44</a></div></div>
<div class="ttc" id="aInstrTypes_8h_html"><div class="ttname"><a href="InstrTypes_8h.html">InstrTypes.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantHoistingPass_html_abe3f0e309e575379e5bae02d1907f394"><div class="ttname"><a href="classllvm_1_1ConstantHoistingPass.html#abe3f0e309e575379e5bae02d1907f394">llvm::ConstantHoistingPass::run</a></div><div class="ttdeci">PreservedAnalyses run(Function &amp;F, FunctionAnalysisManager &amp;AM)</div><div class="ttdef"><b>Definition:</b> <a href="ConstantHoisting_8cpp_source.html#l00988">ConstantHoisting.cpp:988</a></div></div>
<div class="ttc" id="anamespacellvm_html_ab42e397923eec18d3ab8ea88d280b63c"><div class="ttname"><a href="namespacellvm.html#ab42e397923eec18d3ab8ea88d280b63c">llvm::canReplaceOperandWithVariable</a></div><div class="ttdeci">bool canReplaceOperandWithVariable(const Instruction *I, unsigned OpIdx)</div><div class="ttdoc">Given an instruction, is it legal to set operand OpIdx to a non-constant value?</div><div class="ttdef"><b>Definition:</b> <a href="Transforms_2Utils_2Local_8cpp_source.html#l03410">Local.cpp:3410</a></div></div>
<div class="ttc" id="aSIInstrInfo_8cpp_html_a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791"><div class="ttname"><a href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a></div><div class="ttdeci">@ SI</div><div class="ttdef"><b>Definition:</b> <a href="SIInstrInfo_8cpp_source.html#l07993">SIInstrInfo.cpp:7993</a></div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisUsage_html"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html">llvm::AnalysisUsage</a></div><div class="ttdoc">Represent the analysis usage information of a pass.</div><div class="ttdef"><b>Definition:</b> <a href="PassAnalysisSupport_8h_source.html#l00047">PassAnalysisSupport.h:47</a></div></div>
<div class="ttc" id="aclassllvm_1_1DomTreeNodeBase_html_ad809413059b01b7a8eee4de0816e8b46"><div class="ttname"><a href="classllvm_1_1DomTreeNodeBase.html#ad809413059b01b7a8eee4de0816e8b46">llvm::DomTreeNodeBase::children</a></div><div class="ttdeci">iterator_range&lt; iterator &gt; children()</div><div class="ttdef"><b>Definition:</b> <a href="GenericDomTree_8h_source.html#l00084">GenericDomTree.h:84</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_ab01d8694a759a934e01f1c558c3ce862"><div class="ttname"><a href="classllvm_1_1APInt.html#ab01d8694a759a934e01f1c558c3ce862">llvm::APInt::getLimitedValue</a></div><div class="ttdeci">uint64_t getLimitedValue(uint64_t Limit=UINT64_MAX) const</div><div class="ttdoc">If this value is smaller than the specified limit, return it, otherwise return the limit value.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00463">APInt.h:463</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a1bc022868b23918efa44df511f4d5b61"><div class="ttname"><a href="classllvm_1_1Type.html#a1bc022868b23918efa44df511f4d5b61">llvm::Type::isVectorTy</a></div><div class="ttdeci">bool isVectorTy() const</div><div class="ttdoc">True if this is an instance of VectorType.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00258">Type.h:258</a></div></div>
<div class="ttc" id="anamespacefalse_html"><div class="ttname"><a href="namespacefalse.html">false</a></div><div class="ttdef"><b>Definition:</b> <a href="StackSlotColoring_8cpp_source.html#l00141">StackSlotColoring.cpp:141</a></div></div>
<div class="ttc" id="aclassllvm_1_1IntegerType_html"><div class="ttname"><a href="classllvm_1_1IntegerType.html">llvm::IntegerType</a></div><div class="ttdoc">Class to represent integer types.</div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00040">DerivedTypes.h:40</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html"><div class="ttname"><a href="classllvm_1_1Instruction.html">llvm::Instruction</a></div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00041">Instruction.h:41</a></div></div>
<div class="ttc" id="anamespacellvm_html_aec7c967a5416fa6e154433965357a50ea089e7eb4db258e05f70eef4ed5aa10bb"><div class="ttname"><a href="namespacellvm.html#aec7c967a5416fa6e154433965357a50ea089e7eb4db258e05f70eef4ed5aa10bb">llvm::PGSOQueryType::IRPass</a></div><div class="ttdeci">@ IRPass</div></div>
<div class="ttc" id="aclassllvm_1_1DominatorTreeWrapperPass_html"><div class="ttname"><a href="classllvm_1_1DominatorTreeWrapperPass.html">llvm::DominatorTreeWrapperPass</a></div><div class="ttdoc">Legacy analysis pass which computes a DominatorTree.</div><div class="ttdef"><b>Definition:</b> <a href="Dominators_8h_source.html#l00314">Dominators.h:314</a></div></div>
<div class="ttc" id="anamespacellvm_html_a0bf75467957937ad23ad7be19f489934"><div class="ttname"><a href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">llvm::STATISTIC</a></div><div class="ttdeci">STATISTIC(NumFunctions, &quot;Total number of functions&quot;)</div></div>
<div class="ttc" id="aclassllvm_1_1ConstantInt_html_a969709dd49c28865a482d8b870f87c46"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">llvm::ConstantInt::get</a></div><div class="ttdeci">static Constant * get(Type *Ty, uint64_t V, bool IsSigned=false)</div><div class="ttdoc">If Ty is a vector type, return a Constant with a splat of the given value.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00887">Constants.cpp:887</a></div></div>
<div class="ttc" id="aSmallPtrSet_8h_html"><div class="ttname"><a href="SmallPtrSet_8h.html">SmallPtrSet.h</a></div></div>
<div class="ttc" id="aConstantHoisting_8h_html"><div class="ttname"><a href="ConstantHoisting_8h.html">ConstantHoisting.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1BlockFrequencyAnalysis_html"><div class="ttname"><a href="classllvm_1_1BlockFrequencyAnalysis.html">llvm::BlockFrequencyAnalysis</a></div><div class="ttdoc">Analysis pass which computes BlockFrequencyInfo.</div><div class="ttdef"><b>Definition:</b> <a href="BlockFrequencyInfo_8h_source.html#l00112">BlockFrequencyInfo.h:112</a></div></div>
<div class="ttc" id="aclassllvm_1_1SetVector_html_aaf9ee38b9973681c1720aaf03af3a069"><div class="ttname"><a href="classllvm_1_1SetVector.html#aaf9ee38b9973681c1720aaf03af3a069">llvm::SetVector::empty</a></div><div class="ttdeci">bool empty() const</div><div class="ttdoc">Determine if the SetVector is empty or not.</div><div class="ttdef"><b>Definition:</b> <a href="SetVector_8h_source.html#l00072">SetVector.h:72</a></div></div>
<div class="ttc" id="anamespacellvm_1_1CallingConv_html_a188c0836f8c3528401f1c236fd93b977"><div class="ttname"><a href="namespacellvm_1_1CallingConv.html#a188c0836f8c3528401f1c236fd93b977">llvm::CallingConv::ID</a></div><div class="ttdeci">unsigned ID</div><div class="ttdoc">LLVM IR allows to use arbitrary numbers as calling convention identifiers.</div><div class="ttdef"><b>Definition:</b> <a href="CallingConv_8h_source.html#l00024">CallingConv.h:24</a></div></div>
<div class="ttc" id="astructllvm_1_1consthoist_1_1ConstantInfo_html_a50ee843d46243d34f678cae647a7bdf0"><div class="ttname"><a href="structllvm_1_1consthoist_1_1ConstantInfo.html#a50ee843d46243d34f678cae647a7bdf0">llvm::consthoist::ConstantInfo::BaseExpr</a></div><div class="ttdeci">ConstantExpr * BaseExpr</div><div class="ttdef"><b>Definition:</b> <a href="ConstantHoisting_8h_source.html#l00117">ConstantHoisting.h:117</a></div></div>
<div class="ttc" id="astructllvm_1_1consthoist_1_1ConstantUser_html"><div class="ttname"><a href="structllvm_1_1consthoist_1_1ConstantUser.html">llvm::consthoist::ConstantUser</a></div><div class="ttdoc">Keeps track of the user of a constant and the operand index where the constant is used.</div><div class="ttdef"><b>Definition:</b> <a href="ConstantHoisting_8h_source.html#l00069">ConstantHoisting.h:69</a></div></div>
<div class="ttc" id="aPassSupport_8h_html_a74ce8276b89067e806f67c45a6d92575"><div class="ttname"><a href="PassSupport_8h.html#a74ce8276b89067e806f67c45a6d92575">INITIALIZE_PASS_END</a></div><div class="ttdeci">#define INITIALIZE_PASS_END(passName, arg, name, cfg, analysis)</div><div class="ttdef"><b>Definition:</b> <a href="PassSupport_8h_source.html#l00059">PassSupport.h:59</a></div></div>
<div class="ttc" id="aclassllvm_1_1ProfileSummaryInfo_html"><div class="ttname"><a href="classllvm_1_1ProfileSummaryInfo.html">llvm::ProfileSummaryInfo</a></div><div class="ttdoc">Analysis providing profile information.</div><div class="ttdef"><b>Definition:</b> <a href="ProfileSummaryInfo_8h_source.html#l00040">ProfileSummaryInfo.h:40</a></div></div>
<div class="ttc" id="aADT_2tmp_8txt_html_a07ed0bfaa124c15897944fe3eaa971ab"><div class="ttname"><a href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a></div><div class="ttdeci">Class for arbitrary precision integers APInt is a functional replacement for common case unsigned integer type like unsigned long or uint64_t</div><div class="ttdef"><b>Definition:</b> <a href="ADT_2tmp_8txt_source.html#l00001">tmp.txt:1</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantExpr_html_a2c9fe4fbe6ac4c180d6d2547c05d33c9"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#a2c9fe4fbe6ac4c180d6d2547c05d33c9">llvm::ConstantExpr::isCast</a></div><div class="ttdeci">bool isCast() const</div><div class="ttdoc">Return true if this is a convert constant expression.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l01444">Constants.cpp:1444</a></div></div>
<div class="ttc" id="astructllvm_1_1consthoist_1_1ConstantInfo_html_ac38b380ae0d9a5b94284de3194f95343"><div class="ttname"><a href="structllvm_1_1consthoist_1_1ConstantInfo.html#ac38b380ae0d9a5b94284de3194f95343">llvm::consthoist::ConstantInfo::BaseInt</a></div><div class="ttdeci">ConstantInt * BaseInt</div><div class="ttdef"><b>Definition:</b> <a href="ConstantHoisting_8h_source.html#l00116">ConstantHoisting.h:116</a></div></div>
<div class="ttc" id="aBasicBlock_8h_html"><div class="ttname"><a href="BasicBlock_8h.html">BasicBlock.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1cl_1_1opt_html"><div class="ttname"><a href="classllvm_1_1cl_1_1opt.html">llvm::cl::opt&lt; bool &gt;</a></div></div>
<div class="ttc" id="aclassllvm_1_1StoreInst_html"><div class="ttname"><a href="classllvm_1_1StoreInst.html">llvm::StoreInst</a></div><div class="ttdoc">An instruction for storing to memory.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00301">Instructions.h:301</a></div></div>
<div class="ttc" id="aclassllvm_1_1BlockFrequency_html"><div class="ttname"><a href="classllvm_1_1BlockFrequency.html">llvm::BlockFrequency</a></div><div class="ttdef"><b>Definition:</b> <a href="BlockFrequency_8h_source.html#l00023">BlockFrequency.h:23</a></div></div>
<div class="ttc" id="aConstantHoisting_8cpp_html_a0b724dd85384f743a87c3815aace6037"><div class="ttname"><a href="ConstantHoisting_8cpp.html#a0b724dd85384f743a87c3815aace6037">updateOperand</a></div><div class="ttdeci">static bool updateOperand(Instruction *Inst, unsigned Idx, Instruction *Mat)</div><div class="ttdoc">Updates the operand at Idx in instruction Inst with the result of instruction Mat.</div><div class="ttdef"><b>Definition:</b> <a href="ConstantHoisting_8cpp_source.html#l00729">ConstantHoisting.cpp:729</a></div></div>
<div class="ttc" id="aclassllvm_1_1Constant_html"><div class="ttname"><a href="classllvm_1_1Constant.html">llvm::Constant</a></div><div class="ttdoc">This is an important base class in LLVM.</div><div class="ttdef"><b>Definition:</b> <a href="Constant_8h_source.html#l00041">Constant.h:41</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_ae6b978645b8ac72d1a35e1298ffdd4f0"><div class="ttname"><a href="classllvm_1_1Instruction.html#ae6b978645b8ac72d1a35e1298ffdd4f0">llvm::Instruction::eraseFromParent</a></div><div class="ttdeci">SymbolTableList&lt; Instruction &gt;::iterator eraseFromParent()</div><div class="ttdoc">This method unlinks 'this' from the containing basic block and deletes it.</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8cpp_source.html#l00082">Instruction.cpp:82</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AMDGPU_1_1Hwreg_html_a6110fc30bc7311a6cf99814530362e21"><div class="ttname"><a href="namespacellvm_1_1AMDGPU_1_1Hwreg.html#a6110fc30bc7311a6cf99814530362e21">llvm::AMDGPU::Hwreg::Offset</a></div><div class="ttdeci">Offset</div><div class="ttdef"><b>Definition:</b> <a href="SIDefines_8h_source.html#l00432">SIDefines.h:432</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseMapBase_html_adf4e7878fc0b3b8dcde545178564190d"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#adf4e7878fc0b3b8dcde545178564190d">llvm::DenseMapBase&lt; DenseMap&lt; KeyT, ValueT, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;, KeyT, ValueT, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00110">DenseMap.h:110</a></div></div>
<div class="ttc" id="aclassllvm_1_1DomTreeNodeBase_html_a6a15a030098342e06ea73e1241d614c9"><div class="ttname"><a href="classllvm_1_1DomTreeNodeBase.html#a6a15a030098342e06ea73e1241d614c9">llvm::DomTreeNodeBase::getBlock</a></div><div class="ttdeci">NodeT * getBlock() const</div><div class="ttdef"><b>Definition:</b> <a href="GenericDomTree_8h_source.html#l00089">GenericDomTree.h:89</a></div></div>
<div class="ttc" id="aConstantHoisting_8cpp_html_a84a4f80b4c2717978208d98888fd7cdb"><div class="ttname"><a href="ConstantHoisting_8cpp.html#a84a4f80b4c2717978208d98888fd7cdb">MinNumOfDependentToRebase</a></div><div class="ttdeci">static cl::opt&lt; unsigned &gt; MinNumOfDependentToRebase(&quot;consthoist-min-num-to-rebase&quot;, cl::desc(&quot;Do not rebase if number of dependent constants of a Base is less &quot; &quot;than this number.&quot;), cl::init(0), cl::Hidden)</div></div>
<div class="ttc" id="aProfileSummaryInfo_8h_html"><div class="ttname"><a href="ProfileSummaryInfo_8h.html">ProfileSummaryInfo.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfoWrapperPass_html"><div class="ttname"><a href="classllvm_1_1TargetTransformInfoWrapperPass.html">llvm::TargetTransformInfoWrapperPass</a></div><div class="ttdoc">Wrapper pass for TargetTransformInfo.</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l02682">TargetTransformInfo.h:2682</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalValue_html_a9e1fc23a17e97d2d1732e753ae9251ac"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#a9e1fc23a17e97d2d1732e753ae9251ac">llvm::GlobalValue::getParent</a></div><div class="ttdeci">Module * getParent()</div><div class="ttdoc">Get the module that this global value is contained inside of...</div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00652">GlobalValue.h:652</a></div></div>
<div class="ttc" id="aSVEIntrinsicOpts_8cpp_html_a2bb87eb1bcbc74783a83ae945eb8fa36"><div class="ttname"><a href="SVEIntrinsicOpts_8cpp.html#a2bb87eb1bcbc74783a83ae945eb8fa36">INITIALIZE_PASS_DEPENDENCY</a></div><div class="ttdeci">INITIALIZE_PASS_DEPENDENCY(DominatorTreeWrapperPass)</div></div>
<div class="ttc" id="alib_2Target_2ARM_2README_8txt_html_ad3a99906764c35b2694ae90fa57744a5"><div class="ttname"><a href="lib_2Target_2ARM_2README_8txt.html#ad3a99906764c35b2694ae90fa57744a5">move</a></div><div class="ttdeci">compiles ldr LCPI1_0 ldr ldr mov lsr tst moveq r1 ldr LCPI1_1 and r0 bx lr It would be better to do something like to fold the shift into the conditional move</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2ARM_2README_8txt_source.html#l00546">README.txt:546</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseMap_html"><div class="ttname"><a href="classllvm_1_1DenseMap.html">llvm::DenseMap</a></div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00714">DenseMap.h:714</a></div></div>
<div class="ttc" id="aMD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00058">MD5.cpp:58</a></div></div>
<div class="ttc" id="anamespacellvm_1_1cl_html_a10a041239ae1870cfcc064bfaa79fb65"><div class="ttname"><a href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">llvm::cl::init</a></div><div class="ttdeci">initializer&lt; Ty &gt; init(const Ty &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00445">CommandLine.h:445</a></div></div>
<div class="ttc" id="aclassllvm_1_1ProfileSummaryInfoWrapperPass_html"><div class="ttname"><a href="classllvm_1_1ProfileSummaryInfoWrapperPass.html">llvm::ProfileSummaryInfoWrapperPass</a></div><div class="ttdoc">An analysis pass based on legacy pass manager to deliver ProfileSummaryInfo.</div><div class="ttdef"><b>Definition:</b> <a href="ProfileSummaryInfo_8h_source.html#l00194">ProfileSummaryInfo.h:194</a></div></div>
<div class="ttc" id="aclassllvm_1_1PointerType_html"><div class="ttname"><a href="classllvm_1_1PointerType.html">llvm::PointerType</a></div><div class="ttdoc">Class to represent pointers.</div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00632">DerivedTypes.h:632</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_ae8f5bf5cc06f696b52c709677df00fbf"><div class="ttname"><a href="classllvm_1_1Instruction.html#ae8f5bf5cc06f696b52c709677df00fbf">llvm::Instruction::setDebugLoc</a></div><div class="ttdeci">void setDebugLoc(DebugLoc Loc)</div><div class="ttdoc">Set the debug location information for this instruction.</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00355">Instruction.h:355</a></div></div>
<div class="ttc" id="aSILowerControlFlow_8cpp_html_a4868c5d81c5ccc98c47aeab6244346a0"><div class="ttname"><a href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a></div><div class="ttdeci">assert(ImpDefSCC.getReg()==AMDGPU::SCC &amp;&amp;ImpDefSCC.isDef())</div></div>
<div class="ttc" id="aclassllvm_1_1DominatorTree_html_a1a70f2c359aadd76a72aaaede16aca4a"><div class="ttname"><a href="classllvm_1_1DominatorTree.html#a1a70f2c359aadd76a72aaaede16aca4a">llvm::DominatorTree::isReachableFromEntry</a></div><div class="ttdeci">bool isReachableFromEntry(const Use &amp;U) const</div><div class="ttdoc">Provide an overload for a Use.</div><div class="ttdef"><b>Definition:</b> <a href="Dominators_8cpp_source.html#l00335">Dominators.cpp:335</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfo_html_a7f5c32f4b5bd13b1279016cd9a6db37b"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html#a7f5c32f4b5bd13b1279016cd9a6db37b">llvm::TargetTransformInfo::isLegalAddImmediate</a></div><div class="ttdeci">bool isLegalAddImmediate(int64_t Imm) const</div><div class="ttdoc">Return true if the specified immediate is legal add immediate, that is the target has add instruction...</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8cpp_source.html#l00353">TargetTransformInfo.cpp:353</a></div></div>
<div class="ttc" id="anamespacellvm_html_aa0d69e81725c10fa5407f0bf34462068"><div class="ttname"><a href="namespacellvm.html#aa0d69e81725c10fa5407f0bf34462068">llvm::TTI</a></div><div class="ttdeci">TargetTransformInfo TTI</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l00191">TargetTransformInfo.h:191</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AMDGPU_1_1IsaInfo_html_ab6e8b39aa26af871d8ede5fa8c791ee6ad15305d7a4e34e02489c74a5ef542f36"><div class="ttname"><a href="namespacellvm_1_1AMDGPU_1_1IsaInfo.html#ab6e8b39aa26af871d8ede5fa8c791ee6ad15305d7a4e34e02489c74a5ef542f36">llvm::AMDGPU::IsaInfo::TargetIDSetting::Off</a></div><div class="ttdeci">@ Off</div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSetImpl_html_a1f475b0df44ebd7169e720fa1bf9169e"><div class="ttname"><a href="classllvm_1_1SmallPtrSetImpl.html#a1f475b0df44ebd7169e720fa1bf9169e">llvm::SmallPtrSetImpl::count</a></div><div class="ttdeci">size_type count(ConstPtrType Ptr) const</div><div class="ttdoc">count - Return 1 if the specified pointer is in the set, 0 otherwise.</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00383">SmallPtrSet.h:383</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html"><div class="ttname"><a href="classllvm_1_1APInt.html">llvm::APInt</a></div><div class="ttdoc">Class for arbitrary precision integers.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00075">APInt.h:75</a></div></div>
<div class="ttc" id="aclassllvm_1_1User_html_a5fa9b8e1842b354f64c1ba6be0a4a17f"><div class="ttname"><a href="classllvm_1_1User.html#a5fa9b8e1842b354f64c1ba6be0a4a17f">llvm::User::setOperand</a></div><div class="ttdeci">void setOperand(unsigned i, Value *Val)</div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00174">User.h:174</a></div></div>
<div class="ttc" id="aclassllvm_1_1SetVector_html_a72d928b7fc2c5f2d56c6ac0265fd9c6e"><div class="ttname"><a href="classllvm_1_1SetVector.html#a72d928b7fc2c5f2d56c6ac0265fd9c6e">llvm::SetVector::insert</a></div><div class="ttdeci">bool insert(const value_type &amp;X)</div><div class="ttdoc">Insert a new element into the SetVector.</div><div class="ttdef"><b>Definition:</b> <a href="SetVector_8h_source.html#l00141">SetVector.h:141</a></div></div>
<div class="ttc" id="aclassllvm_1_1GetElementPtrInst_html_a74c47d18ecd4ca3399785e6ae07134dc"><div class="ttname"><a href="classllvm_1_1GetElementPtrInst.html#a74c47d18ecd4ca3399785e6ae07134dc">llvm::GetElementPtrInst::Create</a></div><div class="ttdeci">static GetElementPtrInst * Create(Type *PointeeType, Value *Ptr, ArrayRef&lt; Value * &gt; IdxList, const Twine &amp;NameStr=&quot;&quot;, Instruction *InsertBefore=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00966">Instructions.h:966</a></div></div>
<div class="ttc" id="aclassllvm_1_1ProfileSummaryAnalysis_html"><div class="ttname"><a href="classllvm_1_1ProfileSummaryAnalysis.html">llvm::ProfileSummaryAnalysis</a></div><div class="ttdoc">An analysis pass based on the new PM to deliver ProfileSummaryInfo.</div><div class="ttdef"><b>Definition:</b> <a href="ProfileSummaryInfo_8h_source.html#l00212">ProfileSummaryInfo.h:212</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a0a4d51e372293abe5e5f6dac133e80a6"><div class="ttname"><a href="classllvm_1_1Instruction.html#a0a4d51e372293abe5e5f6dac133e80a6">llvm::Instruction::clone</a></div><div class="ttdeci">Instruction * clone() const</div><div class="ttdoc">Create a copy of 'this' instruction that is identical in all ways except the following:</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8cpp_source.html#l00903">Instruction.cpp:903</a></div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisUsage_html_af11a6ebf7ab3c388234cb6d5378439a3"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html#af11a6ebf7ab3c388234cb6d5378439a3">llvm::AnalysisUsage::setPreservesCFG</a></div><div class="ttdeci">void setPreservesCFG()</div><div class="ttdoc">This function should be called by the pass, iff they do not:</div><div class="ttdef"><b>Definition:</b> <a href="Pass_8cpp_source.html#l00265">Pass.cpp:265</a></div></div>
<div class="ttc" id="aclassllvm_1_1StringRef_html"><div class="ttname"><a href="classllvm_1_1StringRef.html">llvm::StringRef</a></div><div class="ttdoc">StringRef - Represent a constant reference to a string, i.e.</div><div class="ttdef"><b>Definition:</b> <a href="StringRef_8h_source.html#l00050">StringRef.h:50</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfo_html_a706f223f760b55668fbae74202b816bba7f80055e1969cb850739546467460ad8"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html#a706f223f760b55668fbae74202b816bba7f80055e1969cb850739546467460ad8">llvm::TargetTransformInfo::TCK_SizeAndLatency</a></div><div class="ttdeci">@ TCK_SizeAndLatency</div><div class="ttdoc">The weighted sum of size and latency.</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l00245">TargetTransformInfo.h:245</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_a6393a2d4fe7e10b28a0dcc35f881567b"><div class="ttname"><a href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">llvm::Value::getType</a></div><div class="ttdeci">Type * getType() const</div><div class="ttdoc">All values are typed, get the type of this value.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00255">Value.h:255</a></div></div>
<div class="ttc" id="aclassllvm_1_1CFGAnalyses_html"><div class="ttname"><a href="classllvm_1_1CFGAnalyses.html">llvm::CFGAnalyses</a></div><div class="ttdoc">Represents analyses that only rely on functions' control flow.</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00113">PassManager.h:113</a></div></div>
<div class="ttc" id="aConstantHoisting_8cpp_html_a93f57b76764f70277aa130c9b4604eac"><div class="ttname"><a href="ConstantHoisting_8cpp.html#a93f57b76764f70277aa130c9b4604eac">INITIALIZE_PASS_BEGIN</a></div><div class="ttdeci">INITIALIZE_PASS_BEGIN(ConstantHoistingLegacyPass, &quot;consthoist&quot;, &quot;Constant Hoisting&quot;, false, false) INITIALIZE_PASS_END(ConstantHoistingLegacyPass</div></div>
<div class="ttc" id="aAArch64SLSHardening_8cpp_html_ad467c4ab9119043f9b7750ab986be61a"><div class="ttname"><a href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a></div><div class="ttdeci">MachineBasicBlock MachineBasicBlock::iterator DebugLoc DL</div><div class="ttdef"><b>Definition:</b> <a href="AArch64SLSHardening_8cpp_source.html#l00076">AArch64SLSHardening.cpp:76</a></div></div>
<div class="ttc" id="alib_2Target_2ARM_2README_8txt_html_a1b45f45820a60c09244a87eb59824aec"><div class="ttname"><a href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a></div><div class="ttdeci">add sub stmia L5 ldr r0 bl L_printf $stub Instead of a and a wouldn t it be better to do three moves *Return an aggregate type is even return S</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2ARM_2README_8txt_source.html#l00210">README.txt:210</a></div></div>
<div class="ttc" id="aRISCVRedundantCopyElimination_8cpp_html_a77c69067ae8279bc00ab8757731e90d7"><div class="ttname"><a href="RISCVRedundantCopyElimination_8cpp.html#a77c69067ae8279bc00ab8757731e90d7">CC</a></div><div class="ttdeci">auto CC</div><div class="ttdef"><b>Definition:</b> <a href="RISCVRedundantCopyElimination_8cpp_source.html#l00079">RISCVRedundantCopyElimination.cpp:79</a></div></div>
<div class="ttc" id="aclassllvm_1_1CastInst_html"><div class="ttname"><a href="classllvm_1_1CastInst.html">llvm::CastInst</a></div><div class="ttdoc">This is the base class for all instructions that perform data casts.</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00428">InstrTypes.h:428</a></div></div>
<div class="ttc" id="aBlockFrequencyInfo_8h_html"><div class="ttname"><a href="BlockFrequencyInfo_8h.html">BlockFrequencyInfo.h</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AMDGPUISD_html_a739d53294bc38cd6b0b23332f9994c0eafbca76f7875e080d97cee761de04d996"><div class="ttname"><a href="namespacellvm_1_1AMDGPUISD.html#a739d53294bc38cd6b0b23332f9994c0eafbca76f7875e080d97cee761de04d996">llvm::AMDGPUISD::BFI</a></div><div class="ttdeci">@ BFI</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPUISelLowering_8h_source.html#l00441">AMDGPUISelLowering.h:441</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_adb5c319f5905c1d3ca9eb5df546388c5"><div class="ttname"><a href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">llvm::Value::getName</a></div><div class="ttdeci">StringRef getName() const</div><div class="ttdoc">Return a constant reference to the value's name.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00308">Value.cpp:308</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoadInst_html"><div class="ttname"><a href="classllvm_1_1LoadInst.html">llvm::LoadInst</a></div><div class="ttdoc">An instruction for reading from memory.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00177">Instructions.h:177</a></div></div>
<div class="ttc" id="astructllvm_1_1consthoist_1_1ConstantInfo_html"><div class="ttname"><a href="structllvm_1_1consthoist_1_1ConstantInfo.html">llvm::consthoist::ConstantInfo</a></div><div class="ttdoc">A base constant and all its rebased constants.</div><div class="ttdef"><b>Definition:</b> <a href="ConstantHoisting_8h_source.html#l00112">ConstantHoisting.h:112</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseMapBase_html_a99f811d53704275b4158c62a2dd138d9"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#a99f811d53704275b4158c62a2dd138d9">llvm::DenseMapBase&lt; DenseMap&lt; KeyT, ValueT, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;, KeyT, ValueT, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;::insert</a></div><div class="ttdeci">std::pair&lt; iterator, bool &gt; insert(const std::pair&lt; KeyT, ValueT &gt; &amp;KV)</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00207">DenseMap.h:207</a></div></div>
<div class="ttc" id="aEntryExitInstrumenter_8cpp_html_a3985f1f39349428d17f0d2b81ebc6349"><div class="ttname"><a href="EntryExitInstrumenter_8cpp.html#a3985f1f39349428d17f0d2b81ebc6349">runOnFunction</a></div><div class="ttdeci">static bool runOnFunction(Function &amp;F, bool PostInlining)</div><div class="ttdef"><b>Definition:</b> <a href="EntryExitInstrumenter_8cpp_source.html#l00085">EntryExitInstrumenter.cpp:85</a></div></div>
<div class="ttc" id="aConstantHoisting_8cpp_html_a48a060decf79d58559a8e9e28df764f0"><div class="ttname"><a href="ConstantHoisting_8cpp.html#a48a060decf79d58559a8e9e28df764f0">findBestInsertionSet</a></div><div class="ttdeci">static void findBestInsertionSet(DominatorTree &amp;DT, BlockFrequencyInfo &amp;BFI, BasicBlock *Entry, SetVector&lt; BasicBlock * &gt; &amp;BBs)</div><div class="ttdoc">Given BBs as input, find another set of BBs which collectively dominates BBs and have the minimal sum...</div><div class="ttdef"><b>Definition:</b> <a href="ConstantHoisting_8cpp_source.html#l00212">ConstantHoisting.cpp:212</a></div></div>
<div class="ttc" id="anamespacellvm_1_1NVPTX_1_1PTXLdStInstCode_html_a91119cbee2be000c528a690252aee07ca24244a27b634ef3e256ab3c64c6fecd4"><div class="ttname"><a href="namespacellvm_1_1NVPTX_1_1PTXLdStInstCode.html#a91119cbee2be000c528a690252aee07ca24244a27b634ef3e256ab3c64c6fecd4">llvm::NVPTX::PTXLdStInstCode::V2</a></div><div class="ttdeci">@ V2</div><div class="ttdef"><b>Definition:</b> <a href="NVPTX_8h_source.html#l00124">NVPTX.h:124</a></div></div>
<div class="ttc" id="anamespacellvm_html_a076f93c387f454f0db13d4bc7d4e7f9c"><div class="ttname"><a href="namespacellvm.html#a076f93c387f454f0db13d4bc7d4e7f9c">llvm::stable_sort</a></div><div class="ttdeci">void stable_sort(R &amp;&amp;Range)</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l01948">STLExtras.h:1948</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantExpr_html"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html">llvm::ConstantExpr</a></div><div class="ttdoc">A constant value that is initialized with an expression using other constant values.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00998">Constants.h:998</a></div></div>
<div class="ttc" id="anamespacellvm_html_afa30e0e80b9349cc68a05562ac303461"><div class="ttname"><a href="namespacellvm.html#afa30e0e80b9349cc68a05562ac303461">llvm::initializeConstantHoistingLegacyPassPass</a></div><div class="ttdeci">void initializeConstantHoistingLegacyPassPass(PassRegistry &amp;)</div></div>
<div class="ttc" id="aclassllvm_1_1PreservedAnalyses_html_a1258a1ff55557c27684010ebd7283712"><div class="ttname"><a href="classllvm_1_1PreservedAnalyses.html#a1258a1ff55557c27684010ebd7283712">llvm::PreservedAnalyses::all</a></div><div class="ttdeci">static PreservedAnalyses all()</div><div class="ttdoc">Construct a special preserved set that preserves all passes.</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00158">PassManager.h:158</a></div></div>
<div class="ttc" id="aCasting_8h_html"><div class="ttname"><a href="Casting_8h.html">Casting.h</a></div></div>
<div class="ttc" id="aFunction_8h_html"><div class="ttname"><a href="Function_8h.html">Function.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1SetVector_html_a21c2c6ae5ec23004dc4020eacf83bbce"><div class="ttname"><a href="classllvm_1_1SetVector.html#a21c2c6ae5ec23004dc4020eacf83bbce">llvm::SetVector::count</a></div><div class="ttdeci">size_type count(const key_type &amp;key) const</div><div class="ttdoc">Count the number of elements of a given key in the SetVector.</div><div class="ttdef"><b>Definition:</b> <a href="SetVector_8h_source.html#l00208">SetVector.h:208</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a5d3d315f678bc76e43b27d18e5d72829"><div class="ttname"><a href="classllvm_1_1Instruction.html#a5d3d315f678bc76e43b27d18e5d72829">llvm::Instruction::isEHPad</a></div><div class="ttdeci">bool isEHPad() const</div><div class="ttdoc">Return true if the instruction is a variety of EH-block.</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00685">Instruction.h:685</a></div></div>
<div class="ttc" id="aExpandLargeDivRem_8cpp_html_ae64f9cd0977a8b47570154312540d7d2"><div class="ttname"><a href="ExpandLargeDivRem_8cpp.html#ae64f9cd0977a8b47570154312540d7d2">runImpl</a></div><div class="ttdeci">static bool runImpl(Function &amp;F, const TargetLowering &amp;TLI)</div><div class="ttdef"><b>Definition:</b> <a href="ExpandLargeDivRem_8cpp_source.html#l00056">ExpandLargeDivRem.cpp:56</a></div></div>
<div class="ttc" id="anamespacellvm_1_1MCID_html_ab357441fcd1ea1f9b0d27c12700f6023a2b016c207343046b2bac45e69e76dcec"><div class="ttname"><a href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a2b016c207343046b2bac45e69e76dcec">llvm::MCID::Add</a></div><div class="ttdeci">@ Add</div><div class="ttdef"><b>Definition:</b> <a href="MCInstrDesc_8h_source.html#l00186">MCInstrDesc.h:186</a></div></div>
<div class="ttc" id="anamespacellvm_1_1logicalview_html_a9696bc411b0a7022c2cc78bff5173cefa157d034f9c98a305eb73776582550027"><div class="ttname"><a href="namespacellvm_1_1logicalview.html#a9696bc411b0a7022c2cc78bff5173cefa157d034f9c98a305eb73776582550027">llvm::logicalview::LVAttributeKind::Inserted</a></div><div class="ttdeci">@ Inserted</div></div>
<div class="ttc" id="astructllvm_1_1consthoist_1_1ConstantUser_html_af6553e392174b2ad889153bd256e63ee"><div class="ttname"><a href="structllvm_1_1consthoist_1_1ConstantUser.html#af6553e392174b2ad889153bd256e63ee">llvm::consthoist::ConstantUser::Inst</a></div><div class="ttdeci">Instruction * Inst</div><div class="ttdef"><b>Definition:</b> <a href="ConstantHoisting_8h_source.html#l00070">ConstantHoisting.h:70</a></div></div>
<div class="ttc" id="aclassllvm_1_1DominatorTreeAnalysis_html"><div class="ttname"><a href="classllvm_1_1DominatorTreeAnalysis.html">llvm::DominatorTreeAnalysis</a></div><div class="ttdoc">Analysis pass which computes a DominatorTree.</div><div class="ttdef"><b>Definition:</b> <a href="Dominators_8h_source.html#l00279">Dominators.h:279</a></div></div>
<div class="ttc" id="aInstructions_8h_html"><div class="ttname"><a href="Instructions_8h.html">Instructions.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1PreservedAnalyses_html_a937c42f77e161349ce0f999e448c7027"><div class="ttname"><a href="classllvm_1_1PreservedAnalyses.html#a937c42f77e161349ce0f999e448c7027">llvm::PreservedAnalyses::preserveSet</a></div><div class="ttdeci">void preserveSet()</div><div class="ttdoc">Mark an analysis set as preserved.</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00188">PassManager.h:188</a></div></div>
<div class="ttc" id="aclassllvm_1_1User_html_addec638786f763d967811b45cb662f1f"><div class="ttname"><a href="classllvm_1_1User.html#addec638786f763d967811b45cb662f1f">llvm::User::getNumOperands</a></div><div class="ttdeci">unsigned getNumOperands() const</div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00191">User.h:191</a></div></div>
<div class="ttc" id="aSmallVector_8h_html"><div class="ttname"><a href="SmallVector_8h.html">SmallVector.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_ab4f3bf98b5054831b608852e33427814"><div class="ttname"><a href="classllvm_1_1Instruction.html#ab4f3bf98b5054831b608852e33427814">llvm::Instruction::getDebugLoc</a></div><div class="ttdeci">const DebugLoc &amp; getDebugLoc() const</div><div class="ttdoc">Return the debug location for this node as a DebugLoc.</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00358">Instruction.h:358</a></div></div>
<div class="ttc" id="aConstantHoisting_8cpp_html_ad7c40f6d655ecf11953a69676430f0e3"><div class="ttname"><a href="ConstantHoisting_8cpp.html#ad7c40f6d655ecf11953a69676430f0e3">calculateOffsetDiff</a></div><div class="ttdeci">static std::optional&lt; APInt &gt; calculateOffsetDiff(const APInt &amp;V1, const APInt &amp;V2)</div><div class="ttdef"><b>Definition:</b> <a href="ConstantHoisting_8cpp_source.html#l00534">ConstantHoisting.cpp:534</a></div></div>
<div class="ttc" id="aDominators_8h_html"><div class="ttname"><a href="Dominators_8h.html">Dominators.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a1a7f07aaef6a3bee130bf0e0f0536802"><div class="ttname"><a href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">llvm::Instruction::getParent</a></div><div class="ttdeci">const BasicBlock * getParent() const</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00090">Instruction.h:90</a></div></div>
<div class="ttc" id="aTargetTransformInfo_8h_html"><div class="ttname"><a href="TargetTransformInfo_8h.html">TargetTransformInfo.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseMapBase_html_ae292a4b96e7f74eb95a4176ddba7b821"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#ae292a4b96e7f74eb95a4176ddba7b821">llvm::DenseMapBase&lt; DenseMap&lt; KeyT, ValueT, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;, KeyT, ValueT, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;::reserve</a></div><div class="ttdeci">void reserve(size_type NumEntries)</div><div class="ttdoc">Grow the densemap so that it can contain at least NumEntries items before resizing again.</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00103">DenseMap.h:103</a></div></div>
<div class="ttc" id="astructllvm_1_1consthoist_1_1RebasedConstantInfo_html"><div class="ttname"><a href="structllvm_1_1consthoist_1_1RebasedConstantInfo.html">llvm::consthoist::RebasedConstantInfo</a></div><div class="ttdoc">This represents a constant that has been rebased with respect to a base constant.</div><div class="ttdef"><b>Definition:</b> <a href="ConstantHoisting_8h_source.html#l00100">ConstantHoisting.h:100</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a8de021e28a3c04c9216ad8decf104f02"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">llvm::BasicBlock::getTerminator</a></div><div class="ttdeci">const Instruction * getTerminator() const LLVM_READONLY</div><div class="ttdoc">Returns the terminator instruction if the block is well formed or null if the block is not well forme...</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00127">BasicBlock.h:127</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html">llvm::SmallVectorImpl&lt; consthoist::ConstantInfo &gt;</a></div></div>
<div class="ttc" id="anamespacellvm_html_a6b0ac1fa4f05de76413c5e0ca6334035"><div class="ttname"><a href="namespacellvm.html#a6b0ac1fa4f05de76413c5e0ca6334035">llvm::reverse</a></div><div class="ttdeci">auto reverse(ContainerTy &amp;&amp;C)</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l00484">STLExtras.h:484</a></div></div>
<div class="ttc" id="aConstantHoisting_8cpp_html_abdb778394efe076ecd10eac8c4c17ed8"><div class="ttname"><a href="ConstantHoisting_8cpp.html#abdb778394efe076ecd10eac8c4c17ed8">ConstHoistGEP</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; ConstHoistGEP(&quot;consthoist-gep&quot;, cl::init(false), cl::Hidden, cl::desc(&quot;Try hoisting constant gep expressions&quot;))</div></div>
<div class="ttc" id="aclassllvm_1_1GlobalValue_html_a92041fc7f781ba4fe708eec99139b72f"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#a92041fc7f781ba4fe708eec99139b72f">llvm::GlobalValue::getType</a></div><div class="ttdeci">PointerType * getType() const</div><div class="ttdoc">Global values are always pointers.</div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00290">GlobalValue.h:290</a></div></div>
<div class="ttc" id="aclassllvm_1_1Module_html_a6d883605206368bc536cc9ded97209b8"><div class="ttname"><a href="classllvm_1_1Module.html#a6d883605206368bc536cc9ded97209b8">llvm::Module::getDataLayout</a></div><div class="ttdeci">const DataLayout &amp; getDataLayout() const</div><div class="ttdoc">Get the data layout for the module's target platform.</div><div class="ttdef"><b>Definition:</b> <a href="Module_8cpp_source.html#l00398">Module.cpp:398</a></div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisManager_html"><div class="ttname"><a href="classllvm_1_1AnalysisManager.html">llvm::AnalysisManager</a></div><div class="ttdoc">A container for analyses that lazily runs them and caches their results.</div><div class="ttdef"><b>Definition:</b> <a href="InstructionSimplify_8h_source.html#l00042">InstructionSimplify.h:42</a></div></div>
<div class="ttc" id="aclassllvm_1_1FunctionPass_html"><div class="ttname"><a href="classllvm_1_1FunctionPass.html">llvm::FunctionPass</a></div><div class="ttdoc">FunctionPass class - This class is used to implement most global optimizations.</div><div class="ttdef"><b>Definition:</b> <a href="Pass_8h_source.html#l00308">Pass.h:308</a></div></div>
<div class="ttc" id="alib_2CodeGen_2README_8txt_html_a09776db24cf586ec9f1e18f3bae14099"><div class="ttname"><a href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a></div><div class="ttdeci">Common register allocation spilling lr str ldr sxth r3 ldr mla r4 can lr mov lr str ldr sxth r3 mla r4 and then merge mul and lr str ldr sxth r3 mla r4 It also increase the likelihood the store may become dead bb27 Successors according to LLVM BB</div><div class="ttdef"><b>Definition:</b> <a href="lib_2CodeGen_2README_8txt_source.html#l00039">README.txt:39</a></div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisUsage_html_ae5c60fd282ee894c87ea02c3f0fcb6d0"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">llvm::AnalysisUsage::addRequired</a></div><div class="ttdeci">AnalysisUsage &amp; addRequired()</div><div class="ttdef"><b>Definition:</b> <a href="PassAnalysisSupport_8h_source.html#l00075">PassAnalysisSupport.h:75</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfo_html_ac44f6b9fdbb5f9cc199f8329cb0b272cae46c9eecc49bd2dc253c607e78a0fb86"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html#ac44f6b9fdbb5f9cc199f8329cb0b272cae46c9eecc49bd2dc253c607e78a0fb86">llvm::TargetTransformInfo::TCC_Basic</a></div><div class="ttdeci">@ TCC_Basic</div><div class="ttdoc">The cost of a typical 'add' instruction.</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l00268">TargetTransformInfo.h:268</a></div></div>
<div class="ttc" id="aclassllvm_1_1User_html_abe1de1520a21f77ac57cc210bf0fb0b4"><div class="ttname"><a href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">llvm::User::getOperand</a></div><div class="ttdeci">Value * getOperand(unsigned i) const</div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00169">User.h:169</a></div></div>
<div class="ttc" id="astructllvm_1_1cl_1_1desc_html"><div class="ttname"><a href="structllvm_1_1cl_1_1desc.html">llvm::cl::desc</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00411">CommandLine.h:411</a></div></div>
<div class="ttc" id="aConstantHoisting_8cpp_html_a03753ef110db115d5fb1af7c0983eff5"><div class="ttname"><a href="ConstantHoisting_8cpp.html#a03753ef110db115d5fb1af7c0983eff5">ConstHoistWithBlockFrequency</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; ConstHoistWithBlockFrequency(&quot;consthoist-with-block-frequency&quot;, cl::init(true), cl::Hidden, cl::desc(&quot;Enable the use of the block frequency analysis to reduce the &quot; &quot;chance to execute const materialization more frequently than &quot; &quot;without hoisting.&quot;))</div></div>
<div class="ttc" id="araw__ostream_8h_html"><div class="ttname"><a href="raw__ostream_8h.html">raw_ostream.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1SetVector_html"><div class="ttname"><a href="classllvm_1_1SetVector.html">llvm::SetVector&lt; BasicBlock * &gt;</a></div></div>
<div class="ttc" id="aclassllvm_1_1BinaryOperator_html_a02ce9966395063ac501ecbc1623deda4"><div class="ttname"><a href="classllvm_1_1BinaryOperator.html#a02ce9966395063ac501ecbc1623deda4">llvm::BinaryOperator::Create</a></div><div class="ttdeci">static BinaryOperator * Create(BinaryOps Op, Value *S1, Value *S2, const Twine &amp;Name=Twine(), Instruction *InsertBefore=nullptr)</div><div class="ttdoc">Construct a binary instruction, given the opcode and the two operands.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l02950">Instructions.cpp:2950</a></div></div>
<div class="ttc" id="aValue_8h_html"><div class="ttname"><a href="Value_8h.html">Value.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantHoistingPass_html"><div class="ttname"><a href="classllvm_1_1ConstantHoistingPass.html">llvm::ConstantHoistingPass</a></div><div class="ttdef"><b>Definition:</b> <a href="ConstantHoisting_8h_source.html#l00123">ConstantHoisting.h:123</a></div></div>
<div class="ttc" id="aInitializePasses_8h_html"><div class="ttname"><a href="InitializePasses_8h.html">InitializePasses.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_ac9c170fde1808bbd4436a0dbd6d5e755"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#ac9c170fde1808bbd4436a0dbd6d5e755">llvm::BasicBlock::isEHPad</a></div><div class="ttdeci">bool isEHPad() const</div><div class="ttdoc">Return true if this basic block is an exception handling block.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00512">BasicBlock.h:512</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html"><div class="ttname"><a href="classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00074">Value.h:74</a></div></div>
<div class="ttc" id="aDebug_8h_html"><div class="ttname"><a href="Debug_8h.html">Debug.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfo_html_a5c84ca19e254840865cd33cc5aaedb81"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html#a5c84ca19e254840865cd33cc5aaedb81">llvm::TargetTransformInfo::isLegalAddressingMode</a></div><div class="ttdeci">bool isLegalAddressingMode(Type *Ty, GlobalValue *BaseGV, int64_t BaseOffset, bool HasBaseReg, int64_t Scale, unsigned AddrSpace=0, Instruction *I=nullptr) const</div><div class="ttdoc">Return true if the addressing mode represented by AM is legal for this target, for a load/store of th...</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8cpp_source.html#l00361">TargetTransformInfo.cpp:361</a></div></div>
<div class="ttc" id="anamespacellvm_1_1sampleprof_html_a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41"><div class="ttname"><a href="namespacellvm_1_1sampleprof.html#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">llvm::sampleprof::Base</a></div><div class="ttdeci">@ Base</div><div class="ttdef"><b>Definition:</b> <a href="Discriminator_8h_source.html#l00058">Discriminator.h:58</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSetImpl_html_a6bc6fb89fe2e91c25559a8631f56e27e"><div class="ttname"><a href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">llvm::SmallPtrSetImpl::insert</a></div><div class="ttdeci">std::pair&lt; iterator, bool &gt; insert(PtrType Ptr)</div><div class="ttdoc">Inserts Ptr if and only if there is no element in the container equal to Ptr.</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00365">SmallPtrSet.h:365</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Aug 7 2023 10:27:55 for LLVM by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>

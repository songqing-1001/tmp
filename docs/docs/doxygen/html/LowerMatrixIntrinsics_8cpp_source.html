<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LLVM: lib/Transforms/Scalar/LowerMatrixIntrinsics.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">LLVM
   &#160;<span id="projectnumber">17.0.0git</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a class="el" href="dir_a72932e0778af28115095468f6286ff8.html">Transforms</a></li><li class="navelem"><a class="el" href="dir_e6e1f1f37d351595fa984b942927b205.html">Scalar</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">LowerMatrixIntrinsics.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="LowerMatrixIntrinsics_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//===- LowerMatrixIntrinsics.cpp -  Lower matrix intrinsics -----*- C++ -*-===//</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">// See https://llvm.org/LICENSE.txt for license information.</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">// Lower matrix intrinsics to vector operations.</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">// TODO:</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">//  * Improve fusion:</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">//   * Support more cases, e.g. multiply-add, multiply-sub, operands/results</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">//     transposed.</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">//   * Improve cost-modeling, e.g. choose different number of rows/columns</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">//     columns for tiles, consider cost of copies on alias.</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160; </div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LowerMatrixIntrinsics_8h.html">llvm/Transforms/Scalar/LowerMatrixIntrinsics.h</a>&quot;</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="PostOrderIterator_8h.html">llvm/ADT/PostOrderIterator.h</a>&quot;</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SmallVector_8h.html">llvm/ADT/SmallVector.h</a>&quot;</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="AliasAnalysis_8h.html">llvm/Analysis/AliasAnalysis.h</a>&quot;</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DomTreeUpdater_8h.html">llvm/Analysis/DomTreeUpdater.h</a>&quot;</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LoopInfo_8h.html">llvm/Analysis/LoopInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="OptimizationRemarkEmitter_8h.html">llvm/Analysis/OptimizationRemarkEmitter.h</a>&quot;</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="TargetTransformInfo_8h.html">llvm/Analysis/TargetTransformInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ValueTracking_8h.html">llvm/Analysis/ValueTracking.h</a>&quot;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="VectorUtils_8h.html">llvm/Analysis/VectorUtils.h</a>&quot;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="IR_2CFG_8h.html">llvm/IR/CFG.h</a>&quot;</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DataLayout_8h.html">llvm/IR/DataLayout.h</a>&quot;</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DebugInfoMetadata_8h.html">llvm/IR/DebugInfoMetadata.h</a>&quot;</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Function_8h.html">llvm/IR/Function.h</a>&quot;</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="IRBuilder_8h.html">llvm/IR/IRBuilder.h</a>&quot;</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Instructions_8h.html">llvm/IR/Instructions.h</a>&quot;</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="IntrinsicInst_8h.html">llvm/IR/IntrinsicInst.h</a>&quot;</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MatrixBuilder_8h.html">llvm/IR/MatrixBuilder.h</a>&quot;</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="PatternMatch_8h.html">llvm/IR/PatternMatch.h</a>&quot;</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="InitializePasses_8h.html">llvm/InitializePasses.h</a>&quot;</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Pass_8h.html">llvm/Pass.h</a>&quot;</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Alignment_8h.html">llvm/Support/Alignment.h</a>&quot;</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CommandLine_8h.html">llvm/Support/CommandLine.h</a>&quot;</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Debug_8h.html">llvm/Support/Debug.h</a>&quot;</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Transforms_2Scalar_8h.html">llvm/Transforms/Scalar.h</a>&quot;</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="BasicBlockUtils_8h.html">llvm/Transforms/Utils/BasicBlockUtils.h</a>&quot;</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LoopUtils_8h.html">llvm/Transforms/Utils/LoopUtils.h</a>&quot;</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MatrixUtils_8h.html">llvm/Transforms/Utils/MatrixUtils.h</a>&quot;</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160; </div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="preprocessor">#include &lt;cmath&gt;</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160; </div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespacellvm.html">llvm</a>;</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="keyword">using namespace </span>PatternMatch;</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160; </div>
<div class="line"><a name="l00054"></a><span class="lineno"><a class="line" href="LowerMatrixIntrinsics_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">   54</a></span>&#160;<span class="preprocessor">#define DEBUG_TYPE &quot;lower-matrix-intrinsics&quot;</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160; </div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    <a class="code" href="LowerMatrixIntrinsics_8cpp.html#a112115ac448f82f5861496f7282969b3">FuseMatrix</a>(<span class="stringliteral">&quot;fuse-matrix&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">true</span>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;               <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Enable/disable fusing matrix instructions.&quot;</span>));</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="comment">// TODO: Allow and use non-square tiles.</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;unsigned&gt;</a> <a class="code" href="LowerMatrixIntrinsics_8cpp.html#a7f6b2a94f0c353d428cf953c17fb7da0">TileSize</a>(</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    <span class="stringliteral">&quot;fuse-matrix-tile-size&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(4), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;        <span class="stringliteral">&quot;Tile size for matrix instruction fusion using square-shaped tiles.&quot;</span>));</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="LowerMatrixIntrinsics_8cpp.html#a5bb64c96618373218ca5eb9425ee8790">TileUseLoops</a>(<span class="stringliteral">&quot;fuse-matrix-use-loops&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">false</span>),</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;                                  <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;                                  <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Generate loop nest for tiling.&quot;</span>));</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="LowerMatrixIntrinsics_8cpp.html#ada3f86ecde5ce7225dd1a152a5b48104">ForceFusion</a>(</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    <span class="stringliteral">&quot;force-fuse-matrix&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">false</span>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Force matrix instruction fusion even if not profitable.&quot;</span>));</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="LowerMatrixIntrinsics_8cpp.html#a353d18abf1571b4a1ef374fe49ee259a">AllowContractEnabled</a>(</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    <span class="stringliteral">&quot;matrix-allow-contract&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">false</span>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Allow the use of FMAs if available and profitable. This may &quot;</span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;             <span class="stringliteral">&quot;result in different results, due to less rounding error.&quot;</span>));</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160; </div>
<div class="line"><a name="l00075"></a><span class="lineno"><a class="line" href="LowerMatrixIntrinsics_8cpp.html#abf221949fc61d1494af06b50731bdc90">   75</a></span>&#160;<span class="keyword">enum class</span> <a class="code" href="LowerMatrixIntrinsics_8cpp.html#abf221949fc61d1494af06b50731bdc90">MatrixLayoutTy</a> { <a class="code" href="LowerMatrixIntrinsics_8cpp.html#abf221949fc61d1494af06b50731bdc90af695e73139b1c1d06d77655104370f00">ColumnMajor</a>, <a class="code" href="LowerMatrixIntrinsics_8cpp.html#abf221949fc61d1494af06b50731bdc90abba47a7c03289a67ca347baa3f55be2f">RowMajor</a> };</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160; </div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;MatrixLayoutTy&gt;</a> <a class="code" href="LowerMatrixIntrinsics_8cpp.html#ab891e50c619f81260e857e297f460fe5">MatrixLayout</a>(</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    <span class="stringliteral">&quot;matrix-default-layout&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<a class="code" href="LowerMatrixIntrinsics_8cpp.html#abf221949fc61d1494af06b50731bdc90af695e73139b1c1d06d77655104370f00">MatrixLayoutTy::ColumnMajor</a>),</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Sets the default matrix layout&quot;</span>),</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    <a class="code" href="namespacellvm_1_1cl.html#a8fa743aa76b6902028f8a643dfb87171">cl::values</a>(<a class="code" href="CommandLine_8h.html#a187fd767976b311c09dff5e05ac0c1bc">clEnumValN</a>(<a class="code" href="LowerMatrixIntrinsics_8cpp.html#abf221949fc61d1494af06b50731bdc90af695e73139b1c1d06d77655104370f00">MatrixLayoutTy::ColumnMajor</a>, <span class="stringliteral">&quot;column-major&quot;</span>,</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;                          <span class="stringliteral">&quot;Use column-major layout&quot;</span>),</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;               <a class="code" href="CommandLine_8h.html#a187fd767976b311c09dff5e05ac0c1bc">clEnumValN</a>(<a class="code" href="LowerMatrixIntrinsics_8cpp.html#abf221949fc61d1494af06b50731bdc90abba47a7c03289a67ca347baa3f55be2f">MatrixLayoutTy::RowMajor</a>, <span class="stringliteral">&quot;row-major&quot;</span>,</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;                          <span class="stringliteral">&quot;Use row-major layout&quot;</span>)));</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160; </div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="LowerMatrixIntrinsics_8cpp.html#a2bae6e2e8d26e2e99b77d7bf9efbd5d1">PrintAfterTransposeOpt</a>(<span class="stringliteral">&quot;matrix-print-after-transpose-opt&quot;</span>,</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;                                            <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">false</span>));</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="comment">/// Helper function to either return Scope, if it is a subprogram or the</span></div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="comment">/// attached subprogram for a local scope.</span></div>
<div class="line"><a name="l00090"></a><span class="lineno"><a class="line" href="LowerMatrixIntrinsics_8cpp.html#a79f0c982827f4d3afbbbefc1180e0ef7">   90</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1DISubprogram.html">DISubprogram</a> *<a class="code" href="LowerMatrixIntrinsics_8cpp.html#a79f0c982827f4d3afbbbefc1180e0ef7">getSubprogram</a>(<a class="code" href="classllvm_1_1DIScope.html">DIScope</a> *Scope) {</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *Subprogram = dyn_cast&lt;DISubprogram&gt;(Scope))</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <span class="keywordflow">return</span> Subprogram;</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;  <span class="keywordflow">return</span> cast&lt;DILocalScope&gt;(Scope)-&gt;<a class="code" href="classllvm_1_1DILocalScope.html#a0e0b4a5906e0bc2a7fa033548c59a220">getSubprogram</a>();</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;}</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="comment">/// Erase \p V from \p BB and move \II forward to avoid invalidating</span></div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;<span class="comment">/// iterators.</span></div>
<div class="line"><a name="l00098"></a><span class="lineno"><a class="line" href="LowerMatrixIntrinsics_8cpp.html#a13352a0047c63abbca595b376e7501f8">   98</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="LowerMatrixIntrinsics_8cpp.html#a13352a0047c63abbca595b376e7501f8">eraseFromParentAndMove</a>(<a class="code" href="classllvm_1_1Value.html">Value</a> *V, <a class="code" href="classllvm_1_1BasicBlock.html#a6d3231fb84ed4182ec22e9442a87dbf8">BasicBlock::reverse_iterator</a> &amp;II,</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;                                   <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> &amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) {</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;  <span class="keyword">auto</span> *Inst = cast&lt;Instruction&gt;(V);</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;  <span class="comment">// Still used, don&#39;t erase.</span></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;  <span class="keywordflow">if</span> (!Inst-&gt;use_empty())</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;  <span class="keywordflow">if</span> (II != <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>.rend() &amp;&amp; Inst == &amp;*II)</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    ++II;</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;  Inst-&gt;eraseFromParent();</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;}</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;<span class="comment">/// Return true if V is a splat of a value (which is used when multiplying a</span></div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;<span class="comment">/// matrix with a scalar).</span></div>
<div class="line"><a name="l00111"></a><span class="lineno"><a class="line" href="LowerMatrixIntrinsics_8cpp.html#a6a2164e5aeea9c3e9a02eab3747efd8c">  111</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="LowerMatrixIntrinsics_8cpp.html#a6a2164e5aeea9c3e9a02eab3747efd8c">isSplat</a>(<a class="code" href="classllvm_1_1Value.html">Value</a> *V) {</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *SV = dyn_cast&lt;ShuffleVectorInst&gt;(V))</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    <span class="keywordflow">return</span> SV-&gt;isZeroEltSplat();</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;}</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;<span class="comment">/// Match any mul operation (fp or integer).</span></div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<span class="comment"></span><span class="keyword">template</span> &lt;<span class="keyword">typename</span> LTy, <span class="keyword">typename</span> RTy&gt;</div>
<div class="line"><a name="l00119"></a><span class="lineno"><a class="line" href="LowerMatrixIntrinsics_8cpp.html#ad3ea8483bb698ffc64dc1adf7c84a098">  119</a></span>&#160;<span class="keyword">auto</span> <a class="code" href="LowerMatrixIntrinsics_8cpp.html#ad3ea8483bb698ffc64dc1adf7c84a098">m_AnyMul</a>(<span class="keyword">const</span> LTy &amp;L, <span class="keyword">const</span> RTy &amp;R) {</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1PatternMatch.html#af4feec45578e32fe65d8efc59112bc8e">m_CombineOr</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a971522b36bf432ad69a0083581ab4108">m_Mul</a>(L, R), <a class="code" href="namespacellvm_1_1PatternMatch.html#a7aff89f4f22502c8ad9118bed59ce21c">m_FMul</a>(L, R));</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;}</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;<span class="comment">/// Match any add operation (fp or integer).</span></div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;<span class="comment"></span><span class="keyword">template</span> &lt;<span class="keyword">typename</span> LTy, <span class="keyword">typename</span> RTy&gt;</div>
<div class="line"><a name="l00125"></a><span class="lineno"><a class="line" href="LowerMatrixIntrinsics_8cpp.html#a93a97c876de2b13925eedd660ac411f9">  125</a></span>&#160;<span class="keyword">auto</span> <a class="code" href="LowerMatrixIntrinsics_8cpp.html#a93a97c876de2b13925eedd660ac411f9">m_AnyAdd</a>(<span class="keyword">const</span> LTy &amp;L, <span class="keyword">const</span> RTy &amp;R) {</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1PatternMatch.html#af4feec45578e32fe65d8efc59112bc8e">m_CombineOr</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a944c25ac9b73b02a17a20a08a25b9b21">m_Add</a>(L, R), <a class="code" href="namespacellvm_1_1PatternMatch.html#a5e3486337f60bed631149fb6b141bc3e">m_FAdd</a>(L, R));</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;}</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160; </div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;<span class="keyword">namespace </span>{</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160; </div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;<span class="comment">// Given an element pointer \p BasePtr to the start of a (sub) matrix, compute</span></div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;<span class="comment">// the start address of vector \p VecIdx with type (\p EltType x \p NumElements)</span></div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;<span class="comment">// assuming \p Stride elements between start two consecutive vectors.</span></div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;<span class="comment">// \p Stride must be &gt;= \p NumElements.</span></div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;<span class="comment">// For column-major matrixes, the function computes the address of a column</span></div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;<span class="comment">// vectors and \p NumElements must be set to the number of elements in a column</span></div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;<span class="comment">// (= number of rows of the matrix). For row-major matrixes, the function</span></div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;<span class="comment">// computes the address of a row vector and \p NumElements must be set to the</span></div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;<span class="comment">// number of elements in a column (= number of columns of the matrix).</span></div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;<span class="comment">// Consider a 4x4 matrix in column-mjaor layout like below</span></div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;<span class="comment">//      0       1      2      3</span></div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;<span class="comment">// 0   v_0_0  v_0_1  v_0_2  v_0_3</span></div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;<span class="comment">// 1   v_1_0  v_1_1  v_1_2  v_1_3</span></div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;<span class="comment">// 2   v_2_0  v_2_1  v_2_2  v_2_3</span></div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;<span class="comment">// 3   v_3_0  v_3_1  v_3_2  v_3_3</span></div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160; </div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;<span class="comment">// To compute the column addresses for a 2x3 sub-matrix at row 1 and column 1,</span></div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;<span class="comment">// we need a pointer to the first element of the submatrix as base pointer.</span></div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;<span class="comment">// Then we can use computeVectorAddr to compute the addresses for the columns</span></div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;<span class="comment">// of the sub-matrix.</span></div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;<span class="comment">// Column 0: computeVectorAddr(Base, 0 (column), 4 (stride), 2 (num rows), ..)</span></div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;<span class="comment">//           -&gt; just returns Base</span></div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;<span class="comment">// Column 1: computeVectorAddr(Base, 1 (column), 4 (stride), 2 (num rows), ..)</span></div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;<span class="comment">//           -&gt; returns Base + (1 * 4)</span></div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;<span class="comment">// Column 2: computeVectorAddr(Base, 2 (column), 4 (stride), 2 (num rows), ..)</span></div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;<span class="comment">//           -&gt; returns Base + (2 * 4)</span></div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;<span class="comment">// The graphic below illustrates the number of elements in a column (marked</span></div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;<span class="comment">// with |) and the number of skipped elements (marked with }).</span></div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;<span class="comment">//         v_0_0  v_0_1 {v_0_2 {v_0_3</span></div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;<span class="comment">//                Base   Col 1  Col 2</span></div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;<span class="comment">//                  |     |      |</span></div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;<span class="comment">//         v_1_0 |v_1_1 |v_1_2 |v_1_3</span></div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;<span class="comment">//         v_2_0 |v_2_1 |v_2_2 |v_2_3</span></div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;<span class="comment">//         v_3_0 {v_3_1 {v_3_2  v_3_3</span></div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;<a class="code" href="classllvm_1_1Value.html">Value</a> *computeVectorAddr(<a class="code" href="classllvm_1_1Value.html">Value</a> *BasePtr, <a class="code" href="classllvm_1_1Value.html">Value</a> *VecIdx, <a class="code" href="classllvm_1_1Value.html">Value</a> *Stride,</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;                         <span class="keywordtype">unsigned</span> NumElements, <a class="code" href="classllvm_1_1Type.html">Type</a> *EltType,</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;                         <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> &amp;<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>) {</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160; </div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((!isa&lt;ConstantInt&gt;(Stride) ||</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;          cast&lt;ConstantInt&gt;(Stride)-&gt;getZExtValue() &gt;= NumElements) &amp;&amp;</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;         <span class="stringliteral">&quot;Stride must be &gt;= the number of elements in the result vector.&quot;</span>);</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;  <span class="keywordtype">unsigned</span> AS = cast&lt;PointerType&gt;(<a class="code" href="namespacellvm_1_1codeview.html#aa8c11d016a2dd473a4cf0ed1da777f5ea67f23a49a4828b272554feea07834f7d">BasePtr</a>-&gt;getType())-&gt;getAddressSpace();</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160; </div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;  <span class="comment">// Compute the start of the vector with index VecIdx as VecIdx * Stride.</span></div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *VecStart = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateMul(VecIdx, Stride, <span class="stringliteral">&quot;vec.start&quot;</span>);</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160; </div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;  <span class="comment">// Get pointer to the start of the selected vector. Skip GEP creation,</span></div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;  <span class="comment">// if we select vector 0.</span></div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;  <span class="keywordflow">if</span> (isa&lt;ConstantInt&gt;(VecStart) &amp;&amp; cast&lt;ConstantInt&gt;(VecStart)-&gt;<a class="code" href="Lint_8cpp.html#a45005634b54e2126cb3e6ec0dbc9ade4">isZero</a>())</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    VecStart = <a class="code" href="namespacellvm_1_1codeview.html#aa8c11d016a2dd473a4cf0ed1da777f5ea67f23a49a4828b272554feea07834f7d">BasePtr</a>;</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    VecStart = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateGEP(EltType, BasePtr, VecStart, <span class="stringliteral">&quot;vec.gep&quot;</span>);</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160; </div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;  <span class="comment">// Cast elementwise vector start pointer to a pointer to a vector</span></div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;  <span class="comment">// (EltType x NumElements)*.</span></div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;  <span class="keyword">auto</span> *<a class="code" href="namespacellvm_1_1NVPTX_1_1PTXLdStInstCode.html#a91119cbee2be000c528a690252aee07c">VecType</a> = <a class="code" href="classllvm_1_1FixedVectorType.html#af9a870d5df50fe0133a410b7c9114c80">FixedVectorType::get</a>(EltType, NumElements);</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *VecPtrType = <a class="code" href="classllvm_1_1PointerType.html#a050a395d1656e546679d8b144d951bb2">PointerType::get</a>(<a class="code" href="namespacellvm_1_1NVPTX_1_1PTXLdStInstCode.html#a91119cbee2be000c528a690252aee07c">VecType</a>, AS);</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreatePointerCast(VecStart, VecPtrType, <span class="stringliteral">&quot;vec.cast&quot;</span>);</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;}</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;<span class="comment">/// LowerMatrixIntrinsics contains the methods used to lower matrix intrinsics.</span></div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;<span class="comment">/// Currently, the lowering for each matrix intrinsic is done as follows:</span></div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;<span class="comment">/// 1. Propagate the shape information from intrinsics to connected</span></div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;<span class="comment">/// instructions.</span></div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;<span class="comment">/// 2. Lower instructions with shape information (assuming column-major layout).</span></div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;<span class="comment">///  The lowering works similarly using row-major layout.</span></div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;<span class="comment">///  2.1. Get column vectors for each argument. If we already lowered the</span></div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;<span class="comment">///       definition of an argument, use the produced column vectors directly.</span></div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;<span class="comment">///       If not, split the operand vector containing an embedded matrix into</span></div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;<span class="comment">///       a set of column vectors,</span></div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;<span class="comment">///  2.2. Lower the instruction in terms of column major operations, which</span></div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;<span class="comment">///       yields a set of column vectors containing result matrix. Note that we</span></div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;<span class="comment">///       lower all instructions that have shape information. Besides the</span></div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;<span class="comment">///       intrinsics, this includes stores for example.</span></div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;<span class="comment">///  2.3. Update uses of the lowered instruction. If we have shape information</span></div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;<span class="comment">///       for a user, there is nothing to do, as we will look up the result</span></div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;<span class="comment">///       column matrix when lowering the user. For other uses, we embed the</span></div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;<span class="comment">///       result matrix in a flat vector and update the use.</span></div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;<span class="comment">///  2.4. Cache the result column matrix for the instruction we lowered</span></div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;<span class="comment">/// 3. After we lowered all instructions in a function, remove the now</span></div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;<span class="comment">///    obsolete instructions.</span></div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;<span class="comment"></span><span class="keyword">class </span>LowerMatrixIntrinsics {</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="namespacellvm_1_1ifs.html#adfe04e1a9cc096fb571e8372debaa67ea00d0b4f2d7dcdaaef835b97cf5d1e0df">Func</a>;</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1DataLayout.html">DataLayout</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>;</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetTransformInfo.html">TargetTransformInfo</a> &amp;<a class="code" href="namespacellvm.html#aa0d69e81725c10fa5407f0bf34462068">TTI</a>;</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;  <a class="code" href="classllvm_1_1AAResults.html">AliasAnalysis</a> *AA;</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;  <a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> *DT;</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;  <a class="code" href="classllvm_1_1LoopInfo.html">LoopInfo</a> *LI;</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;  <a class="code" href="classllvm_1_1OptimizationRemarkEmitter.html">OptimizationRemarkEmitter</a> *ORE;</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;<span class="comment">  /// Contains estimates of the number of operations (loads, stores, compute) required to lower a matrix operation.</span></div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;<span class="comment"></span>  <span class="keyword">struct </span>OpInfoTy {<span class="comment"></span></div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;<span class="comment">    /// Number of stores emitted to generate this matrix.</span></div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;<span class="comment"></span>    <span class="keywordtype">unsigned</span> NumStores = 0;<span class="comment"></span></div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;<span class="comment">    /// Number of loads emitted to generate this matrix.</span></div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;<span class="comment"></span>    <span class="keywordtype">unsigned</span> NumLoads = 0;<span class="comment"></span></div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;<span class="comment">    /// Number of compute operations emitted to generate this matrix.</span></div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;<span class="comment"></span>    <span class="keywordtype">unsigned</span> NumComputeOps = 0;<span class="comment"></span></div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;<span class="comment">    /// Most of the time transposes can be fused with matrix multiplies or can</span></div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;<span class="comment">    /// be folded away via algebraic simplifications.  This is the number of</span></div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;<span class="comment">    /// transposes that we failed to make &quot;free&quot; via such optimizations.</span></div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;<span class="comment"></span>    <span class="keywordtype">unsigned</span> NumExposedTransposes = 0;</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160; </div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    OpInfoTy &amp;<a class="code" href="namespacellvm.html#a0068da90e0fe51c9645b75e2a2235dc1">operator+=</a>(<span class="keyword">const</span> OpInfoTy &amp;<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>) {</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;      NumStores += <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>.NumStores;</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;      NumLoads += <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>.NumLoads;</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;      NumComputeOps += <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>.NumComputeOps;</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;      NumExposedTransposes += <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>.NumExposedTransposes;</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;      <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    }</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;  };</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;<span class="comment">  /// Wrapper class representing a matrix as a set of vectors, either in row or</span></div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;<span class="comment">  /// column major layout. All vectors must have the same vector type.</span></div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;<span class="comment"></span>  <span class="keyword">class </span>MatrixTy {</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Value *, 16&gt;</a> Vectors;</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160; </div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    OpInfoTy OpInfo;</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160; </div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    <span class="keywordtype">bool</span> IsColumnMajor = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160; </div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;  <span class="keyword">public</span>:</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    MatrixTy() : IsColumnMajor(<a class="code" href="LowerMatrixIntrinsics_8cpp.html#ab891e50c619f81260e857e297f460fe5">MatrixLayout</a> == <a class="code" href="LowerMatrixIntrinsics_8cpp.html#abf221949fc61d1494af06b50731bdc90">MatrixLayoutTy</a>::<a class="code" href="LowerMatrixIntrinsics_8cpp.html#abf221949fc61d1494af06b50731bdc90af695e73139b1c1d06d77655104370f00">ColumnMajor</a>) {}</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    MatrixTy(<a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;Value *&gt;</a> Vectors)</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;        : Vectors(Vectors.<a class="code" href="namespacellvm_1_1sys_1_1path.html#a00a76a729b319dc47beffbe07325565f">begin</a>(), Vectors.<a class="code" href="namespacellvm_1_1sys_1_1path.html#a214ec2f04ffd92636ed4bd2717607a1d">end</a>()),</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;          IsColumnMajor(<a class="code" href="LowerMatrixIntrinsics_8cpp.html#ab891e50c619f81260e857e297f460fe5">MatrixLayout</a> == <a class="code" href="LowerMatrixIntrinsics_8cpp.html#abf221949fc61d1494af06b50731bdc90">MatrixLayoutTy</a>::<a class="code" href="LowerMatrixIntrinsics_8cpp.html#abf221949fc61d1494af06b50731bdc90af695e73139b1c1d06d77655104370f00">ColumnMajor</a>) {}</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    MatrixTy(<span class="keywordtype">unsigned</span> NumRows, <span class="keywordtype">unsigned</span> NumColumns, <a class="code" href="classllvm_1_1Type.html">Type</a> *EltTy)</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;        : IsColumnMajor(<a class="code" href="LowerMatrixIntrinsics_8cpp.html#ab891e50c619f81260e857e297f460fe5">MatrixLayout</a> == <a class="code" href="LowerMatrixIntrinsics_8cpp.html#abf221949fc61d1494af06b50731bdc90">MatrixLayoutTy</a>::<a class="code" href="LowerMatrixIntrinsics_8cpp.html#abf221949fc61d1494af06b50731bdc90af695e73139b1c1d06d77655104370f00">ColumnMajor</a>) {</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160; </div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;      <span class="keywordtype">unsigned</span> <a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a> = isColumnMajor() ? NumColumns : NumRows;</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> J = 0; J &lt; <a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>; ++J)</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;        addVector(<a class="code" href="classllvm_1_1UndefValue.html#a4ae5ff22b700a42bcc5d889233721335">UndefValue::get</a>(<a class="code" href="classllvm_1_1FixedVectorType.html#af9a870d5df50fe0133a410b7c9114c80">FixedVectorType::get</a>(</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;            EltTy, isColumnMajor() ? NumRows : NumColumns)));</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    }</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160; </div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *getVector(<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> Vectors[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>]; }</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *getColumn(<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(isColumnMajor() &amp;&amp; <span class="stringliteral">&quot;only supported for column-major matrixes&quot;</span>);</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;      <span class="keywordflow">return</span> Vectors[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    }</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *getRow(<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!isColumnMajor() &amp;&amp; <span class="stringliteral">&quot;only supported for row-major matrixes&quot;</span>);</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;      <span class="keywordflow">return</span> Vectors[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    }</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160; </div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    <span class="keywordtype">void</span> setVector(<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>, <a class="code" href="classllvm_1_1Value.html">Value</a> *V) { Vectors[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>] = V; }</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160; </div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *getElementType()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> getVectorTy()-&gt;getElementType(); }</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160; </div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    <span class="keywordtype">unsigned</span> getNumVectors()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;      <span class="keywordflow">if</span> (isColumnMajor())</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;        <span class="keywordflow">return</span> getNumColumns();</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;      <span class="keywordflow">return</span> getNumRows();</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    }</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160; </div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    <span class="keywordtype">unsigned</span> getNumColumns()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;      <span class="keywordflow">if</span> (isColumnMajor())</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;        <span class="keywordflow">return</span> Vectors.size();</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;      <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;        <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Vectors.size() &gt; 0 &amp;&amp; <span class="stringliteral">&quot;Cannot call getNumRows without columns&quot;</span>);</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;        <span class="keywordflow">return</span> cast&lt;FixedVectorType&gt;(Vectors[0]-&gt;<a class="code" href="M68kELFObjectWriter_8cpp.html#ae4a8bc3879d2282eefd72b16b12c2a37">getType</a>())-&gt;getNumElements();</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;      }</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    }</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    <span class="keywordtype">unsigned</span> getNumRows()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;      <span class="keywordflow">if</span> (isColumnMajor()) {</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;        <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Vectors.size() &gt; 0 &amp;&amp; <span class="stringliteral">&quot;Cannot call getNumRows without columns&quot;</span>);</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;        <span class="keywordflow">return</span> cast&lt;FixedVectorType&gt;(Vectors[0]-&gt;<a class="code" href="M68kELFObjectWriter_8cpp.html#ae4a8bc3879d2282eefd72b16b12c2a37">getType</a>())-&gt;getNumElements();</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;      } <span class="keywordflow">else</span></div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;        <span class="keywordflow">return</span> Vectors.size();</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    }</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160; </div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    <span class="keywordtype">void</span> addVector(<a class="code" href="classllvm_1_1Value.html">Value</a> *V) { Vectors.push_back(V); }</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    <a class="code" href="classllvm_1_1VectorType.html">VectorType</a> *getColumnTy() {</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(isColumnMajor() &amp;&amp; <span class="stringliteral">&quot;only supported for column-major matrixes&quot;</span>);</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;      <span class="keywordflow">return</span> getVectorTy();</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    }</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160; </div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    <a class="code" href="classllvm_1_1VectorType.html">VectorType</a> *getVectorTy()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;      <span class="keywordflow">return</span> cast&lt;VectorType&gt;(Vectors[0]-&gt;<a class="code" href="M68kELFObjectWriter_8cpp.html#ae4a8bc3879d2282eefd72b16b12c2a37">getType</a>());</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    }</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160; </div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    <a class="code" href="classllvm_1_1iterator__range.html">iterator_range&lt;SmallVector&lt;Value *, 8&gt;::iterator</a>&gt; columns() {</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(isColumnMajor() &amp;&amp;</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;             <span class="stringliteral">&quot;columns() only supported for column-major matrixes&quot;</span>);</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#ad1a91b49e0c092818a0b82f6cc130a1b">make_range</a>(Vectors.begin(), Vectors.end());</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    }</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160; </div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    <a class="code" href="classllvm_1_1iterator__range.html">iterator_range&lt;SmallVector&lt;Value *, 8&gt;::iterator</a>&gt; <a class="code" href="HexagonVectorLoopCarriedReuse_8cpp.html#a3fd4a7024284a5905bb9ffcc1b23761c">vectors</a>() {</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#ad1a91b49e0c092818a0b82f6cc130a1b">make_range</a>(Vectors.begin(), Vectors.end());</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    }</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;<span class="comment">    /// Embed the vectors of the matrix into a flat vector by concatenating</span></div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;<span class="comment">    /// them.</span></div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;<span class="comment"></span>    <a class="code" href="classllvm_1_1Value.html">Value</a> *embedInVector(<a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> &amp;<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;      <span class="keywordflow">return</span> Vectors.size() == 1 ? Vectors[0]</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;                                 : <a class="code" href="namespacellvm.html#a4288169d91ab0f0f01405115fd2931a7">concatenateVectors</a>(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>, Vectors);</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    }</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160; </div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    MatrixTy &amp;addNumLoads(<span class="keywordtype">unsigned</span> <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>) {</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;      OpInfo.NumLoads += <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>;</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;      <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    }</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160; </div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    <span class="keywordtype">void</span> setNumLoads(<span class="keywordtype">unsigned</span> <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>) { OpInfo.NumLoads = <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>; }</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160; </div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    MatrixTy &amp;addNumStores(<span class="keywordtype">unsigned</span> <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>) {</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;      OpInfo.NumStores += <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>;</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;      <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    }</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160; </div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    MatrixTy &amp;addNumExposedTransposes(<span class="keywordtype">unsigned</span> <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>) {</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;      OpInfo.NumExposedTransposes += <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>;</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;      <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    }</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160; </div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    MatrixTy &amp;addNumComputeOps(<span class="keywordtype">unsigned</span> <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>) {</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;      OpInfo.NumComputeOps += <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>;</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;      <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    }</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160; </div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    <span class="keywordtype">unsigned</span> getNumStores()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> OpInfo.NumStores; }</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    <span class="keywordtype">unsigned</span> getNumLoads()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> OpInfo.NumLoads; }</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    <span class="keywordtype">unsigned</span> getNumComputeOps()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> OpInfo.NumComputeOps; }</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160; </div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;    <span class="keyword">const</span> OpInfoTy &amp;getOpInfo()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> OpInfo; }</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160; </div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    <span class="keywordtype">bool</span> isColumnMajor()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> IsColumnMajor; }</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160; </div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    <span class="keywordtype">unsigned</span> getStride()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;      <span class="keywordflow">if</span> (isColumnMajor())</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;        <span class="keywordflow">return</span> getNumRows();</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;      <span class="keywordflow">return</span> getNumColumns();</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    }</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;<span class="comment">    /// Extract a vector of \p NumElts starting at index (\p I, \p J). If the</span></div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;<span class="comment">    /// matrix is column-major, the result vector is extracted from a column</span></div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;<span class="comment">    /// vector, otherwise from a row vector.</span></div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;<span class="comment"></span>    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="SROA_8cpp.html#a06a9071efa992145e210f0b41a52e501">extractVector</a>(<span class="keywordtype">unsigned</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <span class="keywordtype">unsigned</span> J, <span class="keywordtype">unsigned</span> NumElts,</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;                         <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> &amp;<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *Vec = isColumnMajor() ? getColumn(J) : getRow(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(cast&lt;FixedVectorType&gt;(Vec-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>())-&gt;getNumElements() &gt;=</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;                 NumElts &amp;&amp;</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;             <span class="stringliteral">&quot;Extracted vector will contain poison values&quot;</span>);</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateShuffleVector(</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;          Vec, <a class="code" href="namespacellvm.html#af00a6f39da9d94ec387a366ade60aea5">createSequentialMask</a>(isColumnMajor() ? <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : J, NumElts, 0),</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;          <span class="stringliteral">&quot;block&quot;</span>);</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    }</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;  };</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160; </div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;  <span class="keyword">struct </span>ShapeInfo {</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    <span class="keywordtype">unsigned</span> NumRows;</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;    <span class="keywordtype">unsigned</span> NumColumns;</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160; </div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    <span class="keywordtype">bool</span> IsColumnMajor;</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160; </div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    ShapeInfo(<span class="keywordtype">unsigned</span> NumRows = 0, <span class="keywordtype">unsigned</span> NumColumns = 0)</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;        : NumRows(NumRows), NumColumns(NumColumns),</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;          IsColumnMajor(<a class="code" href="LowerMatrixIntrinsics_8cpp.html#ab891e50c619f81260e857e297f460fe5">MatrixLayout</a> == <a class="code" href="LowerMatrixIntrinsics_8cpp.html#abf221949fc61d1494af06b50731bdc90">MatrixLayoutTy</a>::<a class="code" href="LowerMatrixIntrinsics_8cpp.html#abf221949fc61d1494af06b50731bdc90af695e73139b1c1d06d77655104370f00">ColumnMajor</a>) {}</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160; </div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    ShapeInfo(<a class="code" href="classllvm_1_1Value.html">Value</a> *NumRows, <a class="code" href="classllvm_1_1Value.html">Value</a> *NumColumns)</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;        : ShapeInfo(<a class="code" href="namespacellvm.html#ac4fc845f5ed92de63cd4474f128f5fc5">cast</a>&lt;<a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a>&gt;(NumRows)-&gt;getZExtValue(),</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;                    <a class="code" href="namespacellvm.html#ac4fc845f5ed92de63cd4474f128f5fc5">cast</a>&lt;<a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a>&gt;(NumColumns)-&gt;getZExtValue()) {}</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160; </div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="namespacellvm.html#a4d812a2dd18aa186c164447e20e348e7">operator==</a>(<span class="keyword">const</span> ShapeInfo &amp;other) {</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;      <span class="keywordflow">return</span> NumRows == other.NumRows &amp;&amp; NumColumns == other.NumColumns;</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    }</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="namespacellvm.html#a2f883c895f4d244f4ed56ed8a8c160c1">operator!=</a>(<span class="keyword">const</span> ShapeInfo &amp;other) { <span class="keywordflow">return</span> !(*<span class="keyword">this</span> == other); }</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;<span class="comment">    /// Returns true if shape-information is defined, meaning both dimensions</span></div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;<span class="comment">    /// are != 0.</span></div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;<span class="comment"></span>    <span class="keyword">operator</span> bool()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(NumRows == 0 || NumColumns != 0);</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;      <span class="keywordflow">return</span> NumRows != 0;</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;    }</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160; </div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    <span class="keywordtype">unsigned</span> getStride()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;      <span class="keywordflow">if</span> (IsColumnMajor)</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;        <span class="keywordflow">return</span> NumRows;</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;      <span class="keywordflow">return</span> NumColumns;</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;    }</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160; </div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;    <span class="keywordtype">unsigned</span> getNumVectors()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;      <span class="keywordflow">if</span> (IsColumnMajor)</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;        <span class="keywordflow">return</span> NumColumns;</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;      <span class="keywordflow">return</span> NumRows;</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    }</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;<span class="comment">    /// Returns the transposed shape.</span></div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;<span class="comment"></span>    ShapeInfo <a class="code" href="README-SSE_8txt.html#a50fd53d9a3e55ae78555e11827355565">t</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> ShapeInfo(NumColumns, NumRows); }</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;  };</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;<span class="comment">  /// Maps instructions to their shape information. The shape information</span></div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;<span class="comment">  /// describes the shape to be used while lowering. This matches the shape of</span></div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;<span class="comment">  /// the result value of the instruction, with the only exceptions being store</span></div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;<span class="comment">  /// instructions and the matrix_column_major_store intrinsics. For those, the</span></div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;<span class="comment">  /// shape information indicates that those instructions should be lowered</span></div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;<span class="comment">  /// using shape information as well.  A ValueMap is used so that when</span></div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;<span class="comment">  /// sub-passes like optimizeTransposes performs RAUW the map stays</span></div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;<span class="comment">  /// up-to-date.</span></div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1ValueMap.html">ValueMap&lt;Value *, ShapeInfo&gt;</a> ShapeMap;</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;<span class="comment">  /// List of instructions to remove. While lowering, we are not replacing all</span></div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;<span class="comment">  /// users of a lowered instruction, if shape information is available and</span></div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;<span class="comment">  /// those need to be removed after we finished lowering.</span></div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Instruction *, 16&gt;</a> <a class="code" href="ARMLowOverheadLoops_8cpp.html#a3bf42baf773b375802538951c88d8e12">ToRemove</a>;</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;<span class="comment">  /// Map from instructions to their produced column matrix.</span></div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1MapVector.html">MapVector&lt;Value *, MatrixTy&gt;</a> Inst2ColumnMatrix;</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160; </div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;<span class="keyword">private</span>:</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;  <span class="keyword">static</span> <a class="code" href="classllvm_1_1FastMathFlags.html">FastMathFlags</a> getFastMathFlags(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Inst) {</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;    <a class="code" href="classllvm_1_1FastMathFlags.html">FastMathFlags</a> FMF;</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160; </div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;    <span class="keywordflow">if</span> (isa&lt;FPMathOperator&gt;(*Inst))</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;      FMF = Inst-&gt;<a class="code" href="classllvm_1_1Instruction.html#a9a167f91db810097d281b1ed627f4575">getFastMathFlags</a>();</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160; </div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;    FMF.<a class="code" href="classllvm_1_1FastMathFlags.html#a17e649128903d9aec55cf75d3c14c545">setAllowContract</a>(<a class="code" href="LowerMatrixIntrinsics_8cpp.html#a353d18abf1571b4a1ef374fe49ee259a">AllowContractEnabled</a> || FMF.<a class="code" href="classllvm_1_1FastMathFlags.html#ad8c80fc37943fda4be56cf1e0b6cb145">allowContract</a>());</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160; </div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;    <span class="keywordflow">return</span> FMF;</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;  }</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160; </div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;  LowerMatrixIntrinsics(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, <a class="code" href="classllvm_1_1TargetTransformInfo.html">TargetTransformInfo</a> &amp;<a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>,</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;                        <a class="code" href="classllvm_1_1AAResults.html">AliasAnalysis</a> *AA, <a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> *DT, <a class="code" href="classllvm_1_1LoopInfo.html">LoopInfo</a> *LI,</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;                        <a class="code" href="classllvm_1_1OptimizationRemarkEmitter.html">OptimizationRemarkEmitter</a> *ORE)</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;      : <a class="code" href="namespacellvm_1_1ifs.html#adfe04e1a9cc096fb571e8372debaa67ea00d0b4f2d7dcdaaef835b97cf5d1e0df">Func</a>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>), <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.<a class="code" href="BasicAliasAnalysis_8cpp.html#a2675de1d8479c7b00387979714da43f7">getParent</a>()-&gt;getDataLayout()), <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>(<a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>), AA(AA), DT(DT),</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;        LI(LI), ORE(ORE) {}</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160; </div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;  <span class="keywordtype">unsigned</span> getNumOps(<a class="code" href="classllvm_1_1Type.html">Type</a> *VT) {</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(isa&lt;VectorType&gt;(VT) &amp;&amp; <span class="stringliteral">&quot;Expected vector type&quot;</span>);</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;    <span class="keywordflow">return</span> getNumOps(VT-&gt;<a class="code" href="classllvm_1_1Type.html#a4abb39a66573f61fda80469faa5d861d">getScalarType</a>(),</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;                     cast&lt;FixedVectorType&gt;(VT)-&gt;getNumElements());</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;  }</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;<span class="comment">  /// Is this the minimal version executed in the backend pipelines.</span></div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;<span class="comment"></span>  <span class="keywordtype">bool</span> isMinimal()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;    <span class="keywordflow">return</span> !DT;</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;  }</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;<span class="comment">  /// Return the estimated number of vector ops required for an operation on</span></div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;<span class="comment">  /// \p VT * N.</span></div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;<span class="comment"></span>  <span class="keywordtype">unsigned</span> getNumOps(<a class="code" href="classllvm_1_1Type.html">Type</a> *<a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>, <span class="keywordtype">unsigned</span> <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>) {</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="README-FPStack_8txt.html#a9209b9930d4d7750a6b8b38b3b4ddd6a">std::ceil</a>((<a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>-&gt;getPrimitiveSizeInBits() * <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>).getFixedValue() /</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;                     <span class="keywordtype">double</span>(<a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>.<a class="code" href="classllvm_1_1TargetTransformInfo.html#a2d30dd50c6b2d64ca3bc2826ca229fdb">getRegisterBitWidth</a>(</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;                                   <a class="code" href="classllvm_1_1TargetTransformInfo.html#a8bb3b1ccf19b8c85429b777dfa4a0166a183020fbea95c99db23f6d3594f4c4af">TargetTransformInfo::RGK_FixedWidthVector</a>)</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;                                .<a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#a33880aaca0ad05e5f1557f079305bde5">getFixedValue</a>()));</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;  }</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;<span class="comment">  /// Return the set of vectors that a matrix value is lowered to.</span></div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;<span class="comment">  ///</span></div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;<span class="comment">  /// If we lowered \p MatrixVal, just return the cache result matrix. Otherwise</span></div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;<span class="comment">  /// split the flat vector \p MatrixVal containing a matrix with shape \p SI</span></div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;<span class="comment">  /// into vectors.</span></div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;<span class="comment"></span>  MatrixTy getMatrix(<a class="code" href="classllvm_1_1Value.html">Value</a> *MatrixVal, <span class="keyword">const</span> ShapeInfo &amp;<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>,</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;                     <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> &amp;<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>) {</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;    <a class="code" href="classllvm_1_1VectorType.html">VectorType</a> *VType = dyn_cast&lt;VectorType&gt;(MatrixVal-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>());</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(VType &amp;&amp; <span class="stringliteral">&quot;MatrixVal must be a vector type&quot;</span>);</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(cast&lt;FixedVectorType&gt;(VType)-&gt;getNumElements() ==</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;               <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>.NumRows * <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>.NumColumns &amp;&amp;</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;           <span class="stringliteral">&quot;The vector size must match the number of matrix elements&quot;</span>);</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160; </div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;    <span class="comment">// Check if we lowered MatrixVal using shape information. In that case,</span></div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;    <span class="comment">// return the existing matrix, if it matches the requested shape</span></div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    <span class="comment">// information. If there is a mis-match, embed the result in a flat</span></div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;    <span class="comment">// vector and split it later.</span></div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;    <span class="keyword">auto</span> Found = Inst2ColumnMatrix.<a class="code" href="classllvm_1_1MapVector.html#a6b0c3e15c351ba9682837c29b0a141b6">find</a>(MatrixVal);</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;    <span class="keywordflow">if</span> (Found != Inst2ColumnMatrix.<a class="code" href="classllvm_1_1MapVector.html#a0881334358ff6ff7ff8cea5562c7988e">end</a>()) {</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;      MatrixTy &amp;<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a> = Found-&gt;second;</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;      <span class="comment">// Return the found matrix, if its shape matches the requested shape</span></div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;      <span class="comment">// information</span></div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>.NumRows == <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getNumRows() &amp;&amp; <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>.NumColumns == <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getNumColumns())</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>;</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160; </div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;      MatrixVal = <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.embedInVector(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>);</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;    }</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160; </div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;    <span class="comment">// Otherwise split MatrixVal.</span></div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Value *, 16&gt;</a> SplitVecs;</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> MaskStart = 0;</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;         MaskStart &lt; cast&lt;FixedVectorType&gt;(VType)-&gt;getNumElements();</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;         MaskStart += <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>.getStride()) {</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *V = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateShuffleVector(</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;          MatrixVal, <a class="code" href="namespacellvm.html#af00a6f39da9d94ec387a366ade60aea5">createSequentialMask</a>(MaskStart, <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>.getStride(), 0),</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;          <span class="stringliteral">&quot;split&quot;</span>);</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;      SplitVecs.push_back(V);</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;    }</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160; </div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;    <span class="keywordflow">return</span> {SplitVecs};</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;  }</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;<span class="comment">  /// If \p V already has a known shape return false.  Otherwise set the shape</span></div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;<span class="comment">  /// for instructions that support it.</span></div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;<span class="comment"></span>  <span class="keywordtype">bool</span> setShapeInfo(<a class="code" href="classllvm_1_1Value.html">Value</a> *V, ShapeInfo Shape) {</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Shape &amp;&amp; <span class="stringliteral">&quot;Shape not set&quot;</span>);</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;    <span class="keywordflow">if</span> (isa&lt;UndefValue&gt;(V) || !supportsShapeInfo(V))</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160; </div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;    <span class="keyword">auto</span> SIter = ShapeMap.<a class="code" href="classllvm_1_1ValueMap.html#a7629b8c5f6a6802ee0fdc5c290769692">find</a>(V);</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;    <span class="keywordflow">if</span> (SIter != ShapeMap.<a class="code" href="classllvm_1_1ValueMap.html#ab871e2d0ebded563edfebd6766fc1a04">end</a>()) {</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  not overriding existing shape: &quot;</span></div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;                        &lt;&lt; SIter-&gt;second.NumRows &lt;&lt; <span class="stringliteral">&quot; &quot;</span></div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;                        &lt;&lt; SIter-&gt;second.NumColumns &lt;&lt; <span class="stringliteral">&quot; for &quot;</span> &lt;&lt; *V &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;    }</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160; </div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;    ShapeMap.<a class="code" href="classllvm_1_1ValueMap.html#a620815bfbf153caa776f5e207bd8e3c0">insert</a>({V, Shape});</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  &quot;</span> &lt;&lt; Shape.NumRows &lt;&lt; <span class="stringliteral">&quot; x &quot;</span> &lt;&lt; Shape.NumColumns</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;                      &lt;&lt; <span class="stringliteral">&quot; for &quot;</span> &lt;&lt; *V &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;  }</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160; </div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;  <span class="keywordtype">bool</span> isUniformShape(<a class="code" href="classllvm_1_1Value.html">Value</a> *V) {</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = dyn_cast&lt;Instruction&gt;(V);</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160; </div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;    <span class="keywordflow">switch</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOpcode()) {</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;    <span class="keywordflow">case</span> Instruction::FAdd:</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;    <span class="keywordflow">case</span> Instruction::FSub:</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;    <span class="keywordflow">case</span> Instruction::FMul: <span class="comment">// Scalar multiply.</span></div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;    <span class="keywordflow">case</span> Instruction::FNeg:</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a2b016c207343046b2bac45e69e76dcec">Instruction::Add</a>:</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="X86PartialReduction_8cpp.html#ae0f503db91504a3f3440ab81260e4134">Instruction::Mul</a>:</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;    <span class="keywordflow">case</span> Instruction::Sub:</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;    }</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;  }</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;<span class="comment">  /// Returns true if shape information can be used for \p V. The supported</span></div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;<span class="comment">  /// instructions must match the instructions that can be lowered by this pass.</span></div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;<span class="comment"></span>  <span class="keywordtype">bool</span> supportsShapeInfo(<a class="code" href="classllvm_1_1Value.html">Value</a> *V) {</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Inst = dyn_cast&lt;Instruction&gt;(V);</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;    <span class="keywordflow">if</span> (!Inst)</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160; </div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;    <a class="code" href="classllvm_1_1IntrinsicInst.html">IntrinsicInst</a> *II = dyn_cast&lt;IntrinsicInst&gt;(Inst);</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;    <span class="keywordflow">if</span> (II)</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;      <span class="keywordflow">switch</span> (II-&gt;<a class="code" href="classllvm_1_1IntrinsicInst.html#a7ff64b3625b6f9020556ed05a5f72af4">getIntrinsicID</a>()) {</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;      <span class="keywordflow">case</span> Intrinsic::matrix_multiply:</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;      <span class="keywordflow">case</span> Intrinsic::matrix_transpose:</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;      <span class="keywordflow">case</span> Intrinsic::matrix_column_major_load:</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;      <span class="keywordflow">case</span> Intrinsic::matrix_column_major_store:</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;      <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;      }</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;    <span class="keywordflow">return</span> isUniformShape(V) || isa&lt;StoreInst&gt;(V) || isa&lt;LoadInst&gt;(V);</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;  }</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;<span class="comment">  /// Propagate the shape information of instructions to their users.</span></div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;<span class="comment">  /// The work list contains instructions for which we can compute the shape,</span></div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;<span class="comment">  /// either based on the information provided by matrix intrinsics or known</span></div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;<span class="comment">  /// shapes of operands.</span></div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Instruction *, 32&gt;</a></div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;  propagateShapeForward(<a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;Instruction *&gt;</a> &amp;WorkList) {</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Instruction *, 32&gt;</a> NewWorkList;</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;    <span class="comment">// Pop an element for which we guaranteed to have at least one of the</span></div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;    <span class="comment">// operand shapes.  Add the shape for this and then add users to the work</span></div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;    <span class="comment">// list.</span></div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Forward-propagate shapes:\n&quot;</span>);</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;    <span class="keywordflow">while</span> (!WorkList.empty()) {</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;      <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Inst = WorkList.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a0c8ffe664a36e30d49c84d0aded2fe08">pop_back_val</a>();</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160; </div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;      <span class="comment">// New entry, set the value and insert operands</span></div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;      <span class="keywordtype">bool</span> Propagate = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160; </div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *MatrixA;</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *MatrixB;</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>;</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>;</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *K;</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Inst, m_Intrinsic&lt;Intrinsic::matrix_multiply&gt;(</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;                          <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(MatrixA), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(MatrixB), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(M),</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;                          <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(K)))) {</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;        Propagate = setShapeInfo(Inst, {<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>, K});</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Inst, m_Intrinsic&lt;Intrinsic::matrix_transpose&gt;(</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;                                 <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(MatrixA), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(M), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>)))) {</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;        <span class="comment">// Flip dimensions.</span></div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;        Propagate = setShapeInfo(Inst, {<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>, <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>});</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Inst, m_Intrinsic&lt;Intrinsic::matrix_column_major_store&gt;(</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;                                 <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(MatrixA), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(),</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;                                 <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(M), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>)))) {</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;        Propagate = setShapeInfo(Inst, {<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>, <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>});</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Inst, m_Intrinsic&lt;Intrinsic::matrix_column_major_load&gt;(</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;                                 <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(M),</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;                                 <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>)))) {</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;        Propagate = setShapeInfo(Inst, {<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>, <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>});</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Inst, <a class="code" href="namespacellvm_1_1PatternMatch.html#ab00c67eb2b92ca056ceefc07c67f46f0">m_Store</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(MatrixA), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>()))) {</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;        <span class="keyword">auto</span> OpShape = ShapeMap.<a class="code" href="classllvm_1_1ValueMap.html#a7629b8c5f6a6802ee0fdc5c290769692">find</a>(MatrixA);</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;        <span class="keywordflow">if</span> (OpShape != ShapeMap.<a class="code" href="classllvm_1_1ValueMap.html#ab871e2d0ebded563edfebd6766fc1a04">end</a>())</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;          setShapeInfo(Inst, OpShape-&gt;second);</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (isUniformShape(Inst)) {</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;        <span class="comment">// Find the first operand that has a known shape and use that.</span></div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;        <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a> : Inst-&gt;<a class="code" href="classllvm_1_1User.html#a0b931781aa589c6ebe64a76c1447e5b2">operands</a>()) {</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;          <span class="keyword">auto</span> OpShape = ShapeMap.<a class="code" href="classllvm_1_1ValueMap.html#a7629b8c5f6a6802ee0fdc5c290769692">find</a>(<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>.get());</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;          <span class="keywordflow">if</span> (OpShape != ShapeMap.<a class="code" href="classllvm_1_1ValueMap.html#ab871e2d0ebded563edfebd6766fc1a04">end</a>()) {</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;            Propagate |= setShapeInfo(Inst, OpShape-&gt;second);</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;          }</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;        }</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;      }</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160; </div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;      <span class="keywordflow">if</span> (Propagate) {</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;        NewWorkList.push_back(Inst);</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;        <span class="keywordflow">for</span> (<span class="keyword">auto</span> *<a class="code" href="classllvm_1_1User.html">User</a> : Inst-&gt;<a class="code" href="classllvm_1_1Value.html#ab4e0512c7e1c7adaa56677e3155685f1">users</a>())</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;          <span class="keywordflow">if</span> (ShapeMap.<a class="code" href="classllvm_1_1ValueMap.html#a3b82484785487f544dc6ef1c2b6a0ffd">count</a>(<a class="code" href="classllvm_1_1User.html">User</a>) == 0)</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;            WorkList.push_back(cast&lt;Instruction&gt;(<a class="code" href="classllvm_1_1User.html">User</a>));</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;      }</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;    }</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160; </div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;    <span class="keywordflow">return</span> NewWorkList;</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;  }</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;<span class="comment">  /// Propagate the shape to operands of instructions with shape information.</span></div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;<span class="comment">  /// \p Worklist contains the instruction for which we already know the shape.</span></div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Instruction *, 32&gt;</a></div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;  propagateShapeBackward(<a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;Instruction *&gt;</a> &amp;WorkList) {</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Instruction *, 32&gt;</a> NewWorkList;</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160; </div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;    <span class="keyword">auto</span> pushInstruction = [](<a class="code" href="classllvm_1_1Value.html">Value</a> *V,</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;                              <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;Instruction *&gt;</a> &amp;WorkList) {</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;      <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = dyn_cast&lt;Instruction&gt;(V);</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;        WorkList.push_back(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;    };</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;    <span class="comment">// Pop an element with known shape.  Traverse the operands, if their shape</span></div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;    <span class="comment">// derives from the result shape and is unknown, add it and add them to the</span></div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;    <span class="comment">// worklist.</span></div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Backward-propagate shapes:\n&quot;</span>);</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;    <span class="keywordflow">while</span> (!WorkList.empty()) {</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *V = WorkList.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a0c8ffe664a36e30d49c84d0aded2fe08">pop_back_val</a>();</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160; </div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;      <span class="keywordtype">size_t</span> BeforeProcessingV = WorkList.size();</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;      <span class="keywordflow">if</span> (!isa&lt;Instruction&gt;(V))</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160; </div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *MatrixA;</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *MatrixB;</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>;</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>;</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *K;</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(V, m_Intrinsic&lt;Intrinsic::matrix_multiply&gt;(</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;                       <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(MatrixA), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(MatrixB), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(M),</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;                       <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(K)))) {</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;        <span class="keywordflow">if</span> (setShapeInfo(MatrixA, {<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>, <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>}))</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;          pushInstruction(MatrixA, WorkList);</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160; </div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;        <span class="keywordflow">if</span> (setShapeInfo(MatrixB, {<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>, K}))</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;          pushInstruction(MatrixB, WorkList);</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160; </div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(V, m_Intrinsic&lt;Intrinsic::matrix_transpose&gt;(</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;                              <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(MatrixA), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(M), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>)))) {</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;        <span class="comment">// Flip dimensions.</span></div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;        <span class="keywordflow">if</span> (setShapeInfo(MatrixA, {<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>, <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>}))</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;          pushInstruction(MatrixA, WorkList);</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(V, m_Intrinsic&lt;Intrinsic::matrix_column_major_store&gt;(</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;                              <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(MatrixA), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(),</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;                              <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(M), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>)))) {</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;        <span class="keywordflow">if</span> (setShapeInfo(MatrixA, {<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>, <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>})) {</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;          pushInstruction(MatrixA, WorkList);</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;        }</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (isa&lt;LoadInst&gt;(V) ||</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;                 <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(V, m_Intrinsic&lt;Intrinsic::matrix_column_major_load&gt;())) {</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;        <span class="comment">// Nothing to do, no matrix input.</span></div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (isa&lt;StoreInst&gt;(V)) {</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;        <span class="comment">// Nothing to do.  We forward-propagated to this so we would just</span></div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;        <span class="comment">// backward propagate to an instruction with an already known shape.</span></div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (isUniformShape(V)) {</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;        <span class="comment">// Propagate to all operands.</span></div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;        ShapeInfo Shape = ShapeMap[V];</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Use.html">Use</a> &amp;U : cast&lt;Instruction&gt;(V)-&gt;operands()) {</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;          <span class="keywordflow">if</span> (setShapeInfo(U.get(), Shape))</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;            pushInstruction(U.get(), WorkList);</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;        }</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;      }</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;      <span class="comment">// After we discovered new shape info for new instructions in the</span></div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;      <span class="comment">// worklist, we use their users as seeds for the next round of forward</span></div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;      <span class="comment">// propagation.</span></div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = BeforeProcessingV; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != WorkList.size(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>++)</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1User.html">User</a> *U : WorkList[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>]-&gt;<a class="code" href="IVUsers_8cpp.html#ac2f338c3f467b3d09613e190d73044a5">users</a>())</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;          <span class="keywordflow">if</span> (isa&lt;Instruction&gt;(U) &amp;&amp; V != U)</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;            NewWorkList.push_back(cast&lt;Instruction&gt;(U));</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;    }</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;    <span class="keywordflow">return</span> NewWorkList;</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;  }</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;<span class="comment">  /// (Op0 op Op1)^T -&gt; Op0^T op Op1^T</span></div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;<span class="comment">  /// Transpose \p Op0 and \p Op1 of shape \p Shape0 and \p Shape1, then use</span></div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;<span class="comment">  /// them on both sides of \p Operation.</span></div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *distributeTransposes(</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *Op0, ShapeInfo Shape0, <a class="code" href="classllvm_1_1Value.html">Value</a> *Op1, ShapeInfo Shape1,</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;      <a class="code" href="classllvm_1_1MatrixBuilder.html">MatrixBuilder</a> &amp;<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>,</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;      <a class="code" href="classllvm_1_1function__ref.html">function_ref</a>&lt;<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *(<a class="code" href="classllvm_1_1Value.html">Value</a> *, ShapeInfo, <a class="code" href="classllvm_1_1Value.html">Value</a> *, ShapeInfo)&gt;</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;          <a class="code" href="PPCReduceCRLogicals_8cpp.html#a5b2aa9d3f9f3a7b2d123fef7c5328b8f">Operation</a>) {</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *T0 = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateMatrixTranspose(</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;        Op0, Shape0.NumRows, Shape0.NumColumns, Op0-&gt;<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>() + <span class="stringliteral">&quot;_t&quot;</span>);</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;    <span class="comment">// We are being run after shape prop, add shape for newly created</span></div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;    <span class="comment">// instructions so that we lower them later.</span></div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;    setShapeInfo(T0, Shape0.t());</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="Mips16ISelLowering_8cpp.html#ac16509a75e3d3fc46b9df1726be486ec">T1</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateMatrixTranspose(</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;        Op1, Shape1.NumRows, Shape1.NumColumns, Op1-&gt;<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>() + <span class="stringliteral">&quot;_t&quot;</span>);</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;    setShapeInfo(<a class="code" href="Mips16ISelLowering_8cpp.html#ac16509a75e3d3fc46b9df1726be486ec">T1</a>, Shape1.t());</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="PPCReduceCRLogicals_8cpp.html#a5b2aa9d3f9f3a7b2d123fef7c5328b8f">Operation</a>(T0, Shape0.t(), <a class="code" href="Mips16ISelLowering_8cpp.html#ac16509a75e3d3fc46b9df1726be486ec">T1</a>, Shape1.t());</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;  }</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160; </div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;  <span class="keywordtype">void</span> updateShapeAndReplaceAllUsesWith(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;Old, <a class="code" href="classllvm_1_1Value.html">Value</a> *New) {</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;    <span class="comment">// We need to remove Old from the ShapeMap otherwise RAUW will replace it</span></div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;    <span class="comment">// with New. We should only add New it it supportsShapeInfo so we insert</span></div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;    <span class="comment">// it conditionally instead.</span></div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;    <span class="keyword">auto</span> <a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a> = ShapeMap.<a class="code" href="classllvm_1_1ValueMap.html#a7629b8c5f6a6802ee0fdc5c290769692">find</a>(&amp;Old);</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a> != ShapeMap.<a class="code" href="classllvm_1_1ValueMap.html#ab871e2d0ebded563edfebd6766fc1a04">end</a>()) {</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;      ShapeMap.<a class="code" href="classllvm_1_1ValueMap.html#ae6be28efa794d11d2b1395fa77d7ebef">erase</a>(<a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>);</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;      <span class="keywordflow">if</span> (supportsShapeInfo(New))</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;        ShapeMap.<a class="code" href="classllvm_1_1ValueMap.html#a620815bfbf153caa776f5e207bd8e3c0">insert</a>({<a class="code" href="namespacellvm_1_1ms__demangle.html#a851a17f7dc73f9988807242926dcc645a03c2e7e41ffc181a4e84080b4710e81e">New</a>, <a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>-&gt;second});</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;    }</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;    Old.<a class="code" href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">replaceAllUsesWith</a>(New);</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;  }</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;<span class="comment">  /// Sink a top-level transpose inside matmuls and adds.</span></div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;<span class="comment">  /// This creates and erases instructions as needed, and returns the newly</span></div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;<span class="comment">  /// created instruction while updating the iterator to avoid invalidation. If</span></div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;<span class="comment">  /// this returns nullptr, no new instruction was created.</span></div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *sinkTranspose(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1BasicBlock.html#a6d3231fb84ed4182ec22e9442a87dbf8">BasicBlock::reverse_iterator</a> &amp;II) {</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> &amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> = *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getParent();</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;    <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> <a class="code" href="namespacellvm_1_1AArch64PACKey.html#abf4394f452bde3f544999858d71e4b46a438dbcc76b79fb10acb447ec5d141287">IB</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;    <a class="code" href="classllvm_1_1MatrixBuilder.html">MatrixBuilder</a> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>(<a class="code" href="namespacellvm_1_1AArch64PACKey.html#abf4394f452bde3f544999858d71e4b46a438dbcc76b79fb10acb447ec5d141287">IB</a>);</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160; </div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1X86II.html#a0f8eae4dc1f8612213b096103301fef5ad254d64df655ab661c3c3330610385af">TA</a>, *TAMA, *TAMB;</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;    <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *<a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a>, *K, *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>;</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, m_Intrinsic&lt;Intrinsic::matrix_transpose&gt;(</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;                       <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="namespacellvm_1_1X86II.html#a0f8eae4dc1f8612213b096103301fef5ad254d64df655ab661c3c3330610385af">TA</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a677ac8d99ff3c2d32a95c21de9ed372c">m_ConstantInt</a>(R), <a class="code" href="namespacellvm_1_1PatternMatch.html#a677ac8d99ff3c2d32a95c21de9ed372c">m_ConstantInt</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>))))</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160; </div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;    <span class="comment">// Transpose of a transpose is a nop</span></div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *TATA;</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="namespacellvm_1_1X86II.html#a0f8eae4dc1f8612213b096103301fef5ad254d64df655ab661c3c3330610385af">TA</a>, m_Intrinsic&lt;Intrinsic::matrix_transpose&gt;(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(TATA)))) {</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;      updateShapeAndReplaceAllUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, TATA);</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;      <a class="code" href="LowerMatrixIntrinsics_8cpp.html#a13352a0047c63abbca595b376e7501f8">eraseFromParentAndMove</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, II, <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;      <a class="code" href="LowerMatrixIntrinsics_8cpp.html#a13352a0047c63abbca595b376e7501f8">eraseFromParentAndMove</a>(<a class="code" href="namespacellvm_1_1X86II.html#a0f8eae4dc1f8612213b096103301fef5ad254d64df655ab661c3c3330610385af">TA</a>, II, <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;    }</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160; </div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;    <span class="comment">// k^T -&gt; k</span></div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="LowerMatrixIntrinsics_8cpp.html#a6a2164e5aeea9c3e9a02eab3747efd8c">isSplat</a>(<a class="code" href="namespacellvm_1_1X86II.html#a0f8eae4dc1f8612213b096103301fef5ad254d64df655ab661c3c3330610385af">TA</a>)) {</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;      updateShapeAndReplaceAllUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="namespacellvm_1_1X86II.html#a0f8eae4dc1f8612213b096103301fef5ad254d64df655ab661c3c3330610385af">TA</a>);</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;      <a class="code" href="LowerMatrixIntrinsics_8cpp.html#a13352a0047c63abbca595b376e7501f8">eraseFromParentAndMove</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, II, <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;    }</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160; </div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;    <span class="comment">// (A * B)^t -&gt; B^t * A^t</span></div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;    <span class="comment">// RxK KxC      CxK   KxR</span></div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="namespacellvm_1_1X86II.html#a0f8eae4dc1f8612213b096103301fef5ad254d64df655ab661c3c3330610385af">TA</a>, m_Intrinsic&lt;Intrinsic::matrix_multiply&gt;(</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;                      <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(TAMA), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(TAMB), <a class="code" href="namespacellvm_1_1PatternMatch.html#a677ac8d99ff3c2d32a95c21de9ed372c">m_ConstantInt</a>(R),</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;                      <a class="code" href="namespacellvm_1_1PatternMatch.html#a677ac8d99ff3c2d32a95c21de9ed372c">m_ConstantInt</a>(K), <a class="code" href="namespacellvm_1_1PatternMatch.html#a677ac8d99ff3c2d32a95c21de9ed372c">m_ConstantInt</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)))) {</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;      <span class="keyword">auto</span> NewInst = distributeTransposes(</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;          TAMB, {K, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>}, TAMA, {<a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a>, K}, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>,</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;          [&amp;](<a class="code" href="classllvm_1_1Value.html">Value</a> *T0, ShapeInfo Shape0, <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="Mips16ISelLowering_8cpp.html#ac16509a75e3d3fc46b9df1726be486ec">T1</a>, ShapeInfo Shape1) {</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateMatrixMultiply(T0, <a class="code" href="Mips16ISelLowering_8cpp.html#ac16509a75e3d3fc46b9df1726be486ec">T1</a>, Shape0.NumRows,</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;                                                Shape0.NumColumns,</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;                                                Shape1.NumColumns, <span class="stringliteral">&quot;mmul&quot;</span>);</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;          });</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;      updateShapeAndReplaceAllUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, NewInst);</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;      <a class="code" href="LowerMatrixIntrinsics_8cpp.html#a13352a0047c63abbca595b376e7501f8">eraseFromParentAndMove</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, II, <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;      <a class="code" href="LowerMatrixIntrinsics_8cpp.html#a13352a0047c63abbca595b376e7501f8">eraseFromParentAndMove</a>(<a class="code" href="namespacellvm_1_1X86II.html#a0f8eae4dc1f8612213b096103301fef5ad254d64df655ab661c3c3330610385af">TA</a>, II, <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;      <span class="keywordflow">return</span> NewInst;</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;    }</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160; </div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;    <span class="comment">// Same as above, but with a mul, which occurs when multiplied</span></div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;    <span class="comment">// with a scalar.</span></div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;    <span class="comment">// (A * k)^t -&gt; A^t * k</span></div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;    <span class="comment">//  R  x  C     RxC</span></div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="namespacellvm_1_1X86II.html#a0f8eae4dc1f8612213b096103301fef5ad254d64df655ab661c3c3330610385af">TA</a>, <a class="code" href="LowerMatrixIntrinsics_8cpp.html#ad3ea8483bb698ffc64dc1adf7c84a098">m_AnyMul</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(TAMA), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(TAMB))) &amp;&amp;</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;        (<a class="code" href="LowerMatrixIntrinsics_8cpp.html#a6a2164e5aeea9c3e9a02eab3747efd8c">isSplat</a>(TAMA) || <a class="code" href="LowerMatrixIntrinsics_8cpp.html#a6a2164e5aeea9c3e9a02eab3747efd8c">isSplat</a>(TAMB))) {</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;      <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> LocalBuilder(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;      <span class="comment">// We know that the transposed operand is of shape RxC.</span></div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;      <span class="comment">// An when multiplied with a scalar, the shape is preserved.</span></div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;      <span class="keyword">auto</span> NewInst = distributeTransposes(</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;          TAMA, {<a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a>, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>}, TAMB, {<a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a>, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>}, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>,</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;          [&amp;](<a class="code" href="classllvm_1_1Value.html">Value</a> *T0, ShapeInfo Shape0, <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="Mips16ISelLowering_8cpp.html#ac16509a75e3d3fc46b9df1726be486ec">T1</a>, ShapeInfo Shape1) {</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;            <span class="keywordtype">bool</span> IsFP = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getType()-&gt;isFPOrFPVectorTy();</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;            <span class="keyword">auto</span> *<a class="code" href="X86PartialReduction_8cpp.html#ae0f503db91504a3f3440ab81260e4134">Mul</a> = IsFP ? LocalBuilder.CreateFMul(T0, <a class="code" href="Mips16ISelLowering_8cpp.html#ac16509a75e3d3fc46b9df1726be486ec">T1</a>, <span class="stringliteral">&quot;mmul&quot;</span>)</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;                             : LocalBuilder.CreateMul(T0, <a class="code" href="Mips16ISelLowering_8cpp.html#ac16509a75e3d3fc46b9df1726be486ec">T1</a>, <span class="stringliteral">&quot;mmul&quot;</span>);</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;            <span class="keyword">auto</span> *<a class="code" href="namespacellvm_1_1ms__demangle.html#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a> = cast&lt;Instruction&gt;(Mul);</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;            setShapeInfo(Result, Shape0);</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1ms__demangle.html#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a>;</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;          });</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;      updateShapeAndReplaceAllUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, NewInst);</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;      <a class="code" href="LowerMatrixIntrinsics_8cpp.html#a13352a0047c63abbca595b376e7501f8">eraseFromParentAndMove</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, II, <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;      <a class="code" href="LowerMatrixIntrinsics_8cpp.html#a13352a0047c63abbca595b376e7501f8">eraseFromParentAndMove</a>(<a class="code" href="namespacellvm_1_1X86II.html#a0f8eae4dc1f8612213b096103301fef5ad254d64df655ab661c3c3330610385af">TA</a>, II, <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;      <span class="keywordflow">return</span> NewInst;</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;    }</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160; </div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;    <span class="comment">// (A + B)^t -&gt; A^t + B^t</span></div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;    <span class="comment">// RxC RxC      CxR   CxR</span></div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="namespacellvm_1_1X86II.html#a0f8eae4dc1f8612213b096103301fef5ad254d64df655ab661c3c3330610385af">TA</a>, <a class="code" href="LowerMatrixIntrinsics_8cpp.html#a93a97c876de2b13925eedd660ac411f9">m_AnyAdd</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(TAMA), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(TAMB)))) {</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;      <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> LocalBuilder(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;      <span class="keyword">auto</span> NewInst = distributeTransposes(</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;          TAMA, {<a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a>, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>}, TAMB, {<a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a>, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>}, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>,</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;          [&amp;](<a class="code" href="classllvm_1_1Value.html">Value</a> *T0, ShapeInfo Shape0, <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="Mips16ISelLowering_8cpp.html#ac16509a75e3d3fc46b9df1726be486ec">T1</a>, ShapeInfo Shape1) {</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;            <span class="keyword">auto</span> *<a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eaf552e181879ad14956985859308d77d9">FAdd</a> =</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;                cast&lt;Instruction&gt;(LocalBuilder.CreateFAdd(T0, <a class="code" href="Mips16ISelLowering_8cpp.html#ac16509a75e3d3fc46b9df1726be486ec">T1</a>, <span class="stringliteral">&quot;mfadd&quot;</span>));</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;            setShapeInfo(FAdd, Shape0);</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eaf552e181879ad14956985859308d77d9">FAdd</a>;</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;          });</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;      updateShapeAndReplaceAllUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, NewInst);</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;      <a class="code" href="LowerMatrixIntrinsics_8cpp.html#a13352a0047c63abbca595b376e7501f8">eraseFromParentAndMove</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, II, <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;      <a class="code" href="LowerMatrixIntrinsics_8cpp.html#a13352a0047c63abbca595b376e7501f8">eraseFromParentAndMove</a>(<a class="code" href="namespacellvm_1_1X86II.html#a0f8eae4dc1f8612213b096103301fef5ad254d64df655ab661c3c3330610385af">TA</a>, II, <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;      <span class="keywordflow">return</span> NewInst;</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;    }</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160; </div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;  }</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160; </div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;  <span class="keywordtype">void</span> liftTranspose(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;    <span class="comment">// Erase dead Instructions after lifting transposes from binops.</span></div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;    <span class="keyword">auto</span> CleanupBinOp = [](<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="code" href="classT.html">T</a>, <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>, <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>) {</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classT.html">T</a>.use_empty())</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;        <a class="code" href="classT.html">T</a>.eraseFromParent();</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>-&gt;use_empty())</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;        cast&lt;Instruction&gt;(A)-&gt;eraseFromParent();</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;      <span class="keywordflow">if</span> (A != <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a> &amp;&amp; <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>-&gt;use_empty())</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;        cast&lt;Instruction&gt;(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>)-&gt;eraseFromParent();</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;    };</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160; </div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>, *<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, *AT, *<a class="code" href="BitTracker_8cpp.html#ae3e523a6a11b1e24604b40363978a62a">BT</a>;</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;    <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *<a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a>, *K, *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>;</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;    <span class="comment">// A^t * B ^t -&gt; (B * A)^t</span></div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, m_Intrinsic&lt;Intrinsic::matrix_multiply&gt;(</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;                      <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a677ac8d99ff3c2d32a95c21de9ed372c">m_ConstantInt</a>(R),</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;                      <a class="code" href="namespacellvm_1_1PatternMatch.html#a677ac8d99ff3c2d32a95c21de9ed372c">m_ConstantInt</a>(K), <a class="code" href="namespacellvm_1_1PatternMatch.html#a677ac8d99ff3c2d32a95c21de9ed372c">m_ConstantInt</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>))) &amp;&amp;</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;        <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(A, m_Intrinsic&lt;Intrinsic::matrix_transpose&gt;(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(AT))) &amp;&amp;</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;        <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, m_Intrinsic&lt;Intrinsic::matrix_transpose&gt;(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>((<a class="code" href="structllvm_1_1BitTracker.html">BT</a>))))) {</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;      <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> <a class="code" href="namespacellvm_1_1AArch64PACKey.html#abf4394f452bde3f544999858d71e4b46a438dbcc76b79fb10acb447ec5d141287">IB</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;      <a class="code" href="classllvm_1_1MatrixBuilder.html">MatrixBuilder</a> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>(<a class="code" href="namespacellvm_1_1AArch64PACKey.html#abf4394f452bde3f544999858d71e4b46a438dbcc76b79fb10acb447ec5d141287">IB</a>);</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateMatrixMultiply(</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;          <a class="code" href="structllvm_1_1BitTracker.html">BT</a>, AT, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;getZExtValue(), K-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#ac09a21c371a9c535cbc13e8f82503aec">getZExtValue</a>(), <a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a>-&gt;getZExtValue());</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;      setShapeInfo(M, {<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, <a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a>});</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;      <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *NewInst = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateMatrixTranspose(M, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;getZExtValue(),</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;                                                           <a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a>-&gt;getZExtValue());</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;      updateShapeAndReplaceAllUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, NewInst);</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;      CleanupBinOp(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, A, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;    }</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;    <span class="comment">// A^t + B ^t -&gt; (A + B)^t</span></div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a5e3486337f60bed631149fb6b141bc3e">m_FAdd</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>))) &amp;&amp;</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;             <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(A, m_Intrinsic&lt;Intrinsic::matrix_transpose&gt;(</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;                          <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(AT), <a class="code" href="namespacellvm_1_1PatternMatch.html#a677ac8d99ff3c2d32a95c21de9ed372c">m_ConstantInt</a>(R), <a class="code" href="namespacellvm_1_1PatternMatch.html#a677ac8d99ff3c2d32a95c21de9ed372c">m_ConstantInt</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>))) &amp;&amp;</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;             <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, m_Intrinsic&lt;Intrinsic::matrix_transpose&gt;(</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;                          <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="structllvm_1_1BitTracker.html">BT</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a677ac8d99ff3c2d32a95c21de9ed372c">m_ConstantInt</a>(R), <a class="code" href="namespacellvm_1_1PatternMatch.html#a677ac8d99ff3c2d32a95c21de9ed372c">m_ConstantInt</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)))) {</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;      <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a2b016c207343046b2bac45e69e76dcec">Add</a> = cast&lt;Instruction&gt;(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateFAdd(AT, <a class="code" href="structllvm_1_1BitTracker.html">BT</a>, <span class="stringliteral">&quot;mfadd&quot;</span>));</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;      setShapeInfo(Add, {<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, <a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a>});</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;      <a class="code" href="classllvm_1_1MatrixBuilder.html">MatrixBuilder</a> MBuilder(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>);</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;      <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *NewInst = MBuilder.CreateMatrixTranspose(</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;          Add, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;getZExtValue(), <a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a>-&gt;getZExtValue(), <span class="stringliteral">&quot;mfadd_t&quot;</span>);</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;      updateShapeAndReplaceAllUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, NewInst);</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;      CleanupBinOp(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, A, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;    }</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;  }</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;<span class="comment">  /// Try moving transposes in order to fold them away or into multiplies.</span></div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> optimizeTransposes() {</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;    <span class="comment">// First sink all transposes inside matmuls and adds, hoping that we end up</span></div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;    <span class="comment">// with NN, NT or TN variants.</span></div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> &amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> : <a class="code" href="namespacellvm.html#a6b0ac1fa4f05de76413c5e0ca6334035">reverse</a>(Func)) {</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">auto</span> II = <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>.rbegin(); II != <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>.rend();) {</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;        <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = *II;</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;        <span class="comment">// We may remove II.  By default continue on the next/prev instruction.</span></div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;        ++II;</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *NewInst = sinkTranspose(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, II))</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;          II = std::next(<a class="code" href="classllvm_1_1BasicBlock.html#a6d3231fb84ed4182ec22e9442a87dbf8">BasicBlock::reverse_iterator</a>(NewInst));</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;      }</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;    }</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160; </div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;    <span class="comment">// If we have a TT matmul or a TT add, lift the transpose. We may be able</span></div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;    <span class="comment">// to fold into consuming multiply or add.</span></div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> &amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> : Func) {</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : <a class="code" href="namespacellvm.html#a8154638df88e4eaa568b67b23d463dac">llvm::make_early_inc_range</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>)) {</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;        liftTranspose(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;      }</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;    }</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;  }</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160; </div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;  <span class="keywordtype">bool</span> Visit() {</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Instruction *, 32&gt;</a> WorkList;</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160; </div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;    <span class="comment">// Initially only the shape of matrix intrinsics is known.</span></div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;    <span class="comment">// Initialize the work list with ops carrying shape information.</span></div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> &amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> : Func)</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;Inst : <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) {</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;        <a class="code" href="classllvm_1_1IntrinsicInst.html">IntrinsicInst</a> *II = dyn_cast&lt;IntrinsicInst&gt;(&amp;Inst);</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;        <span class="keywordflow">if</span> (!II)</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160; </div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;        <span class="keywordflow">switch</span> (II-&gt;<a class="code" href="classllvm_1_1IntrinsicInst.html#a7ff64b3625b6f9020556ed05a5f72af4">getIntrinsicID</a>()) {</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;        <span class="keywordflow">case</span> Intrinsic::matrix_multiply:</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;        <span class="keywordflow">case</span> Intrinsic::matrix_transpose:</div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;        <span class="keywordflow">case</span> Intrinsic::matrix_column_major_load:</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;        <span class="keywordflow">case</span> Intrinsic::matrix_column_major_store:</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;          WorkList.push_back(&amp;Inst);</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;        }</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;      }</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160; </div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;    <span class="comment">// Avoid unnecessary work if there are no matrix intrinsics in the function.</span></div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;    <span class="keywordflow">if</span> (WorkList.empty())</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160; </div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;    <span class="comment">// Propagate shapes until nothing changes any longer.</span></div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;    <span class="keywordflow">while</span> (!WorkList.empty()) {</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;      WorkList = propagateShapeForward(WorkList);</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;      WorkList = propagateShapeBackward(WorkList);</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;    }</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160; </div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;    <span class="keywordflow">if</span> (!isMinimal()) {</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;      optimizeTransposes();</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="LowerMatrixIntrinsics_8cpp.html#a2bae6e2e8d26e2e99b77d7bf9efbd5d1">PrintAfterTransposeOpt</a>) {</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;        <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Dump after matrix transpose optimization:\n&quot;</span>;</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;        <a class="code" href="namespacellvm_1_1ifs.html#adfe04e1a9cc096fb571e8372debaa67ea00d0b4f2d7dcdaaef835b97cf5d1e0df">Func</a>.print(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>());</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;      }</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;    }</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160; </div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;    <span class="keywordtype">bool</span> Changed = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;CallInst *, 16&gt;</a> MaybeFusableInsts;</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Instruction *, 16&gt;</a> MatrixInsts;</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160; </div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;    <span class="comment">// First, collect all instructions with shape information and candidates for</span></div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;    <span class="comment">// fusion (currently only matrix multiplies).</span></div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;    <a class="code" href="classllvm_1_1ReversePostOrderTraversal.html">ReversePostOrderTraversal&lt;Function *&gt;</a> RPOT(&amp;Func);</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> : RPOT)</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) {</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;        <span class="keywordflow">if</span> (ShapeMap.<a class="code" href="classllvm_1_1ValueMap.html#a7629b8c5f6a6802ee0fdc5c290769692">find</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) == ShapeMap.<a class="code" href="classllvm_1_1ValueMap.html#ab871e2d0ebded563edfebd6766fc1a04">end</a>())</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, m_Intrinsic&lt;Intrinsic::matrix_multiply&gt;()))</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;          MaybeFusableInsts.push_back(cast&lt;CallInst&gt;(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>));</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;        MatrixInsts.push_back(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;      }</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160; </div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;    <span class="comment">// Second, try to fuse candidates.</span></div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;    <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;Instruction *, 16&gt;</a> FusedInsts;</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *CI : MaybeFusableInsts)</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;      LowerMatrixMultiplyFused(CI, FusedInsts);</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;    Changed = !FusedInsts.<a class="code" href="classllvm_1_1SmallPtrSetImplBase.html#af8a50544090e81ac83601aff8f4b0142">empty</a>();</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160; </div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;    <span class="comment">// Third, lower remaining instructions with shape information.</span></div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Inst : MatrixInsts) {</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;      <span class="keywordflow">if</span> (FusedInsts.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a1f475b0df44ebd7169e720fa1bf9169e">count</a>(Inst))</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160; </div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;      <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>(Inst);</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160; </div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *CInst = dyn_cast&lt;CallInst&gt;(Inst))</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;        Changed |= VisitCallInst(CInst);</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160; </div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *Op1;</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *Op2;</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> *BinOp = dyn_cast&lt;BinaryOperator&gt;(Inst))</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;        Changed |= VisitBinaryOperator(BinOp);</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> *UnOp = dyn_cast&lt;UnaryOperator&gt;(Inst))</div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;        Changed |= VisitUnaryOperator(UnOp);</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Inst, <a class="code" href="namespacellvm_1_1PatternMatch.html#a78cd22f497c1e81c4d8a5e9073ef5a24">m_Load</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(Op1))))</div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;        Changed |= VisitLoad(cast&lt;LoadInst&gt;(Inst), Op1, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>);</div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Inst, <a class="code" href="namespacellvm_1_1PatternMatch.html#ab00c67eb2b92ca056ceefc07c67f46f0">m_Store</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(Op1), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(Op2))))</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;        Changed |= VisitStore(cast&lt;StoreInst&gt;(Inst), Op1, Op2, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>);</div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;    }</div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160; </div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;    <span class="keywordflow">if</span> (ORE) {</div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;      RemarkGenerator RemarkGen(Inst2ColumnMatrix, *ORE, Func);</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;      RemarkGen.emitRemarks();</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;    }</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160; </div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;    <span class="comment">// Delete the instructions backwards, as it has a reduced likelihood of</span></div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;    <span class="comment">// having to update as many def-use and use-def chains.</span></div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;    <span class="comment">// Because we add to ToRemove during fusion we can&#39;t guarantee that defs</span></div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;    <span class="comment">// are before uses.  Change uses to poison temporarily as these should get</span></div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;    <span class="comment">// removed as well.</span></div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;    <span class="comment">// For verification, we keep track of where we changed uses to poison in</span></div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;    <span class="comment">// PoisonedInsts and then check that we in fact remove them.</span></div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;    <a class="code" href="classllvm_1_1SmallSet.html">SmallSet&lt;Instruction *, 16&gt;</a> PoisonedInsts;</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> *Inst : <a class="code" href="namespacellvm.html#a6b0ac1fa4f05de76413c5e0ca6334035">reverse</a>(<a class="code" href="ARMLowOverheadLoops_8cpp.html#a3bf42baf773b375802538951c88d8e12">ToRemove</a>)) {</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Use.html">Use</a> &amp;U : <a class="code" href="namespacellvm.html#a8154638df88e4eaa568b67b23d463dac">llvm::make_early_inc_range</a>(Inst-&gt;<a class="code" href="classllvm_1_1Value.html#aecb93439702247fe5353a9966f7cefcd">uses</a>())) {</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;        <span class="keywordflow">if</span> (<span class="keyword">auto</span> *Poisoned = dyn_cast&lt;Instruction&gt;(U.getUser()))</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;          PoisonedInsts.<a class="code" href="classllvm_1_1SmallSet.html#a1679469af9bb8ccfbe98441fb8228c79">insert</a>(Poisoned);</div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;        U.set(<a class="code" href="classllvm_1_1PoisonValue.html#a1bf08613fb664a2e377a9a72c59a6b66">PoisonValue::get</a>(Inst-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()));</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;      }</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;      Inst-&gt;<a class="code" href="classllvm_1_1Instruction.html#ae6b978645b8ac72d1a35e1298ffdd4f0">eraseFromParent</a>();</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;      PoisonedInsts.<a class="code" href="classllvm_1_1SmallSet.html#a75a2d2ad3b3dce6702750d570ee8f343">erase</a>(Inst);</div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;    }</div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;    <span class="keywordflow">if</span> (!PoisonedInsts.<a class="code" href="classllvm_1_1SmallSet.html#a34384400167eb6ebf71fa89d98ba03bc">empty</a>()) {</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;      <span class="comment">// If we didn&#39;t remove all poisoned instructions, it&#39;s a hard error.</span></div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;      <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Poisoned but present instructions:\n&quot;</span>;</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">auto</span> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : PoisonedInsts)</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;        <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;      <a class="code" href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Poisoned but instruction not removed&quot;</span>);</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;    }</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160; </div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;    <span class="keywordflow">return</span> Changed;</div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;  }</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;<span class="comment">  /// Turns \p BasePtr into an elementwise pointer to \p EltType.</span></div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1Value.html">Value</a> *createElementPtr(<a class="code" href="classllvm_1_1Value.html">Value</a> *BasePtr, <a class="code" href="classllvm_1_1Type.html">Type</a> *EltType, <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> &amp;<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>) {</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;    <span class="keywordtype">unsigned</span> AS = cast&lt;PointerType&gt;(<a class="code" href="namespacellvm_1_1codeview.html#aa8c11d016a2dd473a4cf0ed1da777f5ea67f23a49a4828b272554feea07834f7d">BasePtr</a>-&gt;getType())-&gt;getAddressSpace();</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *EltPtrType = <a class="code" href="classllvm_1_1PointerType.html#a050a395d1656e546679d8b144d951bb2">PointerType::get</a>(EltType, AS);</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreatePointerCast(BasePtr, EltPtrType);</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;  }</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;<span class="comment">  /// Replace intrinsic calls</span></div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;<span class="comment"></span>  <span class="keywordtype">bool</span> VisitCallInst(<a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *Inst) {</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;    <span class="keywordflow">if</span> (!Inst-&gt;<a class="code" href="classllvm_1_1CallBase.html#a83b8c9e572130f403445c0b0f69b837c">getCalledFunction</a>() || !Inst-&gt;<a class="code" href="classllvm_1_1CallBase.html#a83b8c9e572130f403445c0b0f69b837c">getCalledFunction</a>()-&gt;<a class="code" href="classllvm_1_1Function.html#a900a32da3983469187b1848189681705">isIntrinsic</a>())</div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160; </div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;    <span class="keywordflow">switch</span> (Inst-&gt;<a class="code" href="classllvm_1_1CallBase.html#a83b8c9e572130f403445c0b0f69b837c">getCalledFunction</a>()-&gt;<a class="code" href="classllvm_1_1Function.html#a4d0a7baab8d078065b2de10e3460892a">getIntrinsicID</a>()) {</div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;    <span class="keywordflow">case</span> Intrinsic::matrix_multiply:</div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;      LowerMultiply(Inst);</div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;    <span class="keywordflow">case</span> Intrinsic::matrix_transpose:</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;      LowerTranspose(Inst);</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;    <span class="keywordflow">case</span> Intrinsic::matrix_column_major_load:</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;      LowerColumnMajorLoad(Inst);</div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;    <span class="keywordflow">case</span> Intrinsic::matrix_column_major_store:</div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;      LowerColumnMajorStore(Inst);</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;    }</div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;  }</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;<span class="comment">  /// Compute the alignment for a column/row \p Idx with \p Stride between them.</span></div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;<span class="comment">  /// The address at \p Idx == 0 has alignment \p A. If \p Stride is a</span></div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;<span class="comment">  /// ConstantInt, reduce the initial alignment based on the byte offset. For</span></div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;<span class="comment">  /// non-ConstantInt strides, return the common alignment of the initial</span></div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;<span class="comment">  /// alignment and the element size in bytes.</span></div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;<span class="comment"></span>  <a class="code" href="structllvm_1_1Align.html">Align</a> getAlignForIndex(<span class="keywordtype">unsigned</span> Idx, <a class="code" href="classllvm_1_1Value.html">Value</a> *Stride, <a class="code" href="classllvm_1_1Type.html">Type</a> *ElementTy,</div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;                         <a class="code" href="structllvm_1_1MaybeAlign.html">MaybeAlign</a> A)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;    <a class="code" href="structllvm_1_1Align.html">Align</a> InitialAlign = <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getValueOrABITypeAlignment(A, ElementTy);</div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;    <span class="keywordflow">if</span> (Idx == 0)</div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;      <span class="keywordflow">return</span> InitialAlign;</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160; </div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;    <a class="code" href="classllvm_1_1TypeSize.html">TypeSize</a> ElementSizeInBits = <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getTypeSizeInBits(ElementTy);</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> *ConstStride = dyn_cast&lt;ConstantInt&gt;(Stride)) {</div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;      <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> StrideInBytes =</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;          ConstStride-&gt;<a class="code" href="classllvm_1_1APInt.html#a217e0207d9cc8e046c2dccbf0e4bb198">getZExtValue</a>() * ElementSizeInBits / 8;</div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#acd6aa057934751aaac54e5c18bcc18eb">commonAlignment</a>(InitialAlign, Idx * StrideInBytes);</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;    }</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#acd6aa057934751aaac54e5c18bcc18eb">commonAlignment</a>(InitialAlign, ElementSizeInBits / 8);</div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;  }</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;<span class="comment">  /// Load a matrix with \p Shape starting at \p Ptr and using \p Stride between</span></div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;<span class="comment">  /// vectors.</span></div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;<span class="comment"></span>  MatrixTy loadMatrix(<a class="code" href="classllvm_1_1Type.html">Type</a> *Ty, <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>, <a class="code" href="structllvm_1_1MaybeAlign.html">MaybeAlign</a> MAlign, <a class="code" href="classllvm_1_1Value.html">Value</a> *Stride,</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;                      <span class="keywordtype">bool</span> IsVolatile, ShapeInfo Shape, <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> &amp;<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>) {</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;    <span class="keyword">auto</span> *VType = cast&lt;VectorType&gt;(Ty);</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *EltTy = VType-&gt;<a class="code" href="classllvm_1_1VectorType.html#a12e23c3d619db313388fe11dc76eb23f">getElementType</a>();</div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *VecTy = <a class="code" href="classllvm_1_1FixedVectorType.html#af9a870d5df50fe0133a410b7c9114c80">FixedVectorType::get</a>(EltTy, Shape.getStride());</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *EltPtr = createElementPtr(<a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>, EltTy, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>);</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;    MatrixTy <a class="code" href="namespacellvm_1_1ms__demangle.html#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a>;</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0, <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = Shape.getNumVectors(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> &lt; <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a> = computeVectorAddr(</div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;          EltPtr, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getIntN(Stride-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>(), <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>),</div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;          Stride, Shape.getStride(), EltTy, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>);</div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="README__P9_8txt.html#ae6881514a39f1bcf75ad62e5188700a4">Vector</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAlignedLoad(</div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;          VecTy, <a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>, getAlignForIndex(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, Stride, EltTy, MAlign),</div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;          IsVolatile, <span class="stringliteral">&quot;col.load&quot;</span>);</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160; </div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;      <a class="code" href="namespacellvm_1_1ms__demangle.html#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a>.addVector(Vector);</div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;    }</div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1ms__demangle.html#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a>.addNumLoads(getNumOps(<a class="code" href="namespacellvm_1_1ms__demangle.html#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a>.getVectorTy()) *</div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;                              <a class="code" href="namespacellvm_1_1ms__demangle.html#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a>.getNumVectors());</div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;  }</div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;<span class="comment">  /// Loads a sub-matrix with shape \p ResultShape from a \p R x \p C matrix,</span></div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;<span class="comment">  /// starting at \p MatrixPtr[I][J].</span></div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;<span class="comment"></span>  MatrixTy loadMatrix(<a class="code" href="classllvm_1_1Value.html">Value</a> *MatrixPtr, <a class="code" href="structllvm_1_1MaybeAlign.html">MaybeAlign</a> <a class="code" href="structllvm_1_1Align.html">Align</a>, <span class="keywordtype">bool</span> IsVolatile,</div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;                      ShapeInfo MatrixShape, <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1Value.html">Value</a> *J,</div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;                      ShapeInfo ResultShape, <a class="code" href="classllvm_1_1Type.html">Type</a> *EltTy,</div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;                      <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> &amp;<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>) {</div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160; </div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1AMDGPU_1_1Hwreg.html#a6110fc30bc7311a6cf99814530362e21">Offset</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAdd(</div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;        <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateMul(J, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getInt64(MatrixShape.getStride())), <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160; </div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;    <span class="keywordtype">unsigned</span> AS = cast&lt;PointerType&gt;(MatrixPtr-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>())-&gt;getAddressSpace();</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *EltPtr =</div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;        <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreatePointerCast(MatrixPtr, <a class="code" href="classllvm_1_1PointerType.html#a050a395d1656e546679d8b144d951bb2">PointerType::get</a>(EltTy, AS));</div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *TileStart = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateGEP(EltTy, EltPtr, Offset);</div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;    <span class="keyword">auto</span> *TileTy = <a class="code" href="classllvm_1_1FixedVectorType.html#af9a870d5df50fe0133a410b7c9114c80">FixedVectorType::get</a>(EltTy, ResultShape.NumRows *</div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;                                                   ResultShape.NumColumns);</div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *TilePtrTy = <a class="code" href="classllvm_1_1PointerType.html#a050a395d1656e546679d8b144d951bb2">PointerType::get</a>(TileTy, AS);</div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *TilePtr =</div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;        <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreatePointerCast(TileStart, TilePtrTy, <span class="stringliteral">&quot;col.cast&quot;</span>);</div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160; </div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;    <span class="keywordflow">return</span> loadMatrix(TileTy, TilePtr, <a class="code" href="structllvm_1_1Align.html">Align</a>,</div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;                      <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getInt64(MatrixShape.getStride()), IsVolatile,</div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;                      ResultShape, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>);</div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;  }</div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;<span class="comment">  /// Lower a load instruction with shape information.</span></div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> <a class="code" href="X86ISelLowering_8cpp.html#a47413709ef916baf36607da462d93ccc">LowerLoad</a>(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Inst, <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>, <a class="code" href="structllvm_1_1MaybeAlign.html">MaybeAlign</a> <a class="code" href="structllvm_1_1Align.html">Align</a>, <a class="code" href="classllvm_1_1Value.html">Value</a> *Stride,</div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;                 <span class="keywordtype">bool</span> IsVolatile, ShapeInfo Shape) {</div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;    <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>(Inst);</div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;    finalizeLowering(Inst,</div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;                     loadMatrix(Inst-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>(), <a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>, <a class="code" href="structllvm_1_1Align.html">Align</a>, Stride, IsVolatile,</div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;                                Shape, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>),</div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;                     <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>);</div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;  }</div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;<span class="comment">  /// Lowers llvm.matrix.column.major.load.</span></div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;<span class="comment">  ///</span></div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;<span class="comment">  /// The intrinsic loads a matrix from memory using a stride between columns.</span></div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> LowerColumnMajorLoad(<a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *Inst) {</div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="LowerMatrixIntrinsics_8cpp.html#ab891e50c619f81260e857e297f460fe5">MatrixLayout</a> == <a class="code" href="LowerMatrixIntrinsics_8cpp.html#abf221949fc61d1494af06b50731bdc90af695e73139b1c1d06d77655104370f00">MatrixLayoutTy::ColumnMajor</a> &amp;&amp;</div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;           <span class="stringliteral">&quot;Intrinsic only supports column-major layout!&quot;</span>);</div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a> = Inst-&gt;<a class="code" href="classllvm_1_1CallBase.html#ab2caa29167597390ab2fc3cf30d70389">getArgOperand</a>(0);</div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Stride = Inst-&gt;<a class="code" href="classllvm_1_1CallBase.html#ab2caa29167597390ab2fc3cf30d70389">getArgOperand</a>(1);</div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;    <a class="code" href="X86ISelLowering_8cpp.html#a47413709ef916baf36607da462d93ccc">LowerLoad</a>(Inst, <a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>, Inst-&gt;<a class="code" href="classllvm_1_1CallBase.html#a7713a45c8983df00c3975444b94e69ae">getParamAlign</a>(0), Stride,</div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;              cast&lt;ConstantInt&gt;(Inst-&gt;<a class="code" href="classllvm_1_1CallBase.html#ab2caa29167597390ab2fc3cf30d70389">getArgOperand</a>(2))-&gt;isOne(),</div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;              {Inst-&gt;getArgOperand(3), Inst-&gt;getArgOperand(4)});</div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;  }</div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;<span class="comment">  /// Stores a sub-matrix \p StoreVal into the \p R x \p C matrix starting at \p</span></div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;<span class="comment">  /// MatrixPtr[I][J].</span></div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> storeMatrix(<span class="keyword">const</span> MatrixTy &amp;StoreVal, <a class="code" href="classllvm_1_1Value.html">Value</a> *MatrixPtr,</div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;                   <a class="code" href="structllvm_1_1MaybeAlign.html">MaybeAlign</a> MAlign, <span class="keywordtype">bool</span> IsVolatile, ShapeInfo MatrixShape,</div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;                   <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1Value.html">Value</a> *J, <a class="code" href="classllvm_1_1Type.html">Type</a> *EltTy, <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> &amp;<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>) {</div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1AMDGPU_1_1Hwreg.html#a6110fc30bc7311a6cf99814530362e21">Offset</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAdd(</div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;        <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateMul(J, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getInt64(MatrixShape.getStride())), <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160; </div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;    <span class="keywordtype">unsigned</span> AS = cast&lt;PointerType&gt;(MatrixPtr-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>())-&gt;getAddressSpace();</div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *EltPtr =</div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;        <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreatePointerCast(MatrixPtr, <a class="code" href="classllvm_1_1PointerType.html#a050a395d1656e546679d8b144d951bb2">PointerType::get</a>(EltTy, AS));</div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *TileStart = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateGEP(EltTy, EltPtr, Offset);</div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;    <span class="keyword">auto</span> *TileTy = <a class="code" href="classllvm_1_1FixedVectorType.html#af9a870d5df50fe0133a410b7c9114c80">FixedVectorType::get</a>(EltTy, StoreVal.getNumRows() *</div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;                                                   StoreVal.getNumColumns());</div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *TilePtrTy = <a class="code" href="classllvm_1_1PointerType.html#a050a395d1656e546679d8b144d951bb2">PointerType::get</a>(TileTy, AS);</div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *TilePtr =</div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;        <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreatePointerCast(TileStart, TilePtrTy, <span class="stringliteral">&quot;col.cast&quot;</span>);</div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160; </div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;    storeMatrix(TileTy, StoreVal, TilePtr, MAlign,</div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;                <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getInt64(MatrixShape.getStride()), IsVolatile, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>);</div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;  }</div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;<span class="comment">  /// Store matrix \p StoreVal starting at \p Ptr and using \p Stride between</span></div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;<span class="comment">  /// vectors.</span></div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;<span class="comment"></span>  MatrixTy storeMatrix(<a class="code" href="classllvm_1_1Type.html">Type</a> *Ty, MatrixTy StoreVal, <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>,</div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;                       <a class="code" href="structllvm_1_1MaybeAlign.html">MaybeAlign</a> MAlign, <a class="code" href="classllvm_1_1Value.html">Value</a> *Stride, <span class="keywordtype">bool</span> IsVolatile,</div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;                       <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> &amp;<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>) {</div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;    <span class="keyword">auto</span> VType = cast&lt;VectorType&gt;(Ty);</div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *EltPtr = createElementPtr(<a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>, VType-&gt;<a class="code" href="classllvm_1_1VectorType.html#a12e23c3d619db313388fe11dc76eb23f">getElementType</a>(), <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>);</div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> Vec : <a class="code" href="namespacellvm.html#a7b2175e18ff52174fad26b6b68818564">enumerate</a>(StoreVal.vectors())) {</div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a> = computeVectorAddr(</div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;          EltPtr,</div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;          <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getIntN(Stride-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>(),</div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;                          Vec.index()),</div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;          Stride, StoreVal.getStride(), VType-&gt;<a class="code" href="classllvm_1_1VectorType.html#a12e23c3d619db313388fe11dc76eb23f">getElementType</a>(), <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>);</div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;      <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAlignedStore(Vec.value(), <a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>,</div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;                                 getAlignForIndex(Vec.index(), Stride,</div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;                                                  VType-&gt;<a class="code" href="classllvm_1_1VectorType.html#a12e23c3d619db313388fe11dc76eb23f">getElementType</a>(),</div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;                                                  MAlign),</div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;                                 IsVolatile);</div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;    }</div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;    <span class="keywordflow">return</span> MatrixTy().addNumStores(getNumOps(StoreVal.getVectorTy()) *</div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;                                   StoreVal.getNumVectors());</div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;  }</div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;<span class="comment">  /// Lower a store instruction with shape information.</span></div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> <a class="code" href="X86ISelLowering_8cpp.html#a05914158f39e230548b1b743eee2e5f6">LowerStore</a>(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Inst, <a class="code" href="classllvm_1_1Value.html">Value</a> *Matrix, <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>, <a class="code" href="structllvm_1_1MaybeAlign.html">MaybeAlign</a> A,</div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;                  <a class="code" href="classllvm_1_1Value.html">Value</a> *Stride, <span class="keywordtype">bool</span> IsVolatile, ShapeInfo Shape) {</div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;    <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>(Inst);</div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;    <span class="keyword">auto</span> StoreVal = getMatrix(Matrix, Shape, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>);</div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;    finalizeLowering(Inst,</div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;                     storeMatrix(<a class="code" href="LiveRegMatrix_8cpp.html#a8989acb71bd355e02bcf3a930b5e54ea">Matrix</a>-&gt;getType(), StoreVal, <a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>, A, Stride,</div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;                                 IsVolatile, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>),</div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;                     <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>);</div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;  }</div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;<span class="comment">  /// Lowers llvm.matrix.column.major.store.</span></div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;<span class="comment">  ///</span></div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;<span class="comment">  /// The intrinsic store a matrix back memory using a stride between columns.</span></div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> LowerColumnMajorStore(<a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *Inst) {</div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="LowerMatrixIntrinsics_8cpp.html#ab891e50c619f81260e857e297f460fe5">MatrixLayout</a> == <a class="code" href="LowerMatrixIntrinsics_8cpp.html#abf221949fc61d1494af06b50731bdc90af695e73139b1c1d06d77655104370f00">MatrixLayoutTy::ColumnMajor</a> &amp;&amp;</div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;           <span class="stringliteral">&quot;Intrinsic only supports column-major layout!&quot;</span>);</div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="LiveRegMatrix_8cpp.html#a8989acb71bd355e02bcf3a930b5e54ea">Matrix</a> = Inst-&gt;<a class="code" href="classllvm_1_1CallBase.html#ab2caa29167597390ab2fc3cf30d70389">getArgOperand</a>(0);</div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a> = Inst-&gt;<a class="code" href="classllvm_1_1CallBase.html#ab2caa29167597390ab2fc3cf30d70389">getArgOperand</a>(1);</div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Stride = Inst-&gt;<a class="code" href="classllvm_1_1CallBase.html#ab2caa29167597390ab2fc3cf30d70389">getArgOperand</a>(2);</div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;    <a class="code" href="X86ISelLowering_8cpp.html#a05914158f39e230548b1b743eee2e5f6">LowerStore</a>(Inst, Matrix, <a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>, Inst-&gt;<a class="code" href="classllvm_1_1CallBase.html#a7713a45c8983df00c3975444b94e69ae">getParamAlign</a>(1), Stride,</div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;               cast&lt;ConstantInt&gt;(Inst-&gt;<a class="code" href="classllvm_1_1CallBase.html#ab2caa29167597390ab2fc3cf30d70389">getArgOperand</a>(3))-&gt;isOne(),</div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;               {Inst-&gt;getArgOperand(4), Inst-&gt;getArgOperand(5)});</div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;  }</div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160; </div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;  <span class="comment">// Set elements I..I+NumElts-1 to Block</span></div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="SROA_8cpp.html#a42c6a2faff923f431932c6d33cf4092b">insertVector</a>(<a class="code" href="classllvm_1_1Value.html">Value</a> *Col, <span class="keywordtype">unsigned</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1Value.html">Value</a> *Block,</div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;                      <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> &amp;<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>) {</div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160; </div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;    <span class="comment">// First, bring Block to the same size as Col</span></div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;    <span class="keywordtype">unsigned</span> BlockNumElts =</div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;        cast&lt;FixedVectorType&gt;(<a class="code" href="namespacellvm_1_1pdb.html#a33e853ec74d48b1340d1d4bae772d30bae1e4c8c9ccd9fc39c391da4bcd093fb2">Block</a>-&gt;getType())-&gt;getNumElements();</div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;    <span class="keywordtype">unsigned</span> NumElts = cast&lt;FixedVectorType&gt;(Col-&gt;getType())-&gt;getNumElements();</div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(NumElts &gt;= BlockNumElts &amp;&amp; <span class="stringliteral">&quot;Too few elements for current block&quot;</span>);</div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160; </div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;    <a class="code" href="namespacellvm_1_1pdb.html#a33e853ec74d48b1340d1d4bae772d30bae1e4c8c9ccd9fc39c391da4bcd093fb2">Block</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateShuffleVector(</div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;        Block, <a class="code" href="namespacellvm.html#af00a6f39da9d94ec387a366ade60aea5">createSequentialMask</a>(0, BlockNumElts, NumElts - BlockNumElts));</div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160; </div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;    <span class="comment">// If Col is 7 long and I is 2 and BlockNumElts is 2 the mask is: 0, 1, 7,</span></div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;    <span class="comment">// 8, 4, 5, 6</span></div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;int, 16&gt;</a> <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a>;</div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;    <span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;      <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a>.push_back(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160; </div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;    <span class="keywordtype">unsigned</span> VecNumElts =</div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;        cast&lt;FixedVectorType&gt;(Col-&gt;getType())-&gt;getNumElements();</div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;    <span class="keywordflow">for</span> (; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> + BlockNumElts; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;      <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a>.push_back(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> - <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> + VecNumElts);</div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160; </div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;    <span class="keywordflow">for</span> (; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; VecNumElts; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;      <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a>.push_back(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160; </div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateShuffleVector(Col, Block, <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a>);</div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;  }</div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160; </div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *createMulAdd(<a class="code" href="classllvm_1_1Value.html">Value</a> *Sum, <a class="code" href="classllvm_1_1Value.html">Value</a> *A, <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <span class="keywordtype">bool</span> UseFPOp,</div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;                      <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> &amp;<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>, <span class="keywordtype">bool</span> AllowContraction,</div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;                      <span class="keywordtype">unsigned</span> &amp;NumComputeOps) {</div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;    NumComputeOps += getNumOps(<a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>-&gt;getType());</div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;    <span class="keywordflow">if</span> (!Sum)</div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;      <span class="keywordflow">return</span> UseFPOp ? <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateFMul(A, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>) : <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateMul(A, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160; </div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;    <span class="keywordflow">if</span> (UseFPOp) {</div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;      <span class="keywordflow">if</span> (AllowContraction) {</div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;        <span class="comment">// Use fmuladd for floating point operations and let the backend decide</span></div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;        <span class="comment">// if that&#39;s profitable.</span></div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;        <a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eaa7dad289ea38506fb1c9b5b148405d0c">FMulAdd</a> = <a class="code" href="namespacellvm_1_1Intrinsic.html#aefa39f6b622360ce4e947feb9f671b73">Intrinsic::getDeclaration</a>(</div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;            <a class="code" href="namespacellvm_1_1ifs.html#adfe04e1a9cc096fb571e8372debaa67ea00d0b4f2d7dcdaaef835b97cf5d1e0df">Func</a>.getParent(), Intrinsic::fmuladd, <a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>-&gt;getType());</div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCall(FMulAdd, {<a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, Sum});</div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;      }</div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;      NumComputeOps += getNumOps(<a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>-&gt;getType());</div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="X86PartialReduction_8cpp.html#ae0f503db91504a3f3440ab81260e4134">Mul</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateFMul(A, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateFAdd(Sum, Mul);</div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;    }</div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160; </div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;    NumComputeOps += getNumOps(<a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>-&gt;getType());</div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="X86PartialReduction_8cpp.html#ae0f503db91504a3f3440ab81260e4134">Mul</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateMul(A, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAdd(Sum, Mul);</div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;  }</div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;<span class="comment">  /// Cache \p Matrix as result of \p Inst and update the uses of \p Inst. For</span></div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;<span class="comment">  /// users with shape information, there&#39;s nothing to do: they will use the</span></div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;<span class="comment">  /// cached value when they are lowered. For other users, \p Matrix is</span></div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;<span class="comment">  /// flattened and the uses are updated to use it. Also marks \p Inst for</span></div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;<span class="comment">  /// deletion.</span></div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> finalizeLowering(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Inst, MatrixTy Matrix,</div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;                        <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> &amp;<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>) {</div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;    <span class="keyword">auto</span> inserted = Inst2ColumnMatrix.<a class="code" href="classllvm_1_1MapVector.html#a9318649185cfc66ba4b4eb66d5968e00">insert</a>(std::make_pair(Inst, Matrix));</div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;    (void)inserted;</div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(inserted.second &amp;&amp; <span class="stringliteral">&quot;multiple matrix lowering mapping&quot;</span>);</div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160; </div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;    <a class="code" href="ARMLowOverheadLoops_8cpp.html#a3bf42baf773b375802538951c88d8e12">ToRemove</a>.push_back(Inst);</div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Flattened = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Use.html">Use</a> &amp;U : <a class="code" href="namespacellvm.html#a8154638df88e4eaa568b67b23d463dac">llvm::make_early_inc_range</a>(Inst-&gt;<a class="code" href="classllvm_1_1Value.html#aecb93439702247fe5353a9966f7cefcd">uses</a>())) {</div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;      <span class="keywordflow">if</span> (ShapeMap.<a class="code" href="classllvm_1_1ValueMap.html#a7629b8c5f6a6802ee0fdc5c290769692">find</a>(U.getUser()) == ShapeMap.<a class="code" href="classllvm_1_1ValueMap.html#ab871e2d0ebded563edfebd6766fc1a04">end</a>()) {</div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;        <span class="keywordflow">if</span> (!Flattened)</div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;          Flattened = <a class="code" href="LiveRegMatrix_8cpp.html#a8989acb71bd355e02bcf3a930b5e54ea">Matrix</a>.embedInVector(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>);</div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;        U.set(Flattened);</div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;      }</div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;    }</div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;  }</div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;<span class="comment">  /// Compute \p Result += \p A * \p B for input matrices with left-associating</span></div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;<span class="comment">  /// addition.</span></div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;<span class="comment">  ///</span></div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;<span class="comment">  /// We can fold a transpose into the operand that is used to extract scalars.</span></div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;<span class="comment">  /// This is the first operands with row-major and the second with</span></div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;<span class="comment">  /// column-major.  If \p IsScalarMatrixTransposed we assume the appropriate</span></div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;<span class="comment">  /// operand is transposed.</span></div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> emitMatrixMultiply(MatrixTy &amp;Result, <span class="keyword">const</span> MatrixTy &amp;A,</div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;                          <span class="keyword">const</span> MatrixTy &amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> &amp;<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>, <span class="keywordtype">bool</span> IsTiled,</div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;                          <span class="keywordtype">bool</span> IsScalarMatrixTransposed, <a class="code" href="classllvm_1_1FastMathFlags.html">FastMathFlags</a> FMF) {</div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">unsigned</span> VF = std::max&lt;unsigned&gt;(</div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;        <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>.<a class="code" href="classllvm_1_1TargetTransformInfo.html#a2d30dd50c6b2d64ca3bc2826ca229fdb">getRegisterBitWidth</a>(<a class="code" href="classllvm_1_1TargetTransformInfo.html#a8bb3b1ccf19b8c85429b777dfa4a0166a183020fbea95c99db23f6d3594f4c4af">TargetTransformInfo::RGK_FixedWidthVector</a>)</div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;                .<a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#a33880aaca0ad05e5f1557f079305bde5">getFixedValue</a>() /</div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;            <a class="code" href="namespacellvm_1_1ms__demangle.html#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a>.getElementType()-&gt;getPrimitiveSizeInBits().getFixedValue(),</div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;        1U);</div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;    <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a> = <a class="code" href="namespacellvm_1_1ms__demangle.html#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a>.getNumRows();</div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;    <span class="keywordtype">unsigned</span> <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = <a class="code" href="namespacellvm_1_1ms__demangle.html#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a>.getNumColumns();</div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;    <span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a> = <a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>.getNumColumns();</div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160; </div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;    <span class="keywordtype">bool</span> IsFP = <a class="code" href="namespacellvm_1_1ms__demangle.html#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a>.getElementType()-&gt;isFloatingPointTy();</div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>.isColumnMajor() == <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.isColumnMajor() &amp;&amp;</div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;           <a class="code" href="namespacellvm_1_1ms__demangle.html#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a>.isColumnMajor() == <a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>.isColumnMajor() &amp;&amp;</div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;           <span class="stringliteral">&quot;operands must agree on matrix layout&quot;</span>);</div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;    <span class="keywordtype">unsigned</span> NumComputeOps = 0;</div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160; </div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;    <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.setFastMathFlags(FMF);</div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160; </div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>.isColumnMajor()) {</div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;      <span class="comment">// Multiply columns from the first operand with scalars from the second</span></div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;      <span class="comment">// operand. Then move along the K axes and accumulate the columns.  With</span></div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;      <span class="comment">// this the adds can be vectorized without reassociation.</span></div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> J = 0; J &lt; <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>; ++J) {</div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;        <span class="keywordtype">unsigned</span> <a class="code" href="TarWriter_8cpp.html#aac035f4156e2604bfa42ba22c17b83ee">BlockSize</a> = VF;</div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;        <span class="comment">// If Result is zero, we don&#39;t need to accumulate in the K==0 iteration.</span></div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;        <span class="keywordtype">bool</span> isSumZero = isa&lt;ConstantAggregateZero&gt;(<a class="code" href="namespacellvm_1_1ms__demangle.html#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a>.getColumn(J));</div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160; </div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> &lt; <a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a>; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> += <a class="code" href="TarWriter_8cpp.html#aac035f4156e2604bfa42ba22c17b83ee">BlockSize</a>) {</div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;          <span class="comment">// Gradually lower the vectorization factor to cover the remainder.</span></div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;          <span class="keywordflow">while</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> + <a class="code" href="TarWriter_8cpp.html#aac035f4156e2604bfa42ba22c17b83ee">BlockSize</a> &gt; R)</div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;            <a class="code" href="TarWriter_8cpp.html#aac035f4156e2604bfa42ba22c17b83ee">BlockSize</a> /= 2;</div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160; </div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;          <a class="code" href="classllvm_1_1Value.html">Value</a> *Sum = IsTiled ? <a class="code" href="namespacellvm_1_1ms__demangle.html#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a>.extractVector(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, J, <a class="code" href="TarWriter_8cpp.html#aac035f4156e2604bfa42ba22c17b83ee">BlockSize</a>, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>)</div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;                               : <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;          <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> K = 0; K &lt; <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>; ++K) {</div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;            <a class="code" href="classllvm_1_1Value.html">Value</a> *L = <a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>.extractVector(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, K, <a class="code" href="TarWriter_8cpp.html#aac035f4156e2604bfa42ba22c17b83ee">BlockSize</a>, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>);</div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;            <a class="code" href="classllvm_1_1Value.html">Value</a> *RH = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateExtractElement(</div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;                <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.getColumn(IsScalarMatrixTransposed ? K : J),</div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;                IsScalarMatrixTransposed ? J : K);</div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;            <a class="code" href="classllvm_1_1Value.html">Value</a> *Splat = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateVectorSplat(<a class="code" href="TarWriter_8cpp.html#aac035f4156e2604bfa42ba22c17b83ee">BlockSize</a>, RH, <span class="stringliteral">&quot;splat&quot;</span>);</div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;            Sum =</div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;                createMulAdd(isSumZero &amp;&amp; K == 0 ? <span class="keyword">nullptr</span> : Sum, L, Splat,</div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;                             IsFP, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>, FMF.<a class="code" href="classllvm_1_1FastMathFlags.html#ad8c80fc37943fda4be56cf1e0b6cb145">allowContract</a>(), NumComputeOps);</div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;          }</div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;          <a class="code" href="namespacellvm_1_1ms__demangle.html#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a>.setVector(J,</div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;                           <a class="code" href="SROA_8cpp.html#a42c6a2faff923f431932c6d33cf4092b">insertVector</a>(<a class="code" href="namespacellvm_1_1ms__demangle.html#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a>.getVector(J), <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, Sum, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>));</div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;        }</div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;      }</div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;      <span class="comment">// Multiply rows from the second operand with scalars from the first</span></div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;      <span class="comment">// operand. Then move along the K axes and accumulate the rows.  With this</span></div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;      <span class="comment">// the adds can be vectorized without reassociation.</span></div>
<div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> &lt; <a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a>; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;        <span class="keywordtype">unsigned</span> <a class="code" href="TarWriter_8cpp.html#aac035f4156e2604bfa42ba22c17b83ee">BlockSize</a> = VF;</div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;        <span class="keywordtype">bool</span> isSumZero = isa&lt;ConstantAggregateZero&gt;(<a class="code" href="namespacellvm_1_1ms__demangle.html#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a>.getRow(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>));</div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> J = 0; J &lt; <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>; J += <a class="code" href="TarWriter_8cpp.html#aac035f4156e2604bfa42ba22c17b83ee">BlockSize</a>) {</div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;          <span class="comment">// Gradually lower the vectorization factor to cover the remainder.</span></div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;          <span class="keywordflow">while</span> (J + <a class="code" href="TarWriter_8cpp.html#aac035f4156e2604bfa42ba22c17b83ee">BlockSize</a> &gt; <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)</div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;            <a class="code" href="TarWriter_8cpp.html#aac035f4156e2604bfa42ba22c17b83ee">BlockSize</a> /= 2;</div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160; </div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;          <a class="code" href="classllvm_1_1Value.html">Value</a> *Sum = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;          <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> K = 0; K &lt; <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>; ++K) {</div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;            <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a> = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.extractVector(K, J, <a class="code" href="TarWriter_8cpp.html#aac035f4156e2604bfa42ba22c17b83ee">BlockSize</a>, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>);</div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;            <a class="code" href="classllvm_1_1Value.html">Value</a> *LH = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateExtractElement(</div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;                <a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>.getVector(IsScalarMatrixTransposed ? K : <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>),</div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;                IsScalarMatrixTransposed ? <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : K);</div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;            <a class="code" href="classllvm_1_1Value.html">Value</a> *Splat = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateVectorSplat(<a class="code" href="TarWriter_8cpp.html#aac035f4156e2604bfa42ba22c17b83ee">BlockSize</a>, LH, <span class="stringliteral">&quot;splat&quot;</span>);</div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;            Sum =</div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;                createMulAdd(isSumZero &amp;&amp; K == 0 ? <span class="keyword">nullptr</span> : Sum, Splat, R,</div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;                             IsFP, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>, FMF.<a class="code" href="classllvm_1_1FastMathFlags.html#ad8c80fc37943fda4be56cf1e0b6cb145">allowContract</a>(), NumComputeOps);</div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;          }</div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;          <a class="code" href="namespacellvm_1_1ms__demangle.html#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a>.setVector(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>,</div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;                           <a class="code" href="SROA_8cpp.html#a42c6a2faff923f431932c6d33cf4092b">insertVector</a>(<a class="code" href="namespacellvm_1_1ms__demangle.html#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a>.getVector(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>), J, Sum, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>));</div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;        }</div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;      }</div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;    }</div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;    <a class="code" href="namespacellvm_1_1ms__demangle.html#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a>.addNumComputeOps(NumComputeOps);</div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;  }</div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;<span class="comment">  /// Ensure that the memory in \p Load does not alias \p Store by potentially</span></div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;<span class="comment">  /// copying it to a new location.  This new or otherwise the original location</span></div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;<span class="comment">  /// is returned.</span></div>
<div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1Value.html">Value</a> *getNonAliasingPointer(<a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a> *<a class="code" href="namespacellvm_1_1SPII.html#a1c7202c6054fef862bbed45957747cdfa5069619ca8fdce305534f3fe85091a0f">Load</a>, <a class="code" href="classllvm_1_1StoreInst.html">StoreInst</a> *<a class="code" href="namespacellvm_1_1SPII.html#a1c7202c6054fef862bbed45957747cdfa36b3dd3b84fde3f8494a9b18af131856">Store</a>,</div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;                               <a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *MatMul) {</div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;    <a class="code" href="classllvm_1_1MemoryLocation.html">MemoryLocation</a> StoreLoc = <a class="code" href="classllvm_1_1MemoryLocation.html#a18e5a3f1d71ba10a624f2a8e5121cf1f">MemoryLocation::get</a>(<a class="code" href="namespacellvm_1_1SPII.html#a1c7202c6054fef862bbed45957747cdfa36b3dd3b84fde3f8494a9b18af131856">Store</a>);</div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;    <a class="code" href="classllvm_1_1MemoryLocation.html">MemoryLocation</a> LoadLoc = <a class="code" href="classllvm_1_1MemoryLocation.html#a18e5a3f1d71ba10a624f2a8e5121cf1f">MemoryLocation::get</a>(<a class="code" href="namespacellvm_1_1SPII.html#a1c7202c6054fef862bbed45957747cdfa5069619ca8fdce305534f3fe85091a0f">Load</a>);</div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160; </div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;    <span class="comment">// If we can statically determine noalias we&#39;re good.</span></div>
<div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;    <span class="keywordflow">if</span> (AA-&gt;<a class="code" href="classllvm_1_1AAResults.html#a9ebdc17e55980f1a8176d376d9e2a323">isNoAlias</a>(LoadLoc, StoreLoc))</div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1SPII.html#a1c7202c6054fef862bbed45957747cdfa5069619ca8fdce305534f3fe85091a0f">Load</a>-&gt;getPointerOperand();</div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160; </div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;    <span class="comment">// Create code to check if the memory locations of the Load and Store</span></div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;    <span class="comment">// overlap and if they do, copy Load&#39;s operand to a new buffer.</span></div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160; </div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;    <span class="comment">// First, create  new blocks for 2n part of the check and the copy.</span></div>
<div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Check0 = MatMul-&gt;<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>();</div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;    <span class="comment">// FIXME: Use lazy DTU and update SplitBlock to accept a DTU instead of a</span></div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;    <span class="comment">// DT. Manually collect dominator tree updates, to avoid unnecessary work,</span></div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;    <span class="comment">// as we adjust Check0 and Check1&#39;s branches.</span></div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;DominatorTree::UpdateType, 4&gt;</a> DTUpdates;</div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Succ : <a class="code" href="namespacellvm.html#a26e2a938b431eaa6eca2beaa96410c9d">successors</a>(Check0))</div>
<div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;      DTUpdates.push_back({DT-&gt;<a class="code" href="classllvm_1_1DominatorTreeBase.html#a71c91cbbfc1c0ecf9a69e10ccf739bd7">Delete</a>, Check0, Succ});</div>
<div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160; </div>
<div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Check1 =</div>
<div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;        <a class="code" href="namespacellvm.html#ad295cb34421c21507bc9cdefe1ba3f16">SplitBlock</a>(MatMul-&gt;<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>(), MatMul, (<a class="code" href="classllvm_1_1DomTreeUpdater.html">DomTreeUpdater</a> *)<span class="keyword">nullptr</span>, LI,</div>
<div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;                   <span class="keyword">nullptr</span>, <span class="stringliteral">&quot;alias_cont&quot;</span>);</div>
<div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="namespacellvm_1_1codeview.html#ad37302702bbcf0028581d2655698c27aa5fb63579fc981698f97d55bfecb213ea">Copy</a> =</div>
<div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;        <a class="code" href="namespacellvm.html#ad295cb34421c21507bc9cdefe1ba3f16">SplitBlock</a>(MatMul-&gt;<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>(), MatMul, (<a class="code" href="classllvm_1_1DomTreeUpdater.html">DomTreeUpdater</a> *)<span class="keyword">nullptr</span>, LI,</div>
<div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;                   <span class="keyword">nullptr</span>, <span class="stringliteral">&quot;copy&quot;</span>);</div>
<div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Fusion =</div>
<div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;        <a class="code" href="namespacellvm.html#ad295cb34421c21507bc9cdefe1ba3f16">SplitBlock</a>(MatMul-&gt;<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>(), MatMul, (<a class="code" href="classllvm_1_1DomTreeUpdater.html">DomTreeUpdater</a> *)<span class="keyword">nullptr</span>, LI,</div>
<div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;                   <span class="keyword">nullptr</span>, <span class="stringliteral">&quot;no_alias&quot;</span>);</div>
<div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160; </div>
<div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;    <span class="comment">// Check if the loaded memory location begins before the end of the store</span></div>
<div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;    <span class="comment">// location. If the condition holds, they might overlap, otherwise they are</span></div>
<div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;    <span class="comment">// guaranteed to not overlap.</span></div>
<div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;    <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>(MatMul);</div>
<div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;    Check0-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>()-&gt;<a class="code" href="classllvm_1_1Instruction.html#ae6b978645b8ac72d1a35e1298ffdd4f0">eraseFromParent</a>();</div>
<div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;    <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(Check0);</div>
<div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *IntPtrTy = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getIntPtrTy(<a class="code" href="namespacellvm_1_1SPII.html#a1c7202c6054fef862bbed45957747cdfa5069619ca8fdce305534f3fe85091a0f">Load</a>-&gt;getModule()-&gt;getDataLayout());</div>
<div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *StoreBegin = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreatePtrToInt(</div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;        <span class="keyword">const_cast&lt;</span><a class="code" href="classllvm_1_1Value.html">Value</a> *<span class="keyword">&gt;</span>(StoreLoc.<a class="code" href="classllvm_1_1MemoryLocation.html#a9550ce4a179e46db37f653ce28feca7a">Ptr</a>), IntPtrTy, <span class="stringliteral">&quot;store.begin&quot;</span>);</div>
<div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *StoreEnd = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAdd(</div>
<div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;        StoreBegin, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(IntPtrTy, StoreLoc.<a class="code" href="classllvm_1_1MemoryLocation.html#a39f7ff959874bf38f3e14aa0b2622da0">Size</a>.<a class="code" href="classllvm_1_1LocationSize.html#a47f128e1007c6c70eb7b0df2dcbf68df">getValue</a>()),</div>
<div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;        <span class="stringliteral">&quot;store.end&quot;</span>, <span class="keyword">true</span>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *LoadBegin = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreatePtrToInt(<span class="keyword">const_cast&lt;</span><a class="code" href="classllvm_1_1Value.html">Value</a> *<span class="keyword">&gt;</span>(LoadLoc.<a class="code" href="classllvm_1_1MemoryLocation.html#a9550ce4a179e46db37f653ce28feca7a">Ptr</a>),</div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;                                              IntPtrTy, <span class="stringliteral">&quot;load.begin&quot;</span>);</div>
<div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;    <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCondBr(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateICmpULT(LoadBegin, StoreEnd), Check1,</div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;                         Fusion);</div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160; </div>
<div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;    <span class="comment">// Check if the store begins before the end of the load location. If the</span></div>
<div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;    <span class="comment">// condition holds, they alias, otherwise they are guaranteed to not</span></div>
<div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;    <span class="comment">// overlap.</span></div>
<div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;    Check1-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>()-&gt;<a class="code" href="classllvm_1_1Instruction.html#ae6b978645b8ac72d1a35e1298ffdd4f0">eraseFromParent</a>();</div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;    <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(Check1, Check1-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>());</div>
<div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *LoadEnd = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAdd(</div>
<div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;        LoadBegin, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(IntPtrTy, LoadLoc.<a class="code" href="classllvm_1_1MemoryLocation.html#a39f7ff959874bf38f3e14aa0b2622da0">Size</a>.<a class="code" href="classllvm_1_1LocationSize.html#a47f128e1007c6c70eb7b0df2dcbf68df">getValue</a>()),</div>
<div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;        <span class="stringliteral">&quot;load.end&quot;</span>, <span class="keyword">true</span>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;    <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCondBr(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateICmpULT(StoreBegin, LoadEnd), Copy,</div>
<div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;                         Fusion);</div>
<div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160; </div>
<div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;    <span class="comment">// Copy load operand to new alloca.</span></div>
<div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;    <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(Copy, <a class="code" href="namespacellvm_1_1codeview.html#ad37302702bbcf0028581d2655698c27aa5fb63579fc981698f97d55bfecb213ea">Copy</a>-&gt;begin());</div>
<div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;    <span class="keyword">auto</span> *VT = cast&lt;FixedVectorType&gt;(<a class="code" href="namespacellvm_1_1SPII.html#a1c7202c6054fef862bbed45957747cdfa5069619ca8fdce305534f3fe85091a0f">Load</a>-&gt;getType());</div>
<div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;    <span class="comment">// Use an array type for the alloca, to avoid potentially huge alignment</span></div>
<div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;    <span class="comment">// requirements for large vector types.</span></div>
<div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;    <span class="keyword">auto</span> *ArrayTy = <a class="code" href="classllvm_1_1ArrayType.html#adf411edc4f135b570ab218079474ce77">ArrayType::get</a>(VT-&gt;getElementType(), VT-&gt;getNumElements());</div>
<div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;    <a class="code" href="classllvm_1_1AllocaInst.html">AllocaInst</a> *Alloca =</div>
<div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;        <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAlloca(ArrayTy, <a class="code" href="namespacellvm_1_1SPII.html#a1c7202c6054fef862bbed45957747cdfa5069619ca8fdce305534f3fe85091a0f">Load</a>-&gt;getPointerAddressSpace());</div>
<div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *BC = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBitCast(Alloca, VT-&gt;<a class="code" href="classllvm_1_1Type.html#adc01a7457de85fc52a3bb860d7e1c6a4">getPointerTo</a>());</div>
<div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160; </div>
<div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;    <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateMemCpy(BC, Alloca-&gt;<a class="code" href="classllvm_1_1AllocaInst.html#a42438d0a43720a6571c9138224481754">getAlign</a>(), <a class="code" href="namespacellvm_1_1SPII.html#a1c7202c6054fef862bbed45957747cdfa5069619ca8fdce305534f3fe85091a0f">Load</a>-&gt;getPointerOperand(),</div>
<div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;                         <a class="code" href="namespacellvm_1_1SPII.html#a1c7202c6054fef862bbed45957747cdfa5069619ca8fdce305534f3fe85091a0f">Load</a>-&gt;getAlign(), LoadLoc.<a class="code" href="classllvm_1_1MemoryLocation.html#a39f7ff959874bf38f3e14aa0b2622da0">Size</a>.<a class="code" href="classllvm_1_1LocationSize.html#a47f128e1007c6c70eb7b0df2dcbf68df">getValue</a>());</div>
<div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;    <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(Fusion, Fusion-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>());</div>
<div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;    <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *<a class="code" href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">PHI</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreatePHI(<a class="code" href="namespacellvm_1_1SPII.html#a1c7202c6054fef862bbed45957747cdfa5069619ca8fdce305534f3fe85091a0f">Load</a>-&gt;getPointerOperandType(), 3);</div>
<div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;    <a class="code" href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">PHI</a>-&gt;addIncoming(<a class="code" href="namespacellvm_1_1SPII.html#a1c7202c6054fef862bbed45957747cdfa5069619ca8fdce305534f3fe85091a0f">Load</a>-&gt;getPointerOperand(), Check0);</div>
<div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;    <a class="code" href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">PHI</a>-&gt;addIncoming(<a class="code" href="namespacellvm_1_1SPII.html#a1c7202c6054fef862bbed45957747cdfa5069619ca8fdce305534f3fe85091a0f">Load</a>-&gt;getPointerOperand(), Check1);</div>
<div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;    <a class="code" href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">PHI</a>-&gt;addIncoming(BC, Copy);</div>
<div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160; </div>
<div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;    <span class="comment">// Adjust DT.</span></div>
<div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;    DTUpdates.push_back({DT-&gt;<a class="code" href="classllvm_1_1DominatorTreeBase.html#a9aeeca2833810f01b20545a46fe22503">Insert</a>, Check0, Check1});</div>
<div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;    DTUpdates.push_back({DT-&gt;<a class="code" href="classllvm_1_1DominatorTreeBase.html#a9aeeca2833810f01b20545a46fe22503">Insert</a>, Check0, Fusion});</div>
<div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;    DTUpdates.push_back({DT-&gt;<a class="code" href="classllvm_1_1DominatorTreeBase.html#a9aeeca2833810f01b20545a46fe22503">Insert</a>, Check1, <a class="code" href="namespacellvm_1_1codeview.html#ad37302702bbcf0028581d2655698c27aa5fb63579fc981698f97d55bfecb213ea">Copy</a>});</div>
<div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;    DTUpdates.push_back({DT-&gt;<a class="code" href="classllvm_1_1DominatorTreeBase.html#a9aeeca2833810f01b20545a46fe22503">Insert</a>, Check1, Fusion});</div>
<div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;    DT-&gt;<a class="code" href="classllvm_1_1DominatorTreeBase.html#a470b5b573c7915fe13bd529b22c9adbc">applyUpdates</a>(DTUpdates);</div>
<div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">PHI</a>;</div>
<div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;  }</div>
<div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160; </div>
<div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;  <span class="keywordtype">bool</span> isFusionProfitable(<a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *MatMul) {</div>
<div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="LowerMatrixIntrinsics_8cpp.html#ada3f86ecde5ce7225dd1a152a5b48104">ForceFusion</a>)</div>
<div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160; </div>
<div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;    ShapeInfo LShape(MatMul-&gt;<a class="code" href="classllvm_1_1CallBase.html#ab2caa29167597390ab2fc3cf30d70389">getArgOperand</a>(2), MatMul-&gt;<a class="code" href="classllvm_1_1CallBase.html#ab2caa29167597390ab2fc3cf30d70389">getArgOperand</a>(3));</div>
<div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;    ShapeInfo RShape(MatMul-&gt;<a class="code" href="classllvm_1_1CallBase.html#ab2caa29167597390ab2fc3cf30d70389">getArgOperand</a>(3), MatMul-&gt;<a class="code" href="classllvm_1_1CallBase.html#ab2caa29167597390ab2fc3cf30d70389">getArgOperand</a>(4));</div>
<div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160; </div>
<div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a> = LShape.NumRows;</div>
<div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = RShape.NumColumns;</div>
<div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a> = LShape.NumColumns;</div>
<div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;    <span class="keyword">auto</span> *EltType = cast&lt;VectorType&gt;(MatMul-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>())-&gt;getElementType();</div>
<div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160; </div>
<div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">unsigned</span> VF = std::max&lt;unsigned&gt;(</div>
<div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;        <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>.<a class="code" href="classllvm_1_1TargetTransformInfo.html#a2d30dd50c6b2d64ca3bc2826ca229fdb">getRegisterBitWidth</a>(<a class="code" href="classllvm_1_1TargetTransformInfo.html#a8bb3b1ccf19b8c85429b777dfa4a0166a183020fbea95c99db23f6d3594f4c4af">TargetTransformInfo::RGK_FixedWidthVector</a>)</div>
<div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;                .<a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#a33880aaca0ad05e5f1557f079305bde5">getFixedValue</a>() /</div>
<div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;            EltType-&gt;<a class="code" href="classllvm_1_1Type.html#a833daf718a49c5cd637d8c9ddeaebe07">getPrimitiveSizeInBits</a>().<a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#a33880aaca0ad05e5f1557f079305bde5">getFixedValue</a>(),</div>
<div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;        1U);</div>
<div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160; </div>
<div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;    <span class="comment">// Cost model for tiling</span></div>
<div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;    <span class="comment">// For tiling to be beneficial, we need reuse either along the R or</span></div>
<div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;    <span class="comment">// the C axis.  We vectorize along the R axis so that means at least</span></div>
<div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;    <span class="comment">// 3 elements.</span></div>
<div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;    <span class="comment">// TODO: Also consider cost of copying if operands alias.</span></div>
<div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;    <span class="keywordflow">if</span> (R &lt;= VF &amp;&amp; <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> == 1)</div>
<div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;    <span class="comment">// Then we need enough elements to exceed the number of vector</span></div>
<div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;    <span class="comment">// registers we have.  Note that this is an oversimplification since</span></div>
<div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;    <span class="comment">// fusing also takes some extra loads which may exceed the number of</span></div>
<div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;    <span class="comment">// reloads necessary.</span></div>
<div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;    <span class="keywordtype">unsigned</span> Op0Regs = (<a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a> + VF - 1) / VF * M;</div>
<div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;    <span class="keywordtype">unsigned</span> Op1Regs = (<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a> + VF - 1) / VF * <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>;</div>
<div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;    <span class="keywordflow">return</span> Op0Regs + Op1Regs &gt;</div>
<div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;           <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>.<a class="code" href="classllvm_1_1TargetTransformInfo.html#aae0e8ca52658f54e5cc6214eb1a291ef">getNumberOfRegisters</a>(<a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>.<a class="code" href="classllvm_1_1TargetTransformInfo.html#a623cced59353f83cc5eaba4068c57694">getRegisterClassForType</a>(<span class="keyword">true</span>));</div>
<div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;  }</div>
<div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160; </div>
<div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;  MatrixTy getZeroMatrix(<a class="code" href="classllvm_1_1Type.html">Type</a> *EltType, <span class="keywordtype">unsigned</span> R, <span class="keywordtype">unsigned</span> <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>) {</div>
<div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;    MatrixTy Res;</div>
<div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;    <span class="keyword">auto</span> *ColumType = <a class="code" href="classllvm_1_1FixedVectorType.html#af9a870d5df50fe0133a410b7c9114c80">FixedVectorType::get</a>(EltType, R);</div>
<div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> &lt; <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div>
<div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;      Res.addVector(<a class="code" href="classllvm_1_1ConstantAggregateZero.html#abfa1cf8b4348407b167f93bc7c01055f">ConstantAggregateZero::get</a>(ColumType));</div>
<div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;    <span class="keywordflow">return</span> Res;</div>
<div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;  }</div>
<div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160; </div>
<div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;  <span class="keywordtype">void</span> createTiledLoops(<a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *MatMul, <a class="code" href="classllvm_1_1Value.html">Value</a> *LPtr, ShapeInfo LShape,</div>
<div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;                        <a class="code" href="classllvm_1_1Value.html">Value</a> *RPtr, ShapeInfo RShape, <a class="code" href="classllvm_1_1StoreInst.html">StoreInst</a> *<a class="code" href="namespacellvm_1_1SPII.html#a1c7202c6054fef862bbed45957747cdfa36b3dd3b84fde3f8494a9b18af131856">Store</a>) {</div>
<div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;    <span class="keyword">auto</span> *EltType = cast&lt;VectorType&gt;(MatMul-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>())-&gt;getElementType();</div>
<div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160; </div>
<div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;    <span class="comment">// Create the main tiling loop nest.</span></div>
<div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;    <a class="code" href="structllvm_1_1TileInfo.html">TileInfo</a> TI(LShape.NumRows, RShape.NumColumns, LShape.NumColumns, <a class="code" href="LowerMatrixIntrinsics_8cpp.html#a7f6b2a94f0c353d428cf953c17fb7da0">TileSize</a>);</div>
<div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;    <a class="code" href="classllvm_1_1DomTreeUpdater.html">DomTreeUpdater</a> DTU(DT, <a class="code" href="classllvm_1_1DomTreeUpdater.html#a8bf4c30be33831d7882d6880b8ae433da46a9ebdb80117bfa1f0cdea65438290a">DomTreeUpdater::UpdateStrategy::Lazy</a>);</div>
<div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *InsertI = cast&lt;Instruction&gt;(MatMul);</div>
<div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Start = InsertI-&gt;<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>();</div>
<div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *End =</div>
<div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;        <a class="code" href="namespacellvm.html#ad295cb34421c21507bc9cdefe1ba3f16">SplitBlock</a>(InsertI-&gt;<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>(), InsertI, DT, LI, <span class="keyword">nullptr</span>, <span class="stringliteral">&quot;continue&quot;</span>);</div>
<div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;    <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>(MatMul);</div>
<div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *InnerBody = TI.CreateTiledLoops(Start, End, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>, DTU, *LI);</div>
<div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160; </div>
<div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *TileVecTy =</div>
<div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;        <a class="code" href="classllvm_1_1FixedVectorType.html#af9a870d5df50fe0133a410b7c9114c80">FixedVectorType::get</a>(MatMul-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a4abb39a66573f61fda80469faa5d861d">getScalarType</a>(), <a class="code" href="LowerMatrixIntrinsics_8cpp.html#a7f6b2a94f0c353d428cf953c17fb7da0">TileSize</a>);</div>
<div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;    MatrixTy TileResult;</div>
<div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;    <span class="comment">// Insert in the inner loop header.</span></div>
<div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;    <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(TI.KLoop.Header-&gt;getTerminator());</div>
<div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;    <span class="comment">// Create PHI nodes for the result columns to accumulate across iterations.</span></div>
<div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;PHINode *, 4&gt;</a> ColumnPhis;</div>
<div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> &lt; <a class="code" href="LowerMatrixIntrinsics_8cpp.html#a7f6b2a94f0c353d428cf953c17fb7da0">TileSize</a>; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>++) {</div>
<div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;      <span class="keyword">auto</span> *Phi = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreatePHI(TileVecTy, 2, <span class="stringliteral">&quot;result.vec.&quot;</span> + <a class="code" href="classllvm_1_1Twine.html">Twine</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>));</div>
<div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;      Phi-&gt;addIncoming(<a class="code" href="classllvm_1_1ConstantAggregateZero.html#abfa1cf8b4348407b167f93bc7c01055f">ConstantAggregateZero::get</a>(TileVecTy),</div>
<div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;                       TI.RowLoop.Header-&gt;getSingleSuccessor());</div>
<div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;      TileResult.addVector(Phi);</div>
<div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;      ColumnPhis.push_back(Phi);</div>
<div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;    }</div>
<div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160; </div>
<div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;    <span class="comment">// Insert in the inner loop body, which computes</span></div>
<div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;    <span class="comment">//   Res += Load(CurrentRow, K) * Load(K, CurrentColumn)</span></div>
<div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;    <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(InnerBody-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>());</div>
<div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;    <span class="comment">// Load tiles of the operands.</span></div>
<div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;    MatrixTy <a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a> =</div>
<div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;        loadMatrix(LPtr, {}, <span class="keyword">false</span>, LShape, TI.RowLoop.Index, TI.KLoop.Index,</div>
<div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;                   {<a class="code" href="LowerMatrixIntrinsics_8cpp.html#a7f6b2a94f0c353d428cf953c17fb7da0">TileSize</a>, <a class="code" href="LowerMatrixIntrinsics_8cpp.html#a7f6b2a94f0c353d428cf953c17fb7da0">TileSize</a>}, EltType, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>);</div>
<div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;    MatrixTy <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a> =</div>
<div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;        loadMatrix(RPtr, {}, <span class="keyword">false</span>, RShape, TI.KLoop.Index, TI.ColumnLoop.Index,</div>
<div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;                   {<a class="code" href="LowerMatrixIntrinsics_8cpp.html#a7f6b2a94f0c353d428cf953c17fb7da0">TileSize</a>, <a class="code" href="LowerMatrixIntrinsics_8cpp.html#a7f6b2a94f0c353d428cf953c17fb7da0">TileSize</a>}, EltType, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>);</div>
<div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;    emitMatrixMultiply(TileResult, A, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>, <span class="keyword">true</span>, <span class="keyword">false</span>,</div>
<div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;                       getFastMathFlags(MatMul));</div>
<div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;    <span class="comment">// Store result after the inner loop is done.</span></div>
<div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;    <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(TI.RowLoop.Latch-&gt;getTerminator());</div>
<div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;    storeMatrix(TileResult, <a class="code" href="namespacellvm_1_1SPII.html#a1c7202c6054fef862bbed45957747cdfa36b3dd3b84fde3f8494a9b18af131856">Store</a>-&gt;getPointerOperand(), <a class="code" href="namespacellvm_1_1SPII.html#a1c7202c6054fef862bbed45957747cdfa36b3dd3b84fde3f8494a9b18af131856">Store</a>-&gt;getAlign(),</div>
<div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;                <a class="code" href="namespacellvm_1_1SPII.html#a1c7202c6054fef862bbed45957747cdfa36b3dd3b84fde3f8494a9b18af131856">Store</a>-&gt;isVolatile(), {LShape.NumRows, RShape.NumColumns},</div>
<div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;                TI.RowLoop.Index, TI.ColumnLoop.Index, EltType, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>);</div>
<div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160; </div>
<div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> &lt; TileResult.getNumVectors(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>++)</div>
<div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;      ColumnPhis[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>]-&gt;addIncoming(TileResult.getVector(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>), TI.KLoop.Latch);</div>
<div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160; </div>
<div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;    <span class="comment">// Force unrolling of a few iterations of the inner loop, to make sure there</span></div>
<div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;    <span class="comment">// is enough work per iteration.</span></div>
<div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;    <span class="comment">// FIXME: The unroller should make this decision directly instead, but</span></div>
<div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;    <span class="comment">// currently the cost-model is not up to the task.</span></div>
<div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;    <span class="keywordtype">unsigned</span> InnerLoopUnrollCount = <a class="code" href="namespacellvm.html#a57f2ca0e57f4f7b13f56f9aa16af3e0d">std::min</a>(10u, LShape.NumColumns / <a class="code" href="LowerMatrixIntrinsics_8cpp.html#a7f6b2a94f0c353d428cf953c17fb7da0">TileSize</a>);</div>
<div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;    <a class="code" href="namespacellvm.html#a55c9054d63d1c6a39e9c09ba13a482fa">addStringMetadataToLoop</a>(LI-&gt;<a class="code" href="classllvm_1_1LoopInfoBase.html#a7a7c8e0e4f836c13c015b62e18f386bd">getLoopFor</a>(TI.KLoop.Header),</div>
<div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;                            <span class="stringliteral">&quot;llvm.loop.unroll.count&quot;</span>, InnerLoopUnrollCount);</div>
<div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;  }</div>
<div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160; </div>
<div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;  <span class="keywordtype">void</span> emitSIMDTiling(<a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *MatMul, <a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a> *LoadOp0, <a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a> *LoadOp1,</div>
<div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;                      <a class="code" href="classllvm_1_1StoreInst.html">StoreInst</a> *<a class="code" href="namespacellvm_1_1SPII.html#a1c7202c6054fef862bbed45957747cdfa36b3dd3b84fde3f8494a9b18af131856">Store</a>,</div>
<div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;                      <a class="code" href="classllvm_1_1SmallPtrSetImpl.html">SmallPtrSetImpl&lt;Instruction *&gt;</a> &amp;FusedInsts) {</div>
<div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="LowerMatrixIntrinsics_8cpp.html#ab891e50c619f81260e857e297f460fe5">MatrixLayout</a> == <a class="code" href="LowerMatrixIntrinsics_8cpp.html#abf221949fc61d1494af06b50731bdc90af695e73139b1c1d06d77655104370f00">MatrixLayoutTy::ColumnMajor</a> &amp;&amp;</div>
<div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;           <span class="stringliteral">&quot;Tiling only supported for column-major matrixes at the moment!&quot;</span>);</div>
<div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;    <span class="keywordflow">if</span> (!isFusionProfitable(MatMul))</div>
<div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160; </div>
<div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;    ShapeInfo LShape(MatMul-&gt;<a class="code" href="classllvm_1_1CallBase.html#ab2caa29167597390ab2fc3cf30d70389">getArgOperand</a>(2), MatMul-&gt;<a class="code" href="classllvm_1_1CallBase.html#ab2caa29167597390ab2fc3cf30d70389">getArgOperand</a>(3));</div>
<div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;    ShapeInfo RShape(MatMul-&gt;<a class="code" href="classllvm_1_1CallBase.html#ab2caa29167597390ab2fc3cf30d70389">getArgOperand</a>(3), MatMul-&gt;<a class="code" href="classllvm_1_1CallBase.html#ab2caa29167597390ab2fc3cf30d70389">getArgOperand</a>(4));</div>
<div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160; </div>
<div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a> = LShape.NumRows;</div>
<div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = RShape.NumColumns;</div>
<div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a> = LShape.NumColumns;</div>
<div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;    <span class="keyword">auto</span> *EltType = cast&lt;VectorType&gt;(MatMul-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>())-&gt;getElementType();</div>
<div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160; </div>
<div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *APtr = getNonAliasingPointer(LoadOp0, <a class="code" href="namespacellvm_1_1SPII.html#a1c7202c6054fef862bbed45957747cdfa36b3dd3b84fde3f8494a9b18af131856">Store</a>, MatMul);</div>
<div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *BPtr = getNonAliasingPointer(LoadOp1, <a class="code" href="namespacellvm_1_1SPII.html#a1c7202c6054fef862bbed45957747cdfa36b3dd3b84fde3f8494a9b18af131856">Store</a>, MatMul);</div>
<div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *CPtr = <a class="code" href="namespacellvm_1_1SPII.html#a1c7202c6054fef862bbed45957747cdfa36b3dd3b84fde3f8494a9b18af131856">Store</a>-&gt;getPointerOperand();</div>
<div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160; </div>
<div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="LowerMatrixIntrinsics_8cpp.html#a5bb64c96618373218ca5eb9425ee8790">TileUseLoops</a> &amp;&amp; (R % <a class="code" href="LowerMatrixIntrinsics_8cpp.html#a7f6b2a94f0c353d428cf953c17fb7da0">TileSize</a> == 0 &amp;&amp; <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> % <a class="code" href="LowerMatrixIntrinsics_8cpp.html#a7f6b2a94f0c353d428cf953c17fb7da0">TileSize</a> == 0))</div>
<div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;      createTiledLoops(MatMul, APtr, LShape, BPtr, RShape, <a class="code" href="namespacellvm_1_1SPII.html#a1c7202c6054fef862bbed45957747cdfa36b3dd3b84fde3f8494a9b18af131856">Store</a>);</div>
<div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;    <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;      <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>(<a class="code" href="namespacellvm_1_1SPII.html#a1c7202c6054fef862bbed45957747cdfa36b3dd3b84fde3f8494a9b18af131856">Store</a>);</div>
<div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> J = 0; J &lt; <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>; J += <a class="code" href="LowerMatrixIntrinsics_8cpp.html#a7f6b2a94f0c353d428cf953c17fb7da0">TileSize</a>)</div>
<div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> &lt; <a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a>; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> += <a class="code" href="LowerMatrixIntrinsics_8cpp.html#a7f6b2a94f0c353d428cf953c17fb7da0">TileSize</a>) {</div>
<div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;          <span class="keyword">const</span> <span class="keywordtype">unsigned</span> TileR = <a class="code" href="namespacellvm.html#a57f2ca0e57f4f7b13f56f9aa16af3e0d">std::min</a>(R - <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <span class="keywordtype">unsigned</span>(<a class="code" href="LowerMatrixIntrinsics_8cpp.html#a7f6b2a94f0c353d428cf953c17fb7da0">TileSize</a>));</div>
<div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;          <span class="keyword">const</span> <span class="keywordtype">unsigned</span> TileC = <a class="code" href="namespacellvm.html#a57f2ca0e57f4f7b13f56f9aa16af3e0d">std::min</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> - J, <span class="keywordtype">unsigned</span>(<a class="code" href="LowerMatrixIntrinsics_8cpp.html#a7f6b2a94f0c353d428cf953c17fb7da0">TileSize</a>));</div>
<div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;          MatrixTy Res = getZeroMatrix(EltType, TileR, TileC);</div>
<div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160; </div>
<div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;          <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> K = 0; K &lt; <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>; K += <a class="code" href="LowerMatrixIntrinsics_8cpp.html#a7f6b2a94f0c353d428cf953c17fb7da0">TileSize</a>) {</div>
<div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">unsigned</span> TileM = <a class="code" href="namespacellvm.html#a57f2ca0e57f4f7b13f56f9aa16af3e0d">std::min</a>(M - K, <span class="keywordtype">unsigned</span>(<a class="code" href="LowerMatrixIntrinsics_8cpp.html#a7f6b2a94f0c353d428cf953c17fb7da0">TileSize</a>));</div>
<div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;            MatrixTy <a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a> =</div>
<div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;                loadMatrix(APtr, LoadOp0-&gt;<a class="code" href="classllvm_1_1LoadInst.html#af51c113a039c82f6870df5dc9666b5e3">getAlign</a>(), LoadOp0-&gt;<a class="code" href="classllvm_1_1LoadInst.html#a2eccc19f9061eeb7ad1e30e21f76034d">isVolatile</a>(),</div>
<div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;                           LShape, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getInt64(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>), <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getInt64(K),</div>
<div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;                           {TileR, TileM}, EltType, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>);</div>
<div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;            MatrixTy <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a> =</div>
<div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;                loadMatrix(BPtr, LoadOp1-&gt;<a class="code" href="classllvm_1_1LoadInst.html#af51c113a039c82f6870df5dc9666b5e3">getAlign</a>(), LoadOp1-&gt;<a class="code" href="classllvm_1_1LoadInst.html#a2eccc19f9061eeb7ad1e30e21f76034d">isVolatile</a>(),</div>
<div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;                           RShape, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getInt64(K), <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getInt64(J),</div>
<div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;                           {TileM, TileC}, EltType, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>);</div>
<div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;            emitMatrixMultiply(Res, A, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>, <span class="keyword">true</span>, <span class="keyword">false</span>,</div>
<div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;                               getFastMathFlags(MatMul));</div>
<div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;          }</div>
<div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;          storeMatrix(Res, CPtr, <a class="code" href="namespacellvm_1_1SPII.html#a1c7202c6054fef862bbed45957747cdfa36b3dd3b84fde3f8494a9b18af131856">Store</a>-&gt;getAlign(), <a class="code" href="namespacellvm_1_1SPII.html#a1c7202c6054fef862bbed45957747cdfa36b3dd3b84fde3f8494a9b18af131856">Store</a>-&gt;isVolatile(), {R, M},</div>
<div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;                      <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getInt64(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>), <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getInt64(J), EltType,</div>
<div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;                      <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>);</div>
<div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;        }</div>
<div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;    }</div>
<div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160; </div>
<div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;    <span class="comment">// Mark eliminated instructions as fused and remove them.</span></div>
<div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;    FusedInsts.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(<a class="code" href="namespacellvm_1_1SPII.html#a1c7202c6054fef862bbed45957747cdfa36b3dd3b84fde3f8494a9b18af131856">Store</a>);</div>
<div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;    FusedInsts.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(MatMul);</div>
<div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;    <a class="code" href="namespacellvm_1_1SPII.html#a1c7202c6054fef862bbed45957747cdfa36b3dd3b84fde3f8494a9b18af131856">Store</a>-&gt;eraseFromParent();</div>
<div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;    MatMul-&gt;<a class="code" href="classllvm_1_1Instruction.html#ae6b978645b8ac72d1a35e1298ffdd4f0">eraseFromParent</a>();</div>
<div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;    <span class="keywordflow">if</span> (LoadOp0-&gt;<a class="code" href="classllvm_1_1Value.html#a7c779ce2ba55bc94f52014fc25f3d520">hasNUses</a>(0)) {</div>
<div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;      FusedInsts.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(LoadOp0);</div>
<div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;      LoadOp0-&gt;<a class="code" href="classllvm_1_1Instruction.html#ae6b978645b8ac72d1a35e1298ffdd4f0">eraseFromParent</a>();</div>
<div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;    }</div>
<div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;    <span class="keywordflow">if</span> (LoadOp1 != LoadOp0 &amp;&amp; LoadOp1-&gt;<a class="code" href="classllvm_1_1Value.html#a7c779ce2ba55bc94f52014fc25f3d520">hasNUses</a>(0)) {</div>
<div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;      FusedInsts.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(LoadOp1);</div>
<div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;      LoadOp1-&gt;<a class="code" href="classllvm_1_1Instruction.html#ae6b978645b8ac72d1a35e1298ffdd4f0">eraseFromParent</a>();</div>
<div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;    }</div>
<div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;  }</div>
<div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;<span class="comment">  /// Try to lower matrix multiply chains by fusing operations.</span></div>
<div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;<span class="comment">  ///</span></div>
<div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;<span class="comment">  /// Call finalizeLowering on lowered instructions.  Instructions that are</span></div>
<div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;<span class="comment">  /// completely eliminated by fusion are added to \p FusedInsts.</span></div>
<div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> LowerMatrixMultiplyFused(<a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *MatMul,</div>
<div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;                                <a class="code" href="classllvm_1_1SmallPtrSetImpl.html">SmallPtrSetImpl&lt;Instruction *&gt;</a> &amp;FusedInsts) {</div>
<div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="LowerMatrixIntrinsics_8cpp.html#a112115ac448f82f5861496f7282969b3">FuseMatrix</a> || !DT)</div>
<div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160; </div>
<div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(AA &amp;&amp; LI &amp;&amp; <span class="stringliteral">&quot;Analyses should be available&quot;</span>);</div>
<div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160; </div>
<div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a> = MatMul-&gt;<a class="code" href="classllvm_1_1CallBase.html#ab2caa29167597390ab2fc3cf30d70389">getArgOperand</a>(0);</div>
<div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a> = MatMul-&gt;<a class="code" href="classllvm_1_1CallBase.html#ab2caa29167597390ab2fc3cf30d70389">getArgOperand</a>(1);</div>
<div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160; </div>
<div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;    <span class="comment">// We can fold the transpose into the operand that is used to fetch scalars.</span></div>
<div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="classT.html">T</a>;</div>
<div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="LowerMatrixIntrinsics_8cpp.html#ab891e50c619f81260e857e297f460fe5">MatrixLayout</a> == <a class="code" href="LowerMatrixIntrinsics_8cpp.html#abf221949fc61d1494af06b50731bdc90af695e73139b1c1d06d77655104370f00">MatrixLayoutTy::ColumnMajor</a></div>
<div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;            ? <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, m_Intrinsic&lt;Intrinsic::matrix_transpose&gt;(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="classT.html">T</a>)))</div>
<div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;            : <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(A, m_Intrinsic&lt;Intrinsic::matrix_transpose&gt;(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="classT.html">T</a>)))) {</div>
<div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;      <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>(MatMul);</div>
<div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;      <span class="keyword">auto</span> *EltType = cast&lt;VectorType&gt;(MatMul-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>())-&gt;getElementType();</div>
<div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;      ShapeInfo LShape(MatMul-&gt;<a class="code" href="classllvm_1_1CallBase.html#ab2caa29167597390ab2fc3cf30d70389">getArgOperand</a>(2), MatMul-&gt;<a class="code" href="classllvm_1_1CallBase.html#ab2caa29167597390ab2fc3cf30d70389">getArgOperand</a>(3));</div>
<div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;      ShapeInfo RShape(MatMul-&gt;<a class="code" href="classllvm_1_1CallBase.html#ab2caa29167597390ab2fc3cf30d70389">getArgOperand</a>(3), MatMul-&gt;<a class="code" href="classllvm_1_1CallBase.html#ab2caa29167597390ab2fc3cf30d70389">getArgOperand</a>(4));</div>
<div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a> = LShape.NumRows;</div>
<div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a> = LShape.NumColumns;</div>
<div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = RShape.NumColumns;</div>
<div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160; </div>
<div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;      MatrixTy MA;</div>
<div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;      MatrixTy MB;</div>
<div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160; </div>
<div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *Transpose;</div>
<div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="LowerMatrixIntrinsics_8cpp.html#ab891e50c619f81260e857e297f460fe5">MatrixLayout</a> == <a class="code" href="LowerMatrixIntrinsics_8cpp.html#abf221949fc61d1494af06b50731bdc90af695e73139b1c1d06d77655104370f00">MatrixLayoutTy::ColumnMajor</a>) {</div>
<div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;        MA = getMatrix(A, ShapeInfo(R, M), <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>);</div>
<div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;        MB = getMatrix(<a class="code" href="classT.html">T</a>, ShapeInfo(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, M), <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>);</div>
<div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;        Transpose = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>;</div>
<div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;        MA = getMatrix(<a class="code" href="classT.html">T</a>, ShapeInfo(R, M), <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>);</div>
<div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;        MB = getMatrix(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, ShapeInfo(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, M), <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>);</div>
<div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;        Transpose = <a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>;</div>
<div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;      }</div>
<div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160; </div>
<div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;      <span class="comment">// Initialize the output</span></div>
<div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;      MatrixTy <a class="code" href="namespacellvm_1_1ms__demangle.html#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a>(R, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, EltType);</div>
<div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160; </div>
<div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;      emitMatrixMultiply(Result, MA, MB, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>, <span class="keyword">false</span>, <span class="keyword">true</span>,</div>
<div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;                         getFastMathFlags(MatMul));</div>
<div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160; </div>
<div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;      FusedInsts.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(MatMul);</div>
<div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;      <span class="keywordflow">if</span> (Transpose-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>()) {</div>
<div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;        FusedInsts.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(cast&lt;Instruction&gt;(Transpose));</div>
<div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;        <a class="code" href="ARMLowOverheadLoops_8cpp.html#a3bf42baf773b375802538951c88d8e12">ToRemove</a>.push_back(cast&lt;Instruction&gt;(Transpose));</div>
<div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;        <span class="comment">// TODO: add a fake entry for the folded instruction so that this is</span></div>
<div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;        <span class="comment">// included in the expression in the remark.</span></div>
<div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;        Inst2ColumnMatrix[Transpose] = MatrixTy(M, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, EltType);</div>
<div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;      }</div>
<div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;      finalizeLowering(MatMul, Result, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>);</div>
<div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;    }</div>
<div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160; </div>
<div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;    <span class="keywordflow">if</span> (!MatMul-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>() || <a class="code" href="LowerMatrixIntrinsics_8cpp.html#ab891e50c619f81260e857e297f460fe5">MatrixLayout</a> != <a class="code" href="LowerMatrixIntrinsics_8cpp.html#abf221949fc61d1494af06b50731bdc90af695e73139b1c1d06d77655104370f00">MatrixLayoutTy::ColumnMajor</a>)</div>
<div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160; </div>
<div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;    <span class="comment">// Lower {ld, ld} -&gt; matmul -&gt; st chains.  No need to call finalizeLowering</span></div>
<div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;    <span class="comment">// since the single store user will be lowered as part of this.</span></div>
<div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;    <span class="keyword">auto</span> *LoadOp0 = dyn_cast&lt;LoadInst&gt;(A);</div>
<div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;    <span class="keyword">auto</span> *LoadOp1 = dyn_cast&lt;LoadInst&gt;(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div>
<div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;    <span class="keyword">auto</span> *<a class="code" href="namespacellvm_1_1SPII.html#a1c7202c6054fef862bbed45957747cdfa36b3dd3b84fde3f8494a9b18af131856">Store</a> = dyn_cast&lt;StoreInst&gt;(*MatMul-&gt;<a class="code" href="classllvm_1_1Value.html#a158da2b6d3d938aaa15b6acd00150e2c">user_begin</a>());</div>
<div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;    <span class="keywordflow">if</span> (LoadOp0 &amp;&amp; LoadOp1 &amp;&amp; <a class="code" href="namespacellvm_1_1SPII.html#a1c7202c6054fef862bbed45957747cdfa36b3dd3b84fde3f8494a9b18af131856">Store</a>) {</div>
<div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;      <span class="comment">// The store address must dominate the MatMul instruction, otherwise</span></div>
<div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;      <span class="comment">// we create invalid IR.</span></div>
<div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;      <a class="code" href="classllvm_1_1SetVector.html">SetVector&lt;Value *&gt;</a> WorkList;</div>
<div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;      WorkList.<a class="code" href="classllvm_1_1SetVector.html#a72d928b7fc2c5f2d56c6ac0265fd9c6e">insert</a>(<a class="code" href="namespacellvm_1_1SPII.html#a1c7202c6054fef862bbed45957747cdfa36b3dd3b84fde3f8494a9b18af131856">Store</a>-&gt;getOperand(1));</div>
<div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;      <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Instruction *&gt;</a> ToHoist;</div>
<div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != WorkList.<a class="code" href="classllvm_1_1SetVector.html#a18b9d328d2490f447589ba60345eba6e">size</a>(); ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *Current = WorkList[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>];</div>
<div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;        <span class="keyword">auto</span> *CurrI = dyn_cast&lt;Instruction&gt;(Current);</div>
<div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;        <span class="keywordflow">if</span> (!CurrI)</div>
<div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;        <span class="keywordflow">if</span> (isa&lt;PHINode&gt;(CurrI))</div>
<div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;          <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;        <span class="keywordflow">if</span> (DT-&gt;<a class="code" href="classllvm_1_1DominatorTree.html#a5c69311e8d44898dac36a155c3d8691d">dominates</a>(CurrI, MatMul))</div>
<div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;        <span class="keywordflow">if</span> (CurrI-&gt;mayHaveSideEffects() || CurrI-&gt;mayReadFromMemory())</div>
<div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;          <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;        ToHoist.push_back(CurrI);</div>
<div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;        WorkList.<a class="code" href="classllvm_1_1SetVector.html#a72d928b7fc2c5f2d56c6ac0265fd9c6e">insert</a>(CurrI-&gt;op_begin(), CurrI-&gt;op_end());</div>
<div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;      }</div>
<div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160; </div>
<div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;      <a class="code" href="namespacellvm.html#a74cdbd1e4f731e7d7cd83461b8b1de0b">sort</a>(ToHoist, [<span class="keyword">this</span>](<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *A, <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>) {</div>
<div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;        <span class="keywordflow">return</span> DT-&gt;<a class="code" href="classllvm_1_1DominatorTree.html#a5c69311e8d44898dac36a155c3d8691d">dominates</a>(A, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div>
<div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;      });</div>
<div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : ToHoist)</div>
<div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;        <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;moveBefore(MatMul);</div>
<div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160; </div>
<div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;      emitSIMDTiling(MatMul, LoadOp0, LoadOp1, <a class="code" href="namespacellvm_1_1SPII.html#a1c7202c6054fef862bbed45957747cdfa36b3dd3b84fde3f8494a9b18af131856">Store</a>, FusedInsts);</div>
<div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;    }</div>
<div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;  }</div>
<div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;<span class="comment">  /// Lowers llvm.matrix.multiply.</span></div>
<div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> LowerMultiply(<a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *MatMul) {</div>
<div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;    <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>(MatMul);</div>
<div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;    <span class="keyword">auto</span> *EltType = cast&lt;VectorType&gt;(MatMul-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>())-&gt;getElementType();</div>
<div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;    ShapeInfo LShape(MatMul-&gt;<a class="code" href="classllvm_1_1CallBase.html#ab2caa29167597390ab2fc3cf30d70389">getArgOperand</a>(2), MatMul-&gt;<a class="code" href="classllvm_1_1CallBase.html#ab2caa29167597390ab2fc3cf30d70389">getArgOperand</a>(3));</div>
<div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;    ShapeInfo RShape(MatMul-&gt;<a class="code" href="classllvm_1_1CallBase.html#ab2caa29167597390ab2fc3cf30d70389">getArgOperand</a>(3), MatMul-&gt;<a class="code" href="classllvm_1_1CallBase.html#ab2caa29167597390ab2fc3cf30d70389">getArgOperand</a>(4));</div>
<div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160; </div>
<div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;    <span class="keyword">const</span> MatrixTy &amp;Lhs = getMatrix(MatMul-&gt;<a class="code" href="classllvm_1_1CallBase.html#ab2caa29167597390ab2fc3cf30d70389">getArgOperand</a>(0), LShape, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>);</div>
<div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;    <span class="keyword">const</span> MatrixTy &amp;Rhs = getMatrix(MatMul-&gt;<a class="code" href="classllvm_1_1CallBase.html#ab2caa29167597390ab2fc3cf30d70389">getArgOperand</a>(1), RShape, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>);</div>
<div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Lhs.getElementType() == Rhs.getElementType() &amp;&amp;</div>
<div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;           <span class="stringliteral">&quot;Matrix multiply argument element types do not match.&quot;</span>);</div>
<div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160; </div>
<div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a> = LShape.NumRows;</div>
<div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = RShape.NumColumns;</div>
<div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(LShape.NumColumns == RShape.NumRows);</div>
<div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160; </div>
<div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;    <span class="comment">// Initialize the output</span></div>
<div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;    MatrixTy <a class="code" href="namespacellvm_1_1ms__demangle.html#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a>(R, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, EltType);</div>
<div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Lhs.getElementType() == <a class="code" href="namespacellvm_1_1ms__demangle.html#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a>.getElementType() &amp;&amp;</div>
<div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;           <span class="stringliteral">&quot;Matrix multiply result element type does not match arguments.&quot;</span>);</div>
<div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160; </div>
<div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;    emitMatrixMultiply(Result, Lhs, Rhs, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>, <span class="keyword">false</span>, <span class="keyword">false</span>,</div>
<div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;                       getFastMathFlags(MatMul));</div>
<div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;    finalizeLowering(MatMul, Result, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>);</div>
<div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;  }</div>
<div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;<span class="comment">  /// Lowers llvm.matrix.transpose.</span></div>
<div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> LowerTranspose(<a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *Inst) {</div>
<div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;    MatrixTy <a class="code" href="namespacellvm_1_1ms__demangle.html#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a>;</div>
<div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;    <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>(Inst);</div>
<div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *InputVal = Inst-&gt;<a class="code" href="classllvm_1_1CallBase.html#ab2caa29167597390ab2fc3cf30d70389">getArgOperand</a>(0);</div>
<div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;    <a class="code" href="classllvm_1_1VectorType.html">VectorType</a> *VectorTy = cast&lt;VectorType&gt;(InputVal-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>());</div>
<div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;    ShapeInfo ArgShape(Inst-&gt;<a class="code" href="classllvm_1_1CallBase.html#ab2caa29167597390ab2fc3cf30d70389">getArgOperand</a>(1), Inst-&gt;<a class="code" href="classllvm_1_1CallBase.html#ab2caa29167597390ab2fc3cf30d70389">getArgOperand</a>(2));</div>
<div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;    MatrixTy InputMatrix = getMatrix(InputVal, ArgShape, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>);</div>
<div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160; </div>
<div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">unsigned</span> NewNumVecs =</div>
<div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;        InputMatrix.isColumnMajor() ? ArgShape.NumRows : ArgShape.NumColumns;</div>
<div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">unsigned</span> NewNumElts =</div>
<div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;        InputMatrix.isColumnMajor() ? ArgShape.NumColumns : ArgShape.NumRows;</div>
<div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160; </div>
<div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> &lt; NewNumVecs; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;      <span class="comment">// Build a single result vector. First initialize it.</span></div>
<div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *ResultVector = <a class="code" href="classllvm_1_1PoisonValue.html#a1bf08613fb664a2e377a9a72c59a6b66">PoisonValue::get</a>(</div>
<div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;          <a class="code" href="classllvm_1_1FixedVectorType.html#af9a870d5df50fe0133a410b7c9114c80">FixedVectorType::get</a>(VectorTy-&gt;<a class="code" href="classllvm_1_1VectorType.html#a12e23c3d619db313388fe11dc76eb23f">getElementType</a>(), NewNumElts));</div>
<div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;      <span class="comment">// Go through the old elements and insert it into the resulting vector.</span></div>
<div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">auto</span> J : <a class="code" href="namespacellvm.html#a7b2175e18ff52174fad26b6b68818564">enumerate</a>(InputMatrix.vectors())) {</div>
<div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *Elt = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateExtractElement(J.value(), <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;        <span class="comment">// Row and column indices are transposed.</span></div>
<div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;        ResultVector =</div>
<div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;            <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateInsertElement(ResultVector, Elt, J.index());</div>
<div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;      }</div>
<div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;      <a class="code" href="namespacellvm_1_1ms__demangle.html#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a>.addVector(ResultVector);</div>
<div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;    }</div>
<div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160; </div>
<div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;    <span class="comment">// TODO: Improve estimate of operations needed for transposes. Currently we</span></div>
<div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;    <span class="comment">// just count the insertelement/extractelement instructions, but do not</span></div>
<div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;    <span class="comment">// account for later simplifications/combines.</span></div>
<div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;    finalizeLowering(</div>
<div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;        Inst,</div>
<div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;        <a class="code" href="namespacellvm_1_1ms__demangle.html#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a>.addNumComputeOps(2 * ArgShape.NumRows * ArgShape.NumColumns)</div>
<div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;            .addNumExposedTransposes(1),</div>
<div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;        <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>);</div>
<div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;  }</div>
<div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;<span class="comment">  /// Lower load instructions, if shape information is available.</span></div>
<div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;<span class="comment"></span>  <span class="keywordtype">bool</span> VisitLoad(<a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a> *Inst, <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>, <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> &amp;<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>) {</div>
<div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;    <span class="keyword">auto</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = ShapeMap.<a class="code" href="classllvm_1_1ValueMap.html#a7629b8c5f6a6802ee0fdc5c290769692">find</a>(Inst);</div>
<div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> == ShapeMap.<a class="code" href="classllvm_1_1ValueMap.html#ab871e2d0ebded563edfebd6766fc1a04">end</a>())</div>
<div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160; </div>
<div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;    <a class="code" href="X86ISelLowering_8cpp.html#a47413709ef916baf36607da462d93ccc">LowerLoad</a>(Inst, <a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>, Inst-&gt;<a class="code" href="classllvm_1_1LoadInst.html#af51c113a039c82f6870df5dc9666b5e3">getAlign</a>(),</div>
<div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;              <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getInt64(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;second.getStride()), Inst-&gt;<a class="code" href="classllvm_1_1LoadInst.html#a2eccc19f9061eeb7ad1e30e21f76034d">isVolatile</a>(),</div>
<div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;              <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;second);</div>
<div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;  }</div>
<div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160; </div>
<div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;  <span class="keywordtype">bool</span> VisitStore(<a class="code" href="classllvm_1_1StoreInst.html">StoreInst</a> *Inst, <a class="code" href="classllvm_1_1Value.html">Value</a> *StoredVal, <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>,</div>
<div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;                  <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> &amp;<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>) {</div>
<div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;    <span class="keyword">auto</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = ShapeMap.<a class="code" href="classllvm_1_1ValueMap.html#a7629b8c5f6a6802ee0fdc5c290769692">find</a>(StoredVal);</div>
<div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> == ShapeMap.<a class="code" href="classllvm_1_1ValueMap.html#ab871e2d0ebded563edfebd6766fc1a04">end</a>())</div>
<div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160; </div>
<div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;    <a class="code" href="X86ISelLowering_8cpp.html#a05914158f39e230548b1b743eee2e5f6">LowerStore</a>(Inst, StoredVal, <a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>, Inst-&gt;<a class="code" href="classllvm_1_1StoreInst.html#a3b47950858d6ed72efd1010a35b81caa">getAlign</a>(),</div>
<div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;               <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getInt64(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;second.getStride()), Inst-&gt;<a class="code" href="classllvm_1_1StoreInst.html#ae3098a2ed52ddc6b853a3006ea646b7e">isVolatile</a>(),</div>
<div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;               <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;second);</div>
<div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;  }</div>
<div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;<span class="comment">  /// Lower binary operators, if shape information is available.</span></div>
<div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;<span class="comment"></span>  <span class="keywordtype">bool</span> VisitBinaryOperator(<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> *Inst) {</div>
<div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;    <span class="keyword">auto</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = ShapeMap.<a class="code" href="classllvm_1_1ValueMap.html#a7629b8c5f6a6802ee0fdc5c290769692">find</a>(Inst);</div>
<div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> == ShapeMap.<a class="code" href="classllvm_1_1ValueMap.html#ab871e2d0ebded563edfebd6766fc1a04">end</a>())</div>
<div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160; </div>
<div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Lhs = Inst-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0);</div>
<div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Rhs = Inst-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(1);</div>
<div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160; </div>
<div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;    <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>(Inst);</div>
<div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;    ShapeInfo &amp;Shape = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;second;</div>
<div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160; </div>
<div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;    MatrixTy <a class="code" href="namespacellvm_1_1ms__demangle.html#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a>;</div>
<div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;    MatrixTy <a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a> = getMatrix(Lhs, Shape, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>);</div>
<div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;    MatrixTy <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a> = getMatrix(Rhs, Shape, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>);</div>
<div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>.isColumnMajor() == <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.isColumnMajor() &amp;&amp;</div>
<div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;           <a class="code" href="namespacellvm_1_1ms__demangle.html#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a>.isColumnMajor() == <a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>.isColumnMajor() &amp;&amp;</div>
<div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;           <span class="stringliteral">&quot;operands must agree on matrix layout&quot;</span>);</div>
<div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160; </div>
<div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;    <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.setFastMathFlags(getFastMathFlags(Inst));</div>
<div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160; </div>
<div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;    <span class="comment">// Helper to perform binary op on vectors.</span></div>
<div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;    <span class="keyword">auto</span> BuildVectorOp = [&amp;<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>, Inst](<a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>) {</div>
<div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;      <span class="keywordflow">switch</span> (Inst-&gt;<a class="code" href="classllvm_1_1BinaryOperator.html#a31bf07f3f61525486633bc1d0bbaf029">getOpcode</a>()) {</div>
<div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a2b016c207343046b2bac45e69e76dcec">Instruction::Add</a>:</div>
<div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAdd(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>);</div>
<div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="X86PartialReduction_8cpp.html#ae0f503db91504a3f3440ab81260e4134">Instruction::Mul</a>:</div>
<div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateMul(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>);</div>
<div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;      <span class="keywordflow">case</span> Instruction::Sub:</div>
<div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateSub(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>);</div>
<div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;      <span class="keywordflow">case</span> Instruction::FAdd:</div>
<div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateFAdd(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>);</div>
<div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;      <span class="keywordflow">case</span> Instruction::FMul:</div>
<div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateFMul(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>);</div>
<div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;      <span class="keywordflow">case</span> Instruction::FSub:</div>
<div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateFSub(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>);</div>
<div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;      <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;        <a class="code" href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Unsupported binary operator for matrix&quot;</span>);</div>
<div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;      }</div>
<div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;    };</div>
<div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160; </div>
<div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> &lt; Shape.getNumVectors(); ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div>
<div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;      <a class="code" href="namespacellvm_1_1ms__demangle.html#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a>.addVector(BuildVectorOp(<a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>.getVector(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>), <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.getVector(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)));</div>
<div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160; </div>
<div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;    finalizeLowering(Inst,</div>
<div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;                     <a class="code" href="namespacellvm_1_1ms__demangle.html#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a>.addNumComputeOps(getNumOps(<a class="code" href="namespacellvm_1_1ms__demangle.html#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a>.getVectorTy()) *</div>
<div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;                                             <a class="code" href="namespacellvm_1_1ms__demangle.html#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a>.getNumVectors()),</div>
<div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;                     <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>);</div>
<div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;  }</div>
<div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;<span class="comment">  /// Lower unary operators, if shape information is available.</span></div>
<div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;<span class="comment"></span>  <span class="keywordtype">bool</span> VisitUnaryOperator(<a class="code" href="classllvm_1_1UnaryOperator.html">UnaryOperator</a> *Inst) {</div>
<div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;    <span class="keyword">auto</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = ShapeMap.<a class="code" href="classllvm_1_1ValueMap.html#a7629b8c5f6a6802ee0fdc5c290769692">find</a>(Inst);</div>
<div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> == ShapeMap.<a class="code" href="classllvm_1_1ValueMap.html#ab871e2d0ebded563edfebd6766fc1a04">end</a>())</div>
<div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160; </div>
<div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a> = Inst-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0);</div>
<div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160; </div>
<div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;    <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>(Inst);</div>
<div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;    ShapeInfo &amp;Shape = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;second;</div>
<div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160; </div>
<div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;    MatrixTy <a class="code" href="namespacellvm_1_1ms__demangle.html#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a>;</div>
<div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;    MatrixTy <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a> = getMatrix(<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>, Shape, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>);</div>
<div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160; </div>
<div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;    <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.setFastMathFlags(getFastMathFlags(Inst));</div>
<div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160; </div>
<div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;    <span class="comment">// Helper to perform unary op on vectors.</span></div>
<div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;    <span class="keyword">auto</span> BuildVectorOp = [&amp;<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>, Inst](<a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>) {</div>
<div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;      <span class="keywordflow">switch</span> (Inst-&gt;<a class="code" href="classllvm_1_1UnaryOperator.html#a7cece7ddf076c1dccc81f743e3b7bd36">getOpcode</a>()) {</div>
<div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;      <span class="keywordflow">case</span> Instruction::FNeg:</div>
<div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateFNeg(<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>);</div>
<div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;      <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;        <a class="code" href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Unsupported unary operator for matrix&quot;</span>);</div>
<div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;      }</div>
<div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;    };</div>
<div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160; </div>
<div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> &lt; Shape.getNumVectors(); ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div>
<div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;      <a class="code" href="namespacellvm_1_1ms__demangle.html#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a>.addVector(BuildVectorOp(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getVector(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)));</div>
<div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160; </div>
<div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;    finalizeLowering(Inst,</div>
<div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;                     <a class="code" href="namespacellvm_1_1ms__demangle.html#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a>.addNumComputeOps(getNumOps(<a class="code" href="namespacellvm_1_1ms__demangle.html#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a>.getVectorTy()) *</div>
<div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;                                             <a class="code" href="namespacellvm_1_1ms__demangle.html#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a>.getNumVectors()),</div>
<div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;                     <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>);</div>
<div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;  }</div>
<div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;<span class="comment">  /// Helper to linearize a matrix expression tree into a string. Currently</span></div>
<div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;<span class="comment">  /// matrix expressions are linarized by starting at an expression leaf and</span></div>
<div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;<span class="comment">  /// linearizing bottom up.</span></div>
<div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;<span class="comment"></span>  <span class="keyword">struct </span>ExprLinearizer {</div>
<div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;    <span class="keywordtype">unsigned</span> LengthToBreak = 100;</div>
<div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;    std::string Str;</div>
<div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;    <a class="code" href="classllvm_1_1raw__string__ostream.html">raw_string_ostream</a> Stream;</div>
<div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;    <span class="keywordtype">unsigned</span> LineLength = 0;</div>
<div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1DataLayout.html">DataLayout</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>;</div>
<div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;<span class="comment">    /// Mapping from instructions to matrixes. It is used to identify</span></div>
<div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;<span class="comment">    /// matrix instructions.</span></div>
<div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;<span class="comment"></span>    <span class="keyword">const</span> <a class="code" href="classllvm_1_1MapVector.html">MapVector&lt;Value *, MatrixTy&gt;</a> &amp;Inst2Matrix;</div>
<div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;<span class="comment">    /// Mapping from values to the leaves of all expressions that the value is</span></div>
<div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;<span class="comment">    /// part of.</span></div>
<div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;<span class="comment"></span>    <span class="keyword">const</span> <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;Value *, SmallPtrSet&lt;Value *, 2&gt;</a>&gt; &amp;<a class="code" href="namespacellvm_1_1omp.html#a8c6f525466cc262e00c409c31f9a4272aa6156ea9d66fef24e87e841fbabf7cca">Shared</a>;</div>
<div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;<span class="comment">    /// Set of matrix expressions in the scope of a given DISubprogram.</span></div>
<div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;<span class="comment"></span>    <span class="keyword">const</span> <a class="code" href="classllvm_1_1SmallSetVector.html">SmallSetVector&lt;Value *, 32&gt;</a> &amp;ExprsInSubprogram;</div>
<div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;<span class="comment">    /// Leaf node of the expression to linearize.</span></div>
<div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;<span class="comment"></span>    <a class="code" href="classllvm_1_1Value.html">Value</a> *Leaf;</div>
<div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;<span class="comment">    /// Used to keep track of sub-expressions that get reused while linearizing</span></div>
<div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;<span class="comment">    /// the expression. Re-used sub-expressions are marked as (reused).</span></div>
<div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;<span class="comment"></span>    <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;Value *, 8&gt;</a> ReusedExprs;</div>
<div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160; </div>
<div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;    ExprLinearizer(<span class="keyword">const</span> <a class="code" href="classllvm_1_1DataLayout.html">DataLayout</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>,</div>
<div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;                   <span class="keyword">const</span> <a class="code" href="classllvm_1_1MapVector.html">MapVector&lt;Value *, MatrixTy&gt;</a> &amp;Inst2Matrix,</div>
<div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;                   <span class="keyword">const</span> <a class="code" href="classllvm_1_1DenseMap.html">DenseMap</a>&lt;<a class="code" href="classllvm_1_1Value.html">Value</a> *, <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;Value *, 2&gt;</a>&gt; &amp;Shared,</div>
<div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;                   <span class="keyword">const</span> <a class="code" href="classllvm_1_1SmallSetVector.html">SmallSetVector&lt;Value *, 32&gt;</a> &amp;ExprsInSubprogram,</div>
<div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;                   <a class="code" href="classllvm_1_1Value.html">Value</a> *Leaf)</div>
<div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;        : Stream(Str), <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>), Inst2Matrix(Inst2Matrix), <a class="code" href="namespacellvm_1_1omp.html#a8c6f525466cc262e00c409c31f9a4272aa6156ea9d66fef24e87e841fbabf7cca">Shared</a>(<a class="code" href="namespacellvm_1_1omp.html#a8c6f525466cc262e00c409c31f9a4272aa6156ea9d66fef24e87e841fbabf7cca">Shared</a>),</div>
<div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;          ExprsInSubprogram(ExprsInSubprogram), Leaf(Leaf) {}</div>
<div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160; </div>
<div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;    <span class="keywordtype">void</span> indent(<span class="keywordtype">unsigned</span> <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>) {</div>
<div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;      LineLength += <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>;</div>
<div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;        Stream &lt;&lt; <span class="stringliteral">&quot; &quot;</span>;</div>
<div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;    }</div>
<div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160; </div>
<div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;    <span class="keywordtype">void</span> lineBreak() {</div>
<div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;      Stream &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;      LineLength = 0;</div>
<div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;    }</div>
<div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160; </div>
<div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;    <span class="keywordtype">void</span> maybeIndent(<span class="keywordtype">unsigned</span> Indent) {</div>
<div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;      <span class="keywordflow">if</span> (LineLength &gt;= LengthToBreak)</div>
<div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;        lineBreak();</div>
<div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160; </div>
<div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;      <span class="keywordflow">if</span> (LineLength == 0)</div>
<div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;        indent(Indent);</div>
<div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;    }</div>
<div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160; </div>
<div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="namespacellvm.html#a0cc156a5675c3f3e0ae9d329163b9f8b">write</a>(<a class="code" href="classllvm_1_1StringRef.html">StringRef</a> <a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>) {</div>
<div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;      LineLength += <a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>.size();</div>
<div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;      Stream &lt;&lt; <a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>;</div>
<div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;    }</div>
<div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160; </div>
<div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *getUnderlyingObjectThroughLoads(<a class="code" href="classllvm_1_1Value.html">Value</a> *V) {</div>
<div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a> = <a class="code" href="namespacellvm.html#ac2db21413768e904d56a02c26184823d">getPointerOperand</a>(V))</div>
<div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;        <span class="keywordflow">return</span> getUnderlyingObjectThroughLoads(<a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>);</div>
<div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (V-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a3b996fbf8458aafffc86cb98a68d0a47">isPointerTy</a>())</div>
<div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#a3b1c5788b85ffa254be0e834edf5cf8f">getUnderlyingObject</a>(V);</div>
<div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;      <span class="keywordflow">return</span> V;</div>
<div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;    }</div>
<div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;<span class="comment">    /// Returns true if \p V is a matrix value in the given subprogram.</span></div>
<div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;<span class="comment"></span>    <span class="keywordtype">bool</span> isMatrix(<a class="code" href="classllvm_1_1Value.html">Value</a> *V)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> ExprsInSubprogram.<a class="code" href="classllvm_1_1SetVector.html#a21c2c6ae5ec23004dc4020eacf83bbce">count</a>(V); }</div>
<div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160;<span class="comment">    /// If \p V is a matrix value, print its shape as as NumRows x NumColumns to</span></div>
<div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;<span class="comment">    /// \p SS.</span></div>
<div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160;<span class="comment"></span>    <span class="keywordtype">void</span> prettyPrintMatrixType(<a class="code" href="classllvm_1_1Value.html">Value</a> *V, <a class="code" href="classllvm_1_1raw__string__ostream.html">raw_string_ostream</a> &amp;<a class="code" href="namespacellvm_1_1X86AS.html#aea2591d7d017866934bcf72ee3dc8a31a1337cc82304bed6c1a811f1a7f308aca">SS</a>) {</div>
<div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;      <span class="keyword">auto</span> <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a> = Inst2Matrix.<a class="code" href="classllvm_1_1MapVector.html#a6b0c3e15c351ba9682837c29b0a141b6">find</a>(V);</div>
<div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;      <span class="keywordflow">if</span> (M == Inst2Matrix.<a class="code" href="classllvm_1_1MapVector.html#a0881334358ff6ff7ff8cea5562c7988e">end</a>())</div>
<div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160;        <a class="code" href="namespacellvm_1_1X86AS.html#aea2591d7d017866934bcf72ee3dc8a31a1337cc82304bed6c1a811f1a7f308aca">SS</a> &lt;&lt; <span class="stringliteral">&quot;unknown&quot;</span>;</div>
<div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;      <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;        <a class="code" href="namespacellvm_1_1X86AS.html#aea2591d7d017866934bcf72ee3dc8a31a1337cc82304bed6c1a811f1a7f308aca">SS</a> &lt;&lt; <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>-&gt;second.getNumRows();</div>
<div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;        <a class="code" href="namespacellvm_1_1X86AS.html#aea2591d7d017866934bcf72ee3dc8a31a1337cc82304bed6c1a811f1a7f308aca">SS</a> &lt;&lt; <span class="stringliteral">&quot;x&quot;</span>;</div>
<div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160;        <a class="code" href="namespacellvm_1_1X86AS.html#aea2591d7d017866934bcf72ee3dc8a31a1337cc82304bed6c1a811f1a7f308aca">SS</a> &lt;&lt; <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>-&gt;second.getNumColumns();</div>
<div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;      }</div>
<div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160;    }</div>
<div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160;<span class="comment">    /// Write the called function name. Handles calls to llvm.matrix.*</span></div>
<div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160;<span class="comment">    /// specially: we write the name, followed by the dimensions of the input</span></div>
<div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160;<span class="comment">    /// matrixes, followed by the scalar type name.</span></div>
<div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;<span class="comment"></span>    <span class="keywordtype">void</span> writeFnName(<a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *CI) {</div>
<div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;      <span class="keywordflow">if</span> (!CI-&gt;<a class="code" href="classllvm_1_1CallBase.html#a83b8c9e572130f403445c0b0f69b837c">getCalledFunction</a>())</div>
<div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160;        <a class="code" href="namespacellvm.html#a0cc156a5675c3f3e0ae9d329163b9f8b">write</a>(<span class="stringliteral">&quot;&lt;no called fn&gt;&quot;</span>);</div>
<div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160;      <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160;        <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> <a class="code" href="namespacellvm_1_1GraphProgram.html#a0ad4685976f8c4d4a697a53fbe05d10b">Name</a> = CI-&gt;<a class="code" href="classllvm_1_1CallBase.html#a83b8c9e572130f403445c0b0f69b837c">getCalledFunction</a>()-&gt;<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>();</div>
<div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1GraphProgram.html#a0ad4685976f8c4d4a697a53fbe05d10b">Name</a>.startswith(<span class="stringliteral">&quot;llvm.matrix&quot;</span>)) {</div>
<div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;          <a class="code" href="namespacellvm.html#a0cc156a5675c3f3e0ae9d329163b9f8b">write</a>(Name);</div>
<div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;          <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;        }</div>
<div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160;        <span class="keyword">auto</span> *II = cast&lt;IntrinsicInst&gt;(CI);</div>
<div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160;        <a class="code" href="namespacellvm.html#a0cc156a5675c3f3e0ae9d329163b9f8b">write</a>(<a class="code" href="namespacellvm_1_1Intrinsic.html#aac36688686cd311fab09e6b55efb7f96">Intrinsic::getBaseName</a>(II-&gt;<a class="code" href="classllvm_1_1IntrinsicInst.html#a7ff64b3625b6f9020556ed05a5f72af4">getIntrinsicID</a>())</div>
<div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160;                  .<a class="code" href="classllvm_1_1StringRef.html#a3fb2867a1e9fa36e135d9ee4dffb0167">drop_front</a>(<a class="code" href="classllvm_1_1StringRef.html">StringRef</a>(<span class="stringliteral">&quot;llvm.matrix.&quot;</span>).<a class="code" href="namespacellvm.html#a10f3d955592ae2bc745f57e5b48ae115">size</a>()));</div>
<div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;        <a class="code" href="namespacellvm.html#a0cc156a5675c3f3e0ae9d329163b9f8b">write</a>(<span class="stringliteral">&quot;.&quot;</span>);</div>
<div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160;        std::string Tmp;</div>
<div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;        <a class="code" href="classllvm_1_1raw__string__ostream.html">raw_string_ostream</a> <a class="code" href="namespacellvm_1_1X86AS.html#aea2591d7d017866934bcf72ee3dc8a31a1337cc82304bed6c1a811f1a7f308aca">SS</a>(Tmp);</div>
<div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160; </div>
<div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160;        <span class="keywordflow">switch</span> (II-&gt;<a class="code" href="classllvm_1_1IntrinsicInst.html#a7ff64b3625b6f9020556ed05a5f72af4">getIntrinsicID</a>()) {</div>
<div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160;        <span class="keywordflow">case</span> Intrinsic::matrix_multiply:</div>
<div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160;          prettyPrintMatrixType(II-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0), <a class="code" href="namespacellvm_1_1X86AS.html#aea2591d7d017866934bcf72ee3dc8a31a1337cc82304bed6c1a811f1a7f308aca">SS</a>);</div>
<div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160;          <a class="code" href="namespacellvm_1_1X86AS.html#aea2591d7d017866934bcf72ee3dc8a31a1337cc82304bed6c1a811f1a7f308aca">SS</a> &lt;&lt; <span class="stringliteral">&quot;.&quot;</span>;</div>
<div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;          prettyPrintMatrixType(II-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(1), <a class="code" href="namespacellvm_1_1X86AS.html#aea2591d7d017866934bcf72ee3dc8a31a1337cc82304bed6c1a811f1a7f308aca">SS</a>);</div>
<div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;          <a class="code" href="namespacellvm_1_1X86AS.html#aea2591d7d017866934bcf72ee3dc8a31a1337cc82304bed6c1a811f1a7f308aca">SS</a> &lt;&lt; <span class="stringliteral">&quot;.&quot;</span> &lt;&lt; *II-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a4abb39a66573f61fda80469faa5d861d">getScalarType</a>();</div>
<div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;        <span class="keywordflow">case</span> Intrinsic::matrix_transpose:</div>
<div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160;          prettyPrintMatrixType(II-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0), <a class="code" href="namespacellvm_1_1X86AS.html#aea2591d7d017866934bcf72ee3dc8a31a1337cc82304bed6c1a811f1a7f308aca">SS</a>);</div>
<div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;          <a class="code" href="namespacellvm_1_1X86AS.html#aea2591d7d017866934bcf72ee3dc8a31a1337cc82304bed6c1a811f1a7f308aca">SS</a> &lt;&lt; <span class="stringliteral">&quot;.&quot;</span> &lt;&lt; *II-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a4abb39a66573f61fda80469faa5d861d">getScalarType</a>();</div>
<div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;        <span class="keywordflow">case</span> Intrinsic::matrix_column_major_load:</div>
<div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;          prettyPrintMatrixType(II, <a class="code" href="namespacellvm_1_1X86AS.html#aea2591d7d017866934bcf72ee3dc8a31a1337cc82304bed6c1a811f1a7f308aca">SS</a>);</div>
<div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;          <a class="code" href="namespacellvm_1_1X86AS.html#aea2591d7d017866934bcf72ee3dc8a31a1337cc82304bed6c1a811f1a7f308aca">SS</a> &lt;&lt; <span class="stringliteral">&quot;.&quot;</span> &lt;&lt; *II-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a4abb39a66573f61fda80469faa5d861d">getScalarType</a>();</div>
<div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;        <span class="keywordflow">case</span> Intrinsic::matrix_column_major_store:</div>
<div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;          prettyPrintMatrixType(II-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0), <a class="code" href="namespacellvm_1_1X86AS.html#aea2591d7d017866934bcf72ee3dc8a31a1337cc82304bed6c1a811f1a7f308aca">SS</a>);</div>
<div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;          <a class="code" href="namespacellvm_1_1X86AS.html#aea2591d7d017866934bcf72ee3dc8a31a1337cc82304bed6c1a811f1a7f308aca">SS</a> &lt;&lt; <span class="stringliteral">&quot;.&quot;</span> &lt;&lt; *II-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0)-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a4abb39a66573f61fda80469faa5d861d">getScalarType</a>();</div>
<div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;          <a class="code" href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Unhandled case&quot;</span>);</div>
<div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;        }</div>
<div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160;        <a class="code" href="namespacellvm_1_1X86AS.html#aea2591d7d017866934bcf72ee3dc8a31a1337cc82304bed6c1a811f1a7f308aca">SS</a>.flush();</div>
<div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;        <a class="code" href="namespacellvm.html#a0cc156a5675c3f3e0ae9d329163b9f8b">write</a>(Tmp);</div>
<div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160;      }</div>
<div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160;    }</div>
<div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160; </div>
<div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160;    <span class="keywordtype">unsigned</span> getNumShapeArgs(<a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *CI)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1IntrinsicInst.html">IntrinsicInst</a> *II = dyn_cast&lt;IntrinsicInst&gt;(CI)) {</div>
<div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160;        <span class="keywordflow">switch</span> (II-&gt;<a class="code" href="classllvm_1_1IntrinsicInst.html#a7ff64b3625b6f9020556ed05a5f72af4">getIntrinsicID</a>()) {</div>
<div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160;        <span class="keywordflow">case</span> Intrinsic::matrix_multiply:</div>
<div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;          <span class="keywordflow">return</span> 3;</div>
<div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160;        <span class="keywordflow">case</span> Intrinsic::matrix_transpose:</div>
<div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160;          <span class="keywordflow">return</span> 2;</div>
<div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;        <span class="keywordflow">case</span> Intrinsic::matrix_column_major_load:</div>
<div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;        <span class="keywordflow">case</span> Intrinsic::matrix_column_major_store:</div>
<div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;          <span class="keywordflow">return</span> 3;</div>
<div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;          <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;        }</div>
<div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;      }</div>
<div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;      <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160;    }</div>
<div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;<span class="comment">    /// Special printing for values: for pointers, we print if they refer to an</span></div>
<div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160;<span class="comment">    /// (function) external address or a stack address, for other values we</span></div>
<div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;<span class="comment">    /// either print the constant or &quot;scalar&quot;/&quot;matrix&quot; for other values.</span></div>
<div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160;<span class="comment"></span>    <span class="keywordtype">void</span> <a class="code" href="namespacellvm.html#a0cc156a5675c3f3e0ae9d329163b9f8b">write</a>(<a class="code" href="classllvm_1_1Value.html">Value</a> *V) {</div>
<div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160;      V = getUnderlyingObjectThroughLoads(V);</div>
<div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;      <span class="keywordflow">if</span> (V-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a3b996fbf8458aafffc86cb98a68d0a47">isPointerTy</a>()) {</div>
<div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;        <span class="keywordflow">if</span> (isa&lt;AllocaInst&gt;(V)) {</div>
<div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;          Stream &lt;&lt; <span class="stringliteral">&quot;stack addr&quot;</span>;</div>
<div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;          LineLength += <a class="code" href="classllvm_1_1StringRef.html">StringRef</a>(<span class="stringliteral">&quot;stack addr&quot;</span>).<a class="code" href="classllvm_1_1StringRef.html#a5db9240c74644c67759dd0f901fc3c7d">size</a>();</div>
<div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;          Stream &lt;&lt; <span class="stringliteral">&quot;addr&quot;</span>;</div>
<div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;          LineLength += <a class="code" href="classllvm_1_1StringRef.html">StringRef</a>(<span class="stringliteral">&quot;addr&quot;</span>).<a class="code" href="classllvm_1_1StringRef.html#a5db9240c74644c67759dd0f901fc3c7d">size</a>();</div>
<div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;        }</div>
<div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;        <span class="keywordflow">if</span> (!V-&gt;<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>().<a class="code" href="classllvm_1_1StringRef.html#a2dc80c585ad5882da8cae7b5968f7e74">empty</a>()) {</div>
<div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;          Stream &lt;&lt; <span class="stringliteral">&quot; %&quot;</span> &lt;&lt; V-&gt;<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>() &lt;&lt; <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;          LineLength += V-&gt;<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>().<a class="code" href="classllvm_1_1StringRef.html#a5db9240c74644c67759dd0f901fc3c7d">size</a>() + 2;</div>
<div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160;        }</div>
<div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;      }</div>
<div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160; </div>
<div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160;      std::string Tmp;</div>
<div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;      <a class="code" href="classllvm_1_1raw__string__ostream.html">raw_string_ostream</a> TmpStream(Tmp);</div>
<div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160; </div>
<div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> *CI = dyn_cast&lt;ConstantInt&gt;(V))</div>
<div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;        TmpStream &lt;&lt; CI-&gt;getValue();</div>
<div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (isa&lt;Constant&gt;(V))</div>
<div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;        TmpStream &lt;&lt; <span class="stringliteral">&quot;constant&quot;</span>;</div>
<div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;      <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;        <span class="keywordflow">if</span> (isMatrix(V))</div>
<div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;          TmpStream &lt;&lt; <span class="stringliteral">&quot;matrix&quot;</span>;</div>
<div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160;          TmpStream &lt;&lt; <span class="stringliteral">&quot;scalar&quot;</span>;</div>
<div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;      }</div>
<div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160;      TmpStream.flush();</div>
<div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;      Tmp = std::string(<a class="code" href="classllvm_1_1StringRef.html">StringRef</a>(Tmp).trim());</div>
<div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;      LineLength += Tmp.size();</div>
<div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160;      Stream &lt;&lt; Tmp;</div>
<div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160;    }</div>
<div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;<span class="comment">    /// Linearize expression \p Expr starting at an indentation of \p Indent.</span></div>
<div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;<span class="comment">    /// Expressions that are re-used multiple times are prefixed with (reused)</span></div>
<div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;<span class="comment">    /// at the re-used root instruction.</span></div>
<div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;<span class="comment"></span>    <span class="keywordtype">void</span> linearizeExpr(<a class="code" href="classllvm_1_1Value.html">Value</a> *Expr, <span class="keywordtype">unsigned</span> Indent, <span class="keywordtype">bool</span> ParentReused,</div>
<div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;                       <span class="keywordtype">bool</span> ParentShared) {</div>
<div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;      <span class="keyword">auto</span> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = cast&lt;Instruction&gt;(Expr);</div>
<div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160;      maybeIndent(Indent);</div>
<div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;      <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Value *, 8&gt;</a> Ops;</div>
<div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160; </div>
<div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160;      <span class="comment">// Is Expr shared with other expression leaves?</span></div>
<div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160;      <span class="keywordtype">bool</span> ExprShared = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160; </div>
<div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160;      <span class="comment">// Deal with shared subtrees. Mark them as shared, if required.</span></div>
<div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160;      <span class="keywordflow">if</span> (!ParentShared) {</div>
<div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160;        <span class="keyword">auto</span> <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a> = <a class="code" href="namespacellvm_1_1omp.html#a8c6f525466cc262e00c409c31f9a4272aa6156ea9d66fef24e87e841fbabf7cca">Shared</a>.find(Expr);</div>
<div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160;        <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a> != <a class="code" href="namespacellvm_1_1omp.html#a8c6f525466cc262e00c409c31f9a4272aa6156ea9d66fef24e87e841fbabf7cca">Shared</a>.end() &amp;&amp; <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;second.count(Leaf));</div>
<div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160; </div>
<div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a> : <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;second) {</div>
<div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a> == Leaf)</div>
<div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160;          <a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a> <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a> = cast&lt;Instruction&gt;(<a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>)-&gt;getDebugLoc();</div>
<div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160;          <a class="code" href="namespacellvm.html#a0cc156a5675c3f3e0ae9d329163b9f8b">write</a>(<span class="stringliteral">&quot;shared with remark at line &quot;</span> + <a class="code" href="namespacellvm.html#a13c1b5a253da5da49ce33d03dc1efc07">std::to_string</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getLine()) +</div>
<div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;                <span class="stringliteral">&quot; column &quot;</span> + <a class="code" href="namespacellvm.html#a13c1b5a253da5da49ce33d03dc1efc07">std::to_string</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getCol()) + <span class="stringliteral">&quot; (&quot;</span>);</div>
<div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;        }</div>
<div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160;        ExprShared = <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;second.size() &gt; 1;</div>
<div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160;      }</div>
<div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160; </div>
<div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160;      <span class="keywordtype">bool</span> Reused = !ReusedExprs.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(Expr).second;</div>
<div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160;      <span class="keywordflow">if</span> (Reused &amp;&amp; !ParentReused)</div>
<div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160;        <a class="code" href="namespacellvm.html#a0cc156a5675c3f3e0ae9d329163b9f8b">write</a>(<span class="stringliteral">&quot;(reused) &quot;</span>);</div>
<div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160; </div>
<div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> *CI = dyn_cast&lt;CallInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160;        writeFnName(CI);</div>
<div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160; </div>
<div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;        Ops.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a7efd1f0c1206d95e4fe01a9b49a57b82">append</a>(CI-&gt;<a class="code" href="classllvm_1_1CallBase.html#a4fb513d744ca72275932b2c7003f16f6">arg_begin</a>(), CI-&gt;<a class="code" href="classllvm_1_1CallBase.html#ac0f11b96f81b2769dd23d028e3189075">arg_end</a>() - getNumShapeArgs(CI));</div>
<div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (isa&lt;BitCastInst&gt;(Expr)) {</div>
<div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160;        <span class="comment">// Special case bitcasts, which are used to materialize matrixes from</span></div>
<div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160;        <span class="comment">// non-matrix ops.</span></div>
<div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;        <a class="code" href="namespacellvm.html#a0cc156a5675c3f3e0ae9d329163b9f8b">write</a>(<span class="stringliteral">&quot;matrix&quot;</span>);</div>
<div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160;        Ops.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a7efd1f0c1206d95e4fe01a9b49a57b82">append</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;value_op_begin(), <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;value_op_end());</div>
<div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160;        <a class="code" href="namespacellvm.html#a0cc156a5675c3f3e0ae9d329163b9f8b">write</a>(std::string(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOpcodeName()));</div>
<div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160;      }</div>
<div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160; </div>
<div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160;      <a class="code" href="namespacellvm.html#a0cc156a5675c3f3e0ae9d329163b9f8b">write</a>(std::string(<span class="stringliteral">&quot;(&quot;</span>));</div>
<div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160; </div>
<div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160;      <span class="keywordtype">unsigned</span> NumOpsToBreak = 1;</div>
<div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Expr, m_Intrinsic&lt;Intrinsic::matrix_column_major_load&gt;()))</div>
<div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;        NumOpsToBreak = 2;</div>
<div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160; </div>
<div class="line"><a name="l02169"></a><span class="lineno"> 2169</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a> : Ops) {</div>
<div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160;        <span class="keywordflow">if</span> (Ops.size() &gt; NumOpsToBreak)</div>
<div class="line"><a name="l02171"></a><span class="lineno"> 2171</span>&#160;          lineBreak();</div>
<div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160; </div>
<div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160;        maybeIndent(Indent + 1);</div>
<div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160;        <span class="keywordflow">if</span> (isMatrix(<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>))</div>
<div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160;          linearizeExpr(<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>, Indent + 1, Reused, ExprShared);</div>
<div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160;          <a class="code" href="namespacellvm.html#a0cc156a5675c3f3e0ae9d329163b9f8b">write</a>(<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>);</div>
<div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a> != Ops.back())</div>
<div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160;          <a class="code" href="namespacellvm.html#a0cc156a5675c3f3e0ae9d329163b9f8b">write</a>(<span class="stringliteral">&quot;, &quot;</span>);</div>
<div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160;      }</div>
<div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160; </div>
<div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160;      <a class="code" href="namespacellvm.html#a0cc156a5675c3f3e0ae9d329163b9f8b">write</a>(<span class="stringliteral">&quot;)&quot;</span>);</div>
<div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;    }</div>
<div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160; </div>
<div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;    <span class="keyword">const</span> std::string &amp;getResult() {</div>
<div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;      Stream.<a class="code" href="classllvm_1_1raw__ostream.html#a520bdf57dfe3e73abb53d482893f0a27">flush</a>();</div>
<div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160;      <span class="keywordflow">return</span> Str;</div>
<div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;    }</div>
<div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;  };</div>
<div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160;<span class="comment">  /// Generate remarks for matrix operations in a function. To generate remarks</span></div>
<div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160;<span class="comment">  /// for matrix expressions, the following approach is used:</span></div>
<div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;<span class="comment">  /// 1. Use the inlined-at debug information to group matrix operations to the</span></div>
<div class="line"><a name="l02194"></a><span class="lineno"> 2194</span>&#160;<span class="comment">  ///    DISubprograms they are contained in.</span></div>
<div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160;<span class="comment">  /// 2. Collect leaves of matrix expressions (done in</span></div>
<div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160;<span class="comment">  ///    RemarkGenerator::getExpressionLeaves) for each subprogram - expression</span></div>
<div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160;<span class="comment"></span>  <span class="comment">//     mapping.  Leaves are lowered matrix instructions without other matrix</span></div>
<div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160;  <span class="comment">//     users (like stores) in the current subprogram.</span><span class="comment"></span></div>
<div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160;<span class="comment">  /// 3. For each leaf, create a remark containing a linearizied version of the</span></div>
<div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160;<span class="comment">  ///    matrix expression. The expression is linearized by a recursive</span></div>
<div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;<span class="comment">  ///    bottom-up traversal of the matrix operands, starting at a leaf. Note</span></div>
<div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;<span class="comment">  ///    that multiple leaves can share sub-expressions. Shared subexpressions</span></div>
<div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;<span class="comment">  ///    are explicitly marked as shared().</span></div>
<div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;<span class="comment"></span>  <span class="keyword">struct </span>RemarkGenerator {</div>
<div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1MapVector.html">MapVector&lt;Value *, MatrixTy&gt;</a> &amp;Inst2Matrix;</div>
<div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;    <a class="code" href="classllvm_1_1OptimizationRemarkEmitter.html">OptimizationRemarkEmitter</a> &amp;ORE;</div>
<div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160;    <a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="namespacellvm_1_1ifs.html#adfe04e1a9cc096fb571e8372debaa67ea00d0b4f2d7dcdaaef835b97cf5d1e0df">Func</a>;</div>
<div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1DataLayout.html">DataLayout</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>;</div>
<div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160; </div>
<div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;    RemarkGenerator(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MapVector.html">MapVector&lt;Value *, MatrixTy&gt;</a> &amp;Inst2Matrix,</div>
<div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;                    <a class="code" href="classllvm_1_1OptimizationRemarkEmitter.html">OptimizationRemarkEmitter</a> &amp;ORE, <a class="code" href="classllvm_1_1Function.html">Function</a> &amp;Func)</div>
<div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;        : Inst2Matrix(Inst2Matrix), ORE(ORE), <a class="code" href="namespacellvm_1_1ifs.html#adfe04e1a9cc096fb571e8372debaa67ea00d0b4f2d7dcdaaef835b97cf5d1e0df">Func</a>(<a class="code" href="namespacellvm_1_1ifs.html#adfe04e1a9cc096fb571e8372debaa67ea00d0b4f2d7dcdaaef835b97cf5d1e0df">Func</a>),</div>
<div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;          <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>(<a class="code" href="namespacellvm_1_1ifs.html#adfe04e1a9cc096fb571e8372debaa67ea00d0b4f2d7dcdaaef835b97cf5d1e0df">Func</a>.<a class="code" href="BasicAliasAnalysis_8cpp.html#a2675de1d8479c7b00387979714da43f7">getParent</a>()-&gt;getDataLayout()) {}</div>
<div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160;<span class="comment">    /// Return all leaves of the expressions in \p ExprsInSubprogram. Those are</span></div>
<div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160;<span class="comment">    /// instructions in Inst2Matrix returning void or without any users in</span></div>
<div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;<span class="comment">    /// \p ExprsInSubprogram. Currently that should only include stores.</span></div>
<div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;<span class="comment"></span>    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Value *, 4&gt;</a></div>
<div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160;    getExpressionLeaves(<span class="keyword">const</span> <a class="code" href="classllvm_1_1SmallSetVector.html">SmallSetVector&lt;Value *, 32&gt;</a> &amp;ExprsInSubprogram) {</div>
<div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160;      <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Value *, 4&gt;</a> Leaves;</div>
<div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">auto</span> *Expr : ExprsInSubprogram)</div>
<div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;        <span class="keywordflow">if</span> (Expr-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#ae8eaa0b4eeac52a2b2282cb1bfd981ae">isVoidTy</a>() ||</div>
<div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160;            !<a class="code" href="namespacellvm.html#a61d13d6824ec46c31260a4fd0997eda0">any_of</a>(Expr-&gt;<a class="code" href="classllvm_1_1Value.html#ab4e0512c7e1c7adaa56677e3155685f1">users</a>(), [&amp;ExprsInSubprogram](<a class="code" href="classllvm_1_1User.html">User</a> *U) {</div>
<div class="line"><a name="l02224"></a><span class="lineno"> 2224</span>&#160;              return ExprsInSubprogram.count(U);</div>
<div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160;            }))</div>
<div class="line"><a name="l02226"></a><span class="lineno"> 2226</span>&#160;          Leaves.push_back(Expr);</div>
<div class="line"><a name="l02227"></a><span class="lineno"> 2227</span>&#160;      <span class="keywordflow">return</span> Leaves;</div>
<div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>&#160;    }</div>
<div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160;<span class="comment">    /// Recursively traverse expression \p V starting at \p Leaf and add \p Leaf</span></div>
<div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160;<span class="comment">    /// to all visited expressions in \p Shared. Limit the matrix operations to</span></div>
<div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160;<span class="comment">    /// the ones in \p ExprsInSubprogram.</span></div>
<div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160;<span class="comment"></span>    <span class="keywordtype">void</span> collectSharedInfo(<a class="code" href="classllvm_1_1Value.html">Value</a> *Leaf, <a class="code" href="classllvm_1_1Value.html">Value</a> *V,</div>
<div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>&#160;                           <span class="keyword">const</span> <a class="code" href="classllvm_1_1SmallSetVector.html">SmallSetVector&lt;Value *, 32&gt;</a> &amp;ExprsInSubprogram,</div>
<div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160;                           <a class="code" href="classllvm_1_1DenseMap.html">DenseMap</a>&lt;<a class="code" href="classllvm_1_1Value.html">Value</a> *, <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;Value *, 2&gt;</a>&gt; &amp;Shared) {</div>
<div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160; </div>
<div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;      <span class="keywordflow">if</span> (!ExprsInSubprogram.<a class="code" href="classllvm_1_1SetVector.html#a21c2c6ae5ec23004dc4020eacf83bbce">count</a>(V))</div>
<div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160; </div>
<div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160;      <span class="keyword">auto</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = <a class="code" href="namespacellvm_1_1omp.html#a8c6f525466cc262e00c409c31f9a4272aa6156ea9d66fef24e87e841fbabf7cca">Shared</a>.insert({V, {}});</div>
<div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160;      <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.first-&gt;second.insert(Leaf);</div>
<div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160; </div>
<div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a> : cast&lt;Instruction&gt;(V)-&gt;operand_values())</div>
<div class="line"><a name="l02244"></a><span class="lineno"> 2244</span>&#160;        collectSharedInfo(Leaf, <a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>, ExprsInSubprogram, Shared);</div>
<div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160;    }</div>
<div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160;<span class="comment">    /// Calculate the number of exclusive and shared op counts for expression</span></div>
<div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160;<span class="comment">    /// starting at \p V. Expressions used multiple times are counted once.</span></div>
<div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160;<span class="comment">    /// Limit the matrix operations to the ones in \p ExprsInSubprogram.</span></div>
<div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;<span class="comment"></span>    std::pair&lt;OpInfoTy, OpInfoTy&gt;</div>
<div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160;    sumOpInfos(<a class="code" href="classllvm_1_1Value.html">Value</a> *Root, <a class="code" href="classllvm_1_1SmallPtrSetImpl.html">SmallPtrSetImpl&lt;Value *&gt;</a> &amp;ReusedExprs,</div>
<div class="line"><a name="l02252"></a><span class="lineno"> 2252</span>&#160;               <span class="keyword">const</span> <a class="code" href="classllvm_1_1SmallSetVector.html">SmallSetVector&lt;Value *, 32&gt;</a> &amp;ExprsInSubprogram,</div>
<div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160;               <a class="code" href="classllvm_1_1DenseMap.html">DenseMap</a>&lt;<a class="code" href="classllvm_1_1Value.html">Value</a> *, <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;Value *, 2&gt;</a>&gt; &amp;Shared)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l02254"></a><span class="lineno"> 2254</span>&#160;      <span class="keywordflow">if</span> (!ExprsInSubprogram.<a class="code" href="classllvm_1_1SetVector.html#a21c2c6ae5ec23004dc4020eacf83bbce">count</a>(Root))</div>
<div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160;        <span class="keywordflow">return</span> {};</div>
<div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160; </div>
<div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160;      <span class="comment">// Already counted this expression. Stop.</span></div>
<div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160;      <span class="keywordflow">if</span> (!ReusedExprs.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(Root).second)</div>
<div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160;        <span class="keywordflow">return</span> {};</div>
<div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160; </div>
<div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160;      OpInfoTy SharedCount;</div>
<div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160;      OpInfoTy Count;</div>
<div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160; </div>
<div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160;      <span class="keyword">auto</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = <a class="code" href="namespacellvm_1_1omp.html#a8c6f525466cc262e00c409c31f9a4272aa6156ea9d66fef24e87e841fbabf7cca">Shared</a>.find(Root);</div>
<div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160;      <span class="keyword">auto</span> CM = Inst2Matrix.<a class="code" href="classllvm_1_1MapVector.html#a6b0c3e15c351ba9682837c29b0a141b6">find</a>(Root);</div>
<div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;second.size() == 1)</div>
<div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160;        Count = CM-&gt;second.getOpInfo();</div>
<div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160;        SharedCount = CM-&gt;second.getOpInfo();</div>
<div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>&#160; </div>
<div class="line"><a name="l02271"></a><span class="lineno"> 2271</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a> : cast&lt;Instruction&gt;(Root)-&gt;operand_values()) {</div>
<div class="line"><a name="l02272"></a><span class="lineno"> 2272</span>&#160;        <span class="keyword">auto</span> <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = sumOpInfos(<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>, ReusedExprs, ExprsInSubprogram, Shared);</div>
<div class="line"><a name="l02273"></a><span class="lineno"> 2273</span>&#160;        Count += <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.first;</div>
<div class="line"><a name="l02274"></a><span class="lineno"> 2274</span>&#160;        SharedCount += <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.second;</div>
<div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160;      }</div>
<div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160;      <span class="keywordflow">return</span> {Count, SharedCount};</div>
<div class="line"><a name="l02277"></a><span class="lineno"> 2277</span>&#160;    }</div>
<div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160; </div>
<div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160;    <span class="keywordtype">void</span> emitRemarks() {</div>
<div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160;      <span class="keywordflow">if</span> (!ORE.<a class="code" href="classllvm_1_1OptimizationRemarkEmitter.html#a74b26949a0dd7a5fab2ba1b0da204e50">allowExtraAnalysis</a>(<a class="code" href="LowerMatrixIntrinsics_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">DEBUG_TYPE</a>))</div>
<div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160; </div>
<div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160;      <span class="comment">// Map matrix operations to their containting subprograms, by traversing</span></div>
<div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160;      <span class="comment">// the inlinedAt chain. If the function does not have a DISubprogram, we</span></div>
<div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160;      <span class="comment">// only map them to the containing function.</span></div>
<div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160;      <a class="code" href="classllvm_1_1MapVector.html">MapVector&lt;DISubprogram *, SmallVector&lt;Value *, 8&gt;</a>&gt; Subprog2Exprs;</div>
<div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;KV : Inst2Matrix) {</div>
<div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1ifs.html#adfe04e1a9cc096fb571e8372debaa67ea00d0b4f2d7dcdaaef835b97cf5d1e0df">Func</a>.getSubprogram()) {</div>
<div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160;          <span class="keyword">auto</span> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = cast&lt;Instruction&gt;(KV.first);</div>
<div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160;          <a class="code" href="classllvm_1_1DILocation.html">DILocation</a> *<a class="code" href="NVVMIntrRange_8cpp.html#afad351d7bf10ac0446b64e7827634e94">Context</a> = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getDebugLoc();</div>
<div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;          <span class="keywordflow">while</span> (<a class="code" href="NVVMIntrRange_8cpp.html#afad351d7bf10ac0446b64e7827634e94">Context</a>) {</div>
<div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160;            <span class="keyword">auto</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> =</div>
<div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160;                Subprog2Exprs.<a class="code" href="classllvm_1_1MapVector.html#a9318649185cfc66ba4b4eb66d5968e00">insert</a>({<a class="code" href="LowerMatrixIntrinsics_8cpp.html#a79f0c982827f4d3afbbbefc1180e0ef7">getSubprogram</a>(<a class="code" href="NVVMIntrRange_8cpp.html#afad351d7bf10ac0446b64e7827634e94">Context</a>-&gt;getScope()), {}});</div>
<div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160;            <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.first-&gt;second.push_back(KV.first);</div>
<div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160;            <a class="code" href="NVVMIntrRange_8cpp.html#afad351d7bf10ac0446b64e7827634e94">Context</a> = <a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a>(<a class="code" href="NVVMIntrRange_8cpp.html#afad351d7bf10ac0446b64e7827634e94">Context</a>).<a class="code" href="classllvm_1_1DebugLoc.html#ada0b6f3c53a53b7274e7aeb23eeab5a8">getInlinedAt</a>();</div>
<div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160;          }</div>
<div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;          <span class="keyword">auto</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = Subprog2Exprs.<a class="code" href="classllvm_1_1MapVector.html#a9318649185cfc66ba4b4eb66d5968e00">insert</a>({<span class="keyword">nullptr</span>, {}});</div>
<div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160;          <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.first-&gt;second.push_back(KV.first);</div>
<div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160;        }</div>
<div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160;      }</div>
<div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;KV : Subprog2Exprs) {</div>
<div class="line"><a name="l02303"></a><span class="lineno"> 2303</span>&#160;        <a class="code" href="classllvm_1_1SmallSetVector.html">SmallSetVector&lt;Value *, 32&gt;</a> ExprsInSubprogram(KV.second.begin(),</div>
<div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160;                                                      KV.second.end());</div>
<div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160;        <span class="keyword">auto</span> Leaves = getExpressionLeaves(ExprsInSubprogram);</div>
<div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160; </div>
<div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160;        <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;Value *, SmallPtrSet&lt;Value *, 2&gt;</a>&gt; <a class="code" href="namespacellvm_1_1omp.html#a8c6f525466cc262e00c409c31f9a4272aa6156ea9d66fef24e87e841fbabf7cca">Shared</a>;</div>
<div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *Leaf : Leaves)</div>
<div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160;          collectSharedInfo(Leaf, Leaf, ExprsInSubprogram, Shared);</div>
<div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160; </div>
<div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160;        <span class="comment">// Generate remarks for each leaf.</span></div>
<div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;        <span class="keywordflow">for</span> (<span class="keyword">auto</span> *L : Leaves) {</div>
<div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160; </div>
<div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160;          <a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a> Loc = cast&lt;Instruction&gt;(L)-&gt;getDebugLoc();</div>
<div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160;          <a class="code" href="classllvm_1_1DILocation.html">DILocation</a> *<a class="code" href="NVVMIntrRange_8cpp.html#afad351d7bf10ac0446b64e7827634e94">Context</a> = cast&lt;Instruction&gt;(L)-&gt;getDebugLoc();</div>
<div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;          <span class="keywordflow">while</span> (<a class="code" href="NVVMIntrRange_8cpp.html#afad351d7bf10ac0446b64e7827634e94">Context</a>) {</div>
<div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="LowerMatrixIntrinsics_8cpp.html#a79f0c982827f4d3afbbbefc1180e0ef7">getSubprogram</a>(<a class="code" href="NVVMIntrRange_8cpp.html#afad351d7bf10ac0446b64e7827634e94">Context</a>-&gt;getScope()) == KV.first) {</div>
<div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160;              Loc = <a class="code" href="NVVMIntrRange_8cpp.html#afad351d7bf10ac0446b64e7827634e94">Context</a>;</div>
<div class="line"><a name="l02319"></a><span class="lineno"> 2319</span>&#160;              <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160;            }</div>
<div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160;            <a class="code" href="NVVMIntrRange_8cpp.html#afad351d7bf10ac0446b64e7827634e94">Context</a> = <a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a>(<a class="code" href="NVVMIntrRange_8cpp.html#afad351d7bf10ac0446b64e7827634e94">Context</a>).<a class="code" href="classllvm_1_1DebugLoc.html#ada0b6f3c53a53b7274e7aeb23eeab5a8">getInlinedAt</a>();</div>
<div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160;          }</div>
<div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160; </div>
<div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160;          <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;Value *, 8&gt;</a> ReusedExprs;</div>
<div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160;          OpInfoTy Counts, SharedCounts;</div>
<div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160;          std::tie(Counts, SharedCounts) =</div>
<div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160;              sumOpInfos(L, ReusedExprs, ExprsInSubprogram, Shared);</div>
<div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160; </div>
<div class="line"><a name="l02329"></a><span class="lineno"> 2329</span>&#160;          <a class="code" href="classllvm_1_1OptimizationRemark.html">OptimizationRemark</a> Rem(<a class="code" href="LowerMatrixIntrinsics_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">DEBUG_TYPE</a>, <span class="stringliteral">&quot;matrix-lowered&quot;</span>, Loc,</div>
<div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160;                                 cast&lt;Instruction&gt;(L)-&gt;<a class="code" href="BasicAliasAnalysis_8cpp.html#a2675de1d8479c7b00387979714da43f7">getParent</a>());</div>
<div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160; </div>
<div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160;          Rem &lt;&lt; <span class="stringliteral">&quot;Lowered with &quot;</span>;</div>
<div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160;          Rem &lt;&lt; <a class="code" href="namespacellvm_1_1ore.html#a8f5533240c6722d987a2443cba42019d">ore::NV</a>(<span class="stringliteral">&quot;NumStores&quot;</span>, Counts.NumStores) &lt;&lt; <span class="stringliteral">&quot; stores, &quot;</span></div>
<div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160;              &lt;&lt; <a class="code" href="namespacellvm_1_1ore.html#a8f5533240c6722d987a2443cba42019d">ore::NV</a>(<span class="stringliteral">&quot;NumLoads&quot;</span>, Counts.NumLoads) &lt;&lt; <span class="stringliteral">&quot; loads, &quot;</span></div>
<div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160;              &lt;&lt; <a class="code" href="namespacellvm_1_1ore.html#a8f5533240c6722d987a2443cba42019d">ore::NV</a>(<span class="stringliteral">&quot;NumComputeOps&quot;</span>, Counts.NumComputeOps)</div>
<div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160;              &lt;&lt; <span class="stringliteral">&quot; compute ops, &quot;</span></div>
<div class="line"><a name="l02337"></a><span class="lineno"> 2337</span>&#160;              &lt;&lt; <a class="code" href="namespacellvm_1_1ore.html#a8f5533240c6722d987a2443cba42019d">ore::NV</a>(<span class="stringliteral">&quot;NumExposedTransposes&quot;</span>, Counts.NumExposedTransposes)</div>
<div class="line"><a name="l02338"></a><span class="lineno"> 2338</span>&#160;              &lt;&lt; <span class="stringliteral">&quot; exposed transposes&quot;</span>;</div>
<div class="line"><a name="l02339"></a><span class="lineno"> 2339</span>&#160; </div>
<div class="line"><a name="l02340"></a><span class="lineno"> 2340</span>&#160;          <span class="keywordflow">if</span> (SharedCounts.NumStores &gt; 0 || SharedCounts.NumLoads &gt; 0 ||</div>
<div class="line"><a name="l02341"></a><span class="lineno"> 2341</span>&#160;              SharedCounts.NumComputeOps &gt; 0) {</div>
<div class="line"><a name="l02342"></a><span class="lineno"> 2342</span>&#160;            Rem &lt;&lt; <span class="stringliteral">&quot;,\nadditionally &quot;</span></div>
<div class="line"><a name="l02343"></a><span class="lineno"> 2343</span>&#160;                &lt;&lt; <a class="code" href="namespacellvm_1_1ore.html#a8f5533240c6722d987a2443cba42019d">ore::NV</a>(<span class="stringliteral">&quot;NumStores&quot;</span>, SharedCounts.NumStores) &lt;&lt; <span class="stringliteral">&quot; stores, &quot;</span></div>
<div class="line"><a name="l02344"></a><span class="lineno"> 2344</span>&#160;                &lt;&lt; <a class="code" href="namespacellvm_1_1ore.html#a8f5533240c6722d987a2443cba42019d">ore::NV</a>(<span class="stringliteral">&quot;NumLoads&quot;</span>, SharedCounts.NumLoads) &lt;&lt; <span class="stringliteral">&quot; loads, &quot;</span></div>
<div class="line"><a name="l02345"></a><span class="lineno"> 2345</span>&#160;                &lt;&lt; <a class="code" href="namespacellvm_1_1ore.html#a8f5533240c6722d987a2443cba42019d">ore::NV</a>(<span class="stringliteral">&quot;NumFPOps&quot;</span>, SharedCounts.NumComputeOps)</div>
<div class="line"><a name="l02346"></a><span class="lineno"> 2346</span>&#160;                &lt;&lt; <span class="stringliteral">&quot; compute ops&quot;</span></div>
<div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>&#160;                &lt;&lt; <span class="stringliteral">&quot; are shared with other expressions&quot;</span>;</div>
<div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160;          }</div>
<div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160; </div>
<div class="line"><a name="l02350"></a><span class="lineno"> 2350</span>&#160;          Rem &lt;&lt; (<span class="stringliteral">&quot;\n&quot;</span> + linearize(L, Shared, ExprsInSubprogram, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>));</div>
<div class="line"><a name="l02351"></a><span class="lineno"> 2351</span>&#160;          ORE.<a class="code" href="classllvm_1_1OptimizationRemarkEmitter.html#aae6a98aea85aa3af87357cc5448db499">emit</a>(Rem);</div>
<div class="line"><a name="l02352"></a><span class="lineno"> 2352</span>&#160;        }</div>
<div class="line"><a name="l02353"></a><span class="lineno"> 2353</span>&#160;      }</div>
<div class="line"><a name="l02354"></a><span class="lineno"> 2354</span>&#160;    }</div>
<div class="line"><a name="l02355"></a><span class="lineno"> 2355</span>&#160; </div>
<div class="line"><a name="l02356"></a><span class="lineno"> 2356</span>&#160;    std::string</div>
<div class="line"><a name="l02357"></a><span class="lineno"> 2357</span>&#160;    linearize(<a class="code" href="classllvm_1_1Value.html">Value</a> *L,</div>
<div class="line"><a name="l02358"></a><span class="lineno"> 2358</span>&#160;              <span class="keyword">const</span> <a class="code" href="classllvm_1_1DenseMap.html">DenseMap</a>&lt;<a class="code" href="classllvm_1_1Value.html">Value</a> *, <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;Value *, 2&gt;</a>&gt; &amp;Shared,</div>
<div class="line"><a name="l02359"></a><span class="lineno"> 2359</span>&#160;              <span class="keyword">const</span> <a class="code" href="classllvm_1_1SmallSetVector.html">SmallSetVector&lt;Value *, 32&gt;</a> &amp;ExprsInSubprogram,</div>
<div class="line"><a name="l02360"></a><span class="lineno"> 2360</span>&#160;              <span class="keyword">const</span> <a class="code" href="classllvm_1_1DataLayout.html">DataLayout</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>) {</div>
<div class="line"><a name="l02361"></a><span class="lineno"> 2361</span>&#160;      ExprLinearizer Lin(<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, Inst2Matrix, Shared, ExprsInSubprogram, L);</div>
<div class="line"><a name="l02362"></a><span class="lineno"> 2362</span>&#160;      Lin.linearizeExpr(L, 0, <span class="keyword">false</span>, <span class="keyword">false</span>);</div>
<div class="line"><a name="l02363"></a><span class="lineno"> 2363</span>&#160;      <span class="keywordflow">return</span> Lin.getResult();</div>
<div class="line"><a name="l02364"></a><span class="lineno"> 2364</span>&#160;    }</div>
<div class="line"><a name="l02365"></a><span class="lineno"> 2365</span>&#160;  };</div>
<div class="line"><a name="l02366"></a><span class="lineno"> 2366</span>&#160;};</div>
<div class="line"><a name="l02367"></a><span class="lineno"> 2367</span>&#160;} <span class="comment">// namespace</span></div>
<div class="line"><a name="l02368"></a><span class="lineno"> 2368</span>&#160; </div>
<div class="line"><a name="l02369"></a><span class="lineno"><a class="line" href="classllvm_1_1LowerMatrixIntrinsicsPass.html#a7b05a9de14294b7a5a7904cc8d5c8e1e"> 2369</a></span>&#160;<a class="code" href="classllvm_1_1PreservedAnalyses.html">PreservedAnalyses</a> <a class="code" href="classllvm_1_1LowerMatrixIntrinsicsPass.html#a7b05a9de14294b7a5a7904cc8d5c8e1e">LowerMatrixIntrinsicsPass::run</a>(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>,</div>
<div class="line"><a name="l02370"></a><span class="lineno"> 2370</span>&#160;                                                 <a class="code" href="classllvm_1_1AnalysisManager.html">FunctionAnalysisManager</a> &amp;AM) {</div>
<div class="line"><a name="l02371"></a><span class="lineno"> 2371</span>&#160;  <span class="keyword">auto</span> &amp;<a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a> = AM.<a class="code" href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">getResult</a>&lt;<a class="code" href="classllvm_1_1TargetIRAnalysis.html">TargetIRAnalysis</a>&gt;(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l02372"></a><span class="lineno"> 2372</span>&#160;  <a class="code" href="classllvm_1_1OptimizationRemarkEmitter.html">OptimizationRemarkEmitter</a> *ORE = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02373"></a><span class="lineno"> 2373</span>&#160;  <a class="code" href="classllvm_1_1AAResults.html">AAResults</a> *AA = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02374"></a><span class="lineno"> 2374</span>&#160;  <a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> *DT = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02375"></a><span class="lineno"> 2375</span>&#160;  <a class="code" href="classllvm_1_1LoopInfo.html">LoopInfo</a> *LI = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02376"></a><span class="lineno"> 2376</span>&#160; </div>
<div class="line"><a name="l02377"></a><span class="lineno"> 2377</span>&#160;  <span class="keywordflow">if</span> (!Minimal) {</div>
<div class="line"><a name="l02378"></a><span class="lineno"> 2378</span>&#160;    ORE = &amp;AM.<a class="code" href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">getResult</a>&lt;<a class="code" href="classllvm_1_1OptimizationRemarkEmitterAnalysis.html">OptimizationRemarkEmitterAnalysis</a>&gt;(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l02379"></a><span class="lineno"> 2379</span>&#160;    AA = &amp;AM.<a class="code" href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">getResult</a>&lt;<a class="code" href="classllvm_1_1AAManager.html">AAManager</a>&gt;(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l02380"></a><span class="lineno"> 2380</span>&#160;    DT = &amp;AM.<a class="code" href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">getResult</a>&lt;<a class="code" href="classllvm_1_1DominatorTreeAnalysis.html">DominatorTreeAnalysis</a>&gt;(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l02381"></a><span class="lineno"> 2381</span>&#160;    LI = &amp;AM.<a class="code" href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">getResult</a>&lt;<a class="code" href="classllvm_1_1LoopAnalysis.html">LoopAnalysis</a>&gt;(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l02382"></a><span class="lineno"> 2382</span>&#160;  }</div>
<div class="line"><a name="l02383"></a><span class="lineno"> 2383</span>&#160; </div>
<div class="line"><a name="l02384"></a><span class="lineno"> 2384</span>&#160;  LowerMatrixIntrinsics LMT(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>, AA, DT, LI, ORE);</div>
<div class="line"><a name="l02385"></a><span class="lineno"> 2385</span>&#160;  <span class="keywordflow">if</span> (LMT.Visit()) {</div>
<div class="line"><a name="l02386"></a><span class="lineno"> 2386</span>&#160;    <a class="code" href="classllvm_1_1PreservedAnalyses.html">PreservedAnalyses</a> PA;</div>
<div class="line"><a name="l02387"></a><span class="lineno"> 2387</span>&#160;    <span class="keywordflow">if</span> (!Minimal) {</div>
<div class="line"><a name="l02388"></a><span class="lineno"> 2388</span>&#160;      PA.<a class="code" href="classllvm_1_1PreservedAnalyses.html#ad966bea18aa62ffb9e040509adc7c99f">preserve</a>&lt;<a class="code" href="classllvm_1_1LoopAnalysis.html">LoopAnalysis</a>&gt;();</div>
<div class="line"><a name="l02389"></a><span class="lineno"> 2389</span>&#160;      PA.<a class="code" href="classllvm_1_1PreservedAnalyses.html#ad966bea18aa62ffb9e040509adc7c99f">preserve</a>&lt;<a class="code" href="classllvm_1_1DominatorTreeAnalysis.html">DominatorTreeAnalysis</a>&gt;();</div>
<div class="line"><a name="l02390"></a><span class="lineno"> 2390</span>&#160;    }</div>
<div class="line"><a name="l02391"></a><span class="lineno"> 2391</span>&#160;    <span class="keywordflow">return</span> PA;</div>
<div class="line"><a name="l02392"></a><span class="lineno"> 2392</span>&#160;  }</div>
<div class="line"><a name="l02393"></a><span class="lineno"> 2393</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1PreservedAnalyses.html#a1258a1ff55557c27684010ebd7283712">PreservedAnalyses::all</a>();</div>
<div class="line"><a name="l02394"></a><span class="lineno"> 2394</span>&#160;}</div>
<div class="line"><a name="l02395"></a><span class="lineno"> 2395</span>&#160; </div>
<div class="line"><a name="l02396"></a><span class="lineno"><a class="line" href="classllvm_1_1LowerMatrixIntrinsicsPass.html#ad15569be98a2d12c836d4e4c531fe49d"> 2396</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1LowerMatrixIntrinsicsPass.html#ad15569be98a2d12c836d4e4c531fe49d">LowerMatrixIntrinsicsPass::printPipeline</a>(</div>
<div class="line"><a name="l02397"></a><span class="lineno"> 2397</span>&#160;    <a class="code" href="classllvm_1_1raw__ostream.html">raw_ostream</a> &amp;<a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a>, <a class="code" href="classllvm_1_1function__ref.html">function_ref</a>&lt;<a class="code" href="classllvm_1_1StringRef.html">StringRef</a>(<a class="code" href="classllvm_1_1StringRef.html">StringRef</a>)&gt; MapClassName2PassName) {</div>
<div class="line"><a name="l02398"></a><span class="lineno"> 2398</span>&#160;  <span class="keyword">static_cast&lt;</span><a class="code" href="structllvm_1_1PassInfoMixin.html">PassInfoMixin&lt;LowerMatrixIntrinsicsPass&gt;</a> *<span class="keyword">&gt;</span>(<span class="keyword">this</span>)-&gt;printPipeline(</div>
<div class="line"><a name="l02399"></a><span class="lineno"> 2399</span>&#160;      <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a>, MapClassName2PassName);</div>
<div class="line"><a name="l02400"></a><span class="lineno"> 2400</span>&#160;  <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; <span class="stringliteral">&quot;&lt;&quot;</span>;</div>
<div class="line"><a name="l02401"></a><span class="lineno"> 2401</span>&#160;  <span class="keywordflow">if</span> (Minimal)</div>
<div class="line"><a name="l02402"></a><span class="lineno"> 2402</span>&#160;    <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; <span class="stringliteral">&quot;minimal&quot;</span>;</div>
<div class="line"><a name="l02403"></a><span class="lineno"> 2403</span>&#160;  <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; <span class="stringliteral">&quot;&gt;&quot;</span>;</div>
<div class="line"><a name="l02404"></a><span class="lineno"> 2404</span>&#160;}</div>
<div class="line"><a name="l02405"></a><span class="lineno"> 2405</span>&#160; </div>
<div class="line"><a name="l02406"></a><span class="lineno"> 2406</span>&#160;<span class="keyword">namespace </span>{</div>
<div class="line"><a name="l02407"></a><span class="lineno"> 2407</span>&#160; </div>
<div class="line"><a name="l02408"></a><span class="lineno"> 2408</span>&#160;<span class="keyword">class </span>LowerMatrixIntrinsicsLegacyPass : <span class="keyword">public</span> <a class="code" href="classllvm_1_1FunctionPass.html">FunctionPass</a> {</div>
<div class="line"><a name="l02409"></a><span class="lineno"> 2409</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l02410"></a><span class="lineno"> 2410</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">char</span> <a class="code" href="namespacellvm_1_1CallingConv.html#a188c0836f8c3528401f1c236fd93b977">ID</a>;</div>
<div class="line"><a name="l02411"></a><span class="lineno"> 2411</span>&#160; </div>
<div class="line"><a name="l02412"></a><span class="lineno"> 2412</span>&#160;  LowerMatrixIntrinsicsLegacyPass() : <a class="code" href="classllvm_1_1FunctionPass.html">FunctionPass</a>(<a class="code" href="namespacellvm_1_1CallingConv.html#a188c0836f8c3528401f1c236fd93b977">ID</a>) {</div>
<div class="line"><a name="l02413"></a><span class="lineno"> 2413</span>&#160;    <a class="code" href="namespacellvm.html#a49375a16d9bf4467ed4faff420cb97e3">initializeLowerMatrixIntrinsicsLegacyPassPass</a>(</div>
<div class="line"><a name="l02414"></a><span class="lineno"> 2414</span>&#160;        *<a class="code" href="classllvm_1_1PassRegistry.html#a05a729900b76c89e808c6c3094921b2f">PassRegistry::getPassRegistry</a>());</div>
<div class="line"><a name="l02415"></a><span class="lineno"> 2415</span>&#160;  }</div>
<div class="line"><a name="l02416"></a><span class="lineno"> 2416</span>&#160; </div>
<div class="line"><a name="l02417"></a><span class="lineno"> 2417</span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="EntryExitInstrumenter_8cpp.html#a3985f1f39349428d17f0d2b81ebc6349">runOnFunction</a>(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>)<span class="keyword"> override </span>{</div>
<div class="line"><a name="l02418"></a><span class="lineno"> 2418</span>&#160;    <span class="keyword">auto</span> &amp;<a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a> = getAnalysis&lt;TargetTransformInfoWrapperPass&gt;().getTTI(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l02419"></a><span class="lineno"> 2419</span>&#160;    <span class="keyword">auto</span> &amp;ORE = getAnalysis&lt;OptimizationRemarkEmitterWrapperPass&gt;().getORE();</div>
<div class="line"><a name="l02420"></a><span class="lineno"> 2420</span>&#160;    <span class="keyword">auto</span> &amp;AA = getAnalysis&lt;AAResultsWrapperPass&gt;().getAAResults();</div>
<div class="line"><a name="l02421"></a><span class="lineno"> 2421</span>&#160;    <span class="keyword">auto</span> &amp;DT = getAnalysis&lt;DominatorTreeWrapperPass&gt;().getDomTree();</div>
<div class="line"><a name="l02422"></a><span class="lineno"> 2422</span>&#160;    <span class="keyword">auto</span> &amp;LI = getAnalysis&lt;LoopInfoWrapperPass&gt;().getLoopInfo();</div>
<div class="line"><a name="l02423"></a><span class="lineno"> 2423</span>&#160;    LowerMatrixIntrinsics LMT(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>, &amp;AA, &amp;DT, &amp;LI, &amp;ORE);</div>
<div class="line"><a name="l02424"></a><span class="lineno"> 2424</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = LMT.Visit();</div>
<div class="line"><a name="l02425"></a><span class="lineno"> 2425</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>;</div>
<div class="line"><a name="l02426"></a><span class="lineno"> 2426</span>&#160;  }</div>
<div class="line"><a name="l02427"></a><span class="lineno"> 2427</span>&#160; </div>
<div class="line"><a name="l02428"></a><span class="lineno"> 2428</span>&#160;  <span class="keywordtype">void</span> getAnalysisUsage(<a class="code" href="classllvm_1_1AnalysisUsage.html">AnalysisUsage</a> &amp;AU)<span class="keyword"> const override </span>{</div>
<div class="line"><a name="l02429"></a><span class="lineno"> 2429</span>&#160;    AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">addRequired</a>&lt;<a class="code" href="classllvm_1_1TargetTransformInfoWrapperPass.html">TargetTransformInfoWrapperPass</a>&gt;();</div>
<div class="line"><a name="l02430"></a><span class="lineno"> 2430</span>&#160;    AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">addRequired</a>&lt;<a class="code" href="classllvm_1_1OptimizationRemarkEmitterWrapperPass.html">OptimizationRemarkEmitterWrapperPass</a>&gt;();</div>
<div class="line"><a name="l02431"></a><span class="lineno"> 2431</span>&#160;    AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">addRequired</a>&lt;<a class="code" href="classllvm_1_1AAResultsWrapperPass.html">AAResultsWrapperPass</a>&gt;();</div>
<div class="line"><a name="l02432"></a><span class="lineno"> 2432</span>&#160;    AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">addRequired</a>&lt;<a class="code" href="classllvm_1_1DominatorTreeWrapperPass.html">DominatorTreeWrapperPass</a>&gt;();</div>
<div class="line"><a name="l02433"></a><span class="lineno"> 2433</span>&#160;    AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#a884f90190bca4bd354f2d5c91c264028">addPreserved</a>&lt;<a class="code" href="classllvm_1_1DominatorTreeWrapperPass.html">DominatorTreeWrapperPass</a>&gt;();</div>
<div class="line"><a name="l02434"></a><span class="lineno"> 2434</span>&#160;    AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">addRequired</a>&lt;<a class="code" href="classllvm_1_1LoopInfoWrapperPass.html">LoopInfoWrapperPass</a>&gt;();</div>
<div class="line"><a name="l02435"></a><span class="lineno"> 2435</span>&#160;    AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#a884f90190bca4bd354f2d5c91c264028">addPreserved</a>&lt;<a class="code" href="classllvm_1_1LoopInfoWrapperPass.html">LoopInfoWrapperPass</a>&gt;();</div>
<div class="line"><a name="l02436"></a><span class="lineno"> 2436</span>&#160;  }</div>
<div class="line"><a name="l02437"></a><span class="lineno"> 2437</span>&#160;};</div>
<div class="line"><a name="l02438"></a><span class="lineno"> 2438</span>&#160;} <span class="comment">// namespace</span></div>
<div class="line"><a name="l02439"></a><span class="lineno"> 2439</span>&#160; </div>
<div class="line"><a name="l02440"></a><span class="lineno"><a class="line" href="LowerMatrixIntrinsics_8cpp.html#a9dfa42a3ecde6df90a5384e50065332e"> 2440</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="LowerMatrixIntrinsics_8cpp.html#a9dfa42a3ecde6df90a5384e50065332e">pass_name</a>[] = <span class="stringliteral">&quot;Lower the matrix intrinsics&quot;</span>;</div>
<div class="line"><a name="l02441"></a><span class="lineno"> 2441</span>&#160;<span class="keywordtype">char</span> <a class="code" href="namespacellvm_1_1AArch64PACKey.html#abf4394f452bde3f544999858d71e4b46">LowerMatrixIntrinsicsLegacyPass::ID</a> = 0;</div>
<div class="line"><a name="l02442"></a><span class="lineno"> 2442</span>&#160;<a class="code" href="LowerMatrixIntrinsics_8cpp.html#a8e840f8b2f4e0b758bd32f6b785a5beb">INITIALIZE_PASS_BEGIN</a>(LowerMatrixIntrinsicsLegacyPass, <a class="code" href="LowerMatrixIntrinsics_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">DEBUG_TYPE</a>, <a class="code" href="LowerMatrixIntrinsics_8cpp.html#a9dfa42a3ecde6df90a5384e50065332e">pass_name</a>,</div>
<div class="line"><a name="l02443"></a><span class="lineno"> 2443</span>&#160;                      <span class="keyword">false</span>, <span class="keyword">false</span>)</div>
<div class="line"><a name="l02444"></a><span class="lineno"> 2444</span>&#160;<a class="code" href="SVEIntrinsicOpts_8cpp.html#a2bb87eb1bcbc74783a83ae945eb8fa36">INITIALIZE_PASS_DEPENDENCY</a>(<a class="code" href="classllvm_1_1OptimizationRemarkEmitterWrapperPass.html">OptimizationRemarkEmitterWrapperPass</a>)</div>
<div class="line"><a name="l02445"></a><span class="lineno"> 2445</span>&#160;<a class="code" href="SVEIntrinsicOpts_8cpp.html#a2bb87eb1bcbc74783a83ae945eb8fa36">INITIALIZE_PASS_DEPENDENCY</a>(<a class="code" href="classllvm_1_1AAResultsWrapperPass.html">AAResultsWrapperPass</a>)</div>
<div class="line"><a name="l02446"></a><span class="lineno"> 2446</span>&#160;<a class="code" href="SVEIntrinsicOpts_8cpp.html#a2bb87eb1bcbc74783a83ae945eb8fa36">INITIALIZE_PASS_DEPENDENCY</a>(<a class="code" href="classllvm_1_1DominatorTreeWrapperPass.html">DominatorTreeWrapperPass</a>)</div>
<div class="line"><a name="l02447"></a><span class="lineno"> 2447</span>&#160;<a class="code" href="SVEIntrinsicOpts_8cpp.html#a2bb87eb1bcbc74783a83ae945eb8fa36">INITIALIZE_PASS_DEPENDENCY</a>(<a class="code" href="classllvm_1_1LoopInfoWrapperPass.html">LoopInfoWrapperPass</a>)</div>
<div class="line"><a name="l02448"></a><span class="lineno"><a class="line" href="LowerMatrixIntrinsics_8cpp.html#a030569d5a541b6110f2ae1b6a3413a58"> 2448</a></span>&#160;<a class="code" href="PassSupport_8h.html#a74ce8276b89067e806f67c45a6d92575">INITIALIZE_PASS_END</a>(LowerMatrixIntrinsicsLegacyPass, <a class="code" href="LowerMatrixIntrinsics_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">DEBUG_TYPE</a>, <a class="code" href="LowerMatrixIntrinsics_8cpp.html#a9dfa42a3ecde6df90a5384e50065332e">pass_name</a>,</div>
<div class="line"><a name="l02449"></a><span class="lineno"><a class="line" href="LowerMatrixIntrinsics_8cpp.html#a5716c86cb87999564225423fab53e527"> 2449</a></span>&#160;                    <a class="code" href="namespacefalse.html">false</a>, <a class="code" href="namespacefalse.html">false</a>)</div>
<div class="line"><a name="l02450"></a><span class="lineno"> 2450</span>&#160; </div>
<div class="line"><a name="l02451"></a><span class="lineno"><a class="line" href="namespacellvm.html#a883a46222732a74f56798e2aee0ea8fb"> 2451</a></span>&#160;<a class="code" href="classllvm_1_1Pass.html">Pass</a> *<a class="code" href="namespacellvm.html">llvm</a>::<a class="code" href="namespacellvm.html#a883a46222732a74f56798e2aee0ea8fb">createLowerMatrixIntrinsicsPass</a>() {</div>
<div class="line"><a name="l02452"></a><span class="lineno"> 2452</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">new</span> LowerMatrixIntrinsicsLegacyPass();</div>
<div class="line"><a name="l02453"></a><span class="lineno"> 2453</span>&#160;}</div>
<div class="line"><a name="l02454"></a><span class="lineno"> 2454</span>&#160; </div>
<div class="line"><a name="l02455"></a><span class="lineno"> 2455</span>&#160;<span class="keyword">namespace </span>{</div>
<div class="line"><a name="l02456"></a><span class="lineno"> 2456</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02457"></a><span class="lineno"> 2457</span>&#160;<span class="comment">/// A lightweight version of the matrix lowering pass that only requires TTI.</span></div>
<div class="line"><a name="l02458"></a><span class="lineno"> 2458</span>&#160;<span class="comment">/// Advanced features that require DT, AA or ORE like tiling are disabled. This</span></div>
<div class="line"><a name="l02459"></a><span class="lineno"> 2459</span>&#160;<span class="comment">/// is used to lower matrix intrinsics if the main lowering pass is not run, for</span></div>
<div class="line"><a name="l02460"></a><span class="lineno"> 2460</span>&#160;<span class="comment">/// example with -O0.</span></div>
<div class="line"><a name="l02461"></a><span class="lineno"> 2461</span>&#160;<span class="comment"></span><span class="keyword">class </span>LowerMatrixIntrinsicsMinimalLegacyPass : <span class="keyword">public</span> <a class="code" href="classllvm_1_1FunctionPass.html">FunctionPass</a> {</div>
<div class="line"><a name="l02462"></a><span class="lineno"> 2462</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l02463"></a><span class="lineno"> 2463</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">char</span> <a class="code" href="namespacellvm_1_1CallingConv.html#a188c0836f8c3528401f1c236fd93b977">ID</a>;</div>
<div class="line"><a name="l02464"></a><span class="lineno"> 2464</span>&#160; </div>
<div class="line"><a name="l02465"></a><span class="lineno"> 2465</span>&#160;  LowerMatrixIntrinsicsMinimalLegacyPass() : <a class="code" href="classllvm_1_1FunctionPass.html">FunctionPass</a>(<a class="code" href="namespacellvm_1_1CallingConv.html#a188c0836f8c3528401f1c236fd93b977">ID</a>) {</div>
<div class="line"><a name="l02466"></a><span class="lineno"> 2466</span>&#160;    <a class="code" href="namespacellvm.html#a95574deafa1403f5a7ccad55017bb125">initializeLowerMatrixIntrinsicsMinimalLegacyPassPass</a>(</div>
<div class="line"><a name="l02467"></a><span class="lineno"> 2467</span>&#160;        *<a class="code" href="classllvm_1_1PassRegistry.html#a05a729900b76c89e808c6c3094921b2f">PassRegistry::getPassRegistry</a>());</div>
<div class="line"><a name="l02468"></a><span class="lineno"> 2468</span>&#160;  }</div>
<div class="line"><a name="l02469"></a><span class="lineno"> 2469</span>&#160; </div>
<div class="line"><a name="l02470"></a><span class="lineno"> 2470</span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="EntryExitInstrumenter_8cpp.html#a3985f1f39349428d17f0d2b81ebc6349">runOnFunction</a>(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>)<span class="keyword"> override </span>{</div>
<div class="line"><a name="l02471"></a><span class="lineno"> 2471</span>&#160;    <span class="keyword">auto</span> &amp;<a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a> = getAnalysis&lt;TargetTransformInfoWrapperPass&gt;().getTTI(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l02472"></a><span class="lineno"> 2472</span>&#160;    LowerMatrixIntrinsics LMT(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>, <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l02473"></a><span class="lineno"> 2473</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = LMT.Visit();</div>
<div class="line"><a name="l02474"></a><span class="lineno"> 2474</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>;</div>
<div class="line"><a name="l02475"></a><span class="lineno"> 2475</span>&#160;  }</div>
<div class="line"><a name="l02476"></a><span class="lineno"> 2476</span>&#160; </div>
<div class="line"><a name="l02477"></a><span class="lineno"> 2477</span>&#160;  <span class="keywordtype">void</span> getAnalysisUsage(<a class="code" href="classllvm_1_1AnalysisUsage.html">AnalysisUsage</a> &amp;AU)<span class="keyword"> const override </span>{</div>
<div class="line"><a name="l02478"></a><span class="lineno"> 2478</span>&#160;    AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">addRequired</a>&lt;<a class="code" href="classllvm_1_1TargetTransformInfoWrapperPass.html">TargetTransformInfoWrapperPass</a>&gt;();</div>
<div class="line"><a name="l02479"></a><span class="lineno"> 2479</span>&#160;    AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#af11a6ebf7ab3c388234cb6d5378439a3">setPreservesCFG</a>();</div>
<div class="line"><a name="l02480"></a><span class="lineno"> 2480</span>&#160;  }</div>
<div class="line"><a name="l02481"></a><span class="lineno"> 2481</span>&#160;};</div>
<div class="line"><a name="l02482"></a><span class="lineno"> 2482</span>&#160;} <span class="comment">// namespace</span></div>
<div class="line"><a name="l02483"></a><span class="lineno"> 2483</span>&#160; </div>
<div class="line"><a name="l02484"></a><span class="lineno"><a class="line" href="LowerMatrixIntrinsics_8cpp.html#aa67d2b6d80defcba375c1f2961b67c0b"> 2484</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="LowerMatrixIntrinsics_8cpp.html#aa67d2b6d80defcba375c1f2961b67c0b">pass_name_minimal</a>[] = <span class="stringliteral">&quot;Lower the matrix intrinsics (minimal)&quot;</span>;</div>
<div class="line"><a name="l02485"></a><span class="lineno"> 2485</span>&#160;<span class="keywordtype">char</span> <a class="code" href="namespacellvm_1_1AArch64PACKey.html#abf4394f452bde3f544999858d71e4b46">LowerMatrixIntrinsicsMinimalLegacyPass::ID</a> = 0;</div>
<div class="line"><a name="l02486"></a><span class="lineno"> 2486</span>&#160;<a class="code" href="LowerMatrixIntrinsics_8cpp.html#a8e840f8b2f4e0b758bd32f6b785a5beb">INITIALIZE_PASS_BEGIN</a>(LowerMatrixIntrinsicsMinimalLegacyPass,</div>
<div class="line"><a name="l02487"></a><span class="lineno"> 2487</span>&#160;                      <span class="stringliteral">&quot;lower-matrix-intrinsics-minimal&quot;</span>, <a class="code" href="LowerMatrixIntrinsics_8cpp.html#aa67d2b6d80defcba375c1f2961b67c0b">pass_name_minimal</a>,</div>
<div class="line"><a name="l02488"></a><span class="lineno"> 2488</span>&#160;                      <span class="keyword">false</span>, <span class="keyword">false</span>)</div>
<div class="line"><a name="l02489"></a><span class="lineno"> 2489</span>&#160;<a class="code" href="PassSupport_8h.html#a74ce8276b89067e806f67c45a6d92575">INITIALIZE_PASS_END</a>(LowerMatrixIntrinsicsMinimalLegacyPass,</div>
<div class="line"><a name="l02490"></a><span class="lineno"><a class="line" href="LowerMatrixIntrinsics_8cpp.html#a976c8a852b4c6e1aebefedebcc2a5212"> 2490</a></span>&#160;                    &quot;lower-matrix-<a class="code" href="ExpandReductions_8cpp.html#a4bfc835c142e9a1d698379da76392e9f">intrinsics</a>-<a class="code" href="LowerMatrixIntrinsics_8cpp.html#a976c8a852b4c6e1aebefedebcc2a5212">minimal</a>&quot;, <a class="code" href="LowerMatrixIntrinsics_8cpp.html#aa67d2b6d80defcba375c1f2961b67c0b">pass_name_minimal</a>, <a class="code" href="namespacefalse.html">false</a>,</div>
<div class="line"><a name="l02491"></a><span class="lineno"> 2491</span>&#160;                    <a class="code" href="namespacefalse.html">false</a>)</div>
<div class="line"><a name="l02492"></a><span class="lineno"> 2492</span>&#160; </div>
<div class="line"><a name="l02493"></a><span class="lineno"><a class="line" href="namespacellvm.html#aedacfaa7c14c803c0fa33a810310fbf7"> 2493</a></span>&#160;<a class="code" href="classllvm_1_1Pass.html">Pass</a> *<a class="code" href="namespacellvm.html">llvm</a>::<a class="code" href="namespacellvm.html#aedacfaa7c14c803c0fa33a810310fbf7">createLowerMatrixIntrinsicsMinimalPass</a>() {</div>
<div class="line"><a name="l02494"></a><span class="lineno"> 2494</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">new</span> LowerMatrixIntrinsicsMinimalLegacyPass();</div>
<div class="line"><a name="l02495"></a><span class="lineno"> 2495</span>&#160;}</div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="anamespacellvm_1_1Intrinsic_html_aac36688686cd311fab09e6b55efb7f96"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#aac36688686cd311fab09e6b55efb7f96">llvm::Intrinsic::getBaseName</a></div><div class="ttdeci">StringRef getBaseName(ID id)</div><div class="ttdoc">Return the LLVM name for an intrinsic, without encoded types for overloading, such as &quot;llvm....</div><div class="ttdef"><b>Definition:</b> <a href="Function_8cpp_source.html#l00970">Function.cpp:970</a></div></div>
<div class="ttc" id="alib_2Target_2README_8txt_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">i</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2README_8txt_source.html#l00029">README.txt:29</a></div></div>
<div class="ttc" id="aclassllvm_1_1PreservedAnalyses_html"><div class="ttname"><a href="classllvm_1_1PreservedAnalyses.html">llvm::PreservedAnalyses</a></div><div class="ttdoc">A set of analyses that are preserved following a run of a transformation pass.</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00152">PassManager.h:152</a></div></div>
<div class="ttc" id="aLowerMatrixIntrinsics_8cpp_html_a9dfa42a3ecde6df90a5384e50065332e"><div class="ttname"><a href="LowerMatrixIntrinsics_8cpp.html#a9dfa42a3ecde6df90a5384e50065332e">pass_name</a></div><div class="ttdeci">static const char pass_name[]</div><div class="ttdef"><b>Definition:</b> <a href="LowerMatrixIntrinsics_8cpp_source.html#l02440">LowerMatrixIntrinsics.cpp:2440</a></div></div>
<div class="ttc" id="aclassllvm_1_1AAManager_html"><div class="ttname"><a href="classllvm_1_1AAManager.html">llvm::AAManager</a></div><div class="ttdoc">A manager for alias analyses.</div><div class="ttdef"><b>Definition:</b> <a href="AliasAnalysis_8h_source.html#l00885">AliasAnalysis.h:885</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetIRAnalysis_html"><div class="ttname"><a href="classllvm_1_1TargetIRAnalysis.html">llvm::TargetIRAnalysis</a></div><div class="ttdoc">Analysis pass providing the TargetTransformInfo.</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l02626">TargetTransformInfo.h:2626</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html_a900a32da3983469187b1848189681705"><div class="ttname"><a href="classllvm_1_1Function.html#a900a32da3983469187b1848189681705">llvm::Function::isIntrinsic</a></div><div class="ttdeci">bool isIntrinsic() const</div><div class="ttdoc">isIntrinsic - Returns true if the function's name starts with &quot;llvm.&quot;.</div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00209">Function.h:209</a></div></div>
<div class="ttc" id="aclassllvm_1_1MemoryLocation_html_a18e5a3f1d71ba10a624f2a8e5121cf1f"><div class="ttname"><a href="classllvm_1_1MemoryLocation.html#a18e5a3f1d71ba10a624f2a8e5121cf1f">llvm::MemoryLocation::get</a></div><div class="ttdeci">static MemoryLocation get(const LoadInst *LI)</div><div class="ttdoc">Return a location with information about the memory reference by the given instruction.</div><div class="ttdef"><b>Definition:</b> <a href="MemoryLocation_8cpp_source.html#l00036">MemoryLocation.cpp:36</a></div></div>
<div class="ttc" id="anamespacellvm_html"><div class="ttname"><a href="namespacellvm.html">llvm</a></div><div class="ttdoc">This is an optimization pass for GlobalISel generic memory operations.</div><div class="ttdef"><b>Definition:</b> <a href="AddressRanges_8h_source.html#l00018">AddressRanges.h:18</a></div></div>
<div class="ttc" id="aTarWriter_8cpp_html_aac035f4156e2604bfa42ba22c17b83ee"><div class="ttname"><a href="TarWriter_8cpp.html#aac035f4156e2604bfa42ba22c17b83ee">BlockSize</a></div><div class="ttdeci">static const int BlockSize</div><div class="ttdef"><b>Definition:</b> <a href="TarWriter_8cpp_source.html#l00033">TarWriter.cpp:33</a></div></div>
<div class="ttc" id="aclassllvm_1_1DILocalScope_html_a0e0b4a5906e0bc2a7fa033548c59a220"><div class="ttname"><a href="classllvm_1_1DILocalScope.html#a0e0b4a5906e0bc2a7fa033548c59a220">llvm::DILocalScope::getSubprogram</a></div><div class="ttdeci">DISubprogram * getSubprogram() const</div><div class="ttdoc">Get the subprogram for this scope.</div><div class="ttdef"><b>Definition:</b> <a href="DebugInfoMetadata_8cpp_source.html#l00965">DebugInfoMetadata.cpp:965</a></div></div>
<div class="ttc" id="alib_2Target_2X86_2README_8txt_html_ac88fe1d3a61b056a4f64fbbb156a62ff"><div class="ttname"><a href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a></div><div class="ttdeci">We currently emits eax Perhaps this is what we really should generate is Is imull three or four cycles eax eax The current instruction priority is based on pattern complexity The former is more complex because it folds a load so the latter will not be emitted Perhaps we should use AddedComplexity to give LEA32r a higher priority We should always try to match LEA first since the LEA matching code does some estimate to determine whether the match is profitable if we care more about code then imull is better It s two bytes shorter than movl leal On a Pentium M</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2X86_2README_8txt_source.html#l00252">README.txt:252</a></div></div>
<div class="ttc" id="anamespacellvm_html_ad1a91b49e0c092818a0b82f6cc130a1b"><div class="ttname"><a href="namespacellvm.html#ad1a91b49e0c092818a0b82f6cc130a1b">llvm::make_range</a></div><div class="ttdeci">iterator_range&lt; T &gt; make_range(T x, T y)</div><div class="ttdoc">Convenience function for iterating over sub-ranges.</div><div class="ttdef"><b>Definition:</b> <a href="iterator__range_8h_source.html#l00053">iterator_range.h:53</a></div></div>
<div class="ttc" id="aclassllvm_1_1DataLayout_html"><div class="ttname"><a href="classllvm_1_1DataLayout.html">llvm::DataLayout</a></div><div class="ttdoc">A parsed version of the target data layout string in and methods for querying it.</div><div class="ttdef"><b>Definition:</b> <a href="DataLayout_8h_source.html#l00110">DataLayout.h:110</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AArch64PACKey_html_abf4394f452bde3f544999858d71e4b46"><div class="ttname"><a href="namespacellvm_1_1AArch64PACKey.html#abf4394f452bde3f544999858d71e4b46">llvm::AArch64PACKey::ID</a></div><div class="ttdeci">ID</div><div class="ttdef"><b>Definition:</b> <a href="AArch64BaseInfo_8h_source.html#l00790">AArch64BaseInfo.h:790</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_a3a402430a1bbe70a9282dcb0e0b6a2cd"><div class="ttname"><a href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">llvm::Value::hasOneUse</a></div><div class="ttdeci">bool hasOneUse() const</div><div class="ttdoc">Return true if there is exactly one use of this value.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00434">Value.h:434</a></div></div>
<div class="ttc" id="aclassllvm_1_1User_html_a0b931781aa589c6ebe64a76c1447e5b2"><div class="ttname"><a href="classllvm_1_1User.html#a0b931781aa589c6ebe64a76c1447e5b2">llvm::User::operands</a></div><div class="ttdeci">op_range operands()</div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00242">User.h:242</a></div></div>
<div class="ttc" id="aAMDGPURewriteUndefForPHI_8cpp_html_a2e83cb1bc3f5e8986cbd14575755a134"><div class="ttname"><a href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">PHI</a></div><div class="ttdeci">Rewrite undef for PHI</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPURewriteUndefForPHI_8cpp_source.html#l00101">AMDGPURewriteUndefForPHI.cpp:101</a></div></div>
<div class="ttc" id="aclassllvm_1_1AllocaInst_html_a42438d0a43720a6571c9138224481754"><div class="ttname"><a href="classllvm_1_1AllocaInst.html#a42438d0a43720a6571c9138224481754">llvm::AllocaInst::getAlign</a></div><div class="ttdeci">Align getAlign() const</div><div class="ttdoc">Return the alignment of the memory that is being allocated by the instruction.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00125">Instructions.h:125</a></div></div>
<div class="ttc" id="aIntrinsicInst_8h_html"><div class="ttname"><a href="IntrinsicInst_8h.html">IntrinsicInst.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a3b996fbf8458aafffc86cb98a68d0a47"><div class="ttname"><a href="classllvm_1_1Type.html#a3b996fbf8458aafffc86cb98a68d0a47">llvm::Type::isPointerTy</a></div><div class="ttdeci">bool isPointerTy() const</div><div class="ttdoc">True if this is an instance of PointerType.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00249">Type.h:249</a></div></div>
<div class="ttc" id="aREADME-FPStack_8txt_html_a9209b9930d4d7750a6b8b38b3b4ddd6a"><div class="ttname"><a href="README-FPStack_8txt.html#a9209b9930d4d7750a6b8b38b3b4ddd6a">ceil</a></div><div class="ttdeci">We have fiadd patterns now but the followings have the same cost and complexity We need a way to specify the later is more profitable def def The FP stackifier should handle simple permutates to reduce number of shuffle e g ceil</div><div class="ttdef"><b>Definition:</b> <a href="README-FPStack_8txt_source.html#l00054">README-FPStack.txt:54</a></div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisManager_html_ab9d3d5412c20747fd0110a046604f09a"><div class="ttname"><a href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">llvm::AnalysisManager::getResult</a></div><div class="ttdeci">PassT::Result &amp; getResult(IRUnitT &amp;IR, ExtraArgTs... ExtraArgs)</div><div class="ttdoc">Get the result of an analysis pass for a given IR unit.</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00774">PassManager.h:774</a></div></div>
<div class="ttc" id="aDebugInfoMetadata_8h_html"><div class="ttname"><a href="DebugInfoMetadata_8h.html">DebugInfoMetadata.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1MemoryLocation_html_a9550ce4a179e46db37f653ce28feca7a"><div class="ttname"><a href="classllvm_1_1MemoryLocation.html#a9550ce4a179e46db37f653ce28feca7a">llvm::MemoryLocation::Ptr</a></div><div class="ttdeci">const Value * Ptr</div><div class="ttdoc">The address of the start of the location.</div><div class="ttdef"><b>Definition:</b> <a href="MemoryLocation_8h_source.html#l00219">MemoryLocation.h:219</a></div></div>
<div class="ttc" id="aclassllvm_1_1ValueMap_html_ab871e2d0ebded563edfebd6766fc1a04"><div class="ttname"><a href="classllvm_1_1ValueMap.html#ab871e2d0ebded563edfebd6766fc1a04">llvm::ValueMap::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="ValueMap_8h_source.html#l00135">ValueMap.h:135</a></div></div>
<div class="ttc" id="aTransforms_2Scalar_8h_html"><div class="ttname"><a href="Transforms_2Scalar_8h.html">Scalar.h</a></div></div>
<div class="ttc" id="astructllvm_1_1PassInfoMixin_html"><div class="ttname"><a href="structllvm_1_1PassInfoMixin.html">llvm::PassInfoMixin&lt; LowerMatrixIntrinsicsPass &gt;</a></div></div>
<div class="ttc" id="anamespacellvm_1_1X86II_html_a0f8eae4dc1f8612213b096103301fef5ad254d64df655ab661c3c3330610385af"><div class="ttname"><a href="namespacellvm_1_1X86II.html#a0f8eae4dc1f8612213b096103301fef5ad254d64df655ab661c3c3330610385af">llvm::X86II::TA</a></div><div class="ttdeci">@ TA</div><div class="ttdef"><b>Definition:</b> <a href="X86BaseInfo_8h_source.html#l00813">X86BaseInfo.h:813</a></div></div>
<div class="ttc" id="aX86ISelLowering_8cpp_html_a47413709ef916baf36607da462d93ccc"><div class="ttname"><a href="X86ISelLowering_8cpp.html#a47413709ef916baf36607da462d93ccc">LowerLoad</a></div><div class="ttdeci">static SDValue LowerLoad(SDValue Op, const X86Subtarget &amp;Subtarget, SelectionDAG &amp;DAG)</div><div class="ttdef"><b>Definition:</b> <a href="X86ISelLowering_8cpp_source.html#l26281">X86ISelLowering.cpp:26281</a></div></div>
<div class="ttc" id="aclassT_html"><div class="ttname"><a href="classT.html">T</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html"><div class="ttname"><a href="classllvm_1_1Function.html">llvm::Function</a></div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00059">Function.h:59</a></div></div>
<div class="ttc" id="aPass_8h_html"><div class="ttname"><a href="Pass_8h.html">Pass.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfo_html_a2d30dd50c6b2d64ca3bc2826ca229fdb"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html#a2d30dd50c6b2d64ca3bc2826ca229fdb">llvm::TargetTransformInfo::getRegisterBitWidth</a></div><div class="ttdeci">TypeSize getRegisterBitWidth(RegisterKind K) const</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8cpp_source.html#l00657">TargetTransformInfo.cpp:657</a></div></div>
<div class="ttc" id="aclassllvm_1_1IntrinsicInst_html_a7ff64b3625b6f9020556ed05a5f72af4"><div class="ttname"><a href="classllvm_1_1IntrinsicInst.html#a7ff64b3625b6f9020556ed05a5f72af4">llvm::IntrinsicInst::getIntrinsicID</a></div><div class="ttdeci">Intrinsic::ID getIntrinsicID() const</div><div class="ttdoc">Return the intrinsic ID of this intrinsic.</div><div class="ttdef"><b>Definition:</b> <a href="IntrinsicInst_8h_source.html#l00054">IntrinsicInst.h:54</a></div></div>
<div class="ttc" id="aX86ISelLowering_8cpp_html_a05914158f39e230548b1b743eee2e5f6"><div class="ttname"><a href="X86ISelLowering_8cpp.html#a05914158f39e230548b1b743eee2e5f6">LowerStore</a></div><div class="ttdeci">static SDValue LowerStore(SDValue Op, const X86Subtarget &amp;Subtarget, SelectionDAG &amp;DAG)</div><div class="ttdef"><b>Definition:</b> <a href="X86ISelLowering_8cpp_source.html#l26192">X86ISelLowering.cpp:26192</a></div></div>
<div class="ttc" id="aclassllvm_1_1raw__string__ostream_html"><div class="ttname"><a href="classllvm_1_1raw__string__ostream.html">llvm::raw_string_ostream</a></div><div class="ttdoc">A raw_ostream that writes to an std::string.</div><div class="ttdef"><b>Definition:</b> <a href="raw__ostream_8h_source.html#l00642">raw_ostream.h:642</a></div></div>
<div class="ttc" id="anamespacellvm_html_a0cc156a5675c3f3e0ae9d329163b9f8b"><div class="ttname"><a href="namespacellvm.html#a0cc156a5675c3f3e0ae9d329163b9f8b">llvm::write</a></div><div class="ttdeci">Error write(MCStreamer &amp;Out, ArrayRef&lt; std::string &gt; Inputs)</div><div class="ttdef"><b>Definition:</b> <a href="DWP_8cpp_source.html#l00551">DWP.cpp:551</a></div></div>
<div class="ttc" id="aclassllvm_1_1PointerType_html_a050a395d1656e546679d8b144d951bb2"><div class="ttname"><a href="classllvm_1_1PointerType.html#a050a395d1656e546679d8b144d951bb2">llvm::PointerType::get</a></div><div class="ttdeci">static PointerType * get(Type *ElementType, unsigned AddressSpace)</div><div class="ttdoc">This constructs a pointer to an object of the specified type in a numbered address space.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00729">Type.cpp:729</a></div></div>
<div class="ttc" id="aclassllvm_1_1SetVector_html_a18b9d328d2490f447589ba60345eba6e"><div class="ttname"><a href="classllvm_1_1SetVector.html#a18b9d328d2490f447589ba60345eba6e">llvm::SetVector::size</a></div><div class="ttdeci">size_type size() const</div><div class="ttdoc">Determine the number of elements in the SetVector.</div><div class="ttdef"><b>Definition:</b> <a href="SetVector_8h_source.html#l00077">SetVector.h:77</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a4abb39a66573f61fda80469faa5d861d"><div class="ttname"><a href="classllvm_1_1Type.html#a4abb39a66573f61fda80469faa5d861d">llvm::Type::getScalarType</a></div><div class="ttdeci">Type * getScalarType() const</div><div class="ttdoc">If this is a vector type, return the element type, otherwise return 'this'.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00341">Type.h:341</a></div></div>
<div class="ttc" id="anamespacellvm_html_a26e2a938b431eaa6eca2beaa96410c9d"><div class="ttname"><a href="namespacellvm.html#a26e2a938b431eaa6eca2beaa96410c9d">llvm::successors</a></div><div class="ttdeci">auto successors(const MachineBasicBlock *BB)</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l01265">MachineBasicBlock.h:1265</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVector_html"><div class="ttname"><a href="classllvm_1_1SmallVector.html">llvm::SmallVector</a></div><div class="ttdoc">This is a 'vector' (really, a variable-sized array), optimized for the case when the array is small.</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l01199">SmallVector.h:1199</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a944c25ac9b73b02a17a20a08a25b9b21"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a944c25ac9b73b02a17a20a08a25b9b21">llvm::PatternMatch::m_Add</a></div><div class="ttdeci">BinaryOp_match&lt; LHS, RHS, Instruction::Add &gt; m_Add(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00979">PatternMatch.h:979</a></div></div>
<div class="ttc" id="anamespacellvm_html_a7b2175e18ff52174fad26b6b68818564"><div class="ttname"><a href="namespacellvm.html#a7b2175e18ff52174fad26b6b68818564">llvm::enumerate</a></div><div class="ttdeci">detail::enumerator&lt; R &gt; enumerate(R &amp;&amp;TheRange)</div><div class="ttdoc">Given an input range, returns a new range whose values are are pair (A,B) such that A is the 0-based ...</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l02264">STLExtras.h:2264</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a78cd22f497c1e81c4d8a5e9073ef5a24"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a78cd22f497c1e81c4d8a5e9073ef5a24">llvm::PatternMatch::m_Load</a></div><div class="ttdeci">OneOps_match&lt; OpTy, Instruction::Load &gt; m_Load(const OpTy &amp;Op)</div><div class="ttdoc">Matches LoadInst.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01563">PatternMatch.h:1563</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_af4feec45578e32fe65d8efc59112bc8e"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#af4feec45578e32fe65d8efc59112bc8e">llvm::PatternMatch::m_CombineOr</a></div><div class="ttdeci">match_combine_or&lt; LTy, RTy &gt; m_CombineOr(const LTy &amp;L, const RTy &amp;R)</div><div class="ttdoc">Combine two pattern matchers matching L || R.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00218">PatternMatch.h:218</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfo_html"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html">llvm::TargetTransformInfo</a></div><div class="ttdoc">This pass provides access to the codegen interfaces that are needed for IR-level transformations.</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l00196">TargetTransformInfo.h:196</a></div></div>
<div class="ttc" id="aSROA_8cpp_html_a42c6a2faff923f431932c6d33cf4092b"><div class="ttname"><a href="SROA_8cpp.html#a42c6a2faff923f431932c6d33cf4092b">insertVector</a></div><div class="ttdeci">static Value * insertVector(IRBuilderTy &amp;IRB, Value *Old, Value *V, unsigned BeginIndex, const Twine &amp;Name)</div><div class="ttdef"><b>Definition:</b> <a href="SROA_8cpp_source.html#l02310">SROA.cpp:2310</a></div></div>
<div class="ttc" id="aARMLowOverheadLoops_8cpp_html_a3bf42baf773b375802538951c88d8e12"><div class="ttname"><a href="ARMLowOverheadLoops_8cpp.html#a3bf42baf773b375802538951c88d8e12">ToRemove</a></div><div class="ttdeci">ReachingDefAnalysis InstSet &amp; ToRemove</div><div class="ttdef"><b>Definition:</b> <a href="ARMLowOverheadLoops_8cpp_source.html#l00547">ARMLowOverheadLoops.cpp:547</a></div></div>
<div class="ttc" id="aclassllvm_1_1IRBuilder_html"><div class="ttname"><a href="classllvm_1_1IRBuilder.html">llvm::IRBuilder&lt;&gt;</a></div></div>
<div class="ttc" id="aclassllvm_1_1AAResults_html_a9ebdc17e55980f1a8176d376d9e2a323"><div class="ttname"><a href="classllvm_1_1AAResults.html#a9ebdc17e55980f1a8176d376d9e2a323">llvm::AAResults::isNoAlias</a></div><div class="ttdeci">bool isNoAlias(const MemoryLocation &amp;LocA, const MemoryLocation &amp;LocB)</div><div class="ttdoc">A trivial helper function to check to see if the specified pointers are no-alias.</div><div class="ttdef"><b>Definition:</b> <a href="AliasAnalysis_8h_source.html#l00348">AliasAnalysis.h:348</a></div></div>
<div class="ttc" id="aDomTreeUpdater_8h_html"><div class="ttname"><a href="DomTreeUpdater_8h.html">DomTreeUpdater.h</a></div></div>
<div class="ttc" id="aValueTracking_8h_html"><div class="ttname"><a href="ValueTracking_8h.html">ValueTracking.h</a></div></div>
<div class="ttc" id="aOptimizationRemarkEmitter_8h_html"><div class="ttname"><a href="OptimizationRemarkEmitter_8h.html">OptimizationRemarkEmitter.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1DominatorTree_html"><div class="ttname"><a href="classllvm_1_1DominatorTree.html">llvm::DominatorTree</a></div><div class="ttdoc">Concrete subclass of DominatorTreeBase that is used to compute a normal dominator tree.</div><div class="ttdef"><b>Definition:</b> <a href="Dominators_8h_source.html#l00166">Dominators.h:166</a></div></div>
<div class="ttc" id="aclassllvm_1_1OptimizationRemarkEmitter_html_a74b26949a0dd7a5fab2ba1b0da204e50"><div class="ttname"><a href="classllvm_1_1OptimizationRemarkEmitter.html#a74b26949a0dd7a5fab2ba1b0da204e50">llvm::OptimizationRemarkEmitter::allowExtraAnalysis</a></div><div class="ttdeci">bool allowExtraAnalysis(StringRef PassName) const</div><div class="ttdoc">Whether we allow for extra compile-time budget to perform more analysis to produce fewer false positi...</div><div class="ttdef"><b>Definition:</b> <a href="OptimizationRemarkEmitter_8h_source.html#l00098">OptimizationRemarkEmitter.h:98</a></div></div>
<div class="ttc" id="anamespacellvm_1_1cl_html_a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6"><div class="ttname"><a href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">llvm::cl::Hidden</a></div><div class="ttdeci">@ Hidden</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00138">CommandLine.h:138</a></div></div>
<div class="ttc" id="aclassllvm_1_1DILocation_html"><div class="ttname"><a href="classllvm_1_1DILocation.html">llvm::DILocation</a></div><div class="ttdoc">Debug location.</div><div class="ttdef"><b>Definition:</b> <a href="DebugInfoMetadata_8h_source.html#l01605">DebugInfoMetadata.h:1605</a></div></div>
<div class="ttc" id="aLowerMatrixIntrinsics_8cpp_html_ada3f86ecde5ce7225dd1a152a5b48104"><div class="ttname"><a href="LowerMatrixIntrinsics_8cpp.html#ada3f86ecde5ce7225dd1a152a5b48104">ForceFusion</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; ForceFusion(&quot;force-fuse-matrix&quot;, cl::init(false), cl::Hidden, cl::desc(&quot;Force matrix instruction fusion even if not profitable.&quot;))</div></div>
<div class="ttc" id="aclassllvm_1_1MemoryLocation_html_a39f7ff959874bf38f3e14aa0b2622da0"><div class="ttname"><a href="classllvm_1_1MemoryLocation.html#a39f7ff959874bf38f3e14aa0b2622da0">llvm::MemoryLocation::Size</a></div><div class="ttdeci">LocationSize Size</div><div class="ttdoc">The maximum size of the location, in address-units, or UnknownSize if the size is not known.</div><div class="ttdef"><b>Definition:</b> <a href="MemoryLocation_8h_source.html#l00228">MemoryLocation.h:228</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html"><div class="ttname"><a href="classllvm_1_1Type.html">llvm::Type</a></div><div class="ttdoc">The instances of the Type class are immutable: once they are created, they are never changed.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00045">Type.h:45</a></div></div>
<div class="ttc" id="aclassllvm_1_1DebugLoc_html_ada0b6f3c53a53b7274e7aeb23eeab5a8"><div class="ttname"><a href="classllvm_1_1DebugLoc.html#ada0b6f3c53a53b7274e7aeb23eeab5a8">llvm::DebugLoc::getInlinedAt</a></div><div class="ttdeci">DILocation * getInlinedAt() const</div><div class="ttdef"><b>Definition:</b> <a href="DebugLoc_8cpp_source.html#l00039">DebugLoc.cpp:39</a></div></div>
<div class="ttc" id="anamespacellvm_1_1sys_1_1path_html_a214ec2f04ffd92636ed4bd2717607a1d"><div class="ttname"><a href="namespacellvm_1_1sys_1_1path.html#a214ec2f04ffd92636ed4bd2717607a1d">llvm::sys::path::end</a></div><div class="ttdeci">const_iterator end(StringRef path)</div><div class="ttdoc">Get end iterator over path.</div><div class="ttdef"><b>Definition:</b> <a href="Path_8cpp_source.html#l00235">Path.cpp:235</a></div></div>
<div class="ttc" id="anamespacellvm_1_1sys_1_1path_html_a00a76a729b319dc47beffbe07325565f"><div class="ttname"><a href="namespacellvm_1_1sys_1_1path.html#a00a76a729b319dc47beffbe07325565f">llvm::sys::path::begin</a></div><div class="ttdeci">const_iterator begin(StringRef path, Style style=Style::native)</div><div class="ttdoc">Get begin iterator over path.</div><div class="ttdef"><b>Definition:</b> <a href="Path_8cpp_source.html#l00226">Path.cpp:226</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopInfoWrapperPass_html"><div class="ttname"><a href="classllvm_1_1LoopInfoWrapperPass.html">llvm::LoopInfoWrapperPass</a></div><div class="ttdoc">The legacy pass manager's analysis pass to compute loop information.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l01293">LoopInfo.h:1293</a></div></div>
<div class="ttc" id="aclassllvm_1_1DominatorTreeBase_html_a9aeeca2833810f01b20545a46fe22503"><div class="ttname"><a href="classllvm_1_1DominatorTreeBase.html#a9aeeca2833810f01b20545a46fe22503">llvm::DominatorTreeBase::Insert</a></div><div class="ttdeci">static constexpr UpdateKind Insert</div><div class="ttdef"><b>Definition:</b> <a href="GenericDomTree_8h_source.html#l00258">GenericDomTree.h:258</a></div></div>
<div class="ttc" id="aMips16ISelLowering_8cpp_html_ac16509a75e3d3fc46b9df1726be486ec"><div class="ttname"><a href="Mips16ISelLowering_8cpp.html#ac16509a75e3d3fc46b9df1726be486ec">T1</a></div><div class="ttdeci">#define T1</div><div class="ttdef"><b>Definition:</b> <a href="Mips16ISelLowering_8cpp_source.html#l00340">Mips16ISelLowering.cpp:340</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallSet_html"><div class="ttname"><a href="classllvm_1_1SmallSet.html">llvm::SmallSet</a></div><div class="ttdoc">SmallSet - This maintains a set of unique values, optimizing for the case when the set is small (less...</div><div class="ttdef"><b>Definition:</b> <a href="SmallSet_8h_source.html#l00135">SmallSet.h:135</a></div></div>
<div class="ttc" id="anamespacellvm_html_a2f883c895f4d244f4ed56ed8a8c160c1"><div class="ttname"><a href="namespacellvm.html#a2f883c895f4d244f4ed56ed8a8c160c1">llvm::operator!=</a></div><div class="ttdeci">bool operator!=(uint64_t V1, const APInt &amp;V2)</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l02040">APInt.h:2040</a></div></div>
<div class="ttc" id="aREADME__P9_8txt_html_ae6881514a39f1bcf75ad62e5188700a4"><div class="ttname"><a href="README__P9_8txt.html#ae6881514a39f1bcf75ad62e5188700a4">Vector</a></div><div class="ttdeci">So we should use XX3Form_Rcr to implement intrinsic Convert DP outs ins xscvdpsp No builtin are required Round &amp;Convert QP DP(dword[1] is set to zero) No builtin are required Round to Quad Precision because you need to assign rounding mode in instruction Provide builtin(set f128:$vT,(int_ppc_vsx_xsrqpi f128:$vB))(set f128 yields&lt; n x&lt; ty &gt; &gt;&lt; result &gt; yields&lt; ty &gt;&lt; result &gt; No builtin are required Load Store Vector</div><div class="ttdef"><b>Definition:</b> <a href="README__P9_8txt_source.html#l00497">README_P9.txt:497</a></div></div>
<div class="ttc" id="aHexagonVectorLoopCarriedReuse_8cpp_html_a3fd4a7024284a5905bb9ffcc1b23761c"><div class="ttname"><a href="HexagonVectorLoopCarriedReuse_8cpp.html#a3fd4a7024284a5905bb9ffcc1b23761c">vectors</a></div><div class="ttdeci">hexagon Hexagon specific predictive commoning for HVX vectors</div><div class="ttdef"><b>Definition:</b> <a href="HexagonVectorLoopCarriedReuse_8cpp_source.html#l00221">HexagonVectorLoopCarriedReuse.cpp:221</a></div></div>
<div class="ttc" id="aclassllvm_1_1MapVector_html"><div class="ttname"><a href="classllvm_1_1MapVector.html">llvm::MapVector</a></div><div class="ttdoc">This class implements a map that also provides access to all stored values in a deterministic order.</div><div class="ttdef"><b>Definition:</b> <a href="MapVector_8h_source.html#l00037">MapVector.h:37</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSet_html"><div class="ttname"><a href="classllvm_1_1SmallPtrSet.html">llvm::SmallPtrSet</a></div><div class="ttdoc">SmallPtrSet - This class implements a set which is optimized for holding SmallSize or less elements.</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00450">SmallPtrSet.h:450</a></div></div>
<div class="ttc" id="anamespacellvm_1_1ore_html_a8f5533240c6722d987a2443cba42019d"><div class="ttname"><a href="namespacellvm_1_1ore.html#a8f5533240c6722d987a2443cba42019d">llvm::ore::NV</a></div><div class="ttdeci">DiagnosticInfoOptimizationBase::Argument NV</div><div class="ttdef"><b>Definition:</b> <a href="OptimizationRemarkEmitter_8h_source.html#l00136">OptimizationRemarkEmitter.h:136</a></div></div>
<div class="ttc" id="aclassllvm_1_1VectorType_html_a12e23c3d619db313388fe11dc76eb23f"><div class="ttname"><a href="classllvm_1_1VectorType.html#a12e23c3d619db313388fe11dc76eb23f">llvm::VectorType::getElementType</a></div><div class="ttdeci">Type * getElementType() const</div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00422">DerivedTypes.h:422</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_a158da2b6d3d938aaa15b6acd00150e2c"><div class="ttname"><a href="classllvm_1_1Value.html#a158da2b6d3d938aaa15b6acd00150e2c">llvm::Value::user_begin</a></div><div class="ttdeci">user_iterator user_begin()</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00397">Value.h:397</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallBase_html_a4fb513d744ca72275932b2c7003f16f6"><div class="ttname"><a href="classllvm_1_1CallBase.html#a4fb513d744ca72275932b2c7003f16f6">llvm::CallBase::arg_begin</a></div><div class="ttdeci">User::op_iterator arg_begin()</div><div class="ttdoc">Return the iterator pointing to the beginning of the argument list.</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l01326">InstrTypes.h:1326</a></div></div>
<div class="ttc" id="aX86PartialReduction_8cpp_html_a87b8bfbbe9d8f7146d7f20a5fb42efd0"><div class="ttname"><a href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a></div><div class="ttdeci">Value * RHS</div><div class="ttdef"><b>Definition:</b> <a href="X86PartialReduction_8cpp_source.html#l00076">X86PartialReduction.cpp:76</a></div></div>
<div class="ttc" id="aclassllvm_1_1UnaryOperator_html"><div class="ttname"><a href="classllvm_1_1UnaryOperator.html">llvm::UnaryOperator</a></div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00100">InstrTypes.h:100</a></div></div>
<div class="ttc" id="aclassllvm_1_1FastMathFlags_html"><div class="ttname"><a href="classllvm_1_1FastMathFlags.html">llvm::FastMathFlags</a></div><div class="ttdoc">Convenience struct for specifying and reasoning about fast-math flags.</div><div class="ttdef"><b>Definition:</b> <a href="FMF_8h_source.html#l00021">FMF.h:21</a></div></div>
<div class="ttc" id="anamespacellvm_html_a95574deafa1403f5a7ccad55017bb125"><div class="ttname"><a href="namespacellvm.html#a95574deafa1403f5a7ccad55017bb125">llvm::initializeLowerMatrixIntrinsicsMinimalLegacyPassPass</a></div><div class="ttdeci">void initializeLowerMatrixIntrinsicsMinimalLegacyPassPass(PassRegistry &amp;)</div></div>
<div class="ttc" id="anamespacellvm_1_1SPII_html_a1c7202c6054fef862bbed45957747cdfa5069619ca8fdce305534f3fe85091a0f"><div class="ttname"><a href="namespacellvm_1_1SPII.html#a1c7202c6054fef862bbed45957747cdfa5069619ca8fdce305534f3fe85091a0f">llvm::SPII::Load</a></div><div class="ttdeci">@ Load</div><div class="ttdef"><b>Definition:</b> <a href="SparcInstrInfo_8h_source.html#l00032">SparcInstrInfo.h:32</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoadInst_html_af51c113a039c82f6870df5dc9666b5e3"><div class="ttname"><a href="classllvm_1_1LoadInst.html#af51c113a039c82f6870df5dc9666b5e3">llvm::LoadInst::getAlign</a></div><div class="ttdeci">Align getAlign() const</div><div class="ttdoc">Return the alignment of the access that is being performed.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00220">Instructions.h:220</a></div></div>
<div class="ttc" id="aclassllvm_1_1DominatorTreeBase_html_a470b5b573c7915fe13bd529b22c9adbc"><div class="ttname"><a href="classllvm_1_1DominatorTreeBase.html#a470b5b573c7915fe13bd529b22c9adbc">llvm::DominatorTreeBase::applyUpdates</a></div><div class="ttdeci">void applyUpdates(ArrayRef&lt; UpdateType &gt; Updates)</div><div class="ttdoc">Inform the dominator tree about a sequence of CFG edge insertions and deletions and perform a batch u...</div><div class="ttdef"><b>Definition:</b> <a href="GenericDomTree_8h_source.html#l00561">GenericDomTree.h:561</a></div></div>
<div class="ttc" id="aDebug_8h_html_a08efc68d15935eb8889400a46c3749ba"><div class="ttname"><a href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a></div><div class="ttdeci">#define LLVM_DEBUG(X)</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8h_source.html#l00101">Debug.h:101</a></div></div>
<div class="ttc" id="anamespacellvm_1_1NVPTX_1_1PTXLdStInstCode_html_a91119cbee2be000c528a690252aee07c"><div class="ttname"><a href="namespacellvm_1_1NVPTX_1_1PTXLdStInstCode.html#a91119cbee2be000c528a690252aee07c">llvm::NVPTX::PTXLdStInstCode::VecType</a></div><div class="ttdeci">VecType</div><div class="ttdef"><b>Definition:</b> <a href="NVPTX_8h_source.html#l00122">NVPTX.h:122</a></div></div>
<div class="ttc" id="anamespacellvm_html_acd6aa057934751aaac54e5c18bcc18eb"><div class="ttname"><a href="namespacellvm.html#acd6aa057934751aaac54e5c18bcc18eb">llvm::commonAlignment</a></div><div class="ttdeci">Align commonAlignment(Align A, uint64_t Offset)</div><div class="ttdoc">Returns the alignment that satisfies both alignments.</div><div class="ttdef"><b>Definition:</b> <a href="Alignment_8h_source.html#l00212">Alignment.h:212</a></div></div>
<div class="ttc" id="aMD5_8cpp_html_a96d73bbd7af15cb1fc38c3f4a3bd82e9"><div class="ttname"><a href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a></div><div class="ttdeci">#define F(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00055">MD5.cpp:55</a></div></div>
<div class="ttc" id="anamespacellvm_1_1RISCVFenceField_html_a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731"><div class="ttname"><a href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">llvm::RISCVFenceField::R</a></div><div class="ttdeci">@ R</div><div class="ttdef"><b>Definition:</b> <a href="RISCVBaseInfo_8h_source.html#l00278">RISCVBaseInfo.h:278</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a5e3486337f60bed631149fb6b141bc3e"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a5e3486337f60bed631149fb6b141bc3e">llvm::PatternMatch::m_FAdd</a></div><div class="ttdeci">BinaryOp_match&lt; LHS, RHS, Instruction::FAdd &gt; m_FAdd(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00985">PatternMatch.h:985</a></div></div>
<div class="ttc" id="aclassllvm_1_1DomTreeUpdater_html_a8bf4c30be33831d7882d6880b8ae433da46a9ebdb80117bfa1f0cdea65438290a"><div class="ttname"><a href="classllvm_1_1DomTreeUpdater.html#a8bf4c30be33831d7882d6880b8ae433da46a9ebdb80117bfa1f0cdea65438290a">llvm::DomTreeUpdater::UpdateStrategy::Lazy</a></div><div class="ttdeci">@ Lazy</div></div>
<div class="ttc" id="astructllvm_1_1TileInfo_html"><div class="ttname"><a href="structllvm_1_1TileInfo.html">llvm::TileInfo</a></div><div class="ttdoc">A helper struct to create IR loop nests for tiling in IR of the following form: for ColumnLoop....</div><div class="ttdef"><b>Definition:</b> <a href="MatrixUtils_8h_source.html#l00031">MatrixUtils.h:31</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html"><div class="ttname"><a href="classllvm_1_1BasicBlock.html">llvm::BasicBlock</a></div><div class="ttdoc">LLVM Basic Block Representation.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00055">BasicBlock.h:55</a></div></div>
<div class="ttc" id="aLowerMatrixIntrinsics_8cpp_html_a79f0c982827f4d3afbbbefc1180e0ef7"><div class="ttname"><a href="LowerMatrixIntrinsics_8cpp.html#a79f0c982827f4d3afbbbefc1180e0ef7">getSubprogram</a></div><div class="ttdeci">static DISubprogram * getSubprogram(DIScope *Scope)</div><div class="ttdoc">Helper function to either return Scope, if it is a subprogram or the attached subprogram for a local ...</div><div class="ttdef"><b>Definition:</b> <a href="LowerMatrixIntrinsics_8cpp_source.html#l00090">LowerMatrixIntrinsics.cpp:90</a></div></div>
<div class="ttc" id="aAliasAnalysis_8h_html"><div class="ttname"><a href="AliasAnalysis_8h.html">AliasAnalysis.h</a></div></div>
<div class="ttc" id="aMatrixBuilder_8h_html"><div class="ttname"><a href="MatrixBuilder_8h.html">MatrixBuilder.h</a></div></div>
<div class="ttc" id="aNVVMIntrRange_8cpp_html_afad351d7bf10ac0446b64e7827634e94"><div class="ttname"><a href="NVVMIntrRange_8cpp.html#afad351d7bf10ac0446b64e7827634e94">Context</a></div><div class="ttdeci">LLVMContext &amp; Context</div><div class="ttdef"><b>Definition:</b> <a href="NVVMIntrRange_8cpp_source.html#l00066">NVVMIntrRange.cpp:66</a></div></div>
<div class="ttc" id="anamespacellvm_html_a7c46c742c31be54870e2038048e6b391"><div class="ttname"><a href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">llvm::dbgs</a></div><div class="ttdeci">raw_ostream &amp; dbgs()</div><div class="ttdoc">dbgs() - This returns a reference to a raw_ostream for debugging messages.</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8cpp_source.html#l00163">Debug.cpp:163</a></div></div>
<div class="ttc" id="aclassllvm_1_1DominatorTree_html_a5c69311e8d44898dac36a155c3d8691d"><div class="ttname"><a href="classllvm_1_1DominatorTree.html#a5c69311e8d44898dac36a155c3d8691d">llvm::DominatorTree::dominates</a></div><div class="ttdeci">bool dominates(const BasicBlock *BB, const Use &amp;U) const</div><div class="ttdoc">Return true if the (end of the) basic block BB dominates the use U.</div><div class="ttdef"><b>Definition:</b> <a href="Dominators_8cpp_source.html#l00122">Dominators.cpp:122</a></div></div>
<div class="ttc" id="anamespacellvm_1_1BitmaskEnumDetail_html_a91efa71de05b0c2d00730a0279f58658"><div class="ttname"><a href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">llvm::BitmaskEnumDetail::Mask</a></div><div class="ttdeci">constexpr std::underlying_type_t&lt; E &gt; Mask()</div><div class="ttdoc">Get a bitmask with 1s in all places up to the high-order bit of E's largest value.</div><div class="ttdef"><b>Definition:</b> <a href="BitmaskEnum_8h_source.html#l00080">BitmaskEnum.h:80</a></div></div>
<div class="ttc" id="aCommandLine_8h_html"><div class="ttname"><a href="CommandLine_8h.html">CommandLine.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_ac4fc845f5ed92de63cd4474f128f5fc5"><div class="ttname"><a href="namespacellvm.html#ac4fc845f5ed92de63cd4474f128f5fc5">llvm::cast</a></div><div class="ttdeci">decltype(auto) cast(const From &amp;Val)</div><div class="ttdoc">cast&lt;X&gt; - Return the argument parameter cast to the specified type.</div><div class="ttdef"><b>Definition:</b> <a href="Casting_8h_source.html#l00566">Casting.h:566</a></div></div>
<div class="ttc" id="aclassllvm_1_1UnaryOperator_html_a7cece7ddf076c1dccc81f743e3b7bd36"><div class="ttname"><a href="classllvm_1_1UnaryOperator.html#a7cece7ddf076c1dccc81f743e3b7bd36">llvm::UnaryOperator::getOpcode</a></div><div class="ttdeci">UnaryOps getOpcode() const</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00170">InstrTypes.h:170</a></div></div>
<div class="ttc" id="aSROA_8cpp_html_a06a9071efa992145e210f0b41a52e501"><div class="ttname"><a href="SROA_8cpp.html#a06a9071efa992145e210f0b41a52e501">extractVector</a></div><div class="ttdeci">static Value * extractVector(IRBuilderTy &amp;IRB, Value *V, unsigned BeginIndex, unsigned EndIndex, const Twine &amp;Name)</div><div class="ttdef"><b>Definition:</b> <a href="SROA_8cpp_source.html#l02288">SROA.cpp:2288</a></div></div>
<div class="ttc" id="aX86PartialReduction_8cpp_html_a9e1483f7215664a2315c53c3558d9a8d"><div class="ttname"><a href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a></div><div class="ttdeci">Value * LHS</div><div class="ttdef"><b>Definition:</b> <a href="X86PartialReduction_8cpp_source.html#l00075">X86PartialReduction.cpp:75</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantInt_html"><div class="ttname"><a href="classllvm_1_1ConstantInt.html">llvm::ConstantInt</a></div><div class="ttdoc">This is the shared class of boolean and integer constants.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00078">Constants.h:78</a></div></div>
<div class="ttc" id="anamespacellvm_1_1X86AS_html_aea2591d7d017866934bcf72ee3dc8a31a1337cc82304bed6c1a811f1a7f308aca"><div class="ttname"><a href="namespacellvm_1_1X86AS.html#aea2591d7d017866934bcf72ee3dc8a31a1337cc82304bed6c1a811f1a7f308aca">llvm::X86AS::SS</a></div><div class="ttdeci">@ SS</div><div class="ttdef"><b>Definition:</b> <a href="X86_8h_source.html#l00202">X86.h:202</a></div></div>
<div class="ttc" id="aLowerMatrixIntrinsics_8cpp_html_a6a2164e5aeea9c3e9a02eab3747efd8c"><div class="ttname"><a href="LowerMatrixIntrinsics_8cpp.html#a6a2164e5aeea9c3e9a02eab3747efd8c">isSplat</a></div><div class="ttdeci">static bool isSplat(Value *V)</div><div class="ttdoc">Return true if V is a splat of a value (which is used when multiplying a matrix with a scalar).</div><div class="ttdef"><b>Definition:</b> <a href="LowerMatrixIntrinsics_8cpp_source.html#l00111">LowerMatrixIntrinsics.cpp:111</a></div></div>
<div class="ttc" id="aclassllvm_1_1PassRegistry_html_a05a729900b76c89e808c6c3094921b2f"><div class="ttname"><a href="classllvm_1_1PassRegistry.html#a05a729900b76c89e808c6c3094921b2f">llvm::PassRegistry::getPassRegistry</a></div><div class="ttdeci">static PassRegistry * getPassRegistry()</div><div class="ttdoc">getPassRegistry - Access the global registry object, which is automatically initialized at applicatio...</div><div class="ttdef"><b>Definition:</b> <a href="PassRegistry_8cpp_source.html#l00024">PassRegistry.cpp:24</a></div></div>
<div class="ttc" id="aMatrixUtils_8h_html"><div class="ttname"><a href="MatrixUtils_8h.html">MatrixUtils.h</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a25d956d9e0beadd47ce4bc255dfa811d"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">llvm::PatternMatch::match</a></div><div class="ttdeci">bool match(Val *V, const Pattern &amp;P)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00049">PatternMatch.h:49</a></div></div>
<div class="ttc" id="aLint_8cpp_html_a45005634b54e2126cb3e6ec0dbc9ade4"><div class="ttname"><a href="Lint_8cpp.html#a45005634b54e2126cb3e6ec0dbc9ade4">isZero</a></div><div class="ttdeci">static bool isZero(Value *V, const DataLayout &amp;DL, DominatorTree *DT, AssumptionCache *AC)</div><div class="ttdef"><b>Definition:</b> <a href="Lint_8cpp_source.html#l00524">Lint.cpp:524</a></div></div>
<div class="ttc" id="aclassllvm_1_1AAResults_html"><div class="ttname"><a href="classllvm_1_1AAResults.html">llvm::AAResults</a></div><div class="ttdef"><b>Definition:</b> <a href="AliasAnalysis_8h_source.html#l00294">AliasAnalysis.h:294</a></div></div>
<div class="ttc" id="aBuiltinGCs_8cpp_html_a6742d2e0a668baf1196ec69e158d5f15"><div class="ttname"><a href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a></div><div class="ttdeci">static GCRegistry::Add&lt; CoreCLRGC &gt; E(&quot;coreclr&quot;, &quot;CoreCLR-compatible GC&quot;)</div></div>
<div class="ttc" id="aPPCReduceCRLogicals_8cpp_html_a5b2aa9d3f9f3a7b2d123fef7c5328b8f"><div class="ttname"><a href="PPCReduceCRLogicals_8cpp.html#a5b2aa9d3f9f3a7b2d123fef7c5328b8f">Operation</a></div><div class="ttdeci">PowerPC Reduce CR logical Operation</div><div class="ttdef"><b>Definition:</b> <a href="PPCReduceCRLogicals_8cpp_source.html#l00735">PPCReduceCRLogicals.cpp:735</a></div></div>
<div class="ttc" id="anamespacellvm_html_a883a46222732a74f56798e2aee0ea8fb"><div class="ttname"><a href="namespacellvm.html#a883a46222732a74f56798e2aee0ea8fb">llvm::createLowerMatrixIntrinsicsPass</a></div><div class="ttdeci">Pass * createLowerMatrixIntrinsicsPass()</div><div class="ttdef"><b>Definition:</b> <a href="LowerMatrixIntrinsics_8cpp_source.html#l02451">LowerMatrixIntrinsics.cpp:2451</a></div></div>
<div class="ttc" id="aclassllvm_1_1User_html"><div class="ttname"><a href="classllvm_1_1User.html">llvm::User</a></div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00044">User.h:44</a></div></div>
<div class="ttc" id="aREADME__ALTIVEC_8txt_html_a9aacd9146afe44bf656cd664e2a88c8c"><div class="ttname"><a href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a></div><div class="ttdeci">(vector float) vec_cmpeq(*A, *B) C</div><div class="ttdef"><b>Definition:</b> <a href="README__ALTIVEC_8txt_source.html#l00086">README_ALTIVEC.txt:86</a></div></div>
<div class="ttc" id="anamespacellvm_1_1ARM__PROC_html_aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5"><div class="ttname"><a href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">llvm::ARM_PROC::A</a></div><div class="ttdeci">@ A</div><div class="ttdef"><b>Definition:</b> <a href="MCTargetDesc_2ARMBaseInfo_8h_source.html#l00034">ARMBaseInfo.h:34</a></div></div>
<div class="ttc" id="aLowerMatrixIntrinsics_8cpp_html_a7f6b2a94f0c353d428cf953c17fb7da0"><div class="ttname"><a href="LowerMatrixIntrinsics_8cpp.html#a7f6b2a94f0c353d428cf953c17fb7da0">TileSize</a></div><div class="ttdeci">static cl::opt&lt; unsigned &gt; TileSize(&quot;fuse-matrix-tile-size&quot;, cl::init(4), cl::Hidden, cl::desc(&quot;Tile size for matrix instruction fusion using square-shaped tiles.&quot;))</div></div>
<div class="ttc" id="aclassllvm_1_1CallBase_html_a83b8c9e572130f403445c0b0f69b837c"><div class="ttname"><a href="classllvm_1_1CallBase.html#a83b8c9e572130f403445c0b0f69b837c">llvm::CallBase::getCalledFunction</a></div><div class="ttdeci">Function * getCalledFunction() const</div><div class="ttdoc">Returns the function called, or null if this is an indirect function invocation or the function signa...</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l01406">InstrTypes.h:1406</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a0ed5f3ab3c2e4196ee0cffffa080c062"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">llvm::BasicBlock::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdoc">Instruction iterator methods.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00314">BasicBlock.h:314</a></div></div>
<div class="ttc" id="anamespacellvm_html_a0068da90e0fe51c9645b75e2a2235dc1"><div class="ttname"><a href="namespacellvm.html#a0068da90e0fe51c9645b75e2a2235dc1">llvm::operator+=</a></div><div class="ttdeci">std::string &amp; operator+=(std::string &amp;buffer, StringRef string)</div><div class="ttdef"><b>Definition:</b> <a href="StringRef_8h_source.html#l00891">StringRef.h:891</a></div></div>
<div class="ttc" id="aSIInstrInfo_8cpp_html_a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791"><div class="ttname"><a href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a></div><div class="ttdeci">@ SI</div><div class="ttdef"><b>Definition:</b> <a href="SIInstrInfo_8cpp_source.html#l07993">SIInstrInfo.cpp:7993</a></div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisUsage_html"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html">llvm::AnalysisUsage</a></div><div class="ttdoc">Represent the analysis usage information of a pass.</div><div class="ttdef"><b>Definition:</b> <a href="PassAnalysisSupport_8h_source.html#l00047">PassAnalysisSupport.h:47</a></div></div>
<div class="ttc" id="aclassllvm_1_1LocationSize_html_a47f128e1007c6c70eb7b0df2dcbf68df"><div class="ttname"><a href="classllvm_1_1LocationSize.html#a47f128e1007c6c70eb7b0df2dcbf68df">llvm::LocationSize::getValue</a></div><div class="ttdeci">uint64_t getValue() const</div><div class="ttdef"><b>Definition:</b> <a href="MemoryLocation_8h_source.html#l00160">MemoryLocation.h:160</a></div></div>
<div class="ttc" id="aREADME-SSE_8txt_html_a50fd53d9a3e55ae78555e11827355565"><div class="ttname"><a href="README-SSE_8txt.html#a50fd53d9a3e55ae78555e11827355565">t</a></div><div class="ttdeci">bitcast float %x to i32 %s=and i32 %t, 2147483647 %d=bitcast i32 %s to float ret float %d } declare float @fabsf(float %n) define float @bar(float %x) nounwind { %d=call float @fabsf(float %x) ret float %d } This IR(from PR6194):target datalayout=&quot;e-p:64:64:64-i1:8:8-i8:8:8-i16:16:16-i32:32:32-i64:64:64-f32:32:32-f64:64:64-v64:64:64-v128:128:128-a0:0:64-s0:64:64-f80:128:128-n8:16:32:64-S128&quot; target triple=&quot;x86_64-apple-darwin10.0.0&quot; %0=type { double, double } %struct.float3=type { float, float, float } define void @test(%0, %struct.float3 *nocapture %res) nounwind noinline ssp { entry:%tmp18=extractvalue %0 %0, 0 t</div><div class="ttdef"><b>Definition:</b> <a href="README-SSE_8txt_source.html#l00788">README-SSE.txt:788</a></div></div>
<div class="ttc" id="anamespacellvm_1_1ms__demangle_html_afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e"><div class="ttname"><a href="namespacellvm_1_1ms__demangle.html#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">llvm::ms_demangle::QualifierMangleMode::Result</a></div><div class="ttdeci">@ Result</div></div>
<div class="ttc" id="astructllvm_1_1BitTracker_html"><div class="ttname"><a href="structllvm_1_1BitTracker.html">llvm::BitTracker</a></div><div class="ttdef"><b>Definition:</b> <a href="BitTracker_8h_source.html#l00035">BitTracker.h:35</a></div></div>
<div class="ttc" id="anamespacellvm_1_1SPII_html_a1c7202c6054fef862bbed45957747cdfa36b3dd3b84fde3f8494a9b18af131856"><div class="ttname"><a href="namespacellvm_1_1SPII.html#a1c7202c6054fef862bbed45957747cdfa36b3dd3b84fde3f8494a9b18af131856">llvm::SPII::Store</a></div><div class="ttdeci">@ Store</div><div class="ttdef"><b>Definition:</b> <a href="SparcInstrInfo_8h_source.html#l00033">SparcInstrInfo.h:33</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_aecb93439702247fe5353a9966f7cefcd"><div class="ttname"><a href="classllvm_1_1Value.html#aecb93439702247fe5353a9966f7cefcd">llvm::Value::uses</a></div><div class="ttdeci">iterator_range&lt; use_iterator &gt; uses()</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00376">Value.h:376</a></div></div>
<div class="ttc" id="anamespacefalse_html"><div class="ttname"><a href="namespacefalse.html">false</a></div><div class="ttdef"><b>Definition:</b> <a href="StackSlotColoring_8cpp_source.html#l00141">StackSlotColoring.cpp:141</a></div></div>
<div class="ttc" id="astructllvm_1_1MaybeAlign_html"><div class="ttname"><a href="structllvm_1_1MaybeAlign.html">llvm::MaybeAlign</a></div><div class="ttdoc">This struct is a compact representation of a valid (power of two) or undefined (0) alignment.</div><div class="ttdef"><b>Definition:</b> <a href="Alignment_8h_source.html#l00117">Alignment.h:117</a></div></div>
<div class="ttc" id="aBuiltinGCs_8cpp_html_a7abf5fb4071cb25dbce06dfb5ee3c937"><div class="ttname"><a href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a></div><div class="ttdeci">static GCRegistry::Add&lt; OcamlGC &gt; B(&quot;ocaml&quot;, &quot;ocaml 3.10-compatible GC&quot;)</div></div>
<div class="ttc" id="aclassllvm_1_1BinaryOperator_html_a31bf07f3f61525486633bc1d0bbaf029"><div class="ttname"><a href="classllvm_1_1BinaryOperator.html#a31bf07f3f61525486633bc1d0bbaf029">llvm::BinaryOperator::getOpcode</a></div><div class="ttdeci">BinaryOps getOpcode() const</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00391">InstrTypes.h:391</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a677ac8d99ff3c2d32a95c21de9ed372c"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a677ac8d99ff3c2d32a95c21de9ed372c">llvm::PatternMatch::m_ConstantInt</a></div><div class="ttdeci">class_match&lt; ConstantInt &gt; m_ConstantInt()</div><div class="ttdoc">Match an arbitrary ConstantInt and ignore it.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00147">PatternMatch.h:147</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html"><div class="ttname"><a href="classllvm_1_1Instruction.html">llvm::Instruction</a></div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00041">Instruction.h:41</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a9f382207d841377156d4c7868b66b9a5"><div class="ttname"><a href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">llvm::Type::getScalarSizeInBits</a></div><div class="ttdeci">unsigned getScalarSizeInBits() const LLVM_READONLY</div><div class="ttdoc">If this is a vector type, return the getPrimitiveSizeInBits value for the element type.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00188">Type.cpp:188</a></div></div>
<div class="ttc" id="aclassllvm_1_1DominatorTreeWrapperPass_html"><div class="ttname"><a href="classllvm_1_1DominatorTreeWrapperPass.html">llvm::DominatorTreeWrapperPass</a></div><div class="ttdoc">Legacy analysis pass which computes a DominatorTree.</div><div class="ttdef"><b>Definition:</b> <a href="Dominators_8h_source.html#l00314">Dominators.h:314</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_a217e0207d9cc8e046c2dccbf0e4bb198"><div class="ttname"><a href="classllvm_1_1APInt.html#a217e0207d9cc8e046c2dccbf0e4bb198">llvm::APInt::getZExtValue</a></div><div class="ttdeci">uint64_t getZExtValue() const</div><div class="ttdoc">Get zero extended value.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l01494">APInt.h:1494</a></div></div>
<div class="ttc" id="aclassllvm_1_1raw__ostream_html"><div class="ttname"><a href="classllvm_1_1raw__ostream.html">llvm::raw_ostream</a></div><div class="ttdoc">This class implements an extremely fast bulk output stream that can only output to a stream.</div><div class="ttdef"><b>Definition:</b> <a href="raw__ostream_8h_source.html#l00052">raw_ostream.h:52</a></div></div>
<div class="ttc" id="aclassllvm_1_1LowerMatrixIntrinsicsPass_html_a7b05a9de14294b7a5a7904cc8d5c8e1e"><div class="ttname"><a href="classllvm_1_1LowerMatrixIntrinsicsPass.html#a7b05a9de14294b7a5a7904cc8d5c8e1e">llvm::LowerMatrixIntrinsicsPass::run</a></div><div class="ttdeci">PreservedAnalyses run(Function &amp;F, FunctionAnalysisManager &amp;AM)</div><div class="ttdef"><b>Definition:</b> <a href="LowerMatrixIntrinsics_8cpp_source.html#l02369">LowerMatrixIntrinsics.cpp:2369</a></div></div>
<div class="ttc" id="anamespacellvm_1_1codeview_html_aa8c11d016a2dd473a4cf0ed1da777f5ea67f23a49a4828b272554feea07834f7d"><div class="ttname"><a href="namespacellvm_1_1codeview.html#aa8c11d016a2dd473a4cf0ed1da777f5ea67f23a49a4828b272554feea07834f7d">llvm::codeview::EncodedFramePtrReg::BasePtr</a></div><div class="ttdeci">@ BasePtr</div></div>
<div class="ttc" id="aclassllvm_1_1raw__ostream_html_a520bdf57dfe3e73abb53d482893f0a27"><div class="ttname"><a href="classllvm_1_1raw__ostream.html#a520bdf57dfe3e73abb53d482893f0a27">llvm::raw_ostream::flush</a></div><div class="ttdeci">void flush()</div><div class="ttdef"><b>Definition:</b> <a href="raw__ostream_8h_source.html#l00185">raw_ostream.h:185</a></div></div>
<div class="ttc" id="aclassllvm_1_1UndefValue_html_a4ae5ff22b700a42bcc5d889233721335"><div class="ttname"><a href="classllvm_1_1UndefValue.html#a4ae5ff22b700a42bcc5d889233721335">llvm::UndefValue::get</a></div><div class="ttdeci">static UndefValue * get(Type *T)</div><div class="ttdoc">Static factory methods - Return an 'undef' object of the specified type.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l01740">Constants.cpp:1740</a></div></div>
<div class="ttc" id="aclassllvm_1_1DomTreeUpdater_html"><div class="ttname"><a href="classllvm_1_1DomTreeUpdater.html">llvm::DomTreeUpdater</a></div><div class="ttdef"><b>Definition:</b> <a href="DomTreeUpdater_8h_source.html#l00028">DomTreeUpdater.h:28</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantInt_html_a969709dd49c28865a482d8b870f87c46"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">llvm::ConstantInt::get</a></div><div class="ttdeci">static Constant * get(Type *Ty, uint64_t V, bool IsSigned=false)</div><div class="ttdoc">If Ty is a vector type, return a Constant with a splat of the given value.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00887">Constants.cpp:887</a></div></div>
<div class="ttc" id="aLoopUtils_8h_html"><div class="ttname"><a href="LoopUtils_8h.html">LoopUtils.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_a3b1c5788b85ffa254be0e834edf5cf8f"><div class="ttname"><a href="namespacellvm.html#a3b1c5788b85ffa254be0e834edf5cf8f">llvm::getUnderlyingObject</a></div><div class="ttdeci">const Value * getUnderlyingObject(const Value *V, unsigned MaxLookup=6)</div><div class="ttdoc">This method strips off any GEP address adjustments and pointer casts from the specified value,...</div><div class="ttdef"><b>Definition:</b> <a href="ValueTracking_8cpp_source.html#l04567">ValueTracking.cpp:4567</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html_a7efd1f0c1206d95e4fe01a9b49a57b82"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#a7efd1f0c1206d95e4fe01a9b49a57b82">llvm::SmallVectorImpl::append</a></div><div class="ttdeci">void append(ItTy in_start, ItTy in_end)</div><div class="ttdoc">Add the specified range to the end of the SmallVector.</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00687">SmallVector.h:687</a></div></div>
<div class="ttc" id="aPatternMatch_8h_html"><div class="ttname"><a href="PatternMatch_8h.html">PatternMatch.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfo_html_a8bb3b1ccf19b8c85429b777dfa4a0166a183020fbea95c99db23f6d3594f4c4af"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html#a8bb3b1ccf19b8c85429b777dfa4a0166a183020fbea95c99db23f6d3594f4c4af">llvm::TargetTransformInfo::RGK_FixedWidthVector</a></div><div class="ttdeci">@ RGK_FixedWidthVector</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l00988">TargetTransformInfo.h:988</a></div></div>
<div class="ttc" id="aclassllvm_1_1FixedVectorType_html_af9a870d5df50fe0133a410b7c9114c80"><div class="ttname"><a href="classllvm_1_1FixedVectorType.html#af9a870d5df50fe0133a410b7c9114c80">llvm::FixedVectorType::get</a></div><div class="ttdeci">static FixedVectorType * get(Type *ElementType, unsigned NumElts)</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00686">Type.cpp:686</a></div></div>
<div class="ttc" id="aclassllvm_1_1StoreInst_html_a3b47950858d6ed72efd1010a35b81caa"><div class="ttname"><a href="classllvm_1_1StoreInst.html#a3b47950858d6ed72efd1010a35b81caa">llvm::StoreInst::getAlign</a></div><div class="ttdeci">Align getAlign() const</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00345">Instructions.h:345</a></div></div>
<div class="ttc" id="astructllvm_1_1Align_html"><div class="ttname"><a href="structllvm_1_1Align.html">llvm::Align</a></div><div class="ttdoc">This struct is a compact representation of a valid (non-zero power of two) alignment.</div><div class="ttdef"><b>Definition:</b> <a href="Alignment_8h_source.html#l00039">Alignment.h:39</a></div></div>
<div class="ttc" id="aclassllvm_1_1FastMathFlags_html_a17e649128903d9aec55cf75d3c14c545"><div class="ttname"><a href="classllvm_1_1FastMathFlags.html#a17e649128903d9aec55cf75d3c14c545">llvm::FastMathFlags::setAllowContract</a></div><div class="ttdeci">void setAllowContract(bool B=true)</div><div class="ttdef"><b>Definition:</b> <a href="FMF_8h_source.html#l00092">FMF.h:92</a></div></div>
<div class="ttc" id="aclassllvm_1_1ValueMap_html_a3b82484785487f544dc6ef1c2b6a0ffd"><div class="ttname"><a href="classllvm_1_1ValueMap.html#a3b82484785487f544dc6ef1c2b6a0ffd">llvm::ValueMap::count</a></div><div class="ttdeci">size_type count(const KeyT &amp;Val) const</div><div class="ttdoc">Return 1 if the specified key is in the map, 0 otherwise.</div><div class="ttdef"><b>Definition:</b> <a href="ValueMap_8h_source.html#l00151">ValueMap.h:151</a></div></div>
<div class="ttc" id="anamespacellvm_1_1CallingConv_html_a188c0836f8c3528401f1c236fd93b977"><div class="ttname"><a href="namespacellvm_1_1CallingConv.html#a188c0836f8c3528401f1c236fd93b977">llvm::CallingConv::ID</a></div><div class="ttdeci">unsigned ID</div><div class="ttdoc">LLVM IR allows to use arbitrary numbers as calling convention identifiers.</div><div class="ttdef"><b>Definition:</b> <a href="CallingConv_8h_source.html#l00024">CallingConv.h:24</a></div></div>
<div class="ttc" id="aLowerMatrixIntrinsics_8cpp_html_abf221949fc61d1494af06b50731bdc90"><div class="ttname"><a href="LowerMatrixIntrinsics_8cpp.html#abf221949fc61d1494af06b50731bdc90">MatrixLayoutTy</a></div><div class="ttdeci">MatrixLayoutTy</div><div class="ttdef"><b>Definition:</b> <a href="LowerMatrixIntrinsics_8cpp_source.html#l00075">LowerMatrixIntrinsics.cpp:75</a></div></div>
<div class="ttc" id="aPassSupport_8h_html_a74ce8276b89067e806f67c45a6d92575"><div class="ttname"><a href="PassSupport_8h.html#a74ce8276b89067e806f67c45a6d92575">INITIALIZE_PASS_END</a></div><div class="ttdeci">#define INITIALIZE_PASS_END(passName, arg, name, cfg, analysis)</div><div class="ttdef"><b>Definition:</b> <a href="PassSupport_8h_source.html#l00059">PassSupport.h:59</a></div></div>
<div class="ttc" id="aIR_2CFG_8h_html"><div class="ttname"><a href="IR_2CFG_8h.html">CFG.h</a></div></div>
<div class="ttc" id="aLoopInfo_8h_html"><div class="ttname"><a href="LoopInfo_8h.html">LoopInfo.h</a></div></div>
<div class="ttc" id="aADT_2tmp_8txt_html_a07ed0bfaa124c15897944fe3eaa971ab"><div class="ttname"><a href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a></div><div class="ttdeci">Class for arbitrary precision integers APInt is a functional replacement for common case unsigned integer type like unsigned long or uint64_t</div><div class="ttdef"><b>Definition:</b> <a href="ADT_2tmp_8txt_source.html#l00001">tmp.txt:1</a></div></div>
<div class="ttc" id="anamespacellvm_html_a74cdbd1e4f731e7d7cd83461b8b1de0b"><div class="ttname"><a href="namespacellvm.html#a74cdbd1e4f731e7d7cd83461b8b1de0b">llvm::sort</a></div><div class="ttdeci">void sort(IteratorTy Start, IteratorTy End)</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l01683">STLExtras.h:1683</a></div></div>
<div class="ttc" id="aclassllvm_1_1function__ref_html"><div class="ttname"><a href="classllvm_1_1function__ref.html">llvm::function_ref</a></div><div class="ttdoc">An efficient, type-erasing, non-owning reference to a callable.</div><div class="ttdef"><b>Definition:</b> <a href="STLFunctionalExtras_8h_source.html#l00036">STLFunctionalExtras.h:36</a></div></div>
<div class="ttc" id="aclassllvm_1_1StringRef_html_a2dc80c585ad5882da8cae7b5968f7e74"><div class="ttname"><a href="classllvm_1_1StringRef.html#a2dc80c585ad5882da8cae7b5968f7e74">llvm::StringRef::empty</a></div><div class="ttdeci">constexpr bool empty() const</div><div class="ttdoc">empty - Check if the string is empty.</div><div class="ttdef"><b>Definition:</b> <a href="StringRef_8h_source.html#l00134">StringRef.h:134</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSetImplBase_html_af8a50544090e81ac83601aff8f4b0142"><div class="ttname"><a href="classllvm_1_1SmallPtrSetImplBase.html#af8a50544090e81ac83601aff8f4b0142">llvm::SmallPtrSetImplBase::empty</a></div><div class="ttdeci">bool empty() const</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00092">SmallPtrSet.h:92</a></div></div>
<div class="ttc" id="aclassllvm_1_1VectorType_html"><div class="ttname"><a href="classllvm_1_1VectorType.html">llvm::VectorType</a></div><div class="ttdoc">Base class of all SIMD vector types.</div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00389">DerivedTypes.h:389</a></div></div>
<div class="ttc" id="aVectorUtils_8h_html"><div class="ttname"><a href="VectorUtils_8h.html">VectorUtils.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1cl_1_1opt_html"><div class="ttname"><a href="classllvm_1_1cl_1_1opt.html">llvm::cl::opt&lt; bool &gt;</a></div></div>
<div class="ttc" id="aclassllvm_1_1StoreInst_html_ae3098a2ed52ddc6b853a3006ea646b7e"><div class="ttname"><a href="classllvm_1_1StoreInst.html#ae3098a2ed52ddc6b853a3006ea646b7e">llvm::StoreInst::isVolatile</a></div><div class="ttdeci">bool isVolatile() const</div><div class="ttdoc">Return true if this is a store to a volatile memory location.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00337">Instructions.h:337</a></div></div>
<div class="ttc" id="aclassllvm_1_1StoreInst_html"><div class="ttname"><a href="classllvm_1_1StoreInst.html">llvm::StoreInst</a></div><div class="ttdoc">An instruction for storing to memory.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00301">Instructions.h:301</a></div></div>
<div class="ttc" id="anamespacellvm_1_1cl_html_a8fa743aa76b6902028f8a643dfb87171"><div class="ttname"><a href="namespacellvm_1_1cl.html#a8fa743aa76b6902028f8a643dfb87171">llvm::cl::values</a></div><div class="ttdeci">ValuesClass values(OptsTy... Options)</div><div class="ttdoc">Helper to build a ValuesClass by forwarding a variable number of arguments as an initializer list to ...</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00703">CommandLine.h:703</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_ae6b978645b8ac72d1a35e1298ffdd4f0"><div class="ttname"><a href="classllvm_1_1Instruction.html#ae6b978645b8ac72d1a35e1298ffdd4f0">llvm::Instruction::eraseFromParent</a></div><div class="ttdeci">SymbolTableList&lt; Instruction &gt;::iterator eraseFromParent()</div><div class="ttdoc">This method unlinks 'this' from the containing basic block and deletes it.</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8cpp_source.html#l00082">Instruction.cpp:82</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AMDGPU_1_1Hwreg_html_a6110fc30bc7311a6cf99814530362e21"><div class="ttname"><a href="namespacellvm_1_1AMDGPU_1_1Hwreg.html#a6110fc30bc7311a6cf99814530362e21">llvm::AMDGPU::Hwreg::Offset</a></div><div class="ttdeci">Offset</div><div class="ttdef"><b>Definition:</b> <a href="SIDefines_8h_source.html#l00432">SIDefines.h:432</a></div></div>
<div class="ttc" id="aclassllvm_1_1LowerMatrixIntrinsicsPass_html_ad15569be98a2d12c836d4e4c531fe49d"><div class="ttname"><a href="classllvm_1_1LowerMatrixIntrinsicsPass.html#ad15569be98a2d12c836d4e4c531fe49d">llvm::LowerMatrixIntrinsicsPass::printPipeline</a></div><div class="ttdeci">void printPipeline(raw_ostream &amp;OS, function_ref&lt; StringRef(StringRef)&gt; MapClassName2PassName)</div><div class="ttdef"><b>Definition:</b> <a href="LowerMatrixIntrinsics_8cpp_source.html#l02396">LowerMatrixIntrinsics.cpp:2396</a></div></div>
<div class="ttc" id="aclassllvm_1_1MapVector_html_a6b0c3e15c351ba9682837c29b0a141b6"><div class="ttname"><a href="classllvm_1_1MapVector.html#a6b0c3e15c351ba9682837c29b0a141b6">llvm::MapVector::find</a></div><div class="ttdeci">iterator find(const KeyT &amp;Key)</div><div class="ttdef"><b>Definition:</b> <a href="MapVector_8h_source.html#l00148">MapVector.h:148</a></div></div>
<div class="ttc" id="anamespacellvm_html_ac2db21413768e904d56a02c26184823d"><div class="ttname"><a href="namespacellvm.html#ac2db21413768e904d56a02c26184823d">llvm::getPointerOperand</a></div><div class="ttdeci">const Value * getPointerOperand(const Value *V)</div><div class="ttdoc">A helper function that returns the pointer operand of a load, store or GEP instruction.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l05377">Instructions.h:5377</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfoWrapperPass_html"><div class="ttname"><a href="classllvm_1_1TargetTransformInfoWrapperPass.html">llvm::TargetTransformInfoWrapperPass</a></div><div class="ttdoc">Wrapper pass for TargetTransformInfo.</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l02682">TargetTransformInfo.h:2682</a></div></div>
<div class="ttc" id="aBuiltinGCs_8cpp_html_a9bf617fd3367180fb96cebccfaae8dfa"><div class="ttname"><a href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a></div><div class="ttdeci">static GCRegistry::Add&lt; StatepointGC &gt; D(&quot;statepoint-example&quot;, &quot;an example strategy for statepoint&quot;)</div></div>
<div class="ttc" id="aExpandReductions_8cpp_html_a4bfc835c142e9a1d698379da76392e9f"><div class="ttname"><a href="ExpandReductions_8cpp.html#a4bfc835c142e9a1d698379da76392e9f">intrinsics</a></div><div class="ttdeci">expand Expand reduction intrinsics</div><div class="ttdef"><b>Definition:</b> <a href="ExpandReductions_8cpp_source.html#l00198">ExpandReductions.cpp:198</a></div></div>
<div class="ttc" id="anamespacellvm_1_1ARM__MB_html_ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2"><div class="ttname"><a href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">llvm::ARM_MB::ST</a></div><div class="ttdeci">@ ST</div><div class="ttdef"><b>Definition:</b> <a href="MCTargetDesc_2ARMBaseInfo_8h_source.html#l00073">ARMBaseInfo.h:73</a></div></div>
<div class="ttc" id="aSVEIntrinsicOpts_8cpp_html_a2bb87eb1bcbc74783a83ae945eb8fa36"><div class="ttname"><a href="SVEIntrinsicOpts_8cpp.html#a2bb87eb1bcbc74783a83ae945eb8fa36">INITIALIZE_PASS_DEPENDENCY</a></div><div class="ttdeci">INITIALIZE_PASS_DEPENDENCY(DominatorTreeWrapperPass)</div></div>
<div class="ttc" id="aclassllvm_1_1PreservedAnalyses_html_ad966bea18aa62ffb9e040509adc7c99f"><div class="ttname"><a href="classllvm_1_1PreservedAnalyses.html#ad966bea18aa62ffb9e040509adc7c99f">llvm::PreservedAnalyses::preserve</a></div><div class="ttdeci">void preserve()</div><div class="ttdoc">Mark an analysis as preserved.</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00173">PassManager.h:173</a></div></div>
<div class="ttc" id="anamespacellvm_html_a55c9054d63d1c6a39e9c09ba13a482fa"><div class="ttname"><a href="namespacellvm.html#a55c9054d63d1c6a39e9c09ba13a482fa">llvm::addStringMetadataToLoop</a></div><div class="ttdeci">void addStringMetadataToLoop(Loop *TheLoop, const char *MDString, unsigned V=0)</div><div class="ttdoc">Set input string into loop metadata by keeping other values intact.</div><div class="ttdef"><b>Definition:</b> <a href="LoopUtils_8cpp_source.html#l00214">LoopUtils.cpp:214</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfo_html_a623cced59353f83cc5eaba4068c57694"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html#a623cced59353f83cc5eaba4068c57694">llvm::TargetTransformInfo::getRegisterClassForType</a></div><div class="ttdeci">unsigned getRegisterClassForType(bool Vector, Type *Ty=nullptr) const</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8cpp_source.html#l00648">TargetTransformInfo.cpp:648</a></div></div>
<div class="ttc" id="anamespacellvm_1_1omp_html_a8c6f525466cc262e00c409c31f9a4272aa6156ea9d66fef24e87e841fbabf7cca"><div class="ttname"><a href="namespacellvm_1_1omp.html#a8c6f525466cc262e00c409c31f9a4272aa6156ea9d66fef24e87e841fbabf7cca">llvm::omp::AddressSpace::Shared</a></div><div class="ttdeci">@ Shared</div></div>
<div class="ttc" id="aLowerMatrixIntrinsics_8cpp_html_a93a97c876de2b13925eedd660ac411f9"><div class="ttname"><a href="LowerMatrixIntrinsics_8cpp.html#a93a97c876de2b13925eedd660ac411f9">m_AnyAdd</a></div><div class="ttdeci">auto m_AnyAdd(const LTy &amp;L, const RTy &amp;R)</div><div class="ttdoc">Match any add operation (fp or integer).</div><div class="ttdef"><b>Definition:</b> <a href="LowerMatrixIntrinsics_8cpp_source.html#l00125">LowerMatrixIntrinsics.cpp:125</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseMap_html"><div class="ttname"><a href="classllvm_1_1DenseMap.html">llvm::DenseMap</a></div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00714">DenseMap.h:714</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_ab00c67eb2b92ca056ceefc07c67f46f0"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#ab00c67eb2b92ca056ceefc07c67f46f0">llvm::PatternMatch::m_Store</a></div><div class="ttdeci">TwoOps_match&lt; ValueOpTy, PointerOpTy, Instruction::Store &gt; m_Store(const ValueOpTy &amp;ValueOp, const PointerOpTy &amp;PointerOp)</div><div class="ttdoc">Matches StoreInst.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01570">PatternMatch.h:1570</a></div></div>
<div class="ttc" id="anamespacellvm_1_1codeview_html_ad37302702bbcf0028581d2655698c27aa5fb63579fc981698f97d55bfecb213ea"><div class="ttname"><a href="namespacellvm_1_1codeview.html#ad37302702bbcf0028581d2655698c27aa5fb63579fc981698f97d55bfecb213ea">llvm::codeview::FrameCookieKind::Copy</a></div><div class="ttdeci">@ Copy</div></div>
<div class="ttc" id="aclassllvm_1_1ValueMap_html_ae6be28efa794d11d2b1395fa77d7ebef"><div class="ttname"><a href="classllvm_1_1ValueMap.html#ae6be28efa794d11d2b1395fa77d7ebef">llvm::ValueMap::erase</a></div><div class="ttdeci">bool erase(const KeyT &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="ValueMap_8h_source.html#l00190">ValueMap.h:190</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopInfoBase_html_a7a7c8e0e4f836c13c015b62e18f386bd"><div class="ttname"><a href="classllvm_1_1LoopInfoBase.html#a7a7c8e0e4f836c13c015b62e18f386bd">llvm::LoopInfoBase::getLoopFor</a></div><div class="ttdeci">LoopT * getLoopFor(const BlockT *BB) const</div><div class="ttdoc">Return the inner most loop that BB lives in.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00992">LoopInfo.h:992</a></div></div>
<div class="ttc" id="aMD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00058">MD5.cpp:58</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AArch64PACKey_html_abf4394f452bde3f544999858d71e4b46a438dbcc76b79fb10acb447ec5d141287"><div class="ttname"><a href="namespacellvm_1_1AArch64PACKey.html#abf4394f452bde3f544999858d71e4b46a438dbcc76b79fb10acb447ec5d141287">llvm::AArch64PACKey::IB</a></div><div class="ttdeci">@ IB</div><div class="ttdef"><b>Definition:</b> <a href="AArch64BaseInfo_8h_source.html#l00792">AArch64BaseInfo.h:792</a></div></div>
<div class="ttc" id="anamespacellvm_1_1cl_html_a10a041239ae1870cfcc064bfaa79fb65"><div class="ttname"><a href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">llvm::cl::init</a></div><div class="ttdeci">initializer&lt; Ty &gt; init(const Ty &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00445">CommandLine.h:445</a></div></div>
<div class="ttc" id="anamespacellvm_html_a8154638df88e4eaa568b67b23d463dac"><div class="ttname"><a href="namespacellvm.html#a8154638df88e4eaa568b67b23d463dac">llvm::make_early_inc_range</a></div><div class="ttdeci">iterator_range&lt; early_inc_iterator_impl&lt; detail::IterOfRange&lt; RangeT &gt; &gt; &gt; make_early_inc_range(RangeT &amp;&amp;Range)</div><div class="ttdoc">Make a range that does early increment to allow mutation of the underlying range without disrupting i...</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l00721">STLExtras.h:721</a></div></div>
<div class="ttc" id="anamespacellvm_html_a4288169d91ab0f0f01405115fd2931a7"><div class="ttname"><a href="namespacellvm.html#a4288169d91ab0f0f01405115fd2931a7">llvm::concatenateVectors</a></div><div class="ttdeci">Value * concatenateVectors(IRBuilderBase &amp;Builder, ArrayRef&lt; Value * &gt; Vecs)</div><div class="ttdoc">Concatenate a list of vectors.</div><div class="ttdef"><b>Definition:</b> <a href="VectorUtils_8cpp_source.html#l01038">VectorUtils.cpp:1038</a></div></div>
<div class="ttc" id="aclassllvm_1_1details_1_1FixedOrScalableQuantity_html_a33880aaca0ad05e5f1557f079305bde5"><div class="ttname"><a href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#a33880aaca0ad05e5f1557f079305bde5">llvm::details::FixedOrScalableQuantity::getFixedValue</a></div><div class="ttdeci">constexpr ScalarTy getFixedValue() const</div><div class="ttdef"><b>Definition:</b> <a href="TypeSize_8h_source.html#l00182">TypeSize.h:182</a></div></div>
<div class="ttc" id="aIRBuilder_8h_html"><div class="ttname"><a href="IRBuilder_8h.html">IRBuilder.h</a></div></div>
<div class="ttc" id="aSILowerControlFlow_8cpp_html_a4868c5d81c5ccc98c47aeab6244346a0"><div class="ttname"><a href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a></div><div class="ttdeci">assert(ImpDefSCC.getReg()==AMDGPU::SCC &amp;&amp;ImpDefSCC.isDef())</div></div>
<div class="ttc" id="aLowerMatrixIntrinsics_8cpp_html_a112115ac448f82f5861496f7282969b3"><div class="ttname"><a href="LowerMatrixIntrinsics_8cpp.html#a112115ac448f82f5861496f7282969b3">FuseMatrix</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; FuseMatrix(&quot;fuse-matrix&quot;, cl::init(true), cl::Hidden, cl::desc(&quot;Enable/disable fusing matrix instructions.&quot;))</div></div>
<div class="ttc" id="aclassllvm_1_1OptimizationRemarkEmitter_html_aae6a98aea85aa3af87357cc5448db499"><div class="ttname"><a href="classllvm_1_1OptimizationRemarkEmitter.html#aae6a98aea85aa3af87357cc5448db499">llvm::OptimizationRemarkEmitter::emit</a></div><div class="ttdeci">void emit(DiagnosticInfoOptimizationBase &amp;OptDiag)</div><div class="ttdoc">Output the remark via the diagnostic handler and to the optimization record file.</div><div class="ttdef"><b>Definition:</b> <a href="OptimizationRemarkEmitter_8cpp_source.html#l00079">OptimizationRemarkEmitter.cpp:79</a></div></div>
<div class="ttc" id="aclassllvm_1_1ValueMap_html_a620815bfbf153caa776f5e207bd8e3c0"><div class="ttname"><a href="classllvm_1_1ValueMap.html#a620815bfbf153caa776f5e207bd8e3c0">llvm::ValueMap::insert</a></div><div class="ttdeci">std::pair&lt; iterator, bool &gt; insert(const std::pair&lt; KeyT, ValueT &gt; &amp;KV)</div><div class="ttdef"><b>Definition:</b> <a href="ValueMap_8h_source.html#l00172">ValueMap.h:172</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a9a167f91db810097d281b1ed627f4575"><div class="ttname"><a href="classllvm_1_1Instruction.html#a9a167f91db810097d281b1ed627f4575">llvm::Instruction::getFastMathFlags</a></div><div class="ttdeci">FastMathFlags getFastMathFlags() const LLVM_READONLY</div><div class="ttdoc">Convenience function for getting all the fast-math flags, which must be an operator which supports th...</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8cpp_source.html#l00339">Instruction.cpp:339</a></div></div>
<div class="ttc" id="aTargetLibraryInfo_8cpp_html_aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053"><div class="ttname"><a href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a></div><div class="ttdeci">@ Ptr</div><div class="ttdef"><b>Definition:</b> <a href="TargetLibraryInfo_8cpp_source.html#l00062">TargetLibraryInfo.cpp:62</a></div></div>
<div class="ttc" id="anamespacellvm_html_aa0d69e81725c10fa5407f0bf34462068"><div class="ttname"><a href="namespacellvm.html#aa0d69e81725c10fa5407f0bf34462068">llvm::TTI</a></div><div class="ttdeci">TargetTransformInfo TTI</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l00191">TargetTransformInfo.h:191</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_ae8eaa0b4eeac52a2b2282cb1bfd981ae"><div class="ttname"><a href="classllvm_1_1Type.html#ae8eaa0b4eeac52a2b2282cb1bfd981ae">llvm::Type::isVoidTy</a></div><div class="ttdeci">bool isVoidTy() const</div><div class="ttdoc">Return true if this is 'void'.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00140">Type.h:140</a></div></div>
<div class="ttc" id="aclassllvm_1_1ArrayType_html_adf411edc4f135b570ab218079474ce77"><div class="ttname"><a href="classllvm_1_1ArrayType.html#adf411edc4f135b570ab218079474ce77">llvm::ArrayType::get</a></div><div class="ttdeci">static ArrayType * get(Type *ElementType, uint64_t NumElements)</div><div class="ttdoc">This static method is the primary way to construct an ArrayType.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00640">Type.cpp:640</a></div></div>
<div class="ttc" id="aLowerMatrixIntrinsics_8cpp_html_abf221949fc61d1494af06b50731bdc90af695e73139b1c1d06d77655104370f00"><div class="ttname"><a href="LowerMatrixIntrinsics_8cpp.html#abf221949fc61d1494af06b50731bdc90af695e73139b1c1d06d77655104370f00">MatrixLayoutTy::ColumnMajor</a></div><div class="ttdeci">@ ColumnMajor</div></div>
<div class="ttc" id="aLowerMatrixIntrinsics_8cpp_html_a2bae6e2e8d26e2e99b77d7bf9efbd5d1"><div class="ttname"><a href="LowerMatrixIntrinsics_8cpp.html#a2bae6e2e8d26e2e99b77d7bf9efbd5d1">PrintAfterTransposeOpt</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; PrintAfterTransposeOpt(&quot;matrix-print-after-transpose-opt&quot;, cl::init(false))</div></div>
<div class="ttc" id="aLowerMatrixIntrinsics_8h_html"><div class="ttname"><a href="LowerMatrixIntrinsics_8h.html">LowerMatrixIntrinsics.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallBase_html_ac0f11b96f81b2769dd23d028e3189075"><div class="ttname"><a href="classllvm_1_1CallBase.html#ac0f11b96f81b2769dd23d028e3189075">llvm::CallBase::arg_end</a></div><div class="ttdeci">User::op_iterator arg_end()</div><div class="ttdoc">Return the iterator pointing to the end of the argument list.</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l01332">InstrTypes.h:1332</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSetImpl_html_a1f475b0df44ebd7169e720fa1bf9169e"><div class="ttname"><a href="classllvm_1_1SmallPtrSetImpl.html#a1f475b0df44ebd7169e720fa1bf9169e">llvm::SmallPtrSetImpl::count</a></div><div class="ttdeci">size_type count(ConstPtrType Ptr) const</div><div class="ttdoc">count - Return 1 if the specified pointer is in the set, 0 otherwise.</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00383">SmallPtrSet.h:383</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallSet_html_a75a2d2ad3b3dce6702750d570ee8f343"><div class="ttname"><a href="classllvm_1_1SmallSet.html#a75a2d2ad3b3dce6702750d570ee8f343">llvm::SmallSet::erase</a></div><div class="ttdeci">bool erase(const T &amp;V)</div><div class="ttdef"><b>Definition:</b> <a href="SmallSet_8h_source.html#l00205">SmallSet.h:205</a></div></div>
<div class="ttc" id="aAssumeBundleBuilder_8cpp_html_afb136e0532bcaed86521b462e6538d62"><div class="ttname"><a href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a></div><div class="ttdeci">assume Assume Builder</div><div class="ttdef"><b>Definition:</b> <a href="AssumeBundleBuilder_8cpp_source.html#l00651">AssumeBundleBuilder.cpp:651</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a24bca8838396aa81b87de8e7ac774b19"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">llvm::PatternMatch::m_Value</a></div><div class="ttdeci">class_match&lt; Value &gt; m_Value()</div><div class="ttdoc">Match an arbitrary value and ignore it.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00076">PatternMatch.h:76</a></div></div>
<div class="ttc" id="anamespacellvm_html_a4d812a2dd18aa186c164447e20e348e7"><div class="ttname"><a href="namespacellvm.html#a4d812a2dd18aa186c164447e20e348e7">llvm::operator==</a></div><div class="ttdeci">bool operator==(const AddressRangeValuePair &amp;LHS, const AddressRangeValuePair &amp;RHS)</div><div class="ttdef"><b>Definition:</b> <a href="AddressRanges_8h_source.html#l00153">AddressRanges.h:153</a></div></div>
<div class="ttc" id="aclassllvm_1_1SetVector_html_a72d928b7fc2c5f2d56c6ac0265fd9c6e"><div class="ttname"><a href="classllvm_1_1SetVector.html#a72d928b7fc2c5f2d56c6ac0265fd9c6e">llvm::SetVector::insert</a></div><div class="ttdeci">bool insert(const value_type &amp;X)</div><div class="ttdoc">Insert a new element into the SetVector.</div><div class="ttdef"><b>Definition:</b> <a href="SetVector_8h_source.html#l00141">SetVector.h:141</a></div></div>
<div class="ttc" id="aM68kELFObjectWriter_8cpp_html_ae4a8bc3879d2282eefd72b16b12c2a37"><div class="ttname"><a href="M68kELFObjectWriter_8cpp.html#ae4a8bc3879d2282eefd72b16b12c2a37">getType</a></div><div class="ttdeci">static M68kRelType getType(unsigned Kind, MCSymbolRefExpr::VariantKind &amp;Modifier, bool &amp;IsPCRel)</div><div class="ttdef"><b>Definition:</b> <a href="M68kELFObjectWriter_8cpp_source.html#l00048">M68kELFObjectWriter.cpp:48</a></div></div>
<div class="ttc" id="anamespacellvm_html_a10f3d955592ae2bc745f57e5b48ae115"><div class="ttname"><a href="namespacellvm.html#a10f3d955592ae2bc745f57e5b48ae115">llvm::size</a></div><div class="ttdeci">auto size(R &amp;&amp;Range, std::enable_if_t&lt; std::is_base_of&lt; std::random_access_iterator_tag, typename std::iterator_traits&lt; decltype(Range.begin())&gt;::iterator_category &gt;::value, void &gt; *=nullptr)</div><div class="ttdoc">Get the size of a range.</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l01716">STLExtras.h:1716</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html_a4d0a7baab8d078065b2de10e3460892a"><div class="ttname"><a href="classllvm_1_1Function.html#a4d0a7baab8d078065b2de10e3460892a">llvm::Function::getIntrinsicID</a></div><div class="ttdeci">Intrinsic::ID getIntrinsicID() const LLVM_READONLY</div><div class="ttdoc">getIntrinsicID - This method returns the ID number of the specified function, or Intrinsic::not_intri...</div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00204">Function.h:204</a></div></div>
<div class="ttc" id="aclassllvm_1_1ArrayRef_html"><div class="ttname"><a href="classllvm_1_1ArrayRef.html">llvm::ArrayRef</a></div><div class="ttdoc">ArrayRef - Represent a constant reference to an array (0 or more elements consecutively in memory),...</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00033">APInt.h:33</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopInfo_html"><div class="ttname"><a href="classllvm_1_1LoopInfo.html">llvm::LoopInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l01108">LoopInfo.h:1108</a></div></div>
<div class="ttc" id="aclassllvm_1_1BinaryOperator_html"><div class="ttname"><a href="classllvm_1_1BinaryOperator.html">llvm::BinaryOperator</a></div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00187">InstrTypes.h:187</a></div></div>
<div class="ttc" id="aclassllvm_1_1OptimizationRemarkEmitter_html"><div class="ttname"><a href="classllvm_1_1OptimizationRemarkEmitter.html">llvm::OptimizationRemarkEmitter</a></div><div class="ttdoc">The optimization diagnostic interface.</div><div class="ttdef"><b>Definition:</b> <a href="OptimizationRemarkEmitter_8h_source.html#l00033">OptimizationRemarkEmitter.h:33</a></div></div>
<div class="ttc" id="aLiveRegMatrix_8cpp_html_a8989acb71bd355e02bcf3a930b5e54ea"><div class="ttname"><a href="LiveRegMatrix_8cpp.html#a8989acb71bd355e02bcf3a930b5e54ea">Matrix</a></div><div class="ttdeci">Live Register Matrix</div><div class="ttdef"><b>Definition:</b> <a href="LiveRegMatrix_8cpp_source.html#l00044">LiveRegMatrix.cpp:44</a></div></div>
<div class="ttc" id="anamespacellvm_html_a57f2ca0e57f4f7b13f56f9aa16af3e0d"><div class="ttname"><a href="namespacellvm.html#a57f2ca0e57f4f7b13f56f9aa16af3e0d">llvm::min</a></div><div class="ttdeci">Expected&lt; ExpressionValue &gt; min(const ExpressionValue &amp;Lhs, const ExpressionValue &amp;Rhs)</div><div class="ttdef"><b>Definition:</b> <a href="FileCheck_8cpp_source.html#l00357">FileCheck.cpp:357</a></div></div>
<div class="ttc" id="aclassllvm_1_1MapVector_html_a9318649185cfc66ba4b4eb66d5968e00"><div class="ttname"><a href="classllvm_1_1MapVector.html#a9318649185cfc66ba4b4eb66d5968e00">llvm::MapVector::insert</a></div><div class="ttdeci">std::pair&lt; iterator, bool &gt; insert(const std::pair&lt; KeyT, ValueT &gt; &amp;KV)</div><div class="ttdef"><b>Definition:</b> <a href="MapVector_8h_source.html#l00118">MapVector.h:118</a></div></div>
<div class="ttc" id="aX86PartialReduction_8cpp_html_ae0f503db91504a3f3440ab81260e4134"><div class="ttname"><a href="X86PartialReduction_8cpp.html#ae0f503db91504a3f3440ab81260e4134">Mul</a></div><div class="ttdeci">BinaryOperator * Mul</div><div class="ttdef"><b>Definition:</b> <a href="X86PartialReduction_8cpp_source.html#l00070">X86PartialReduction.cpp:70</a></div></div>
<div class="ttc" id="anamespacellvm_html_a61d13d6824ec46c31260a4fd0997eda0"><div class="ttname"><a href="namespacellvm.html#a61d13d6824ec46c31260a4fd0997eda0">llvm::any_of</a></div><div class="ttdeci">bool any_of(R &amp;&amp;range, UnaryPredicate P)</div><div class="ttdoc">Provide wrappers to std::any_of which take ranges instead of having to pass begin/end explicitly.</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l01742">STLExtras.h:1742</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallBase_html_a7713a45c8983df00c3975444b94e69ae"><div class="ttname"><a href="classllvm_1_1CallBase.html#a7713a45c8983df00c3975444b94e69ae">llvm::CallBase::getParamAlign</a></div><div class="ttdeci">MaybeAlign getParamAlign(unsigned ArgNo) const</div><div class="ttdoc">Extract the alignment for a call or parameter (0=unknown).</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l01752">InstrTypes.h:1752</a></div></div>
<div class="ttc" id="aDataLayout_8h_html"><div class="ttname"><a href="DataLayout_8h.html">DataLayout.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisUsage_html_af11a6ebf7ab3c388234cb6d5378439a3"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html#af11a6ebf7ab3c388234cb6d5378439a3">llvm::AnalysisUsage::setPreservesCFG</a></div><div class="ttdeci">void setPreservesCFG()</div><div class="ttdoc">This function should be called by the pass, iff they do not:</div><div class="ttdef"><b>Definition:</b> <a href="Pass_8cpp_source.html#l00265">Pass.cpp:265</a></div></div>
<div class="ttc" id="aclassllvm_1_1StringRef_html"><div class="ttname"><a href="classllvm_1_1StringRef.html">llvm::StringRef</a></div><div class="ttdoc">StringRef - Represent a constant reference to a string, i.e.</div><div class="ttdef"><b>Definition:</b> <a href="StringRef_8h_source.html#l00050">StringRef.h:50</a></div></div>
<div class="ttc" id="aSupport_2ErrorHandling_8h_html_ace243f5c25697a1107cce46626b3dc94"><div class="ttname"><a href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a></div><div class="ttdeci">#define llvm_unreachable(msg)</div><div class="ttdoc">Marks that the current location is not supposed to be reachable.</div><div class="ttdef"><b>Definition:</b> <a href="Support_2ErrorHandling_8h_source.html#l00143">ErrorHandling.h:143</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_a6393a2d4fe7e10b28a0dcc35f881567b"><div class="ttname"><a href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">llvm::Value::getType</a></div><div class="ttdeci">Type * getType() const</div><div class="ttdoc">All values are typed, get the type of this value.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00255">Value.h:255</a></div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisUsage_html_a884f90190bca4bd354f2d5c91c264028"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html#a884f90190bca4bd354f2d5c91c264028">llvm::AnalysisUsage::addPreserved</a></div><div class="ttdeci">AnalysisUsage &amp; addPreserved()</div><div class="ttdoc">Add the specified Pass class to the set of analyses preserved by this pass.</div><div class="ttdef"><b>Definition:</b> <a href="PassAnalysisSupport_8h_source.html#l00098">PassAnalysisSupport.h:98</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_a3ab5fc45117b450e8bb04e564cb6e5f2"><div class="ttname"><a href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">llvm::Value::replaceAllUsesWith</a></div><div class="ttdeci">void replaceAllUsesWith(Value *V)</div><div class="ttdoc">Change all uses of this to point to a new Value.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00532">Value.cpp:532</a></div></div>
<div class="ttc" id="aBasicAliasAnalysis_8cpp_html_a2675de1d8479c7b00387979714da43f7"><div class="ttname"><a href="BasicAliasAnalysis_8cpp.html#a2675de1d8479c7b00387979714da43f7">getParent</a></div><div class="ttdeci">static const Function * getParent(const Value *V)</div><div class="ttdef"><b>Definition:</b> <a href="BasicAliasAnalysis_8cpp_source.html#l00806">BasicAliasAnalysis.cpp:806</a></div></div>
<div class="ttc" id="anamespacellvm_1_1ms__demangle_html_a851a17f7dc73f9988807242926dcc645a03c2e7e41ffc181a4e84080b4710e81e"><div class="ttname"><a href="namespacellvm_1_1ms__demangle.html#a851a17f7dc73f9988807242926dcc645a03c2e7e41ffc181a4e84080b4710e81e">llvm::ms_demangle::IntrinsicFunctionKind::New</a></div><div class="ttdeci">@ New</div></div>
<div class="ttc" id="aAArch64SLSHardening_8cpp_html_ad467c4ab9119043f9b7750ab986be61a"><div class="ttname"><a href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a></div><div class="ttdeci">MachineBasicBlock MachineBasicBlock::iterator DebugLoc DL</div><div class="ttdef"><b>Definition:</b> <a href="AArch64SLSHardening_8cpp_source.html#l00076">AArch64SLSHardening.cpp:76</a></div></div>
<div class="ttc" id="aCommandLine_8h_html_a187fd767976b311c09dff5e05ac0c1bc"><div class="ttname"><a href="CommandLine_8h.html#a187fd767976b311c09dff5e05ac0c1bc">clEnumValN</a></div><div class="ttdeci">#define clEnumValN(ENUMVAL, FLAGNAME, DESC)</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00678">CommandLine.h:678</a></div></div>
<div class="ttc" id="aclassllvm_1_1MatrixBuilder_html"><div class="ttname"><a href="classllvm_1_1MatrixBuilder.html">llvm::MatrixBuilder</a></div><div class="ttdef"><b>Definition:</b> <a href="MatrixBuilder_8h_source.html#l00033">MatrixBuilder.h:33</a></div></div>
<div class="ttc" id="alib_2Target_2ARM_2README_8txt_html_a1b45f45820a60c09244a87eb59824aec"><div class="ttname"><a href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a></div><div class="ttdeci">add sub stmia L5 ldr r0 bl L_printf $stub Instead of a and a wouldn t it be better to do three moves *Return an aggregate type is even return S</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2ARM_2README_8txt_source.html#l00210">README.txt:210</a></div></div>
<div class="ttc" id="aLowerMatrixIntrinsics_8cpp_html_aa67d2b6d80defcba375c1f2961b67c0b"><div class="ttname"><a href="LowerMatrixIntrinsics_8cpp.html#aa67d2b6d80defcba375c1f2961b67c0b">pass_name_minimal</a></div><div class="ttdeci">static const char pass_name_minimal[]</div><div class="ttdef"><b>Definition:</b> <a href="LowerMatrixIntrinsics_8cpp_source.html#l02484">LowerMatrixIntrinsics.cpp:2484</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfo_html_aae0e8ca52658f54e5cc6214eb1a291ef"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html#aae0e8ca52658f54e5cc6214eb1a291ef">llvm::TargetTransformInfo::getNumberOfRegisters</a></div><div class="ttdeci">unsigned getNumberOfRegisters(unsigned ClassID) const</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8cpp_source.html#l00644">TargetTransformInfo.cpp:644</a></div></div>
<div class="ttc" id="anamespacellvm_1_1ifs_html_adfe04e1a9cc096fb571e8372debaa67ea00d0b4f2d7dcdaaef835b97cf5d1e0df"><div class="ttname"><a href="namespacellvm_1_1ifs.html#adfe04e1a9cc096fb571e8372debaa67ea00d0b4f2d7dcdaaef835b97cf5d1e0df">llvm::ifs::IFSSymbolType::Func</a></div><div class="ttdeci">@ Func</div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_adb5c319f5905c1d3ca9eb5df546388c5"><div class="ttname"><a href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">llvm::Value::getName</a></div><div class="ttdeci">StringRef getName() const</div><div class="ttdoc">Return a constant reference to the value's name.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00308">Value.cpp:308</a></div></div>
<div class="ttc" id="aclassllvm_1_1ValueMap_html"><div class="ttname"><a href="classllvm_1_1ValueMap.html">llvm::ValueMap</a></div><div class="ttdoc">See the file comment.</div><div class="ttdef"><b>Definition:</b> <a href="ValueMap_8h_source.html#l00084">ValueMap.h:84</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoadInst_html"><div class="ttname"><a href="classllvm_1_1LoadInst.html">llvm::LoadInst</a></div><div class="ttdoc">An instruction for reading from memory.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00177">Instructions.h:177</a></div></div>
<div class="ttc" id="aIVUsers_8cpp_html_ac2f338c3f467b3d09613e190d73044a5"><div class="ttname"><a href="IVUsers_8cpp.html#ac2f338c3f467b3d09613e190d73044a5">users</a></div><div class="ttdeci">iv users</div><div class="ttdef"><b>Definition:</b> <a href="IVUsers_8cpp_source.html#l00048">IVUsers.cpp:48</a></div></div>
<div class="ttc" id="aSampleProfWriter_8cpp_html_ac5f3689931c7238da06ba00cf1002c62"><div class="ttname"><a href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a></div><div class="ttdeci">raw_pwrite_stream &amp; OS</div><div class="ttdef"><b>Definition:</b> <a href="SampleProfWriter_8cpp_source.html#l00053">SampleProfWriter.cpp:53</a></div></div>
<div class="ttc" id="anamespacellvm_1_1Intrinsic_html_aefa39f6b622360ce4e947feb9f671b73"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#aefa39f6b622360ce4e947feb9f671b73">llvm::Intrinsic::getDeclaration</a></div><div class="ttdeci">Function * getDeclaration(Module *M, ID id, ArrayRef&lt; Type * &gt; Tys=std::nullopt)</div><div class="ttdoc">Create or insert an LLVM Function declaration for an intrinsic, and return it.</div><div class="ttdef"><b>Definition:</b> <a href="Function_8cpp_source.html#l01502">Function.cpp:1502</a></div></div>
<div class="ttc" id="aclassllvm_1_1MapVector_html_a0881334358ff6ff7ff8cea5562c7988e"><div class="ttname"><a href="classllvm_1_1MapVector.html#a0881334358ff6ff7ff8cea5562c7988e">llvm::MapVector::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="MapVector_8h_source.html#l00072">MapVector.h:72</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantInt_html_ac09a21c371a9c535cbc13e8f82503aec"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#ac09a21c371a9c535cbc13e8f82503aec">llvm::ConstantInt::getZExtValue</a></div><div class="ttdeci">uint64_t getZExtValue() const</div><div class="ttdoc">Return the constant as a 64-bit unsigned integer value after it has been zero extended as appropriate...</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00141">Constants.h:141</a></div></div>
<div class="ttc" id="aclassllvm_1_1StringRef_html_a5db9240c74644c67759dd0f901fc3c7d"><div class="ttname"><a href="classllvm_1_1StringRef.html#a5db9240c74644c67759dd0f901fc3c7d">llvm::StringRef::size</a></div><div class="ttdeci">constexpr size_t size() const</div><div class="ttdoc">size - Get the string size.</div><div class="ttdef"><b>Definition:</b> <a href="StringRef_8h_source.html#l00137">StringRef.h:137</a></div></div>
<div class="ttc" id="anamespacellvm_html_aac36edd0f1ce976f0025c98e88d3830eaa7dad289ea38506fb1c9b5b148405d0c"><div class="ttname"><a href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eaa7dad289ea38506fb1c9b5b148405d0c">llvm::RecurKind::FMulAdd</a></div><div class="ttdeci">@ FMulAdd</div><div class="ttdoc">Fused multiply-add of floats (a * b + c).</div></div>
<div class="ttc" id="aEntryExitInstrumenter_8cpp_html_a3985f1f39349428d17f0d2b81ebc6349"><div class="ttname"><a href="EntryExitInstrumenter_8cpp.html#a3985f1f39349428d17f0d2b81ebc6349">runOnFunction</a></div><div class="ttdeci">static bool runOnFunction(Function &amp;F, bool PostInlining)</div><div class="ttdef"><b>Definition:</b> <a href="EntryExitInstrumenter_8cpp_source.html#l00085">EntryExitInstrumenter.cpp:85</a></div></div>
<div class="ttc" id="aclassllvm_1_1Twine_html"><div class="ttname"><a href="classllvm_1_1Twine.html">llvm::Twine</a></div><div class="ttdoc">Twine - A lightweight data structure for efficiently representing the concatenation of temporary valu...</div><div class="ttdef"><b>Definition:</b> <a href="Twine_8h_source.html#l00081">Twine.h:81</a></div></div>
<div class="ttc" id="aAlignment_8h_html"><div class="ttname"><a href="Alignment_8h.html">Alignment.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1OptimizationRemarkEmitterWrapperPass_html"><div class="ttname"><a href="classllvm_1_1OptimizationRemarkEmitterWrapperPass.html">llvm::OptimizationRemarkEmitterWrapperPass</a></div><div class="ttdoc">OptimizationRemarkEmitter legacy analysis pass.</div><div class="ttdef"><b>Definition:</b> <a href="OptimizationRemarkEmitter_8h_source.html#l00146">OptimizationRemarkEmitter.h:146</a></div></div>
<div class="ttc" id="aLowerMatrixIntrinsics_8cpp_html_ab891e50c619f81260e857e297f460fe5"><div class="ttname"><a href="LowerMatrixIntrinsics_8cpp.html#ab891e50c619f81260e857e297f460fe5">MatrixLayout</a></div><div class="ttdeci">static cl::opt&lt; MatrixLayoutTy &gt; MatrixLayout(&quot;matrix-default-layout&quot;, cl::init(MatrixLayoutTy::ColumnMajor), cl::desc(&quot;Sets the default matrix layout&quot;), cl::values(clEnumValN(MatrixLayoutTy::ColumnMajor, &quot;column-major&quot;, &quot;Use column-major layout&quot;), clEnumValN(MatrixLayoutTy::RowMajor, &quot;row-major&quot;, &quot;Use row-major layout&quot;)))</div></div>
<div class="ttc" id="anamespacellvm_1_1GraphProgram_html_a0ad4685976f8c4d4a697a53fbe05d10b"><div class="ttname"><a href="namespacellvm_1_1GraphProgram.html#a0ad4685976f8c4d4a697a53fbe05d10b">llvm::GraphProgram::Name</a></div><div class="ttdeci">Name</div><div class="ttdef"><b>Definition:</b> <a href="GraphWriter_8h_source.html#l00050">GraphWriter.h:50</a></div></div>
<div class="ttc" id="aLowerMatrixIntrinsics_8cpp_html_a353d18abf1571b4a1ef374fe49ee259a"><div class="ttname"><a href="LowerMatrixIntrinsics_8cpp.html#a353d18abf1571b4a1ef374fe49ee259a">AllowContractEnabled</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; AllowContractEnabled(&quot;matrix-allow-contract&quot;, cl::init(false), cl::Hidden, cl::desc(&quot;Allow the use of FMAs if available and profitable. This may &quot; &quot;result in different results, due to less rounding error.&quot;))</div></div>
<div class="ttc" id="aclassllvm_1_1DIScope_html"><div class="ttname"><a href="classllvm_1_1DIScope.html">llvm::DIScope</a></div><div class="ttdoc">Base class for scope-like contexts.</div><div class="ttdef"><b>Definition:</b> <a href="DebugInfoMetadata_8h_source.html#l00508">DebugInfoMetadata.h:508</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AMDGPU_1_1SendMsg_html_a8594419a4ddfad2c9a79279c490e466d"><div class="ttname"><a href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">llvm::AMDGPU::SendMsg::Op</a></div><div class="ttdeci">Op</div><div class="ttdef"><b>Definition:</b> <a href="SIDefines_8h_source.html#l00357">SIDefines.h:357</a></div></div>
<div class="ttc" id="aclassllvm_1_1PreservedAnalyses_html_a1258a1ff55557c27684010ebd7283712"><div class="ttname"><a href="classllvm_1_1PreservedAnalyses.html#a1258a1ff55557c27684010ebd7283712">llvm::PreservedAnalyses::all</a></div><div class="ttdeci">static PreservedAnalyses all()</div><div class="ttdoc">Construct a special preserved set that preserves all passes.</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00158">PassManager.h:158</a></div></div>
<div class="ttc" id="aLowerMatrixIntrinsics_8cpp_html_abf221949fc61d1494af06b50731bdc90abba47a7c03289a67ca347baa3f55be2f"><div class="ttname"><a href="LowerMatrixIntrinsics_8cpp.html#abf221949fc61d1494af06b50731bdc90abba47a7c03289a67ca347baa3f55be2f">MatrixLayoutTy::RowMajor</a></div><div class="ttdeci">@ RowMajor</div></div>
<div class="ttc" id="aclassllvm_1_1TypeSize_html"><div class="ttname"><a href="classllvm_1_1TypeSize.html">llvm::TypeSize</a></div><div class="ttdef"><b>Definition:</b> <a href="TypeSize_8h_source.html#l00314">TypeSize.h:314</a></div></div>
<div class="ttc" id="aFunction_8h_html"><div class="ttname"><a href="Function_8h.html">Function.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_a7c779ce2ba55bc94f52014fc25f3d520"><div class="ttname"><a href="classllvm_1_1Value.html#a7c779ce2ba55bc94f52014fc25f3d520">llvm::Value::hasNUses</a></div><div class="ttdeci">bool hasNUses(unsigned N) const</div><div class="ttdoc">Return true if this Value has exactly N uses.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00148">Value.cpp:148</a></div></div>
<div class="ttc" id="aclassllvm_1_1SetVector_html_a21c2c6ae5ec23004dc4020eacf83bbce"><div class="ttname"><a href="classllvm_1_1SetVector.html#a21c2c6ae5ec23004dc4020eacf83bbce">llvm::SetVector&lt; T, SmallVector&lt; T, N &gt;, SmallDenseSet&lt; T, N &gt; &gt;::count</a></div><div class="ttdeci">size_type count(const key_type &amp;key) const</div><div class="ttdoc">Count the number of elements of a given key in the SetVector.</div><div class="ttdef"><b>Definition:</b> <a href="SetVector_8h_source.html#l00208">SetVector.h:208</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_adc01a7457de85fc52a3bb860d7e1c6a4"><div class="ttname"><a href="classllvm_1_1Type.html#adc01a7457de85fc52a3bb860d7e1c6a4">llvm::Type::getPointerTo</a></div><div class="ttdeci">PointerType * getPointerTo(unsigned AddrSpace=0) const</div><div class="ttdoc">Return a pointer to the current type.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00776">Type.cpp:776</a></div></div>
<div class="ttc" id="aclassllvm_1_1ValueMap_html_a7629b8c5f6a6802ee0fdc5c290769692"><div class="ttname"><a href="classllvm_1_1ValueMap.html#a7629b8c5f6a6802ee0fdc5c290769692">llvm::ValueMap::find</a></div><div class="ttdeci">iterator find(const KeyT &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="ValueMap_8h_source.html#l00155">ValueMap.h:155</a></div></div>
<div class="ttc" id="anamespacellvm_1_1MCID_html_ab357441fcd1ea1f9b0d27c12700f6023a2b016c207343046b2bac45e69e76dcec"><div class="ttname"><a href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a2b016c207343046b2bac45e69e76dcec">llvm::MCID::Add</a></div><div class="ttdeci">@ Add</div><div class="ttdef"><b>Definition:</b> <a href="MCInstrDesc_8h_source.html#l00186">MCInstrDesc.h:186</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallSet_html_a1679469af9bb8ccfbe98441fb8228c79"><div class="ttname"><a href="classllvm_1_1SmallSet.html#a1679469af9bb8ccfbe98441fb8228c79">llvm::SmallSet::insert</a></div><div class="ttdeci">std::pair&lt; const_iterator, bool &gt; insert(const T &amp;V)</div><div class="ttdoc">insert - Insert an element into the set if it isn't already there.</div><div class="ttdef"><b>Definition:</b> <a href="SmallSet_8h_source.html#l00177">SmallSet.h:177</a></div></div>
<div class="ttc" id="aclassllvm_1_1ReversePostOrderTraversal_html"><div class="ttname"><a href="classllvm_1_1ReversePostOrderTraversal.html">llvm::ReversePostOrderTraversal</a></div><div class="ttdef"><b>Definition:</b> <a href="PostOrderIterator_8h_source.html#l00293">PostOrderIterator.h:293</a></div></div>
<div class="ttc" id="aclassllvm_1_1IntrinsicInst_html"><div class="ttname"><a href="classllvm_1_1IntrinsicInst.html">llvm::IntrinsicInst</a></div><div class="ttdoc">A wrapper class for inspecting calls to intrinsic functions.</div><div class="ttdef"><b>Definition:</b> <a href="IntrinsicInst_8h_source.html#l00047">IntrinsicInst.h:47</a></div></div>
<div class="ttc" id="aclassllvm_1_1DominatorTreeAnalysis_html"><div class="ttname"><a href="classllvm_1_1DominatorTreeAnalysis.html">llvm::DominatorTreeAnalysis</a></div><div class="ttdoc">Analysis pass which computes a DominatorTree.</div><div class="ttdef"><b>Definition:</b> <a href="Dominators_8h_source.html#l00279">Dominators.h:279</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a6d3231fb84ed4182ec22e9442a87dbf8"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a6d3231fb84ed4182ec22e9442a87dbf8">llvm::BasicBlock::reverse_iterator</a></div><div class="ttdeci">InstListType::reverse_iterator reverse_iterator</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00089">BasicBlock.h:89</a></div></div>
<div class="ttc" id="aclassllvm_1_1OptimizationRemark_html"><div class="ttname"><a href="classllvm_1_1OptimizationRemark.html">llvm::OptimizationRemark</a></div><div class="ttdoc">Diagnostic information for applied optimization remarks.</div><div class="ttdef"><b>Definition:</b> <a href="DiagnosticInfo_8h_source.html#l00689">DiagnosticInfo.h:689</a></div></div>
<div class="ttc" id="aclassllvm_1_1Pass_html"><div class="ttname"><a href="classllvm_1_1Pass.html">llvm::Pass</a></div><div class="ttdoc">Pass interface - Implemented by all 'passes'.</div><div class="ttdef"><b>Definition:</b> <a href="Pass_8h_source.html#l00091">Pass.h:91</a></div></div>
<div class="ttc" id="anamespacellvm_html_aac36edd0f1ce976f0025c98e88d3830eaf552e181879ad14956985859308d77d9"><div class="ttname"><a href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eaf552e181879ad14956985859308d77d9">llvm::RecurKind::FAdd</a></div><div class="ttdeci">@ FAdd</div><div class="ttdoc">Sum of floats.</div></div>
<div class="ttc" id="aInstructions_8h_html"><div class="ttname"><a href="Instructions_8h.html">Instructions.h</a></div></div>
<div class="ttc" id="aPostOrderIterator_8h_html"><div class="ttname"><a href="PostOrderIterator_8h.html">PostOrderIterator.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoadInst_html_a2eccc19f9061eeb7ad1e30e21f76034d"><div class="ttname"><a href="classllvm_1_1LoadInst.html#a2eccc19f9061eeb7ad1e30e21f76034d">llvm::LoadInst::isVolatile</a></div><div class="ttdeci">bool isVolatile() const</div><div class="ttdoc">Return true if this is a load from a volatile memory location.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00214">Instructions.h:214</a></div></div>
<div class="ttc" id="anamespacellvm_html_a49375a16d9bf4467ed4faff420cb97e3"><div class="ttname"><a href="namespacellvm.html#a49375a16d9bf4467ed4faff420cb97e3">llvm::initializeLowerMatrixIntrinsicsLegacyPassPass</a></div><div class="ttdeci">void initializeLowerMatrixIntrinsicsLegacyPassPass(PassRegistry &amp;)</div></div>
<div class="ttc" id="aSmallVector_8h_html"><div class="ttname"><a href="SmallVector_8h.html">SmallVector.h</a></div></div>
<div class="ttc" id="aLowerMatrixIntrinsics_8cpp_html_ad3ea8483bb698ffc64dc1adf7c84a098"><div class="ttname"><a href="LowerMatrixIntrinsics_8cpp.html#ad3ea8483bb698ffc64dc1adf7c84a098">m_AnyMul</a></div><div class="ttdeci">auto m_AnyMul(const LTy &amp;L, const RTy &amp;R)</div><div class="ttdoc">Match any mul operation (fp or integer).</div><div class="ttdef"><b>Definition:</b> <a href="LowerMatrixIntrinsics_8cpp_source.html#l00119">LowerMatrixIntrinsics.cpp:119</a></div></div>
<div class="ttc" id="aBitTracker_8cpp_html_ae3e523a6a11b1e24604b40363978a62a"><div class="ttname"><a href="BitTracker_8cpp.html#ae3e523a6a11b1e24604b40363978a62a">BT</a></div><div class="ttdeci">BitTracker BT</div><div class="ttdef"><b>Definition:</b> <a href="BitTracker_8cpp_source.html#l00073">BitTracker.cpp:73</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallBase_html_ab2caa29167597390ab2fc3cf30d70389"><div class="ttname"><a href="classllvm_1_1CallBase.html#ab2caa29167597390ab2fc3cf30d70389">llvm::CallBase::getArgOperand</a></div><div class="ttdeci">Value * getArgOperand(unsigned i) const</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l01351">InstrTypes.h:1351</a></div></div>
<div class="ttc" id="aregcomp_8c_html_a0240ac851181b84ac374872dc5434ee4"><div class="ttname"><a href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a></div><div class="ttdeci">#define N</div></div>
<div class="ttc" id="aclassllvm_1_1AAResultsWrapperPass_html"><div class="ttname"><a href="classllvm_1_1AAResultsWrapperPass.html">llvm::AAResultsWrapperPass</a></div><div class="ttdoc">A wrapper pass to provide the legacy pass manager access to a suitably prepared AAResults object.</div><div class="ttdef"><b>Definition:</b> <a href="AliasAnalysis_8h_source.html#l00933">AliasAnalysis.h:933</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a1a7f07aaef6a3bee130bf0e0f0536802"><div class="ttname"><a href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">llvm::Instruction::getParent</a></div><div class="ttdeci">const BasicBlock * getParent() const</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00090">Instruction.h:90</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html_a0c8ffe664a36e30d49c84d0aded2fe08"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#a0c8ffe664a36e30d49c84d0aded2fe08">llvm::SmallVectorImpl::pop_back_val</a></div><div class="ttdeci">T pop_back_val()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00677">SmallVector.h:677</a></div></div>
<div class="ttc" id="anamespacellvm_html_a13c1b5a253da5da49ce33d03dc1efc07"><div class="ttname"><a href="namespacellvm.html#a13c1b5a253da5da49ce33d03dc1efc07">llvm::to_string</a></div><div class="ttdeci">std::string to_string(const T &amp;Value)</div><div class="ttdef"><b>Definition:</b> <a href="ScopedPrinter_8h_source.html#l00085">ScopedPrinter.h:85</a></div></div>
<div class="ttc" id="aTargetTransformInfo_8h_html"><div class="ttname"><a href="TargetTransformInfo_8h.html">TargetTransformInfo.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1iterator__range_html"><div class="ttname"><a href="classllvm_1_1iterator__range.html">llvm::iterator_range</a></div><div class="ttdoc">A range adaptor for a pair of iterators.</div><div class="ttdef"><b>Definition:</b> <a href="iterator__range_8h_source.html#l00030">iterator_range.h:30</a></div></div>
<div class="ttc" id="aclassllvm_1_1PHINode_html"><div class="ttname"><a href="classllvm_1_1PHINode.html">llvm::PHINode</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02708">Instructions.h:2708</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a8de021e28a3c04c9216ad8decf104f02"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">llvm::BasicBlock::getTerminator</a></div><div class="ttdeci">const Instruction * getTerminator() const LLVM_READONLY</div><div class="ttdoc">Returns the terminator instruction if the block is well formed or null if the block is not well forme...</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00127">BasicBlock.h:127</a></div></div>
<div class="ttc" id="aLowerMatrixIntrinsics_8cpp_html_ad78e062f62e0d6e453941fb4ca843e4d"><div class="ttname"><a href="LowerMatrixIntrinsics_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">DEBUG_TYPE</a></div><div class="ttdeci">#define DEBUG_TYPE</div><div class="ttdef"><b>Definition:</b> <a href="LowerMatrixIntrinsics_8cpp_source.html#l00054">LowerMatrixIntrinsics.cpp:54</a></div></div>
<div class="ttc" id="aLowerMatrixIntrinsics_8cpp_html_a976c8a852b4c6e1aebefedebcc2a5212"><div class="ttname"><a href="LowerMatrixIntrinsics_8cpp.html#a976c8a852b4c6e1aebefedebcc2a5212">minimal</a></div><div class="ttdeci">lower matrix intrinsics minimal</div><div class="ttdef"><b>Definition:</b> <a href="LowerMatrixIntrinsics_8cpp_source.html#l02490">LowerMatrixIntrinsics.cpp:2490</a></div></div>
<div class="ttc" id="aclassllvm_1_1DISubprogram_html"><div class="ttname"><a href="classllvm_1_1DISubprogram.html">llvm::DISubprogram</a></div><div class="ttdoc">Subprogram description.</div><div class="ttdef"><b>Definition:</b> <a href="DebugInfoMetadata_8h_source.html#l01851">DebugInfoMetadata.h:1851</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html">llvm::SmallVectorImpl&lt; Instruction * &gt;</a></div></div>
<div class="ttc" id="aLowerMatrixIntrinsics_8cpp_html_a8e840f8b2f4e0b758bd32f6b785a5beb"><div class="ttname"><a href="LowerMatrixIntrinsics_8cpp.html#a8e840f8b2f4e0b758bd32f6b785a5beb">INITIALIZE_PASS_BEGIN</a></div><div class="ttdeci">INITIALIZE_PASS_BEGIN(LowerMatrixIntrinsicsLegacyPass, DEBUG_TYPE, pass_name, false, false) INITIALIZE_PASS_END(LowerMatrixIntrinsicsLegacyPass</div></div>
<div class="ttc" id="anamespacellvm_html_a6b0ac1fa4f05de76413c5e0ca6334035"><div class="ttname"><a href="namespacellvm.html#a6b0ac1fa4f05de76413c5e0ca6334035">llvm::reverse</a></div><div class="ttdeci">auto reverse(ContainerTy &amp;&amp;C)</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l00484">STLExtras.h:484</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSetImpl_html"><div class="ttname"><a href="classllvm_1_1SmallPtrSetImpl.html">llvm::SmallPtrSetImpl&lt; Instruction * &gt;</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallSetVector_html"><div class="ttname"><a href="classllvm_1_1SmallSetVector.html">llvm::SmallSetVector</a></div><div class="ttdoc">A SetVector that performs no allocations if smaller than a certain size.</div><div class="ttdef"><b>Definition:</b> <a href="SetVector_8h_source.html#l00300">SetVector.h:300</a></div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisManager_html"><div class="ttname"><a href="classllvm_1_1AnalysisManager.html">llvm::AnalysisManager</a></div><div class="ttdoc">A container for analyses that lazily runs them and caches their results.</div><div class="ttdef"><b>Definition:</b> <a href="InstructionSimplify_8h_source.html#l00042">InstructionSimplify.h:42</a></div></div>
<div class="ttc" id="aclassllvm_1_1FunctionPass_html"><div class="ttname"><a href="classllvm_1_1FunctionPass.html">llvm::FunctionPass</a></div><div class="ttdoc">FunctionPass class - This class is used to implement most global optimizations.</div><div class="ttdef"><b>Definition:</b> <a href="Pass_8h_source.html#l00308">Pass.h:308</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallInst_html"><div class="ttname"><a href="classllvm_1_1CallInst.html">llvm::CallInst</a></div><div class="ttdoc">This class represents a function call, abstracting a target machine's calling convention.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01485">Instructions.h:1485</a></div></div>
<div class="ttc" id="alib_2CodeGen_2README_8txt_html_a09776db24cf586ec9f1e18f3bae14099"><div class="ttname"><a href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a></div><div class="ttdeci">Common register allocation spilling lr str ldr sxth r3 ldr mla r4 can lr mov lr str ldr sxth r3 mla r4 and then merge mul and lr str ldr sxth r3 mla r4 It also increase the likelihood the store may become dead bb27 Successors according to LLVM BB</div><div class="ttdef"><b>Definition:</b> <a href="lib_2CodeGen_2README_8txt_source.html#l00039">README.txt:39</a></div></div>
<div class="ttc" id="aHexagonCommonGEP_8cpp_html_ad532e8710e50302e0a376b61c91fa91d"><div class="ttname"><a href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a></div><div class="ttdeci">Hexagon Common GEP</div><div class="ttdef"><b>Definition:</b> <a href="HexagonCommonGEP_8cpp_source.html#l00171">HexagonCommonGEP.cpp:171</a></div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisUsage_html_ae5c60fd282ee894c87ea02c3f0fcb6d0"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">llvm::AnalysisUsage::addRequired</a></div><div class="ttdeci">AnalysisUsage &amp; addRequired()</div><div class="ttdef"><b>Definition:</b> <a href="PassAnalysisSupport_8h_source.html#l00075">PassAnalysisSupport.h:75</a></div></div>
<div class="ttc" id="aLowerMatrixIntrinsics_8cpp_html_a5bb64c96618373218ca5eb9425ee8790"><div class="ttname"><a href="LowerMatrixIntrinsics_8cpp.html#a5bb64c96618373218ca5eb9425ee8790">TileUseLoops</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; TileUseLoops(&quot;fuse-matrix-use-loops&quot;, cl::init(false), cl::Hidden, cl::desc(&quot;Generate loop nest for tiling.&quot;))</div></div>
<div class="ttc" id="aclassllvm_1_1DebugLoc_html"><div class="ttname"><a href="classllvm_1_1DebugLoc.html">llvm::DebugLoc</a></div><div class="ttdoc">A debug info location.</div><div class="ttdef"><b>Definition:</b> <a href="DebugLoc_8h_source.html#l00033">DebugLoc.h:33</a></div></div>
<div class="ttc" id="aclassllvm_1_1AllocaInst_html"><div class="ttname"><a href="classllvm_1_1AllocaInst.html">llvm::AllocaInst</a></div><div class="ttdoc">an instruction to allocate memory on the stack</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00058">Instructions.h:58</a></div></div>
<div class="ttc" id="aclassllvm_1_1FastMathFlags_html_ad8c80fc37943fda4be56cf1e0b6cb145"><div class="ttname"><a href="classllvm_1_1FastMathFlags.html#ad8c80fc37943fda4be56cf1e0b6cb145">llvm::FastMathFlags::allowContract</a></div><div class="ttdeci">bool allowContract() const</div><div class="ttdef"><b>Definition:</b> <a href="FMF_8h_source.html#l00071">FMF.h:71</a></div></div>
<div class="ttc" id="aclassllvm_1_1User_html_abe1de1520a21f77ac57cc210bf0fb0b4"><div class="ttname"><a href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">llvm::User::getOperand</a></div><div class="ttdeci">Value * getOperand(unsigned i) const</div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00169">User.h:169</a></div></div>
<div class="ttc" id="astructllvm_1_1cl_1_1desc_html"><div class="ttname"><a href="structllvm_1_1cl_1_1desc.html">llvm::cl::desc</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00411">CommandLine.h:411</a></div></div>
<div class="ttc" id="anamespacellvm_html_aedacfaa7c14c803c0fa33a810310fbf7"><div class="ttname"><a href="namespacellvm.html#aedacfaa7c14c803c0fa33a810310fbf7">llvm::createLowerMatrixIntrinsicsMinimalPass</a></div><div class="ttdeci">Pass * createLowerMatrixIntrinsicsMinimalPass()</div><div class="ttdef"><b>Definition:</b> <a href="LowerMatrixIntrinsics_8cpp_source.html#l02493">LowerMatrixIntrinsics.cpp:2493</a></div></div>
<div class="ttc" id="anamespacellvm_html_af00a6f39da9d94ec387a366ade60aea5"><div class="ttname"><a href="namespacellvm.html#af00a6f39da9d94ec387a366ade60aea5">llvm::createSequentialMask</a></div><div class="ttdeci">llvm::SmallVector&lt; int, 16 &gt; createSequentialMask(unsigned Start, unsigned NumInts, unsigned NumUndefs)</div><div class="ttdoc">Create a sequential shuffle mask.</div><div class="ttdef"><b>Definition:</b> <a href="VectorUtils_8cpp_source.html#l00983">VectorUtils.cpp:983</a></div></div>
<div class="ttc" id="aclassllvm_1_1SetVector_html"><div class="ttname"><a href="classllvm_1_1SetVector.html">llvm::SetVector&lt; Value * &gt;</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantAggregateZero_html_abfa1cf8b4348407b167f93bc7c01055f"><div class="ttname"><a href="classllvm_1_1ConstantAggregateZero.html#abfa1cf8b4348407b167f93bc7c01055f">llvm::ConstantAggregateZero::get</a></div><div class="ttdeci">static ConstantAggregateZero * get(Type *Ty)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l01595">Constants.cpp:1595</a></div></div>
<div class="ttc" id="aBasicBlockUtils_8h_html"><div class="ttname"><a href="BasicBlockUtils_8h.html">BasicBlockUtils.h</a></div></div>
<div class="ttc" id="aLowerMatrixIntrinsics_8cpp_html_a13352a0047c63abbca595b376e7501f8"><div class="ttname"><a href="LowerMatrixIntrinsics_8cpp.html#a13352a0047c63abbca595b376e7501f8">eraseFromParentAndMove</a></div><div class="ttdeci">static void eraseFromParentAndMove(Value *V, BasicBlock::reverse_iterator &amp;II, BasicBlock &amp;BB)</div><div class="ttdoc">Erase V from BB and move \II forward to avoid invalidating iterators.</div><div class="ttdef"><b>Definition:</b> <a href="LowerMatrixIntrinsics_8cpp_source.html#l00098">LowerMatrixIntrinsics.cpp:98</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a7aff89f4f22502c8ad9118bed59ce21c"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a7aff89f4f22502c8ad9118bed59ce21c">llvm::PatternMatch::m_FMul</a></div><div class="ttdeci">BinaryOp_match&lt; LHS, RHS, Instruction::FMul &gt; m_FMul(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01051">PatternMatch.h:1051</a></div></div>
<div class="ttc" id="anamespacellvm_html_ad295cb34421c21507bc9cdefe1ba3f16"><div class="ttname"><a href="namespacellvm.html#ad295cb34421c21507bc9cdefe1ba3f16">llvm::SplitBlock</a></div><div class="ttdeci">BasicBlock * SplitBlock(BasicBlock *Old, Instruction *SplitPt, DominatorTree *DT, LoopInfo *LI=nullptr, MemorySSAUpdater *MSSAU=nullptr, const Twine &amp;BBName=&quot;&quot;, bool Before=false)</div><div class="ttdoc">Split the specified block at the specified instruction.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlockUtils_8cpp_source.html#l00935">BasicBlockUtils.cpp:935</a></div></div>
<div class="ttc" id="anamespacellvm_1_1pdb_html_a33e853ec74d48b1340d1d4bae772d30bae1e4c8c9ccd9fc39c391da4bcd093fb2"><div class="ttname"><a href="namespacellvm_1_1pdb.html#a33e853ec74d48b1340d1d4bae772d30bae1e4c8c9ccd9fc39c391da4bcd093fb2">llvm::pdb::PDB_SymType::Block</a></div><div class="ttdeci">@ Block</div></div>
<div class="ttc" id="aInitializePasses_8h_html"><div class="ttname"><a href="InitializePasses_8h.html">InitializePasses.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1OptimizationRemarkEmitterAnalysis_html"><div class="ttname"><a href="classllvm_1_1OptimizationRemarkEmitterAnalysis.html">llvm::OptimizationRemarkEmitterAnalysis</a></div><div class="ttdef"><b>Definition:</b> <a href="OptimizationRemarkEmitter_8h_source.html#l00164">OptimizationRemarkEmitter.h:164</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallSet_html_a34384400167eb6ebf71fa89d98ba03bc"><div class="ttname"><a href="classllvm_1_1SmallSet.html#a34384400167eb6ebf71fa89d98ba03bc">llvm::SmallSet::empty</a></div><div class="ttdeci">bool empty() const</div><div class="ttdef"><b>Definition:</b> <a href="SmallSet_8h_source.html#l00157">SmallSet.h:157</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html"><div class="ttname"><a href="classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00074">Value.h:74</a></div></div>
<div class="ttc" id="aDebug_8h_html"><div class="ttname"><a href="Debug_8h.html">Debug.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_ab4e0512c7e1c7adaa56677e3155685f1"><div class="ttname"><a href="classllvm_1_1Value.html#ab4e0512c7e1c7adaa56677e3155685f1">llvm::Value::users</a></div><div class="ttdeci">iterator_range&lt; user_iterator &gt; users()</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00421">Value.h:421</a></div></div>
<div class="ttc" id="aclassllvm_1_1StringRef_html_a3fb2867a1e9fa36e135d9ee4dffb0167"><div class="ttname"><a href="classllvm_1_1StringRef.html#a3fb2867a1e9fa36e135d9ee4dffb0167">llvm::StringRef::drop_front</a></div><div class="ttdeci">StringRef drop_front(size_t N=1) const</div><div class="ttdoc">Return a StringRef equal to 'this' but with the first N elements dropped.</div><div class="ttdef"><b>Definition:</b> <a href="StringRef_8h_source.html#l00597">StringRef.h:597</a></div></div>
<div class="ttc" id="aclassllvm_1_1MemoryLocation_html"><div class="ttname"><a href="classllvm_1_1MemoryLocation.html">llvm::MemoryLocation</a></div><div class="ttdoc">Representation for a specific memory location.</div><div class="ttdef"><b>Definition:</b> <a href="MemoryLocation_8h_source.html#l00211">MemoryLocation.h:211</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopAnalysis_html"><div class="ttname"><a href="classllvm_1_1LoopAnalysis.html">llvm::LoopAnalysis</a></div><div class="ttdoc">Analysis pass that exposes the LoopInfo for a function.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l01268">LoopInfo.h:1268</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a971522b36bf432ad69a0083581ab4108"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a971522b36bf432ad69a0083581ab4108">llvm::PatternMatch::m_Mul</a></div><div class="ttdeci">BinaryOp_match&lt; LHS, RHS, Instruction::Mul &gt; m_Mul(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01045">PatternMatch.h:1045</a></div></div>
<div class="ttc" id="aclassllvm_1_1DominatorTreeBase_html_a71c91cbbfc1c0ecf9a69e10ccf739bd7"><div class="ttname"><a href="classllvm_1_1DominatorTreeBase.html#a71c91cbbfc1c0ecf9a69e10ccf739bd7">llvm::DominatorTreeBase::Delete</a></div><div class="ttdeci">static constexpr UpdateKind Delete</div><div class="ttdef"><b>Definition:</b> <a href="GenericDomTree_8h_source.html#l00259">GenericDomTree.h:259</a></div></div>
<div class="ttc" id="aclassllvm_1_1Use_html"><div class="ttname"><a href="classllvm_1_1Use.html">llvm::Use</a></div><div class="ttdoc">A Use represents the edge between a Value definition and its users.</div><div class="ttdef"><b>Definition:</b> <a href="Use_8h_source.html#l00043">Use.h:43</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a833daf718a49c5cd637d8c9ddeaebe07"><div class="ttname"><a href="classllvm_1_1Type.html#a833daf718a49c5cd637d8c9ddeaebe07">llvm::Type::getPrimitiveSizeInBits</a></div><div class="ttdeci">TypeSize getPrimitiveSizeInBits() const LLVM_READONLY</div><div class="ttdoc">Return the basic size of this type if it is a primitive type.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00163">Type.cpp:163</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSetImpl_html_a6bc6fb89fe2e91c25559a8631f56e27e"><div class="ttname"><a href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">llvm::SmallPtrSetImpl::insert</a></div><div class="ttdeci">std::pair&lt; iterator, bool &gt; insert(PtrType Ptr)</div><div class="ttdoc">Inserts Ptr if and only if there is no element in the container equal to Ptr.</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00365">SmallPtrSet.h:365</a></div></div>
<div class="ttc" id="aclassllvm_1_1PoisonValue_html_a1bf08613fb664a2e377a9a72c59a6b66"><div class="ttname"><a href="classllvm_1_1PoisonValue.html#a1bf08613fb664a2e377a9a72c59a6b66">llvm::PoisonValue::get</a></div><div class="ttdeci">static PoisonValue * get(Type *T)</div><div class="ttdoc">Static factory methods - Return an 'poison' object of the specified type.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l01759">Constants.cpp:1759</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Aug 7 2023 10:33:45 for LLVM by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>

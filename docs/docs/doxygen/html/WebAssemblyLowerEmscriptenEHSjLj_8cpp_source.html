<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LLVM: lib/Target/WebAssembly/WebAssemblyLowerEmscriptenEHSjLj.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">LLVM
   &#160;<span id="projectnumber">17.0.0git</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a class="el" href="dir_794e483eb1cc7921d35fd149d9cc325b.html">Target</a></li><li class="navelem"><a class="el" href="dir_96ba75976c22f2500bfbc06f8c4c2b70.html">WebAssembly</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">WebAssemblyLowerEmscriptenEHSjLj.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="WebAssemblyLowerEmscriptenEHSjLj_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//=== WebAssemblyLowerEmscriptenEHSjLj.cpp - Lower exceptions for Emscripten =//</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">// See https://llvm.org/LICENSE.txt for license information.</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span><span class="comment"></span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">/// \file</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">/// This file lowers exception-related instructions and setjmp/longjmp function</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">/// calls to use Emscripten&#39;s library functions. The pass uses JavaScript&#39;s try</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">/// and catch mechanism in case of Emscripten EH/SjLj and Wasm EH intrinsics in</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">/// case of Emscripten SjLJ.</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">/// * Emscripten exception handling</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">/// This pass lowers invokes and landingpads into library functions in JS glue</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">/// code. Invokes are lowered into function wrappers called invoke wrappers that</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment">/// exist in JS side, which wraps the original function call with JS try-catch.</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment">/// If an exception occurred, cxa_throw() function in JS side sets some</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment">/// variables (see below) so we can check whether an exception occurred from</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment">/// wasm code and handle it appropriately.</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment">/// * Emscripten setjmp-longjmp handling</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment">/// This pass lowers setjmp to a reasonably-performant approach for emscripten.</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment">/// The idea is that each block with a setjmp is broken up into two parts: the</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment">/// part containing setjmp and the part right after the setjmp. The latter part</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment">/// is either reached from the setjmp, or later from a longjmp. To handle the</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment">/// longjmp, all calls that might longjmp are also called using invoke wrappers</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment">/// and thus JS / try-catch. JS longjmp() function also sets some variables so</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="comment">/// we can check / whether a longjmp occurred from wasm code. Each block with a</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="comment">/// function call that might longjmp is also split up after the longjmp call.</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="comment">/// After the longjmp call, we check whether a longjmp occurred, and if it did,</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="comment">/// which setjmp it corresponds to, and jump to the right post-setjmp block.</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="comment">/// We assume setjmp-longjmp handling always run after EH handling, which means</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="comment">/// we don&#39;t expect any exception-related instructions when SjLj runs.</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="comment">/// FIXME Currently this scheme does not support indirect call of setjmp,</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="comment">/// because of the limitation of the scheme itself. fastcomp does not support it</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="comment">/// either.</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="comment">/// In detail, this pass does following things:</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="comment">/// 1) Assumes the existence of global variables: __THREW__, __threwValue</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="comment">///    __THREW__ and __threwValue are defined in compiler-rt in Emscripten.</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="comment">///    These variables are used for both exceptions and setjmp/longjmps.</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="comment">///    __THREW__ indicates whether an exception or a longjmp occurred or not. 0</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="comment">///    means nothing occurred, 1 means an exception occurred, and other numbers</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="comment">///    mean a longjmp occurred. In the case of longjmp, __THREW__ variable</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="comment">///    indicates the corresponding setjmp buffer the longjmp corresponds to.</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="comment">///    __threwValue is 0 for exceptions, and the argument to longjmp in case of</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="comment">///    longjmp.</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="comment">/// * Emscripten exception handling</span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="comment">/// 2) We assume the existence of setThrew and setTempRet0/getTempRet0 functions</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="comment">///    at link time. setThrew exists in Emscripten&#39;s compiler-rt:</span></div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="comment">///    void setThrew(uintptr_t threw, int value) {</span></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="comment">///      if (__THREW__ == 0) {</span></div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="comment">///        __THREW__ = threw;</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="comment">///        __threwValue = value;</span></div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="comment">///      }</span></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="comment">///    }</span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="comment"></span><span class="comment">//</span><span class="comment"></span></div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="comment">///    setTempRet0 is called from __cxa_find_matching_catch() in JS glue code.</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="comment">///    In exception handling, getTempRet0 indicates the type of an exception</span></div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="comment">///    caught, and in setjmp/longjmp, it means the second argument to longjmp</span></div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="comment">///    function.</span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="comment">/// 3) Lower</span></div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="comment">///      invoke @func(arg1, arg2) to label %invoke.cont unwind label %lpad</span></div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="comment">///    into</span></div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="comment">///      __THREW__ = 0;</span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="comment">///      call @__invoke_SIG(func, arg1, arg2)</span></div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="comment">///      %__THREW__.val = __THREW__;</span></div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="comment">///      __THREW__ = 0;</span></div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="comment">///      if (%__THREW__.val == 1)</span></div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="comment">///        goto %lpad</span></div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="comment">///      else</span></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="comment">///         goto %invoke.cont</span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="comment">///    SIG is a mangled string generated based on the LLVM IR-level function</span></div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="comment">///    signature. After LLVM IR types are lowered to the target wasm types,</span></div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="comment">///    the names for these wrappers will change based on wasm types as well,</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="comment">///    as in invoke_vi (function takes an int and returns void). The bodies of</span></div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="comment">///    these wrappers will be generated in JS glue code, and inside those</span></div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="comment">///    wrappers we use JS try-catch to generate actual exception effects. It</span></div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="comment">///    also calls the original callee function. An example wrapper in JS code</span></div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="comment">///    would look like this:</span></div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="comment">///      function invoke_vi(index,a1) {</span></div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="comment">///        try {</span></div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="comment">///          Module[&quot;dynCall_vi&quot;](index,a1); // This calls original callee</span></div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="comment">///        } catch(e) {</span></div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<span class="comment">///          if (typeof e !== &#39;number&#39; &amp;&amp; e !== &#39;longjmp&#39;) throw e;</span></div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="comment">///          _setThrew(1, 0); // setThrew is called here</span></div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<span class="comment">///        }</span></div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="comment">///      }</span></div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="comment">///    If an exception is thrown, __THREW__ will be set to true in a wrapper,</span></div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;<span class="comment">///    so we can jump to the right BB based on this value.</span></div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="comment">/// 4) Lower</span></div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;<span class="comment">///      %val = landingpad catch c1 catch c2 catch c3 ...</span></div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;<span class="comment">///      ... use %val ...</span></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;<span class="comment">///    into</span></div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="comment">///      %fmc = call @__cxa_find_matching_catch_N(c1, c2, c3, ...)</span></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;<span class="comment">///      %val = {%fmc, getTempRet0()}</span></div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="comment">///      ... use %val ...</span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="comment">///    Here N is a number calculated based on the number of clauses.</span></div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="comment">///    setTempRet0 is called from __cxa_find_matching_catch() in JS glue code.</span></div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;<span class="comment">/// 5) Lower</span></div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;<span class="comment">///      resume {%a, %b}</span></div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;<span class="comment">///    into</span></div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;<span class="comment">///      call @__resumeException(%a)</span></div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;<span class="comment">///    where __resumeException() is a function in JS glue code.</span></div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;<span class="comment">/// 6) Lower</span></div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;<span class="comment">///      call @llvm.eh.typeid.for(type) (intrinsic)</span></div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;<span class="comment">///    into</span></div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<span class="comment">///      call @llvm_eh_typeid_for(type)</span></div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;<span class="comment">///    llvm_eh_typeid_for function will be generated in JS glue code.</span></div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="comment">/// * Emscripten setjmp / longjmp handling</span></div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;<span class="comment">/// If there are calls to longjmp()</span></div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;<span class="comment">/// 1) Lower</span></div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;<span class="comment">///      longjmp(env, val)</span></div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;<span class="comment">///    into</span></div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<span class="comment">///      emscripten_longjmp(env, val)</span></div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;<span class="comment">/// If there are calls to setjmp()</span></div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;<span class="comment">/// 2) In the function entry that calls setjmp, initialize setjmpTable and</span></div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;<span class="comment">///    sejmpTableSize as follows:</span></div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;<span class="comment">///      setjmpTableSize = 4;</span></div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;<span class="comment">///      setjmpTable = (int *) malloc(40);</span></div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;<span class="comment">///      setjmpTable[0] = 0;</span></div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;<span class="comment">///    setjmpTable and setjmpTableSize are used to call saveSetjmp() function in</span></div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;<span class="comment">///    Emscripten compiler-rt.</span></div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<span class="comment">/// 3) Lower</span></div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;<span class="comment">///      setjmp(env)</span></div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;<span class="comment">///    into</span></div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;<span class="comment">///      setjmpTable = saveSetjmp(env, label, setjmpTable, setjmpTableSize);</span></div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;<span class="comment">///      setjmpTableSize = getTempRet0();</span></div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;<span class="comment">///    For each dynamic setjmp call, setjmpTable stores its ID (a number which</span></div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;<span class="comment">///    is incrementally assigned from 0) and its label (a unique number that</span></div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;<span class="comment">///    represents each callsite of setjmp). When we need more entries in</span></div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;<span class="comment">///    setjmpTable, it is reallocated in saveSetjmp() in Emscripten&#39;s</span></div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;<span class="comment">///    compiler-rt and it will return the new table address, and assign the new</span></div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;<span class="comment">///    table size in setTempRet0(). saveSetjmp also stores the setjmp&#39;s ID into</span></div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;<span class="comment">///    the buffer &#39;env&#39;. A BB with setjmp is split into two after setjmp call in</span></div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;<span class="comment">///    order to make the post-setjmp BB the possible destination of longjmp BB.</span></div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;<span class="comment">/// 4) Lower every call that might longjmp into</span></div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;<span class="comment">///      __THREW__ = 0;</span></div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;<span class="comment">///      call @__invoke_SIG(func, arg1, arg2)</span></div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;<span class="comment">///      %__THREW__.val = __THREW__;</span></div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;<span class="comment">///      __THREW__ = 0;</span></div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;<span class="comment">///      %__threwValue.val = __threwValue;</span></div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;<span class="comment">///      if (%__THREW__.val != 0 &amp; %__threwValue.val != 0) {</span></div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;<span class="comment">///        %label = testSetjmp(mem[%__THREW__.val], setjmpTable,</span></div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;<span class="comment">///                            setjmpTableSize);</span></div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;<span class="comment">///        if (%label == 0)</span></div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;<span class="comment">///          emscripten_longjmp(%__THREW__.val, %__threwValue.val);</span></div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;<span class="comment">///        setTempRet0(%__threwValue.val);</span></div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;<span class="comment">///      } else {</span></div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;<span class="comment">///        %label = -1;</span></div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;<span class="comment">///      }</span></div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;<span class="comment">///      longjmp_result = getTempRet0();</span></div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;<span class="comment">///      switch %label {</span></div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;<span class="comment">///        label 1: goto post-setjmp BB 1</span></div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;<span class="comment">///        label 2: goto post-setjmp BB 2</span></div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;<span class="comment">///        ...</span></div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;<span class="comment">///        default: goto splitted next BB</span></div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;<span class="comment">///      }</span></div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;<span class="comment">///    testSetjmp examines setjmpTable to see if there is a matching setjmp</span></div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;<span class="comment">///    call. After calling an invoke wrapper, if a longjmp occurred, __THREW__</span></div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;<span class="comment">///    will be the address of matching jmp_buf buffer and __threwValue be the</span></div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;<span class="comment">///    second argument to longjmp. mem[%__THREW__.val] is a setjmp ID that is</span></div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;<span class="comment">///    stored in saveSetjmp. testSetjmp returns a setjmp label, a unique ID to</span></div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;<span class="comment">///    each setjmp callsite. Label 0 means this longjmp buffer does not</span></div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;<span class="comment">///    correspond to one of the setjmp callsites in this function, so in this</span></div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;<span class="comment">///    case we just chain the longjmp to the caller. Label -1 means no longjmp</span></div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;<span class="comment">///    occurred. Otherwise we jump to the right post-setjmp BB based on the</span></div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;<span class="comment">///    label.</span></div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;<span class="comment">/// * Wasm setjmp / longjmp handling</span></div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;<span class="comment">/// This mode still uses some Emscripten library functions but not JavaScript&#39;s</span></div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;<span class="comment">/// try-catch mechanism. It instead uses Wasm exception handling intrinsics,</span></div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;<span class="comment">/// which will be lowered to exception handling instructions.</span></div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;<span class="comment">/// If there are calls to longjmp()</span></div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;<span class="comment">/// 1) Lower</span></div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;<span class="comment">///      longjmp(env, val)</span></div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;<span class="comment">///    into</span></div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;<span class="comment">///      __wasm_longjmp(env, val)</span></div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;<span class="comment">/// If there are calls to setjmp()</span></div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;<span class="comment">/// 2) and 3): The same as 2) and 3) in Emscripten SjLj.</span></div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;<span class="comment">/// (setjmpTable/setjmpTableSize initialization + setjmp callsite</span></div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;<span class="comment">/// transformation)</span></div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;<span class="comment">/// 4) Create a catchpad with a wasm.catch() intrinsic, which returns the value</span></div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;<span class="comment">/// thrown by __wasm_longjmp function. In Emscripten library, we have this</span></div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;<span class="comment">/// struct:</span></div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;<span class="comment">/// struct __WasmLongjmpArgs {</span></div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;<span class="comment">///   void *env;</span></div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;<span class="comment">///   int val;</span></div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;<span class="comment">/// };</span></div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;<span class="comment">/// struct __WasmLongjmpArgs __wasm_longjmp_args;</span></div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;<span class="comment">/// The thrown value here is a pointer to __wasm_longjmp_args struct object. We</span></div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;<span class="comment">/// use this struct to transfer two values by throwing a single value. Wasm</span></div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;<span class="comment">/// throw and catch instructions are capable of throwing and catching multiple</span></div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;<span class="comment">/// values, but it also requires multivalue support that is currently not very</span></div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;<span class="comment">/// reliable.</span></div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;<span class="comment">/// TODO Switch to throwing and catching two values without using the struct</span></div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;<span class="comment">/// All longjmpable function calls will be converted to an invoke that will</span></div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;<span class="comment">/// unwind to this catchpad in case a longjmp occurs. Within the catchpad, we</span></div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;<span class="comment">/// test the thrown values using testSetjmp function as we do for Emscripten</span></div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;<span class="comment">/// SjLj. The main difference is, in Emscripten SjLj, we need to transform every</span></div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;<span class="comment">/// longjmpable callsite into a sequence of code including testSetjmp() call; in</span></div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;<span class="comment">/// Wasm SjLj we do the testing in only one place, in this catchpad.</span></div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;<span class="comment">/// After testing calling testSetjmp(), if the longjmp does not correspond to</span></div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;<span class="comment">/// one of the setjmps within the current function, it rethrows the longjmp</span></div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;<span class="comment">/// by calling __wasm_longjmp(). If it corresponds to one of setjmps in the</span></div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;<span class="comment">/// function, we jump to the beginning of the function, which contains a switch</span></div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;<span class="comment">/// to each post-setjmp BB. Again, in Emscripten SjLj, this switch is added for</span></div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;<span class="comment">/// every longjmpable callsite; in Wasm SjLj we do this only once at the top of</span></div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;<span class="comment">/// the function. (after setjmpTable/setjmpTableSize initialization)</span></div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;<span class="comment">/// The below is the pseudocode for what we have described</span></div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;<span class="comment">/// entry:</span></div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;<span class="comment">///   Initialize setjmpTable and setjmpTableSize</span></div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;<span class="comment">/// setjmp.dispatch:</span></div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;<span class="comment">///    switch %label {</span></div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;<span class="comment">///      label 1: goto post-setjmp BB 1</span></div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;<span class="comment">///      label 2: goto post-setjmp BB 2</span></div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;<span class="comment">///      ...</span></div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;<span class="comment">///      default: goto splitted next BB</span></div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;<span class="comment">///    }</span></div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;<span class="comment">/// ...</span></div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;<span class="comment">/// bb:</span></div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;<span class="comment">///   invoke void @foo() ;; foo is a longjmpable function</span></div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;<span class="comment">///     to label %next unwind label %catch.dispatch.longjmp</span></div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;<span class="comment">/// ...</span></div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;<span class="comment">/// catch.dispatch.longjmp:</span></div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;<span class="comment">///   %0 = catchswitch within none [label %catch.longjmp] unwind to caller</span></div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;<span class="comment">/// catch.longjmp:</span></div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;<span class="comment">///   %longjmp.args = wasm.catch() ;; struct __WasmLongjmpArgs</span></div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;<span class="comment">///   %env = load &#39;env&#39; field from __WasmLongjmpArgs</span></div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;<span class="comment">///   %val = load &#39;val&#39; field from __WasmLongjmpArgs</span></div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;<span class="comment">///   %label = testSetjmp(mem[%env], setjmpTable, setjmpTableSize);</span></div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;<span class="comment">///   if (%label == 0)</span></div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;<span class="comment">///     __wasm_longjmp(%env, %val)</span></div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;<span class="comment">///   catchret to %setjmp.dispatch</span></div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;<span class="comment">///===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="WebAssemblyUtilities_8h.html">Utils/WebAssemblyUtilities.h</a>&quot;</span></div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="WebAssembly_8h.html">WebAssembly.h</a>&quot;</span></div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="WebAssemblyTargetMachine_8h.html">WebAssemblyTargetMachine.h</a>&quot;</span></div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="StringExtras_8h.html">llvm/ADT/StringExtras.h</a>&quot;</span></div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="TargetPassConfig_8h.html">llvm/CodeGen/TargetPassConfig.h</a>&quot;</span></div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="WasmEHFuncInfo_8h.html">llvm/CodeGen/WasmEHFuncInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DebugInfoMetadata_8h.html">llvm/IR/DebugInfoMetadata.h</a>&quot;</span></div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Dominators_8h.html">llvm/IR/Dominators.h</a>&quot;</span></div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="IRBuilder_8h.html">llvm/IR/IRBuilder.h</a>&quot;</span></div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;<span class="preprocessor">#include &quot;llvm/IR/IntrinsicsWebAssembly.h&quot;</span></div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CommandLine_8h.html">llvm/Support/CommandLine.h</a>&quot;</span></div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="BasicBlockUtils_8h.html">llvm/Transforms/Utils/BasicBlockUtils.h</a>&quot;</span></div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Transforms_2Utils_2Local_8h.html">llvm/Transforms/Utils/Local.h</a>&quot;</span></div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SSAUpdater_8h.html">llvm/Transforms/Utils/SSAUpdater.h</a>&quot;</span></div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SSAUpdaterBulk_8h.html">llvm/Transforms/Utils/SSAUpdaterBulk.h</a>&quot;</span></div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160; </div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespacellvm.html">llvm</a>;</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160; </div>
<div class="line"><a name="l00288"></a><span class="lineno"><a class="line" href="WebAssemblyLowerEmscriptenEHSjLj_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">  288</a></span>&#160;<span class="preprocessor">#define DEBUG_TYPE &quot;wasm-lower-em-ehsjlj&quot;</span></div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160; </div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1list.html">cl::list&lt;std::string&gt;</a></div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    <a class="code" href="WebAssemblyLowerEmscriptenEHSjLj_8cpp.html#a38c40588b66851d6380545c1af5cf7f2">EHAllowlist</a>(<span class="stringliteral">&quot;emscripten-cxx-exceptions-allowed&quot;</span>,</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;                <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;The list of function names in which Emscripten-style &quot;</span></div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;                         <span class="stringliteral">&quot;exception handling is enabled (see emscripten &quot;</span></div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;                         <span class="stringliteral">&quot;EMSCRIPTEN_CATCHING_ALLOWED options)&quot;</span>),</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;                <a class="code" href="namespacellvm_1_1cl.html#ac96f30ba8b117dbd380b88ab8a03732baa2d228ea7bc126361de56c03e7edc3a8">cl::CommaSeparated</a>);</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160; </div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;<span class="keyword">namespace </span>{</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;<span class="keyword">class </span>WebAssemblyLowerEmscriptenEHSjLj final : <span class="keyword">public</span> <a class="code" href="classllvm_1_1ModulePass.html">ModulePass</a> {</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;  <span class="keywordtype">bool</span> EnableEmEH;     <span class="comment">// Enable Emscripten exception handling</span></div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;  <span class="keywordtype">bool</span> EnableEmSjLj;   <span class="comment">// Enable Emscripten setjmp/longjmp handling</span></div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;  <span class="keywordtype">bool</span> EnableWasmSjLj; <span class="comment">// Enable Wasm setjmp/longjmp handling</span></div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;  <span class="keywordtype">bool</span> DoSjLj;         <span class="comment">// Whether we actually perform setjmp/longjmp handling</span></div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160; </div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;  <a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a> *ThrewGV = <span class="keyword">nullptr</span>;      <span class="comment">// __THREW__ (Emscripten)</span></div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;  <a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a> *ThrewValueGV = <span class="keyword">nullptr</span>; <span class="comment">// __threwValue (Emscripten)</span></div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *GetTempRet0F = <span class="keyword">nullptr</span>;       <span class="comment">// getTempRet0() (Emscripten)</span></div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *SetTempRet0F = <span class="keyword">nullptr</span>;       <span class="comment">// setTempRet0() (Emscripten)</span></div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *ResumeF = <span class="keyword">nullptr</span>;            <span class="comment">// __resumeException() (Emscripten)</span></div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *EHTypeIDF = <span class="keyword">nullptr</span>;          <span class="comment">// llvm.eh.typeid.for() (intrinsic)</span></div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *EmLongjmpF = <span class="keyword">nullptr</span>;         <span class="comment">// emscripten_longjmp() (Emscripten)</span></div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *SaveSetjmpF = <span class="keyword">nullptr</span>;        <span class="comment">// saveSetjmp() (Emscripten)</span></div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *TestSetjmpF = <span class="keyword">nullptr</span>;        <span class="comment">// testSetjmp() (Emscripten)</span></div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *WasmLongjmpF = <span class="keyword">nullptr</span>;       <span class="comment">// __wasm_longjmp() (Emscripten)</span></div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *CatchF = <span class="keyword">nullptr</span>;             <span class="comment">// wasm.catch() (intrinsic)</span></div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160; </div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;  <span class="comment">// type of &#39;struct __WasmLongjmpArgs&#39; defined in emscripten</span></div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *LongjmpArgsTy = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160; </div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;  <span class="comment">// __cxa_find_matching_catch_N functions.</span></div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;  <span class="comment">// Indexed by the number of clauses in an original landingpad instruction.</span></div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;  <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;int, Function *&gt;</a> FindMatchingCatches;</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;  <span class="comment">// Map of &lt;function signature string, invoke_ wrappers&gt;</span></div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;  <a class="code" href="classllvm_1_1StringMap.html">StringMap&lt;Function *&gt;</a> InvokeWrappers;</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;  <span class="comment">// Set of allowed function names for exception handling</span></div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;  std::set&lt;std::string&gt; EHAllowlistSet;</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;  <span class="comment">// Functions that contains calls to setjmp</span></div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;Function *, 8&gt;</a> SetjmpUsers;</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160; </div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;  <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> getPassName()<span class="keyword"> const override </span>{</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    <span class="keywordflow">return</span> <span class="stringliteral">&quot;WebAssembly Lower Emscripten Exceptions&quot;</span>;</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;  }</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160; </div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;  <span class="keyword">using</span> InstVector = <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;Instruction *&gt;</a>;</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;  <span class="keywordtype">bool</span> runEHOnFunction(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;  <span class="keywordtype">bool</span> runSjLjOnFunction(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;  <span class="keywordtype">void</span> handleLongjmpableCallsForEmscriptenSjLj(</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;      <a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, InstVector &amp;SetjmpTableInsts,</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;      InstVector &amp;SetjmpTableSizeInsts,</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;      <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;PHINode *&gt;</a> &amp;SetjmpRetPHIs);</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;  <span class="keywordtype">void</span></div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;  handleLongjmpableCallsForWasmSjLj(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, InstVector &amp;SetjmpTableInsts,</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;                                    InstVector &amp;SetjmpTableSizeInsts,</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;                                    <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;PHINode *&gt;</a> &amp;SetjmpRetPHIs);</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *getFindMatchingCatch(<a class="code" href="classllvm_1_1Module.html">Module</a> &amp;M, <span class="keywordtype">unsigned</span> NumClauses);</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160; </div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *wrapInvoke(<a class="code" href="classllvm_1_1CallBase.html">CallBase</a> *CI);</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;  <span class="keywordtype">void</span> wrapTestSetjmp(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, <a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a> <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1Value.html">Value</a> *Threw,</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;                      <a class="code" href="classllvm_1_1Value.html">Value</a> *SetjmpTable, <a class="code" href="classllvm_1_1Value.html">Value</a> *SetjmpTableSize, <a class="code" href="classllvm_1_1Value.html">Value</a> *&amp;Label,</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;                      <a class="code" href="classllvm_1_1Value.html">Value</a> *&amp;LongjmpResult, <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *&amp;CallEmLongjmpBB,</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;                      <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *&amp;CallEmLongjmpBBThrewPHI,</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;                      <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *&amp;CallEmLongjmpBBThrewValuePHI,</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;                      <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *&amp;EndBB);</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *getInvokeWrapper(<a class="code" href="classllvm_1_1CallBase.html">CallBase</a> *CI);</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160; </div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;  <span class="keywordtype">bool</span> areAllExceptionsAllowed()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> EHAllowlistSet.empty(); }</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;  <span class="keywordtype">bool</span> supportsException(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    <span class="keywordflow">return</span> EnableEmEH &amp;&amp; (areAllExceptionsAllowed() ||</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;                          EHAllowlistSet.count(std::string(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;getName())));</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;  }</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;  <span class="keywordtype">void</span> replaceLongjmpWith(<a class="code" href="classllvm_1_1Function.html">Function</a> *LongjmpF, <a class="code" href="classllvm_1_1Function.html">Function</a> *NewF);</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160; </div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;  <span class="keywordtype">void</span> rebuildSSA(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160; </div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">char</span> <a class="code" href="namespacellvm_1_1CallingConv.html#a188c0836f8c3528401f1c236fd93b977">ID</a>;</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160; </div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;  WebAssemblyLowerEmscriptenEHSjLj()</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;      : <a class="code" href="classllvm_1_1ModulePass.html">ModulePass</a>(<a class="code" href="namespacellvm_1_1CallingConv.html#a188c0836f8c3528401f1c236fd93b977">ID</a>), EnableEmEH(WebAssembly::<a class="code" href="namespacellvm_1_1WebAssembly.html#a9d507b0cb1cf288e6fe831666a8b8668">WasmEnableEmEH</a>),</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;        EnableEmSjLj(WebAssembly::<a class="code" href="namespacellvm_1_1WebAssembly.html#aab16d00c5762ae8f5a89ce045b44b07e">WasmEnableEmSjLj</a>),</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;        EnableWasmSjLj(WebAssembly::<a class="code" href="namespacellvm_1_1WebAssembly.html#a877b8fcf196f226d4f2289ebdb1f276b">WasmEnableSjLj</a>) {</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!(EnableEmSjLj &amp;&amp; EnableWasmSjLj) &amp;&amp;</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;           <span class="stringliteral">&quot;Two SjLj modes cannot be turned on at the same time&quot;</span>);</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!(EnableEmEH &amp;&amp; EnableWasmSjLj) &amp;&amp;</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;           <span class="stringliteral">&quot;Wasm SjLj should be only used with Wasm EH&quot;</span>);</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    EHAllowlistSet.insert(<a class="code" href="WebAssemblyLowerEmscriptenEHSjLj_8cpp.html#a38c40588b66851d6380545c1af5cf7f2">EHAllowlist</a>.begin(), <a class="code" href="WebAssemblyLowerEmscriptenEHSjLj_8cpp.html#a38c40588b66851d6380545c1af5cf7f2">EHAllowlist</a>.end());</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;  }</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;  <span class="keywordtype">bool</span> runOnModule(<a class="code" href="classllvm_1_1Module.html">Module</a> &amp;M) <span class="keyword">override</span>;</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160; </div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;  <span class="keywordtype">void</span> getAnalysisUsage(<a class="code" href="classllvm_1_1AnalysisUsage.html">AnalysisUsage</a> &amp;AU)<span class="keyword"> const override </span>{</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">addRequired</a>&lt;<a class="code" href="classllvm_1_1DominatorTreeWrapperPass.html">DominatorTreeWrapperPass</a>&gt;();</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;  }</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;};</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;} <span class="comment">// End anonymous namespace</span></div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160; </div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;<span class="keywordtype">char</span> <a class="code" href="namespacellvm_1_1AArch64PACKey.html#abf4394f452bde3f544999858d71e4b46">WebAssemblyLowerEmscriptenEHSjLj::ID</a> = 0;</div>
<div class="line"><a name="l00386"></a><span class="lineno"><a class="line" href="WebAssemblyLowerEmscriptenEHSjLj_8cpp.html#a24b94fa950f4e47096365189c893d30e">  386</a></span>&#160;<a class="code" href="WebAssemblyLowerEmscriptenEHSjLj_8cpp.html#a24b94fa950f4e47096365189c893d30e">INITIALIZE_PASS</a>(WebAssemblyLowerEmscriptenEHSjLj, <a class="code" href="WebAssemblyLowerEmscriptenEHSjLj_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">DEBUG_TYPE</a>,</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;                <span class="stringliteral">&quot;WebAssembly Lower Emscripten Exceptions / Setjmp / Longjmp&quot;</span>,</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;                <span class="keyword">false</span>, <span class="keyword">false</span>)</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160; </div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;<a class="code" href="classllvm_1_1ModulePass.html">ModulePass</a> *<a class="code" href="namespacellvm.html">llvm</a>::<a class="code" href="namespacellvm.html#a622efffb21f19f09aeb245efa2a01c2f">createWebAssemblyLowerEmscriptenEHSjLj</a>() {</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">new</span> WebAssemblyLowerEmscriptenEHSjLj();</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;}</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160; </div>
<div class="line"><a name="l00394"></a><span class="lineno"><a class="line" href="WebAssemblyLowerEmscriptenEHSjLj_8cpp.html#a8f4bf9ef05ac2193b41802f2e8466f66">  394</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="WebAssemblyLowerEmscriptenEHSjLj_8cpp.html#a8f4bf9ef05ac2193b41802f2e8466f66">canThrow</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *V) {</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">const</span> <span class="keyword">auto</span> *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> = dyn_cast&lt;const Function&gt;(V)) {</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    <span class="comment">// Intrinsics cannot throw</span></div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;isIntrinsic())</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> Name = <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;getName();</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;    <span class="comment">// leave setjmp and longjmp (mostly) alone, we process them properly later</span></div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    <span class="keywordflow">if</span> (Name == <span class="stringliteral">&quot;setjmp&quot;</span> || Name == <span class="stringliteral">&quot;longjmp&quot;</span> || Name == <span class="stringliteral">&quot;emscripten_longjmp&quot;</span>)</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    <span class="keywordflow">return</span> !<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;doesNotThrow();</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;  }</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;  <span class="comment">// not a function, so an indirect call - can throw, we can&#39;t tell</span></div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;}</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160; </div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;<span class="comment">// Get a thread-local global variable with the given name. If it doesn&#39;t exist</span></div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;<span class="comment">// declare it, which will generate an import and assume that it will exist at</span></div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;<span class="comment">// link time.</span></div>
<div class="line"><a name="l00412"></a><span class="lineno"><a class="line" href="WebAssemblyLowerEmscriptenEHSjLj_8cpp.html#a1cc51febed21367b42ed5105d17b2cad">  412</a></span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a> *<a class="code" href="WebAssemblyLowerEmscriptenEHSjLj_8cpp.html#a1cc51febed21367b42ed5105d17b2cad">getGlobalVariable</a>(<a class="code" href="classllvm_1_1Module.html">Module</a> &amp;M, <a class="code" href="classllvm_1_1Type.html">Type</a> *Ty,</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;                                         <a class="code" href="classllvm_1_1WebAssemblyTargetMachine.html">WebAssemblyTargetMachine</a> &amp;<a class="code" href="PassBuilderBindings_8cpp.html#ab76052bb166c65901edb603a3e1f03ab">TM</a>,</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;                                         <span class="keyword">const</span> <span class="keywordtype">char</span> *Name) {</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;  <span class="keyword">auto</span> *GV = dyn_cast&lt;GlobalVariable&gt;(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getOrInsertGlobal(Name, Ty));</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;  <span class="keywordflow">if</span> (!GV)</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    <a class="code" href="namespacellvm.html#a7f2a3d4dcfee70225988aec53ff1e173">report_fatal_error</a>(<a class="code" href="classllvm_1_1Twine.html">Twine</a>(<span class="stringliteral">&quot;unable to create global: &quot;</span>) + Name);</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160; </div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;  <span class="comment">// Variables created by this function are thread local. If the target does not</span></div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;  <span class="comment">// support TLS, we depend on CoalesceFeaturesAndStripAtomics to downgrade it</span></div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;  <span class="comment">// to non-thread-local ones, in which case we don&#39;t allow this object to be</span></div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;  <span class="comment">// linked with other objects using shared memory.</span></div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;  GV-&gt;setThreadLocalMode(<a class="code" href="classllvm_1_1GlobalValue.html#a05c6b3b9372b56d130e005db4837da62a55e32c080bb5217324a597d4fb441660">GlobalValue::GeneralDynamicTLSModel</a>);</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;  <span class="keywordflow">return</span> GV;</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;}</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160; </div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;<span class="comment">// Simple function name mangler.</span></div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;<span class="comment">// This function simply takes LLVM&#39;s string representation of parameter types</span></div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;<span class="comment">// and concatenate them with &#39;_&#39;. There are non-alphanumeric characters but llc</span></div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;<span class="comment">// is ok with it, and we need to postprocess these names after the lowering</span></div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;<span class="comment">// phase anyway.</span></div>
<div class="line"><a name="l00432"></a><span class="lineno"><a class="line" href="WebAssemblyLowerEmscriptenEHSjLj_8cpp.html#a6c8fb36f87b49a215040e2943af69e99">  432</a></span>&#160;<span class="keyword">static</span> std::string <a class="code" href="WebAssemblyLowerEmscriptenEHSjLj_8cpp.html#a6c8fb36f87b49a215040e2943af69e99">getSignature</a>(<a class="code" href="classllvm_1_1FunctionType.html">FunctionType</a> *FTy) {</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;  std::string Sig;</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;  <a class="code" href="classllvm_1_1raw__string__ostream.html">raw_string_ostream</a> <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a>(Sig);</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;  <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; *FTy-&gt;<a class="code" href="classllvm_1_1FunctionType.html#ac453ad79a3d50950bac79bc9dff85918">getReturnType</a>();</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Type.html">Type</a> *ParamTy : FTy-&gt;<a class="code" href="classllvm_1_1FunctionType.html#a0400b7a6fcffcd3892d7bb6de435674a">params</a>())</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;    <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; <span class="stringliteral">&quot;_&quot;</span> &lt;&lt; *ParamTy;</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;  <span class="keywordflow">if</span> (FTy-&gt;<a class="code" href="classllvm_1_1FunctionType.html#aa9d770048c7ab9e08222a50b7bc1be1c">isVarArg</a>())</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; <span class="stringliteral">&quot;_...&quot;</span>;</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;  Sig = <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a>.str();</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;  <a class="code" href="namespacellvm.html#ac9a7de5a04920954ac964059cfc428ad">erase_if</a>(Sig, isSpace);</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;  <span class="comment">// When s2wasm parses .s file, a comma means the end of an argument. So a</span></div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;  <span class="comment">// mangled function name can contain any character but a comma.</span></div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;  <a class="code" href="ConstantMerge_8cpp.html#acf172e841018fd16e65771f5ade0b297">std::replace</a>(Sig.begin(), Sig.end(), <span class="charliteral">&#39;,&#39;</span>, <span class="charliteral">&#39;.&#39;</span>);</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;  <span class="keywordflow">return</span> Sig;</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;}</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160; </div>
<div class="line"><a name="l00448"></a><span class="lineno"><a class="line" href="WebAssemblyLowerEmscriptenEHSjLj_8cpp.html#af1d60b33d700662094d9f8727d92a5a1">  448</a></span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="WebAssemblyLowerEmscriptenEHSjLj_8cpp.html#af1d60b33d700662094d9f8727d92a5a1">getEmscriptenFunction</a>(<a class="code" href="classllvm_1_1FunctionType.html">FunctionType</a> *Ty, <span class="keyword">const</span> <a class="code" href="classllvm_1_1Twine.html">Twine</a> &amp;Name,</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;                                       <a class="code" href="classllvm_1_1Module.html">Module</a> *M) {</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a>* <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> = <a class="code" href="classllvm_1_1Function.html#a6adbed68009f582caa84cdfd2adf36f1">Function::Create</a>(Ty, <a class="code" href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57ca6c93794d7b99cd433e96c53eadb15a6e">GlobalValue::ExternalLinkage</a>, Name, <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>);</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;  <span class="comment">// Tell the linker that this function is expected to be imported from the</span></div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;  <span class="comment">// &#39;env&#39; module.</span></div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;hasFnAttribute(<span class="stringliteral">&quot;wasm-import-module&quot;</span>)) {</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;    <a class="code" href="classllvm_1_1AttrBuilder.html">llvm::AttrBuilder</a> <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>-&gt;getContext());</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;    <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.addAttribute(<span class="stringliteral">&quot;wasm-import-module&quot;</span>, <span class="stringliteral">&quot;env&quot;</span>);</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;    <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;addFnAttrs(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;  }</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;hasFnAttribute(<span class="stringliteral">&quot;wasm-import-name&quot;</span>)) {</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;    <a class="code" href="classllvm_1_1AttrBuilder.html">llvm::AttrBuilder</a> <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>-&gt;getContext());</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.addAttribute(<span class="stringliteral">&quot;wasm-import-name&quot;</span>, <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;getName());</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;    <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;addFnAttrs(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;  }</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>;</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;}</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160; </div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;<span class="comment">// Returns an integer type for the target architecture&#39;s address space.</span></div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;<span class="comment">// i32 for wasm32 and i64 for wasm64.</span></div>
<div class="line"><a name="l00468"></a><span class="lineno"><a class="line" href="WebAssemblyLowerEmscriptenEHSjLj_8cpp.html#a35adc25f1d320d99e1b1a1cce6ab4a4d">  468</a></span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1Type.html">Type</a> *<a class="code" href="WebAssemblyLowerEmscriptenEHSjLj_8cpp.html#a35adc25f1d320d99e1b1a1cce6ab4a4d">getAddrIntType</a>(<a class="code" href="classllvm_1_1Module.html">Module</a> *M) {</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;  <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> IRB(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>-&gt;getContext());</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;  <span class="keywordflow">return</span> IRB.<a class="code" href="classllvm_1_1IRBuilderBase.html#a2cf4a6979d6f79ae5b901aa5f6bacb0d">getIntNTy</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>-&gt;getDataLayout().getPointerSizeInBits());</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;}</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160; </div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;<span class="comment">// Returns an integer pointer type for the target architecture&#39;s address space.</span></div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;<span class="comment">// i32* for wasm32 and i64* for wasm64.</span></div>
<div class="line"><a name="l00475"></a><span class="lineno"><a class="line" href="WebAssemblyLowerEmscriptenEHSjLj_8cpp.html#a3177a68c917d44becd42f00b322731a7">  475</a></span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1Type.html">Type</a> *<a class="code" href="WebAssemblyLowerEmscriptenEHSjLj_8cpp.html#a3177a68c917d44becd42f00b322731a7">getAddrPtrType</a>(<a class="code" href="classllvm_1_1Module.html">Module</a> *M) {</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1Type.html#a86b2306c74ebe71deb8e5fa95926cc75">Type::getIntNPtrTy</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>-&gt;getContext(),</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;                            <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>-&gt;getDataLayout().getPointerSizeInBits());</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;}</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160; </div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;<span class="comment">// Returns an integer whose type is the integer type for the target&#39;s address</span></div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;<span class="comment">// space. Returns (i32 C) for wasm32 and (i64 C) for wasm64, when C is the</span></div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;<span class="comment">// integer.</span></div>
<div class="line"><a name="l00483"></a><span class="lineno"><a class="line" href="WebAssemblyLowerEmscriptenEHSjLj_8cpp.html#a029edc44feabb745fc0c5d8c70d0d934">  483</a></span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="WebAssemblyLowerEmscriptenEHSjLj_8cpp.html#a029edc44feabb745fc0c5d8c70d0d934">getAddrSizeInt</a>(<a class="code" href="classllvm_1_1Module.html">Module</a> *M, <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>) {</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;  <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> IRB(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>-&gt;getContext());</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;  <span class="keywordflow">return</span> IRB.<a class="code" href="classllvm_1_1IRBuilderBase.html#a4c3d404f361fa96125e0126e563e2e6c">getIntN</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>-&gt;getDataLayout().getPointerSizeInBits(), <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;}</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160; </div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;<span class="comment">// Returns __cxa_find_matching_catch_N function, where N = NumClauses + 2.</span></div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;<span class="comment">// This is because a landingpad instruction contains two more arguments, a</span></div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;<span class="comment">// personality function and a cleanup bit, and __cxa_find_matching_catch_N</span></div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;<span class="comment">// functions are named after the number of arguments in the original landingpad</span></div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;<span class="comment">// instruction.</span></div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;<a class="code" href="classllvm_1_1Function.html">Function</a> *</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;WebAssemblyLowerEmscriptenEHSjLj::getFindMatchingCatch(<a class="code" href="classllvm_1_1Module.html">Module</a> &amp;M,</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;                                                       <span class="keywordtype">unsigned</span> NumClauses) {</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;  <span class="keywordflow">if</span> (FindMatchingCatches.<a class="code" href="classllvm_1_1DenseMapBase.html#a53408c95a7bfb5443b43fb2134c3eb23">count</a>(NumClauses))</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;    <span class="keywordflow">return</span> FindMatchingCatches[NumClauses];</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;  <a class="code" href="classllvm_1_1PointerType.html">PointerType</a> *Int8PtrTy = <a class="code" href="classllvm_1_1Type.html#a7fe9ccd4893f4e2caa826126c09545ea">Type::getInt8PtrTy</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getContext());</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Type *, 16&gt;</a> <a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">Args</a>(NumClauses, Int8PtrTy);</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;  <a class="code" href="classllvm_1_1FunctionType.html">FunctionType</a> *FTy = <a class="code" href="classllvm_1_1FunctionType.html#a7e89b55242c964ae61b7850e99cacef0">FunctionType::get</a>(Int8PtrTy, <a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">Args</a>, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> = <a class="code" href="WebAssemblyLowerEmscriptenEHSjLj_8cpp.html#af1d60b33d700662094d9f8727d92a5a1">getEmscriptenFunction</a>(</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;      FTy, <span class="stringliteral">&quot;__cxa_find_matching_catch_&quot;</span> + <a class="code" href="classllvm_1_1Twine.html">Twine</a>(NumClauses + 2), &amp;M);</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;  FindMatchingCatches[NumClauses] = <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>;</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>;</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;}</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160; </div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;<span class="comment">// Generate invoke wrapper seqence with preamble and postamble</span></div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;<span class="comment">// Preamble:</span></div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;<span class="comment">// __THREW__ = 0;</span></div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;<span class="comment">// Postamble:</span></div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;<span class="comment">// %__THREW__.val = __THREW__; __THREW__ = 0;</span></div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;<span class="comment">// Returns %__THREW__.val, which indicates whether an exception is thrown (or</span></div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;<span class="comment">// whether longjmp occurred), for future use.</span></div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;<a class="code" href="classllvm_1_1Value.html">Value</a> *WebAssemblyLowerEmscriptenEHSjLj::wrapInvoke(<a class="code" href="classllvm_1_1CallBase.html">CallBase</a> *CI) {</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;  <a class="code" href="classllvm_1_1Module.html">Module</a> *<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a> = CI-&gt;<a class="code" href="classllvm_1_1Instruction.html#a4ba3a5be6c0e9b9e8a525de055836733">getModule</a>();</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;  <a class="code" href="classllvm_1_1LLVMContext.html">LLVMContext</a> &amp;<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>-&gt;getContext();</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160; </div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;  <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> IRB(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;  IRB.SetInsertPoint(CI);</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160; </div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;  <span class="comment">// Pre-invoke</span></div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;  <span class="comment">// __THREW__ = 0;</span></div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;  IRB.CreateStore(<a class="code" href="WebAssemblyLowerEmscriptenEHSjLj_8cpp.html#a029edc44feabb745fc0c5d8c70d0d934">getAddrSizeInt</a>(M, 0), ThrewGV);</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160; </div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;  <span class="comment">// Invoke function wrapper in JavaScript</span></div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Value *, 16&gt;</a> <a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">Args</a>;</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;  <span class="comment">// Put the pointer to the callee as first argument, so it can be called</span></div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;  <span class="comment">// within the invoke wrapper later</span></div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;  <a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">Args</a>.push_back(CI-&gt;<a class="code" href="classllvm_1_1CallBase.html#a7ac9329ef7292ee640d87f45ce7ae05c">getCalledOperand</a>());</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;  <a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">Args</a>.append(CI-&gt;<a class="code" href="classllvm_1_1CallBase.html#a4fb513d744ca72275932b2c7003f16f6">arg_begin</a>(), CI-&gt;<a class="code" href="classllvm_1_1CallBase.html#ac0f11b96f81b2769dd23d028e3189075">arg_end</a>());</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;  <a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *NewCall = IRB.CreateCall(getInvokeWrapper(CI), <a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">Args</a>);</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;  NewCall-&gt;<a class="code" href="classllvm_1_1Value.html#ae855357b6c5e6e7ed1869272708a3a84">takeName</a>(CI);</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;  NewCall-&gt;<a class="code" href="classllvm_1_1CallBase.html#a0851b4de29686e9c3918449b054cfada">setCallingConv</a>(<a class="code" href="namespacellvm_1_1CallingConv.html#a5b166ae228ebbfdb96736d6022f3feeda7f1f535012fdeda3c9f35f2079b919a7">CallingConv::WASM_EmscriptenInvoke</a>);</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;  NewCall-&gt;<a class="code" href="classllvm_1_1Instruction.html#ae8f5bf5cc06f696b52c709677df00fbf">setDebugLoc</a>(CI-&gt;<a class="code" href="classllvm_1_1Instruction.html#ab4f3bf98b5054831b608852e33427814">getDebugLoc</a>());</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160; </div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;  <span class="comment">// Because we added the pointer to the callee as first argument, all</span></div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;  <span class="comment">// argument attribute indices have to be incremented by one.</span></div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;AttributeSet, 8&gt;</a> ArgAttributes;</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1AttributeList.html">AttributeList</a> &amp;InvokeAL = CI-&gt;<a class="code" href="classllvm_1_1CallBase.html#ae0c55761fce39dd71617690b04385193">getAttributes</a>();</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160; </div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;  <span class="comment">// No attributes for the callee pointer.</span></div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;  ArgAttributes.push_back(<a class="code" href="classllvm_1_1AttributeSet.html">AttributeSet</a>());</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;  <span class="comment">// Copy the argument attributes from the original</span></div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0, <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = CI-&gt;<a class="code" href="classllvm_1_1CallBase.html#adde2ea00dd2613ee41bfe91908e4e68e">arg_size</a>(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> &lt; <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;    ArgAttributes.push_back(InvokeAL.<a class="code" href="classllvm_1_1AttributeList.html#ada7a173c40ca7ac048a4b7099ceb71c0">getParamAttrs</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>));</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160; </div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;  <a class="code" href="classllvm_1_1AttrBuilder.html">AttrBuilder</a> FnAttrs(CI-&gt;<a class="code" href="classllvm_1_1Value.html#ab3fc0225d8aaf8434026c3573f961f2c">getContext</a>(), InvokeAL.<a class="code" href="classllvm_1_1AttributeList.html#a1cf553641e8527095ae4c8ec88a2cd92">getFnAttrs</a>());</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> <a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">Args</a> = FnAttrs.getAllocSizeArgs()) {</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;    <span class="comment">// The allocsize attribute (if any) referes to parameters by index and needs</span></div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;    <span class="comment">// to be adjusted.</span></div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;    <span class="keyword">auto</span> [SizeArg, NEltArg] = *<a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">Args</a>;</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;    SizeArg += 1;</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;    <span class="keywordflow">if</span> (NEltArg)</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;      NEltArg = *NEltArg + 1;</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;    FnAttrs.addAllocSizeAttr(SizeArg, NEltArg);</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;  }</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;  <span class="comment">// In case the callee has &#39;noreturn&#39; attribute, We need to remove it, because</span></div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;  <span class="comment">// we expect invoke wrappers to return.</span></div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;  FnAttrs.removeAttribute(Attribute::NoReturn);</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160; </div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;  <span class="comment">// Reconstruct the AttributesList based on the vector we constructed.</span></div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;  <a class="code" href="classllvm_1_1AttributeList.html">AttributeList</a> NewCallAL = <a class="code" href="classllvm_1_1AttributeList.html#a5cc6492c8f2e06a8bae9dc0d121fab9f">AttributeList::get</a>(</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;      <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, <a class="code" href="classllvm_1_1AttributeSet.html#ae8ed437b15a7ca943716e5284a9cb9a6">AttributeSet::get</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, FnAttrs), InvokeAL.<a class="code" href="classllvm_1_1AttributeList.html#a5604157867b3d226260f6388b987e49a">getRetAttrs</a>(), ArgAttributes);</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;  NewCall-&gt;<a class="code" href="classllvm_1_1CallBase.html#a9da3b29e8e71b9be4645874e1721207a">setAttributes</a>(NewCallAL);</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160; </div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;  CI-&gt;<a class="code" href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">replaceAllUsesWith</a>(NewCall);</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160; </div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;  <span class="comment">// Post-invoke</span></div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;  <span class="comment">// %__THREW__.val = __THREW__; __THREW__ = 0;</span></div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Threw =</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;      IRB.CreateLoad(<a class="code" href="WebAssemblyLowerEmscriptenEHSjLj_8cpp.html#a35adc25f1d320d99e1b1a1cce6ab4a4d">getAddrIntType</a>(M), ThrewGV, ThrewGV-&gt;<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>() + <span class="stringliteral">&quot;.val&quot;</span>);</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;  IRB.CreateStore(<a class="code" href="WebAssemblyLowerEmscriptenEHSjLj_8cpp.html#a029edc44feabb745fc0c5d8c70d0d934">getAddrSizeInt</a>(M, 0), ThrewGV);</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;  <span class="keywordflow">return</span> Threw;</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;}</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160; </div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;<span class="comment">// Get matching invoke wrapper based on callee signature</span></div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;<a class="code" href="classllvm_1_1Function.html">Function</a> *WebAssemblyLowerEmscriptenEHSjLj::getInvokeWrapper(<a class="code" href="classllvm_1_1CallBase.html">CallBase</a> *CI) {</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;  <a class="code" href="classllvm_1_1Module.html">Module</a> *<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a> = CI-&gt;<a class="code" href="classllvm_1_1Instruction.html#a4ba3a5be6c0e9b9e8a525de055836733">getModule</a>();</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Type *, 16&gt;</a> ArgTys;</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;  <a class="code" href="classllvm_1_1FunctionType.html">FunctionType</a> *CalleeFTy = CI-&gt;<a class="code" href="classllvm_1_1CallBase.html#a5e4a09f80c7cd5283dbbc7256d122d12">getFunctionType</a>();</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160; </div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;  std::string Sig = <a class="code" href="WebAssemblyLowerEmscriptenEHSjLj_8cpp.html#a6c8fb36f87b49a215040e2943af69e99">getSignature</a>(CalleeFTy);</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;  <span class="keywordflow">if</span> (InvokeWrappers.<a class="code" href="classllvm_1_1StringMap.html#a49e68e4c86fe0b96c633adea0c366d74">find</a>(Sig) != InvokeWrappers.<a class="code" href="classllvm_1_1StringMap.html#a16e5eaf2df56249e87019be23ee07695">end</a>())</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;    <span class="keywordflow">return</span> InvokeWrappers[Sig];</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160; </div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;  <span class="comment">// Put the pointer to the callee as first argument</span></div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;  ArgTys.push_back(<a class="code" href="classllvm_1_1PointerType.html#a8db49fd5069f21d514e7bb0fd11f0902">PointerType::getUnqual</a>(CalleeFTy));</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;  <span class="comment">// Add argument types</span></div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;  ArgTys.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a7efd1f0c1206d95e4fe01a9b49a57b82">append</a>(CalleeFTy-&gt;<a class="code" href="classllvm_1_1FunctionType.html#a05d5616e1422394b4d350c008b0cc5e0">param_begin</a>(), CalleeFTy-&gt;<a class="code" href="classllvm_1_1FunctionType.html#aeae69a459419ec0bb738cdc73f4fc2a1">param_end</a>());</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160; </div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;  <a class="code" href="classllvm_1_1FunctionType.html">FunctionType</a> *FTy = <a class="code" href="classllvm_1_1FunctionType.html#a7e89b55242c964ae61b7850e99cacef0">FunctionType::get</a>(CalleeFTy-&gt;<a class="code" href="classllvm_1_1FunctionType.html#ac453ad79a3d50950bac79bc9dff85918">getReturnType</a>(), ArgTys,</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;                                        CalleeFTy-&gt;<a class="code" href="classllvm_1_1FunctionType.html#aa9d770048c7ab9e08222a50b7bc1be1c">isVarArg</a>());</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> = <a class="code" href="WebAssemblyLowerEmscriptenEHSjLj_8cpp.html#af1d60b33d700662094d9f8727d92a5a1">getEmscriptenFunction</a>(FTy, <span class="stringliteral">&quot;__invoke_&quot;</span> + Sig, M);</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;  InvokeWrappers[Sig] = <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>;</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>;</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;}</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160; </div>
<div class="line"><a name="l00598"></a><span class="lineno"><a class="line" href="WebAssemblyLowerEmscriptenEHSjLj_8cpp.html#a2dacd2cc5f8d003dbbf793474f06df14">  598</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="WebAssemblyLowerEmscriptenEHSjLj_8cpp.html#a2dacd2cc5f8d003dbbf793474f06df14">canLongjmp</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *Callee) {</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *CalleeF = dyn_cast&lt;Function&gt;(<a class="code" href="AMDGPULibCalls_8cpp.html#a537c835c34f0b44b6ad2696643754390">Callee</a>))</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;    <span class="keywordflow">if</span> (CalleeF-&gt;isIntrinsic())</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160; </div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;  <span class="comment">// Attempting to transform inline assembly will result in something like:</span></div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;  <span class="comment">//     call void @__invoke_void(void ()* asm ...)</span></div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;  <span class="comment">// which is invalid because inline assembly blocks do not have addresses</span></div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;  <span class="comment">// and can&#39;t be passed by pointer. The result is a crash with illegal IR.</span></div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;  <span class="keywordflow">if</span> (isa&lt;InlineAsm&gt;(<a class="code" href="AMDGPULibCalls_8cpp.html#a537c835c34f0b44b6ad2696643754390">Callee</a>))</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;  <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> CalleeName = <a class="code" href="AMDGPULibCalls_8cpp.html#a537c835c34f0b44b6ad2696643754390">Callee</a>-&gt;getName();</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160; </div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;  <span class="comment">// TODO Include more functions or consider checking with mangled prefixes</span></div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160; </div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;  <span class="comment">// The reason we include malloc/free here is to exclude the malloc/free</span></div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;  <span class="comment">// calls generated in setjmp prep / cleanup routines.</span></div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;  <span class="keywordflow">if</span> (CalleeName == <span class="stringliteral">&quot;setjmp&quot;</span> || CalleeName == <span class="stringliteral">&quot;malloc&quot;</span> || CalleeName == <span class="stringliteral">&quot;free&quot;</span>)</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160; </div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;  <span class="comment">// There are functions in Emscripten&#39;s JS glue code or compiler-rt</span></div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;  <span class="keywordflow">if</span> (CalleeName == <span class="stringliteral">&quot;__resumeException&quot;</span> || CalleeName == <span class="stringliteral">&quot;llvm_eh_typeid_for&quot;</span> ||</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;      CalleeName == <span class="stringliteral">&quot;saveSetjmp&quot;</span> || CalleeName == <span class="stringliteral">&quot;testSetjmp&quot;</span> ||</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;      CalleeName == <span class="stringliteral">&quot;getTempRet0&quot;</span> || CalleeName == <span class="stringliteral">&quot;setTempRet0&quot;</span>)</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160; </div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;  <span class="comment">// __cxa_find_matching_catch_N functions cannot longjmp</span></div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="AMDGPULibCalls_8cpp.html#a537c835c34f0b44b6ad2696643754390">Callee</a>-&gt;getName().startswith(<span class="stringliteral">&quot;__cxa_find_matching_catch_&quot;</span>))</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160; </div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;  <span class="comment">// Exception-catching related functions</span></div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;  <span class="comment">// We intentionally treat __cxa_end_catch longjmpable in Wasm SjLj even though</span></div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;  <span class="comment">// it surely cannot longjmp, in order to maintain the unwind relationship from</span></div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;  <span class="comment">// all existing catchpads (and calls within them) to catch.dispatch.longjmp.</span></div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;  <span class="comment">// In Wasm EH + Wasm SjLj, we</span></div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;  <span class="comment">// 1. Make all catchswitch and cleanuppad that unwind to caller unwind to</span></div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;  <span class="comment">//    catch.dispatch.longjmp instead</span></div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;  <span class="comment">// 2. Convert all longjmpable calls to invokes that unwind to</span></div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;  <span class="comment">//    catch.dispatch.longjmp</span></div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;  <span class="comment">// But catchswitch BBs are removed in isel, so if an EH catchswitch (generated</span></div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;  <span class="comment">// from an exception)&#39;s catchpad does not contain any calls that are converted</span></div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;  <span class="comment">// into invokes unwinding to catch.dispatch.longjmp, this unwind relationship</span></div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;  <span class="comment">// (EH catchswitch BB -&gt; catch.dispatch.longjmp BB) is lost and</span></div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;  <span class="comment">// catch.dispatch.longjmp BB can be placed before the EH catchswitch BB in</span></div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;  <span class="comment">// CFGSort.</span></div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;  <span class="comment">// int ret = setjmp(buf);</span></div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;  <span class="comment">// try {</span></div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;  <span class="comment">//   foo(); // longjmps</span></div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;  <span class="comment">// } catch (...) {</span></div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;  <span class="comment">// }</span></div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;  <span class="comment">// Then in this code, if &#39;foo&#39; longjmps, it first unwinds to &#39;catch (...)&#39;</span></div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;  <span class="comment">// catchswitch, and is not caught by that catchswitch because it is a longjmp,</span></div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;  <span class="comment">// then it should next unwind to catch.dispatch.longjmp BB. But if this &#39;catch</span></div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;  <span class="comment">// (...)&#39; catchswitch -&gt; catch.dispatch.longjmp unwind relationship is lost,</span></div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;  <span class="comment">// it will not unwind to catch.dispatch.longjmp, producing an incorrect</span></div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;  <span class="comment">// result.</span></div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;  <span class="comment">// Every catchpad generated by Wasm C++ contains __cxa_end_catch, so we</span></div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;  <span class="comment">// intentionally treat it as longjmpable to work around this problem. This is</span></div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;  <span class="comment">// a hacky fix but an easy one.</span></div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;  <span class="comment">// The comment block in findWasmUnwindDestinations() in</span></div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;  <span class="comment">// SelectionDAGBuilder.cpp is addressing a similar problem.</span></div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;  <span class="keywordflow">if</span> (CalleeName == <span class="stringliteral">&quot;__cxa_end_catch&quot;</span>)</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1WebAssembly.html#a877b8fcf196f226d4f2289ebdb1f276b">WebAssembly::WasmEnableSjLj</a>;</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;  <span class="keywordflow">if</span> (CalleeName == <span class="stringliteral">&quot;__cxa_begin_catch&quot;</span> ||</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;      CalleeName == <span class="stringliteral">&quot;__cxa_allocate_exception&quot;</span> || CalleeName == <span class="stringliteral">&quot;__cxa_throw&quot;</span> ||</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;      CalleeName == <span class="stringliteral">&quot;__clang_call_terminate&quot;</span>)</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160; </div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;  <span class="comment">// std::terminate, which is generated when another exception occurs while</span></div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;  <span class="comment">// handling an exception, cannot longjmp.</span></div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;  <span class="keywordflow">if</span> (CalleeName == <span class="stringliteral">&quot;_ZSt9terminatev&quot;</span>)</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160; </div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;  <span class="comment">// Otherwise we don&#39;t know</span></div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;}</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160; </div>
<div class="line"><a name="l00679"></a><span class="lineno"><a class="line" href="WebAssemblyLowerEmscriptenEHSjLj_8cpp.html#ae471a184f6df0ce3df8700257824906d">  679</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="WebAssemblyLowerEmscriptenEHSjLj_8cpp.html#ae471a184f6df0ce3df8700257824906d">isEmAsmCall</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *Callee) {</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;  <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> CalleeName = <a class="code" href="AMDGPULibCalls_8cpp.html#a537c835c34f0b44b6ad2696643754390">Callee</a>-&gt;getName();</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;  <span class="comment">// This is an exhaustive list from Emscripten&#39;s &lt;emscripten/em_asm.h&gt;.</span></div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;  <span class="keywordflow">return</span> CalleeName == <span class="stringliteral">&quot;emscripten_asm_const_int&quot;</span> ||</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;         CalleeName == <span class="stringliteral">&quot;emscripten_asm_const_double&quot;</span> ||</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;         CalleeName == <span class="stringliteral">&quot;emscripten_asm_const_int_sync_on_main_thread&quot;</span> ||</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;         CalleeName == <span class="stringliteral">&quot;emscripten_asm_const_double_sync_on_main_thread&quot;</span> ||</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;         CalleeName == <span class="stringliteral">&quot;emscripten_asm_const_async_on_main_thread&quot;</span>;</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;}</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160; </div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;<span class="comment">// Generate testSetjmp function call seqence with preamble and postamble.</span></div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;<span class="comment">// The code this generates is equivalent to the following JavaScript code:</span></div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;<span class="comment">// %__threwValue.val = __threwValue;</span></div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;<span class="comment">// if (%__THREW__.val != 0 &amp; %__threwValue.val != 0) {</span></div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;<span class="comment">//   %label = testSetjmp(mem[%__THREW__.val], setjmpTable, setjmpTableSize);</span></div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;<span class="comment">//   if (%label == 0)</span></div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;<span class="comment">//     emscripten_longjmp(%__THREW__.val, %__threwValue.val);</span></div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;<span class="comment">//   setTempRet0(%__threwValue.val);</span></div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;<span class="comment">// } else {</span></div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;<span class="comment">//   %label = -1;</span></div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;<span class="comment">// }</span></div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;<span class="comment">// %longjmp_result = getTempRet0();</span></div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;<span class="comment">// As output parameters. returns %label, %longjmp_result, and the BB the last</span></div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;<span class="comment">// instruction (%longjmp_result = ...) is in.</span></div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;<span class="keywordtype">void</span> WebAssemblyLowerEmscriptenEHSjLj::wrapTestSetjmp(</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, <a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a> <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1Value.html">Value</a> *Threw, <a class="code" href="classllvm_1_1Value.html">Value</a> *SetjmpTable,</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *SetjmpTableSize, <a class="code" href="classllvm_1_1Value.html">Value</a> *&amp;Label, <a class="code" href="classllvm_1_1Value.html">Value</a> *&amp;LongjmpResult,</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *&amp;CallEmLongjmpBB, <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *&amp;CallEmLongjmpBBThrewPHI,</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;    <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *&amp;CallEmLongjmpBBThrewValuePHI, <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *&amp;EndBB) {</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> = <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getParent();</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;  <a class="code" href="classllvm_1_1Module.html">Module</a> *<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a> = <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;getParent();</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;  <a class="code" href="classllvm_1_1LLVMContext.html">LLVMContext</a> &amp;<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>-&gt;getContext();</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;  <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> IRB(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;  IRB.SetCurrentDebugLocation(<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>);</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160; </div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;  <span class="comment">// if (%__THREW__.val != 0 &amp; %__threwValue.val != 0)</span></div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;  IRB.SetInsertPoint(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *ThenBB1 = <a class="code" href="classllvm_1_1BasicBlock.html#ace940beeee97c222f836fe0ac70f6cf5">BasicBlock::Create</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, <span class="stringliteral">&quot;if.then1&quot;</span>, <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *ElseBB1 = <a class="code" href="classllvm_1_1BasicBlock.html#ace940beeee97c222f836fe0ac70f6cf5">BasicBlock::Create</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, <span class="stringliteral">&quot;if.else1&quot;</span>, <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *EndBB1 = <a class="code" href="classllvm_1_1BasicBlock.html#ace940beeee97c222f836fe0ac70f6cf5">BasicBlock::Create</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, <span class="stringliteral">&quot;if.end&quot;</span>, <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *ThrewCmp = IRB.CreateICmpNE(Threw, <a class="code" href="WebAssemblyLowerEmscriptenEHSjLj_8cpp.html#a029edc44feabb745fc0c5d8c70d0d934">getAddrSizeInt</a>(M, 0));</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *ThrewValue = IRB.CreateLoad(IRB.getInt32Ty(), ThrewValueGV,</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;                                     ThrewValueGV-&gt;<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>() + <span class="stringliteral">&quot;.val&quot;</span>);</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *ThrewValueCmp = IRB.CreateICmpNE(ThrewValue, IRB.getInt32(0));</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Cmp1 = IRB.CreateAnd(ThrewCmp, ThrewValueCmp, <span class="stringliteral">&quot;cmp1&quot;</span>);</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;  IRB.CreateCondBr(Cmp1, ThenBB1, ElseBB1);</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160; </div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;  <span class="comment">// Generate call.em.longjmp BB once and share it within the function</span></div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;  <span class="keywordflow">if</span> (!CallEmLongjmpBB) {</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;    <span class="comment">// emscripten_longjmp(%__THREW__.val, %__threwValue.val);</span></div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;    CallEmLongjmpBB = <a class="code" href="classllvm_1_1BasicBlock.html#ace940beeee97c222f836fe0ac70f6cf5">BasicBlock::Create</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, <span class="stringliteral">&quot;call.em.longjmp&quot;</span>, <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;    IRB.SetInsertPoint(CallEmLongjmpBB);</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;    CallEmLongjmpBBThrewPHI = IRB.CreatePHI(<a class="code" href="WebAssemblyLowerEmscriptenEHSjLj_8cpp.html#a35adc25f1d320d99e1b1a1cce6ab4a4d">getAddrIntType</a>(M), 4, <span class="stringliteral">&quot;threw.phi&quot;</span>);</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;    CallEmLongjmpBBThrewValuePHI =</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;        IRB.CreatePHI(IRB.getInt32Ty(), 4, <span class="stringliteral">&quot;threwvalue.phi&quot;</span>);</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;    CallEmLongjmpBBThrewPHI-&gt;<a class="code" href="classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">addIncoming</a>(Threw, ThenBB1);</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;    CallEmLongjmpBBThrewValuePHI-&gt;<a class="code" href="classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">addIncoming</a>(ThrewValue, ThenBB1);</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;    IRB.CreateCall(EmLongjmpF,</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;                   {CallEmLongjmpBBThrewPHI, CallEmLongjmpBBThrewValuePHI});</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;    IRB.CreateUnreachable();</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;    CallEmLongjmpBBThrewPHI-&gt;<a class="code" href="classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">addIncoming</a>(Threw, ThenBB1);</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;    CallEmLongjmpBBThrewValuePHI-&gt;<a class="code" href="classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">addIncoming</a>(ThrewValue, ThenBB1);</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;  }</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160; </div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;  <span class="comment">// %label = testSetjmp(mem[%__THREW__.val], setjmpTable, setjmpTableSize);</span></div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;  <span class="comment">// if (%label == 0)</span></div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;  IRB.SetInsertPoint(ThenBB1);</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *EndBB2 = <a class="code" href="classllvm_1_1BasicBlock.html#ace940beeee97c222f836fe0ac70f6cf5">BasicBlock::Create</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, <span class="stringliteral">&quot;if.end2&quot;</span>, <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *ThrewPtr =</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;      IRB.CreateIntToPtr(Threw, <a class="code" href="WebAssemblyLowerEmscriptenEHSjLj_8cpp.html#a3177a68c917d44becd42f00b322731a7">getAddrPtrType</a>(M), Threw-&gt;<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>() + <span class="stringliteral">&quot;.p&quot;</span>);</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *LoadedThrew = IRB.CreateLoad(<a class="code" href="WebAssemblyLowerEmscriptenEHSjLj_8cpp.html#a35adc25f1d320d99e1b1a1cce6ab4a4d">getAddrIntType</a>(M), ThrewPtr,</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;                                      ThrewPtr-&gt;<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>() + <span class="stringliteral">&quot;.loaded&quot;</span>);</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *ThenLabel = IRB.CreateCall(</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;      TestSetjmpF, {LoadedThrew, SetjmpTable, SetjmpTableSize}, <span class="stringliteral">&quot;label&quot;</span>);</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Cmp2 = IRB.CreateICmpEQ(ThenLabel, IRB.getInt32(0));</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;  IRB.CreateCondBr(Cmp2, CallEmLongjmpBB, EndBB2);</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160; </div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;  <span class="comment">// setTempRet0(%__threwValue.val);</span></div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;  IRB.SetInsertPoint(EndBB2);</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;  IRB.CreateCall(SetTempRet0F, ThrewValue);</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;  IRB.CreateBr(EndBB1);</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160; </div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;  IRB.SetInsertPoint(ElseBB1);</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;  IRB.CreateBr(EndBB1);</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160; </div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;  <span class="comment">// longjmp_result = getTempRet0();</span></div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;  IRB.SetInsertPoint(EndBB1);</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;  <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *LabelPHI = IRB.CreatePHI(IRB.getInt32Ty(), 2, <span class="stringliteral">&quot;label&quot;</span>);</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;  LabelPHI-&gt;<a class="code" href="classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">addIncoming</a>(ThenLabel, EndBB2);</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160; </div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;  LabelPHI-&gt;<a class="code" href="classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">addIncoming</a>(IRB.getInt32(-1), ElseBB1);</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160; </div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;  <span class="comment">// Output parameter assignment</span></div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;  <a class="code" href="namespacellvm_1_1pdb.html#a33e853ec74d48b1340d1d4bae772d30bab021df6aac4654c454f46c77646e745f">Label</a> = LabelPHI;</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;  EndBB = EndBB1;</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;  LongjmpResult = IRB.CreateCall(GetTempRet0F, std::nullopt, <span class="stringliteral">&quot;longjmp_result&quot;</span>);</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;}</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160; </div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;<span class="keywordtype">void</span> WebAssemblyLowerEmscriptenEHSjLj::rebuildSSA(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>) {</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;  <a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> &amp;DT = getAnalysis&lt;DominatorTreeWrapperPass&gt;(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>).getDomTree();</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;  DT.<a class="code" href="classllvm_1_1DominatorTreeBase.html#aa0641ae965656ff9988d67a35140e4d9">recalculate</a>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>); <span class="comment">// CFG has been changed</span></div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160; </div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;  <a class="code" href="classllvm_1_1SSAUpdaterBulk.html">SSAUpdaterBulk</a> <a class="code" href="MemorySSA_8cpp.html#a20a60bdac22b099d87d8cb0c1d554120">SSA</a>;</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> &amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> : <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>) {</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) {</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;      <span class="keywordtype">unsigned</span> VarID = <a class="code" href="MemorySSA_8cpp.html#a20a60bdac22b099d87d8cb0c1d554120">SSA</a>.AddVariable(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getName(), <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getType());</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;      <span class="comment">// If a value is defined by an invoke instruction, it is only available in</span></div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;      <span class="comment">// its normal destination and not in its unwind destination.</span></div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> *II = dyn_cast&lt;InvokeInst&gt;(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;        <a class="code" href="MemorySSA_8cpp.html#a20a60bdac22b099d87d8cb0c1d554120">SSA</a>.AddAvailableValue(VarID, II-&gt;getNormalDest(), II);</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;        <a class="code" href="MemorySSA_8cpp.html#a20a60bdac22b099d87d8cb0c1d554120">SSA</a>.AddAvailableValue(VarID, &amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;U : <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.uses()) {</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;        <span class="keyword">auto</span> *<a class="code" href="classllvm_1_1User.html">User</a> = cast&lt;Instruction&gt;(U.getUser());</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;        <span class="keywordflow">if</span> (<span class="keyword">auto</span> *UserPN = dyn_cast&lt;PHINode&gt;(<a class="code" href="classllvm_1_1User.html">User</a>))</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;          <span class="keywordflow">if</span> (UserPN-&gt;getIncomingBlock(U) == &amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>)</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;        <span class="keywordflow">if</span> (DT.<a class="code" href="classllvm_1_1DominatorTree.html#a5c69311e8d44898dac36a155c3d8691d">dominates</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1User.html">User</a>))</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;        <a class="code" href="MemorySSA_8cpp.html#a20a60bdac22b099d87d8cb0c1d554120">SSA</a>.AddUse(VarID, &amp;U);</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;      }</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;    }</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;  }</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;  <a class="code" href="MemorySSA_8cpp.html#a20a60bdac22b099d87d8cb0c1d554120">SSA</a>.RewriteAllUses(&amp;DT);</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;}</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160; </div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;<span class="comment">// Replace uses of longjmp with a new longjmp function in Emscripten library.</span></div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;<span class="comment">// In Emscripten SjLj, the new function is</span></div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;<span class="comment">//   void emscripten_longjmp(uintptr_t, i32)</span></div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;<span class="comment">// In Wasm SjLj, the new function is</span></div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;<span class="comment">//   void __wasm_longjmp(i8*, i32)</span></div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;<span class="comment">// Because the original libc longjmp function takes (jmp_buf*, i32), we need a</span></div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;<span class="comment">// ptrtoint/bitcast instruction here to make the type match. jmp_buf* will</span></div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;<span class="comment">// eventually be lowered to i32/i64 in the wasm backend.</span></div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;<span class="keywordtype">void</span> WebAssemblyLowerEmscriptenEHSjLj::replaceLongjmpWith(<a class="code" href="classllvm_1_1Function.html">Function</a> *LongjmpF,</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;                                                          <a class="code" href="classllvm_1_1Function.html">Function</a> *NewF) {</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(NewF == EmLongjmpF || NewF == WasmLongjmpF);</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;  <a class="code" href="classllvm_1_1Module.html">Module</a> *<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a> = LongjmpF-&gt;<a class="code" href="classllvm_1_1GlobalValue.html#a9e1fc23a17e97d2d1732e753ae9251ac">getParent</a>();</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;CallInst *, 8&gt;</a> ToErase;</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;  <a class="code" href="classllvm_1_1LLVMContext.html">LLVMContext</a> &amp;<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = LongjmpF-&gt;<a class="code" href="classllvm_1_1GlobalValue.html#a9e1fc23a17e97d2d1732e753ae9251ac">getParent</a>()-&gt;<a class="code" href="classllvm_1_1Module.html#a9c00c70121af456007404bd456047766">getContext</a>();</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;  <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> IRB(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160; </div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;  <span class="comment">// For calls to longjmp, replace it with emscripten_longjmp/__wasm_longjmp and</span></div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;  <span class="comment">// cast its first argument (jmp_buf*) appropriately</span></div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1User.html">User</a> *U : LongjmpF-&gt;<a class="code" href="classllvm_1_1Value.html#ab4e0512c7e1c7adaa56677e3155685f1">users</a>()) {</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;    <span class="keyword">auto</span> *CI = dyn_cast&lt;CallInst&gt;(U);</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;    <span class="keywordflow">if</span> (CI &amp;&amp; CI-&gt;<a class="code" href="classllvm_1_1CallBase.html#a83b8c9e572130f403445c0b0f69b837c">getCalledFunction</a>() == LongjmpF) {</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;      IRB.SetInsertPoint(CI);</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *Env = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;      <span class="keywordflow">if</span> (NewF == EmLongjmpF)</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;        Env =</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;            IRB.CreatePtrToInt(CI-&gt;<a class="code" href="classllvm_1_1CallBase.html#ab2caa29167597390ab2fc3cf30d70389">getArgOperand</a>(0), <a class="code" href="WebAssemblyLowerEmscriptenEHSjLj_8cpp.html#a35adc25f1d320d99e1b1a1cce6ab4a4d">getAddrIntType</a>(M), <span class="stringliteral">&quot;env&quot;</span>);</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;      <span class="keywordflow">else</span> <span class="comment">// WasmLongjmpF</span></div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;        Env =</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;            IRB.CreateBitCast(CI-&gt;<a class="code" href="classllvm_1_1CallBase.html#ab2caa29167597390ab2fc3cf30d70389">getArgOperand</a>(0), IRB.getInt8PtrTy(), <span class="stringliteral">&quot;env&quot;</span>);</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;      IRB.CreateCall(NewF, {Env, CI-&gt;<a class="code" href="classllvm_1_1CallBase.html#ab2caa29167597390ab2fc3cf30d70389">getArgOperand</a>(1)});</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;      ToErase.push_back(CI);</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;    }</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;  }</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : ToErase)</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;    <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;eraseFromParent();</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160; </div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;  <span class="comment">// If we have any remaining uses of longjmp&#39;s function pointer, replace it</span></div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;  <span class="comment">// with (void(*)(jmp_buf*, int))emscripten_longjmp / __wasm_longjmp.</span></div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;  <span class="keywordflow">if</span> (!LongjmpF-&gt;<a class="code" href="classllvm_1_1Value.html#aecb93439702247fe5353a9966f7cefcd">uses</a>().empty()) {</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *NewLongjmp =</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;        IRB.CreateBitCast(NewF, LongjmpF-&gt;<a class="code" href="classllvm_1_1GlobalValue.html#a92041fc7f781ba4fe708eec99139b72f">getType</a>(), <span class="stringliteral">&quot;longjmp.cast&quot;</span>);</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;    LongjmpF-&gt;<a class="code" href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">replaceAllUsesWith</a>(NewLongjmp);</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;  }</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;}</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160; </div>
<div class="line"><a name="l00852"></a><span class="lineno"><a class="line" href="WebAssemblyLowerEmscriptenEHSjLj_8cpp.html#ac083d4bf8d3f3e1e700c33981f97248c">  852</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="WebAssemblyLowerEmscriptenEHSjLj_8cpp.html#ac083d4bf8d3f3e1e700c33981f97248c">containsLongjmpableCalls</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>) {</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> : *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>)</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>)</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">const</span> <span class="keyword">auto</span> *CB = dyn_cast&lt;CallBase&gt;(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="WebAssemblyLowerEmscriptenEHSjLj_8cpp.html#a2dacd2cc5f8d003dbbf793474f06df14">canLongjmp</a>(CB-&gt;getCalledOperand()))</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;}</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160; </div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;<span class="comment">// When a function contains a setjmp call but not other calls that can longjmp,</span></div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;<span class="comment">// we don&#39;t do setjmp transformation for that setjmp. But we need to convert the</span></div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;<span class="comment">// setjmp calls into &quot;i32 0&quot; so they don&#39;t cause link time errors. setjmp always</span></div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;<span class="comment">// returns 0 when called directly.</span></div>
<div class="line"><a name="l00865"></a><span class="lineno"><a class="line" href="WebAssemblyLowerEmscriptenEHSjLj_8cpp.html#a1e5a795e237da6e01636980c98b645ab">  865</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="WebAssemblyLowerEmscriptenEHSjLj_8cpp.html#a1e5a795e237da6e01636980c98b645ab">nullifySetjmp</a>(<a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>) {</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;  <a class="code" href="classllvm_1_1Module.html">Module</a> &amp;<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a> = *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;getParent();</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;  <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> IRB(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getContext());</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *SetjmpF = <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getFunction(<span class="stringliteral">&quot;setjmp&quot;</span>);</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Instruction *, 1&gt;</a> ToErase;</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160; </div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1User.html">User</a> *U : <a class="code" href="namespacellvm.html#a8154638df88e4eaa568b67b23d463dac">make_early_inc_range</a>(SetjmpF-&gt;<a class="code" href="classllvm_1_1Value.html#ab4e0512c7e1c7adaa56677e3155685f1">users</a>())) {</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;    <span class="keyword">auto</span> *CB = cast&lt;CallBase&gt;(U);</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> = CB-&gt;getParent();</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getParent() != <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>) <span class="comment">// in other function</span></div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;    <a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *CI = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;    <span class="comment">// setjmp cannot throw. So if it is an invoke, lower it to a call</span></div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> *II = dyn_cast&lt;InvokeInst&gt;(CB))</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;      CI = <a class="code" href="namespacellvm.html#a2b3fdb09b0789963c439d41fe91e44a1">llvm::changeToCall</a>(II);</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;      CI = cast&lt;CallInst&gt;(CB);</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;    ToErase.push_back(CI);</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;    CI-&gt;<a class="code" href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">replaceAllUsesWith</a>(IRB.<a class="code" href="classllvm_1_1IRBuilderBase.html#ac0e8c554bf1c1e117a74d51df89c137d">getInt32</a>(0));</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;  }</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : ToErase)</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;    <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;eraseFromParent();</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;}</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160; </div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;<span class="keywordtype">bool</span> WebAssemblyLowerEmscriptenEHSjLj::runOnModule(<a class="code" href="classllvm_1_1Module.html">Module</a> &amp;M) {</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;********** Lower Emscripten EH &amp; SjLj **********\n&quot;</span>);</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160; </div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;  <a class="code" href="classllvm_1_1LLVMContext.html">LLVMContext</a> &amp;<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getContext();</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;  <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> IRB(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160; </div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *SetjmpF = <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getFunction(<span class="stringliteral">&quot;setjmp&quot;</span>);</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *LongjmpF = <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getFunction(<span class="stringliteral">&quot;longjmp&quot;</span>);</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160; </div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;  <span class="comment">// In some platforms _setjmp and _longjmp are used instead. Change these to</span></div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;  <span class="comment">// use setjmp/longjmp instead, because we later detect these functions by</span></div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;  <span class="comment">// their names.</span></div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *SetjmpF2 = <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getFunction(<span class="stringliteral">&quot;_setjmp&quot;</span>);</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *LongjmpF2 = <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getFunction(<span class="stringliteral">&quot;_longjmp&quot;</span>);</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;  <span class="keywordflow">if</span> (SetjmpF2) {</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;    <span class="keywordflow">if</span> (SetjmpF) {</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;      <span class="keywordflow">if</span> (SetjmpF-&gt;<a class="code" href="classllvm_1_1Function.html#adf50671db83d2813e0d897ea2cfc9102">getFunctionType</a>() != SetjmpF2-&gt;<a class="code" href="classllvm_1_1Function.html#adf50671db83d2813e0d897ea2cfc9102">getFunctionType</a>())</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;        <a class="code" href="namespacellvm.html#a7f2a3d4dcfee70225988aec53ff1e173">report_fatal_error</a>(<span class="stringliteral">&quot;setjmp and _setjmp have different function types&quot;</span>);</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;      SetjmpF = <a class="code" href="classllvm_1_1Function.html#a6adbed68009f582caa84cdfd2adf36f1">Function::Create</a>(SetjmpF2-&gt;<a class="code" href="classllvm_1_1Function.html#adf50671db83d2813e0d897ea2cfc9102">getFunctionType</a>(),</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;                                 <a class="code" href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57ca6c93794d7b99cd433e96c53eadb15a6e">GlobalValue::ExternalLinkage</a>, <span class="stringliteral">&quot;setjmp&quot;</span>, M);</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;    }</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;    SetjmpF2-&gt;<a class="code" href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">replaceAllUsesWith</a>(SetjmpF);</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;  }</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;  <span class="keywordflow">if</span> (LongjmpF2) {</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;    <span class="keywordflow">if</span> (LongjmpF) {</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;      <span class="keywordflow">if</span> (LongjmpF-&gt;<a class="code" href="classllvm_1_1Function.html#adf50671db83d2813e0d897ea2cfc9102">getFunctionType</a>() != LongjmpF2-&gt;<a class="code" href="classllvm_1_1Function.html#adf50671db83d2813e0d897ea2cfc9102">getFunctionType</a>())</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;        <a class="code" href="namespacellvm.html#a7f2a3d4dcfee70225988aec53ff1e173">report_fatal_error</a>(</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;            <span class="stringliteral">&quot;longjmp and _longjmp have different function types&quot;</span>);</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;      LongjmpF = <a class="code" href="classllvm_1_1Function.html#a6adbed68009f582caa84cdfd2adf36f1">Function::Create</a>(LongjmpF2-&gt;<a class="code" href="classllvm_1_1Function.html#adf50671db83d2813e0d897ea2cfc9102">getFunctionType</a>(),</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;                                  <a class="code" href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57ca6c93794d7b99cd433e96c53eadb15a6e">GlobalValue::ExternalLinkage</a>, <span class="stringliteral">&quot;setjmp&quot;</span>, M);</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;    }</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;    LongjmpF2-&gt;<a class="code" href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">replaceAllUsesWith</a>(LongjmpF);</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;  }</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160; </div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;  <span class="keyword">auto</span> *TPC = getAnalysisIfAvailable&lt;TargetPassConfig&gt;();</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(TPC &amp;&amp; <span class="stringliteral">&quot;Expected a TargetPassConfig&quot;</span>);</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;  <span class="keyword">auto</span> &amp;<a class="code" href="PassBuilderBindings_8cpp.html#ab76052bb166c65901edb603a3e1f03ab">TM</a> = TPC-&gt;getTM&lt;<a class="code" href="classllvm_1_1WebAssemblyTargetMachine.html">WebAssemblyTargetMachine</a>&gt;();</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160; </div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;  <span class="comment">// Declare (or get) global variables __THREW__, __threwValue, and</span></div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;  <span class="comment">// getTempRet0/setTempRet0 function which are used in common for both</span></div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;  <span class="comment">// exception handling and setjmp/longjmp handling</span></div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;  ThrewGV = <a class="code" href="WebAssemblyLowerEmscriptenEHSjLj_8cpp.html#a1cc51febed21367b42ed5105d17b2cad">getGlobalVariable</a>(M, <a class="code" href="WebAssemblyLowerEmscriptenEHSjLj_8cpp.html#a35adc25f1d320d99e1b1a1cce6ab4a4d">getAddrIntType</a>(&amp;M), <a class="code" href="PassBuilderBindings_8cpp.html#ab76052bb166c65901edb603a3e1f03ab">TM</a>, <span class="stringliteral">&quot;__THREW__&quot;</span>);</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;  ThrewValueGV = <a class="code" href="WebAssemblyLowerEmscriptenEHSjLj_8cpp.html#a1cc51febed21367b42ed5105d17b2cad">getGlobalVariable</a>(M, IRB.getInt32Ty(), <a class="code" href="PassBuilderBindings_8cpp.html#ab76052bb166c65901edb603a3e1f03ab">TM</a>, <span class="stringliteral">&quot;__threwValue&quot;</span>);</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;  GetTempRet0F = <a class="code" href="WebAssemblyLowerEmscriptenEHSjLj_8cpp.html#af1d60b33d700662094d9f8727d92a5a1">getEmscriptenFunction</a>(</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;      <a class="code" href="classllvm_1_1FunctionType.html#a7e89b55242c964ae61b7850e99cacef0">FunctionType::get</a>(IRB.getInt32Ty(), <span class="keyword">false</span>), <span class="stringliteral">&quot;getTempRet0&quot;</span>, &amp;M);</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;  SetTempRet0F = <a class="code" href="WebAssemblyLowerEmscriptenEHSjLj_8cpp.html#af1d60b33d700662094d9f8727d92a5a1">getEmscriptenFunction</a>(</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;      <a class="code" href="classllvm_1_1FunctionType.html#a7e89b55242c964ae61b7850e99cacef0">FunctionType::get</a>(IRB.getVoidTy(), IRB.getInt32Ty(), <span class="keyword">false</span>),</div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;      <span class="stringliteral">&quot;setTempRet0&quot;</span>, &amp;M);</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;  GetTempRet0F-&gt;<a class="code" href="classllvm_1_1Function.html#afd978c6f74e279603d47b940f60f1f24">setDoesNotThrow</a>();</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;  SetTempRet0F-&gt;<a class="code" href="classllvm_1_1Function.html#afd978c6f74e279603d47b940f60f1f24">setDoesNotThrow</a>();</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160; </div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;  <span class="keywordtype">bool</span> Changed = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160; </div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;  <span class="comment">// Function registration for exception handling</span></div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;  <span class="keywordflow">if</span> (EnableEmEH) {</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;    <span class="comment">// Register __resumeException function</span></div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;    <a class="code" href="classllvm_1_1FunctionType.html">FunctionType</a> *ResumeFTy =</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;        <a class="code" href="classllvm_1_1FunctionType.html#a7e89b55242c964ae61b7850e99cacef0">FunctionType::get</a>(IRB.getVoidTy(), IRB.getInt8PtrTy(), <span class="keyword">false</span>);</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;    ResumeF = <a class="code" href="WebAssemblyLowerEmscriptenEHSjLj_8cpp.html#af1d60b33d700662094d9f8727d92a5a1">getEmscriptenFunction</a>(ResumeFTy, <span class="stringliteral">&quot;__resumeException&quot;</span>, &amp;M);</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;    ResumeF-&gt;<a class="code" href="classllvm_1_1Function.html#a01875e4204852069dd4b7938cab4140b">addFnAttr</a>(Attribute::NoReturn);</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160; </div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;    <span class="comment">// Register llvm_eh_typeid_for function</span></div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;    <a class="code" href="classllvm_1_1FunctionType.html">FunctionType</a> *EHTypeIDTy =</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;        <a class="code" href="classllvm_1_1FunctionType.html#a7e89b55242c964ae61b7850e99cacef0">FunctionType::get</a>(IRB.getInt32Ty(), IRB.getInt8PtrTy(), <span class="keyword">false</span>);</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;    EHTypeIDF = <a class="code" href="WebAssemblyLowerEmscriptenEHSjLj_8cpp.html#af1d60b33d700662094d9f8727d92a5a1">getEmscriptenFunction</a>(EHTypeIDTy, <span class="stringliteral">&quot;llvm_eh_typeid_for&quot;</span>, &amp;M);</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;  }</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160; </div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;  <span class="comment">// Functions that contains calls to setjmp but don&#39;t have other longjmpable</span></div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;  <span class="comment">// calls within them.</span></div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;Function *, 4&gt;</a> SetjmpUsersToNullify;</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160; </div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;  <span class="keywordflow">if</span> ((EnableEmSjLj || EnableWasmSjLj) &amp;&amp; SetjmpF) {</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;    <span class="comment">// Precompute setjmp users</span></div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1User.html">User</a> *U : SetjmpF-&gt;<a class="code" href="classllvm_1_1Value.html#ab4e0512c7e1c7adaa56677e3155685f1">users</a>()) {</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> *CB = dyn_cast&lt;CallBase&gt;(U)) {</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;        <span class="keyword">auto</span> *UserF = CB-&gt;getFunction();</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;        <span class="comment">// If a function that calls setjmp does not contain any other calls that</span></div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;        <span class="comment">// can longjmp, we don&#39;t need to do any transformation on that function,</span></div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;        <span class="comment">// so can ignore it</span></div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="WebAssemblyLowerEmscriptenEHSjLj_8cpp.html#ac083d4bf8d3f3e1e700c33981f97248c">containsLongjmpableCalls</a>(UserF))</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;          SetjmpUsers.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(UserF);</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;          SetjmpUsersToNullify.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(UserF);</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;        std::string <a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>;</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;        <a class="code" href="classllvm_1_1raw__string__ostream.html">raw_string_ostream</a> <a class="code" href="namespacellvm_1_1X86AS.html#aea2591d7d017866934bcf72ee3dc8a31a1337cc82304bed6c1a811f1a7f308aca">SS</a>(<a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>);</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;        <a class="code" href="namespacellvm_1_1X86AS.html#aea2591d7d017866934bcf72ee3dc8a31a1337cc82304bed6c1a811f1a7f308aca">SS</a> &lt;&lt; *U;</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;        <a class="code" href="namespacellvm.html#a7f2a3d4dcfee70225988aec53ff1e173">report_fatal_error</a>(<a class="code" href="classllvm_1_1Twine.html">Twine</a>(<span class="stringliteral">&quot;Indirect use of setjmp is not supported: &quot;</span>) +</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;                           <a class="code" href="namespacellvm_1_1X86AS.html#aea2591d7d017866934bcf72ee3dc8a31a1337cc82304bed6c1a811f1a7f308aca">SS</a>.str());</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;      }</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;    }</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;  }</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160; </div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;  <span class="keywordtype">bool</span> SetjmpUsed = SetjmpF &amp;&amp; !SetjmpUsers.<a class="code" href="classllvm_1_1SmallPtrSetImplBase.html#af8a50544090e81ac83601aff8f4b0142">empty</a>();</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;  <span class="keywordtype">bool</span> LongjmpUsed = LongjmpF &amp;&amp; !LongjmpF-&gt;<a class="code" href="classllvm_1_1Value.html#a9d7de807ebdfe1819df3ff6cb0f16158">use_empty</a>();</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;  DoSjLj = (EnableEmSjLj | EnableWasmSjLj) &amp;&amp; (SetjmpUsed || LongjmpUsed);</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160; </div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;  <span class="comment">// Function registration and data pre-gathering for setjmp/longjmp handling</span></div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;  <span class="keywordflow">if</span> (DoSjLj) {</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(EnableEmSjLj || EnableWasmSjLj);</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;    <span class="keywordflow">if</span> (EnableEmSjLj) {</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;      <span class="comment">// Register emscripten_longjmp function</span></div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;      <a class="code" href="classllvm_1_1FunctionType.html">FunctionType</a> *FTy = <a class="code" href="classllvm_1_1FunctionType.html#a7e89b55242c964ae61b7850e99cacef0">FunctionType::get</a>(</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;          IRB.getVoidTy(), {getAddrIntType(&amp;M), IRB.getInt32Ty()}, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;      EmLongjmpF = <a class="code" href="WebAssemblyLowerEmscriptenEHSjLj_8cpp.html#af1d60b33d700662094d9f8727d92a5a1">getEmscriptenFunction</a>(FTy, <span class="stringliteral">&quot;emscripten_longjmp&quot;</span>, &amp;M);</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;      EmLongjmpF-&gt;<a class="code" href="classllvm_1_1Function.html#a01875e4204852069dd4b7938cab4140b">addFnAttr</a>(Attribute::NoReturn);</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;    } <span class="keywordflow">else</span> { <span class="comment">// EnableWasmSjLj</span></div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;      <span class="comment">// Register __wasm_longjmp function, which calls __builtin_wasm_longjmp.</span></div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;      <a class="code" href="classllvm_1_1FunctionType.html">FunctionType</a> *FTy = <a class="code" href="classllvm_1_1FunctionType.html#a7e89b55242c964ae61b7850e99cacef0">FunctionType::get</a>(</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;          IRB.getVoidTy(), {IRB.getInt8PtrTy(), IRB.getInt32Ty()}, <span class="keyword">false</span>);</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;      WasmLongjmpF = <a class="code" href="WebAssemblyLowerEmscriptenEHSjLj_8cpp.html#af1d60b33d700662094d9f8727d92a5a1">getEmscriptenFunction</a>(FTy, <span class="stringliteral">&quot;__wasm_longjmp&quot;</span>, &amp;M);</div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;      WasmLongjmpF-&gt;<a class="code" href="classllvm_1_1Function.html#a01875e4204852069dd4b7938cab4140b">addFnAttr</a>(Attribute::NoReturn);</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;    }</div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160; </div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;    <span class="keywordflow">if</span> (SetjmpF) {</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;      <span class="comment">// Register saveSetjmp function</span></div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;      <a class="code" href="classllvm_1_1FunctionType.html">FunctionType</a> *SetjmpFTy = SetjmpF-&gt;<a class="code" href="classllvm_1_1Function.html#adf50671db83d2813e0d897ea2cfc9102">getFunctionType</a>();</div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;      <a class="code" href="classllvm_1_1FunctionType.html">FunctionType</a> *FTy =</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;          <a class="code" href="classllvm_1_1FunctionType.html#a7e89b55242c964ae61b7850e99cacef0">FunctionType::get</a>(<a class="code" href="classllvm_1_1Type.html#a9b90764a470e0862114db285592af2b3">Type::getInt32PtrTy</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>),</div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;                            {SetjmpFTy-&gt;<a class="code" href="classllvm_1_1FunctionType.html#a20cdc3911828248e70dbeae018106b76">getParamType</a>(0), IRB.<a class="code" href="classllvm_1_1Type.html#a30dd396c5b40cd86c1591872e574ccdf">getInt32Ty</a>(),</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;                             <a class="code" href="classllvm_1_1Type.html#a9b90764a470e0862114db285592af2b3">Type::getInt32PtrTy</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>), IRB.<a class="code" href="classllvm_1_1Type.html#a30dd396c5b40cd86c1591872e574ccdf">getInt32Ty</a>()},</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;                            <span class="keyword">false</span>);</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;      SaveSetjmpF = <a class="code" href="WebAssemblyLowerEmscriptenEHSjLj_8cpp.html#af1d60b33d700662094d9f8727d92a5a1">getEmscriptenFunction</a>(FTy, <span class="stringliteral">&quot;saveSetjmp&quot;</span>, &amp;M);</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160; </div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;      <span class="comment">// Register testSetjmp function</span></div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;      FTy = <a class="code" href="classllvm_1_1FunctionType.html#a7e89b55242c964ae61b7850e99cacef0">FunctionType::get</a>(</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;          IRB.getInt32Ty(),</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;          {getAddrIntType(&amp;M), Type::getInt32PtrTy(C), IRB.getInt32Ty()},</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;          <span class="keyword">false</span>);</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;      TestSetjmpF = <a class="code" href="WebAssemblyLowerEmscriptenEHSjLj_8cpp.html#af1d60b33d700662094d9f8727d92a5a1">getEmscriptenFunction</a>(FTy, <span class="stringliteral">&quot;testSetjmp&quot;</span>, &amp;M);</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160; </div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;      <span class="comment">// wasm.catch() will be lowered down to wasm &#39;catch&#39; instruction in</span></div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;      <span class="comment">// instruction selection.</span></div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;      CatchF = <a class="code" href="namespacellvm_1_1Intrinsic.html#aefa39f6b622360ce4e947feb9f671b73">Intrinsic::getDeclaration</a>(&amp;M, Intrinsic::wasm_catch);</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;      <span class="comment">// Type for struct __WasmLongjmpArgs</span></div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;      LongjmpArgsTy = <a class="code" href="classllvm_1_1StructType.html#a18fc4545474c6ebb6f7c547f64f4fb31">StructType::get</a>(IRB.getInt8PtrTy(), <span class="comment">// env</span></div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;                                      IRB.getInt32Ty()    <span class="comment">// val</span></div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;      );</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;    }</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;  }</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160; </div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;  <span class="comment">// Exception handling transformation</span></div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;  <span class="keywordflow">if</span> (EnableEmEH) {</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> : M) {</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.isDeclaration())</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;      Changed |= runEHOnFunction(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;    }</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;  }</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160; </div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;  <span class="comment">// Setjmp/longjmp handling transformation</span></div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;  <span class="keywordflow">if</span> (DoSjLj) {</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;    Changed = <span class="keyword">true</span>; <span class="comment">// We have setjmp or longjmp somewhere</span></div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;    <span class="keywordflow">if</span> (LongjmpF)</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;      replaceLongjmpWith(LongjmpF, EnableEmSjLj ? EmLongjmpF : WasmLongjmpF);</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;    <span class="comment">// Only traverse functions that uses setjmp in order not to insert</span></div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;    <span class="comment">// unnecessary prep / cleanup code in every function</span></div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;    <span class="keywordflow">if</span> (SetjmpF)</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> : SetjmpUsers)</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;        runSjLjOnFunction(*<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;  }</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160; </div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;  <span class="comment">// Replace unnecessary setjmp calls with 0</span></div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;  <span class="keywordflow">if</span> ((EnableEmSjLj || EnableWasmSjLj) &amp;&amp; !SetjmpUsersToNullify.<a class="code" href="classllvm_1_1SmallPtrSetImplBase.html#af8a50544090e81ac83601aff8f4b0142">empty</a>()) {</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;    Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(SetjmpF);</div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> : SetjmpUsersToNullify)</div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;      <a class="code" href="WebAssemblyLowerEmscriptenEHSjLj_8cpp.html#a1e5a795e237da6e01636980c98b645ab">nullifySetjmp</a>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;  }</div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160; </div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;  <span class="comment">// Delete unused global variables and functions</span></div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> *V : {ThrewGV, ThrewValueGV})</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;    <span class="keywordflow">if</span> (V &amp;&amp; V-&gt;use_empty())</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;      V-&gt;eraseFromParent();</div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> *V : {GetTempRet0F, SetTempRet0F, ResumeF, EHTypeIDF, EmLongjmpF,</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;                  SaveSetjmpF, TestSetjmpF, WasmLongjmpF, CatchF})</div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;    <span class="keywordflow">if</span> (V &amp;&amp; V-&gt;use_empty())</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;      V-&gt;eraseFromParent();</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160; </div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;  <span class="keywordflow">return</span> Changed;</div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;}</div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160; </div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;<span class="keywordtype">bool</span> WebAssemblyLowerEmscriptenEHSjLj::runEHOnFunction(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>) {</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;  <a class="code" href="classllvm_1_1Module.html">Module</a> &amp;<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a> = *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getParent();</div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;  <a class="code" href="classllvm_1_1LLVMContext.html">LLVMContext</a> &amp;<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getContext();</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;  <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> IRB(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;  <span class="keywordtype">bool</span> Changed = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Instruction *, 64&gt;</a> ToErase;</div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;LandingPadInst *, 32&gt;</a> LandingPads;</div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160; </div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;  <span class="comment">// rethrow.longjmp BB that will be shared within the function.</span></div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *RethrowLongjmpBB = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;  <span class="comment">// PHI node for the loaded value of __THREW__ global variable in</span></div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;  <span class="comment">// rethrow.longjmp BB</span></div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;  <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *RethrowLongjmpBBThrewPHI = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160; </div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> &amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> : <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>) {</div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;    <span class="keyword">auto</span> *II = dyn_cast&lt;InvokeInst&gt;(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>.getTerminator());</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;    <span class="keywordflow">if</span> (!II)</div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;    Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;    LandingPads.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(II-&gt;getLandingPadInst());</div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;    IRB.SetInsertPoint(II);</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160; </div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="AMDGPULibCalls_8cpp.html#a537c835c34f0b44b6ad2696643754390">Callee</a> = II-&gt;getCalledOperand();</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;    <span class="keywordtype">bool</span> NeedInvoke = supportsException(&amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>) &amp;&amp; <a class="code" href="WebAssemblyLowerEmscriptenEHSjLj_8cpp.html#a8f4bf9ef05ac2193b41802f2e8466f66">canThrow</a>(Callee);</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;    <span class="keywordflow">if</span> (NeedInvoke) {</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;      <span class="comment">// Wrap invoke with invoke wrapper and generate preamble/postamble</span></div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *Threw = wrapInvoke(II);</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;      ToErase.push_back(II);</div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160; </div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;      <span class="comment">// If setjmp/longjmp handling is enabled, the thrown value can be not an</span></div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;      <span class="comment">// exception but a longjmp. If the current function contains calls to</span></div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;      <span class="comment">// setjmp, it will be appropriately handled in runSjLjOnFunction. But even</span></div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;      <span class="comment">// if the function does not contain setjmp calls, we shouldn&#39;t silently</span></div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;      <span class="comment">// ignore longjmps; we should rethrow them so they can be correctly</span></div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;      <span class="comment">// handled in somewhere up the call chain where setjmp is. __THREW__&#39;s</span></div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;      <span class="comment">// value is 0 when nothing happened, 1 when an exception is thrown, and</span></div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;      <span class="comment">// other values when longjmp is thrown.</span></div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;      <span class="comment">//</span></div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;      <span class="comment">// if (%__THREW__.val == 0 || %__THREW__.val == 1)</span></div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;      <span class="comment">//   goto %tail</span></div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;      <span class="comment">// else</span></div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;      <span class="comment">//   goto %longjmp.rethrow</span></div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;      <span class="comment">//</span></div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;      <span class="comment">// rethrow.longjmp: ;; This is longjmp. Rethrow it</span></div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;      <span class="comment">//   %__threwValue.val = __threwValue</span></div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;      <span class="comment">//   emscripten_longjmp(%__THREW__.val, %__threwValue.val);</span></div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;      <span class="comment">//</span></div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;      <span class="comment">// tail: ;; Nothing happened or an exception is thrown</span></div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;      <span class="comment">//   ... Continue exception handling ...</span></div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;      <span class="keywordflow">if</span> (DoSjLj &amp;&amp; EnableEmSjLj &amp;&amp; !SetjmpUsers.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a1f475b0df44ebd7169e720fa1bf9169e">count</a>(&amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>) &amp;&amp;</div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;          <a class="code" href="WebAssemblyLowerEmscriptenEHSjLj_8cpp.html#a2dacd2cc5f8d003dbbf793474f06df14">canLongjmp</a>(Callee)) {</div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;        <span class="comment">// Create longjmp.rethrow BB once and share it within the function</span></div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;        <span class="keywordflow">if</span> (!RethrowLongjmpBB) {</div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;          RethrowLongjmpBB = <a class="code" href="classllvm_1_1BasicBlock.html#ace940beeee97c222f836fe0ac70f6cf5">BasicBlock::Create</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, <span class="stringliteral">&quot;rethrow.longjmp&quot;</span>, &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;          IRB.SetInsertPoint(RethrowLongjmpBB);</div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;          RethrowLongjmpBBThrewPHI =</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;              IRB.CreatePHI(<a class="code" href="WebAssemblyLowerEmscriptenEHSjLj_8cpp.html#a35adc25f1d320d99e1b1a1cce6ab4a4d">getAddrIntType</a>(&amp;M), 4, <span class="stringliteral">&quot;threw.phi&quot;</span>);</div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;          RethrowLongjmpBBThrewPHI-&gt;<a class="code" href="classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">addIncoming</a>(Threw, &amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;          <a class="code" href="classllvm_1_1Value.html">Value</a> *ThrewValue = IRB.CreateLoad(IRB.getInt32Ty(), ThrewValueGV,</div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;                                             ThrewValueGV-&gt;<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>() + <span class="stringliteral">&quot;.val&quot;</span>);</div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;          IRB.CreateCall(EmLongjmpF, {RethrowLongjmpBBThrewPHI, ThrewValue});</div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;          IRB.CreateUnreachable();</div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;          RethrowLongjmpBBThrewPHI-&gt;<a class="code" href="classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">addIncoming</a>(Threw, &amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;        }</div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160; </div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;        IRB.SetInsertPoint(II); <span class="comment">// Restore the insert point back</span></div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;        <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="namespacellvm_1_1CallingConv.html#a5b166ae228ebbfdb96736d6022f3feedad6e9c0ff694f0fca0222e79e772b647e">Tail</a> = <a class="code" href="classllvm_1_1BasicBlock.html#ace940beeee97c222f836fe0ac70f6cf5">BasicBlock::Create</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, <span class="stringliteral">&quot;tail&quot;</span>, &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *CmpEqOne =</div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;            IRB.CreateICmpEQ(Threw, <a class="code" href="WebAssemblyLowerEmscriptenEHSjLj_8cpp.html#a029edc44feabb745fc0c5d8c70d0d934">getAddrSizeInt</a>(&amp;M, 1), <span class="stringliteral">&quot;cmp.eq.one&quot;</span>);</div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *CmpEqZero =</div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;            IRB.CreateICmpEQ(Threw, <a class="code" href="WebAssemblyLowerEmscriptenEHSjLj_8cpp.html#a029edc44feabb745fc0c5d8c70d0d934">getAddrSizeInt</a>(&amp;M, 0), <span class="stringliteral">&quot;cmp.eq.zero&quot;</span>);</div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830ea3a2d5fe857d8f9541136a124c2edec6c">Or</a> = IRB.CreateOr(CmpEqZero, CmpEqOne, <span class="stringliteral">&quot;or&quot;</span>);</div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;        IRB.CreateCondBr(Or, <a class="code" href="namespacellvm_1_1CallingConv.html#a5b166ae228ebbfdb96736d6022f3feedad6e9c0ff694f0fca0222e79e772b647e">Tail</a>, RethrowLongjmpBB);</div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;        IRB.SetInsertPoint(<a class="code" href="namespacellvm_1_1CallingConv.html#a5b166ae228ebbfdb96736d6022f3feedad6e9c0ff694f0fca0222e79e772b647e">Tail</a>);</div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;        <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>.replaceSuccessorsPhiUsesWith(&amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, <a class="code" href="namespacellvm_1_1CallingConv.html#a5b166ae228ebbfdb96736d6022f3feedad6e9c0ff694f0fca0222e79e772b647e">Tail</a>);</div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;      }</div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160; </div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;      <span class="comment">// Insert a branch based on __THREW__ variable</span></div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1X86.html#a86730e94ae6fdf0fe3145b2acc88dea8ac9b4c62f6dc1bc5caf3c768b687cbf7e">Cmp</a> = IRB.CreateICmpEQ(Threw, <a class="code" href="WebAssemblyLowerEmscriptenEHSjLj_8cpp.html#a029edc44feabb745fc0c5d8c70d0d934">getAddrSizeInt</a>(&amp;M, 1), <span class="stringliteral">&quot;cmp&quot;</span>);</div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;      IRB.CreateCondBr(Cmp, II-&gt;getUnwindDest(), II-&gt;getNormalDest());</div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160; </div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;      <span class="comment">// This can&#39;t throw, and we don&#39;t need this invoke, just replace it with a</span></div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;      <span class="comment">// call+branch</span></div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;      <a class="code" href="namespacellvm.html#a2b3fdb09b0789963c439d41fe91e44a1">changeToCall</a>(II);</div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;    }</div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;  }</div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160; </div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;  <span class="comment">// Process resume instructions</span></div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> &amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> : <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>) {</div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;    <span class="comment">// Scan the body of the basic block for resumes</span></div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) {</div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;      <span class="keyword">auto</span> *RI = dyn_cast&lt;ResumeInst&gt;(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;      <span class="keywordflow">if</span> (!RI)</div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;      Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160; </div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;      <span class="comment">// Split the input into legal values</span></div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *Input = RI-&gt;getValue();</div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;      IRB.SetInsertPoint(RI);</div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm.html#a05609d049bfe3c5c2f64711566131a86a28d0edd045e05cf5af64e35ae0c4c6ef">Low</a> = IRB.CreateExtractValue(Input, 0, <span class="stringliteral">&quot;low&quot;</span>);</div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;      <span class="comment">// Create a call to __resumeException function</span></div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;      IRB.CreateCall(ResumeF, {<a class="code" href="namespacellvm.html#a05609d049bfe3c5c2f64711566131a86a28d0edd045e05cf5af64e35ae0c4c6ef">Low</a>});</div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;      <span class="comment">// Add a terminator to the block</span></div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;      IRB.CreateUnreachable();</div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;      ToErase.push_back(RI);</div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;    }</div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;  }</div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160; </div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;  <span class="comment">// Process llvm.eh.typeid.for intrinsics</span></div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> &amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> : <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>) {</div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) {</div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;      <span class="keyword">auto</span> *CI = dyn_cast&lt;CallInst&gt;(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;      <span class="keywordflow">if</span> (!CI)</div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="AMDGPULibCalls_8cpp.html#a537c835c34f0b44b6ad2696643754390">Callee</a> = CI-&gt;<a class="code" href="classllvm_1_1CallBase.html#a83b8c9e572130f403445c0b0f69b837c">getCalledFunction</a>();</div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;      <span class="keywordflow">if</span> (!Callee)</div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="AMDGPULibCalls_8cpp.html#a537c835c34f0b44b6ad2696643754390">Callee</a>-&gt;getIntrinsicID() != Intrinsic::eh_typeid_for)</div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;      Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160; </div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;      IRB.SetInsertPoint(CI);</div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;      <a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *NewCI =</div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;          IRB.CreateCall(EHTypeIDF, CI-&gt;<a class="code" href="classllvm_1_1CallBase.html#ab2caa29167597390ab2fc3cf30d70389">getArgOperand</a>(0), <span class="stringliteral">&quot;typeid&quot;</span>);</div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;      CI-&gt;<a class="code" href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">replaceAllUsesWith</a>(NewCI);</div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;      ToErase.push_back(CI);</div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;    }</div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;  }</div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160; </div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;  <span class="comment">// Look for orphan landingpads, can occur in blocks with no predecessors</span></div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> &amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> : <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>) {</div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>.getFirstNonPHI();</div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> *LPI = dyn_cast&lt;LandingPadInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;      LandingPads.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(LPI);</div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;  }</div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;  Changed |= !LandingPads.<a class="code" href="classllvm_1_1SmallPtrSetImplBase.html#af8a50544090e81ac83601aff8f4b0142">empty</a>();</div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160; </div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;  <span class="comment">// Handle all the landingpad for this function together, as multiple invokes</span></div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;  <span class="comment">// may share a single lp</span></div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1LandingPadInst.html">LandingPadInst</a> *LPI : LandingPads) {</div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;    IRB.SetInsertPoint(LPI);</div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Value *, 16&gt;</a> FMCArgs;</div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0, <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = LPI-&gt;getNumClauses(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> &lt; <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;      <a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="classllvm_1_1Clause.html">Clause</a> = LPI-&gt;getClause(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;      <span class="comment">// TODO Handle filters (= exception specifications).</span></div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;      <span class="comment">// https://bugs.llvm.org/show_bug.cgi?id=50396</span></div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;      <span class="keywordflow">if</span> (LPI-&gt;isCatch(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;        FMCArgs.push_back(<a class="code" href="classllvm_1_1Clause.html">Clause</a>);</div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;    }</div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160; </div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;    <span class="comment">// Create a call to __cxa_find_matching_catch_N function</span></div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;    <a class="code" href="classllvm_1_1Function.html">Function</a> *FMCF = getFindMatchingCatch(M, FMCArgs.size());</div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;    <a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *FMCI = IRB.CreateCall(FMCF, FMCArgs, <span class="stringliteral">&quot;fmc&quot;</span>);</div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Poison = <a class="code" href="classllvm_1_1PoisonValue.html#a1bf08613fb664a2e377a9a72c59a6b66">PoisonValue::get</a>(LPI-&gt;getType());</div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Pair0 = IRB.CreateInsertValue(Poison, FMCI, 0, <span class="stringliteral">&quot;pair0&quot;</span>);</div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *TempRet0 = IRB.CreateCall(GetTempRet0F, std::nullopt, <span class="stringliteral">&quot;tempret0&quot;</span>);</div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Pair1 = IRB.CreateInsertValue(Pair0, TempRet0, 1, <span class="stringliteral">&quot;pair1&quot;</span>);</div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160; </div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;    LPI-&gt;<a class="code" href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">replaceAllUsesWith</a>(Pair1);</div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;    ToErase.push_back(LPI);</div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;  }</div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160; </div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;  <span class="comment">// Erase everything we no longer need in this function</span></div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : ToErase)</div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;    <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;eraseFromParent();</div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160; </div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;  <span class="keywordflow">return</span> Changed;</div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;}</div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160; </div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;<span class="comment">// This tries to get debug info from the instruction before which a new</span></div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;<span class="comment">// instruction will be inserted, and if there&#39;s no debug info in that</span></div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;<span class="comment">// instruction, tries to get the info instead from the previous instruction (if</span></div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;<span class="comment">// any). If none of these has debug info and a DISubprogram is provided, it</span></div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;<span class="comment">// creates a dummy debug info with the first line of the function, because IR</span></div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;<span class="comment">// verifier requires all inlinable callsites should have debug info when both a</span></div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;<span class="comment">// caller and callee have DISubprogram. If none of these conditions are met,</span></div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;<span class="comment">// returns empty info.</span></div>
<div class="line"><a name="l01252"></a><span class="lineno"><a class="line" href="WebAssemblyLowerEmscriptenEHSjLj_8cpp.html#aaf95913e52851622a35765cc28adf643"> 1252</a></span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a> <a class="code" href="WebAssemblyLowerEmscriptenEHSjLj_8cpp.html#aaf95913e52851622a35765cc28adf643">getOrCreateDebugLoc</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *InsertBefore,</div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;                                    <a class="code" href="classllvm_1_1DISubprogram.html">DISubprogram</a> *SP) {</div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(InsertBefore);</div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;  <span class="keywordflow">if</span> (InsertBefore-&gt;<a class="code" href="classllvm_1_1Instruction.html#ab4f3bf98b5054831b608852e33427814">getDebugLoc</a>())</div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;    <span class="keywordflow">return</span> InsertBefore-&gt;<a class="code" href="classllvm_1_1Instruction.html#ab4f3bf98b5054831b608852e33427814">getDebugLoc</a>();</div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Prev = InsertBefore-&gt;<a class="code" href="classllvm_1_1ilist__node__with__parent.html#ae451867ac0034a201153b54cc466386d">getPrevNode</a>();</div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;  <span class="keywordflow">if</span> (Prev &amp;&amp; Prev-&gt;<a class="code" href="classllvm_1_1Instruction.html#ab4f3bf98b5054831b608852e33427814">getDebugLoc</a>())</div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;    <span class="keywordflow">return</span> Prev-&gt;<a class="code" href="classllvm_1_1Instruction.html#ab4f3bf98b5054831b608852e33427814">getDebugLoc</a>();</div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;  <span class="keywordflow">if</span> (SP)</div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1MDNode.html#a7d10a7b9b7f40b04d27ed97c38ea1950">DILocation::get</a>(SP-&gt;<a class="code" href="classllvm_1_1MDNode.html#a936739514bcdb01ddd2826fa70cf15a5">getContext</a>(), SP-&gt;getLine(), 1, SP);</div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a>();</div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;}</div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160; </div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;<span class="keywordtype">bool</span> WebAssemblyLowerEmscriptenEHSjLj::runSjLjOnFunction(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>) {</div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(EnableEmSjLj || EnableWasmSjLj);</div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;  <a class="code" href="classllvm_1_1Module.html">Module</a> &amp;<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a> = *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getParent();</div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;  <a class="code" href="classllvm_1_1LLVMContext.html">LLVMContext</a> &amp;<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getContext();</div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;  <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> IRB(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Instruction *, 64&gt;</a> ToErase;</div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;  <span class="comment">// Vector of %setjmpTable values</span></div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Instruction *, 4&gt;</a> SetjmpTableInsts;</div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;  <span class="comment">// Vector of %setjmpTableSize values</span></div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Instruction *, 4&gt;</a> SetjmpTableSizeInsts;</div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160; </div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;  <span class="comment">// Setjmp preparation</span></div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160; </div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;  <span class="comment">// This instruction effectively means %setjmpTableSize = 4.</span></div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;  <span class="comment">// We create this as an instruction intentionally, and we don&#39;t want to fold</span></div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;  <span class="comment">// this instruction to a constant 4, because this value will be used in</span></div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;  <span class="comment">// SSAUpdater.AddAvailableValue(...) later.</span></div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Entry = &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getEntryBlock();</div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;  <a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a> FirstDL = <a class="code" href="WebAssemblyLowerEmscriptenEHSjLj_8cpp.html#aaf95913e52851622a35765cc28adf643">getOrCreateDebugLoc</a>(&amp;*Entry-&gt;begin(), <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getSubprogram());</div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;  <a class="code" href="namespacellvm.html#ad295cb34421c21507bc9cdefe1ba3f16">SplitBlock</a>(Entry, &amp;*Entry-&gt;getFirstInsertionPt());</div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160; </div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;  <a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> *SetjmpTableSize =</div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;      <a class="code" href="classllvm_1_1BinaryOperator.html#a02ce9966395063ac501ecbc1623deda4">BinaryOperator::Create</a>(<a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a2b016c207343046b2bac45e69e76dcec">Instruction::Add</a>, IRB.getInt32(4), IRB.getInt32(0),</div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;                             <span class="stringliteral">&quot;setjmpTableSize&quot;</span>, Entry-&gt;getTerminator());</div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;  SetjmpTableSize-&gt;<a class="code" href="classllvm_1_1Instruction.html#ae8f5bf5cc06f696b52c709677df00fbf">setDebugLoc</a>(FirstDL);</div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;  <span class="comment">// setjmpTable = (int *) malloc(40);</span></div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *IntPtrTy = <a class="code" href="WebAssemblyLowerEmscriptenEHSjLj_8cpp.html#a35adc25f1d320d99e1b1a1cce6ab4a4d">getAddrIntType</a>(&amp;M);</div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="namespacellvm.html#a10f3d955592ae2bc745f57e5b48ae115">size</a> = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(IntPtrTy, 40);</div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *SetjmpTable =</div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;      <a class="code" href="classllvm_1_1CallInst.html#adfa372a84ae97f18c0132c6b99d9fbb4">CallInst::CreateMalloc</a>(SetjmpTableSize, IntPtrTy, IRB.getInt32Ty(), <a class="code" href="namespacellvm.html#a10f3d955592ae2bc745f57e5b48ae115">size</a>,</div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;                             <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>, <span class="stringliteral">&quot;setjmpTable&quot;</span>);</div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;  SetjmpTable-&gt;<a class="code" href="classllvm_1_1Instruction.html#ae8f5bf5cc06f696b52c709677df00fbf">setDebugLoc</a>(FirstDL);</div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;  <span class="comment">// CallInst::CreateMalloc may return a bitcast instruction if the result types</span></div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;  <span class="comment">// mismatch. We need to set the debug loc for the original call too.</span></div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;  <span class="keyword">auto</span> *MallocCall = SetjmpTable-&gt;<a class="code" href="classllvm_1_1Value.html#a966eb231e7d4e572874d2cb49b18faea">stripPointerCasts</a>();</div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *MallocCallI = dyn_cast&lt;Instruction&gt;(MallocCall)) {</div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;    MallocCallI-&gt;setDebugLoc(FirstDL);</div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;  }</div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;  <span class="comment">// setjmpTable[0] = 0;</span></div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;  IRB.SetInsertPoint(SetjmpTableSize);</div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;  IRB.CreateStore(IRB.getInt32(0), SetjmpTable);</div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;  SetjmpTableInsts.push_back(SetjmpTable);</div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;  SetjmpTableSizeInsts.push_back(SetjmpTableSize);</div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160; </div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;  <span class="comment">// Setjmp transformation</span></div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;PHINode *, 4&gt;</a> SetjmpRetPHIs;</div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *SetjmpF = <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getFunction(<span class="stringliteral">&quot;setjmp&quot;</span>);</div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> *U : <a class="code" href="namespacellvm.html#a8154638df88e4eaa568b67b23d463dac">make_early_inc_range</a>(SetjmpF-&gt;<a class="code" href="classllvm_1_1Value.html#ab4e0512c7e1c7adaa56677e3155685f1">users</a>())) {</div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;    <span class="keyword">auto</span> *CB = cast&lt;CallBase&gt;(U);</div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> = CB-&gt;getParent();</div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getParent() != &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>) <span class="comment">// in other function</span></div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;    <span class="keywordflow">if</span> (CB-&gt;getOperandBundle(<a class="code" href="classllvm_1_1LLVMContext.html#a800c1300065ca1615d2f4fb88623afd5a8997c6b0930e2c05209e95e7172c6cf3">LLVMContext::OB_funclet</a>)) {</div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;      std::string <a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>;</div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;      <a class="code" href="classllvm_1_1raw__string__ostream.html">raw_string_ostream</a> <a class="code" href="namespacellvm_1_1X86AS.html#aea2591d7d017866934bcf72ee3dc8a31a1337cc82304bed6c1a811f1a7f308aca">SS</a>(<a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>);</div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;      <a class="code" href="namespacellvm_1_1X86AS.html#aea2591d7d017866934bcf72ee3dc8a31a1337cc82304bed6c1a811f1a7f308aca">SS</a> &lt;&lt; <span class="stringliteral">&quot;In function &quot;</span> + <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getName() +</div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;                <span class="stringliteral">&quot;: setjmp within a catch clause is not supported in Wasm EH:\n&quot;</span>;</div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;      <a class="code" href="namespacellvm_1_1X86AS.html#aea2591d7d017866934bcf72ee3dc8a31a1337cc82304bed6c1a811f1a7f308aca">SS</a> &lt;&lt; *CB;</div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;      <a class="code" href="namespacellvm.html#a7f2a3d4dcfee70225988aec53ff1e173">report_fatal_error</a>(<a class="code" href="classllvm_1_1StringRef.html">StringRef</a>(<a class="code" href="namespacellvm_1_1X86AS.html#aea2591d7d017866934bcf72ee3dc8a31a1337cc82304bed6c1a811f1a7f308aca">SS</a>.str()));</div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;    }</div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160; </div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;    <a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *CI = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;    <span class="comment">// setjmp cannot throw. So if it is an invoke, lower it to a call</span></div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> *II = dyn_cast&lt;InvokeInst&gt;(CB))</div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;      CI = <a class="code" href="namespacellvm.html#a2b3fdb09b0789963c439d41fe91e44a1">llvm::changeToCall</a>(II);</div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;      CI = cast&lt;CallInst&gt;(CB);</div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160; </div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;    <span class="comment">// The tail is everything right after the call, and will be reached once</span></div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;    <span class="comment">// when setjmp is called, and later when longjmp returns to the setjmp</span></div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="namespacellvm_1_1CallingConv.html#a5b166ae228ebbfdb96736d6022f3feedad6e9c0ff694f0fca0222e79e772b647e">Tail</a> = <a class="code" href="namespacellvm.html#ad295cb34421c21507bc9cdefe1ba3f16">SplitBlock</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, CI-&gt;<a class="code" href="classllvm_1_1ilist__node__with__parent.html#a26708685cc8b94fe3d7092ee080dbb34">getNextNode</a>());</div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;    <span class="comment">// Add a phi to the tail, which will be the output of setjmp, which</span></div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;    <span class="comment">// indicates if this is the first call or a longjmp back. The phi directly</span></div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;    <span class="comment">// uses the right value based on where we arrive from</span></div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;    IRB.SetInsertPoint(<a class="code" href="namespacellvm_1_1CallingConv.html#a5b166ae228ebbfdb96736d6022f3feedad6e9c0ff694f0fca0222e79e772b647e">Tail</a>-&gt;getFirstNonPHI());</div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;    <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *SetjmpRet = IRB.CreatePHI(IRB.getInt32Ty(), 2, <span class="stringliteral">&quot;setjmp.ret&quot;</span>);</div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160; </div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;    <span class="comment">// setjmp initial call returns 0</span></div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;    SetjmpRet-&gt;<a class="code" href="classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">addIncoming</a>(IRB.getInt32(0), <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;    <span class="comment">// The proper output is now this, not the setjmp call itself</span></div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;    CI-&gt;<a class="code" href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">replaceAllUsesWith</a>(SetjmpRet);</div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;    <span class="comment">// longjmp returns to the setjmp will add themselves to this phi</span></div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;    SetjmpRetPHIs.push_back(SetjmpRet);</div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160; </div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;    <span class="comment">// Fix call target</span></div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;    <span class="comment">// Our index in the function is our place in the array + 1 to avoid index</span></div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;    <span class="comment">// 0, because index 0 means the longjmp is not ours to handle.</span></div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;    IRB.SetInsertPoint(CI);</div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">Args</a>[] = {CI-&gt;<a class="code" href="classllvm_1_1CallBase.html#ab2caa29167597390ab2fc3cf30d70389">getArgOperand</a>(0), IRB.getInt32(SetjmpRetPHIs.size()),</div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;                     SetjmpTable, SetjmpTableSize};</div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *NewSetjmpTable =</div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;        IRB.CreateCall(SaveSetjmpF, <a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">Args</a>, <span class="stringliteral">&quot;setjmpTable&quot;</span>);</div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *NewSetjmpTableSize =</div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;        IRB.CreateCall(GetTempRet0F, std::nullopt, <span class="stringliteral">&quot;setjmpTableSize&quot;</span>);</div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;    SetjmpTableInsts.push_back(NewSetjmpTable);</div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;    SetjmpTableSizeInsts.push_back(NewSetjmpTableSize);</div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;    ToErase.push_back(CI);</div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;  }</div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160; </div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;  <span class="comment">// Handle longjmpable calls.</span></div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;  <span class="keywordflow">if</span> (EnableEmSjLj)</div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;    handleLongjmpableCallsForEmscriptenSjLj(</div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;        <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, SetjmpTableInsts, SetjmpTableSizeInsts, SetjmpRetPHIs);</div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;  <span class="keywordflow">else</span> <span class="comment">// EnableWasmSjLj</span></div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;    handleLongjmpableCallsForWasmSjLj(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, SetjmpTableInsts, SetjmpTableSizeInsts,</div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;                                      SetjmpRetPHIs);</div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160; </div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;  <span class="comment">// Erase everything we no longer need in this function</span></div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : ToErase)</div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;    <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;eraseFromParent();</div>
<div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160; </div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;  <span class="comment">// Free setjmpTable buffer before each return instruction + function-exiting</span></div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;  <span class="comment">// call</span></div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Instruction *, 16&gt;</a> ExitingInsts;</div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> &amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> : <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>) {</div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *TI = <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>.getTerminator();</div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;    <span class="keywordflow">if</span> (isa&lt;ReturnInst&gt;(TI))</div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;      ExitingInsts.push_back(TI);</div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;    <span class="comment">// Any &#39;call&#39; instruction with &#39;noreturn&#39; attribute exits the function at</span></div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;    <span class="comment">// this point. If this throws but unwinds to another EH pad within this</span></div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;    <span class="comment">// function instead of exiting, this would have been an &#39;invoke&#39;, which</span></div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;    <span class="comment">// happens if we use Wasm EH or Wasm SjLJ.</span></div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) {</div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> *CI = dyn_cast&lt;CallInst&gt;(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;        <span class="keywordtype">bool</span> <a class="code" href="namespacellvm_1_1codeview.html#a0cc2805b6b89a94c5b5983f95367168ca2f53c1c34a1df353b3853e16e0c1967f">IsNoReturn</a> = CI-&gt;<a class="code" href="classllvm_1_1CallBase.html#a2fbfe5377a984518a7c03d8558df726d">hasFnAttr</a>(Attribute::NoReturn);</div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Function.html">Function</a> *CalleeF = CI-&gt;<a class="code" href="classllvm_1_1CallBase.html#a83b8c9e572130f403445c0b0f69b837c">getCalledFunction</a>())</div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;          <a class="code" href="namespacellvm_1_1codeview.html#a0cc2805b6b89a94c5b5983f95367168ca2f53c1c34a1df353b3853e16e0c1967f">IsNoReturn</a> |= CalleeF-&gt;hasFnAttribute(Attribute::NoReturn);</div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;        <span class="keywordflow">if</span> (IsNoReturn)</div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;          ExitingInsts.push_back(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;      }</div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;    }</div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;  }</div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : ExitingInsts) {</div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;    <a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a> <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a> = <a class="code" href="WebAssemblyLowerEmscriptenEHSjLj_8cpp.html#aaf95913e52851622a35765cc28adf643">getOrCreateDebugLoc</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getSubprogram());</div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;    <span class="comment">// If this existing instruction is a call within a catchpad, we should add</span></div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;    <span class="comment">// it as &quot;funclet&quot; to the operand bundle of &#39;free&#39; call</span></div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;OperandBundleDef, 1&gt;</a> Bundles;</div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> *CB = dyn_cast&lt;CallBase&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> Bundle = CB-&gt;getOperandBundle(<a class="code" href="classllvm_1_1LLVMContext.html#a800c1300065ca1615d2f4fb88623afd5a8997c6b0930e2c05209e95e7172c6cf3">LLVMContext::OB_funclet</a>))</div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;        Bundles.push_back(<a class="code" href="namespacellvm.html#a5536eb574f2ee4e022d04a0418d22fbd">OperandBundleDef</a>(*Bundle));</div>
<div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;    <span class="keyword">auto</span> *<a class="code" href="namespacellvm.html#a264176188c0aadccd3ca5b6929b5a2e1ab24ce0cd392a5b0b8dedc66c25213594">Free</a> = <a class="code" href="classllvm_1_1CallInst.html#a1d37f5425e608e65775ffe52c425a66c">CallInst::CreateFree</a>(SetjmpTable, Bundles, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;    <a class="code" href="namespacellvm.html#a264176188c0aadccd3ca5b6929b5a2e1ab24ce0cd392a5b0b8dedc66c25213594">Free</a>-&gt;setDebugLoc(<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>);</div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;    <span class="comment">// CallInst::CreateFree may create a bitcast instruction if its argument</span></div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;    <span class="comment">// types mismatch. We need to set the debug loc for the bitcast too.</span></div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> *FreeCallI = dyn_cast&lt;CallInst&gt;(Free)) {</div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> *BitCastI = dyn_cast&lt;BitCastInst&gt;(FreeCallI-&gt;getArgOperand(0)))</div>
<div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;        BitCastI-&gt;setDebugLoc(<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>);</div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;    }</div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;  }</div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160; </div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;  <span class="comment">// Every call to saveSetjmp can change setjmpTable and setjmpTableSize</span></div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;  <span class="comment">// (when buffer reallocation occurs)</span></div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;  <span class="comment">// entry:</span></div>
<div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;  <span class="comment">//   setjmpTableSize = 4;</span></div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;  <span class="comment">//   setjmpTable = (int *) malloc(40);</span></div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;  <span class="comment">//   setjmpTable[0] = 0;</span></div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;  <span class="comment">// ...</span></div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;  <span class="comment">// somebb:</span></div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;  <span class="comment">//   setjmpTable = saveSetjmp(env, label, setjmpTable, setjmpTableSize);</span></div>
<div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;  <span class="comment">//   setjmpTableSize = getTempRet0();</span></div>
<div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;  <span class="comment">// So we need to make sure the SSA for these variables is valid so that every</span></div>
<div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;  <span class="comment">// saveSetjmp and testSetjmp calls have the correct arguments.</span></div>
<div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;  <a class="code" href="classllvm_1_1SSAUpdater.html">SSAUpdater</a> SetjmpTableSSA;</div>
<div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;  <a class="code" href="classllvm_1_1SSAUpdater.html">SSAUpdater</a> SetjmpTableSizeSSA;</div>
<div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;  SetjmpTableSSA.<a class="code" href="classllvm_1_1SSAUpdater.html#a4fe3279aae4f726813a672d4a9b26cb1">Initialize</a>(<a class="code" href="classllvm_1_1Type.html#a9b90764a470e0862114db285592af2b3">Type::getInt32PtrTy</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>), <span class="stringliteral">&quot;setjmpTable&quot;</span>);</div>
<div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;  SetjmpTableSizeSSA.<a class="code" href="classllvm_1_1SSAUpdater.html#a4fe3279aae4f726813a672d4a9b26cb1">Initialize</a>(<a class="code" href="classllvm_1_1Type.html#a30dd396c5b40cd86c1591872e574ccdf">Type::getInt32Ty</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>), <span class="stringliteral">&quot;setjmpTableSize&quot;</span>);</div>
<div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : SetjmpTableInsts)</div>
<div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;    SetjmpTableSSA.<a class="code" href="classllvm_1_1SSAUpdater.html#af0d1a82b4e629e834c2ed53e5cbe22ef">AddAvailableValue</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getParent(), <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : SetjmpTableSizeInsts)</div>
<div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;    SetjmpTableSizeSSA.<a class="code" href="classllvm_1_1SSAUpdater.html#af0d1a82b4e629e834c2ed53e5cbe22ef">AddAvailableValue</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getParent(), <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160; </div>
<div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;U : <a class="code" href="namespacellvm.html#a8154638df88e4eaa568b67b23d463dac">make_early_inc_range</a>(SetjmpTable-&gt;<a class="code" href="classllvm_1_1Value.html#aecb93439702247fe5353a9966f7cefcd">uses</a>()))</div>
<div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = dyn_cast&lt;Instruction&gt;(U.getUser()))</div>
<div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getParent() != Entry)</div>
<div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;        SetjmpTableSSA.<a class="code" href="classllvm_1_1SSAUpdater.html#a05c4f6837ee786e83246beeb01e3aa8d">RewriteUse</a>(U);</div>
<div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;U : <a class="code" href="namespacellvm.html#a8154638df88e4eaa568b67b23d463dac">make_early_inc_range</a>(SetjmpTableSize-&gt;<a class="code" href="classllvm_1_1Value.html#aecb93439702247fe5353a9966f7cefcd">uses</a>()))</div>
<div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = dyn_cast&lt;Instruction&gt;(U.getUser()))</div>
<div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getParent() != Entry)</div>
<div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;        SetjmpTableSizeSSA.<a class="code" href="classllvm_1_1SSAUpdater.html#a05c4f6837ee786e83246beeb01e3aa8d">RewriteUse</a>(U);</div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160; </div>
<div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;  <span class="comment">// Finally, our modifications to the cfg can break dominance of SSA variables.</span></div>
<div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;  <span class="comment">// For example, in this code,</span></div>
<div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;  <span class="comment">// if (x()) { .. setjmp() .. }</span></div>
<div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;  <span class="comment">// if (y()) { .. longjmp() .. }</span></div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;  <span class="comment">// We must split the longjmp block, and it can jump into the block splitted</span></div>
<div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;  <span class="comment">// from setjmp one. But that means that when we split the setjmp block, it&#39;s</span></div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;  <span class="comment">// first part no longer dominates its second part - there is a theoretically</span></div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;  <span class="comment">// possible control flow path where x() is false, then y() is true and we</span></div>
<div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;  <span class="comment">// reach the second part of the setjmp block, without ever reaching the first</span></div>
<div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;  <span class="comment">// part. So, we rebuild SSA form here.</span></div>
<div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;  rebuildSSA(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;}</div>
<div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160; </div>
<div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;<span class="comment">// Update each call that can longjmp so it can return to the corresponding</span></div>
<div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;<span class="comment">// setjmp. Refer to 4) of &quot;Emscripten setjmp/longjmp handling&quot; section in the</span></div>
<div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;<span class="comment">// comments at top of the file for details.</span></div>
<div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;<span class="keywordtype">void</span> WebAssemblyLowerEmscriptenEHSjLj::handleLongjmpableCallsForEmscriptenSjLj(</div>
<div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;    <a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, InstVector &amp;SetjmpTableInsts, InstVector &amp;SetjmpTableSizeInsts,</div>
<div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;    <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;PHINode *&gt;</a> &amp;SetjmpRetPHIs) {</div>
<div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;  <a class="code" href="classllvm_1_1Module.html">Module</a> &amp;<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a> = *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getParent();</div>
<div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;  <a class="code" href="classllvm_1_1LLVMContext.html">LLVMContext</a> &amp;<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getContext();</div>
<div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;  <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> IRB(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div>
<div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Instruction *, 64&gt;</a> ToErase;</div>
<div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160; </div>
<div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;  <span class="comment">// We need to pass setjmpTable and setjmpTableSize to testSetjmp function.</span></div>
<div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;  <span class="comment">// These values are defined in the beginning of the function and also in each</span></div>
<div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;  <span class="comment">// setjmp callsite, but we don&#39;t know which values we should use at this</span></div>
<div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;  <span class="comment">// point. So here we arbitraily use the ones defined in the beginning of the</span></div>
<div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;  <span class="comment">// function, and SSAUpdater will later update them to the correct values.</span></div>
<div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *SetjmpTable = *SetjmpTableInsts.begin();</div>
<div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *SetjmpTableSize = *SetjmpTableSizeInsts.begin();</div>
<div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160; </div>
<div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;  <span class="comment">// call.em.longjmp BB that will be shared within the function.</span></div>
<div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *CallEmLongjmpBB = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;  <span class="comment">// PHI node for the loaded value of __THREW__ global variable in</span></div>
<div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;  <span class="comment">// call.em.longjmp BB</span></div>
<div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;  <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *CallEmLongjmpBBThrewPHI = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;  <span class="comment">// PHI node for the loaded value of __threwValue global variable in</span></div>
<div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;  <span class="comment">// call.em.longjmp BB</span></div>
<div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;  <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *CallEmLongjmpBBThrewValuePHI = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;  <span class="comment">// rethrow.exn BB that will be shared within the function.</span></div>
<div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *RethrowExnBB = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160; </div>
<div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;  <span class="comment">// Because we are creating new BBs while processing and don&#39;t want to make</span></div>
<div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;  <span class="comment">// all these newly created BBs candidates again for longjmp processing, we</span></div>
<div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;  <span class="comment">// first make the vector of candidate BBs.</span></div>
<div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;  std::vector&lt;BasicBlock *&gt; BBs;</div>
<div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> &amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> : <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>)</div>
<div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;    BBs.push_back(&amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div>
<div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160; </div>
<div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;  <span class="comment">// BBs.size() will change within the loop, so we query it every time</span></div>
<div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> &lt; BBs.size(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>++) {</div>
<div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> = BBs[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>];</div>
<div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) {</div>
<div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;      <span class="keywordflow">if</span> (isa&lt;InvokeInst&gt;(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;        std::string <a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>;</div>
<div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;        <a class="code" href="classllvm_1_1raw__string__ostream.html">raw_string_ostream</a> <a class="code" href="namespacellvm_1_1X86AS.html#aea2591d7d017866934bcf72ee3dc8a31a1337cc82304bed6c1a811f1a7f308aca">SS</a>(<a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>);</div>
<div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;        <a class="code" href="namespacellvm_1_1X86AS.html#aea2591d7d017866934bcf72ee3dc8a31a1337cc82304bed6c1a811f1a7f308aca">SS</a> &lt;&lt; <span class="stringliteral">&quot;In function &quot;</span> &lt;&lt; <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getName()</div>
<div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;           &lt;&lt; <span class="stringliteral">&quot;: When using Wasm EH with Emscripten SjLj, there is a &quot;</span></div>
<div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;              <span class="stringliteral">&quot;restriction that `setjmp` function call and exception cannot be &quot;</span></div>
<div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;              <span class="stringliteral">&quot;used within the same function:\n&quot;</span>;</div>
<div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;        <a class="code" href="namespacellvm_1_1X86AS.html#aea2591d7d017866934bcf72ee3dc8a31a1337cc82304bed6c1a811f1a7f308aca">SS</a> &lt;&lt; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;        <a class="code" href="namespacellvm.html#a7f2a3d4dcfee70225988aec53ff1e173">report_fatal_error</a>(<a class="code" href="classllvm_1_1StringRef.html">StringRef</a>(<a class="code" href="namespacellvm_1_1X86AS.html#aea2591d7d017866934bcf72ee3dc8a31a1337cc82304bed6c1a811f1a7f308aca">SS</a>.str()));</div>
<div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;      }</div>
<div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;      <span class="keyword">auto</span> *CI = dyn_cast&lt;CallInst&gt;(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;      <span class="keywordflow">if</span> (!CI)</div>
<div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160; </div>
<div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="AMDGPULibCalls_8cpp.html#a537c835c34f0b44b6ad2696643754390">Callee</a> = CI-&gt;<a class="code" href="classllvm_1_1CallBase.html#a7ac9329ef7292ee640d87f45ce7ae05c">getCalledOperand</a>();</div>
<div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="WebAssemblyLowerEmscriptenEHSjLj_8cpp.html#a2dacd2cc5f8d003dbbf793474f06df14">canLongjmp</a>(Callee))</div>
<div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="WebAssemblyLowerEmscriptenEHSjLj_8cpp.html#ae471a184f6df0ce3df8700257824906d">isEmAsmCall</a>(Callee))</div>
<div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;        <a class="code" href="namespacellvm.html#a7f2a3d4dcfee70225988aec53ff1e173">report_fatal_error</a>(<span class="stringliteral">&quot;Cannot use EM_ASM* alongside setjmp/longjmp in &quot;</span> +</div>
<div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;                               <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getName() +</div>
<div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;                               <span class="stringliteral">&quot;. Please consider using EM_JS, or move the &quot;</span></div>
<div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;                               <span class="stringliteral">&quot;EM_ASM into another function.&quot;</span>,</div>
<div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;                           <span class="keyword">false</span>);</div>
<div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160; </div>
<div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *Threw = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;      <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="namespacellvm_1_1CallingConv.html#a5b166ae228ebbfdb96736d6022f3feedad6e9c0ff694f0fca0222e79e772b647e">Tail</a>;</div>
<div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="AMDGPULibCalls_8cpp.html#a537c835c34f0b44b6ad2696643754390">Callee</a>-&gt;getName().startswith(<span class="stringliteral">&quot;__invoke_&quot;</span>)) {</div>
<div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;        <span class="comment">// If invoke wrapper has already been generated for this call in</span></div>
<div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;        <span class="comment">// previous EH phase, search for the load instruction</span></div>
<div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;        <span class="comment">// %__THREW__.val = __THREW__;</span></div>
<div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;        <span class="comment">// in postamble after the invoke wrapper call</span></div>
<div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;        <a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a> *ThrewLI = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;        <a class="code" href="classllvm_1_1StoreInst.html">StoreInst</a> *ThrewResetSI = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;        <span class="keywordflow">for</span> (<span class="keyword">auto</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = std::next(<a class="code" href="classllvm_1_1BasicBlock.html#a98c0a84a5dfa8bce341c829709f171e5">BasicBlock::iterator</a>(CI)), <a class="code" href="namespacellvm_1_1ARM__PROC.html#a1add7850fad3f66c140ecee871460ea4ae9d798593a4a6b5cc48486a453a59e5e">IE</a> = <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;end();</div>
<div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;             <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != <a class="code" href="namespacellvm_1_1ARM__PROC.html#a1add7850fad3f66c140ecee871460ea4ae9d798593a4a6b5cc48486a453a59e5e">IE</a>; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;          <span class="keywordflow">if</span> (<span class="keyword">auto</span> *LI = dyn_cast&lt;LoadInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;            <span class="keywordflow">if</span> (<span class="keyword">auto</span> *GV = dyn_cast&lt;GlobalVariable&gt;(LI-&gt;getPointerOperand()))</div>
<div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;              <span class="keywordflow">if</span> (GV == ThrewGV) {</div>
<div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;                Threw = ThrewLI = LI;</div>
<div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;              }</div>
<div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;        }</div>
<div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;        <span class="comment">// Search for the store instruction after the load above</span></div>
<div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;        <span class="comment">// __THREW__ = 0;</span></div>
<div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;        <span class="keywordflow">for</span> (<span class="keyword">auto</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = std::next(<a class="code" href="classllvm_1_1BasicBlock.html#a98c0a84a5dfa8bce341c829709f171e5">BasicBlock::iterator</a>(ThrewLI)), <a class="code" href="namespacellvm_1_1ARM__PROC.html#a1add7850fad3f66c140ecee871460ea4ae9d798593a4a6b5cc48486a453a59e5e">IE</a> = <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;end();</div>
<div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;             <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != <a class="code" href="namespacellvm_1_1ARM__PROC.html#a1add7850fad3f66c140ecee871460ea4ae9d798593a4a6b5cc48486a453a59e5e">IE</a>; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;          <span class="keywordflow">if</span> (<span class="keyword">auto</span> *<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a> = dyn_cast&lt;StoreInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;            <span class="keywordflow">if</span> (<span class="keyword">auto</span> *GV = dyn_cast&lt;GlobalVariable&gt;(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;getPointerOperand())) {</div>
<div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;              <span class="keywordflow">if</span> (GV == ThrewGV &amp;&amp;</div>
<div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;                  <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;getValueOperand() == <a class="code" href="WebAssemblyLowerEmscriptenEHSjLj_8cpp.html#a029edc44feabb745fc0c5d8c70d0d934">getAddrSizeInt</a>(&amp;M, 0)) {</div>
<div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;                ThrewResetSI = <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>;</div>
<div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;              }</div>
<div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;            }</div>
<div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;          }</div>
<div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;        }</div>
<div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;        <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Threw &amp;&amp; ThrewLI &amp;&amp; <span class="stringliteral">&quot;Cannot find __THREW__ load after invoke&quot;</span>);</div>
<div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;        <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(ThrewResetSI &amp;&amp; <span class="stringliteral">&quot;Cannot find __THREW__ store after invoke&quot;</span>);</div>
<div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;        <a class="code" href="namespacellvm_1_1CallingConv.html#a5b166ae228ebbfdb96736d6022f3feedad6e9c0ff694f0fca0222e79e772b647e">Tail</a> = <a class="code" href="namespacellvm.html#ad295cb34421c21507bc9cdefe1ba3f16">SplitBlock</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, ThrewResetSI-&gt;<a class="code" href="classllvm_1_1ilist__node__with__parent.html#a26708685cc8b94fe3d7092ee080dbb34">getNextNode</a>());</div>
<div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160; </div>
<div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;        <span class="comment">// Wrap call with invoke wrapper and generate preamble/postamble</span></div>
<div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;        Threw = wrapInvoke(CI);</div>
<div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;        ToErase.push_back(CI);</div>
<div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;        <a class="code" href="namespacellvm_1_1CallingConv.html#a5b166ae228ebbfdb96736d6022f3feedad6e9c0ff694f0fca0222e79e772b647e">Tail</a> = <a class="code" href="namespacellvm.html#ad295cb34421c21507bc9cdefe1ba3f16">SplitBlock</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, CI-&gt;<a class="code" href="classllvm_1_1ilist__node__with__parent.html#a26708685cc8b94fe3d7092ee080dbb34">getNextNode</a>());</div>
<div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160; </div>
<div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;        <span class="comment">// If exception handling is enabled, the thrown value can be not a</span></div>
<div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;        <span class="comment">// longjmp but an exception, in which case we shouldn&#39;t silently ignore</span></div>
<div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;        <span class="comment">// exceptions; we should rethrow them.</span></div>
<div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;        <span class="comment">// __THREW__&#39;s value is 0 when nothing happened, 1 when an exception is</span></div>
<div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;        <span class="comment">// thrown, other values when longjmp is thrown.</span></div>
<div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;        <span class="comment">// if (%__THREW__.val == 1)</span></div>
<div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;        <span class="comment">//   goto %eh.rethrow</span></div>
<div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;        <span class="comment">// else</span></div>
<div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;        <span class="comment">//   goto %normal</span></div>
<div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;        <span class="comment">// eh.rethrow: ;; Rethrow exception</span></div>
<div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;        <span class="comment">//   %exn = call @__cxa_find_matching_catch_2() ;; Retrieve thrown ptr</span></div>
<div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;        <span class="comment">//   __resumeException(%exn)</span></div>
<div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;        <span class="comment">// normal:</span></div>
<div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;        <span class="comment">//   &lt;-- Insertion point. Will insert sjlj handling code from here</span></div>
<div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;        <span class="comment">//   goto %tail</span></div>
<div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;        <span class="comment">// tail:</span></div>
<div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;        <span class="comment">//   ...</span></div>
<div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;        <span class="keywordflow">if</span> (supportsException(&amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>) &amp;&amp; <a class="code" href="WebAssemblyLowerEmscriptenEHSjLj_8cpp.html#a8f4bf9ef05ac2193b41802f2e8466f66">canThrow</a>(Callee)) {</div>
<div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;          <span class="comment">// We will add a new conditional branch. So remove the branch created</span></div>
<div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;          <span class="comment">// when we split the BB</span></div>
<div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;          ToErase.push_back(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getTerminator());</div>
<div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160; </div>
<div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;          <span class="comment">// Generate rethrow.exn BB once and share it within the function</span></div>
<div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;          <span class="keywordflow">if</span> (!RethrowExnBB) {</div>
<div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;            RethrowExnBB = <a class="code" href="classllvm_1_1BasicBlock.html#ace940beeee97c222f836fe0ac70f6cf5">BasicBlock::Create</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, <span class="stringliteral">&quot;rethrow.exn&quot;</span>, &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;            IRB.SetInsertPoint(RethrowExnBB);</div>
<div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;            <a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *Exn =</div>
<div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;                IRB.CreateCall(getFindMatchingCatch(M, 0), {}, <span class="stringliteral">&quot;exn&quot;</span>);</div>
<div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;            IRB.CreateCall(ResumeF, {Exn});</div>
<div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;            IRB.CreateUnreachable();</div>
<div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;          }</div>
<div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160; </div>
<div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;          IRB.SetInsertPoint(CI);</div>
<div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;          <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *NormalBB = <a class="code" href="classllvm_1_1BasicBlock.html#ace940beeee97c222f836fe0ac70f6cf5">BasicBlock::Create</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, <span class="stringliteral">&quot;normal&quot;</span>, &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;          <a class="code" href="classllvm_1_1Value.html">Value</a> *CmpEqOne =</div>
<div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;              IRB.CreateICmpEQ(Threw, <a class="code" href="WebAssemblyLowerEmscriptenEHSjLj_8cpp.html#a029edc44feabb745fc0c5d8c70d0d934">getAddrSizeInt</a>(&amp;M, 1), <span class="stringliteral">&quot;cmp.eq.one&quot;</span>);</div>
<div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;          IRB.CreateCondBr(CmpEqOne, RethrowExnBB, NormalBB);</div>
<div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160; </div>
<div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;          IRB.SetInsertPoint(NormalBB);</div>
<div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;          IRB.CreateBr(<a class="code" href="namespacellvm_1_1CallingConv.html#a5b166ae228ebbfdb96736d6022f3feedad6e9c0ff694f0fca0222e79e772b647e">Tail</a>);</div>
<div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;          <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> = NormalBB; <span class="comment">// New insertion point to insert testSetjmp()</span></div>
<div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;        }</div>
<div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;      }</div>
<div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160; </div>
<div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;      <span class="comment">// We need to replace the terminator in Tail - SplitBlock makes BB go</span></div>
<div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;      <span class="comment">// straight to Tail, we need to check if a longjmp occurred, and go to the</span></div>
<div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;      <span class="comment">// right setjmp-tail if so</span></div>
<div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;      ToErase.push_back(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getTerminator());</div>
<div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160; </div>
<div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;      <span class="comment">// Generate a function call to testSetjmp function and preamble/postamble</span></div>
<div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;      <span class="comment">// code to figure out (1) whether longjmp occurred (2) if longjmp</span></div>
<div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;      <span class="comment">// occurred, which setjmp it corresponds to</span></div>
<div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1pdb.html#a33e853ec74d48b1340d1d4bae772d30bab021df6aac4654c454f46c77646e745f">Label</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *LongjmpResult = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;      <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *EndBB = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;      wrapTestSetjmp(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, CI-&gt;<a class="code" href="classllvm_1_1Instruction.html#ab4f3bf98b5054831b608852e33427814">getDebugLoc</a>(), Threw, SetjmpTable, SetjmpTableSize,</div>
<div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;                     Label, LongjmpResult, CallEmLongjmpBB,</div>
<div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;                     CallEmLongjmpBBThrewPHI, CallEmLongjmpBBThrewValuePHI,</div>
<div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;                     EndBB);</div>
<div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Label &amp;&amp; LongjmpResult &amp;&amp; EndBB);</div>
<div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160; </div>
<div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;      <span class="comment">// Create switch instruction</span></div>
<div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;      IRB.SetInsertPoint(EndBB);</div>
<div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;      IRB.SetCurrentDebugLocation(EndBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8f6f9b4a94dc0907499c03a9e1b6918b">back</a>().<a class="code" href="classllvm_1_1Instruction.html#ab4f3bf98b5054831b608852e33427814">getDebugLoc</a>());</div>
<div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;      <a class="code" href="classllvm_1_1SwitchInst.html">SwitchInst</a> *<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a> = IRB.CreateSwitch(Label, <a class="code" href="namespacellvm_1_1CallingConv.html#a5b166ae228ebbfdb96736d6022f3feedad6e9c0ff694f0fca0222e79e772b647e">Tail</a>, SetjmpRetPHIs.size());</div>
<div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;      <span class="comment">// -1 means no longjmp happened, continue normally (will hit the default</span></div>
<div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;      <span class="comment">// switch case). 0 means a longjmp that is not ours to handle, needs a</span></div>
<div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;      <span class="comment">// rethrow. Otherwise the index is the same as the index in P+1 (to avoid</span></div>
<div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;      <span class="comment">// 0).</span></div>
<div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> &lt; SetjmpRetPHIs.size(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>++) {</div>
<div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;        <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;addCase(IRB.getInt32(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> + 1), SetjmpRetPHIs[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>]-&gt;getParent());</div>
<div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;        SetjmpRetPHIs[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>]-&gt;addIncoming(LongjmpResult, EndBB);</div>
<div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;      }</div>
<div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160; </div>
<div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;      <span class="comment">// We are splitting the block here, and must continue to find other calls</span></div>
<div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;      <span class="comment">// in the block - which is now split. so continue to traverse in the Tail</span></div>
<div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;      BBs.push_back(<a class="code" href="namespacellvm_1_1CallingConv.html#a5b166ae228ebbfdb96736d6022f3feedad6e9c0ff694f0fca0222e79e772b647e">Tail</a>);</div>
<div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;    }</div>
<div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;  }</div>
<div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160; </div>
<div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : ToErase)</div>
<div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;    <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;eraseFromParent();</div>
<div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;}</div>
<div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160; </div>
<div class="line"><a name="l01654"></a><span class="lineno"><a class="line" href="WebAssemblyLowerEmscriptenEHSjLj_8cpp.html#af247758ca7555cca09d52ea88682c608"> 1654</a></span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="WebAssemblyLowerEmscriptenEHSjLj_8cpp.html#af247758ca7555cca09d52ea88682c608">getCleanupRetUnwindDest</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1CleanupPadInst.html">CleanupPadInst</a> *CPI) {</div>
<div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1User.html">User</a> *U : CPI-&gt;<a class="code" href="classllvm_1_1Value.html#ab4e0512c7e1c7adaa56677e3155685f1">users</a>())</div>
<div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">const</span> <span class="keyword">auto</span> *CRI = dyn_cast&lt;CleanupReturnInst&gt;(U))</div>
<div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;      <span class="keywordflow">return</span> CRI-&gt;getUnwindDest();</div>
<div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;}</div>
<div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160; </div>
<div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;<span class="comment">// Create a catchpad in which we catch a longjmp&#39;s env and val arguments, test</span></div>
<div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;<span class="comment">// if the longjmp corresponds to one of setjmps in the current function, and if</span></div>
<div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;<span class="comment">// so, jump to the setjmp dispatch BB from which we go to one of post-setjmp</span></div>
<div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;<span class="comment">// BBs. Refer to 4) of &quot;Wasm setjmp/longjmp handling&quot; section in the comments at</span></div>
<div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;<span class="comment">// top of the file for details.</span></div>
<div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;<span class="keywordtype">void</span> WebAssemblyLowerEmscriptenEHSjLj::handleLongjmpableCallsForWasmSjLj(</div>
<div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;    <a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, InstVector &amp;SetjmpTableInsts, InstVector &amp;SetjmpTableSizeInsts,</div>
<div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;    <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;PHINode *&gt;</a> &amp;SetjmpRetPHIs) {</div>
<div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;  <a class="code" href="classllvm_1_1Module.html">Module</a> &amp;<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a> = *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getParent();</div>
<div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;  <a class="code" href="classllvm_1_1LLVMContext.html">LLVMContext</a> &amp;<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getContext();</div>
<div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;  <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> IRB(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div>
<div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160; </div>
<div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;  <span class="comment">// A function with catchswitch/catchpad instruction should have a personality</span></div>
<div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;  <span class="comment">// function attached to it. Search for the wasm personality function, and if</span></div>
<div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;  <span class="comment">// it exists, use it, and if it doesn&#39;t, create a dummy personality function.</span></div>
<div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;  <span class="comment">// (SjLj is not going to call it anyway.)</span></div>
<div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.hasPersonalityFn()) {</div>
<div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;    <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> PersName = <a class="code" href="namespacellvm.html#a11830db2d4bbb3726de01e2a70a98327">getEHPersonalityName</a>(<a class="code" href="namespacellvm.html#a5d56157a385f8cd7d3e54ed87da1ba6aa7939c43653700c52daa7a68a575c3ec5">EHPersonality::Wasm_CXX</a>);</div>
<div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;    <a class="code" href="classllvm_1_1FunctionType.html">FunctionType</a> *PersType =</div>
<div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;        <a class="code" href="classllvm_1_1FunctionType.html#a7e89b55242c964ae61b7850e99cacef0">FunctionType::get</a>(IRB.getInt32Ty(), <span class="comment">/* isVarArg */</span> <span class="keyword">true</span>);</div>
<div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *PersF = <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getOrInsertFunction(PersName, PersType).getCallee();</div>
<div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;    <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.setPersonalityFn(</div>
<div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;        cast&lt;Constant&gt;(IRB.CreateBitCast(PersF, IRB.getInt8PtrTy())));</div>
<div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;  }</div>
<div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160; </div>
<div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;  <span class="comment">// Use the entry BB&#39;s debugloc as a fallback</span></div>
<div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Entry = &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getEntryBlock();</div>
<div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;  <a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a> FirstDL = <a class="code" href="WebAssemblyLowerEmscriptenEHSjLj_8cpp.html#aaf95913e52851622a35765cc28adf643">getOrCreateDebugLoc</a>(&amp;*Entry-&gt;begin(), <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getSubprogram());</div>
<div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;  IRB.SetCurrentDebugLocation(FirstDL);</div>
<div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160; </div>
<div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;  <span class="comment">// Arbitrarily use the ones defined in the beginning of the function.</span></div>
<div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;  <span class="comment">// SSAUpdater will later update them to the correct values.</span></div>
<div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *SetjmpTable = *SetjmpTableInsts.begin();</div>
<div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *SetjmpTableSize = *SetjmpTableSizeInsts.begin();</div>
<div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160; </div>
<div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;  <span class="comment">// Add setjmp.dispatch BB right after the entry block. Because we have</span></div>
<div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;  <span class="comment">// initialized setjmpTable/setjmpTableSize in the entry block and split the</span></div>
<div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;  <span class="comment">// rest into another BB, here &#39;OrigEntry&#39; is the function&#39;s original entry</span></div>
<div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;  <span class="comment">// block before the transformation.</span></div>
<div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;  <span class="comment">// entry:</span></div>
<div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;  <span class="comment">//   setjmpTable / setjmpTableSize initialization</span></div>
<div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;  <span class="comment">// setjmp.dispatch:</span></div>
<div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;  <span class="comment">//   switch will be inserted here later</span></div>
<div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;  <span class="comment">// entry.split: (OrigEntry)</span></div>
<div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;  <span class="comment">//   the original function starts here</span></div>
<div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *OrigEntry = Entry-&gt;getNextNode();</div>
<div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *SetjmpDispatchBB =</div>
<div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;      <a class="code" href="classllvm_1_1BasicBlock.html#ace940beeee97c222f836fe0ac70f6cf5">BasicBlock::Create</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, <span class="stringliteral">&quot;setjmp.dispatch&quot;</span>, &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, OrigEntry);</div>
<div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;  cast&lt;BranchInst&gt;(Entry-&gt;getTerminator())-&gt;setSuccessor(0, SetjmpDispatchBB);</div>
<div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160; </div>
<div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;  <span class="comment">// Create catch.dispatch.longjmp BB and a catchswitch instruction</span></div>
<div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *CatchDispatchLongjmpBB =</div>
<div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;      <a class="code" href="classllvm_1_1BasicBlock.html#ace940beeee97c222f836fe0ac70f6cf5">BasicBlock::Create</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, <span class="stringliteral">&quot;catch.dispatch.longjmp&quot;</span>, &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;  IRB.SetInsertPoint(CatchDispatchLongjmpBB);</div>
<div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;  <a class="code" href="classllvm_1_1CatchSwitchInst.html">CatchSwitchInst</a> *CatchSwitchLongjmp =</div>
<div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;      IRB.CreateCatchSwitch(<a class="code" href="classllvm_1_1ConstantTokenNone.html#a8e29fb8e39fb67b3bb746dbba47fcb29">ConstantTokenNone::get</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>), <span class="keyword">nullptr</span>, 1);</div>
<div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160; </div>
<div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;  <span class="comment">// Create catch.longjmp BB and a catchpad instruction</span></div>
<div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *CatchLongjmpBB = <a class="code" href="classllvm_1_1BasicBlock.html#ace940beeee97c222f836fe0ac70f6cf5">BasicBlock::Create</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, <span class="stringliteral">&quot;catch.longjmp&quot;</span>, &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;  CatchSwitchLongjmp-&gt;<a class="code" href="classllvm_1_1CatchSwitchInst.html#a4b1438bbee79540a0cca9a2c018b71ec">addHandler</a>(CatchLongjmpBB);</div>
<div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;  IRB.SetInsertPoint(CatchLongjmpBB);</div>
<div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;  <a class="code" href="classllvm_1_1CatchPadInst.html">CatchPadInst</a> *CatchPad = IRB.CreateCatchPad(CatchSwitchLongjmp, {});</div>
<div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160; </div>
<div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;  <span class="comment">// Wasm throw and catch instructions can throw and catch multiple values, but</span></div>
<div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;  <span class="comment">// that requires multivalue support in the toolchain, which is currently not</span></div>
<div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;  <span class="comment">// very reliable. We instead throw and catch a pointer to a struct value of</span></div>
<div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;  <span class="comment">// type &#39;struct __WasmLongjmpArgs&#39;, which is defined in Emscripten.</span></div>
<div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *CatchCI =</div>
<div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;      IRB.CreateCall(CatchF, {IRB.getInt32(<a class="code" href="namespacellvm_1_1WebAssembly.html#a2ce2d5b62438d2fa7d7cb37d232f52a1a9401129ec84978eddfb390a99db7adf9">WebAssembly::C_LONGJMP</a>)}, <span class="stringliteral">&quot;thrown&quot;</span>);</div>
<div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *LongjmpArgs =</div>
<div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;      IRB.CreateBitCast(CatchCI, LongjmpArgsTy-&gt;<a class="code" href="classllvm_1_1Type.html#adc01a7457de85fc52a3bb860d7e1c6a4">getPointerTo</a>(), <span class="stringliteral">&quot;longjmp.args&quot;</span>);</div>
<div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *EnvField =</div>
<div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;      IRB.CreateConstGEP2_32(LongjmpArgsTy, LongjmpArgs, 0, 0, <span class="stringliteral">&quot;env_gep&quot;</span>);</div>
<div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *ValField =</div>
<div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;      IRB.CreateConstGEP2_32(LongjmpArgsTy, LongjmpArgs, 0, 1, <span class="stringliteral">&quot;val_gep&quot;</span>);</div>
<div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;  <span class="comment">// void *env = __wasm_longjmp_args.env;</span></div>
<div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Env = IRB.CreateLoad(IRB.getInt8PtrTy(), EnvField, <span class="stringliteral">&quot;env&quot;</span>);</div>
<div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;  <span class="comment">// int val = __wasm_longjmp_args.val;</span></div>
<div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Val = IRB.CreateLoad(IRB.getInt32Ty(), ValField, <span class="stringliteral">&quot;val&quot;</span>);</div>
<div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160; </div>
<div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;  <span class="comment">// %label = testSetjmp(mem[%env], setjmpTable, setjmpTableSize);</span></div>
<div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;  <span class="comment">// if (%label == 0)</span></div>
<div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;  <span class="comment">//   __wasm_longjmp(%env, %val)</span></div>
<div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;  <span class="comment">// catchret to %setjmp.dispatch</span></div>
<div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *ThenBB = <a class="code" href="classllvm_1_1BasicBlock.html#ace940beeee97c222f836fe0ac70f6cf5">BasicBlock::Create</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, <span class="stringliteral">&quot;if.then&quot;</span>, &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *EndBB = <a class="code" href="classllvm_1_1BasicBlock.html#ace940beeee97c222f836fe0ac70f6cf5">BasicBlock::Create</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, <span class="stringliteral">&quot;if.end&quot;</span>, &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *EnvP = IRB.CreateBitCast(Env, <a class="code" href="WebAssemblyLowerEmscriptenEHSjLj_8cpp.html#a3177a68c917d44becd42f00b322731a7">getAddrPtrType</a>(&amp;M), <span class="stringliteral">&quot;env.p&quot;</span>);</div>
<div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *SetjmpID = IRB.CreateLoad(<a class="code" href="WebAssemblyLowerEmscriptenEHSjLj_8cpp.html#a35adc25f1d320d99e1b1a1cce6ab4a4d">getAddrIntType</a>(&amp;M), EnvP, <span class="stringliteral">&quot;setjmp.id&quot;</span>);</div>
<div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1pdb.html#a33e853ec74d48b1340d1d4bae772d30bab021df6aac4654c454f46c77646e745f">Label</a> =</div>
<div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;      IRB.CreateCall(TestSetjmpF, {SetjmpID, SetjmpTable, SetjmpTableSize},</div>
<div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;                     <a class="code" href="namespacellvm.html#a5536eb574f2ee4e022d04a0418d22fbd">OperandBundleDef</a>(<span class="stringliteral">&quot;funclet&quot;</span>, CatchPad), <span class="stringliteral">&quot;label&quot;</span>);</div>
<div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1X86.html#a86730e94ae6fdf0fe3145b2acc88dea8ac9b4c62f6dc1bc5caf3c768b687cbf7e">Cmp</a> = IRB.CreateICmpEQ(Label, IRB.getInt32(0));</div>
<div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;  IRB.CreateCondBr(Cmp, ThenBB, EndBB);</div>
<div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160; </div>
<div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;  IRB.SetInsertPoint(ThenBB);</div>
<div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;  <a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *WasmLongjmpCI = IRB.CreateCall(</div>
<div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;      WasmLongjmpF, {Env, Val}, <a class="code" href="namespacellvm.html#a5536eb574f2ee4e022d04a0418d22fbd">OperandBundleDef</a>(<span class="stringliteral">&quot;funclet&quot;</span>, CatchPad));</div>
<div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;  IRB.CreateUnreachable();</div>
<div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160; </div>
<div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;  IRB.SetInsertPoint(EndBB);</div>
<div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;  <span class="comment">// Jump to setjmp.dispatch block</span></div>
<div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;  IRB.CreateCatchRet(CatchPad, SetjmpDispatchBB);</div>
<div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160; </div>
<div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;  <span class="comment">// Go back to setjmp.dispatch BB</span></div>
<div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;  <span class="comment">// setjmp.dispatch:</span></div>
<div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;  <span class="comment">//   switch %label {</span></div>
<div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;  <span class="comment">//     label 1: goto post-setjmp BB 1</span></div>
<div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;  <span class="comment">//     label 2: goto post-setjmp BB 2</span></div>
<div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;  <span class="comment">//     ...</span></div>
<div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;  <span class="comment">//     default: goto splitted next BB</span></div>
<div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;  <span class="comment">//   }</span></div>
<div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;  IRB.SetInsertPoint(SetjmpDispatchBB);</div>
<div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;  <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *LabelPHI = IRB.CreatePHI(IRB.getInt32Ty(), 2, <span class="stringliteral">&quot;label.phi&quot;</span>);</div>
<div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;  LabelPHI-&gt;<a class="code" href="classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">addIncoming</a>(Label, EndBB);</div>
<div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;  LabelPHI-&gt;<a class="code" href="classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">addIncoming</a>(IRB.getInt32(-1), Entry);</div>
<div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;  <a class="code" href="classllvm_1_1SwitchInst.html">SwitchInst</a> *<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a> = IRB.CreateSwitch(LabelPHI, OrigEntry, SetjmpRetPHIs.size());</div>
<div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;  <span class="comment">// -1 means no longjmp happened, continue normally (will hit the default</span></div>
<div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;  <span class="comment">// switch case). 0 means a longjmp that is not ours to handle, needs a</span></div>
<div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;  <span class="comment">// rethrow. Otherwise the index is the same as the index in P+1 (to avoid</span></div>
<div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;  <span class="comment">// 0).</span></div>
<div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> &lt; SetjmpRetPHIs.size(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>++) {</div>
<div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;    <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;addCase(IRB.getInt32(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> + 1), SetjmpRetPHIs[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>]-&gt;getParent());</div>
<div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;    SetjmpRetPHIs[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>]-&gt;addIncoming(Val, SetjmpDispatchBB);</div>
<div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;  }</div>
<div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160; </div>
<div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;  <span class="comment">// Convert all longjmpable call instructions to invokes that unwind to the</span></div>
<div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;  <span class="comment">// newly created catch.dispatch.longjmp BB.</span></div>
<div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;CallInst *, 64&gt;</a> LongjmpableCalls;</div>
<div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> = &amp;*<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.begin(); <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>; <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> = <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getNextNode()) {</div>
<div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) {</div>
<div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;      <span class="keyword">auto</span> *CI = dyn_cast&lt;CallInst&gt;(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;      <span class="keywordflow">if</span> (!CI)</div>
<div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="AMDGPULibCalls_8cpp.html#a537c835c34f0b44b6ad2696643754390">Callee</a> = CI-&gt;<a class="code" href="classllvm_1_1CallBase.html#a7ac9329ef7292ee640d87f45ce7ae05c">getCalledOperand</a>();</div>
<div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="WebAssemblyLowerEmscriptenEHSjLj_8cpp.html#a2dacd2cc5f8d003dbbf793474f06df14">canLongjmp</a>(Callee))</div>
<div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="WebAssemblyLowerEmscriptenEHSjLj_8cpp.html#ae471a184f6df0ce3df8700257824906d">isEmAsmCall</a>(Callee))</div>
<div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;        <a class="code" href="namespacellvm.html#a7f2a3d4dcfee70225988aec53ff1e173">report_fatal_error</a>(<span class="stringliteral">&quot;Cannot use EM_ASM* alongside setjmp/longjmp in &quot;</span> +</div>
<div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;                               <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getName() +</div>
<div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;                               <span class="stringliteral">&quot;. Please consider using EM_JS, or move the &quot;</span></div>
<div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;                               <span class="stringliteral">&quot;EM_ASM into another function.&quot;</span>,</div>
<div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;                           <span class="keyword">false</span>);</div>
<div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;      <span class="comment">// This is __wasm_longjmp() call we inserted in this function, which</span></div>
<div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;      <span class="comment">// rethrows the longjmp when the longjmp does not correspond to one of</span></div>
<div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;      <span class="comment">// setjmps in this function. We should not convert this call to an invoke.</span></div>
<div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;      <span class="keywordflow">if</span> (CI == WasmLongjmpCI)</div>
<div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;      LongjmpableCalls.push_back(CI);</div>
<div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;    }</div>
<div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;  }</div>
<div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160; </div>
<div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> *CI : LongjmpableCalls) {</div>
<div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;    <span class="comment">// Even if the callee function has attribute &#39;nounwind&#39;, which is true for</span></div>
<div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;    <span class="comment">// all C functions, it can longjmp, which means it can throw a Wasm</span></div>
<div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;    <span class="comment">// exception now.</span></div>
<div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;    CI-&gt;<a class="code" href="classllvm_1_1CallBase.html#acd7acfca49e931306ba40f1eb6939f67">removeFnAttr</a>(Attribute::NoUnwind);</div>
<div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Function.html">Function</a> *CalleeF = CI-&gt;<a class="code" href="classllvm_1_1CallBase.html#a83b8c9e572130f403445c0b0f69b837c">getCalledFunction</a>())</div>
<div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;      CalleeF-&gt;removeFnAttr(Attribute::NoUnwind);</div>
<div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160; </div>
<div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;    <span class="comment">// Change it to an invoke and make it unwind to the catch.dispatch.longjmp</span></div>
<div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;    <span class="comment">// BB. If the call is enclosed in another catchpad/cleanuppad scope, unwind</span></div>
<div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;    <span class="comment">// to its parent pad&#39;s unwind destination instead to preserve the scope</span></div>
<div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;    <span class="comment">// structure. It will eventually unwind to the catch.dispatch.longjmp.</span></div>
<div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;OperandBundleDef, 1&gt;</a> Bundles;</div>
<div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *UnwindDest = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> Bundle = CI-&gt;<a class="code" href="classllvm_1_1CallBase.html#a87921b2b4748a722da30339103c08f62">getOperandBundle</a>(<a class="code" href="classllvm_1_1LLVMContext.html#a800c1300065ca1615d2f4fb88623afd5a8997c6b0930e2c05209e95e7172c6cf3">LLVMContext::OB_funclet</a>)) {</div>
<div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;      <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *FromPad = cast&lt;Instruction&gt;(Bundle-&gt;Inputs[0]);</div>
<div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;      <span class="keywordflow">while</span> (!UnwindDest) {</div>
<div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;        <span class="keywordflow">if</span> (<span class="keyword">auto</span> *CPI = dyn_cast&lt;CatchPadInst&gt;(FromPad)) {</div>
<div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;          UnwindDest = CPI-&gt;getCatchSwitch()-&gt;getUnwindDest();</div>
<div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;        }</div>
<div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;        <span class="keywordflow">if</span> (<span class="keyword">auto</span> *CPI = dyn_cast&lt;CleanupPadInst&gt;(FromPad)) {</div>
<div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;          <span class="comment">// getCleanupRetUnwindDest() can return nullptr when</span></div>
<div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;          <span class="comment">// 1. This cleanuppad&#39;s matching cleanupret uwninds to caller</span></div>
<div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;          <span class="comment">// 2. There is no matching cleanupret because it ends with</span></div>
<div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;          <span class="comment">//    unreachable.</span></div>
<div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;          <span class="comment">// In case of 2, we need to traverse the parent pad chain.</span></div>
<div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;          UnwindDest = <a class="code" href="WebAssemblyLowerEmscriptenEHSjLj_8cpp.html#af247758ca7555cca09d52ea88682c608">getCleanupRetUnwindDest</a>(CPI);</div>
<div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;          <a class="code" href="classllvm_1_1Value.html">Value</a> *ParentPad = CPI-&gt;getParentPad();</div>
<div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;          <span class="keywordflow">if</span> (isa&lt;ConstantTokenNone&gt;(ParentPad))</div>
<div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;          FromPad = cast&lt;Instruction&gt;(ParentPad);</div>
<div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;        }</div>
<div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;      }</div>
<div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;    }</div>
<div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;    <span class="keywordflow">if</span> (!UnwindDest)</div>
<div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;      UnwindDest = CatchDispatchLongjmpBB;</div>
<div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;    <a class="code" href="namespacellvm.html#a1481db7804704b4beb48e8c2ad4c94b2">changeToInvokeAndSplitBasicBlock</a>(CI, UnwindDest);</div>
<div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;  }</div>
<div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160; </div>
<div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Instruction *, 16&gt;</a> ToErase;</div>
<div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> : <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>) {</div>
<div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> *CSI = dyn_cast&lt;CatchSwitchInst&gt;(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>.getFirstNonPHI())) {</div>
<div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;      <span class="keywordflow">if</span> (CSI != CatchSwitchLongjmp &amp;&amp; CSI-&gt;unwindsToCaller()) {</div>
<div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;        IRB.SetInsertPoint(CSI);</div>
<div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;        ToErase.push_back(CSI);</div>
<div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;        <span class="keyword">auto</span> *NewCSI = IRB.CreateCatchSwitch(CSI-&gt;getParentPad(),</div>
<div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;                                             CatchDispatchLongjmpBB, 1);</div>
<div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;        NewCSI-&gt;addHandler(*CSI-&gt;handler_begin());</div>
<div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;        NewCSI-&gt;takeName(CSI);</div>
<div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;        CSI-&gt;replaceAllUsesWith(NewCSI);</div>
<div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;      }</div>
<div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;    }</div>
<div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160; </div>
<div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> *CRI = dyn_cast&lt;CleanupReturnInst&gt;(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>.getTerminator())) {</div>
<div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;      <span class="keywordflow">if</span> (CRI-&gt;unwindsToCaller()) {</div>
<div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;        IRB.SetInsertPoint(CRI);</div>
<div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;        ToErase.push_back(CRI);</div>
<div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;        IRB.CreateCleanupRet(CRI-&gt;getCleanupPad(), CatchDispatchLongjmpBB);</div>
<div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;      }</div>
<div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;    }</div>
<div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;  }</div>
<div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160; </div>
<div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : ToErase)</div>
<div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;    <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;eraseFromParent();</div>
<div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;}</div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="aWebAssemblyLowerEmscriptenEHSjLj_8cpp_html_a1cc51febed21367b42ed5105d17b2cad"><div class="ttname"><a href="WebAssemblyLowerEmscriptenEHSjLj_8cpp.html#a1cc51febed21367b42ed5105d17b2cad">getGlobalVariable</a></div><div class="ttdeci">static GlobalVariable * getGlobalVariable(Module &amp;M, Type *Ty, WebAssemblyTargetMachine &amp;TM, const char *Name)</div><div class="ttdef"><b>Definition:</b> <a href="WebAssemblyLowerEmscriptenEHSjLj_8cpp_source.html#l00412">WebAssemblyLowerEmscriptenEHSjLj.cpp:412</a></div></div>
<div class="ttc" id="aclassllvm_1_1SSAUpdater_html_a4fe3279aae4f726813a672d4a9b26cb1"><div class="ttname"><a href="classllvm_1_1SSAUpdater.html#a4fe3279aae4f726813a672d4a9b26cb1">llvm::SSAUpdater::Initialize</a></div><div class="ttdeci">void Initialize(Type *Ty, StringRef Name)</div><div class="ttdoc">Reset this object to get ready for a new set of SSA updates with type 'Ty'.</div><div class="ttdef"><b>Definition:</b> <a href="SSAUpdater_8cpp_source.html#l00053">SSAUpdater.cpp:53</a></div></div>
<div class="ttc" id="anamespacellvm_html"><div class="ttname"><a href="namespacellvm.html">llvm</a></div><div class="ttdoc">This is an optimization pass for GlobalISel generic memory operations.</div><div class="ttdef"><b>Definition:</b> <a href="AddressRanges_8h_source.html#l00018">AddressRanges.h:18</a></div></div>
<div class="ttc" id="aWebAssembly_8h_html"><div class="ttname"><a href="WebAssembly_8h.html">WebAssembly.h</a></div></div>
<div class="ttc" id="alib_2Target_2X86_2README_8txt_html_ac88fe1d3a61b056a4f64fbbb156a62ff"><div class="ttname"><a href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a></div><div class="ttdeci">We currently emits eax Perhaps this is what we really should generate is Is imull three or four cycles eax eax The current instruction priority is based on pattern complexity The former is more complex because it folds a load so the latter will not be emitted Perhaps we should use AddedComplexity to give LEA32r a higher priority We should always try to match LEA first since the LEA matching code does some estimate to determine whether the match is profitable if we care more about code then imull is better It s two bytes shorter than movl leal On a Pentium M</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2X86_2README_8txt_source.html#l00252">README.txt:252</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a4ba3a5be6c0e9b9e8a525de055836733"><div class="ttname"><a href="classllvm_1_1Instruction.html#a4ba3a5be6c0e9b9e8a525de055836733">llvm::Instruction::getModule</a></div><div class="ttdeci">const Module * getModule() const</div><div class="ttdoc">Return the module owning the function this instruction belongs to or nullptr it the function does not...</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8cpp_source.html#l00070">Instruction.cpp:70</a></div></div>
<div class="ttc" id="anamespacellvm_html_aac36edd0f1ce976f0025c98e88d3830ea3a2d5fe857d8f9541136a124c2edec6c"><div class="ttname"><a href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830ea3a2d5fe857d8f9541136a124c2edec6c">llvm::RecurKind::Or</a></div><div class="ttdeci">@ Or</div><div class="ttdoc">Bitwise or logical OR of integers.</div></div>
<div class="ttc" id="aWebAssemblyLowerEmscriptenEHSjLj_8cpp_html_a2dacd2cc5f8d003dbbf793474f06df14"><div class="ttname"><a href="WebAssemblyLowerEmscriptenEHSjLj_8cpp.html#a2dacd2cc5f8d003dbbf793474f06df14">canLongjmp</a></div><div class="ttdeci">static bool canLongjmp(const Value *Callee)</div><div class="ttdef"><b>Definition:</b> <a href="WebAssemblyLowerEmscriptenEHSjLj_8cpp_source.html#l00598">WebAssemblyLowerEmscriptenEHSjLj.cpp:598</a></div></div>
<div class="ttc" id="aclassllvm_1_1StructType_html_a18fc4545474c6ebb6f7c547f64f4fb31"><div class="ttname"><a href="classllvm_1_1StructType.html#a18fc4545474c6ebb6f7c547f64f4fb31">llvm::StructType::get</a></div><div class="ttdeci">static StructType * get(LLVMContext &amp;Context, ArrayRef&lt; Type * &gt; Elements, bool isPacked=false)</div><div class="ttdoc">This static method is the primary way to create a literal StructType.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00408">Type.cpp:408</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AArch64PACKey_html_abf4394f452bde3f544999858d71e4b46"><div class="ttname"><a href="namespacellvm_1_1AArch64PACKey.html#abf4394f452bde3f544999858d71e4b46">llvm::AArch64PACKey::ID</a></div><div class="ttdeci">ID</div><div class="ttdef"><b>Definition:</b> <a href="AArch64BaseInfo_8h_source.html#l00790">AArch64BaseInfo.h:790</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a7fe9ccd4893f4e2caa826126c09545ea"><div class="ttname"><a href="classllvm_1_1Type.html#a7fe9ccd4893f4e2caa826126c09545ea">llvm::Type::getInt8PtrTy</a></div><div class="ttdeci">static PointerType * getInt8PtrTy(LLVMContext &amp;C, unsigned AS=0)</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00293">Type.cpp:293</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a98c0a84a5dfa8bce341c829709f171e5"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a98c0a84a5dfa8bce341c829709f171e5">llvm::BasicBlock::iterator</a></div><div class="ttdeci">InstListType::iterator iterator</div><div class="ttdoc">Instruction iterators...</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00087">BasicBlock.h:87</a></div></div>
<div class="ttc" id="aclassllvm_1_1ModulePass_html"><div class="ttname"><a href="classllvm_1_1ModulePass.html">llvm::ModulePass</a></div><div class="ttdoc">ModulePass class - This class is used to implement unstructured interprocedural optimizations and ana...</div><div class="ttdef"><b>Definition:</b> <a href="Pass_8h_source.html#l00248">Pass.h:248</a></div></div>
<div class="ttc" id="aDebugInfoMetadata_8h_html"><div class="ttname"><a href="DebugInfoMetadata_8h.html">DebugInfoMetadata.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallBase_html_acd7acfca49e931306ba40f1eb6939f67"><div class="ttname"><a href="classllvm_1_1CallBase.html#acd7acfca49e931306ba40f1eb6939f67">llvm::CallBase::removeFnAttr</a></div><div class="ttdeci">void removeFnAttr(Attribute::AttrKind Kind)</div><div class="ttdoc">Removes the attribute from the function.</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l01563">InstrTypes.h:1563</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html"><div class="ttname"><a href="classllvm_1_1Function.html">llvm::Function</a></div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00059">Function.h:59</a></div></div>
<div class="ttc" id="aWebAssemblyLowerEmscriptenEHSjLj_8cpp_html_a24b94fa950f4e47096365189c893d30e"><div class="ttname"><a href="WebAssemblyLowerEmscriptenEHSjLj_8cpp.html#a24b94fa950f4e47096365189c893d30e">INITIALIZE_PASS</a></div><div class="ttdeci">INITIALIZE_PASS(WebAssemblyLowerEmscriptenEHSjLj, DEBUG_TYPE, &quot;WebAssembly Lower Emscripten Exceptions / Setjmp / Longjmp&quot;, false, false) ModulePass *llvm</div><div class="ttdef"><b>Definition:</b> <a href="WebAssemblyLowerEmscriptenEHSjLj_8cpp_source.html#l00386">WebAssemblyLowerEmscriptenEHSjLj.cpp:386</a></div></div>
<div class="ttc" id="aclassllvm_1_1raw__string__ostream_html"><div class="ttname"><a href="classllvm_1_1raw__string__ostream.html">llvm::raw_string_ostream</a></div><div class="ttdoc">A raw_ostream that writes to an std::string.</div><div class="ttdef"><b>Definition:</b> <a href="raw__ostream_8h_source.html#l00642">raw_ostream.h:642</a></div></div>
<div class="ttc" id="aclassllvm_1_1ilist__node__with__parent_html_a26708685cc8b94fe3d7092ee080dbb34"><div class="ttname"><a href="classllvm_1_1ilist__node__with__parent.html#a26708685cc8b94fe3d7092ee080dbb34">llvm::ilist_node_with_parent::getNextNode</a></div><div class="ttdeci">NodeTy * getNextNode()</div><div class="ttdoc">Get the next node, or nullptr for the list tail.</div><div class="ttdef"><b>Definition:</b> <a href="ilist__node_8h_source.html#l00289">ilist_node.h:289</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVector_html"><div class="ttname"><a href="classllvm_1_1SmallVector.html">llvm::SmallVector</a></div><div class="ttdoc">This is a 'vector' (really, a variable-sized array), optimized for the case when the array is small.</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l01199">SmallVector.h:1199</a></div></div>
<div class="ttc" id="aWebAssemblyLowerEmscriptenEHSjLj_8cpp_html_a6c8fb36f87b49a215040e2943af69e99"><div class="ttname"><a href="WebAssemblyLowerEmscriptenEHSjLj_8cpp.html#a6c8fb36f87b49a215040e2943af69e99">getSignature</a></div><div class="ttdeci">static std::string getSignature(FunctionType *FTy)</div><div class="ttdef"><b>Definition:</b> <a href="WebAssemblyLowerEmscriptenEHSjLj_8cpp_source.html#l00432">WebAssemblyLowerEmscriptenEHSjLj.cpp:432</a></div></div>
<div class="ttc" id="aclassllvm_1_1LandingPadInst_html"><div class="ttname"><a href="classllvm_1_1LandingPadInst.html">llvm::LandingPadInst</a></div><div class="ttdoc">The landingpad instruction holds all of the information necessary to generate correct exception handl...</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02956">Instructions.h:2956</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallInst_html_adfa372a84ae97f18c0132c6b99d9fbb4"><div class="ttname"><a href="classllvm_1_1CallInst.html#adfa372a84ae97f18c0132c6b99d9fbb4">llvm::CallInst::CreateMalloc</a></div><div class="ttdeci">static Instruction * CreateMalloc(Instruction *InsertBefore, Type *IntPtrTy, Type *AllocTy, Value *AllocSize, Value *ArraySize=nullptr, Function *MallocF=nullptr, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdoc">Generate the IR for a call to malloc:</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l00858">Instructions.cpp:858</a></div></div>
<div class="ttc" id="anamespacellvm_1_1WebAssembly_html_a2ce2d5b62438d2fa7d7cb37d232f52a1a9401129ec84978eddfb390a99db7adf9"><div class="ttname"><a href="namespacellvm_1_1WebAssembly.html#a2ce2d5b62438d2fa7d7cb37d232f52a1a9401129ec84978eddfb390a99db7adf9">llvm::WebAssembly::C_LONGJMP</a></div><div class="ttdeci">@ C_LONGJMP</div><div class="ttdef"><b>Definition:</b> <a href="WasmEHFuncInfo_8h_source.html#l00027">WasmEHFuncInfo.h:27</a></div></div>
<div class="ttc" id="anamespacellvm_1_1cl_html_ac96f30ba8b117dbd380b88ab8a03732baa2d228ea7bc126361de56c03e7edc3a8"><div class="ttname"><a href="namespacellvm_1_1cl.html#ac96f30ba8b117dbd380b88ab8a03732baa2d228ea7bc126361de56c03e7edc3a8">llvm::cl::CommaSeparated</a></div><div class="ttdeci">@ CommaSeparated</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00164">CommandLine.h:164</a></div></div>
<div class="ttc" id="aclassllvm_1_1IRBuilder_html"><div class="ttname"><a href="classllvm_1_1IRBuilder.html">llvm::IRBuilder&lt;&gt;</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalVariable_html"><div class="ttname"><a href="classllvm_1_1GlobalVariable.html">llvm::GlobalVariable</a></div><div class="ttdef"><b>Definition:</b> <a href="GlobalVariable_8h_source.html#l00039">GlobalVariable.h:39</a></div></div>
<div class="ttc" id="anamespacellvm_html_ac9a7de5a04920954ac964059cfc428ad"><div class="ttname"><a href="namespacellvm.html#ac9a7de5a04920954ac964059cfc428ad">llvm::erase_if</a></div><div class="ttdeci">void erase_if(Container &amp;C, UnaryPredicate P)</div><div class="ttdoc">Provide a container algorithm similar to C++ Library Fundamentals v2's erase_if which is equivalent t...</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l01998">STLExtras.h:1998</a></div></div>
<div class="ttc" id="aclassllvm_1_1FunctionType_html_a7e89b55242c964ae61b7850e99cacef0"><div class="ttname"><a href="classllvm_1_1FunctionType.html#a7e89b55242c964ae61b7850e99cacef0">llvm::FunctionType::get</a></div><div class="ttdeci">static FunctionType * get(Type *Result, ArrayRef&lt; Type * &gt; Params, bool isVarArg)</div><div class="ttdoc">This static method is the primary way of constructing a FunctionType.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00363">Type.cpp:363</a></div></div>
<div class="ttc" id="aTransforms_2Utils_2Local_8h_html"><div class="ttname"><a href="Transforms_2Utils_2Local_8h.html">Local.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1AttributeList_html_a5cc6492c8f2e06a8bae9dc0d121fab9f"><div class="ttname"><a href="classllvm_1_1AttributeList.html#a5cc6492c8f2e06a8bae9dc0d121fab9f">llvm::AttributeList::get</a></div><div class="ttdeci">static AttributeList get(LLVMContext &amp;C, ArrayRef&lt; std::pair&lt; unsigned, Attribute &gt;&gt; Attrs)</div><div class="ttdoc">Create an AttributeList with the specified parameters in it.</div><div class="ttdef"><b>Definition:</b> <a href="Attributes_8cpp_source.html#l01132">Attributes.cpp:1132</a></div></div>
<div class="ttc" id="aclassllvm_1_1DominatorTree_html"><div class="ttname"><a href="classllvm_1_1DominatorTree.html">llvm::DominatorTree</a></div><div class="ttdoc">Concrete subclass of DominatorTreeBase that is used to compute a normal dominator tree.</div><div class="ttdef"><b>Definition:</b> <a href="Dominators_8h_source.html#l00166">Dominators.h:166</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallBase_html_a2fbfe5377a984518a7c03d8558df726d"><div class="ttname"><a href="classllvm_1_1CallBase.html#a2fbfe5377a984518a7c03d8558df726d">llvm::CallBase::hasFnAttr</a></div><div class="ttdeci">bool hasFnAttr(Attribute::AttrKind Kind) const</div><div class="ttdoc">Determine whether this call has the given attribute.</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l01493">InstrTypes.h:1493</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html_afd978c6f74e279603d47b940f60f1f24"><div class="ttname"><a href="classllvm_1_1Function.html#afd978c6f74e279603d47b940f60f1f24">llvm::Function::setDoesNotThrow</a></div><div class="ttdeci">void setDoesNotThrow()</div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00538">Function.h:538</a></div></div>
<div class="ttc" id="aclassllvm_1_1StringMap_html_a16e5eaf2df56249e87019be23ee07695"><div class="ttname"><a href="classllvm_1_1StringMap.html#a16e5eaf2df56249e87019be23ee07695">llvm::StringMap::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="ADT_2StringMap_8h_source.html#l00204">StringMap.h:204</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html"><div class="ttname"><a href="classllvm_1_1Type.html">llvm::Type</a></div><div class="ttdoc">The instances of the Type class are immutable: once they are created, they are never changed.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00045">Type.h:45</a></div></div>
<div class="ttc" id="aclassllvm_1_1AttributeList_html"><div class="ttname"><a href="classllvm_1_1AttributeList.html">llvm::AttributeList</a></div><div class="ttdef"><b>Definition:</b> <a href="Attributes_8h_source.html#l00432">Attributes.h:432</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallBase_html_ae0c55761fce39dd71617690b04385193"><div class="ttname"><a href="classllvm_1_1CallBase.html#ae0c55761fce39dd71617690b04385193">llvm::CallBase::getAttributes</a></div><div class="ttdeci">AttributeList getAttributes() const</div><div class="ttdoc">Return the parameter attributes for this call.</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l01484">InstrTypes.h:1484</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallBase_html_a5e4a09f80c7cd5283dbbc7256d122d12"><div class="ttname"><a href="classllvm_1_1CallBase.html#a5e4a09f80c7cd5283dbbc7256d122d12">llvm::CallBase::getFunctionType</a></div><div class="ttdeci">FunctionType * getFunctionType() const</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l01264">InstrTypes.h:1264</a></div></div>
<div class="ttc" id="aclassllvm_1_1AttributeList_html_a1cf553641e8527095ae4c8ec88a2cd92"><div class="ttname"><a href="classllvm_1_1AttributeList.html#a1cf553641e8527095ae4c8ec88a2cd92">llvm::AttributeList::getFnAttrs</a></div><div class="ttdeci">AttributeSet getFnAttrs() const</div><div class="ttdoc">The function attributes are returned.</div><div class="ttdef"><b>Definition:</b> <a href="Attributes_8cpp_source.html#l01462">Attributes.cpp:1462</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseMapBase_html_a53408c95a7bfb5443b43fb2134c3eb23"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#a53408c95a7bfb5443b43fb2134c3eb23">llvm::DenseMapBase&lt; DenseMap&lt; KeyT, ValueT, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;, KeyT, ValueT, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;::count</a></div><div class="ttdeci">size_type count(const_arg_type_t&lt; KeyT &gt; Val) const</div><div class="ttdoc">Return 1 if the specified key is in the map, 0 otherwise.</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00145">DenseMap.h:145</a></div></div>
<div class="ttc" id="aclassllvm_1_1IRBuilderBase_html_a4c3d404f361fa96125e0126e563e2e6c"><div class="ttname"><a href="classllvm_1_1IRBuilderBase.html#a4c3d404f361fa96125e0126e563e2e6c">llvm::IRBuilderBase::getIntN</a></div><div class="ttdeci">ConstantInt * getIntN(unsigned N, uint64_t C)</div><div class="ttdoc">Get a constant N-bit value, zero extended or truncated from a 64-bit value.</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l00483">IRBuilder.h:483</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSet_html"><div class="ttname"><a href="classllvm_1_1SmallPtrSet.html">llvm::SmallPtrSet</a></div><div class="ttdoc">SmallPtrSet - This class implements a set which is optimized for holding SmallSize or less elements.</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00450">SmallPtrSet.h:450</a></div></div>
<div class="ttc" id="aWebAssemblyLowerEmscriptenEHSjLj_8cpp_html_ae471a184f6df0ce3df8700257824906d"><div class="ttname"><a href="WebAssemblyLowerEmscriptenEHSjLj_8cpp.html#ae471a184f6df0ce3df8700257824906d">isEmAsmCall</a></div><div class="ttdeci">static bool isEmAsmCall(const Value *Callee)</div><div class="ttdef"><b>Definition:</b> <a href="WebAssemblyLowerEmscriptenEHSjLj_8cpp_source.html#l00679">WebAssemblyLowerEmscriptenEHSjLj.cpp:679</a></div></div>
<div class="ttc" id="aWebAssemblyTargetMachine_8h_html"><div class="ttname"><a href="WebAssemblyTargetMachine_8h.html">WebAssemblyTargetMachine.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_a2b3fdb09b0789963c439d41fe91e44a1"><div class="ttname"><a href="namespacellvm.html#a2b3fdb09b0789963c439d41fe91e44a1">llvm::changeToCall</a></div><div class="ttdeci">CallInst * changeToCall(InvokeInst *II, DomTreeUpdater *DTU=nullptr)</div><div class="ttdoc">This function converts the specified invoke into a normal call.</div><div class="ttdef"><b>Definition:</b> <a href="Transforms_2Utils_2Local_8cpp_source.html#l02315">Local.cpp:2315</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallBase_html_a4fb513d744ca72275932b2c7003f16f6"><div class="ttname"><a href="classllvm_1_1CallBase.html#a4fb513d744ca72275932b2c7003f16f6">llvm::CallBase::arg_begin</a></div><div class="ttdeci">User::op_iterator arg_begin()</div><div class="ttdoc">Return the iterator pointing to the beginning of the argument list.</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l01326">InstrTypes.h:1326</a></div></div>
<div class="ttc" id="aclassllvm_1_1StringMap_html_a49e68e4c86fe0b96c633adea0c366d74"><div class="ttname"><a href="classllvm_1_1StringMap.html#a49e68e4c86fe0b96c633adea0c366d74">llvm::StringMap::find</a></div><div class="ttdeci">iterator find(StringRef Key)</div><div class="ttdef"><b>Definition:</b> <a href="ADT_2StringMap_8h_source.html#l00217">StringMap.h:217</a></div></div>
<div class="ttc" id="aConstantMerge_8cpp_html_acf172e841018fd16e65771f5ade0b297"><div class="ttname"><a href="ConstantMerge_8cpp.html#acf172e841018fd16e65771f5ade0b297">replace</a></div><div class="ttdeci">static void replace(Module &amp;M, GlobalVariable *Old, GlobalVariable *New)</div><div class="ttdef"><b>Definition:</b> <a href="ConstantMerge_8cpp_source.html#l00116">ConstantMerge.cpp:116</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a9b90764a470e0862114db285592af2b3"><div class="ttname"><a href="classllvm_1_1Type.html#a9b90764a470e0862114db285592af2b3">llvm::Type::getInt32PtrTy</a></div><div class="ttdeci">static PointerType * getInt32PtrTy(LLVMContext &amp;C, unsigned AS=0)</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00301">Type.cpp:301</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a30dd396c5b40cd86c1591872e574ccdf"><div class="ttname"><a href="classllvm_1_1Type.html#a30dd396c5b40cd86c1591872e574ccdf">llvm::Type::getInt32Ty</a></div><div class="ttdeci">static IntegerType * getInt32Ty(LLVMContext &amp;C)</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00241">Type.cpp:241</a></div></div>
<div class="ttc" id="aclassllvm_1_1CatchSwitchInst_html_a4b1438bbee79540a0cca9a2c018b71ec"><div class="ttname"><a href="classllvm_1_1CatchSwitchInst.html#a4b1438bbee79540a0cca9a2c018b71ec">llvm::CatchSwitchInst::addHandler</a></div><div class="ttdeci">void addHandler(BasicBlock *Dest)</div><div class="ttdoc">Add an entry to the switch instruction...</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l01292">Instructions.cpp:1292</a></div></div>
<div class="ttc" id="aDebug_8h_html_a08efc68d15935eb8889400a46c3749ba"><div class="ttname"><a href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a></div><div class="ttdeci">#define LLVM_DEBUG(X)</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8h_source.html#l00101">Debug.h:101</a></div></div>
<div class="ttc" id="aclassllvm_1_1MDNode_html_a7d10a7b9b7f40b04d27ed97c38ea1950"><div class="ttname"><a href="classllvm_1_1MDNode.html#a7d10a7b9b7f40b04d27ed97c38ea1950">llvm::MDNode::get</a></div><div class="ttdeci">static MDTuple * get(LLVMContext &amp;Context, ArrayRef&lt; Metadata * &gt; MDs)</div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8h_source.html#l01399">Metadata.h:1399</a></div></div>
<div class="ttc" id="anamespacellvm_1_1codeview_html_a0cc2805b6b89a94c5b5983f95367168ca2f53c1c34a1df353b3853e16e0c1967f"><div class="ttname"><a href="namespacellvm_1_1codeview.html#a0cc2805b6b89a94c5b5983f95367168ca2f53c1c34a1df353b3853e16e0c1967f">llvm::codeview::ProcSymFlags::IsNoReturn</a></div><div class="ttdeci">@ IsNoReturn</div></div>
<div class="ttc" id="aMD5_8cpp_html_a96d73bbd7af15cb1fc38c3f4a3bd82e9"><div class="ttname"><a href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a></div><div class="ttdeci">#define F(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00055">MD5.cpp:55</a></div></div>
<div class="ttc" id="aclassllvm_1_1FunctionType_html_aa9d770048c7ab9e08222a50b7bc1be1c"><div class="ttname"><a href="classllvm_1_1FunctionType.html#aa9d770048c7ab9e08222a50b7bc1be1c">llvm::FunctionType::isVarArg</a></div><div class="ttdeci">bool isVarArg() const</div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00123">DerivedTypes.h:123</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html"><div class="ttname"><a href="classllvm_1_1BasicBlock.html">llvm::BasicBlock</a></div><div class="ttdoc">LLVM Basic Block Representation.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00055">BasicBlock.h:55</a></div></div>
<div class="ttc" id="anamespacellvm_html_a7c46c742c31be54870e2038048e6b391"><div class="ttname"><a href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">llvm::dbgs</a></div><div class="ttdeci">raw_ostream &amp; dbgs()</div><div class="ttdoc">dbgs() - This returns a reference to a raw_ostream for debugging messages.</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8cpp_source.html#l00163">Debug.cpp:163</a></div></div>
<div class="ttc" id="aclassllvm_1_1DominatorTree_html_a5c69311e8d44898dac36a155c3d8691d"><div class="ttname"><a href="classllvm_1_1DominatorTree.html#a5c69311e8d44898dac36a155c3d8691d">llvm::DominatorTree::dominates</a></div><div class="ttdeci">bool dominates(const BasicBlock *BB, const Use &amp;U) const</div><div class="ttdoc">Return true if the (end of the) basic block BB dominates the use U.</div><div class="ttdef"><b>Definition:</b> <a href="Dominators_8cpp_source.html#l00122">Dominators.cpp:122</a></div></div>
<div class="ttc" id="aCommandLine_8h_html"><div class="ttname"><a href="CommandLine_8h.html">CommandLine.h</a></div></div>
<div class="ttc" id="anamespacellvm_1_1X86AS_html_aea2591d7d017866934bcf72ee3dc8a31a1337cc82304bed6c1a811f1a7f308aca"><div class="ttname"><a href="namespacellvm_1_1X86AS.html#aea2591d7d017866934bcf72ee3dc8a31a1337cc82304bed6c1a811f1a7f308aca">llvm::X86AS::SS</a></div><div class="ttdeci">@ SS</div><div class="ttdef"><b>Definition:</b> <a href="X86_8h_source.html#l00202">X86.h:202</a></div></div>
<div class="ttc" id="aSSAUpdaterBulk_8h_html"><div class="ttname"><a href="SSAUpdaterBulk_8h.html">SSAUpdaterBulk.h</a></div></div>
<div class="ttc" id="aWebAssemblyLowerEmscriptenEHSjLj_8cpp_html_af247758ca7555cca09d52ea88682c608"><div class="ttname"><a href="WebAssemblyLowerEmscriptenEHSjLj_8cpp.html#af247758ca7555cca09d52ea88682c608">getCleanupRetUnwindDest</a></div><div class="ttdeci">static BasicBlock * getCleanupRetUnwindDest(const CleanupPadInst *CPI)</div><div class="ttdef"><b>Definition:</b> <a href="WebAssemblyLowerEmscriptenEHSjLj_8cpp_source.html#l01654">WebAssemblyLowerEmscriptenEHSjLj.cpp:1654</a></div></div>
<div class="ttc" id="aBuiltinGCs_8cpp_html_a6742d2e0a668baf1196ec69e158d5f15"><div class="ttname"><a href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a></div><div class="ttdeci">static GCRegistry::Add&lt; CoreCLRGC &gt; E(&quot;coreclr&quot;, &quot;CoreCLR-compatible GC&quot;)</div></div>
<div class="ttc" id="aclassllvm_1_1User_html"><div class="ttname"><a href="classllvm_1_1User.html">llvm::User</a></div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00044">User.h:44</a></div></div>
<div class="ttc" id="aWebAssemblyLowerEmscriptenEHSjLj_8cpp_html_ac083d4bf8d3f3e1e700c33981f97248c"><div class="ttname"><a href="WebAssemblyLowerEmscriptenEHSjLj_8cpp.html#ac083d4bf8d3f3e1e700c33981f97248c">containsLongjmpableCalls</a></div><div class="ttdeci">static bool containsLongjmpableCalls(const Function *F)</div><div class="ttdef"><b>Definition:</b> <a href="WebAssemblyLowerEmscriptenEHSjLj_8cpp_source.html#l00852">WebAssemblyLowerEmscriptenEHSjLj.cpp:852</a></div></div>
<div class="ttc" id="aclassllvm_1_1WebAssemblyTargetMachine_html"><div class="ttname"><a href="classllvm_1_1WebAssemblyTargetMachine.html">llvm::WebAssemblyTargetMachine</a></div><div class="ttdef"><b>Definition:</b> <a href="WebAssemblyTargetMachine_8h_source.html#l00024">WebAssemblyTargetMachine.h:24</a></div></div>
<div class="ttc" id="aWebAssemblyLowerEmscriptenEHSjLj_8cpp_html_aaf95913e52851622a35765cc28adf643"><div class="ttname"><a href="WebAssemblyLowerEmscriptenEHSjLj_8cpp.html#aaf95913e52851622a35765cc28adf643">getOrCreateDebugLoc</a></div><div class="ttdeci">static DebugLoc getOrCreateDebugLoc(const Instruction *InsertBefore, DISubprogram *SP)</div><div class="ttdef"><b>Definition:</b> <a href="WebAssemblyLowerEmscriptenEHSjLj_8cpp_source.html#l01252">WebAssemblyLowerEmscriptenEHSjLj.cpp:1252</a></div></div>
<div class="ttc" id="aREADME__ALTIVEC_8txt_html_a9aacd9146afe44bf656cd664e2a88c8c"><div class="ttname"><a href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a></div><div class="ttdeci">(vector float) vec_cmpeq(*A, *B) C</div><div class="ttdef"><b>Definition:</b> <a href="README__ALTIVEC_8txt_source.html#l00086">README_ALTIVEC.txt:86</a></div></div>
<div class="ttc" id="aclassllvm_1_1FunctionType_html_aeae69a459419ec0bb738cdc73f4fc2a1"><div class="ttname"><a href="classllvm_1_1FunctionType.html#aeae69a459419ec0bb738cdc73f4fc2a1">llvm::FunctionType::param_end</a></div><div class="ttdeci">param_iterator param_end() const</div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00129">DerivedTypes.h:129</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallBase_html_a83b8c9e572130f403445c0b0f69b837c"><div class="ttname"><a href="classllvm_1_1CallBase.html#a83b8c9e572130f403445c0b0f69b837c">llvm::CallBase::getCalledFunction</a></div><div class="ttdeci">Function * getCalledFunction() const</div><div class="ttdoc">Returns the function called, or null if this is an indirect function invocation or the function signa...</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l01406">InstrTypes.h:1406</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallBase_html_a9da3b29e8e71b9be4645874e1721207a"><div class="ttname"><a href="classllvm_1_1CallBase.html#a9da3b29e8e71b9be4645874e1721207a">llvm::CallBase::setAttributes</a></div><div class="ttdeci">void setAttributes(AttributeList A)</div><div class="ttdoc">Set the parameter attributes for this call.</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l01488">InstrTypes.h:1488</a></div></div>
<div class="ttc" id="aclassllvm_1_1SSAUpdaterBulk_html"><div class="ttname"><a href="classllvm_1_1SSAUpdaterBulk.html">llvm::SSAUpdaterBulk</a></div><div class="ttdoc">Helper class for SSA formation on a set of values defined in multiple blocks.</div><div class="ttdef"><b>Definition:</b> <a href="SSAUpdaterBulk_8h_source.html#l00039">SSAUpdaterBulk.h:39</a></div></div>
<div class="ttc" id="aclassllvm_1_1IRBuilderBase_html_a2cf4a6979d6f79ae5b901aa5f6bacb0d"><div class="ttname"><a href="classllvm_1_1IRBuilderBase.html#a2cf4a6979d6f79ae5b901aa5f6bacb0d">llvm::IRBuilderBase::getIntNTy</a></div><div class="ttdeci">IntegerType * getIntNTy(unsigned N)</div><div class="ttdoc">Fetch the type representing an N-bit integer.</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l00525">IRBuilder.h:525</a></div></div>
<div class="ttc" id="aSIInstrInfo_8cpp_html_a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791"><div class="ttname"><a href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a></div><div class="ttdeci">@ SI</div><div class="ttdef"><b>Definition:</b> <a href="SIInstrInfo_8cpp_source.html#l07993">SIInstrInfo.cpp:7993</a></div></div>
<div class="ttc" id="aWebAssemblyLowerEmscriptenEHSjLj_8cpp_html_a8f4bf9ef05ac2193b41802f2e8466f66"><div class="ttname"><a href="WebAssemblyLowerEmscriptenEHSjLj_8cpp.html#a8f4bf9ef05ac2193b41802f2e8466f66">canThrow</a></div><div class="ttdeci">static bool canThrow(const Value *V)</div><div class="ttdef"><b>Definition:</b> <a href="WebAssemblyLowerEmscriptenEHSjLj_8cpp_source.html#l00394">WebAssemblyLowerEmscriptenEHSjLj.cpp:394</a></div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisUsage_html"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html">llvm::AnalysisUsage</a></div><div class="ttdoc">Represent the analysis usage information of a pass.</div><div class="ttdef"><b>Definition:</b> <a href="PassAnalysisSupport_8h_source.html#l00047">PassAnalysisSupport.h:47</a></div></div>
<div class="ttc" id="anamespacellvm_1_1WebAssembly_html_aab16d00c5762ae8f5a89ce045b44b07e"><div class="ttname"><a href="namespacellvm_1_1WebAssembly.html#aab16d00c5762ae8f5a89ce045b44b07e">llvm::WebAssembly::WasmEnableEmSjLj</a></div><div class="ttdeci">cl::opt&lt; bool &gt; WasmEnableEmSjLj</div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_aecb93439702247fe5353a9966f7cefcd"><div class="ttname"><a href="classllvm_1_1Value.html#aecb93439702247fe5353a9966f7cefcd">llvm::Value::uses</a></div><div class="ttdeci">iterator_range&lt; use_iterator &gt; uses()</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00376">Value.h:376</a></div></div>
<div class="ttc" id="aBuiltinGCs_8cpp_html_a7abf5fb4071cb25dbce06dfb5ee3c937"><div class="ttname"><a href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a></div><div class="ttdeci">static GCRegistry::Add&lt; OcamlGC &gt; B(&quot;ocaml&quot;, &quot;ocaml 3.10-compatible GC&quot;)</div></div>
<div class="ttc" id="aclassllvm_1_1FunctionType_html_a05d5616e1422394b4d350c008b0cc5e0"><div class="ttname"><a href="classllvm_1_1FunctionType.html#a05d5616e1422394b4d350c008b0cc5e0">llvm::FunctionType::param_begin</a></div><div class="ttdeci">param_iterator param_begin() const</div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00128">DerivedTypes.h:128</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html"><div class="ttname"><a href="classllvm_1_1Instruction.html">llvm::Instruction</a></div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00041">Instruction.h:41</a></div></div>
<div class="ttc" id="aclassllvm_1_1DominatorTreeWrapperPass_html"><div class="ttname"><a href="classllvm_1_1DominatorTreeWrapperPass.html">llvm::DominatorTreeWrapperPass</a></div><div class="ttdoc">Legacy analysis pass which computes a DominatorTree.</div><div class="ttdef"><b>Definition:</b> <a href="Dominators_8h_source.html#l00314">Dominators.h:314</a></div></div>
<div class="ttc" id="aWebAssemblyLowerEmscriptenEHSjLj_8cpp_html_a029edc44feabb745fc0c5d8c70d0d934"><div class="ttname"><a href="WebAssemblyLowerEmscriptenEHSjLj_8cpp.html#a029edc44feabb745fc0c5d8c70d0d934">getAddrSizeInt</a></div><div class="ttdeci">static Value * getAddrSizeInt(Module *M, uint64_t C)</div><div class="ttdef"><b>Definition:</b> <a href="WebAssemblyLowerEmscriptenEHSjLj_8cpp_source.html#l00483">WebAssemblyLowerEmscriptenEHSjLj.cpp:483</a></div></div>
<div class="ttc" id="anamespacellvm_html_a7f2a3d4dcfee70225988aec53ff1e173"><div class="ttname"><a href="namespacellvm.html#a7f2a3d4dcfee70225988aec53ff1e173">llvm::report_fatal_error</a></div><div class="ttdeci">void report_fatal_error(Error Err, bool gen_crash_diag=true)</div><div class="ttdoc">Report a serious error, calling any installed error handler.</div><div class="ttdef"><b>Definition:</b> <a href="Testing_2Support_2Error_8cpp_source.html#l00145">Error.cpp:145</a></div></div>
<div class="ttc" id="aWebAssemblyLowerEmscriptenEHSjLj_8cpp_html_a38c40588b66851d6380545c1af5cf7f2"><div class="ttname"><a href="WebAssemblyLowerEmscriptenEHSjLj_8cpp.html#a38c40588b66851d6380545c1af5cf7f2">EHAllowlist</a></div><div class="ttdeci">static cl::list&lt; std::string &gt; EHAllowlist(&quot;emscripten-cxx-exceptions-allowed&quot;, cl::desc(&quot;The list of function names in which Emscripten-style &quot; &quot;exception handling is enabled (see emscripten &quot; &quot;EMSCRIPTEN_CATCHING_ALLOWED options)&quot;), cl::CommaSeparated)</div></div>
<div class="ttc" id="anamespacellvm_html_a05609d049bfe3c5c2f64711566131a86a28d0edd045e05cf5af64e35ae0c4c6ef"><div class="ttname"><a href="namespacellvm.html#a05609d049bfe3c5c2f64711566131a86a28d0edd045e05cf5af64e35ae0c4c6ef">llvm::ThreadPriority::Low</a></div><div class="ttdeci">@ Low</div><div class="ttdoc">Lower the current thread's priority such that it does not affect foreground tasks significantly.</div></div>
<div class="ttc" id="aclassllvm_1_1ConstantInt_html_a969709dd49c28865a482d8b870f87c46"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">llvm::ConstantInt::get</a></div><div class="ttdeci">static Constant * get(Type *Ty, uint64_t V, bool IsSigned=false)</div><div class="ttdoc">If Ty is a vector type, return a Constant with a splat of the given value.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00887">Constants.cpp:887</a></div></div>
<div class="ttc" id="aclassllvm_1_1FunctionType_html_a0400b7a6fcffcd3892d7bb6de435674a"><div class="ttname"><a href="classllvm_1_1FunctionType.html#a0400b7a6fcffcd3892d7bb6de435674a">llvm::FunctionType::params</a></div><div class="ttdeci">ArrayRef&lt; Type * &gt; params() const</div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00130">DerivedTypes.h:130</a></div></div>
<div class="ttc" id="anamespacellvm_html_a622efffb21f19f09aeb245efa2a01c2f"><div class="ttname"><a href="namespacellvm.html#a622efffb21f19f09aeb245efa2a01c2f">llvm::createWebAssemblyLowerEmscriptenEHSjLj</a></div><div class="ttdeci">ModulePass * createWebAssemblyLowerEmscriptenEHSjLj()</div></div>
<div class="ttc" id="anamespacellvm_html_a5536eb574f2ee4e022d04a0418d22fbd"><div class="ttname"><a href="namespacellvm.html#a5536eb574f2ee4e022d04a0418d22fbd">llvm::OperandBundleDef</a></div><div class="ttdeci">OperandBundleDefT&lt; Value * &gt; OperandBundleDef</div><div class="ttdef"><b>Definition:</b> <a href="AutoUpgrade_8h_source.html#l00033">AutoUpgrade.h:33</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html_a7efd1f0c1206d95e4fe01a9b49a57b82"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#a7efd1f0c1206d95e4fe01a9b49a57b82">llvm::SmallVectorImpl::append</a></div><div class="ttdeci">void append(ItTy in_start, ItTy in_end)</div><div class="ttdoc">Add the specified range to the end of the SmallVector.</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00687">SmallVector.h:687</a></div></div>
<div class="ttc" id="aWebAssemblyLowerEmscriptenEHSjLj_8cpp_html_ad78e062f62e0d6e453941fb4ca843e4d"><div class="ttname"><a href="WebAssemblyLowerEmscriptenEHSjLj_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">DEBUG_TYPE</a></div><div class="ttdeci">#define DEBUG_TYPE</div><div class="ttdef"><b>Definition:</b> <a href="WebAssemblyLowerEmscriptenEHSjLj_8cpp_source.html#l00288">WebAssemblyLowerEmscriptenEHSjLj.cpp:288</a></div></div>
<div class="ttc" id="anamespacellvm_html_a5d56157a385f8cd7d3e54ed87da1ba6aa7939c43653700c52daa7a68a575c3ec5"><div class="ttname"><a href="namespacellvm.html#a5d56157a385f8cd7d3e54ed87da1ba6aa7939c43653700c52daa7a68a575c3ec5">llvm::EHPersonality::Wasm_CXX</a></div><div class="ttdeci">@ Wasm_CXX</div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_a9d7de807ebdfe1819df3ff6cb0f16158"><div class="ttname"><a href="classllvm_1_1Value.html#a9d7de807ebdfe1819df3ff6cb0f16158">llvm::Value::use_empty</a></div><div class="ttdeci">bool use_empty() const</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00344">Value.h:344</a></div></div>
<div class="ttc" id="anamespacellvm_1_1CallingConv_html_a188c0836f8c3528401f1c236fd93b977"><div class="ttname"><a href="namespacellvm_1_1CallingConv.html#a188c0836f8c3528401f1c236fd93b977">llvm::CallingConv::ID</a></div><div class="ttdeci">unsigned ID</div><div class="ttdoc">LLVM IR allows to use arbitrary numbers as calling convention identifiers.</div><div class="ttdef"><b>Definition:</b> <a href="CallingConv_8h_source.html#l00024">CallingConv.h:24</a></div></div>
<div class="ttc" id="aWebAssemblyUtilities_8h_html"><div class="ttname"><a href="WebAssemblyUtilities_8h.html">WebAssemblyUtilities.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1StringMap_html"><div class="ttname"><a href="classllvm_1_1StringMap.html">llvm::StringMap</a></div><div class="ttdoc">StringMap - This is an unconventional map that is specialized for handling keys that are &quot;strings&quot;,...</div><div class="ttdef"><b>Definition:</b> <a href="ADT_2StringMap_8h_source.html#l00110">StringMap.h:110</a></div></div>
<div class="ttc" id="aADT_2tmp_8txt_html_a07ed0bfaa124c15897944fe3eaa971ab"><div class="ttname"><a href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a></div><div class="ttdeci">Class for arbitrary precision integers APInt is a functional replacement for common case unsigned integer type like unsigned long or uint64_t</div><div class="ttdef"><b>Definition:</b> <a href="ADT_2tmp_8txt_source.html#l00001">tmp.txt:1</a></div></div>
<div class="ttc" id="anamespacellvm_1_1ARM__PROC_html_a1add7850fad3f66c140ecee871460ea4ae9d798593a4a6b5cc48486a453a59e5e"><div class="ttname"><a href="namespacellvm_1_1ARM__PROC.html#a1add7850fad3f66c140ecee871460ea4ae9d798593a4a6b5cc48486a453a59e5e">llvm::ARM_PROC::IE</a></div><div class="ttdeci">@ IE</div><div class="ttdef"><b>Definition:</b> <a href="MCTargetDesc_2ARMBaseInfo_8h_source.html#l00027">ARMBaseInfo.h:27</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a86b2306c74ebe71deb8e5fa95926cc75"><div class="ttname"><a href="classllvm_1_1Type.html#a86b2306c74ebe71deb8e5fa95926cc75">llvm::Type::getIntNPtrTy</a></div><div class="ttdeci">static PointerType * getIntNPtrTy(LLVMContext &amp;C, unsigned N, unsigned AS=0)</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00285">Type.cpp:285</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSetImplBase_html_af8a50544090e81ac83601aff8f4b0142"><div class="ttname"><a href="classllvm_1_1SmallPtrSetImplBase.html#af8a50544090e81ac83601aff8f4b0142">llvm::SmallPtrSetImplBase::empty</a></div><div class="ttdeci">bool empty() const</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00092">SmallPtrSet.h:92</a></div></div>
<div class="ttc" id="anamespacellvm_html_a264176188c0aadccd3ca5b6929b5a2e1ab24ce0cd392a5b0b8dedc66c25213594"><div class="ttname"><a href="namespacellvm.html#a264176188c0aadccd3ca5b6929b5a2e1ab24ce0cd392a5b0b8dedc66c25213594">llvm::AllocFnKind::Free</a></div><div class="ttdeci">@ Free</div></div>
<div class="ttc" id="aclassllvm_1_1Clause_html"><div class="ttname"><a href="classllvm_1_1Clause.html">llvm::Clause</a></div><div class="ttdef"><b>Definition:</b> <a href="DirectiveEmitter_8h_source.html#l00128">DirectiveEmitter.h:128</a></div></div>
<div class="ttc" id="aMemorySSA_8cpp_html_a20a60bdac22b099d87d8cb0c1d554120"><div class="ttname"><a href="MemorySSA_8cpp.html#a20a60bdac22b099d87d8cb0c1d554120">SSA</a></div><div class="ttdeci">Memory SSA</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8cpp_source.html#l00071">MemorySSA.cpp:71</a></div></div>
<div class="ttc" id="aclassllvm_1_1CleanupPadInst_html"><div class="ttname"><a href="classllvm_1_1CleanupPadInst.html">llvm::CleanupPadInst</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l04491">Instructions.h:4491</a></div></div>
<div class="ttc" id="aclassllvm_1_1StoreInst_html"><div class="ttname"><a href="classllvm_1_1StoreInst.html">llvm::StoreInst</a></div><div class="ttdoc">An instruction for storing to memory.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00301">Instructions.h:301</a></div></div>
<div class="ttc" id="aclassllvm_1_1AttributeList_html_a5604157867b3d226260f6388b987e49a"><div class="ttname"><a href="classllvm_1_1AttributeList.html#a5604157867b3d226260f6388b987e49a">llvm::AttributeList::getRetAttrs</a></div><div class="ttdeci">AttributeSet getRetAttrs() const</div><div class="ttdoc">The attributes for the ret value are returned.</div><div class="ttdef"><b>Definition:</b> <a href="Attributes_8cpp_source.html#l01458">Attributes.cpp:1458</a></div></div>
<div class="ttc" id="aclassllvm_1_1Constant_html"><div class="ttname"><a href="classllvm_1_1Constant.html">llvm::Constant</a></div><div class="ttdoc">This is an important base class in LLVM.</div><div class="ttdef"><b>Definition:</b> <a href="Constant_8h_source.html#l00041">Constant.h:41</a></div></div>
<div class="ttc" id="aclassllvm_1_1PointerType_html_a8db49fd5069f21d514e7bb0fd11f0902"><div class="ttname"><a href="classllvm_1_1PointerType.html#a8db49fd5069f21d514e7bb0fd11f0902">llvm::PointerType::getUnqual</a></div><div class="ttdeci">static PointerType * getUnqual(Type *ElementType)</div><div class="ttdoc">This constructs a pointer to an object of the specified type in the default address space (address sp...</div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00651">DerivedTypes.h:651</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalValue_html_a9e1fc23a17e97d2d1732e753ae9251ac"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#a9e1fc23a17e97d2d1732e753ae9251ac">llvm::GlobalValue::getParent</a></div><div class="ttdeci">Module * getParent()</div><div class="ttdoc">Get the module that this global value is contained inside of...</div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00652">GlobalValue.h:652</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalValue_html_a05c6b3b9372b56d130e005db4837da62a55e32c080bb5217324a597d4fb441660"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#a05c6b3b9372b56d130e005db4837da62a55e32c080bb5217324a597d4fb441660">llvm::GlobalValue::GeneralDynamicTLSModel</a></div><div class="ttdeci">@ GeneralDynamicTLSModel</div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00193">GlobalValue.h:193</a></div></div>
<div class="ttc" id="aclassllvm_1_1AttributeSet_html_ae8ed437b15a7ca943716e5284a9cb9a6"><div class="ttname"><a href="classllvm_1_1AttributeSet.html#ae8ed437b15a7ca943716e5284a9cb9a6">llvm::AttributeSet::get</a></div><div class="ttdeci">static AttributeSet get(LLVMContext &amp;C, const AttrBuilder &amp;B)</div><div class="ttdef"><b>Definition:</b> <a href="Attributes_8cpp_source.html#l00693">Attributes.cpp:693</a></div></div>
<div class="ttc" id="aclassllvm_1_1IRBuilderBase_html_ac0e8c554bf1c1e117a74d51df89c137d"><div class="ttname"><a href="classllvm_1_1IRBuilderBase.html#ac0e8c554bf1c1e117a74d51df89c137d">llvm::IRBuilderBase::getInt32</a></div><div class="ttdeci">ConstantInt * getInt32(uint32_t C)</div><div class="ttdoc">Get a constant 32-bit value.</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l00472">IRBuilder.h:472</a></div></div>
<div class="ttc" id="aclassllvm_1_1PHINode_html_a089cccb6f231efee72abc76d0f9c695f"><div class="ttname"><a href="classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">llvm::PHINode::addIncoming</a></div><div class="ttdeci">void addIncoming(Value *V, BasicBlock *BB)</div><div class="ttdoc">Add an incoming value to the end of the PHI list.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02854">Instructions.h:2854</a></div></div>
<div class="ttc" id="aclassllvm_1_1LLVMContext_html"><div class="ttname"><a href="classllvm_1_1LLVMContext.html">llvm::LLVMContext</a></div><div class="ttdoc">This is an important class for using LLVM in a threaded context.</div><div class="ttdef"><b>Definition:</b> <a href="LLVMContext_8h_source.html#l00067">LLVMContext.h:67</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseMap_html"><div class="ttname"><a href="classllvm_1_1DenseMap.html">llvm::DenseMap</a></div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00714">DenseMap.h:714</a></div></div>
<div class="ttc" id="aMD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00058">MD5.cpp:58</a></div></div>
<div class="ttc" id="aclassllvm_1_1AttrBuilder_html"><div class="ttname"><a href="classllvm_1_1AttrBuilder.html">llvm::AttrBuilder</a></div><div class="ttdef"><b>Definition:</b> <a href="Attributes_8h_source.html#l01040">Attributes.h:1040</a></div></div>
<div class="ttc" id="aclassllvm_1_1FunctionType_html_a20cdc3911828248e70dbeae018106b76"><div class="ttname"><a href="classllvm_1_1FunctionType.html#a20cdc3911828248e70dbeae018106b76">llvm::FunctionType::getParamType</a></div><div class="ttdeci">Type * getParamType(unsigned i) const</div><div class="ttdoc">Parameter type accessors.</div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00135">DerivedTypes.h:135</a></div></div>
<div class="ttc" id="aStringExtras_8h_html"><div class="ttname"><a href="StringExtras_8h.html">StringExtras.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_a8154638df88e4eaa568b67b23d463dac"><div class="ttname"><a href="namespacellvm.html#a8154638df88e4eaa568b67b23d463dac">llvm::make_early_inc_range</a></div><div class="ttdeci">iterator_range&lt; early_inc_iterator_impl&lt; detail::IterOfRange&lt; RangeT &gt; &gt; &gt; make_early_inc_range(RangeT &amp;&amp;Range)</div><div class="ttdoc">Make a range that does early increment to allow mutation of the underlying range without disrupting i...</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l00721">STLExtras.h:721</a></div></div>
<div class="ttc" id="aclassllvm_1_1PointerType_html"><div class="ttname"><a href="classllvm_1_1PointerType.html">llvm::PointerType</a></div><div class="ttdoc">Class to represent pointers.</div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00632">DerivedTypes.h:632</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_ae8f5bf5cc06f696b52c709677df00fbf"><div class="ttname"><a href="classllvm_1_1Instruction.html#ae8f5bf5cc06f696b52c709677df00fbf">llvm::Instruction::setDebugLoc</a></div><div class="ttdeci">void setDebugLoc(DebugLoc Loc)</div><div class="ttdoc">Set the debug location information for this instruction.</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00355">Instruction.h:355</a></div></div>
<div class="ttc" id="anamespacellvm_1_1WebAssembly_html_a877b8fcf196f226d4f2289ebdb1f276b"><div class="ttname"><a href="namespacellvm_1_1WebAssembly.html#a877b8fcf196f226d4f2289ebdb1f276b">llvm::WebAssembly::WasmEnableSjLj</a></div><div class="ttdeci">cl::opt&lt; bool &gt; WasmEnableSjLj</div></div>
<div class="ttc" id="aTargetPassConfig_8h_html"><div class="ttname"><a href="TargetPassConfig_8h.html">TargetPassConfig.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html_a6adbed68009f582caa84cdfd2adf36f1"><div class="ttname"><a href="classllvm_1_1Function.html#a6adbed68009f582caa84cdfd2adf36f1">llvm::Function::Create</a></div><div class="ttdeci">static Function * Create(FunctionType *Ty, LinkageTypes Linkage, unsigned AddrSpace, const Twine &amp;N=&quot;&quot;, Module *M=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00136">Function.h:136</a></div></div>
<div class="ttc" id="aclassllvm_1_1ilist__node__with__parent_html_ae451867ac0034a201153b54cc466386d"><div class="ttname"><a href="classllvm_1_1ilist__node__with__parent.html#ae451867ac0034a201153b54cc466386d">llvm::ilist_node_with_parent::getPrevNode</a></div><div class="ttdeci">NodeTy * getPrevNode()</div><div class="ttdef"><b>Definition:</b> <a href="ilist__node_8h_source.html#l00275">ilist_node.h:275</a></div></div>
<div class="ttc" id="aIRBuilder_8h_html"><div class="ttname"><a href="IRBuilder_8h.html">IRBuilder.h</a></div></div>
<div class="ttc" id="aSILowerControlFlow_8cpp_html_a4868c5d81c5ccc98c47aeab6244346a0"><div class="ttname"><a href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a></div><div class="ttdeci">assert(ImpDefSCC.getReg()==AMDGPU::SCC &amp;&amp;ImpDefSCC.isDef())</div></div>
<div class="ttc" id="aWebAssemblyLowerEmscriptenEHSjLj_8cpp_html_a3177a68c917d44becd42f00b322731a7"><div class="ttname"><a href="WebAssemblyLowerEmscriptenEHSjLj_8cpp.html#a3177a68c917d44becd42f00b322731a7">getAddrPtrType</a></div><div class="ttdeci">static Type * getAddrPtrType(Module *M)</div><div class="ttdef"><b>Definition:</b> <a href="WebAssemblyLowerEmscriptenEHSjLj_8cpp_source.html#l00475">WebAssemblyLowerEmscriptenEHSjLj.cpp:475</a></div></div>
<div class="ttc" id="aWebAssemblyLowerEmscriptenEHSjLj_8cpp_html_a35adc25f1d320d99e1b1a1cce6ab4a4d"><div class="ttname"><a href="WebAssemblyLowerEmscriptenEHSjLj_8cpp.html#a35adc25f1d320d99e1b1a1cce6ab4a4d">getAddrIntType</a></div><div class="ttdeci">static Type * getAddrIntType(Module *M)</div><div class="ttdef"><b>Definition:</b> <a href="WebAssemblyLowerEmscriptenEHSjLj_8cpp_source.html#l00468">WebAssemblyLowerEmscriptenEHSjLj.cpp:468</a></div></div>
<div class="ttc" id="anamespacellvm_html_a11830db2d4bbb3726de01e2a70a98327"><div class="ttname"><a href="namespacellvm.html#a11830db2d4bbb3726de01e2a70a98327">llvm::getEHPersonalityName</a></div><div class="ttdeci">StringRef getEHPersonalityName(EHPersonality Pers)</div><div class="ttdef"><b>Definition:</b> <a href="EHPersonalities_8cpp_source.html#l00047">EHPersonalities.cpp:47</a></div></div>
<div class="ttc" id="aclassllvm_1_1Module_html"><div class="ttname"><a href="classllvm_1_1Module.html">llvm::Module</a></div><div class="ttdoc">A Module instance is used to store all the information related to an LLVM module.</div><div class="ttdef"><b>Definition:</b> <a href="Module_8h_source.html#l00065">Module.h:65</a></div></div>
<div class="ttc" id="anamespacellvm_html_a1481db7804704b4beb48e8c2ad4c94b2"><div class="ttname"><a href="namespacellvm.html#a1481db7804704b4beb48e8c2ad4c94b2">llvm::changeToInvokeAndSplitBasicBlock</a></div><div class="ttdeci">BasicBlock * changeToInvokeAndSplitBasicBlock(CallInst *CI, BasicBlock *UnwindEdge, DomTreeUpdater *DTU=nullptr)</div><div class="ttdoc">Convert the CallInst to InvokeInst with the specified unwind edge basic block.</div><div class="ttdef"><b>Definition:</b> <a href="Transforms_2Utils_2Local_8cpp_source.html#l02335">Local.cpp:2335</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallBase_html_ac0f11b96f81b2769dd23d028e3189075"><div class="ttname"><a href="classllvm_1_1CallBase.html#ac0f11b96f81b2769dd23d028e3189075">llvm::CallBase::arg_end</a></div><div class="ttdeci">User::op_iterator arg_end()</div><div class="ttdoc">Return the iterator pointing to the end of the argument list.</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l01332">InstrTypes.h:1332</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSetImpl_html_a1f475b0df44ebd7169e720fa1bf9169e"><div class="ttname"><a href="classllvm_1_1SmallPtrSetImpl.html#a1f475b0df44ebd7169e720fa1bf9169e">llvm::SmallPtrSetImpl::count</a></div><div class="ttdeci">size_type count(ConstPtrType Ptr) const</div><div class="ttdoc">count - Return 1 if the specified pointer is in the set, 0 otherwise.</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00383">SmallPtrSet.h:383</a></div></div>
<div class="ttc" id="anamespacellvm_html_a10f3d955592ae2bc745f57e5b48ae115"><div class="ttname"><a href="namespacellvm.html#a10f3d955592ae2bc745f57e5b48ae115">llvm::size</a></div><div class="ttdeci">auto size(R &amp;&amp;Range, std::enable_if_t&lt; std::is_base_of&lt; std::random_access_iterator_tag, typename std::iterator_traits&lt; decltype(Range.begin())&gt;::iterator_category &gt;::value, void &gt; *=nullptr)</div><div class="ttdoc">Get the size of a range.</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l01716">STLExtras.h:1716</a></div></div>
<div class="ttc" id="aclassllvm_1_1DominatorTreeBase_html_aa0641ae965656ff9988d67a35140e4d9"><div class="ttname"><a href="classllvm_1_1DominatorTreeBase.html#aa0641ae965656ff9988d67a35140e4d9">llvm::DominatorTreeBase::recalculate</a></div><div class="ttdeci">void recalculate(ParentType &amp;Func)</div><div class="ttdoc">recalculate - compute a dominator tree for the given function</div><div class="ttdef"><b>Definition:</b> <a href="GenericDomTree_8h_source.html#l00795">GenericDomTree.h:795</a></div></div>
<div class="ttc" id="anamespacellvm_1_1CallingConv_html_a5b166ae228ebbfdb96736d6022f3feeda7f1f535012fdeda3c9f35f2079b919a7"><div class="ttname"><a href="namespacellvm_1_1CallingConv.html#a5b166ae228ebbfdb96736d6022f3feeda7f1f535012fdeda3c9f35f2079b919a7">llvm::CallingConv::WASM_EmscriptenInvoke</a></div><div class="ttdeci">@ WASM_EmscriptenInvoke</div><div class="ttdoc">For emscripten __invoke_* functions.</div><div class="ttdef"><b>Definition:</b> <a href="CallingConv_8h_source.html#l00226">CallingConv.h:226</a></div></div>
<div class="ttc" id="aWebAssemblyLowerEmscriptenEHSjLj_8cpp_html_a1e5a795e237da6e01636980c98b645ab"><div class="ttname"><a href="WebAssemblyLowerEmscriptenEHSjLj_8cpp.html#a1e5a795e237da6e01636980c98b645ab">nullifySetjmp</a></div><div class="ttdeci">static void nullifySetjmp(Function *F)</div><div class="ttdef"><b>Definition:</b> <a href="WebAssemblyLowerEmscriptenEHSjLj_8cpp_source.html#l00865">WebAssemblyLowerEmscriptenEHSjLj.cpp:865</a></div></div>
<div class="ttc" id="aclassllvm_1_1BinaryOperator_html"><div class="ttname"><a href="classllvm_1_1BinaryOperator.html">llvm::BinaryOperator</a></div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00187">InstrTypes.h:187</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallBase_html_a87921b2b4748a722da30339103c08f62"><div class="ttname"><a href="classllvm_1_1CallBase.html#a87921b2b4748a722da30339103c08f62">llvm::CallBase::getOperandBundle</a></div><div class="ttdeci">std::optional&lt; OperandBundleUse &gt; getOperandBundle(StringRef Name) const</div><div class="ttdoc">Return an operand bundle by name, if present.</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l02036">InstrTypes.h:2036</a></div></div>
<div class="ttc" id="aclassllvm_1_1StringRef_html"><div class="ttname"><a href="classllvm_1_1StringRef.html">llvm::StringRef</a></div><div class="ttdoc">StringRef - Represent a constant reference to a string, i.e.</div><div class="ttdef"><b>Definition:</b> <a href="StringRef_8h_source.html#l00050">StringRef.h:50</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_a3ab5fc45117b450e8bb04e564cb6e5f2"><div class="ttname"><a href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">llvm::Value::replaceAllUsesWith</a></div><div class="ttdeci">void replaceAllUsesWith(Value *V)</div><div class="ttdoc">Change all uses of this to point to a new Value.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00532">Value.cpp:532</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_ace940beeee97c222f836fe0ac70f6cf5"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#ace940beeee97c222f836fe0ac70f6cf5">llvm::BasicBlock::Create</a></div><div class="ttdeci">static BasicBlock * Create(LLVMContext &amp;Context, const Twine &amp;Name=&quot;&quot;, Function *Parent=nullptr, BasicBlock *InsertBefore=nullptr)</div><div class="ttdoc">Creates a new BasicBlock.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00105">BasicBlock.h:105</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_ab3fc0225d8aaf8434026c3573f961f2c"><div class="ttname"><a href="classllvm_1_1Value.html#ab3fc0225d8aaf8434026c3573f961f2c">llvm::Value::getContext</a></div><div class="ttdeci">LLVMContext &amp; getContext() const</div><div class="ttdoc">All values hold a context through their type.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00994">Value.cpp:994</a></div></div>
<div class="ttc" id="aAArch64SLSHardening_8cpp_html_ad467c4ab9119043f9b7750ab986be61a"><div class="ttname"><a href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a></div><div class="ttdeci">MachineBasicBlock MachineBasicBlock::iterator DebugLoc DL</div><div class="ttdef"><b>Definition:</b> <a href="AArch64SLSHardening_8cpp_source.html#l00076">AArch64SLSHardening.cpp:76</a></div></div>
<div class="ttc" id="alib_2Target_2ARM_2README_8txt_html_a1b45f45820a60c09244a87eb59824aec"><div class="ttname"><a href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a></div><div class="ttdeci">add sub stmia L5 ldr r0 bl L_printf $stub Instead of a and a wouldn t it be better to do three moves *Return an aggregate type is even return S</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2ARM_2README_8txt_source.html#l00210">README.txt:210</a></div></div>
<div class="ttc" id="aSSAUpdater_8h_html"><div class="ttname"><a href="SSAUpdater_8h.html">SSAUpdater.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_adb5c319f5905c1d3ca9eb5df546388c5"><div class="ttname"><a href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">llvm::Value::getName</a></div><div class="ttdeci">StringRef getName() const</div><div class="ttdoc">Return a constant reference to the value's name.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00308">Value.cpp:308</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoadInst_html"><div class="ttname"><a href="classllvm_1_1LoadInst.html">llvm::LoadInst</a></div><div class="ttdoc">An instruction for reading from memory.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00177">Instructions.h:177</a></div></div>
<div class="ttc" id="aSampleProfWriter_8cpp_html_ac5f3689931c7238da06ba00cf1002c62"><div class="ttname"><a href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a></div><div class="ttdeci">raw_pwrite_stream &amp; OS</div><div class="ttdef"><b>Definition:</b> <a href="SampleProfWriter_8cpp_source.html#l00053">SampleProfWriter.cpp:53</a></div></div>
<div class="ttc" id="anamespacellvm_1_1Intrinsic_html_aefa39f6b622360ce4e947feb9f671b73"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#aefa39f6b622360ce4e947feb9f671b73">llvm::Intrinsic::getDeclaration</a></div><div class="ttdeci">Function * getDeclaration(Module *M, ID id, ArrayRef&lt; Type * &gt; Tys=std::nullopt)</div><div class="ttdoc">Create or insert an LLVM Function declaration for an intrinsic, and return it.</div><div class="ttdef"><b>Definition:</b> <a href="Function_8cpp_source.html#l01502">Function.cpp:1502</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_a966eb231e7d4e572874d2cb49b18faea"><div class="ttname"><a href="classllvm_1_1Value.html#a966eb231e7d4e572874d2cb49b18faea">llvm::Value::stripPointerCasts</a></div><div class="ttdeci">const Value * stripPointerCasts() const</div><div class="ttdoc">Strip off pointer casts, all-zero GEPs and address space casts.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00685">Value.cpp:685</a></div></div>
<div class="ttc" id="aAMDGPULibCalls_8cpp_html_a537c835c34f0b44b6ad2696643754390"><div class="ttname"><a href="AMDGPULibCalls_8cpp.html#a537c835c34f0b44b6ad2696643754390">Callee</a></div><div class="ttdeci">amdgpu Simplify well known AMD library false FunctionCallee Callee</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULibCalls_8cpp_source.html#l00187">AMDGPULibCalls.cpp:187</a></div></div>
<div class="ttc" id="aclassllvm_1_1MDNode_html_a936739514bcdb01ddd2826fa70cf15a5"><div class="ttname"><a href="classllvm_1_1MDNode.html#a936739514bcdb01ddd2826fa70cf15a5">llvm::MDNode::getContext</a></div><div class="ttdeci">LLVMContext &amp; getContext() const</div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8h_source.html#l01107">Metadata.h:1107</a></div></div>
<div class="ttc" id="aclassllvm_1_1Twine_html"><div class="ttname"><a href="classllvm_1_1Twine.html">llvm::Twine</a></div><div class="ttdoc">Twine - A lightweight data structure for efficiently representing the concatenation of temporary valu...</div><div class="ttdef"><b>Definition:</b> <a href="Twine_8h_source.html#l00081">Twine.h:81</a></div></div>
<div class="ttc" id="anamespacellvm_1_1pdb_html_a33e853ec74d48b1340d1d4bae772d30bab021df6aac4654c454f46c77646e745f"><div class="ttname"><a href="namespacellvm_1_1pdb.html#a33e853ec74d48b1340d1d4bae772d30bab021df6aac4654c454f46c77646e745f">llvm::pdb::PDB_SymType::Label</a></div><div class="ttdeci">@ Label</div></div>
<div class="ttc" id="anamespacellvm_1_1X86_html_a86730e94ae6fdf0fe3145b2acc88dea8ac9b4c62f6dc1bc5caf3c768b687cbf7e"><div class="ttname"><a href="namespacellvm_1_1X86.html#a86730e94ae6fdf0fe3145b2acc88dea8ac9b4c62f6dc1bc5caf3c768b687cbf7e">llvm::X86::FirstMacroFusionInstKind::Cmp</a></div><div class="ttdeci">@ Cmp</div></div>
<div class="ttc" id="aWasmEHFuncInfo_8h_html"><div class="ttname"><a href="WasmEHFuncInfo_8h.html">WasmEHFuncInfo.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallBase_html_adde2ea00dd2613ee41bfe91908e4e68e"><div class="ttname"><a href="classllvm_1_1CallBase.html#adde2ea00dd2613ee41bfe91908e4e68e">llvm::CallBase::arg_size</a></div><div class="ttdeci">unsigned arg_size() const</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l01349">InstrTypes.h:1349</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantTokenNone_html_a8e29fb8e39fb67b3bb746dbba47fcb29"><div class="ttname"><a href="classllvm_1_1ConstantTokenNone.html#a8e29fb8e39fb67b3bb746dbba47fcb29">llvm::ConstantTokenNone::get</a></div><div class="ttdeci">static ConstantTokenNone * get(LLVMContext &amp;Context)</div><div class="ttdoc">Return the ConstantTokenNone.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l01429">Constants.cpp:1429</a></div></div>
<div class="ttc" id="aclassllvm_1_1Module_html_a9c00c70121af456007404bd456047766"><div class="ttname"><a href="classllvm_1_1Module.html#a9c00c70121af456007404bd456047766">llvm::Module::getContext</a></div><div class="ttdeci">LLVMContext &amp; getContext() const</div><div class="ttdoc">Get the global data context.</div><div class="ttdef"><b>Definition:</b> <a href="Module_8h_source.html#l00262">Module.h:262</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_adc01a7457de85fc52a3bb860d7e1c6a4"><div class="ttname"><a href="classllvm_1_1Type.html#adc01a7457de85fc52a3bb860d7e1c6a4">llvm::Type::getPointerTo</a></div><div class="ttdeci">PointerType * getPointerTo(unsigned AddrSpace=0) const</div><div class="ttdoc">Return a pointer to the current type.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00776">Type.cpp:776</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallInst_html_a1d37f5425e608e65775ffe52c425a66c"><div class="ttname"><a href="classllvm_1_1CallInst.html#a1d37f5425e608e65775ffe52c425a66c">llvm::CallInst::CreateFree</a></div><div class="ttdeci">static Instruction * CreateFree(Value *Source, Instruction *InsertBefore)</div><div class="ttdoc">Generate the IR for a call to the builtin free function.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l00935">Instructions.cpp:935</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html_adf50671db83d2813e0d897ea2cfc9102"><div class="ttname"><a href="classllvm_1_1Function.html#adf50671db83d2813e0d897ea2cfc9102">llvm::Function::getFunctionType</a></div><div class="ttdeci">FunctionType * getFunctionType() const</div><div class="ttdoc">Returns the FunctionType for me.</div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00174">Function.h:174</a></div></div>
<div class="ttc" id="anamespacellvm_1_1MCID_html_ab357441fcd1ea1f9b0d27c12700f6023a2b016c207343046b2bac45e69e76dcec"><div class="ttname"><a href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a2b016c207343046b2bac45e69e76dcec">llvm::MCID::Add</a></div><div class="ttdeci">@ Add</div><div class="ttdef"><b>Definition:</b> <a href="MCInstrDesc_8h_source.html#l00186">MCInstrDesc.h:186</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallBase_html_a7ac9329ef7292ee640d87f45ce7ae05c"><div class="ttname"><a href="classllvm_1_1CallBase.html#a7ac9329ef7292ee640d87f45ce7ae05c">llvm::CallBase::getCalledOperand</a></div><div class="ttdeci">Value * getCalledOperand() const</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l01399">InstrTypes.h:1399</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalValue_html_aedfa75f0c85c4aa85b257f066fbea57ca6c93794d7b99cd433e96c53eadb15a6e"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57ca6c93794d7b99cd433e96c53eadb15a6e">llvm::GlobalValue::ExternalLinkage</a></div><div class="ttdeci">@ ExternalLinkage</div><div class="ttdoc">Externally visible function.</div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00048">GlobalValue.h:48</a></div></div>
<div class="ttc" id="aclassllvm_1_1CatchPadInst_html"><div class="ttname"><a href="classllvm_1_1CatchPadInst.html">llvm::CatchPadInst</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l04533">Instructions.h:4533</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a8f6f9b4a94dc0907499c03a9e1b6918b"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a8f6f9b4a94dc0907499c03a9e1b6918b">llvm::BasicBlock::back</a></div><div class="ttdeci">const Instruction &amp; back() const</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00328">BasicBlock.h:328</a></div></div>
<div class="ttc" id="aclassllvm_1_1AttributeSet_html"><div class="ttname"><a href="classllvm_1_1AttributeSet.html">llvm::AttributeSet</a></div><div class="ttdef"><b>Definition:</b> <a href="Attributes_8h_source.html#l00295">Attributes.h:295</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_ab4f3bf98b5054831b608852e33427814"><div class="ttname"><a href="classllvm_1_1Instruction.html#ab4f3bf98b5054831b608852e33427814">llvm::Instruction::getDebugLoc</a></div><div class="ttdeci">const DebugLoc &amp; getDebugLoc() const</div><div class="ttdoc">Return the debug location for this node as a DebugLoc.</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00358">Instruction.h:358</a></div></div>
<div class="ttc" id="aDominators_8h_html"><div class="ttname"><a href="Dominators_8h.html">Dominators.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallBase_html_ab2caa29167597390ab2fc3cf30d70389"><div class="ttname"><a href="classllvm_1_1CallBase.html#ab2caa29167597390ab2fc3cf30d70389">llvm::CallBase::getArgOperand</a></div><div class="ttdeci">Value * getArgOperand(unsigned i) const</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l01351">InstrTypes.h:1351</a></div></div>
<div class="ttc" id="aclassllvm_1_1SSAUpdater_html_a05c4f6837ee786e83246beeb01e3aa8d"><div class="ttname"><a href="classllvm_1_1SSAUpdater.html#a05c4f6837ee786e83246beeb01e3aa8d">llvm::SSAUpdater::RewriteUse</a></div><div class="ttdeci">void RewriteUse(Use &amp;U)</div><div class="ttdoc">Rewrite a use of the symbolic value.</div><div class="ttdef"><b>Definition:</b> <a href="SSAUpdater_8cpp_source.html#l00187">SSAUpdater.cpp:187</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html_a01875e4204852069dd4b7938cab4140b"><div class="ttname"><a href="classllvm_1_1Function.html#a01875e4204852069dd4b7938cab4140b">llvm::Function::addFnAttr</a></div><div class="ttdeci">void addFnAttr(Attribute::AttrKind Kind)</div><div class="ttdoc">Add function attributes to this function.</div><div class="ttdef"><b>Definition:</b> <a href="Function_8cpp_source.html#l00550">Function.cpp:550</a></div></div>
<div class="ttc" id="aclassllvm_1_1PHINode_html"><div class="ttname"><a href="classllvm_1_1PHINode.html">llvm::PHINode</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02708">Instructions.h:2708</a></div></div>
<div class="ttc" id="aclassllvm_1_1DISubprogram_html"><div class="ttname"><a href="classllvm_1_1DISubprogram.html">llvm::DISubprogram</a></div><div class="ttdoc">Subprogram description.</div><div class="ttdef"><b>Definition:</b> <a href="DebugInfoMetadata_8h_source.html#l01851">DebugInfoMetadata.h:1851</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html">llvm::SmallVectorImpl&lt; Instruction * &gt;</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallBase_html"><div class="ttname"><a href="classllvm_1_1CallBase.html">llvm::CallBase</a></div><div class="ttdoc">Base class for all callable instructions (InvokeInst and CallInst) Holds everything related to callin...</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l01184">InstrTypes.h:1184</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalValue_html_a92041fc7f781ba4fe708eec99139b72f"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#a92041fc7f781ba4fe708eec99139b72f">llvm::GlobalValue::getType</a></div><div class="ttdeci">PointerType * getType() const</div><div class="ttdoc">Global values are always pointers.</div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00290">GlobalValue.h:290</a></div></div>
<div class="ttc" id="aPassBuilderBindings_8cpp_html_ab76052bb166c65901edb603a3e1f03ab"><div class="ttname"><a href="PassBuilderBindings_8cpp.html#ab76052bb166c65901edb603a3e1f03ab">TM</a></div><div class="ttdeci">const char LLVMTargetMachineRef TM</div><div class="ttdef"><b>Definition:</b> <a href="PassBuilderBindings_8cpp_source.html#l00047">PassBuilderBindings.cpp:47</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallInst_html"><div class="ttname"><a href="classllvm_1_1CallInst.html">llvm::CallInst</a></div><div class="ttdoc">This class represents a function call, abstracting a target machine's calling convention.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01485">Instructions.h:1485</a></div></div>
<div class="ttc" id="alib_2CodeGen_2README_8txt_html_a09776db24cf586ec9f1e18f3bae14099"><div class="ttname"><a href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a></div><div class="ttdeci">Common register allocation spilling lr str ldr sxth r3 ldr mla r4 can lr mov lr str ldr sxth r3 mla r4 and then merge mul and lr str ldr sxth r3 mla r4 It also increase the likelihood the store may become dead bb27 Successors according to LLVM BB</div><div class="ttdef"><b>Definition:</b> <a href="lib_2CodeGen_2README_8txt_source.html#l00039">README.txt:39</a></div></div>
<div class="ttc" id="anamespacellvm_1_1CallingConv_html_a5b166ae228ebbfdb96736d6022f3feedad6e9c0ff694f0fca0222e79e772b647e"><div class="ttname"><a href="namespacellvm_1_1CallingConv.html#a5b166ae228ebbfdb96736d6022f3feedad6e9c0ff694f0fca0222e79e772b647e">llvm::CallingConv::Tail</a></div><div class="ttdeci">@ Tail</div><div class="ttdoc">Attemps to make calls as fast as possible while guaranteeing that tail call optimization can always b...</div><div class="ttdef"><b>Definition:</b> <a href="CallingConv_8h_source.html#l00076">CallingConv.h:76</a></div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisUsage_html_ae5c60fd282ee894c87ea02c3f0fcb6d0"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">llvm::AnalysisUsage::addRequired</a></div><div class="ttdeci">AnalysisUsage &amp; addRequired()</div><div class="ttdef"><b>Definition:</b> <a href="PassAnalysisSupport_8h_source.html#l00075">PassAnalysisSupport.h:75</a></div></div>
<div class="ttc" id="aclassllvm_1_1SwitchInst_html"><div class="ttname"><a href="classllvm_1_1SwitchInst.html">llvm::SwitchInst</a></div><div class="ttdoc">Multiway switch.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03283">Instructions.h:3283</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_ae855357b6c5e6e7ed1869272708a3a84"><div class="ttname"><a href="classllvm_1_1Value.html#ae855357b6c5e6e7ed1869272708a3a84">llvm::Value::takeName</a></div><div class="ttdeci">void takeName(Value *V)</div><div class="ttdoc">Transfer the name from V to this value.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00381">Value.cpp:381</a></div></div>
<div class="ttc" id="aclassllvm_1_1DebugLoc_html"><div class="ttname"><a href="classllvm_1_1DebugLoc.html">llvm::DebugLoc</a></div><div class="ttdoc">A debug info location.</div><div class="ttdef"><b>Definition:</b> <a href="DebugLoc_8h_source.html#l00033">DebugLoc.h:33</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key_html_a1958a762261549463a280bac3274d6d5"><div class="ttname"><a href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">llvm::AMDGPU::HSAMD::Kernel::Key::Args</a></div><div class="ttdeci">constexpr char Args[]</div><div class="ttdoc">Key for Kernel::Metadata::mArgs.</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPUMetadata_8h_source.html#l00394">AMDGPUMetadata.h:394</a></div></div>
<div class="ttc" id="aclassllvm_1_1SSAUpdater_html_af0d1a82b4e629e834c2ed53e5cbe22ef"><div class="ttname"><a href="classllvm_1_1SSAUpdater.html#af0d1a82b4e629e834c2ed53e5cbe22ef">llvm::SSAUpdater::AddAvailableValue</a></div><div class="ttdeci">void AddAvailableValue(BasicBlock *BB, Value *V)</div><div class="ttdoc">Indicate that a rewritten value is available in the specified block with the specified value.</div><div class="ttdef"><b>Definition:</b> <a href="SSAUpdater_8cpp_source.html#l00070">SSAUpdater.cpp:70</a></div></div>
<div class="ttc" id="astructllvm_1_1cl_1_1desc_html"><div class="ttname"><a href="structllvm_1_1cl_1_1desc.html">llvm::cl::desc</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00411">CommandLine.h:411</a></div></div>
<div class="ttc" id="aWebAssemblyLowerEmscriptenEHSjLj_8cpp_html_af1d60b33d700662094d9f8727d92a5a1"><div class="ttname"><a href="WebAssemblyLowerEmscriptenEHSjLj_8cpp.html#af1d60b33d700662094d9f8727d92a5a1">getEmscriptenFunction</a></div><div class="ttdeci">static Function * getEmscriptenFunction(FunctionType *Ty, const Twine &amp;Name, Module *M)</div><div class="ttdef"><b>Definition:</b> <a href="WebAssemblyLowerEmscriptenEHSjLj_8cpp_source.html#l00448">WebAssemblyLowerEmscriptenEHSjLj.cpp:448</a></div></div>
<div class="ttc" id="aclassllvm_1_1SSAUpdater_html"><div class="ttname"><a href="classllvm_1_1SSAUpdater.html">llvm::SSAUpdater</a></div><div class="ttdoc">Helper class for SSA formation on a set of values defined in multiple blocks.</div><div class="ttdef"><b>Definition:</b> <a href="SSAUpdater_8h_source.html#l00039">SSAUpdater.h:39</a></div></div>
<div class="ttc" id="aclassllvm_1_1AttributeList_html_ada7a173c40ca7ac048a4b7099ceb71c0"><div class="ttname"><a href="classllvm_1_1AttributeList.html#ada7a173c40ca7ac048a4b7099ceb71c0">llvm::AttributeList::getParamAttrs</a></div><div class="ttdeci">AttributeSet getParamAttrs(unsigned ArgNo) const</div><div class="ttdoc">The attributes for the argument or parameter at the given index are returned.</div><div class="ttdef"><b>Definition:</b> <a href="Attributes_8cpp_source.html#l01454">Attributes.cpp:1454</a></div></div>
<div class="ttc" id="aclassllvm_1_1LLVMContext_html_a800c1300065ca1615d2f4fb88623afd5a8997c6b0930e2c05209e95e7172c6cf3"><div class="ttname"><a href="classllvm_1_1LLVMContext.html#a800c1300065ca1615d2f4fb88623afd5a8997c6b0930e2c05209e95e7172c6cf3">llvm::LLVMContext::OB_funclet</a></div><div class="ttdeci">@ OB_funclet</div><div class="ttdef"><b>Definition:</b> <a href="LLVMContext_8h_source.html#l00090">LLVMContext.h:90</a></div></div>
<div class="ttc" id="aclassllvm_1_1BinaryOperator_html_a02ce9966395063ac501ecbc1623deda4"><div class="ttname"><a href="classllvm_1_1BinaryOperator.html#a02ce9966395063ac501ecbc1623deda4">llvm::BinaryOperator::Create</a></div><div class="ttdeci">static BinaryOperator * Create(BinaryOps Op, Value *S1, Value *S2, const Twine &amp;Name=Twine(), Instruction *InsertBefore=nullptr)</div><div class="ttdoc">Construct a binary instruction, given the opcode and the two operands.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l02950">Instructions.cpp:2950</a></div></div>
<div class="ttc" id="aBasicBlockUtils_8h_html"><div class="ttname"><a href="BasicBlockUtils_8h.html">BasicBlockUtils.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_ad295cb34421c21507bc9cdefe1ba3f16"><div class="ttname"><a href="namespacellvm.html#ad295cb34421c21507bc9cdefe1ba3f16">llvm::SplitBlock</a></div><div class="ttdeci">BasicBlock * SplitBlock(BasicBlock *Old, Instruction *SplitPt, DominatorTree *DT, LoopInfo *LI=nullptr, MemorySSAUpdater *MSSAU=nullptr, const Twine &amp;BBName=&quot;&quot;, bool Before=false)</div><div class="ttdoc">Split the specified block at the specified instruction.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlockUtils_8cpp_source.html#l00935">BasicBlockUtils.cpp:935</a></div></div>
<div class="ttc" id="aclassllvm_1_1CatchSwitchInst_html"><div class="ttname"><a href="classllvm_1_1CatchSwitchInst.html">llvm::CatchSwitchInst</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l04313">Instructions.h:4313</a></div></div>
<div class="ttc" id="aclassllvm_1_1FunctionType_html_ac453ad79a3d50950bac79bc9dff85918"><div class="ttname"><a href="classllvm_1_1FunctionType.html#ac453ad79a3d50950bac79bc9dff85918">llvm::FunctionType::getReturnType</a></div><div class="ttdeci">Type * getReturnType() const</div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00124">DerivedTypes.h:124</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html"><div class="ttname"><a href="classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00074">Value.h:74</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_ab4e0512c7e1c7adaa56677e3155685f1"><div class="ttname"><a href="classllvm_1_1Value.html#ab4e0512c7e1c7adaa56677e3155685f1">llvm::Value::users</a></div><div class="ttdeci">iterator_range&lt; user_iterator &gt; users()</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00421">Value.h:421</a></div></div>
<div class="ttc" id="anamespacellvm_1_1WebAssembly_html_a9d507b0cb1cf288e6fe831666a8b8668"><div class="ttname"><a href="namespacellvm_1_1WebAssembly.html#a9d507b0cb1cf288e6fe831666a8b8668">llvm::WebAssembly::WasmEnableEmEH</a></div><div class="ttdeci">cl::opt&lt; bool &gt; WasmEnableEmEH</div></div>
<div class="ttc" id="aclassllvm_1_1CallBase_html_a0851b4de29686e9c3918449b054cfada"><div class="ttname"><a href="classllvm_1_1CallBase.html#a0851b4de29686e9c3918449b054cfada">llvm::CallBase::setCallingConv</a></div><div class="ttdeci">void setCallingConv(CallingConv::ID CC)</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l01469">InstrTypes.h:1469</a></div></div>
<div class="ttc" id="aclassllvm_1_1FunctionType_html"><div class="ttname"><a href="classllvm_1_1FunctionType.html">llvm::FunctionType</a></div><div class="ttdoc">Class to represent function types.</div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00103">DerivedTypes.h:103</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSetImpl_html_a6bc6fb89fe2e91c25559a8631f56e27e"><div class="ttname"><a href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">llvm::SmallPtrSetImpl::insert</a></div><div class="ttdeci">std::pair&lt; iterator, bool &gt; insert(PtrType Ptr)</div><div class="ttdoc">Inserts Ptr if and only if there is no element in the container equal to Ptr.</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00365">SmallPtrSet.h:365</a></div></div>
<div class="ttc" id="aclassllvm_1_1PoisonValue_html_a1bf08613fb664a2e377a9a72c59a6b66"><div class="ttname"><a href="classllvm_1_1PoisonValue.html#a1bf08613fb664a2e377a9a72c59a6b66">llvm::PoisonValue::get</a></div><div class="ttdeci">static PoisonValue * get(Type *T)</div><div class="ttdoc">Static factory methods - Return an 'poison' object of the specified type.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l01759">Constants.cpp:1759</a></div></div>
<div class="ttc" id="aclassllvm_1_1cl_1_1list_html"><div class="ttname"><a href="classllvm_1_1cl_1_1list.html">llvm::cl::list</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l01646">CommandLine.h:1646</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Aug 7 2023 10:19:06 for LLVM by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>

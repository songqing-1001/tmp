<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LLVM: lib/Transforms/ObjCARC/ObjCARCOpts.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">LLVM
   &#160;<span id="projectnumber">17.0.0git</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a class="el" href="dir_a72932e0778af28115095468f6286ff8.html">Transforms</a></li><li class="navelem"><a class="el" href="dir_296957ed9f72a005efdf3fbc578416d5.html">ObjCARC</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">ObjCARCOpts.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="ObjCARCOpts_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//===- ObjCARCOpts.cpp - ObjC ARC Optimization ----------------------------===//</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">// See https://llvm.org/LICENSE.txt for license information.</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//</span><span class="comment"></span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">/// \file</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">/// This file defines ObjC ARC optimizations. ARC stands for Automatic</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">/// Reference Counting and is a system for managing reference counts for objects</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">/// in Objective C.</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">/// The optimizations performed include elimination of redundant, partially</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">/// redundant, and inconsequential reference count operations, elimination of</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">/// redundant weak pointer operations, and numerous minor simplifications.</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment">/// WARNING: This file knows about certain library functions. It recognizes them</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment">/// by name, and hardwires knowledge of their semantics.</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment">/// WARNING: This file knows about how certain Objective-C library functions are</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment">/// used. Naive LLVM IR transformations which would otherwise be</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment">/// behavior-preserving may break these assumptions.</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment"></span><span class="comment">//</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160; </div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ARCRuntimeEntryPoints_8h.html">ARCRuntimeEntryPoints.h</a>&quot;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="BlotMapVector_8h.html">BlotMapVector.h</a>&quot;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DependencyAnalysis_8h.html">DependencyAnalysis.h</a>&quot;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="include_2llvm_2Transforms_2ObjCARC_8h.html">ObjCARC.h</a>&quot;</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ProvenanceAnalysis_8h.html">ProvenanceAnalysis.h</a>&quot;</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="PtrState_8h.html">PtrState.h</a>&quot;</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DenseMap_8h.html">llvm/ADT/DenseMap.h</a>&quot;</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="STLExtras_8h.html">llvm/ADT/STLExtras.h</a>&quot;</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SmallPtrSet_8h.html">llvm/ADT/SmallPtrSet.h</a>&quot;</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SmallVector_8h.html">llvm/ADT/SmallVector.h</a>&quot;</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Statistic_8h.html">llvm/ADT/Statistic.h</a>&quot;</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="AliasAnalysis_8h.html">llvm/Analysis/AliasAnalysis.h</a>&quot;</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ObjCARCAliasAnalysis_8h.html">llvm/Analysis/ObjCARCAliasAnalysis.h</a>&quot;</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ObjCARCAnalysisUtils_8h.html">llvm/Analysis/ObjCARCAnalysisUtils.h</a>&quot;</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ObjCARCInstKind_8h.html">llvm/Analysis/ObjCARCInstKind.h</a>&quot;</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ObjCARCUtil_8h.html">llvm/Analysis/ObjCARCUtil.h</a>&quot;</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="BasicBlock_8h.html">llvm/IR/BasicBlock.h</a>&quot;</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="IR_2CFG_8h.html">llvm/IR/CFG.h</a>&quot;</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Constant_8h.html">llvm/IR/Constant.h</a>&quot;</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Constants_8h.html">llvm/IR/Constants.h</a>&quot;</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DerivedTypes_8h.html">llvm/IR/DerivedTypes.h</a>&quot;</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="EHPersonalities_8h.html">llvm/IR/EHPersonalities.h</a>&quot;</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Function_8h.html">llvm/IR/Function.h</a>&quot;</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="GlobalVariable_8h.html">llvm/IR/GlobalVariable.h</a>&quot;</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="InstIterator_8h.html">llvm/IR/InstIterator.h</a>&quot;</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="InstrTypes_8h.html">llvm/IR/InstrTypes.h</a>&quot;</span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="IR_2Instruction_8h.html">llvm/IR/Instruction.h</a>&quot;</span></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Instructions_8h.html">llvm/IR/Instructions.h</a>&quot;</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LLVMContext_8h.html">llvm/IR/LLVMContext.h</a>&quot;</span></div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Metadata_8h.html">llvm/IR/Metadata.h</a>&quot;</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Type_8h.html">llvm/IR/Type.h</a>&quot;</span></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="User_8h.html">llvm/IR/User.h</a>&quot;</span></div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Value_8h.html">llvm/IR/Value.h</a>&quot;</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Casting_8h.html">llvm/Support/Casting.h</a>&quot;</span></div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CommandLine_8h.html">llvm/Support/CommandLine.h</a>&quot;</span></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Compiler_8h.html">llvm/Support/Compiler.h</a>&quot;</span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Debug_8h.html">llvm/Support/Debug.h</a>&quot;</span></div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Support_2ErrorHandling_8h.html">llvm/Support/ErrorHandling.h</a>&quot;</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="raw__ostream_8h.html">llvm/Support/raw_ostream.h</a>&quot;</span></div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="include_2llvm_2Transforms_2ObjCARC_8h.html">llvm/Transforms/ObjCARC.h</a>&quot;</span></div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="preprocessor">#include &lt;cassert&gt;</span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="preprocessor">#include &lt;iterator&gt;</span></div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="preprocessor">#include &lt;utility&gt;</span></div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160; </div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespacellvm.html">llvm</a>;</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespacellvm_1_1objcarc.html">llvm::objcarc</a>;</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160; </div>
<div class="line"><a name="l00074"></a><span class="lineno"><a class="line" href="ObjCARCOpts_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">   74</a></span>&#160;<span class="preprocessor">#define DEBUG_TYPE &quot;objc-arc-opts&quot;</span></div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160; </div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;unsigned&gt;</a> <a class="code" href="ObjCARCOpts_8cpp.html#ada3f418289d61a260056b641a13e86c1">MaxPtrStates</a>(<span class="stringliteral">&quot;arc-opt-max-ptr-states&quot;</span>,</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Maximum number of ptr states the optimizer keeps track of&quot;</span>),</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(4095));</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="comment">/// \defgroup ARCUtilities Utility declarations/definitions specific to ARC.</span></div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="comment">/// @{</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="comment"></span><span class="comment"></span> </div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="comment">/// This is similar to GetRCIdentityRoot but it stops as soon</span></div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="comment">/// as it finds a value with multiple uses.</span></div>
<div class="line"><a name="l00086"></a><span class="lineno"><a class="line" href="group__ARCUtilities.html#ga3e31fa79553c53df380d4054de2ca1c9">   86</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="group__ARCUtilities.html#ga3e31fa79553c53df380d4054de2ca1c9">FindSingleUseIdentifiedObject</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>) {</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;  <span class="comment">// ConstantData (like ConstantPointerNull and UndefValue) is used across</span></div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;  <span class="comment">// modules.  It&#39;s never a single-use value.</span></div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;  <span class="keywordflow">if</span> (isa&lt;ConstantData&gt;(<a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>))</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160; </div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>-&gt;hasOneUse()) {</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1BitCastInst.html">BitCastInst</a> *BC = dyn_cast&lt;BitCastInst&gt;(<a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>))</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="group__ARCUtilities.html#ga3e31fa79553c53df380d4054de2ca1c9">FindSingleUseIdentifiedObject</a>(BC-&gt;getOperand(0));</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1GetElementPtrInst.html">GetElementPtrInst</a> *<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a> = dyn_cast&lt;GetElementPtrInst&gt;(<a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>))</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>-&gt;hasAllZeroIndices())</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__ARCUtilities.html#ga3e31fa79553c53df380d4054de2ca1c9">FindSingleUseIdentifiedObject</a>(<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>-&gt;getPointerOperand());</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1objcarc.html#a7137a432b1d5406783f79dd29fc591fb">IsForwarding</a>(<a class="code" href="namespacellvm_1_1objcarc.html#a86cdbdf3773be3c67bc193b473b75708">GetBasicARCInstKind</a>(<a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>)))</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="group__ARCUtilities.html#ga3e31fa79553c53df380d4054de2ca1c9">FindSingleUseIdentifiedObject</a>(</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;               cast&lt;CallInst&gt;(<a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>)-&gt;getArgOperand(0));</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1objcarc.html#a509cccdade23eb44c7f84b31238dd52c">IsObjCIdentifiedObject</a>(<a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>))</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>;</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;  }</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160; </div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;  <span class="comment">// If we found an identifiable object but it has multiple uses, but they are</span></div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;  <span class="comment">// trivial uses, we can still consider this to be a single-use value.</span></div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1objcarc.html#a509cccdade23eb44c7f84b31238dd52c">IsObjCIdentifiedObject</a>(<a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>)) {</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1User.html">User</a> *U : <a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>-&gt;users())</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;      <span class="keywordflow">if</span> (!U-&gt;use_empty() || <a class="code" href="namespacellvm_1_1objcarc.html#aa72ef5ef299b7531b84aafcf9c1f755f">GetRCIdentityRoot</a>(U) != <a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>)</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;         <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160; </div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>;</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;  }</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160; </div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;}</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;<span class="comment">/// @}</span></div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="comment">/// \defgroup ARCOpt ARC Optimization.</span></div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;<span class="comment">/// @{</span></div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;<span class="comment">// TODO: On code like this:</span></div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;<span class="comment">// objc_retain(%x)</span></div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;<span class="comment">// stuff_that_cannot_release()</span></div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<span class="comment">// objc_autorelease(%x)</span></div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;<span class="comment">// stuff_that_cannot_release()</span></div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;<span class="comment">// objc_retain(%x)</span></div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;<span class="comment">// stuff_that_cannot_release()</span></div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;<span class="comment">// objc_autorelease(%x)</span></div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;<span class="comment">// The second retain and autorelease can be deleted.</span></div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160; </div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;<span class="comment">// TODO: It should be possible to delete</span></div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;<span class="comment">// objc_autoreleasePoolPush and objc_autoreleasePoolPop</span></div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;<span class="comment">// pairs if nothing is actually autoreleased between them. Also, autorelease</span></div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;<span class="comment">// calls followed by objc_autoreleasePoolPop calls (perhaps in ObjC++ code</span></div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<span class="comment">// after inlining) can be turned into plain release calls.</span></div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160; </div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;<span class="comment">// TODO: Critical-edge splitting. If the optimial insertion point is</span></div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;<span class="comment">// a critical edge, the current algorithm has to fail, because it doesn&#39;t</span></div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;<span class="comment">// know how to split edges. It should be possible to make the optimizer</span></div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;<span class="comment">// think in terms of edges, rather than blocks, and then split critical</span></div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;<span class="comment">// edges on demand.</span></div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160; </div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;<span class="comment">// TODO: OptimizeSequences could generalized to be Interprocedural.</span></div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160; </div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;<span class="comment">// TODO: Recognize that a bunch of other objc runtime calls have</span></div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;<span class="comment">// non-escaping arguments and non-releasing arguments, and may be</span></div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;<span class="comment">// non-autoreleasing.</span></div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160; </div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;<span class="comment">// TODO: Sink autorelease calls as far as possible. Unfortunately we</span></div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;<span class="comment">// usually can&#39;t sink them past other calls, which would be the main</span></div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;<span class="comment">// case where it would be useful.</span></div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160; </div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;<span class="comment">// TODO: The pointer returned from objc_loadWeakRetained is retained.</span></div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160; </div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;<span class="comment">// TODO: Delete release+retain pairs (rare).</span></div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160; </div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(NumNoops,       <span class="stringliteral">&quot;Number of no-op objc calls eliminated&quot;</span>);</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(NumPartialNoops, <span class="stringliteral">&quot;Number of partially no-op objc calls eliminated&quot;</span>);</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(NumAutoreleases,<span class="stringliteral">&quot;Number of autoreleases converted to releases&quot;</span>);</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(NumRets,        <span class="stringliteral">&quot;Number of return value forwarding &quot;</span></div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;                          <span class="stringliteral">&quot;retain+autoreleases eliminated&quot;</span>);</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(NumRRs,         <span class="stringliteral">&quot;Number of retain+release paths eliminated&quot;</span>);</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(NumPeeps,       <span class="stringliteral">&quot;Number of calls peephole-optimized&quot;</span>);</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(NumRetainsBeforeOpt,</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;          <span class="stringliteral">&quot;Number of retains before optimization&quot;</span>);</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(NumReleasesBeforeOpt,</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;          <span class="stringliteral">&quot;Number of releases before optimization&quot;</span>);</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(NumRetainsAfterOpt,</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;          <span class="stringliteral">&quot;Number of retains after optimization&quot;</span>);</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(NumReleasesAfterOpt,</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;          <span class="stringliteral">&quot;Number of releases after optimization&quot;</span>);</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160; </div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;<span class="keyword">namespace </span>{</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;<span class="comment">  /// Per-BasicBlock state.</span></div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;<span class="comment"></span>  <span class="keyword">class </span>BBState {<span class="comment"></span></div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;<span class="comment">    /// The number of unique control paths from the entry which can reach this</span></div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;<span class="comment">    /// block.</span></div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;<span class="comment"></span>    <span class="keywordtype">unsigned</span> TopDownPathCount = 0;</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;<span class="comment">    /// The number of unique control paths to exits from this block.</span></div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;<span class="comment"></span>    <span class="keywordtype">unsigned</span> BottomUpPathCount = 0;</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;<span class="comment">    /// The top-down traversal uses this to record information known about a</span></div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;<span class="comment">    /// pointer at the bottom of each block.</span></div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;<span class="comment"></span>    <a class="code" href="classllvm_1_1BlotMapVector.html">BlotMapVector&lt;const Value *, TopDownPtrState&gt;</a> PerPtrTopDown;</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;<span class="comment">    /// The bottom-up traversal uses this to record information known about a</span></div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;<span class="comment">    /// pointer at the top of each block.</span></div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;<span class="comment"></span>    <a class="code" href="classllvm_1_1BlotMapVector.html">BlotMapVector&lt;const Value *, BottomUpPtrState&gt;</a> PerPtrBottomUp;</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;<span class="comment">    /// Effective predecessors of the current block ignoring ignorable edges and</span></div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;<span class="comment">    /// ignored backedges.</span></div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;<span class="comment"></span>    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;BasicBlock *, 2&gt;</a> Preds;</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;<span class="comment">    /// Effective successors of the current block ignoring ignorable edges and</span></div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;<span class="comment">    /// ignored backedges.</span></div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;<span class="comment"></span>    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;BasicBlock *, 2&gt;</a> Succs;</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160; </div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;  <span class="keyword">public</span>:</div>
<div class="line"><a name="l00208"></a><span class="lineno"><a class="line" href="group__ARCOpt.html#gaf049222c368a7cbc12109fbc79ce8f34">  208</a></span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <a class="code" href="group__ARCOpt.html#gaf049222c368a7cbc12109fbc79ce8f34">OverflowOccurredValue</a>;</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160; </div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    BBState() = <span class="keywordflow">default</span>;</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160; </div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    <span class="keyword">using</span> top_down_ptr_iterator = decltype(PerPtrTopDown)::iterator;</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    <span class="keyword">using</span> const_top_down_ptr_iterator = decltype(PerPtrTopDown)::const_iterator;</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160; </div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    top_down_ptr_iterator top_down_ptr_begin() { <span class="keywordflow">return</span> PerPtrTopDown.<a class="code" href="classllvm_1_1BlotMapVector.html#afe9bb2d89b79c53645c7adef310b66f9">begin</a>(); }</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    top_down_ptr_iterator top_down_ptr_end() { <span class="keywordflow">return</span> PerPtrTopDown.<a class="code" href="classllvm_1_1BlotMapVector.html#a858918a4b48c7fcb780817c1709c9d3f">end</a>(); }</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    const_top_down_ptr_iterator top_down_ptr_begin()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;      <span class="keywordflow">return</span> PerPtrTopDown.<a class="code" href="classllvm_1_1BlotMapVector.html#afe9bb2d89b79c53645c7adef310b66f9">begin</a>();</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    }</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    const_top_down_ptr_iterator top_down_ptr_end()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;      <span class="keywordflow">return</span> PerPtrTopDown.<a class="code" href="classllvm_1_1BlotMapVector.html#a858918a4b48c7fcb780817c1709c9d3f">end</a>();</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    }</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    <span class="keywordtype">bool</span> hasTopDownPtrs()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;      <span class="keywordflow">return</span> !PerPtrTopDown.<a class="code" href="classllvm_1_1BlotMapVector.html#a955a07a15cf61e1d84d10cea781d25ce">empty</a>();</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    }</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160; </div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    <span class="keywordtype">unsigned</span> top_down_ptr_list_size()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;      <span class="keywordflow">return</span> std::distance(top_down_ptr_begin(), top_down_ptr_end());</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    }</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160; </div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    <span class="keyword">using</span> bottom_up_ptr_iterator = decltype(PerPtrBottomUp)::iterator;</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    <span class="keyword">using</span> const_bottom_up_ptr_iterator =</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;        decltype(PerPtrBottomUp)::const_iterator;</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160; </div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    bottom_up_ptr_iterator bottom_up_ptr_begin() {</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;      <span class="keywordflow">return</span> PerPtrBottomUp.<a class="code" href="classllvm_1_1BlotMapVector.html#afe9bb2d89b79c53645c7adef310b66f9">begin</a>();</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    }</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    bottom_up_ptr_iterator bottom_up_ptr_end() { <span class="keywordflow">return</span> PerPtrBottomUp.<a class="code" href="classllvm_1_1BlotMapVector.html#a858918a4b48c7fcb780817c1709c9d3f">end</a>(); }</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    const_bottom_up_ptr_iterator bottom_up_ptr_begin()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;      <span class="keywordflow">return</span> PerPtrBottomUp.<a class="code" href="classllvm_1_1BlotMapVector.html#afe9bb2d89b79c53645c7adef310b66f9">begin</a>();</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    }</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    const_bottom_up_ptr_iterator bottom_up_ptr_end()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;      <span class="keywordflow">return</span> PerPtrBottomUp.<a class="code" href="classllvm_1_1BlotMapVector.html#a858918a4b48c7fcb780817c1709c9d3f">end</a>();</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    }</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    <span class="keywordtype">bool</span> hasBottomUpPtrs()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;      <span class="keywordflow">return</span> !PerPtrBottomUp.<a class="code" href="classllvm_1_1BlotMapVector.html#a955a07a15cf61e1d84d10cea781d25ce">empty</a>();</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    }</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160; </div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    <span class="keywordtype">unsigned</span> bottom_up_ptr_list_size()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;      <span class="keywordflow">return</span> std::distance(bottom_up_ptr_begin(), bottom_up_ptr_end());</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    }</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;<span class="comment">    /// Mark this block as being an entry block, which has one path from the</span></div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;<span class="comment">    /// entry by definition.</span></div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;<span class="comment"></span>    <span class="keywordtype">void</span> SetAsEntry() { TopDownPathCount = 1; }</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;<span class="comment">    /// Mark this block as being an exit block, which has one path to an exit by</span></div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;<span class="comment">    /// definition.</span></div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;<span class="comment"></span>    <span class="keywordtype">void</span> SetAsExit()  { BottomUpPathCount = 1; }</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;<span class="comment">    /// Attempt to find the PtrState object describing the top down state for</span></div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;<span class="comment">    /// pointer Arg. Return a new initialized PtrState describing the top down</span></div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;<span class="comment">    /// state for Arg if we do not find one.</span></div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;<span class="comment"></span>    <a class="code" href="structllvm_1_1objcarc_1_1TopDownPtrState.html">TopDownPtrState</a> &amp;getPtrTopDownState(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>) {</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;      <span class="keywordflow">return</span> PerPtrTopDown[<a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>];</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    }</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;<span class="comment">    /// Attempt to find the PtrState object describing the bottom up state for</span></div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;<span class="comment">    /// pointer Arg. Return a new initialized PtrState describing the bottom up</span></div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;<span class="comment">    /// state for Arg if we do not find one.</span></div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;<span class="comment"></span>    <a class="code" href="structllvm_1_1objcarc_1_1BottomUpPtrState.html">BottomUpPtrState</a> &amp;getPtrBottomUpState(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>) {</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;      <span class="keywordflow">return</span> PerPtrBottomUp[<a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>];</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    }</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;<span class="comment">    /// Attempt to find the PtrState object describing the bottom up state for</span></div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;<span class="comment">    /// pointer Arg.</span></div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;<span class="comment"></span>    bottom_up_ptr_iterator findPtrBottomUpState(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>) {</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;      <span class="keywordflow">return</span> PerPtrBottomUp.<a class="code" href="classllvm_1_1BlotMapVector.html#a73e3ded01b65ddc78347be07e1a87a29">find</a>(<a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>);</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    }</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160; </div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    <span class="keywordtype">void</span> clearBottomUpPointers() {</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;      PerPtrBottomUp.<a class="code" href="classllvm_1_1BlotMapVector.html#a1286e28d794e6763e70dfc26fee1a35a">clear</a>();</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    }</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160; </div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    <span class="keywordtype">void</span> clearTopDownPointers() {</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;      PerPtrTopDown.<a class="code" href="classllvm_1_1BlotMapVector.html#a1286e28d794e6763e70dfc26fee1a35a">clear</a>();</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    }</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160; </div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    <span class="keywordtype">void</span> InitFromPred(<span class="keyword">const</span> BBState &amp;Other);</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    <span class="keywordtype">void</span> InitFromSucc(<span class="keyword">const</span> BBState &amp;Other);</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    <span class="keywordtype">void</span> MergePred(<span class="keyword">const</span> BBState &amp;Other);</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    <span class="keywordtype">void</span> MergeSucc(<span class="keyword">const</span> BBState &amp;Other);</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;<span class="comment">    /// Compute the number of possible unique paths from an entry to an exit</span></div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;<span class="comment">    /// which pass through this block. This is only valid after both the</span></div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;<span class="comment">    /// top-down and bottom-up traversals are complete.</span></div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;<span class="comment">    ///</span></div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;<span class="comment">    /// Returns true if overflow occurred. Returns false if overflow did not</span></div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;<span class="comment">    /// occur.</span></div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;<span class="comment"></span>    <span class="keywordtype">bool</span> GetAllPathCountWithOverflow(<span class="keywordtype">unsigned</span> &amp;PathCount)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;      <span class="keywordflow">if</span> (TopDownPathCount == OverflowOccurredValue ||</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;          BottomUpPathCount == OverflowOccurredValue)</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;      <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span> Product =</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;        (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> long)TopDownPathCount*BottomUpPathCount;</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;      <span class="comment">// Overflow occurred if any of the upper bits of Product are set or if all</span></div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;      <span class="comment">// the lower bits of Product are all set.</span></div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;      <span class="keywordflow">return</span> (Product &gt;&gt; 32) ||</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;             ((PathCount = Product) == OverflowOccurredValue);</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    }</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160; </div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    <span class="comment">// Specialized CFG utilities.</span></div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    <span class="keyword">using</span> edge_iterator = <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;BasicBlock *&gt;::const_iterator</a>;</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160; </div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    edge_iterator <a class="code" href="namespacellvm.html#a7e108932dc3da5294aed99a353aac9c4">pred_begin</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> Preds.begin(); }</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    edge_iterator <a class="code" href="namespacellvm.html#a5eeaf08e96168c2cac8960f87f0ef360">pred_end</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> Preds.end(); }</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    edge_iterator <a class="code" href="namespacellvm.html#a3720211f6e6389ab53734b989bfb6fce">succ_begin</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> Succs.begin(); }</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    edge_iterator <a class="code" href="namespacellvm.html#a069c4ae2290101bde0f8d6a5074dc72b">succ_end</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> Succs.end(); }</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160; </div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    <span class="keywordtype">void</span> addSucc(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Succ) { Succs.push_back(Succ); }</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    <span class="keywordtype">void</span> addPred(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Pred) { Preds.push_back(Pred); }</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160; </div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    <span class="keywordtype">bool</span> isExit()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> Succs.empty(); }</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;  };</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160; </div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;} <span class="comment">// end anonymous namespace</span></div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160; </div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;<span class="keyword">const</span> <span class="keywordtype">unsigned</span> BBState::OverflowOccurredValue = 0xffffffff;</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160; </div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespacellvm.html">llvm</a> {</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160; </div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;<a class="code" href="classllvm_1_1raw__ostream.html">raw_ostream</a> &amp;<a class="code" href="namespacellvm_1_1objcarc.html#a2cfd2097e9e2cea7a8eb50a369146e85">operator&lt;&lt;</a>(<a class="code" href="classllvm_1_1raw__ostream.html">raw_ostream</a> &amp;<a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a>,</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;                        BBState &amp;BBState) <a class="code" href="Compiler_8h.html#acc1c483f4b4ee2f17bb6643a3b353609">LLVM_ATTRIBUTE_UNUSED</a>;</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160; </div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;} <span class="comment">// end namespace llvm</span></div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160; </div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;<span class="keywordtype">void</span> BBState::InitFromPred(<span class="keyword">const</span> BBState &amp;Other) {</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;  PerPtrTopDown = <a class="code" href="ELFYAML_8cpp.html#a941c34da9850676ce3380813c636cff2">Other</a>.PerPtrTopDown;</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;  TopDownPathCount = <a class="code" href="ELFYAML_8cpp.html#a941c34da9850676ce3380813c636cff2">Other</a>.TopDownPathCount;</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;}</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160; </div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;<span class="keywordtype">void</span> BBState::InitFromSucc(<span class="keyword">const</span> BBState &amp;Other) {</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;  PerPtrBottomUp = <a class="code" href="ELFYAML_8cpp.html#a941c34da9850676ce3380813c636cff2">Other</a>.PerPtrBottomUp;</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;  BottomUpPathCount = <a class="code" href="ELFYAML_8cpp.html#a941c34da9850676ce3380813c636cff2">Other</a>.BottomUpPathCount;</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;}</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;<span class="comment">/// The top-down traversal uses this to merge information about predecessors to</span></div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;<span class="comment">/// form the initial state for a new block.</span></div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> BBState::MergePred(<span class="keyword">const</span> BBState &amp;Other) {</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;  <span class="keywordflow">if</span> (TopDownPathCount == OverflowOccurredValue)</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160; </div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;  <span class="comment">// Other.TopDownPathCount can be 0, in which case it is either dead or a</span></div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;  <span class="comment">// loop backedge. Loop backedges are special.</span></div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;  TopDownPathCount += <a class="code" href="ELFYAML_8cpp.html#a941c34da9850676ce3380813c636cff2">Other</a>.TopDownPathCount;</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160; </div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;  <span class="comment">// In order to be consistent, we clear the top down pointers when by adding</span></div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;  <span class="comment">// TopDownPathCount becomes OverflowOccurredValue even though &quot;true&quot; overflow</span></div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;  <span class="comment">// has not occurred.</span></div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;  <span class="keywordflow">if</span> (TopDownPathCount == OverflowOccurredValue) {</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    clearTopDownPointers();</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;  }</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160; </div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;  <span class="comment">// Check for overflow. If we have overflow, fall back to conservative</span></div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;  <span class="comment">// behavior.</span></div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;  <span class="keywordflow">if</span> (TopDownPathCount &lt; <a class="code" href="ELFYAML_8cpp.html#a941c34da9850676ce3380813c636cff2">Other</a>.TopDownPathCount) {</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    TopDownPathCount = OverflowOccurredValue;</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    clearTopDownPointers();</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;  }</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160; </div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;  <span class="comment">// For each entry in the other set, if our set has an entry with the same key,</span></div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;  <span class="comment">// merge the entries. Otherwise, copy the entry and merge it with an empty</span></div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;  <span class="comment">// entry.</span></div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> = <a class="code" href="ELFYAML_8cpp.html#a941c34da9850676ce3380813c636cff2">Other</a>.top_down_ptr_begin(), ME = <a class="code" href="ELFYAML_8cpp.html#a941c34da9850676ce3380813c636cff2">Other</a>.top_down_ptr_end();</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;       <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> != ME; ++<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) {</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    <span class="keyword">auto</span> Pair = PerPtrTopDown.<a class="code" href="classllvm_1_1BlotMapVector.html#a60751d42a7b0b4df2a9283aa6a99a058">insert</a>(*<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;    Pair.first-&gt;second.Merge(Pair.second ? <a class="code" href="structllvm_1_1objcarc_1_1TopDownPtrState.html">TopDownPtrState</a>() : <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;second,</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;                             <span class="comment">/*TopDown=*/</span><span class="keyword">true</span>);</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;  }</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160; </div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;  <span class="comment">// For each entry in our set, if the other set doesn&#39;t have an entry with the</span></div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;  <span class="comment">// same key, force it to merge with an empty entry.</span></div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> = top_down_ptr_begin(), ME = top_down_ptr_end(); <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> != ME; ++<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>)</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="ELFYAML_8cpp.html#a941c34da9850676ce3380813c636cff2">Other</a>.PerPtrTopDown.find(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;first) == <a class="code" href="ELFYAML_8cpp.html#a941c34da9850676ce3380813c636cff2">Other</a>.PerPtrTopDown.end())</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;      <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;second.Merge(<a class="code" href="structllvm_1_1objcarc_1_1TopDownPtrState.html">TopDownPtrState</a>(), <span class="comment">/*TopDown=*/</span><span class="keyword">true</span>);</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;}</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;<span class="comment">/// The bottom-up traversal uses this to merge information about successors to</span></div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;<span class="comment">/// form the initial state for a new block.</span></div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> BBState::MergeSucc(<span class="keyword">const</span> BBState &amp;Other) {</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;  <span class="keywordflow">if</span> (BottomUpPathCount == OverflowOccurredValue)</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160; </div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;  <span class="comment">// Other.BottomUpPathCount can be 0, in which case it is either dead or a</span></div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;  <span class="comment">// loop backedge. Loop backedges are special.</span></div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;  BottomUpPathCount += <a class="code" href="ELFYAML_8cpp.html#a941c34da9850676ce3380813c636cff2">Other</a>.BottomUpPathCount;</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160; </div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;  <span class="comment">// In order to be consistent, we clear the top down pointers when by adding</span></div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;  <span class="comment">// BottomUpPathCount becomes OverflowOccurredValue even though &quot;true&quot; overflow</span></div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;  <span class="comment">// has not occurred.</span></div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;  <span class="keywordflow">if</span> (BottomUpPathCount == OverflowOccurredValue) {</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    clearBottomUpPointers();</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;  }</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160; </div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;  <span class="comment">// Check for overflow. If we have overflow, fall back to conservative</span></div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;  <span class="comment">// behavior.</span></div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;  <span class="keywordflow">if</span> (BottomUpPathCount &lt; <a class="code" href="ELFYAML_8cpp.html#a941c34da9850676ce3380813c636cff2">Other</a>.BottomUpPathCount) {</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;    BottomUpPathCount = OverflowOccurredValue;</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;    clearBottomUpPointers();</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;  }</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160; </div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;  <span class="comment">// For each entry in the other set, if our set has an entry with the</span></div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;  <span class="comment">// same key, merge the entries. Otherwise, copy the entry and merge</span></div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;  <span class="comment">// it with an empty entry.</span></div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> = <a class="code" href="ELFYAML_8cpp.html#a941c34da9850676ce3380813c636cff2">Other</a>.bottom_up_ptr_begin(), ME = <a class="code" href="ELFYAML_8cpp.html#a941c34da9850676ce3380813c636cff2">Other</a>.bottom_up_ptr_end();</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;       <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> != ME; ++<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) {</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;    <span class="keyword">auto</span> Pair = PerPtrBottomUp.<a class="code" href="classllvm_1_1BlotMapVector.html#a60751d42a7b0b4df2a9283aa6a99a058">insert</a>(*<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;    Pair.first-&gt;second.Merge(Pair.second ? <a class="code" href="structllvm_1_1objcarc_1_1BottomUpPtrState.html">BottomUpPtrState</a>() : <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;second,</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;                             <span class="comment">/*TopDown=*/</span><span class="keyword">false</span>);</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;  }</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160; </div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;  <span class="comment">// For each entry in our set, if the other set doesn&#39;t have an entry</span></div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;  <span class="comment">// with the same key, force it to merge with an empty entry.</span></div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> = bottom_up_ptr_begin(), ME = bottom_up_ptr_end(); <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> != ME;</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;       ++<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>)</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="ELFYAML_8cpp.html#a941c34da9850676ce3380813c636cff2">Other</a>.PerPtrBottomUp.find(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;first) == <a class="code" href="ELFYAML_8cpp.html#a941c34da9850676ce3380813c636cff2">Other</a>.PerPtrBottomUp.end())</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;      <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;second.Merge(<a class="code" href="structllvm_1_1objcarc_1_1BottomUpPtrState.html">BottomUpPtrState</a>(), <span class="comment">/*TopDown=*/</span><span class="keyword">false</span>);</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;}</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160; </div>
<div class="line"><a name="l00434"></a><span class="lineno"><a class="line" href="group__ARCOpt.html#ga453c66f61a3fecc62b0658a43596f676">  434</a></span>&#160;<a class="code" href="classllvm_1_1raw__ostream.html">raw_ostream</a> &amp;<a class="code" href="namespacellvm.html#a5ee0a415cf089775fd277550b257f74e">llvm::operator&lt;&lt;</a>(<a class="code" href="classllvm_1_1raw__ostream.html">raw_ostream</a> &amp;<a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a>, BBState &amp;BBInfo) {</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;  <span class="comment">// Dump the pointers we are tracking.</span></div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;  <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; <span class="stringliteral">&quot;    TopDown State:\n&quot;</span>;</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;  <span class="keywordflow">if</span> (!BBInfo.hasTopDownPtrs()) {</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;        NONE!\n&quot;</span>);</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = BBInfo.top_down_ptr_begin(), <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = BBInfo.top_down_ptr_end();</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;         <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1objcarc_1_1PtrState.html">PtrState</a> &amp;<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a> = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;second;</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;      <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; <span class="stringliteral">&quot;        Ptr: &quot;</span> &lt;&lt; *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;first</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;         &lt;&lt; <span class="stringliteral">&quot;\n            KnownSafe:        &quot;</span> &lt;&lt; (<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>.IsKnownSafe()?<span class="stringliteral">&quot;true&quot;</span>:<span class="stringliteral">&quot;false&quot;</span>)</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;         &lt;&lt; <span class="stringliteral">&quot;\n            ImpreciseRelease: &quot;</span></div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;           &lt;&lt; (<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>.IsTrackingImpreciseReleases()?<span class="stringliteral">&quot;true&quot;</span>:<span class="stringliteral">&quot;false&quot;</span>) &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;         &lt;&lt; <span class="stringliteral">&quot;            HasCFGHazards:    &quot;</span></div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;           &lt;&lt; (<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>.IsCFGHazardAfflicted()?<span class="stringliteral">&quot;true&quot;</span>:<span class="stringliteral">&quot;false&quot;</span>) &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;         &lt;&lt; <span class="stringliteral">&quot;            KnownPositive:    &quot;</span></div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;           &lt;&lt; (<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>.HasKnownPositiveRefCount()?<span class="stringliteral">&quot;true&quot;</span>:<span class="stringliteral">&quot;false&quot;</span>) &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;         &lt;&lt; <span class="stringliteral">&quot;            Seq:              &quot;</span></div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;         &lt;&lt; <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>.GetSeq() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;    }</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;  }</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160; </div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;  <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; <span class="stringliteral">&quot;    BottomUp State:\n&quot;</span>;</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;  <span class="keywordflow">if</span> (!BBInfo.hasBottomUpPtrs()) {</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;        NONE!\n&quot;</span>);</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = BBInfo.bottom_up_ptr_begin(), <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = BBInfo.bottom_up_ptr_end();</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;         <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1objcarc_1_1PtrState.html">PtrState</a> &amp;<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a> = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;second;</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;      <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; <span class="stringliteral">&quot;        Ptr: &quot;</span> &lt;&lt; *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;first</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;         &lt;&lt; <span class="stringliteral">&quot;\n            KnownSafe:        &quot;</span> &lt;&lt; (<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>.IsKnownSafe()?<span class="stringliteral">&quot;true&quot;</span>:<span class="stringliteral">&quot;false&quot;</span>)</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;         &lt;&lt; <span class="stringliteral">&quot;\n            ImpreciseRelease: &quot;</span></div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;           &lt;&lt; (<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>.IsTrackingImpreciseReleases()?<span class="stringliteral">&quot;true&quot;</span>:<span class="stringliteral">&quot;false&quot;</span>) &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;         &lt;&lt; <span class="stringliteral">&quot;            HasCFGHazards:    &quot;</span></div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;           &lt;&lt; (<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>.IsCFGHazardAfflicted()?<span class="stringliteral">&quot;true&quot;</span>:<span class="stringliteral">&quot;false&quot;</span>) &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;         &lt;&lt; <span class="stringliteral">&quot;            KnownPositive:    &quot;</span></div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;           &lt;&lt; (<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>.HasKnownPositiveRefCount()?<span class="stringliteral">&quot;true&quot;</span>:<span class="stringliteral">&quot;false&quot;</span>) &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;         &lt;&lt; <span class="stringliteral">&quot;            Seq:              &quot;</span></div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;         &lt;&lt; <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>.GetSeq() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;    }</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;  }</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160; </div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a>;</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;}</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160; </div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;<span class="keyword">namespace </span>{</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;<span class="comment">  /// The main ARC optimization pass.</span></div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;<span class="comment"></span><span class="keyword">class </span>ObjCARCOpt {</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;  <span class="keywordtype">bool</span> Changed = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;  <span class="keywordtype">bool</span> CFGChanged = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;  <a class="code" href="classllvm_1_1objcarc_1_1ProvenanceAnalysis.html">ProvenanceAnalysis</a> PA;</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;<span class="comment">  /// A cache of references to runtime entry point constants.</span></div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1objcarc_1_1ARCRuntimeEntryPoints.html">ARCRuntimeEntryPoints</a> EP;</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;<span class="comment">  /// A cache of MDKinds that can be passed into other functions to propagate</span></div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;<span class="comment">  /// MDKind identifiers.</span></div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1objcarc_1_1ARCMDKindCache.html">ARCMDKindCache</a> MDKindCache;</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160; </div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;  <a class="code" href="classllvm_1_1objcarc_1_1BundledRetainClaimRVs.html">BundledRetainClaimRVs</a> *BundledInsts = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;<span class="comment">  /// A flag indicating whether the optimization that removes or moves</span></div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;<span class="comment">  /// retain/release pairs should be performed.</span></div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;<span class="comment"></span>  <span class="keywordtype">bool</span> DisableRetainReleasePairing = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;<span class="comment">  /// Flags which determine whether each of the interesting runtime functions</span></div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;<span class="comment">  /// is in fact used in the current function.</span></div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;<span class="comment"></span>  <span class="keywordtype">unsigned</span> UsedInThisFunction;</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160; </div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;  <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;BasicBlock *, ColorVector&gt;</a> BlockEHColors;</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160; </div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;  <span class="keywordtype">bool</span> OptimizeRetainRVCall(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *RetainRV);</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;  <span class="keywordtype">void</span> OptimizeAutoreleaseRVCall(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *AutoreleaseRV,</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;                                 <a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2">ARCInstKind</a> &amp;Class);</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;  <span class="keywordtype">void</span> OptimizeIndividualCalls(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;<span class="comment">  /// Optimize an individual call, optionally passing the</span></div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;<span class="comment">  /// GetArgRCIdentityRoot if it has already been computed.</span></div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> OptimizeIndividualCallImpl(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Inst,</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;                                  <a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2">ARCInstKind</a> Class, <span class="keyword">const</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>);</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;<span class="comment">  /// Try to optimize an AutoreleaseRV with a RetainRV or UnsafeClaimRV.  If the</span></div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;<span class="comment">  /// optimization occurs, returns true to indicate that the caller should</span></div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;<span class="comment">  /// assume the instructions are dead.</span></div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;<span class="comment"></span>  <span class="keywordtype">bool</span> OptimizeInlinedAutoreleaseRVCall(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Inst,</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;                                        <span class="keyword">const</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *&amp;<a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>, <a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2">ARCInstKind</a> Class,</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;                                        <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *AutoreleaseRV,</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;                                        <span class="keyword">const</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *&amp;AutoreleaseRVArg);</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160; </div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;  <span class="keywordtype">void</span> CheckForCFGHazards(<span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>,</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;                          <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;const BasicBlock *, BBState&gt;</a> &amp;BBStates,</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;                          BBState &amp;MyStates) <span class="keyword">const</span>;</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;  <span class="keywordtype">bool</span> VisitInstructionBottomUp(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Inst, <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>,</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;                                <a class="code" href="classllvm_1_1BlotMapVector.html">BlotMapVector&lt;Value *, RRInfo&gt;</a> &amp;Retains,</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;                                BBState &amp;MyStates);</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;  <span class="keywordtype">bool</span> VisitBottomUp(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>,</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;                     <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;const BasicBlock *, BBState&gt;</a> &amp;BBStates,</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;                     <a class="code" href="classllvm_1_1BlotMapVector.html">BlotMapVector&lt;Value *, RRInfo&gt;</a> &amp;Retains);</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;  <span class="keywordtype">bool</span> VisitInstructionTopDown(</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;      <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Inst, <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;Value *, RRInfo&gt;</a> &amp;Releases, BBState &amp;MyStates,</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1DenseMap.html">DenseMap</a>&lt;<span class="keyword">const</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *, <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;const Value *, 2&gt;</a>&gt;</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;          &amp;ReleaseInsertPtToRCIdentityRoots);</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;  <span class="keywordtype">bool</span> VisitTopDown(</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;      <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;const BasicBlock *, BBState&gt;</a> &amp;BBStates,</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;      <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;Value *, RRInfo&gt;</a> &amp;Releases,</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1DenseMap.html">DenseMap</a>&lt;<span class="keyword">const</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *, <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;const Value *, 2&gt;</a>&gt;</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;          &amp;ReleaseInsertPtToRCIdentityRoots);</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;  <span class="keywordtype">bool</span> Visit(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;const BasicBlock *, BBState&gt;</a> &amp;BBStates,</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;             <a class="code" href="classllvm_1_1BlotMapVector.html">BlotMapVector&lt;Value *, RRInfo&gt;</a> &amp;Retains,</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;             <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;Value *, RRInfo&gt;</a> &amp;Releases);</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160; </div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;  <span class="keywordtype">void</span> MoveCalls(<a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>, <a class="code" href="structllvm_1_1objcarc_1_1RRInfo.html">RRInfo</a> &amp;RetainsToMove, <a class="code" href="structllvm_1_1objcarc_1_1RRInfo.html">RRInfo</a> &amp;ReleasesToMove,</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;                 <a class="code" href="classllvm_1_1BlotMapVector.html">BlotMapVector&lt;Value *, RRInfo&gt;</a> &amp;Retains,</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;                 <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;Value *, RRInfo&gt;</a> &amp;Releases,</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;                 <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;Instruction *&gt;</a> &amp;DeadInsts, <a class="code" href="classllvm_1_1Module.html">Module</a> *M);</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160; </div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;  <span class="keywordtype">bool</span> PairUpRetainsAndReleases(<a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;const BasicBlock *, BBState&gt;</a> &amp;BBStates,</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;                                <a class="code" href="classllvm_1_1BlotMapVector.html">BlotMapVector&lt;Value *, RRInfo&gt;</a> &amp;Retains,</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;                                <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;Value *, RRInfo&gt;</a> &amp;Releases, <a class="code" href="classllvm_1_1Module.html">Module</a> *M,</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;                                <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Retain,</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;                                <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;Instruction *&gt;</a> &amp;DeadInsts,</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;                                <a class="code" href="structllvm_1_1objcarc_1_1RRInfo.html">RRInfo</a> &amp;RetainsToMove, <a class="code" href="structllvm_1_1objcarc_1_1RRInfo.html">RRInfo</a> &amp;ReleasesToMove,</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;                                <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>, <span class="keywordtype">bool</span> KnownSafe,</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;                                <span class="keywordtype">bool</span> &amp;AnyPairsCompletelyEliminated);</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160; </div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;  <span class="keywordtype">bool</span> PerformCodePlacement(<a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;const BasicBlock *, BBState&gt;</a> &amp;BBStates,</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;                            <a class="code" href="classllvm_1_1BlotMapVector.html">BlotMapVector&lt;Value *, RRInfo&gt;</a> &amp;Retains,</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;                            <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;Value *, RRInfo&gt;</a> &amp;Releases, <a class="code" href="classllvm_1_1Module.html">Module</a> *M);</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160; </div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;  <span class="keywordtype">void</span> OptimizeWeakCalls(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160; </div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;  <span class="keywordtype">bool</span> OptimizeSequences(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160; </div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;  <span class="keywordtype">void</span> OptimizeReturns(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160; </div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;  <span class="keyword">template</span> &lt;<span class="keyword">typename</span> PredicateT&gt;</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">void</span> cloneOpBundlesIf(<a class="code" href="classllvm_1_1CallBase.html">CallBase</a> *CI,</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;                               <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;OperandBundleDef&gt;</a> &amp;OpBundles,</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;                               <a class="code" href="classPredicateT.html">PredicateT</a> <a class="code" href="namespacellvm_1_1PPC.html#a14028f7fe73a11dabc6583510cc0a355">Predicate</a>) {</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0, <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = CI-&gt;<a class="code" href="classllvm_1_1CallBase.html#a35b3798829fba58f145ea59e4214e84a">getNumOperandBundles</a>(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;      <a class="code" href="structllvm_1_1OperandBundleUse.html">OperandBundleUse</a> <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a> = CI-&gt;<a class="code" href="classllvm_1_1CallBase.html#a1b38c4ecbbce4814b679f08b72b1d67f">getOperandBundleAt</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PPC.html#a14028f7fe73a11dabc6583510cc0a355">Predicate</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>))</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;        OpBundles.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a396fcfee6914c76974b73c3d203da6a5">emplace_back</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;    }</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;  }</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160; </div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;  <span class="keywordtype">void</span> addOpBundleForFunclet(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>,</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;                             <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;OperandBundleDef&gt;</a> &amp;OpBundles) {</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;    <span class="keywordflow">if</span> (!BlockEHColors.<a class="code" href="classllvm_1_1DenseMapBase.html#a49c487a9395a6c384be8544cfb2cfccf">empty</a>()) {</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1TinyPtrVector.html">ColorVector</a> &amp;CV = BlockEHColors.<a class="code" href="classllvm_1_1DenseMapBase.html#a0c047f127ed4380a6f383d70bec4eb94">find</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>)-&gt;second;</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(CV.<a class="code" href="classllvm_1_1TinyPtrVector.html#aac784c7664f3f6b8076756c6fb0eed74">size</a>() &gt; 0 &amp;&amp; <span class="stringliteral">&quot;Uncolored block&quot;</span>);</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *EHPadBB : CV)</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;        <span class="keywordflow">if</span> (<span class="keyword">auto</span> *EHPad = dyn_cast&lt;FuncletPadInst&gt;(EHPadBB-&gt;getFirstNonPHI())) {</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;          OpBundles.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a396fcfee6914c76974b73c3d203da6a5">emplace_back</a>(<span class="stringliteral">&quot;funclet&quot;</span>, EHPad);</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;          <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;        }</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;    }</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;  }</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160; </div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;  <span class="keywordtype">void</span> GatherStatistics(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, <span class="keywordtype">bool</span> AfterOptimization = <span class="keyword">false</span>);</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160; </div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;  <span class="keyword">public</span>:</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">init</a>(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="namespacellvm_1_1dxil_1_1PointerTypeAnalysis.html#ae574a4c1d84b9e67bc94489f356805b4">run</a>(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, <a class="code" href="classllvm_1_1AAResults.html">AAResults</a> &amp;AA);</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;    <span class="keywordtype">bool</span> hasCFGChanged()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> CFGChanged; }</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;};</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;} <span class="comment">// end anonymous namespace</span></div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;<span class="comment">/// Turn objc_retainAutoreleasedReturnValue into objc_retain if the operand is</span></div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;<span class="comment">/// not a return value.</span></div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span></div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;ObjCARCOpt::OptimizeRetainRVCall(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *RetainRV) {</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;  <span class="comment">// Check for the argument being from an immediately preceding call or invoke.</span></div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a> = <a class="code" href="namespacellvm_1_1objcarc.html#a89850f2a3bb39efa5d19a3e75bd14ea2">GetArgRCIdentityRoot</a>(RetainRV);</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Call = dyn_cast&lt;CallBase&gt;(<a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>)) {</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a463baf545246fea9718664d933ffe66f">Call</a>-&gt;getParent() == <a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2aa1226b5450384ce6ea5ed47c317303ee">RetainRV</a>-&gt;getParent()) {</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;      <a class="code" href="classllvm_1_1BasicBlock.html#a42a7d51fdde6913db72d098356c2c019">BasicBlock::const_iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>(Call);</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;      ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;      <span class="keywordflow">while</span> (<a class="code" href="namespacellvm_1_1objcarc.html#a77c263e77abfad00d916622aec23d468">IsNoopInstruction</a>(&amp;*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;        ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;      <span class="keywordflow">if</span> (&amp;*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> == RetainRV)</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1InvokeInst.html">InvokeInst</a> *II = dyn_cast&lt;InvokeInst&gt;(Call)) {</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;      <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *RetainRVParent = <a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2aa1226b5450384ce6ea5ed47c317303ee">RetainRV</a>-&gt;getParent();</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;      <span class="keywordflow">if</span> (II-&gt;getNormalDest() == RetainRVParent) {</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;        <a class="code" href="classllvm_1_1BasicBlock.html#a42a7d51fdde6913db72d098356c2c019">BasicBlock::const_iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = RetainRVParent-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>();</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;        <span class="keywordflow">while</span> (<a class="code" href="namespacellvm_1_1objcarc.html#a77c263e77abfad00d916622aec23d468">IsNoopInstruction</a>(&amp;*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;          ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;        <span class="keywordflow">if</span> (&amp;*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> == RetainRV)</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;      }</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;    }</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;  }</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160; </div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!BundledInsts-&gt;<a class="code" href="classllvm_1_1objcarc_1_1BundledRetainClaimRVs.html#a2a3a24ed0274c01b34ef418b446bbfd8">contains</a>(RetainRV) &amp;&amp;</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;         <span class="stringliteral">&quot;a bundled retainRV&#39;s argument should be a call&quot;</span>);</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160; </div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;  <span class="comment">// Turn it to a plain objc_retain.</span></div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;  Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;  ++NumPeeps;</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160; </div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Transforming objc_retainAutoreleasedReturnValue =&gt; &quot;</span></div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;                       <span class="stringliteral">&quot;objc_retain since the operand is not a return value.\n&quot;</span></div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;                       <span class="stringliteral">&quot;Old = &quot;</span></div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;                    &lt;&lt; *RetainRV &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160; </div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *NewDecl = EP.<a class="code" href="classllvm_1_1objcarc_1_1ARCRuntimeEntryPoints.html#a565749e827bad7cb5bd425ac7ffd9414">get</a>(<a class="code" href="namespacellvm_1_1objcarc.html#aa4b95e1b6c59a75f558794b32b644febaafece4245269582cb2f1009d4fb52047">ARCRuntimeEntryPointKind::Retain</a>);</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;  cast&lt;CallInst&gt;(RetainRV)-&gt;setCalledFunction(NewDecl);</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160; </div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;New = &quot;</span> &lt;&lt; *RetainRV &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160; </div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;}</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160; </div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;<span class="keywordtype">bool</span> ObjCARCOpt::OptimizeInlinedAutoreleaseRVCall(</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;    <a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Inst, <span class="keyword">const</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *&amp;<a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>, <a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2">ARCInstKind</a> Class,</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *AutoreleaseRV, <span class="keyword">const</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *&amp;AutoreleaseRVArg) {</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;  <span class="keywordflow">if</span> (BundledInsts-&gt;<a class="code" href="classllvm_1_1objcarc_1_1BundledRetainClaimRVs.html#a2a3a24ed0274c01b34ef418b446bbfd8">contains</a>(Inst))</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160; </div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;  <span class="comment">// Must be in the same basic block.</span></div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Inst-&gt;<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>() == <a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2ac1dbc9b59747323224171927c310917d">AutoreleaseRV</a>-&gt;getParent());</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160; </div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;  <span class="comment">// Must operate on the same root.</span></div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;  <a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a> = <a class="code" href="namespacellvm_1_1objcarc.html#a89850f2a3bb39efa5d19a3e75bd14ea2">GetArgRCIdentityRoot</a>(Inst);</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;  AutoreleaseRVArg = <a class="code" href="namespacellvm_1_1objcarc.html#a89850f2a3bb39efa5d19a3e75bd14ea2">GetArgRCIdentityRoot</a>(AutoreleaseRV);</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a> != AutoreleaseRVArg) {</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;    <span class="comment">// If there isn&#39;t an exact match, check if we have equivalent PHIs.</span></div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *PN = dyn_cast&lt;PHINode&gt;(<a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>);</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;    <span class="keywordflow">if</span> (!PN)</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160; </div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;const Value *, 4&gt;</a> ArgUsers;</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;    <a class="code" href="namespacellvm_1_1objcarc.html#a7110df32902106ee880a19371b45d763">getEquivalentPHIs</a>(*PN, ArgUsers);</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm.html#acd1cd968cb420c82d70926920fcdc7d7">llvm::is_contained</a>(ArgUsers, AutoreleaseRVArg))</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;  }</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160; </div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;  <span class="comment">// Okay, this is a match.  Merge them.</span></div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;  ++NumPeeps;</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Found inlined objc_autoreleaseReturnValue &#39;&quot;</span></div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;                    &lt;&lt; *AutoreleaseRV &lt;&lt; <span class="stringliteral">&quot;&#39; paired with &#39;&quot;</span> &lt;&lt; *Inst &lt;&lt; <span class="stringliteral">&quot;&#39;\n&quot;</span>);</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160; </div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;  <span class="comment">// Delete the RV pair, starting with the AutoreleaseRV.</span></div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;  <a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2ac1dbc9b59747323224171927c310917d">AutoreleaseRV</a>-&gt;replaceAllUsesWith(</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;      cast&lt;CallInst&gt;(AutoreleaseRV)-&gt;getArgOperand(0));</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;  Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;  <a class="code" href="namespacellvm_1_1objcarc.html#af4e05bf48a81b884e707efa650560fbf">EraseInstruction</a>(AutoreleaseRV);</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;  <span class="keywordflow">if</span> (Class == <a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2aa1226b5450384ce6ea5ed47c317303ee">ARCInstKind::RetainRV</a>) {</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;    <span class="comment">// AutoreleaseRV and RetainRV cancel out.  Delete the RetainRV.</span></div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;    Inst-&gt;<a class="code" href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">replaceAllUsesWith</a>(cast&lt;CallInst&gt;(Inst)-&gt;getArgOperand(0));</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;    <a class="code" href="namespacellvm_1_1objcarc.html#af4e05bf48a81b884e707efa650560fbf">EraseInstruction</a>(Inst);</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;  }</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160; </div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;  <span class="comment">// UnsafeClaimRV is a frontend peephole for RetainRV + Release.  Since the</span></div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;  <span class="comment">// AutoreleaseRV and RetainRV cancel out, replace UnsafeClaimRV with Release.</span></div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Class == <a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2ae490705e8a3fd75e76afa1108289c24a">ARCInstKind::UnsafeClaimRV</a>);</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1NVPTXISD.html#ab995b6d422b079c863075e073b2eb96ba21855f12c873f2db9747f91d62c65b40">CallArg</a> = cast&lt;CallInst&gt;(Inst)-&gt;getArgOperand(0);</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;  <a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *<a class="code" href="namespacellvm.html#a239c4ac35d6028bfacaed4018d0488faab8e7b465df7c5979dc731d06e84ce2cf">Release</a> = <a class="code" href="classllvm_1_1CallInst.html#a850d8262cd900958b3153c4aa080b2bb">CallInst::Create</a>(</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;      EP.<a class="code" href="classllvm_1_1objcarc_1_1ARCRuntimeEntryPoints.html#a565749e827bad7cb5bd425ac7ffd9414">get</a>(<a class="code" href="namespacellvm_1_1objcarc.html#aa4b95e1b6c59a75f558794b32b644febab8e7b465df7c5979dc731d06e84ce2cf">ARCRuntimeEntryPointKind::Release</a>), <a class="code" href="namespacellvm_1_1NVPTXISD.html#ab995b6d422b079c863075e073b2eb96ba21855f12c873f2db9747f91d62c65b40">CallArg</a>, <span class="stringliteral">&quot;&quot;</span>, Inst);</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="namespacellvm_1_1objcarc.html#a392f31f4801522bd6062e369302d83a1">IsAlwaysTail</a>(<a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2ae490705e8a3fd75e76afa1108289c24a">ARCInstKind::UnsafeClaimRV</a>) &amp;&amp;</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;         <span class="stringliteral">&quot;Expected UnsafeClaimRV to be safe to tail call&quot;</span>);</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;  <a class="code" href="namespacellvm.html#a239c4ac35d6028bfacaed4018d0488faab8e7b465df7c5979dc731d06e84ce2cf">Release</a>-&gt;setTailCall();</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;  Inst-&gt;<a class="code" href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">replaceAllUsesWith</a>(<a class="code" href="namespacellvm_1_1NVPTXISD.html#ab995b6d422b079c863075e073b2eb96ba21855f12c873f2db9747f91d62c65b40">CallArg</a>);</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;  <a class="code" href="namespacellvm_1_1objcarc.html#af4e05bf48a81b884e707efa650560fbf">EraseInstruction</a>(Inst);</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160; </div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;  <span class="comment">// Run the normal optimizations on Release.</span></div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;  OptimizeIndividualCallImpl(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, Release, <a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2ab8e7b465df7c5979dc731d06e84ce2cf">ARCInstKind::Release</a>, <a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>);</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;}</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;<span class="comment">/// Turn objc_autoreleaseReturnValue into objc_autorelease if the result is not</span></div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;<span class="comment">/// used as a return value.</span></div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> ObjCARCOpt::OptimizeAutoreleaseRVCall(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>,</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;                                           <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *AutoreleaseRV,</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;                                           <a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2">ARCInstKind</a> &amp;Class) {</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;  <span class="comment">// Check for a return of the pointer value.</span></div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a> = <a class="code" href="namespacellvm_1_1objcarc.html#a89850f2a3bb39efa5d19a3e75bd14ea2">GetArgRCIdentityRoot</a>(AutoreleaseRV);</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160; </div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;  <span class="comment">// If the argument is ConstantPointerNull or UndefValue, its other users</span></div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;  <span class="comment">// aren&#39;t actually interesting to look at.</span></div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;  <span class="keywordflow">if</span> (isa&lt;ConstantData&gt;(<a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>))</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160; </div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;const Value *, 2&gt;</a> <a class="code" href="IVUsers_8cpp.html#a4e5b9edb51eec9dbca592075eb64dfcb">Users</a>;</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;  <a class="code" href="IVUsers_8cpp.html#a4e5b9edb51eec9dbca592075eb64dfcb">Users</a>.push_back(<a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>);</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160; </div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;  <span class="comment">// Add PHIs that are equivalent to Ptr to Users.</span></div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *PN = dyn_cast&lt;PHINode&gt;(<a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>))</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;    <a class="code" href="namespacellvm_1_1objcarc.html#a7110df32902106ee880a19371b45d763">getEquivalentPHIs</a>(*PN, <a class="code" href="IVUsers_8cpp.html#a4e5b9edb51eec9dbca592075eb64dfcb">Users</a>);</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160; </div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;  <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;    <a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a> = <a class="code" href="IVUsers_8cpp.html#a4e5b9edb51eec9dbca592075eb64dfcb">Users</a>.pop_back_val();</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1User.html">User</a> *U : <a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>-&gt;users()) {</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;      <span class="keywordflow">if</span> (isa&lt;ReturnInst&gt;(U) || <a class="code" href="namespacellvm_1_1objcarc.html#a86cdbdf3773be3c67bc193b473b75708">GetBasicARCInstKind</a>(U) == <a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2aa1226b5450384ce6ea5ed47c317303ee">ARCInstKind::RetainRV</a>)</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;      <span class="keywordflow">if</span> (isa&lt;BitCastInst&gt;(U))</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;        <a class="code" href="IVUsers_8cpp.html#a4e5b9edb51eec9dbca592075eb64dfcb">Users</a>.push_back(U);</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;    }</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;  } <span class="keywordflow">while</span> (!<a class="code" href="IVUsers_8cpp.html#a4e5b9edb51eec9dbca592075eb64dfcb">Users</a>.empty());</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160; </div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;  Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;  ++NumPeeps;</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160; </div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;      <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Transforming objc_autoreleaseReturnValue =&gt; &quot;</span></div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;                <span class="stringliteral">&quot;objc_autorelease since its operand is not used as a return &quot;</span></div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;                <span class="stringliteral">&quot;value.\n&quot;</span></div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;                <span class="stringliteral">&quot;Old = &quot;</span></div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;             &lt;&lt; *AutoreleaseRV &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160; </div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;  <a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *AutoreleaseRVCI = cast&lt;CallInst&gt;(AutoreleaseRV);</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *NewDecl = EP.<a class="code" href="classllvm_1_1objcarc_1_1ARCRuntimeEntryPoints.html#a565749e827bad7cb5bd425ac7ffd9414">get</a>(<a class="code" href="namespacellvm_1_1objcarc.html#aa4b95e1b6c59a75f558794b32b644feba61710f61a521b1544f5f7ab5abac843d">ARCRuntimeEntryPointKind::Autorelease</a>);</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;  AutoreleaseRVCI-&gt;<a class="code" href="classllvm_1_1CallBase.html#aee56a5257c4899bf97c5957d87a732e3">setCalledFunction</a>(NewDecl);</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;  AutoreleaseRVCI-&gt;<a class="code" href="classllvm_1_1CallInst.html#acff66a4cb0efaafb728848edf097c75f">setTailCall</a>(<span class="keyword">false</span>); <span class="comment">// Never tail call objc_autorelease.</span></div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;  <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5ada3eb06ada644390db065d37b3fd87ac">Class</a> = <a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2a61710f61a521b1544f5f7ab5abac843d">ARCInstKind::Autorelease</a>;</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160; </div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;New: &quot;</span> &lt;&lt; *AutoreleaseRV &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;}</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;<span class="comment">/// Visit each call, one at a time, and make simplifications without doing any</span></div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;<span class="comment">/// additional analysis.</span></div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> ObjCARCOpt::OptimizeIndividualCalls(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>) {</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;\n== ObjCARCOpt::OptimizeIndividualCalls ==\n&quot;</span>);</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;  <span class="comment">// Reset all the flags in preparation for recomputing them.</span></div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;  UsedInThisFunction = 0;</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160; </div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;  <span class="comment">// Store any delayed AutoreleaseRV intrinsics, so they can be easily paired</span></div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;  <span class="comment">// with RetainRV and UnsafeClaimRV.</span></div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *DelayedAutoreleaseRV = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *DelayedAutoreleaseRVArg = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;  <span class="keyword">auto</span> setDelayedAutoreleaseRV = [&amp;](<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2ac1dbc9b59747323224171927c310917d">AutoreleaseRV</a>) {</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!DelayedAutoreleaseRV || !AutoreleaseRV);</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;    DelayedAutoreleaseRV = <a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2ac1dbc9b59747323224171927c310917d">AutoreleaseRV</a>;</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;    DelayedAutoreleaseRVArg = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;  };</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;  <span class="keyword">auto</span> optimizeDelayedAutoreleaseRV = [&amp;]() {</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;    <span class="keywordflow">if</span> (!DelayedAutoreleaseRV)</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;    OptimizeIndividualCallImpl(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, DelayedAutoreleaseRV,</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;                               <a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2ac1dbc9b59747323224171927c310917d">ARCInstKind::AutoreleaseRV</a>,</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;                               DelayedAutoreleaseRVArg);</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;    setDelayedAutoreleaseRV(<span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;  };</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;  <span class="keyword">auto</span> shouldDelayAutoreleaseRV = [&amp;](<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *NonARCInst) {</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;    <span class="comment">// Nothing to delay, but we may as well skip the logic below.</span></div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;    <span class="keywordflow">if</span> (!DelayedAutoreleaseRV)</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160; </div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;    <span class="comment">// If we hit the end of the basic block we&#39;re not going to find an RV-pair.</span></div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;    <span class="comment">// Stop delaying.</span></div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;    <span class="keywordflow">if</span> (NonARCInst-&gt;isTerminator())</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160; </div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;    <span class="comment">// Given the frontend rules for emitting AutoreleaseRV, RetainRV, and</span></div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;    <span class="comment">// UnsafeClaimRV, it&#39;s probably safe to skip over even opaque function calls</span></div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;    <span class="comment">// here since OptimizeInlinedAutoreleaseRVCall will confirm that they</span></div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;    <span class="comment">// have the same RCIdentityRoot.  However, what really matters is</span></div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;    <span class="comment">// skipping instructions or intrinsics that the inliner could leave behind;</span></div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;    <span class="comment">// be conservative for now and don&#39;t skip over opaque calls, which could</span></div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;    <span class="comment">// potentially include other ARC calls.</span></div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;    <span class="keyword">auto</span> *CB = dyn_cast&lt;CallBase&gt;(NonARCInst);</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;    <span class="keywordflow">if</span> (!CB)</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;    <span class="keywordflow">return</span> CB-&gt;getIntrinsicID() != <a class="code" href="namespacellvm_1_1Intrinsic.html#a35fedf4db6d756bd82501607f93c1e79aab5fb650050f184fa7c19c26abde5226">Intrinsic::not_intrinsic</a>;</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;  };</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160; </div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;  <span class="comment">// Visit all objc_* calls in F.</span></div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1InstIterator.html">inst_iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = <a class="code" href="namespacellvm.html#a49a219f3fe3d7a6cc07c49a1ea766d6d">inst_begin</a>(&amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>), <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = <a class="code" href="namespacellvm.html#a945cded5463e0ccd3cf5a6ac80542a94">inst_end</a>(&amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>; ) {</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Inst = &amp;*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>++;</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160; </div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> *CI = dyn_cast&lt;CallInst&gt;(Inst))</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1objcarc.html#aefba9af2f61452f20f4c947b4c2e5f4e">objcarc::hasAttachedCallOpBundle</a>(CI)) {</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;        BundledInsts-&gt;<a class="code" href="classllvm_1_1objcarc_1_1BundledRetainClaimRVs.html#a15ce779c3eeee5e7f15aa8e0a1b19065">insertRVCall</a>(&amp;*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, CI);</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;        Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;      }</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160; </div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;    <a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2">ARCInstKind</a> <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5ada3eb06ada644390db065d37b3fd87ac">Class</a> = <a class="code" href="namespacellvm_1_1objcarc.html#a86cdbdf3773be3c67bc193b473b75708">GetBasicARCInstKind</a>(Inst);</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160; </div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;    <span class="comment">// Skip this loop if this instruction isn&#39;t itself an ARC intrinsic.</span></div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;    <span class="keywordflow">switch</span> (Class) {</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;      optimizeDelayedAutoreleaseRV();</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2a216b693ce70a5639bd2e33cdbb0d82d8">ARCInstKind::CallOrUser</a>:</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2a8f9bfe9d1345237cb3b2b205864da075">ARCInstKind::User</a>:</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2a6adf97f83acf6453d4a6a4b1070f3754">ARCInstKind::None</a>:</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;      <span class="comment">// This is a non-ARC instruction.  If we&#39;re delaying an AutoreleaseRV,</span></div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;      <span class="comment">// check if it&#39;s safe to skip over it; if not, optimize the AutoreleaseRV</span></div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;      <span class="comment">// now.</span></div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;      <span class="keywordflow">if</span> (!shouldDelayAutoreleaseRV(Inst))</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;        optimizeDelayedAutoreleaseRV();</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2ac1dbc9b59747323224171927c310917d">ARCInstKind::AutoreleaseRV</a>:</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;      optimizeDelayedAutoreleaseRV();</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;      setDelayedAutoreleaseRV(Inst);</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2aa1226b5450384ce6ea5ed47c317303ee">ARCInstKind::RetainRV</a>:</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2ae490705e8a3fd75e76afa1108289c24a">ARCInstKind::UnsafeClaimRV</a>:</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;      <span class="keywordflow">if</span> (DelayedAutoreleaseRV) {</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;        <span class="comment">// We have a potential RV pair.  Check if they cancel out.</span></div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;        <span class="keywordflow">if</span> (OptimizeInlinedAutoreleaseRVCall(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, Inst, <a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>, Class,</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;                                             DelayedAutoreleaseRV,</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;                                             DelayedAutoreleaseRVArg)) {</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;          setDelayedAutoreleaseRV(<span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;        }</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;        optimizeDelayedAutoreleaseRV();</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;      }</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;    }</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160; </div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;    OptimizeIndividualCallImpl(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, Inst, Class, <a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>);</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;  }</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160; </div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;  <span class="comment">// Catch the final delayed AutoreleaseRV.</span></div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;  optimizeDelayedAutoreleaseRV();</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;}</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;<span class="comment">/// This function returns true if the value is inert. An ObjC ARC runtime call</span></div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;<span class="comment">/// taking an inert operand can be safely deleted.</span></div>
<div class="line"><a name="l00860"></a><span class="lineno"><a class="line" href="group__ARCOpt.html#ga88b57387a1e0d73c6481fb274f076bb2">  860</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="group__ARCOpt.html#ga88b57387a1e0d73c6481fb274f076bb2">isInertARCValue</a>(<a class="code" href="classllvm_1_1Value.html">Value</a> *V, <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;Value *, 1&gt;</a> &amp;VisitedPhis) {</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;  V = V-&gt;<a class="code" href="classllvm_1_1Value.html#a966eb231e7d4e572874d2cb49b18faea">stripPointerCasts</a>();</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160; </div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1objcarc.html#a4097309046dda09214babc993d35c679">IsNullOrUndef</a>(V))</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160; </div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;  <span class="comment">// See if this is a global attribute annotated with an &#39;objc_arc_inert&#39;.</span></div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *GV = dyn_cast&lt;GlobalVariable&gt;(V))</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;    <span class="keywordflow">if</span> (GV-&gt;hasAttribute(<span class="stringliteral">&quot;objc_arc_inert&quot;</span>))</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160; </div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> PN = dyn_cast&lt;PHINode&gt;(V)) {</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;    <span class="comment">// Ignore this phi if it has already been discovered.</span></div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;    <span class="keywordflow">if</span> (!VisitedPhis.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(PN).second)</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;    <span class="comment">// Look through phis&#39;s operands.</span></div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *Opnd : PN-&gt;<a class="code" href="classllvm_1_1PHINode.html#a1f0ff79b64a40d383b891f1baba89c6b">incoming_values</a>())</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="group__ARCOpt.html#ga88b57387a1e0d73c6481fb274f076bb2">isInertARCValue</a>(Opnd, VisitedPhis))</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;  }</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160; </div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;}</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160; </div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;<span class="keywordtype">void</span> ObjCARCOpt::OptimizeIndividualCallImpl(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Inst,</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;                                            <a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2">ARCInstKind</a> Class,</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;                                            <span class="keyword">const</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>) {</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Visiting: Class: &quot;</span> &lt;&lt; Class &lt;&lt; <span class="stringliteral">&quot;; &quot;</span> &lt;&lt; *Inst &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160; </div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;  <span class="comment">// We can delete this call if it takes an inert value.</span></div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;Value *, 1&gt;</a> VisitedPhis;</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160; </div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;  <span class="keywordflow">if</span> (BundledInsts-&gt;<a class="code" href="classllvm_1_1objcarc_1_1BundledRetainClaimRVs.html#a2a3a24ed0274c01b34ef418b446bbfd8">contains</a>(Inst)) {</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;    UsedInThisFunction |= 1 &lt;&lt; <a class="code" href="ADT_2tmp_8txt.html#aa10ee7493bddf2c751ca6e05451ef410">unsigned</a>(Class);</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;  }</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160; </div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1objcarc.html#ad3269e7374cddd8fb6760350aeb10f24">IsNoopOnGlobal</a>(Class))</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="group__ARCOpt.html#ga88b57387a1e0d73c6481fb274f076bb2">isInertARCValue</a>(Inst-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0), VisitedPhis)) {</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;      <span class="keywordflow">if</span> (!Inst-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#ae8eaa0b4eeac52a2b2282cb1bfd981ae">isVoidTy</a>())</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;        Inst-&gt;<a class="code" href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">replaceAllUsesWith</a>(Inst-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0));</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;      Inst-&gt;<a class="code" href="classllvm_1_1Instruction.html#ae6b978645b8ac72d1a35e1298ffdd4f0">eraseFromParent</a>();</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;      Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;    }</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160; </div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;  <span class="keywordflow">switch</span> (Class) {</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;  <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160; </div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;  <span class="comment">// Delete no-op casts. These function calls have special semantics, but</span></div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;  <span class="comment">// the semantics are entirely implemented via lowering in the front-end,</span></div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;  <span class="comment">// so by the time they reach the optimizer, they are just no-op calls</span></div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;  <span class="comment">// which return their argument.</span></div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;  <span class="comment">// There are gray areas here, as the ability to cast reference-counted</span></div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;  <span class="comment">// pointers to raw void* and back allows code to break ARC assumptions,</span></div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;  <span class="comment">// however these are currently considered to be unimportant.</span></div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2ad20eb2456d446869820a1e7e385fe99f">ARCInstKind::NoopCast</a>:</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;    Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;    ++NumNoops;</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Erasing no-op cast: &quot;</span> &lt;&lt; *Inst &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;    <a class="code" href="namespacellvm_1_1objcarc.html#af4e05bf48a81b884e707efa650560fbf">EraseInstruction</a>(Inst);</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160; </div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;  <span class="comment">// If the pointer-to-weak-pointer is null, it&#39;s undefined behavior.</span></div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2a4b72e11620e2360a97726a1554da02d2">ARCInstKind::StoreWeak</a>:</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2a63bc8a0dc53d47fec308f2a7a9b99562">ARCInstKind::LoadWeak</a>:</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2a373746ca100ea4fff46f2b4046984e94">ARCInstKind::LoadWeakRetained</a>:</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2a60d8a1ea9604d54c2d3ea2c9cc065980">ARCInstKind::InitWeak</a>:</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2a03973369165e1763744e9f56672dddad">ARCInstKind::DestroyWeak</a>: {</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;    <a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *CI = cast&lt;CallInst&gt;(Inst);</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1objcarc.html#a4097309046dda09214babc993d35c679">IsNullOrUndef</a>(CI-&gt;<a class="code" href="classllvm_1_1CallBase.html#ab2caa29167597390ab2fc3cf30d70389">getArgOperand</a>(0))) {</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;      Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;      <span class="keyword">new</span> <a class="code" href="classllvm_1_1StoreInst.html">StoreInst</a>(<a class="code" href="classllvm_1_1ConstantInt.html#a82dbbd8e3688b0bc1eedb338864d0d0c">ConstantInt::getTrue</a>(CI-&gt;<a class="code" href="classllvm_1_1Value.html#ab3fc0225d8aaf8434026c3573f961f2c">getContext</a>()),</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;                    <a class="code" href="classllvm_1_1UndefValue.html#a4ae5ff22b700a42bcc5d889233721335">UndefValue::get</a>(<a class="code" href="classllvm_1_1Type.html#a2ee2de2efa05f2abb95007892fc559a4">Type::getInt1PtrTy</a>(CI-&gt;<a class="code" href="classllvm_1_1Value.html#ab3fc0225d8aaf8434026c3573f961f2c">getContext</a>())), CI);</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *NewValue = <a class="code" href="classllvm_1_1UndefValue.html#a4ae5ff22b700a42bcc5d889233721335">UndefValue::get</a>(CI-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>());</div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;          <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;A null pointer-to-weak-pointer is undefined behavior.&quot;</span></div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;                    <span class="stringliteral">&quot;\nOld = &quot;</span></div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;                 &lt;&lt; *CI &lt;&lt; <span class="stringliteral">&quot;\nNew = &quot;</span> &lt;&lt; *NewValue &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;      CI-&gt;<a class="code" href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">replaceAllUsesWith</a>(NewValue);</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;      CI-&gt;<a class="code" href="classllvm_1_1Instruction.html#ae6b978645b8ac72d1a35e1298ffdd4f0">eraseFromParent</a>();</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;    }</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;  }</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2acd9d38bb7cd5940d441b3325fd7bb607">ARCInstKind::CopyWeak</a>:</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2a6e6325433672a751336dfd07c9a2cf54">ARCInstKind::MoveWeak</a>: {</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;    <a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *CI = cast&lt;CallInst&gt;(Inst);</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1objcarc.html#a4097309046dda09214babc993d35c679">IsNullOrUndef</a>(CI-&gt;<a class="code" href="classllvm_1_1CallBase.html#ab2caa29167597390ab2fc3cf30d70389">getArgOperand</a>(0)) ||</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;        <a class="code" href="namespacellvm_1_1objcarc.html#a4097309046dda09214babc993d35c679">IsNullOrUndef</a>(CI-&gt;<a class="code" href="classllvm_1_1CallBase.html#ab2caa29167597390ab2fc3cf30d70389">getArgOperand</a>(1))) {</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;      Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;      <span class="keyword">new</span> <a class="code" href="classllvm_1_1StoreInst.html">StoreInst</a>(<a class="code" href="classllvm_1_1ConstantInt.html#a82dbbd8e3688b0bc1eedb338864d0d0c">ConstantInt::getTrue</a>(CI-&gt;<a class="code" href="classllvm_1_1Value.html#ab3fc0225d8aaf8434026c3573f961f2c">getContext</a>()),</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;                    <a class="code" href="classllvm_1_1UndefValue.html#a4ae5ff22b700a42bcc5d889233721335">UndefValue::get</a>(<a class="code" href="classllvm_1_1Type.html#a2ee2de2efa05f2abb95007892fc559a4">Type::getInt1PtrTy</a>(CI-&gt;<a class="code" href="classllvm_1_1Value.html#ab3fc0225d8aaf8434026c3573f961f2c">getContext</a>())), CI);</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160; </div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *NewValue = <a class="code" href="classllvm_1_1UndefValue.html#a4ae5ff22b700a42bcc5d889233721335">UndefValue::get</a>(CI-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>());</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;          <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;A null pointer-to-weak-pointer is undefined behavior.&quot;</span></div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;                    <span class="stringliteral">&quot;\nOld = &quot;</span></div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;                 &lt;&lt; *CI &lt;&lt; <span class="stringliteral">&quot;\nNew = &quot;</span> &lt;&lt; *NewValue &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160; </div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;      CI-&gt;<a class="code" href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">replaceAllUsesWith</a>(NewValue);</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;      CI-&gt;<a class="code" href="classllvm_1_1Instruction.html#ae6b978645b8ac72d1a35e1298ffdd4f0">eraseFromParent</a>();</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;    }</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;  }</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2aa1226b5450384ce6ea5ed47c317303ee">ARCInstKind::RetainRV</a>:</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;    <span class="keywordflow">if</span> (OptimizeRetainRVCall(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, Inst))</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2ac1dbc9b59747323224171927c310917d">ARCInstKind::AutoreleaseRV</a>:</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;    OptimizeAutoreleaseRVCall(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, Inst, Class);</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;  }</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160; </div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;  <span class="comment">// objc_autorelease(x) -&gt; objc_release(x) if x is otherwise unused.</span></div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1objcarc.html#a40e51f6d288f308e305b565c047ff3a7">IsAutorelease</a>(Class) &amp;&amp; Inst-&gt;<a class="code" href="classllvm_1_1Value.html#a9d7de807ebdfe1819df3ff6cb0f16158">use_empty</a>()) {</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;    <a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *<a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a463baf545246fea9718664d933ffe66f">Call</a> = cast&lt;CallInst&gt;(Inst);</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a> = <a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a463baf545246fea9718664d933ffe66f">Call</a>-&gt;getArgOperand(0);</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;    <a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a> = <a class="code" href="group__ARCUtilities.html#ga3e31fa79553c53df380d4054de2ca1c9">FindSingleUseIdentifiedObject</a>(<a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>);</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>) {</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;      Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;      ++NumAutoreleases;</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160; </div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;      <span class="comment">// Create the declaration lazily.</span></div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;      <a class="code" href="classllvm_1_1LLVMContext.html">LLVMContext</a> &amp;<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = Inst-&gt;<a class="code" href="classllvm_1_1Value.html#ab3fc0225d8aaf8434026c3573f961f2c">getContext</a>();</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160; </div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;      <a class="code" href="classllvm_1_1Function.html">Function</a> *Decl = EP.<a class="code" href="classllvm_1_1objcarc_1_1ARCRuntimeEntryPoints.html#a565749e827bad7cb5bd425ac7ffd9414">get</a>(<a class="code" href="namespacellvm_1_1objcarc.html#aa4b95e1b6c59a75f558794b32b644febab8e7b465df7c5979dc731d06e84ce2cf">ARCRuntimeEntryPointKind::Release</a>);</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;      <a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *NewCall =</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;          <a class="code" href="classllvm_1_1CallInst.html#a850d8262cd900958b3153c4aa080b2bb">CallInst::Create</a>(Decl, <a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a463baf545246fea9718664d933ffe66f">Call</a>-&gt;getArgOperand(0), <span class="stringliteral">&quot;&quot;</span>, Call);</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;      NewCall-&gt;<a class="code" href="classllvm_1_1Instruction.html#a9247a212ea89acc9573fa7e7f557eaba">setMetadata</a>(MDKindCache.<a class="code" href="classllvm_1_1objcarc_1_1ARCMDKindCache.html#a062cf10f8ea9fc45291d700b2e8da648">get</a>(<a class="code" href="namespacellvm_1_1objcarc.html#a749ec59e4812b00a3cf7e7036fb39c06ab1ec2e3fd61b7a763d9173e07016906c">ARCMDKindID::ImpreciseRelease</a>),</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;                           <a class="code" href="classllvm_1_1MDNode.html#a7d10a7b9b7f40b04d27ed97c38ea1950">MDNode::get</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, std::nullopt));</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160; </div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Replacing autorelease{,RV}(x) with objc_release(x) &quot;</span></div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;                           <span class="stringliteral">&quot;since x is otherwise unused.\nOld: &quot;</span></div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;                        &lt;&lt; *Call &lt;&lt; <span class="stringliteral">&quot;\nNew: &quot;</span> &lt;&lt; *NewCall &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160; </div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;      <a class="code" href="namespacellvm_1_1objcarc.html#af4e05bf48a81b884e707efa650560fbf">EraseInstruction</a>(Call);</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;      Inst = NewCall;</div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;      <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5ada3eb06ada644390db065d37b3fd87ac">Class</a> = <a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2ab8e7b465df7c5979dc731d06e84ce2cf">ARCInstKind::Release</a>;</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;    }</div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;  }</div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160; </div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;  <span class="comment">// For functions which can never be passed stack arguments, add</span></div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;  <span class="comment">// a tail keyword.</span></div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1objcarc.html#a392f31f4801522bd6062e369302d83a1">IsAlwaysTail</a>(Class) &amp;&amp; !cast&lt;CallInst&gt;(Inst)-&gt;isNoTailCall()) {</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;    Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;        <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Adding tail keyword to function since it can never be &quot;</span></div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;                  <span class="stringliteral">&quot;passed stack args: &quot;</span></div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;               &lt;&lt; *Inst &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;    cast&lt;CallInst&gt;(Inst)-&gt;setTailCall();</div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;  }</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160; </div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;  <span class="comment">// Ensure that functions that can never have a &quot;tail&quot; keyword due to the</span></div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;  <span class="comment">// semantics of ARC truly do not do so.</span></div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1objcarc.html#a38d5511a0458d8611ae8194db9f31e34">IsNeverTail</a>(Class)) {</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;    Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Removing tail keyword from function: &quot;</span> &lt;&lt; *Inst</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;                      &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;    cast&lt;CallInst&gt;(Inst)-&gt;setTailCall(<span class="keyword">false</span>);</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;  }</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160; </div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;  <span class="comment">// Set nounwind as needed.</span></div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1objcarc.html#aab5dadb7739df912c9522e75271c6984">IsNoThrow</a>(Class)) {</div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;    Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Found no throw class. Setting nounwind on: &quot;</span> &lt;&lt; *Inst</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;                      &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;    cast&lt;CallInst&gt;(Inst)-&gt;setDoesNotThrow();</div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;  }</div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160; </div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;  <span class="comment">// Note: This catches instructions unrelated to ARC.</span></div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1objcarc.html#adbe453c6ce7ea8e13eb18939197edeaf">IsNoopOnNull</a>(Class)) {</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;    UsedInThisFunction |= 1 &lt;&lt; <a class="code" href="ADT_2tmp_8txt.html#aa10ee7493bddf2c751ca6e05451ef410">unsigned</a>(Class);</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;  }</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160; </div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;  <span class="comment">// If we haven&#39;t already looked up the root, look it up now.</span></div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>)</div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;    <a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a> = <a class="code" href="namespacellvm_1_1objcarc.html#a89850f2a3bb39efa5d19a3e75bd14ea2">GetArgRCIdentityRoot</a>(Inst);</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160; </div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;  <span class="comment">// ARC calls with null are no-ops. Delete them.</span></div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1objcarc.html#a4097309046dda09214babc993d35c679">IsNullOrUndef</a>(<a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>)) {</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;    Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;    ++NumNoops;</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;ARC calls with  null are no-ops. Erasing: &quot;</span> &lt;&lt; *Inst</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;                      &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;    <a class="code" href="namespacellvm_1_1objcarc.html#af4e05bf48a81b884e707efa650560fbf">EraseInstruction</a>(Inst);</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;  }</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160; </div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;  <span class="comment">// Keep track of which of retain, release, autorelease, and retain_block</span></div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;  <span class="comment">// are actually present in this function.</span></div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;  UsedInThisFunction |= 1 &lt;&lt; <a class="code" href="ADT_2tmp_8txt.html#aa10ee7493bddf2c751ca6e05451ef410">unsigned</a>(Class);</div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160; </div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;  <span class="comment">// If Arg is a PHI, and one or more incoming values to the</span></div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;  <span class="comment">// PHI are null, and the call is control-equivalent to the PHI, and there</span></div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;  <span class="comment">// are no relevant side effects between the PHI and the call, and the call</span></div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;  <span class="comment">// is not a release that doesn&#39;t have the clang.imprecise_release tag, the</span></div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;  <span class="comment">// call could be pushed up to just those paths with non-null incoming</span></div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;  <span class="comment">// values. For now, don&#39;t bother splitting critical edges for this.</span></div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;  <span class="keywordflow">if</span> (Class == <a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2ab8e7b465df7c5979dc731d06e84ce2cf">ARCInstKind::Release</a> &amp;&amp;</div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;      !Inst-&gt;<a class="code" href="classllvm_1_1Instruction.html#ae22f493ba8327ce92e87d3b96bce7017">getMetadata</a>(MDKindCache.<a class="code" href="classllvm_1_1objcarc_1_1ARCMDKindCache.html#a062cf10f8ea9fc45291d700b2e8da648">get</a>(<a class="code" href="namespacellvm_1_1objcarc.html#a749ec59e4812b00a3cf7e7036fb39c06ab1ec2e3fd61b7a763d9173e07016906c">ARCMDKindID::ImpreciseRelease</a>)))</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160; </div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;std::pair&lt;Instruction *, const Value *&gt;</a>, 4&gt; Worklist;</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;  Worklist.push_back(std::make_pair(Inst, <a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>));</div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;  <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;    std::pair&lt;Instruction *, const Value *&gt; Pair = Worklist.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a0c8ffe664a36e30d49c84d0aded2fe08">pop_back_val</a>();</div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;    Inst = Pair.first;</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;    <a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a> = Pair.second;</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160; </div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *PN = dyn_cast&lt;PHINode&gt;(<a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>);</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;    <span class="keywordflow">if</span> (!PN)</div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160; </div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;    <span class="comment">// Determine if the PHI has any null operands, or any incoming</span></div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;    <span class="comment">// critical edges.</span></div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;    <span class="keywordtype">bool</span> HasNull = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;    <span class="keywordtype">bool</span> HasCriticalEdges = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a> = PN-&gt;<a class="code" href="classllvm_1_1PHINode.html#aef51af4b490af6b3bf2dfbc8737a8f9f">getNumIncomingValues</a>(); <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a>; ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *Incoming = <a class="code" href="namespacellvm_1_1objcarc.html#aa72ef5ef299b7531b84aafcf9c1f755f">GetRCIdentityRoot</a>(PN-&gt;<a class="code" href="classllvm_1_1PHINode.html#a16c39eb6e60b42a40c399d8d65347bb6">getIncomingValue</a>(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>));</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1objcarc.html#a4097309046dda09214babc993d35c679">IsNullOrUndef</a>(Incoming))</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;        HasNull = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (PN-&gt;<a class="code" href="classllvm_1_1PHINode.html#a8ce0c4746a1ec805e66409d20ae93922">getIncomingBlock</a>(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>()-&gt;<a class="code" href="classllvm_1_1Instruction.html#a3287172f2d13af086e6d66364e8c6de3">getNumSuccessors</a>() !=</div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;               1) {</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;        HasCriticalEdges = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;      }</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;    }</div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;    <span class="comment">// If we have null operands and no critical edges, optimize.</span></div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;    <span class="keywordflow">if</span> (HasCriticalEdges)</div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;    <span class="keywordflow">if</span> (!HasNull)</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160; </div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *DepInst = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160; </div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;    <span class="comment">// Check that there is nothing that cares about the reference</span></div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;    <span class="comment">// count between the call and the phi.</span></div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;    <span class="keywordflow">switch</span> (Class) {</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2aafece4245269582cb2f1009d4fb52047">ARCInstKind::Retain</a>:</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2aa5c9c22c7dedc1f8dd1d75b7c04460a9">ARCInstKind::RetainBlock</a>:</div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;      <span class="comment">// These can always be moved up.</span></div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2ab8e7b465df7c5979dc731d06e84ce2cf">ARCInstKind::Release</a>:</div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;      <span class="comment">// These can&#39;t be moved across things that care about the retain</span></div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;      <span class="comment">// count.</span></div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;      DepInst = <a class="code" href="namespacellvm_1_1objcarc.html#a7a6c1dfa9b656660119d858a64521570">findSingleDependency</a>(<a class="code" href="namespacellvm_1_1objcarc.html#a353f4c1f85416c596ecaa9c4d5afca75ae9cb4656651e6d8f4748dac4bbe1b361">NeedsPositiveRetainCount</a>, <a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>,</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;                                     Inst-&gt;<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>(), Inst, PA);</div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2a61710f61a521b1544f5f7ab5abac843d">ARCInstKind::Autorelease</a>:</div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;      <span class="comment">// These can&#39;t be moved across autorelease pool scope boundaries.</span></div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;      DepInst = <a class="code" href="namespacellvm_1_1objcarc.html#a7a6c1dfa9b656660119d858a64521570">findSingleDependency</a>(<a class="code" href="namespacellvm_1_1objcarc.html#a353f4c1f85416c596ecaa9c4d5afca75ac6640fbd8b830536b76f884208bb53aa">AutoreleasePoolBoundary</a>, <a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>,</div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;                                     Inst-&gt;<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>(), Inst, PA);</div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2ae490705e8a3fd75e76afa1108289c24a">ARCInstKind::UnsafeClaimRV</a>:</div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2aa1226b5450384ce6ea5ed47c317303ee">ARCInstKind::RetainRV</a>:</div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2ac1dbc9b59747323224171927c310917d">ARCInstKind::AutoreleaseRV</a>:</div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;      <span class="comment">// Don&#39;t move these; the RV optimization depends on the autoreleaseRV</span></div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;      <span class="comment">// being tail called, and the retainRV being immediately after a call</span></div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;      <span class="comment">// (which might still happen if we get lucky with codegen layout, but</span></div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;      <span class="comment">// it&#39;s not worth taking the chance).</span></div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;      <a class="code" href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Invalid dependence flavor&quot;</span>);</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;    }</div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160; </div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;    <span class="keywordflow">if</span> (DepInst != PN)</div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160; </div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;    Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;    ++NumPartialNoops;</div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;    <span class="comment">// Clone the call into each predecessor that has a non-null value.</span></div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;    <a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *CInst = cast&lt;CallInst&gt;(Inst);</div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *ParamTy = CInst-&gt;<a class="code" href="classllvm_1_1CallBase.html#ab2caa29167597390ab2fc3cf30d70389">getArgOperand</a>(0)-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>();</div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a> = PN-&gt;<a class="code" href="classllvm_1_1PHINode.html#aef51af4b490af6b3bf2dfbc8737a8f9f">getNumIncomingValues</a>(); <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a>; ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *Incoming = <a class="code" href="namespacellvm_1_1objcarc.html#aa72ef5ef299b7531b84aafcf9c1f755f">GetRCIdentityRoot</a>(PN-&gt;<a class="code" href="classllvm_1_1PHINode.html#a16c39eb6e60b42a40c399d8d65347bb6">getIncomingValue</a>(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>));</div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1objcarc.html#a4097309046dda09214babc993d35c679">IsNullOrUndef</a>(Incoming))</div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a> = PN-&gt;<a class="code" href="classllvm_1_1PHINode.html#a16c39eb6e60b42a40c399d8d65347bb6">getIncomingValue</a>(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;      <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *InsertPos = &amp;PN-&gt;<a class="code" href="classllvm_1_1PHINode.html#a8ce0c4746a1ec805e66409d20ae93922">getIncomingBlock</a>(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8f6f9b4a94dc0907499c03a9e1b6918b">back</a>();</div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;      <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;OperandBundleDef, 1&gt;</a> OpBundles;</div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;      cloneOpBundlesIf(CInst, OpBundles, [](<span class="keyword">const</span> <a class="code" href="structllvm_1_1OperandBundleUse.html">OperandBundleUse</a> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>) {</div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.getTagID() != <a class="code" href="classllvm_1_1LLVMContext.html#a800c1300065ca1615d2f4fb88623afd5a8997c6b0930e2c05209e95e7172c6cf3">LLVMContext::OB_funclet</a>;</div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;      });</div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;      addOpBundleForFunclet(InsertPos-&gt;<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>(), OpBundles);</div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;      <a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *Clone = <a class="code" href="classllvm_1_1CallInst.html#a850d8262cd900958b3153c4aa080b2bb">CallInst::Create</a>(CInst, OpBundles);</div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>-&gt;getType() != ParamTy)</div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;        <a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a> = <span class="keyword">new</span> <a class="code" href="classllvm_1_1BitCastInst.html">BitCastInst</a>(<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>, ParamTy, <span class="stringliteral">&quot;&quot;</span>, InsertPos);</div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;      Clone-&gt;<a class="code" href="classllvm_1_1CallBase.html#abc10b887caad109288ffceb230493a85">setArgOperand</a>(0, <a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>);</div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;      Clone-&gt;<a class="code" href="classllvm_1_1Instruction.html#a482498a1c760122fd33c7fc8190dd277">insertBefore</a>(InsertPos);</div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160; </div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Cloning &quot;</span> &lt;&lt; *CInst &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;                                                   <span class="stringliteral">&quot;And inserting clone at &quot;</span></div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;                        &lt;&lt; *InsertPos &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;      Worklist.push_back(std::make_pair(Clone, Incoming));</div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;    }</div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;    <span class="comment">// Erase the original call.</span></div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Erasing: &quot;</span> &lt;&lt; *CInst &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;    <a class="code" href="namespacellvm_1_1objcarc.html#af4e05bf48a81b884e707efa650560fbf">EraseInstruction</a>(CInst);</div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;  } <span class="keywordflow">while</span> (!Worklist.empty());</div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;}</div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;<span class="comment">/// If we have a top down pointer in the S_Use state, make sure that there are</span></div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;<span class="comment">/// no CFG hazards by checking the states of various bottom up pointers.</span></div>
<div class="line"><a name="l01169"></a><span class="lineno"><a class="line" href="group__ARCOpt.html#ga3a319b49d26b9794c0cf855627fc36fa"> 1169</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="group__ARCOpt.html#ga3a319b49d26b9794c0cf855627fc36fa">CheckForUseCFGHazard</a>(<span class="keyword">const</span> <a class="code" href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306d">Sequence</a> SuccSSeq,</div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;                                 <span class="keyword">const</span> <span class="keywordtype">bool</span> SuccSRRIKnownSafe,</div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;                                 <a class="code" href="structllvm_1_1objcarc_1_1TopDownPtrState.html">TopDownPtrState</a> &amp;<a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>,</div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;                                 <span class="keywordtype">bool</span> &amp;SomeSuccHasSame,</div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;                                 <span class="keywordtype">bool</span> &amp;AllSuccsHaveSame,</div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;                                 <span class="keywordtype">bool</span> &amp;NotAllSeqEqualButKnownSafe,</div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;                                 <span class="keywordtype">bool</span> &amp;ShouldContinue) {</div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;  <span class="keywordflow">switch</span> (SuccSSeq) {</div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306da8902051603b385fb4587620a0650b4f7">S_CanRelease</a>: {</div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>.IsKnownSafe() &amp;&amp; !SuccSRRIKnownSafe) {</div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;      <a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>.ClearSequenceProgress();</div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;    }</div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;    <a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>.SetCFGHazardAfflicted(<span class="keyword">true</span>);</div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;    ShouldContinue = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;  }</div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306da8e1b337cadca1fc899129d307df7d68e">S_Use</a>:</div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;    SomeSuccHasSame = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306daadd43d88dff4dfb5f9620f2151822b64">S_Stop</a>:</div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306daff34dfb06d8316048c533bac105bfbe6">S_MovableRelease</a>:</div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>.IsKnownSafe() &amp;&amp; !SuccSRRIKnownSafe)</div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;      AllSuccsHaveSame = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;      NotAllSeqEqualButKnownSafe = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306daac10e4a5d85a196bcb2578c2700f3ff3">S_Retain</a>:</div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;    <a class="code" href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;bottom-up pointer in retain state!&quot;</span>);</div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306da6e431a7ec0fee74cc2ae9a79bd965122">S_None</a>:</div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;    <a class="code" href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;This should have been handled earlier.&quot;</span>);</div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;  }</div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;}</div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;<span class="comment">/// If we have a Top Down pointer in the S_CanRelease state, make sure that</span></div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;<span class="comment">/// there are no CFG hazards by checking the states of various bottom up</span></div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;<span class="comment">/// pointers.</span></div>
<div class="line"><a name="l01206"></a><span class="lineno"><a class="line" href="group__ARCOpt.html#ga5fd3f0408257b1a0df4a029c9b133d6c"> 1206</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="group__ARCOpt.html#ga5fd3f0408257b1a0df4a029c9b133d6c">CheckForCanReleaseCFGHazard</a>(<span class="keyword">const</span> <a class="code" href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306d">Sequence</a> SuccSSeq,</div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;                                        <span class="keyword">const</span> <span class="keywordtype">bool</span> SuccSRRIKnownSafe,</div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;                                        <a class="code" href="structllvm_1_1objcarc_1_1TopDownPtrState.html">TopDownPtrState</a> &amp;<a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>,</div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;                                        <span class="keywordtype">bool</span> &amp;SomeSuccHasSame,</div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;                                        <span class="keywordtype">bool</span> &amp;AllSuccsHaveSame,</div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;                                        <span class="keywordtype">bool</span> &amp;NotAllSeqEqualButKnownSafe) {</div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;  <span class="keywordflow">switch</span> (SuccSSeq) {</div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306da8902051603b385fb4587620a0650b4f7">S_CanRelease</a>:</div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;    SomeSuccHasSame = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306daadd43d88dff4dfb5f9620f2151822b64">S_Stop</a>:</div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306daff34dfb06d8316048c533bac105bfbe6">S_MovableRelease</a>:</div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306da8e1b337cadca1fc899129d307df7d68e">S_Use</a>:</div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>.IsKnownSafe() &amp;&amp; !SuccSRRIKnownSafe)</div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;      AllSuccsHaveSame = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;      NotAllSeqEqualButKnownSafe = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306daac10e4a5d85a196bcb2578c2700f3ff3">S_Retain</a>:</div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;    <a class="code" href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;bottom-up pointer in retain state!&quot;</span>);</div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306da6e431a7ec0fee74cc2ae9a79bd965122">S_None</a>:</div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;    <a class="code" href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;This should have been handled earlier.&quot;</span>);</div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;  }</div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;}</div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;<span class="comment">/// Check for critical edges, loop boundaries, irreducible control flow, or</span></div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;<span class="comment">/// other CFG structures where moving code across the edge would result in it</span></div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;<span class="comment">/// being executed more.</span></div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;<span class="comment"></span><span class="keywordtype">void</span></div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;ObjCARCOpt::CheckForCFGHazards(<span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>,</div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;                               <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;const BasicBlock *, BBState&gt;</a> &amp;BBStates,</div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;                               BBState &amp;MyStates)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;  <span class="comment">// If any top-down local-use or possible-dec has a succ which is earlier in</span></div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;  <span class="comment">// the sequence, forget it.</span></div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = MyStates.top_down_ptr_begin(), <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = MyStates.top_down_ptr_end();</div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;       <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;    <a class="code" href="structllvm_1_1objcarc_1_1TopDownPtrState.html">TopDownPtrState</a> &amp;<a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a> = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;second;</div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;    <span class="keyword">const</span> <a class="code" href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306d">Sequence</a> Seq = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;second.GetSeq();</div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160; </div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;    <span class="comment">// We only care about S_Retain, S_CanRelease, and S_Use.</span></div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;    <span class="keywordflow">if</span> (Seq == <a class="code" href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306da6e431a7ec0fee74cc2ae9a79bd965122">S_None</a>)</div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160; </div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;    <span class="comment">// Make sure that if extra top down states are added in the future that this</span></div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;    <span class="comment">// code is updated to handle it.</span></div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((Seq == <a class="code" href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306daac10e4a5d85a196bcb2578c2700f3ff3">S_Retain</a> || Seq == <a class="code" href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306da8902051603b385fb4587620a0650b4f7">S_CanRelease</a> || Seq == <a class="code" href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306da8e1b337cadca1fc899129d307df7d68e">S_Use</a>) &amp;&amp;</div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;           <span class="stringliteral">&quot;Unknown top down sequence state.&quot;</span>);</div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160; </div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a> = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;first;</div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;    <span class="keywordtype">bool</span> SomeSuccHasSame = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;    <span class="keywordtype">bool</span> AllSuccsHaveSame = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;    <span class="keywordtype">bool</span> NotAllSeqEqualButKnownSafe = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160; </div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Succ : <a class="code" href="namespacellvm.html#a26e2a938b431eaa6eca2beaa96410c9d">successors</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>)) {</div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;      <span class="comment">// If VisitBottomUp has pointer information for this successor, take</span></div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;      <span class="comment">// what we know about it.</span></div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;const BasicBlock *, BBState&gt;::iterator</a> BBI =</div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;          BBStates.<a class="code" href="classllvm_1_1DenseMapBase.html#a0c047f127ed4380a6f383d70bec4eb94">find</a>(Succ);</div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(BBI != BBStates.<a class="code" href="classllvm_1_1DenseMapBase.html#a65520b9c67759099e313d0f4e7b5ff9e">end</a>());</div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;      <span class="keyword">const</span> <a class="code" href="structllvm_1_1objcarc_1_1BottomUpPtrState.html">BottomUpPtrState</a> &amp;SuccS = BBI-&gt;second.getPtrBottomUpState(<a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>);</div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;      <span class="keyword">const</span> <a class="code" href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306d">Sequence</a> SuccSSeq = SuccS.<a class="code" href="classllvm_1_1objcarc_1_1PtrState.html#a1488167d90017e45843bfae0b00aaf49">GetSeq</a>();</div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160; </div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;      <span class="comment">// If bottom up, the pointer is in an S_None state, clear the sequence</span></div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;      <span class="comment">// progress since the sequence in the bottom up state finished</span></div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;      <span class="comment">// suggesting a mismatch in between retains/releases. This is true for</span></div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;      <span class="comment">// all three cases that we are handling here: S_Retain, S_Use, and</span></div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;      <span class="comment">// S_CanRelease.</span></div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;      <span class="keywordflow">if</span> (SuccSSeq == <a class="code" href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306da6e431a7ec0fee74cc2ae9a79bd965122">S_None</a>) {</div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;        <a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>.ClearSequenceProgress();</div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;      }</div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160; </div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;      <span class="comment">// If we have S_Use or S_CanRelease, perform our check for cfg hazard</span></div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;      <span class="comment">// checks.</span></div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">bool</span> SuccSRRIKnownSafe = SuccS.<a class="code" href="classllvm_1_1objcarc_1_1PtrState.html#aee65472e4d66de6d1d50f8e54fdcf54c">IsKnownSafe</a>();</div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160; </div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;      <span class="comment">// *NOTE* We do not use Seq from above here since we are allowing for</span></div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;      <span class="comment">// S.GetSeq() to change while we are visiting basic blocks.</span></div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;      <span class="keywordflow">switch</span>(<a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>.GetSeq()) {</div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306da8e1b337cadca1fc899129d307df7d68e">S_Use</a>: {</div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;        <span class="keywordtype">bool</span> ShouldContinue = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;        <a class="code" href="group__ARCOpt.html#ga3a319b49d26b9794c0cf855627fc36fa">CheckForUseCFGHazard</a>(SuccSSeq, SuccSRRIKnownSafe, <a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>, SomeSuccHasSame,</div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;                             AllSuccsHaveSame, NotAllSeqEqualButKnownSafe,</div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;                             ShouldContinue);</div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;        <span class="keywordflow">if</span> (ShouldContinue)</div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;      }</div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306da8902051603b385fb4587620a0650b4f7">S_CanRelease</a>:</div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;        <a class="code" href="group__ARCOpt.html#ga5fd3f0408257b1a0df4a029c9b133d6c">CheckForCanReleaseCFGHazard</a>(SuccSSeq, SuccSRRIKnownSafe, <a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>,</div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;                                    SomeSuccHasSame, AllSuccsHaveSame,</div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;                                    NotAllSeqEqualButKnownSafe);</div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306daac10e4a5d85a196bcb2578c2700f3ff3">S_Retain</a>:</div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306da6e431a7ec0fee74cc2ae9a79bd965122">S_None</a>:</div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306daadd43d88dff4dfb5f9620f2151822b64">S_Stop</a>:</div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306daff34dfb06d8316048c533bac105bfbe6">S_MovableRelease</a>:</div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;      }</div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;    }</div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160; </div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;    <span class="comment">// If the state at the other end of any of the successor edges</span></div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;    <span class="comment">// matches the current state, require all edges to match. This</span></div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;    <span class="comment">// guards against loops in the middle of a sequence.</span></div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;    <span class="keywordflow">if</span> (SomeSuccHasSame &amp;&amp; !AllSuccsHaveSame) {</div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;      <a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>.ClearSequenceProgress();</div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (NotAllSeqEqualButKnownSafe) {</div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;      <span class="comment">// If we would have cleared the state foregoing the fact that we are known</span></div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;      <span class="comment">// safe, stop code motion. This is because whether or not it is safe to</span></div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;      <span class="comment">// remove RR pairs via KnownSafe is an orthogonal concept to whether we</span></div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;      <span class="comment">// are allowed to perform code motion.</span></div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;      <a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>.SetCFGHazardAfflicted(<span class="keyword">true</span>);</div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;    }</div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;  }</div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;}</div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160; </div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;<span class="keywordtype">bool</span> ObjCARCOpt::VisitInstructionBottomUp(</div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Inst, <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, <a class="code" href="classllvm_1_1BlotMapVector.html">BlotMapVector&lt;Value *, RRInfo&gt;</a> &amp;Retains,</div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;    BBState &amp;MyStates) {</div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;  <span class="keywordtype">bool</span> NestingDetected = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;  <a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2">ARCInstKind</a> <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5ada3eb06ada644390db065d37b3fd87ac">Class</a> = <a class="code" href="namespacellvm_1_1objcarc.html#a92ed436b80d7666f785e46f7e9aa3e82">GetARCInstKind</a>(Inst);</div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160; </div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;        Class: &quot;</span> &lt;&lt; Class &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160; </div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;  <span class="keywordflow">switch</span> (Class) {</div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2ab8e7b465df7c5979dc731d06e84ce2cf">ARCInstKind::Release</a>: {</div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;    <a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a> = <a class="code" href="namespacellvm_1_1objcarc.html#a89850f2a3bb39efa5d19a3e75bd14ea2">GetArgRCIdentityRoot</a>(Inst);</div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160; </div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;    <a class="code" href="structllvm_1_1objcarc_1_1BottomUpPtrState.html">BottomUpPtrState</a> &amp;<a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a> = MyStates.getPtrBottomUpState(<a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>);</div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;    NestingDetected |= <a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>.InitBottomUp(MDKindCache, Inst);</div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;  }</div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2aa5c9c22c7dedc1f8dd1d75b7c04460a9">ARCInstKind::RetainBlock</a>:</div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;    <span class="comment">// In OptimizeIndividualCalls, we have strength reduced all optimizable</span></div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;    <span class="comment">// objc_retainBlocks to objc_retains. Thus at this point any</span></div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;    <span class="comment">// objc_retainBlocks that we see are not optimizable.</span></div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2aafece4245269582cb2f1009d4fb52047">ARCInstKind::Retain</a>:</div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2aa1226b5450384ce6ea5ed47c317303ee">ARCInstKind::RetainRV</a>: {</div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;    <a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a> = <a class="code" href="namespacellvm_1_1objcarc.html#a89850f2a3bb39efa5d19a3e75bd14ea2">GetArgRCIdentityRoot</a>(Inst);</div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;    <a class="code" href="structllvm_1_1objcarc_1_1BottomUpPtrState.html">BottomUpPtrState</a> &amp;<a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a> = MyStates.getPtrBottomUpState(<a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>);</div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>.MatchWithRetain()) {</div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;      <span class="comment">// Don&#39;t do retain+release tracking for ARCInstKind::RetainRV, because</span></div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;      <span class="comment">// it&#39;s better to let it remain as the first instruction after a call.</span></div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;      <span class="keywordflow">if</span> (Class != <a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2aa1226b5450384ce6ea5ed47c317303ee">ARCInstKind::RetainRV</a>) {</div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;        <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;        Matching with: &quot;</span> &lt;&lt; *Inst &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;        Retains[Inst] = <a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>.GetRRInfo();</div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;      }</div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;      <a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>.ClearSequenceProgress();</div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;    }</div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;    <span class="comment">// A retain moving bottom up can be a use.</span></div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;  }</div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2a4ee466dcf60bef3376060be50d45cdda">ARCInstKind::AutoreleasepoolPop</a>:</div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;    <span class="comment">// Conservatively, clear MyStates for all known pointers.</span></div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;    MyStates.clearBottomUpPointers();</div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;    <span class="keywordflow">return</span> NestingDetected;</div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2a56a1f8ca583bf2a38d53b7e7825bd269">ARCInstKind::AutoreleasepoolPush</a>:</div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2a6adf97f83acf6453d4a6a4b1070f3754">ARCInstKind::None</a>:</div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;    <span class="comment">// These are irrelevant.</span></div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;    <span class="keywordflow">return</span> NestingDetected;</div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;  <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;  }</div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160; </div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;  <span class="comment">// Consider any other possible effects of this instruction on each</span></div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;  <span class="comment">// pointer being tracked.</span></div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> = MyStates.bottom_up_ptr_begin(),</div>
<div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;            ME = MyStates.bottom_up_ptr_end();</div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;       <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> != ME; ++<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) {</div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a> = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;first;</div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a> == <a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>)</div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;      <span class="keywordflow">continue</span>; <span class="comment">// Handled above.</span></div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;    <a class="code" href="structllvm_1_1objcarc_1_1BottomUpPtrState.html">BottomUpPtrState</a> &amp;<a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a> = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;second;</div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160; </div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>.HandlePotentialAlterRefCount(Inst, <a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>, PA, Class))</div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160; </div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;    <a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>.HandlePotentialUse(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, Inst, <a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>, PA, Class);</div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;  }</div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160; </div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;  <span class="keywordflow">return</span> NestingDetected;</div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;}</div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160; </div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;<span class="keywordtype">bool</span> ObjCARCOpt::VisitBottomUp(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>,</div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;                               <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;const BasicBlock *, BBState&gt;</a> &amp;BBStates,</div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;                               <a class="code" href="classllvm_1_1BlotMapVector.html">BlotMapVector&lt;Value *, RRInfo&gt;</a> &amp;Retains) {</div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;\n== ObjCARCOpt::VisitBottomUp ==\n&quot;</span>);</div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160; </div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;  <span class="keywordtype">bool</span> NestingDetected = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;  BBState &amp;MyStates = BBStates[<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>];</div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160; </div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;  <span class="comment">// Merge the states from each successor to compute the initial state</span></div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;  <span class="comment">// for the current block.</span></div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;  BBState::edge_iterator <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>(MyStates.succ_begin()),</div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;                         SE(MyStates.succ_end());</div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a> != SE) {</div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Succ = *<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>;</div>
<div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;    <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;const BasicBlock *, BBState&gt;::iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = BBStates.<a class="code" href="classllvm_1_1DenseMapBase.html#a0c047f127ed4380a6f383d70bec4eb94">find</a>(Succ);</div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != BBStates.<a class="code" href="classllvm_1_1DenseMapBase.html#a65520b9c67759099e313d0f4e7b5ff9e">end</a>());</div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;    MyStates.InitFromSucc(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;second);</div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;    ++<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>;</div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;    <span class="keywordflow">for</span> (; <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a> != SE; ++<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>) {</div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;      Succ = *<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>;</div>
<div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;      <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = BBStates.<a class="code" href="classllvm_1_1DenseMapBase.html#a0c047f127ed4380a6f383d70bec4eb94">find</a>(Succ);</div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != BBStates.<a class="code" href="classllvm_1_1DenseMapBase.html#a65520b9c67759099e313d0f4e7b5ff9e">end</a>());</div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;      MyStates.MergeSucc(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;second);</div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;    }</div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;  }</div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160; </div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Before:\n&quot;</span></div>
<div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;                    &lt;&lt; BBStates[<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>] &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;                    &lt;&lt; <span class="stringliteral">&quot;Performing Dataflow:\n&quot;</span>);</div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160; </div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;  <span class="comment">// Visit all the instructions, bottom-up.</span></div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html#a98c0a84a5dfa8bce341c829709f171e5">BasicBlock::iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;end(), <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;begin(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>; --<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Inst = &amp;*std::prev(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160; </div>
<div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;    <span class="comment">// Invoke instructions are visited as part of their successors (below).</span></div>
<div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;    <span class="keywordflow">if</span> (isa&lt;InvokeInst&gt;(Inst))</div>
<div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160; </div>
<div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;    Visiting &quot;</span> &lt;&lt; *Inst &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160; </div>
<div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;    NestingDetected |= VisitInstructionBottomUp(Inst, <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, Retains, MyStates);</div>
<div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160; </div>
<div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;    <span class="comment">// Bail out if the number of pointers being tracked becomes too large so</span></div>
<div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;    <span class="comment">// that this pass can complete in a reasonable amount of time.</span></div>
<div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;    <span class="keywordflow">if</span> (MyStates.bottom_up_ptr_list_size() &gt; <a class="code" href="ObjCARCOpts_8cpp.html#ada3f418289d61a260056b641a13e86c1">MaxPtrStates</a>) {</div>
<div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;      DisableRetainReleasePairing = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;    }</div>
<div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;  }</div>
<div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160; </div>
<div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;  <span class="comment">// If there&#39;s a predecessor with an invoke, visit the invoke as if it were</span></div>
<div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;  <span class="comment">// part of this block, since we can&#39;t insert code after an invoke in its own</span></div>
<div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;  <span class="comment">// block, and we don&#39;t want to split critical edges.</span></div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;  <span class="keywordflow">for</span> (BBState::edge_iterator PI(MyStates.pred_begin()),</div>
<div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;       PE(MyStates.pred_end()); PI != PE; ++PI) {</div>
<div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Pred = *PI;</div>
<div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1InvokeInst.html">InvokeInst</a> *II = dyn_cast&lt;InvokeInst&gt;(&amp;Pred-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8f6f9b4a94dc0907499c03a9e1b6918b">back</a>()))</div>
<div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;      NestingDetected |= VisitInstructionBottomUp(II, <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, Retains, MyStates);</div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;  }</div>
<div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160; </div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;\nFinal State:\n&quot;</span> &lt;&lt; BBStates[<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>] &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160; </div>
<div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;  <span class="keywordflow">return</span> NestingDetected;</div>
<div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;}</div>
<div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160; </div>
<div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;<span class="comment">// Fill ReleaseInsertPtToRCIdentityRoots, which is a map from insertion points</span></div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;<span class="comment">// to the set of RC identity roots that would be released by the release calls</span></div>
<div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;<span class="comment">// moved to the insertion points.</span></div>
<div class="line"><a name="l01459"></a><span class="lineno"><a class="line" href="group__ARCOpt.html#gac3fb7fa331da4859e6ce9cd029286f4e"> 1459</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="group__ARCOpt.html#gac3fb7fa331da4859e6ce9cd029286f4e">collectReleaseInsertPts</a>(</div>
<div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1BlotMapVector.html">BlotMapVector&lt;Value *, RRInfo&gt;</a> &amp;Retains,</div>
<div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;    <a class="code" href="classllvm_1_1DenseMap.html">DenseMap</a>&lt;<span class="keyword">const</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *, <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;const Value *, 2&gt;</a>&gt;</div>
<div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;        &amp;ReleaseInsertPtToRCIdentityRoots) {</div>
<div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a> : Retains) {</div>
<div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;    <span class="comment">// Retains is a map from an objc_retain call to a RRInfo of the RC identity</span></div>
<div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;    <span class="comment">// root of the call. Get the RC identity root of the objc_retain call.</span></div>
<div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2aafece4245269582cb2f1009d4fb52047">Retain</a> = cast&lt;Instruction&gt;(<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>.first);</div>
<div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Root = <a class="code" href="namespacellvm_1_1objcarc.html#aa72ef5ef299b7531b84aafcf9c1f755f">GetRCIdentityRoot</a>(<a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2aafece4245269582cb2f1009d4fb52047">Retain</a>-&gt;getOperand(0));</div>
<div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;    <span class="comment">// Collect all the insertion points of the objc_release calls that release</span></div>
<div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;    <span class="comment">// the RC identity root of the objc_retain call.</span></div>
<div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *InsertPt : <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>.second.ReverseInsertPts)</div>
<div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;      ReleaseInsertPtToRCIdentityRoots[InsertPt].insert(Root);</div>
<div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;  }</div>
<div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;}</div>
<div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160; </div>
<div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;<span class="comment">// Get the RC identity roots from an insertion point of an objc_release call.</span></div>
<div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;<span class="comment">// Return nullptr if the passed instruction isn&#39;t an insertion point.</span></div>
<div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;const Value *, 2&gt;</a> *</div>
<div class="line"><a name="l01478"></a><span class="lineno"><a class="line" href="group__ARCOpt.html#ga92b352b539d5bb9a2033082acdb09590"> 1478</a></span>&#160;<a class="code" href="group__ARCOpt.html#ga92b352b539d5bb9a2033082acdb09590">getRCIdentityRootsFromReleaseInsertPt</a>(</div>
<div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *InsertPt,</div>
<div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1DenseMap.html">DenseMap</a>&lt;<span class="keyword">const</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *, <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;const Value *, 2&gt;</a>&gt;</div>
<div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;        &amp;ReleaseInsertPtToRCIdentityRoots) {</div>
<div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;  <span class="keyword">auto</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = ReleaseInsertPtToRCIdentityRoots.find(InsertPt);</div>
<div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> == ReleaseInsertPtToRCIdentityRoots.end())</div>
<div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;  <span class="keywordflow">return</span> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;second;</div>
<div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;}</div>
<div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160; </div>
<div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;<span class="keywordtype">bool</span> ObjCARCOpt::VisitInstructionTopDown(</div>
<div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Inst, <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;Value *, RRInfo&gt;</a> &amp;Releases, BBState &amp;MyStates,</div>
<div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1DenseMap.html">DenseMap</a>&lt;<span class="keyword">const</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *, <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;const Value *, 2&gt;</a>&gt;</div>
<div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;        &amp;ReleaseInsertPtToRCIdentityRoots) {</div>
<div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;  <span class="keywordtype">bool</span> NestingDetected = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;  <a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2">ARCInstKind</a> <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5ada3eb06ada644390db065d37b3fd87ac">Class</a> = <a class="code" href="namespacellvm_1_1objcarc.html#a92ed436b80d7666f785e46f7e9aa3e82">GetARCInstKind</a>(Inst);</div>
<div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160; </div>
<div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;  <span class="comment">// Make sure a call to objc_retain isn&#39;t moved past insertion points of calls</span></div>
<div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;  <span class="comment">// to objc_release.</span></div>
<div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;const Value *, 2&gt;</a> *Roots =</div>
<div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;          <a class="code" href="group__ARCOpt.html#ga92b352b539d5bb9a2033082acdb09590">getRCIdentityRootsFromReleaseInsertPt</a>(</div>
<div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;              Inst, ReleaseInsertPtToRCIdentityRoots))</div>
<div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> *Root : *Roots) {</div>
<div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;      <a class="code" href="structllvm_1_1objcarc_1_1TopDownPtrState.html">TopDownPtrState</a> &amp;<a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a> = MyStates.getPtrTopDownState(Root);</div>
<div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;      <span class="comment">// Disable code motion if the current position is S_Retain to prevent</span></div>
<div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;      <span class="comment">// moving the objc_retain call past objc_release calls. If it&#39;s</span></div>
<div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;      <span class="comment">// S_CanRelease or larger, it&#39;s not necessary to disable code motion as</span></div>
<div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;      <span class="comment">// the insertion points that prevent the objc_retain call from moving down</span></div>
<div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;      <span class="comment">// should have been set already.</span></div>
<div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>.GetSeq() == <a class="code" href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306daac10e4a5d85a196bcb2578c2700f3ff3">S_Retain</a>)</div>
<div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;        <a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>.SetCFGHazardAfflicted(<span class="keyword">true</span>);</div>
<div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;    }</div>
<div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160; </div>
<div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;        Class: &quot;</span> &lt;&lt; Class &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160; </div>
<div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;  <span class="keywordflow">switch</span> (Class) {</div>
<div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2aa5c9c22c7dedc1f8dd1d75b7c04460a9">ARCInstKind::RetainBlock</a>:</div>
<div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;    <span class="comment">// In OptimizeIndividualCalls, we have strength reduced all optimizable</span></div>
<div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;    <span class="comment">// objc_retainBlocks to objc_retains. Thus at this point any</span></div>
<div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;    <span class="comment">// objc_retainBlocks that we see are not optimizable. We need to break since</span></div>
<div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;    <span class="comment">// a retain can be a potential use.</span></div>
<div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2aafece4245269582cb2f1009d4fb52047">ARCInstKind::Retain</a>:</div>
<div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2aa1226b5450384ce6ea5ed47c317303ee">ARCInstKind::RetainRV</a>: {</div>
<div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;    <a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a> = <a class="code" href="namespacellvm_1_1objcarc.html#a89850f2a3bb39efa5d19a3e75bd14ea2">GetArgRCIdentityRoot</a>(Inst);</div>
<div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;    <a class="code" href="structllvm_1_1objcarc_1_1TopDownPtrState.html">TopDownPtrState</a> &amp;<a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a> = MyStates.getPtrTopDownState(<a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>);</div>
<div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;    NestingDetected |= <a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>.InitTopDown(Class, Inst);</div>
<div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;    <span class="comment">// A retain can be a potential use; proceed to the generic checking</span></div>
<div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;    <span class="comment">// code below.</span></div>
<div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;  }</div>
<div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2ab8e7b465df7c5979dc731d06e84ce2cf">ARCInstKind::Release</a>: {</div>
<div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;    <a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a> = <a class="code" href="namespacellvm_1_1objcarc.html#a89850f2a3bb39efa5d19a3e75bd14ea2">GetArgRCIdentityRoot</a>(Inst);</div>
<div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;    <a class="code" href="structllvm_1_1objcarc_1_1TopDownPtrState.html">TopDownPtrState</a> &amp;<a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a> = MyStates.getPtrTopDownState(<a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>);</div>
<div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;    <span class="comment">// Try to form a tentative pair in between this release instruction and the</span></div>
<div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;    <span class="comment">// top down pointers that we are tracking.</span></div>
<div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>.MatchWithRelease(MDKindCache, Inst)) {</div>
<div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;      <span class="comment">// If we succeed, copy S&#39;s RRInfo into the Release -&gt; {Retain Set</span></div>
<div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;      <span class="comment">// Map}. Then we clear S.</span></div>
<div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;        Matching with: &quot;</span> &lt;&lt; *Inst &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;      Releases[Inst] = <a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>.GetRRInfo();</div>
<div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;      <a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>.ClearSequenceProgress();</div>
<div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;    }</div>
<div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;  }</div>
<div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2a4ee466dcf60bef3376060be50d45cdda">ARCInstKind::AutoreleasepoolPop</a>:</div>
<div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;    <span class="comment">// Conservatively, clear MyStates for all known pointers.</span></div>
<div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;    MyStates.clearTopDownPointers();</div>
<div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2a56a1f8ca583bf2a38d53b7e7825bd269">ARCInstKind::AutoreleasepoolPush</a>:</div>
<div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2a6adf97f83acf6453d4a6a4b1070f3754">ARCInstKind::None</a>:</div>
<div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;    <span class="comment">// These can not be uses of</span></div>
<div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;  <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;  }</div>
<div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160; </div>
<div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;  <span class="comment">// Consider any other possible effects of this instruction on each</span></div>
<div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;  <span class="comment">// pointer being tracked.</span></div>
<div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> = MyStates.top_down_ptr_begin(),</div>
<div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;            ME = MyStates.top_down_ptr_end();</div>
<div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;       <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> != ME; ++<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) {</div>
<div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a> = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;first;</div>
<div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a> == <a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>)</div>
<div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;      <span class="keywordflow">continue</span>; <span class="comment">// Handled above.</span></div>
<div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;    <a class="code" href="structllvm_1_1objcarc_1_1TopDownPtrState.html">TopDownPtrState</a> &amp;<a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a> = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;second;</div>
<div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>.HandlePotentialAlterRefCount(Inst, <a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>, PA, Class, *BundledInsts))</div>
<div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160; </div>
<div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;    <a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>.HandlePotentialUse(Inst, <a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>, PA, Class);</div>
<div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;  }</div>
<div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160; </div>
<div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;  <span class="keywordflow">return</span> NestingDetected;</div>
<div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;}</div>
<div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160; </div>
<div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;<span class="keywordtype">bool</span> ObjCARCOpt::VisitTopDown(</div>
<div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;const BasicBlock *, BBState&gt;</a> &amp;BBStates,</div>
<div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;    <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;Value *, RRInfo&gt;</a> &amp;Releases,</div>
<div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1DenseMap.html">DenseMap</a>&lt;<span class="keyword">const</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *, <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;const Value *, 2&gt;</a>&gt;</div>
<div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;        &amp;ReleaseInsertPtToRCIdentityRoots) {</div>
<div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;\n== ObjCARCOpt::VisitTopDown ==\n&quot;</span>);</div>
<div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;  <span class="keywordtype">bool</span> NestingDetected = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;  BBState &amp;MyStates = BBStates[<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>];</div>
<div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160; </div>
<div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;  <span class="comment">// Merge the states from each predecessor to compute the initial state</span></div>
<div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;  <span class="comment">// for the current block.</span></div>
<div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;  BBState::edge_iterator PI(MyStates.pred_begin()),</div>
<div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;                         PE(MyStates.pred_end());</div>
<div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;  <span class="keywordflow">if</span> (PI != PE) {</div>
<div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Pred = *PI;</div>
<div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;    <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;const BasicBlock *, BBState&gt;::iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = BBStates.<a class="code" href="classllvm_1_1DenseMapBase.html#a0c047f127ed4380a6f383d70bec4eb94">find</a>(Pred);</div>
<div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != BBStates.<a class="code" href="classllvm_1_1DenseMapBase.html#a65520b9c67759099e313d0f4e7b5ff9e">end</a>());</div>
<div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;    MyStates.InitFromPred(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;second);</div>
<div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;    ++PI;</div>
<div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;    <span class="keywordflow">for</span> (; PI != PE; ++PI) {</div>
<div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;      Pred = *PI;</div>
<div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;      <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = BBStates.<a class="code" href="classllvm_1_1DenseMapBase.html#a0c047f127ed4380a6f383d70bec4eb94">find</a>(Pred);</div>
<div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != BBStates.<a class="code" href="classllvm_1_1DenseMapBase.html#a65520b9c67759099e313d0f4e7b5ff9e">end</a>());</div>
<div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;      MyStates.MergePred(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;second);</div>
<div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;    }</div>
<div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;  }</div>
<div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160; </div>
<div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;  <span class="comment">// Check that BB and MyStates have the same number of predecessors. This</span></div>
<div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;  <span class="comment">// prevents retain calls that live outside a loop from being moved into the</span></div>
<div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;  <span class="comment">// loop.</span></div>
<div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;hasNPredecessors(MyStates.pred_end() - MyStates.pred_begin()))</div>
<div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = MyStates.top_down_ptr_begin(),</div>
<div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;              <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = MyStates.top_down_ptr_end();</div>
<div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;         <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div>
<div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;      <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;second.SetCFGHazardAfflicted(<span class="keyword">true</span>);</div>
<div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160; </div>
<div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Before:\n&quot;</span></div>
<div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;                    &lt;&lt; BBStates[<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>] &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;                    &lt;&lt; <span class="stringliteral">&quot;Performing Dataflow:\n&quot;</span>);</div>
<div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160; </div>
<div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;  <span class="comment">// Visit all the instructions, top-down.</span></div>
<div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;Inst : *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) {</div>
<div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;    Visiting &quot;</span> &lt;&lt; Inst &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160; </div>
<div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;    NestingDetected |= VisitInstructionTopDown(</div>
<div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;        &amp;Inst, Releases, MyStates, ReleaseInsertPtToRCIdentityRoots);</div>
<div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160; </div>
<div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;    <span class="comment">// Bail out if the number of pointers being tracked becomes too large so</span></div>
<div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;    <span class="comment">// that this pass can complete in a reasonable amount of time.</span></div>
<div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;    <span class="keywordflow">if</span> (MyStates.top_down_ptr_list_size() &gt; <a class="code" href="ObjCARCOpts_8cpp.html#ada3f418289d61a260056b641a13e86c1">MaxPtrStates</a>) {</div>
<div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;      DisableRetainReleasePairing = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;    }</div>
<div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;  }</div>
<div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160; </div>
<div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;\nState Before Checking for CFG Hazards:\n&quot;</span></div>
<div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;                    &lt;&lt; BBStates[<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>] &lt;&lt; <span class="stringliteral">&quot;\n\n&quot;</span>);</div>
<div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;  CheckForCFGHazards(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, BBStates, MyStates);</div>
<div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Final State:\n&quot;</span> &lt;&lt; BBStates[<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>] &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;  <span class="keywordflow">return</span> NestingDetected;</div>
<div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;}</div>
<div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160; </div>
<div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span></div>
<div class="line"><a name="l01637"></a><span class="lineno"><a class="line" href="group__ARCOpt.html#gac3778bafa67cdae223698e5bba785a76"> 1637</a></span>&#160;<a class="code" href="group__ARCOpt.html#gac3778bafa67cdae223698e5bba785a76">ComputePostOrders</a>(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>,</div>
<div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;                  <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;BasicBlock *&gt;</a> &amp;PostOrder,</div>
<div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;                  <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;BasicBlock *&gt;</a> &amp;ReverseCFGPostOrder,</div>
<div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;                  <span class="keywordtype">unsigned</span> NoObjCARCExceptionsMDKind,</div>
<div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;                  <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;const BasicBlock *, BBState&gt;</a> &amp;BBStates) {<span class="comment"></span></div>
<div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;<span class="comment">  /// The visited set, for doing DFS walks.</span></div>
<div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;BasicBlock *, 16&gt;</a> Visited;</div>
<div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160; </div>
<div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;  <span class="comment">// Do DFS, computing the PostOrder.</span></div>
<div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;BasicBlock *, 16&gt;</a> OnStack;</div>
<div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;std::pair&lt;BasicBlock *, succ_iterator&gt;</a>, 16&gt; SuccStack;</div>
<div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160; </div>
<div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;  <span class="comment">// Functions always have exactly one entry block, and we don&#39;t have</span></div>
<div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;  <span class="comment">// any other block that we treat like an entry block.</span></div>
<div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *EntryBB = &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getEntryBlock();</div>
<div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;  BBState &amp;MyStates = BBStates[EntryBB];</div>
<div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;  MyStates.SetAsEntry();</div>
<div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *EntryTI = EntryBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>();</div>
<div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;  SuccStack.push_back(std::make_pair(EntryBB, <a class="code" href="namespacellvm.html#a7d2bc151d2b6d3351ec3a12e090041cb">succ_iterator</a>(EntryTI)));</div>
<div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;  Visited.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(EntryBB);</div>
<div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;  OnStack.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(EntryBB);</div>
<div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;  <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;  dfs_next_succ:</div>
<div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *CurrBB = SuccStack.back().first;</div>
<div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;    <a class="code" href="classllvm_1_1SuccIterator.html">succ_iterator</a> SE(CurrBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>(), <span class="keyword">false</span>);</div>
<div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160; </div>
<div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;    <span class="keywordflow">while</span> (SuccStack.back().second != SE) {</div>
<div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;      <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *SuccBB = *SuccStack.back().second++;</div>
<div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;      <span class="keywordflow">if</span> (Visited.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(SuccBB).second) {</div>
<div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;        SuccStack.push_back(</div>
<div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;            std::make_pair(SuccBB, <a class="code" href="namespacellvm.html#a7d2bc151d2b6d3351ec3a12e090041cb">succ_iterator</a>(SuccBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>())));</div>
<div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;        BBStates[CurrBB].addSucc(SuccBB);</div>
<div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;        BBState &amp;SuccStates = BBStates[SuccBB];</div>
<div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;        SuccStates.addPred(CurrBB);</div>
<div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;        OnStack.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(SuccBB);</div>
<div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;        <span class="keywordflow">goto</span> dfs_next_succ;</div>
<div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;      }</div>
<div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160; </div>
<div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;      <span class="keywordflow">if</span> (!OnStack.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a1f475b0df44ebd7169e720fa1bf9169e">count</a>(SuccBB)) {</div>
<div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;        BBStates[CurrBB].addSucc(SuccBB);</div>
<div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;        BBStates[SuccBB].addPred(CurrBB);</div>
<div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;      }</div>
<div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;    }</div>
<div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;    OnStack.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a11045c7973ab24a8d6315b61fa337d4e">erase</a>(CurrBB);</div>
<div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;    PostOrder.push_back(CurrBB);</div>
<div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;    SuccStack.pop_back();</div>
<div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;  } <span class="keywordflow">while</span> (!SuccStack.empty());</div>
<div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160; </div>
<div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;  Visited.<a class="code" href="classllvm_1_1SmallPtrSetImplBase.html#a16413f1a88d8baca228d0a1b4cc0bfc6">clear</a>();</div>
<div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160; </div>
<div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;  <span class="comment">// Do reverse-CFG DFS, computing the reverse-CFG PostOrder.</span></div>
<div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;  <span class="comment">// Functions may have many exits, and there also blocks which we treat</span></div>
<div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;  <span class="comment">// as exits due to ignored edges.</span></div>
<div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;std::pair&lt;BasicBlock *, BBState::edge_iterator&gt;</a>, 16&gt; PredStack;</div>
<div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> &amp;ExitBB : <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>) {</div>
<div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;    BBState &amp;MyStates = BBStates[&amp;ExitBB];</div>
<div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;    <span class="keywordflow">if</span> (!MyStates.isExit())</div>
<div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160; </div>
<div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;    MyStates.SetAsExit();</div>
<div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160; </div>
<div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;    PredStack.push_back(std::make_pair(&amp;ExitBB, MyStates.pred_begin()));</div>
<div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;    Visited.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(&amp;ExitBB);</div>
<div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;    <span class="keywordflow">while</span> (!PredStack.empty()) {</div>
<div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;    reverse_dfs_next_succ:</div>
<div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;      BBState::edge_iterator PE = BBStates[PredStack.back().first].pred_end();</div>
<div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;      <span class="keywordflow">while</span> (PredStack.back().second != PE) {</div>
<div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;        <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> = *PredStack.back().second++;</div>
<div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;        <span class="keywordflow">if</span> (Visited.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>).second) {</div>
<div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;          PredStack.push_back(std::make_pair(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, BBStates[<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>].<a class="code" href="namespacellvm.html#a7e108932dc3da5294aed99a353aac9c4">pred_begin</a>()));</div>
<div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;          <span class="keywordflow">goto</span> reverse_dfs_next_succ;</div>
<div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;        }</div>
<div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;      }</div>
<div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;      ReverseCFGPostOrder.push_back(PredStack.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a0c8ffe664a36e30d49c84d0aded2fe08">pop_back_val</a>().first);</div>
<div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;    }</div>
<div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;  }</div>
<div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;}</div>
<div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160; </div>
<div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;<span class="comment">// Visit the function both top-down and bottom-up.</span></div>
<div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;<span class="keywordtype">bool</span> ObjCARCOpt::Visit(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>,</div>
<div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;                       <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;const BasicBlock *, BBState&gt;</a> &amp;BBStates,</div>
<div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;                       <a class="code" href="classllvm_1_1BlotMapVector.html">BlotMapVector&lt;Value *, RRInfo&gt;</a> &amp;Retains,</div>
<div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;                       <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;Value *, RRInfo&gt;</a> &amp;Releases) {</div>
<div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;  <span class="comment">// Use reverse-postorder traversals, because we magically know that loops</span></div>
<div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;  <span class="comment">// will be well behaved, i.e. they won&#39;t repeatedly call retain on a single</span></div>
<div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;  <span class="comment">// pointer without doing a release. We can&#39;t use the ReversePostOrderTraversal</span></div>
<div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;  <span class="comment">// class here because we want the reverse-CFG postorder to consider each</span></div>
<div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;  <span class="comment">// function exit point, and we want to ignore selected cycle edges.</span></div>
<div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;BasicBlock *, 16&gt;</a> PostOrder;</div>
<div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;BasicBlock *, 16&gt;</a> ReverseCFGPostOrder;</div>
<div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;  <a class="code" href="group__ARCOpt.html#gac3778bafa67cdae223698e5bba785a76">ComputePostOrders</a>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, PostOrder, ReverseCFGPostOrder,</div>
<div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;                    MDKindCache.<a class="code" href="classllvm_1_1objcarc_1_1ARCMDKindCache.html#a062cf10f8ea9fc45291d700b2e8da648">get</a>(<a class="code" href="namespacellvm_1_1objcarc.html#a749ec59e4812b00a3cf7e7036fb39c06adfb5efff844959d1f14f5450c9cefe8f">ARCMDKindID::NoObjCARCExceptions</a>),</div>
<div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;                    BBStates);</div>
<div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160; </div>
<div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;  <span class="comment">// Use reverse-postorder on the reverse CFG for bottom-up.</span></div>
<div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;  <span class="keywordtype">bool</span> BottomUpNestingDetected = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> : <a class="code" href="namespacellvm.html#a6b0ac1fa4f05de76413c5e0ca6334035">llvm::reverse</a>(ReverseCFGPostOrder)) {</div>
<div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;    BottomUpNestingDetected |= VisitBottomUp(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, BBStates, Retains);</div>
<div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;    <span class="keywordflow">if</span> (DisableRetainReleasePairing)</div>
<div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;  }</div>
<div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160; </div>
<div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;  <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;const Instruction *, SmallPtrSet&lt;const Value *, 2&gt;</a>&gt;</div>
<div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;      ReleaseInsertPtToRCIdentityRoots;</div>
<div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;  <a class="code" href="group__ARCOpt.html#gac3fb7fa331da4859e6ce9cd029286f4e">collectReleaseInsertPts</a>(Retains, ReleaseInsertPtToRCIdentityRoots);</div>
<div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160; </div>
<div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;  <span class="comment">// Use reverse-postorder for top-down.</span></div>
<div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;  <span class="keywordtype">bool</span> TopDownNestingDetected = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> : <a class="code" href="namespacellvm.html#a6b0ac1fa4f05de76413c5e0ca6334035">llvm::reverse</a>(PostOrder)) {</div>
<div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;    TopDownNestingDetected |=</div>
<div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;        VisitTopDown(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, BBStates, Releases, ReleaseInsertPtToRCIdentityRoots);</div>
<div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;    <span class="keywordflow">if</span> (DisableRetainReleasePairing)</div>
<div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;  }</div>
<div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160; </div>
<div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;  <span class="keywordflow">return</span> TopDownNestingDetected &amp;&amp; BottomUpNestingDetected;</div>
<div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;}</div>
<div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;<span class="comment">/// Move the calls in RetainsToMove and ReleasesToMove.</span></div>
<div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> ObjCARCOpt::MoveCalls(<a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>, <a class="code" href="structllvm_1_1objcarc_1_1RRInfo.html">RRInfo</a> &amp;RetainsToMove,</div>
<div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;                           <a class="code" href="structllvm_1_1objcarc_1_1RRInfo.html">RRInfo</a> &amp;ReleasesToMove,</div>
<div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;                           <a class="code" href="classllvm_1_1BlotMapVector.html">BlotMapVector&lt;Value *, RRInfo&gt;</a> &amp;Retains,</div>
<div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;                           <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;Value *, RRInfo&gt;</a> &amp;Releases,</div>
<div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;                           <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;Instruction *&gt;</a> &amp;DeadInsts,</div>
<div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;                           <a class="code" href="classllvm_1_1Module.html">Module</a> *M) {</div>
<div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *ArgTy = <a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>-&gt;getType();</div>
<div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *ParamTy = <a class="code" href="classllvm_1_1PointerType.html#a8db49fd5069f21d514e7bb0fd11f0902">PointerType::getUnqual</a>(<a class="code" href="classllvm_1_1Type.html#a7ba5de75f50bb4a4ba920698edf39b28">Type::getInt8Ty</a>(ArgTy-&gt;<a class="code" href="classllvm_1_1Type.html#a0566221f10834bfcea70965379745a20">getContext</a>()));</div>
<div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160; </div>
<div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;== ObjCARCOpt::MoveCalls ==\n&quot;</span>);</div>
<div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160; </div>
<div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;  <span class="comment">// Insert the new retain and release calls.</span></div>
<div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *InsertPt : ReleasesToMove.<a class="code" href="structllvm_1_1objcarc_1_1RRInfo.html#aed932d067cad4f2d928df9bee21af52a">ReverseInsertPts</a>) {</div>
<div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *MyArg = ArgTy == ParamTy ? <a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a> :</div>
<div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;                   <span class="keyword">new</span> <a class="code" href="classllvm_1_1BitCastInst.html">BitCastInst</a>(<a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>, ParamTy, <span class="stringliteral">&quot;&quot;</span>, InsertPt);</div>
<div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;    <a class="code" href="classllvm_1_1Function.html">Function</a> *Decl = EP.<a class="code" href="classllvm_1_1objcarc_1_1ARCRuntimeEntryPoints.html#a565749e827bad7cb5bd425ac7ffd9414">get</a>(<a class="code" href="namespacellvm_1_1objcarc.html#aa4b95e1b6c59a75f558794b32b644febaafece4245269582cb2f1009d4fb52047">ARCRuntimeEntryPointKind::Retain</a>);</div>
<div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;OperandBundleDef, 1&gt;</a> BundleList;</div>
<div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;    addOpBundleForFunclet(InsertPt-&gt;<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>(), BundleList);</div>
<div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;    <a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *<a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a463baf545246fea9718664d933ffe66f">Call</a> = <a class="code" href="classllvm_1_1CallInst.html#a850d8262cd900958b3153c4aa080b2bb">CallInst::Create</a>(Decl, MyArg, BundleList, <span class="stringliteral">&quot;&quot;</span>, InsertPt);</div>
<div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;    <a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a463baf545246fea9718664d933ffe66f">Call</a>-&gt;setDoesNotThrow();</div>
<div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;    <a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a463baf545246fea9718664d933ffe66f">Call</a>-&gt;setTailCall();</div>
<div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160; </div>
<div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Inserting new Retain: &quot;</span> &lt;&lt; *Call</div>
<div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;                      &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;                         <span class="stringliteral">&quot;At insertion point: &quot;</span></div>
<div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;                      &lt;&lt; *InsertPt &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;  }</div>
<div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *InsertPt : RetainsToMove.<a class="code" href="structllvm_1_1objcarc_1_1RRInfo.html#aed932d067cad4f2d928df9bee21af52a">ReverseInsertPts</a>) {</div>
<div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *MyArg = ArgTy == ParamTy ? <a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a> :</div>
<div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;                   <span class="keyword">new</span> <a class="code" href="classllvm_1_1BitCastInst.html">BitCastInst</a>(<a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>, ParamTy, <span class="stringliteral">&quot;&quot;</span>, InsertPt);</div>
<div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;    <a class="code" href="classllvm_1_1Function.html">Function</a> *Decl = EP.<a class="code" href="classllvm_1_1objcarc_1_1ARCRuntimeEntryPoints.html#a565749e827bad7cb5bd425ac7ffd9414">get</a>(<a class="code" href="namespacellvm_1_1objcarc.html#aa4b95e1b6c59a75f558794b32b644febab8e7b465df7c5979dc731d06e84ce2cf">ARCRuntimeEntryPointKind::Release</a>);</div>
<div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;OperandBundleDef, 1&gt;</a> BundleList;</div>
<div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;    addOpBundleForFunclet(InsertPt-&gt;<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>(), BundleList);</div>
<div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;    <a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *<a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a463baf545246fea9718664d933ffe66f">Call</a> = <a class="code" href="classllvm_1_1CallInst.html#a850d8262cd900958b3153c4aa080b2bb">CallInst::Create</a>(Decl, MyArg, BundleList, <span class="stringliteral">&quot;&quot;</span>, InsertPt);</div>
<div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;    <span class="comment">// Attach a clang.imprecise_release metadata tag, if appropriate.</span></div>
<div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1MDNode.html">MDNode</a> *M = ReleasesToMove.<a class="code" href="structllvm_1_1objcarc_1_1RRInfo.html#ab976ce410e551d37ce2f43177bb96995">ReleaseMetadata</a>)</div>
<div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;      <a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a463baf545246fea9718664d933ffe66f">Call</a>-&gt;setMetadata(MDKindCache.<a class="code" href="classllvm_1_1objcarc_1_1ARCMDKindCache.html#a062cf10f8ea9fc45291d700b2e8da648">get</a>(<a class="code" href="namespacellvm_1_1objcarc.html#a749ec59e4812b00a3cf7e7036fb39c06ab1ec2e3fd61b7a763d9173e07016906c">ARCMDKindID::ImpreciseRelease</a>), M);</div>
<div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;    <a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a463baf545246fea9718664d933ffe66f">Call</a>-&gt;setDoesNotThrow();</div>
<div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;    <span class="keywordflow">if</span> (ReleasesToMove.<a class="code" href="structllvm_1_1objcarc_1_1RRInfo.html#ac9afa1dadab0e6367ce487573142be4e">IsTailCallRelease</a>)</div>
<div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;      <a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a463baf545246fea9718664d933ffe66f">Call</a>-&gt;setTailCall();</div>
<div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160; </div>
<div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Inserting new Release: &quot;</span> &lt;&lt; *Call</div>
<div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;                      &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;                         <span class="stringliteral">&quot;At insertion point: &quot;</span></div>
<div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;                      &lt;&lt; *InsertPt &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;  }</div>
<div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160; </div>
<div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;  <span class="comment">// Delete the original retain and release calls.</span></div>
<div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *OrigRetain : RetainsToMove.<a class="code" href="structllvm_1_1objcarc_1_1RRInfo.html#a937b2f49aeebc9752e9ff219acbd93f0">Calls</a>) {</div>
<div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;    Retains.<a class="code" href="classllvm_1_1BlotMapVector.html#a447fee52003ca0e778c9fa372c3143d1">blot</a>(OrigRetain);</div>
<div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;    DeadInsts.push_back(OrigRetain);</div>
<div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Deleting retain: &quot;</span> &lt;&lt; *OrigRetain &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;  }</div>
<div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *OrigRelease : ReleasesToMove.<a class="code" href="structllvm_1_1objcarc_1_1RRInfo.html#a937b2f49aeebc9752e9ff219acbd93f0">Calls</a>) {</div>
<div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;    Releases.<a class="code" href="classllvm_1_1DenseMapBase.html#a1eb8504bab5f794778d82db6ac829923">erase</a>(OrigRelease);</div>
<div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;    DeadInsts.push_back(OrigRelease);</div>
<div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Deleting release: &quot;</span> &lt;&lt; *OrigRelease &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;  }</div>
<div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;}</div>
<div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160; </div>
<div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;<span class="keywordtype">bool</span> ObjCARCOpt::PairUpRetainsAndReleases(</div>
<div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;    <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;const BasicBlock *, BBState&gt;</a> &amp;BBStates,</div>
<div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;    <a class="code" href="classllvm_1_1BlotMapVector.html">BlotMapVector&lt;Value *, RRInfo&gt;</a> &amp;Retains,</div>
<div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;    <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;Value *, RRInfo&gt;</a> &amp;Releases, <a class="code" href="classllvm_1_1Module.html">Module</a> *M,</div>
<div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Retain,</div>
<div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;    <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;Instruction *&gt;</a> &amp;DeadInsts, <a class="code" href="structllvm_1_1objcarc_1_1RRInfo.html">RRInfo</a> &amp;RetainsToMove,</div>
<div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;    <a class="code" href="structllvm_1_1objcarc_1_1RRInfo.html">RRInfo</a> &amp;ReleasesToMove, <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>, <span class="keywordtype">bool</span> KnownSafe,</div>
<div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;    <span class="keywordtype">bool</span> &amp;AnyPairsCompletelyEliminated) {</div>
<div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;  <span class="comment">// If a pair happens in a region where it is known that the reference count</span></div>
<div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;  <span class="comment">// is already incremented, we can similarly ignore possible decrements unless</span></div>
<div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;  <span class="comment">// we are dealing with a retainable object with multiple provenance sources.</span></div>
<div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;  <span class="keywordtype">bool</span> KnownSafeTD = <span class="keyword">true</span>, KnownSafeBU = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;  <span class="keywordtype">bool</span> CFGHazardAfflicted = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160; </div>
<div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;  <span class="comment">// Connect the dots between the top-down-collected RetainsToMove and</span></div>
<div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;  <span class="comment">// bottom-up-collected ReleasesToMove to form sets of related calls.</span></div>
<div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;  <span class="comment">// This is an iterative process so that we connect multiple releases</span></div>
<div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;  <span class="comment">// to multiple retains if needed.</span></div>
<div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;  <span class="keywordtype">unsigned</span> OldDelta = 0;</div>
<div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;  <span class="keywordtype">unsigned</span> NewDelta = 0;</div>
<div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;  <span class="keywordtype">unsigned</span> OldCount = 0;</div>
<div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;  <span class="keywordtype">unsigned</span> NewCount = 0;</div>
<div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;  <span class="keywordtype">bool</span> FirstRelease = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Instruction *, 4&gt;</a> NewRetains{<a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2aafece4245269582cb2f1009d4fb52047">Retain</a>};;) {</div>
<div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Instruction *, 4&gt;</a> NewReleases;</div>
<div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *NewRetain : NewRetains) {</div>
<div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;      <span class="keyword">auto</span> It = Retains.<a class="code" href="classllvm_1_1BlotMapVector.html#a73e3ded01b65ddc78347be07e1a87a29">find</a>(NewRetain);</div>
<div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(It != Retains.<a class="code" href="classllvm_1_1BlotMapVector.html#a858918a4b48c7fcb780817c1709c9d3f">end</a>());</div>
<div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;      <span class="keyword">const</span> <a class="code" href="structllvm_1_1objcarc_1_1RRInfo.html">RRInfo</a> &amp;NewRetainRRI = It-&gt;second;</div>
<div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;      KnownSafeTD &amp;= NewRetainRRI.<a class="code" href="structllvm_1_1objcarc_1_1RRInfo.html#a5770bc64392d64b9900226f925521b94">KnownSafe</a>;</div>
<div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;      CFGHazardAfflicted |= NewRetainRRI.<a class="code" href="structllvm_1_1objcarc_1_1RRInfo.html#ac287dbb01fd38c21bbf0dafdbcfcb8cf">CFGHazardAfflicted</a>;</div>
<div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *NewRetainRelease : NewRetainRRI.<a class="code" href="structllvm_1_1objcarc_1_1RRInfo.html#a937b2f49aeebc9752e9ff219acbd93f0">Calls</a>) {</div>
<div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;        <span class="keyword">auto</span> Jt = Releases.<a class="code" href="classllvm_1_1DenseMapBase.html#a0c047f127ed4380a6f383d70bec4eb94">find</a>(NewRetainRelease);</div>
<div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;        <span class="keywordflow">if</span> (Jt == Releases.<a class="code" href="classllvm_1_1DenseMapBase.html#a65520b9c67759099e313d0f4e7b5ff9e">end</a>())</div>
<div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;        <span class="keyword">const</span> <a class="code" href="structllvm_1_1objcarc_1_1RRInfo.html">RRInfo</a> &amp;NewRetainReleaseRRI = Jt-&gt;second;</div>
<div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160; </div>
<div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;        <span class="comment">// If the release does not have a reference to the retain as well,</span></div>
<div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;        <span class="comment">// something happened which is unaccounted for. Do not do anything.</span></div>
<div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;        <span class="comment">// This can happen if we catch an additive overflow during path count</span></div>
<div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;        <span class="comment">// merging.</span></div>
<div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;        <span class="keywordflow">if</span> (!NewRetainReleaseRRI.<a class="code" href="structllvm_1_1objcarc_1_1RRInfo.html#a937b2f49aeebc9752e9ff219acbd93f0">Calls</a>.count(NewRetain))</div>
<div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160; </div>
<div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;        <span class="keywordflow">if</span> (ReleasesToMove.<a class="code" href="structllvm_1_1objcarc_1_1RRInfo.html#a937b2f49aeebc9752e9ff219acbd93f0">Calls</a>.insert(NewRetainRelease).second) {</div>
<div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;          <span class="comment">// If we overflow when we compute the path count, don&#39;t remove/move</span></div>
<div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;          <span class="comment">// anything.</span></div>
<div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;          <span class="keyword">const</span> BBState &amp;NRRBBState = BBStates[NewRetainRelease-&gt;<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>()];</div>
<div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;          <span class="keywordtype">unsigned</span> PathCount = BBState::OverflowOccurredValue;</div>
<div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;          <span class="keywordflow">if</span> (NRRBBState.GetAllPathCountWithOverflow(PathCount))</div>
<div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;          <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(PathCount != BBState::OverflowOccurredValue &amp;&amp;</div>
<div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;                 <span class="stringliteral">&quot;PathCount at this point can not be &quot;</span></div>
<div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;                 <span class="stringliteral">&quot;OverflowOccurredValue.&quot;</span>);</div>
<div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;          OldDelta -= PathCount;</div>
<div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160; </div>
<div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;          <span class="comment">// Merge the ReleaseMetadata and IsTailCallRelease values.</span></div>
<div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;          <span class="keywordflow">if</span> (FirstRelease) {</div>
<div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;            ReleasesToMove.<a class="code" href="structllvm_1_1objcarc_1_1RRInfo.html#ab976ce410e551d37ce2f43177bb96995">ReleaseMetadata</a> =</div>
<div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;              NewRetainReleaseRRI.<a class="code" href="structllvm_1_1objcarc_1_1RRInfo.html#ab976ce410e551d37ce2f43177bb96995">ReleaseMetadata</a>;</div>
<div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;            ReleasesToMove.<a class="code" href="structllvm_1_1objcarc_1_1RRInfo.html#ac9afa1dadab0e6367ce487573142be4e">IsTailCallRelease</a> =</div>
<div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;              NewRetainReleaseRRI.<a class="code" href="structllvm_1_1objcarc_1_1RRInfo.html#ac9afa1dadab0e6367ce487573142be4e">IsTailCallRelease</a>;</div>
<div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;            FirstRelease = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;          } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;            <span class="keywordflow">if</span> (ReleasesToMove.<a class="code" href="structllvm_1_1objcarc_1_1RRInfo.html#ab976ce410e551d37ce2f43177bb96995">ReleaseMetadata</a> !=</div>
<div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;                NewRetainReleaseRRI.<a class="code" href="structllvm_1_1objcarc_1_1RRInfo.html#ab976ce410e551d37ce2f43177bb96995">ReleaseMetadata</a>)</div>
<div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;              ReleasesToMove.<a class="code" href="structllvm_1_1objcarc_1_1RRInfo.html#ab976ce410e551d37ce2f43177bb96995">ReleaseMetadata</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;            <span class="keywordflow">if</span> (ReleasesToMove.<a class="code" href="structllvm_1_1objcarc_1_1RRInfo.html#ac9afa1dadab0e6367ce487573142be4e">IsTailCallRelease</a> !=</div>
<div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;                NewRetainReleaseRRI.<a class="code" href="structllvm_1_1objcarc_1_1RRInfo.html#ac9afa1dadab0e6367ce487573142be4e">IsTailCallRelease</a>)</div>
<div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;              ReleasesToMove.<a class="code" href="structllvm_1_1objcarc_1_1RRInfo.html#ac9afa1dadab0e6367ce487573142be4e">IsTailCallRelease</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;          }</div>
<div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160; </div>
<div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;          <span class="comment">// Collect the optimal insertion points.</span></div>
<div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;          <span class="keywordflow">if</span> (!KnownSafe)</div>
<div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;            <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *RIP : NewRetainReleaseRRI.<a class="code" href="structllvm_1_1objcarc_1_1RRInfo.html#aed932d067cad4f2d928df9bee21af52a">ReverseInsertPts</a>) {</div>
<div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;              <span class="keywordflow">if</span> (ReleasesToMove.<a class="code" href="structllvm_1_1objcarc_1_1RRInfo.html#aed932d067cad4f2d928df9bee21af52a">ReverseInsertPts</a>.insert(RIP).second) {</div>
<div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;                <span class="comment">// If we overflow when we compute the path count, don&#39;t</span></div>
<div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;                <span class="comment">// remove/move anything.</span></div>
<div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;                <span class="keyword">const</span> BBState &amp;RIPBBState = BBStates[RIP-&gt;<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>()];</div>
<div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;                PathCount = BBState::OverflowOccurredValue;</div>
<div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;                <span class="keywordflow">if</span> (RIPBBState.GetAllPathCountWithOverflow(PathCount))</div>
<div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;                  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;                <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(PathCount != BBState::OverflowOccurredValue &amp;&amp;</div>
<div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;                       <span class="stringliteral">&quot;PathCount at this point can not be &quot;</span></div>
<div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;                       <span class="stringliteral">&quot;OverflowOccurredValue.&quot;</span>);</div>
<div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;                NewDelta -= PathCount;</div>
<div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;              }</div>
<div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;            }</div>
<div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;          NewReleases.push_back(NewRetainRelease);</div>
<div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;        }</div>
<div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;      }</div>
<div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;    }</div>
<div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;    NewRetains.<a class="code" href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">clear</a>();</div>
<div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;    <span class="keywordflow">if</span> (NewReleases.empty()) <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160; </div>
<div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;    <span class="comment">// Back the other way.</span></div>
<div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *NewRelease : NewReleases) {</div>
<div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;      <span class="keyword">auto</span> It = Releases.<a class="code" href="classllvm_1_1DenseMapBase.html#a0c047f127ed4380a6f383d70bec4eb94">find</a>(NewRelease);</div>
<div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(It != Releases.<a class="code" href="classllvm_1_1DenseMapBase.html#a65520b9c67759099e313d0f4e7b5ff9e">end</a>());</div>
<div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;      <span class="keyword">const</span> <a class="code" href="structllvm_1_1objcarc_1_1RRInfo.html">RRInfo</a> &amp;NewReleaseRRI = It-&gt;second;</div>
<div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;      KnownSafeBU &amp;= NewReleaseRRI.<a class="code" href="structllvm_1_1objcarc_1_1RRInfo.html#a5770bc64392d64b9900226f925521b94">KnownSafe</a>;</div>
<div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;      CFGHazardAfflicted |= NewReleaseRRI.<a class="code" href="structllvm_1_1objcarc_1_1RRInfo.html#ac287dbb01fd38c21bbf0dafdbcfcb8cf">CFGHazardAfflicted</a>;</div>
<div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *NewReleaseRetain : NewReleaseRRI.<a class="code" href="structllvm_1_1objcarc_1_1RRInfo.html#a937b2f49aeebc9752e9ff219acbd93f0">Calls</a>) {</div>
<div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;        <span class="keyword">auto</span> Jt = Retains.<a class="code" href="classllvm_1_1BlotMapVector.html#a73e3ded01b65ddc78347be07e1a87a29">find</a>(NewReleaseRetain);</div>
<div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;        <span class="keywordflow">if</span> (Jt == Retains.<a class="code" href="classllvm_1_1BlotMapVector.html#a858918a4b48c7fcb780817c1709c9d3f">end</a>())</div>
<div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;        <span class="keyword">const</span> <a class="code" href="structllvm_1_1objcarc_1_1RRInfo.html">RRInfo</a> &amp;NewReleaseRetainRRI = Jt-&gt;second;</div>
<div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160; </div>
<div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;        <span class="comment">// If the retain does not have a reference to the release as well,</span></div>
<div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;        <span class="comment">// something happened which is unaccounted for. Do not do anything.</span></div>
<div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;        <span class="comment">// This can happen if we catch an additive overflow during path count</span></div>
<div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;        <span class="comment">// merging.</span></div>
<div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;        <span class="keywordflow">if</span> (!NewReleaseRetainRRI.<a class="code" href="structllvm_1_1objcarc_1_1RRInfo.html#a937b2f49aeebc9752e9ff219acbd93f0">Calls</a>.count(NewRelease))</div>
<div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160; </div>
<div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;        <span class="keywordflow">if</span> (RetainsToMove.<a class="code" href="structllvm_1_1objcarc_1_1RRInfo.html#a937b2f49aeebc9752e9ff219acbd93f0">Calls</a>.insert(NewReleaseRetain).second) {</div>
<div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;          <span class="comment">// If we overflow when we compute the path count, don&#39;t remove/move</span></div>
<div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;          <span class="comment">// anything.</span></div>
<div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;          <span class="keyword">const</span> BBState &amp;NRRBBState = BBStates[NewReleaseRetain-&gt;<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>()];</div>
<div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;          <span class="keywordtype">unsigned</span> PathCount = BBState::OverflowOccurredValue;</div>
<div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;          <span class="keywordflow">if</span> (NRRBBState.GetAllPathCountWithOverflow(PathCount))</div>
<div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;          <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(PathCount != BBState::OverflowOccurredValue &amp;&amp;</div>
<div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;                 <span class="stringliteral">&quot;PathCount at this point can not be &quot;</span></div>
<div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;                 <span class="stringliteral">&quot;OverflowOccurredValue.&quot;</span>);</div>
<div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;          OldDelta += PathCount;</div>
<div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;          OldCount += PathCount;</div>
<div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160; </div>
<div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;          <span class="comment">// Collect the optimal insertion points.</span></div>
<div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;          <span class="keywordflow">if</span> (!KnownSafe)</div>
<div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;            <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *RIP : NewReleaseRetainRRI.<a class="code" href="structllvm_1_1objcarc_1_1RRInfo.html#aed932d067cad4f2d928df9bee21af52a">ReverseInsertPts</a>) {</div>
<div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;              <span class="keywordflow">if</span> (RetainsToMove.<a class="code" href="structllvm_1_1objcarc_1_1RRInfo.html#aed932d067cad4f2d928df9bee21af52a">ReverseInsertPts</a>.insert(RIP).second) {</div>
<div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;                <span class="comment">// If we overflow when we compute the path count, don&#39;t</span></div>
<div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;                <span class="comment">// remove/move anything.</span></div>
<div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;                <span class="keyword">const</span> BBState &amp;RIPBBState = BBStates[RIP-&gt;<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>()];</div>
<div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160; </div>
<div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;                PathCount = BBState::OverflowOccurredValue;</div>
<div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;                <span class="keywordflow">if</span> (RIPBBState.GetAllPathCountWithOverflow(PathCount))</div>
<div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;                  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;                <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(PathCount != BBState::OverflowOccurredValue &amp;&amp;</div>
<div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;                       <span class="stringliteral">&quot;PathCount at this point can not be &quot;</span></div>
<div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;                       <span class="stringliteral">&quot;OverflowOccurredValue.&quot;</span>);</div>
<div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;                NewDelta += PathCount;</div>
<div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;                NewCount += PathCount;</div>
<div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;              }</div>
<div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;            }</div>
<div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;          NewRetains.push_back(NewReleaseRetain);</div>
<div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;        }</div>
<div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;      }</div>
<div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;    }</div>
<div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;    <span class="keywordflow">if</span> (NewRetains.empty()) <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;  }</div>
<div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160; </div>
<div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;  <span class="comment">// We can only remove pointers if we are known safe in both directions.</span></div>
<div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;  <span class="keywordtype">bool</span> UnconditionallySafe = KnownSafeTD &amp;&amp; KnownSafeBU;</div>
<div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;  <span class="keywordflow">if</span> (UnconditionallySafe) {</div>
<div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;    RetainsToMove.<a class="code" href="structllvm_1_1objcarc_1_1RRInfo.html#aed932d067cad4f2d928df9bee21af52a">ReverseInsertPts</a>.clear();</div>
<div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;    ReleasesToMove.<a class="code" href="structllvm_1_1objcarc_1_1RRInfo.html#aed932d067cad4f2d928df9bee21af52a">ReverseInsertPts</a>.clear();</div>
<div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;    NewCount = 0;</div>
<div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;    <span class="comment">// Determine whether the new insertion points we computed preserve the</span></div>
<div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;    <span class="comment">// balance of retain and release calls through the program.</span></div>
<div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;    <span class="comment">// TODO: If the fully aggressive solution isn&#39;t valid, try to find a</span></div>
<div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;    <span class="comment">// less aggressive solution which is.</span></div>
<div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160;    <span class="keywordflow">if</span> (NewDelta != 0)</div>
<div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160; </div>
<div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;    <span class="comment">// At this point, we are not going to remove any RR pairs, but we still are</span></div>
<div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;    <span class="comment">// able to move RR pairs. If one of our pointers is afflicted with</span></div>
<div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;    <span class="comment">// CFGHazards, we cannot perform such code motion so exit early.</span></div>
<div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> WillPerformCodeMotion =</div>
<div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;        !RetainsToMove.<a class="code" href="structllvm_1_1objcarc_1_1RRInfo.html#aed932d067cad4f2d928df9bee21af52a">ReverseInsertPts</a>.empty() ||</div>
<div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;        !ReleasesToMove.<a class="code" href="structllvm_1_1objcarc_1_1RRInfo.html#aed932d067cad4f2d928df9bee21af52a">ReverseInsertPts</a>.empty();</div>
<div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;    <span class="keywordflow">if</span> (CFGHazardAfflicted &amp;&amp; WillPerformCodeMotion)</div>
<div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;  }</div>
<div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160; </div>
<div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;  <span class="comment">// Determine whether the original call points are balanced in the retain and</span></div>
<div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;  <span class="comment">// release calls through the program. If not, conservatively don&#39;t touch</span></div>
<div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;  <span class="comment">// them.</span></div>
<div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;  <span class="comment">// TODO: It&#39;s theoretically possible to do code motion in this case, as</span></div>
<div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;  <span class="comment">// long as the existing imbalances are maintained.</span></div>
<div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;  <span class="keywordflow">if</span> (OldDelta != 0)</div>
<div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160; </div>
<div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160;  Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(OldCount != 0 &amp;&amp; <span class="stringliteral">&quot;Unreachable code?&quot;</span>);</div>
<div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160;  NumRRs += OldCount - NewCount;</div>
<div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;  <span class="comment">// Set to true if we completely removed any RR pairs.</span></div>
<div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;  AnyPairsCompletelyEliminated = NewCount == 0;</div>
<div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160; </div>
<div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;  <span class="comment">// We can move calls!</span></div>
<div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;}</div>
<div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;<span class="comment">/// Identify pairings between the retains and releases, and delete and/or move</span></div>
<div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160;<span class="comment">/// them.</span></div>
<div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> ObjCARCOpt::PerformCodePlacement(</div>
<div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160;    <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;const BasicBlock *, BBState&gt;</a> &amp;BBStates,</div>
<div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160;    <a class="code" href="classllvm_1_1BlotMapVector.html">BlotMapVector&lt;Value *, RRInfo&gt;</a> &amp;Retains,</div>
<div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160;    <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;Value *, RRInfo&gt;</a> &amp;Releases, <a class="code" href="classllvm_1_1Module.html">Module</a> *M) {</div>
<div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;\n== ObjCARCOpt::PerformCodePlacement ==\n&quot;</span>);</div>
<div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160; </div>
<div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160;  <span class="keywordtype">bool</span> AnyPairsCompletelyEliminated = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Instruction *, 8&gt;</a> DeadInsts;</div>
<div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160; </div>
<div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;  <span class="comment">// Visit each retain.</span></div>
<div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BlotMapVector.html#a912153f3f439c544fff1d30b80d27659">BlotMapVector&lt;Value *, RRInfo&gt;::const_iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = Retains.<a class="code" href="classllvm_1_1BlotMapVector.html#afe9bb2d89b79c53645c7adef310b66f9">begin</a>(),</div>
<div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;                                                      <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = Retains.<a class="code" href="classllvm_1_1BlotMapVector.html#a858918a4b48c7fcb780817c1709c9d3f">end</a>();</div>
<div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;       <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *V = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;first;</div>
<div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160;    <span class="keywordflow">if</span> (!V) <span class="keywordflow">continue</span>; <span class="comment">// blotted</span></div>
<div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160; </div>
<div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2aafece4245269582cb2f1009d4fb52047">Retain</a> = cast&lt;Instruction&gt;(V);</div>
<div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160; </div>
<div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Visiting: &quot;</span> &lt;&lt; *Retain &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160; </div>
<div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a> = <a class="code" href="namespacellvm_1_1objcarc.html#a89850f2a3bb39efa5d19a3e75bd14ea2">GetArgRCIdentityRoot</a>(Retain);</div>
<div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160; </div>
<div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160;    <span class="comment">// If the object being released is in static or stack storage, we know it&#39;s</span></div>
<div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160;    <span class="comment">// not being managed by ObjC reference counting, so we can delete pairs</span></div>
<div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;    <span class="comment">// regardless of what possible decrements or uses lie between them.</span></div>
<div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;    <span class="keywordtype">bool</span> KnownSafe = isa&lt;Constant&gt;(<a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>) || isa&lt;AllocaInst&gt;(<a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>);</div>
<div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160; </div>
<div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;    <span class="comment">// A constant pointer can&#39;t be pointing to an object on the heap. It may</span></div>
<div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160;    <span class="comment">// be reference-counted, but it won&#39;t be deleted.</span></div>
<div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a> *LI = dyn_cast&lt;LoadInst&gt;(<a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>))</div>
<div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a> *GV =</div>
<div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;            dyn_cast&lt;GlobalVariable&gt;(</div>
<div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;              <a class="code" href="namespacellvm_1_1objcarc.html#aa72ef5ef299b7531b84aafcf9c1f755f">GetRCIdentityRoot</a>(LI-&gt;getPointerOperand())))</div>
<div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;        <span class="keywordflow">if</span> (GV-&gt;isConstant())</div>
<div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;          KnownSafe = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160; </div>
<div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;    <span class="comment">// Connect the dots between the top-down-collected RetainsToMove and</span></div>
<div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;    <span class="comment">// bottom-up-collected ReleasesToMove to form sets of related calls.</span></div>
<div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160;    <a class="code" href="structllvm_1_1objcarc_1_1RRInfo.html">RRInfo</a> RetainsToMove, ReleasesToMove;</div>
<div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160; </div>
<div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;    <span class="keywordtype">bool</span> PerformMoveCalls = PairUpRetainsAndReleases(</div>
<div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;        BBStates, Retains, Releases, M, Retain, DeadInsts,</div>
<div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160;        RetainsToMove, ReleasesToMove, <a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>, KnownSafe,</div>
<div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;        AnyPairsCompletelyEliminated);</div>
<div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160; </div>
<div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160;    <span class="keywordflow">if</span> (PerformMoveCalls) {</div>
<div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160;      <span class="comment">// Ok, everything checks out and we&#39;re all set. Let&#39;s move/delete some</span></div>
<div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160;      <span class="comment">// code!</span></div>
<div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160;      MoveCalls(<a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>, RetainsToMove, ReleasesToMove,</div>
<div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160;                Retains, Releases, DeadInsts, M);</div>
<div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160;    }</div>
<div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;  }</div>
<div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160; </div>
<div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160;  <span class="comment">// Now that we&#39;re done moving everything, we can delete the newly dead</span></div>
<div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;  <span class="comment">// instructions, as we no longer need them as insert points.</span></div>
<div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;  <span class="keywordflow">while</span> (!DeadInsts.empty())</div>
<div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;    <a class="code" href="namespacellvm_1_1objcarc.html#af4e05bf48a81b884e707efa650560fbf">EraseInstruction</a>(DeadInsts.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a0c8ffe664a36e30d49c84d0aded2fe08">pop_back_val</a>());</div>
<div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160; </div>
<div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;  <span class="keywordflow">return</span> AnyPairsCompletelyEliminated;</div>
<div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;}</div>
<div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;<span class="comment">/// Weak pointer optimizations.</span></div>
<div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> ObjCARCOpt::OptimizeWeakCalls(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>) {</div>
<div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;\n== ObjCARCOpt::OptimizeWeakCalls ==\n&quot;</span>);</div>
<div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160; </div>
<div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160;  <span class="comment">// First, do memdep-style RLE and S2L optimizations. We can&#39;t use memdep</span></div>
<div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;  <span class="comment">// itself because it uses AliasAnalysis and we need to do provenance</span></div>
<div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160;  <span class="comment">// queries instead.</span></div>
<div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1InstIterator.html">inst_iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = <a class="code" href="namespacellvm.html#a49a219f3fe3d7a6cc07c49a1ea766d6d">inst_begin</a>(&amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>), <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = <a class="code" href="namespacellvm.html#a945cded5463e0ccd3cf5a6ac80542a94">inst_end</a>(&amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>; ) {</div>
<div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Inst = &amp;*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>++;</div>
<div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160; </div>
<div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Visiting: &quot;</span> &lt;&lt; *Inst &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160; </div>
<div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;    <a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2">ARCInstKind</a> <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5ada3eb06ada644390db065d37b3fd87ac">Class</a> = <a class="code" href="namespacellvm_1_1objcarc.html#a86cdbdf3773be3c67bc193b473b75708">GetBasicARCInstKind</a>(Inst);</div>
<div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;    <span class="keywordflow">if</span> (Class != <a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2a63bc8a0dc53d47fec308f2a7a9b99562">ARCInstKind::LoadWeak</a> &amp;&amp;</div>
<div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;        Class != <a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2a373746ca100ea4fff46f2b4046984e94">ARCInstKind::LoadWeakRetained</a>)</div>
<div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160; </div>
<div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;    <span class="comment">// Delete objc_loadWeak calls with no users.</span></div>
<div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;    <span class="keywordflow">if</span> (Class == <a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2a63bc8a0dc53d47fec308f2a7a9b99562">ARCInstKind::LoadWeak</a> &amp;&amp; Inst-&gt;<a class="code" href="classllvm_1_1Value.html#a9d7de807ebdfe1819df3ff6cb0f16158">use_empty</a>()) {</div>
<div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160;      Inst-&gt;<a class="code" href="classllvm_1_1Instruction.html#ae6b978645b8ac72d1a35e1298ffdd4f0">eraseFromParent</a>();</div>
<div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160;      Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160;    }</div>
<div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160; </div>
<div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;    <span class="comment">// TODO: For now, just look for an earlier available version of this value</span></div>
<div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;    <span class="comment">// within the same block. Theoretically, we could do memdep-style non-local</span></div>
<div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;    <span class="comment">// analysis too, but that would want caching. A better approach would be to</span></div>
<div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;    <span class="comment">// use the technique that EarlyCSE uses.</span></div>
<div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160;    <a class="code" href="classllvm_1_1InstIterator.html">inst_iterator</a> Current = std::prev(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *CurrentBB = &amp;*Current.<a class="code" href="classllvm_1_1InstIterator.html#a480b0e5fb6c8c298a2368f7c44ed8580">getBasicBlockIterator</a>();</div>
<div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html#a98c0a84a5dfa8bce341c829709f171e5">BasicBlock::iterator</a> <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a> = CurrentBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>(),</div>
<div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;                              J = Current.<a class="code" href="classllvm_1_1InstIterator.html#a21bb107a081ffcb030e272d14a0f1816">getInstructionIterator</a>();</div>
<div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;         J != <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>; --J) {</div>
<div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160;      <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *EarlierInst = &amp;*std::prev(J);</div>
<div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160;      <a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2">ARCInstKind</a> EarlierClass = <a class="code" href="namespacellvm_1_1objcarc.html#a92ed436b80d7666f785e46f7e9aa3e82">GetARCInstKind</a>(EarlierInst);</div>
<div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;      <span class="keywordflow">switch</span> (EarlierClass) {</div>
<div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2a63bc8a0dc53d47fec308f2a7a9b99562">ARCInstKind::LoadWeak</a>:</div>
<div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2a373746ca100ea4fff46f2b4046984e94">ARCInstKind::LoadWeakRetained</a>: {</div>
<div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;        <span class="comment">// If this is loading from the same pointer, replace this load&#39;s value</span></div>
<div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160;        <span class="comment">// with that one.</span></div>
<div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160;        <a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *<a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a463baf545246fea9718664d933ffe66f">Call</a> = cast&lt;CallInst&gt;(Inst);</div>
<div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;        <a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *EarlierCall = cast&lt;CallInst&gt;(EarlierInst);</div>
<div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a> = <a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a463baf545246fea9718664d933ffe66f">Call</a>-&gt;getArgOperand(0);</div>
<div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *EarlierArg = EarlierCall-&gt;<a class="code" href="classllvm_1_1CallBase.html#ab2caa29167597390ab2fc3cf30d70389">getArgOperand</a>(0);</div>
<div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;        <span class="keywordflow">switch</span> (PA.<a class="code" href="classllvm_1_1objcarc_1_1ProvenanceAnalysis.html#ae4550aa670b700b0c46acc18b2d6250f">getAA</a>()-&gt;<a class="code" href="classllvm_1_1AAResults.html#a5c70adc73969ef8175ad49c101291cb4">alias</a>(<a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>, EarlierArg)) {</div>
<div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1AliasResult.html#a8d3de277fb70fa515efac2db2cfe9d57ac1a99a1af9a4778a61e5cc3e1d622180">AliasResult::MustAlias</a>:</div>
<div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;          Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;          <span class="comment">// If the load has a builtin retain, insert a plain retain for it.</span></div>
<div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160;          <span class="keywordflow">if</span> (Class == <a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2a373746ca100ea4fff46f2b4046984e94">ARCInstKind::LoadWeakRetained</a>) {</div>
<div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;            <a class="code" href="classllvm_1_1Function.html">Function</a> *Decl = EP.<a class="code" href="classllvm_1_1objcarc_1_1ARCRuntimeEntryPoints.html#a565749e827bad7cb5bd425ac7ffd9414">get</a>(<a class="code" href="namespacellvm_1_1objcarc.html#aa4b95e1b6c59a75f558794b32b644febaafece4245269582cb2f1009d4fb52047">ARCRuntimeEntryPointKind::Retain</a>);</div>
<div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160;            <a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *CI = <a class="code" href="classllvm_1_1CallInst.html#a850d8262cd900958b3153c4aa080b2bb">CallInst::Create</a>(Decl, EarlierCall, <span class="stringliteral">&quot;&quot;</span>, Call);</div>
<div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160;            CI-&gt;<a class="code" href="classllvm_1_1CallInst.html#acff66a4cb0efaafb728848edf097c75f">setTailCall</a>();</div>
<div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160;          }</div>
<div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160;          <span class="comment">// Zap the fully redundant load.</span></div>
<div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160;          <a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a463baf545246fea9718664d933ffe66f">Call</a>-&gt;replaceAllUsesWith(EarlierCall);</div>
<div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160;          <a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a463baf545246fea9718664d933ffe66f">Call</a>-&gt;eraseFromParent();</div>
<div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160;          <span class="keywordflow">goto</span> clobbered;</div>
<div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1AliasResult.html#a8d3de277fb70fa515efac2db2cfe9d57a0916b614598c673c1e6a59c7312a1409">AliasResult::MayAlias</a>:</div>
<div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1AliasResult.html#a8d3de277fb70fa515efac2db2cfe9d57a9e724bc94de38c6ca77508f19c246c0c">AliasResult::PartialAlias</a>:</div>
<div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160;          <span class="keywordflow">goto</span> clobbered;</div>
<div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1AliasResult.html#a8d3de277fb70fa515efac2db2cfe9d57a863ee317b92588eb2d6878af9fc98922">AliasResult::NoAlias</a>:</div>
<div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160;        }</div>
<div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;      }</div>
<div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2a4b72e11620e2360a97726a1554da02d2">ARCInstKind::StoreWeak</a>:</div>
<div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2a60d8a1ea9604d54c2d3ea2c9cc065980">ARCInstKind::InitWeak</a>: {</div>
<div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160;        <span class="comment">// If this is storing to the same pointer and has the same size etc.</span></div>
<div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160;        <span class="comment">// replace this load&#39;s value with the stored value.</span></div>
<div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160;        <a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *<a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a463baf545246fea9718664d933ffe66f">Call</a> = cast&lt;CallInst&gt;(Inst);</div>
<div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160;        <a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *EarlierCall = cast&lt;CallInst&gt;(EarlierInst);</div>
<div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a> = <a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a463baf545246fea9718664d933ffe66f">Call</a>-&gt;getArgOperand(0);</div>
<div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *EarlierArg = EarlierCall-&gt;<a class="code" href="classllvm_1_1CallBase.html#ab2caa29167597390ab2fc3cf30d70389">getArgOperand</a>(0);</div>
<div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160;        <span class="keywordflow">switch</span> (PA.<a class="code" href="classllvm_1_1objcarc_1_1ProvenanceAnalysis.html#ae4550aa670b700b0c46acc18b2d6250f">getAA</a>()-&gt;<a class="code" href="classllvm_1_1AAResults.html#a5c70adc73969ef8175ad49c101291cb4">alias</a>(<a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>, EarlierArg)) {</div>
<div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1AliasResult.html#a8d3de277fb70fa515efac2db2cfe9d57ac1a99a1af9a4778a61e5cc3e1d622180">AliasResult::MustAlias</a>:</div>
<div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160;          Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;          <span class="comment">// If the load has a builtin retain, insert a plain retain for it.</span></div>
<div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160;          <span class="keywordflow">if</span> (Class == <a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2a373746ca100ea4fff46f2b4046984e94">ARCInstKind::LoadWeakRetained</a>) {</div>
<div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160;            <a class="code" href="classllvm_1_1Function.html">Function</a> *Decl = EP.<a class="code" href="classllvm_1_1objcarc_1_1ARCRuntimeEntryPoints.html#a565749e827bad7cb5bd425ac7ffd9414">get</a>(<a class="code" href="namespacellvm_1_1objcarc.html#aa4b95e1b6c59a75f558794b32b644febaafece4245269582cb2f1009d4fb52047">ARCRuntimeEntryPointKind::Retain</a>);</div>
<div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160;            <a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *CI = <a class="code" href="classllvm_1_1CallInst.html#a850d8262cd900958b3153c4aa080b2bb">CallInst::Create</a>(Decl, EarlierCall, <span class="stringliteral">&quot;&quot;</span>, Call);</div>
<div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;            CI-&gt;<a class="code" href="classllvm_1_1CallInst.html#acff66a4cb0efaafb728848edf097c75f">setTailCall</a>();</div>
<div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;          }</div>
<div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160;          <span class="comment">// Zap the fully redundant load.</span></div>
<div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160;          <a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a463baf545246fea9718664d933ffe66f">Call</a>-&gt;replaceAllUsesWith(EarlierCall-&gt;<a class="code" href="classllvm_1_1CallBase.html#ab2caa29167597390ab2fc3cf30d70389">getArgOperand</a>(1));</div>
<div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160;          <a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a463baf545246fea9718664d933ffe66f">Call</a>-&gt;eraseFromParent();</div>
<div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160;          <span class="keywordflow">goto</span> clobbered;</div>
<div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1AliasResult.html#a8d3de277fb70fa515efac2db2cfe9d57a0916b614598c673c1e6a59c7312a1409">AliasResult::MayAlias</a>:</div>
<div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1AliasResult.html#a8d3de277fb70fa515efac2db2cfe9d57a9e724bc94de38c6ca77508f19c246c0c">AliasResult::PartialAlias</a>:</div>
<div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160;          <span class="keywordflow">goto</span> clobbered;</div>
<div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1AliasResult.html#a8d3de277fb70fa515efac2db2cfe9d57a863ee317b92588eb2d6878af9fc98922">AliasResult::NoAlias</a>:</div>
<div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;        }</div>
<div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02169"></a><span class="lineno"> 2169</span>&#160;      }</div>
<div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2a6e6325433672a751336dfd07c9a2cf54">ARCInstKind::MoveWeak</a>:</div>
<div class="line"><a name="l02171"></a><span class="lineno"> 2171</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2acd9d38bb7cd5940d441b3325fd7bb607">ARCInstKind::CopyWeak</a>:</div>
<div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160;        <span class="comment">// TOOD: Grab the copied value.</span></div>
<div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160;        <span class="keywordflow">goto</span> clobbered;</div>
<div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2a56a1f8ca583bf2a38d53b7e7825bd269">ARCInstKind::AutoreleasepoolPush</a>:</div>
<div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2a6adf97f83acf6453d4a6a4b1070f3754">ARCInstKind::None</a>:</div>
<div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2af635fed4a9fb967d38c264ed1106844f">ARCInstKind::IntrinsicUser</a>:</div>
<div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2a8f9bfe9d1345237cb3b2b205864da075">ARCInstKind::User</a>:</div>
<div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160;        <span class="comment">// Weak pointers are only modified through the weak entry points</span></div>
<div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160;        <span class="comment">// (and arbitrary calls, which could call the weak entry points).</span></div>
<div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160;      <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160;        <span class="comment">// Anything else could modify the weak pointer.</span></div>
<div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;        <span class="keywordflow">goto</span> clobbered;</div>
<div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;      }</div>
<div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;    }</div>
<div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;  clobbered:;</div>
<div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160;  }</div>
<div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160; </div>
<div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;  <span class="comment">// Then, for each destroyWeak with an alloca operand, check to see if</span></div>
<div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;  <span class="comment">// the alloca and all its users can be zapped.</span></div>
<div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;Inst : <a class="code" href="namespacellvm.html#a8154638df88e4eaa568b67b23d463dac">llvm::make_early_inc_range</a>(<a class="code" href="namespacellvm.html#a7e3e687ddfdcbacd404bcf17b917dd88">instructions</a>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>))) {</div>
<div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160;    <a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2">ARCInstKind</a> <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5ada3eb06ada644390db065d37b3fd87ac">Class</a> = <a class="code" href="namespacellvm_1_1objcarc.html#a86cdbdf3773be3c67bc193b473b75708">GetBasicARCInstKind</a>(&amp;Inst);</div>
<div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;    <span class="keywordflow">if</span> (Class != <a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2a03973369165e1763744e9f56672dddad">ARCInstKind::DestroyWeak</a>)</div>
<div class="line"><a name="l02194"></a><span class="lineno"> 2194</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160; </div>
<div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160;    <a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *<a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a463baf545246fea9718664d933ffe66f">Call</a> = cast&lt;CallInst&gt;(&amp;Inst);</div>
<div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a> = <a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a463baf545246fea9718664d933ffe66f">Call</a>-&gt;getArgOperand(0);</div>
<div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1AllocaInst.html">AllocaInst</a> *Alloca = dyn_cast&lt;AllocaInst&gt;(<a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>)) {</div>
<div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1User.html">User</a> *U : Alloca-&gt;<a class="code" href="classllvm_1_1Value.html#ab4e0512c7e1c7adaa56677e3155685f1">users</a>()) {</div>
<div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160;        <span class="keyword">const</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *UserInst = cast&lt;Instruction&gt;(U);</div>
<div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;        <span class="keywordflow">switch</span> (<a class="code" href="namespacellvm_1_1objcarc.html#a86cdbdf3773be3c67bc193b473b75708">GetBasicARCInstKind</a>(UserInst)) {</div>
<div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2a60d8a1ea9604d54c2d3ea2c9cc065980">ARCInstKind::InitWeak</a>:</div>
<div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2a4b72e11620e2360a97726a1554da02d2">ARCInstKind::StoreWeak</a>:</div>
<div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2a03973369165e1763744e9f56672dddad">ARCInstKind::DestroyWeak</a>:</div>
<div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160;          <span class="keywordflow">goto</span> done;</div>
<div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160;        }</div>
<div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160;      }</div>
<div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;      Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1User.html">User</a> *U : <a class="code" href="namespacellvm.html#a8154638df88e4eaa568b67b23d463dac">llvm::make_early_inc_range</a>(Alloca-&gt;users())) {</div>
<div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;        <a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *UserInst = cast&lt;CallInst&gt;(U);</div>
<div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;        <span class="keywordflow">switch</span> (<a class="code" href="namespacellvm_1_1objcarc.html#a86cdbdf3773be3c67bc193b473b75708">GetBasicARCInstKind</a>(UserInst)) {</div>
<div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2a60d8a1ea9604d54c2d3ea2c9cc065980">ARCInstKind::InitWeak</a>:</div>
<div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2a4b72e11620e2360a97726a1554da02d2">ARCInstKind::StoreWeak</a>:</div>
<div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160;          <span class="comment">// These functions return their second argument.</span></div>
<div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;          UserInst-&gt;<a class="code" href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">replaceAllUsesWith</a>(UserInst-&gt;<a class="code" href="classllvm_1_1CallBase.html#ab2caa29167597390ab2fc3cf30d70389">getArgOperand</a>(1));</div>
<div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2a03973369165e1763744e9f56672dddad">ARCInstKind::DestroyWeak</a>:</div>
<div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160;          <span class="comment">// No return value.</span></div>
<div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160;          <a class="code" href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;alloca really is used!&quot;</span>);</div>
<div class="line"><a name="l02224"></a><span class="lineno"> 2224</span>&#160;        }</div>
<div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160;        UserInst-&gt;<a class="code" href="classllvm_1_1Instruction.html#ae6b978645b8ac72d1a35e1298ffdd4f0">eraseFromParent</a>();</div>
<div class="line"><a name="l02226"></a><span class="lineno"> 2226</span>&#160;      }</div>
<div class="line"><a name="l02227"></a><span class="lineno"> 2227</span>&#160;      Alloca-&gt;eraseFromParent();</div>
<div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>&#160;    done:;</div>
<div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160;    }</div>
<div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160;  }</div>
<div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160;}</div>
<div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160;<span class="comment">/// Identify program paths which execute sequences of retains and releases which</span></div>
<div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>&#160;<span class="comment">/// can be eliminated.</span></div>
<div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> ObjCARCOpt::OptimizeSequences(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>) {</div>
<div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160;  <span class="comment">// Releases, Retains - These are used to store the results of the main flow</span></div>
<div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;  <span class="comment">// analysis. These use Value* as the key instead of Instruction* so that the</span></div>
<div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;  <span class="comment">// map stays valid when we get around to rewriting code and calls get</span></div>
<div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160;  <span class="comment">// replaced by arguments.</span></div>
<div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160;  <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;Value *, RRInfo&gt;</a> Releases;</div>
<div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160;  <a class="code" href="classllvm_1_1BlotMapVector.html">BlotMapVector&lt;Value *, RRInfo&gt;</a> Retains;</div>
<div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160; </div>
<div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160;  <span class="comment">// This is used during the traversal of the function to track the</span></div>
<div class="line"><a name="l02244"></a><span class="lineno"> 2244</span>&#160;  <span class="comment">// states for each identified object at each block.</span></div>
<div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160;  <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;const BasicBlock *, BBState&gt;</a> BBStates;</div>
<div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160; </div>
<div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160;  <span class="comment">// Analyze the CFG of the function, and all instructions.</span></div>
<div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160;  <span class="keywordtype">bool</span> NestingDetected = Visit(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, BBStates, Retains, Releases);</div>
<div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160; </div>
<div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;  <span class="keywordflow">if</span> (DisableRetainReleasePairing)</div>
<div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02252"></a><span class="lineno"> 2252</span>&#160; </div>
<div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160;  <span class="comment">// Transform.</span></div>
<div class="line"><a name="l02254"></a><span class="lineno"> 2254</span>&#160;  <span class="keywordtype">bool</span> AnyPairsCompletelyEliminated = PerformCodePlacement(BBStates, Retains,</div>
<div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160;                                                           Releases,</div>
<div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160;                                                           <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getParent());</div>
<div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160; </div>
<div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160;  <span class="keywordflow">return</span> AnyPairsCompletelyEliminated &amp;&amp; NestingDetected;</div>
<div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160;}</div>
<div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160;<span class="comment">/// Check if there is a dependent call earlier that does not have anything in</span></div>
<div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160;<span class="comment">/// between the Retain and the call that can affect the reference count of their</span></div>
<div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160;<span class="comment">/// shared pointer argument. Note that Retain need not be in BB.</span></div>
<div class="line"><a name="l02264"></a><span class="lineno"><a class="line" href="group__ARCOpt.html#gadeda37f659507cbc25bbc0b742a16fad"> 2264</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *<a class="code" href="group__ARCOpt.html#gadeda37f659507cbc25bbc0b742a16fad">HasSafePathToPredecessorCall</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>,</div>
<div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160;                                              <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Retain,</div>
<div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160;                                              <a class="code" href="classllvm_1_1objcarc_1_1ProvenanceAnalysis.html">ProvenanceAnalysis</a> &amp;PA) {</div>
<div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160;  <span class="keyword">auto</span> *Call = dyn_cast_or_null&lt;CallInst&gt;(<a class="code" href="namespacellvm_1_1objcarc.html#a7a6c1dfa9b656660119d858a64521570">findSingleDependency</a>(</div>
<div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160;      <a class="code" href="namespacellvm_1_1objcarc.html#a353f4c1f85416c596ecaa9c4d5afca75a197563bb332a0ac8f6b578e8b6fcf0a7">CanChangeRetainCount</a>, <a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>, <a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2aafece4245269582cb2f1009d4fb52047">Retain</a>-&gt;getParent(), <a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2aafece4245269582cb2f1009d4fb52047">Retain</a>, PA));</div>
<div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160; </div>
<div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>&#160;  <span class="comment">// Check that the pointer is the return value of the call.</span></div>
<div class="line"><a name="l02271"></a><span class="lineno"> 2271</span>&#160;  <span class="keywordflow">if</span> (!Call || <a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a> != Call)</div>
<div class="line"><a name="l02272"></a><span class="lineno"> 2272</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02273"></a><span class="lineno"> 2273</span>&#160; </div>
<div class="line"><a name="l02274"></a><span class="lineno"> 2274</span>&#160;  <span class="comment">// Check that the call is a regular call.</span></div>
<div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160;  <a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2">ARCInstKind</a> Class = <a class="code" href="namespacellvm_1_1objcarc.html#a86cdbdf3773be3c67bc193b473b75708">GetBasicARCInstKind</a>(Call);</div>
<div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160;  <span class="keywordflow">return</span> Class == <a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2a216b693ce70a5639bd2e33cdbb0d82d8">ARCInstKind::CallOrUser</a> || Class == <a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2ac3755e61202abd74da5885d2e9c9160e">ARCInstKind::Call</a></div>
<div class="line"><a name="l02277"></a><span class="lineno"> 2277</span>&#160;             ? Call</div>
<div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160;             : <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160;}</div>
<div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160;<span class="comment">/// Find a dependent retain that precedes the given autorelease for which there</span></div>
<div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160;<span class="comment">/// is nothing in between the two instructions that can affect the ref count of</span></div>
<div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160;<span class="comment">/// Arg.</span></div>
<div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *</div>
<div class="line"><a name="l02285"></a><span class="lineno"><a class="line" href="group__ARCOpt.html#gad041beb9ed4fa6d780a7b0618bd24876"> 2285</a></span>&#160;<a class="code" href="group__ARCOpt.html#gad041beb9ed4fa6d780a7b0618bd24876">FindPredecessorRetainWithSafePath</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>, <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>,</div>
<div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160;                                  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Autorelease,</div>
<div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160;                                  <a class="code" href="classllvm_1_1objcarc_1_1ProvenanceAnalysis.html">ProvenanceAnalysis</a> &amp;PA) {</div>
<div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160;  <span class="keyword">auto</span> *<a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2aafece4245269582cb2f1009d4fb52047">Retain</a> = dyn_cast_or_null&lt;CallInst&gt;(</div>
<div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160;      <a class="code" href="namespacellvm_1_1objcarc.html#a7a6c1dfa9b656660119d858a64521570">findSingleDependency</a>(<a class="code" href="namespacellvm_1_1objcarc.html#a353f4c1f85416c596ecaa9c4d5afca75a197563bb332a0ac8f6b578e8b6fcf0a7">CanChangeRetainCount</a>, <a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>, <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, <a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2a61710f61a521b1544f5f7ab5abac843d">Autorelease</a>, PA));</div>
<div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160; </div>
<div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;  <span class="comment">// Check that we found a retain with the same argument.</span></div>
<div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2aafece4245269582cb2f1009d4fb52047">Retain</a> || !<a class="code" href="namespacellvm_1_1objcarc.html#a349b82bbe060500b58c6ca86ac8b6ea6">IsRetain</a>(<a class="code" href="namespacellvm_1_1objcarc.html#a86cdbdf3773be3c67bc193b473b75708">GetBasicARCInstKind</a>(<a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2aafece4245269582cb2f1009d4fb52047">Retain</a>)) ||</div>
<div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160;      <a class="code" href="namespacellvm_1_1objcarc.html#a89850f2a3bb39efa5d19a3e75bd14ea2">GetArgRCIdentityRoot</a>(<a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2aafece4245269582cb2f1009d4fb52047">Retain</a>) != <a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>) {</div>
<div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160;  }</div>
<div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160; </div>
<div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2aafece4245269582cb2f1009d4fb52047">Retain</a>;</div>
<div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;}</div>
<div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160;<span class="comment">/// Look for an ``autorelease&#39;&#39; instruction dependent on Arg such that there are</span></div>
<div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160;<span class="comment">/// no instructions dependent on Arg that need a positive ref count in between</span></div>
<div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160;<span class="comment">/// the autorelease and the ret.</span></div>
<div class="line"><a name="l02303"></a><span class="lineno"> 2303</span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *</div>
<div class="line"><a name="l02304"></a><span class="lineno"><a class="line" href="group__ARCOpt.html#ga45f3fc22ab783daa2633eb87b410c2d4"> 2304</a></span>&#160;<a class="code" href="group__ARCOpt.html#ga45f3fc22ab783daa2633eb87b410c2d4">FindPredecessorAutoreleaseWithSafePath</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>, <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>,</div>
<div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160;                                       <a class="code" href="classllvm_1_1ReturnInst.html">ReturnInst</a> *<a class="code" href="namespacellvm_1_1MipsISD.html#a422daf9aa810935178671306b651d69ba366e1eac31eeb1a1892d62ccfc0c8cf8">Ret</a>,</div>
<div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160;                                       <a class="code" href="classllvm_1_1objcarc_1_1ProvenanceAnalysis.html">ProvenanceAnalysis</a> &amp;PA) {</div>
<div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160;  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;Instruction *, 4&gt;</a> DepInsts;</div>
<div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160;  <span class="keyword">auto</span> *<a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2a61710f61a521b1544f5f7ab5abac843d">Autorelease</a> = dyn_cast_or_null&lt;CallInst&gt;(</div>
<div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160;      <a class="code" href="namespacellvm_1_1objcarc.html#a7a6c1dfa9b656660119d858a64521570">findSingleDependency</a>(<a class="code" href="namespacellvm_1_1objcarc.html#a353f4c1f85416c596ecaa9c4d5afca75ae9cb4656651e6d8f4748dac4bbe1b361">NeedsPositiveRetainCount</a>, <a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>, <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, <a class="code" href="namespacellvm_1_1MipsISD.html#a422daf9aa810935178671306b651d69ba366e1eac31eeb1a1892d62ccfc0c8cf8">Ret</a>, PA));</div>
<div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160; </div>
<div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2a61710f61a521b1544f5f7ab5abac843d">Autorelease</a>)</div>
<div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;  <a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2">ARCInstKind</a> AutoreleaseClass = <a class="code" href="namespacellvm_1_1objcarc.html#a86cdbdf3773be3c67bc193b473b75708">GetBasicARCInstKind</a>(<a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2a61710f61a521b1544f5f7ab5abac843d">Autorelease</a>);</div>
<div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1objcarc.html#a40e51f6d288f308e305b565c047ff3a7">IsAutorelease</a>(AutoreleaseClass))</div>
<div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1objcarc.html#a89850f2a3bb39efa5d19a3e75bd14ea2">GetArgRCIdentityRoot</a>(<a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2a61710f61a521b1544f5f7ab5abac843d">Autorelease</a>) != <a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>)</div>
<div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160; </div>
<div class="line"><a name="l02319"></a><span class="lineno"> 2319</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2a61710f61a521b1544f5f7ab5abac843d">Autorelease</a>;</div>
<div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160;}</div>
<div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160;<span class="comment">/// Look for this pattern:</span></div>
<div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160;<span class="comment">/// \code</span></div>
<div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160;<span class="comment">///    %call = call i8* @something(...)</span></div>
<div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160;<span class="comment">///    %2 = call i8* @objc_retain(i8* %call)</span></div>
<div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160;<span class="comment">///    %3 = call i8* @objc_autorelease(i8* %2)</span></div>
<div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160;<span class="comment">///    ret i8* %3</span></div>
<div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160;<span class="comment">/// \endcode</span></div>
<div class="line"><a name="l02329"></a><span class="lineno"> 2329</span>&#160;<span class="comment">/// And delete the retain and autorelease.</span></div>
<div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> ObjCARCOpt::OptimizeReturns(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>) {</div>
<div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getReturnType()-&gt;isPointerTy())</div>
<div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160; </div>
<div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;\n== ObjCARCOpt::OptimizeReturns ==\n&quot;</span>);</div>
<div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160; </div>
<div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> &amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>: <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>) {</div>
<div class="line"><a name="l02337"></a><span class="lineno"> 2337</span>&#160;    <a class="code" href="classllvm_1_1ReturnInst.html">ReturnInst</a> *<a class="code" href="namespacellvm_1_1MipsISD.html#a422daf9aa810935178671306b651d69ba366e1eac31eeb1a1892d62ccfc0c8cf8">Ret</a> = dyn_cast&lt;ReturnInst&gt;(&amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>.back());</div>
<div class="line"><a name="l02338"></a><span class="lineno"> 2338</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1MipsISD.html#a422daf9aa810935178671306b651d69ba366e1eac31eeb1a1892d62ccfc0c8cf8">Ret</a>)</div>
<div class="line"><a name="l02339"></a><span class="lineno"> 2339</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02340"></a><span class="lineno"> 2340</span>&#160; </div>
<div class="line"><a name="l02341"></a><span class="lineno"> 2341</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Visiting: &quot;</span> &lt;&lt; *<a class="code" href="namespacellvm_1_1MipsISD.html#a422daf9aa810935178671306b651d69ba366e1eac31eeb1a1892d62ccfc0c8cf8">Ret</a> &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l02342"></a><span class="lineno"> 2342</span>&#160; </div>
<div class="line"><a name="l02343"></a><span class="lineno"> 2343</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a> = <a class="code" href="namespacellvm_1_1objcarc.html#aa72ef5ef299b7531b84aafcf9c1f755f">GetRCIdentityRoot</a>(<a class="code" href="namespacellvm_1_1MipsISD.html#a422daf9aa810935178671306b651d69ba366e1eac31eeb1a1892d62ccfc0c8cf8">Ret</a>-&gt;getOperand(0));</div>
<div class="line"><a name="l02344"></a><span class="lineno"> 2344</span>&#160; </div>
<div class="line"><a name="l02345"></a><span class="lineno"> 2345</span>&#160;    <span class="comment">// Look for an ``autorelease&#39;&#39; instruction that is a predecessor of Ret and</span></div>
<div class="line"><a name="l02346"></a><span class="lineno"> 2346</span>&#160;    <span class="comment">// dependent on Arg such that there are no instructions dependent on Arg</span></div>
<div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>&#160;    <span class="comment">// that need a positive ref count in between the autorelease and Ret.</span></div>
<div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160;    <a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *<a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2a61710f61a521b1544f5f7ab5abac843d">Autorelease</a> =</div>
<div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160;        <a class="code" href="group__ARCOpt.html#ga45f3fc22ab783daa2633eb87b410c2d4">FindPredecessorAutoreleaseWithSafePath</a>(<a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>, &amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, <a class="code" href="namespacellvm_1_1MipsISD.html#a422daf9aa810935178671306b651d69ba366e1eac31eeb1a1892d62ccfc0c8cf8">Ret</a>, PA);</div>
<div class="line"><a name="l02350"></a><span class="lineno"> 2350</span>&#160; </div>
<div class="line"><a name="l02351"></a><span class="lineno"> 2351</span>&#160;    <span class="keywordflow">if</span> (!Autorelease)</div>
<div class="line"><a name="l02352"></a><span class="lineno"> 2352</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02353"></a><span class="lineno"> 2353</span>&#160; </div>
<div class="line"><a name="l02354"></a><span class="lineno"> 2354</span>&#160;    <a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *<a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2aafece4245269582cb2f1009d4fb52047">Retain</a> = <a class="code" href="group__ARCOpt.html#gad041beb9ed4fa6d780a7b0618bd24876">FindPredecessorRetainWithSafePath</a>(</div>
<div class="line"><a name="l02355"></a><span class="lineno"> 2355</span>&#160;        <a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>, <a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2a61710f61a521b1544f5f7ab5abac843d">Autorelease</a>-&gt;getParent(), Autorelease, PA);</div>
<div class="line"><a name="l02356"></a><span class="lineno"> 2356</span>&#160; </div>
<div class="line"><a name="l02357"></a><span class="lineno"> 2357</span>&#160;    <span class="keywordflow">if</span> (!Retain)</div>
<div class="line"><a name="l02358"></a><span class="lineno"> 2358</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02359"></a><span class="lineno"> 2359</span>&#160; </div>
<div class="line"><a name="l02360"></a><span class="lineno"> 2360</span>&#160;    <span class="comment">// Check that there is nothing that can affect the reference count</span></div>
<div class="line"><a name="l02361"></a><span class="lineno"> 2361</span>&#160;    <span class="comment">// between the retain and the call.  Note that Retain need not be in BB.</span></div>
<div class="line"><a name="l02362"></a><span class="lineno"> 2362</span>&#160;    <a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *<a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a463baf545246fea9718664d933ffe66f">Call</a> = <a class="code" href="group__ARCOpt.html#gadeda37f659507cbc25bbc0b742a16fad">HasSafePathToPredecessorCall</a>(<a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>, Retain, PA);</div>
<div class="line"><a name="l02363"></a><span class="lineno"> 2363</span>&#160; </div>
<div class="line"><a name="l02364"></a><span class="lineno"> 2364</span>&#160;    <span class="comment">// Don&#39;t remove retainRV/autoreleaseRV pairs if the call isn&#39;t a tail call.</span></div>
<div class="line"><a name="l02365"></a><span class="lineno"> 2365</span>&#160;    <span class="keywordflow">if</span> (!Call ||</div>
<div class="line"><a name="l02366"></a><span class="lineno"> 2366</span>&#160;        (!<a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a463baf545246fea9718664d933ffe66f">Call</a>-&gt;isTailCall() &amp;&amp;</div>
<div class="line"><a name="l02367"></a><span class="lineno"> 2367</span>&#160;         <a class="code" href="namespacellvm_1_1objcarc.html#a86cdbdf3773be3c67bc193b473b75708">GetBasicARCInstKind</a>(Retain) == <a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2aa1226b5450384ce6ea5ed47c317303ee">ARCInstKind::RetainRV</a> &amp;&amp;</div>
<div class="line"><a name="l02368"></a><span class="lineno"> 2368</span>&#160;         <a class="code" href="namespacellvm_1_1objcarc.html#a86cdbdf3773be3c67bc193b473b75708">GetBasicARCInstKind</a>(Autorelease) == <a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2ac1dbc9b59747323224171927c310917d">ARCInstKind::AutoreleaseRV</a>))</div>
<div class="line"><a name="l02369"></a><span class="lineno"> 2369</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02370"></a><span class="lineno"> 2370</span>&#160; </div>
<div class="line"><a name="l02371"></a><span class="lineno"> 2371</span>&#160;    <span class="comment">// If so, we can zap the retain and autorelease.</span></div>
<div class="line"><a name="l02372"></a><span class="lineno"> 2372</span>&#160;    Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02373"></a><span class="lineno"> 2373</span>&#160;    ++NumRets;</div>
<div class="line"><a name="l02374"></a><span class="lineno"> 2374</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Erasing: &quot;</span> &lt;&lt; *Retain &lt;&lt; <span class="stringliteral">&quot;\nErasing: &quot;</span> &lt;&lt; *Autorelease</div>
<div class="line"><a name="l02375"></a><span class="lineno"> 2375</span>&#160;                      &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l02376"></a><span class="lineno"> 2376</span>&#160;    BundledInsts-&gt;<a class="code" href="classllvm_1_1objcarc_1_1BundledRetainClaimRVs.html#ad32a933965ba0059ff2a3a322cc8b40b">eraseInst</a>(Retain);</div>
<div class="line"><a name="l02377"></a><span class="lineno"> 2377</span>&#160;    <a class="code" href="namespacellvm_1_1objcarc.html#af4e05bf48a81b884e707efa650560fbf">EraseInstruction</a>(Autorelease);</div>
<div class="line"><a name="l02378"></a><span class="lineno"> 2378</span>&#160;  }</div>
<div class="line"><a name="l02379"></a><span class="lineno"> 2379</span>&#160;}</div>
<div class="line"><a name="l02380"></a><span class="lineno"> 2380</span>&#160; </div>
<div class="line"><a name="l02381"></a><span class="lineno"> 2381</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><a name="l02382"></a><span class="lineno"> 2382</span>&#160;<span class="keywordtype">void</span></div>
<div class="line"><a name="l02383"></a><span class="lineno"> 2383</span>&#160;ObjCARCOpt::GatherStatistics(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, <span class="keywordtype">bool</span> AfterOptimization) {</div>
<div class="line"><a name="l02384"></a><span class="lineno"> 2384</span>&#160;  <a class="code" href="classllvm_1_1TrackingStatistic.html">Statistic</a> &amp;NumRetains =</div>
<div class="line"><a name="l02385"></a><span class="lineno"> 2385</span>&#160;      AfterOptimization ? NumRetainsAfterOpt : NumRetainsBeforeOpt;</div>
<div class="line"><a name="l02386"></a><span class="lineno"> 2386</span>&#160;  <a class="code" href="classllvm_1_1TrackingStatistic.html">Statistic</a> &amp;NumReleases =</div>
<div class="line"><a name="l02387"></a><span class="lineno"> 2387</span>&#160;      AfterOptimization ? NumReleasesAfterOpt : NumReleasesBeforeOpt;</div>
<div class="line"><a name="l02388"></a><span class="lineno"> 2388</span>&#160; </div>
<div class="line"><a name="l02389"></a><span class="lineno"> 2389</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1InstIterator.html">inst_iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = <a class="code" href="namespacellvm.html#a49a219f3fe3d7a6cc07c49a1ea766d6d">inst_begin</a>(&amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>), <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = <a class="code" href="namespacellvm.html#a945cded5463e0ccd3cf5a6ac80542a94">inst_end</a>(&amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>; ) {</div>
<div class="line"><a name="l02390"></a><span class="lineno"> 2390</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Inst = &amp;*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>++;</div>
<div class="line"><a name="l02391"></a><span class="lineno"> 2391</span>&#160;    <span class="keywordflow">switch</span> (<a class="code" href="namespacellvm_1_1objcarc.html#a86cdbdf3773be3c67bc193b473b75708">GetBasicARCInstKind</a>(Inst)) {</div>
<div class="line"><a name="l02392"></a><span class="lineno"> 2392</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l02393"></a><span class="lineno"> 2393</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02394"></a><span class="lineno"> 2394</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2aafece4245269582cb2f1009d4fb52047">ARCInstKind::Retain</a>:</div>
<div class="line"><a name="l02395"></a><span class="lineno"> 2395</span>&#160;      ++NumRetains;</div>
<div class="line"><a name="l02396"></a><span class="lineno"> 2396</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02397"></a><span class="lineno"> 2397</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2ab8e7b465df7c5979dc731d06e84ce2cf">ARCInstKind::Release</a>:</div>
<div class="line"><a name="l02398"></a><span class="lineno"> 2398</span>&#160;      ++NumReleases;</div>
<div class="line"><a name="l02399"></a><span class="lineno"> 2399</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02400"></a><span class="lineno"> 2400</span>&#160;    }</div>
<div class="line"><a name="l02401"></a><span class="lineno"> 2401</span>&#160;  }</div>
<div class="line"><a name="l02402"></a><span class="lineno"> 2402</span>&#160;}</div>
<div class="line"><a name="l02403"></a><span class="lineno"> 2403</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02404"></a><span class="lineno"> 2404</span>&#160; </div>
<div class="line"><a name="l02405"></a><span class="lineno"> 2405</span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">ObjCARCOpt::init</a>(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>) {</div>
<div class="line"><a name="l02406"></a><span class="lineno"> 2406</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1objcarc.html#a6771e7364c5ab8a6354f744fe5bbc62b">EnableARCOpts</a>)</div>
<div class="line"><a name="l02407"></a><span class="lineno"> 2407</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02408"></a><span class="lineno"> 2408</span>&#160; </div>
<div class="line"><a name="l02409"></a><span class="lineno"> 2409</span>&#160;  <span class="comment">// Intuitively, objc_retain and others are nocapture, however in practice</span></div>
<div class="line"><a name="l02410"></a><span class="lineno"> 2410</span>&#160;  <span class="comment">// they are not, because they return their argument value. And objc_release</span></div>
<div class="line"><a name="l02411"></a><span class="lineno"> 2411</span>&#160;  <span class="comment">// calls finalizers which can have arbitrary side effects.</span></div>
<div class="line"><a name="l02412"></a><span class="lineno"> 2412</span>&#160;  MDKindCache.<a class="code" href="classllvm_1_1objcarc_1_1ARCMDKindCache.html#ac5f061881a93af61a34d1dca1a0036dc">init</a>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getParent());</div>
<div class="line"><a name="l02413"></a><span class="lineno"> 2413</span>&#160; </div>
<div class="line"><a name="l02414"></a><span class="lineno"> 2414</span>&#160;  <span class="comment">// Initialize our runtime entry point cache.</span></div>
<div class="line"><a name="l02415"></a><span class="lineno"> 2415</span>&#160;  EP.<a class="code" href="classllvm_1_1objcarc_1_1ARCRuntimeEntryPoints.html#ad245a22b79f4982f4d74cb74f1c1a3f2">init</a>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getParent());</div>
<div class="line"><a name="l02416"></a><span class="lineno"> 2416</span>&#160; </div>
<div class="line"><a name="l02417"></a><span class="lineno"> 2417</span>&#160;  <span class="comment">// Compute which blocks are in which funclet.</span></div>
<div class="line"><a name="l02418"></a><span class="lineno"> 2418</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.hasPersonalityFn() &amp;&amp;</div>
<div class="line"><a name="l02419"></a><span class="lineno"> 2419</span>&#160;      <a class="code" href="namespacellvm.html#a5309dbf19ec5ccffe3072c6087e106d3">isScopedEHPersonality</a>(<a class="code" href="namespacellvm.html#a8d508f23e2580095561902c39911fb9b">classifyEHPersonality</a>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getPersonalityFn())))</div>
<div class="line"><a name="l02420"></a><span class="lineno"> 2420</span>&#160;    BlockEHColors = <a class="code" href="namespacellvm.html#a3a3a97fed79c86bf242b0f090e1cb2e6">colorEHFunclets</a>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l02421"></a><span class="lineno"> 2421</span>&#160;}</div>
<div class="line"><a name="l02422"></a><span class="lineno"> 2422</span>&#160; </div>
<div class="line"><a name="l02423"></a><span class="lineno"> 2423</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="namespacellvm_1_1dxil_1_1PointerTypeAnalysis.html#ae574a4c1d84b9e67bc94489f356805b4">ObjCARCOpt::run</a>(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, <a class="code" href="classllvm_1_1AAResults.html">AAResults</a> &amp;AA) {</div>
<div class="line"><a name="l02424"></a><span class="lineno"> 2424</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1objcarc.html#a6771e7364c5ab8a6354f744fe5bbc62b">EnableARCOpts</a>)</div>
<div class="line"><a name="l02425"></a><span class="lineno"> 2425</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02426"></a><span class="lineno"> 2426</span>&#160; </div>
<div class="line"><a name="l02427"></a><span class="lineno"> 2427</span>&#160;  Changed = CFGChanged = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02428"></a><span class="lineno"> 2428</span>&#160;  <a class="code" href="classllvm_1_1objcarc_1_1BundledRetainClaimRVs.html">BundledRetainClaimRVs</a> BRV(<span class="comment">/*ContractPass=*/</span><span class="keyword">false</span>);</div>
<div class="line"><a name="l02429"></a><span class="lineno"> 2429</span>&#160;  BundledInsts = &amp;BRV;</div>
<div class="line"><a name="l02430"></a><span class="lineno"> 2430</span>&#160; </div>
<div class="line"><a name="l02431"></a><span class="lineno"> 2431</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;&lt;&lt;&lt; ObjCARCOpt: Visiting Function: &quot;</span> &lt;&lt; <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getName()</div>
<div class="line"><a name="l02432"></a><span class="lineno"> 2432</span>&#160;                    &lt;&lt; <span class="stringliteral">&quot; &gt;&gt;&gt;&quot;</span></div>
<div class="line"><a name="l02433"></a><span class="lineno"> 2433</span>&#160;                       <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l02434"></a><span class="lineno"> 2434</span>&#160; </div>
<div class="line"><a name="l02435"></a><span class="lineno"> 2435</span>&#160;  std::pair&lt;bool, bool&gt; <a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a> = BundledInsts-&gt;<a class="code" href="classllvm_1_1objcarc_1_1BundledRetainClaimRVs.html#a8fdb3ab3875b4306157d47d84e972405">insertAfterInvokes</a>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l02436"></a><span class="lineno"> 2436</span>&#160;  Changed |= <a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a>.first;</div>
<div class="line"><a name="l02437"></a><span class="lineno"> 2437</span>&#160;  CFGChanged |= <a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a>.second;</div>
<div class="line"><a name="l02438"></a><span class="lineno"> 2438</span>&#160; </div>
<div class="line"><a name="l02439"></a><span class="lineno"> 2439</span>&#160;  PA.<a class="code" href="classllvm_1_1objcarc_1_1ProvenanceAnalysis.html#a746f7f7833928dfd2e5dec71aad6d240">setAA</a>(&amp;AA);</div>
<div class="line"><a name="l02440"></a><span class="lineno"> 2440</span>&#160; </div>
<div class="line"><a name="l02441"></a><span class="lineno"> 2441</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><a name="l02442"></a><span class="lineno"> 2442</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a846137dc22b3b399b62f606698f3ed59">AreStatisticsEnabled</a>()) {</div>
<div class="line"><a name="l02443"></a><span class="lineno"> 2443</span>&#160;    GatherStatistics(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, <span class="keyword">false</span>);</div>
<div class="line"><a name="l02444"></a><span class="lineno"> 2444</span>&#160;  }</div>
<div class="line"><a name="l02445"></a><span class="lineno"> 2445</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02446"></a><span class="lineno"> 2446</span>&#160; </div>
<div class="line"><a name="l02447"></a><span class="lineno"> 2447</span>&#160;  <span class="comment">// This pass performs several distinct transformations. As a compile-time aid</span></div>
<div class="line"><a name="l02448"></a><span class="lineno"> 2448</span>&#160;  <span class="comment">// when compiling code that isn&#39;t ObjC, skip these if the relevant ObjC</span></div>
<div class="line"><a name="l02449"></a><span class="lineno"> 2449</span>&#160;  <span class="comment">// library functions aren&#39;t declared.</span></div>
<div class="line"><a name="l02450"></a><span class="lineno"> 2450</span>&#160; </div>
<div class="line"><a name="l02451"></a><span class="lineno"> 2451</span>&#160;  <span class="comment">// Preliminary optimizations. This also computes UsedInThisFunction.</span></div>
<div class="line"><a name="l02452"></a><span class="lineno"> 2452</span>&#160;  OptimizeIndividualCalls(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l02453"></a><span class="lineno"> 2453</span>&#160; </div>
<div class="line"><a name="l02454"></a><span class="lineno"> 2454</span>&#160;  <span class="comment">// Optimizations for weak pointers.</span></div>
<div class="line"><a name="l02455"></a><span class="lineno"> 2455</span>&#160;  <span class="keywordflow">if</span> (UsedInThisFunction &amp; ((1 &lt;&lt; <span class="keywordtype">unsigned</span>(<a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2a63bc8a0dc53d47fec308f2a7a9b99562">ARCInstKind::LoadWeak</a>)) |</div>
<div class="line"><a name="l02456"></a><span class="lineno"> 2456</span>&#160;                            (1 &lt;&lt; <span class="keywordtype">unsigned</span>(<a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2a373746ca100ea4fff46f2b4046984e94">ARCInstKind::LoadWeakRetained</a>)) |</div>
<div class="line"><a name="l02457"></a><span class="lineno"> 2457</span>&#160;                            (1 &lt;&lt; <span class="keywordtype">unsigned</span>(<a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2a4b72e11620e2360a97726a1554da02d2">ARCInstKind::StoreWeak</a>)) |</div>
<div class="line"><a name="l02458"></a><span class="lineno"> 2458</span>&#160;                            (1 &lt;&lt; <span class="keywordtype">unsigned</span>(<a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2a60d8a1ea9604d54c2d3ea2c9cc065980">ARCInstKind::InitWeak</a>)) |</div>
<div class="line"><a name="l02459"></a><span class="lineno"> 2459</span>&#160;                            (1 &lt;&lt; <span class="keywordtype">unsigned</span>(<a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2acd9d38bb7cd5940d441b3325fd7bb607">ARCInstKind::CopyWeak</a>)) |</div>
<div class="line"><a name="l02460"></a><span class="lineno"> 2460</span>&#160;                            (1 &lt;&lt; <span class="keywordtype">unsigned</span>(<a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2a6e6325433672a751336dfd07c9a2cf54">ARCInstKind::MoveWeak</a>)) |</div>
<div class="line"><a name="l02461"></a><span class="lineno"> 2461</span>&#160;                            (1 &lt;&lt; <span class="keywordtype">unsigned</span>(<a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2a03973369165e1763744e9f56672dddad">ARCInstKind::DestroyWeak</a>))))</div>
<div class="line"><a name="l02462"></a><span class="lineno"> 2462</span>&#160;    OptimizeWeakCalls(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l02463"></a><span class="lineno"> 2463</span>&#160; </div>
<div class="line"><a name="l02464"></a><span class="lineno"> 2464</span>&#160;  <span class="comment">// Optimizations for retain+release pairs.</span></div>
<div class="line"><a name="l02465"></a><span class="lineno"> 2465</span>&#160;  <span class="keywordflow">if</span> (UsedInThisFunction &amp; ((1 &lt;&lt; <span class="keywordtype">unsigned</span>(<a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2aafece4245269582cb2f1009d4fb52047">ARCInstKind::Retain</a>)) |</div>
<div class="line"><a name="l02466"></a><span class="lineno"> 2466</span>&#160;                            (1 &lt;&lt; <span class="keywordtype">unsigned</span>(<a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2aa1226b5450384ce6ea5ed47c317303ee">ARCInstKind::RetainRV</a>)) |</div>
<div class="line"><a name="l02467"></a><span class="lineno"> 2467</span>&#160;                            (1 &lt;&lt; <span class="keywordtype">unsigned</span>(<a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2aa5c9c22c7dedc1f8dd1d75b7c04460a9">ARCInstKind::RetainBlock</a>))))</div>
<div class="line"><a name="l02468"></a><span class="lineno"> 2468</span>&#160;    <span class="keywordflow">if</span> (UsedInThisFunction &amp; (1 &lt;&lt; <span class="keywordtype">unsigned</span>(<a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2ab8e7b465df7c5979dc731d06e84ce2cf">ARCInstKind::Release</a>)))</div>
<div class="line"><a name="l02469"></a><span class="lineno"> 2469</span>&#160;      <span class="comment">// Run OptimizeSequences until it either stops making changes or</span></div>
<div class="line"><a name="l02470"></a><span class="lineno"> 2470</span>&#160;      <span class="comment">// no retain+release pair nesting is detected.</span></div>
<div class="line"><a name="l02471"></a><span class="lineno"> 2471</span>&#160;      <span class="keywordflow">while</span> (OptimizeSequences(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>)) {}</div>
<div class="line"><a name="l02472"></a><span class="lineno"> 2472</span>&#160; </div>
<div class="line"><a name="l02473"></a><span class="lineno"> 2473</span>&#160;  <span class="comment">// Optimizations if objc_autorelease is used.</span></div>
<div class="line"><a name="l02474"></a><span class="lineno"> 2474</span>&#160;  <span class="keywordflow">if</span> (UsedInThisFunction &amp; ((1 &lt;&lt; <span class="keywordtype">unsigned</span>(<a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2a61710f61a521b1544f5f7ab5abac843d">ARCInstKind::Autorelease</a>)) |</div>
<div class="line"><a name="l02475"></a><span class="lineno"> 2475</span>&#160;                            (1 &lt;&lt; <span class="keywordtype">unsigned</span>(<a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2ac1dbc9b59747323224171927c310917d">ARCInstKind::AutoreleaseRV</a>))))</div>
<div class="line"><a name="l02476"></a><span class="lineno"> 2476</span>&#160;    OptimizeReturns(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l02477"></a><span class="lineno"> 2477</span>&#160; </div>
<div class="line"><a name="l02478"></a><span class="lineno"> 2478</span>&#160;  <span class="comment">// Gather statistics after optimization.</span></div>
<div class="line"><a name="l02479"></a><span class="lineno"> 2479</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><a name="l02480"></a><span class="lineno"> 2480</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a846137dc22b3b399b62f606698f3ed59">AreStatisticsEnabled</a>()) {</div>
<div class="line"><a name="l02481"></a><span class="lineno"> 2481</span>&#160;    GatherStatistics(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l02482"></a><span class="lineno"> 2482</span>&#160;  }</div>
<div class="line"><a name="l02483"></a><span class="lineno"> 2483</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02484"></a><span class="lineno"> 2484</span>&#160; </div>
<div class="line"><a name="l02485"></a><span class="lineno"> 2485</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l02486"></a><span class="lineno"> 2486</span>&#160; </div>
<div class="line"><a name="l02487"></a><span class="lineno"> 2487</span>&#160;  <span class="keywordflow">return</span> Changed;</div>
<div class="line"><a name="l02488"></a><span class="lineno"> 2488</span>&#160;}</div>
<div class="line"><a name="l02489"></a><span class="lineno"> 2489</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02490"></a><span class="lineno"> 2490</span>&#160;<span class="comment">/// @}</span></div>
<div class="line"><a name="l02491"></a><span class="lineno"> 2491</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l02492"></a><span class="lineno"> 2492</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02493"></a><span class="lineno"><a class="line" href="structllvm_1_1ObjCARCOptPass.html#a02b31ca54388bfecbdd6593b7563d146"> 2493</a></span>&#160;<a class="code" href="classllvm_1_1PreservedAnalyses.html">PreservedAnalyses</a> <a class="code" href="structllvm_1_1ObjCARCOptPass.html#a02b31ca54388bfecbdd6593b7563d146">ObjCARCOptPass::run</a>(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>,</div>
<div class="line"><a name="l02494"></a><span class="lineno"> 2494</span>&#160;                                      <a class="code" href="classllvm_1_1AnalysisManager.html">FunctionAnalysisManager</a> &amp;AM) {</div>
<div class="line"><a name="l02495"></a><span class="lineno"> 2495</span>&#160;  ObjCARCOpt OCAO;</div>
<div class="line"><a name="l02496"></a><span class="lineno"> 2496</span>&#160;  OCAO.init(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l02497"></a><span class="lineno"> 2497</span>&#160; </div>
<div class="line"><a name="l02498"></a><span class="lineno"> 2498</span>&#160;  <span class="keywordtype">bool</span> Changed = OCAO.run(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, AM.<a class="code" href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">getResult</a>&lt;<a class="code" href="classllvm_1_1AAManager.html">AAManager</a>&gt;(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>));</div>
<div class="line"><a name="l02499"></a><span class="lineno"> 2499</span>&#160;  <span class="keywordtype">bool</span> CFGChanged = OCAO.hasCFGChanged();</div>
<div class="line"><a name="l02500"></a><span class="lineno"> 2500</span>&#160;  <span class="keywordflow">if</span> (Changed) {</div>
<div class="line"><a name="l02501"></a><span class="lineno"> 2501</span>&#160;    <a class="code" href="classllvm_1_1PreservedAnalyses.html">PreservedAnalyses</a> PA;</div>
<div class="line"><a name="l02502"></a><span class="lineno"> 2502</span>&#160;    <span class="keywordflow">if</span> (!CFGChanged)</div>
<div class="line"><a name="l02503"></a><span class="lineno"> 2503</span>&#160;      PA.<a class="code" href="classllvm_1_1PreservedAnalyses.html#a937c42f77e161349ce0f999e448c7027">preserveSet</a>&lt;<a class="code" href="classllvm_1_1CFGAnalyses.html">CFGAnalyses</a>&gt;();</div>
<div class="line"><a name="l02504"></a><span class="lineno"> 2504</span>&#160;    <span class="keywordflow">return</span> PA;</div>
<div class="line"><a name="l02505"></a><span class="lineno"> 2505</span>&#160;  }</div>
<div class="line"><a name="l02506"></a><span class="lineno"> 2506</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1PreservedAnalyses.html#a1258a1ff55557c27684010ebd7283712">PreservedAnalyses::all</a>();</div>
<div class="line"><a name="l02507"></a><span class="lineno"> 2507</span>&#160;}</div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="aclassllvm_1_1objcarc_1_1BundledRetainClaimRVs_html"><div class="ttname"><a href="classllvm_1_1objcarc_1_1BundledRetainClaimRVs.html">llvm::objcarc::BundledRetainClaimRVs</a></div><div class="ttdef"><b>Definition:</b> <a href="lib_2Transforms_2ObjCARC_2ObjCARC_8h_source.html#l00105">ObjCARC.h:105</a></div></div>
<div class="ttc" id="aclassllvm_1_1SuccIterator_html"><div class="ttname"><a href="classllvm_1_1SuccIterator.html">llvm::SuccIterator</a></div><div class="ttdef"><b>Definition:</b> <a href="IR_2CFG_8h_source.html#l00138">CFG.h:138</a></div></div>
<div class="ttc" id="anamespacellvm_1_1objcarc_html_a86cdbdf3773be3c67bc193b473b75708"><div class="ttname"><a href="namespacellvm_1_1objcarc.html#a86cdbdf3773be3c67bc193b473b75708">llvm::objcarc::GetBasicARCInstKind</a></div><div class="ttdeci">ARCInstKind GetBasicARCInstKind(const Value *V)</div><div class="ttdoc">Determine which objc runtime call instruction class V belongs to.</div><div class="ttdef"><b>Definition:</b> <a href="ObjCARCInstKind_8h_source.html#l00104">ObjCARCInstKind.h:104</a></div></div>
<div class="ttc" id="alib_2Target_2README_8txt_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">i</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2README_8txt_source.html#l00029">README.txt:29</a></div></div>
<div class="ttc" id="aclassllvm_1_1PreservedAnalyses_html"><div class="ttname"><a href="classllvm_1_1PreservedAnalyses.html">llvm::PreservedAnalyses</a></div><div class="ttdoc">A set of analyses that are preserved following a run of a transformation pass.</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00152">PassManager.h:152</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallBase_html_a35b3798829fba58f145ea59e4214e84a"><div class="ttname"><a href="classllvm_1_1CallBase.html#a35b3798829fba58f145ea59e4214e84a">llvm::CallBase::getNumOperandBundles</a></div><div class="ttdeci">unsigned getNumOperandBundles() const</div><div class="ttdoc">Return the number of operand bundles associated with this User.</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l01949">InstrTypes.h:1949</a></div></div>
<div class="ttc" id="anamespacellvm_1_1objcarc_html_a494b44abeacdfac8bb26d3203571d1c2a8f9bfe9d1345237cb3b2b205864da075"><div class="ttname"><a href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2a8f9bfe9d1345237cb3b2b205864da075">llvm::objcarc::ARCInstKind::User</a></div><div class="ttdeci">@ User</div><div class="ttdoc">could &quot;use&quot; a pointer</div></div>
<div class="ttc" id="aclassllvm_1_1AAManager_html"><div class="ttname"><a href="classllvm_1_1AAManager.html">llvm::AAManager</a></div><div class="ttdoc">A manager for alias analyses.</div><div class="ttdef"><b>Definition:</b> <a href="AliasAnalysis_8h_source.html#l00885">AliasAnalysis.h:885</a></div></div>
<div class="ttc" id="anamespacellvm_1_1objcarc_html_a2cfd2097e9e2cea7a8eb50a369146e85"><div class="ttname"><a href="namespacellvm_1_1objcarc.html#a2cfd2097e9e2cea7a8eb50a369146e85">llvm::objcarc::operator&lt;&lt;</a></div><div class="ttdeci">raw_ostream &amp; operator&lt;&lt;(raw_ostream &amp;OS, const ARCInstKind Class)</div><div class="ttdef"><b>Definition:</b> <a href="ObjCARCInstKind_8cpp_source.html#l00028">ObjCARCInstKind.cpp:28</a></div></div>
<div class="ttc" id="aclassllvm_1_1AliasResult_html_a8d3de277fb70fa515efac2db2cfe9d57a0916b614598c673c1e6a59c7312a1409"><div class="ttname"><a href="classllvm_1_1AliasResult.html#a8d3de277fb70fa515efac2db2cfe9d57a0916b614598c673c1e6a59c7312a1409">llvm::AliasResult::MayAlias</a></div><div class="ttdeci">@ MayAlias</div><div class="ttdoc">The two locations may or may not alias.</div><div class="ttdef"><b>Definition:</b> <a href="AliasAnalysis_8h_source.html#l00104">AliasAnalysis.h:104</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a3287172f2d13af086e6d66364e8c6de3"><div class="ttname"><a href="classllvm_1_1Instruction.html#a3287172f2d13af086e6d66364e8c6de3">llvm::Instruction::getNumSuccessors</a></div><div class="ttdeci">unsigned getNumSuccessors() const LLVM_READONLY</div><div class="ttdoc">Return the number of successors that this instruction has.</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8cpp_source.html#l00823">Instruction.cpp:823</a></div></div>
<div class="ttc" id="aclassllvm_1_1AliasResult_html_a8d3de277fb70fa515efac2db2cfe9d57a9e724bc94de38c6ca77508f19c246c0c"><div class="ttname"><a href="classllvm_1_1AliasResult.html#a8d3de277fb70fa515efac2db2cfe9d57a9e724bc94de38c6ca77508f19c246c0c">llvm::AliasResult::PartialAlias</a></div><div class="ttdeci">@ PartialAlias</div><div class="ttdoc">The two locations alias, but only due to a partial overlap.</div><div class="ttdef"><b>Definition:</b> <a href="AliasAnalysis_8h_source.html#l00106">AliasAnalysis.h:106</a></div></div>
<div class="ttc" id="aIRTranslator_8cpp_html_abe44dfdea65b4f7e11e0a608ab708b76"><div class="ttname"><a href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a></div><div class="ttdeci">IRTranslator LLVM IR MI</div><div class="ttdef"><b>Definition:</b> <a href="IRTranslator_8cpp_source.html#l00109">IRTranslator.cpp:109</a></div></div>
<div class="ttc" id="anamespacellvm_html"><div class="ttname"><a href="namespacellvm.html">llvm</a></div><div class="ttdoc">This is an optimization pass for GlobalISel generic memory operations.</div><div class="ttdef"><b>Definition:</b> <a href="AddressRanges_8h_source.html#l00018">AddressRanges.h:18</a></div></div>
<div class="ttc" id="anamespacellvm_1_1objcarc_html_aefba9af2f61452f20f4c947b4c2e5f4e"><div class="ttname"><a href="namespacellvm_1_1objcarc.html#aefba9af2f61452f20f4c947b4c2e5f4e">llvm::objcarc::hasAttachedCallOpBundle</a></div><div class="ttdeci">bool hasAttachedCallOpBundle(const CallBase *CB)</div><div class="ttdef"><b>Definition:</b> <a href="ObjCARCUtil_8h_source.html#l00029">ObjCARCUtil.h:29</a></div></div>
<div class="ttc" id="anamespacellvm_1_1objcarc_html_a845b8f76f8bd22e4e2eb851121db306d"><div class="ttname"><a href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306d">llvm::objcarc::Sequence</a></div><div class="ttdeci">Sequence</div><div class="ttdef"><b>Definition:</b> <a href="PtrState_8h_source.html#l00041">PtrState.h:41</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallInst_html_acff66a4cb0efaafb728848edf097c75f"><div class="ttname"><a href="classllvm_1_1CallInst.html#acff66a4cb0efaafb728848edf097c75f">llvm::CallInst::setTailCall</a></div><div class="ttdeci">void setTailCall(bool IsTc=true)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01690">Instructions.h:1690</a></div></div>
<div class="ttc" id="aclassllvm_1_1ReturnInst_html"><div class="ttname"><a href="classllvm_1_1ReturnInst.html">llvm::ReturnInst</a></div><div class="ttdoc">Return a value (possibly void), from a function.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03057">Instructions.h:3057</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSetImpl_html_a11045c7973ab24a8d6315b61fa337d4e"><div class="ttname"><a href="classllvm_1_1SmallPtrSetImpl.html#a11045c7973ab24a8d6315b61fa337d4e">llvm::SmallPtrSetImpl::erase</a></div><div class="ttdeci">bool erase(PtrType Ptr)</div><div class="ttdoc">erase - If the set contains the specified pointer, remove it and return true, otherwise return false.</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00379">SmallPtrSet.h:379</a></div></div>
<div class="ttc" id="aclassllvm_1_1PHINode_html_a1f0ff79b64a40d383b891f1baba89c6b"><div class="ttname"><a href="classllvm_1_1PHINode.html#a1f0ff79b64a40d383b891f1baba89c6b">llvm::PHINode::incoming_values</a></div><div class="ttdeci">op_range incoming_values()</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02784">Instructions.h:2784</a></div></div>
<div class="ttc" id="aMetadata_8h_html"><div class="ttname"><a href="Metadata_8h.html">Metadata.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a98c0a84a5dfa8bce341c829709f171e5"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a98c0a84a5dfa8bce341c829709f171e5">llvm::BasicBlock::iterator</a></div><div class="ttdeci">InstListType::iterator iterator</div><div class="ttdoc">Instruction iterators...</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00087">BasicBlock.h:87</a></div></div>
<div class="ttc" id="aBlotMapVector_8h_html"><div class="ttname"><a href="BlotMapVector_8h.html">BlotMapVector.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisManager_html_ab9d3d5412c20747fd0110a046604f09a"><div class="ttname"><a href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">llvm::AnalysisManager::getResult</a></div><div class="ttdeci">PassT::Result &amp; getResult(IRUnitT &amp;IR, ExtraArgTs... ExtraArgs)</div><div class="ttdoc">Get the result of an analysis pass for a given IR unit.</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00774">PassManager.h:774</a></div></div>
<div class="ttc" id="anamespacellvm_html_a069c4ae2290101bde0f8d6a5074dc72b"><div class="ttname"><a href="namespacellvm.html#a069c4ae2290101bde0f8d6a5074dc72b">llvm::succ_end</a></div><div class="ttdeci">Interval::succ_iterator succ_end(Interval *I)</div><div class="ttdef"><b>Definition:</b> <a href="Interval_8h_source.html#l00102">Interval.h:102</a></div></div>
<div class="ttc" id="aInstIterator_8h_html"><div class="ttname"><a href="InstIterator_8h.html">InstIterator.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html"><div class="ttname"><a href="classllvm_1_1Function.html">llvm::Function</a></div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00059">Function.h:59</a></div></div>
<div class="ttc" id="anamespacellvm_1_1objcarc_html_a353f4c1f85416c596ecaa9c4d5afca75ae9cb4656651e6d8f4748dac4bbe1b361"><div class="ttname"><a href="namespacellvm_1_1objcarc.html#a353f4c1f85416c596ecaa9c4d5afca75ae9cb4656651e6d8f4748dac4bbe1b361">llvm::objcarc::NeedsPositiveRetainCount</a></div><div class="ttdeci">@ NeedsPositiveRetainCount</div><div class="ttdef"><b>Definition:</b> <a href="DependencyAnalysis_8h_source.html#l00045">DependencyAnalysis.h:45</a></div></div>
<div class="ttc" id="aREADME-SSE_8txt_html_a63d206a063eefcdf8c318ded97b65020"><div class="ttname"><a href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a></div><div class="ttdeci">This currently compiles esp xmm0 movsd esp eax eax esp ret We should use not the dag combiner This is because dagcombine2 needs to be able to see through the X86ISD::Wrapper which DAGCombine can t really do The code for turning x load into a single vector load is target independent and should be moved to the dag combiner The code for turning x load into a vector load can only handle a direct load from a global or a direct load from the stack It should be generalized to handle any load from P</div><div class="ttdef"><b>Definition:</b> <a href="README-SSE_8txt_source.html#l00411">README-SSE.txt:411</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallBase_html_aee56a5257c4899bf97c5957d87a732e3"><div class="ttname"><a href="classllvm_1_1CallBase.html#aee56a5257c4899bf97c5957d87a732e3">llvm::CallBase::setCalledFunction</a></div><div class="ttdeci">void setCalledFunction(Function *Fn)</div><div class="ttdoc">Sets the function called, including updating the function type.</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l01445">InstrTypes.h:1445</a></div></div>
<div class="ttc" id="aclassllvm_1_1BitCastInst_html"><div class="ttname"><a href="classllvm_1_1BitCastInst.html">llvm::BitCastInst</a></div><div class="ttdoc">This class represents a no-op cast from one type to another.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l05258">Instructions.h:5258</a></div></div>
<div class="ttc" id="anamespacellvm_html_a26e2a938b431eaa6eca2beaa96410c9d"><div class="ttname"><a href="namespacellvm.html#a26e2a938b431eaa6eca2beaa96410c9d">llvm::successors</a></div><div class="ttdeci">auto successors(const MachineBasicBlock *BB)</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l01265">MachineBasicBlock.h:1265</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVector_html"><div class="ttname"><a href="classllvm_1_1SmallVector.html">llvm::SmallVector</a></div><div class="ttdoc">This is a 'vector' (really, a variable-sized array), optimized for the case when the array is small.</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l01199">SmallVector.h:1199</a></div></div>
<div class="ttc" id="aStatistic_8h_html"><div class="ttname"><a href="Statistic_8h.html">Statistic.h</a></div></div>
<div class="ttc" id="anamespacellvm_1_1objcarc_html_a845b8f76f8bd22e4e2eb851121db306da8e1b337cadca1fc899129d307df7d68e"><div class="ttname"><a href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306da8e1b337cadca1fc899129d307df7d68e">llvm::objcarc::S_Use</a></div><div class="ttdeci">@ S_Use</div><div class="ttdoc">any use of x.</div><div class="ttdef"><b>Definition:</b> <a href="PtrState_8h_source.html#l00045">PtrState.h:45</a></div></div>
<div class="ttc" id="anamespacellvm_1_1objcarc_html_a494b44abeacdfac8bb26d3203571d1c2aa5c9c22c7dedc1f8dd1d75b7c04460a9"><div class="ttname"><a href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2aa5c9c22c7dedc1f8dd1d75b7c04460a9">llvm::objcarc::ARCInstKind::RetainBlock</a></div><div class="ttdeci">@ RetainBlock</div><div class="ttdoc">objc_retainBlock</div></div>
<div class="ttc" id="aclassllvm_1_1objcarc_1_1ARCMDKindCache_html_a062cf10f8ea9fc45291d700b2e8da648"><div class="ttname"><a href="classllvm_1_1objcarc_1_1ARCMDKindCache.html#a062cf10f8ea9fc45291d700b2e8da648">llvm::objcarc::ARCMDKindCache::get</a></div><div class="ttdeci">unsigned get(ARCMDKindID ID)</div><div class="ttdef"><b>Definition:</b> <a href="ObjCARCAnalysisUtils_8h_source.html#l00248">ObjCARCAnalysisUtils.h:248</a></div></div>
<div class="ttc" id="aclassllvm_1_1objcarc_1_1ARCMDKindCache_html_ac5f061881a93af61a34d1dca1a0036dc"><div class="ttname"><a href="classllvm_1_1objcarc_1_1ARCMDKindCache.html#ac5f061881a93af61a34d1dca1a0036dc">llvm::objcarc::ARCMDKindCache::init</a></div><div class="ttdeci">void init(Module *Mod)</div><div class="ttdef"><b>Definition:</b> <a href="ObjCARCAnalysisUtils_8h_source.html#l00241">ObjCARCAnalysisUtils.h:241</a></div></div>
<div class="ttc" id="aSupport_2ErrorHandling_8h_html"><div class="ttname"><a href="Support_2ErrorHandling_8h.html">ErrorHandling.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalVariable_html"><div class="ttname"><a href="classllvm_1_1GlobalVariable.html">llvm::GlobalVariable</a></div><div class="ttdef"><b>Definition:</b> <a href="GlobalVariable_8h_source.html#l00039">GlobalVariable.h:39</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a482498a1c760122fd33c7fc8190dd277"><div class="ttname"><a href="classllvm_1_1Instruction.html#a482498a1c760122fd33c7fc8190dd277">llvm::Instruction::insertBefore</a></div><div class="ttdeci">void insertBefore(Instruction *InsertPos)</div><div class="ttdoc">Insert an unlinked instruction into a basic block immediately before the specified instruction.</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8cpp_source.html#l00088">Instruction.cpp:88</a></div></div>
<div class="ttc" id="anamespacellvm_1_1cl_html_a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6"><div class="ttname"><a href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">llvm::cl::Hidden</a></div><div class="ttdeci">@ Hidden</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00138">CommandLine.h:138</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseMapBase_html_a1eb8504bab5f794778d82db6ac829923"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#a1eb8504bab5f794778d82db6ac829923">llvm::DenseMapBase&lt; DenseMap&lt; KeyT, ValueT, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;, KeyT, ValueT, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;::erase</a></div><div class="ttdeci">bool erase(const KeyT &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00302">DenseMap.h:302</a></div></div>
<div class="ttc" id="agroup__ARCOpt_html_gaf049222c368a7cbc12109fbc79ce8f34"><div class="ttname"><a href="group__ARCOpt.html#gaf049222c368a7cbc12109fbc79ce8f34">BBState::OverflowOccurredValue</a></div><div class="ttdeci">static const unsigned OverflowOccurredValue</div><div class="ttdef"><b>Definition:</b> <a href="ObjCARCOpts_8cpp_source.html#l00208">ObjCARCOpts.cpp:208</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html"><div class="ttname"><a href="classllvm_1_1Type.html">llvm::Type</a></div><div class="ttdoc">The instances of the Type class are immutable: once they are created, they are never changed.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00045">Type.h:45</a></div></div>
<div class="ttc" id="aDenseMap_8h_html"><div class="ttname"><a href="DenseMap_8h.html">DenseMap.h</a></div></div>
<div class="ttc" id="anamespacellvm_1_1objcarc_html_a38d5511a0458d8611ae8194db9f31e34"><div class="ttname"><a href="namespacellvm_1_1objcarc.html#a38d5511a0458d8611ae8194db9f31e34">llvm::objcarc::IsNeverTail</a></div><div class="ttdeci">bool IsNeverTail(ARCInstKind Class)</div><div class="ttdoc">Test if the given class represents instructions which are never safe to mark with the &quot;tail&quot; keyword.</div><div class="ttdef"><b>Definition:</b> <a href="ObjCARCInstKind_8cpp_source.html#l00556">ObjCARCInstKind.cpp:556</a></div></div>
<div class="ttc" id="anamespacellvm_1_1objcarc_html_a494b44abeacdfac8bb26d3203571d1c2a63bc8a0dc53d47fec308f2a7a9b99562"><div class="ttname"><a href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2a63bc8a0dc53d47fec308f2a7a9b99562">llvm::objcarc::ARCInstKind::LoadWeak</a></div><div class="ttdeci">@ LoadWeak</div><div class="ttdoc">objc_loadWeak (derived)</div></div>
<div class="ttc" id="aEHPersonalities_8h_html"><div class="ttname"><a href="EHPersonalities_8h.html">EHPersonalities.h</a></div></div>
<div class="ttc" id="anamespacellvm_1_1objcarc_html_a494b44abeacdfac8bb26d3203571d1c2ac3755e61202abd74da5885d2e9c9160e"><div class="ttname"><a href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2ac3755e61202abd74da5885d2e9c9160e">llvm::objcarc::ARCInstKind::Call</a></div><div class="ttdeci">@ Call</div><div class="ttdoc">could call objc_release</div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSet_html"><div class="ttname"><a href="classllvm_1_1SmallPtrSet.html">llvm::SmallPtrSet</a></div><div class="ttdoc">SmallPtrSet - This class implements a set which is optimized for holding SmallSize or less elements.</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00450">SmallPtrSet.h:450</a></div></div>
<div class="ttc" id="anamespacellvm_1_1objcarc_html_a494b44abeacdfac8bb26d3203571d1c2a6e6325433672a751336dfd07c9a2cf54"><div class="ttname"><a href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2a6e6325433672a751336dfd07c9a2cf54">llvm::objcarc::ARCInstKind::MoveWeak</a></div><div class="ttdeci">@ MoveWeak</div><div class="ttdoc">objc_moveWeak (derived)</div></div>
<div class="ttc" id="anamespacellvm_1_1MipsISD_html_a422daf9aa810935178671306b651d69ba366e1eac31eeb1a1892d62ccfc0c8cf8"><div class="ttname"><a href="namespacellvm_1_1MipsISD.html#a422daf9aa810935178671306b651d69ba366e1eac31eeb1a1892d62ccfc0c8cf8">llvm::MipsISD::Ret</a></div><div class="ttdeci">@ Ret</div><div class="ttdef"><b>Definition:</b> <a href="MipsISelLowering_8h_source.html#l00119">MipsISelLowering.h:119</a></div></div>
<div class="ttc" id="anamespacellvm_1_1Intrinsic_html_a35fedf4db6d756bd82501607f93c1e79aab5fb650050f184fa7c19c26abde5226"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a35fedf4db6d756bd82501607f93c1e79aab5fb650050f184fa7c19c26abde5226">llvm::Intrinsic::not_intrinsic</a></div><div class="ttdeci">@ not_intrinsic</div><div class="ttdef"><b>Definition:</b> <a href="Intrinsics_8h_source.html#l00044">Intrinsics.h:44</a></div></div>
<div class="ttc" id="aclassllvm_1_1objcarc_1_1ProvenanceAnalysis_html"><div class="ttname"><a href="classllvm_1_1objcarc_1_1ProvenanceAnalysis.html">llvm::objcarc::ProvenanceAnalysis</a></div><div class="ttdoc">This is similar to BasicAliasAnalysis, and it uses many of the same techniques, except it uses specia...</div><div class="ttdef"><b>Definition:</b> <a href="ProvenanceAnalysis_8h_source.html#l00051">ProvenanceAnalysis.h:51</a></div></div>
<div class="ttc" id="aSTLExtras_8h_html"><div class="ttname"><a href="STLExtras_8h.html">STLExtras.h</a></div></div>
<div class="ttc" id="aCompiler_8h_html_acc1c483f4b4ee2f17bb6643a3b353609"><div class="ttname"><a href="Compiler_8h.html#acc1c483f4b4ee2f17bb6643a3b353609">LLVM_ATTRIBUTE_UNUSED</a></div><div class="ttdeci">#define LLVM_ATTRIBUTE_UNUSED</div><div class="ttdef"><b>Definition:</b> <a href="Compiler_8h_source.html#l00172">Compiler.h:172</a></div></div>
<div class="ttc" id="anamespacellvm_1_1objcarc_html_a92ed436b80d7666f785e46f7e9aa3e82"><div class="ttname"><a href="namespacellvm_1_1objcarc.html#a92ed436b80d7666f785e46f7e9aa3e82">llvm::objcarc::GetARCInstKind</a></div><div class="ttdeci">ARCInstKind GetARCInstKind(const Value *V)</div><div class="ttdoc">Map V to its ARCInstKind equivalence class.</div><div class="ttdef"><b>Definition:</b> <a href="ObjCARCInstKind_8cpp_source.html#l00213">ObjCARCInstKind.cpp:213</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a7ba5de75f50bb4a4ba920698edf39b28"><div class="ttname"><a href="classllvm_1_1Type.html#a7ba5de75f50bb4a4ba920698edf39b28">llvm::Type::getInt8Ty</a></div><div class="ttdeci">static IntegerType * getInt8Ty(LLVMContext &amp;C)</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00239">Type.cpp:239</a></div></div>
<div class="ttc" id="anamespacellvm_1_1objcarc_html_a40e51f6d288f308e305b565c047ff3a7"><div class="ttname"><a href="namespacellvm_1_1objcarc.html#a40e51f6d288f308e305b565c047ff3a7">llvm::objcarc::IsAutorelease</a></div><div class="ttdeci">bool IsAutorelease(ARCInstKind Class)</div><div class="ttdoc">Test if the given class is objc_autorelease or equivalent.</div><div class="ttdef"><b>Definition:</b> <a href="ObjCARCInstKind_8cpp_source.html#l00380">ObjCARCInstKind.cpp:380</a></div></div>
<div class="ttc" id="anamespacellvm_1_1objcarc_html_a494b44abeacdfac8bb26d3203571d1c2a61710f61a521b1544f5f7ab5abac843d"><div class="ttname"><a href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2a61710f61a521b1544f5f7ab5abac843d">llvm::objcarc::ARCInstKind::Autorelease</a></div><div class="ttdeci">@ Autorelease</div><div class="ttdoc">objc_autorelease</div></div>
<div class="ttc" id="aDebug_8h_html_a08efc68d15935eb8889400a46c3749ba"><div class="ttname"><a href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a></div><div class="ttdeci">#define LLVM_DEBUG(X)</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8h_source.html#l00101">Debug.h:101</a></div></div>
<div class="ttc" id="aclassllvm_1_1MDNode_html_a7d10a7b9b7f40b04d27ed97c38ea1950"><div class="ttname"><a href="classllvm_1_1MDNode.html#a7d10a7b9b7f40b04d27ed97c38ea1950">llvm::MDNode::get</a></div><div class="ttdeci">static MDTuple * get(LLVMContext &amp;Context, ArrayRef&lt; Metadata * &gt; MDs)</div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8h_source.html#l01399">Metadata.h:1399</a></div></div>
<div class="ttc" id="aMD5_8cpp_html_a96d73bbd7af15cb1fc38c3f4a3bd82e9"><div class="ttname"><a href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a></div><div class="ttdeci">#define F(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00055">MD5.cpp:55</a></div></div>
<div class="ttc" id="anamespacellvm_1_1RISCVFenceField_html_a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731"><div class="ttname"><a href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">llvm::RISCVFenceField::R</a></div><div class="ttdeci">@ R</div><div class="ttdef"><b>Definition:</b> <a href="RISCVBaseInfo_8h_source.html#l00278">RISCVBaseInfo.h:278</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a9247a212ea89acc9573fa7e7f557eaba"><div class="ttname"><a href="classllvm_1_1Instruction.html#a9247a212ea89acc9573fa7e7f557eaba">llvm::Instruction::setMetadata</a></div><div class="ttdeci">void setMetadata(unsigned KindID, MDNode *Node)</div><div class="ttdoc">Set the metadata of the specified kind to the specified node.</div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8cpp_source.html#l01455">Metadata.cpp:1455</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html"><div class="ttname"><a href="classllvm_1_1BasicBlock.html">llvm::BasicBlock</a></div><div class="ttdoc">LLVM Basic Block Representation.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00055">BasicBlock.h:55</a></div></div>
<div class="ttc" id="aAliasAnalysis_8h_html"><div class="ttname"><a href="AliasAnalysis_8h.html">AliasAnalysis.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_a7c46c742c31be54870e2038048e6b391"><div class="ttname"><a href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">llvm::dbgs</a></div><div class="ttdeci">raw_ostream &amp; dbgs()</div><div class="ttdoc">dbgs() - This returns a reference to a raw_ostream for debugging messages.</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8cpp_source.html#l00163">Debug.cpp:163</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstIterator_html_a21bb107a081ffcb030e272d14a0f1816"><div class="ttname"><a href="classllvm_1_1InstIterator.html#a21bb107a081ffcb030e272d14a0f1816">llvm::InstIterator::getInstructionIterator</a></div><div class="ttdeci">BIty &amp; getInstructionIterator()</div><div class="ttdef"><b>Definition:</b> <a href="InstIterator_8h_source.html#l00074">InstIterator.h:74</a></div></div>
<div class="ttc" id="anamespacellvm_html_a8d508f23e2580095561902c39911fb9b"><div class="ttname"><a href="namespacellvm.html#a8d508f23e2580095561902c39911fb9b">llvm::classifyEHPersonality</a></div><div class="ttdeci">EHPersonality classifyEHPersonality(const Value *Pers)</div><div class="ttdoc">See if the given exception handling personality function is one that we understand.</div><div class="ttdef"><b>Definition:</b> <a href="EHPersonalities_8cpp_source.html#l00022">EHPersonalities.cpp:22</a></div></div>
<div class="ttc" id="aAMDGPULibCalls_8cpp_html_afecf1cc1292b07f57d343c0f4d682044"><div class="ttname"><a href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a></div><div class="ttdeci">amdgpu Simplify well known AMD library false FunctionCallee Value * Arg</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULibCalls_8cpp_source.html#l00187">AMDGPULibCalls.cpp:187</a></div></div>
<div class="ttc" id="aIR_2Instruction_8h_html"><div class="ttname"><a href="IR_2Instruction_8h.html">Instruction.h</a></div></div>
<div class="ttc" id="aCommandLine_8h_html"><div class="ttname"><a href="CommandLine_8h.html">CommandLine.h</a></div></div>
<div class="ttc" id="astructllvm_1_1objcarc_1_1RRInfo_html"><div class="ttname"><a href="structllvm_1_1objcarc_1_1RRInfo.html">llvm::objcarc::RRInfo</a></div><div class="ttdoc">Unidirectional information about either a retain-decrement-use-release sequence or release-use-decrem...</div><div class="ttdef"><b>Definition:</b> <a href="PtrState_8h_source.html#l00056">PtrState.h:56</a></div></div>
<div class="ttc" id="anamespacellvm_html_a846137dc22b3b399b62f606698f3ed59"><div class="ttname"><a href="namespacellvm.html#a846137dc22b3b399b62f606698f3ed59">llvm::AreStatisticsEnabled</a></div><div class="ttdeci">bool AreStatisticsEnabled()</div><div class="ttdoc">Check if statistics are enabled.</div><div class="ttdef"><b>Definition:</b> <a href="Statistic_8cpp_source.html#l00139">Statistic.cpp:139</a></div></div>
<div class="ttc" id="aConstants_8h_html"><div class="ttname"><a href="Constants_8h.html">Constants.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1PHINode_html_a16c39eb6e60b42a40c399d8d65347bb6"><div class="ttname"><a href="classllvm_1_1PHINode.html#a16c39eb6e60b42a40c399d8d65347bb6">llvm::PHINode::getIncomingValue</a></div><div class="ttdeci">Value * getIncomingValue(unsigned i) const</div><div class="ttdoc">Return incoming value number x.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02794">Instructions.h:2794</a></div></div>
<div class="ttc" id="aclassllvm_1_1AAResults_html"><div class="ttname"><a href="classllvm_1_1AAResults.html">llvm::AAResults</a></div><div class="ttdef"><b>Definition:</b> <a href="AliasAnalysis_8h_source.html#l00294">AliasAnalysis.h:294</a></div></div>
<div class="ttc" id="anamespacellvm_1_1objcarc_html_a494b44abeacdfac8bb26d3203571d1c2a60d8a1ea9604d54c2d3ea2c9cc065980"><div class="ttname"><a href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2a60d8a1ea9604d54c2d3ea2c9cc065980">llvm::objcarc::ARCInstKind::InitWeak</a></div><div class="ttdeci">@ InitWeak</div><div class="ttdoc">objc_initWeak (derived)</div></div>
<div class="ttc" id="aBuiltinGCs_8cpp_html_a6742d2e0a668baf1196ec69e158d5f15"><div class="ttname"><a href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a></div><div class="ttdeci">static GCRegistry::Add&lt; CoreCLRGC &gt; E(&quot;coreclr&quot;, &quot;CoreCLR-compatible GC&quot;)</div></div>
<div class="ttc" id="anamespacellvm_1_1objcarc_html_aa4b95e1b6c59a75f558794b32b644febab8e7b465df7c5979dc731d06e84ce2cf"><div class="ttname"><a href="namespacellvm_1_1objcarc.html#aa4b95e1b6c59a75f558794b32b644febab8e7b465df7c5979dc731d06e84ce2cf">llvm::objcarc::ARCRuntimeEntryPointKind::Release</a></div><div class="ttdeci">@ Release</div></div>
<div class="ttc" id="anamespacellvm_1_1objcarc_html_a89850f2a3bb39efa5d19a3e75bd14ea2"><div class="ttname"><a href="namespacellvm_1_1objcarc.html#a89850f2a3bb39efa5d19a3e75bd14ea2">llvm::objcarc::GetArgRCIdentityRoot</a></div><div class="ttdeci">Value * GetArgRCIdentityRoot(Value *Inst)</div><div class="ttdoc">Assuming the given instruction is one of the special calls such as objc_retain or objc_release,...</div><div class="ttdef"><b>Definition:</b> <a href="ObjCARCAnalysisUtils_8h_source.html#l00131">ObjCARCAnalysisUtils.h:131</a></div></div>
<div class="ttc" id="aclassllvm_1_1User_html"><div class="ttname"><a href="classllvm_1_1User.html">llvm::User</a></div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00044">User.h:44</a></div></div>
<div class="ttc" id="aDependencyAnalysis_8h_html"><div class="ttname"><a href="DependencyAnalysis_8h.html">DependencyAnalysis.h</a></div></div>
<div class="ttc" id="aREADME__ALTIVEC_8txt_html_a9aacd9146afe44bf656cd664e2a88c8c"><div class="ttname"><a href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a></div><div class="ttdeci">(vector float) vec_cmpeq(*A, *B) C</div><div class="ttdef"><b>Definition:</b> <a href="README__ALTIVEC_8txt_source.html#l00086">README_ALTIVEC.txt:86</a></div></div>
<div class="ttc" id="anamespacellvm_1_1objcarc_html_a494b44abeacdfac8bb26d3203571d1c2a216b693ce70a5639bd2e33cdbb0d82d8"><div class="ttname"><a href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2a216b693ce70a5639bd2e33cdbb0d82d8">llvm::objcarc::ARCInstKind::CallOrUser</a></div><div class="ttdeci">@ CallOrUser</div><div class="ttdoc">could call objc_release and/or &quot;use&quot; pointers</div></div>
<div class="ttc" id="anamespacellvm_1_1objcarc_html_ad3269e7374cddd8fb6760350aeb10f24"><div class="ttname"><a href="namespacellvm_1_1objcarc.html#ad3269e7374cddd8fb6760350aeb10f24">llvm::objcarc::IsNoopOnGlobal</a></div><div class="ttdeci">bool IsNoopOnGlobal(ARCInstKind Class)</div><div class="ttdoc">Test if the given class represents instructions which do nothing if passed a global variable.</div><div class="ttdef"><b>Definition:</b> <a href="ObjCARCInstKind_8cpp_source.html#l00485">ObjCARCInstKind.cpp:485</a></div></div>
<div class="ttc" id="aInstrTypes_8h_html"><div class="ttname"><a href="InstrTypes_8h.html">InstrTypes.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a0ed5f3ab3c2e4196ee0cffffa080c062"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">llvm::BasicBlock::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdoc">Instruction iterator methods.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00314">BasicBlock.h:314</a></div></div>
<div class="ttc" id="agroup__ARCOpt_html_gac3fb7fa331da4859e6ce9cd029286f4e"><div class="ttname"><a href="group__ARCOpt.html#gac3fb7fa331da4859e6ce9cd029286f4e">collectReleaseInsertPts</a></div><div class="ttdeci">static void collectReleaseInsertPts(const BlotMapVector&lt; Value *, RRInfo &gt; &amp;Retains, DenseMap&lt; const Instruction *, SmallPtrSet&lt; const Value *, 2 &gt;&gt; &amp;ReleaseInsertPtToRCIdentityRoots)</div><div class="ttdef"><b>Definition:</b> <a href="ObjCARCOpts_8cpp_source.html#l01459">ObjCARCOpts.cpp:1459</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallInst_html_a850d8262cd900958b3153c4aa080b2bb"><div class="ttname"><a href="classllvm_1_1CallInst.html#a850d8262cd900958b3153c4aa080b2bb">llvm::CallInst::Create</a></div><div class="ttdeci">static CallInst * Create(FunctionType *Ty, Value *F, const Twine &amp;NameStr=&quot;&quot;, Instruction *InsertBefore=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01528">Instructions.h:1528</a></div></div>
<div class="ttc" id="aSIInstrInfo_8cpp_html_a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791"><div class="ttname"><a href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a></div><div class="ttdeci">@ SI</div><div class="ttdef"><b>Definition:</b> <a href="SIInstrInfo_8cpp_source.html#l07993">SIInstrInfo.cpp:7993</a></div></div>
<div class="ttc" id="aObjCARCOpts_8cpp_html_ada3f418289d61a260056b641a13e86c1"><div class="ttname"><a href="ObjCARCOpts_8cpp.html#ada3f418289d61a260056b641a13e86c1">MaxPtrStates</a></div><div class="ttdeci">static cl::opt&lt; unsigned &gt; MaxPtrStates(&quot;arc-opt-max-ptr-states&quot;, cl::Hidden, cl::desc(&quot;Maximum number of ptr states the optimizer keeps track of&quot;), cl::init(4095))</div></div>
<div class="ttc" id="astructllvm_1_1ObjCARCOptPass_html_a02b31ca54388bfecbdd6593b7563d146"><div class="ttname"><a href="structllvm_1_1ObjCARCOptPass.html#a02b31ca54388bfecbdd6593b7563d146">llvm::ObjCARCOptPass::run</a></div><div class="ttdeci">PreservedAnalyses run(Function &amp;F, FunctionAnalysisManager &amp;AM)</div><div class="ttdef"><b>Definition:</b> <a href="ObjCARCOpts_8cpp_source.html#l02493">ObjCARCOpts.cpp:2493</a></div></div>
<div class="ttc" id="anamespacellvm_1_1objcarc_html_a494b44abeacdfac8bb26d3203571d1c2ab8e7b465df7c5979dc731d06e84ce2cf"><div class="ttname"><a href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2ab8e7b465df7c5979dc731d06e84ce2cf">llvm::objcarc::ARCInstKind::Release</a></div><div class="ttdeci">@ Release</div><div class="ttdoc">objc_release</div></div>
<div class="ttc" id="anamespacellvm_1_1objcarc_html_a494b44abeacdfac8bb26d3203571d1c2aa1226b5450384ce6ea5ed47c317303ee"><div class="ttname"><a href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2aa1226b5450384ce6ea5ed47c317303ee">llvm::objcarc::ARCInstKind::RetainRV</a></div><div class="ttdeci">@ RetainRV</div><div class="ttdoc">objc_retainAutoreleasedReturnValue</div></div>
<div class="ttc" id="aclassllvm_1_1BlotMapVector_html_a955a07a15cf61e1d84d10cea781d25ce"><div class="ttname"><a href="classllvm_1_1BlotMapVector.html#a955a07a15cf61e1d84d10cea781d25ce">llvm::BlotMapVector::empty</a></div><div class="ttdeci">bool empty() const</div><div class="ttdef"><b>Definition:</b> <a href="BlotMapVector_8h_source.html#l00109">BlotMapVector.h:109</a></div></div>
<div class="ttc" id="aclassllvm_1_1BlotMapVector_html_a912153f3f439c544fff1d30b80d27659"><div class="ttname"><a href="classllvm_1_1BlotMapVector.html#a912153f3f439c544fff1d30b80d27659">llvm::BlotMapVector::const_iterator</a></div><div class="ttdeci">typename VectorTy::const_iterator const_iterator</div><div class="ttdef"><b>Definition:</b> <a href="BlotMapVector_8h_source.html#l00048">BlotMapVector.h:48</a></div></div>
<div class="ttc" id="aBuiltinGCs_8cpp_html_a7abf5fb4071cb25dbce06dfb5ee3c937"><div class="ttname"><a href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a></div><div class="ttdeci">static GCRegistry::Add&lt; OcamlGC &gt; B(&quot;ocaml&quot;, &quot;ocaml 3.10-compatible GC&quot;)</div></div>
<div class="ttc" id="anamespacellvm_1_1objcarc_html_a494b44abeacdfac8bb26d3203571d1c2ad20eb2456d446869820a1e7e385fe99f"><div class="ttname"><a href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2ad20eb2456d446869820a1e7e385fe99f">llvm::objcarc::ARCInstKind::NoopCast</a></div><div class="ttdeci">@ NoopCast</div><div class="ttdoc">objc_retainedObject, etc.</div></div>
<div class="ttc" id="anamespacellvm_1_1objcarc_html_a7110df32902106ee880a19371b45d763"><div class="ttname"><a href="namespacellvm_1_1objcarc.html#a7110df32902106ee880a19371b45d763">llvm::objcarc::getEquivalentPHIs</a></div><div class="ttdeci">void getEquivalentPHIs(PHINodeTy &amp;PN, VectorTy &amp;PHIList)</div><div class="ttdoc">Return the list of PHI nodes that are equivalent to PN.</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Transforms_2ObjCARC_2ObjCARC_8h_source.html#l00074">ObjCARC.h:74</a></div></div>
<div class="ttc" id="anamespacellvm_1_1objcarc_html_a494b44abeacdfac8bb26d3203571d1c2acd9d38bb7cd5940d441b3325fd7bb607"><div class="ttname"><a href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2acd9d38bb7cd5940d441b3325fd7bb607">llvm::objcarc::ARCInstKind::CopyWeak</a></div><div class="ttdeci">@ CopyWeak</div><div class="ttdoc">objc_copyWeak (derived)</div></div>
<div class="ttc" id="astructllvm_1_1objcarc_1_1RRInfo_html_a5770bc64392d64b9900226f925521b94"><div class="ttname"><a href="structllvm_1_1objcarc_1_1RRInfo.html#a5770bc64392d64b9900226f925521b94">llvm::objcarc::RRInfo::KnownSafe</a></div><div class="ttdeci">bool KnownSafe</div><div class="ttdoc">After an objc_retain, the reference count of the referenced object is known to be positive.</div><div class="ttdef"><b>Definition:</b> <a href="PtrState_8h_source.html#l00069">PtrState.h:69</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html"><div class="ttname"><a href="classllvm_1_1Instruction.html">llvm::Instruction</a></div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00041">Instruction.h:41</a></div></div>
<div class="ttc" id="anamespacellvm_html_a0bf75467957937ad23ad7be19f489934"><div class="ttname"><a href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">llvm::STATISTIC</a></div><div class="ttdeci">STATISTIC(NumFunctions, &quot;Total number of functions&quot;)</div></div>
<div class="ttc" id="aclassllvm_1_1raw__ostream_html"><div class="ttname"><a href="classllvm_1_1raw__ostream.html">llvm::raw_ostream</a></div><div class="ttdoc">This class implements an extremely fast bulk output stream that can only output to a stream.</div><div class="ttdef"><b>Definition:</b> <a href="raw__ostream_8h_source.html#l00052">raw_ostream.h:52</a></div></div>
<div class="ttc" id="astructllvm_1_1objcarc_1_1BottomUpPtrState_html"><div class="ttname"><a href="structllvm_1_1objcarc_1_1BottomUpPtrState.html">llvm::objcarc::BottomUpPtrState</a></div><div class="ttdef"><b>Definition:</b> <a href="PtrState_8h_source.html#l00168">PtrState.h:168</a></div></div>
<div class="ttc" id="anamespacellvm_html_a5ee0a415cf089775fd277550b257f74e"><div class="ttname"><a href="namespacellvm.html#a5ee0a415cf089775fd277550b257f74e">llvm::operator&lt;&lt;</a></div><div class="ttdeci">raw_ostream &amp; operator&lt;&lt;(raw_ostream &amp;OS, const APFixedPoint &amp;FX)</div><div class="ttdef"><b>Definition:</b> <a href="APFixedPoint_8h_source.html#l00292">APFixedPoint.h:292</a></div></div>
<div class="ttc" id="aclassllvm_1_1UndefValue_html_a4ae5ff22b700a42bcc5d889233721335"><div class="ttname"><a href="classllvm_1_1UndefValue.html#a4ae5ff22b700a42bcc5d889233721335">llvm::UndefValue::get</a></div><div class="ttdeci">static UndefValue * get(Type *T)</div><div class="ttdoc">Static factory methods - Return an 'undef' object of the specified type.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l01740">Constants.cpp:1740</a></div></div>
<div class="ttc" id="anamespacellvm_1_1objcarc_html_a494b44abeacdfac8bb26d3203571d1c2af635fed4a9fb967d38c264ed1106844f"><div class="ttname"><a href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2af635fed4a9fb967d38c264ed1106844f">llvm::objcarc::ARCInstKind::IntrinsicUser</a></div><div class="ttdeci">@ IntrinsicUser</div><div class="ttdoc">llvm.objc.clang.arc.use</div></div>
<div class="ttc" id="aclassllvm_1_1BlotMapVector_html_a60751d42a7b0b4df2a9283aa6a99a058"><div class="ttname"><a href="classllvm_1_1BlotMapVector.html#a60751d42a7b0b4df2a9283aa6a99a058">llvm::BlotMapVector::insert</a></div><div class="ttdeci">std::pair&lt; iterator, bool &gt; insert(const std::pair&lt; KeyT, ValueT &gt; &amp;InsertPair)</div><div class="ttdef"><b>Definition:</b> <a href="BlotMapVector_8h_source.html#l00067">BlotMapVector.h:67</a></div></div>
<div class="ttc" id="aSmallPtrSet_8h_html"><div class="ttname"><a href="SmallPtrSet_8h.html">SmallPtrSet.h</a></div></div>
<div class="ttc" id="anamespacellvm_1_1objcarc_html_a845b8f76f8bd22e4e2eb851121db306da6e431a7ec0fee74cc2ae9a79bd965122"><div class="ttname"><a href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306da6e431a7ec0fee74cc2ae9a79bd965122">llvm::objcarc::S_None</a></div><div class="ttdeci">@ S_None</div><div class="ttdef"><b>Definition:</b> <a href="PtrState_8h_source.html#l00042">PtrState.h:42</a></div></div>
<div class="ttc" id="agroup__ARCUtilities_html_ga3e31fa79553c53df380d4054de2ca1c9"><div class="ttname"><a href="group__ARCUtilities.html#ga3e31fa79553c53df380d4054de2ca1c9">FindSingleUseIdentifiedObject</a></div><div class="ttdeci">static const Value * FindSingleUseIdentifiedObject(const Value *Arg)</div><div class="ttdoc">This is similar to GetRCIdentityRoot but it stops as soon as it finds a value with multiple uses.</div><div class="ttdef"><b>Definition:</b> <a href="ObjCARCOpts_8cpp_source.html#l00086">ObjCARCOpts.cpp:86</a></div></div>
<div class="ttc" id="agroup__ARCOpt_html_gad041beb9ed4fa6d780a7b0618bd24876"><div class="ttname"><a href="group__ARCOpt.html#gad041beb9ed4fa6d780a7b0618bd24876">FindPredecessorRetainWithSafePath</a></div><div class="ttdeci">static CallInst * FindPredecessorRetainWithSafePath(const Value *Arg, BasicBlock *BB, Instruction *Autorelease, ProvenanceAnalysis &amp;PA)</div><div class="ttdoc">Find a dependent retain that precedes the given autorelease for which there is nothing in between the...</div><div class="ttdef"><b>Definition:</b> <a href="ObjCARCOpts_8cpp_source.html#l02285">ObjCARCOpts.cpp:2285</a></div></div>
<div class="ttc" id="aclassPredicateT_html"><div class="ttname"><a href="classPredicateT.html">PredicateT</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a2ee2de2efa05f2abb95007892fc559a4"><div class="ttname"><a href="classllvm_1_1Type.html#a2ee2de2efa05f2abb95007892fc559a4">llvm::Type::getInt1PtrTy</a></div><div class="ttdeci">static PointerType * getInt1PtrTy(LLVMContext &amp;C, unsigned AS=0)</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00289">Type.cpp:289</a></div></div>
<div class="ttc" id="anamespacellvm_1_1objcarc_html_a845b8f76f8bd22e4e2eb851121db306daac10e4a5d85a196bcb2578c2700f3ff3"><div class="ttname"><a href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306daac10e4a5d85a196bcb2578c2700f3ff3">llvm::objcarc::S_Retain</a></div><div class="ttdeci">@ S_Retain</div><div class="ttdoc">objc_retain(x).</div><div class="ttdef"><b>Definition:</b> <a href="PtrState_8h_source.html#l00043">PtrState.h:43</a></div></div>
<div class="ttc" id="anamespacellvm_1_1MCID_html_ab357441fcd1ea1f9b0d27c12700f6023a463baf545246fea9718664d933ffe66f"><div class="ttname"><a href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a463baf545246fea9718664d933ffe66f">llvm::MCID::Call</a></div><div class="ttdeci">@ Call</div><div class="ttdef"><b>Definition:</b> <a href="MCInstrDesc_8h_source.html#l00156">MCInstrDesc.h:156</a></div></div>
<div class="ttc" id="aclassllvm_1_1objcarc_1_1ProvenanceAnalysis_html_a746f7f7833928dfd2e5dec71aad6d240"><div class="ttname"><a href="classllvm_1_1objcarc_1_1ProvenanceAnalysis.html#a746f7f7833928dfd2e5dec71aad6d240">llvm::objcarc::ProvenanceAnalysis::setAA</a></div><div class="ttdeci">void setAA(AAResults *aa)</div><div class="ttdef"><b>Definition:</b> <a href="ProvenanceAnalysis_8h_source.html#l00071">ProvenanceAnalysis.h:71</a></div></div>
<div class="ttc" id="aclassllvm_1_1PHINode_html_aef51af4b490af6b3bf2dfbc8737a8f9f"><div class="ttname"><a href="classllvm_1_1PHINode.html#aef51af4b490af6b3bf2dfbc8737a8f9f">llvm::PHINode::getNumIncomingValues</a></div><div class="ttdeci">unsigned getNumIncomingValues() const</div><div class="ttdoc">Return the number of incoming edges.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02790">Instructions.h:2790</a></div></div>
<div class="ttc" id="astructllvm_1_1objcarc_1_1RRInfo_html_aed932d067cad4f2d928df9bee21af52a"><div class="ttname"><a href="structllvm_1_1objcarc_1_1RRInfo.html#aed932d067cad4f2d928df9bee21af52a">llvm::objcarc::RRInfo::ReverseInsertPts</a></div><div class="ttdeci">SmallPtrSet&lt; Instruction *, 2 &gt; ReverseInsertPts</div><div class="ttdoc">The set of optimal insert positions for moving calls in the opposite sequence.</div><div class="ttdef"><b>Definition:</b> <a href="PtrState_8h_source.html#l00084">PtrState.h:84</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_a9d7de807ebdfe1819df3ff6cb0f16158"><div class="ttname"><a href="classllvm_1_1Value.html#a9d7de807ebdfe1819df3ff6cb0f16158">llvm::Value::use_empty</a></div><div class="ttdeci">bool use_empty() const</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00344">Value.h:344</a></div></div>
<div class="ttc" id="anamespacellvm_1_1objcarc_html_a494b44abeacdfac8bb26d3203571d1c2"><div class="ttname"><a href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2">llvm::objcarc::ARCInstKind</a></div><div class="ttdeci">ARCInstKind</div><div class="ttdef"><b>Definition:</b> <a href="ObjCARCInstKind_8h_source.html#l00028">ObjCARCInstKind.h:28</a></div></div>
<div class="ttc" id="aType_8h_html"><div class="ttname"><a href="Type_8h.html">Type.h</a></div></div>
<div class="ttc" id="anamespacellvm_1_1objcarc_html_a392f31f4801522bd6062e369302d83a1"><div class="ttname"><a href="namespacellvm_1_1objcarc.html#a392f31f4801522bd6062e369302d83a1">llvm::objcarc::IsAlwaysTail</a></div><div class="ttdeci">bool IsAlwaysTail(ARCInstKind Class)</div><div class="ttdoc">Test if the given class represents instructions which are always safe to mark with the &quot;tail&quot; keyword...</div><div class="ttdef"><b>Definition:</b> <a href="ObjCARCInstKind_8cpp_source.html#l00520">ObjCARCInstKind.cpp:520</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_ae22f493ba8327ce92e87d3b96bce7017"><div class="ttname"><a href="classllvm_1_1Instruction.html#ae22f493ba8327ce92e87d3b96bce7017">llvm::Instruction::getMetadata</a></div><div class="ttdeci">MDNode * getMetadata(unsigned KindID) const</div><div class="ttdoc">Get the metadata of given kind attached to this Instruction.</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00275">Instruction.h:275</a></div></div>
<div class="ttc" id="aIR_2CFG_8h_html"><div class="ttname"><a href="IR_2CFG_8h.html">CFG.h</a></div></div>
<div class="ttc" id="anamespacellvm_1_1dxil_1_1PointerTypeAnalysis_html_ae574a4c1d84b9e67bc94489f356805b4"><div class="ttname"><a href="namespacellvm_1_1dxil_1_1PointerTypeAnalysis.html#ae574a4c1d84b9e67bc94489f356805b4">llvm::dxil::PointerTypeAnalysis::run</a></div><div class="ttdeci">PointerTypeMap run(const Module &amp;M)</div><div class="ttdoc">Compute the PointerTypeMap for the module M.</div><div class="ttdef"><b>Definition:</b> <a href="PointerTypeAnalysis_8cpp_source.html#l00189">PointerTypeAnalysis.cpp:189</a></div></div>
<div class="ttc" id="aARCRuntimeEntryPoints_8h_html"><div class="ttname"><a href="ARCRuntimeEntryPoints_8h.html">ARCRuntimeEntryPoints.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1InvokeInst_html"><div class="ttname"><a href="classllvm_1_1InvokeInst.html">llvm::InvokeInst</a></div><div class="ttdoc">Invoke instruction.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03814">Instructions.h:3814</a></div></div>
<div class="ttc" id="anamespacellvm_1_1objcarc_html_a494b44abeacdfac8bb26d3203571d1c2a4ee466dcf60bef3376060be50d45cdda"><div class="ttname"><a href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2a4ee466dcf60bef3376060be50d45cdda">llvm::objcarc::ARCInstKind::AutoreleasepoolPop</a></div><div class="ttdeci">@ AutoreleasepoolPop</div><div class="ttdoc">objc_autoreleasePoolPop</div></div>
<div class="ttc" id="agroup__ARCOpt_html_gadeda37f659507cbc25bbc0b742a16fad"><div class="ttname"><a href="group__ARCOpt.html#gadeda37f659507cbc25bbc0b742a16fad">HasSafePathToPredecessorCall</a></div><div class="ttdeci">static CallInst * HasSafePathToPredecessorCall(const Value *Arg, Instruction *Retain, ProvenanceAnalysis &amp;PA)</div><div class="ttdoc">Check if there is a dependent call earlier that does not have anything in between the Retain and the ...</div><div class="ttdef"><b>Definition:</b> <a href="ObjCARCOpts_8cpp_source.html#l02264">ObjCARCOpts.cpp:2264</a></div></div>
<div class="ttc" id="aBasicBlock_8h_html"><div class="ttname"><a href="BasicBlock_8h.html">BasicBlock.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1cl_1_1opt_html"><div class="ttname"><a href="classllvm_1_1cl_1_1opt.html">llvm::cl::opt</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l01410">CommandLine.h:1410</a></div></div>
<div class="ttc" id="anamespacellvm_html_a7e3e687ddfdcbacd404bcf17b917dd88"><div class="ttname"><a href="namespacellvm.html#a7e3e687ddfdcbacd404bcf17b917dd88">llvm::instructions</a></div><div class="ttdeci">inst_range instructions(Function *F)</div><div class="ttdef"><b>Definition:</b> <a href="InstIterator_8h_source.html#l00133">InstIterator.h:133</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PPC_html_a14028f7fe73a11dabc6583510cc0a355"><div class="ttname"><a href="namespacellvm_1_1PPC.html#a14028f7fe73a11dabc6583510cc0a355">llvm::PPC::Predicate</a></div><div class="ttdeci">Predicate</div><div class="ttdoc">Predicate - These are &quot;(BI &lt;&lt; 5) | BO&quot; for various predicates.</div><div class="ttdef"><b>Definition:</b> <a href="PPCPredicates_8h_source.html#l00026">PPCPredicates.h:26</a></div></div>
<div class="ttc" id="aclassllvm_1_1StoreInst_html"><div class="ttname"><a href="classllvm_1_1StoreInst.html">llvm::StoreInst</a></div><div class="ttdoc">An instruction for storing to memory.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00301">Instructions.h:301</a></div></div>
<div class="ttc" id="aADT_2tmp_8txt_html_aa10ee7493bddf2c751ca6e05451ef410"><div class="ttname"><a href="ADT_2tmp_8txt.html#aa10ee7493bddf2c751ca6e05451ef410">unsigned</a></div><div class="ttdeci">Class for arbitrary precision integers APInt is a functional replacement for common case unsigned integer type like unsigned</div><div class="ttdef"><b>Definition:</b> <a href="ADT_2tmp_8txt_source.html#l00001">tmp.txt:1</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_ae6b978645b8ac72d1a35e1298ffdd4f0"><div class="ttname"><a href="classllvm_1_1Instruction.html#ae6b978645b8ac72d1a35e1298ffdd4f0">llvm::Instruction::eraseFromParent</a></div><div class="ttdeci">SymbolTableList&lt; Instruction &gt;::iterator eraseFromParent()</div><div class="ttdoc">This method unlinks 'this' from the containing basic block and deletes it.</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8cpp_source.html#l00082">Instruction.cpp:82</a></div></div>
<div class="ttc" id="aProvenanceAnalysis_8h_html"><div class="ttname"><a href="ProvenanceAnalysis_8h.html">ProvenanceAnalysis.h</a></div></div>
<div class="ttc" id="anamespacellvm_1_1objcarc_html_a749ec59e4812b00a3cf7e7036fb39c06ab1ec2e3fd61b7a763d9173e07016906c"><div class="ttname"><a href="namespacellvm_1_1objcarc.html#a749ec59e4812b00a3cf7e7036fb39c06ab1ec2e3fd61b7a763d9173e07016906c">llvm::objcarc::ARCMDKindID::ImpreciseRelease</a></div><div class="ttdeci">@ ImpreciseRelease</div></div>
<div class="ttc" id="aclassllvm_1_1BlotMapVector_html"><div class="ttname"><a href="classllvm_1_1BlotMapVector.html">llvm::BlotMapVector</a></div><div class="ttdoc">An associative container with fast insertion-order (deterministic) iteration over its elements.</div><div class="ttdef"><b>Definition:</b> <a href="BlotMapVector_8h_source.html#l00022">BlotMapVector.h:22</a></div></div>
<div class="ttc" id="aclassllvm_1_1PointerType_html_a8db49fd5069f21d514e7bb0fd11f0902"><div class="ttname"><a href="classllvm_1_1PointerType.html#a8db49fd5069f21d514e7bb0fd11f0902">llvm::PointerType::getUnqual</a></div><div class="ttdeci">static PointerType * getUnqual(Type *ElementType)</div><div class="ttdoc">This constructs a pointer to an object of the specified type in the default address space (address sp...</div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00651">DerivedTypes.h:651</a></div></div>
<div class="ttc" id="anamespacellvm_html_a3a3a97fed79c86bf242b0f090e1cb2e6"><div class="ttname"><a href="namespacellvm.html#a3a3a97fed79c86bf242b0f090e1cb2e6">llvm::colorEHFunclets</a></div><div class="ttdeci">DenseMap&lt; BasicBlock *, ColorVector &gt; colorEHFunclets(Function &amp;F)</div><div class="ttdoc">If an EH funclet personality is in use (see isFuncletEHPersonality), this will recompute which blocks...</div><div class="ttdef"><b>Definition:</b> <a href="EHPersonalities_8cpp_source.html#l00097">EHPersonalities.cpp:97</a></div></div>
<div class="ttc" id="anamespacellvm_1_1objcarc_html_aab5dadb7739df912c9522e75271c6984"><div class="ttname"><a href="namespacellvm_1_1objcarc.html#aab5dadb7739df912c9522e75271c6984">llvm::objcarc::IsNoThrow</a></div><div class="ttdeci">bool IsNoThrow(ARCInstKind Class)</div><div class="ttdoc">Test if the given class represents instructions which are always safe to mark with the nounwind attri...</div><div class="ttdef"><b>Definition:</b> <a href="ObjCARCInstKind_8cpp_source.html#l00595">ObjCARCInstKind.cpp:595</a></div></div>
<div class="ttc" id="anamespacellvm_1_1objcarc_html_a845b8f76f8bd22e4e2eb851121db306daadd43d88dff4dfb5f9620f2151822b64"><div class="ttname"><a href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306daadd43d88dff4dfb5f9620f2151822b64">llvm::objcarc::S_Stop</a></div><div class="ttdeci">@ S_Stop</div><div class="ttdoc">code motion is stopped.</div><div class="ttdef"><b>Definition:</b> <a href="PtrState_8h_source.html#l00046">PtrState.h:46</a></div></div>
<div class="ttc" id="aclassllvm_1_1LLVMContext_html"><div class="ttname"><a href="classllvm_1_1LLVMContext.html">llvm::LLVMContext</a></div><div class="ttdoc">This is an important class for using LLVM in a threaded context.</div><div class="ttdef"><b>Definition:</b> <a href="LLVMContext_8h_source.html#l00067">LLVMContext.h:67</a></div></div>
<div class="ttc" id="anamespacellvm_1_1objcarc_html_a749ec59e4812b00a3cf7e7036fb39c06adfb5efff844959d1f14f5450c9cefe8f"><div class="ttname"><a href="namespacellvm_1_1objcarc.html#a749ec59e4812b00a3cf7e7036fb39c06adfb5efff844959d1f14f5450c9cefe8f">llvm::objcarc::ARCMDKindID::NoObjCARCExceptions</a></div><div class="ttdeci">@ NoObjCARCExceptions</div></div>
<div class="ttc" id="anamespacellvm_1_1numbers_html_a92f4283d4e0e2ea1776894b3ae93640f"><div class="ttname"><a href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">llvm::numbers::e</a></div><div class="ttdeci">constexpr double e</div><div class="ttdef"><b>Definition:</b> <a href="MathExtras_8h_source.html#l00031">MathExtras.h:31</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseMap_html"><div class="ttname"><a href="classllvm_1_1DenseMap.html">llvm::DenseMap</a></div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00714">DenseMap.h:714</a></div></div>
<div class="ttc" id="aclassllvm_1_1objcarc_1_1BundledRetainClaimRVs_html_a8fdb3ab3875b4306157d47d84e972405"><div class="ttname"><a href="classllvm_1_1objcarc_1_1BundledRetainClaimRVs.html#a8fdb3ab3875b4306157d47d84e972405">llvm::objcarc::BundledRetainClaimRVs::insertAfterInvokes</a></div><div class="ttdeci">std::pair&lt; bool, bool &gt; insertAfterInvokes(Function &amp;F, DominatorTree *DT)</div><div class="ttdoc">Insert a retainRV/claimRV call to the normal destination blocks of invokes with operand bundle &quot;clang...</div><div class="ttdef"><b>Definition:</b> <a href="ObjCARC_8cpp_source.html#l00044">ObjCARC.cpp:44</a></div></div>
<div class="ttc" id="aMD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00058">MD5.cpp:58</a></div></div>
<div class="ttc" id="anamespacellvm_html_a3720211f6e6389ab53734b989bfb6fce"><div class="ttname"><a href="namespacellvm.html#a3720211f6e6389ab53734b989bfb6fce">llvm::succ_begin</a></div><div class="ttdeci">Interval::succ_iterator succ_begin(Interval *I)</div><div class="ttdoc">succ_begin/succ_end - define methods so that Intervals may be used just like BasicBlocks can with the...</div><div class="ttdef"><b>Definition:</b> <a href="Interval_8h_source.html#l00099">Interval.h:99</a></div></div>
<div class="ttc" id="anamespacellvm_html_a5309dbf19ec5ccffe3072c6087e106d3"><div class="ttname"><a href="namespacellvm.html#a5309dbf19ec5ccffe3072c6087e106d3">llvm::isScopedEHPersonality</a></div><div class="ttdeci">bool isScopedEHPersonality(EHPersonality Pers)</div><div class="ttdoc">Returns true if this personality uses scope-style EH IR instructions: catchswitch,...</div><div class="ttdef"><b>Definition:</b> <a href="EHPersonalities_8h_source.html#l00079">EHPersonalities.h:79</a></div></div>
<div class="ttc" id="aclassllvm_1_1GetElementPtrInst_html"><div class="ttname"><a href="classllvm_1_1GetElementPtrInst.html">llvm::GetElementPtrInst</a></div><div class="ttdoc">an instruction for type-safe pointer arithmetic to access elements of arrays and structs</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00940">Instructions.h:940</a></div></div>
<div class="ttc" id="anamespacellvm_1_1cl_html_a10a041239ae1870cfcc064bfaa79fb65"><div class="ttname"><a href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">llvm::cl::init</a></div><div class="ttdeci">initializer&lt; Ty &gt; init(const Ty &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00445">CommandLine.h:445</a></div></div>
<div class="ttc" id="anamespacellvm_html_a8154638df88e4eaa568b67b23d463dac"><div class="ttname"><a href="namespacellvm.html#a8154638df88e4eaa568b67b23d463dac">llvm::make_early_inc_range</a></div><div class="ttdeci">iterator_range&lt; early_inc_iterator_impl&lt; detail::IterOfRange&lt; RangeT &gt; &gt; &gt; make_early_inc_range(RangeT &amp;&amp;Range)</div><div class="ttdoc">Make a range that does early increment to allow mutation of the underlying range without disrupting i...</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l00721">STLExtras.h:721</a></div></div>
<div class="ttc" id="anamespacellvm_html_acd1cd968cb420c82d70926920fcdc7d7"><div class="ttname"><a href="namespacellvm.html#acd1cd968cb420c82d70926920fcdc7d7">llvm::is_contained</a></div><div class="ttdeci">bool is_contained(R &amp;&amp;Range, const E &amp;Element)</div><div class="ttdoc">Wrapper function around std::find to detect if an element exists in a container.</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l01869">STLExtras.h:1869</a></div></div>
<div class="ttc" id="aObjCARCInstKind_8h_html"><div class="ttname"><a href="ObjCARCInstKind_8h.html">ObjCARCInstKind.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseMapBase_html_a0c047f127ed4380a6f383d70bec4eb94"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#a0c047f127ed4380a6f383d70bec4eb94">llvm::DenseMapBase&lt; DenseMap&lt; KeyT, ValueT, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;, KeyT, ValueT, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;::find</a></div><div class="ttdeci">iterator find(const_arg_type_t&lt; KeyT &gt; Val)</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00150">DenseMap.h:150</a></div></div>
<div class="ttc" id="astructllvm_1_1objcarc_1_1RRInfo_html_ac9afa1dadab0e6367ce487573142be4e"><div class="ttname"><a href="structllvm_1_1objcarc_1_1RRInfo.html#ac9afa1dadab0e6367ce487573142be4e">llvm::objcarc::RRInfo::IsTailCallRelease</a></div><div class="ttdeci">bool IsTailCallRelease</div><div class="ttdoc">True of the objc_release calls are all marked with the &quot;tail&quot; keyword.</div><div class="ttdef"><b>Definition:</b> <a href="PtrState_8h_source.html#l00072">PtrState.h:72</a></div></div>
<div class="ttc" id="agroup__ARCOpt_html_ga88b57387a1e0d73c6481fb274f076bb2"><div class="ttname"><a href="group__ARCOpt.html#ga88b57387a1e0d73c6481fb274f076bb2">isInertARCValue</a></div><div class="ttdeci">static bool isInertARCValue(Value *V, SmallPtrSet&lt; Value *, 1 &gt; &amp;VisitedPhis)</div><div class="ttdoc">This function returns true if the value is inert.</div><div class="ttdef"><b>Definition:</b> <a href="ObjCARCOpts_8cpp_source.html#l00860">ObjCARCOpts.cpp:860</a></div></div>
<div class="ttc" id="anamespacellvm_1_1objcarc_html_a845b8f76f8bd22e4e2eb851121db306daff34dfb06d8316048c533bac105bfbe6"><div class="ttname"><a href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306daff34dfb06d8316048c533bac105bfbe6">llvm::objcarc::S_MovableRelease</a></div><div class="ttdeci">@ S_MovableRelease</div><div class="ttdoc">objc_release(x), !clang.imprecise_release.</div><div class="ttdef"><b>Definition:</b> <a href="PtrState_8h_source.html#l00047">PtrState.h:47</a></div></div>
<div class="ttc" id="aSILowerControlFlow_8cpp_html_a4868c5d81c5ccc98c47aeab6244346a0"><div class="ttname"><a href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a></div><div class="ttdeci">assert(ImpDefSCC.getReg()==AMDGPU::SCC &amp;&amp;ImpDefSCC.isDef())</div></div>
<div class="ttc" id="anamespacellvm_1_1NVPTXISD_html_ab995b6d422b079c863075e073b2eb96ba21855f12c873f2db9747f91d62c65b40"><div class="ttname"><a href="namespacellvm_1_1NVPTXISD.html#ab995b6d422b079c863075e073b2eb96ba21855f12c873f2db9747f91d62c65b40">llvm::NVPTXISD::CallArg</a></div><div class="ttdeci">@ CallArg</div><div class="ttdef"><b>Definition:</b> <a href="NVPTXISelLowering_8h_source.html#l00040">NVPTXISelLowering.h:40</a></div></div>
<div class="ttc" id="anamespacellvm_1_1objcarc_html_a353f4c1f85416c596ecaa9c4d5afca75a197563bb332a0ac8f6b578e8b6fcf0a7"><div class="ttname"><a href="namespacellvm_1_1objcarc.html#a353f4c1f85416c596ecaa9c4d5afca75a197563bb332a0ac8f6b578e8b6fcf0a7">llvm::objcarc::CanChangeRetainCount</a></div><div class="ttdeci">@ CanChangeRetainCount</div><div class="ttdef"><b>Definition:</b> <a href="DependencyAnalysis_8h_source.html#l00047">DependencyAnalysis.h:47</a></div></div>
<div class="ttc" id="aTargetLibraryInfo_8cpp_html_aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053"><div class="ttname"><a href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a></div><div class="ttdeci">@ Ptr</div><div class="ttdef"><b>Definition:</b> <a href="TargetLibraryInfo_8cpp_source.html#l00062">TargetLibraryInfo.cpp:62</a></div></div>
<div class="ttc" id="anamespacellvm_1_1objcarc_html_a6771e7364c5ab8a6354f744fe5bbc62b"><div class="ttname"><a href="namespacellvm_1_1objcarc.html#a6771e7364c5ab8a6354f744fe5bbc62b">llvm::objcarc::EnableARCOpts</a></div><div class="ttdeci">bool EnableARCOpts</div><div class="ttdoc">A handy option to enable/disable all ARC Optimizations.</div><div class="ttdef"><b>Definition:</b> <a href="ObjCARCAnalysisUtils_8cpp_source.html#l00023">ObjCARCAnalysisUtils.cpp:23</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_ae8eaa0b4eeac52a2b2282cb1bfd981ae"><div class="ttname"><a href="classllvm_1_1Type.html#ae8eaa0b4eeac52a2b2282cb1bfd981ae">llvm::Type::isVoidTy</a></div><div class="ttdeci">bool isVoidTy() const</div><div class="ttdoc">Return true if this is 'void'.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00140">Type.h:140</a></div></div>
<div class="ttc" id="anamespacellvm_1_1objcarc_html_a349b82bbe060500b58c6ca86ac8b6ea6"><div class="ttname"><a href="namespacellvm_1_1objcarc.html#a349b82bbe060500b58c6ca86ac8b6ea6">llvm::objcarc::IsRetain</a></div><div class="ttdeci">bool IsRetain(ARCInstKind Class)</div><div class="ttdoc">Test if the given class is objc_retain or equivalent.</div><div class="ttdef"><b>Definition:</b> <a href="ObjCARCInstKind_8cpp_source.html#l00344">ObjCARCInstKind.cpp:344</a></div></div>
<div class="ttc" id="aObjCARCAliasAnalysis_8h_html"><div class="ttname"><a href="ObjCARCAliasAnalysis_8h.html">ObjCARCAliasAnalysis.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1objcarc_1_1BundledRetainClaimRVs_html_a15ce779c3eeee5e7f15aa8e0a1b19065"><div class="ttname"><a href="classllvm_1_1objcarc_1_1BundledRetainClaimRVs.html#a15ce779c3eeee5e7f15aa8e0a1b19065">llvm::objcarc::BundledRetainClaimRVs::insertRVCall</a></div><div class="ttdeci">CallInst * insertRVCall(Instruction *InsertPt, CallBase *AnnotatedCall)</div><div class="ttdoc">Insert a retainRV/claimRV call.</div><div class="ttdef"><b>Definition:</b> <a href="ObjCARC_8cpp_source.html#l00074">ObjCARC.cpp:74</a></div></div>
<div class="ttc" id="anamespacellvm_1_1objcarc_html"><div class="ttname"><a href="namespacellvm_1_1objcarc.html">llvm::objcarc</a></div><div class="ttdef"><b>Definition:</b> <a href="ObjCARCAliasAnalysis_8h_source.html#l00029">ObjCARCAliasAnalysis.h:29</a></div></div>
<div class="ttc" id="anamespacellvm_1_1objcarc_html_a509cccdade23eb44c7f84b31238dd52c"><div class="ttname"><a href="namespacellvm_1_1objcarc.html#a509cccdade23eb44c7f84b31238dd52c">llvm::objcarc::IsObjCIdentifiedObject</a></div><div class="ttdeci">bool IsObjCIdentifiedObject(const Value *V)</div><div class="ttdoc">Return true if this value refers to a distinct and identifiable object.</div><div class="ttdef"><b>Definition:</b> <a href="ObjCARCAnalysisUtils_8h_source.html#l00186">ObjCARCAnalysisUtils.h:186</a></div></div>
<div class="ttc" id="aclassllvm_1_1Module_html"><div class="ttname"><a href="classllvm_1_1Module.html">llvm::Module</a></div><div class="ttdoc">A Module instance is used to store all the information related to an LLVM module.</div><div class="ttdef"><b>Definition:</b> <a href="Module_8h_source.html#l00065">Module.h:65</a></div></div>
<div class="ttc" id="aclassllvm_1_1MDNode_html"><div class="ttname"><a href="classllvm_1_1MDNode.html">llvm::MDNode</a></div><div class="ttdoc">Metadata node.</div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8h_source.html#l00943">Metadata.h:943</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseMapBase_html_a49c487a9395a6c384be8544cfb2cfccf"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#a49c487a9395a6c384be8544cfb2cfccf">llvm::DenseMapBase&lt; DenseMap&lt; KeyT, ValueT, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;, KeyT, ValueT, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;::empty</a></div><div class="ttdeci">bool empty() const</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00098">DenseMap.h:98</a></div></div>
<div class="ttc" id="agroup__ARCOpt_html_ga92b352b539d5bb9a2033082acdb09590"><div class="ttname"><a href="group__ARCOpt.html#ga92b352b539d5bb9a2033082acdb09590">getRCIdentityRootsFromReleaseInsertPt</a></div><div class="ttdeci">static const SmallPtrSet&lt; const Value *, 2 &gt; * getRCIdentityRootsFromReleaseInsertPt(const Instruction *InsertPt, const DenseMap&lt; const Instruction *, SmallPtrSet&lt; const Value *, 2 &gt;&gt; &amp;ReleaseInsertPtToRCIdentityRoots)</div><div class="ttdef"><b>Definition:</b> <a href="ObjCARCOpts_8cpp_source.html#l01478">ObjCARCOpts.cpp:1478</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSetImpl_html_a1f475b0df44ebd7169e720fa1bf9169e"><div class="ttname"><a href="classllvm_1_1SmallPtrSetImpl.html#a1f475b0df44ebd7169e720fa1bf9169e">llvm::SmallPtrSetImpl::count</a></div><div class="ttdeci">size_type count(ConstPtrType Ptr) const</div><div class="ttdoc">count - Return 1 if the specified pointer is in the set, 0 otherwise.</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00383">SmallPtrSet.h:383</a></div></div>
<div class="ttc" id="astructllvm_1_1objcarc_1_1RRInfo_html_ac287dbb01fd38c21bbf0dafdbcfcb8cf"><div class="ttname"><a href="structllvm_1_1objcarc_1_1RRInfo.html#ac287dbb01fd38c21bbf0dafdbcfcb8cf">llvm::objcarc::RRInfo::CFGHazardAfflicted</a></div><div class="ttdeci">bool CFGHazardAfflicted</div><div class="ttdoc">If this is true, we cannot perform code motion but can still remove retain/release pairs.</div><div class="ttdef"><b>Definition:</b> <a href="PtrState_8h_source.html#l00088">PtrState.h:88</a></div></div>
<div class="ttc" id="anamespacellvm_1_1objcarc_html_a77c263e77abfad00d916622aec23d468"><div class="ttname"><a href="namespacellvm_1_1objcarc.html#a77c263e77abfad00d916622aec23d468">llvm::objcarc::IsNoopInstruction</a></div><div class="ttdeci">bool IsNoopInstruction(const Instruction *I)</div><div class="ttdef"><b>Definition:</b> <a href="ObjCARCAnalysisUtils_8h_source.html#l00139">ObjCARCAnalysisUtils.h:139</a></div></div>
<div class="ttc" id="aclassllvm_1_1objcarc_1_1ARCMDKindCache_html"><div class="ttname"><a href="classllvm_1_1objcarc_1_1ARCMDKindCache.html">llvm::objcarc::ARCMDKindCache</a></div><div class="ttdoc">A cache of MDKinds used by various ARC optimizations.</div><div class="ttdef"><b>Definition:</b> <a href="ObjCARCAnalysisUtils_8h_source.html#l00228">ObjCARCAnalysisUtils.h:228</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSetImplBase_html_a16413f1a88d8baca228d0a1b4cc0bfc6"><div class="ttname"><a href="classllvm_1_1SmallPtrSetImplBase.html#a16413f1a88d8baca228d0a1b4cc0bfc6">llvm::SmallPtrSetImplBase::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00095">SmallPtrSet.h:95</a></div></div>
<div class="ttc" id="agroup__ARCOpt_html_ga45f3fc22ab783daa2633eb87b410c2d4"><div class="ttname"><a href="group__ARCOpt.html#ga45f3fc22ab783daa2633eb87b410c2d4">FindPredecessorAutoreleaseWithSafePath</a></div><div class="ttdeci">static CallInst * FindPredecessorAutoreleaseWithSafePath(const Value *Arg, BasicBlock *BB, ReturnInst *Ret, ProvenanceAnalysis &amp;PA)</div><div class="ttdoc">Look for an `autorelease' instruction dependent on Arg such that there are no instructions dependen...</div><div class="ttdef"><b>Definition:</b> <a href="ObjCARCOpts_8cpp_source.html#l02304">ObjCARCOpts.cpp:2304</a></div></div>
<div class="ttc" id="anamespacellvm_1_1objcarc_html_a4097309046dda09214babc993d35c679"><div class="ttname"><a href="namespacellvm_1_1objcarc.html#a4097309046dda09214babc993d35c679">llvm::objcarc::IsNullOrUndef</a></div><div class="ttdeci">bool IsNullOrUndef(const Value *V)</div><div class="ttdef"><b>Definition:</b> <a href="ObjCARCAnalysisUtils_8h_source.html#l00135">ObjCARCAnalysisUtils.h:135</a></div></div>
<div class="ttc" id="aclassllvm_1_1objcarc_1_1PtrState_html_aee65472e4d66de6d1d50f8e54fdcf54c"><div class="ttname"><a href="classllvm_1_1objcarc_1_1PtrState.html#aee65472e4d66de6d1d50f8e54fdcf54c">llvm::objcarc::PtrState::IsKnownSafe</a></div><div class="ttdeci">bool IsKnownSafe() const</div><div class="ttdef"><b>Definition:</b> <a href="PtrState_8h_source.html#l00119">PtrState.h:119</a></div></div>
<div class="ttc" id="aclassllvm_1_1TinyPtrVector_html_aac784c7664f3f6b8076756c6fb0eed74"><div class="ttname"><a href="classllvm_1_1TinyPtrVector.html#aac784c7664f3f6b8076756c6fb0eed74">llvm::TinyPtrVector::size</a></div><div class="ttdeci">unsigned size() const</div><div class="ttdef"><b>Definition:</b> <a href="TinyPtrVector_8h_source.html#l00171">TinyPtrVector.h:171</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallBase_html_a1b38c4ecbbce4814b679f08b72b1d67f"><div class="ttname"><a href="classllvm_1_1CallBase.html#a1b38c4ecbbce4814b679f08b72b1d67f">llvm::CallBase::getOperandBundleAt</a></div><div class="ttdeci">OperandBundleUse getOperandBundleAt(unsigned Index) const</div><div class="ttdoc">Return the operand bundle at a specific index.</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l02005">InstrTypes.h:2005</a></div></div>
<div class="ttc" id="aSupport_2ErrorHandling_8h_html_ace243f5c25697a1107cce46626b3dc94"><div class="ttname"><a href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a></div><div class="ttdeci">#define llvm_unreachable(msg)</div><div class="ttdoc">Marks that the current location is not supposed to be reachable.</div><div class="ttdef"><b>Definition:</b> <a href="Support_2ErrorHandling_8h_source.html#l00143">ErrorHandling.h:143</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_a6393a2d4fe7e10b28a0dcc35f881567b"><div class="ttname"><a href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">llvm::Value::getType</a></div><div class="ttdeci">Type * getType() const</div><div class="ttdoc">All values are typed, get the type of this value.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00255">Value.h:255</a></div></div>
<div class="ttc" id="aclassllvm_1_1CFGAnalyses_html"><div class="ttname"><a href="classllvm_1_1CFGAnalyses.html">llvm::CFGAnalyses</a></div><div class="ttdoc">Represents analyses that only rely on functions' control flow.</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00113">PassManager.h:113</a></div></div>
<div class="ttc" id="astructllvm_1_1objcarc_1_1RRInfo_html_ab976ce410e551d37ce2f43177bb96995"><div class="ttname"><a href="structllvm_1_1objcarc_1_1RRInfo.html#ab976ce410e551d37ce2f43177bb96995">llvm::objcarc::RRInfo::ReleaseMetadata</a></div><div class="ttdeci">MDNode * ReleaseMetadata</div><div class="ttdoc">If the Calls are objc_release calls and they all have a clang.imprecise_release tag,...</div><div class="ttdef"><b>Definition:</b> <a href="PtrState_8h_source.html#l00076">PtrState.h:76</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_a3ab5fc45117b450e8bb04e564cb6e5f2"><div class="ttname"><a href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">llvm::Value::replaceAllUsesWith</a></div><div class="ttdeci">void replaceAllUsesWith(Value *V)</div><div class="ttdoc">Change all uses of this to point to a new Value.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00532">Value.cpp:532</a></div></div>
<div class="ttc" id="astructllvm_1_1OperandBundleUse_html"><div class="ttname"><a href="structllvm_1_1OperandBundleUse.html">llvm::OperandBundleUse</a></div><div class="ttdoc">A lightweight accessor for an operand bundle meant to be passed around by value.</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l01079">InstrTypes.h:1079</a></div></div>
<div class="ttc" id="aclassllvm_1_1AliasResult_html_a8d3de277fb70fa515efac2db2cfe9d57a863ee317b92588eb2d6878af9fc98922"><div class="ttname"><a href="classllvm_1_1AliasResult.html#a8d3de277fb70fa515efac2db2cfe9d57a863ee317b92588eb2d6878af9fc98922">llvm::AliasResult::NoAlias</a></div><div class="ttdeci">@ NoAlias</div><div class="ttdoc">The two locations do not alias at all.</div><div class="ttdef"><b>Definition:</b> <a href="AliasAnalysis_8h_source.html#l00101">AliasAnalysis.h:101</a></div></div>
<div class="ttc" id="aCompiler_8h_html"><div class="ttname"><a href="Compiler_8h.html">Compiler.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_ab3fc0225d8aaf8434026c3573f961f2c"><div class="ttname"><a href="classllvm_1_1Value.html#ab3fc0225d8aaf8434026c3573f961f2c">llvm::Value::getContext</a></div><div class="ttdeci">LLVMContext &amp; getContext() const</div><div class="ttdoc">All values hold a context through their type.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00994">Value.cpp:994</a></div></div>
<div class="ttc" id="aclassllvm_1_1AliasResult_html_a8d3de277fb70fa515efac2db2cfe9d57ac1a99a1af9a4778a61e5cc3e1d622180"><div class="ttname"><a href="classllvm_1_1AliasResult.html#a8d3de277fb70fa515efac2db2cfe9d57ac1a99a1af9a4778a61e5cc3e1d622180">llvm::AliasResult::MustAlias</a></div><div class="ttdeci">@ MustAlias</div><div class="ttdoc">The two locations precisely alias each other.</div><div class="ttdef"><b>Definition:</b> <a href="AliasAnalysis_8h_source.html#l00108">AliasAnalysis.h:108</a></div></div>
<div class="ttc" id="alib_2Target_2ARM_2README_8txt_html_a1b45f45820a60c09244a87eb59824aec"><div class="ttname"><a href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a></div><div class="ttdeci">add sub stmia L5 ldr r0 bl L_printf $stub Instead of a and a wouldn t it be better to do three moves *Return an aggregate type is even return S</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2ARM_2README_8txt_source.html#l00210">README.txt:210</a></div></div>
<div class="ttc" id="aclassllvm_1_1TrackingStatistic_html"><div class="ttname"><a href="classllvm_1_1TrackingStatistic.html">llvm::TrackingStatistic</a></div><div class="ttdef"><b>Definition:</b> <a href="Statistic_8h_source.html#l00050">Statistic.h:50</a></div></div>
<div class="ttc" id="aclassllvm_1_1objcarc_1_1PtrState_html_a1488167d90017e45843bfae0b00aaf49"><div class="ttname"><a href="classllvm_1_1objcarc_1_1PtrState.html#a1488167d90017e45843bfae0b00aaf49">llvm::objcarc::PtrState::GetSeq</a></div><div class="ttdeci">Sequence GetSeq() const</div><div class="ttdef"><b>Definition:</b> <a href="PtrState_8h_source.html#l00150">PtrState.h:150</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a0566221f10834bfcea70965379745a20"><div class="ttname"><a href="classllvm_1_1Type.html#a0566221f10834bfcea70965379745a20">llvm::Type::getContext</a></div><div class="ttdeci">LLVMContext &amp; getContext() const</div><div class="ttdoc">Return the LLVMContext in which this type was uniqued.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00129">Type.h:129</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoadInst_html"><div class="ttname"><a href="classllvm_1_1LoadInst.html">llvm::LoadInst</a></div><div class="ttdoc">An instruction for reading from memory.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00177">Instructions.h:177</a></div></div>
<div class="ttc" id="anamespacellvm_1_1objcarc_html_aa72ef5ef299b7531b84aafcf9c1f755f"><div class="ttname"><a href="namespacellvm_1_1objcarc.html#aa72ef5ef299b7531b84aafcf9c1f755f">llvm::objcarc::GetRCIdentityRoot</a></div><div class="ttdeci">const Value * GetRCIdentityRoot(const Value *V)</div><div class="ttdoc">The RCIdentity root of a value V is a dominating value U for which retaining or releasing U is equiva...</div><div class="ttdef"><b>Definition:</b> <a href="ObjCARCAnalysisUtils_8h_source.html#l00110">ObjCARCAnalysisUtils.h:110</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallBase_html_abc10b887caad109288ffceb230493a85"><div class="ttname"><a href="classllvm_1_1CallBase.html#abc10b887caad109288ffceb230493a85">llvm::CallBase::setArgOperand</a></div><div class="ttdeci">void setArgOperand(unsigned i, Value *v)</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l01356">InstrTypes.h:1356</a></div></div>
<div class="ttc" id="aSampleProfWriter_8cpp_html_ac5f3689931c7238da06ba00cf1002c62"><div class="ttname"><a href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a></div><div class="ttdeci">raw_pwrite_stream &amp; OS</div><div class="ttdef"><b>Definition:</b> <a href="SampleProfWriter_8cpp_source.html#l00053">SampleProfWriter.cpp:53</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_a966eb231e7d4e572874d2cb49b18faea"><div class="ttname"><a href="classllvm_1_1Value.html#a966eb231e7d4e572874d2cb49b18faea">llvm::Value::stripPointerCasts</a></div><div class="ttdeci">const Value * stripPointerCasts() const</div><div class="ttdoc">Strip off pointer casts, all-zero GEPs and address space casts.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00685">Value.cpp:685</a></div></div>
<div class="ttc" id="aObjCARCAnalysisUtils_8h_html"><div class="ttname"><a href="ObjCARCAnalysisUtils_8h.html">ObjCARCAnalysisUtils.h</a></div></div>
<div class="ttc" id="astructllvm_1_1objcarc_1_1RRInfo_html_a937b2f49aeebc9752e9ff219acbd93f0"><div class="ttname"><a href="structllvm_1_1objcarc_1_1RRInfo.html#a937b2f49aeebc9752e9ff219acbd93f0">llvm::objcarc::RRInfo::Calls</a></div><div class="ttdeci">SmallPtrSet&lt; Instruction *, 2 &gt; Calls</div><div class="ttdoc">For a top-down sequence, the set of objc_retains or objc_retainBlocks.</div><div class="ttdef"><b>Definition:</b> <a href="PtrState_8h_source.html#l00080">PtrState.h:80</a></div></div>
<div class="ttc" id="anamespacellvm_1_1objcarc_html_a494b44abeacdfac8bb26d3203571d1c2a56a1f8ca583bf2a38d53b7e7825bd269"><div class="ttname"><a href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2a56a1f8ca583bf2a38d53b7e7825bd269">llvm::objcarc::ARCInstKind::AutoreleasepoolPush</a></div><div class="ttdeci">@ AutoreleasepoolPush</div><div class="ttdoc">objc_autoreleasePoolPush</div></div>
<div class="ttc" id="aclassllvm_1_1BlotMapVector_html_a73e3ded01b65ddc78347be07e1a87a29"><div class="ttname"><a href="classllvm_1_1BlotMapVector.html#a73e3ded01b65ddc78347be07e1a87a29">llvm::BlotMapVector::find</a></div><div class="ttdeci">iterator find(const KeyT &amp;Key)</div><div class="ttdef"><b>Definition:</b> <a href="BlotMapVector_8h_source.html#l00079">BlotMapVector.h:79</a></div></div>
<div class="ttc" id="aObjCARCUtil_8h_html"><div class="ttname"><a href="ObjCARCUtil_8h.html">ObjCARCUtil.h</a></div></div>
<div class="ttc" id="aConstant_8h_html"><div class="ttname"><a href="Constant_8h.html">Constant.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantInt_html_a82dbbd8e3688b0bc1eedb338864d0d0c"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#a82dbbd8e3688b0bc1eedb338864d0d0c">llvm::ConstantInt::getTrue</a></div><div class="ttdeci">static ConstantInt * getTrue(LLVMContext &amp;Context)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00835">Constants.cpp:835</a></div></div>
<div class="ttc" id="aclassllvm_1_1objcarc_1_1ARCRuntimeEntryPoints_html"><div class="ttname"><a href="classllvm_1_1objcarc_1_1ARCRuntimeEntryPoints.html">llvm::objcarc::ARCRuntimeEntryPoints</a></div><div class="ttdoc">Declarations for ObjC runtime functions and constants.</div><div class="ttdef"><b>Definition:</b> <a href="ARCRuntimeEntryPoints_8h_source.html#l00052">ARCRuntimeEntryPoints.h:52</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseMapBase_html_a65520b9c67759099e313d0f4e7b5ff9e"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#a65520b9c67759099e313d0f4e7b5ff9e">llvm::DenseMapBase&lt; DenseMap&lt; KeyT, ValueT, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;, KeyT, ValueT, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00084">DenseMap.h:84</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AMDGPU_1_1SendMsg_html_a8594419a4ddfad2c9a79279c490e466d"><div class="ttname"><a href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">llvm::AMDGPU::SendMsg::Op</a></div><div class="ttdeci">Op</div><div class="ttdef"><b>Definition:</b> <a href="SIDefines_8h_source.html#l00357">SIDefines.h:357</a></div></div>
<div class="ttc" id="agroup__ARCOpt_html_ga3a319b49d26b9794c0cf855627fc36fa"><div class="ttname"><a href="group__ARCOpt.html#ga3a319b49d26b9794c0cf855627fc36fa">CheckForUseCFGHazard</a></div><div class="ttdeci">static void CheckForUseCFGHazard(const Sequence SuccSSeq, const bool SuccSRRIKnownSafe, TopDownPtrState &amp;S, bool &amp;SomeSuccHasSame, bool &amp;AllSuccsHaveSame, bool &amp;NotAllSeqEqualButKnownSafe, bool &amp;ShouldContinue)</div><div class="ttdoc">If we have a top down pointer in the S_Use state, make sure that there are no CFG hazards by checking...</div><div class="ttdef"><b>Definition:</b> <a href="ObjCARCOpts_8cpp_source.html#l01169">ObjCARCOpts.cpp:1169</a></div></div>
<div class="ttc" id="aclassllvm_1_1PreservedAnalyses_html_a1258a1ff55557c27684010ebd7283712"><div class="ttname"><a href="classllvm_1_1PreservedAnalyses.html#a1258a1ff55557c27684010ebd7283712">llvm::PreservedAnalyses::all</a></div><div class="ttdeci">static PreservedAnalyses all()</div><div class="ttdoc">Construct a special preserved set that preserves all passes.</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00158">PassManager.h:158</a></div></div>
<div class="ttc" id="aclassllvm_1_1objcarc_1_1ARCRuntimeEntryPoints_html_a565749e827bad7cb5bd425ac7ffd9414"><div class="ttname"><a href="classllvm_1_1objcarc_1_1ARCRuntimeEntryPoints.html#a565749e827bad7cb5bd425ac7ffd9414">llvm::objcarc::ARCRuntimeEntryPoints::get</a></div><div class="ttdeci">Function * get(ARCRuntimeEntryPointKind kind)</div><div class="ttdef"><b>Definition:</b> <a href="ARCRuntimeEntryPoints_8h_source.html#l00070">ARCRuntimeEntryPoints.h:70</a></div></div>
<div class="ttc" id="aGlobalVariable_8h_html"><div class="ttname"><a href="GlobalVariable_8h.html">GlobalVariable.h</a></div></div>
<div class="ttc" id="anamespacellvm_1_1objcarc_html_a494b44abeacdfac8bb26d3203571d1c2a4b72e11620e2360a97726a1554da02d2"><div class="ttname"><a href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2a4b72e11620e2360a97726a1554da02d2">llvm::objcarc::ARCInstKind::StoreWeak</a></div><div class="ttdeci">@ StoreWeak</div><div class="ttdoc">objc_storeWeak (primitive)</div></div>
<div class="ttc" id="anamespacellvm_html_a5eeaf08e96168c2cac8960f87f0ef360"><div class="ttname"><a href="namespacellvm.html#a5eeaf08e96168c2cac8960f87f0ef360">llvm::pred_end</a></div><div class="ttdeci">Interval::pred_iterator pred_end(Interval *I)</div><div class="ttdef"><b>Definition:</b> <a href="Interval_8h_source.html#l00112">Interval.h:112</a></div></div>
<div class="ttc" id="astructllvm_1_1objcarc_1_1TopDownPtrState_html"><div class="ttname"><a href="structllvm_1_1objcarc_1_1TopDownPtrState.html">llvm::objcarc::TopDownPtrState</a></div><div class="ttdef"><b>Definition:</b> <a href="PtrState_8h_source.html#l00189">PtrState.h:189</a></div></div>
<div class="ttc" id="aclassllvm_1_1objcarc_1_1BundledRetainClaimRVs_html_a2a3a24ed0274c01b34ef418b446bbfd8"><div class="ttname"><a href="classllvm_1_1objcarc_1_1BundledRetainClaimRVs.html#a2a3a24ed0274c01b34ef418b446bbfd8">llvm::objcarc::BundledRetainClaimRVs::contains</a></div><div class="ttdeci">bool contains(const Instruction *I) const</div><div class="ttdoc">See if an instruction is a bundled retainRV/claimRV call.</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Transforms_2ObjCARC_2ObjCARC_8h_source.html#l00124">ObjCARC.h:124</a></div></div>
<div class="ttc" id="aCasting_8h_html"><div class="ttname"><a href="Casting_8h.html">Casting.h</a></div></div>
<div class="ttc" id="aFunction_8h_html"><div class="ttname"><a href="Function_8h.html">Function.h</a></div></div>
<div class="ttc" id="anamespacellvm_1_1objcarc_html_a494b44abeacdfac8bb26d3203571d1c2a03973369165e1763744e9f56672dddad"><div class="ttname"><a href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2a03973369165e1763744e9f56672dddad">llvm::objcarc::ARCInstKind::DestroyWeak</a></div><div class="ttdeci">@ DestroyWeak</div><div class="ttdoc">objc_destroyWeak (derived)</div></div>
<div class="ttc" id="anamespacellvm_html_a945cded5463e0ccd3cf5a6ac80542a94"><div class="ttname"><a href="namespacellvm.html#a945cded5463e0ccd3cf5a6ac80542a94">llvm::inst_end</a></div><div class="ttdeci">inst_iterator inst_end(Function *F)</div><div class="ttdef"><b>Definition:</b> <a href="InstIterator_8h_source.html#l00132">InstIterator.h:132</a></div></div>
<div class="ttc" id="aclassllvm_1_1AAResults_html_a5c70adc73969ef8175ad49c101291cb4"><div class="ttname"><a href="classllvm_1_1AAResults.html#a5c70adc73969ef8175ad49c101291cb4">llvm::AAResults::alias</a></div><div class="ttdeci">AliasResult alias(const MemoryLocation &amp;LocA, const MemoryLocation &amp;LocB)</div><div class="ttdoc">The main low level interface to the alias analysis implementation.</div><div class="ttdef"><b>Definition:</b> <a href="AliasAnalysis_8cpp_source.html#l00105">AliasAnalysis.cpp:105</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html_aac0ea55010b7b1a301e65a0baea057aa"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">llvm::SmallVectorImpl::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00614">SmallVector.h:614</a></div></div>
<div class="ttc" id="anamespacellvm_1_1objcarc_html_a7a6c1dfa9b656660119d858a64521570"><div class="ttname"><a href="namespacellvm_1_1objcarc.html#a7a6c1dfa9b656660119d858a64521570">llvm::objcarc::findSingleDependency</a></div><div class="ttdeci">llvm::Instruction * findSingleDependency(DependenceKind Flavor, const Value *Arg, BasicBlock *StartBB, Instruction *StartInst, ProvenanceAnalysis &amp;PA)</div><div class="ttdoc">Find dependent instructions.</div><div class="ttdef"><b>Definition:</b> <a href="DependencyAnalysis_8cpp_source.html#l00258">DependencyAnalysis.cpp:258</a></div></div>
<div class="ttc" id="agroup__ARCOpt_html_ga5fd3f0408257b1a0df4a029c9b133d6c"><div class="ttname"><a href="group__ARCOpt.html#ga5fd3f0408257b1a0df4a029c9b133d6c">CheckForCanReleaseCFGHazard</a></div><div class="ttdeci">static void CheckForCanReleaseCFGHazard(const Sequence SuccSSeq, const bool SuccSRRIKnownSafe, TopDownPtrState &amp;S, bool &amp;SomeSuccHasSame, bool &amp;AllSuccsHaveSame, bool &amp;NotAllSeqEqualButKnownSafe)</div><div class="ttdoc">If we have a Top Down pointer in the S_CanRelease state, make sure that there are no CFG hazards by c...</div><div class="ttdef"><b>Definition:</b> <a href="ObjCARCOpts_8cpp_source.html#l01206">ObjCARCOpts.cpp:1206</a></div></div>
<div class="ttc" id="aclassllvm_1_1BlotMapVector_html_a447fee52003ca0e778c9fa372c3143d1"><div class="ttname"><a href="classllvm_1_1BlotMapVector.html#a447fee52003ca0e778c9fa372c3143d1">llvm::BlotMapVector::blot</a></div><div class="ttdeci">void blot(const KeyT &amp;Key)</div><div class="ttdoc">This is similar to erase, but instead of removing the element from the vector, it just zeros out the ...</div><div class="ttdef"><b>Definition:</b> <a href="BlotMapVector_8h_source.html#l00096">BlotMapVector.h:96</a></div></div>
<div class="ttc" id="anamespacellvm_1_1tgtok_html_abbc5259d649363016626e2529fabe0c5ada3eb06ada644390db065d37b3fd87ac"><div class="ttname"><a href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5ada3eb06ada644390db065d37b3fd87ac">llvm::tgtok::Class</a></div><div class="ttdeci">@ Class</div><div class="ttdef"><b>Definition:</b> <a href="TGLexer_8h_source.html#l00050">TGLexer.h:50</a></div></div>
<div class="ttc" id="aclassllvm_1_1objcarc_1_1ARCRuntimeEntryPoints_html_ad245a22b79f4982f4d74cb74f1c1a3f2"><div class="ttname"><a href="classllvm_1_1objcarc_1_1ARCRuntimeEntryPoints.html#ad245a22b79f4982f4d74cb74f1c1a3f2">llvm::objcarc::ARCRuntimeEntryPoints::init</a></div><div class="ttdeci">void init(Module *M)</div><div class="ttdef"><b>Definition:</b> <a href="ARCRuntimeEntryPoints_8h_source.html#l00056">ARCRuntimeEntryPoints.h:56</a></div></div>
<div class="ttc" id="anamespacellvm_1_1objcarc_html_af4e05bf48a81b884e707efa650560fbf"><div class="ttname"><a href="namespacellvm_1_1objcarc.html#af4e05bf48a81b884e707efa650560fbf">llvm::objcarc::EraseInstruction</a></div><div class="ttdeci">static void EraseInstruction(Instruction *CI)</div><div class="ttdoc">Erase the given instruction.</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Transforms_2ObjCARC_2ObjCARC_8h_source.html#l00039">ObjCARC.h:39</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a8f6f9b4a94dc0907499c03a9e1b6918b"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a8f6f9b4a94dc0907499c03a9e1b6918b">llvm::BasicBlock::back</a></div><div class="ttdeci">const Instruction &amp; back() const</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00328">BasicBlock.h:328</a></div></div>
<div class="ttc" id="anamespacellvm_html_a7e108932dc3da5294aed99a353aac9c4"><div class="ttname"><a href="namespacellvm.html#a7e108932dc3da5294aed99a353aac9c4">llvm::pred_begin</a></div><div class="ttdeci">Interval::pred_iterator pred_begin(Interval *I)</div><div class="ttdoc">pred_begin/pred_end - define methods so that Intervals may be used just like BasicBlocks can with the...</div><div class="ttdef"><b>Definition:</b> <a href="Interval_8h_source.html#l00109">Interval.h:109</a></div></div>
<div class="ttc" id="anamespacellvm_1_1objcarc_html_aa4b95e1b6c59a75f558794b32b644febaafece4245269582cb2f1009d4fb52047"><div class="ttname"><a href="namespacellvm_1_1objcarc.html#aa4b95e1b6c59a75f558794b32b644febaafece4245269582cb2f1009d4fb52047">llvm::objcarc::ARCRuntimeEntryPointKind::Retain</a></div><div class="ttdeci">@ Retain</div></div>
<div class="ttc" id="aInstructions_8h_html"><div class="ttname"><a href="Instructions_8h.html">Instructions.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1PreservedAnalyses_html_a937c42f77e161349ce0f999e448c7027"><div class="ttname"><a href="classllvm_1_1PreservedAnalyses.html#a937c42f77e161349ce0f999e448c7027">llvm::PreservedAnalyses::preserveSet</a></div><div class="ttdeci">void preserveSet()</div><div class="ttdoc">Mark an analysis set as preserved.</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00188">PassManager.h:188</a></div></div>
<div class="ttc" id="aELFYAML_8cpp_html_a941c34da9850676ce3380813c636cff2"><div class="ttname"><a href="ELFYAML_8cpp.html#a941c34da9850676ce3380813c636cff2">Other</a></div><div class="ttdeci">std::optional&lt; std::vector&lt; StOtherPiece &gt; &gt; Other</div><div class="ttdef"><b>Definition:</b> <a href="ELFYAML_8cpp_source.html#l01260">ELFYAML.cpp:1260</a></div></div>
<div class="ttc" id="anamespacellvm_1_1objcarc_html_a494b44abeacdfac8bb26d3203571d1c2a6adf97f83acf6453d4a6a4b1070f3754"><div class="ttname"><a href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2a6adf97f83acf6453d4a6a4b1070f3754">llvm::objcarc::ARCInstKind::None</a></div><div class="ttdeci">@ None</div><div class="ttdoc">anything that is inert from an ARC perspective.</div></div>
<div class="ttc" id="aSmallVector_8h_html"><div class="ttname"><a href="SmallVector_8h.html">SmallVector.h</a></div></div>
<div class="ttc" id="aUser_8h_html"><div class="ttname"><a href="User_8h.html">User.h</a></div></div>
<div class="ttc" id="ainclude_2llvm_2Transforms_2ObjCARC_8h_html"><div class="ttname"><a href="include_2llvm_2Transforms_2ObjCARC_8h.html">ObjCARC.h</a></div></div>
<div class="ttc" id="aPtrState_8h_html"><div class="ttname"><a href="PtrState_8h.html">PtrState.h</a></div></div>
<div class="ttc" id="agroup__ARCOpt_html_gac3778bafa67cdae223698e5bba785a76"><div class="ttname"><a href="group__ARCOpt.html#gac3778bafa67cdae223698e5bba785a76">ComputePostOrders</a></div><div class="ttdeci">static void ComputePostOrders(Function &amp;F, SmallVectorImpl&lt; BasicBlock * &gt; &amp;PostOrder, SmallVectorImpl&lt; BasicBlock * &gt; &amp;ReverseCFGPostOrder, unsigned NoObjCARCExceptionsMDKind, DenseMap&lt; const BasicBlock *, BBState &gt; &amp;BBStates)</div><div class="ttdef"><b>Definition:</b> <a href="ObjCARCOpts_8cpp_source.html#l01637">ObjCARCOpts.cpp:1637</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstIterator_html_a480b0e5fb6c8c298a2368f7c44ed8580"><div class="ttname"><a href="classllvm_1_1InstIterator.html#a480b0e5fb6c8c298a2368f7c44ed8580">llvm::InstIterator::getBasicBlockIterator</a></div><div class="ttdeci">BBIty &amp; getBasicBlockIterator()</div><div class="ttdef"><b>Definition:</b> <a href="InstIterator_8h_source.html#l00073">InstIterator.h:73</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallBase_html_ab2caa29167597390ab2fc3cf30d70389"><div class="ttname"><a href="classllvm_1_1CallBase.html#ab2caa29167597390ab2fc3cf30d70389">llvm::CallBase::getArgOperand</a></div><div class="ttdeci">Value * getArgOperand(unsigned i) const</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l01351">InstrTypes.h:1351</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a1a7f07aaef6a3bee130bf0e0f0536802"><div class="ttname"><a href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">llvm::Instruction::getParent</a></div><div class="ttdeci">const BasicBlock * getParent() const</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00090">Instruction.h:90</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html_a0c8ffe664a36e30d49c84d0aded2fe08"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#a0c8ffe664a36e30d49c84d0aded2fe08">llvm::SmallVectorImpl::pop_back_val</a></div><div class="ttdeci">T pop_back_val()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00677">SmallVector.h:677</a></div></div>
<div class="ttc" id="aclassllvm_1_1PHINode_html_a8ce0c4746a1ec805e66409d20ae93922"><div class="ttname"><a href="classllvm_1_1PHINode.html#a8ce0c4746a1ec805e66409d20ae93922">llvm::PHINode::getIncomingBlock</a></div><div class="ttdeci">BasicBlock * getIncomingBlock(unsigned i) const</div><div class="ttdoc">Return incoming basic block number i.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02814">Instructions.h:2814</a></div></div>
<div class="ttc" id="aclassllvm_1_1BlotMapVector_html_a1286e28d794e6763e70dfc26fee1a35a"><div class="ttname"><a href="classllvm_1_1BlotMapVector.html#a1286e28d794e6763e70dfc26fee1a35a">llvm::BlotMapVector::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdef"><b>Definition:</b> <a href="BlotMapVector_8h_source.html#l00104">BlotMapVector.h:104</a></div></div>
<div class="ttc" id="aIVUsers_8cpp_html_a4e5b9edb51eec9dbca592075eb64dfcb"><div class="ttname"><a href="IVUsers_8cpp.html#a4e5b9edb51eec9dbca592075eb64dfcb">Users</a></div><div class="ttdeci">iv Induction Variable Users</div><div class="ttdef"><b>Definition:</b> <a href="IVUsers_8cpp_source.html#l00048">IVUsers.cpp:48</a></div></div>
<div class="ttc" id="aclassllvm_1_1BlotMapVector_html_afe9bb2d89b79c53645c7adef310b66f9"><div class="ttname"><a href="classllvm_1_1BlotMapVector.html#afe9bb2d89b79c53645c7adef310b66f9">llvm::BlotMapVector::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="BlotMapVector_8h_source.html#l00050">BlotMapVector.h:50</a></div></div>
<div class="ttc" id="anamespacellvm_1_1objcarc_html_aa4b95e1b6c59a75f558794b32b644feba61710f61a521b1544f5f7ab5abac843d"><div class="ttname"><a href="namespacellvm_1_1objcarc.html#aa4b95e1b6c59a75f558794b32b644feba61710f61a521b1544f5f7ab5abac843d">llvm::objcarc::ARCRuntimeEntryPointKind::Autorelease</a></div><div class="ttdeci">@ Autorelease</div></div>
<div class="ttc" id="aclassllvm_1_1PHINode_html"><div class="ttname"><a href="classllvm_1_1PHINode.html">llvm::PHINode</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02708">Instructions.h:2708</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a8de021e28a3c04c9216ad8decf104f02"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">llvm::BasicBlock::getTerminator</a></div><div class="ttdeci">const Instruction * getTerminator() const LLVM_READONLY</div><div class="ttdoc">Returns the terminator instruction if the block is well formed or null if the block is not well forme...</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00127">BasicBlock.h:127</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html">llvm::SmallVectorImpl</a></div><div class="ttdoc">This class consists of common code factored out of the SmallVector class to reduce code duplication b...</div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l00042">APFloat.h:42</a></div></div>
<div class="ttc" id="anamespacellvm_html_a6b0ac1fa4f05de76413c5e0ca6334035"><div class="ttname"><a href="namespacellvm.html#a6b0ac1fa4f05de76413c5e0ca6334035">llvm::reverse</a></div><div class="ttdeci">auto reverse(ContainerTy &amp;&amp;C)</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l00484">STLExtras.h:484</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallBase_html"><div class="ttname"><a href="classllvm_1_1CallBase.html">llvm::CallBase</a></div><div class="ttdoc">Base class for all callable instructions (InvokeInst and CallInst) Holds everything related to callin...</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l01184">InstrTypes.h:1184</a></div></div>
<div class="ttc" id="aDerivedTypes_8h_html"><div class="ttname"><a href="DerivedTypes_8h.html">DerivedTypes.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisManager_html"><div class="ttname"><a href="classllvm_1_1AnalysisManager.html">llvm::AnalysisManager</a></div><div class="ttdoc">A container for analyses that lazily runs them and caches their results.</div><div class="ttdef"><b>Definition:</b> <a href="InstructionSimplify_8h_source.html#l00042">InstructionSimplify.h:42</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallInst_html"><div class="ttname"><a href="classllvm_1_1CallInst.html">llvm::CallInst</a></div><div class="ttdoc">This class represents a function call, abstracting a target machine's calling convention.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01485">Instructions.h:1485</a></div></div>
<div class="ttc" id="anamespacellvm_html_a239c4ac35d6028bfacaed4018d0488faab8e7b465df7c5979dc731d06e84ce2cf"><div class="ttname"><a href="namespacellvm.html#a239c4ac35d6028bfacaed4018d0488faab8e7b465df7c5979dc731d06e84ce2cf">llvm::InliningAdvisorMode::Release</a></div><div class="ttdeci">@ Release</div></div>
<div class="ttc" id="anamespacellvm_1_1objcarc_html_a845b8f76f8bd22e4e2eb851121db306da8902051603b385fb4587620a0650b4f7"><div class="ttname"><a href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306da8902051603b385fb4587620a0650b4f7">llvm::objcarc::S_CanRelease</a></div><div class="ttdeci">@ S_CanRelease</div><div class="ttdoc">foo(x)  x could possibly see a ref count decrement.</div><div class="ttdef"><b>Definition:</b> <a href="PtrState_8h_source.html#l00044">PtrState.h:44</a></div></div>
<div class="ttc" id="alib_2CodeGen_2README_8txt_html_a09776db24cf586ec9f1e18f3bae14099"><div class="ttname"><a href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a></div><div class="ttdeci">Common register allocation spilling lr str ldr sxth r3 ldr mla r4 can lr mov lr str ldr sxth r3 mla r4 and then merge mul and lr str ldr sxth r3 mla r4 It also increase the likelihood the store may become dead bb27 Successors according to LLVM BB</div><div class="ttdef"><b>Definition:</b> <a href="lib_2CodeGen_2README_8txt_source.html#l00039">README.txt:39</a></div></div>
<div class="ttc" id="anamespacellvm_html_a7d2bc151d2b6d3351ec3a12e090041cb"><div class="ttname"><a href="namespacellvm.html#a7d2bc151d2b6d3351ec3a12e090041cb">llvm::succ_iterator</a></div><div class="ttdeci">SuccIterator&lt; Instruction, BasicBlock &gt; succ_iterator</div><div class="ttdef"><b>Definition:</b> <a href="IR_2CFG_8h_source.html#l00242">CFG.h:242</a></div></div>
<div class="ttc" id="aHexagonCommonGEP_8cpp_html_ad532e8710e50302e0a376b61c91fa91d"><div class="ttname"><a href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a></div><div class="ttdeci">Hexagon Common GEP</div><div class="ttdef"><b>Definition:</b> <a href="HexagonCommonGEP_8cpp_source.html#l00171">HexagonCommonGEP.cpp:171</a></div></div>
<div class="ttc" id="anamespacellvm_html_a49a219f3fe3d7a6cc07c49a1ea766d6d"><div class="ttname"><a href="namespacellvm.html#a49a219f3fe3d7a6cc07c49a1ea766d6d">llvm::inst_begin</a></div><div class="ttdeci">inst_iterator inst_begin(Function *F)</div><div class="ttdef"><b>Definition:</b> <a href="InstIterator_8h_source.html#l00131">InstIterator.h:131</a></div></div>
<div class="ttc" id="aLLVMContext_8h_html"><div class="ttname"><a href="LLVMContext_8h.html">LLVMContext.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1AllocaInst_html"><div class="ttname"><a href="classllvm_1_1AllocaInst.html">llvm::AllocaInst</a></div><div class="ttdoc">an instruction to allocate memory on the stack</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00058">Instructions.h:58</a></div></div>
<div class="ttc" id="aclassllvm_1_1User_html_abe1de1520a21f77ac57cc210bf0fb0b4"><div class="ttname"><a href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">llvm::User::getOperand</a></div><div class="ttdeci">Value * getOperand(unsigned i) const</div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00169">User.h:169</a></div></div>
<div class="ttc" id="astructllvm_1_1cl_1_1desc_html"><div class="ttname"><a href="structllvm_1_1cl_1_1desc.html">llvm::cl::desc</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00411">CommandLine.h:411</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstIterator_html"><div class="ttname"><a href="classllvm_1_1InstIterator.html">llvm::InstIterator</a></div><div class="ttdef"><b>Definition:</b> <a href="InstIterator_8h_source.html#l00032">InstIterator.h:32</a></div></div>
<div class="ttc" id="araw__ostream_8h_html"><div class="ttname"><a href="raw__ostream_8h.html">raw_ostream.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1TinyPtrVector_html"><div class="ttname"><a href="classllvm_1_1TinyPtrVector.html">llvm::TinyPtrVector</a></div><div class="ttdoc">TinyPtrVector - This class is specialized for cases where there are normally 0 or 1 element in a vect...</div><div class="ttdef"><b>Definition:</b> <a href="TinyPtrVector_8h_source.html#l00029">TinyPtrVector.h:29</a></div></div>
<div class="ttc" id="aclassllvm_1_1LLVMContext_html_a800c1300065ca1615d2f4fb88623afd5a8997c6b0930e2c05209e95e7172c6cf3"><div class="ttname"><a href="classllvm_1_1LLVMContext.html#a800c1300065ca1615d2f4fb88623afd5a8997c6b0930e2c05209e95e7172c6cf3">llvm::LLVMContext::OB_funclet</a></div><div class="ttdeci">@ OB_funclet</div><div class="ttdef"><b>Definition:</b> <a href="LLVMContext_8h_source.html#l00090">LLVMContext.h:90</a></div></div>
<div class="ttc" id="aValue_8h_html"><div class="ttname"><a href="Value_8h.html">Value.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1objcarc_1_1PtrState_html"><div class="ttname"><a href="classllvm_1_1objcarc_1_1PtrState.html">llvm::objcarc::PtrState</a></div><div class="ttdoc">This class summarizes several per-pointer runtime properties which are propagated through the flow gr...</div><div class="ttdef"><b>Definition:</b> <a href="PtrState_8h_source.html#l00101">PtrState.h:101</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html"><div class="ttname"><a href="classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00074">Value.h:74</a></div></div>
<div class="ttc" id="anamespacellvm_1_1objcarc_html_a494b44abeacdfac8bb26d3203571d1c2aafece4245269582cb2f1009d4fb52047"><div class="ttname"><a href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2aafece4245269582cb2f1009d4fb52047">llvm::objcarc::ARCInstKind::Retain</a></div><div class="ttdeci">@ Retain</div><div class="ttdoc">objc_retain</div></div>
<div class="ttc" id="aDebug_8h_html"><div class="ttname"><a href="Debug_8h.html">Debug.h</a></div></div>
<div class="ttc" id="anamespacellvm_1_1objcarc_html_a7137a432b1d5406783f79dd29fc591fb"><div class="ttname"><a href="namespacellvm_1_1objcarc.html#a7137a432b1d5406783f79dd29fc591fb">llvm::objcarc::IsForwarding</a></div><div class="ttdeci">bool IsForwarding(ARCInstKind Class)</div><div class="ttdoc">Test if the given class represents instructions which return their argument verbatim.</div><div class="ttdef"><b>Definition:</b> <a href="ObjCARCInstKind_8cpp_source.html#l00415">ObjCARCInstKind.cpp:415</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_ab4e0512c7e1c7adaa56677e3155685f1"><div class="ttname"><a href="classllvm_1_1Value.html#ab4e0512c7e1c7adaa56677e3155685f1">llvm::Value::users</a></div><div class="ttdeci">iterator_range&lt; user_iterator &gt; users()</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00421">Value.h:421</a></div></div>
<div class="ttc" id="anamespacellvm_1_1objcarc_html_a353f4c1f85416c596ecaa9c4d5afca75ac6640fbd8b830536b76f884208bb53aa"><div class="ttname"><a href="namespacellvm_1_1objcarc.html#a353f4c1f85416c596ecaa9c4d5afca75ac6640fbd8b830536b76f884208bb53aa">llvm::objcarc::AutoreleasePoolBoundary</a></div><div class="ttdeci">@ AutoreleasePoolBoundary</div><div class="ttdef"><b>Definition:</b> <a href="DependencyAnalysis_8h_source.html#l00046">DependencyAnalysis.h:46</a></div></div>
<div class="ttc" id="anamespacellvm_1_1objcarc_html_adbe453c6ce7ea8e13eb18939197edeaf"><div class="ttname"><a href="namespacellvm_1_1objcarc.html#adbe453c6ce7ea8e13eb18939197edeaf">llvm::objcarc::IsNoopOnNull</a></div><div class="ttdeci">bool IsNoopOnNull(ARCInstKind Class)</div><div class="ttdoc">Test if the given class represents instructions which do nothing if passed a null pointer.</div><div class="ttdef"><b>Definition:</b> <a href="ObjCARCInstKind_8cpp_source.html#l00450">ObjCARCInstKind.cpp:450</a></div></div>
<div class="ttc" id="aclassllvm_1_1BlotMapVector_html_a858918a4b48c7fcb780817c1709c9d3f"><div class="ttname"><a href="classllvm_1_1BlotMapVector.html#a858918a4b48c7fcb780817c1709c9d3f">llvm::BlotMapVector::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="BlotMapVector_8h_source.html#l00051">BlotMapVector.h:51</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a42a7d51fdde6913db72d098356c2c019"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a42a7d51fdde6913db72d098356c2c019">llvm::BasicBlock::const_iterator</a></div><div class="ttdeci">InstListType::const_iterator const_iterator</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00088">BasicBlock.h:88</a></div></div>
<div class="ttc" id="anamespacellvm_1_1objcarc_html_a494b44abeacdfac8bb26d3203571d1c2a373746ca100ea4fff46f2b4046984e94"><div class="ttname"><a href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2a373746ca100ea4fff46f2b4046984e94">llvm::objcarc::ARCInstKind::LoadWeakRetained</a></div><div class="ttdeci">@ LoadWeakRetained</div><div class="ttdoc">objc_loadWeakRetained (primitive)</div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html_a396fcfee6914c76974b73c3d203da6a5"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#a396fcfee6914c76974b73c3d203da6a5">llvm::SmallVectorImpl::emplace_back</a></div><div class="ttdeci">reference emplace_back(ArgTypes &amp;&amp;... Args)</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00941">SmallVector.h:941</a></div></div>
<div class="ttc" id="anamespacellvm_1_1objcarc_html_a494b44abeacdfac8bb26d3203571d1c2ae490705e8a3fd75e76afa1108289c24a"><div class="ttname"><a href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2ae490705e8a3fd75e76afa1108289c24a">llvm::objcarc::ARCInstKind::UnsafeClaimRV</a></div><div class="ttdeci">@ UnsafeClaimRV</div><div class="ttdoc">objc_unsafeClaimAutoreleasedReturnValue</div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSetImpl_html_a6bc6fb89fe2e91c25559a8631f56e27e"><div class="ttname"><a href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">llvm::SmallPtrSetImpl::insert</a></div><div class="ttdeci">std::pair&lt; iterator, bool &gt; insert(PtrType Ptr)</div><div class="ttdoc">Inserts Ptr if and only if there is no element in the container equal to Ptr.</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00365">SmallPtrSet.h:365</a></div></div>
<div class="ttc" id="anamespacellvm_1_1objcarc_html_a494b44abeacdfac8bb26d3203571d1c2ac1dbc9b59747323224171927c310917d"><div class="ttname"><a href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2ac1dbc9b59747323224171927c310917d">llvm::objcarc::ARCInstKind::AutoreleaseRV</a></div><div class="ttdeci">@ AutoreleaseRV</div><div class="ttdoc">objc_autoreleaseReturnValue</div></div>
<div class="ttc" id="aclassllvm_1_1objcarc_1_1ProvenanceAnalysis_html_ae4550aa670b700b0c46acc18b2d6250f"><div class="ttname"><a href="classllvm_1_1objcarc_1_1ProvenanceAnalysis.html#ae4550aa670b700b0c46acc18b2d6250f">llvm::objcarc::ProvenanceAnalysis::getAA</a></div><div class="ttdeci">AAResults * getAA() const</div><div class="ttdef"><b>Definition:</b> <a href="ProvenanceAnalysis_8h_source.html#l00073">ProvenanceAnalysis.h:73</a></div></div>
<div class="ttc" id="aclassllvm_1_1objcarc_1_1BundledRetainClaimRVs_html_ad32a933965ba0059ff2a3a322cc8b40b"><div class="ttname"><a href="classllvm_1_1objcarc_1_1BundledRetainClaimRVs.html#ad32a933965ba0059ff2a3a322cc8b40b">llvm::objcarc::BundledRetainClaimRVs::eraseInst</a></div><div class="ttdeci">void eraseInst(CallInst *CI)</div><div class="ttdoc">Remove a retainRV/claimRV call entirely.</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Transforms_2ObjCARC_2ObjCARC_8h_source.html#l00131">ObjCARC.h:131</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Aug 7 2023 10:27:52 for LLVM by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>

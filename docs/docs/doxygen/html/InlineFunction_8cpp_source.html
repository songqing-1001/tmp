<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LLVM: lib/Transforms/Utils/InlineFunction.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">LLVM
   &#160;<span id="projectnumber">17.0.0git</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a class="el" href="dir_a72932e0778af28115095468f6286ff8.html">Transforms</a></li><li class="navelem"><a class="el" href="dir_f75c00afeb315f44d76556a7c675e6e8.html">Utils</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">InlineFunction.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="InlineFunction_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//===- InlineFunction.cpp - Code to perform function inlining -------------===//</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">// See https://llvm.org/LICENSE.txt for license information.</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">// This file implements inlining of a function into a call site, resolving</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">// parameters and the return value as appropriate.</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160; </div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DenseMap_8h.html">llvm/ADT/DenseMap.h</a>&quot;</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="STLExtras_8h.html">llvm/ADT/STLExtras.h</a>&quot;</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SetVector_8h.html">llvm/ADT/SetVector.h</a>&quot;</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SmallPtrSet_8h.html">llvm/ADT/SmallPtrSet.h</a>&quot;</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SmallVector_8h.html">llvm/ADT/SmallVector.h</a>&quot;</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="StringExtras_8h.html">llvm/ADT/StringExtras.h</a>&quot;</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="iterator__range_8h.html">llvm/ADT/iterator_range.h</a>&quot;</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="AliasAnalysis_8h.html">llvm/Analysis/AliasAnalysis.h</a>&quot;</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="AssumptionCache_8h.html">llvm/Analysis/AssumptionCache.h</a>&quot;</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="BlockFrequencyInfo_8h.html">llvm/Analysis/BlockFrequencyInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CallGraph_8h.html">llvm/Analysis/CallGraph.h</a>&quot;</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CaptureTracking_8h.html">llvm/Analysis/CaptureTracking.h</a>&quot;</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="InstructionSimplify_8h.html">llvm/Analysis/InstructionSimplify.h</a>&quot;</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MemoryProfileInfo_8h.html">llvm/Analysis/MemoryProfileInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ObjCARCAnalysisUtils_8h.html">llvm/Analysis/ObjCARCAnalysisUtils.h</a>&quot;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ObjCARCUtil_8h.html">llvm/Analysis/ObjCARCUtil.h</a>&quot;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ProfileSummaryInfo_8h.html">llvm/Analysis/ProfileSummaryInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ValueTracking_8h.html">llvm/Analysis/ValueTracking.h</a>&quot;</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="VectorUtils_8h.html">llvm/Analysis/VectorUtils.h</a>&quot;</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Argument_8h.html">llvm/IR/Argument.h</a>&quot;</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="BasicBlock_8h.html">llvm/IR/BasicBlock.h</a>&quot;</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="IR_2CFG_8h.html">llvm/IR/CFG.h</a>&quot;</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Constant_8h.html">llvm/IR/Constant.h</a>&quot;</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Constants_8h.html">llvm/IR/Constants.h</a>&quot;</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DataLayout_8h.html">llvm/IR/DataLayout.h</a>&quot;</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="IR_2DebugInfo_8h.html">llvm/IR/DebugInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DebugInfoMetadata_8h.html">llvm/IR/DebugInfoMetadata.h</a>&quot;</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DebugLoc_8h.html">llvm/IR/DebugLoc.h</a>&quot;</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DerivedTypes_8h.html">llvm/IR/DerivedTypes.h</a>&quot;</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Dominators_8h.html">llvm/IR/Dominators.h</a>&quot;</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="EHPersonalities_8h.html">llvm/IR/EHPersonalities.h</a>&quot;</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Function_8h.html">llvm/IR/Function.h</a>&quot;</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="IRBuilder_8h.html">llvm/IR/IRBuilder.h</a>&quot;</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="InlineAsm_8h.html">llvm/IR/InlineAsm.h</a>&quot;</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="InstrTypes_8h.html">llvm/IR/InstrTypes.h</a>&quot;</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="IR_2Instruction_8h.html">llvm/IR/Instruction.h</a>&quot;</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Instructions_8h.html">llvm/IR/Instructions.h</a>&quot;</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="IntrinsicInst_8h.html">llvm/IR/IntrinsicInst.h</a>&quot;</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Intrinsics_8h.html">llvm/IR/Intrinsics.h</a>&quot;</span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LLVMContext_8h.html">llvm/IR/LLVMContext.h</a>&quot;</span></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MDBuilder_8h.html">llvm/IR/MDBuilder.h</a>&quot;</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Metadata_8h.html">llvm/IR/Metadata.h</a>&quot;</span></div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Module_8h.html">llvm/IR/Module.h</a>&quot;</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Type_8h.html">llvm/IR/Type.h</a>&quot;</span></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="User_8h.html">llvm/IR/User.h</a>&quot;</span></div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Value_8h.html">llvm/IR/Value.h</a>&quot;</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Casting_8h.html">llvm/Support/Casting.h</a>&quot;</span></div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CommandLine_8h.html">llvm/Support/CommandLine.h</a>&quot;</span></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Support_2ErrorHandling_8h.html">llvm/Support/ErrorHandling.h</a>&quot;</span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="AssumeBundleBuilder_8h.html">llvm/Transforms/Utils/AssumeBundleBuilder.h</a>&quot;</span></div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Cloning_8h.html">llvm/Transforms/Utils/Cloning.h</a>&quot;</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Transforms_2Utils_2Local_8h.html">llvm/Transforms/Utils/Local.h</a>&quot;</span></div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ValueMapper_8h.html">llvm/Transforms/Utils/ValueMapper.h</a>&quot;</span></div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="preprocessor">#include &lt;algorithm&gt;</span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="preprocessor">#include &lt;cassert&gt;</span></div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="preprocessor">#include &lt;cstdint&gt;</span></div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="preprocessor">#include &lt;iterator&gt;</span></div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="preprocessor">#include &lt;limits&gt;</span></div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="preprocessor">#include &lt;optional&gt;</span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="preprocessor">#include &lt;string&gt;</span></div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="preprocessor">#include &lt;utility&gt;</span></div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="preprocessor">#include &lt;vector&gt;</span></div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160; </div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="preprocessor">#define DEBUG_TYPE &quot;inline-function&quot;</span></div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160; </div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespacellvm.html">llvm</a>;</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespacellvm_1_1memprof.html">llvm::memprof</a>;</div>
<div class="line"><a name="l00081"></a><span class="lineno"><a class="line" href="InlineFunction_8cpp.html#ac57dae906fe8ac64efe52571121b0fe1">   81</a></span>&#160;<span class="keyword">using</span> <a class="code" href="classllvm_1_1Function_1_1ProfileCount.html">ProfileCount</a> = <a class="code" href="InlineFunction_8cpp.html#ac57dae906fe8ac64efe52571121b0fe1">Function::ProfileCount</a>;</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160; </div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a></div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<a class="code" href="InlineFunction_8cpp.html#a8e4039f04450ff68d8d2cf3db092315c">EnableNoAliasConversion</a>(<span class="stringliteral">&quot;enable-noalias-to-md-conversion&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">true</span>),</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;  <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;  <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Convert noalias attributes to metadata during inlining.&quot;</span>));</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160; </div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a></div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    <a class="code" href="InlineFunction_8cpp.html#a48453d4e53402e9e330e74232eded4be">UseNoAliasIntrinsic</a>(<span class="stringliteral">&quot;use-noalias-intrinsic-during-inlining&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;                        <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">true</span>),</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;                        <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Use the llvm.experimental.noalias.scope.decl &quot;</span></div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;                                 <span class="stringliteral">&quot;intrinsic during inlining.&quot;</span>));</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160; </div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<span class="comment">// Disabled by default, because the added alignment assumptions may increase</span></div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="comment">// compile-time and block optimizations. This option is not suitable for use</span></div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="comment">// with frontends that emit comprehensive parameter alignment annotations.</span></div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a></div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<a class="code" href="InlineFunction_8cpp.html#afa5f37b98bb6d7bfe55e6d6267aba424">PreserveAlignmentAssumptions</a>(<span class="stringliteral">&quot;preserve-alignment-assumptions-during-inlining&quot;</span>,</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;  <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">false</span>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;  <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Convert align attributes to assumptions during inlining.&quot;</span>));</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160; </div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="InlineFunction_8cpp.html#ac6610b93b62b595b44908bd5b6ab4e16">UpdateReturnAttributes</a>(</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;        <span class="stringliteral">&quot;update-return-attrs&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">true</span>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;            <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Update return attributes on calls within inlined body&quot;</span>));</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160; </div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;unsigned&gt;</a> <a class="code" href="InlineFunction_8cpp.html#aceef73a2afed724fc28b76a05bc57898">InlinerAttributeWindow</a>(</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    <span class="stringliteral">&quot;max-inst-checked-for-throw-during-inlining&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;the maximum number of instructions analyzed for may throw during &quot;</span></div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;             <span class="stringliteral">&quot;attribute inference in inlined body&quot;</span>),</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(4));</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160; </div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;<span class="keyword">namespace </span>{</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;<span class="comment">  /// A class for recording information about inlining a landing pad.</span></div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;<span class="comment"></span>  <span class="keyword">class </span>LandingPadInliningInfo {<span class="comment"></span></div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;<span class="comment">    /// Destination of the invoke&#39;s unwind.</span></div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;<span class="comment"></span>    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *OuterResumeDest;</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;<span class="comment">    /// Destination for the callee&#39;s resume.</span></div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<span class="comment"></span>    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *InnerResumeDest = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;<span class="comment">    /// LandingPadInst associated with the invoke.</span></div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;<span class="comment"></span>    <a class="code" href="classllvm_1_1LandingPadInst.html">LandingPadInst</a> *CallerLPad = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;<span class="comment">    /// PHI for EH values from landingpad insts.</span></div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;<span class="comment"></span>    <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *InnerEHValuesPHI = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160; </div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Value*, 8&gt;</a> UnwindDestPHIValues;</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160; </div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;  <span class="keyword">public</span>:</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    LandingPadInliningInfo(<a class="code" href="classllvm_1_1InvokeInst.html">InvokeInst</a> *II)</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;        : OuterResumeDest(II-&gt;getUnwindDest()) {</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;      <span class="comment">// If there are PHI nodes in the unwind destination block, we need to keep</span></div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;      <span class="comment">// track of which values came into them from the invoke before removing</span></div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;      <span class="comment">// the edge from this block.</span></div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;      <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *InvokeBB = II-&gt;<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>();</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;      <a class="code" href="classllvm_1_1BasicBlock.html#a98c0a84a5dfa8bce341c829709f171e5">BasicBlock::iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = OuterResumeDest-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>();</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;      <span class="keywordflow">for</span> (; isa&lt;PHINode&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>); ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;        <span class="comment">// Save the value to use for this edge.</span></div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;        <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *<a class="code" href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">PHI</a> = cast&lt;PHINode&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;        UnwindDestPHIValues.push_back(<a class="code" href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">PHI</a>-&gt;getIncomingValueForBlock(InvokeBB));</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;      }</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160; </div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;      CallerLPad = cast&lt;LandingPadInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    }</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;<span class="comment">    /// The outer unwind destination is the target of</span></div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;<span class="comment">    /// unwind edges introduced for calls within the inlined function.</span></div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;<span class="comment"></span>    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *getOuterResumeDest()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;      <span class="keywordflow">return</span> OuterResumeDest;</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    }</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160; </div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *getInnerResumeDest();</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160; </div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    <a class="code" href="classllvm_1_1LandingPadInst.html">LandingPadInst</a> *getLandingPadInst()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> CallerLPad; }</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;<span class="comment">    /// Forward the &#39;resume&#39; instruction to the caller&#39;s landing pad block.</span></div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;<span class="comment">    /// When the landing pad block has only one predecessor, this is</span></div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;<span class="comment">    /// a simple branch. When there is more than one predecessor, we need to</span></div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;<span class="comment">    /// split the landing pad block after the landingpad instruction and jump</span></div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;<span class="comment">    /// to there.</span></div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;<span class="comment"></span>    <span class="keywordtype">void</span> forwardResume(<a class="code" href="classllvm_1_1ResumeInst.html">ResumeInst</a> *RI,</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;                       <a class="code" href="classllvm_1_1SmallPtrSetImpl.html">SmallPtrSetImpl&lt;LandingPadInst*&gt;</a> &amp;InlinedLPads);</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;<span class="comment">    /// Add incoming-PHI values to the unwind destination block for the given</span></div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;<span class="comment">    /// basic block, using the values for the original invoke&#39;s source block.</span></div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;<span class="comment"></span>    <span class="keywordtype">void</span> addIncomingPHIValuesFor(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;      addIncomingPHIValuesForInto(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, OuterResumeDest);</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    }</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160; </div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    <span class="keywordtype">void</span> addIncomingPHIValuesForInto(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *src, <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *dest)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;      <a class="code" href="classllvm_1_1BasicBlock.html#a98c0a84a5dfa8bce341c829709f171e5">BasicBlock::iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = dest-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>();</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a> = UnwindDestPHIValues.size(); <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a>; ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>, ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;        <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *<a class="code" href="namespacellvm_1_1numbers.html#a9473b507816be4056a158a41cfb86807">phi</a> = cast&lt;PHINode&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;        <a class="code" href="namespacellvm_1_1numbers.html#a9473b507816be4056a158a41cfb86807">phi</a>-&gt;addIncoming(UnwindDestPHIValues[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>], src);</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;      }</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    }</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;  };</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160; </div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;} <span class="comment">// end anonymous namespace</span></div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;<span class="comment">/// Get or create a target for the branch from ResumeInsts.</span></div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *LandingPadInliningInfo::getInnerResumeDest() {</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;  <span class="keywordflow">if</span> (InnerResumeDest) <span class="keywordflow">return</span> InnerResumeDest;</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160; </div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;  <span class="comment">// Split the landing pad.</span></div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html#a98c0a84a5dfa8bce341c829709f171e5">BasicBlock::iterator</a> SplitPoint = ++CallerLPad-&gt;<a class="code" href="classllvm_1_1ilist__node__impl.html#af719fc783be6589465137d997701a432">getIterator</a>();</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;  InnerResumeDest =</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    OuterResumeDest-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a52c990590792c91dd20b6d45acebe359">splitBasicBlock</a>(SplitPoint,</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;                                     OuterResumeDest-&gt;<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>() + <span class="stringliteral">&quot;.body&quot;</span>);</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160; </div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;  <span class="comment">// The number of incoming edges we expect to the inner landing pad.</span></div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">unsigned</span> PHICapacity = 2;</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160; </div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;  <span class="comment">// Create corresponding new PHIs for all the PHIs in the outer landing pad.</span></div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *InsertPoint = &amp;InnerResumeDest-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#ab706e7ebb1969c5e34f28bfcf2ff719e">front</a>();</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html#a98c0a84a5dfa8bce341c829709f171e5">BasicBlock::iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = OuterResumeDest-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>();</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a> = UnwindDestPHIValues.size(); <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a>; ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>, ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *OuterPHI = cast&lt;PHINode&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *InnerPHI = <a class="code" href="classllvm_1_1PHINode.html#ab0ff669b12c20c07137705c38872ec63">PHINode::Create</a>(OuterPHI-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>(), PHICapacity,</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;                                        OuterPHI-&gt;<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>() + <span class="stringliteral">&quot;.lpad-body&quot;</span>,</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;                                        InsertPoint);</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    OuterPHI-&gt;<a class="code" href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">replaceAllUsesWith</a>(InnerPHI);</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    InnerPHI-&gt;<a class="code" href="classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">addIncoming</a>(OuterPHI, OuterResumeDest);</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;  }</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160; </div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;  <span class="comment">// Create a PHI for the exception values.</span></div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;  InnerEHValuesPHI = <a class="code" href="classllvm_1_1PHINode.html#ab0ff669b12c20c07137705c38872ec63">PHINode::Create</a>(CallerLPad-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>(), PHICapacity,</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;                                     <span class="stringliteral">&quot;eh.lpad-body&quot;</span>, InsertPoint);</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;  CallerLPad-&gt;<a class="code" href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">replaceAllUsesWith</a>(InnerEHValuesPHI);</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;  InnerEHValuesPHI-&gt;<a class="code" href="classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">addIncoming</a>(CallerLPad, OuterResumeDest);</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160; </div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;  <span class="comment">// All done.</span></div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;  <span class="keywordflow">return</span> InnerResumeDest;</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;}</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;<span class="comment">/// Forward the &#39;resume&#39; instruction to the caller&#39;s landing pad block.</span></div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;<span class="comment">/// When the landing pad block has only one predecessor, this is a simple</span></div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;<span class="comment">/// branch. When there is more than one predecessor, we need to split the</span></div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;<span class="comment">/// landing pad block after the landingpad instruction and jump to there.</span></div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> LandingPadInliningInfo::forwardResume(</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    <a class="code" href="classllvm_1_1ResumeInst.html">ResumeInst</a> *RI, <a class="code" href="classllvm_1_1SmallPtrSetImpl.html">SmallPtrSetImpl&lt;LandingPadInst *&gt;</a> &amp;InlinedLPads) {</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Dest = getInnerResumeDest();</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Src = RI-&gt;<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>();</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160; </div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;  <a class="code" href="classllvm_1_1BranchInst.html#a38df51256d4b415b6a817b5e1c6d4d36">BranchInst::Create</a>(Dest, Src);</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160; </div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;  <span class="comment">// Update the PHIs in the destination. They were inserted in an order which</span></div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;  <span class="comment">// makes this work.</span></div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;  addIncomingPHIValuesForInto(Src, Dest);</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160; </div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;  InnerEHValuesPHI-&gt;<a class="code" href="classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">addIncoming</a>(RI-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0), Src);</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;  RI-&gt;<a class="code" href="classllvm_1_1Instruction.html#ae6b978645b8ac72d1a35e1298ffdd4f0">eraseFromParent</a>();</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;}</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;<span class="comment">/// Helper for getUnwindDestToken/getUnwindDestTokenHelper.</span></div>
<div class="line"><a name="l00237"></a><span class="lineno"><a class="line" href="InlineFunction_8cpp.html#aa0144ab879a098cb9b9e844e4ed06919">  237</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="InlineFunction_8cpp.html#aa0144ab879a098cb9b9e844e4ed06919">getParentPad</a>(<a class="code" href="classllvm_1_1Value.html">Value</a> *EHPad) {</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *FPI = dyn_cast&lt;FuncletPadInst&gt;(EHPad))</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    <span class="keywordflow">return</span> FPI-&gt;getParentPad();</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;  <span class="keywordflow">return</span> cast&lt;CatchSwitchInst&gt;(EHPad)-&gt;getParentPad();</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;}</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160; </div>
<div class="line"><a name="l00243"></a><span class="lineno"><a class="line" href="InlineFunction_8cpp.html#a2af37358cf937d4298f5c5198bf91d34">  243</a></span>&#160;<span class="keyword">using</span> <a class="code" href="classllvm_1_1DenseMap.html">UnwindDestMemoTy</a> = <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;Instruction *, Value *&gt;</a>;</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;<span class="comment">/// Helper for getUnwindDestToken that does the descendant-ward part of</span></div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;<span class="comment">/// the search.</span></div>
<div class="line"><a name="l00247"></a><span class="lineno"><a class="line" href="InlineFunction_8cpp.html#afc67dee315b33c11135dff4cbf95a0ac">  247</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="InlineFunction_8cpp.html#afc67dee315b33c11135dff4cbf95a0ac">getUnwindDestTokenHelper</a>(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *EHPad,</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;                                       <a class="code" href="classllvm_1_1DenseMap.html">UnwindDestMemoTy</a> &amp;MemoMap) {</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Instruction *, 8&gt;</a> Worklist(1, EHPad);</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160; </div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;  <span class="keywordflow">while</span> (!Worklist.empty()) {</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *CurrentPad = Worklist.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a0c8ffe664a36e30d49c84d0aded2fe08">pop_back_val</a>();</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    <span class="comment">// We only put pads on the worklist that aren&#39;t in the MemoMap.  When</span></div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    <span class="comment">// we find an unwind dest for a pad we may update its ancestors, but</span></div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    <span class="comment">// the queue only ever contains uncles/great-uncles/etc. of CurrentPad,</span></div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    <span class="comment">// so they should never get updated while queued on the worklist.</span></div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!MemoMap.<a class="code" href="classllvm_1_1DenseMapBase.html#a53408c95a7bfb5443b43fb2134c3eb23">count</a>(CurrentPad));</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *UnwindDestToken = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> *CatchSwitch = dyn_cast&lt;CatchSwitchInst&gt;(CurrentPad)) {</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;      <span class="keywordflow">if</span> (CatchSwitch-&gt;hasUnwindDest()) {</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;        UnwindDestToken = CatchSwitch-&gt;getUnwindDest()-&gt;getFirstNonPHI();</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;        <span class="comment">// Catchswitch doesn&#39;t have a &#39;nounwind&#39; variant, and one might be</span></div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;        <span class="comment">// annotated as &quot;unwinds to caller&quot; when really it&#39;s nounwind (see</span></div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;        <span class="comment">// e.g. SimplifyCFGOpt::SimplifyUnreachable), so we can&#39;t infer the</span></div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;        <span class="comment">// parent&#39;s unwind dest from this.  We can check its catchpads&#39;</span></div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;        <span class="comment">// descendants, since they might include a cleanuppad with an</span></div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;        <span class="comment">// &quot;unwinds to caller&quot; cleanupret, which can be trusted.</span></div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;        <span class="keywordflow">for</span> (<span class="keyword">auto</span> <a class="code" href="namespacellvm_1_1AArch64CC.html#abfa1f7dce576430da99eed57807c7f28aa5506efe3dc67f7b794331f0cbffddaf">HI</a> = CatchSwitch-&gt;handler_begin(),</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;                  HE = CatchSwitch-&gt;handler_end();</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;             <a class="code" href="namespacellvm_1_1AArch64CC.html#abfa1f7dce576430da99eed57807c7f28aa5506efe3dc67f7b794331f0cbffddaf">HI</a> != HE &amp;&amp; !UnwindDestToken; ++<a class="code" href="namespacellvm_1_1AArch64CC.html#abfa1f7dce576430da99eed57807c7f28aa5506efe3dc67f7b794331f0cbffddaf">HI</a>) {</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;          <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *HandlerBlock = *<a class="code" href="namespacellvm_1_1AArch64CC.html#abfa1f7dce576430da99eed57807c7f28aa5506efe3dc67f7b794331f0cbffddaf">HI</a>;</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;          <span class="keyword">auto</span> *CatchPad = cast&lt;CatchPadInst&gt;(HandlerBlock-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a46ef6115027606b67adcf4d28f3dac17">getFirstNonPHI</a>());</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;          <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1User.html">User</a> *Child : CatchPad-&gt;<a class="code" href="classllvm_1_1Value.html#ab4e0512c7e1c7adaa56677e3155685f1">users</a>()) {</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;            <span class="comment">// Intentionally ignore invokes here -- since the catchswitch is</span></div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;            <span class="comment">// marked &quot;unwind to caller&quot;, it would be a verifier error if it</span></div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;            <span class="comment">// contained an invoke which unwinds out of it, so any invoke we&#39;d</span></div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;            <span class="comment">// encounter must unwind to some child of the catch.</span></div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;            <span class="keywordflow">if</span> (!isa&lt;CleanupPadInst&gt;(Child) &amp;&amp; !isa&lt;CatchSwitchInst&gt;(Child))</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;              <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160; </div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;            <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *ChildPad = cast&lt;Instruction&gt;(Child);</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;            <span class="keyword">auto</span> Memo = MemoMap.<a class="code" href="classllvm_1_1DenseMapBase.html#a0c047f127ed4380a6f383d70bec4eb94">find</a>(ChildPad);</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;            <span class="keywordflow">if</span> (Memo == MemoMap.<a class="code" href="classllvm_1_1DenseMapBase.html#a65520b9c67759099e313d0f4e7b5ff9e">end</a>()) {</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;              <span class="comment">// Haven&#39;t figured out this child pad yet; queue it.</span></div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;              Worklist.push_back(ChildPad);</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;              <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;            }</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;            <span class="comment">// We&#39;ve already checked this child, but might have found that</span></div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;            <span class="comment">// it offers no proof either way.</span></div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;            <a class="code" href="classllvm_1_1Value.html">Value</a> *ChildUnwindDestToken = Memo-&gt;second;</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;            <span class="keywordflow">if</span> (!ChildUnwindDestToken)</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;              <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;            <span class="comment">// We already know the child&#39;s unwind dest, which can either</span></div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;            <span class="comment">// be ConstantTokenNone to indicate unwind to caller, or can</span></div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;            <span class="comment">// be another child of the catchpad.  Only the former indicates</span></div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;            <span class="comment">// the unwind dest of the catchswitch.</span></div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;            <span class="keywordflow">if</span> (isa&lt;ConstantTokenNone&gt;(ChildUnwindDestToken)) {</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;              UnwindDestToken = ChildUnwindDestToken;</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;              <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;            }</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;            <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="InlineFunction_8cpp.html#aa0144ab879a098cb9b9e844e4ed06919">getParentPad</a>(ChildUnwindDestToken) == CatchPad);</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;          }</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;        }</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;      }</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;      <span class="keyword">auto</span> *CleanupPad = cast&lt;CleanupPadInst&gt;(CurrentPad);</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1User.html">User</a> *U : CleanupPad-&gt;<a class="code" href="classllvm_1_1Value.html#ab4e0512c7e1c7adaa56677e3155685f1">users</a>()) {</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;        <span class="keywordflow">if</span> (<span class="keyword">auto</span> *CleanupRet = dyn_cast&lt;CleanupReturnInst&gt;(U)) {</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *RetUnwindDest = CleanupRet-&gt;getUnwindDest())</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;            UnwindDestToken = RetUnwindDest-&gt;getFirstNonPHI();</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;          <span class="keywordflow">else</span></div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;            UnwindDestToken = <a class="code" href="classllvm_1_1ConstantTokenNone.html#a8e29fb8e39fb67b3bb746dbba47fcb29">ConstantTokenNone::get</a>(CleanupPad-&gt;getContext());</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;        }</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *ChildUnwindDestToken;</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;        <span class="keywordflow">if</span> (<span class="keyword">auto</span> *Invoke = dyn_cast&lt;InvokeInst&gt;(U)) {</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;          ChildUnwindDestToken = Invoke-&gt;getUnwindDest()-&gt;getFirstNonPHI();</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (isa&lt;CleanupPadInst&gt;(U) || isa&lt;CatchSwitchInst&gt;(U)) {</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;          <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *ChildPad = cast&lt;Instruction&gt;(U);</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;          <span class="keyword">auto</span> Memo = MemoMap.<a class="code" href="classllvm_1_1DenseMapBase.html#a0c047f127ed4380a6f383d70bec4eb94">find</a>(ChildPad);</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;          <span class="keywordflow">if</span> (Memo == MemoMap.<a class="code" href="classllvm_1_1DenseMapBase.html#a65520b9c67759099e313d0f4e7b5ff9e">end</a>()) {</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;            <span class="comment">// Haven&#39;t resolved this child yet; queue it and keep searching.</span></div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;            Worklist.push_back(ChildPad);</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;          }</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;          <span class="comment">// We&#39;ve checked this child, but still need to ignore it if it</span></div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;          <span class="comment">// had no proof either way.</span></div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;          ChildUnwindDestToken = Memo-&gt;second;</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;          <span class="keywordflow">if</span> (!ChildUnwindDestToken)</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;          <span class="comment">// Not a relevant user of the cleanuppad</span></div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;        }</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;        <span class="comment">// In a well-formed program, the child/invoke must either unwind to</span></div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;        <span class="comment">// an(other) child of the cleanup, or exit the cleanup.  In the</span></div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;        <span class="comment">// first case, continue searching.</span></div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;        <span class="keywordflow">if</span> (isa&lt;Instruction&gt;(ChildUnwindDestToken) &amp;&amp;</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;            <a class="code" href="InlineFunction_8cpp.html#aa0144ab879a098cb9b9e844e4ed06919">getParentPad</a>(ChildUnwindDestToken) == CleanupPad)</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;        UnwindDestToken = ChildUnwindDestToken;</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;      }</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    }</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    <span class="comment">// If we haven&#39;t found an unwind dest for CurrentPad, we may have queued its</span></div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    <span class="comment">// children, so move on to the next in the worklist.</span></div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    <span class="keywordflow">if</span> (!UnwindDestToken)</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160; </div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    <span class="comment">// Now we know that CurrentPad unwinds to UnwindDestToken.  It also exits</span></div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    <span class="comment">// any ancestors of CurrentPad up to but not including UnwindDestToken&#39;s</span></div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    <span class="comment">// parent pad.  Record this in the memo map, and check to see if the</span></div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    <span class="comment">// original EHPad being queried is one of the ones exited.</span></div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *UnwindParent;</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> *UnwindPad = dyn_cast&lt;Instruction&gt;(UnwindDestToken))</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;      UnwindParent = <a class="code" href="InlineFunction_8cpp.html#aa0144ab879a098cb9b9e844e4ed06919">getParentPad</a>(UnwindPad);</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;      UnwindParent = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    <span class="keywordtype">bool</span> ExitedOriginalPad = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *ExitedPad = CurrentPad;</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;         ExitedPad &amp;&amp; ExitedPad != UnwindParent;</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;         ExitedPad = dyn_cast&lt;Instruction&gt;(<a class="code" href="InlineFunction_8cpp.html#aa0144ab879a098cb9b9e844e4ed06919">getParentPad</a>(ExitedPad))) {</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;      <span class="comment">// Skip over catchpads since they just follow their catchswitches.</span></div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;      <span class="keywordflow">if</span> (isa&lt;CatchPadInst&gt;(ExitedPad))</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;      MemoMap[ExitedPad] = UnwindDestToken;</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;      ExitedOriginalPad |= (ExitedPad == EHPad);</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    }</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160; </div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    <span class="keywordflow">if</span> (ExitedOriginalPad)</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;      <span class="keywordflow">return</span> UnwindDestToken;</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160; </div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    <span class="comment">// Continue the search.</span></div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;  }</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160; </div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;  <span class="comment">// No definitive information is contained within this funclet.</span></div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;}</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;<span class="comment">/// Given an EH pad, find where it unwinds.  If it unwinds to an EH pad,</span></div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;<span class="comment">/// return that pad instruction.  If it unwinds to caller, return</span></div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;<span class="comment">/// ConstantTokenNone.  If it does not have a definitive unwind destination,</span></div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;<span class="comment">/// return nullptr.</span></div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;<span class="comment">/// This routine gets invoked for calls in funclets in inlinees when inlining</span></div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;<span class="comment">/// an invoke.  Since many funclets don&#39;t have calls inside them, it&#39;s queried</span></div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;<span class="comment">/// on-demand rather than building a map of pads to unwind dests up front.</span></div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;<span class="comment">/// Determining a funclet&#39;s unwind dest may require recursively searching its</span></div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;<span class="comment">/// descendants, and also ancestors and cousins if the descendants don&#39;t provide</span></div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;<span class="comment">/// an answer.  Since most funclets will have their unwind dest immediately</span></div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;<span class="comment">/// available as the unwind dest of a catchswitch or cleanupret, this routine</span></div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;<span class="comment">/// searches top-down from the given pad and then up. To avoid worst-case</span></div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;<span class="comment">/// quadratic run-time given that approach, it uses a memo map to avoid</span></div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;<span class="comment">/// re-processing funclet trees.  The callers that rewrite the IR as they go</span></div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;<span class="comment">/// take advantage of this, for correctness, by checking/forcing rewritten</span></div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;<span class="comment">/// pads&#39; entries to match the original callee view.</span></div>
<div class="line"><a name="l00398"></a><span class="lineno"><a class="line" href="InlineFunction_8cpp.html#aba0a2870541e6fa6fd93c313d27a139e">  398</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="InlineFunction_8cpp.html#aba0a2870541e6fa6fd93c313d27a139e">getUnwindDestToken</a>(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *EHPad,</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;                                 <a class="code" href="classllvm_1_1DenseMap.html">UnwindDestMemoTy</a> &amp;MemoMap) {</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;  <span class="comment">// Catchpads unwind to the same place as their catchswitch;</span></div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;  <span class="comment">// redirct any queries on catchpads so the code below can</span></div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;  <span class="comment">// deal with just catchswitches and cleanuppads.</span></div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *CPI = dyn_cast&lt;CatchPadInst&gt;(EHPad))</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    EHPad = CPI-&gt;getCatchSwitch();</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160; </div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;  <span class="comment">// Check if we&#39;ve already determined the unwind dest for this pad.</span></div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;  <span class="keyword">auto</span> Memo = MemoMap.<a class="code" href="classllvm_1_1DenseMapBase.html#a0c047f127ed4380a6f383d70bec4eb94">find</a>(EHPad);</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;  <span class="keywordflow">if</span> (Memo != MemoMap.<a class="code" href="classllvm_1_1DenseMapBase.html#a65520b9c67759099e313d0f4e7b5ff9e">end</a>())</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;    <span class="keywordflow">return</span> Memo-&gt;second;</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160; </div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;  <span class="comment">// Search EHPad and, if necessary, its descendants.</span></div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *UnwindDestToken = <a class="code" href="InlineFunction_8cpp.html#afc67dee315b33c11135dff4cbf95a0ac">getUnwindDestTokenHelper</a>(EHPad, MemoMap);</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((UnwindDestToken == <span class="keyword">nullptr</span>) != (MemoMap.<a class="code" href="classllvm_1_1DenseMapBase.html#a53408c95a7bfb5443b43fb2134c3eb23">count</a>(EHPad) != 0));</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;  <span class="keywordflow">if</span> (UnwindDestToken)</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;    <span class="keywordflow">return</span> UnwindDestToken;</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160; </div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;  <span class="comment">// No information is available for this EHPad from itself or any of its</span></div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;  <span class="comment">// descendants.  An unwind all the way out to a pad in the caller would</span></div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;  <span class="comment">// need also to agree with the unwind dest of the parent funclet, so</span></div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;  <span class="comment">// search up the chain to try to find a funclet with information.  Put</span></div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;  <span class="comment">// null entries in the memo map to avoid re-processing as we go up.</span></div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;  MemoMap[EHPad] = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;Instruction *, 4&gt;</a> TempMemos;</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;  TempMemos.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(EHPad);</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *LastUselessPad = EHPad;</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *AncestorToken;</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;  <span class="keywordflow">for</span> (AncestorToken = <a class="code" href="InlineFunction_8cpp.html#aa0144ab879a098cb9b9e844e4ed06919">getParentPad</a>(EHPad);</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;       <span class="keyword">auto</span> *AncestorPad = dyn_cast&lt;Instruction&gt;(AncestorToken);</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;       AncestorToken = <a class="code" href="InlineFunction_8cpp.html#aa0144ab879a098cb9b9e844e4ed06919">getParentPad</a>(AncestorToken)) {</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    <span class="comment">// Skip over catchpads since they just follow their catchswitches.</span></div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    <span class="keywordflow">if</span> (isa&lt;CatchPadInst&gt;(AncestorPad))</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;    <span class="comment">// If the MemoMap had an entry mapping AncestorPad to nullptr, since we</span></div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;    <span class="comment">// haven&#39;t yet called getUnwindDestTokenHelper for AncestorPad in this</span></div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;    <span class="comment">// call to getUnwindDestToken, that would mean that AncestorPad had no</span></div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    <span class="comment">// information in itself, its descendants, or its ancestors.  If that</span></div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    <span class="comment">// were the case, then we should also have recorded the lack of information</span></div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    <span class="comment">// for the descendant that we&#39;re coming from.  So assert that we don&#39;t</span></div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    <span class="comment">// find a null entry in the MemoMap for AncestorPad.</span></div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!MemoMap.<a class="code" href="classllvm_1_1DenseMapBase.html#a53408c95a7bfb5443b43fb2134c3eb23">count</a>(AncestorPad) || MemoMap[AncestorPad]);</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;    <span class="keyword">auto</span> AncestorMemo = MemoMap.<a class="code" href="classllvm_1_1DenseMapBase.html#a0c047f127ed4380a6f383d70bec4eb94">find</a>(AncestorPad);</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;    <span class="keywordflow">if</span> (AncestorMemo == MemoMap.<a class="code" href="classllvm_1_1DenseMapBase.html#a65520b9c67759099e313d0f4e7b5ff9e">end</a>()) {</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;      UnwindDestToken = <a class="code" href="InlineFunction_8cpp.html#afc67dee315b33c11135dff4cbf95a0ac">getUnwindDestTokenHelper</a>(AncestorPad, MemoMap);</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;      UnwindDestToken = AncestorMemo-&gt;second;</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;    }</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;    <span class="keywordflow">if</span> (UnwindDestToken)</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;    LastUselessPad = AncestorPad;</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;    MemoMap[LastUselessPad] = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;    TempMemos.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(LastUselessPad);</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;  }</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160; </div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;  <span class="comment">// We know that getUnwindDestTokenHelper was called on LastUselessPad and</span></div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;  <span class="comment">// returned nullptr (and likewise for EHPad and any of its ancestors up to</span></div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;  <span class="comment">// LastUselessPad), so LastUselessPad has no information from below.  Since</span></div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;  <span class="comment">// getUnwindDestTokenHelper must investigate all downward paths through</span></div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;  <span class="comment">// no-information nodes to prove that a node has no information like this,</span></div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;  <span class="comment">// and since any time it finds information it records it in the MemoMap for</span></div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;  <span class="comment">// not just the immediately-containing funclet but also any ancestors also</span></div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;  <span class="comment">// exited, it must be the case that, walking downward from LastUselessPad,</span></div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;  <span class="comment">// visiting just those nodes which have not been mapped to an unwind dest</span></div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;  <span class="comment">// by getUnwindDestTokenHelper (the nullptr TempMemos notwithstanding, since</span></div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;  <span class="comment">// they are just used to keep getUnwindDestTokenHelper from repeating work),</span></div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;  <span class="comment">// any node visited must have been exhaustively searched with no information</span></div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;  <span class="comment">// for it found.</span></div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Instruction *, 8&gt;</a> Worklist(1, LastUselessPad);</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;  <span class="keywordflow">while</span> (!Worklist.empty()) {</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *UselessPad = Worklist.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a0c8ffe664a36e30d49c84d0aded2fe08">pop_back_val</a>();</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;    <span class="keyword">auto</span> Memo = MemoMap.<a class="code" href="classllvm_1_1DenseMapBase.html#a0c047f127ed4380a6f383d70bec4eb94">find</a>(UselessPad);</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;    <span class="keywordflow">if</span> (Memo != MemoMap.<a class="code" href="classllvm_1_1DenseMapBase.html#a65520b9c67759099e313d0f4e7b5ff9e">end</a>() &amp;&amp; Memo-&gt;second) {</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;      <span class="comment">// Here the name &#39;UselessPad&#39; is a bit of a misnomer, because we&#39;ve found</span></div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;      <span class="comment">// that it is a funclet that does have information about unwinding to</span></div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;      <span class="comment">// a particular destination; its parent was a useless pad.</span></div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;      <span class="comment">// Since its parent has no information, the unwind edge must not escape</span></div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;      <span class="comment">// the parent, and must target a sibling of this pad.  This local unwind</span></div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;      <span class="comment">// gives us no information about EHPad.  Leave it and the subtree rooted</span></div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;      <span class="comment">// at it alone.</span></div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="InlineFunction_8cpp.html#aa0144ab879a098cb9b9e844e4ed06919">getParentPad</a>(Memo-&gt;second) == <a class="code" href="InlineFunction_8cpp.html#aa0144ab879a098cb9b9e844e4ed06919">getParentPad</a>(UselessPad));</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;    }</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;    <span class="comment">// We know we don&#39;t have information for UselesPad.  If it has an entry in</span></div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;    <span class="comment">// the MemoMap (mapping it to nullptr), it must be one of the TempMemos</span></div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;    <span class="comment">// added on this invocation of getUnwindDestToken; if a previous invocation</span></div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;    <span class="comment">// recorded nullptr, it would have had to prove that the ancestors of</span></div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;    <span class="comment">// UselessPad, which include LastUselessPad, had no information, and that</span></div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;    <span class="comment">// in turn would have required proving that the descendants of</span></div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;    <span class="comment">// LastUselesPad, which include EHPad, have no information about</span></div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;    <span class="comment">// LastUselessPad, which would imply that EHPad was mapped to nullptr in</span></div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;    <span class="comment">// the MemoMap on that invocation, which isn&#39;t the case if we got here.</span></div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!MemoMap.<a class="code" href="classllvm_1_1DenseMapBase.html#a53408c95a7bfb5443b43fb2134c3eb23">count</a>(UselessPad) || TempMemos.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a1f475b0df44ebd7169e720fa1bf9169e">count</a>(UselessPad));</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;    <span class="comment">// Assert as we enumerate users that &#39;UselessPad&#39; doesn&#39;t have any unwind</span></div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;    <span class="comment">// information that we&#39;d be contradicting by making a map entry for it</span></div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;    <span class="comment">// (which is something that getUnwindDestTokenHelper must have proved for</span></div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;    <span class="comment">// us to get here).  Just assert on is direct users here; the checks in</span></div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;    <span class="comment">// this downward walk at its descendants will verify that they don&#39;t have</span></div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;    <span class="comment">// any unwind edges that exit &#39;UselessPad&#39; either (i.e. they either have no</span></div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    <span class="comment">// unwind edges or unwind to a sibling).</span></div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;    MemoMap[UselessPad] = UnwindDestToken;</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> *CatchSwitch = dyn_cast&lt;CatchSwitchInst&gt;(UselessPad)) {</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(CatchSwitch-&gt;getUnwindDest() == <span class="keyword">nullptr</span> &amp;&amp; <span class="stringliteral">&quot;Expected useless pad&quot;</span>);</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *HandlerBlock : CatchSwitch-&gt;handlers()) {</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;        <span class="keyword">auto</span> *CatchPad = HandlerBlock-&gt;getFirstNonPHI();</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1User.html">User</a> *U : CatchPad-&gt;<a class="code" href="classllvm_1_1Value.html#ab4e0512c7e1c7adaa56677e3155685f1">users</a>()) {</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;          <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;              (!isa&lt;InvokeInst&gt;(U) ||</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;               (<a class="code" href="InlineFunction_8cpp.html#aa0144ab879a098cb9b9e844e4ed06919">getParentPad</a>(</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;                    cast&lt;InvokeInst&gt;(U)-&gt;getUnwindDest()-&gt;getFirstNonPHI()) ==</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;                CatchPad)) &amp;&amp;</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;              <span class="stringliteral">&quot;Expected useless pad&quot;</span>);</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;          <span class="keywordflow">if</span> (isa&lt;CatchSwitchInst&gt;(U) || isa&lt;CleanupPadInst&gt;(U))</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;            Worklist.push_back(cast&lt;Instruction&gt;(U));</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;        }</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;      }</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(isa&lt;CleanupPadInst&gt;(UselessPad));</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1User.html">User</a> *U : UselessPad-&gt;<a class="code" href="classllvm_1_1Value.html#ab4e0512c7e1c7adaa56677e3155685f1">users</a>()) {</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;        <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!isa&lt;CleanupReturnInst&gt;(U) &amp;&amp; <span class="stringliteral">&quot;Expected useless pad&quot;</span>);</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;        <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((!isa&lt;InvokeInst&gt;(U) ||</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;                (<a class="code" href="InlineFunction_8cpp.html#aa0144ab879a098cb9b9e844e4ed06919">getParentPad</a>(</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;                     cast&lt;InvokeInst&gt;(U)-&gt;getUnwindDest()-&gt;getFirstNonPHI()) ==</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;                 UselessPad)) &amp;&amp;</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;               <span class="stringliteral">&quot;Expected useless pad&quot;</span>);</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;        <span class="keywordflow">if</span> (isa&lt;CatchSwitchInst&gt;(U) || isa&lt;CleanupPadInst&gt;(U))</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;          Worklist.push_back(cast&lt;Instruction&gt;(U));</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;      }</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;    }</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;  }</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160; </div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;  <span class="keywordflow">return</span> UnwindDestToken;</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;}</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;<span class="comment">/// When we inline a basic block into an invoke,</span></div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;<span class="comment">/// we have to turn all of the calls that can throw into invokes.</span></div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;<span class="comment">/// This function analyze BB to see if there are any calls, and if so,</span></div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;<span class="comment">/// it rewrites them to be invokes that jump to InvokeDest and fills in the PHI</span></div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;<span class="comment">/// nodes in that block with the values specified in InvokeDestPHIValues.</span></div>
<div class="line"><a name="l00542"></a><span class="lineno"><a class="line" href="InlineFunction_8cpp.html#aacb4e52fb1da69b5085b4dbf32406b71">  542</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="InlineFunction_8cpp.html#aacb4e52fb1da69b5085b4dbf32406b71">HandleCallsInBlockInlinedThroughInvoke</a>(</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *UnwindEdge,</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;    <a class="code" href="classllvm_1_1DenseMap.html">UnwindDestMemoTy</a> *FuncletUnwindMap = <span class="keyword">nullptr</span>) {</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : <a class="code" href="namespacellvm.html#a8154638df88e4eaa568b67b23d463dac">llvm::make_early_inc_range</a>(*<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>)) {</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;    <span class="comment">// We only need to check for function calls: inlined invoke</span></div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;    <span class="comment">// instructions require no special handling.</span></div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;    <a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *CI = dyn_cast&lt;CallInst&gt;(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160; </div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;    <span class="keywordflow">if</span> (!CI || CI-&gt;<a class="code" href="classllvm_1_1CallBase.html#aa87fae97a8c702741eca5a95748af49d">doesNotThrow</a>())</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160; </div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;    <span class="comment">// We do not need to (and in fact, cannot) convert possibly throwing calls</span></div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;    <span class="comment">// to @llvm.experimental_deoptimize (resp. @llvm.experimental.guard) into</span></div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;    <span class="comment">// invokes.  The caller&#39;s &quot;segment&quot; of the deoptimization continuation</span></div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;    <span class="comment">// attached to the newly inlined @llvm.experimental_deoptimize</span></div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;    <span class="comment">// (resp. @llvm.experimental.guard) call should contain the exception</span></div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;    <span class="comment">// handling logic, if any.</span></div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> = CI-&gt;<a class="code" href="classllvm_1_1CallBase.html#a83b8c9e572130f403445c0b0f69b837c">getCalledFunction</a>())</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;getIntrinsicID() == Intrinsic::experimental_deoptimize ||</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;          <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;getIntrinsicID() == Intrinsic::experimental_guard)</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160; </div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> FuncletBundle = CI-&gt;<a class="code" href="classllvm_1_1CallBase.html#a87921b2b4748a722da30339103c08f62">getOperandBundle</a>(<a class="code" href="classllvm_1_1LLVMContext.html#a800c1300065ca1615d2f4fb88623afd5a8997c6b0930e2c05209e95e7172c6cf3">LLVMContext::OB_funclet</a>)) {</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;      <span class="comment">// This call is nested inside a funclet.  If that funclet has an unwind</span></div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;      <span class="comment">// destination within the inlinee, then unwinding out of this call would</span></div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;      <span class="comment">// be UB.  Rewriting this call to an invoke which targets the inlined</span></div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;      <span class="comment">// invoke&#39;s unwind dest would give the call&#39;s parent funclet multiple</span></div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;      <span class="comment">// unwind destinations, which is something that subsequent EH table</span></div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;      <span class="comment">// generation can&#39;t handle and that the veirifer rejects.  So when we</span></div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;      <span class="comment">// see such a call, leave it as a call.</span></div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;      <span class="keyword">auto</span> *FuncletPad = cast&lt;Instruction&gt;(FuncletBundle-&gt;Inputs[0]);</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *UnwindDestToken =</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;          <a class="code" href="InlineFunction_8cpp.html#aba0a2870541e6fa6fd93c313d27a139e">getUnwindDestToken</a>(FuncletPad, *FuncletUnwindMap);</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;      <span class="keywordflow">if</span> (UnwindDestToken &amp;&amp; !isa&lt;ConstantTokenNone&gt;(UnwindDestToken))</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;      <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *MemoKey;</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> *CatchPad = dyn_cast&lt;CatchPadInst&gt;(FuncletPad))</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;        MemoKey = CatchPad-&gt;getCatchSwitch();</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;        MemoKey = FuncletPad;</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(FuncletUnwindMap-&gt;count(MemoKey) &amp;&amp;</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;             (*FuncletUnwindMap)[MemoKey] == UnwindDestToken &amp;&amp;</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;             <span class="stringliteral">&quot;must get memoized to avoid confusing later searches&quot;</span>);</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;<span class="preprocessor">#endif // NDEBUG</span></div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;    }</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160; </div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;    <a class="code" href="namespacellvm.html#a1481db7804704b4beb48e8c2ad4c94b2">changeToInvokeAndSplitBasicBlock</a>(CI, UnwindEdge);</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>;</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;  }</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;}</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;<span class="comment">/// If we inlined an invoke site, we need to convert calls</span></div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;<span class="comment">/// in the body of the inlined function into invokes.</span></div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;<span class="comment">/// II is the invoke instruction being inlined.  FirstNewBlock is the first</span></div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;<span class="comment">/// block of the inlined code (the last block is the end of the function),</span></div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;<span class="comment">/// and InlineCodeInfo is information about the code that got inlined.</span></div>
<div class="line"><a name="l00601"></a><span class="lineno"><a class="line" href="InlineFunction_8cpp.html#a4cbd6aad6f6b93f79dc435feab77550e">  601</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="InlineFunction_8cpp.html#a4cbd6aad6f6b93f79dc435feab77550e">HandleInlinedLandingPad</a>(<a class="code" href="classllvm_1_1InvokeInst.html">InvokeInst</a> *II, <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *FirstNewBlock,</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;                                    <a class="code" href="structllvm_1_1ClonedCodeInfo.html">ClonedCodeInfo</a> &amp;InlinedCodeInfo) {</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *InvokeDest = II-&gt;<a class="code" href="classllvm_1_1InvokeInst.html#a5ba379c3251d99b4c23c8f2e6abe4a6c">getUnwindDest</a>();</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160; </div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *Caller = FirstNewBlock-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a38bee869ad41aebfef3de2641b12004c">getParent</a>();</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160; </div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;  <span class="comment">// The inlined code is currently at the end of the function, scan from the</span></div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;  <span class="comment">// start of the inlined code to its end, checking for stuff we need to</span></div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;  <span class="comment">// rewrite.</span></div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;  LandingPadInliningInfo Invoke(II);</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160; </div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;  <span class="comment">// Get all of the inlined landing pad instructions.</span></div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;LandingPadInst*, 16&gt;</a> InlinedLPads;</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Function.html#a19595c245bd2e3eefa93ce22db5ad15f">Function::iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = FirstNewBlock-&gt;<a class="code" href="classllvm_1_1ilist__node__impl.html#af719fc783be6589465137d997701a432">getIterator</a>(), <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = Caller-&gt;end();</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;       <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1InvokeInst.html">InvokeInst</a> *II = dyn_cast&lt;InvokeInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getTerminator()))</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;      InlinedLPads.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(II-&gt;<a class="code" href="classllvm_1_1InvokeInst.html#a4e9b9e31270dac5f644a568f2139bee4">getLandingPadInst</a>());</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160; </div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;  <span class="comment">// Append the clauses from the outer landing pad instruction into the inlined</span></div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;  <span class="comment">// landing pad instructions.</span></div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;  <a class="code" href="classllvm_1_1LandingPadInst.html">LandingPadInst</a> *OuterLPad = Invoke.getLandingPadInst();</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1LandingPadInst.html">LandingPadInst</a> *InlinedLPad : InlinedLPads) {</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;    <span class="keywordtype">unsigned</span> OuterNum = OuterLPad-&gt;<a class="code" href="classllvm_1_1LandingPadInst.html#a1d25e478c9de2656ce4c793a8b80e537">getNumClauses</a>();</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;    InlinedLPad-&gt;reserveClauses(OuterNum);</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> OuterIdx = 0; OuterIdx != OuterNum; ++OuterIdx)</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;      InlinedLPad-&gt;addClause(OuterLPad-&gt;<a class="code" href="classllvm_1_1LandingPadInst.html#a56a8919a6120a8c398b382e41c8b3f1e">getClause</a>(OuterIdx));</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;    <span class="keywordflow">if</span> (OuterLPad-&gt;<a class="code" href="classllvm_1_1LandingPadInst.html#a0966e2f38f20609a643b5d5e3da8bae5">isCleanup</a>())</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;      InlinedLPad-&gt;setCleanup(<span class="keyword">true</span>);</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;  }</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160; </div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Function.html#a19595c245bd2e3eefa93ce22db5ad15f">Function::iterator</a> <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> = FirstNewBlock-&gt;<a class="code" href="classllvm_1_1ilist__node__impl.html#af719fc783be6589465137d997701a432">getIterator</a>(), <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = Caller-&gt;end();</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;       <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> != <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>; ++<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) {</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;    <span class="keywordflow">if</span> (InlinedCodeInfo.<a class="code" href="structllvm_1_1ClonedCodeInfo.html#a6bbe5e652464ac9213907e3446874900">ContainsCalls</a>)</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *NewBB = <a class="code" href="InlineFunction_8cpp.html#aacb4e52fb1da69b5085b4dbf32406b71">HandleCallsInBlockInlinedThroughInvoke</a>(</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;              &amp;*<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, Invoke.getOuterResumeDest()))</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;        <span class="comment">// Update any PHI nodes in the exceptional block to indicate that there</span></div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;        <span class="comment">// is now a new entry in them.</span></div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;        Invoke.addIncomingPHIValuesFor(NewBB);</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160; </div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;    <span class="comment">// Forward any resumes that are remaining here.</span></div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ResumeInst.html">ResumeInst</a> *RI = dyn_cast&lt;ResumeInst&gt;(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getTerminator()))</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;      Invoke.forwardResume(RI, InlinedLPads);</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;  }</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160; </div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;  <span class="comment">// Now that everything is happy, we have one final detail.  The PHI nodes in</span></div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;  <span class="comment">// the exception destination block still have entries due to the original</span></div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;  <span class="comment">// invoke instruction. Eliminate these entries (which might even delete the</span></div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;  <span class="comment">// PHI node) now.</span></div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;  InvokeDest-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#afe7af0c3ec2ef1f525173acd2ea4ba60">removePredecessor</a>(II-&gt;<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>());</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;}</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;<span class="comment">/// If we inlined an invoke site, we need to convert calls</span></div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;<span class="comment">/// in the body of the inlined function into invokes.</span></div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;<span class="comment">/// II is the invoke instruction being inlined.  FirstNewBlock is the first</span></div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;<span class="comment">/// block of the inlined code (the last block is the end of the function),</span></div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;<span class="comment">/// and InlineCodeInfo is information about the code that got inlined.</span></div>
<div class="line"><a name="l00658"></a><span class="lineno"><a class="line" href="InlineFunction_8cpp.html#aac69c9cf4e552a52d5065e94dc023f82">  658</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="InlineFunction_8cpp.html#aac69c9cf4e552a52d5065e94dc023f82">HandleInlinedEHPad</a>(<a class="code" href="classllvm_1_1InvokeInst.html">InvokeInst</a> *II, <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *FirstNewBlock,</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;                               <a class="code" href="structllvm_1_1ClonedCodeInfo.html">ClonedCodeInfo</a> &amp;InlinedCodeInfo) {</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *UnwindDest = II-&gt;<a class="code" href="classllvm_1_1InvokeInst.html#a5ba379c3251d99b4c23c8f2e6abe4a6c">getUnwindDest</a>();</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *Caller = FirstNewBlock-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a38bee869ad41aebfef3de2641b12004c">getParent</a>();</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160; </div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(UnwindDest-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a46ef6115027606b67adcf4d28f3dac17">getFirstNonPHI</a>()-&gt;<a class="code" href="classllvm_1_1Instruction.html#a5d3d315f678bc76e43b27d18e5d72829">isEHPad</a>() &amp;&amp; <span class="stringliteral">&quot;unexpected BasicBlock!&quot;</span>);</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160; </div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;  <span class="comment">// If there are PHI nodes in the unwind destination block, we need to keep</span></div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;  <span class="comment">// track of which values came into them from the invoke before removing the</span></div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;  <span class="comment">// edge from this block.</span></div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Value *, 8&gt;</a> UnwindDestPHIValues;</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *InvokeBB = II-&gt;<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>();</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1PHINode.html">PHINode</a> &amp;<a class="code" href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">PHI</a> : UnwindDest-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a72516971c5734dc0f7546e64affca425">phis</a>()) {</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;    <span class="comment">// Save the value to use for this edge.</span></div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;    UnwindDestPHIValues.push_back(<a class="code" href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">PHI</a>.getIncomingValueForBlock(InvokeBB));</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;  }</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160; </div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;  <span class="comment">// Add incoming-PHI values to the unwind destination block for the given basic</span></div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;  <span class="comment">// block, using the values for the original invoke&#39;s source block.</span></div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;  <span class="keyword">auto</span> <a class="code" href="BasicBlockUtils_8cpp.html#a4fd3bc9dead8a151c4cdf8c60d497931">UpdatePHINodes</a> = [&amp;](<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Src) {</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html#a98c0a84a5dfa8bce341c829709f171e5">BasicBlock::iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = UnwindDest-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>();</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V : UnwindDestPHIValues) {</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;      <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *<a class="code" href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">PHI</a> = cast&lt;PHINode&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;      <a class="code" href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">PHI</a>-&gt;addIncoming(V, Src);</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;      ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;    }</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;  };</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160; </div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;  <span class="comment">// This connects all the instructions which &#39;unwind to caller&#39; to the invoke</span></div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;  <span class="comment">// destination.</span></div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;  <a class="code" href="classllvm_1_1DenseMap.html">UnwindDestMemoTy</a> FuncletUnwindMap;</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Function.html#a19595c245bd2e3eefa93ce22db5ad15f">Function::iterator</a> <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> = FirstNewBlock-&gt;<a class="code" href="classllvm_1_1ilist__node__impl.html#af719fc783be6589465137d997701a432">getIterator</a>(), <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = Caller-&gt;end();</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;       <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> != <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>; ++<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) {</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> *CRI = dyn_cast&lt;CleanupReturnInst&gt;(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getTerminator())) {</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;      <span class="keywordflow">if</span> (CRI-&gt;unwindsToCaller()) {</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;        <span class="keyword">auto</span> *CleanupPad = CRI-&gt;getCleanupPad();</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;        <a class="code" href="classllvm_1_1CleanupReturnInst.html#a12229044a9165df6c04a72377885874a">CleanupReturnInst::Create</a>(CleanupPad, UnwindDest, CRI);</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;        CRI-&gt;eraseFromParent();</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;        <a class="code" href="BasicBlockUtils_8cpp.html#a4fd3bc9dead8a151c4cdf8c60d497931">UpdatePHINodes</a>(&amp;*<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;        <span class="comment">// Finding a cleanupret with an unwind destination would confuse</span></div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;        <span class="comment">// subsequent calls to getUnwindDestToken, so map the cleanuppad</span></div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;        <span class="comment">// to short-circuit any such calls and recognize this as an &quot;unwind</span></div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;        <span class="comment">// to caller&quot; cleanup.</span></div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;        <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!FuncletUnwindMap.<a class="code" href="classllvm_1_1DenseMapBase.html#a53408c95a7bfb5443b43fb2134c3eb23">count</a>(CleanupPad) ||</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;               isa&lt;ConstantTokenNone&gt;(FuncletUnwindMap[CleanupPad]));</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;        FuncletUnwindMap[CleanupPad] =</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;            <a class="code" href="classllvm_1_1ConstantTokenNone.html#a8e29fb8e39fb67b3bb746dbba47fcb29">ConstantTokenNone::get</a>(Caller-&gt;getContext());</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;      }</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;    }</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160; </div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getFirstNonPHI();</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;isEHPad())</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160; </div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Replacement = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> *CatchSwitch = dyn_cast&lt;CatchSwitchInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;      <span class="keywordflow">if</span> (CatchSwitch-&gt;unwindsToCaller()) {</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *UnwindDestToken;</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;        <span class="keywordflow">if</span> (<span class="keyword">auto</span> *ParentPad =</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;                dyn_cast&lt;Instruction&gt;(CatchSwitch-&gt;getParentPad())) {</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;          <span class="comment">// This catchswitch is nested inside another funclet.  If that</span></div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;          <span class="comment">// funclet has an unwind destination within the inlinee, then</span></div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;          <span class="comment">// unwinding out of this catchswitch would be UB.  Rewriting this</span></div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;          <span class="comment">// catchswitch to unwind to the inlined invoke&#39;s unwind dest would</span></div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;          <span class="comment">// give the parent funclet multiple unwind destinations, which is</span></div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;          <span class="comment">// something that subsequent EH table generation can&#39;t handle and</span></div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;          <span class="comment">// that the veirifer rejects.  So when we see such a call, leave it</span></div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;          <span class="comment">// as &quot;unwind to caller&quot;.</span></div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;          UnwindDestToken = <a class="code" href="InlineFunction_8cpp.html#aba0a2870541e6fa6fd93c313d27a139e">getUnwindDestToken</a>(ParentPad, FuncletUnwindMap);</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;          <span class="keywordflow">if</span> (UnwindDestToken &amp;&amp; !isa&lt;ConstantTokenNone&gt;(UnwindDestToken))</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;          <span class="comment">// This catchswitch has no parent to inherit constraints from, and</span></div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;          <span class="comment">// none of its descendants can have an unwind edge that exits it and</span></div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;          <span class="comment">// targets another funclet in the inlinee.  It may or may not have a</span></div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;          <span class="comment">// descendant that definitively has an unwind to caller.  In either</span></div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;          <span class="comment">// case, we&#39;ll have to assume that any unwinds out of it may need to</span></div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;          <span class="comment">// be routed to the caller, so treat it as though it has a definitive</span></div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;          <span class="comment">// unwind to caller.</span></div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;          UnwindDestToken = <a class="code" href="classllvm_1_1ConstantTokenNone.html#a8e29fb8e39fb67b3bb746dbba47fcb29">ConstantTokenNone::get</a>(Caller-&gt;getContext());</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;        }</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;        <span class="keyword">auto</span> *NewCatchSwitch = <a class="code" href="classllvm_1_1CatchSwitchInst.html#ae61b8e2a70c05a76af629cd6acb64390">CatchSwitchInst::Create</a>(</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;            CatchSwitch-&gt;getParentPad(), UnwindDest,</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;            CatchSwitch-&gt;getNumHandlers(), CatchSwitch-&gt;<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>(),</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;            CatchSwitch);</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *PadBB : CatchSwitch-&gt;handlers())</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;          NewCatchSwitch-&gt;addHandler(PadBB);</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;        <span class="comment">// Propagate info for the old catchswitch over to the new one in</span></div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;        <span class="comment">// the unwind map.  This also serves to short-circuit any subsequent</span></div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;        <span class="comment">// checks for the unwind dest of this catchswitch, which would get</span></div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;        <span class="comment">// confused if they found the outer handler in the callee.</span></div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;        FuncletUnwindMap[NewCatchSwitch] = UnwindDestToken;</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;        Replacement = NewCatchSwitch;</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;      }</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!isa&lt;FuncletPadInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;      <a class="code" href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;unexpected EHPad!&quot;</span>);</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;    }</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160; </div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;    <span class="keywordflow">if</span> (Replacement) {</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;      Replacement-&gt;<a class="code" href="classllvm_1_1Value.html#ae855357b6c5e6e7ed1869272708a3a84">takeName</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;      <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;replaceAllUsesWith(Replacement);</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;      <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;eraseFromParent();</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;      <a class="code" href="BasicBlockUtils_8cpp.html#a4fd3bc9dead8a151c4cdf8c60d497931">UpdatePHINodes</a>(&amp;*<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;    }</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;  }</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160; </div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;  <span class="keywordflow">if</span> (InlinedCodeInfo.<a class="code" href="structllvm_1_1ClonedCodeInfo.html#a6bbe5e652464ac9213907e3446874900">ContainsCalls</a>)</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Function.html#a19595c245bd2e3eefa93ce22db5ad15f">Function::iterator</a> <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> = FirstNewBlock-&gt;<a class="code" href="classllvm_1_1ilist__node__impl.html#af719fc783be6589465137d997701a432">getIterator</a>(),</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;                            <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = Caller-&gt;end();</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;         <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> != <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>; ++<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>)</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *NewBB = <a class="code" href="InlineFunction_8cpp.html#aacb4e52fb1da69b5085b4dbf32406b71">HandleCallsInBlockInlinedThroughInvoke</a>(</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;              &amp;*<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, UnwindDest, &amp;FuncletUnwindMap))</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;        <span class="comment">// Update any PHI nodes in the exceptional block to indicate that there</span></div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;        <span class="comment">// is now a new entry in them.</span></div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;        <a class="code" href="BasicBlockUtils_8cpp.html#a4fd3bc9dead8a151c4cdf8c60d497931">UpdatePHINodes</a>(NewBB);</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160; </div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;  <span class="comment">// Now that everything is happy, we have one final detail.  The PHI nodes in</span></div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;  <span class="comment">// the exception destination block still have entries due to the original</span></div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;  <span class="comment">// invoke instruction. Eliminate these entries (which might even delete the</span></div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;  <span class="comment">// PHI node) now.</span></div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;  UnwindDest-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#afe7af0c3ec2ef1f525173acd2ea4ba60">removePredecessor</a>(InvokeBB);</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;}</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160; </div>
<div class="line"><a name="l00781"></a><span class="lineno"><a class="line" href="InlineFunction_8cpp.html#af7016ec74e60284d198d9b70ec8f1ab2">  781</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="InlineFunction_8cpp.html#af7016ec74e60284d198d9b70ec8f1ab2">haveCommonPrefix</a>(<a class="code" href="classllvm_1_1MDNode.html">MDNode</a> *MIBStackContext,</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;                             <a class="code" href="classllvm_1_1MDNode.html">MDNode</a> *CallsiteStackContext) {</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(MIBStackContext-&gt;<a class="code" href="classllvm_1_1MDNode.html#aa4068e37ec583962685e3567dc102ae5">getNumOperands</a>() &gt; 0 &amp;&amp;</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;         CallsiteStackContext-&gt;<a class="code" href="classllvm_1_1MDNode.html#aa4068e37ec583962685e3567dc102ae5">getNumOperands</a>() &gt; 0);</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;  <span class="comment">// Because of the context trimming performed during matching, the callsite</span></div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;  <span class="comment">// context could have more stack ids than the MIB. We match up to the end of</span></div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;  <span class="comment">// the shortest stack context.</span></div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> MIBStackIter = MIBStackContext-&gt;<a class="code" href="classllvm_1_1MDNode.html#ac9a44b78ebdc1a9be01a96cc5e3bbb59">op_begin</a>(),</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;            CallsiteStackIter = CallsiteStackContext-&gt;<a class="code" href="classllvm_1_1MDNode.html#ac9a44b78ebdc1a9be01a96cc5e3bbb59">op_begin</a>();</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;       MIBStackIter != MIBStackContext-&gt;<a class="code" href="classllvm_1_1MDNode.html#a679e07915a76a131faa1460665755151">op_end</a>() &amp;&amp;</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;       CallsiteStackIter != CallsiteStackContext-&gt;<a class="code" href="classllvm_1_1MDNode.html#a679e07915a76a131faa1460665755151">op_end</a>();</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;       MIBStackIter++, CallsiteStackIter++) {</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;    <span class="keyword">auto</span> *Val1 = mdconst::dyn_extract&lt;ConstantInt&gt;(*MIBStackIter);</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;    <span class="keyword">auto</span> *Val2 = mdconst::dyn_extract&lt;ConstantInt&gt;(*CallsiteStackIter);</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Val1 &amp;&amp; Val2);</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;    <span class="keywordflow">if</span> (Val1-&gt;getZExtValue() != Val2-&gt;getZExtValue())</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;  }</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;}</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160; </div>
<div class="line"><a name="l00802"></a><span class="lineno"><a class="line" href="InlineFunction_8cpp.html#ae2c447e52415219501221037474b9893">  802</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="InlineFunction_8cpp.html#ae2c447e52415219501221037474b9893">removeMemProfMetadata</a>(<a class="code" href="classllvm_1_1CallBase.html">CallBase</a> *Call) {</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;  Call-&gt;setMetadata(LLVMContext::MD_memprof, <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;}</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160; </div>
<div class="line"><a name="l00806"></a><span class="lineno"><a class="line" href="InlineFunction_8cpp.html#a32f2884ce25dcf448fbb3fb0a57396ff">  806</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="InlineFunction_8cpp.html#a32f2884ce25dcf448fbb3fb0a57396ff">removeCallsiteMetadata</a>(<a class="code" href="classllvm_1_1CallBase.html">CallBase</a> *Call) {</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;  Call-&gt;setMetadata(LLVMContext::MD_callsite, <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;}</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160; </div>
<div class="line"><a name="l00810"></a><span class="lineno"><a class="line" href="InlineFunction_8cpp.html#afbf6d60618e520079ded1612a2941fbe">  810</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="InlineFunction_8cpp.html#afbf6d60618e520079ded1612a2941fbe">updateMemprofMetadata</a>(<a class="code" href="classllvm_1_1CallBase.html">CallBase</a> *CI,</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;                                  <span class="keyword">const</span> std::vector&lt;Metadata *&gt; &amp;MIBList) {</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!MIBList.empty());</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;  <span class="comment">// Remove existing memprof, which will either be replaced or may not be needed</span></div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;  <span class="comment">// if we are able to use a single allocation type function attribute.</span></div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;  <a class="code" href="InlineFunction_8cpp.html#ae2c447e52415219501221037474b9893">removeMemProfMetadata</a>(CI);</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;  <a class="code" href="classllvm_1_1memprof_1_1CallStackTrie.html">CallStackTrie</a> <a class="code" href="classllvm_1_1memprof_1_1CallStack.html">CallStack</a>;</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Metadata.html">Metadata</a> *MIB : MIBList)</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;    <a class="code" href="classllvm_1_1memprof_1_1CallStack.html">CallStack</a>.addCallStack(cast&lt;MDNode&gt;(MIB));</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;  <span class="keywordtype">bool</span> MemprofMDAttached = <a class="code" href="classllvm_1_1memprof_1_1CallStack.html">CallStack</a>.buildAndAttachMIBMetadata(CI);</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(MemprofMDAttached == CI-&gt;<a class="code" href="classllvm_1_1Instruction.html#a565f546ad95bd3a9bbe9a1e5040803f0">hasMetadata</a>(LLVMContext::MD_memprof));</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;  <span class="keywordflow">if</span> (!MemprofMDAttached)</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;    <span class="comment">// If we used a function attribute remove the callsite metadata as well.</span></div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;    <a class="code" href="InlineFunction_8cpp.html#a32f2884ce25dcf448fbb3fb0a57396ff">removeCallsiteMetadata</a>(CI);</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;}</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160; </div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;<span class="comment">// Update the metadata on the inlined copy ClonedCall of a call OrigCall in the</span></div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;<span class="comment">// inlined callee body, based on the callsite metadata InlinedCallsiteMD from</span></div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;<span class="comment">// the call that was inlined.</span></div>
<div class="line"><a name="l00829"></a><span class="lineno"><a class="line" href="InlineFunction_8cpp.html#a380713e3d0da9090dbc68193076703b7">  829</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="InlineFunction_8cpp.html#a380713e3d0da9090dbc68193076703b7">propagateMemProfHelper</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1CallBase.html">CallBase</a> *OrigCall,</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;                                   <a class="code" href="classllvm_1_1CallBase.html">CallBase</a> *ClonedCall,</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;                                   <a class="code" href="classllvm_1_1MDNode.html">MDNode</a> *InlinedCallsiteMD) {</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;  <a class="code" href="classllvm_1_1MDNode.html">MDNode</a> *OrigCallsiteMD = ClonedCall-&gt;<a class="code" href="classllvm_1_1Instruction.html#ae22f493ba8327ce92e87d3b96bce7017">getMetadata</a>(LLVMContext::MD_callsite);</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;  <a class="code" href="classllvm_1_1MDNode.html">MDNode</a> *ClonedCallsiteMD = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;  <span class="comment">// Check if the call originally had callsite metadata, and update it for the</span></div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;  <span class="comment">// new call in the inlined body.</span></div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;  <span class="keywordflow">if</span> (OrigCallsiteMD) {</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;    <span class="comment">// The cloned call&#39;s context is now the concatenation of the original call&#39;s</span></div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;    <span class="comment">// callsite metadata and the callsite metadata on the call where it was</span></div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;    <span class="comment">// inlined.</span></div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;    ClonedCallsiteMD = <a class="code" href="classllvm_1_1MDNode.html#a3279d6d110c594673e692308fce00fab">MDNode::concatenate</a>(OrigCallsiteMD, InlinedCallsiteMD);</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;    ClonedCall-&gt;<a class="code" href="classllvm_1_1Instruction.html#a9247a212ea89acc9573fa7e7f557eaba">setMetadata</a>(LLVMContext::MD_callsite, ClonedCallsiteMD);</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;  }</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160; </div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;  <span class="comment">// Update any memprof metadata on the cloned call.</span></div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;  <a class="code" href="classllvm_1_1MDNode.html">MDNode</a> *OrigMemProfMD = ClonedCall-&gt;<a class="code" href="classllvm_1_1Instruction.html#ae22f493ba8327ce92e87d3b96bce7017">getMetadata</a>(LLVMContext::MD_memprof);</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;  <span class="keywordflow">if</span> (!OrigMemProfMD)</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;  <span class="comment">// We currently expect that allocations with memprof metadata also have</span></div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;  <span class="comment">// callsite metadata for the allocation&#39;s part of the context.</span></div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(OrigCallsiteMD);</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160; </div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;  <span class="comment">// New call&#39;s MIB list.</span></div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;  std::vector&lt;Metadata *&gt; NewMIBList;</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160; </div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;  <span class="comment">// For each MIB metadata, check if its call stack context starts with the</span></div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;  <span class="comment">// new clone&#39;s callsite metadata. If so, that MIB goes onto the cloned call in</span></div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;  <span class="comment">// the inlined body. If not, it stays on the out-of-line original call.</span></div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;MIBOp : OrigMemProfMD-&gt;<a class="code" href="classllvm_1_1MDNode.html#a2ff0e0e87a2d1056a7b6d7d4b878c4ec">operands</a>()) {</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;    <a class="code" href="classllvm_1_1MDNode.html">MDNode</a> *MIB = dyn_cast&lt;MDNode&gt;(MIBOp);</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;    <span class="comment">// Stack is first operand of MIB.</span></div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;    <a class="code" href="classllvm_1_1MDNode.html">MDNode</a> *StackMD = <a class="code" href="namespacellvm_1_1memprof.html#ab5636c9dedf3853480a075cefc7cc1fa">getMIBStackNode</a>(MIB);</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(StackMD);</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;    <span class="comment">// See if the new cloned callsite context matches this profiled context.</span></div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="InlineFunction_8cpp.html#af7016ec74e60284d198d9b70ec8f1ab2">haveCommonPrefix</a>(StackMD, ClonedCallsiteMD))</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;      <span class="comment">// Add it to the cloned call&#39;s MIB list.</span></div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;      NewMIBList.push_back(MIB);</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;  }</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;  <span class="keywordflow">if</span> (NewMIBList.empty()) {</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;    <a class="code" href="InlineFunction_8cpp.html#ae2c447e52415219501221037474b9893">removeMemProfMetadata</a>(ClonedCall);</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;    <a class="code" href="InlineFunction_8cpp.html#a32f2884ce25dcf448fbb3fb0a57396ff">removeCallsiteMetadata</a>(ClonedCall);</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;  }</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;  <span class="keywordflow">if</span> (NewMIBList.size() &lt; OrigMemProfMD-&gt;<a class="code" href="classllvm_1_1MDNode.html#aa4068e37ec583962685e3567dc102ae5">getNumOperands</a>())</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;    <a class="code" href="InlineFunction_8cpp.html#afbf6d60618e520079ded1612a2941fbe">updateMemprofMetadata</a>(ClonedCall, NewMIBList);</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;}</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160; </div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;<span class="comment">// Update memprof related metadata (!memprof and !callsite) based on the</span></div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;<span class="comment">// inlining of Callee into the callsite at CB. The updates include merging the</span></div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;<span class="comment">// inlined callee&#39;s callsite metadata with that of the inlined call,</span></div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;<span class="comment">// and moving the subset of any memprof contexts to the inlined callee</span></div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;<span class="comment">// allocations if they match the new inlined call stack.</span></div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;<span class="comment">// FIXME: Replace memprof metadata with function attribute if all MIB end up</span></div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;<span class="comment">// having the same behavior. Do other context trimming/merging optimizations</span></div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;<span class="comment">// too.</span></div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span></div>
<div class="line"><a name="l00886"></a><span class="lineno"><a class="line" href="InlineFunction_8cpp.html#a81fe0543b342a120ede7c69eeed77729">  886</a></span>&#160;<a class="code" href="InlineFunction_8cpp.html#a81fe0543b342a120ede7c69eeed77729">propagateMemProfMetadata</a>(<a class="code" href="classllvm_1_1Function.html">Function</a> *Callee, <a class="code" href="classllvm_1_1CallBase.html">CallBase</a> &amp;CB,</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;                         <span class="keywordtype">bool</span> ContainsMemProfMetadata,</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;                         <span class="keyword">const</span> <a class="code" href="classllvm_1_1ValueMap.html">ValueMap&lt;const Value *, WeakTrackingVH&gt;</a> &amp;VMap) {</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;  <a class="code" href="classllvm_1_1MDNode.html">MDNode</a> *CallsiteMD = CB.<a class="code" href="classllvm_1_1Instruction.html#ae22f493ba8327ce92e87d3b96bce7017">getMetadata</a>(LLVMContext::MD_callsite);</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;  <span class="comment">// Only need to update if the inlined callsite had callsite metadata, or if</span></div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;  <span class="comment">// there was any memprof metadata inlined.</span></div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;  <span class="keywordflow">if</span> (!CallsiteMD &amp;&amp; !ContainsMemProfMetadata)</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160; </div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;  <span class="comment">// Propagate metadata onto the cloned calls in the inlined callee.</span></div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;Entry : VMap) {</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;    <span class="comment">// See if this is a call that has been inlined and remapped, and not</span></div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;    <span class="comment">// simplified away in the process.</span></div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;    <span class="keyword">auto</span> *OrigCall = dyn_cast_or_null&lt;CallBase&gt;(Entry.first);</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;    <span class="keyword">auto</span> *ClonedCall = dyn_cast_or_null&lt;CallBase&gt;(Entry.second);</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;    <span class="keywordflow">if</span> (!OrigCall || !ClonedCall)</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;    <span class="comment">// If the inlined callsite did not have any callsite metadata, then it isn&#39;t</span></div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;    <span class="comment">// involved in any profiled call contexts, and we can remove any memprof</span></div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;    <span class="comment">// metadata on the cloned call.</span></div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;    <span class="keywordflow">if</span> (!CallsiteMD) {</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;      <a class="code" href="InlineFunction_8cpp.html#ae2c447e52415219501221037474b9893">removeMemProfMetadata</a>(ClonedCall);</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;      <a class="code" href="InlineFunction_8cpp.html#a32f2884ce25dcf448fbb3fb0a57396ff">removeCallsiteMetadata</a>(ClonedCall);</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;    }</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;    <a class="code" href="InlineFunction_8cpp.html#a380713e3d0da9090dbc68193076703b7">propagateMemProfHelper</a>(OrigCall, ClonedCall, CallsiteMD);</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;  }</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;}</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;<span class="comment">/// When inlining a call site that has !llvm.mem.parallel_loop_access,</span></div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;<span class="comment">/// !llvm.access.group, !alias.scope or !noalias metadata, that metadata should</span></div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;<span class="comment">/// be propagated to all memory-accessing cloned instructions.</span></div>
<div class="line"><a name="l00918"></a><span class="lineno"><a class="line" href="InlineFunction_8cpp.html#a74b8b820b4b2d53dd53ba32821887473">  918</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="InlineFunction_8cpp.html#a74b8b820b4b2d53dd53ba32821887473">PropagateCallSiteMetadata</a>(<a class="code" href="classllvm_1_1CallBase.html">CallBase</a> &amp;CB, <a class="code" href="classllvm_1_1Function.html#a19595c245bd2e3eefa93ce22db5ad15f">Function::iterator</a> FStart,</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;                                      <a class="code" href="classllvm_1_1Function.html#a19595c245bd2e3eefa93ce22db5ad15f">Function::iterator</a> FEnd) {</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;  <a class="code" href="classllvm_1_1MDNode.html">MDNode</a> *MemParallelLoopAccess =</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;      CB.<a class="code" href="classllvm_1_1Instruction.html#ae22f493ba8327ce92e87d3b96bce7017">getMetadata</a>(LLVMContext::MD_mem_parallel_loop_access);</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;  <a class="code" href="classllvm_1_1MDNode.html">MDNode</a> *AccessGroup = CB.<a class="code" href="classllvm_1_1Instruction.html#ae22f493ba8327ce92e87d3b96bce7017">getMetadata</a>(LLVMContext::MD_access_group);</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;  <a class="code" href="classllvm_1_1MDNode.html">MDNode</a> *AliasScope = CB.<a class="code" href="classllvm_1_1Instruction.html#ae22f493ba8327ce92e87d3b96bce7017">getMetadata</a>(LLVMContext::MD_alias_scope);</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;  <a class="code" href="classllvm_1_1MDNode.html">MDNode</a> *NoAlias = CB.<a class="code" href="classllvm_1_1Instruction.html#ae22f493ba8327ce92e87d3b96bce7017">getMetadata</a>(LLVMContext::MD_noalias);</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;  <span class="keywordflow">if</span> (!MemParallelLoopAccess &amp;&amp; !AccessGroup &amp;&amp; !AliasScope &amp;&amp; !NoAlias)</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160; </div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> &amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> : <a class="code" href="namespacellvm.html#ad1a91b49e0c092818a0b82f6cc130a1b">make_range</a>(FStart, FEnd)) {</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) {</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;      <span class="comment">// This metadata is only relevant for instructions that access memory.</span></div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.mayReadOrWriteMemory())</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160; </div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;      <span class="keywordflow">if</span> (MemParallelLoopAccess) {</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;        <span class="comment">// TODO: This probably should not overwrite MemParalleLoopAccess.</span></div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;        MemParallelLoopAccess = <a class="code" href="classllvm_1_1MDNode.html#a3279d6d110c594673e692308fce00fab">MDNode::concatenate</a>(</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;            <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getMetadata(LLVMContext::MD_mem_parallel_loop_access),</div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;            MemParallelLoopAccess);</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;        <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.setMetadata(LLVMContext::MD_mem_parallel_loop_access,</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;                      MemParallelLoopAccess);</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;      }</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160; </div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;      <span class="keywordflow">if</span> (AccessGroup)</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;        <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.setMetadata(LLVMContext::MD_access_group, <a class="code" href="namespacellvm.html#ab307a287351370b59786ef96c73738cb">uniteAccessGroups</a>(</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;            <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getMetadata(LLVMContext::MD_access_group), AccessGroup));</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160; </div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;      <span class="keywordflow">if</span> (AliasScope)</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;        <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.setMetadata(LLVMContext::MD_alias_scope, <a class="code" href="classllvm_1_1MDNode.html#a3279d6d110c594673e692308fce00fab">MDNode::concatenate</a>(</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;            <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getMetadata(LLVMContext::MD_alias_scope), AliasScope));</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160; </div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;      <span class="keywordflow">if</span> (NoAlias)</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;        <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.setMetadata(LLVMContext::MD_noalias, <a class="code" href="classllvm_1_1MDNode.html#a3279d6d110c594673e692308fce00fab">MDNode::concatenate</a>(</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;            <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getMetadata(LLVMContext::MD_noalias), NoAlias));</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;    }</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;  }</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;}</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;<span class="comment">/// Bundle operands of the inlined function must be added to inlined call sites.</span></div>
<div class="line"><a name="l00959"></a><span class="lineno"><a class="line" href="InlineFunction_8cpp.html#af939eab05ffe67221645aab1342156b2">  959</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="InlineFunction_8cpp.html#af939eab05ffe67221645aab1342156b2">PropagateOperandBundles</a>(<a class="code" href="classllvm_1_1Function.html#a19595c245bd2e3eefa93ce22db5ad15f">Function::iterator</a> InlinedBB,</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;                                    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *CallSiteEHPad) {</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;II : <a class="code" href="namespacellvm.html#a8154638df88e4eaa568b67b23d463dac">llvm::make_early_inc_range</a>(*InlinedBB)) {</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;    <a class="code" href="classllvm_1_1CallBase.html">CallBase</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = dyn_cast&lt;CallBase&gt;(&amp;II);</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;    <span class="comment">// Skip call sites which already have a &quot;funclet&quot; bundle.</span></div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperandBundle(<a class="code" href="classllvm_1_1LLVMContext.html#a800c1300065ca1615d2f4fb88623afd5a8997c6b0930e2c05209e95e7172c6cf3">LLVMContext::OB_funclet</a>))</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;    <span class="comment">// Skip call sites which are nounwind intrinsics (as long as they don&#39;t</span></div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;    <span class="comment">// lower into regular function calls in the course of IR transformations).</span></div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;    <span class="keyword">auto</span> *CalledFn =</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;        dyn_cast&lt;Function&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getCalledOperand()-&gt;stripPointerCasts());</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;    <span class="keywordflow">if</span> (CalledFn &amp;&amp; CalledFn-&gt;isIntrinsic() &amp;&amp; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;doesNotThrow() &amp;&amp;</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;        !<a class="code" href="classllvm_1_1IntrinsicInst.html#a04df6c03772f85899d30bdcd06cbcd06">IntrinsicInst::mayLowerToFunctionCall</a>(CalledFn-&gt;getIntrinsicID()))</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160; </div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;OperandBundleDef, 1&gt;</a> OpBundles;</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;    <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperandBundlesAsDefs(OpBundles);</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;    OpBundles.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a396fcfee6914c76974b73c3d203da6a5">emplace_back</a>(<span class="stringliteral">&quot;funclet&quot;</span>, CallSiteEHPad);</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160; </div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *NewInst = <a class="code" href="classllvm_1_1CallBase.html#a7d1bb46cb6e28a5907c4185157804911">CallBase::Create</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, OpBundles, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;    NewInst-&gt;<a class="code" href="classllvm_1_1Value.html#ae855357b6c5e6e7ed1869272708a3a84">takeName</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;    <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;replaceAllUsesWith(NewInst);</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;    <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;eraseFromParent();</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;  }</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;}</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160; </div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;<span class="keyword">namespace </span>{<span class="comment"></span></div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;<span class="comment">/// Utility for cloning !noalias and !alias.scope metadata. When a code region</span></div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;<span class="comment">/// using scoped alias metadata is inlined, the aliasing relationships may not</span></div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;<span class="comment">/// hold between the two version. It is necessary to create a deep clone of the</span></div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;<span class="comment">/// metadata, putting the two versions in separate scope domains.</span></div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;<span class="comment"></span><span class="keyword">class </span>ScopedAliasMetadataDeepCloner {</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;  <span class="keyword">using</span> MetadataMap = <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;const MDNode *, TrackingMDNodeRef&gt;</a>;</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;  <a class="code" href="classllvm_1_1SetVector.html">SetVector&lt;const MDNode *&gt;</a> MD;</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;  MetadataMap MDMap;</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;  <span class="keywordtype">void</span> addRecursiveMetadataUses();</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160; </div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;  ScopedAliasMetadataDeepCloner(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;<span class="comment">  /// Create a new clone of the scoped alias metadata, which will be used by</span></div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;<span class="comment">  /// subsequent remap() calls.</span></div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> clone();</div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;<span class="comment">  /// Remap instructions in the given range from the original to the cloned</span></div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;<span class="comment">  /// metadata.</span></div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> remap(<a class="code" href="classllvm_1_1Function.html#a19595c245bd2e3eefa93ce22db5ad15f">Function::iterator</a> FStart, <a class="code" href="classllvm_1_1Function.html#a19595c245bd2e3eefa93ce22db5ad15f">Function::iterator</a> FEnd);</div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;};</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;} <span class="comment">// namespace</span></div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160; </div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;ScopedAliasMetadataDeepCloner::ScopedAliasMetadataDeepCloner(</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>) {</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> &amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> : *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>) {</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) {</div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1MDNode.html">MDNode</a> *M = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getMetadata(LLVMContext::MD_alias_scope))</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;        MD.insert(M);</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1MDNode.html">MDNode</a> *M = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getMetadata(LLVMContext::MD_noalias))</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;        MD.insert(M);</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160; </div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;      <span class="comment">// We also need to clone the metadata in noalias intrinsics.</span></div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">const</span> <span class="keyword">auto</span> *Decl = dyn_cast&lt;NoAliasScopeDeclInst&gt;(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;        MD.insert(Decl-&gt;getScopeList());</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;    }</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;  }</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;  addRecursiveMetadataUses();</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;}</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160; </div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;<span class="keywordtype">void</span> ScopedAliasMetadataDeepCloner::addRecursiveMetadataUses() {</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;const Metadata *, 16&gt;</a> <a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD.html#a85803b71729d5d098ca2099f23cbf72ea722ad2d05ecf4868b00c5484b82fd808">Queue</a>(MD.begin(), MD.end());</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;  <span class="keywordflow">while</span> (!<a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD.html#a85803b71729d5d098ca2099f23cbf72ea722ad2d05ecf4868b00c5484b82fd808">Queue</a>.empty()) {</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1MDNode.html">MDNode</a> *<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a> = cast&lt;MDNode&gt;(<a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD.html#a85803b71729d5d098ca2099f23cbf72ea722ad2d05ecf4868b00c5484b82fd808">Queue</a>.pop_back_val());</div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1Metadata.html">Metadata</a> *<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a> : <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>-&gt;operands())</div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1MDNode.html">MDNode</a> *OpMD = dyn_cast&lt;MDNode&gt;(<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>))</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;        <span class="keywordflow">if</span> (MD.insert(OpMD))</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;          <a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD.html#a85803b71729d5d098ca2099f23cbf72ea722ad2d05ecf4868b00c5484b82fd808">Queue</a>.push_back(OpMD);</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;  }</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;}</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160; </div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;<span class="keywordtype">void</span> ScopedAliasMetadataDeepCloner::clone() {</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(MDMap.empty() &amp;&amp; <span class="stringliteral">&quot;clone() already called ?&quot;</span>);</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160; </div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;TempMDTuple, 16&gt;</a> DummyNodes;</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1MDNode.html">MDNode</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : MD) {</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;    DummyNodes.push_back(<a class="code" href="classllvm_1_1MDTuple.html#ac2e84f7e25af6e1de8cb811a57c6ee29">MDTuple::getTemporary</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getContext(), std::nullopt));</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;    MDMap[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>].reset(DummyNodes.back().get());</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;  }</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160; </div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;  <span class="comment">// Create new metadata nodes to replace the dummy nodes, replacing old</span></div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;  <span class="comment">// metadata references with either a dummy node or an already-created new</span></div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;  <span class="comment">// node.</span></div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Metadata *, 4&gt;</a> NewOps;</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1MDNode.html">MDNode</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : MD) {</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1Metadata.html">Metadata</a> *<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a> : <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;operands()) {</div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1MDNode.html">MDNode</a> *M = dyn_cast&lt;MDNode&gt;(<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>))</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;        NewOps.push_back(MDMap[M]);</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;        NewOps.push_back(<span class="keyword">const_cast&lt;</span><a class="code" href="classllvm_1_1Metadata.html">Metadata</a> *<span class="keyword">&gt;</span>(<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>));</div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;    }</div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160; </div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;    <a class="code" href="classllvm_1_1MDNode.html">MDNode</a> *NewM = <a class="code" href="classllvm_1_1MDNode.html#a7d10a7b9b7f40b04d27ed97c38ea1950">MDNode::get</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getContext(), NewOps);</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;    <a class="code" href="classllvm_1_1MDTuple.html">MDTuple</a> *TempM = cast&lt;MDTuple&gt;(MDMap[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>]);</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(TempM-&gt;<a class="code" href="classllvm_1_1MDNode.html#a4a3aafff3f29eba4c6d639e6648c330c">isTemporary</a>() &amp;&amp; <span class="stringliteral">&quot;Expected temporary node&quot;</span>);</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160; </div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;    TempM-&gt;<a class="code" href="classllvm_1_1MDNode.html#a2e9fe39301fbac7276c8d9f3e1884dc2">replaceAllUsesWith</a>(NewM);</div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;    NewOps.<a class="code" href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">clear</a>();</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;  }</div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;}</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160; </div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;<span class="keywordtype">void</span> ScopedAliasMetadataDeepCloner::remap(<a class="code" href="classllvm_1_1Function.html#a19595c245bd2e3eefa93ce22db5ad15f">Function::iterator</a> FStart,</div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;                                          <a class="code" href="classllvm_1_1Function.html#a19595c245bd2e3eefa93ce22db5ad15f">Function::iterator</a> FEnd) {</div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;  <span class="keywordflow">if</span> (MDMap.empty())</div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;    <span class="keywordflow">return</span>; <span class="comment">// Nothing to do.</span></div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160; </div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> &amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> : <a class="code" href="namespacellvm.html#ad1a91b49e0c092818a0b82f6cc130a1b">make_range</a>(FStart, FEnd)) {</div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) {</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;      <span class="comment">// TODO: The null checks for the MDMap.lookup() results should no longer</span></div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;      <span class="comment">// be necessary.</span></div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1MDNode.html">MDNode</a> *M = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getMetadata(LLVMContext::MD_alias_scope))</div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1MDNode.html">MDNode</a> *MNew = MDMap.lookup(M))</div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;          <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.setMetadata(LLVMContext::MD_alias_scope, MNew);</div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160; </div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1MDNode.html">MDNode</a> *M = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getMetadata(LLVMContext::MD_noalias))</div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1MDNode.html">MDNode</a> *MNew = MDMap.lookup(M))</div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;          <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.setMetadata(LLVMContext::MD_noalias, MNew);</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160; </div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> *Decl = dyn_cast&lt;NoAliasScopeDeclInst&gt;(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1MDNode.html">MDNode</a> *MNew = MDMap.lookup(Decl-&gt;getScopeList()))</div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;          Decl-&gt;setScopeList(MNew);</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;    }</div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;  }</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;}</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;<span class="comment">/// If the inlined function has noalias arguments,</span></div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;<span class="comment">/// then add new alias scopes for each noalias argument, tag the mapped noalias</span></div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;<span class="comment">/// parameters with noalias metadata specifying the new scope, and tag all</span></div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;<span class="comment">/// non-derived loads, stores and memory intrinsics with the new alias scopes.</span></div>
<div class="line"><a name="l01097"></a><span class="lineno"><a class="line" href="InlineFunction_8cpp.html#aa35af336fee32786b6551e23d5b55fcf"> 1097</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="InlineFunction_8cpp.html#aa35af336fee32786b6551e23d5b55fcf">AddAliasScopeMetadata</a>(<a class="code" href="classllvm_1_1CallBase.html">CallBase</a> &amp;CB, <a class="code" href="classllvm_1_1ValueMap.html">ValueToValueMapTy</a> &amp;VMap,</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;                                  <span class="keyword">const</span> <a class="code" href="classllvm_1_1DataLayout.html">DataLayout</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1AAResults.html">AAResults</a> *CalleeAAR,</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;                                  <a class="code" href="structllvm_1_1ClonedCodeInfo.html">ClonedCodeInfo</a> &amp;InlinedFunctionInfo) {</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="InlineFunction_8cpp.html#a8e4039f04450ff68d8d2cf3db092315c">EnableNoAliasConversion</a>)</div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160; </div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1Function.html">Function</a> *CalledFunc = CB.<a class="code" href="classllvm_1_1CallBase.html#a83b8c9e572130f403445c0b0f69b837c">getCalledFunction</a>();</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;const Argument *, 4&gt;</a> NoAliasArgs;</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160; </div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1Argument.html">Argument</a> &amp;<a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a> : CalledFunc-&gt;<a class="code" href="classllvm_1_1Function.html#a0b44832d4b6bb57b0e8c61fc3242547b">args</a>())</div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;    <span class="keywordflow">if</span> (CB.<a class="code" href="classllvm_1_1CallBase.html#a4cbb2344996abd4332716e76178ad4f4">paramHasAttr</a>(<a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>.getArgNo(), Attribute::NoAlias) &amp;&amp; !<a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>.use_empty())</div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;      NoAliasArgs.push_back(&amp;<a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>);</div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160; </div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;  <span class="keywordflow">if</span> (NoAliasArgs.empty())</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160; </div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;  <span class="comment">// To do a good job, if a noalias variable is captured, we need to know if</span></div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;  <span class="comment">// the capture point dominates the particular use we&#39;re considering.</span></div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;  <a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> DT;</div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;  DT.<a class="code" href="classllvm_1_1DominatorTreeBase.html#aa0641ae965656ff9988d67a35140e4d9">recalculate</a>(<span class="keyword">const_cast&lt;</span><a class="code" href="classllvm_1_1Function.html">Function</a>&amp;<span class="keyword">&gt;</span>(*CalledFunc));</div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160; </div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;  <span class="comment">// noalias indicates that pointer values based on the argument do not alias</span></div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;  <span class="comment">// pointer values which are not based on it. So we add a new &quot;scope&quot; for each</span></div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;  <span class="comment">// noalias function argument. Accesses using pointers based on that argument</span></div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;  <span class="comment">// become part of that alias scope, accesses using pointers not based on that</span></div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;  <span class="comment">// argument are tagged as noalias with that scope.</span></div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160; </div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;  <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;const Argument *, MDNode *&gt;</a> NewScopes;</div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;  <a class="code" href="classllvm_1_1MDBuilder.html">MDBuilder</a> MDB(CalledFunc-&gt;<a class="code" href="classllvm_1_1Function.html#a9fffac2512fe651f0d5e37e27f5bd51c">getContext</a>());</div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160; </div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;  <span class="comment">// Create a new scope domain for this function.</span></div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;  <a class="code" href="classllvm_1_1MDNode.html">MDNode</a> *NewDomain =</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;    MDB.<a class="code" href="classllvm_1_1MDBuilder.html#aa1408308630d4280bd656a54dc92af1d">createAnonymousAliasScopeDomain</a>(CalledFunc-&gt;<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>());</div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a> = NoAliasArgs.size(); <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a>; ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1Argument.html">Argument</a> *A = NoAliasArgs[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160; </div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;    std::string Name = std::string(CalledFunc-&gt;<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>());</div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;    <span class="keywordflow">if</span> (A-&gt;hasName()) {</div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;      Name += <span class="stringliteral">&quot;: %&quot;</span>;</div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;      Name += A-&gt;getName();</div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;      Name += <span class="stringliteral">&quot;: argument &quot;</span>;</div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;      Name += utostr(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;    }</div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160; </div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;    <span class="comment">// Note: We always create a new anonymous root here. This is true regardless</span></div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;    <span class="comment">// of the linkage of the callee because the aliasing &quot;scope&quot; is not just a</span></div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;    <span class="comment">// property of the callee, but also all control dependencies in the caller.</span></div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;    <a class="code" href="classllvm_1_1MDNode.html">MDNode</a> *NewScope = MDB.<a class="code" href="classllvm_1_1MDBuilder.html#ab3c477eaa7266e85f2a8caf885854e49">createAnonymousAliasScope</a>(NewDomain, Name);</div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;    NewScopes.<a class="code" href="classllvm_1_1DenseMapBase.html#a99f811d53704275b4158c62a2dd138d9">insert</a>(std::make_pair(A, NewScope));</div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160; </div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="InlineFunction_8cpp.html#a48453d4e53402e9e330e74232eded4be">UseNoAliasIntrinsic</a>) {</div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;      <span class="comment">// Introduce a llvm.experimental.noalias.scope.decl for the noalias</span></div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;      <span class="comment">// argument.</span></div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;      <a class="code" href="classllvm_1_1MDNode.html">MDNode</a> *AScopeList = <a class="code" href="classllvm_1_1MDNode.html#a7d10a7b9b7f40b04d27ed97c38ea1950">MDNode::get</a>(CalledFunc-&gt;<a class="code" href="classllvm_1_1Function.html#a9fffac2512fe651f0d5e37e27f5bd51c">getContext</a>(), NewScope);</div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;      <span class="keyword">auto</span> *NoAliasDecl =</div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;          <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a>(&amp;CB).<a class="code" href="classllvm_1_1IRBuilderBase.html#aed7ebff53a4fe006b39662f94e976d24">CreateNoAliasScopeDeclaration</a>(AScopeList);</div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;      <span class="comment">// Ignore the result for now. The result will be used when the</span></div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;      <span class="comment">// llvm.noalias intrinsic is introduced.</span></div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;      (void)NoAliasDecl;</div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;    }</div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;  }</div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160; </div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;  <span class="comment">// Iterate over all new instructions in the map; for all memory-access</span></div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;  <span class="comment">// instructions, add the alias scope metadata.</span></div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1ValueMapIterator.html">ValueToValueMapTy::iterator</a> VMI = VMap.<a class="code" href="classllvm_1_1ValueMap.html#a799baf755bd1d5589995e78dbb9a4ced">begin</a>(), VMIE = VMap.<a class="code" href="classllvm_1_1ValueMap.html#ab871e2d0ebded563edfebd6766fc1a04">end</a>();</div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;       VMI != VMIE; ++VMI) {</div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = dyn_cast&lt;Instruction&gt;(VMI-&gt;first)) {</div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;      <span class="keywordflow">if</span> (!VMI-&gt;second)</div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160; </div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;      <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *NI = dyn_cast&lt;Instruction&gt;(VMI-&gt;second);</div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;      <span class="keywordflow">if</span> (!NI || InlinedFunctionInfo.<a class="code" href="structllvm_1_1ClonedCodeInfo.html#a6711ec71d15ab34fb6eedc26d5b5da80">isSimplified</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, NI))</div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160; </div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;      <span class="keywordtype">bool</span> IsArgMemOnlyCall = <span class="keyword">false</span>, IsFuncCall = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;      <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;const Value *, 2&gt;</a> PtrArgs;</div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160; </div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a> *LI = dyn_cast&lt;LoadInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;        PtrArgs.push_back(LI-&gt;getPointerOperand());</div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1StoreInst.html">StoreInst</a> *<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a> = dyn_cast&lt;StoreInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;        PtrArgs.push_back(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;getPointerOperand());</div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1VAArgInst.html">VAArgInst</a> *VAAI = dyn_cast&lt;VAArgInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;        PtrArgs.push_back(VAAI-&gt;getPointerOperand());</div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1AtomicCmpXchgInst.html">AtomicCmpXchgInst</a> *CXI = dyn_cast&lt;AtomicCmpXchgInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;        PtrArgs.push_back(CXI-&gt;getPointerOperand());</div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1AtomicRMWInst.html">AtomicRMWInst</a> *RMWI = dyn_cast&lt;AtomicRMWInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;        PtrArgs.push_back(RMWI-&gt;getPointerOperand());</div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">const</span> <span class="keyword">auto</span> *Call = dyn_cast&lt;CallBase&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;        <span class="comment">// If we know that the call does not access memory, then we&#39;ll still</span></div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;        <span class="comment">// know that about the inlined clone of this call site, and we don&#39;t</span></div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;        <span class="comment">// need to add metadata.</span></div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;        <span class="keywordflow">if</span> (Call-&gt;doesNotAccessMemory())</div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160; </div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;        IsFuncCall = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;        <span class="keywordflow">if</span> (CalleeAAR) {</div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;          <a class="code" href="classllvm_1_1MemoryEffects.html">MemoryEffects</a> ME = CalleeAAR-&gt;<a class="code" href="classllvm_1_1AAResults.html#a98f54e18da022cdb497fbbeed4488276">getMemoryEffects</a>(Call);</div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160; </div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;          <span class="comment">// We&#39;ll retain this knowledge without additional metadata.</span></div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;          <span class="keywordflow">if</span> (ME.<a class="code" href="classllvm_1_1MemoryEffects.html#a597afa0c09bf142ab21b2d17b871a9bd">onlyAccessesInaccessibleMem</a>())</div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160; </div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;          <span class="keywordflow">if</span> (ME.<a class="code" href="classllvm_1_1MemoryEffects.html#a05319d3cd9be33731ba884642cf1df76">onlyAccessesArgPointees</a>())</div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;            IsArgMemOnlyCall = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;        }</div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160; </div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a> : Call-&gt;args()) {</div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;          <span class="comment">// Only care about pointer arguments. If a noalias argument is</span></div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;          <span class="comment">// accessed through a non-pointer argument, it must be captured</span></div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;          <span class="comment">// first (e.g. via ptrtoint), and we protect against captures below.</span></div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;          <span class="keywordflow">if</span> (!<a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>-&gt;getType()-&gt;isPointerTy())</div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160; </div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;          PtrArgs.push_back(<a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>);</div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;        }</div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;      }</div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160; </div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;      <span class="comment">// If we found no pointers, then this instruction is not suitable for</span></div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;      <span class="comment">// pairing with an instruction to receive aliasing metadata.</span></div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;      <span class="comment">// However, if this is a call, this we might just alias with none of the</span></div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;      <span class="comment">// noalias arguments.</span></div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;      <span class="keywordflow">if</span> (PtrArgs.empty() &amp;&amp; !IsFuncCall)</div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160; </div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;      <span class="comment">// It is possible that there is only one underlying object, but you</span></div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;      <span class="comment">// need to go through several PHIs to see it, and thus could be</span></div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;      <span class="comment">// repeated in the Objects list.</span></div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;      <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;const Value *, 4&gt;</a> ObjSet;</div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;      <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Metadata *, 4&gt;</a> Scopes, <a class="code" href="CSKYInstPrinter_8cpp.html#a0a9c49021d8cb10425b2928d1957e5d6">NoAliases</a>;</div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160; </div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;      <a class="code" href="classllvm_1_1SmallSetVector.html">SmallSetVector&lt;const Argument *, 4&gt;</a> NAPtrArgs;</div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *V : PtrArgs) {</div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;        <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;const Value *, 4&gt;</a> Objects;</div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;        <a class="code" href="namespacellvm.html#aa1fa33552f21afa988d7fa09b1a369fa">getUnderlyingObjects</a>(V, Objects, <span class="comment">/* LI = */</span> <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160; </div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;        <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1a33f1d911a725a1f81234a908d03edb">O</a> : Objects)</div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;          ObjSet.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(<a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1a33f1d911a725a1f81234a908d03edb">O</a>);</div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;      }</div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160; </div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;      <span class="comment">// Figure out if we&#39;re derived from anything that is not a noalias</span></div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;      <span class="comment">// argument.</span></div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;      <span class="keywordtype">bool</span> RequiresNoCaptureBefore = <span class="keyword">false</span>, UsesAliasingPtr = <span class="keyword">false</span>,</div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;           UsesUnknownObject = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *V : ObjSet) {</div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;        <span class="comment">// Is this value a constant that cannot be derived from any pointer</span></div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;        <span class="comment">// value (we need to exclude constant expressions, for example, that</span></div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;        <span class="comment">// are formed from arithmetic on global symbols).</span></div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;        <span class="keywordtype">bool</span> IsNonPtrConst = isa&lt;ConstantInt&gt;(V) || isa&lt;ConstantFP&gt;(V) ||</div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;                             isa&lt;ConstantPointerNull&gt;(V) ||</div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;                             isa&lt;ConstantDataVector&gt;(V) || isa&lt;UndefValue&gt;(V);</div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;        <span class="keywordflow">if</span> (IsNonPtrConst)</div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160; </div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;        <span class="comment">// If this is anything other than a noalias argument, then we cannot</span></div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;        <span class="comment">// completely describe the aliasing properties using alias.scope</span></div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;        <span class="comment">// metadata (and, thus, won&#39;t add any).</span></div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;        <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1Argument.html">Argument</a> *A = dyn_cast&lt;Argument&gt;(V)) {</div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;          <span class="keywordflow">if</span> (!CB.<a class="code" href="classllvm_1_1CallBase.html#a4cbb2344996abd4332716e76178ad4f4">paramHasAttr</a>(A-&gt;getArgNo(), Attribute::NoAlias))</div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;            UsesAliasingPtr = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;          UsesAliasingPtr = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;        }</div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160; </div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#ac03ea7d56bf43713b1c15ccf95081d6a">isEscapeSource</a>(V)) {</div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;          <span class="comment">// An escape source can only alias with a noalias argument if it has</span></div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;          <span class="comment">// been captured beforehand.</span></div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;          RequiresNoCaptureBefore = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!isa&lt;Argument&gt;(V) &amp;&amp; !<a class="code" href="namespacellvm.html#aed2c5dd2a303159f87771db83f54352b">isIdentifiedObject</a>(V)) {</div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;          <span class="comment">// If this is neither an escape source, nor some identified object</span></div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;          <span class="comment">// (which cannot directly alias a noalias argument), nor some other</span></div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;          <span class="comment">// argument (which, by definition, also cannot alias a noalias</span></div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;          <span class="comment">// argument), conservatively do not make any assumptions.</span></div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;          UsesUnknownObject = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;        }</div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;      }</div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160; </div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;      <span class="comment">// Nothing we can do if the used underlying object cannot be reliably</span></div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;      <span class="comment">// determined.</span></div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;      <span class="keywordflow">if</span> (UsesUnknownObject)</div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160; </div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;      <span class="comment">// A function call can always get captured noalias pointers (via other</span></div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;      <span class="comment">// parameters, globals, etc.).</span></div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;      <span class="keywordflow">if</span> (IsFuncCall &amp;&amp; !IsArgMemOnlyCall)</div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;        RequiresNoCaptureBefore = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160; </div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;      <span class="comment">// First, we want to figure out all of the sets with which we definitely</span></div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;      <span class="comment">// don&#39;t alias. Iterate over all noalias set, and add those for which:</span></div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;      <span class="comment">//   1. The noalias argument is not in the set of objects from which we</span></div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;      <span class="comment">//      definitely derive.</span></div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;      <span class="comment">//   2. The noalias argument has not yet been captured.</span></div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;      <span class="comment">// An arbitrary function that might load pointers could see captured</span></div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;      <span class="comment">// noalias arguments via other noalias arguments or globals, and so we</span></div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;      <span class="comment">// must always check for prior capture.</span></div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1Argument.html">Argument</a> *A : NoAliasArgs) {</div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;        <span class="keywordflow">if</span> (ObjSet.contains(A))</div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;          <span class="keywordflow">continue</span>; <span class="comment">// May be based on a noalias argument.</span></div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160; </div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;        <span class="comment">// It might be tempting to skip the PointerMayBeCapturedBefore check if</span></div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;        <span class="comment">// A-&gt;hasNoCaptureAttr() is true, but this is incorrect because</span></div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;        <span class="comment">// nocapture only guarantees that no copies outlive the function, not</span></div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;        <span class="comment">// that the value cannot be locally captured.</span></div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;        <span class="keywordflow">if</span> (!RequiresNoCaptureBefore ||</div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;            !<a class="code" href="namespacellvm.html#a3693cec8e936224ad3e5748debe73b75">PointerMayBeCapturedBefore</a>(A, <span class="comment">/* ReturnCaptures */</span> <span class="keyword">false</span>,</div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;                                        <span class="comment">/* StoreCaptures */</span> <span class="keyword">false</span>, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, &amp;DT))</div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;          <a class="code" href="CSKYInstPrinter_8cpp.html#a0a9c49021d8cb10425b2928d1957e5d6">NoAliases</a>.push_back(NewScopes[A]);</div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;      }</div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160; </div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="CSKYInstPrinter_8cpp.html#a0a9c49021d8cb10425b2928d1957e5d6">NoAliases</a>.empty())</div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;        NI-&gt;<a class="code" href="classllvm_1_1Instruction.html#a9247a212ea89acc9573fa7e7f557eaba">setMetadata</a>(LLVMContext::MD_noalias,</div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;                        <a class="code" href="classllvm_1_1MDNode.html#a3279d6d110c594673e692308fce00fab">MDNode::concatenate</a>(</div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;                            NI-&gt;<a class="code" href="classllvm_1_1Instruction.html#ae22f493ba8327ce92e87d3b96bce7017">getMetadata</a>(LLVMContext::MD_noalias),</div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;                            <a class="code" href="classllvm_1_1MDNode.html#a7d10a7b9b7f40b04d27ed97c38ea1950">MDNode::get</a>(CalledFunc-&gt;<a class="code" href="classllvm_1_1Function.html#a9fffac2512fe651f0d5e37e27f5bd51c">getContext</a>(), <a class="code" href="CSKYInstPrinter_8cpp.html#a0a9c49021d8cb10425b2928d1957e5d6">NoAliases</a>)));</div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160; </div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;      <span class="comment">// Next, we want to figure out all of the sets to which we might belong.</span></div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;      <span class="comment">// We might belong to a set if the noalias argument is in the set of</span></div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;      <span class="comment">// underlying objects. If there is some non-noalias argument in our list</span></div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;      <span class="comment">// of underlying objects, then we cannot add a scope because the fact</span></div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;      <span class="comment">// that some access does not alias with any set of our noalias arguments</span></div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;      <span class="comment">// cannot itself guarantee that it does not alias with this access</span></div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;      <span class="comment">// (because there is some pointer of unknown origin involved and the</span></div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;      <span class="comment">// other access might also depend on this pointer). We also cannot add</span></div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;      <span class="comment">// scopes to arbitrary functions unless we know they don&#39;t access any</span></div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;      <span class="comment">// non-parameter pointer-values.</span></div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;      <span class="keywordtype">bool</span> CanAddScopes = !UsesAliasingPtr;</div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;      <span class="keywordflow">if</span> (CanAddScopes &amp;&amp; IsFuncCall)</div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;        CanAddScopes = IsArgMemOnlyCall;</div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160; </div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;      <span class="keywordflow">if</span> (CanAddScopes)</div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;        <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1Argument.html">Argument</a> *A : NoAliasArgs) {</div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;          <span class="keywordflow">if</span> (ObjSet.count(A))</div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;            Scopes.push_back(NewScopes[A]);</div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;        }</div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160; </div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;      <span class="keywordflow">if</span> (!Scopes.empty())</div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;        NI-&gt;<a class="code" href="classllvm_1_1Instruction.html#a9247a212ea89acc9573fa7e7f557eaba">setMetadata</a>(</div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;            LLVMContext::MD_alias_scope,</div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;            <a class="code" href="classllvm_1_1MDNode.html#a3279d6d110c594673e692308fce00fab">MDNode::concatenate</a>(NI-&gt;<a class="code" href="classllvm_1_1Instruction.html#ae22f493ba8327ce92e87d3b96bce7017">getMetadata</a>(LLVMContext::MD_alias_scope),</div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;                                <a class="code" href="classllvm_1_1MDNode.html#a7d10a7b9b7f40b04d27ed97c38ea1950">MDNode::get</a>(CalledFunc-&gt;<a class="code" href="classllvm_1_1Function.html#a9fffac2512fe651f0d5e37e27f5bd51c">getContext</a>(), Scopes)));</div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;    }</div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;  }</div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;}</div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160; </div>
<div class="line"><a name="l01341"></a><span class="lineno"><a class="line" href="InlineFunction_8cpp.html#ae41de93195b83f9a1678d4554c6caace"> 1341</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="InlineFunction_8cpp.html#ae41de93195b83f9a1678d4554c6caace">MayContainThrowingOrExitingCall</a>(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Begin,</div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;                                            <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *End) {</div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160; </div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Begin-&gt;<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>() == End-&gt;getParent() &amp;&amp;</div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;         <span class="stringliteral">&quot;Expected to be in same basic block!&quot;</span>);</div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;  <span class="keywordflow">return</span> !<a class="code" href="namespacellvm.html#abff5a423c1f45e23958dde8ee695c9a9">llvm::isGuaranteedToTransferExecutionToSuccessor</a>(</div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;      Begin-&gt;<a class="code" href="classllvm_1_1ilist__node__impl.html#af719fc783be6589465137d997701a432">getIterator</a>(), End-&gt;getIterator(), <a class="code" href="InlineFunction_8cpp.html#aceef73a2afed724fc28b76a05bc57898">InlinerAttributeWindow</a> + 1);</div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;}</div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160; </div>
<div class="line"><a name="l01350"></a><span class="lineno"><a class="line" href="InlineFunction_8cpp.html#a6432ed860d9a2e41e925003f9631052b"> 1350</a></span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1AttrBuilder.html">AttrBuilder</a> <a class="code" href="InlineFunction_8cpp.html#a6432ed860d9a2e41e925003f9631052b">IdentifyValidAttributes</a>(<a class="code" href="classllvm_1_1CallBase.html">CallBase</a> &amp;CB) {</div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160; </div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;  <a class="code" href="classllvm_1_1AttrBuilder.html">AttrBuilder</a> AB(CB.<a class="code" href="classllvm_1_1Value.html#ab3fc0225d8aaf8434026c3573f961f2c">getContext</a>(), CB.<a class="code" href="classllvm_1_1CallBase.html#ae0c55761fce39dd71617690b04385193">getAttributes</a>().<a class="code" href="classllvm_1_1AttributeList.html#a5604157867b3d226260f6388b987e49a">getRetAttrs</a>());</div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;  <span class="keywordflow">if</span> (!AB.hasAttributes())</div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;    <span class="keywordflow">return</span> AB;</div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;  <a class="code" href="classllvm_1_1AttrBuilder.html">AttrBuilder</a> Valid(CB.<a class="code" href="classllvm_1_1Value.html#ab3fc0225d8aaf8434026c3573f961f2c">getContext</a>());</div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;  <span class="comment">// Only allow these white listed attributes to be propagated back to the</span></div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;  <span class="comment">// callee. This is because other attributes may only be valid on the call</span></div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;  <span class="comment">// itself, i.e. attributes such as signext and zeroext.</span></div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> DerefBytes = AB.getDereferenceableBytes())</div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;    Valid.<a class="code" href="classllvm_1_1AttrBuilder.html#a676e566281b7f39a0c685bc6d1032283">addDereferenceableAttr</a>(DerefBytes);</div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> DerefOrNullBytes = AB.getDereferenceableOrNullBytes())</div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;    Valid.<a class="code" href="classllvm_1_1AttrBuilder.html#ac857d238048717f6284dd46bbf867fcd">addDereferenceableOrNullAttr</a>(DerefOrNullBytes);</div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;  <span class="keywordflow">if</span> (AB.contains(Attribute::NoAlias))</div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;    Valid.<a class="code" href="classllvm_1_1AttrBuilder.html#a59d23ba2e7eac46cbc6cd3086e013b49">addAttribute</a>(Attribute::NoAlias);</div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;  <span class="keywordflow">if</span> (AB.contains(Attribute::NonNull))</div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;    Valid.<a class="code" href="classllvm_1_1AttrBuilder.html#a59d23ba2e7eac46cbc6cd3086e013b49">addAttribute</a>(Attribute::NonNull);</div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;  <span class="keywordflow">return</span> Valid;</div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;}</div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160; </div>
<div class="line"><a name="l01370"></a><span class="lineno"><a class="line" href="InlineFunction_8cpp.html#a493e20406e393ad60cef6e39e8465312"> 1370</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="InlineFunction_8cpp.html#a493e20406e393ad60cef6e39e8465312">AddReturnAttributes</a>(<a class="code" href="classllvm_1_1CallBase.html">CallBase</a> &amp;CB, <a class="code" href="classllvm_1_1ValueMap.html">ValueToValueMapTy</a> &amp;VMap) {</div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="InlineFunction_8cpp.html#ac6610b93b62b595b44908bd5b6ab4e16">UpdateReturnAttributes</a>)</div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160; </div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;  <a class="code" href="classllvm_1_1AttrBuilder.html">AttrBuilder</a> Valid = <a class="code" href="InlineFunction_8cpp.html#a6432ed860d9a2e41e925003f9631052b">IdentifyValidAttributes</a>(CB);</div>
<div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;  <span class="keywordflow">if</span> (!Valid.<a class="code" href="classllvm_1_1AttrBuilder.html#a4cf3cb56358d18065c78992569c32d2f">hasAttributes</a>())</div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;  <span class="keyword">auto</span> *CalledFunction = CB.<a class="code" href="classllvm_1_1CallBase.html#a83b8c9e572130f403445c0b0f69b837c">getCalledFunction</a>();</div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;  <span class="keyword">auto</span> &amp;<a class="code" href="NVVMIntrRange_8cpp.html#afad351d7bf10ac0446b64e7827634e94">Context</a> = CalledFunction-&gt;getContext();</div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160; </div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> : *CalledFunction) {</div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;    <span class="keyword">auto</span> *RI = dyn_cast&lt;ReturnInst&gt;(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>.getTerminator());</div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;    <span class="keywordflow">if</span> (!RI || !isa&lt;CallBase&gt;(RI-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0)))</div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;    <span class="keyword">auto</span> *RetVal = cast&lt;CallBase&gt;(RI-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0));</div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;    <span class="comment">// Check that the cloned RetVal exists and is a call, otherwise we cannot</span></div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;    <span class="comment">// add the attributes on the cloned RetVal. Simplification during inlining</span></div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;    <span class="comment">// could have transformed the cloned instruction.</span></div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;    <span class="keyword">auto</span> *NewRetVal = dyn_cast_or_null&lt;CallBase&gt;(VMap.<a class="code" href="classllvm_1_1ValueMap.html#a15f92579a5fc316dab8cd1fad51015ef">lookup</a>(RetVal));</div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;    <span class="keywordflow">if</span> (!NewRetVal)</div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;    <span class="comment">// Backward propagation of attributes to the returned value may be incorrect</span></div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;    <span class="comment">// if it is control flow dependent.</span></div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;    <span class="comment">// Consider:</span></div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;    <span class="comment">// @callee {</span></div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;    <span class="comment">//  %rv = call @foo()</span></div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;    <span class="comment">//  %rv2 = call @bar()</span></div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;    <span class="comment">//  if (%rv2 != null)</span></div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;    <span class="comment">//    return %rv2</span></div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;    <span class="comment">//  if (%rv == null)</span></div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;    <span class="comment">//    exit()</span></div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;    <span class="comment">//  return %rv</span></div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;    <span class="comment">// }</span></div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;    <span class="comment">// caller() {</span></div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;    <span class="comment">//   %val = call nonnull @callee()</span></div>
<div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;    <span class="comment">// }</span></div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;    <span class="comment">// Here we cannot add the nonnull attribute on either foo or bar. So, we</span></div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;    <span class="comment">// limit the check to both RetVal and RI are in the same basic block and</span></div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;    <span class="comment">// there are no throwing/exiting instructions between these instructions.</span></div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;    <span class="keywordflow">if</span> (RI-&gt;<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>() != RetVal-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a38bee869ad41aebfef3de2641b12004c">getParent</a>() ||</div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;        <a class="code" href="InlineFunction_8cpp.html#ae41de93195b83f9a1678d4554c6caace">MayContainThrowingOrExitingCall</a>(RetVal, RI))</div>
<div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;    <span class="comment">// Add to the existing attributes of NewRetVal, i.e. the cloned call</span></div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;    <span class="comment">// instruction.</span></div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;    <span class="comment">// NB! When we have the same attribute already existing on NewRetVal, but</span></div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;    <span class="comment">// with a differing value, the AttributeList&#39;s merge API honours the already</span></div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;    <span class="comment">// existing attribute value (i.e. attributes such as dereferenceable,</span></div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;    <span class="comment">// dereferenceable_or_null etc). See AttrBuilder::merge for more details.</span></div>
<div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;    <a class="code" href="classllvm_1_1AttributeList.html">AttributeList</a> <a class="code" href="namespacellvm_1_1AArch64CC.html#abfa1f7dce576430da99eed57807c7f28ab89adee997fb2a645a2d26e1f1bdaadf">AL</a> = NewRetVal-&gt;getAttributes();</div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;    <a class="code" href="classllvm_1_1AttributeList.html">AttributeList</a> NewAL = <a class="code" href="namespacellvm_1_1AArch64CC.html#abfa1f7dce576430da99eed57807c7f28ab89adee997fb2a645a2d26e1f1bdaadf">AL</a>.addRetAttributes(<a class="code" href="NVVMIntrRange_8cpp.html#afad351d7bf10ac0446b64e7827634e94">Context</a>, Valid);</div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;    NewRetVal-&gt;setAttributes(NewAL);</div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;  }</div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;}</div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;<span class="comment">/// If the inlined function has non-byval align arguments, then</span></div>
<div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;<span class="comment">/// add @llvm.assume-based alignment assumptions to preserve this information.</span></div>
<div class="line"><a name="l01426"></a><span class="lineno"><a class="line" href="InlineFunction_8cpp.html#ae54a643a9f9d83374bb4d7d22d4662d7"> 1426</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="InlineFunction_8cpp.html#ae54a643a9f9d83374bb4d7d22d4662d7">AddAlignmentAssumptions</a>(<a class="code" href="classllvm_1_1CallBase.html">CallBase</a> &amp;CB, <a class="code" href="classllvm_1_1InlineFunctionInfo.html">InlineFunctionInfo</a> &amp;IFI) {</div>
<div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="InlineFunction_8cpp.html#afa5f37b98bb6d7bfe55e6d6267aba424">PreserveAlignmentAssumptions</a> || !IFI.<a class="code" href="classllvm_1_1InlineFunctionInfo.html#a6d3c3f9f13bd38d8aa6410841d2b99c0">GetAssumptionCache</a>)</div>
<div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160; </div>
<div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;  <a class="code" href="classllvm_1_1AssumptionCache.html">AssumptionCache</a> *AC = &amp;IFI.<a class="code" href="classllvm_1_1InlineFunctionInfo.html#a6d3c3f9f13bd38d8aa6410841d2b99c0">GetAssumptionCache</a>(*CB.<a class="code" href="classllvm_1_1CallBase.html#afac5b39bcbb90d660f83d9b4bd8c6d95">getCaller</a>());</div>
<div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;  <span class="keyword">auto</span> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a> = CB.<a class="code" href="classllvm_1_1CallBase.html#afac5b39bcbb90d660f83d9b4bd8c6d95">getCaller</a>()-&gt;<a class="code" href="classllvm_1_1GlobalValue.html#a9e1fc23a17e97d2d1732e753ae9251ac">getParent</a>()-&gt;<a class="code" href="classllvm_1_1Module.html#a6d883605206368bc536cc9ded97209b8">getDataLayout</a>();</div>
<div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160; </div>
<div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;  <span class="comment">// To avoid inserting redundant assumptions, we should check for assumptions</span></div>
<div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;  <span class="comment">// already in the caller. To do this, we might need a DT of the caller.</span></div>
<div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;  <a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> DT;</div>
<div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;  <span class="keywordtype">bool</span> DTCalculated = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160; </div>
<div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *CalledFunc = CB.<a class="code" href="classllvm_1_1CallBase.html#a83b8c9e572130f403445c0b0f69b837c">getCalledFunction</a>();</div>
<div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Argument.html">Argument</a> &amp;<a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a> : CalledFunc-&gt;<a class="code" href="classllvm_1_1Function.html#a0b44832d4b6bb57b0e8c61fc3242547b">args</a>()) {</div>
<div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>.getType()-&gt;isPointerTy() || <a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>.hasPassPointeeByValueCopyAttr() ||</div>
<div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;        <a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>.hasNUses(0))</div>
<div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;    <a class="code" href="structllvm_1_1MaybeAlign.html">MaybeAlign</a> Alignment = <a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>.getParamAlign();</div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;    <span class="keywordflow">if</span> (!Alignment)</div>
<div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160; </div>
<div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;    <span class="keywordflow">if</span> (!DTCalculated) {</div>
<div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;      DT.<a class="code" href="classllvm_1_1DominatorTreeBase.html#aa0641ae965656ff9988d67a35140e4d9">recalculate</a>(*CB.<a class="code" href="classllvm_1_1CallBase.html#afac5b39bcbb90d660f83d9b4bd8c6d95">getCaller</a>());</div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;      DTCalculated = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;    }</div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;    <span class="comment">// If we can already prove the asserted alignment in the context of the</span></div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;    <span class="comment">// caller, then don&#39;t bother inserting the assumption.</span></div>
<div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *ArgVal = CB.<a class="code" href="classllvm_1_1CallBase.html#ab2caa29167597390ab2fc3cf30d70389">getArgOperand</a>(<a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>.getArgNo());</div>
<div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a607b7fac55adc5ea9ed40a78e48a5b00">getKnownAlignment</a>(ArgVal, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, &amp;CB, AC, &amp;DT) &gt;= *Alignment)</div>
<div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160; </div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;    <a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *NewAsmp = <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a>(&amp;CB).<a class="code" href="classllvm_1_1IRBuilderBase.html#a480959ce9fb41e0ac0ce2cd7907d7ace">CreateAlignmentAssumption</a>(</div>
<div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;        <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, ArgVal, Alignment-&gt;value());</div>
<div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;    AC-&gt;<a class="code" href="classllvm_1_1AssumptionCache.html#a7f02822253b078960693acc2f30d4817">registerAssumption</a>(cast&lt;AssumeInst&gt;(NewAsmp));</div>
<div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;  }</div>
<div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;}</div>
<div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;<span class="comment">/// Once we have cloned code over from a callee into the caller,</span></div>
<div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;<span class="comment">/// update the specified callgraph to reflect the changes we made.</span></div>
<div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;<span class="comment">/// Note that it&#39;s possible that not all code was copied over, so only</span></div>
<div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;<span class="comment">/// some edges of the callgraph may remain.</span></div>
<div class="line"><a name="l01467"></a><span class="lineno"><a class="line" href="InlineFunction_8cpp.html#a87cf024e879dad373029f201d5996d20"> 1467</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="InlineFunction_8cpp.html#a87cf024e879dad373029f201d5996d20">UpdateCallGraphAfterInlining</a>(<a class="code" href="classllvm_1_1CallBase.html">CallBase</a> &amp;CB,</div>
<div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;                                         <a class="code" href="classllvm_1_1Function.html#a19595c245bd2e3eefa93ce22db5ad15f">Function::iterator</a> FirstNewBlock,</div>
<div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;                                         <a class="code" href="classllvm_1_1ValueMap.html">ValueToValueMapTy</a> &amp;VMap,</div>
<div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;                                         <a class="code" href="classllvm_1_1InlineFunctionInfo.html">InlineFunctionInfo</a> &amp;IFI) {</div>
<div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;  <a class="code" href="classllvm_1_1CallGraph.html">CallGraph</a> &amp;CG = *IFI.<a class="code" href="classllvm_1_1InlineFunctionInfo.html#ac3ef4b4fdcc6fc9aba65a545c213d76a">CG</a>;</div>
<div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1Function.html">Function</a> *Caller = CB.<a class="code" href="classllvm_1_1CallBase.html#afac5b39bcbb90d660f83d9b4bd8c6d95">getCaller</a>();</div>
<div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="AMDGPULibCalls_8cpp.html#a537c835c34f0b44b6ad2696643754390">Callee</a> = CB.<a class="code" href="classllvm_1_1CallBase.html#a83b8c9e572130f403445c0b0f69b837c">getCalledFunction</a>();</div>
<div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;  <a class="code" href="classllvm_1_1CallGraphNode.html">CallGraphNode</a> *CalleeNode = CG[<a class="code" href="AMDGPULibCalls_8cpp.html#a537c835c34f0b44b6ad2696643754390">Callee</a>];</div>
<div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;  <a class="code" href="classllvm_1_1CallGraphNode.html">CallGraphNode</a> *CallerNode = CG[Caller];</div>
<div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160; </div>
<div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;  <span class="comment">// Since we inlined some uninlined call sites in the callee into the caller,</span></div>
<div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;  <span class="comment">// add edges from the caller to all of the callees of the callee.</span></div>
<div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;  <a class="code" href="classllvm_1_1CallGraphNode.html#abc0ebbee3aae4365ed714cb589fd4a5d">CallGraphNode::iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = CalleeNode-&gt;<a class="code" href="classllvm_1_1CallGraphNode.html#a4f29edc585030005e8215897bb1e792f">begin</a>(), <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = CalleeNode-&gt;<a class="code" href="classllvm_1_1CallGraphNode.html#a72b2e4575a6de8f1550d057ff1c23ea1">end</a>();</div>
<div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160; </div>
<div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;  <span class="comment">// Consider the case where CalleeNode == CallerNode.</span></div>
<div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;  <a class="code" href="classllvm_1_1CallGraphNode.html#a4bdeedd19891bf099e456c984e873597">CallGraphNode::CalledFunctionsVector</a> CallCache;</div>
<div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;  <span class="keywordflow">if</span> (CalleeNode == CallerNode) {</div>
<div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;    CallCache.assign(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>);</div>
<div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;    <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = CallCache.begin();</div>
<div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;    <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = CallCache.end();</div>
<div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;  }</div>
<div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160; </div>
<div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;  <span class="keywordflow">for</span> (; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;    <span class="comment">// Skip &#39;refererence&#39; call records.</span></div>
<div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;first)</div>
<div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160; </div>
<div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *OrigCall = *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;first;</div>
<div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160; </div>
<div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;    <a class="code" href="classllvm_1_1ValueMapIterator.html">ValueToValueMapTy::iterator</a> VMI = VMap.<a class="code" href="classllvm_1_1ValueMap.html#a7629b8c5f6a6802ee0fdc5c290769692">find</a>(OrigCall);</div>
<div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;    <span class="comment">// Only copy the edge if the call was inlined!</span></div>
<div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;    <span class="keywordflow">if</span> (VMI == VMap.<a class="code" href="classllvm_1_1ValueMap.html#ab871e2d0ebded563edfebd6766fc1a04">end</a>() || VMI-&gt;<a class="code" href="structllvm_1_1ValueMapIterator_1_1ValueTypeProxy.html#a5bcf5b029fa9492c00d2329def9b5137">second</a> == <span class="keyword">nullptr</span>)</div>
<div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160; </div>
<div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;    <span class="comment">// If the call was inlined, but then constant folded, there is no edge to</span></div>
<div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;    <span class="comment">// add.  Check for this case.</span></div>
<div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;    <span class="keyword">auto</span> *NewCall = dyn_cast&lt;CallBase&gt;(VMI-&gt;<a class="code" href="structllvm_1_1ValueMapIterator_1_1ValueTypeProxy.html#a5bcf5b029fa9492c00d2329def9b5137">second</a>);</div>
<div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;    <span class="keywordflow">if</span> (!NewCall)</div>
<div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160; </div>
<div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;    <span class="comment">// We do not treat intrinsic calls like real function calls because we</span></div>
<div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;    <span class="comment">// expect them to become inline code; do not add an edge for an intrinsic.</span></div>
<div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;    <span class="keywordflow">if</span> (NewCall-&gt;getCalledFunction() &amp;&amp;</div>
<div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;        NewCall-&gt;getCalledFunction()-&gt;isIntrinsic())</div>
<div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160; </div>
<div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;    <span class="comment">// Remember that this call site got inlined for the client of</span></div>
<div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;    <span class="comment">// InlineFunction.</span></div>
<div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;    IFI.<a class="code" href="classllvm_1_1InlineFunctionInfo.html#ae6918eedce7edea74c67aa164a7d198d">InlinedCalls</a>.push_back(NewCall);</div>
<div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160; </div>
<div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;    <span class="comment">// It&#39;s possible that inlining the callsite will cause it to go from an</span></div>
<div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;    <span class="comment">// indirect to a direct call by resolving a function pointer.  If this</span></div>
<div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;    <span class="comment">// happens, set the callee of the new call site to a more precise</span></div>
<div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;    <span class="comment">// destination.  This can also happen if the call graph node of the caller</span></div>
<div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;    <span class="comment">// was just unnecessarily imprecise.</span></div>
<div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;second-&gt;getFunction())</div>
<div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> = NewCall-&gt;getCalledFunction()) {</div>
<div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;        <span class="comment">// Indirect call site resolved to direct call.</span></div>
<div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;        CallerNode-&gt;<a class="code" href="classllvm_1_1CallGraphNode.html#a5787c4d1e5de6878c95c13873b8e863a">addCalledFunction</a>(NewCall, CG[<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>]);</div>
<div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160; </div>
<div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;      }</div>
<div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160; </div>
<div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;    CallerNode-&gt;<a class="code" href="classllvm_1_1CallGraphNode.html#a5787c4d1e5de6878c95c13873b8e863a">addCalledFunction</a>(NewCall, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;second);</div>
<div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;  }</div>
<div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160; </div>
<div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;  <span class="comment">// Update the call graph by deleting the edge from Callee to Caller.  We must</span></div>
<div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;  <span class="comment">// do this after the loop above in case Caller and Callee are the same.</span></div>
<div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;  CallerNode-&gt;<a class="code" href="classllvm_1_1CallGraphNode.html#a04b68ad3bca393a40d40e2ee6cfc1f47">removeCallEdgeFor</a>(*cast&lt;CallBase&gt;(&amp;CB));</div>
<div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;}</div>
<div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160; </div>
<div class="line"><a name="l01538"></a><span class="lineno"><a class="line" href="InlineFunction_8cpp.html#afab29f1ed29c826e504beee9867df6e3"> 1538</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="InlineFunction_8cpp.html#afab29f1ed29c826e504beee9867df6e3">HandleByValArgumentInit</a>(<a class="code" href="classllvm_1_1Type.html">Type</a> *ByValType, <a class="code" href="classllvm_1_1Value.html">Value</a> *Dst, <a class="code" href="classllvm_1_1Value.html">Value</a> *Src,</div>
<div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;                                    <a class="code" href="classllvm_1_1Module.html">Module</a> *M, <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *InsertBlock,</div>
<div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;                                    <a class="code" href="classllvm_1_1InlineFunctionInfo.html">InlineFunctionInfo</a> &amp;IFI) {</div>
<div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;  <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>(InsertBlock, InsertBlock-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>());</div>
<div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160; </div>
<div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Size =</div>
<div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;      <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getInt64(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>-&gt;getDataLayout().getTypeStoreSize(ByValType));</div>
<div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160; </div>
<div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;  <span class="comment">// Always generate a memcpy of alignment 1 here because we don&#39;t know</span></div>
<div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;  <span class="comment">// the alignment of the src pointer.  Other optimizations can infer</span></div>
<div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;  <span class="comment">// better alignment.</span></div>
<div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateMemCpy(Dst, <span class="comment">/*DstAlign*/</span> <a class="code" href="ELFObjHandler_8cpp.html#a043cdaf7b89aaeeb127be5d93411637f">Align</a>(1), Src,</div>
<div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;                       <span class="comment">/*SrcAlign*/</span> <a class="code" href="ELFObjHandler_8cpp.html#a043cdaf7b89aaeeb127be5d93411637f">Align</a>(1), Size);</div>
<div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;}</div>
<div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;<span class="comment">/// When inlining a call site that has a byval argument,</span></div>
<div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;<span class="comment">/// we have to make the implicit memcpy explicit by adding it.</span></div>
<div class="line"><a name="l01555"></a><span class="lineno"><a class="line" href="InlineFunction_8cpp.html#ac51fa4a21d783cc9e8c2cd5992cf8f6b"> 1555</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="InlineFunction_8cpp.html#ac51fa4a21d783cc9e8c2cd5992cf8f6b">HandleByValArgument</a>(<a class="code" href="classllvm_1_1Type.html">Type</a> *ByValType, <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>,</div>
<div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;                                  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *TheCall,</div>
<div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;                                  <span class="keyword">const</span> <a class="code" href="classllvm_1_1Function.html">Function</a> *CalledFunc,</div>
<div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;                                  <a class="code" href="classllvm_1_1InlineFunctionInfo.html">InlineFunctionInfo</a> &amp;IFI,</div>
<div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;                                  <a class="code" href="structllvm_1_1MaybeAlign.html">MaybeAlign</a> ByValAlignment) {</div>
<div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(cast&lt;PointerType&gt;(<a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>-&gt;getType())</div>
<div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;             -&gt;isOpaqueOrPointeeTypeMatches(ByValType));</div>
<div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *Caller = TheCall-&gt;<a class="code" href="classllvm_1_1Instruction.html#a6a66ebb3aa12757479a3c88de77d78f8">getFunction</a>();</div>
<div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1DataLayout.html">DataLayout</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a> = Caller-&gt;getParent()-&gt;getDataLayout();</div>
<div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160; </div>
<div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;  <span class="comment">// If the called function is readonly, then it could not mutate the caller&#39;s</span></div>
<div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;  <span class="comment">// copy of the byval&#39;d memory.  In this case, it is safe to elide the copy and</span></div>
<div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;  <span class="comment">// temporary.</span></div>
<div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;  <span class="keywordflow">if</span> (CalledFunc-&gt;<a class="code" href="classllvm_1_1Function.html#af7736e14235372b75b72e119f852c280">onlyReadsMemory</a>()) {</div>
<div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;    <span class="comment">// If the byval argument has a specified alignment that is greater than the</span></div>
<div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;    <span class="comment">// passed in pointer, then we either have to round up the input pointer or</span></div>
<div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;    <span class="comment">// give up on this transformation.</span></div>
<div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;    <span class="keywordflow">if</span> (ByValAlignment.<a class="code" href="structllvm_1_1MaybeAlign.html#a06846474be3ab85f8d30c388faf3b116">valueOrOne</a>() == 1)</div>
<div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>;</div>
<div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160; </div>
<div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;    <a class="code" href="classllvm_1_1AssumptionCache.html">AssumptionCache</a> *AC =</div>
<div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;        IFI.<a class="code" href="classllvm_1_1InlineFunctionInfo.html#a6d3c3f9f13bd38d8aa6410841d2b99c0">GetAssumptionCache</a> ? &amp;IFI.<a class="code" href="classllvm_1_1InlineFunctionInfo.html#a6d3c3f9f13bd38d8aa6410841d2b99c0">GetAssumptionCache</a>(*Caller) : <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160; </div>
<div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;    <span class="comment">// If the pointer is already known to be sufficiently aligned, or if we can</span></div>
<div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;    <span class="comment">// round it up to a larger alignment, then we don&#39;t need a temporary.</span></div>
<div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a6e7b79b3933def717c2a0f2fc6fa38e0">getOrEnforceKnownAlignment</a>(<a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>, *ByValAlignment, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, TheCall, AC) &gt;=</div>
<div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;        *ByValAlignment)</div>
<div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>;</div>
<div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160; </div>
<div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;    <span class="comment">// Otherwise, we have to make a memcpy to get a safe alignment.  This is bad</span></div>
<div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;    <span class="comment">// for code quality, but rarely happens and is required for correctness.</span></div>
<div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;  }</div>
<div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160; </div>
<div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;  <span class="comment">// Create the alloca.  If we have DataLayout, use nice alignment.</span></div>
<div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;  <a class="code" href="structllvm_1_1Align.html">Align</a> Alignment = <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getPrefTypeAlign(ByValType);</div>
<div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160; </div>
<div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;  <span class="comment">// If the byval had an alignment specified, we *must* use at least that</span></div>
<div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;  <span class="comment">// alignment, as it is required by the byval argument (and uses of the</span></div>
<div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;  <span class="comment">// pointer inside the callee).</span></div>
<div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;  <span class="keywordflow">if</span> (ByValAlignment)</div>
<div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;    Alignment = <a class="code" href="namespacellvm.html#ab4d4bc901fedd8857f647dcc2c0d71de">std::max</a>(Alignment, *ByValAlignment);</div>
<div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160; </div>
<div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *NewAlloca =</div>
<div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;      <span class="keyword">new</span> <a class="code" href="classllvm_1_1AllocaInst.html">AllocaInst</a>(ByValType, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getAllocaAddrSpace(), <span class="keyword">nullptr</span>, Alignment,</div>
<div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;                     <a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>-&gt;getName(), &amp;*Caller-&gt;begin()-&gt;begin());</div>
<div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;  IFI.<a class="code" href="classllvm_1_1InlineFunctionInfo.html#a9c259c76065eb3b4ce3697ce346008ce">StaticAllocas</a>.push_back(cast&lt;AllocaInst&gt;(NewAlloca));</div>
<div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160; </div>
<div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;  <span class="comment">// Uses of the argument in the function should use our new alloca</span></div>
<div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;  <span class="comment">// instead.</span></div>
<div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;  <span class="keywordflow">return</span> NewAlloca;</div>
<div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;}</div>
<div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160; </div>
<div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;<span class="comment">// Check whether this Value is used by a lifetime intrinsic.</span></div>
<div class="line"><a name="l01608"></a><span class="lineno"><a class="line" href="InlineFunction_8cpp.html#ae21f217cd2f8044e639f13111a0b37db"> 1608</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="InlineFunction_8cpp.html#ae21f217cd2f8044e639f13111a0b37db">isUsedByLifetimeMarker</a>(<a class="code" href="classllvm_1_1Value.html">Value</a> *V) {</div>
<div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1User.html">User</a> *U : V-&gt;<a class="code" href="classllvm_1_1Value.html#ab4e0512c7e1c7adaa56677e3155685f1">users</a>())</div>
<div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1IntrinsicInst.html">IntrinsicInst</a> *II = dyn_cast&lt;IntrinsicInst&gt;(U))</div>
<div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;      <span class="keywordflow">if</span> (II-&gt;<a class="code" href="classllvm_1_1Instruction.html#a185bafe1e8f07def76a3bac154a23e7a">isLifetimeStartOrEnd</a>())</div>
<div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;}</div>
<div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160; </div>
<div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;<span class="comment">// Check whether the given alloca already has</span></div>
<div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;<span class="comment">// lifetime.start or lifetime.end intrinsics.</span></div>
<div class="line"><a name="l01618"></a><span class="lineno"><a class="line" href="InlineFunction_8cpp.html#afaa78d0b3224d3175937f997dc2bc688"> 1618</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="InlineFunction_8cpp.html#afaa78d0b3224d3175937f997dc2bc688">hasLifetimeMarkers</a>(<a class="code" href="classllvm_1_1AllocaInst.html">AllocaInst</a> *AI) {</div>
<div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *Ty = AI-&gt;<a class="code" href="classllvm_1_1AllocaInst.html#ac106bea55dfb26f8b14676aac05bd89f">getType</a>();</div>
<div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *Int8PtrTy = <a class="code" href="classllvm_1_1Type.html#a7fe9ccd4893f4e2caa826126c09545ea">Type::getInt8PtrTy</a>(Ty-&gt;<a class="code" href="classllvm_1_1Type.html#a0566221f10834bfcea70965379745a20">getContext</a>(),</div>
<div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;                                       Ty-&gt;<a class="code" href="classllvm_1_1Type.html#a5ab2d0b0f0b8ceec3b907184e7567197">getPointerAddressSpace</a>());</div>
<div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;  <span class="keywordflow">if</span> (Ty == Int8PtrTy)</div>
<div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="InlineFunction_8cpp.html#ae21f217cd2f8044e639f13111a0b37db">isUsedByLifetimeMarker</a>(AI);</div>
<div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160; </div>
<div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;  <span class="comment">// Do a scan to find all the casts to i8*.</span></div>
<div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1User.html">User</a> *U : AI-&gt;<a class="code" href="classllvm_1_1Value.html#ab4e0512c7e1c7adaa56677e3155685f1">users</a>()) {</div>
<div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;    <span class="keywordflow">if</span> (U-&gt;getType() != Int8PtrTy) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;    <span class="keywordflow">if</span> (U-&gt;stripPointerCasts() != AI) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="InlineFunction_8cpp.html#ae21f217cd2f8044e639f13111a0b37db">isUsedByLifetimeMarker</a>(U))</div>
<div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;  }</div>
<div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;}</div>
<div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;<span class="comment">/// Return the result of AI-&gt;isStaticAlloca() if AI were moved to the entry</span></div>
<div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;<span class="comment">/// block. Allocas used in inalloca calls and allocas of dynamic array size</span></div>
<div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;<span class="comment">/// cannot be static.</span></div>
<div class="line"><a name="l01638"></a><span class="lineno"><a class="line" href="InlineFunction_8cpp.html#ad19c97a069133d179234826fc95c3bde"> 1638</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="InlineFunction_8cpp.html#ad19c97a069133d179234826fc95c3bde">allocaWouldBeStaticInEntry</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1AllocaInst.html">AllocaInst</a> *AI ) {</div>
<div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;  <span class="keywordflow">return</span> isa&lt;Constant&gt;(AI-&gt;<a class="code" href="classllvm_1_1AllocaInst.html#aaca14fdf6d151782f7ab0a66405453fb">getArraySize</a>()) &amp;&amp; !AI-&gt;<a class="code" href="classllvm_1_1AllocaInst.html#a9bb98c4ac4cf77f5782e5e41f2c6f38a">isUsedWithInAlloca</a>();</div>
<div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;}</div>
<div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;<span class="comment">/// Returns a DebugLoc for a new DILocation which is a clone of \p OrigDL</span></div>
<div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;<span class="comment">/// inlined at \p InlinedAt. \p IANodes is an inlined-at cache.</span></div>
<div class="line"><a name="l01644"></a><span class="lineno"><a class="line" href="InlineFunction_8cpp.html#a5217abbfbac8873d22a2dd6cdbb0bcc1"> 1644</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a> <a class="code" href="InlineFunction_8cpp.html#a5217abbfbac8873d22a2dd6cdbb0bcc1">inlineDebugLoc</a>(<a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a> OrigDL, <a class="code" href="classllvm_1_1DILocation.html">DILocation</a> *InlinedAt,</div>
<div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;                               <a class="code" href="classllvm_1_1LLVMContext.html">LLVMContext</a> &amp;Ctx,</div>
<div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;                               <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;const MDNode *, MDNode *&gt;</a> &amp;IANodes) {</div>
<div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;  <span class="keyword">auto</span> <a class="code" href="namespacellvm_1_1AArch64PACKey.html#abf4394f452bde3f544999858d71e4b46aaf2ff1a10f3f3b211d7781a33e4c1e05">IA</a> = <a class="code" href="classllvm_1_1DebugLoc.html#a55acf718f2931a7050c4ed39eb0434e7">DebugLoc::appendInlinedAt</a>(OrigDL, InlinedAt, Ctx, IANodes);</div>
<div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1MDNode.html#a7d10a7b9b7f40b04d27ed97c38ea1950">DILocation::get</a>(Ctx, OrigDL.<a class="code" href="classllvm_1_1DebugLoc.html#a427c256af834975c7869ad28fac00563">getLine</a>(), OrigDL.<a class="code" href="classllvm_1_1DebugLoc.html#a98eca4d65070b40322af34cf08842d8c">getCol</a>(),</div>
<div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;                         OrigDL.<a class="code" href="classllvm_1_1DebugLoc.html#a51e7213ee467c71c8feec9ff30a580bd">getScope</a>(), <a class="code" href="namespacellvm_1_1AArch64PACKey.html#abf4394f452bde3f544999858d71e4b46aaf2ff1a10f3f3b211d7781a33e4c1e05">IA</a>);</div>
<div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;}</div>
<div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;<span class="comment">/// Update inlined instructions&#39; line numbers to</span></div>
<div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;<span class="comment">/// to encode location where these instructions are inlined.</span></div>
<div class="line"><a name="l01654"></a><span class="lineno"><a class="line" href="InlineFunction_8cpp.html#a2ed4f37fbda15a9c05f333fde59e9fbb"> 1654</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="InlineFunction_8cpp.html#a2ed4f37fbda15a9c05f333fde59e9fbb">fixupLineNumbers</a>(<a class="code" href="classllvm_1_1Function.html">Function</a> *Fn, <a class="code" href="classllvm_1_1Function.html#a19595c245bd2e3eefa93ce22db5ad15f">Function::iterator</a> FI,</div>
<div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;                             <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *TheCall, <span class="keywordtype">bool</span> CalleeHasDebugInfo) {</div>
<div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a> &amp;TheCallDL = TheCall-&gt;<a class="code" href="classllvm_1_1Instruction.html#ab4f3bf98b5054831b608852e33427814">getDebugLoc</a>();</div>
<div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;  <span class="keywordflow">if</span> (!TheCallDL)</div>
<div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160; </div>
<div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;  <span class="keyword">auto</span> &amp;Ctx = Fn-&gt;<a class="code" href="classllvm_1_1Function.html#a9fffac2512fe651f0d5e37e27f5bd51c">getContext</a>();</div>
<div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;  <a class="code" href="classllvm_1_1DILocation.html">DILocation</a> *InlinedAtNode = TheCallDL;</div>
<div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160; </div>
<div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;  <span class="comment">// Create a unique call site, not to be confused with any other call from the</span></div>
<div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;  <span class="comment">// same location.</span></div>
<div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;  InlinedAtNode = <a class="code" href="classllvm_1_1MDNode.html#a21a975fd58c287a6ca3f1c89c048e7d3">DILocation::getDistinct</a>(</div>
<div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;      Ctx, InlinedAtNode-&gt;getLine(), InlinedAtNode-&gt;getColumn(),</div>
<div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;      InlinedAtNode-&gt;getScope(), InlinedAtNode-&gt;getInlinedAt());</div>
<div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160; </div>
<div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;  <span class="comment">// Cache the inlined-at nodes as they&#39;re built so they are reused, without</span></div>
<div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;  <span class="comment">// this every instruction&#39;s inlined-at chain would become distinct from each</span></div>
<div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;  <span class="comment">// other.</span></div>
<div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;  <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;const MDNode *, MDNode *&gt;</a> IANodes;</div>
<div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160; </div>
<div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;  <span class="comment">// Check if we are not generating inline line tables and want to use</span></div>
<div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;  <span class="comment">// the call site location instead.</span></div>
<div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;  <span class="keywordtype">bool</span> NoInlineLineTables = Fn-&gt;<a class="code" href="classllvm_1_1Function.html#afb28a4deafe2954b0534cc6399ce518b">hasFnAttribute</a>(<span class="stringliteral">&quot;no-inline-line-tables&quot;</span>);</div>
<div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160; </div>
<div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;  <span class="keywordflow">for</span> (; FI != Fn-&gt;<a class="code" href="classllvm_1_1Function.html#ae4ca2261b8b901e415fda7feac5051ea">end</a>(); ++FI) {</div>
<div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html#a98c0a84a5dfa8bce341c829709f171e5">BasicBlock::iterator</a> BI = FI-&gt;begin(), BE = FI-&gt;end();</div>
<div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;         BI != BE; ++BI) {</div>
<div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;      <span class="comment">// Loop metadata needs to be updated so that the start and end locs</span></div>
<div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;      <span class="comment">// reference inlined-at locations.</span></div>
<div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;      <span class="keyword">auto</span> updateLoopInfoLoc = [&amp;Ctx, &amp;InlinedAtNode,</div>
<div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;                                &amp;IANodes](<a class="code" href="classllvm_1_1Metadata.html">Metadata</a> *MD) -&gt; <a class="code" href="classllvm_1_1Metadata.html">Metadata</a> * {</div>
<div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;        <span class="keywordflow">if</span> (<span class="keyword">auto</span> *Loc = dyn_cast_or_null&lt;DILocation&gt;(MD))</div>
<div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;          <span class="keywordflow">return</span> <a class="code" href="InlineFunction_8cpp.html#a5217abbfbac8873d22a2dd6cdbb0bcc1">inlineDebugLoc</a>(Loc, InlinedAtNode, Ctx, IANodes).<a class="code" href="classllvm_1_1DebugLoc.html#a4ff1bb484be62f8dac94fc087f72f524">get</a>();</div>
<div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;        <span class="keywordflow">return</span> MD;</div>
<div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;      };</div>
<div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;      <a class="code" href="namespacellvm.html#aecd4ed57fa6a20d048310d43f5c96da9">updateLoopMetadataDebugLocations</a>(*BI, updateLoopInfoLoc);</div>
<div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160; </div>
<div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;      <span class="keywordflow">if</span> (!NoInlineLineTables)</div>
<div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a> <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a> = BI-&gt;getDebugLoc()) {</div>
<div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;          <a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a> IDL =</div>
<div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;              <a class="code" href="InlineFunction_8cpp.html#a5217abbfbac8873d22a2dd6cdbb0bcc1">inlineDebugLoc</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, InlinedAtNode, BI-&gt;getContext(), IANodes);</div>
<div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;          BI-&gt;setDebugLoc(IDL);</div>
<div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;        }</div>
<div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160; </div>
<div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;      <span class="keywordflow">if</span> (CalleeHasDebugInfo &amp;&amp; !NoInlineLineTables)</div>
<div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160; </div>
<div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;      <span class="comment">// If the inlined instruction has no line number, or if inline info</span></div>
<div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;      <span class="comment">// is not being generated, make it look as if it originates from the call</span></div>
<div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;      <span class="comment">// location. This is important for ((__always_inline, __nodebug__))</span></div>
<div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;      <span class="comment">// functions which must use caller location for all instructions in their</span></div>
<div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;      <span class="comment">// function body.</span></div>
<div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160; </div>
<div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;      <span class="comment">// Don&#39;t update static allocas, as they may get moved later.</span></div>
<div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> *AI = dyn_cast&lt;AllocaInst&gt;(BI))</div>
<div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="InlineFunction_8cpp.html#ad19c97a069133d179234826fc95c3bde">allocaWouldBeStaticInEntry</a>(AI))</div>
<div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160; </div>
<div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;      BI-&gt;setDebugLoc(TheCallDL);</div>
<div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;    }</div>
<div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160; </div>
<div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;    <span class="comment">// Remove debug info intrinsics if we&#39;re not keeping inline info.</span></div>
<div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;    <span class="keywordflow">if</span> (NoInlineLineTables) {</div>
<div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;      <a class="code" href="classllvm_1_1BasicBlock.html#a98c0a84a5dfa8bce341c829709f171e5">BasicBlock::iterator</a> BI = FI-&gt;begin();</div>
<div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;      <span class="keywordflow">while</span> (BI != FI-&gt;end()) {</div>
<div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;        <span class="keywordflow">if</span> (isa&lt;DbgInfoIntrinsic&gt;(BI)) {</div>
<div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;          BI = BI-&gt;eraseFromParent();</div>
<div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;        }</div>
<div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;        ++BI;</div>
<div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;      }</div>
<div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;    }</div>
<div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160; </div>
<div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;  }</div>
<div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;}</div>
<div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160; </div>
<div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;<span class="preprocessor">#undef DEBUG_TYPE</span></div>
<div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;<span class="preprocessor">#define DEBUG_TYPE &quot;assignment-tracking&quot;</span></div>
<div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;<span class="comment">/// Find Alloca and linked DbgAssignIntrinsic for locals escaped by \p CB.</span></div>
<div class="line"><a name="l01734"></a><span class="lineno"><a class="line" href="InlineFunction_8cpp.html#a2ebf7459caf9252729048bd9c5231f6c"> 1734</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1DenseMap.html">at::StorageToVarsMap</a> <a class="code" href="InlineFunction_8cpp.html#a2ebf7459caf9252729048bd9c5231f6c">collectEscapedLocals</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1DataLayout.html">DataLayout</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>,</div>
<div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;                                                 <span class="keyword">const</span> <a class="code" href="classllvm_1_1CallBase.html">CallBase</a> &amp;CB) {</div>
<div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;  <a class="code" href="classllvm_1_1DenseMap.html">at::StorageToVarsMap</a> EscapedLocals;</div>
<div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;const Value *, 4&gt;</a> SeenBases;</div>
<div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160; </div>
<div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(</div>
<div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;      <a class="code" href="namespacellvm.html#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>() &lt;&lt; <span class="stringliteral">&quot;# Finding caller local variables escaped by callee\n&quot;</span>);</div>
<div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a> : CB.<a class="code" href="classllvm_1_1CallBase.html#ac63dbb4994494c46f025715272cdb81e">args</a>()) {</div>
<div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>() &lt;&lt; <span class="stringliteral">&quot;INSPECT: &quot;</span> &lt;&lt; *<a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a> &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>-&gt;getType()-&gt;isPointerTy()) {</div>
<div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>() &lt;&lt; <span class="stringliteral">&quot; | SKIP: Not a pointer\n&quot;</span>);</div>
<div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;    }</div>
<div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160; </div>
<div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = dyn_cast&lt;Instruction&gt;(<a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>);</div>
<div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>() &lt;&lt; <span class="stringliteral">&quot; | SKIP: Not result of instruction\n&quot;</span>);</div>
<div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;    }</div>
<div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160; </div>
<div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;    <span class="comment">// Walk back to the base storage.</span></div>
<div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>-&gt;getType()-&gt;isPtrOrPtrVectorTy());</div>
<div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;    <a class="code" href="classllvm_1_1APInt.html">APInt</a> TmpOffset(<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getIndexTypeSizeInBits(<a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>-&gt;getType()), 0, <span class="keyword">false</span>);</div>
<div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1AllocaInst.html">AllocaInst</a> *<a class="code" href="namespacellvm_1_1sampleprof.html#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">Base</a> = dyn_cast&lt;AllocaInst&gt;(</div>
<div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;        <a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>-&gt;stripAndAccumulateConstantOffsets(<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, TmpOffset, <span class="keyword">true</span>));</div>
<div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1sampleprof.html#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">Base</a>) {</div>
<div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>() &lt;&lt; <span class="stringliteral">&quot; | SKIP: Couldn&#39;t walk back to base storage\n&quot;</span>);</div>
<div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;    }</div>
<div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160; </div>
<div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="namespacellvm_1_1sampleprof.html#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">Base</a>);</div>
<div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>() &lt;&lt; <span class="stringliteral">&quot; | BASE: &quot;</span> &lt;&lt; *<a class="code" href="namespacellvm_1_1sampleprof.html#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">Base</a> &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;    <span class="comment">// We only need to process each base address once - skip any duplicates.</span></div>
<div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;    <span class="keywordflow">if</span> (!SeenBases.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(<a class="code" href="namespacellvm_1_1sampleprof.html#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">Base</a>).second)</div>
<div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160; </div>
<div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;    <span class="comment">// Find all local variables associated with the backing storage.</span></div>
<div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> *DAI : <a class="code" href="namespacellvm_1_1at.html#a3c90899e8f022656e511630de42b916c">at::getAssignmentMarkers</a>(<a class="code" href="namespacellvm_1_1sampleprof.html#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">Base</a>)) {</div>
<div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;      <span class="comment">// Skip variables from inlined functions - they are not local variables.</span></div>
<div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;      <span class="keywordflow">if</span> (DAI-&gt;getDebugLoc().getInlinedAt())</div>
<div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>() &lt;&lt; <span class="stringliteral">&quot; &gt; DEF : &quot;</span> &lt;&lt; *DAI &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;      EscapedLocals[<a class="code" href="namespacellvm_1_1sampleprof.html#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">Base</a>].<a class="code" href="classllvm_1_1DenseMapBase.html#a99f811d53704275b4158c62a2dd138d9">insert</a>(<a class="code" href="structllvm_1_1at_1_1VarRecord.html">at::VarRecord</a>(DAI));</div>
<div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;    }</div>
<div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;  }</div>
<div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;  <span class="keywordflow">return</span> EscapedLocals;</div>
<div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;}</div>
<div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160; </div>
<div class="line"><a name="l01782"></a><span class="lineno"><a class="line" href="InlineFunction_8cpp.html#ae71573dba191b26eda0d5ea27b81ef62"> 1782</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="InlineFunction_8cpp.html#ae71573dba191b26eda0d5ea27b81ef62">trackInlinedStores</a>(<a class="code" href="classllvm_1_1Function.html#a19595c245bd2e3eefa93ce22db5ad15f">Function::iterator</a> Start, <a class="code" href="classllvm_1_1Function.html#a19595c245bd2e3eefa93ce22db5ad15f">Function::iterator</a> End,</div>
<div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;                               <span class="keyword">const</span> <a class="code" href="classllvm_1_1CallBase.html">CallBase</a> &amp;CB) {</div>
<div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>() &lt;&lt; <span class="stringliteral">&quot;trackInlinedStores into &quot;</span></div>
<div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;                    &lt;&lt; Start-&gt;getParent()-&gt;getName() &lt;&lt; <span class="stringliteral">&quot; from &quot;</span></div>
<div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;                    &lt;&lt; CB.<a class="code" href="classllvm_1_1CallBase.html#a83b8c9e572130f403445c0b0f69b837c">getCalledFunction</a>()-&gt;<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;  std::unique_ptr&lt;DataLayout&gt; <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a> = std::make_unique&lt;DataLayout&gt;(CB.<a class="code" href="classllvm_1_1Instruction.html#a4ba3a5be6c0e9b9e8a525de055836733">getModule</a>());</div>
<div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;  <a class="code" href="namespacellvm_1_1at.html#a5c4090098e3eaedb61973431af4898b1">at::trackAssignments</a>(Start, End, <a class="code" href="InlineFunction_8cpp.html#a2ebf7459caf9252729048bd9c5231f6c">collectEscapedLocals</a>(*<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, CB), *<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>);</div>
<div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;}</div>
<div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;<span class="comment">/// Update inlined instructions&#39; DIAssignID metadata. We need to do this</span></div>
<div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;<span class="comment">/// otherwise a function inlined more than once into the same function</span></div>
<div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;<span class="comment">/// will cause DIAssignID to be shared by many instructions.</span></div>
<div class="line"><a name="l01794"></a><span class="lineno"><a class="line" href="InlineFunction_8cpp.html#ac6ad5b09bf38c4fc9d0c8a5b598fde3c"> 1794</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="InlineFunction_8cpp.html#ac6ad5b09bf38c4fc9d0c8a5b598fde3c">fixupAssignments</a>(<a class="code" href="classllvm_1_1Function.html#a19595c245bd2e3eefa93ce22db5ad15f">Function::iterator</a> Start, <a class="code" href="classllvm_1_1Function.html#a19595c245bd2e3eefa93ce22db5ad15f">Function::iterator</a> End) {</div>
<div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;  <span class="comment">// Map {Old, New} metadata. Not used directly - use GetNewID.</span></div>
<div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;  <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;DIAssignID *, DIAssignID *&gt;</a> Map;</div>
<div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;  <span class="keyword">auto</span> GetNewID = [&amp;Map](<a class="code" href="classllvm_1_1Metadata.html">Metadata</a> *Old) {</div>
<div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;    <a class="code" href="classllvm_1_1DIAssignID.html">DIAssignID</a> *OldID = cast&lt;DIAssignID&gt;(Old);</div>
<div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1DIAssignID.html">DIAssignID</a> *NewID = Map.lookup(OldID))</div>
<div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;      <span class="keywordflow">return</span> NewID;</div>
<div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;    <a class="code" href="classllvm_1_1DIAssignID.html">DIAssignID</a> *NewID = <a class="code" href="classllvm_1_1DIAssignID.html#a9d9cf0278178d1da39f6797777e683f7">DIAssignID::getDistinct</a>(OldID-&gt;<a class="code" href="classllvm_1_1MDNode.html#a936739514bcdb01ddd2826fa70cf15a5">getContext</a>());</div>
<div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;    Map[OldID] = NewID;</div>
<div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;    <span class="keywordflow">return</span> NewID;</div>
<div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;  };</div>
<div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;  <span class="comment">// Loop over all the inlined instructions. If we find a DIAssignID</span></div>
<div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;  <span class="comment">// attachment or use, replace it with a new version.</span></div>
<div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> BBI = Start; BBI != End; ++BBI) {</div>
<div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : *BBI) {</div>
<div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> *<a class="code" href="namespacellvm_1_1CallingConv.html#a188c0836f8c3528401f1c236fd93b977">ID</a> = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getMetadata(LLVMContext::MD_DIAssignID))</div>
<div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;        <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.setMetadata(LLVMContext::MD_DIAssignID, GetNewID(<a class="code" href="namespacellvm_1_1CallingConv.html#a188c0836f8c3528401f1c236fd93b977">ID</a>));</div>
<div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">auto</span> *DAI = dyn_cast&lt;DbgAssignIntrinsic&gt;(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;        DAI-&gt;setAssignId(GetNewID(DAI-&gt;getAssignID()));</div>
<div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;    }</div>
<div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;  }</div>
<div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;}</div>
<div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;<span class="preprocessor">#undef DEBUG_TYPE</span></div>
<div class="line"><a name="l01817"></a><span class="lineno"><a class="line" href="InlineFunction_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d"> 1817</a></span>&#160;<span class="preprocessor">#define DEBUG_TYPE &quot;inline-function&quot;</span></div>
<div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;<span class="comment">/// Update the block frequencies of the caller after a callee has been inlined.</span></div>
<div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;<span class="comment">/// Each block cloned into the caller has its block frequency scaled by the</span></div>
<div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;<span class="comment">/// ratio of CallSiteFreq/CalleeEntryFreq. This ensures that the cloned copy of</span></div>
<div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;<span class="comment">/// callee&#39;s entry block gets the same frequency as the callsite block and the</span></div>
<div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;<span class="comment">/// relative frequencies of all cloned blocks remain the same after cloning.</span></div>
<div class="line"><a name="l01825"></a><span class="lineno"><a class="line" href="InlineFunction_8cpp.html#a83a2e4a8c4f5b3b8dee5407d55e8872d"> 1825</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="InlineFunction_8cpp.html#a83a2e4a8c4f5b3b8dee5407d55e8872d">updateCallerBFI</a>(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *CallSiteBlock,</div>
<div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;                            <span class="keyword">const</span> <a class="code" href="classllvm_1_1ValueMap.html">ValueToValueMapTy</a> &amp;VMap,</div>
<div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;                            <a class="code" href="classllvm_1_1BlockFrequencyInfo.html">BlockFrequencyInfo</a> *CallerBFI,</div>
<div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;                            <a class="code" href="classllvm_1_1BlockFrequencyInfo.html">BlockFrequencyInfo</a> *CalleeBFI,</div>
<div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;                            <span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> &amp;CalleeEntryBlock) {</div>
<div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;BasicBlock *, 16&gt;</a> ClonedBBs;</div>
<div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> Entry : VMap) {</div>
<div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;    <span class="keywordflow">if</span> (!isa&lt;BasicBlock&gt;(Entry.first) || !Entry.second)</div>
<div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;    <span class="keyword">auto</span> *OrigBB = cast&lt;BasicBlock&gt;(Entry.first);</div>
<div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;    <span class="keyword">auto</span> *ClonedBB = cast&lt;BasicBlock&gt;(Entry.second);</div>
<div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;    <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> Freq = CalleeBFI-&gt;<a class="code" href="classllvm_1_1BlockFrequencyInfo.html#ab8b72c18add22acd827f7a6cd1ff1bff">getBlockFreq</a>(OrigBB).<a class="code" href="classllvm_1_1BlockFrequency.html#a8e9ed6b20c2503f66f1fd0725297aedc">getFrequency</a>();</div>
<div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;    <span class="keywordflow">if</span> (!ClonedBBs.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(ClonedBB).second) {</div>
<div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;      <span class="comment">// Multiple blocks in the callee might get mapped to one cloned block in</span></div>
<div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;      <span class="comment">// the caller since we prune the callee as we clone it. When that happens,</span></div>
<div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;      <span class="comment">// we want to use the maximum among the original blocks&#39; frequencies.</span></div>
<div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;      <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> NewFreq = CallerBFI-&gt;<a class="code" href="classllvm_1_1BlockFrequencyInfo.html#ab8b72c18add22acd827f7a6cd1ff1bff">getBlockFreq</a>(ClonedBB).<a class="code" href="classllvm_1_1BlockFrequency.html#a8e9ed6b20c2503f66f1fd0725297aedc">getFrequency</a>();</div>
<div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;      <span class="keywordflow">if</span> (NewFreq &gt; Freq)</div>
<div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;        Freq = NewFreq;</div>
<div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;    }</div>
<div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;    CallerBFI-&gt;<a class="code" href="classllvm_1_1BlockFrequencyInfo.html#a3ce999410f335ab0caf755a56aa73d1e">setBlockFreq</a>(ClonedBB, Freq);</div>
<div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;  }</div>
<div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *EntryClone = cast&lt;BasicBlock&gt;(VMap.lookup(&amp;CalleeEntryBlock));</div>
<div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;  CallerBFI-&gt;<a class="code" href="classllvm_1_1BlockFrequencyInfo.html#a5f51a6fb898c169382d668bf246c16da">setBlockFreqAndScale</a>(</div>
<div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;      EntryClone, CallerBFI-&gt;<a class="code" href="classllvm_1_1BlockFrequencyInfo.html#ab8b72c18add22acd827f7a6cd1ff1bff">getBlockFreq</a>(CallSiteBlock).<a class="code" href="classllvm_1_1BlockFrequency.html#a8e9ed6b20c2503f66f1fd0725297aedc">getFrequency</a>(),</div>
<div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;      ClonedBBs);</div>
<div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;}</div>
<div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;<span class="comment">/// Update the branch metadata for cloned call instructions.</span></div>
<div class="line"><a name="l01854"></a><span class="lineno"><a class="line" href="InlineFunction_8cpp.html#a8385c2a142c1616d8d486bcb93213649"> 1854</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="InlineFunction_8cpp.html#a8385c2a142c1616d8d486bcb93213649">updateCallProfile</a>(<a class="code" href="classllvm_1_1Function.html">Function</a> *Callee, <span class="keyword">const</span> <a class="code" href="classllvm_1_1ValueMap.html">ValueToValueMapTy</a> &amp;VMap,</div>
<div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;                              <span class="keyword">const</span> <a class="code" href="classllvm_1_1Function_1_1ProfileCount.html">ProfileCount</a> &amp;CalleeEntryCount,</div>
<div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;                              <span class="keyword">const</span> <a class="code" href="classllvm_1_1CallBase.html">CallBase</a> &amp;TheCall, <a class="code" href="classllvm_1_1ProfileSummaryInfo.html">ProfileSummaryInfo</a> *PSI,</div>
<div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;                              <a class="code" href="classllvm_1_1BlockFrequencyInfo.html">BlockFrequencyInfo</a> *CallerBFI) {</div>
<div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;  <span class="keywordflow">if</span> (CalleeEntryCount.<a class="code" href="classllvm_1_1Function_1_1ProfileCount.html#a849a5f56eb7de1aceefc2f566c9931d8">isSynthetic</a>() || CalleeEntryCount.<a class="code" href="classllvm_1_1Function_1_1ProfileCount.html#a3f91c16432464ed01d0ff1b380786f9b">getCount</a>() &lt; 1)</div>
<div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;  <span class="keyword">auto</span> CallSiteCount =</div>
<div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;      PSI ? PSI-&gt;<a class="code" href="classllvm_1_1ProfileSummaryInfo.html#a37e70e7a7b5e8ebe792ecaec8639d16e">getProfileCount</a>(TheCall, CallerBFI) : std::nullopt;</div>
<div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;  int64_t CallCount =</div>
<div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;      <a class="code" href="namespacellvm.html#a57f2ca0e57f4f7b13f56f9aa16af3e0d">std::min</a>(CallSiteCount.value_or(0), CalleeEntryCount.<a class="code" href="classllvm_1_1Function_1_1ProfileCount.html#a3f91c16432464ed01d0ff1b380786f9b">getCount</a>());</div>
<div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;  <a class="code" href="namespacellvm.html#aa7cd2cc36098475563ad0fd3371df2a6">updateProfileCallee</a>(<a class="code" href="AMDGPULibCalls_8cpp.html#a537c835c34f0b44b6ad2696643754390">Callee</a>, -CallCount, &amp;VMap);</div>
<div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;}</div>
<div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160; </div>
<div class="line"><a name="l01867"></a><span class="lineno"><a class="line" href="namespacellvm.html#aa7cd2cc36098475563ad0fd3371df2a6"> 1867</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespacellvm.html#aa7cd2cc36098475563ad0fd3371df2a6">llvm::updateProfileCallee</a>(</div>
<div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;    <a class="code" href="classllvm_1_1Function.html">Function</a> *Callee, int64_t EntryDelta,</div>
<div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1ValueMap.html">ValueMap&lt;const Value *, WeakTrackingVH&gt;</a> *VMap) {</div>
<div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;  <span class="keyword">auto</span> CalleeCount = <a class="code" href="AMDGPULibCalls_8cpp.html#a537c835c34f0b44b6ad2696643754390">Callee</a>-&gt;getEntryCount();</div>
<div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;  <span class="keywordflow">if</span> (!CalleeCount)</div>
<div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160; </div>
<div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;  <span class="keyword">const</span> <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> PriorEntryCount = CalleeCount-&gt;getCount();</div>
<div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160; </div>
<div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;  <span class="comment">// Since CallSiteCount is an estimate, it could exceed the original callee</span></div>
<div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;  <span class="comment">// count and has to be set to 0 so guard against underflow.</span></div>
<div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;  <span class="keyword">const</span> <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> NewEntryCount =</div>
<div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;      (EntryDelta &lt; 0 &amp;&amp; static_cast&lt;uint64_t&gt;(-EntryDelta) &gt; PriorEntryCount)</div>
<div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;          ? 0</div>
<div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;          : PriorEntryCount + EntryDelta;</div>
<div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160; </div>
<div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;  <span class="comment">// During inlining ?</span></div>
<div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;  <span class="keywordflow">if</span> (VMap) {</div>
<div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;    <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> CloneEntryCount = PriorEntryCount - NewEntryCount;</div>
<div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> Entry : *VMap)</div>
<div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;      <span class="keywordflow">if</span> (isa&lt;CallInst&gt;(Entry.first))</div>
<div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;        <span class="keywordflow">if</span> (<span class="keyword">auto</span> *CI = dyn_cast_or_null&lt;CallInst&gt;(Entry.second))</div>
<div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;          CI-&gt;updateProfWeight(CloneEntryCount, PriorEntryCount);</div>
<div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;  }</div>
<div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160; </div>
<div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;  <span class="keywordflow">if</span> (EntryDelta) {</div>
<div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;    <a class="code" href="AMDGPULibCalls_8cpp.html#a537c835c34f0b44b6ad2696643754390">Callee</a>-&gt;setEntryCount(NewEntryCount);</div>
<div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160; </div>
<div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> &amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> : *<a class="code" href="AMDGPULibCalls_8cpp.html#a537c835c34f0b44b6ad2696643754390">Callee</a>)</div>
<div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;      <span class="comment">// No need to update the callsite if it is pruned during inlining.</span></div>
<div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;      <span class="keywordflow">if</span> (!VMap || VMap-&gt;<a class="code" href="classllvm_1_1ValueMap.html#a3b82484785487f544dc6ef1c2b6a0ffd">count</a>(&amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>))</div>
<div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>)</div>
<div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *CI = dyn_cast&lt;CallInst&gt;(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;            CI-&gt;updateProfWeight(NewEntryCount, PriorEntryCount);</div>
<div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;  }</div>
<div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;}</div>
<div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;<span class="comment">/// An operand bundle &quot;clang.arc.attachedcall&quot; on a call indicates the call</span></div>
<div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;<span class="comment">/// result is implicitly consumed by a call to retainRV or claimRV immediately</span></div>
<div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;<span class="comment">/// after the call. This function inlines the retainRV/claimRV calls.</span></div>
<div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;<span class="comment">/// There are three cases to consider:</span></div>
<div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;<span class="comment">/// 1. If there is a call to autoreleaseRV that takes a pointer to the returned</span></div>
<div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;<span class="comment">///    object in the callee return block, the autoreleaseRV call and the</span></div>
<div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;<span class="comment">///    retainRV/claimRV call in the caller cancel out. If the call in the caller</span></div>
<div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;<span class="comment">///    is a claimRV call, a call to objc_release is emitted.</span></div>
<div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;<span class="comment">/// 2. If there is a call in the callee return block that doesn&#39;t have operand</span></div>
<div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;<span class="comment">///    bundle &quot;clang.arc.attachedcall&quot;, the operand bundle on the original call</span></div>
<div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;<span class="comment">///    is transferred to the call in the callee.</span></div>
<div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;<span class="comment">/// 3. Otherwise, a call to objc_retain is inserted if the call in the caller is</span></div>
<div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;<span class="comment">///    a retainRV call.</span></div>
<div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">void</span></div>
<div class="line"><a name="l01922"></a><span class="lineno"><a class="line" href="InlineFunction_8cpp.html#abf4fabc264b52dbd503f04805135a40e"> 1922</a></span>&#160;<a class="code" href="InlineFunction_8cpp.html#abf4fabc264b52dbd503f04805135a40e">inlineRetainOrClaimRVCalls</a>(<a class="code" href="classllvm_1_1CallBase.html">CallBase</a> &amp;CB, <a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2">objcarc::ARCInstKind</a> RVCallKind,</div>
<div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;                           <span class="keyword">const</span> <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;ReturnInst *&gt;</a> &amp;Returns) {</div>
<div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;  <a class="code" href="classllvm_1_1Module.html">Module</a> *<a class="code" href="PassBuilderBindings_8cpp.html#a76adb4549f349676de0a703a497ca5a5">Mod</a> = CB.<a class="code" href="classllvm_1_1Instruction.html#a4ba3a5be6c0e9b9e8a525de055836733">getModule</a>();</div>
<div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="namespacellvm_1_1objcarc.html#ab3161a6067eaed051be4376266e9ac03">objcarc::isRetainOrClaimRV</a>(RVCallKind) &amp;&amp; <span class="stringliteral">&quot;unexpected ARC function&quot;</span>);</div>
<div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;  <span class="keywordtype">bool</span> IsRetainRV = RVCallKind == <a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2aa1226b5450384ce6ea5ed47c317303ee">objcarc::ARCInstKind::RetainRV</a>,</div>
<div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;       IsUnsafeClaimRV = !IsRetainRV;</div>
<div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160; </div>
<div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> *RI : Returns) {</div>
<div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *RetOpnd = <a class="code" href="namespacellvm_1_1objcarc.html#aa72ef5ef299b7531b84aafcf9c1f755f">objcarc::GetRCIdentityRoot</a>(RI-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0));</div>
<div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;    <span class="keywordtype">bool</span> InsertRetainCall = IsRetainRV;</div>
<div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;    <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>(RI-&gt;<a class="code" href="classllvm_1_1Value.html#ab3fc0225d8aaf8434026c3573f961f2c">getContext</a>());</div>
<div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160; </div>
<div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;    <span class="comment">// Walk backwards through the basic block looking for either a matching</span></div>
<div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;    <span class="comment">// autoreleaseRV call or an unannotated call.</span></div>
<div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;    <span class="keyword">auto</span> InstRange = <a class="code" href="namespacellvm.html#ad1a91b49e0c092818a0b82f6cc130a1b">llvm::make_range</a>(++(RI-&gt;<a class="code" href="classllvm_1_1ilist__node__impl.html#af719fc783be6589465137d997701a432">getIterator</a>().<a class="code" href="classllvm_1_1ilist__iterator.html#a78fdbf2880abbb855abdb5bf030d9105">getReverse</a>()),</div>
<div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;                                      RI-&gt;<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>()-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a9237251072bf6816163abc2d053212ee">rend</a>());</div>
<div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : <a class="code" href="namespacellvm.html#a8154638df88e4eaa568b67b23d463dac">llvm::make_early_inc_range</a>(InstRange)) {</div>
<div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;      <span class="comment">// Ignore casts.</span></div>
<div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;      <span class="keywordflow">if</span> (isa&lt;CastInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160; </div>
<div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> *II = dyn_cast&lt;IntrinsicInst&gt;(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;        <span class="keywordflow">if</span> (II-&gt;<a class="code" href="classllvm_1_1CallBase.html#ac62778065b99372cc62cf994b967e7e8">getIntrinsicID</a>() != Intrinsic::objc_autoreleaseReturnValue ||</div>
<div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;            !II-&gt;<a class="code" href="classllvm_1_1Value.html#a7c779ce2ba55bc94f52014fc25f3d520">hasNUses</a>(0) ||</div>
<div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;            <a class="code" href="namespacellvm_1_1objcarc.html#aa72ef5ef299b7531b84aafcf9c1f755f">objcarc::GetRCIdentityRoot</a>(II-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0)) != RetOpnd)</div>
<div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160; </div>
<div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;        <span class="comment">// If we&#39;ve found a matching authoreleaseRV call:</span></div>
<div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;        <span class="comment">// - If claimRV is attached to the call, insert a call to objc_release</span></div>
<div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;        <span class="comment">//   and erase the autoreleaseRV call.</span></div>
<div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;        <span class="comment">// - If retainRV is attached to the call, just erase the autoreleaseRV</span></div>
<div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;        <span class="comment">//   call.</span></div>
<div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;        <span class="keywordflow">if</span> (IsUnsafeClaimRV) {</div>
<div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;          <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(II);</div>
<div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;          <a class="code" href="classllvm_1_1Function.html">Function</a> *IFn =</div>
<div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;              <a class="code" href="namespacellvm_1_1Intrinsic.html#aefa39f6b622360ce4e947feb9f671b73">Intrinsic::getDeclaration</a>(<a class="code" href="PassBuilderBindings_8cpp.html#a76adb4549f349676de0a703a497ca5a5">Mod</a>, Intrinsic::objc_release);</div>
<div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;          <a class="code" href="classllvm_1_1Value.html">Value</a> *BC = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBitCast(RetOpnd, IFn-&gt;<a class="code" href="classllvm_1_1Function.html#a8052a4f265aa7540f68ca3103a55538d">getArg</a>(0)-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>());</div>
<div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;          <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCall(IFn, BC, <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;        }</div>
<div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;        II-&gt;<a class="code" href="classllvm_1_1Instruction.html#ae6b978645b8ac72d1a35e1298ffdd4f0">eraseFromParent</a>();</div>
<div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;        InsertRetainCall = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;      }</div>
<div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160; </div>
<div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;      <span class="keyword">auto</span> *CI = dyn_cast&lt;CallInst&gt;(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160; </div>
<div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;      <span class="keywordflow">if</span> (!CI)</div>
<div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160; </div>
<div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1objcarc.html#aa72ef5ef299b7531b84aafcf9c1f755f">objcarc::GetRCIdentityRoot</a>(CI) != RetOpnd ||</div>
<div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;          <a class="code" href="namespacellvm_1_1objcarc.html#aefba9af2f61452f20f4c947b4c2e5f4e">objcarc::hasAttachedCallOpBundle</a>(CI))</div>
<div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160; </div>
<div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;      <span class="comment">// If we&#39;ve found an unannotated call that defines RetOpnd, add a</span></div>
<div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;      <span class="comment">// &quot;clang.arc.attachedcall&quot; operand bundle.</span></div>
<div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *BundleArgs[] = {*<a class="code" href="namespacellvm_1_1objcarc.html#a39a148f4cd39b108512454416f3a5d29">objcarc::getAttachedARCFunction</a>(&amp;CB)};</div>
<div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;      <a class="code" href="classllvm_1_1OperandBundleDefT.html">OperandBundleDef</a> <a class="code" href="namespacellvm_1_1X86II.html#a0f8eae4dc1f8612213b096103301fef5a3c11b5af543fcb3173f20c9ce3a6856d">OB</a>(<span class="stringliteral">&quot;clang.arc.attachedcall&quot;</span>, BundleArgs);</div>
<div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;      <span class="keyword">auto</span> *NewCall = <a class="code" href="classllvm_1_1CallBase.html#ae5602880a0921a686c1ca11034659557">CallBase::addOperandBundle</a>(</div>
<div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;          CI, <a class="code" href="classllvm_1_1LLVMContext.html#a800c1300065ca1615d2f4fb88623afd5a6c03d5e52bbdefc8c392e3ed77c7d6a1">LLVMContext::OB_clang_arc_attachedcall</a>, <a class="code" href="namespacellvm_1_1X86II.html#a0f8eae4dc1f8612213b096103301fef5a3c11b5af543fcb3173f20c9ce3a6856d">OB</a>, CI);</div>
<div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;      NewCall-&gt;copyMetadata(*CI);</div>
<div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160;      CI-&gt;replaceAllUsesWith(NewCall);</div>
<div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;      CI-&gt;eraseFromParent();</div>
<div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;      InsertRetainCall = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;    }</div>
<div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160; </div>
<div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;    <span class="keywordflow">if</span> (InsertRetainCall) {</div>
<div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;      <span class="comment">// The retainRV is attached to the call and we&#39;ve failed to find a</span></div>
<div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;      <span class="comment">// matching autoreleaseRV or an annotated call in the callee. Emit a call</span></div>
<div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;      <span class="comment">// to objc_retain.</span></div>
<div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;      <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(RI);</div>
<div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;      <a class="code" href="classllvm_1_1Function.html">Function</a> *IFn = <a class="code" href="namespacellvm_1_1Intrinsic.html#aefa39f6b622360ce4e947feb9f671b73">Intrinsic::getDeclaration</a>(<a class="code" href="PassBuilderBindings_8cpp.html#a76adb4549f349676de0a703a497ca5a5">Mod</a>, Intrinsic::objc_retain);</div>
<div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *BC = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBitCast(RetOpnd, IFn-&gt;<a class="code" href="classllvm_1_1Function.html#a8052a4f265aa7540f68ca3103a55538d">getArg</a>(0)-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>());</div>
<div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;      <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCall(IFn, BC, <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;    }</div>
<div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;  }</div>
<div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;}</div>
<div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;<span class="comment">/// This function inlines the called function into the basic block of the</span></div>
<div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;<span class="comment">/// caller. This returns false if it is not possible to inline this call.</span></div>
<div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160;<span class="comment">/// The program is still in a well defined state if this occurs though.</span></div>
<div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;<span class="comment">/// Note that this only does one level of inlining.  For example, if the</span></div>
<div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160;<span class="comment">/// instruction &#39;call B&#39; is inlined, and &#39;B&#39; calls &#39;C&#39;, then the call to &#39;C&#39; now</span></div>
<div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;<span class="comment">/// exists in the instruction stream.  Similarly this will inline a recursive</span></div>
<div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;<span class="comment">/// function by one level.</span></div>
<div class="line"><a name="l02008"></a><span class="lineno"><a class="line" href="namespacellvm.html#ab5a3ac0a249da0743dac1bd816d8e5d5"> 2008</a></span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1InlineResult.html">llvm::InlineResult</a> <a class="code" href="namespacellvm.html#ab5a3ac0a249da0743dac1bd816d8e5d5">llvm::InlineFunction</a>(<a class="code" href="classllvm_1_1CallBase.html">CallBase</a> &amp;CB, <a class="code" href="classllvm_1_1InlineFunctionInfo.html">InlineFunctionInfo</a> &amp;IFI,</div>
<div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;                                        <span class="keywordtype">bool</span> MergeAttributes,</div>
<div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;                                        <a class="code" href="classllvm_1_1AAResults.html">AAResults</a> *CalleeAAR,</div>
<div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;                                        <span class="keywordtype">bool</span> InsertLifetime,</div>
<div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160;                                        <a class="code" href="classllvm_1_1Function.html">Function</a> *ForwardVarArgsTo) {</div>
<div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(CB.<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>() &amp;&amp; CB.<a class="code" href="classllvm_1_1Instruction.html#a6a66ebb3aa12757479a3c88de77d78f8">getFunction</a>() &amp;&amp; <span class="stringliteral">&quot;Instruction not in function!&quot;</span>);</div>
<div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160; </div>
<div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160;  <span class="comment">// FIXME: we don&#39;t inline callbr yet.</span></div>
<div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160;  <span class="keywordflow">if</span> (isa&lt;CallBrInst&gt;(CB))</div>
<div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1InlineResult.html#a77027fdc657b15aa5dd3d022e0fc07d3">InlineResult::failure</a>(<span class="stringliteral">&quot;We don&#39;t inline callbr yet.&quot;</span>);</div>
<div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160; </div>
<div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;  <span class="comment">// If IFI has any state in it, zap it before we fill it in.</span></div>
<div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;  IFI.<a class="code" href="classllvm_1_1InlineFunctionInfo.html#acbbc7320e82682aed3c325a08b187a2f">reset</a>();</div>
<div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160; </div>
<div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *CalledFunc = CB.<a class="code" href="classllvm_1_1CallBase.html#a83b8c9e572130f403445c0b0f69b837c">getCalledFunction</a>();</div>
<div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160;  <span class="keywordflow">if</span> (!CalledFunc ||               <span class="comment">// Can&#39;t inline external function or indirect</span></div>
<div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;      CalledFunc-&gt;<a class="code" href="classllvm_1_1GlobalValue.html#a32e606ac4c88f71f14212e42b808e7f4">isDeclaration</a>()) <span class="comment">// call!</span></div>
<div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1InlineResult.html#a77027fdc657b15aa5dd3d022e0fc07d3">InlineResult::failure</a>(<span class="stringliteral">&quot;external or indirect&quot;</span>);</div>
<div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160; </div>
<div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;  <span class="comment">// The inliner does not know how to inline through calls with operand bundles</span></div>
<div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160;  <span class="comment">// in general ...</span></div>
<div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160;  <span class="keywordflow">if</span> (CB.<a class="code" href="classllvm_1_1CallBase.html#aecc0c27ae96638bc9d8fa4caffa92c31">hasOperandBundles</a>()) {</div>
<div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a> = CB.<a class="code" href="classllvm_1_1CallBase.html#a35b3798829fba58f145ea59e4214e84a">getNumOperandBundles</a>(); <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a>; ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;      <a class="code" href="classuint32__t.html">uint32_t</a> <a class="code" href="namespacellvm_1_1dwarf.html#ac94a19fc8c57bf0350fc4e9f45897828">Tag</a> = CB.<a class="code" href="classllvm_1_1CallBase.html#a1b38c4ecbbce4814b679f08b72b1d67f">getOperandBundleAt</a>(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>).<a class="code" href="structllvm_1_1OperandBundleUse.html#a6386ca6c50ec4ef5d9a0f13e7fe8f0c9">getTagID</a>();</div>
<div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160;      <span class="comment">// ... but it knows how to inline through &quot;deopt&quot; operand bundles ...</span></div>
<div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1dwarf.html#ac94a19fc8c57bf0350fc4e9f45897828">Tag</a> == <a class="code" href="classllvm_1_1LLVMContext.html#a800c1300065ca1615d2f4fb88623afd5a3f6df86c6efab701ade7abbc3134c25a">LLVMContext::OB_deopt</a>)</div>
<div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160;      <span class="comment">// ... and &quot;funclet&quot; operand bundles.</span></div>
<div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1dwarf.html#ac94a19fc8c57bf0350fc4e9f45897828">Tag</a> == <a class="code" href="classllvm_1_1LLVMContext.html#a800c1300065ca1615d2f4fb88623afd5a8997c6b0930e2c05209e95e7172c6cf3">LLVMContext::OB_funclet</a>)</div>
<div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1dwarf.html#ac94a19fc8c57bf0350fc4e9f45897828">Tag</a> == <a class="code" href="classllvm_1_1LLVMContext.html#a800c1300065ca1615d2f4fb88623afd5a6c03d5e52bbdefc8c392e3ed77c7d6a1">LLVMContext::OB_clang_arc_attachedcall</a>)</div>
<div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1dwarf.html#ac94a19fc8c57bf0350fc4e9f45897828">Tag</a> == <a class="code" href="classllvm_1_1LLVMContext.html#a800c1300065ca1615d2f4fb88623afd5adb925bc2eb2c117b3ec0b76d1e267127">LLVMContext::OB_kcfi</a>)</div>
<div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160; </div>
<div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1InlineResult.html#a77027fdc657b15aa5dd3d022e0fc07d3">InlineResult::failure</a>(<span class="stringliteral">&quot;unsupported operand bundle&quot;</span>);</div>
<div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;    }</div>
<div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;  }</div>
<div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160; </div>
<div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;  <span class="comment">// If the call to the callee cannot throw, set the &#39;nounwind&#39; flag on any</span></div>
<div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;  <span class="comment">// calls that we inline.</span></div>
<div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;  <span class="keywordtype">bool</span> MarkNoUnwind = CB.<a class="code" href="classllvm_1_1CallBase.html#aa87fae97a8c702741eca5a95748af49d">doesNotThrow</a>();</div>
<div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160; </div>
<div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *OrigBB = CB.<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>();</div>
<div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *Caller = OrigBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a38bee869ad41aebfef3de2641b12004c">getParent</a>();</div>
<div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160; </div>
<div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;  <span class="comment">// Do not inline strictfp function into non-strictfp one. It would require</span></div>
<div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;  <span class="comment">// conversion of all FP operations in host function to constrained intrinsics.</span></div>
<div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;  <span class="keywordflow">if</span> (CalledFunc-&gt;<a class="code" href="classllvm_1_1Function.html#a7477aafbbe989ad35b96fac186d8e9fd">getAttributes</a>().<a class="code" href="classllvm_1_1AttributeList.html#a61054ea97168f709c1e46345f80c16a3">hasFnAttr</a>(Attribute::StrictFP) &amp;&amp;</div>
<div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160;      !Caller-&gt;getAttributes().hasFnAttr(Attribute::StrictFP)) {</div>
<div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1InlineResult.html#a77027fdc657b15aa5dd3d022e0fc07d3">InlineResult::failure</a>(<span class="stringliteral">&quot;incompatible strictfp attributes&quot;</span>);</div>
<div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160;  }</div>
<div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160; </div>
<div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160;  <span class="comment">// GC poses two hazards to inlining, which only occur when the callee has GC:</span></div>
<div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160;  <span class="comment">//  1. If the caller has no GC, then the callee&#39;s GC must be propagated to the</span></div>
<div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160;  <span class="comment">//     caller.</span></div>
<div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160;  <span class="comment">//  2. If the caller has a differing GC, it is invalid to inline.</span></div>
<div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160;  <span class="keywordflow">if</span> (CalledFunc-&gt;<a class="code" href="classllvm_1_1Function.html#a5e63b88c979e47ac7da57890a45bd2c2">hasGC</a>()) {</div>
<div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;    <span class="keywordflow">if</span> (!Caller-&gt;hasGC())</div>
<div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160;      Caller-&gt;setGC(CalledFunc-&gt;<a class="code" href="classllvm_1_1Function.html#aa180549a789e99a98e599e8e183c4773">getGC</a>());</div>
<div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (CalledFunc-&gt;<a class="code" href="classllvm_1_1Function.html#aa180549a789e99a98e599e8e183c4773">getGC</a>() != Caller-&gt;getGC())</div>
<div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1InlineResult.html#a77027fdc657b15aa5dd3d022e0fc07d3">InlineResult::failure</a>(<span class="stringliteral">&quot;incompatible GC&quot;</span>);</div>
<div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;  }</div>
<div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160; </div>
<div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;  <span class="comment">// Get the personality function from the callee if it contains a landing pad.</span></div>
<div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *CalledPersonality =</div>
<div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;      CalledFunc-&gt;<a class="code" href="classllvm_1_1Function.html#a6a0f6312963ee6fb0969243607174949">hasPersonalityFn</a>()</div>
<div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;          ? CalledFunc-&gt;<a class="code" href="classllvm_1_1Function.html#a6f77e4e800ba4dffd63e8ddb330062aa">getPersonalityFn</a>()-&gt;<a class="code" href="classllvm_1_1Constant.html#a0ebfdc2c511407c9ba517ccde6cad85f">stripPointerCasts</a>()</div>
<div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;          : <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160; </div>
<div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160;  <span class="comment">// Find the personality function used by the landing pads of the caller. If it</span></div>
<div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;  <span class="comment">// exists, then check to see that it matches the personality function used in</span></div>
<div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160;  <span class="comment">// the callee.</span></div>
<div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *CallerPersonality =</div>
<div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160;      Caller-&gt;hasPersonalityFn()</div>
<div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160;          ? Caller-&gt;getPersonalityFn()-&gt;stripPointerCasts()</div>
<div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;          : <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;  <span class="keywordflow">if</span> (CalledPersonality) {</div>
<div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;    <span class="keywordflow">if</span> (!CallerPersonality)</div>
<div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;      Caller-&gt;setPersonalityFn(CalledPersonality);</div>
<div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;    <span class="comment">// If the personality functions match, then we can perform the</span></div>
<div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;    <span class="comment">// inlining. Otherwise, we can&#39;t inline.</span></div>
<div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;    <span class="comment">// TODO: This isn&#39;t 100% true. Some personality functions are proper</span></div>
<div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;    <span class="comment">//       supersets of others and can be used in place of the other.</span></div>
<div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (CalledPersonality != CallerPersonality)</div>
<div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1InlineResult.html#a77027fdc657b15aa5dd3d022e0fc07d3">InlineResult::failure</a>(<span class="stringliteral">&quot;incompatible personality&quot;</span>);</div>
<div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;  }</div>
<div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160; </div>
<div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160;  <span class="comment">// We need to figure out which funclet the callsite was in so that we may</span></div>
<div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;  <span class="comment">// properly nest the callee.</span></div>
<div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *CallSiteEHPad = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160;  <span class="keywordflow">if</span> (CallerPersonality) {</div>
<div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;    <a class="code" href="namespacellvm.html#a5d56157a385f8cd7d3e54ed87da1ba6a">EHPersonality</a> Personality = <a class="code" href="namespacellvm.html#a8d508f23e2580095561902c39911fb9b">classifyEHPersonality</a>(CallerPersonality);</div>
<div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a5309dbf19ec5ccffe3072c6087e106d3">isScopedEHPersonality</a>(Personality)) {</div>
<div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;      std::optional&lt;OperandBundleUse&gt; ParentFunclet =</div>
<div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;          CB.<a class="code" href="classllvm_1_1CallBase.html#a87921b2b4748a722da30339103c08f62">getOperandBundle</a>(<a class="code" href="classllvm_1_1LLVMContext.html#a800c1300065ca1615d2f4fb88623afd5a8997c6b0930e2c05209e95e7172c6cf3">LLVMContext::OB_funclet</a>);</div>
<div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160;      <span class="keywordflow">if</span> (ParentFunclet)</div>
<div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;        CallSiteEHPad = cast&lt;FuncletPadInst&gt;(ParentFunclet-&gt;Inputs.front());</div>
<div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160; </div>
<div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;      <span class="comment">// OK, the inlining site is legal.  What about the target function?</span></div>
<div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160; </div>
<div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160;      <span class="keywordflow">if</span> (CallSiteEHPad) {</div>
<div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160;        <span class="keywordflow">if</span> (Personality == <a class="code" href="namespacellvm.html#a5d56157a385f8cd7d3e54ed87da1ba6aab34bedfd8d86f0adbefe4ae0e708f428">EHPersonality::MSVC_CXX</a>) {</div>
<div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;          <span class="comment">// The MSVC personality cannot tolerate catches getting inlined into</span></div>
<div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160;          <span class="comment">// cleanup funclets.</span></div>
<div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;          <span class="keywordflow">if</span> (isa&lt;CleanupPadInst&gt;(CallSiteEHPad)) {</div>
<div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;            <span class="comment">// Ok, the call site is within a cleanuppad.  Let&#39;s check the callee</span></div>
<div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160;            <span class="comment">// for catchpads.</span></div>
<div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160;            <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> &amp;CalledBB : *CalledFunc) {</div>
<div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;              <span class="keywordflow">if</span> (isa&lt;CatchSwitchInst&gt;(CalledBB.getFirstNonPHI()))</div>
<div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1InlineResult.html#a77027fdc657b15aa5dd3d022e0fc07d3">InlineResult::failure</a>(<span class="stringliteral">&quot;catch in cleanup funclet&quot;</span>);</div>
<div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;            }</div>
<div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;          }</div>
<div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#ab9c9fb92464f96c0e0f326d624e82eab">isAsynchronousEHPersonality</a>(Personality)) {</div>
<div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;          <span class="comment">// SEH is even less tolerant, there may not be any sort of exceptional</span></div>
<div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;          <span class="comment">// funclet in the callee.</span></div>
<div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160;          <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> &amp;CalledBB : *CalledFunc) {</div>
<div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;            <span class="keywordflow">if</span> (CalledBB.isEHPad())</div>
<div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160;              <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1InlineResult.html#a77027fdc657b15aa5dd3d022e0fc07d3">InlineResult::failure</a>(<span class="stringliteral">&quot;SEH in cleanup funclet&quot;</span>);</div>
<div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160;          }</div>
<div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160;        }</div>
<div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160;      }</div>
<div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160;    }</div>
<div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160;  }</div>
<div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160; </div>
<div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160;  <span class="comment">// Determine if we are dealing with a call in an EHPad which does not unwind</span></div>
<div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;  <span class="comment">// to caller.</span></div>
<div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160;  <span class="keywordtype">bool</span> EHPadForCallUnwindsLocally = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160;  <span class="keywordflow">if</span> (CallSiteEHPad &amp;&amp; isa&lt;CallInst&gt;(CB)) {</div>
<div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160;    <a class="code" href="classllvm_1_1DenseMap.html">UnwindDestMemoTy</a> FuncletUnwindMap;</div>
<div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *CallSiteUnwindDestToken =</div>
<div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160;        <a class="code" href="InlineFunction_8cpp.html#aba0a2870541e6fa6fd93c313d27a139e">getUnwindDestToken</a>(CallSiteEHPad, FuncletUnwindMap);</div>
<div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160; </div>
<div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;    EHPadForCallUnwindsLocally =</div>
<div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160;        CallSiteUnwindDestToken &amp;&amp;</div>
<div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160;        !isa&lt;ConstantTokenNone&gt;(CallSiteUnwindDestToken);</div>
<div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160;  }</div>
<div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160; </div>
<div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160;  <span class="comment">// Get an iterator to the last basic block in the function, which will have</span></div>
<div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160;  <span class="comment">// the new function inlined after it.</span></div>
<div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160;  <a class="code" href="classllvm_1_1Function.html#a19595c245bd2e3eefa93ce22db5ad15f">Function::iterator</a> LastBlock = --Caller-&gt;end();</div>
<div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160; </div>
<div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160;  <span class="comment">// Make sure to capture all of the return instructions from the cloned</span></div>
<div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160;  <span class="comment">// function.</span></div>
<div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;ReturnInst*, 8&gt;</a> Returns;</div>
<div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160;  <a class="code" href="structllvm_1_1ClonedCodeInfo.html">ClonedCodeInfo</a> InlinedFunctionInfo;</div>
<div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160;  <a class="code" href="classllvm_1_1Function.html#a19595c245bd2e3eefa93ce22db5ad15f">Function::iterator</a> FirstNewBlock;</div>
<div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160; </div>
<div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;  { <span class="comment">// Scope to destroy VMap after cloning.</span></div>
<div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;    <a class="code" href="classllvm_1_1ValueMap.html">ValueToValueMapTy</a> VMap;</div>
<div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160;    <span class="keyword">struct </span>ByValInit {</div>
<div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *Dst;</div>
<div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *Src;</div>
<div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160;      <a class="code" href="classllvm_1_1Type.html">Type</a> *Ty;</div>
<div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160;    };</div>
<div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160;    <span class="comment">// Keep a list of pair (dst, src) to emit byval initializations.</span></div>
<div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;ByValInit, 4&gt;</a> ByValInits;</div>
<div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160; </div>
<div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160;    <span class="comment">// When inlining a function that contains noalias scope metadata,</span></div>
<div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;    <span class="comment">// this metadata needs to be cloned so that the inlined blocks</span></div>
<div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160;    <span class="comment">// have different &quot;unique scopes&quot; at every call site.</span></div>
<div class="line"><a name="l02169"></a><span class="lineno"> 2169</span>&#160;    <span class="comment">// Track the metadata that must be cloned. Do this before other changes to</span></div>
<div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160;    <span class="comment">// the function, so that we do not get in trouble when inlining caller ==</span></div>
<div class="line"><a name="l02171"></a><span class="lineno"> 2171</span>&#160;    <span class="comment">// callee.</span></div>
<div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160;    ScopedAliasMetadataDeepCloner SAMetadataCloner(CB.<a class="code" href="classllvm_1_1CallBase.html#a83b8c9e572130f403445c0b0f69b837c">getCalledFunction</a>());</div>
<div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160; </div>
<div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160;    <span class="keyword">auto</span> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a> = Caller-&gt;getParent()-&gt;getDataLayout();</div>
<div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160; </div>
<div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160;    <span class="comment">// Calculate the vector of arguments to pass into the function cloner, which</span></div>
<div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160;    <span class="comment">// matches up the formal to the actual argument values.</span></div>
<div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160;    <span class="keyword">auto</span> AI = CB.<a class="code" href="classllvm_1_1CallBase.html#a4fb513d744ca72275932b2c7003f16f6">arg_begin</a>();</div>
<div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160;    <span class="keywordtype">unsigned</span> ArgNo = 0;</div>
<div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Argument.html">Function::arg_iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = CalledFunc-&gt;<a class="code" href="classllvm_1_1Function.html#a8bf193a781a92cae52d7f9216d0824f8">arg_begin</a>(),</div>
<div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160;         <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = CalledFunc-&gt;<a class="code" href="classllvm_1_1Function.html#a8300ac1ef141b8a7c63c13fa9369d976">arg_end</a>(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, ++AI, ++ArgNo) {</div>
<div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *ActualArg = *AI;</div>
<div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160; </div>
<div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;      <span class="comment">// When byval arguments actually inlined, we need to make the copy implied</span></div>
<div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;      <span class="comment">// by them explicit.  However, we don&#39;t do this if the callee is readonly</span></div>
<div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;      <span class="comment">// or readnone, because the copy would be unneeded: the callee doesn&#39;t</span></div>
<div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160;      <span class="comment">// modify the struct.</span></div>
<div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;      <span class="keywordflow">if</span> (CB.<a class="code" href="classllvm_1_1CallBase.html#a610f151afe638890b21bea434a26821d">isByValArgument</a>(ArgNo)) {</div>
<div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;        ActualArg = <a class="code" href="InlineFunction_8cpp.html#ac51fa4a21d783cc9e8c2cd5992cf8f6b">HandleByValArgument</a>(CB.<a class="code" href="classllvm_1_1CallBase.html#ad58305d5392be750e7bfae4d114d4db7">getParamByValType</a>(ArgNo), ActualArg,</div>
<div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;                                        &amp;CB, CalledFunc, IFI,</div>
<div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160;                                        CalledFunc-&gt;<a class="code" href="classllvm_1_1Function.html#a97fb0bcc88f78900c3d4780d963540e0">getParamAlign</a>(ArgNo));</div>
<div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160;        <span class="keywordflow">if</span> (ActualArg != *AI)</div>
<div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;          ByValInits.push_back(</div>
<div class="line"><a name="l02194"></a><span class="lineno"> 2194</span>&#160;              {ActualArg, (<a class="code" href="classllvm_1_1Value.html">Value</a> *)*AI, CB.<a class="code" href="classllvm_1_1CallBase.html#ad58305d5392be750e7bfae4d114d4db7">getParamByValType</a>(ArgNo)});</div>
<div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160;      }</div>
<div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160; </div>
<div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160;      VMap[&amp;*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>] = ActualArg;</div>
<div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160;    }</div>
<div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160; </div>
<div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160;    <span class="comment">// TODO: Remove this when users have been updated to the assume bundles.</span></div>
<div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;    <span class="comment">// Add alignment assumptions if necessary. We do this before the inlined</span></div>
<div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;    <span class="comment">// instructions are actually cloned into the caller so that we can easily</span></div>
<div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;    <span class="comment">// check what will be known at the start of the inlined code.</span></div>
<div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;    <a class="code" href="InlineFunction_8cpp.html#ae54a643a9f9d83374bb4d7d22d4662d7">AddAlignmentAssumptions</a>(CB, IFI);</div>
<div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160; </div>
<div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;    <a class="code" href="classllvm_1_1AssumptionCache.html">AssumptionCache</a> *AC =</div>
<div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160;        IFI.<a class="code" href="classllvm_1_1InlineFunctionInfo.html#a6d3c3f9f13bd38d8aa6410841d2b99c0">GetAssumptionCache</a> ? &amp;IFI.<a class="code" href="classllvm_1_1InlineFunctionInfo.html#a6d3c3f9f13bd38d8aa6410841d2b99c0">GetAssumptionCache</a>(*Caller) : <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160;<span class="comment">    /// Preserve all attributes on of the call and its parameters.</span></div>
<div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;<span class="comment"></span>    <a class="code" href="namespacellvm.html#aa39ca296d9689933bb0279c9ac3ee1fc">salvageKnowledge</a>(&amp;CB, AC);</div>
<div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160; </div>
<div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;    <span class="comment">// We want the inliner to prune the code as it copies.  We would LOVE to</span></div>
<div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;    <span class="comment">// have no dead or constant instructions leftover after inlining occurs</span></div>
<div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;    <span class="comment">// (which can happen, e.g., because an argument was constant), but we&#39;ll be</span></div>
<div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160;    <span class="comment">// happy with whatever the cloner can do.</span></div>
<div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160;    <a class="code" href="namespacellvm.html#a7a6386c071e1087512cdc8a4071a02b5">CloneAndPruneFunctionInto</a>(Caller, CalledFunc, VMap,</div>
<div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;                              <span class="comment">/*ModuleLevelChanges=*/</span><span class="keyword">false</span>, Returns, <span class="stringliteral">&quot;.i&quot;</span>,</div>
<div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;                              &amp;InlinedFunctionInfo);</div>
<div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160;    <span class="comment">// Remember the first block that is newly cloned over.</span></div>
<div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160;    FirstNewBlock = LastBlock; ++FirstNewBlock;</div>
<div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160; </div>
<div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;    <span class="comment">// Insert retainRV/clainRV runtime calls.</span></div>
<div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160;    <a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2">objcarc::ARCInstKind</a> RVCallKind = <a class="code" href="namespacellvm_1_1objcarc.html#a0174304150a18968bb6e6436f5c675f2">objcarc::getAttachedARCFunctionKind</a>(&amp;CB);</div>
<div class="line"><a name="l02224"></a><span class="lineno"> 2224</span>&#160;    <span class="keywordflow">if</span> (RVCallKind != <a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2a6adf97f83acf6453d4a6a4b1070f3754">objcarc::ARCInstKind::None</a>)</div>
<div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160;      <a class="code" href="InlineFunction_8cpp.html#abf4fabc264b52dbd503f04805135a40e">inlineRetainOrClaimRVCalls</a>(CB, RVCallKind, Returns);</div>
<div class="line"><a name="l02226"></a><span class="lineno"> 2226</span>&#160; </div>
<div class="line"><a name="l02227"></a><span class="lineno"> 2227</span>&#160;    <span class="comment">// Updated caller/callee profiles only when requested. For sample loader</span></div>
<div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>&#160;    <span class="comment">// inlining, the context-sensitive inlinee profile doesn&#39;t need to be</span></div>
<div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160;    <span class="comment">// subtracted from callee profile, and the inlined clone also doesn&#39;t need</span></div>
<div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160;    <span class="comment">// to be scaled based on call site count.</span></div>
<div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160;    <span class="keywordflow">if</span> (IFI.<a class="code" href="classllvm_1_1InlineFunctionInfo.html#a2479f3ea47eee2627b24bddfa6333415">UpdateProfile</a>) {</div>
<div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160;      <span class="keywordflow">if</span> (IFI.<a class="code" href="classllvm_1_1InlineFunctionInfo.html#ad01658587132e4b44ba8414b3a87fde5">CallerBFI</a> != <span class="keyword">nullptr</span> &amp;&amp; IFI.<a class="code" href="classllvm_1_1InlineFunctionInfo.html#a82c69d5928263cabdebf13ea93008be4">CalleeBFI</a> != <span class="keyword">nullptr</span>)</div>
<div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160;        <span class="comment">// Update the BFI of blocks cloned into the caller.</span></div>
<div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>&#160;        <a class="code" href="InlineFunction_8cpp.html#a83a2e4a8c4f5b3b8dee5407d55e8872d">updateCallerBFI</a>(OrigBB, VMap, IFI.<a class="code" href="classllvm_1_1InlineFunctionInfo.html#ad01658587132e4b44ba8414b3a87fde5">CallerBFI</a>, IFI.<a class="code" href="classllvm_1_1InlineFunctionInfo.html#a82c69d5928263cabdebf13ea93008be4">CalleeBFI</a>,</div>
<div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160;                        CalledFunc-&gt;<a class="code" href="classllvm_1_1Function.html#a79fd2bece62d2060209f319c45450c0c">front</a>());</div>
<div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160; </div>
<div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> <a class="code" href="MIRSampleProfile_8cpp.html#a009775794ead70aa23c76df46ab4ed8a">Profile</a> = CalledFunc-&gt;<a class="code" href="classllvm_1_1Function.html#ac154f7a85081237665c89b83bbd3d7e2">getEntryCount</a>())</div>
<div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;        <a class="code" href="InlineFunction_8cpp.html#a8385c2a142c1616d8d486bcb93213649">updateCallProfile</a>(CalledFunc, VMap, *<a class="code" href="MIRSampleProfile_8cpp.html#a009775794ead70aa23c76df46ab4ed8a">Profile</a>, CB, IFI.<a class="code" href="classllvm_1_1InlineFunctionInfo.html#a200d08643d2038b04aa16716e8cd154b">PSI</a>,</div>
<div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160;                          IFI.<a class="code" href="classllvm_1_1InlineFunctionInfo.html#ad01658587132e4b44ba8414b3a87fde5">CallerBFI</a>);</div>
<div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160;    }</div>
<div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160; </div>
<div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160;    <span class="comment">// Inject byval arguments initialization.</span></div>
<div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160;    <span class="keywordflow">for</span> (ByValInit &amp;<a class="code" href="classllvm_1_1Init.html">Init</a> : ByValInits)</div>
<div class="line"><a name="l02244"></a><span class="lineno"> 2244</span>&#160;      <a class="code" href="InlineFunction_8cpp.html#afab29f1ed29c826e504beee9867df6e3">HandleByValArgumentInit</a>(<a class="code" href="classllvm_1_1Init.html">Init</a>.Ty, <a class="code" href="classllvm_1_1Init.html">Init</a>.Dst, <a class="code" href="classllvm_1_1Init.html">Init</a>.Src, Caller-&gt;getParent(),</div>
<div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160;                              &amp;*FirstNewBlock, IFI);</div>
<div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160; </div>
<div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160;    std::optional&lt;OperandBundleUse&gt; ParentDeopt =</div>
<div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160;        CB.<a class="code" href="classllvm_1_1CallBase.html#a87921b2b4748a722da30339103c08f62">getOperandBundle</a>(<a class="code" href="classllvm_1_1LLVMContext.html#a800c1300065ca1615d2f4fb88623afd5a3f6df86c6efab701ade7abbc3134c25a">LLVMContext::OB_deopt</a>);</div>
<div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160;    <span class="keywordflow">if</span> (ParentDeopt) {</div>
<div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;      <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;OperandBundleDef, 2&gt;</a> OpDefs;</div>
<div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160; </div>
<div class="line"><a name="l02252"></a><span class="lineno"> 2252</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;VH : InlinedFunctionInfo.<a class="code" href="structllvm_1_1ClonedCodeInfo.html#aee51f754e9da74f168cd4d12e1eb5c7b">OperandBundleCallSites</a>) {</div>
<div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160;        <a class="code" href="classllvm_1_1CallBase.html">CallBase</a> *ICS = dyn_cast_or_null&lt;CallBase&gt;(VH);</div>
<div class="line"><a name="l02254"></a><span class="lineno"> 2254</span>&#160;        <span class="keywordflow">if</span> (!ICS)</div>
<div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160;          <span class="keywordflow">continue</span>; <span class="comment">// instruction was DCE&#39;d or RAUW&#39;ed to undef</span></div>
<div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160; </div>
<div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160;        OpDefs.<a class="code" href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">clear</a>();</div>
<div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160; </div>
<div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160;        OpDefs.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a499ea32ca1b8d16cedfe01d1e5b08f29">reserve</a>(ICS-&gt;<a class="code" href="classllvm_1_1CallBase.html#a35b3798829fba58f145ea59e4214e84a">getNumOperandBundles</a>());</div>
<div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160; </div>
<div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> COBi = 0, COBe = ICS-&gt;<a class="code" href="classllvm_1_1CallBase.html#a35b3798829fba58f145ea59e4214e84a">getNumOperandBundles</a>(); COBi &lt; COBe;</div>
<div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160;             ++COBi) {</div>
<div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160;          <span class="keyword">auto</span> ChildOB = ICS-&gt;<a class="code" href="classllvm_1_1CallBase.html#a1b38c4ecbbce4814b679f08b72b1d67f">getOperandBundleAt</a>(COBi);</div>
<div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160;          <span class="keywordflow">if</span> (ChildOB.getTagID() != <a class="code" href="classllvm_1_1LLVMContext.html#a800c1300065ca1615d2f4fb88623afd5a3f6df86c6efab701ade7abbc3134c25a">LLVMContext::OB_deopt</a>) {</div>
<div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160;            <span class="comment">// If the inlined call has other operand bundles, let them be</span></div>
<div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160;            OpDefs.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a396fcfee6914c76974b73c3d203da6a5">emplace_back</a>(ChildOB);</div>
<div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160;          }</div>
<div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160; </div>
<div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>&#160;          <span class="comment">// It may be useful to separate this logic (of handling operand</span></div>
<div class="line"><a name="l02271"></a><span class="lineno"> 2271</span>&#160;          <span class="comment">// bundles) out to a separate &quot;policy&quot; component if this gets crowded.</span></div>
<div class="line"><a name="l02272"></a><span class="lineno"> 2272</span>&#160;          <span class="comment">// Prepend the parent&#39;s deoptimization continuation to the newly</span></div>
<div class="line"><a name="l02273"></a><span class="lineno"> 2273</span>&#160;          <span class="comment">// inlined call&#39;s deoptimization continuation.</span></div>
<div class="line"><a name="l02274"></a><span class="lineno"> 2274</span>&#160;          std::vector&lt;Value *&gt; MergedDeoptArgs;</div>
<div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160;          MergedDeoptArgs.reserve(ParentDeopt-&gt;Inputs.size() +</div>
<div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160;                                  ChildOB.Inputs.size());</div>
<div class="line"><a name="l02277"></a><span class="lineno"> 2277</span>&#160; </div>
<div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160;          <a class="code" href="namespacellvm.html#a39d3d23a084c4544ee5903203db10e8a">llvm::append_range</a>(MergedDeoptArgs, ParentDeopt-&gt;Inputs);</div>
<div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160;          <a class="code" href="namespacellvm.html#a39d3d23a084c4544ee5903203db10e8a">llvm::append_range</a>(MergedDeoptArgs, ChildOB.Inputs);</div>
<div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160; </div>
<div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160;          OpDefs.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a396fcfee6914c76974b73c3d203da6a5">emplace_back</a>(<span class="stringliteral">&quot;deopt&quot;</span>, <a class="code" href="lib_2Target_2ARM_2README_8txt.html#ad3a99906764c35b2694ae90fa57744a5">std::move</a>(MergedDeoptArgs));</div>
<div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160;        }</div>
<div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160; </div>
<div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160;        <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *NewI = <a class="code" href="classllvm_1_1CallBase.html#a7d1bb46cb6e28a5907c4185157804911">CallBase::Create</a>(ICS, OpDefs, ICS);</div>
<div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160; </div>
<div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160;        <span class="comment">// Note: the RAUW does the appropriate fixup in VMap, so we need to do</span></div>
<div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160;        <span class="comment">// this even if the call returns void.</span></div>
<div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160;        ICS-&gt;<a class="code" href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">replaceAllUsesWith</a>(NewI);</div>
<div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160; </div>
<div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160;        VH = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;        ICS-&gt;<a class="code" href="classllvm_1_1Instruction.html#ae6b978645b8ac72d1a35e1298ffdd4f0">eraseFromParent</a>();</div>
<div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160;      }</div>
<div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160;    }</div>
<div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160; </div>
<div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160;    <span class="comment">// Update the callgraph if requested.</span></div>
<div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160;    <span class="keywordflow">if</span> (IFI.<a class="code" href="classllvm_1_1InlineFunctionInfo.html#ac3ef4b4fdcc6fc9aba65a545c213d76a">CG</a>)</div>
<div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;      <a class="code" href="InlineFunction_8cpp.html#a87cf024e879dad373029f201d5996d20">UpdateCallGraphAfterInlining</a>(CB, FirstNewBlock, VMap, IFI);</div>
<div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160; </div>
<div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160;    <span class="comment">// For &#39;nodebug&#39; functions, the associated DISubprogram is always null.</span></div>
<div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160;    <span class="comment">// Conservatively avoid propagating the callsite debug location to</span></div>
<div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160;    <span class="comment">// instructions inlined from a function whose DISubprogram is not null.</span></div>
<div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160;    <a class="code" href="InlineFunction_8cpp.html#a2ed4f37fbda15a9c05f333fde59e9fbb">fixupLineNumbers</a>(Caller, FirstNewBlock, &amp;CB,</div>
<div class="line"><a name="l02303"></a><span class="lineno"> 2303</span>&#160;                     CalledFunc-&gt;<a class="code" href="classllvm_1_1Function.html#a4d834f9897d15e3a6349063b5d637cd8">getSubprogram</a>() != <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160; </div>
<div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#aa9ef2dbd1b7ce921093f7d4a7bd4cc5c">isAssignmentTrackingEnabled</a>(*Caller-&gt;getParent())) {</div>
<div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160;      <span class="comment">// Interpret inlined stores to caller-local variables as assignments.</span></div>
<div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160;      <a class="code" href="InlineFunction_8cpp.html#ae71573dba191b26eda0d5ea27b81ef62">trackInlinedStores</a>(FirstNewBlock, Caller-&gt;end(), CB);</div>
<div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160; </div>
<div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160;      <span class="comment">// Update DIAssignID metadata attachments and uses so that they are</span></div>
<div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160;      <span class="comment">// unique to this inlined instance.</span></div>
<div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160;      <a class="code" href="InlineFunction_8cpp.html#ac6ad5b09bf38c4fc9d0c8a5b598fde3c">fixupAssignments</a>(FirstNewBlock, Caller-&gt;end());</div>
<div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;    }</div>
<div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160; </div>
<div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160;    <span class="comment">// Now clone the inlined noalias scope metadata.</span></div>
<div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160;    SAMetadataCloner.clone();</div>
<div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;    SAMetadataCloner.remap(FirstNewBlock, Caller-&gt;end());</div>
<div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160; </div>
<div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160;    <span class="comment">// Add noalias metadata if necessary.</span></div>
<div class="line"><a name="l02319"></a><span class="lineno"> 2319</span>&#160;    <a class="code" href="InlineFunction_8cpp.html#aa35af336fee32786b6551e23d5b55fcf">AddAliasScopeMetadata</a>(CB, VMap, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, CalleeAAR, InlinedFunctionInfo);</div>
<div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160; </div>
<div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160;    <span class="comment">// Clone return attributes on the callsite into the calls within the inlined</span></div>
<div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160;    <span class="comment">// function which feed into its return value.</span></div>
<div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160;    <a class="code" href="InlineFunction_8cpp.html#a493e20406e393ad60cef6e39e8465312">AddReturnAttributes</a>(CB, VMap);</div>
<div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160; </div>
<div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160;    <a class="code" href="InlineFunction_8cpp.html#a81fe0543b342a120ede7c69eeed77729">propagateMemProfMetadata</a>(CalledFunc, CB,</div>
<div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160;                             InlinedFunctionInfo.<a class="code" href="structllvm_1_1ClonedCodeInfo.html#a94c735687f007da4731abf87dc9fd8e5">ContainsMemProfMetadata</a>, VMap);</div>
<div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160; </div>
<div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160;    <span class="comment">// Propagate metadata on the callsite if necessary.</span></div>
<div class="line"><a name="l02329"></a><span class="lineno"> 2329</span>&#160;    <a class="code" href="InlineFunction_8cpp.html#a74b8b820b4b2d53dd53ba32821887473">PropagateCallSiteMetadata</a>(CB, FirstNewBlock, Caller-&gt;end());</div>
<div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160; </div>
<div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160;    <span class="comment">// Register any cloned assumptions.</span></div>
<div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160;    <span class="keywordflow">if</span> (IFI.<a class="code" href="classllvm_1_1InlineFunctionInfo.html#a6d3c3f9f13bd38d8aa6410841d2b99c0">GetAssumptionCache</a>)</div>
<div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> &amp;NewBlock :</div>
<div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160;           <a class="code" href="namespacellvm.html#ad1a91b49e0c092818a0b82f6cc130a1b">make_range</a>(FirstNewBlock-&gt;getIterator(), Caller-&gt;end()))</div>
<div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : NewBlock)</div>
<div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160;          <span class="keywordflow">if</span> (<span class="keyword">auto</span> *II = dyn_cast&lt;CondGuardInst&gt;(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l02337"></a><span class="lineno"> 2337</span>&#160;            IFI.<a class="code" href="classllvm_1_1InlineFunctionInfo.html#a6d3c3f9f13bd38d8aa6410841d2b99c0">GetAssumptionCache</a>(*Caller).registerAssumption(II);</div>
<div class="line"><a name="l02338"></a><span class="lineno"> 2338</span>&#160;  }</div>
<div class="line"><a name="l02339"></a><span class="lineno"> 2339</span>&#160; </div>
<div class="line"><a name="l02340"></a><span class="lineno"> 2340</span>&#160;  <span class="comment">// If there are any alloca instructions in the block that used to be the entry</span></div>
<div class="line"><a name="l02341"></a><span class="lineno"> 2341</span>&#160;  <span class="comment">// block for the callee, move them to the entry block of the caller.  First</span></div>
<div class="line"><a name="l02342"></a><span class="lineno"> 2342</span>&#160;  <span class="comment">// calculate which instruction they should be inserted before.  We insert the</span></div>
<div class="line"><a name="l02343"></a><span class="lineno"> 2343</span>&#160;  <span class="comment">// instructions at the end of the current alloca list.</span></div>
<div class="line"><a name="l02344"></a><span class="lineno"> 2344</span>&#160;  {</div>
<div class="line"><a name="l02345"></a><span class="lineno"> 2345</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html#a98c0a84a5dfa8bce341c829709f171e5">BasicBlock::iterator</a> InsertPoint = Caller-&gt;begin()-&gt;begin();</div>
<div class="line"><a name="l02346"></a><span class="lineno"> 2346</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html#a98c0a84a5dfa8bce341c829709f171e5">BasicBlock::iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = FirstNewBlock-&gt;begin(),</div>
<div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>&#160;         <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = FirstNewBlock-&gt;end(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>; ) {</div>
<div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160;      <a class="code" href="classllvm_1_1AllocaInst.html">AllocaInst</a> *AI = dyn_cast&lt;AllocaInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>++);</div>
<div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160;      <span class="keywordflow">if</span> (!AI) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02350"></a><span class="lineno"> 2350</span>&#160; </div>
<div class="line"><a name="l02351"></a><span class="lineno"> 2351</span>&#160;      <span class="comment">// If the alloca is now dead, remove it.  This often occurs due to code</span></div>
<div class="line"><a name="l02352"></a><span class="lineno"> 2352</span>&#160;      <span class="comment">// specialization.</span></div>
<div class="line"><a name="l02353"></a><span class="lineno"> 2353</span>&#160;      <span class="keywordflow">if</span> (AI-&gt;<a class="code" href="classllvm_1_1Value.html#a9d7de807ebdfe1819df3ff6cb0f16158">use_empty</a>()) {</div>
<div class="line"><a name="l02354"></a><span class="lineno"> 2354</span>&#160;        AI-&gt;<a class="code" href="classllvm_1_1Instruction.html#ae6b978645b8ac72d1a35e1298ffdd4f0">eraseFromParent</a>();</div>
<div class="line"><a name="l02355"></a><span class="lineno"> 2355</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02356"></a><span class="lineno"> 2356</span>&#160;      }</div>
<div class="line"><a name="l02357"></a><span class="lineno"> 2357</span>&#160; </div>
<div class="line"><a name="l02358"></a><span class="lineno"> 2358</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="InlineFunction_8cpp.html#ad19c97a069133d179234826fc95c3bde">allocaWouldBeStaticInEntry</a>(AI))</div>
<div class="line"><a name="l02359"></a><span class="lineno"> 2359</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02360"></a><span class="lineno"> 2360</span>&#160; </div>
<div class="line"><a name="l02361"></a><span class="lineno"> 2361</span>&#160;      <span class="comment">// Keep track of the static allocas that we inline into the caller.</span></div>
<div class="line"><a name="l02362"></a><span class="lineno"> 2362</span>&#160;      IFI.<a class="code" href="classllvm_1_1InlineFunctionInfo.html#a9c259c76065eb3b4ce3697ce346008ce">StaticAllocas</a>.push_back(AI);</div>
<div class="line"><a name="l02363"></a><span class="lineno"> 2363</span>&#160; </div>
<div class="line"><a name="l02364"></a><span class="lineno"> 2364</span>&#160;      <span class="comment">// Scan for the block of allocas that we can move over, and move them</span></div>
<div class="line"><a name="l02365"></a><span class="lineno"> 2365</span>&#160;      <span class="comment">// all at once.</span></div>
<div class="line"><a name="l02366"></a><span class="lineno"> 2366</span>&#160;      <span class="keywordflow">while</span> (isa&lt;AllocaInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &amp;&amp;</div>
<div class="line"><a name="l02367"></a><span class="lineno"> 2367</span>&#160;             !cast&lt;AllocaInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)-&gt;use_empty() &amp;&amp;</div>
<div class="line"><a name="l02368"></a><span class="lineno"> 2368</span>&#160;             <a class="code" href="InlineFunction_8cpp.html#ad19c97a069133d179234826fc95c3bde">allocaWouldBeStaticInEntry</a>(cast&lt;AllocaInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))) {</div>
<div class="line"><a name="l02369"></a><span class="lineno"> 2369</span>&#160;        IFI.<a class="code" href="classllvm_1_1InlineFunctionInfo.html#a9c259c76065eb3b4ce3697ce346008ce">StaticAllocas</a>.push_back(cast&lt;AllocaInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>));</div>
<div class="line"><a name="l02370"></a><span class="lineno"> 2370</span>&#160;        ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l02371"></a><span class="lineno"> 2371</span>&#160;      }</div>
<div class="line"><a name="l02372"></a><span class="lineno"> 2372</span>&#160; </div>
<div class="line"><a name="l02373"></a><span class="lineno"> 2373</span>&#160;      <span class="comment">// Transfer all of the allocas over in a block.  Using splice means</span></div>
<div class="line"><a name="l02374"></a><span class="lineno"> 2374</span>&#160;      <span class="comment">// that the instructions aren&#39;t removed from the symbol table, then</span></div>
<div class="line"><a name="l02375"></a><span class="lineno"> 2375</span>&#160;      <span class="comment">// reinserted.</span></div>
<div class="line"><a name="l02376"></a><span class="lineno"> 2376</span>&#160;      Caller-&gt;getEntryBlock().splice(InsertPoint, &amp;*FirstNewBlock,</div>
<div class="line"><a name="l02377"></a><span class="lineno"> 2377</span>&#160;                                     AI-&gt;<a class="code" href="classllvm_1_1ilist__node__impl.html#af719fc783be6589465137d997701a432">getIterator</a>(), <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l02378"></a><span class="lineno"> 2378</span>&#160;    }</div>
<div class="line"><a name="l02379"></a><span class="lineno"> 2379</span>&#160;  }</div>
<div class="line"><a name="l02380"></a><span class="lineno"> 2380</span>&#160; </div>
<div class="line"><a name="l02381"></a><span class="lineno"> 2381</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Value*,4&gt;</a> VarArgsToForward;</div>
<div class="line"><a name="l02382"></a><span class="lineno"> 2382</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;AttributeSet, 4&gt;</a> VarArgsAttrs;</div>
<div class="line"><a name="l02383"></a><span class="lineno"> 2383</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = CalledFunc-&gt;<a class="code" href="classllvm_1_1Function.html#adf50671db83d2813e0d897ea2cfc9102">getFunctionType</a>()-&gt;<a class="code" href="classllvm_1_1FunctionType.html#a104d6154321899b53e40455e71d8e83a">getNumParams</a>();</div>
<div class="line"><a name="l02384"></a><span class="lineno"> 2384</span>&#160;       <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; CB.<a class="code" href="classllvm_1_1CallBase.html#adde2ea00dd2613ee41bfe91908e4e68e">arg_size</a>(); <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l02385"></a><span class="lineno"> 2385</span>&#160;    VarArgsToForward.push_back(CB.<a class="code" href="classllvm_1_1CallBase.html#ab2caa29167597390ab2fc3cf30d70389">getArgOperand</a>(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>));</div>
<div class="line"><a name="l02386"></a><span class="lineno"> 2386</span>&#160;    VarArgsAttrs.push_back(CB.<a class="code" href="classllvm_1_1CallBase.html#ae0c55761fce39dd71617690b04385193">getAttributes</a>().<a class="code" href="classllvm_1_1AttributeList.html#ada7a173c40ca7ac048a4b7099ceb71c0">getParamAttrs</a>(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>));</div>
<div class="line"><a name="l02387"></a><span class="lineno"> 2387</span>&#160;  }</div>
<div class="line"><a name="l02388"></a><span class="lineno"> 2388</span>&#160; </div>
<div class="line"><a name="l02389"></a><span class="lineno"> 2389</span>&#160;  <span class="keywordtype">bool</span> InlinedMustTailCalls = <span class="keyword">false</span>, InlinedDeoptimizeCalls = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02390"></a><span class="lineno"> 2390</span>&#160;  <span class="keywordflow">if</span> (InlinedFunctionInfo.<a class="code" href="structllvm_1_1ClonedCodeInfo.html#a6bbe5e652464ac9213907e3446874900">ContainsCalls</a>) {</div>
<div class="line"><a name="l02391"></a><span class="lineno"> 2391</span>&#160;    <a class="code" href="classllvm_1_1CallInst.html#ad682514c13f12f1a8d759d422fce6aef">CallInst::TailCallKind</a> CallSiteTailKind = <a class="code" href="classllvm_1_1CallInst.html#ad682514c13f12f1a8d759d422fce6aefa28bea809e15b48558c89910b7fb924b6">CallInst::TCK_None</a>;</div>
<div class="line"><a name="l02392"></a><span class="lineno"> 2392</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *CI = dyn_cast&lt;CallInst&gt;(&amp;CB))</div>
<div class="line"><a name="l02393"></a><span class="lineno"> 2393</span>&#160;      CallSiteTailKind = CI-&gt;getTailCallKind();</div>
<div class="line"><a name="l02394"></a><span class="lineno"> 2394</span>&#160; </div>
<div class="line"><a name="l02395"></a><span class="lineno"> 2395</span>&#160;    <span class="comment">// For inlining purposes, the &quot;notail&quot; marker is the same as no marker.</span></div>
<div class="line"><a name="l02396"></a><span class="lineno"> 2396</span>&#160;    <span class="keywordflow">if</span> (CallSiteTailKind == <a class="code" href="classllvm_1_1CallInst.html#ad682514c13f12f1a8d759d422fce6aefa876f2a1fd3dd74831f85634cb14b72fe">CallInst::TCK_NoTail</a>)</div>
<div class="line"><a name="l02397"></a><span class="lineno"> 2397</span>&#160;      CallSiteTailKind = <a class="code" href="classllvm_1_1CallInst.html#ad682514c13f12f1a8d759d422fce6aefa28bea809e15b48558c89910b7fb924b6">CallInst::TCK_None</a>;</div>
<div class="line"><a name="l02398"></a><span class="lineno"> 2398</span>&#160; </div>
<div class="line"><a name="l02399"></a><span class="lineno"> 2399</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Function.html#a19595c245bd2e3eefa93ce22db5ad15f">Function::iterator</a> <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> = FirstNewBlock, <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = Caller-&gt;end(); <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> != <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>;</div>
<div class="line"><a name="l02400"></a><span class="lineno"> 2400</span>&#160;         ++<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) {</div>
<div class="line"><a name="l02401"></a><span class="lineno"> 2401</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : <a class="code" href="namespacellvm.html#a8154638df88e4eaa568b67b23d463dac">llvm::make_early_inc_range</a>(*<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>)) {</div>
<div class="line"><a name="l02402"></a><span class="lineno"> 2402</span>&#160;        <a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *CI = dyn_cast&lt;CallInst&gt;(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l02403"></a><span class="lineno"> 2403</span>&#160;        <span class="keywordflow">if</span> (!CI)</div>
<div class="line"><a name="l02404"></a><span class="lineno"> 2404</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02405"></a><span class="lineno"> 2405</span>&#160; </div>
<div class="line"><a name="l02406"></a><span class="lineno"> 2406</span>&#160;        <span class="comment">// Forward varargs from inlined call site to calls to the</span></div>
<div class="line"><a name="l02407"></a><span class="lineno"> 2407</span>&#160;        <span class="comment">// ForwardVarArgsTo function, if requested, and to musttail calls.</span></div>
<div class="line"><a name="l02408"></a><span class="lineno"> 2408</span>&#160;        <span class="keywordflow">if</span> (!VarArgsToForward.empty() &amp;&amp;</div>
<div class="line"><a name="l02409"></a><span class="lineno"> 2409</span>&#160;            ((ForwardVarArgsTo &amp;&amp;</div>
<div class="line"><a name="l02410"></a><span class="lineno"> 2410</span>&#160;              CI-&gt;<a class="code" href="classllvm_1_1CallBase.html#a83b8c9e572130f403445c0b0f69b837c">getCalledFunction</a>() == ForwardVarArgsTo) ||</div>
<div class="line"><a name="l02411"></a><span class="lineno"> 2411</span>&#160;             CI-&gt;<a class="code" href="classllvm_1_1CallInst.html#ad3c897ba734b78e973db4622dff7bdcb">isMustTailCall</a>())) {</div>
<div class="line"><a name="l02412"></a><span class="lineno"> 2412</span>&#160;          <span class="comment">// Collect attributes for non-vararg parameters.</span></div>
<div class="line"><a name="l02413"></a><span class="lineno"> 2413</span>&#160;          <a class="code" href="classllvm_1_1AttributeList.html">AttributeList</a> <a class="code" href="README__ALTIVEC_8txt.html#a9d3ba236d13373cde794da2023acc7a0">Attrs</a> = CI-&gt;<a class="code" href="classllvm_1_1CallBase.html#ae0c55761fce39dd71617690b04385193">getAttributes</a>();</div>
<div class="line"><a name="l02414"></a><span class="lineno"> 2414</span>&#160;          <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;AttributeSet, 8&gt;</a> ArgAttrs;</div>
<div class="line"><a name="l02415"></a><span class="lineno"> 2415</span>&#160;          <span class="keywordflow">if</span> (!<a class="code" href="README__ALTIVEC_8txt.html#a9d3ba236d13373cde794da2023acc7a0">Attrs</a>.isEmpty() || !VarArgsAttrs.empty()) {</div>
<div class="line"><a name="l02416"></a><span class="lineno"> 2416</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> ArgNo = 0;</div>
<div class="line"><a name="l02417"></a><span class="lineno"> 2417</span>&#160;                 ArgNo &lt; CI-&gt;<a class="code" href="classllvm_1_1CallBase.html#a5e4a09f80c7cd5283dbbc7256d122d12">getFunctionType</a>()-&gt;getNumParams(); ++ArgNo)</div>
<div class="line"><a name="l02418"></a><span class="lineno"> 2418</span>&#160;              ArgAttrs.push_back(<a class="code" href="README__ALTIVEC_8txt.html#a9d3ba236d13373cde794da2023acc7a0">Attrs</a>.getParamAttrs(ArgNo));</div>
<div class="line"><a name="l02419"></a><span class="lineno"> 2419</span>&#160;          }</div>
<div class="line"><a name="l02420"></a><span class="lineno"> 2420</span>&#160; </div>
<div class="line"><a name="l02421"></a><span class="lineno"> 2421</span>&#160;          <span class="comment">// Add VarArg attributes.</span></div>
<div class="line"><a name="l02422"></a><span class="lineno"> 2422</span>&#160;          ArgAttrs.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a7efd1f0c1206d95e4fe01a9b49a57b82">append</a>(VarArgsAttrs.begin(), VarArgsAttrs.end());</div>
<div class="line"><a name="l02423"></a><span class="lineno"> 2423</span>&#160;          <a class="code" href="README__ALTIVEC_8txt.html#a9d3ba236d13373cde794da2023acc7a0">Attrs</a> = <a class="code" href="classllvm_1_1AttributeList.html#a5cc6492c8f2e06a8bae9dc0d121fab9f">AttributeList::get</a>(CI-&gt;<a class="code" href="classllvm_1_1Value.html#ab3fc0225d8aaf8434026c3573f961f2c">getContext</a>(), <a class="code" href="README__ALTIVEC_8txt.html#a9d3ba236d13373cde794da2023acc7a0">Attrs</a>.getFnAttrs(),</div>
<div class="line"><a name="l02424"></a><span class="lineno"> 2424</span>&#160;                                     <a class="code" href="README__ALTIVEC_8txt.html#a9d3ba236d13373cde794da2023acc7a0">Attrs</a>.getRetAttrs(), ArgAttrs);</div>
<div class="line"><a name="l02425"></a><span class="lineno"> 2425</span>&#160;          <span class="comment">// Add VarArgs to existing parameters.</span></div>
<div class="line"><a name="l02426"></a><span class="lineno"> 2426</span>&#160;          <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Value *, 6&gt;</a> Params(CI-&gt;<a class="code" href="classllvm_1_1CallBase.html#ac63dbb4994494c46f025715272cdb81e">args</a>());</div>
<div class="line"><a name="l02427"></a><span class="lineno"> 2427</span>&#160;          Params.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a7efd1f0c1206d95e4fe01a9b49a57b82">append</a>(VarArgsToForward.begin(), VarArgsToForward.end());</div>
<div class="line"><a name="l02428"></a><span class="lineno"> 2428</span>&#160;          <a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *NewCI = <a class="code" href="classllvm_1_1CallInst.html#a850d8262cd900958b3153c4aa080b2bb">CallInst::Create</a>(</div>
<div class="line"><a name="l02429"></a><span class="lineno"> 2429</span>&#160;              CI-&gt;<a class="code" href="classllvm_1_1CallBase.html#a5e4a09f80c7cd5283dbbc7256d122d12">getFunctionType</a>(), CI-&gt;<a class="code" href="classllvm_1_1CallBase.html#a7ac9329ef7292ee640d87f45ce7ae05c">getCalledOperand</a>(), Params, <span class="stringliteral">&quot;&quot;</span>, CI);</div>
<div class="line"><a name="l02430"></a><span class="lineno"> 2430</span>&#160;          NewCI-&gt;<a class="code" href="classllvm_1_1Instruction.html#ae8f5bf5cc06f696b52c709677df00fbf">setDebugLoc</a>(CI-&gt;<a class="code" href="classllvm_1_1Instruction.html#ab4f3bf98b5054831b608852e33427814">getDebugLoc</a>());</div>
<div class="line"><a name="l02431"></a><span class="lineno"> 2431</span>&#160;          NewCI-&gt;<a class="code" href="classllvm_1_1CallBase.html#a9da3b29e8e71b9be4645874e1721207a">setAttributes</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9d3ba236d13373cde794da2023acc7a0">Attrs</a>);</div>
<div class="line"><a name="l02432"></a><span class="lineno"> 2432</span>&#160;          NewCI-&gt;<a class="code" href="classllvm_1_1CallBase.html#a0851b4de29686e9c3918449b054cfada">setCallingConv</a>(CI-&gt;<a class="code" href="classllvm_1_1CallBase.html#a3ff92cec76009e859cb0c419d6e8ba5f">getCallingConv</a>());</div>
<div class="line"><a name="l02433"></a><span class="lineno"> 2433</span>&#160;          CI-&gt;<a class="code" href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">replaceAllUsesWith</a>(NewCI);</div>
<div class="line"><a name="l02434"></a><span class="lineno"> 2434</span>&#160;          CI-&gt;<a class="code" href="classllvm_1_1Instruction.html#ae6b978645b8ac72d1a35e1298ffdd4f0">eraseFromParent</a>();</div>
<div class="line"><a name="l02435"></a><span class="lineno"> 2435</span>&#160;          CI = NewCI;</div>
<div class="line"><a name="l02436"></a><span class="lineno"> 2436</span>&#160;        }</div>
<div class="line"><a name="l02437"></a><span class="lineno"> 2437</span>&#160; </div>
<div class="line"><a name="l02438"></a><span class="lineno"> 2438</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> = CI-&gt;<a class="code" href="classllvm_1_1CallBase.html#a83b8c9e572130f403445c0b0f69b837c">getCalledFunction</a>())</div>
<div class="line"><a name="l02439"></a><span class="lineno"> 2439</span>&#160;          InlinedDeoptimizeCalls |=</div>
<div class="line"><a name="l02440"></a><span class="lineno"> 2440</span>&#160;              <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;getIntrinsicID() == Intrinsic::experimental_deoptimize;</div>
<div class="line"><a name="l02441"></a><span class="lineno"> 2441</span>&#160; </div>
<div class="line"><a name="l02442"></a><span class="lineno"> 2442</span>&#160;        <span class="comment">// We need to reduce the strength of any inlined tail calls.  For</span></div>
<div class="line"><a name="l02443"></a><span class="lineno"> 2443</span>&#160;        <span class="comment">// musttail, we have to avoid introducing potential unbounded stack</span></div>
<div class="line"><a name="l02444"></a><span class="lineno"> 2444</span>&#160;        <span class="comment">// growth.  For example, if functions &#39;f&#39; and &#39;g&#39; are mutually recursive</span></div>
<div class="line"><a name="l02445"></a><span class="lineno"> 2445</span>&#160;        <span class="comment">// with musttail, we can inline &#39;g&#39; into &#39;f&#39; so long as we preserve</span></div>
<div class="line"><a name="l02446"></a><span class="lineno"> 2446</span>&#160;        <span class="comment">// musttail on the cloned call to &#39;f&#39;.  If either the inlined call site</span></div>
<div class="line"><a name="l02447"></a><span class="lineno"> 2447</span>&#160;        <span class="comment">// or the cloned call site is *not* musttail, the program already has</span></div>
<div class="line"><a name="l02448"></a><span class="lineno"> 2448</span>&#160;        <span class="comment">// one frame of stack growth, so it&#39;s safe to remove musttail.  Here is</span></div>
<div class="line"><a name="l02449"></a><span class="lineno"> 2449</span>&#160;        <span class="comment">// a table of example transformations:</span></div>
<div class="line"><a name="l02450"></a><span class="lineno"> 2450</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l02451"></a><span class="lineno"> 2451</span>&#160;        <span class="comment">//    f -&gt; musttail g -&gt; musttail f  ==&gt;  f -&gt; musttail f</span></div>
<div class="line"><a name="l02452"></a><span class="lineno"> 2452</span>&#160;        <span class="comment">//    f -&gt; musttail g -&gt;     tail f  ==&gt;  f -&gt;     tail f</span></div>
<div class="line"><a name="l02453"></a><span class="lineno"> 2453</span>&#160;        <span class="comment">//    f -&gt;          g -&gt; musttail f  ==&gt;  f -&gt;          f</span></div>
<div class="line"><a name="l02454"></a><span class="lineno"> 2454</span>&#160;        <span class="comment">//    f -&gt;          g -&gt;     tail f  ==&gt;  f -&gt;          f</span></div>
<div class="line"><a name="l02455"></a><span class="lineno"> 2455</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l02456"></a><span class="lineno"> 2456</span>&#160;        <span class="comment">// Inlined notail calls should remain notail calls.</span></div>
<div class="line"><a name="l02457"></a><span class="lineno"> 2457</span>&#160;        <a class="code" href="classllvm_1_1CallInst.html#ad682514c13f12f1a8d759d422fce6aef">CallInst::TailCallKind</a> ChildTCK = CI-&gt;<a class="code" href="classllvm_1_1CallInst.html#a8f907245246e05c0220934144c013aee">getTailCallKind</a>();</div>
<div class="line"><a name="l02458"></a><span class="lineno"> 2458</span>&#160;        <span class="keywordflow">if</span> (ChildTCK != <a class="code" href="classllvm_1_1CallInst.html#ad682514c13f12f1a8d759d422fce6aefa876f2a1fd3dd74831f85634cb14b72fe">CallInst::TCK_NoTail</a>)</div>
<div class="line"><a name="l02459"></a><span class="lineno"> 2459</span>&#160;          ChildTCK = <a class="code" href="namespacellvm.html#a57f2ca0e57f4f7b13f56f9aa16af3e0d">std::min</a>(CallSiteTailKind, ChildTCK);</div>
<div class="line"><a name="l02460"></a><span class="lineno"> 2460</span>&#160;        CI-&gt;<a class="code" href="classllvm_1_1CallInst.html#a68573712cd73746e416002907c9af79b">setTailCallKind</a>(ChildTCK);</div>
<div class="line"><a name="l02461"></a><span class="lineno"> 2461</span>&#160;        InlinedMustTailCalls |= CI-&gt;<a class="code" href="classllvm_1_1CallInst.html#ad3c897ba734b78e973db4622dff7bdcb">isMustTailCall</a>();</div>
<div class="line"><a name="l02462"></a><span class="lineno"> 2462</span>&#160; </div>
<div class="line"><a name="l02463"></a><span class="lineno"> 2463</span>&#160;        <span class="comment">// Call sites inlined through a &#39;nounwind&#39; call site should be</span></div>
<div class="line"><a name="l02464"></a><span class="lineno"> 2464</span>&#160;        <span class="comment">// &#39;nounwind&#39; as well. However, avoid marking call sites explicitly</span></div>
<div class="line"><a name="l02465"></a><span class="lineno"> 2465</span>&#160;        <span class="comment">// where possible. This helps expose more opportunities for CSE after</span></div>
<div class="line"><a name="l02466"></a><span class="lineno"> 2466</span>&#160;        <span class="comment">// inlining, commonly when the callee is an intrinsic.</span></div>
<div class="line"><a name="l02467"></a><span class="lineno"> 2467</span>&#160;        <span class="keywordflow">if</span> (MarkNoUnwind &amp;&amp; !CI-&gt;<a class="code" href="classllvm_1_1CallBase.html#aa87fae97a8c702741eca5a95748af49d">doesNotThrow</a>())</div>
<div class="line"><a name="l02468"></a><span class="lineno"> 2468</span>&#160;          CI-&gt;<a class="code" href="classllvm_1_1CallBase.html#a0b6cef2a78857b0236b1c3a2a6eb857e">setDoesNotThrow</a>();</div>
<div class="line"><a name="l02469"></a><span class="lineno"> 2469</span>&#160;      }</div>
<div class="line"><a name="l02470"></a><span class="lineno"> 2470</span>&#160;    }</div>
<div class="line"><a name="l02471"></a><span class="lineno"> 2471</span>&#160;  }</div>
<div class="line"><a name="l02472"></a><span class="lineno"> 2472</span>&#160; </div>
<div class="line"><a name="l02473"></a><span class="lineno"> 2473</span>&#160;  <span class="comment">// Leave lifetime markers for the static alloca&#39;s, scoping them to the</span></div>
<div class="line"><a name="l02474"></a><span class="lineno"> 2474</span>&#160;  <span class="comment">// function we just inlined.</span></div>
<div class="line"><a name="l02475"></a><span class="lineno"> 2475</span>&#160;  <span class="comment">// We need to insert lifetime intrinsics even at O0 to avoid invalid</span></div>
<div class="line"><a name="l02476"></a><span class="lineno"> 2476</span>&#160;  <span class="comment">// access caused by multithreaded coroutines. The check</span></div>
<div class="line"><a name="l02477"></a><span class="lineno"> 2477</span>&#160;  <span class="comment">// `Caller-&gt;isPresplitCoroutine()` would affect AlwaysInliner at O0 only.</span></div>
<div class="line"><a name="l02478"></a><span class="lineno"> 2478</span>&#160;  <span class="keywordflow">if</span> ((InsertLifetime || Caller-&gt;isPresplitCoroutine()) &amp;&amp;</div>
<div class="line"><a name="l02479"></a><span class="lineno"> 2479</span>&#160;      !IFI.<a class="code" href="classllvm_1_1InlineFunctionInfo.html#a9c259c76065eb3b4ce3697ce346008ce">StaticAllocas</a>.empty()) {</div>
<div class="line"><a name="l02480"></a><span class="lineno"> 2480</span>&#160;    <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> <a class="code" href="AssumeBundleBuilder_8cpp.html#ac12c7956b97b705bb8d0f870cfaa0d02">builder</a>(&amp;FirstNewBlock-&gt;front());</div>
<div class="line"><a name="l02481"></a><span class="lineno"> 2481</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> ai = 0, ae = IFI.<a class="code" href="classllvm_1_1InlineFunctionInfo.html#a9c259c76065eb3b4ce3697ce346008ce">StaticAllocas</a>.size(); ai != ae; ++ai) {</div>
<div class="line"><a name="l02482"></a><span class="lineno"> 2482</span>&#160;      <a class="code" href="classllvm_1_1AllocaInst.html">AllocaInst</a> *AI = IFI.<a class="code" href="classllvm_1_1InlineFunctionInfo.html#a9c259c76065eb3b4ce3697ce346008ce">StaticAllocas</a>[ai];</div>
<div class="line"><a name="l02483"></a><span class="lineno"> 2483</span>&#160;      <span class="comment">// Don&#39;t mark swifterror allocas. They can&#39;t have bitcast uses.</span></div>
<div class="line"><a name="l02484"></a><span class="lineno"> 2484</span>&#160;      <span class="keywordflow">if</span> (AI-&gt;<a class="code" href="classllvm_1_1AllocaInst.html#a3016b467a9ecb5506956f7d029509db5">isSwiftError</a>())</div>
<div class="line"><a name="l02485"></a><span class="lineno"> 2485</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02486"></a><span class="lineno"> 2486</span>&#160; </div>
<div class="line"><a name="l02487"></a><span class="lineno"> 2487</span>&#160;      <span class="comment">// If the alloca is already scoped to something smaller than the whole</span></div>
<div class="line"><a name="l02488"></a><span class="lineno"> 2488</span>&#160;      <span class="comment">// function then there&#39;s no need to add redundant, less accurate markers.</span></div>
<div class="line"><a name="l02489"></a><span class="lineno"> 2489</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="InlineFunction_8cpp.html#afaa78d0b3224d3175937f997dc2bc688">hasLifetimeMarkers</a>(AI))</div>
<div class="line"><a name="l02490"></a><span class="lineno"> 2490</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02491"></a><span class="lineno"> 2491</span>&#160; </div>
<div class="line"><a name="l02492"></a><span class="lineno"> 2492</span>&#160;      <span class="comment">// Try to determine the size of the allocation.</span></div>
<div class="line"><a name="l02493"></a><span class="lineno"> 2493</span>&#160;      <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *AllocaSize = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02494"></a><span class="lineno"> 2494</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *AIArraySize =</div>
<div class="line"><a name="l02495"></a><span class="lineno"> 2495</span>&#160;          dyn_cast&lt;ConstantInt&gt;(AI-&gt;<a class="code" href="classllvm_1_1AllocaInst.html#aaca14fdf6d151782f7ab0a66405453fb">getArraySize</a>())) {</div>
<div class="line"><a name="l02496"></a><span class="lineno"> 2496</span>&#160;        <span class="keyword">auto</span> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a> = Caller-&gt;getParent()-&gt;getDataLayout();</div>
<div class="line"><a name="l02497"></a><span class="lineno"> 2497</span>&#160;        <a class="code" href="classllvm_1_1Type.html">Type</a> *AllocaType = AI-&gt;<a class="code" href="classllvm_1_1AllocaInst.html#a074617b3e2f9f98ee3a2ac208e8e7210">getAllocatedType</a>();</div>
<div class="line"><a name="l02498"></a><span class="lineno"> 2498</span>&#160;        <a class="code" href="classllvm_1_1TypeSize.html">TypeSize</a> AllocaTypeSize = <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getTypeAllocSize(AllocaType);</div>
<div class="line"><a name="l02499"></a><span class="lineno"> 2499</span>&#160;        <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> AllocaArraySize = AIArraySize-&gt;<a class="code" href="classllvm_1_1APInt.html#ab01d8694a759a934e01f1c558c3ce862">getLimitedValue</a>();</div>
<div class="line"><a name="l02500"></a><span class="lineno"> 2500</span>&#160; </div>
<div class="line"><a name="l02501"></a><span class="lineno"> 2501</span>&#160;        <span class="comment">// Don&#39;t add markers for zero-sized allocas.</span></div>
<div class="line"><a name="l02502"></a><span class="lineno"> 2502</span>&#160;        <span class="keywordflow">if</span> (AllocaArraySize == 0)</div>
<div class="line"><a name="l02503"></a><span class="lineno"> 2503</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02504"></a><span class="lineno"> 2504</span>&#160; </div>
<div class="line"><a name="l02505"></a><span class="lineno"> 2505</span>&#160;        <span class="comment">// Check that array size doesn&#39;t saturate uint64_t and doesn&#39;t</span></div>
<div class="line"><a name="l02506"></a><span class="lineno"> 2506</span>&#160;        <span class="comment">// overflow when it&#39;s multiplied by type size.</span></div>
<div class="line"><a name="l02507"></a><span class="lineno"> 2507</span>&#160;        <span class="keywordflow">if</span> (!AllocaTypeSize.<a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#a9188f84e1dd67530330dcab9cae787d7">isScalable</a>() &amp;&amp;</div>
<div class="line"><a name="l02508"></a><span class="lineno"> 2508</span>&#160;            AllocaArraySize != <a class="code" href="namespacellvm.html#ab4d4bc901fedd8857f647dcc2c0d71de">std::numeric_limits&lt;uint64_t&gt;::max</a>() &amp;&amp;</div>
<div class="line"><a name="l02509"></a><span class="lineno"> 2509</span>&#160;            <a class="code" href="namespacellvm.html#ab4d4bc901fedd8857f647dcc2c0d71de">std::numeric_limits&lt;uint64_t&gt;::max</a>() / AllocaArraySize &gt;=</div>
<div class="line"><a name="l02510"></a><span class="lineno"> 2510</span>&#160;                AllocaTypeSize.<a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#a33880aaca0ad05e5f1557f079305bde5">getFixedValue</a>()) {</div>
<div class="line"><a name="l02511"></a><span class="lineno"> 2511</span>&#160;          AllocaSize = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(<a class="code" href="classllvm_1_1Type.html#a05186fa23e4d11b9855a9599ba87a4b7">Type::getInt64Ty</a>(AI-&gt;<a class="code" href="classllvm_1_1Value.html#ab3fc0225d8aaf8434026c3573f961f2c">getContext</a>()),</div>
<div class="line"><a name="l02512"></a><span class="lineno"> 2512</span>&#160;                                        AllocaArraySize * AllocaTypeSize);</div>
<div class="line"><a name="l02513"></a><span class="lineno"> 2513</span>&#160;        }</div>
<div class="line"><a name="l02514"></a><span class="lineno"> 2514</span>&#160;      }</div>
<div class="line"><a name="l02515"></a><span class="lineno"> 2515</span>&#160; </div>
<div class="line"><a name="l02516"></a><span class="lineno"> 2516</span>&#160;      <a class="code" href="AssumeBundleBuilder_8cpp.html#ac12c7956b97b705bb8d0f870cfaa0d02">builder</a>.CreateLifetimeStart(AI, AllocaSize);</div>
<div class="line"><a name="l02517"></a><span class="lineno"> 2517</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1ReturnInst.html">ReturnInst</a> *RI : Returns) {</div>
<div class="line"><a name="l02518"></a><span class="lineno"> 2518</span>&#160;        <span class="comment">// Don&#39;t insert llvm.lifetime.end calls between a musttail or deoptimize</span></div>
<div class="line"><a name="l02519"></a><span class="lineno"> 2519</span>&#160;        <span class="comment">// call and a return.  The return kills all local allocas.</span></div>
<div class="line"><a name="l02520"></a><span class="lineno"> 2520</span>&#160;        <span class="keywordflow">if</span> (InlinedMustTailCalls &amp;&amp;</div>
<div class="line"><a name="l02521"></a><span class="lineno"> 2521</span>&#160;            RI-&gt;<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>()-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#ad7038933b96247814b611635abb9686c">getTerminatingMustTailCall</a>())</div>
<div class="line"><a name="l02522"></a><span class="lineno"> 2522</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02523"></a><span class="lineno"> 2523</span>&#160;        <span class="keywordflow">if</span> (InlinedDeoptimizeCalls &amp;&amp;</div>
<div class="line"><a name="l02524"></a><span class="lineno"> 2524</span>&#160;            RI-&gt;<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>()-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a6796a84f02394ce6ebef227c866cd5eb">getTerminatingDeoptimizeCall</a>())</div>
<div class="line"><a name="l02525"></a><span class="lineno"> 2525</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02526"></a><span class="lineno"> 2526</span>&#160;        <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a>(RI).<a class="code" href="classllvm_1_1IRBuilderBase.html#ab5c6751768e157a3cb89753e39b07e01">CreateLifetimeEnd</a>(AI, AllocaSize);</div>
<div class="line"><a name="l02527"></a><span class="lineno"> 2527</span>&#160;      }</div>
<div class="line"><a name="l02528"></a><span class="lineno"> 2528</span>&#160;    }</div>
<div class="line"><a name="l02529"></a><span class="lineno"> 2529</span>&#160;  }</div>
<div class="line"><a name="l02530"></a><span class="lineno"> 2530</span>&#160; </div>
<div class="line"><a name="l02531"></a><span class="lineno"> 2531</span>&#160;  <span class="comment">// If the inlined code contained dynamic alloca instructions, wrap the inlined</span></div>
<div class="line"><a name="l02532"></a><span class="lineno"> 2532</span>&#160;  <span class="comment">// code with llvm.stacksave/llvm.stackrestore intrinsics.</span></div>
<div class="line"><a name="l02533"></a><span class="lineno"> 2533</span>&#160;  <span class="keywordflow">if</span> (InlinedFunctionInfo.<a class="code" href="structllvm_1_1ClonedCodeInfo.html#a2eea9c7c9cadaa593a7a71c8d44aac25">ContainsDynamicAllocas</a>) {</div>
<div class="line"><a name="l02534"></a><span class="lineno"> 2534</span>&#160;    <a class="code" href="classllvm_1_1Module.html">Module</a> *<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a> = Caller-&gt;getParent();</div>
<div class="line"><a name="l02535"></a><span class="lineno"> 2535</span>&#160;    <span class="comment">// Get the two intrinsics we care about.</span></div>
<div class="line"><a name="l02536"></a><span class="lineno"> 2536</span>&#160;    <a class="code" href="classllvm_1_1Function.html">Function</a> *StackSave = <a class="code" href="namespacellvm_1_1Intrinsic.html#aefa39f6b622360ce4e947feb9f671b73">Intrinsic::getDeclaration</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>, Intrinsic::stacksave);</div>
<div class="line"><a name="l02537"></a><span class="lineno"> 2537</span>&#160;    <a class="code" href="classllvm_1_1Function.html">Function</a> *StackRestore=<a class="code" href="namespacellvm_1_1Intrinsic.html#aefa39f6b622360ce4e947feb9f671b73">Intrinsic::getDeclaration</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>,Intrinsic::stackrestore);</div>
<div class="line"><a name="l02538"></a><span class="lineno"> 2538</span>&#160; </div>
<div class="line"><a name="l02539"></a><span class="lineno"> 2539</span>&#160;    <span class="comment">// Insert the llvm.stacksave.</span></div>
<div class="line"><a name="l02540"></a><span class="lineno"> 2540</span>&#160;    <a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *SavedPtr = <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a>(&amp;*FirstNewBlock, FirstNewBlock-&gt;begin())</div>
<div class="line"><a name="l02541"></a><span class="lineno"> 2541</span>&#160;                             .<a class="code" href="classllvm_1_1IRBuilderBase.html#a31c5c58143c6e9da9c544a7afcba2710">CreateCall</a>(StackSave, {}, <span class="stringliteral">&quot;savedstack&quot;</span>);</div>
<div class="line"><a name="l02542"></a><span class="lineno"> 2542</span>&#160; </div>
<div class="line"><a name="l02543"></a><span class="lineno"> 2543</span>&#160;    <span class="comment">// Insert a call to llvm.stackrestore before any return instructions in the</span></div>
<div class="line"><a name="l02544"></a><span class="lineno"> 2544</span>&#160;    <span class="comment">// inlined function.</span></div>
<div class="line"><a name="l02545"></a><span class="lineno"> 2545</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1ReturnInst.html">ReturnInst</a> *RI : Returns) {</div>
<div class="line"><a name="l02546"></a><span class="lineno"> 2546</span>&#160;      <span class="comment">// Don&#39;t insert llvm.stackrestore calls between a musttail or deoptimize</span></div>
<div class="line"><a name="l02547"></a><span class="lineno"> 2547</span>&#160;      <span class="comment">// call and a return.  The return will restore the stack pointer.</span></div>
<div class="line"><a name="l02548"></a><span class="lineno"> 2548</span>&#160;      <span class="keywordflow">if</span> (InlinedMustTailCalls &amp;&amp; RI-&gt;<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>()-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#ad7038933b96247814b611635abb9686c">getTerminatingMustTailCall</a>())</div>
<div class="line"><a name="l02549"></a><span class="lineno"> 2549</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02550"></a><span class="lineno"> 2550</span>&#160;      <span class="keywordflow">if</span> (InlinedDeoptimizeCalls &amp;&amp; RI-&gt;<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>()-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a6796a84f02394ce6ebef227c866cd5eb">getTerminatingDeoptimizeCall</a>())</div>
<div class="line"><a name="l02551"></a><span class="lineno"> 2551</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02552"></a><span class="lineno"> 2552</span>&#160;      <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a>(RI).<a class="code" href="classllvm_1_1IRBuilderBase.html#a31c5c58143c6e9da9c544a7afcba2710">CreateCall</a>(StackRestore, SavedPtr);</div>
<div class="line"><a name="l02553"></a><span class="lineno"> 2553</span>&#160;    }</div>
<div class="line"><a name="l02554"></a><span class="lineno"> 2554</span>&#160;  }</div>
<div class="line"><a name="l02555"></a><span class="lineno"> 2555</span>&#160; </div>
<div class="line"><a name="l02556"></a><span class="lineno"> 2556</span>&#160;  <span class="comment">// If we are inlining for an invoke instruction, we must make sure to rewrite</span></div>
<div class="line"><a name="l02557"></a><span class="lineno"> 2557</span>&#160;  <span class="comment">// any call instructions into invoke instructions.  This is sensitive to which</span></div>
<div class="line"><a name="l02558"></a><span class="lineno"> 2558</span>&#160;  <span class="comment">// funclet pads were top-level in the inlinee, so must be done before</span></div>
<div class="line"><a name="l02559"></a><span class="lineno"> 2559</span>&#160;  <span class="comment">// rewriting the &quot;parent pad&quot; links.</span></div>
<div class="line"><a name="l02560"></a><span class="lineno"> 2560</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *II = dyn_cast&lt;InvokeInst&gt;(&amp;CB)) {</div>
<div class="line"><a name="l02561"></a><span class="lineno"> 2561</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *UnwindDest = II-&gt;<a class="code" href="classllvm_1_1InvokeInst.html#a5ba379c3251d99b4c23c8f2e6abe4a6c">getUnwindDest</a>();</div>
<div class="line"><a name="l02562"></a><span class="lineno"> 2562</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *FirstNonPHI = UnwindDest-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a46ef6115027606b67adcf4d28f3dac17">getFirstNonPHI</a>();</div>
<div class="line"><a name="l02563"></a><span class="lineno"> 2563</span>&#160;    <span class="keywordflow">if</span> (isa&lt;LandingPadInst&gt;(FirstNonPHI)) {</div>
<div class="line"><a name="l02564"></a><span class="lineno"> 2564</span>&#160;      <a class="code" href="InlineFunction_8cpp.html#a4cbd6aad6f6b93f79dc435feab77550e">HandleInlinedLandingPad</a>(II, &amp;*FirstNewBlock, InlinedFunctionInfo);</div>
<div class="line"><a name="l02565"></a><span class="lineno"> 2565</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02566"></a><span class="lineno"> 2566</span>&#160;      <a class="code" href="InlineFunction_8cpp.html#aac69c9cf4e552a52d5065e94dc023f82">HandleInlinedEHPad</a>(II, &amp;*FirstNewBlock, InlinedFunctionInfo);</div>
<div class="line"><a name="l02567"></a><span class="lineno"> 2567</span>&#160;    }</div>
<div class="line"><a name="l02568"></a><span class="lineno"> 2568</span>&#160;  }</div>
<div class="line"><a name="l02569"></a><span class="lineno"> 2569</span>&#160; </div>
<div class="line"><a name="l02570"></a><span class="lineno"> 2570</span>&#160;  <span class="comment">// Update the lexical scopes of the new funclets and callsites.</span></div>
<div class="line"><a name="l02571"></a><span class="lineno"> 2571</span>&#160;  <span class="comment">// Anything that had &#39;none&#39; as its parent is now nested inside the callsite&#39;s</span></div>
<div class="line"><a name="l02572"></a><span class="lineno"> 2572</span>&#160;  <span class="comment">// EHPad.</span></div>
<div class="line"><a name="l02573"></a><span class="lineno"> 2573</span>&#160;  <span class="keywordflow">if</span> (CallSiteEHPad) {</div>
<div class="line"><a name="l02574"></a><span class="lineno"> 2574</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Function.html#a19595c245bd2e3eefa93ce22db5ad15f">Function::iterator</a> <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> = FirstNewBlock-&gt;getIterator(),</div>
<div class="line"><a name="l02575"></a><span class="lineno"> 2575</span>&#160;                            <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = Caller-&gt;end();</div>
<div class="line"><a name="l02576"></a><span class="lineno"> 2576</span>&#160;         <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> != <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>; ++<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) {</div>
<div class="line"><a name="l02577"></a><span class="lineno"> 2577</span>&#160;      <span class="comment">// Add bundle operands to inlined call sites.</span></div>
<div class="line"><a name="l02578"></a><span class="lineno"> 2578</span>&#160;      <a class="code" href="InlineFunction_8cpp.html#af939eab05ffe67221645aab1342156b2">PropagateOperandBundles</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, CallSiteEHPad);</div>
<div class="line"><a name="l02579"></a><span class="lineno"> 2579</span>&#160; </div>
<div class="line"><a name="l02580"></a><span class="lineno"> 2580</span>&#160;      <span class="comment">// It is problematic if the inlinee has a cleanupret which unwinds to</span></div>
<div class="line"><a name="l02581"></a><span class="lineno"> 2581</span>&#160;      <span class="comment">// caller and we inline it into a call site which doesn&#39;t unwind but into</span></div>
<div class="line"><a name="l02582"></a><span class="lineno"> 2582</span>&#160;      <span class="comment">// an EH pad that does.  Such an edge must be dynamically unreachable.</span></div>
<div class="line"><a name="l02583"></a><span class="lineno"> 2583</span>&#160;      <span class="comment">// As such, we replace the cleanupret with unreachable.</span></div>
<div class="line"><a name="l02584"></a><span class="lineno"> 2584</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> *CleanupRet = dyn_cast&lt;CleanupReturnInst&gt;(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getTerminator()))</div>
<div class="line"><a name="l02585"></a><span class="lineno"> 2585</span>&#160;        <span class="keywordflow">if</span> (CleanupRet-&gt;unwindsToCaller() &amp;&amp; EHPadForCallUnwindsLocally)</div>
<div class="line"><a name="l02586"></a><span class="lineno"> 2586</span>&#160;          <a class="code" href="namespacellvm.html#a97370114df349e0996f133e3402c1595">changeToUnreachable</a>(CleanupRet);</div>
<div class="line"><a name="l02587"></a><span class="lineno"> 2587</span>&#160; </div>
<div class="line"><a name="l02588"></a><span class="lineno"> 2588</span>&#160;      <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getFirstNonPHI();</div>
<div class="line"><a name="l02589"></a><span class="lineno"> 2589</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;isEHPad())</div>
<div class="line"><a name="l02590"></a><span class="lineno"> 2590</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02591"></a><span class="lineno"> 2591</span>&#160; </div>
<div class="line"><a name="l02592"></a><span class="lineno"> 2592</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> *CatchSwitch = dyn_cast&lt;CatchSwitchInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l02593"></a><span class="lineno"> 2593</span>&#160;        <span class="keywordflow">if</span> (isa&lt;ConstantTokenNone&gt;(CatchSwitch-&gt;getParentPad()))</div>
<div class="line"><a name="l02594"></a><span class="lineno"> 2594</span>&#160;          CatchSwitch-&gt;setParentPad(CallSiteEHPad);</div>
<div class="line"><a name="l02595"></a><span class="lineno"> 2595</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02596"></a><span class="lineno"> 2596</span>&#160;        <span class="keyword">auto</span> *FPI = cast&lt;FuncletPadInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l02597"></a><span class="lineno"> 2597</span>&#160;        <span class="keywordflow">if</span> (isa&lt;ConstantTokenNone&gt;(FPI-&gt;getParentPad()))</div>
<div class="line"><a name="l02598"></a><span class="lineno"> 2598</span>&#160;          FPI-&gt;setParentPad(CallSiteEHPad);</div>
<div class="line"><a name="l02599"></a><span class="lineno"> 2599</span>&#160;      }</div>
<div class="line"><a name="l02600"></a><span class="lineno"> 2600</span>&#160;    }</div>
<div class="line"><a name="l02601"></a><span class="lineno"> 2601</span>&#160;  }</div>
<div class="line"><a name="l02602"></a><span class="lineno"> 2602</span>&#160; </div>
<div class="line"><a name="l02603"></a><span class="lineno"> 2603</span>&#160;  <span class="keywordflow">if</span> (InlinedDeoptimizeCalls) {</div>
<div class="line"><a name="l02604"></a><span class="lineno"> 2604</span>&#160;    <span class="comment">// We need to at least remove the deoptimizing returns from the Return set,</span></div>
<div class="line"><a name="l02605"></a><span class="lineno"> 2605</span>&#160;    <span class="comment">// so that the control flow from those returns does not get merged into the</span></div>
<div class="line"><a name="l02606"></a><span class="lineno"> 2606</span>&#160;    <span class="comment">// caller (but terminate it instead).  If the caller&#39;s return type does not</span></div>
<div class="line"><a name="l02607"></a><span class="lineno"> 2607</span>&#160;    <span class="comment">// match the callee&#39;s return type, we also need to change the return type of</span></div>
<div class="line"><a name="l02608"></a><span class="lineno"> 2608</span>&#160;    <span class="comment">// the intrinsic.</span></div>
<div class="line"><a name="l02609"></a><span class="lineno"> 2609</span>&#160;    <span class="keywordflow">if</span> (Caller-&gt;getReturnType() == CB.<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()) {</div>
<div class="line"><a name="l02610"></a><span class="lineno"> 2610</span>&#160;      <a class="code" href="namespacellvm.html#ac9a7de5a04920954ac964059cfc428ad">llvm::erase_if</a>(Returns, [](<a class="code" href="classllvm_1_1ReturnInst.html">ReturnInst</a> *RI) {</div>
<div class="line"><a name="l02611"></a><span class="lineno"> 2611</span>&#160;        <span class="keywordflow">return</span> RI-&gt;<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>()-&gt;getTerminatingDeoptimizeCall() != <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02612"></a><span class="lineno"> 2612</span>&#160;      });</div>
<div class="line"><a name="l02613"></a><span class="lineno"> 2613</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02614"></a><span class="lineno"> 2614</span>&#160;      <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;ReturnInst *, 8&gt;</a> NormalReturns;</div>
<div class="line"><a name="l02615"></a><span class="lineno"> 2615</span>&#160;      <a class="code" href="classllvm_1_1Function.html">Function</a> *NewDeoptIntrinsic = <a class="code" href="namespacellvm_1_1Intrinsic.html#aefa39f6b622360ce4e947feb9f671b73">Intrinsic::getDeclaration</a>(</div>
<div class="line"><a name="l02616"></a><span class="lineno"> 2616</span>&#160;          Caller-&gt;getParent(), Intrinsic::experimental_deoptimize,</div>
<div class="line"><a name="l02617"></a><span class="lineno"> 2617</span>&#160;          {Caller-&gt;getReturnType()});</div>
<div class="line"><a name="l02618"></a><span class="lineno"> 2618</span>&#160; </div>
<div class="line"><a name="l02619"></a><span class="lineno"> 2619</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1ReturnInst.html">ReturnInst</a> *RI : Returns) {</div>
<div class="line"><a name="l02620"></a><span class="lineno"> 2620</span>&#160;        <a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *DeoptCall = RI-&gt;<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>()-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a6796a84f02394ce6ebef227c866cd5eb">getTerminatingDeoptimizeCall</a>();</div>
<div class="line"><a name="l02621"></a><span class="lineno"> 2621</span>&#160;        <span class="keywordflow">if</span> (!DeoptCall) {</div>
<div class="line"><a name="l02622"></a><span class="lineno"> 2622</span>&#160;          NormalReturns.push_back(RI);</div>
<div class="line"><a name="l02623"></a><span class="lineno"> 2623</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02624"></a><span class="lineno"> 2624</span>&#160;        }</div>
<div class="line"><a name="l02625"></a><span class="lineno"> 2625</span>&#160; </div>
<div class="line"><a name="l02626"></a><span class="lineno"> 2626</span>&#160;        <span class="comment">// The calling convention on the deoptimize call itself may be bogus,</span></div>
<div class="line"><a name="l02627"></a><span class="lineno"> 2627</span>&#160;        <span class="comment">// since the code we&#39;re inlining may have undefined behavior (and may</span></div>
<div class="line"><a name="l02628"></a><span class="lineno"> 2628</span>&#160;        <span class="comment">// never actually execute at runtime); but all</span></div>
<div class="line"><a name="l02629"></a><span class="lineno"> 2629</span>&#160;        <span class="comment">// @llvm.experimental.deoptimize declarations have to have the same</span></div>
<div class="line"><a name="l02630"></a><span class="lineno"> 2630</span>&#160;        <span class="comment">// calling convention in a well-formed module.</span></div>
<div class="line"><a name="l02631"></a><span class="lineno"> 2631</span>&#160;        <span class="keyword">auto</span> <a class="code" href="namespacellvm_1_1ms__demangle.html#a1c7534e329bd2e3760c37d8123909e63">CallingConv</a> = DeoptCall-&gt;<a class="code" href="classllvm_1_1CallBase.html#a83b8c9e572130f403445c0b0f69b837c">getCalledFunction</a>()-&gt;<a class="code" href="classllvm_1_1Function.html#a5f494edc0a569c7fc9ff4181243be1ed">getCallingConv</a>();</div>
<div class="line"><a name="l02632"></a><span class="lineno"> 2632</span>&#160;        NewDeoptIntrinsic-&gt;<a class="code" href="classllvm_1_1Function.html#ae6db8746934e6feae3649a8709fce3cc">setCallingConv</a>(<a class="code" href="namespacellvm_1_1ms__demangle.html#a1c7534e329bd2e3760c37d8123909e63">CallingConv</a>);</div>
<div class="line"><a name="l02633"></a><span class="lineno"> 2633</span>&#160;        <span class="keyword">auto</span> *CurBB = RI-&gt;<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>();</div>
<div class="line"><a name="l02634"></a><span class="lineno"> 2634</span>&#160;        RI-&gt;<a class="code" href="classllvm_1_1Instruction.html#ae6b978645b8ac72d1a35e1298ffdd4f0">eraseFromParent</a>();</div>
<div class="line"><a name="l02635"></a><span class="lineno"> 2635</span>&#160; </div>
<div class="line"><a name="l02636"></a><span class="lineno"> 2636</span>&#160;        <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Value *, 4&gt;</a> CallArgs(DeoptCall-&gt;<a class="code" href="classllvm_1_1CallBase.html#ac63dbb4994494c46f025715272cdb81e">args</a>());</div>
<div class="line"><a name="l02637"></a><span class="lineno"> 2637</span>&#160; </div>
<div class="line"><a name="l02638"></a><span class="lineno"> 2638</span>&#160;        <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;OperandBundleDef, 1&gt;</a> OpBundles;</div>
<div class="line"><a name="l02639"></a><span class="lineno"> 2639</span>&#160;        DeoptCall-&gt;<a class="code" href="classllvm_1_1CallBase.html#a19263fff7f5b3a9d22b48151fa0d85d0">getOperandBundlesAsDefs</a>(OpBundles);</div>
<div class="line"><a name="l02640"></a><span class="lineno"> 2640</span>&#160;        <span class="keyword">auto</span> DeoptAttributes = DeoptCall-&gt;<a class="code" href="classllvm_1_1CallBase.html#ae0c55761fce39dd71617690b04385193">getAttributes</a>();</div>
<div class="line"><a name="l02641"></a><span class="lineno"> 2641</span>&#160;        DeoptCall-&gt;<a class="code" href="classllvm_1_1Instruction.html#ae6b978645b8ac72d1a35e1298ffdd4f0">eraseFromParent</a>();</div>
<div class="line"><a name="l02642"></a><span class="lineno"> 2642</span>&#160;        <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!OpBundles.empty() &amp;&amp;</div>
<div class="line"><a name="l02643"></a><span class="lineno"> 2643</span>&#160;               <span class="stringliteral">&quot;Expected at least the deopt operand bundle&quot;</span>);</div>
<div class="line"><a name="l02644"></a><span class="lineno"> 2644</span>&#160; </div>
<div class="line"><a name="l02645"></a><span class="lineno"> 2645</span>&#160;        <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>(CurBB);</div>
<div class="line"><a name="l02646"></a><span class="lineno"> 2646</span>&#160;        <a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *NewDeoptCall =</div>
<div class="line"><a name="l02647"></a><span class="lineno"> 2647</span>&#160;            <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCall(NewDeoptIntrinsic, CallArgs, OpBundles);</div>
<div class="line"><a name="l02648"></a><span class="lineno"> 2648</span>&#160;        NewDeoptCall-&gt;<a class="code" href="classllvm_1_1CallBase.html#a0851b4de29686e9c3918449b054cfada">setCallingConv</a>(<a class="code" href="namespacellvm_1_1ms__demangle.html#a1c7534e329bd2e3760c37d8123909e63">CallingConv</a>);</div>
<div class="line"><a name="l02649"></a><span class="lineno"> 2649</span>&#160;        NewDeoptCall-&gt;<a class="code" href="classllvm_1_1CallBase.html#a9da3b29e8e71b9be4645874e1721207a">setAttributes</a>(DeoptAttributes);</div>
<div class="line"><a name="l02650"></a><span class="lineno"> 2650</span>&#160;        <span class="keywordflow">if</span> (NewDeoptCall-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#ae8eaa0b4eeac52a2b2282cb1bfd981ae">isVoidTy</a>())</div>
<div class="line"><a name="l02651"></a><span class="lineno"> 2651</span>&#160;          <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateRetVoid();</div>
<div class="line"><a name="l02652"></a><span class="lineno"> 2652</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l02653"></a><span class="lineno"> 2653</span>&#160;          <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateRet(NewDeoptCall);</div>
<div class="line"><a name="l02654"></a><span class="lineno"> 2654</span>&#160;      }</div>
<div class="line"><a name="l02655"></a><span class="lineno"> 2655</span>&#160; </div>
<div class="line"><a name="l02656"></a><span class="lineno"> 2656</span>&#160;      <span class="comment">// Leave behind the normal returns so we can merge control flow.</span></div>
<div class="line"><a name="l02657"></a><span class="lineno"> 2657</span>&#160;      <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(Returns, NormalReturns);</div>
<div class="line"><a name="l02658"></a><span class="lineno"> 2658</span>&#160;    }</div>
<div class="line"><a name="l02659"></a><span class="lineno"> 2659</span>&#160;  }</div>
<div class="line"><a name="l02660"></a><span class="lineno"> 2660</span>&#160; </div>
<div class="line"><a name="l02661"></a><span class="lineno"> 2661</span>&#160;  <span class="comment">// Handle any inlined musttail call sites.  In order for a new call site to be</span></div>
<div class="line"><a name="l02662"></a><span class="lineno"> 2662</span>&#160;  <span class="comment">// musttail, the source of the clone and the inlined call site must have been</span></div>
<div class="line"><a name="l02663"></a><span class="lineno"> 2663</span>&#160;  <span class="comment">// musttail.  Therefore it&#39;s safe to return without merging control into the</span></div>
<div class="line"><a name="l02664"></a><span class="lineno"> 2664</span>&#160;  <span class="comment">// phi below.</span></div>
<div class="line"><a name="l02665"></a><span class="lineno"> 2665</span>&#160;  <span class="keywordflow">if</span> (InlinedMustTailCalls) {</div>
<div class="line"><a name="l02666"></a><span class="lineno"> 2666</span>&#160;    <span class="comment">// Check if we need to bitcast the result of any musttail calls.</span></div>
<div class="line"><a name="l02667"></a><span class="lineno"> 2667</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *NewRetTy = Caller-&gt;getReturnType();</div>
<div class="line"><a name="l02668"></a><span class="lineno"> 2668</span>&#160;    <span class="keywordtype">bool</span> NeedBitCast = !CB.<a class="code" href="classllvm_1_1Value.html#a9d7de807ebdfe1819df3ff6cb0f16158">use_empty</a>() &amp;&amp; CB.<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>() != NewRetTy;</div>
<div class="line"><a name="l02669"></a><span class="lineno"> 2669</span>&#160; </div>
<div class="line"><a name="l02670"></a><span class="lineno"> 2670</span>&#160;    <span class="comment">// Handle the returns preceded by musttail calls separately.</span></div>
<div class="line"><a name="l02671"></a><span class="lineno"> 2671</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;ReturnInst *, 8&gt;</a> NormalReturns;</div>
<div class="line"><a name="l02672"></a><span class="lineno"> 2672</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1ReturnInst.html">ReturnInst</a> *RI : Returns) {</div>
<div class="line"><a name="l02673"></a><span class="lineno"> 2673</span>&#160;      <a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *ReturnedMustTail =</div>
<div class="line"><a name="l02674"></a><span class="lineno"> 2674</span>&#160;          RI-&gt;<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>()-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#ad7038933b96247814b611635abb9686c">getTerminatingMustTailCall</a>();</div>
<div class="line"><a name="l02675"></a><span class="lineno"> 2675</span>&#160;      <span class="keywordflow">if</span> (!ReturnedMustTail) {</div>
<div class="line"><a name="l02676"></a><span class="lineno"> 2676</span>&#160;        NormalReturns.push_back(RI);</div>
<div class="line"><a name="l02677"></a><span class="lineno"> 2677</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02678"></a><span class="lineno"> 2678</span>&#160;      }</div>
<div class="line"><a name="l02679"></a><span class="lineno"> 2679</span>&#160;      <span class="keywordflow">if</span> (!NeedBitCast)</div>
<div class="line"><a name="l02680"></a><span class="lineno"> 2680</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02681"></a><span class="lineno"> 2681</span>&#160; </div>
<div class="line"><a name="l02682"></a><span class="lineno"> 2682</span>&#160;      <span class="comment">// Delete the old return and any preceding bitcast.</span></div>
<div class="line"><a name="l02683"></a><span class="lineno"> 2683</span>&#160;      <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *CurBB = RI-&gt;<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>();</div>
<div class="line"><a name="l02684"></a><span class="lineno"> 2684</span>&#160;      <span class="keyword">auto</span> *OldCast = dyn_cast_or_null&lt;BitCastInst&gt;(RI-&gt;getReturnValue());</div>
<div class="line"><a name="l02685"></a><span class="lineno"> 2685</span>&#160;      RI-&gt;<a class="code" href="classllvm_1_1Instruction.html#ae6b978645b8ac72d1a35e1298ffdd4f0">eraseFromParent</a>();</div>
<div class="line"><a name="l02686"></a><span class="lineno"> 2686</span>&#160;      <span class="keywordflow">if</span> (OldCast)</div>
<div class="line"><a name="l02687"></a><span class="lineno"> 2687</span>&#160;        OldCast-&gt;eraseFromParent();</div>
<div class="line"><a name="l02688"></a><span class="lineno"> 2688</span>&#160; </div>
<div class="line"><a name="l02689"></a><span class="lineno"> 2689</span>&#160;      <span class="comment">// Insert a new bitcast and return with the right type.</span></div>
<div class="line"><a name="l02690"></a><span class="lineno"> 2690</span>&#160;      <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>(CurBB);</div>
<div class="line"><a name="l02691"></a><span class="lineno"> 2691</span>&#160;      <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateRet(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBitCast(ReturnedMustTail, NewRetTy));</div>
<div class="line"><a name="l02692"></a><span class="lineno"> 2692</span>&#160;    }</div>
<div class="line"><a name="l02693"></a><span class="lineno"> 2693</span>&#160; </div>
<div class="line"><a name="l02694"></a><span class="lineno"> 2694</span>&#160;    <span class="comment">// Leave behind the normal returns so we can merge control flow.</span></div>
<div class="line"><a name="l02695"></a><span class="lineno"> 2695</span>&#160;    <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(Returns, NormalReturns);</div>
<div class="line"><a name="l02696"></a><span class="lineno"> 2696</span>&#160;  }</div>
<div class="line"><a name="l02697"></a><span class="lineno"> 2697</span>&#160; </div>
<div class="line"><a name="l02698"></a><span class="lineno"> 2698</span>&#160;  <span class="comment">// Now that all of the transforms on the inlined code have taken place but</span></div>
<div class="line"><a name="l02699"></a><span class="lineno"> 2699</span>&#160;  <span class="comment">// before we splice the inlined code into the CFG and lose track of which</span></div>
<div class="line"><a name="l02700"></a><span class="lineno"> 2700</span>&#160;  <span class="comment">// blocks were actually inlined, collect the call sites. We only do this if</span></div>
<div class="line"><a name="l02701"></a><span class="lineno"> 2701</span>&#160;  <span class="comment">// call graph updates weren&#39;t requested, as those provide value handle based</span></div>
<div class="line"><a name="l02702"></a><span class="lineno"> 2702</span>&#160;  <span class="comment">// tracking of inlined call sites instead. Calls to intrinsics are not</span></div>
<div class="line"><a name="l02703"></a><span class="lineno"> 2703</span>&#160;  <span class="comment">// collected because they are not inlineable.</span></div>
<div class="line"><a name="l02704"></a><span class="lineno"> 2704</span>&#160;  <span class="keywordflow">if</span> (InlinedFunctionInfo.<a class="code" href="structllvm_1_1ClonedCodeInfo.html#a6bbe5e652464ac9213907e3446874900">ContainsCalls</a> &amp;&amp; !IFI.<a class="code" href="classllvm_1_1InlineFunctionInfo.html#ac3ef4b4fdcc6fc9aba65a545c213d76a">CG</a>) {</div>
<div class="line"><a name="l02705"></a><span class="lineno"> 2705</span>&#160;    <span class="comment">// Otherwise just collect the raw call sites that were inlined.</span></div>
<div class="line"><a name="l02706"></a><span class="lineno"> 2706</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> &amp;NewBB :</div>
<div class="line"><a name="l02707"></a><span class="lineno"> 2707</span>&#160;         <a class="code" href="namespacellvm.html#ad1a91b49e0c092818a0b82f6cc130a1b">make_range</a>(FirstNewBlock-&gt;getIterator(), Caller-&gt;end()))</div>
<div class="line"><a name="l02708"></a><span class="lineno"> 2708</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : NewBB)</div>
<div class="line"><a name="l02709"></a><span class="lineno"> 2709</span>&#160;        <span class="keywordflow">if</span> (<span class="keyword">auto</span> *CB = dyn_cast&lt;CallBase&gt;(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l02710"></a><span class="lineno"> 2710</span>&#160;          <span class="keywordflow">if</span> (!(CB-&gt;<a class="code" href="classllvm_1_1CallBase.html#a83b8c9e572130f403445c0b0f69b837c">getCalledFunction</a>() &amp;&amp;</div>
<div class="line"><a name="l02711"></a><span class="lineno"> 2711</span>&#160;                CB-&gt;<a class="code" href="classllvm_1_1CallBase.html#a83b8c9e572130f403445c0b0f69b837c">getCalledFunction</a>()-&gt;<a class="code" href="classllvm_1_1Function.html#a900a32da3983469187b1848189681705">isIntrinsic</a>()))</div>
<div class="line"><a name="l02712"></a><span class="lineno"> 2712</span>&#160;            IFI.<a class="code" href="classllvm_1_1InlineFunctionInfo.html#afee77c39305987451e9495b749863d07">InlinedCallSites</a>.push_back(CB);</div>
<div class="line"><a name="l02713"></a><span class="lineno"> 2713</span>&#160;  }</div>
<div class="line"><a name="l02714"></a><span class="lineno"> 2714</span>&#160; </div>
<div class="line"><a name="l02715"></a><span class="lineno"> 2715</span>&#160;  <span class="comment">// If we cloned in _exactly one_ basic block, and if that block ends in a</span></div>
<div class="line"><a name="l02716"></a><span class="lineno"> 2716</span>&#160;  <span class="comment">// return instruction, we splice the body of the inlined callee directly into</span></div>
<div class="line"><a name="l02717"></a><span class="lineno"> 2717</span>&#160;  <span class="comment">// the calling basic block.</span></div>
<div class="line"><a name="l02718"></a><span class="lineno"> 2718</span>&#160;  <span class="keywordflow">if</span> (Returns.size() == 1 &amp;&amp; std::distance(FirstNewBlock, Caller-&gt;end()) == 1) {</div>
<div class="line"><a name="l02719"></a><span class="lineno"> 2719</span>&#160;    <span class="comment">// Move all of the instructions right before the call.</span></div>
<div class="line"><a name="l02720"></a><span class="lineno"> 2720</span>&#160;    OrigBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#af29f89e91dfd0ae90950f0b1bf49798d">splice</a>(CB.<a class="code" href="classllvm_1_1ilist__node__impl.html#af719fc783be6589465137d997701a432">getIterator</a>(), &amp;*FirstNewBlock, FirstNewBlock-&gt;begin(),</div>
<div class="line"><a name="l02721"></a><span class="lineno"> 2721</span>&#160;                   FirstNewBlock-&gt;end());</div>
<div class="line"><a name="l02722"></a><span class="lineno"> 2722</span>&#160;    <span class="comment">// Remove the cloned basic block.</span></div>
<div class="line"><a name="l02723"></a><span class="lineno"> 2723</span>&#160;    Caller-&gt;back().eraseFromParent();</div>
<div class="line"><a name="l02724"></a><span class="lineno"> 2724</span>&#160; </div>
<div class="line"><a name="l02725"></a><span class="lineno"> 2725</span>&#160;    <span class="comment">// If the call site was an invoke instruction, add a branch to the normal</span></div>
<div class="line"><a name="l02726"></a><span class="lineno"> 2726</span>&#160;    <span class="comment">// destination.</span></div>
<div class="line"><a name="l02727"></a><span class="lineno"> 2727</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1InvokeInst.html">InvokeInst</a> *II = dyn_cast&lt;InvokeInst&gt;(&amp;CB)) {</div>
<div class="line"><a name="l02728"></a><span class="lineno"> 2728</span>&#160;      <a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a> *NewBr = <a class="code" href="classllvm_1_1BranchInst.html#a38df51256d4b415b6a817b5e1c6d4d36">BranchInst::Create</a>(II-&gt;<a class="code" href="classllvm_1_1InvokeInst.html#a100bd3005ea84bf47f3b4021e8022633">getNormalDest</a>(), &amp;CB);</div>
<div class="line"><a name="l02729"></a><span class="lineno"> 2729</span>&#160;      NewBr-&gt;<a class="code" href="classllvm_1_1Instruction.html#ae8f5bf5cc06f696b52c709677df00fbf">setDebugLoc</a>(Returns[0]-&gt;<a class="code" href="MachineInstrBundle_8cpp.html#af44c9b089359803924e0b92bea3b6d03">getDebugLoc</a>());</div>
<div class="line"><a name="l02730"></a><span class="lineno"> 2730</span>&#160;    }</div>
<div class="line"><a name="l02731"></a><span class="lineno"> 2731</span>&#160; </div>
<div class="line"><a name="l02732"></a><span class="lineno"> 2732</span>&#160;    <span class="comment">// If the return instruction returned a value, replace uses of the call with</span></div>
<div class="line"><a name="l02733"></a><span class="lineno"> 2733</span>&#160;    <span class="comment">// uses of the returned value.</span></div>
<div class="line"><a name="l02734"></a><span class="lineno"> 2734</span>&#160;    <span class="keywordflow">if</span> (!CB.<a class="code" href="classllvm_1_1Value.html#a9d7de807ebdfe1819df3ff6cb0f16158">use_empty</a>()) {</div>
<div class="line"><a name="l02735"></a><span class="lineno"> 2735</span>&#160;      <a class="code" href="classllvm_1_1ReturnInst.html">ReturnInst</a> *R = Returns[0];</div>
<div class="line"><a name="l02736"></a><span class="lineno"> 2736</span>&#160;      <span class="keywordflow">if</span> (&amp;CB == R-&gt;getReturnValue())</div>
<div class="line"><a name="l02737"></a><span class="lineno"> 2737</span>&#160;        CB.<a class="code" href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">replaceAllUsesWith</a>(<a class="code" href="classllvm_1_1UndefValue.html#a4ae5ff22b700a42bcc5d889233721335">UndefValue::get</a>(CB.<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()));</div>
<div class="line"><a name="l02738"></a><span class="lineno"> 2738</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l02739"></a><span class="lineno"> 2739</span>&#160;        CB.<a class="code" href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">replaceAllUsesWith</a>(R-&gt;getReturnValue());</div>
<div class="line"><a name="l02740"></a><span class="lineno"> 2740</span>&#160;    }</div>
<div class="line"><a name="l02741"></a><span class="lineno"> 2741</span>&#160;    <span class="comment">// Since we are now done with the Call/Invoke, we can delete it.</span></div>
<div class="line"><a name="l02742"></a><span class="lineno"> 2742</span>&#160;    CB.<a class="code" href="classllvm_1_1Instruction.html#ae6b978645b8ac72d1a35e1298ffdd4f0">eraseFromParent</a>();</div>
<div class="line"><a name="l02743"></a><span class="lineno"> 2743</span>&#160; </div>
<div class="line"><a name="l02744"></a><span class="lineno"> 2744</span>&#160;    <span class="comment">// Since we are now done with the return instruction, delete it also.</span></div>
<div class="line"><a name="l02745"></a><span class="lineno"> 2745</span>&#160;    Returns[0]-&gt;eraseFromParent();</div>
<div class="line"><a name="l02746"></a><span class="lineno"> 2746</span>&#160; </div>
<div class="line"><a name="l02747"></a><span class="lineno"> 2747</span>&#160;    <span class="keywordflow">if</span> (MergeAttributes)</div>
<div class="line"><a name="l02748"></a><span class="lineno"> 2748</span>&#160;      <a class="code" href="namespacellvm_1_1AttributeFuncs.html#ae05b3471aef6ffe376ceef99af9b4709">AttributeFuncs::mergeAttributesForInlining</a>(*Caller, *CalledFunc);</div>
<div class="line"><a name="l02749"></a><span class="lineno"> 2749</span>&#160; </div>
<div class="line"><a name="l02750"></a><span class="lineno"> 2750</span>&#160;    <span class="comment">// We are now done with the inlining.</span></div>
<div class="line"><a name="l02751"></a><span class="lineno"> 2751</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1InlineResult.html#a364fcb5fb838e7ca83b9fc379bcb4a0a">InlineResult::success</a>();</div>
<div class="line"><a name="l02752"></a><span class="lineno"> 2752</span>&#160;  }</div>
<div class="line"><a name="l02753"></a><span class="lineno"> 2753</span>&#160; </div>
<div class="line"><a name="l02754"></a><span class="lineno"> 2754</span>&#160;  <span class="comment">// Otherwise, we have the normal case, of more than one block to inline or</span></div>
<div class="line"><a name="l02755"></a><span class="lineno"> 2755</span>&#160;  <span class="comment">// multiple return sites.</span></div>
<div class="line"><a name="l02756"></a><span class="lineno"> 2756</span>&#160; </div>
<div class="line"><a name="l02757"></a><span class="lineno"> 2757</span>&#160;  <span class="comment">// We want to clone the entire callee function into the hole between the</span></div>
<div class="line"><a name="l02758"></a><span class="lineno"> 2758</span>&#160;  <span class="comment">// &quot;starter&quot; and &quot;ender&quot; blocks.  How we accomplish this depends on whether</span></div>
<div class="line"><a name="l02759"></a><span class="lineno"> 2759</span>&#160;  <span class="comment">// this is an invoke instruction or a call instruction.</span></div>
<div class="line"><a name="l02760"></a><span class="lineno"> 2760</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *AfterCallBB;</div>
<div class="line"><a name="l02761"></a><span class="lineno"> 2761</span>&#160;  <a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a> *CreatedBranchToNormalDest = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02762"></a><span class="lineno"> 2762</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1InvokeInst.html">InvokeInst</a> *II = dyn_cast&lt;InvokeInst&gt;(&amp;CB)) {</div>
<div class="line"><a name="l02763"></a><span class="lineno"> 2763</span>&#160; </div>
<div class="line"><a name="l02764"></a><span class="lineno"> 2764</span>&#160;    <span class="comment">// Add an unconditional branch to make this look like the CallInst case...</span></div>
<div class="line"><a name="l02765"></a><span class="lineno"> 2765</span>&#160;    CreatedBranchToNormalDest = <a class="code" href="classllvm_1_1BranchInst.html#a38df51256d4b415b6a817b5e1c6d4d36">BranchInst::Create</a>(II-&gt;<a class="code" href="classllvm_1_1InvokeInst.html#a100bd3005ea84bf47f3b4021e8022633">getNormalDest</a>(), &amp;CB);</div>
<div class="line"><a name="l02766"></a><span class="lineno"> 2766</span>&#160; </div>
<div class="line"><a name="l02767"></a><span class="lineno"> 2767</span>&#160;    <span class="comment">// Split the basic block.  This guarantees that no PHI nodes will have to be</span></div>
<div class="line"><a name="l02768"></a><span class="lineno"> 2768</span>&#160;    <span class="comment">// updated due to new incoming edges, and make the invoke case more</span></div>
<div class="line"><a name="l02769"></a><span class="lineno"> 2769</span>&#160;    <span class="comment">// symmetric to the call case.</span></div>
<div class="line"><a name="l02770"></a><span class="lineno"> 2770</span>&#160;    AfterCallBB =</div>
<div class="line"><a name="l02771"></a><span class="lineno"> 2771</span>&#160;        OrigBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a52c990590792c91dd20b6d45acebe359">splitBasicBlock</a>(CreatedBranchToNormalDest-&gt;<a class="code" href="classllvm_1_1ilist__node__impl.html#af719fc783be6589465137d997701a432">getIterator</a>(),</div>
<div class="line"><a name="l02772"></a><span class="lineno"> 2772</span>&#160;                                CalledFunc-&gt;<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>() + <span class="stringliteral">&quot;.exit&quot;</span>);</div>
<div class="line"><a name="l02773"></a><span class="lineno"> 2773</span>&#160; </div>
<div class="line"><a name="l02774"></a><span class="lineno"> 2774</span>&#160;  } <span class="keywordflow">else</span> { <span class="comment">// It&#39;s a call</span></div>
<div class="line"><a name="l02775"></a><span class="lineno"> 2775</span>&#160;    <span class="comment">// If this is a call instruction, we need to split the basic block that</span></div>
<div class="line"><a name="l02776"></a><span class="lineno"> 2776</span>&#160;    <span class="comment">// the call lives in.</span></div>
<div class="line"><a name="l02777"></a><span class="lineno"> 2777</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l02778"></a><span class="lineno"> 2778</span>&#160;    AfterCallBB = OrigBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a52c990590792c91dd20b6d45acebe359">splitBasicBlock</a>(CB.<a class="code" href="classllvm_1_1ilist__node__impl.html#af719fc783be6589465137d997701a432">getIterator</a>(),</div>
<div class="line"><a name="l02779"></a><span class="lineno"> 2779</span>&#160;                                          CalledFunc-&gt;<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>() + <span class="stringliteral">&quot;.exit&quot;</span>);</div>
<div class="line"><a name="l02780"></a><span class="lineno"> 2780</span>&#160;  }</div>
<div class="line"><a name="l02781"></a><span class="lineno"> 2781</span>&#160; </div>
<div class="line"><a name="l02782"></a><span class="lineno"> 2782</span>&#160;  <span class="keywordflow">if</span> (IFI.<a class="code" href="classllvm_1_1InlineFunctionInfo.html#ad01658587132e4b44ba8414b3a87fde5">CallerBFI</a>) {</div>
<div class="line"><a name="l02783"></a><span class="lineno"> 2783</span>&#160;    <span class="comment">// Copy original BB&#39;s block frequency to AfterCallBB</span></div>
<div class="line"><a name="l02784"></a><span class="lineno"> 2784</span>&#160;    IFI.<a class="code" href="classllvm_1_1InlineFunctionInfo.html#ad01658587132e4b44ba8414b3a87fde5">CallerBFI</a>-&gt;<a class="code" href="classllvm_1_1BlockFrequencyInfo.html#a3ce999410f335ab0caf755a56aa73d1e">setBlockFreq</a>(</div>
<div class="line"><a name="l02785"></a><span class="lineno"> 2785</span>&#160;        AfterCallBB, IFI.<a class="code" href="classllvm_1_1InlineFunctionInfo.html#ad01658587132e4b44ba8414b3a87fde5">CallerBFI</a>-&gt;<a class="code" href="classllvm_1_1BlockFrequencyInfo.html#ab8b72c18add22acd827f7a6cd1ff1bff">getBlockFreq</a>(OrigBB).<a class="code" href="classllvm_1_1BlockFrequency.html#a8e9ed6b20c2503f66f1fd0725297aedc">getFrequency</a>());</div>
<div class="line"><a name="l02786"></a><span class="lineno"> 2786</span>&#160;  }</div>
<div class="line"><a name="l02787"></a><span class="lineno"> 2787</span>&#160; </div>
<div class="line"><a name="l02788"></a><span class="lineno"> 2788</span>&#160;  <span class="comment">// Change the branch that used to go to AfterCallBB to branch to the first</span></div>
<div class="line"><a name="l02789"></a><span class="lineno"> 2789</span>&#160;  <span class="comment">// basic block of the inlined function.</span></div>
<div class="line"><a name="l02790"></a><span class="lineno"> 2790</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l02791"></a><span class="lineno"> 2791</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Br = OrigBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>();</div>
<div class="line"><a name="l02792"></a><span class="lineno"> 2792</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Br &amp;&amp; Br-&gt;<a class="code" href="classllvm_1_1Instruction.html#ab4e05d690df389b8b1477c90387b575f">getOpcode</a>() == Instruction::Br &amp;&amp;</div>
<div class="line"><a name="l02793"></a><span class="lineno"> 2793</span>&#160;         <span class="stringliteral">&quot;splitBasicBlock broken!&quot;</span>);</div>
<div class="line"><a name="l02794"></a><span class="lineno"> 2794</span>&#160;  Br-&gt;<a class="code" href="classllvm_1_1User.html#a5fa9b8e1842b354f64c1ba6be0a4a17f">setOperand</a>(0, &amp;*FirstNewBlock);</div>
<div class="line"><a name="l02795"></a><span class="lineno"> 2795</span>&#160; </div>
<div class="line"><a name="l02796"></a><span class="lineno"> 2796</span>&#160;  <span class="comment">// Now that the function is correct, make it a little bit nicer.  In</span></div>
<div class="line"><a name="l02797"></a><span class="lineno"> 2797</span>&#160;  <span class="comment">// particular, move the basic blocks inserted from the end of the function</span></div>
<div class="line"><a name="l02798"></a><span class="lineno"> 2798</span>&#160;  <span class="comment">// into the space made by splitting the source basic block.</span></div>
<div class="line"><a name="l02799"></a><span class="lineno"> 2799</span>&#160;  Caller-&gt;splice(AfterCallBB-&gt;<a class="code" href="classllvm_1_1ilist__node__impl.html#af719fc783be6589465137d997701a432">getIterator</a>(), Caller, FirstNewBlock,</div>
<div class="line"><a name="l02800"></a><span class="lineno"> 2800</span>&#160;                 Caller-&gt;end());</div>
<div class="line"><a name="l02801"></a><span class="lineno"> 2801</span>&#160; </div>
<div class="line"><a name="l02802"></a><span class="lineno"> 2802</span>&#160;  <span class="comment">// Handle all of the return instructions that we just cloned in, and eliminate</span></div>
<div class="line"><a name="l02803"></a><span class="lineno"> 2803</span>&#160;  <span class="comment">// any users of the original call/invoke instruction.</span></div>
<div class="line"><a name="l02804"></a><span class="lineno"> 2804</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *RTy = CalledFunc-&gt;<a class="code" href="classllvm_1_1Function.html#aaea88376352c42347dceccdd5ab1c20c">getReturnType</a>();</div>
<div class="line"><a name="l02805"></a><span class="lineno"> 2805</span>&#160; </div>
<div class="line"><a name="l02806"></a><span class="lineno"> 2806</span>&#160;  <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *<a class="code" href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">PHI</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02807"></a><span class="lineno"> 2807</span>&#160;  <span class="keywordflow">if</span> (Returns.size() &gt; 1) {</div>
<div class="line"><a name="l02808"></a><span class="lineno"> 2808</span>&#160;    <span class="comment">// The PHI node should go at the front of the new basic block to merge all</span></div>
<div class="line"><a name="l02809"></a><span class="lineno"> 2809</span>&#160;    <span class="comment">// possible incoming values.</span></div>
<div class="line"><a name="l02810"></a><span class="lineno"> 2810</span>&#160;    <span class="keywordflow">if</span> (!CB.<a class="code" href="classllvm_1_1Value.html#a9d7de807ebdfe1819df3ff6cb0f16158">use_empty</a>()) {</div>
<div class="line"><a name="l02811"></a><span class="lineno"> 2811</span>&#160;      <a class="code" href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">PHI</a> = <a class="code" href="classllvm_1_1PHINode.html#ab0ff669b12c20c07137705c38872ec63">PHINode::Create</a>(RTy, Returns.size(), CB.<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>(),</div>
<div class="line"><a name="l02812"></a><span class="lineno"> 2812</span>&#160;                            &amp;AfterCallBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#ab706e7ebb1969c5e34f28bfcf2ff719e">front</a>());</div>
<div class="line"><a name="l02813"></a><span class="lineno"> 2813</span>&#160;      <span class="comment">// Anything that used the result of the function call should now use the</span></div>
<div class="line"><a name="l02814"></a><span class="lineno"> 2814</span>&#160;      <span class="comment">// PHI node as their operand.</span></div>
<div class="line"><a name="l02815"></a><span class="lineno"> 2815</span>&#160;      CB.<a class="code" href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">replaceAllUsesWith</a>(<a class="code" href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">PHI</a>);</div>
<div class="line"><a name="l02816"></a><span class="lineno"> 2816</span>&#160;    }</div>
<div class="line"><a name="l02817"></a><span class="lineno"> 2817</span>&#160; </div>
<div class="line"><a name="l02818"></a><span class="lineno"> 2818</span>&#160;    <span class="comment">// Loop over all of the return instructions adding entries to the PHI node</span></div>
<div class="line"><a name="l02819"></a><span class="lineno"> 2819</span>&#160;    <span class="comment">// as appropriate.</span></div>
<div class="line"><a name="l02820"></a><span class="lineno"> 2820</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">PHI</a>) {</div>
<div class="line"><a name="l02821"></a><span class="lineno"> 2821</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a> = Returns.size(); <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a>; ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l02822"></a><span class="lineno"> 2822</span>&#160;        <a class="code" href="classllvm_1_1ReturnInst.html">ReturnInst</a> *RI = Returns[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l02823"></a><span class="lineno"> 2823</span>&#160;        <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(RI-&gt;<a class="code" href="classllvm_1_1ReturnInst.html#a87e923648048258a6e8376d6cf4ce565">getReturnValue</a>()-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>() == <a class="code" href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">PHI</a>-&gt;getType() &amp;&amp;</div>
<div class="line"><a name="l02824"></a><span class="lineno"> 2824</span>&#160;               <span class="stringliteral">&quot;Ret value not consistent in function!&quot;</span>);</div>
<div class="line"><a name="l02825"></a><span class="lineno"> 2825</span>&#160;        <a class="code" href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">PHI</a>-&gt;addIncoming(RI-&gt;<a class="code" href="classllvm_1_1ReturnInst.html#a87e923648048258a6e8376d6cf4ce565">getReturnValue</a>(), RI-&gt;<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>());</div>
<div class="line"><a name="l02826"></a><span class="lineno"> 2826</span>&#160;      }</div>
<div class="line"><a name="l02827"></a><span class="lineno"> 2827</span>&#160;    }</div>
<div class="line"><a name="l02828"></a><span class="lineno"> 2828</span>&#160; </div>
<div class="line"><a name="l02829"></a><span class="lineno"> 2829</span>&#160;    <span class="comment">// Add a branch to the merge points and remove return instructions.</span></div>
<div class="line"><a name="l02830"></a><span class="lineno"> 2830</span>&#160;    <a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a> Loc;</div>
<div class="line"><a name="l02831"></a><span class="lineno"> 2831</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a> = Returns.size(); <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a>; ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l02832"></a><span class="lineno"> 2832</span>&#160;      <a class="code" href="classllvm_1_1ReturnInst.html">ReturnInst</a> *RI = Returns[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l02833"></a><span class="lineno"> 2833</span>&#160;      <a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a>* BI = <a class="code" href="classllvm_1_1BranchInst.html#a38df51256d4b415b6a817b5e1c6d4d36">BranchInst::Create</a>(AfterCallBB, RI);</div>
<div class="line"><a name="l02834"></a><span class="lineno"> 2834</span>&#160;      Loc = RI-&gt;<a class="code" href="classllvm_1_1Instruction.html#ab4f3bf98b5054831b608852e33427814">getDebugLoc</a>();</div>
<div class="line"><a name="l02835"></a><span class="lineno"> 2835</span>&#160;      BI-&gt;<a class="code" href="classllvm_1_1Instruction.html#ae8f5bf5cc06f696b52c709677df00fbf">setDebugLoc</a>(Loc);</div>
<div class="line"><a name="l02836"></a><span class="lineno"> 2836</span>&#160;      RI-&gt;<a class="code" href="classllvm_1_1Instruction.html#ae6b978645b8ac72d1a35e1298ffdd4f0">eraseFromParent</a>();</div>
<div class="line"><a name="l02837"></a><span class="lineno"> 2837</span>&#160;    }</div>
<div class="line"><a name="l02838"></a><span class="lineno"> 2838</span>&#160;    <span class="comment">// We need to set the debug location to *somewhere* inside the</span></div>
<div class="line"><a name="l02839"></a><span class="lineno"> 2839</span>&#160;    <span class="comment">// inlined function. The line number may be nonsensical, but the</span></div>
<div class="line"><a name="l02840"></a><span class="lineno"> 2840</span>&#160;    <span class="comment">// instruction will at least be associated with the right</span></div>
<div class="line"><a name="l02841"></a><span class="lineno"> 2841</span>&#160;    <span class="comment">// function.</span></div>
<div class="line"><a name="l02842"></a><span class="lineno"> 2842</span>&#160;    <span class="keywordflow">if</span> (CreatedBranchToNormalDest)</div>
<div class="line"><a name="l02843"></a><span class="lineno"> 2843</span>&#160;      CreatedBranchToNormalDest-&gt;<a class="code" href="classllvm_1_1Instruction.html#ae8f5bf5cc06f696b52c709677df00fbf">setDebugLoc</a>(Loc);</div>
<div class="line"><a name="l02844"></a><span class="lineno"> 2844</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!Returns.empty()) {</div>
<div class="line"><a name="l02845"></a><span class="lineno"> 2845</span>&#160;    <span class="comment">// Otherwise, if there is exactly one return value, just replace anything</span></div>
<div class="line"><a name="l02846"></a><span class="lineno"> 2846</span>&#160;    <span class="comment">// using the return value of the call with the computed value.</span></div>
<div class="line"><a name="l02847"></a><span class="lineno"> 2847</span>&#160;    <span class="keywordflow">if</span> (!CB.<a class="code" href="classllvm_1_1Value.html#a9d7de807ebdfe1819df3ff6cb0f16158">use_empty</a>()) {</div>
<div class="line"><a name="l02848"></a><span class="lineno"> 2848</span>&#160;      <span class="keywordflow">if</span> (&amp;CB == Returns[0]-&gt;getReturnValue())</div>
<div class="line"><a name="l02849"></a><span class="lineno"> 2849</span>&#160;        CB.<a class="code" href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">replaceAllUsesWith</a>(<a class="code" href="classllvm_1_1UndefValue.html#a4ae5ff22b700a42bcc5d889233721335">UndefValue::get</a>(CB.<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()));</div>
<div class="line"><a name="l02850"></a><span class="lineno"> 2850</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l02851"></a><span class="lineno"> 2851</span>&#160;        CB.<a class="code" href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">replaceAllUsesWith</a>(Returns[0]-&gt;getReturnValue());</div>
<div class="line"><a name="l02852"></a><span class="lineno"> 2852</span>&#160;    }</div>
<div class="line"><a name="l02853"></a><span class="lineno"> 2853</span>&#160; </div>
<div class="line"><a name="l02854"></a><span class="lineno"> 2854</span>&#160;    <span class="comment">// Update PHI nodes that use the ReturnBB to use the AfterCallBB.</span></div>
<div class="line"><a name="l02855"></a><span class="lineno"> 2855</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *ReturnBB = Returns[0]-&gt;getParent();</div>
<div class="line"><a name="l02856"></a><span class="lineno"> 2856</span>&#160;    ReturnBB-&gt;<a class="code" href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">replaceAllUsesWith</a>(AfterCallBB);</div>
<div class="line"><a name="l02857"></a><span class="lineno"> 2857</span>&#160; </div>
<div class="line"><a name="l02858"></a><span class="lineno"> 2858</span>&#160;    <span class="comment">// Splice the code from the return block into the block that it will return</span></div>
<div class="line"><a name="l02859"></a><span class="lineno"> 2859</span>&#160;    <span class="comment">// to, which contains the code that was after the call.</span></div>
<div class="line"><a name="l02860"></a><span class="lineno"> 2860</span>&#160;    AfterCallBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#af29f89e91dfd0ae90950f0b1bf49798d">splice</a>(AfterCallBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>(), ReturnBB);</div>
<div class="line"><a name="l02861"></a><span class="lineno"> 2861</span>&#160; </div>
<div class="line"><a name="l02862"></a><span class="lineno"> 2862</span>&#160;    <span class="keywordflow">if</span> (CreatedBranchToNormalDest)</div>
<div class="line"><a name="l02863"></a><span class="lineno"> 2863</span>&#160;      CreatedBranchToNormalDest-&gt;<a class="code" href="classllvm_1_1Instruction.html#ae8f5bf5cc06f696b52c709677df00fbf">setDebugLoc</a>(Returns[0]-&gt;<a class="code" href="MachineInstrBundle_8cpp.html#af44c9b089359803924e0b92bea3b6d03">getDebugLoc</a>());</div>
<div class="line"><a name="l02864"></a><span class="lineno"> 2864</span>&#160; </div>
<div class="line"><a name="l02865"></a><span class="lineno"> 2865</span>&#160;    <span class="comment">// Delete the return instruction now and empty ReturnBB now.</span></div>
<div class="line"><a name="l02866"></a><span class="lineno"> 2866</span>&#160;    Returns[0]-&gt;eraseFromParent();</div>
<div class="line"><a name="l02867"></a><span class="lineno"> 2867</span>&#160;    ReturnBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8dd327a937563afdb08250abc43820b0">eraseFromParent</a>();</div>
<div class="line"><a name="l02868"></a><span class="lineno"> 2868</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!CB.<a class="code" href="classllvm_1_1Value.html#a9d7de807ebdfe1819df3ff6cb0f16158">use_empty</a>()) {</div>
<div class="line"><a name="l02869"></a><span class="lineno"> 2869</span>&#160;    <span class="comment">// No returns, but something is using the return value of the call.  Just</span></div>
<div class="line"><a name="l02870"></a><span class="lineno"> 2870</span>&#160;    <span class="comment">// nuke the result.</span></div>
<div class="line"><a name="l02871"></a><span class="lineno"> 2871</span>&#160;    CB.<a class="code" href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">replaceAllUsesWith</a>(<a class="code" href="classllvm_1_1PoisonValue.html#a1bf08613fb664a2e377a9a72c59a6b66">PoisonValue::get</a>(CB.<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()));</div>
<div class="line"><a name="l02872"></a><span class="lineno"> 2872</span>&#160;  }</div>
<div class="line"><a name="l02873"></a><span class="lineno"> 2873</span>&#160; </div>
<div class="line"><a name="l02874"></a><span class="lineno"> 2874</span>&#160;  <span class="comment">// Since we are now done with the Call/Invoke, we can delete it.</span></div>
<div class="line"><a name="l02875"></a><span class="lineno"> 2875</span>&#160;  CB.<a class="code" href="classllvm_1_1Instruction.html#ae6b978645b8ac72d1a35e1298ffdd4f0">eraseFromParent</a>();</div>
<div class="line"><a name="l02876"></a><span class="lineno"> 2876</span>&#160; </div>
<div class="line"><a name="l02877"></a><span class="lineno"> 2877</span>&#160;  <span class="comment">// If we inlined any musttail calls and the original return is now</span></div>
<div class="line"><a name="l02878"></a><span class="lineno"> 2878</span>&#160;  <span class="comment">// unreachable, delete it.  It can only contain a bitcast and ret.</span></div>
<div class="line"><a name="l02879"></a><span class="lineno"> 2879</span>&#160;  <span class="keywordflow">if</span> (InlinedMustTailCalls &amp;&amp; <a class="code" href="namespacellvm.html#ad66c4759666aab78529658362b498c74">pred_empty</a>(AfterCallBB))</div>
<div class="line"><a name="l02880"></a><span class="lineno"> 2880</span>&#160;    AfterCallBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8dd327a937563afdb08250abc43820b0">eraseFromParent</a>();</div>
<div class="line"><a name="l02881"></a><span class="lineno"> 2881</span>&#160; </div>
<div class="line"><a name="l02882"></a><span class="lineno"> 2882</span>&#160;  <span class="comment">// We should always be able to fold the entry block of the function into the</span></div>
<div class="line"><a name="l02883"></a><span class="lineno"> 2883</span>&#160;  <span class="comment">// single predecessor of the block...</span></div>
<div class="line"><a name="l02884"></a><span class="lineno"> 2884</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(cast&lt;BranchInst&gt;(Br)-&gt;isUnconditional() &amp;&amp; <span class="stringliteral">&quot;splitBasicBlock broken!&quot;</span>);</div>
<div class="line"><a name="l02885"></a><span class="lineno"> 2885</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *CalleeEntry = cast&lt;BranchInst&gt;(Br)-&gt;getSuccessor(0);</div>
<div class="line"><a name="l02886"></a><span class="lineno"> 2886</span>&#160; </div>
<div class="line"><a name="l02887"></a><span class="lineno"> 2887</span>&#160;  <span class="comment">// Splice the code entry block into calling block, right before the</span></div>
<div class="line"><a name="l02888"></a><span class="lineno"> 2888</span>&#160;  <span class="comment">// unconditional branch.</span></div>
<div class="line"><a name="l02889"></a><span class="lineno"> 2889</span>&#160;  CalleeEntry-&gt;<a class="code" href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">replaceAllUsesWith</a>(OrigBB);  <span class="comment">// Update PHI nodes</span></div>
<div class="line"><a name="l02890"></a><span class="lineno"> 2890</span>&#160;  OrigBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#af29f89e91dfd0ae90950f0b1bf49798d">splice</a>(Br-&gt;<a class="code" href="classllvm_1_1ilist__node__impl.html#af719fc783be6589465137d997701a432">getIterator</a>(), CalleeEntry);</div>
<div class="line"><a name="l02891"></a><span class="lineno"> 2891</span>&#160; </div>
<div class="line"><a name="l02892"></a><span class="lineno"> 2892</span>&#160;  <span class="comment">// Remove the unconditional branch.</span></div>
<div class="line"><a name="l02893"></a><span class="lineno"> 2893</span>&#160;  Br-&gt;<a class="code" href="classllvm_1_1Instruction.html#ae6b978645b8ac72d1a35e1298ffdd4f0">eraseFromParent</a>();</div>
<div class="line"><a name="l02894"></a><span class="lineno"> 2894</span>&#160; </div>
<div class="line"><a name="l02895"></a><span class="lineno"> 2895</span>&#160;  <span class="comment">// Now we can remove the CalleeEntry block, which is now empty.</span></div>
<div class="line"><a name="l02896"></a><span class="lineno"> 2896</span>&#160;  CalleeEntry-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8dd327a937563afdb08250abc43820b0">eraseFromParent</a>();</div>
<div class="line"><a name="l02897"></a><span class="lineno"> 2897</span>&#160; </div>
<div class="line"><a name="l02898"></a><span class="lineno"> 2898</span>&#160;  <span class="comment">// If we inserted a phi node, check to see if it has a single value (e.g. all</span></div>
<div class="line"><a name="l02899"></a><span class="lineno"> 2899</span>&#160;  <span class="comment">// the entries are the same or undef).  If so, remove the PHI so it doesn&#39;t</span></div>
<div class="line"><a name="l02900"></a><span class="lineno"> 2900</span>&#160;  <span class="comment">// block other optimizations.</span></div>
<div class="line"><a name="l02901"></a><span class="lineno"> 2901</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">PHI</a>) {</div>
<div class="line"><a name="l02902"></a><span class="lineno"> 2902</span>&#160;    <a class="code" href="classllvm_1_1AssumptionCache.html">AssumptionCache</a> *AC =</div>
<div class="line"><a name="l02903"></a><span class="lineno"> 2903</span>&#160;        IFI.<a class="code" href="classllvm_1_1InlineFunctionInfo.html#a6d3c3f9f13bd38d8aa6410841d2b99c0">GetAssumptionCache</a> ? &amp;IFI.<a class="code" href="classllvm_1_1InlineFunctionInfo.html#a6d3c3f9f13bd38d8aa6410841d2b99c0">GetAssumptionCache</a>(*Caller) : <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02904"></a><span class="lineno"> 2904</span>&#160;    <span class="keyword">auto</span> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a> = Caller-&gt;getParent()-&gt;getDataLayout();</div>
<div class="line"><a name="l02905"></a><span class="lineno"> 2905</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V = <a class="code" href="namespacellvm.html#aab02db480f387fca92956ef1c9a01941">simplifyInstruction</a>(<a class="code" href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">PHI</a>, {<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>, AC})) {</div>
<div class="line"><a name="l02906"></a><span class="lineno"> 2906</span>&#160;      <a class="code" href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">PHI</a>-&gt;replaceAllUsesWith(V);</div>
<div class="line"><a name="l02907"></a><span class="lineno"> 2907</span>&#160;      <a class="code" href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">PHI</a>-&gt;eraseFromParent();</div>
<div class="line"><a name="l02908"></a><span class="lineno"> 2908</span>&#160;    }</div>
<div class="line"><a name="l02909"></a><span class="lineno"> 2909</span>&#160;  }</div>
<div class="line"><a name="l02910"></a><span class="lineno"> 2910</span>&#160; </div>
<div class="line"><a name="l02911"></a><span class="lineno"> 2911</span>&#160;  <span class="keywordflow">if</span> (MergeAttributes)</div>
<div class="line"><a name="l02912"></a><span class="lineno"> 2912</span>&#160;    <a class="code" href="namespacellvm_1_1AttributeFuncs.html#ae05b3471aef6ffe376ceef99af9b4709">AttributeFuncs::mergeAttributesForInlining</a>(*Caller, *CalledFunc);</div>
<div class="line"><a name="l02913"></a><span class="lineno"> 2913</span>&#160; </div>
<div class="line"><a name="l02914"></a><span class="lineno"> 2914</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1InlineResult.html#a364fcb5fb838e7ca83b9fc379bcb4a0a">InlineResult::success</a>();</div>
<div class="line"><a name="l02915"></a><span class="lineno"> 2915</span>&#160;}</div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="aclassllvm_1_1Function_html_ac154f7a85081237665c89b83bbd3d7e2"><div class="ttname"><a href="classllvm_1_1Function.html#ac154f7a85081237665c89b83bbd3d7e2">llvm::Function::getEntryCount</a></div><div class="ttdeci">std::optional&lt; ProfileCount &gt; getEntryCount(bool AllowSynthetic=false) const</div><div class="ttdoc">Get the entry count for this function.</div><div class="ttdef"><b>Definition:</b> <a href="Function_8cpp_source.html#l02081">Function.cpp:2081</a></div></div>
<div class="ttc" id="anamespacellvm_html_a5d56157a385f8cd7d3e54ed87da1ba6aab34bedfd8d86f0adbefe4ae0e708f428"><div class="ttname"><a href="namespacellvm.html#a5d56157a385f8cd7d3e54ed87da1ba6aab34bedfd8d86f0adbefe4ae0e708f428">llvm::EHPersonality::MSVC_CXX</a></div><div class="ttdeci">@ MSVC_CXX</div></div>
<div class="ttc" id="aclassllvm_1_1AttrBuilder_html_ac857d238048717f6284dd46bbf867fcd"><div class="ttname"><a href="classllvm_1_1AttrBuilder.html#ac857d238048717f6284dd46bbf867fcd">llvm::AttrBuilder::addDereferenceableOrNullAttr</a></div><div class="ttdeci">AttrBuilder &amp; addDereferenceableOrNullAttr(uint64_t Bytes)</div><div class="ttdoc">This turns the number of dereferenceable_or_null bytes into the form used internally in Attribute.</div><div class="ttdef"><b>Definition:</b> <a href="Attributes_8cpp_source.html#l01764">Attributes.cpp:1764</a></div></div>
<div class="ttc" id="alib_2Target_2README_8txt_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">i</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2README_8txt_source.html#l00029">README.txt:29</a></div></div>
<div class="ttc" id="aclassllvm_1_1InvokeInst_html_a100bd3005ea84bf47f3b4021e8022633"><div class="ttname"><a href="classllvm_1_1InvokeInst.html#a100bd3005ea84bf47f3b4021e8022633">llvm::InvokeInst::getNormalDest</a></div><div class="ttdeci">BasicBlock * getNormalDest() const</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03946">Instructions.h:3946</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a6796a84f02394ce6ebef227c866cd5eb"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a6796a84f02394ce6ebef227c866cd5eb">llvm::BasicBlock::getTerminatingDeoptimizeCall</a></div><div class="ttdeci">const CallInst * getTerminatingDeoptimizeCall() const</div><div class="ttdoc">Returns the call instruction calling @llvm.experimental.deoptimize prior to the terminating return in...</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00181">BasicBlock.cpp:181</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallBase_html_a35b3798829fba58f145ea59e4214e84a"><div class="ttname"><a href="classllvm_1_1CallBase.html#a35b3798829fba58f145ea59e4214e84a">llvm::CallBase::getNumOperandBundles</a></div><div class="ttdeci">unsigned getNumOperandBundles() const</div><div class="ttdoc">Return the number of operand bundles associated with this User.</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l01949">InstrTypes.h:1949</a></div></div>
<div class="ttc" id="aInlineFunction_8cpp_html_a6432ed860d9a2e41e925003f9631052b"><div class="ttname"><a href="InlineFunction_8cpp.html#a6432ed860d9a2e41e925003f9631052b">IdentifyValidAttributes</a></div><div class="ttdeci">static AttrBuilder IdentifyValidAttributes(CallBase &amp;CB)</div><div class="ttdef"><b>Definition:</b> <a href="InlineFunction_8cpp_source.html#l01350">InlineFunction.cpp:1350</a></div></div>
<div class="ttc" id="anamespacellvm_html_ab9c9fb92464f96c0e0f326d624e82eab"><div class="ttname"><a href="namespacellvm.html#ab9c9fb92464f96c0e0f326d624e82eab">llvm::isAsynchronousEHPersonality</a></div><div class="ttdeci">bool isAsynchronousEHPersonality(EHPersonality Pers)</div><div class="ttdoc">Returns true if this personality function catches asynchronous exceptions.</div><div class="ttdef"><b>Definition:</b> <a href="EHPersonalities_8h_source.html#l00049">EHPersonalities.h:49</a></div></div>
<div class="ttc" id="aclassllvm_1_1Argument_html"><div class="ttname"><a href="classllvm_1_1Argument.html">llvm::Argument</a></div><div class="ttdoc">This class represents an incoming formal argument to a Function.</div><div class="ttdef"><b>Definition:</b> <a href="Argument_8h_source.html#l00028">Argument.h:28</a></div></div>
<div class="ttc" id="aAssumptionCache_8h_html"><div class="ttname"><a href="AssumptionCache_8h.html">AssumptionCache.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_af29f89e91dfd0ae90950f0b1bf49798d"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#af29f89e91dfd0ae90950f0b1bf49798d">llvm::BasicBlock::splice</a></div><div class="ttdeci">void splice(BasicBlock::iterator ToIt, BasicBlock *FromBB)</div><div class="ttdoc">Transfer all instructions from FromBB to this basic block at ToIt.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00468">BasicBlock.h:468</a></div></div>
<div class="ttc" id="aREADME__ALTIVEC_8txt_html_a9d3ba236d13373cde794da2023acc7a0"><div class="ttname"><a href="README__ALTIVEC_8txt.html#a9d3ba236d13373cde794da2023acc7a0">Attrs</a></div><div class="ttdeci">Function Attrs</div><div class="ttdef"><b>Definition:</b> <a href="README__ALTIVEC_8txt_source.html#l00215">README_ALTIVEC.txt:215</a></div></div>
<div class="ttc" id="aclassllvm_1_1InlineResult_html_a364fcb5fb838e7ca83b9fc379bcb4a0a"><div class="ttname"><a href="classllvm_1_1InlineResult.html#a364fcb5fb838e7ca83b9fc379bcb4a0a">llvm::InlineResult::success</a></div><div class="ttdeci">static InlineResult success()</div><div class="ttdef"><b>Definition:</b> <a href="InlineCost_8h_source.html#l00184">InlineCost.h:184</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html_a900a32da3983469187b1848189681705"><div class="ttname"><a href="classllvm_1_1Function.html#a900a32da3983469187b1848189681705">llvm::Function::isIntrinsic</a></div><div class="ttdeci">bool isIntrinsic() const</div><div class="ttdoc">isIntrinsic - Returns true if the function's name starts with &quot;llvm.&quot;.</div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00209">Function.h:209</a></div></div>
<div class="ttc" id="aclassllvm_1_1CatchSwitchInst_html_ae61b8e2a70c05a76af629cd6acb64390"><div class="ttname"><a href="classllvm_1_1CatchSwitchInst.html#ae61b8e2a70c05a76af629cd6acb64390">llvm::CatchSwitchInst::Create</a></div><div class="ttdeci">static CatchSwitchInst * Create(Value *ParentPad, BasicBlock *UnwindDest, unsigned NumHandlers, const Twine &amp;NameStr=&quot;&quot;, Instruction *InsertBefore=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l04356">Instructions.h:4356</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallGraphNode_html_a4bdeedd19891bf099e456c984e873597"><div class="ttname"><a href="classllvm_1_1CallGraphNode.html#a4bdeedd19891bf099e456c984e873597">llvm::CallGraphNode::CalledFunctionsVector</a></div><div class="ttdeci">std::vector&lt; CallRecord &gt; CalledFunctionsVector</div><div class="ttdef"><b>Definition:</b> <a href="CallGraph_8h_source.html#l00181">CallGraph.h:181</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AArch64CC_html_abfa1f7dce576430da99eed57807c7f28aa5506efe3dc67f7b794331f0cbffddaf"><div class="ttname"><a href="namespacellvm_1_1AArch64CC.html#abfa1f7dce576430da99eed57807c7f28aa5506efe3dc67f7b794331f0cbffddaf">llvm::AArch64CC::HI</a></div><div class="ttdeci">@ HI</div><div class="ttdef"><b>Definition:</b> <a href="AArch64BaseInfo_8h_source.html#l00263">AArch64BaseInfo.h:263</a></div></div>
<div class="ttc" id="anamespacellvm_html"><div class="ttname"><a href="namespacellvm.html">llvm</a></div><div class="ttdoc">This is an optimization pass for GlobalISel generic memory operations.</div><div class="ttdef"><b>Definition:</b> <a href="AddressRanges_8h_source.html#l00018">AddressRanges.h:18</a></div></div>
<div class="ttc" id="aInlineFunction_8cpp_html_aac69c9cf4e552a52d5065e94dc023f82"><div class="ttname"><a href="InlineFunction_8cpp.html#aac69c9cf4e552a52d5065e94dc023f82">HandleInlinedEHPad</a></div><div class="ttdeci">static void HandleInlinedEHPad(InvokeInst *II, BasicBlock *FirstNewBlock, ClonedCodeInfo &amp;InlinedCodeInfo)</div><div class="ttdoc">If we inlined an invoke site, we need to convert calls in the body of the inlined function into invok...</div><div class="ttdef"><b>Definition:</b> <a href="InlineFunction_8cpp_source.html#l00658">InlineFunction.cpp:658</a></div></div>
<div class="ttc" id="anamespacellvm_1_1objcarc_html_aefba9af2f61452f20f4c947b4c2e5f4e"><div class="ttname"><a href="namespacellvm_1_1objcarc.html#aefba9af2f61452f20f4c947b4c2e5f4e">llvm::objcarc::hasAttachedCallOpBundle</a></div><div class="ttdeci">bool hasAttachedCallOpBundle(const CallBase *CB)</div><div class="ttdef"><b>Definition:</b> <a href="ObjCARCUtil_8h_source.html#l00029">ObjCARCUtil.h:29</a></div></div>
<div class="ttc" id="aclassllvm_1_1LandingPadInst_html_a0966e2f38f20609a643b5d5e3da8bae5"><div class="ttname"><a href="classllvm_1_1LandingPadInst.html#a0966e2f38f20609a643b5d5e3da8bae5">llvm::LandingPadInst::isCleanup</a></div><div class="ttdeci">bool isCleanup() const</div><div class="ttdoc">Return 'true' if this landingpad instruction is a cleanup.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03003">Instructions.h:3003</a></div></div>
<div class="ttc" id="aInlineFunction_8cpp_html_aba0a2870541e6fa6fd93c313d27a139e"><div class="ttname"><a href="InlineFunction_8cpp.html#aba0a2870541e6fa6fd93c313d27a139e">getUnwindDestToken</a></div><div class="ttdeci">static Value * getUnwindDestToken(Instruction *EHPad, UnwindDestMemoTy &amp;MemoMap)</div><div class="ttdoc">Given an EH pad, find where it unwinds.</div><div class="ttdef"><b>Definition:</b> <a href="InlineFunction_8cpp_source.html#l00398">InlineFunction.cpp:398</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallBase_html_a19263fff7f5b3a9d22b48151fa0d85d0"><div class="ttname"><a href="classllvm_1_1CallBase.html#a19263fff7f5b3a9d22b48151fa0d85d0">llvm::CallBase::getOperandBundlesAsDefs</a></div><div class="ttdeci">void getOperandBundlesAsDefs(SmallVectorImpl&lt; OperandBundleDef &gt; &amp;Defs) const</div><div class="ttdoc">Return the list of operand bundles attached to this instruction as a vector of OperandBundleDefs.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l00425">Instructions.cpp:425</a></div></div>
<div class="ttc" id="aInlineFunction_8cpp_html_ae2c447e52415219501221037474b9893"><div class="ttname"><a href="InlineFunction_8cpp.html#ae2c447e52415219501221037474b9893">removeMemProfMetadata</a></div><div class="ttdeci">static void removeMemProfMetadata(CallBase *Call)</div><div class="ttdef"><b>Definition:</b> <a href="InlineFunction_8cpp_source.html#l00802">InlineFunction.cpp:802</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html_a0b44832d4b6bb57b0e8c61fc3242547b"><div class="ttname"><a href="classllvm_1_1Function.html#a0b44832d4b6bb57b0e8c61fc3242547b">llvm::Function::args</a></div><div class="ttdeci">iterator_range&lt; arg_iterator &gt; args()</div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00790">Function.h:790</a></div></div>
<div class="ttc" id="alib_2Target_2X86_2README_8txt_html_ac88fe1d3a61b056a4f64fbbb156a62ff"><div class="ttname"><a href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a></div><div class="ttdeci">We currently emits eax Perhaps this is what we really should generate is Is imull three or four cycles eax eax The current instruction priority is based on pattern complexity The former is more complex because it folds a load so the latter will not be emitted Perhaps we should use AddedComplexity to give LEA32r a higher priority We should always try to match LEA first since the LEA matching code does some estimate to determine whether the match is profitable if we care more about code then imull is better It s two bytes shorter than movl leal On a Pentium M</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2X86_2README_8txt_source.html#l00252">README.txt:252</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a4ba3a5be6c0e9b9e8a525de055836733"><div class="ttname"><a href="classllvm_1_1Instruction.html#a4ba3a5be6c0e9b9e8a525de055836733">llvm::Instruction::getModule</a></div><div class="ttdeci">const Module * getModule() const</div><div class="ttdoc">Return the module owning the function this instruction belongs to or nullptr it the function does not...</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8cpp_source.html#l00070">Instruction.cpp:70</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AArch64CC_html_abfa1f7dce576430da99eed57807c7f28ab89adee997fb2a645a2d26e1f1bdaadf"><div class="ttname"><a href="namespacellvm_1_1AArch64CC.html#abfa1f7dce576430da99eed57807c7f28ab89adee997fb2a645a2d26e1f1bdaadf">llvm::AArch64CC::AL</a></div><div class="ttdeci">@ AL</div><div class="ttdef"><b>Definition:</b> <a href="AArch64BaseInfo_8h_source.html#l00269">AArch64BaseInfo.h:269</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallGraphNode_html_abc0ebbee3aae4365ed714cb589fd4a5d"><div class="ttname"><a href="classllvm_1_1CallGraphNode.html#abc0ebbee3aae4365ed714cb589fd4a5d">llvm::CallGraphNode::iterator</a></div><div class="ttdeci">std::vector&lt; CallRecord &gt;::iterator iterator</div><div class="ttdef"><b>Definition:</b> <a href="CallGraph_8h_source.html#l00193">CallGraph.h:193</a></div></div>
<div class="ttc" id="anamespacellvm_html_ad1a91b49e0c092818a0b82f6cc130a1b"><div class="ttname"><a href="namespacellvm.html#ad1a91b49e0c092818a0b82f6cc130a1b">llvm::make_range</a></div><div class="ttdeci">iterator_range&lt; T &gt; make_range(T x, T y)</div><div class="ttdoc">Convenience function for iterating over sub-ranges.</div><div class="ttdef"><b>Definition:</b> <a href="iterator__range_8h_source.html#l00053">iterator_range.h:53</a></div></div>
<div class="ttc" id="aclassllvm_1_1ReturnInst_html"><div class="ttname"><a href="classllvm_1_1ReturnInst.html">llvm::ReturnInst</a></div><div class="ttdoc">Return a value (possibly void), from a function.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03057">Instructions.h:3057</a></div></div>
<div class="ttc" id="aclassllvm_1_1VAArgInst_html"><div class="ttname"><a href="classllvm_1_1VAArgInst.html">llvm::VAArgInst</a></div><div class="ttdoc">This class represents the va_arg llvm instruction, which returns an argument of the specified type gi...</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01841">Instructions.h:1841</a></div></div>
<div class="ttc" id="astructllvm_1_1ClonedCodeInfo_html"><div class="ttname"><a href="structllvm_1_1ClonedCodeInfo.html">llvm::ClonedCodeInfo</a></div><div class="ttdoc">This struct can be used to capture information about code being cloned, while it is being cloned.</div><div class="ttdef"><b>Definition:</b> <a href="Cloning_8h_source.html#l00062">Cloning.h:62</a></div></div>
<div class="ttc" id="aValueMapper_8h_html"><div class="ttname"><a href="ValueMapper_8h.html">ValueMapper.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1DataLayout_html"><div class="ttname"><a href="classllvm_1_1DataLayout.html">llvm::DataLayout</a></div><div class="ttdoc">A parsed version of the target data layout string in and methods for querying it.</div><div class="ttdef"><b>Definition:</b> <a href="DataLayout_8h_source.html#l00110">DataLayout.h:110</a></div></div>
<div class="ttc" id="aInlineFunction_8cpp_html_ad19c97a069133d179234826fc95c3bde"><div class="ttname"><a href="InlineFunction_8cpp.html#ad19c97a069133d179234826fc95c3bde">allocaWouldBeStaticInEntry</a></div><div class="ttdeci">static bool allocaWouldBeStaticInEntry(const AllocaInst *AI)</div><div class="ttdoc">Return the result of AI-&gt;isStaticAlloca() if AI were moved to the entry block.</div><div class="ttdef"><b>Definition:</b> <a href="InlineFunction_8cpp_source.html#l01638">InlineFunction.cpp:1638</a></div></div>
<div class="ttc" id="aInlineFunction_8cpp_html_a81fe0543b342a120ede7c69eeed77729"><div class="ttname"><a href="InlineFunction_8cpp.html#a81fe0543b342a120ede7c69eeed77729">propagateMemProfMetadata</a></div><div class="ttdeci">static void propagateMemProfMetadata(Function *Callee, CallBase &amp;CB, bool ContainsMemProfMetadata, const ValueMap&lt; const Value *, WeakTrackingVH &gt; &amp;VMap)</div><div class="ttdef"><b>Definition:</b> <a href="InlineFunction_8cpp_source.html#l00886">InlineFunction.cpp:886</a></div></div>
<div class="ttc" id="aclassllvm_1_1IRBuilderBase_html_ab5c6751768e157a3cb89753e39b07e01"><div class="ttname"><a href="classllvm_1_1IRBuilderBase.html#ab5c6751768e157a3cb89753e39b07e01">llvm::IRBuilderBase::CreateLifetimeEnd</a></div><div class="ttdeci">CallInst * CreateLifetimeEnd(Value *Ptr, ConstantInt *Size=nullptr)</div><div class="ttdoc">Create a lifetime.end intrinsic.</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8cpp_source.html#l00493">IRBuilder.cpp:493</a></div></div>
<div class="ttc" id="aInlineFunction_8cpp_html_ae41de93195b83f9a1678d4554c6caace"><div class="ttname"><a href="InlineFunction_8cpp.html#ae41de93195b83f9a1678d4554c6caace">MayContainThrowingOrExitingCall</a></div><div class="ttdeci">static bool MayContainThrowingOrExitingCall(Instruction *Begin, Instruction *End)</div><div class="ttdef"><b>Definition:</b> <a href="InlineFunction_8cpp_source.html#l01341">InlineFunction.cpp:1341</a></div></div>
<div class="ttc" id="aMetadata_8h_html"><div class="ttname"><a href="Metadata_8h.html">Metadata.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a7fe9ccd4893f4e2caa826126c09545ea"><div class="ttname"><a href="classllvm_1_1Type.html#a7fe9ccd4893f4e2caa826126c09545ea">llvm::Type::getInt8PtrTy</a></div><div class="ttdeci">static PointerType * getInt8PtrTy(LLVMContext &amp;C, unsigned AS=0)</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00293">Type.cpp:293</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html_ae4ca2261b8b901e415fda7feac5051ea"><div class="ttname"><a href="classllvm_1_1Function.html#ae4ca2261b8b901e415fda7feac5051ea">llvm::Function::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00753">Function.h:753</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a98c0a84a5dfa8bce341c829709f171e5"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a98c0a84a5dfa8bce341c829709f171e5">llvm::BasicBlock::iterator</a></div><div class="ttdeci">InstListType::iterator iterator</div><div class="ttdoc">Instruction iterators...</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00087">BasicBlock.h:87</a></div></div>
<div class="ttc" id="aAMDGPURewriteUndefForPHI_8cpp_html_a2e83cb1bc3f5e8986cbd14575755a134"><div class="ttname"><a href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">PHI</a></div><div class="ttdeci">Rewrite undef for PHI</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPURewriteUndefForPHI_8cpp_source.html#l00101">AMDGPURewriteUndefForPHI.cpp:101</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a38bee869ad41aebfef3de2641b12004c"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a38bee869ad41aebfef3de2641b12004c">llvm::BasicBlock::getParent</a></div><div class="ttdeci">const Function * getParent() const</div><div class="ttdoc">Return the enclosing method, or null if none.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00112">BasicBlock.h:112</a></div></div>
<div class="ttc" id="aIntrinsicInst_8h_html"><div class="ttname"><a href="IntrinsicInst_8h.html">IntrinsicInst.h</a></div></div>
<div class="ttc" id="aDebugInfoMetadata_8h_html"><div class="ttname"><a href="DebugInfoMetadata_8h.html">DebugInfoMetadata.h</a></div></div>
<div class="ttc" id="astructllvm_1_1ClonedCodeInfo_html_a94c735687f007da4731abf87dc9fd8e5"><div class="ttname"><a href="structllvm_1_1ClonedCodeInfo.html#a94c735687f007da4731abf87dc9fd8e5">llvm::ClonedCodeInfo::ContainsMemProfMetadata</a></div><div class="ttdeci">bool ContainsMemProfMetadata</div><div class="ttdoc">This is set to true if there is memprof related metadata (memprof or callsite metadata) in the cloned...</div><div class="ttdef"><b>Definition:</b> <a href="Cloning_8h_source.html#l00068">Cloning.h:68</a></div></div>
<div class="ttc" id="aclassllvm_1_1ValueMap_html_ab871e2d0ebded563edfebd6766fc1a04"><div class="ttname"><a href="classllvm_1_1ValueMap.html#ab871e2d0ebded563edfebd6766fc1a04">llvm::ValueMap::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="ValueMap_8h_source.html#l00135">ValueMap.h:135</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html"><div class="ttname"><a href="classllvm_1_1Function.html">llvm::Function</a></div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00059">Function.h:59</a></div></div>
<div class="ttc" id="aclassllvm_1_1details_1_1FixedOrScalableQuantity_html_a9188f84e1dd67530330dcab9cae787d7"><div class="ttname"><a href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#a9188f84e1dd67530330dcab9cae787d7">llvm::details::FixedOrScalableQuantity::isScalable</a></div><div class="ttdeci">constexpr bool isScalable() const</div><div class="ttdoc">Returns whether the quantity is scaled by a runtime quantity (vscale).</div><div class="ttdef"><b>Definition:</b> <a href="TypeSize_8h_source.html#l00166">TypeSize.h:166</a></div></div>
<div class="ttc" id="aInlineFunction_8cpp_html_a2ed4f37fbda15a9c05f333fde59e9fbb"><div class="ttname"><a href="InlineFunction_8cpp.html#a2ed4f37fbda15a9c05f333fde59e9fbb">fixupLineNumbers</a></div><div class="ttdeci">static void fixupLineNumbers(Function *Fn, Function::iterator FI, Instruction *TheCall, bool CalleeHasDebugInfo)</div><div class="ttdoc">Update inlined instructions' line numbers to to encode location where these instructions are inlined.</div><div class="ttdef"><b>Definition:</b> <a href="InlineFunction_8cpp_source.html#l01654">InlineFunction.cpp:1654</a></div></div>
<div class="ttc" id="aInlineFunction_8cpp_html_afc67dee315b33c11135dff4cbf95a0ac"><div class="ttname"><a href="InlineFunction_8cpp.html#afc67dee315b33c11135dff4cbf95a0ac">getUnwindDestTokenHelper</a></div><div class="ttdeci">static Value * getUnwindDestTokenHelper(Instruction *EHPad, UnwindDestMemoTy &amp;MemoMap)</div><div class="ttdoc">Helper for getUnwindDestToken that does the descendant-ward part of the search.</div><div class="ttdef"><b>Definition:</b> <a href="InlineFunction_8cpp_source.html#l00247">InlineFunction.cpp:247</a></div></div>
<div class="ttc" id="aclassllvm_1_1ReturnInst_html_a87e923648048258a6e8376d6cf4ce565"><div class="ttname"><a href="classllvm_1_1ReturnInst.html#a87e923648048258a6e8376d6cf4ce565">llvm::ReturnInst::getReturnValue</a></div><div class="ttdeci">Value * getReturnValue() const</div><div class="ttdoc">Convenience accessor. Returns null if there is no return value.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03102">Instructions.h:3102</a></div></div>
<div class="ttc" id="aclassllvm_1_1AllocaInst_html_ac106bea55dfb26f8b14676aac05bd89f"><div class="ttname"><a href="classllvm_1_1AllocaInst.html#ac106bea55dfb26f8b14676aac05bd89f">llvm::AllocaInst::getType</a></div><div class="ttdeci">PointerType * getType() const</div><div class="ttdoc">Overload to return most specific pointer type.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00100">Instructions.h:100</a></div></div>
<div class="ttc" id="anamespacellvm_html_ab5a3ac0a249da0743dac1bd816d8e5d5"><div class="ttname"><a href="namespacellvm.html#ab5a3ac0a249da0743dac1bd816d8e5d5">llvm::InlineFunction</a></div><div class="ttdeci">InlineResult InlineFunction(CallBase &amp;CB, InlineFunctionInfo &amp;IFI, bool MergeAttributes=false, AAResults *CalleeAAR=nullptr, bool InsertLifetime=true, Function *ForwardVarArgsTo=nullptr)</div><div class="ttdoc">This function inlines the called function into the basic block of the caller.</div><div class="ttdef"><b>Definition:</b> <a href="InlineFunction_8cpp_source.html#l02008">InlineFunction.cpp:2008</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVector_html"><div class="ttname"><a href="classllvm_1_1SmallVector.html">llvm::SmallVector&lt; Value *, 8 &gt;</a></div></div>
<div class="ttc" id="anamespacellvm_html_aa9ef2dbd1b7ce921093f7d4a7bd4cc5c"><div class="ttname"><a href="namespacellvm.html#aa9ef2dbd1b7ce921093f7d4a7bd4cc5c">llvm::isAssignmentTrackingEnabled</a></div><div class="ttdeci">bool isAssignmentTrackingEnabled(const Module &amp;M)</div><div class="ttdoc">Return true if assignment tracking is enabled for module M.</div><div class="ttdef"><b>Definition:</b> <a href="DebugInfo_8cpp_source.html#l02037">DebugInfo.cpp:2037</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallInst_html_a68573712cd73746e416002907c9af79b"><div class="ttname"><a href="classllvm_1_1CallInst.html#a68573712cd73746e416002907c9af79b">llvm::CallInst::setTailCallKind</a></div><div class="ttdeci">void setTailCallKind(TailCallKind TCK)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01686">Instructions.h:1686</a></div></div>
<div class="ttc" id="aInlineAsm_8h_html"><div class="ttname"><a href="InlineAsm_8h.html">InlineAsm.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1LandingPadInst_html"><div class="ttname"><a href="classllvm_1_1LandingPadInst.html">llvm::LandingPadInst</a></div><div class="ttdoc">The landingpad instruction holds all of the information necessary to generate correct exception handl...</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02956">Instructions.h:2956</a></div></div>
<div class="ttc" id="aCaptureTracking_8h_html"><div class="ttname"><a href="CaptureTracking_8h.html">CaptureTracking.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallGraphNode_html_a04b68ad3bca393a40d40e2ee6cfc1f47"><div class="ttname"><a href="classllvm_1_1CallGraphNode.html#a04b68ad3bca393a40d40e2ee6cfc1f47">llvm::CallGraphNode::removeCallEdgeFor</a></div><div class="ttdeci">void removeCallEdgeFor(CallBase &amp;Call)</div><div class="ttdoc">Removes the edge in the node for the specified call site.</div><div class="ttdef"><b>Definition:</b> <a href="CallGraph_8cpp_source.html#l00209">CallGraph.cpp:209</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html_a4d834f9897d15e3a6349063b5d637cd8"><div class="ttname"><a href="classllvm_1_1Function.html#a4d834f9897d15e3a6349063b5d637cd8">llvm::Function::getSubprogram</a></div><div class="ttdeci">DISubprogram * getSubprogram() const</div><div class="ttdoc">Get the attached subprogram.</div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8cpp_source.html#l01625">Metadata.cpp:1625</a></div></div>
<div class="ttc" id="aSupport_2ErrorHandling_8h_html"><div class="ttname"><a href="Support_2ErrorHandling_8h.html">ErrorHandling.h</a></div></div>
<div class="ttc" id="aAssumeBundleBuilder_8cpp_html_ac12c7956b97b705bb8d0f870cfaa0d02"><div class="ttname"><a href="AssumeBundleBuilder_8cpp.html#ac12c7956b97b705bb8d0f870cfaa0d02">builder</a></div><div class="ttdeci">assume builder</div><div class="ttdef"><b>Definition:</b> <a href="AssumeBundleBuilder_8cpp_source.html#l00650">AssumeBundleBuilder.cpp:650</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a5ab2d0b0f0b8ceec3b907184e7567197"><div class="ttname"><a href="classllvm_1_1Type.html#a5ab2d0b0f0b8ceec3b907184e7567197">llvm::Type::getPointerAddressSpace</a></div><div class="ttdeci">unsigned getPointerAddressSpace() const</div><div class="ttdoc">Get the address space of this pointer or pointer vector type.</div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00729">DerivedTypes.h:729</a></div></div>
<div class="ttc" id="aclassllvm_1_1IRBuilder_html"><div class="ttname"><a href="classllvm_1_1IRBuilder.html">llvm::IRBuilder&lt;&gt;</a></div></div>
<div class="ttc" id="anamespacellvm_html_ac9a7de5a04920954ac964059cfc428ad"><div class="ttname"><a href="namespacellvm.html#ac9a7de5a04920954ac964059cfc428ad">llvm::erase_if</a></div><div class="ttdeci">void erase_if(Container &amp;C, UnaryPredicate P)</div><div class="ttdoc">Provide a container algorithm similar to C++ Library Fundamentals v2's erase_if which is equivalent t...</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l01998">STLExtras.h:1998</a></div></div>
<div class="ttc" id="aValueTracking_8h_html"><div class="ttname"><a href="ValueTracking_8h.html">ValueTracking.h</a></div></div>
<div class="ttc" id="aTransforms_2Utils_2Local_8h_html"><div class="ttname"><a href="Transforms_2Utils_2Local_8h.html">Local.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1AttributeList_html_a5cc6492c8f2e06a8bae9dc0d121fab9f"><div class="ttname"><a href="classllvm_1_1AttributeList.html#a5cc6492c8f2e06a8bae9dc0d121fab9f">llvm::AttributeList::get</a></div><div class="ttdeci">static AttributeList get(LLVMContext &amp;C, ArrayRef&lt; std::pair&lt; unsigned, Attribute &gt;&gt; Attrs)</div><div class="ttdoc">Create an AttributeList with the specified parameters in it.</div><div class="ttdef"><b>Definition:</b> <a href="Attributes_8cpp_source.html#l01132">Attributes.cpp:1132</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallGraph_html"><div class="ttname"><a href="classllvm_1_1CallGraph.html">llvm::CallGraph</a></div><div class="ttdoc">The basic data container for the call graph of a Module of IR.</div><div class="ttdef"><b>Definition:</b> <a href="CallGraph_8h_source.html#l00072">CallGraph.h:72</a></div></div>
<div class="ttc" id="aclassllvm_1_1DominatorTree_html"><div class="ttname"><a href="classllvm_1_1DominatorTree.html">llvm::DominatorTree</a></div><div class="ttdoc">Concrete subclass of DominatorTreeBase that is used to compute a normal dominator tree.</div><div class="ttdef"><b>Definition:</b> <a href="Dominators_8h_source.html#l00166">Dominators.h:166</a></div></div>
<div class="ttc" id="anamespacellvm_1_1cl_html_a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6"><div class="ttname"><a href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">llvm::cl::Hidden</a></div><div class="ttdeci">@ Hidden</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00138">CommandLine.h:138</a></div></div>
<div class="ttc" id="aInlineFunction_8cpp_html_a32f2884ce25dcf448fbb3fb0a57396ff"><div class="ttname"><a href="InlineFunction_8cpp.html#a32f2884ce25dcf448fbb3fb0a57396ff">removeCallsiteMetadata</a></div><div class="ttdeci">static void removeCallsiteMetadata(CallBase *Call)</div><div class="ttdef"><b>Definition:</b> <a href="InlineFunction_8cpp_source.html#l00806">InlineFunction.cpp:806</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallBase_html_ae5602880a0921a686c1ca11034659557"><div class="ttname"><a href="classllvm_1_1CallBase.html#ae5602880a0921a686c1ca11034659557">llvm::CallBase::addOperandBundle</a></div><div class="ttdeci">static CallBase * addOperandBundle(CallBase *CB, uint32_t ID, OperandBundleDef OB, Instruction *InsertPt=nullptr)</div><div class="ttdoc">Create a clone of CB with operand bundle OB added.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l00504">Instructions.cpp:504</a></div></div>
<div class="ttc" id="aclassllvm_1_1DILocation_html"><div class="ttname"><a href="classllvm_1_1DILocation.html">llvm::DILocation</a></div><div class="ttdoc">Debug location.</div><div class="ttdef"><b>Definition:</b> <a href="DebugInfoMetadata_8h_source.html#l01605">DebugInfoMetadata.h:1605</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html_a9fffac2512fe651f0d5e37e27f5bd51c"><div class="ttname"><a href="classllvm_1_1Function.html#a9fffac2512fe651f0d5e37e27f5bd51c">llvm::Function::getContext</a></div><div class="ttdeci">LLVMContext &amp; getContext() const</div><div class="ttdoc">getContext - Return a reference to the LLVMContext associated with this function.</div><div class="ttdef"><b>Definition:</b> <a href="Function_8cpp_source.html#l00315">Function.cpp:315</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html"><div class="ttname"><a href="classllvm_1_1Type.html">llvm::Type</a></div><div class="ttdoc">The instances of the Type class are immutable: once they are created, they are never changed.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00045">Type.h:45</a></div></div>
<div class="ttc" id="aDenseMap_8h_html"><div class="ttname"><a href="DenseMap_8h.html">DenseMap.h</a></div></div>
<div class="ttc" id="aModule_8h_html"><div class="ttname"><a href="Module_8h.html">Module.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a8dd327a937563afdb08250abc43820b0"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a8dd327a937563afdb08250abc43820b0">llvm::BasicBlock::eraseFromParent</a></div><div class="ttdeci">SymbolTableList&lt; BasicBlock &gt;::iterator eraseFromParent()</div><div class="ttdoc">Unlink 'this' from the containing function and delete it.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00132">BasicBlock.cpp:132</a></div></div>
<div class="ttc" id="aclassllvm_1_1AttributeList_html"><div class="ttname"><a href="classllvm_1_1AttributeList.html">llvm::AttributeList</a></div><div class="ttdef"><b>Definition:</b> <a href="Attributes_8h_source.html#l00432">Attributes.h:432</a></div></div>
<div class="ttc" id="anamespacellvm_html_a6e7b79b3933def717c2a0f2fc6fa38e0"><div class="ttname"><a href="namespacellvm.html#a6e7b79b3933def717c2a0f2fc6fa38e0">llvm::getOrEnforceKnownAlignment</a></div><div class="ttdeci">Align getOrEnforceKnownAlignment(Value *V, MaybeAlign PrefAlign, const DataLayout &amp;DL, const Instruction *CxtI=nullptr, AssumptionCache *AC=nullptr, const DominatorTree *DT=nullptr)</div><div class="ttdoc">Try to ensure that the alignment of V is at least PrefAlign bytes.</div><div class="ttdef"><b>Definition:</b> <a href="Transforms_2Utils_2Local_8cpp_source.html#l01439">Local.cpp:1439</a></div></div>
<div class="ttc" id="astructllvm_1_1MaybeAlign_html_a06846474be3ab85f8d30c388faf3b116"><div class="ttname"><a href="structllvm_1_1MaybeAlign.html#a06846474be3ab85f8d30c388faf3b116">llvm::MaybeAlign::valueOrOne</a></div><div class="ttdeci">Align valueOrOne() const</div><div class="ttdoc">For convenience, returns a valid alignment or 1 if undefined.</div><div class="ttdef"><b>Definition:</b> <a href="Alignment_8h_source.html#l00141">Alignment.h:141</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallBase_html_ae0c55761fce39dd71617690b04385193"><div class="ttname"><a href="classllvm_1_1CallBase.html#ae0c55761fce39dd71617690b04385193">llvm::CallBase::getAttributes</a></div><div class="ttdeci">AttributeList getAttributes() const</div><div class="ttdoc">Return the parameter attributes for this call.</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l01484">InstrTypes.h:1484</a></div></div>
<div class="ttc" id="aclassllvm_1_1OperandBundleDefT_html"><div class="ttname"><a href="classllvm_1_1OperandBundleDefT.html">llvm::OperandBundleDefT</a></div><div class="ttdoc">A container for an operand bundle being viewed as a set of values rather than a set of uses.</div><div class="ttdef"><b>Definition:</b> <a href="AutoUpgrade_8h_source.html#l00032">AutoUpgrade.h:32</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallBase_html_a5e4a09f80c7cd5283dbbc7256d122d12"><div class="ttname"><a href="classllvm_1_1CallBase.html#a5e4a09f80c7cd5283dbbc7256d122d12">llvm::CallBase::getFunctionType</a></div><div class="ttdeci">FunctionType * getFunctionType() const</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l01264">InstrTypes.h:1264</a></div></div>
<div class="ttc" id="aEHPersonalities_8h_html"><div class="ttname"><a href="EHPersonalities_8h.html">EHPersonalities.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a52c990590792c91dd20b6d45acebe359"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a52c990590792c91dd20b6d45acebe359">llvm::BasicBlock::splitBasicBlock</a></div><div class="ttdeci">BasicBlock * splitBasicBlock(iterator I, const Twine &amp;BBName=&quot;&quot;, bool Before=false)</div><div class="ttdoc">Split the basic block into two basic blocks at the specified instruction.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00401">BasicBlock.cpp:401</a></div></div>
<div class="ttc" id="anamespacellvm_1_1objcarc_html_ab3161a6067eaed051be4376266e9ac03"><div class="ttname"><a href="namespacellvm_1_1objcarc.html#ab3161a6067eaed051be4376266e9ac03">llvm::objcarc::isRetainOrClaimRV</a></div><div class="ttdeci">bool isRetainOrClaimRV(ARCInstKind Kind)</div><div class="ttdoc">Check whether the function is retainRV/unsafeClaimRV.</div><div class="ttdef"><b>Definition:</b> <a href="ObjCARCUtil_8h_source.html#l00052">ObjCARCUtil.h:52</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseMapBase_html_a53408c95a7bfb5443b43fb2134c3eb23"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#a53408c95a7bfb5443b43fb2134c3eb23">llvm::DenseMapBase::count</a></div><div class="ttdeci">size_type count(const_arg_type_t&lt; KeyT &gt; Val) const</div><div class="ttdoc">Return 1 if the specified key is in the map, 0 otherwise.</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00145">DenseMap.h:145</a></div></div>
<div class="ttc" id="aInlineFunction_8cpp_html_af939eab05ffe67221645aab1342156b2"><div class="ttname"><a href="InlineFunction_8cpp.html#af939eab05ffe67221645aab1342156b2">PropagateOperandBundles</a></div><div class="ttdeci">static void PropagateOperandBundles(Function::iterator InlinedBB, Instruction *CallSiteEHPad)</div><div class="ttdoc">Bundle operands of the inlined function must be added to inlined call sites.</div><div class="ttdef"><b>Definition:</b> <a href="InlineFunction_8cpp_source.html#l00959">InlineFunction.cpp:959</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSet_html"><div class="ttname"><a href="classllvm_1_1SmallPtrSet.html">llvm::SmallPtrSet&lt; Instruction *, 4 &gt;</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallBase_html_a610f151afe638890b21bea434a26821d"><div class="ttname"><a href="classllvm_1_1CallBase.html#a610f151afe638890b21bea434a26821d">llvm::CallBase::isByValArgument</a></div><div class="ttdeci">bool isByValArgument(unsigned ArgNo) const</div><div class="ttdoc">Determine whether this argument is passed by value.</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l01688">InstrTypes.h:1688</a></div></div>
<div class="ttc" id="anamespacellvm_html_ab4d4bc901fedd8857f647dcc2c0d71de"><div class="ttname"><a href="namespacellvm.html#ab4d4bc901fedd8857f647dcc2c0d71de">llvm::max</a></div><div class="ttdeci">Expected&lt; ExpressionValue &gt; max(const ExpressionValue &amp;Lhs, const ExpressionValue &amp;Rhs)</div><div class="ttdef"><b>Definition:</b> <a href="FileCheck_8cpp_source.html#l00337">FileCheck.cpp:337</a></div></div>
<div class="ttc" id="anamespacellvm_html_a9a7b5c68c90f85baaedaa854cc5002cc"><div class="ttname"><a href="namespacellvm.html#a9a7b5c68c90f85baaedaa854cc5002cc">llvm::errs</a></div><div class="ttdeci">raw_fd_ostream &amp; errs()</div><div class="ttdoc">This returns a reference to a raw_ostream for standard error.</div><div class="ttdef"><b>Definition:</b> <a href="raw__ostream_8cpp_source.html#l00899">raw_ostream.cpp:899</a></div></div>
<div class="ttc" id="aclassllvm_1_1FunctionType_html_a104d6154321899b53e40455e71d8e83a"><div class="ttname"><a href="classllvm_1_1FunctionType.html#a104d6154321899b53e40455e71d8e83a">llvm::FunctionType::getNumParams</a></div><div class="ttdeci">unsigned getNumParams() const</div><div class="ttdoc">Return the number of fixed parameters this function type requires.</div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00139">DerivedTypes.h:139</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_1_1ProfileCount_html_a849a5f56eb7de1aceefc2f566c9931d8"><div class="ttname"><a href="classllvm_1_1Function_1_1ProfileCount.html#a849a5f56eb7de1aceefc2f566c9931d8">llvm::Function::ProfileCount::isSynthetic</a></div><div class="ttdeci">bool isSynthetic() const</div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00262">Function.h:262</a></div></div>
<div class="ttc" id="aInlineFunction_8cpp_html_aacb4e52fb1da69b5085b4dbf32406b71"><div class="ttname"><a href="InlineFunction_8cpp.html#aacb4e52fb1da69b5085b4dbf32406b71">HandleCallsInBlockInlinedThroughInvoke</a></div><div class="ttdeci">static BasicBlock * HandleCallsInBlockInlinedThroughInvoke(BasicBlock *BB, BasicBlock *UnwindEdge, UnwindDestMemoTy *FuncletUnwindMap=nullptr)</div><div class="ttdoc">When we inline a basic block into an invoke, we have to turn all of the calls that can throw into inv...</div><div class="ttdef"><b>Definition:</b> <a href="InlineFunction_8cpp_source.html#l00542">InlineFunction.cpp:542</a></div></div>
<div class="ttc" id="aSTLExtras_8h_html"><div class="ttname"><a href="STLExtras_8h.html">STLExtras.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallBase_html_a4fb513d744ca72275932b2c7003f16f6"><div class="ttname"><a href="classllvm_1_1CallBase.html#a4fb513d744ca72275932b2c7003f16f6">llvm::CallBase::arg_begin</a></div><div class="ttdeci">User::op_iterator arg_begin()</div><div class="ttdoc">Return the iterator pointing to the beginning of the argument list.</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l01326">InstrTypes.h:1326</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallInst_html_ad682514c13f12f1a8d759d422fce6aefa28bea809e15b48558c89910b7fb924b6"><div class="ttname"><a href="classllvm_1_1CallInst.html#ad682514c13f12f1a8d759d422fce6aefa28bea809e15b48558c89910b7fb924b6">llvm::CallInst::TCK_None</a></div><div class="ttdeci">@ TCK_None</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01661">Instructions.h:1661</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallBase_html_a0b6cef2a78857b0236b1c3a2a6eb857e"><div class="ttname"><a href="classllvm_1_1CallBase.html#a0b6cef2a78857b0236b1c3a2a6eb857e">llvm::CallBase::setDoesNotThrow</a></div><div class="ttdeci">void setDoesNotThrow()</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l01909">InstrTypes.h:1909</a></div></div>
<div class="ttc" id="anamespacellvm_1_1dwarf_html_ac94a19fc8c57bf0350fc4e9f45897828"><div class="ttname"><a href="namespacellvm_1_1dwarf.html#ac94a19fc8c57bf0350fc4e9f45897828">llvm::dwarf::Tag</a></div><div class="ttdeci">Tag</div><div class="ttdef"><b>Definition:</b> <a href="Dwarf_8h_source.html#l00103">Dwarf.h:103</a></div></div>
<div class="ttc" id="aclassllvm_1_1MemoryEffects_html_a597afa0c09bf142ab21b2d17b871a9bd"><div class="ttname"><a href="classllvm_1_1MemoryEffects.html#a597afa0c09bf142ab21b2d17b871a9bd">llvm::MemoryEffects::onlyAccessesInaccessibleMem</a></div><div class="ttdeci">bool onlyAccessesInaccessibleMem() const</div><div class="ttdoc">Whether this function only (at most) accesses inaccessible memory.</div><div class="ttdef"><b>Definition:</b> <a href="ModRef_8h_source.html#l00210">ModRef.h:210</a></div></div>
<div class="ttc" id="anamespacellvm_html_ab307a287351370b59786ef96c73738cb"><div class="ttname"><a href="namespacellvm.html#ab307a287351370b59786ef96c73738cb">llvm::uniteAccessGroups</a></div><div class="ttdeci">MDNode * uniteAccessGroups(MDNode *AccGroups1, MDNode *AccGroups2)</div><div class="ttdoc">Compute the union of two access-group lists.</div><div class="ttdef"><b>Definition:</b> <a href="VectorUtils_8cpp_source.html#l00821">VectorUtils.cpp:821</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a9237251072bf6816163abc2d053212ee"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a9237251072bf6816163abc2d053212ee">llvm::BasicBlock::rend</a></div><div class="ttdeci">reverse_iterator rend()</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00321">BasicBlock.h:321</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallGraphNode_html_a5787c4d1e5de6878c95c13873b8e863a"><div class="ttname"><a href="classllvm_1_1CallGraphNode.html#a5787c4d1e5de6878c95c13873b8e863a">llvm::CallGraphNode::addCalledFunction</a></div><div class="ttdeci">void addCalledFunction(CallBase *Call, CallGraphNode *M)</div><div class="ttdoc">Adds a function to the list of functions called by this one.</div><div class="ttdef"><b>Definition:</b> <a href="CallGraph_8h_source.html#l00242">CallGraph.h:242</a></div></div>
<div class="ttc" id="aclassllvm_1_1MDBuilder_html_ab3c477eaa7266e85f2a8caf885854e49"><div class="ttname"><a href="classllvm_1_1MDBuilder.html#ab3c477eaa7266e85f2a8caf885854e49">llvm::MDBuilder::createAnonymousAliasScope</a></div><div class="ttdeci">MDNode * createAnonymousAliasScope(MDNode *Domain, StringRef Name=StringRef())</div><div class="ttdoc">Return metadata appropriate for an alias scope root node.</div><div class="ttdef"><b>Definition:</b> <a href="MDBuilder_8h_source.html#l00159">MDBuilder.h:159</a></div></div>
<div class="ttc" id="aDebug_8h_html_a08efc68d15935eb8889400a46c3749ba"><div class="ttname"><a href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a></div><div class="ttdeci">#define LLVM_DEBUG(X)</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8h_source.html#l00101">Debug.h:101</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AMDGPU_1_1HSAMD_html_a85803b71729d5d098ca2099f23cbf72ea722ad2d05ecf4868b00c5484b82fd808"><div class="ttname"><a href="namespacellvm_1_1AMDGPU_1_1HSAMD.html#a85803b71729d5d098ca2099f23cbf72ea722ad2d05ecf4868b00c5484b82fd808">llvm::AMDGPU::HSAMD::ValueKind::Queue</a></div><div class="ttdeci">@ Queue</div></div>
<div class="ttc" id="anamespacellvm_1_1at_html_a3c90899e8f022656e511630de42b916c"><div class="ttname"><a href="namespacellvm_1_1at.html#a3c90899e8f022656e511630de42b916c">llvm::at::getAssignmentMarkers</a></div><div class="ttdeci">AssignmentMarkerRange getAssignmentMarkers(DIAssignID *ID)</div><div class="ttdoc">Return a range of dbg.assign intrinsics which use \ID as an operand.</div><div class="ttdef"><b>Definition:</b> <a href="DebugInfo_8cpp_source.html#l01754">DebugInfo.cpp:1754</a></div></div>
<div class="ttc" id="aclassllvm_1_1MDNode_html_a7d10a7b9b7f40b04d27ed97c38ea1950"><div class="ttname"><a href="classllvm_1_1MDNode.html#a7d10a7b9b7f40b04d27ed97c38ea1950">llvm::MDNode::get</a></div><div class="ttdeci">static MDTuple * get(LLVMContext &amp;Context, ArrayRef&lt; Metadata * &gt; MDs)</div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8h_source.html#l01399">Metadata.h:1399</a></div></div>
<div class="ttc" id="aMD5_8cpp_html_a96d73bbd7af15cb1fc38c3f4a3bd82e9"><div class="ttname"><a href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a></div><div class="ttdeci">#define F(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00055">MD5.cpp:55</a></div></div>
<div class="ttc" id="aclassllvm_1_1InlineFunctionInfo_html_ad01658587132e4b44ba8414b3a87fde5"><div class="ttname"><a href="classllvm_1_1InlineFunctionInfo.html#ad01658587132e4b44ba8414b3a87fde5">llvm::InlineFunctionInfo::CallerBFI</a></div><div class="ttdeci">BlockFrequencyInfo * CallerBFI</div><div class="ttdef"><b>Definition:</b> <a href="Cloning_8h_source.html#l00220">Cloning.h:220</a></div></div>
<div class="ttc" id="anamespacellvm_1_1objcarc_html_a39a148f4cd39b108512454416f3a5d29"><div class="ttname"><a href="namespacellvm_1_1objcarc.html#a39a148f4cd39b108512454416f3a5d29">llvm::objcarc::getAttachedARCFunction</a></div><div class="ttdeci">std::optional&lt; Function * &gt; getAttachedARCFunction(const CallBase *CB)</div><div class="ttdoc">This function returns operand bundle clang_arc_attachedcall's argument, which is the address of the A...</div><div class="ttdef"><b>Definition:</b> <a href="ObjCARCUtil_8h_source.html#l00043">ObjCARCUtil.h:43</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a9247a212ea89acc9573fa7e7f557eaba"><div class="ttname"><a href="classllvm_1_1Instruction.html#a9247a212ea89acc9573fa7e7f557eaba">llvm::Instruction::setMetadata</a></div><div class="ttdeci">void setMetadata(unsigned KindID, MDNode *Node)</div><div class="ttdoc">Set the metadata of the specified kind to the specified node.</div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8cpp_source.html#l01455">Metadata.cpp:1455</a></div></div>
<div class="ttc" id="aclassllvm_1_1InlineFunctionInfo_html_a200d08643d2038b04aa16716e8cd154b"><div class="ttname"><a href="classllvm_1_1InlineFunctionInfo.html#a200d08643d2038b04aa16716e8cd154b">llvm::InlineFunctionInfo::PSI</a></div><div class="ttdeci">ProfileSummaryInfo * PSI</div><div class="ttdef"><b>Definition:</b> <a href="Cloning_8h_source.html#l00219">Cloning.h:219</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html"><div class="ttname"><a href="classllvm_1_1BasicBlock.html">llvm::BasicBlock</a></div><div class="ttdoc">LLVM Basic Block Representation.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00055">BasicBlock.h:55</a></div></div>
<div class="ttc" id="aclassllvm_1_1MDNode_html_aa4068e37ec583962685e3567dc102ae5"><div class="ttname"><a href="classllvm_1_1MDNode.html#aa4068e37ec583962685e3567dc102ae5">llvm::MDNode::getNumOperands</a></div><div class="ttdeci">unsigned getNumOperands() const</div><div class="ttdoc">Return number of MDNode operands.</div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8h_source.html#l01297">Metadata.h:1297</a></div></div>
<div class="ttc" id="aAliasAnalysis_8h_html"><div class="ttname"><a href="AliasAnalysis_8h.html">AliasAnalysis.h</a></div></div>
<div class="ttc" id="anamespacellvm_1_1X86II_html_a0f8eae4dc1f8612213b096103301fef5a3c11b5af543fcb3173f20c9ce3a6856d"><div class="ttname"><a href="namespacellvm_1_1X86II.html#a0f8eae4dc1f8612213b096103301fef5a3c11b5af543fcb3173f20c9ce3a6856d">llvm::X86II::OB</a></div><div class="ttdeci">@ OB</div><div class="ttdef"><b>Definition:</b> <a href="X86BaseInfo_8h_source.html#l00806">X86BaseInfo.h:806</a></div></div>
<div class="ttc" id="aNVVMIntrRange_8cpp_html_afad351d7bf10ac0446b64e7827634e94"><div class="ttname"><a href="NVVMIntrRange_8cpp.html#afad351d7bf10ac0446b64e7827634e94">Context</a></div><div class="ttdeci">LLVMContext &amp; Context</div><div class="ttdef"><b>Definition:</b> <a href="NVVMIntrRange_8cpp_source.html#l00066">NVVMIntrRange.cpp:66</a></div></div>
<div class="ttc" id="aclassllvm_1_1MemoryEffects_html"><div class="ttname"><a href="classllvm_1_1MemoryEffects.html">llvm::MemoryEffects</a></div><div class="ttdoc">Summary of how a function affects memory in the program.</div><div class="ttdef"><b>Definition:</b> <a href="ModRef_8h_source.html#l00063">ModRef.h:63</a></div></div>
<div class="ttc" id="anamespacellvm_html_a8d508f23e2580095561902c39911fb9b"><div class="ttname"><a href="namespacellvm.html#a8d508f23e2580095561902c39911fb9b">llvm::classifyEHPersonality</a></div><div class="ttdeci">EHPersonality classifyEHPersonality(const Value *Pers)</div><div class="ttdoc">See if the given exception handling personality function is one that we understand.</div><div class="ttdef"><b>Definition:</b> <a href="EHPersonalities_8cpp_source.html#l00022">EHPersonalities.cpp:22</a></div></div>
<div class="ttc" id="aAMDGPULibCalls_8cpp_html_afecf1cc1292b07f57d343c0f4d682044"><div class="ttname"><a href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a></div><div class="ttdeci">amdgpu Simplify well known AMD library false FunctionCallee Value * Arg</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULibCalls_8cpp_source.html#l00187">AMDGPULibCalls.cpp:187</a></div></div>
<div class="ttc" id="aIR_2Instruction_8h_html"><div class="ttname"><a href="IR_2Instruction_8h.html">Instruction.h</a></div></div>
<div class="ttc" id="aCommandLine_8h_html"><div class="ttname"><a href="CommandLine_8h.html">CommandLine.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantInt_html"><div class="ttname"><a href="classllvm_1_1ConstantInt.html">llvm::ConstantInt</a></div><div class="ttdoc">This is the shared class of boolean and integer constants.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00078">Constants.h:78</a></div></div>
<div class="ttc" id="aInlineFunction_8cpp_html_aa35af336fee32786b6551e23d5b55fcf"><div class="ttname"><a href="InlineFunction_8cpp.html#aa35af336fee32786b6551e23d5b55fcf">AddAliasScopeMetadata</a></div><div class="ttdeci">static void AddAliasScopeMetadata(CallBase &amp;CB, ValueToValueMapTy &amp;VMap, const DataLayout &amp;DL, AAResults *CalleeAAR, ClonedCodeInfo &amp;InlinedFunctionInfo)</div><div class="ttdoc">If the inlined function has noalias arguments, then add new alias scopes for each noalias argument,...</div><div class="ttdef"><b>Definition:</b> <a href="InlineFunction_8cpp_source.html#l01097">InlineFunction.cpp:1097</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_ab4e05d690df389b8b1477c90387b575f"><div class="ttname"><a href="classllvm_1_1Instruction.html#ab4e05d690df389b8b1477c90387b575f">llvm::Instruction::getOpcode</a></div><div class="ttdeci">unsigned getOpcode() const</div><div class="ttdoc">Returns a member of one of the enums like Instruction::Add.</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00168">Instruction.h:168</a></div></div>
<div class="ttc" id="aclassllvm_1_1BlockFrequencyInfo_html"><div class="ttname"><a href="classllvm_1_1BlockFrequencyInfo.html">llvm::BlockFrequencyInfo</a></div><div class="ttdoc">BlockFrequencyInfo pass uses BlockFrequencyInfoImpl implementation to estimate IR basic block frequen...</div><div class="ttdef"><b>Definition:</b> <a href="BlockFrequencyInfo_8h_source.html#l00037">BlockFrequencyInfo.h:37</a></div></div>
<div class="ttc" id="aInlineFunction_8cpp_html_a74b8b820b4b2d53dd53ba32821887473"><div class="ttname"><a href="InlineFunction_8cpp.html#a74b8b820b4b2d53dd53ba32821887473">PropagateCallSiteMetadata</a></div><div class="ttdeci">static void PropagateCallSiteMetadata(CallBase &amp;CB, Function::iterator FStart, Function::iterator FEnd)</div><div class="ttdoc">When inlining a call site that has !llvm.mem.parallel_loop_access, !llvm.access.group,...</div><div class="ttdef"><b>Definition:</b> <a href="InlineFunction_8cpp_source.html#l00918">InlineFunction.cpp:918</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a185bafe1e8f07def76a3bac154a23e7a"><div class="ttname"><a href="classllvm_1_1Instruction.html#a185bafe1e8f07def76a3bac154a23e7a">llvm::Instruction::isLifetimeStartOrEnd</a></div><div class="ttdeci">bool isLifetimeStartOrEnd() const LLVM_READONLY</div><div class="ttdoc">Return true if the instruction is a llvm.lifetime.start or llvm.lifetime.end marker.</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8cpp_source.html#l00764">Instruction.cpp:764</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallGraphNode_html_a72b2e4575a6de8f1550d057ff1c23ea1"><div class="ttname"><a href="classllvm_1_1CallGraphNode.html#a72b2e4575a6de8f1550d057ff1c23ea1">llvm::CallGraphNode::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="CallGraph_8h_source.html#l00200">CallGraph.h:200</a></div></div>
<div class="ttc" id="aclassllvm_1_1InlineFunctionInfo_html_ac3ef4b4fdcc6fc9aba65a545c213d76a"><div class="ttname"><a href="classllvm_1_1InlineFunctionInfo.html#ac3ef4b4fdcc6fc9aba65a545c213d76a">llvm::InlineFunctionInfo::CG</a></div><div class="ttdeci">CallGraph * CG</div><div class="ttdoc">If non-null, InlineFunction will update the callgraph to reflect the changes it makes.</div><div class="ttdef"><b>Definition:</b> <a href="Cloning_8h_source.html#l00217">Cloning.h:217</a></div></div>
<div class="ttc" id="anamespacellvm_1_1ms__demangle_html_a1c7534e329bd2e3760c37d8123909e63"><div class="ttname"><a href="namespacellvm_1_1ms__demangle.html#a1c7534e329bd2e3760c37d8123909e63">llvm::ms_demangle::CallingConv</a></div><div class="ttdeci">CallingConv</div><div class="ttdef"><b>Definition:</b> <a href="MicrosoftDemangleNodes_8h_source.html#l00058">MicrosoftDemangleNodes.h:58</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalValue_html_a32e606ac4c88f71f14212e42b808e7f4"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#a32e606ac4c88f71f14212e42b808e7f4">llvm::GlobalValue::isDeclaration</a></div><div class="ttdeci">bool isDeclaration() const</div><div class="ttdoc">Return true if the primary definition of this global value is outside of the current translation unit...</div><div class="ttdef"><b>Definition:</b> <a href="Globals_8cpp_source.html#l00275">Globals.cpp:275</a></div></div>
<div class="ttc" id="aConstants_8h_html"><div class="ttname"><a href="Constants_8h.html">Constants.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1AAResults_html"><div class="ttname"><a href="classllvm_1_1AAResults.html">llvm::AAResults</a></div><div class="ttdef"><b>Definition:</b> <a href="AliasAnalysis_8h_source.html#l00294">AliasAnalysis.h:294</a></div></div>
<div class="ttc" id="aclassllvm_1_1memprof_1_1CallStack_html"><div class="ttname"><a href="classllvm_1_1memprof_1_1CallStack.html">llvm::memprof::CallStack</a></div><div class="ttdoc">Helper class to iterate through stack ids in both metadata (memprof MIB and callsite) and the corresp...</div><div class="ttdef"><b>Definition:</b> <a href="MemoryProfileInfo_8h_source.html#l00108">MemoryProfileInfo.h:108</a></div></div>
<div class="ttc" id="aclassllvm_1_1AllocaInst_html_a074617b3e2f9f98ee3a2ac208e8e7210"><div class="ttname"><a href="classllvm_1_1AllocaInst.html#a074617b3e2f9f98ee3a2ac208e8e7210">llvm::AllocaInst::getAllocatedType</a></div><div class="ttdeci">Type * getAllocatedType() const</div><div class="ttdoc">Return the type that is being allocated by the instruction.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00118">Instructions.h:118</a></div></div>
<div class="ttc" id="aBuiltinGCs_8cpp_html_a6742d2e0a668baf1196ec69e158d5f15"><div class="ttname"><a href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a></div><div class="ttdeci">static GCRegistry::Add&lt; CoreCLRGC &gt; E(&quot;coreclr&quot;, &quot;CoreCLR-compatible GC&quot;)</div></div>
<div class="ttc" id="aInlineFunction_8cpp_html_ac6610b93b62b595b44908bd5b6ab4e16"><div class="ttname"><a href="InlineFunction_8cpp.html#ac6610b93b62b595b44908bd5b6ab4e16">UpdateReturnAttributes</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; UpdateReturnAttributes(&quot;update-return-attrs&quot;, cl::init(true), cl::Hidden, cl::desc(&quot;Update return attributes on calls within inlined body&quot;))</div></div>
<div class="ttc" id="aclassllvm_1_1DebugLoc_html_a98eca4d65070b40322af34cf08842d8c"><div class="ttname"><a href="classllvm_1_1DebugLoc.html#a98eca4d65070b40322af34cf08842d8c">llvm::DebugLoc::getCol</a></div><div class="ttdeci">unsigned getCol() const</div><div class="ttdef"><b>Definition:</b> <a href="DebugLoc_8cpp_source.html#l00029">DebugLoc.cpp:29</a></div></div>
<div class="ttc" id="aclassllvm_1_1InvokeInst_html_a4e9b9e31270dac5f644a568f2139bee4"><div class="ttname"><a href="classllvm_1_1InvokeInst.html#a4e9b9e31270dac5f644a568f2139bee4">llvm::InvokeInst::getLandingPadInst</a></div><div class="ttdeci">LandingPadInst * getLandingPadInst() const</div><div class="ttdoc">Get the landingpad instruction from the landing pad block (the unwind destination).</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l01025">Instructions.cpp:1025</a></div></div>
<div class="ttc" id="aclassllvm_1_1User_html"><div class="ttname"><a href="classllvm_1_1User.html">llvm::User</a></div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00044">User.h:44</a></div></div>
<div class="ttc" id="anamespacellvm_html_a607b7fac55adc5ea9ed40a78e48a5b00"><div class="ttname"><a href="namespacellvm.html#a607b7fac55adc5ea9ed40a78e48a5b00">llvm::getKnownAlignment</a></div><div class="ttdeci">Align getKnownAlignment(Value *V, const DataLayout &amp;DL, const Instruction *CxtI=nullptr, AssumptionCache *AC=nullptr, const DominatorTree *DT=nullptr)</div><div class="ttdoc">Try to infer an alignment for the specified pointer.</div><div class="ttdef"><b>Definition:</b> <a href="Transforms_2Utils_2Local_8h_source.html#l00222">Local.h:222</a></div></div>
<div class="ttc" id="aIntrinsics_8h_html"><div class="ttname"><a href="Intrinsics_8h.html">Intrinsics.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1CleanupReturnInst_html_a12229044a9165df6c04a72377885874a"><div class="ttname"><a href="classllvm_1_1CleanupReturnInst.html#a12229044a9165df6c04a72377885874a">llvm::CleanupReturnInst::Create</a></div><div class="ttdeci">static CleanupReturnInst * Create(Value *CleanupPad, BasicBlock *UnwindBB=nullptr, Instruction *InsertBefore=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l04684">Instructions.h:4684</a></div></div>
<div class="ttc" id="aclassllvm_1_1LandingPadInst_html_a1d25e478c9de2656ce4c793a8b80e537"><div class="ttname"><a href="classllvm_1_1LandingPadInst.html#a1d25e478c9de2656ce4c793a8b80e537">llvm::LandingPadInst::getNumClauses</a></div><div class="ttdeci">unsigned getNumClauses() const</div><div class="ttdoc">Get the number of clauses for this landing pad.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03028">Instructions.h:3028</a></div></div>
<div class="ttc" id="aInstrTypes_8h_html"><div class="ttname"><a href="InstrTypes_8h.html">InstrTypes.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallBase_html_a83b8c9e572130f403445c0b0f69b837c"><div class="ttname"><a href="classllvm_1_1CallBase.html#a83b8c9e572130f403445c0b0f69b837c">llvm::CallBase::getCalledFunction</a></div><div class="ttdeci">Function * getCalledFunction() const</div><div class="ttdoc">Returns the function called, or null if this is an indirect function invocation or the function signa...</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l01406">InstrTypes.h:1406</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallBase_html_a9da3b29e8e71b9be4645874e1721207a"><div class="ttname"><a href="classllvm_1_1CallBase.html#a9da3b29e8e71b9be4645874e1721207a">llvm::CallBase::setAttributes</a></div><div class="ttdeci">void setAttributes(AttributeList A)</div><div class="ttdoc">Set the parameter attributes for this call.</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l01488">InstrTypes.h:1488</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a0ed5f3ab3c2e4196ee0cffffa080c062"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">llvm::BasicBlock::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdoc">Instruction iterator methods.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00314">BasicBlock.h:314</a></div></div>
<div class="ttc" id="aBasicBlockUtils_8cpp_html_a4fd3bc9dead8a151c4cdf8c60d497931"><div class="ttname"><a href="BasicBlockUtils_8cpp.html#a4fd3bc9dead8a151c4cdf8c60d497931">UpdatePHINodes</a></div><div class="ttdeci">static void UpdatePHINodes(BasicBlock *OrigBB, BasicBlock *NewBB, ArrayRef&lt; BasicBlock * &gt; Preds, BranchInst *BI, bool HasLoopExit)</div><div class="ttdoc">Update the PHI nodes in OrigBB to include the values coming from NewBB.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlockUtils_8cpp_source.html#l01110">BasicBlockUtils.cpp:1110</a></div></div>
<div class="ttc" id="aclassllvm_1_1MDNode_html_a2ff0e0e87a2d1056a7b6d7d4b878c4ec"><div class="ttname"><a href="classllvm_1_1MDNode.html#a2ff0e0e87a2d1056a7b6d7d4b878c4ec">llvm::MDNode::operands</a></div><div class="ttdeci">ArrayRef&lt; MDOperand &gt; operands() const</div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8h_source.html#l01289">Metadata.h:1289</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallInst_html_a850d8262cd900958b3153c4aa080b2bb"><div class="ttname"><a href="classllvm_1_1CallInst.html#a850d8262cd900958b3153c4aa080b2bb">llvm::CallInst::Create</a></div><div class="ttdeci">static CallInst * Create(FunctionType *Ty, Value *F, const Twine &amp;NameStr=&quot;&quot;, Instruction *InsertBefore=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01528">Instructions.h:1528</a></div></div>
<div class="ttc" id="aSIInstrInfo_8cpp_html_a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791"><div class="ttname"><a href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a></div><div class="ttdeci">@ SI</div><div class="ttdef"><b>Definition:</b> <a href="SIInstrInfo_8cpp_source.html#l07993">SIInstrInfo.cpp:7993</a></div></div>
<div class="ttc" id="aclassllvm_1_1MDTuple_html"><div class="ttname"><a href="classllvm_1_1MDTuple.html">llvm::MDTuple</a></div><div class="ttdoc">Tuple of metadata.</div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8h_source.html#l01328">Metadata.h:1328</a></div></div>
<div class="ttc" id="anamespacellvm_html_aa7cd2cc36098475563ad0fd3371df2a6"><div class="ttname"><a href="namespacellvm.html#aa7cd2cc36098475563ad0fd3371df2a6">llvm::updateProfileCallee</a></div><div class="ttdeci">void updateProfileCallee(Function *Callee, int64_t EntryDelta, const ValueMap&lt; const Value *, WeakTrackingVH &gt; *VMap=nullptr)</div><div class="ttdoc">Updates profile information by adjusting the entry count by adding EntryDelta then scaling callsite i...</div><div class="ttdef"><b>Definition:</b> <a href="InlineFunction_8cpp_source.html#l01867">InlineFunction.cpp:1867</a></div></div>
<div class="ttc" id="anamespacellvm_1_1objcarc_html_a494b44abeacdfac8bb26d3203571d1c2aa1226b5450384ce6ea5ed47c317303ee"><div class="ttname"><a href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2aa1226b5450384ce6ea5ed47c317303ee">llvm::objcarc::ARCInstKind::RetainRV</a></div><div class="ttdeci">@ RetainRV</div><div class="ttdoc">objc_retainAutoreleasedReturnValue</div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_ab01d8694a759a934e01f1c558c3ce862"><div class="ttname"><a href="classllvm_1_1APInt.html#ab01d8694a759a934e01f1c558c3ce862">llvm::APInt::getLimitedValue</a></div><div class="ttdeci">uint64_t getLimitedValue(uint64_t Limit=UINT64_MAX) const</div><div class="ttdoc">If this value is smaller than the specified limit, return it, otherwise return the limit value.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00463">APInt.h:463</a></div></div>
<div class="ttc" id="aAssumeBundleBuilder_8h_html"><div class="ttname"><a href="AssumeBundleBuilder_8h.html">AssumeBundleBuilder.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1BlockFrequencyInfo_html_a3ce999410f335ab0caf755a56aa73d1e"><div class="ttname"><a href="classllvm_1_1BlockFrequencyInfo.html#a3ce999410f335ab0caf755a56aa73d1e">llvm::BlockFrequencyInfo::setBlockFreq</a></div><div class="ttdeci">void setBlockFreq(const BasicBlock *BB, uint64_t Freq)</div><div class="ttdef"><b>Definition:</b> <a href="BlockFrequencyInfo_8cpp_source.html#l00228">BlockFrequencyInfo.cpp:228</a></div></div>
<div class="ttc" id="astructllvm_1_1MaybeAlign_html"><div class="ttname"><a href="structllvm_1_1MaybeAlign.html">llvm::MaybeAlign</a></div><div class="ttdoc">This struct is a compact representation of a valid (power of two) or undefined (0) alignment.</div><div class="ttdef"><b>Definition:</b> <a href="Alignment_8h_source.html#l00117">Alignment.h:117</a></div></div>
<div class="ttc" id="astructllvm_1_1ClonedCodeInfo_html_aee51f754e9da74f168cd4d12e1eb5c7b"><div class="ttname"><a href="structllvm_1_1ClonedCodeInfo.html#aee51f754e9da74f168cd4d12e1eb5c7b">llvm::ClonedCodeInfo::OperandBundleCallSites</a></div><div class="ttdeci">std::vector&lt; WeakTrackingVH &gt; OperandBundleCallSites</div><div class="ttdoc">All cloned call sites that have operand bundles attached are appended to this vector.</div><div class="ttdef"><b>Definition:</b> <a href="Cloning_8h_source.html#l00078">Cloning.h:78</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html_a8300ac1ef141b8a7c63c13fa9369d976"><div class="ttname"><a href="classllvm_1_1Function.html#a8300ac1ef141b8a7c63c13fa9369d976">llvm::Function::arg_end</a></div><div class="ttdeci">arg_iterator arg_end()</div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00775">Function.h:775</a></div></div>
<div class="ttc" id="aclassllvm_1_1AAResults_html_a98f54e18da022cdb497fbbeed4488276"><div class="ttname"><a href="classllvm_1_1AAResults.html#a98f54e18da022cdb497fbbeed4488276">llvm::AAResults::getMemoryEffects</a></div><div class="ttdeci">MemoryEffects getMemoryEffects(const CallBase *Call)</div><div class="ttdoc">Return the behavior of the given call site.</div><div class="ttdef"><b>Definition:</b> <a href="AliasAnalysis_8cpp_source.html#l00387">AliasAnalysis.cpp:387</a></div></div>
<div class="ttc" id="aInlineFunction_8cpp_html_a380713e3d0da9090dbc68193076703b7"><div class="ttname"><a href="InlineFunction_8cpp.html#a380713e3d0da9090dbc68193076703b7">propagateMemProfHelper</a></div><div class="ttdeci">static void propagateMemProfHelper(const CallBase *OrigCall, CallBase *ClonedCall, MDNode *InlinedCallsiteMD)</div><div class="ttdef"><b>Definition:</b> <a href="InlineFunction_8cpp_source.html#l00829">InlineFunction.cpp:829</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html"><div class="ttname"><a href="classllvm_1_1Instruction.html">llvm::Instruction</a></div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00041">Instruction.h:41</a></div></div>
<div class="ttc" id="aInlineFunction_8cpp_html_a48453d4e53402e9e330e74232eded4be"><div class="ttname"><a href="InlineFunction_8cpp.html#a48453d4e53402e9e330e74232eded4be">UseNoAliasIntrinsic</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; UseNoAliasIntrinsic(&quot;use-noalias-intrinsic-during-inlining&quot;, cl::Hidden, cl::init(true), cl::desc(&quot;Use the llvm.experimental.noalias.scope.decl &quot; &quot;intrinsic during inlining.&quot;))</div></div>
<div class="ttc" id="aclassllvm_1_1AttributeList_html_a61054ea97168f709c1e46345f80c16a3"><div class="ttname"><a href="classllvm_1_1AttributeList.html#a61054ea97168f709c1e46345f80c16a3">llvm::AttributeList::hasFnAttr</a></div><div class="ttdeci">bool hasFnAttr(Attribute::AttrKind Kind) const</div><div class="ttdoc">Return true if the attribute exists for the function.</div><div class="ttdef"><b>Definition:</b> <a href="Attributes_8cpp_source.html#l01479">Attributes.cpp:1479</a></div></div>
<div class="ttc" id="astructllvm_1_1ClonedCodeInfo_html_a6711ec71d15ab34fb6eedc26d5b5da80"><div class="ttname"><a href="structllvm_1_1ClonedCodeInfo.html#a6711ec71d15ab34fb6eedc26d5b5da80">llvm::ClonedCodeInfo::isSimplified</a></div><div class="ttdeci">bool isSimplified(const Value *From, const Value *To) const</div><div class="ttdef"><b>Definition:</b> <a href="Cloning_8h_source.html#l00087">Cloning.h:87</a></div></div>
<div class="ttc" id="aMDBuilder_8h_html"><div class="ttname"><a href="MDBuilder_8h.html">MDBuilder.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1AllocaInst_html_aaca14fdf6d151782f7ab0a66405453fb"><div class="ttname"><a href="classllvm_1_1AllocaInst.html#aaca14fdf6d151782f7ab0a66405453fb">llvm::AllocaInst::getArraySize</a></div><div class="ttdeci">const Value * getArraySize() const</div><div class="ttdoc">Get the number of elements allocated.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00096">Instructions.h:96</a></div></div>
<div class="ttc" id="aInlineFunction_8cpp_html_a4cbd6aad6f6b93f79dc435feab77550e"><div class="ttname"><a href="InlineFunction_8cpp.html#a4cbd6aad6f6b93f79dc435feab77550e">HandleInlinedLandingPad</a></div><div class="ttdeci">static void HandleInlinedLandingPad(InvokeInst *II, BasicBlock *FirstNewBlock, ClonedCodeInfo &amp;InlinedCodeInfo)</div><div class="ttdoc">If we inlined an invoke site, we need to convert calls in the body of the inlined function into invok...</div><div class="ttdef"><b>Definition:</b> <a href="InlineFunction_8cpp_source.html#l00601">InlineFunction.cpp:601</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a72516971c5734dc0f7546e64affca425"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a72516971c5734dc0f7546e64affca425">llvm::BasicBlock::phis</a></div><div class="ttdeci">iterator_range&lt; const_phi_iterator &gt; phis() const</div><div class="ttdoc">Returns a range that iterates over the phis in the basic block.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00372">BasicBlock.h:372</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html_a6a0f6312963ee6fb0969243607174949"><div class="ttname"><a href="classllvm_1_1Function.html#a6a0f6312963ee6fb0969243607174949">llvm::Function::hasPersonalityFn</a></div><div class="ttdeci">bool hasPersonalityFn() const</div><div class="ttdoc">Check whether this function has a personality function.</div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00803">Function.h:803</a></div></div>
<div class="ttc" id="aclassllvm_1_1UndefValue_html_a4ae5ff22b700a42bcc5d889233721335"><div class="ttname"><a href="classllvm_1_1UndefValue.html#a4ae5ff22b700a42bcc5d889233721335">llvm::UndefValue::get</a></div><div class="ttdeci">static UndefValue * get(Type *T)</div><div class="ttdoc">Static factory methods - Return an 'undef' object of the specified type.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l01740">Constants.cpp:1740</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantInt_html_a969709dd49c28865a482d8b870f87c46"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">llvm::ConstantInt::get</a></div><div class="ttdeci">static Constant * get(Type *Ty, uint64_t V, bool IsSigned=false)</div><div class="ttdoc">If Ty is a vector type, return a Constant with a splat of the given value.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00887">Constants.cpp:887</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallBase_html_ad58305d5392be750e7bfae4d114d4db7"><div class="ttname"><a href="classllvm_1_1CallBase.html#ad58305d5392be750e7bfae4d114d4db7">llvm::CallBase::getParamByValType</a></div><div class="ttdeci">Type * getParamByValType(unsigned ArgNo) const</div><div class="ttdoc">Extract the byval type for a call or parameter.</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l01761">InstrTypes.h:1761</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AArch64PACKey_html_abf4394f452bde3f544999858d71e4b46aaf2ff1a10f3f3b211d7781a33e4c1e05"><div class="ttname"><a href="namespacellvm_1_1AArch64PACKey.html#abf4394f452bde3f544999858d71e4b46aaf2ff1a10f3f3b211d7781a33e4c1e05">llvm::AArch64PACKey::IA</a></div><div class="ttdeci">@ IA</div><div class="ttdef"><b>Definition:</b> <a href="AArch64BaseInfo_8h_source.html#l00791">AArch64BaseInfo.h:791</a></div></div>
<div class="ttc" id="aDebugLoc_8h_html"><div class="ttname"><a href="DebugLoc_8h.html">DebugLoc.h</a></div></div>
<div class="ttc" id="aSmallPtrSet_8h_html"><div class="ttname"><a href="SmallPtrSet_8h.html">SmallPtrSet.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallGraphNode_html"><div class="ttname"><a href="classllvm_1_1CallGraphNode.html">llvm::CallGraphNode</a></div><div class="ttdoc">A node in the call graph for a module.</div><div class="ttdef"><b>Definition:</b> <a href="CallGraph_8h_source.html#l00166">CallGraph.h:166</a></div></div>
<div class="ttc" id="aclassllvm_1_1ValueMap_html_a799baf755bd1d5589995e78dbb9a4ced"><div class="ttname"><a href="classllvm_1_1ValueMap.html#a799baf755bd1d5589995e78dbb9a4ced">llvm::ValueMap::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="ValueMap_8h_source.html#l00134">ValueMap.h:134</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html_a7efd1f0c1206d95e4fe01a9b49a57b82"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#a7efd1f0c1206d95e4fe01a9b49a57b82">llvm::SmallVectorImpl::append</a></div><div class="ttdeci">void append(ItTy in_start, ItTy in_end)</div><div class="ttdoc">Add the specified range to the end of the SmallVector.</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00687">SmallVector.h:687</a></div></div>
<div class="ttc" id="aInlineFunction_8cpp_html_ae21f217cd2f8044e639f13111a0b37db"><div class="ttname"><a href="InlineFunction_8cpp.html#ae21f217cd2f8044e639f13111a0b37db">isUsedByLifetimeMarker</a></div><div class="ttdeci">static bool isUsedByLifetimeMarker(Value *V)</div><div class="ttdef"><b>Definition:</b> <a href="InlineFunction_8cpp_source.html#l01608">InlineFunction.cpp:1608</a></div></div>
<div class="ttc" id="aELFObjHandler_8cpp_html_a043cdaf7b89aaeeb127be5d93411637f"><div class="ttname"><a href="ELFObjHandler_8cpp.html#a043cdaf7b89aaeeb127be5d93411637f">Align</a></div><div class="ttdeci">uint64_t Align</div><div class="ttdef"><b>Definition:</b> <a href="ELFObjHandler_8cpp_source.html#l00082">ELFObjHandler.cpp:82</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a46ef6115027606b67adcf4d28f3dac17"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a46ef6115027606b67adcf4d28f3dac17">llvm::BasicBlock::getFirstNonPHI</a></div><div class="ttdeci">const Instruction * getFirstNonPHI() const</div><div class="ttdoc">Returns a pointer to the first instruction in this block that is not a PHINode instruction.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00208">BasicBlock.cpp:208</a></div></div>
<div class="ttc" id="astructllvm_1_1Align_html"><div class="ttname"><a href="structllvm_1_1Align.html">llvm::Align</a></div><div class="ttdoc">This struct is a compact representation of a valid (non-zero power of two) alignment.</div><div class="ttdef"><b>Definition:</b> <a href="Alignment_8h_source.html#l00039">Alignment.h:39</a></div></div>
<div class="ttc" id="aclassllvm_1_1Metadata_html"><div class="ttname"><a href="classllvm_1_1Metadata.html">llvm::Metadata</a></div><div class="ttdoc">Root of the metadata hierarchy.</div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8h_source.html#l00061">Metadata.h:61</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallBase_html_a3ff92cec76009e859cb0c419d6e8ba5f"><div class="ttname"><a href="classllvm_1_1CallBase.html#a3ff92cec76009e859cb0c419d6e8ba5f">llvm::CallBase::getCallingConv</a></div><div class="ttdeci">CallingConv::ID getCallingConv() const</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l01465">InstrTypes.h:1465</a></div></div>
<div class="ttc" id="aclassllvm_1_1ValueMap_html_a3b82484785487f544dc6ef1c2b6a0ffd"><div class="ttname"><a href="classllvm_1_1ValueMap.html#a3b82484785487f544dc6ef1c2b6a0ffd">llvm::ValueMap::count</a></div><div class="ttdeci">size_type count(const KeyT &amp;Val) const</div><div class="ttdoc">Return 1 if the specified key is in the map, 0 otherwise.</div><div class="ttdef"><b>Definition:</b> <a href="ValueMap_8h_source.html#l00151">ValueMap.h:151</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_a9d7de807ebdfe1819df3ff6cb0f16158"><div class="ttname"><a href="classllvm_1_1Value.html#a9d7de807ebdfe1819df3ff6cb0f16158">llvm::Value::use_empty</a></div><div class="ttdeci">bool use_empty() const</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00344">Value.h:344</a></div></div>
<div class="ttc" id="anamespacellvm_1_1objcarc_html_a494b44abeacdfac8bb26d3203571d1c2"><div class="ttname"><a href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2">llvm::objcarc::ARCInstKind</a></div><div class="ttdeci">ARCInstKind</div><div class="ttdef"><b>Definition:</b> <a href="ObjCARCInstKind_8h_source.html#l00028">ObjCARCInstKind.h:28</a></div></div>
<div class="ttc" id="anamespacellvm_1_1CallingConv_html_a188c0836f8c3528401f1c236fd93b977"><div class="ttname"><a href="namespacellvm_1_1CallingConv.html#a188c0836f8c3528401f1c236fd93b977">llvm::CallingConv::ID</a></div><div class="ttdeci">unsigned ID</div><div class="ttdoc">LLVM IR allows to use arbitrary numbers as calling convention identifiers.</div><div class="ttdef"><b>Definition:</b> <a href="CallingConv_8h_source.html#l00024">CallingConv.h:24</a></div></div>
<div class="ttc" id="aType_8h_html"><div class="ttname"><a href="Type_8h.html">Type.h</a></div></div>
<div class="ttc" id="aInlineFunction_8cpp_html_aa0144ab879a098cb9b9e844e4ed06919"><div class="ttname"><a href="InlineFunction_8cpp.html#aa0144ab879a098cb9b9e844e4ed06919">getParentPad</a></div><div class="ttdeci">static Value * getParentPad(Value *EHPad)</div><div class="ttdoc">Helper for getUnwindDestToken/getUnwindDestTokenHelper.</div><div class="ttdef"><b>Definition:</b> <a href="InlineFunction_8cpp_source.html#l00237">InlineFunction.cpp:237</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallBase_html_afac5b39bcbb90d660f83d9b4bd8c6d95"><div class="ttname"><a href="classllvm_1_1CallBase.html#afac5b39bcbb90d660f83d9b4bd8c6d95">llvm::CallBase::getCaller</a></div><div class="ttdeci">Function * getCaller()</div><div class="ttdoc">Helper to get the caller (the parent function).</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l00293">Instructions.cpp:293</a></div></div>
<div class="ttc" id="aclassllvm_1_1DebugLoc_html_a55acf718f2931a7050c4ed39eb0434e7"><div class="ttname"><a href="classllvm_1_1DebugLoc.html#a55acf718f2931a7050c4ed39eb0434e7">llvm::DebugLoc::appendInlinedAt</a></div><div class="ttdeci">static DebugLoc appendInlinedAt(const DebugLoc &amp;DL, DILocation *InlinedAt, LLVMContext &amp;Ctx, DenseMap&lt; const MDNode *, MDNode * &gt; &amp;Cache)</div><div class="ttdoc">Rebuild the entire inlined-at chain for this instruction so that the top of the chain now is inlined-...</div><div class="ttdef"><b>Definition:</b> <a href="DebugLoc_8cpp_source.html#l00110">DebugLoc.cpp:110</a></div></div>
<div class="ttc" id="aclassllvm_1_1MDBuilder_html_aa1408308630d4280bd656a54dc92af1d"><div class="ttname"><a href="classllvm_1_1MDBuilder.html#aa1408308630d4280bd656a54dc92af1d">llvm::MDBuilder::createAnonymousAliasScopeDomain</a></div><div class="ttdeci">MDNode * createAnonymousAliasScopeDomain(StringRef Name=StringRef())</div><div class="ttdoc">Return metadata appropriate for an alias scope domain node.</div><div class="ttdef"><b>Definition:</b> <a href="MDBuilder_8h_source.html#l00152">MDBuilder.h:152</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_ae22f493ba8327ce92e87d3b96bce7017"><div class="ttname"><a href="classllvm_1_1Instruction.html#ae22f493ba8327ce92e87d3b96bce7017">llvm::Instruction::getMetadata</a></div><div class="ttdeci">MDNode * getMetadata(unsigned KindID) const</div><div class="ttdoc">Get the metadata of given kind attached to this Instruction.</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00275">Instruction.h:275</a></div></div>
<div class="ttc" id="astructllvm_1_1OperandBundleUse_html_a6386ca6c50ec4ef5d9a0f13e7fe8f0c9"><div class="ttname"><a href="structllvm_1_1OperandBundleUse.html#a6386ca6c50ec4ef5d9a0f13e7fe8f0c9">llvm::OperandBundleUse::getTagID</a></div><div class="ttdeci">uint32_t getTagID() const</div><div class="ttdoc">Return the tag of this operand bundle as an integer.</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l01107">InstrTypes.h:1107</a></div></div>
<div class="ttc" id="aIR_2CFG_8h_html"><div class="ttname"><a href="IR_2CFG_8h.html">CFG.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1AllocaInst_html_a3016b467a9ecb5506956f7d029509db5"><div class="ttname"><a href="classllvm_1_1AllocaInst.html#a3016b467a9ecb5506956f7d029509db5">llvm::AllocaInst::isSwiftError</a></div><div class="ttdeci">bool isSwiftError() const</div><div class="ttdoc">Return true if this alloca is used as a swifterror argument to a call.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00150">Instructions.h:150</a></div></div>
<div class="ttc" id="aclassllvm_1_1ProfileSummaryInfo_html"><div class="ttname"><a href="classllvm_1_1ProfileSummaryInfo.html">llvm::ProfileSummaryInfo</a></div><div class="ttdoc">Analysis providing profile information.</div><div class="ttdef"><b>Definition:</b> <a href="ProfileSummaryInfo_8h_source.html#l00040">ProfileSummaryInfo.h:40</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html_a7477aafbbe989ad35b96fac186d8e9fd"><div class="ttname"><a href="classllvm_1_1Function.html#a7477aafbbe989ad35b96fac186d8e9fd">llvm::Function::getAttributes</a></div><div class="ttdeci">AttributeList getAttributes() const</div><div class="ttdoc">Return the attribute list for this Function.</div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00313">Function.h:313</a></div></div>
<div class="ttc" id="aADT_2tmp_8txt_html_a07ed0bfaa124c15897944fe3eaa971ab"><div class="ttname"><a href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a></div><div class="ttdeci">Class for arbitrary precision integers APInt is a functional replacement for common case unsigned integer type like unsigned long or uint64_t</div><div class="ttdef"><b>Definition:</b> <a href="ADT_2tmp_8txt_source.html#l00001">tmp.txt:1</a></div></div>
<div class="ttc" id="aclassllvm_1_1InvokeInst_html"><div class="ttname"><a href="classllvm_1_1InvokeInst.html">llvm::InvokeInst</a></div><div class="ttdoc">Invoke instruction.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03814">Instructions.h:3814</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html_aa180549a789e99a98e599e8e183c4773"><div class="ttname"><a href="classllvm_1_1Function.html#aa180549a789e99a98e599e8e183c4773">llvm::Function::getGC</a></div><div class="ttdeci">const std::string &amp; getGC() const</div><div class="ttdef"><b>Definition:</b> <a href="Function_8cpp_source.html#l00714">Function.cpp:714</a></div></div>
<div class="ttc" id="aclassllvm_1_1AttrBuilder_html_a59d23ba2e7eac46cbc6cd3086e013b49"><div class="ttname"><a href="classllvm_1_1AttrBuilder.html#a59d23ba2e7eac46cbc6cd3086e013b49">llvm::AttrBuilder::addAttribute</a></div><div class="ttdeci">AttrBuilder &amp; addAttribute(Attribute::AttrKind Val)</div><div class="ttdoc">Add an attribute to the builder.</div><div class="ttdef"><b>Definition:</b> <a href="Attributes_8cpp_source.html#l01694">Attributes.cpp:1694</a></div></div>
<div class="ttc" id="aVectorUtils_8h_html"><div class="ttname"><a href="VectorUtils_8h.html">VectorUtils.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html_afb28a4deafe2954b0534cc6399ce518b"><div class="ttname"><a href="classllvm_1_1Function.html#afb28a4deafe2954b0534cc6399ce518b">llvm::Function::hasFnAttribute</a></div><div class="ttdeci">bool hasFnAttribute(Attribute::AttrKind Kind) const</div><div class="ttdoc">Return true if the function has the attribute.</div><div class="ttdef"><b>Definition:</b> <a href="Function_8cpp_source.html#l00640">Function.cpp:640</a></div></div>
<div class="ttc" id="aBasicBlock_8h_html"><div class="ttname"><a href="BasicBlock_8h.html">BasicBlock.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1cl_1_1opt_html"><div class="ttname"><a href="classllvm_1_1cl_1_1opt.html">llvm::cl::opt&lt; bool &gt;</a></div></div>
<div class="ttc" id="anamespacellvm_1_1RISCVFenceField_html_a147be9e9780c1e33363ea572d4c7b25fa1a33f1d911a725a1f81234a908d03edb"><div class="ttname"><a href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1a33f1d911a725a1f81234a908d03edb">llvm::RISCVFenceField::O</a></div><div class="ttdeci">@ O</div><div class="ttdef"><b>Definition:</b> <a href="RISCVBaseInfo_8h_source.html#l00277">RISCVBaseInfo.h:277</a></div></div>
<div class="ttc" id="aclassllvm_1_1StoreInst_html"><div class="ttname"><a href="classllvm_1_1StoreInst.html">llvm::StoreInst</a></div><div class="ttdoc">An instruction for storing to memory.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00301">Instructions.h:301</a></div></div>
<div class="ttc" id="aclassllvm_1_1AttributeList_html_a5604157867b3d226260f6388b987e49a"><div class="ttname"><a href="classllvm_1_1AttributeList.html#a5604157867b3d226260f6388b987e49a">llvm::AttributeList::getRetAttrs</a></div><div class="ttdeci">AttributeSet getRetAttrs() const</div><div class="ttdoc">The attributes for the ret value are returned.</div><div class="ttdef"><b>Definition:</b> <a href="Attributes_8cpp_source.html#l01458">Attributes.cpp:1458</a></div></div>
<div class="ttc" id="aclassllvm_1_1Constant_html"><div class="ttname"><a href="classllvm_1_1Constant.html">llvm::Constant</a></div><div class="ttdoc">This is an important base class in LLVM.</div><div class="ttdef"><b>Definition:</b> <a href="Constant_8h_source.html#l00041">Constant.h:41</a></div></div>
<div class="ttc" id="anamespacellvm_html_aa1fa33552f21afa988d7fa09b1a369fa"><div class="ttname"><a href="namespacellvm.html#aa1fa33552f21afa988d7fa09b1a369fa">llvm::getUnderlyingObjects</a></div><div class="ttdeci">void getUnderlyingObjects(const Value *V, SmallVectorImpl&lt; const Value * &gt; &amp;Objects, LoopInfo *LI=nullptr, unsigned MaxLookup=6)</div><div class="ttdoc">This method is similar to getUnderlyingObject except that it can look through phi and select instruct...</div><div class="ttdef"><b>Definition:</b> <a href="ValueTracking_8cpp_source.html#l04612">ValueTracking.cpp:4612</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_ae6b978645b8ac72d1a35e1298ffdd4f0"><div class="ttname"><a href="classllvm_1_1Instruction.html#ae6b978645b8ac72d1a35e1298ffdd4f0">llvm::Instruction::eraseFromParent</a></div><div class="ttdeci">SymbolTableList&lt; Instruction &gt;::iterator eraseFromParent()</div><div class="ttdoc">This method unlinks 'this' from the containing basic block and deletes it.</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8cpp_source.html#l00082">Instruction.cpp:82</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html_aaea88376352c42347dceccdd5ab1c20c"><div class="ttname"><a href="classllvm_1_1Function.html#aaea88376352c42347dceccdd5ab1c20c">llvm::Function::getReturnType</a></div><div class="ttdeci">Type * getReturnType() const</div><div class="ttdoc">Returns the type of the ret val.</div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00179">Function.h:179</a></div></div>
<div class="ttc" id="aInlineFunction_8cpp_html_a5217abbfbac8873d22a2dd6cdbb0bcc1"><div class="ttname"><a href="InlineFunction_8cpp.html#a5217abbfbac8873d22a2dd6cdbb0bcc1">inlineDebugLoc</a></div><div class="ttdeci">static DebugLoc inlineDebugLoc(DebugLoc OrigDL, DILocation *InlinedAt, LLVMContext &amp;Ctx, DenseMap&lt; const MDNode *, MDNode * &gt; &amp;IANodes)</div><div class="ttdoc">Returns a DebugLoc for a new DILocation which is a clone of OrigDL inlined at InlinedAt.</div><div class="ttdef"><b>Definition:</b> <a href="InlineFunction_8cpp_source.html#l01644">InlineFunction.cpp:1644</a></div></div>
<div class="ttc" id="aclassllvm_1_1InlineFunctionInfo_html_ae6918eedce7edea74c67aa164a7d198d"><div class="ttname"><a href="classllvm_1_1InlineFunctionInfo.html#ae6918eedce7edea74c67aa164a7d198d">llvm::InlineFunctionInfo::InlinedCalls</a></div><div class="ttdeci">SmallVector&lt; WeakTrackingVH, 8 &gt; InlinedCalls</div><div class="ttdoc">InlineFunction fills this in with callsites that were inlined from the callee.</div><div class="ttdef"><b>Definition:</b> <a href="Cloning_8h_source.html#l00228">Cloning.h:228</a></div></div>
<div class="ttc" id="aProfileSummaryInfo_8h_html"><div class="ttname"><a href="ProfileSummaryInfo_8h.html">ProfileSummaryInfo.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html_a5f494edc0a569c7fc9ff4181243be1ed"><div class="ttname"><a href="classllvm_1_1Function.html#a5f494edc0a569c7fc9ff4181243be1ed">llvm::Function::getCallingConv</a></div><div class="ttdeci">CallingConv::ID getCallingConv() const</div><div class="ttdoc">getCallingConv()/setCallingConv(CC) - These method get and set the calling convention of this functio...</div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00237">Function.h:237</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalValue_html_a9e1fc23a17e97d2d1732e753ae9251ac"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#a9e1fc23a17e97d2d1732e753ae9251ac">llvm::GlobalValue::getParent</a></div><div class="ttdeci">Module * getParent()</div><div class="ttdoc">Get the module that this global value is contained inside of...</div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00652">GlobalValue.h:652</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallInst_html_ad682514c13f12f1a8d759d422fce6aef"><div class="ttname"><a href="classllvm_1_1CallInst.html#ad682514c13f12f1a8d759d422fce6aef">llvm::CallInst::TailCallKind</a></div><div class="ttdeci">TailCallKind</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01660">Instructions.h:1660</a></div></div>
<div class="ttc" id="aInlineFunction_8cpp_html_afaa78d0b3224d3175937f997dc2bc688"><div class="ttname"><a href="InlineFunction_8cpp.html#afaa78d0b3224d3175937f997dc2bc688">hasLifetimeMarkers</a></div><div class="ttdeci">static bool hasLifetimeMarkers(AllocaInst *AI)</div><div class="ttdef"><b>Definition:</b> <a href="InlineFunction_8cpp_source.html#l01618">InlineFunction.cpp:1618</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html_a5e63b88c979e47ac7da57890a45bd2c2"><div class="ttname"><a href="classllvm_1_1Function.html#a5e63b88c979e47ac7da57890a45bd2c2">llvm::Function::hasGC</a></div><div class="ttdeci">bool hasGC() const</div><div class="ttdoc">hasGC/getGC/setGC/clearGC - The name of the garbage collection algorithm to use during code generatio...</div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00305">Function.h:305</a></div></div>
<div class="ttc" id="aclassllvm_1_1PHINode_html_a089cccb6f231efee72abc76d0f9c695f"><div class="ttname"><a href="classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">llvm::PHINode::addIncoming</a></div><div class="ttdeci">void addIncoming(Value *V, BasicBlock *BB)</div><div class="ttdoc">Add an incoming value to the end of the PHI list.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02854">Instructions.h:2854</a></div></div>
<div class="ttc" id="alib_2Target_2ARM_2README_8txt_html_ad3a99906764c35b2694ae90fa57744a5"><div class="ttname"><a href="lib_2Target_2ARM_2README_8txt.html#ad3a99906764c35b2694ae90fa57744a5">move</a></div><div class="ttdeci">compiles ldr LCPI1_0 ldr ldr mov lsr tst moveq r1 ldr LCPI1_1 and r0 bx lr It would be better to do something like to fold the shift into the conditional move</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2ARM_2README_8txt_source.html#l00546">README.txt:546</a></div></div>
<div class="ttc" id="aclassllvm_1_1LLVMContext_html"><div class="ttname"><a href="classllvm_1_1LLVMContext.html">llvm::LLVMContext</a></div><div class="ttdoc">This is an important class for using LLVM in a threaded context.</div><div class="ttdef"><b>Definition:</b> <a href="LLVMContext_8h_source.html#l00067">LLVMContext.h:67</a></div></div>
<div class="ttc" id="anamespacellvm_1_1numbers_html_a92f4283d4e0e2ea1776894b3ae93640f"><div class="ttname"><a href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">llvm::numbers::e</a></div><div class="ttdeci">constexpr double e</div><div class="ttdef"><b>Definition:</b> <a href="MathExtras_8h_source.html#l00031">MathExtras.h:31</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchInst_html_a38df51256d4b415b6a817b5e1c6d4d36"><div class="ttname"><a href="classllvm_1_1BranchInst.html#a38df51256d4b415b6a817b5e1c6d4d36">llvm::BranchInst::Create</a></div><div class="ttdeci">static BranchInst * Create(BasicBlock *IfTrue, Instruction *InsertBefore=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03195">Instructions.h:3195</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseMap_html"><div class="ttname"><a href="classllvm_1_1DenseMap.html">llvm::DenseMap</a></div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00714">DenseMap.h:714</a></div></div>
<div class="ttc" id="aIR_2DebugInfo_8h_html"><div class="ttname"><a href="IR_2DebugInfo_8h.html">DebugInfo.h</a></div></div>
<div class="ttc" id="aMD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00058">MD5.cpp:58</a></div></div>
<div class="ttc" id="aclassllvm_1_1DebugLoc_html_a4ff1bb484be62f8dac94fc087f72f524"><div class="ttname"><a href="classllvm_1_1DebugLoc.html#a4ff1bb484be62f8dac94fc087f72f524">llvm::DebugLoc::get</a></div><div class="ttdeci">DILocation * get() const</div><div class="ttdoc">Get the underlying DILocation.</div><div class="ttdef"><b>Definition:</b> <a href="DebugLoc_8cpp_source.html#l00020">DebugLoc.cpp:20</a></div></div>
<div class="ttc" id="aclassllvm_1_1AttrBuilder_html"><div class="ttname"><a href="classllvm_1_1AttrBuilder.html">llvm::AttrBuilder</a></div><div class="ttdef"><b>Definition:</b> <a href="Attributes_8h_source.html#l01040">Attributes.h:1040</a></div></div>
<div class="ttc" id="aCloning_8h_html"><div class="ttname"><a href="Cloning_8h.html">Cloning.h</a></div></div>
<div class="ttc" id="aStringExtras_8h_html"><div class="ttname"><a href="StringExtras_8h.html">StringExtras.h</a></div></div>
<div class="ttc" id="aInlineFunction_8cpp_html_afbf6d60618e520079ded1612a2941fbe"><div class="ttname"><a href="InlineFunction_8cpp.html#afbf6d60618e520079ded1612a2941fbe">updateMemprofMetadata</a></div><div class="ttdeci">static void updateMemprofMetadata(CallBase *CI, const std::vector&lt; Metadata * &gt; &amp;MIBList)</div><div class="ttdef"><b>Definition:</b> <a href="InlineFunction_8cpp_source.html#l00810">InlineFunction.cpp:810</a></div></div>
<div class="ttc" id="aclassllvm_1_1BlockFrequency_html_a8e9ed6b20c2503f66f1fd0725297aedc"><div class="ttname"><a href="classllvm_1_1BlockFrequency.html#a8e9ed6b20c2503f66f1fd0725297aedc">llvm::BlockFrequency::getFrequency</a></div><div class="ttdeci">uint64_t getFrequency() const</div><div class="ttdoc">Returns the frequency as a fixpoint number scaled by the entry frequency.</div><div class="ttdef"><b>Definition:</b> <a href="BlockFrequency_8h_source.html#l00034">BlockFrequency.h:34</a></div></div>
<div class="ttc" id="anamespacellvm_html_a5309dbf19ec5ccffe3072c6087e106d3"><div class="ttname"><a href="namespacellvm.html#a5309dbf19ec5ccffe3072c6087e106d3">llvm::isScopedEHPersonality</a></div><div class="ttdeci">bool isScopedEHPersonality(EHPersonality Pers)</div><div class="ttdoc">Returns true if this personality uses scope-style EH IR instructions: catchswitch,...</div><div class="ttdef"><b>Definition:</b> <a href="EHPersonalities_8h_source.html#l00079">EHPersonalities.h:79</a></div></div>
<div class="ttc" id="anamespacellvm_1_1cl_html_a10a041239ae1870cfcc064bfaa79fb65"><div class="ttname"><a href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">llvm::cl::init</a></div><div class="ttdeci">initializer&lt; Ty &gt; init(const Ty &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00445">CommandLine.h:445</a></div></div>
<div class="ttc" id="anamespacellvm_html_a8154638df88e4eaa568b67b23d463dac"><div class="ttname"><a href="namespacellvm.html#a8154638df88e4eaa568b67b23d463dac">llvm::make_early_inc_range</a></div><div class="ttdeci">iterator_range&lt; early_inc_iterator_impl&lt; detail::IterOfRange&lt; RangeT &gt; &gt; &gt; make_early_inc_range(RangeT &amp;&amp;Range)</div><div class="ttdoc">Make a range that does early increment to allow mutation of the underlying range without disrupting i...</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l00721">STLExtras.h:721</a></div></div>
<div class="ttc" id="anamespacellvm_1_1at_html_a5c4090098e3eaedb61973431af4898b1"><div class="ttname"><a href="namespacellvm_1_1at.html#a5c4090098e3eaedb61973431af4898b1">llvm::at::trackAssignments</a></div><div class="ttdeci">void trackAssignments(Function::iterator Start, Function::iterator End, const StorageToVarsMap &amp;Vars, const DataLayout &amp;DL, bool DebugPrints=false)</div><div class="ttdoc">Track assignments to Vars between Start and End.</div><div class="ttdef"><b>Definition:</b> <a href="DebugInfo_8cpp_source.html#l01875">DebugInfo.cpp:1875</a></div></div>
<div class="ttc" id="aInlineFunction_8cpp_html_a87cf024e879dad373029f201d5996d20"><div class="ttname"><a href="InlineFunction_8cpp.html#a87cf024e879dad373029f201d5996d20">UpdateCallGraphAfterInlining</a></div><div class="ttdeci">static void UpdateCallGraphAfterInlining(CallBase &amp;CB, Function::iterator FirstNewBlock, ValueToValueMapTy &amp;VMap, InlineFunctionInfo &amp;IFI)</div><div class="ttdoc">Once we have cloned code over from a callee into the caller, update the specified callgraph to reflec...</div><div class="ttdef"><b>Definition:</b> <a href="InlineFunction_8cpp_source.html#l01467">InlineFunction.cpp:1467</a></div></div>
<div class="ttc" id="anamespacellvm_html_aab02db480f387fca92956ef1c9a01941"><div class="ttname"><a href="namespacellvm.html#aab02db480f387fca92956ef1c9a01941">llvm::simplifyInstruction</a></div><div class="ttdeci">Value * simplifyInstruction(Instruction *I, const SimplifyQuery &amp;Q, OptimizationRemarkEmitter *ORE=nullptr)</div><div class="ttdoc">See if we can compute a simplified version of this instruction.</div><div class="ttdef"><b>Definition:</b> <a href="InstructionSimplify_8cpp_source.html#l06731">InstructionSimplify.cpp:6731</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_ae8f5bf5cc06f696b52c709677df00fbf"><div class="ttname"><a href="classllvm_1_1Instruction.html#ae8f5bf5cc06f696b52c709677df00fbf">llvm::Instruction::setDebugLoc</a></div><div class="ttdeci">void setDebugLoc(DebugLoc Loc)</div><div class="ttdoc">Set the debug location information for this instruction.</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00355">Instruction.h:355</a></div></div>
<div class="ttc" id="aclassllvm_1_1LandingPadInst_html_a56a8919a6120a8c398b382e41c8b3f1e"><div class="ttname"><a href="classllvm_1_1LandingPadInst.html#a56a8919a6120a8c398b382e41c8b3f1e">llvm::LandingPadInst::getClause</a></div><div class="ttdeci">Constant * getClause(unsigned Idx) const</div><div class="ttdoc">Get the value of the clause at index Idx.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03013">Instructions.h:3013</a></div></div>
<div class="ttc" id="aInlineFunction_8cpp_html_ae54a643a9f9d83374bb4d7d22d4662d7"><div class="ttname"><a href="InlineFunction_8cpp.html#ae54a643a9f9d83374bb4d7d22d4662d7">AddAlignmentAssumptions</a></div><div class="ttdeci">static void AddAlignmentAssumptions(CallBase &amp;CB, InlineFunctionInfo &amp;IFI)</div><div class="ttdoc">If the inlined function has non-byval align arguments, then add @llvm.assume-based alignment assumpti...</div><div class="ttdef"><b>Definition:</b> <a href="InlineFunction_8cpp_source.html#l01426">InlineFunction.cpp:1426</a></div></div>
<div class="ttc" id="aclassllvm_1_1details_1_1FixedOrScalableQuantity_html_a33880aaca0ad05e5f1557f079305bde5"><div class="ttname"><a href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#a33880aaca0ad05e5f1557f079305bde5">llvm::details::FixedOrScalableQuantity::getFixedValue</a></div><div class="ttdeci">constexpr ScalarTy getFixedValue() const</div><div class="ttdef"><b>Definition:</b> <a href="TypeSize_8h_source.html#l00182">TypeSize.h:182</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseMapBase_html_a0c047f127ed4380a6f383d70bec4eb94"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#a0c047f127ed4380a6f383d70bec4eb94">llvm::DenseMapBase::find</a></div><div class="ttdeci">iterator find(const_arg_type_t&lt; KeyT &gt; Val)</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00150">DenseMap.h:150</a></div></div>
<div class="ttc" id="aIRBuilder_8h_html"><div class="ttname"><a href="IRBuilder_8h.html">IRBuilder.h</a></div></div>
<div class="ttc" id="aSILowerControlFlow_8cpp_html_a4868c5d81c5ccc98c47aeab6244346a0"><div class="ttname"><a href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a></div><div class="ttdeci">assert(ImpDefSCC.getReg()==AMDGPU::SCC &amp;&amp;ImpDefSCC.isDef())</div></div>
<div class="ttc" id="astructllvm_1_1ValueMapIterator_1_1ValueTypeProxy_html_a5bcf5b029fa9492c00d2329def9b5137"><div class="ttname"><a href="structllvm_1_1ValueMapIterator_1_1ValueTypeProxy.html#a5bcf5b029fa9492c00d2329def9b5137">llvm::ValueMapIterator::ValueTypeProxy::second</a></div><div class="ttdeci">ValueT &amp; second</div><div class="ttdef"><b>Definition:</b> <a href="ValueMap_8h_source.html#l00345">ValueMap.h:345</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a565f546ad95bd3a9bbe9a1e5040803f0"><div class="ttname"><a href="classllvm_1_1Instruction.html#a565f546ad95bd3a9bbe9a1e5040803f0">llvm::Instruction::hasMetadata</a></div><div class="ttdeci">bool hasMetadata() const</div><div class="ttdoc">Return true if this instruction has any metadata attached to it.</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00257">Instruction.h:257</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallBase_html_aecc0c27ae96638bc9d8fa4caffa92c31"><div class="ttname"><a href="classllvm_1_1CallBase.html#aecc0c27ae96638bc9d8fa4caffa92c31">llvm::CallBase::hasOperandBundles</a></div><div class="ttdeci">bool hasOperandBundles() const</div><div class="ttdoc">Return true if this User has any operand bundles.</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l01954">InstrTypes.h:1954</a></div></div>
<div class="ttc" id="anamespacestd_html_ab8424022895aee3e366fb9a32f2883cb"><div class="ttname"><a href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a></div><div class="ttdeci">void swap(llvm::BitVector &amp;LHS, llvm::BitVector &amp;RHS)</div><div class="ttdoc">Implement std::swap in terms of BitVector swap.</div><div class="ttdef"><b>Definition:</b> <a href="BitVector_8h_source.html#l00853">BitVector.h:853</a></div></div>
<div class="ttc" id="aiterator__range_8h_html"><div class="ttname"><a href="iterator__range_8h.html">iterator_range.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_ae8eaa0b4eeac52a2b2282cb1bfd981ae"><div class="ttname"><a href="classllvm_1_1Type.html#ae8eaa0b4eeac52a2b2282cb1bfd981ae">llvm::Type::isVoidTy</a></div><div class="ttdeci">bool isVoidTy() const</div><div class="ttdoc">Return true if this is 'void'.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00140">Type.h:140</a></div></div>
<div class="ttc" id="anamespacellvm_html_aa39ca296d9689933bb0279c9ac3ee1fc"><div class="ttname"><a href="namespacellvm.html#aa39ca296d9689933bb0279c9ac3ee1fc">llvm::salvageKnowledge</a></div><div class="ttdeci">void salvageKnowledge(Instruction *I, AssumptionCache *AC=nullptr, DominatorTree *DT=nullptr)</div><div class="ttdoc">Calls BuildAssumeFromInst and if the resulting llvm.assume is valid insert if before I.</div><div class="ttdef"><b>Definition:</b> <a href="AssumeBundleBuilder_8cpp_source.html#l00293">AssumeBundleBuilder.cpp:293</a></div></div>
<div class="ttc" id="aclassllvm_1_1AssumptionCache_html_a7f02822253b078960693acc2f30d4817"><div class="ttname"><a href="classllvm_1_1AssumptionCache.html#a7f02822253b078960693acc2f30d4817">llvm::AssumptionCache::registerAssumption</a></div><div class="ttdeci">void registerAssumption(CondGuardInst *CI)</div><div class="ttdoc">Add an @llvm.assume intrinsic to this function's cache.</div><div class="ttdef"><b>Definition:</b> <a href="AssumptionCache_8cpp_source.html#l00231">AssumptionCache.cpp:231</a></div></div>
<div class="ttc" id="aclassllvm_1_1Module_html"><div class="ttname"><a href="classllvm_1_1Module.html">llvm::Module</a></div><div class="ttdoc">A Module instance is used to store all the information related to an LLVM module.</div><div class="ttdef"><b>Definition:</b> <a href="Module_8h_source.html#l00065">Module.h:65</a></div></div>
<div class="ttc" id="aclassllvm_1_1MDNode_html"><div class="ttname"><a href="classllvm_1_1MDNode.html">llvm::MDNode</a></div><div class="ttdoc">Metadata node.</div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8h_source.html#l00943">Metadata.h:943</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallBase_html_a7d1bb46cb6e28a5907c4185157804911"><div class="ttname"><a href="classllvm_1_1CallBase.html#a7d1bb46cb6e28a5907c4185157804911">llvm::CallBase::Create</a></div><div class="ttdeci">static CallBase * Create(CallBase *CB, ArrayRef&lt; OperandBundleDef &gt; Bundles, Instruction *InsertPt=nullptr)</div><div class="ttdoc">Create a clone of CB with a different set of operand bundles and insert it before InsertPt.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l00266">Instructions.cpp:266</a></div></div>
<div class="ttc" id="anamespacellvm_html_a1481db7804704b4beb48e8c2ad4c94b2"><div class="ttname"><a href="namespacellvm.html#a1481db7804704b4beb48e8c2ad4c94b2">llvm::changeToInvokeAndSplitBasicBlock</a></div><div class="ttdeci">BasicBlock * changeToInvokeAndSplitBasicBlock(CallInst *CI, BasicBlock *UnwindEdge, DomTreeUpdater *DTU=nullptr)</div><div class="ttdoc">Convert the CallInst to InvokeInst with the specified unwind edge basic block.</div><div class="ttdef"><b>Definition:</b> <a href="Transforms_2Utils_2Local_8cpp_source.html#l02335">Local.cpp:2335</a></div></div>
<div class="ttc" id="anamespacellvm_html_ac03ea7d56bf43713b1c15ccf95081d6a"><div class="ttname"><a href="namespacellvm.html#ac03ea7d56bf43713b1c15ccf95081d6a">llvm::isEscapeSource</a></div><div class="ttdeci">bool isEscapeSource(const Value *V)</div><div class="ttdoc">Returns true if the pointer is one which would have been considered an escape by isNonEscapingLocalOb...</div><div class="ttdef"><b>Definition:</b> <a href="AliasAnalysis_8cpp_source.html#l00894">AliasAnalysis.cpp:894</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSetImpl_html_a1f475b0df44ebd7169e720fa1bf9169e"><div class="ttname"><a href="classllvm_1_1SmallPtrSetImpl.html#a1f475b0df44ebd7169e720fa1bf9169e">llvm::SmallPtrSetImpl::count</a></div><div class="ttdeci">size_type count(ConstPtrType Ptr) const</div><div class="ttdoc">count - Return 1 if the specified pointer is in the set, 0 otherwise.</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00383">SmallPtrSet.h:383</a></div></div>
<div class="ttc" id="aAssumeBundleBuilder_8cpp_html_afb136e0532bcaed86521b462e6538d62"><div class="ttname"><a href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a></div><div class="ttdeci">assume Assume Builder</div><div class="ttdef"><b>Definition:</b> <a href="AssumeBundleBuilder_8cpp_source.html#l00651">AssumeBundleBuilder.cpp:651</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html"><div class="ttname"><a href="classllvm_1_1APInt.html">llvm::APInt</a></div><div class="ttdoc">Class for arbitrary precision integers.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00075">APInt.h:75</a></div></div>
<div class="ttc" id="aclassllvm_1_1User_html_a5fa9b8e1842b354f64c1ba6be0a4a17f"><div class="ttname"><a href="classllvm_1_1User.html#a5fa9b8e1842b354f64c1ba6be0a4a17f">llvm::User::setOperand</a></div><div class="ttdeci">void setOperand(unsigned i, Value *Val)</div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00174">User.h:174</a></div></div>
<div class="ttc" id="aInlineFunction_8cpp_html_ac6ad5b09bf38c4fc9d0c8a5b598fde3c"><div class="ttname"><a href="InlineFunction_8cpp.html#ac6ad5b09bf38c4fc9d0c8a5b598fde3c">fixupAssignments</a></div><div class="ttdeci">static void fixupAssignments(Function::iterator Start, Function::iterator End)</div><div class="ttdoc">Update inlined instructions' DIAssignID metadata.</div><div class="ttdef"><b>Definition:</b> <a href="InlineFunction_8cpp_source.html#l01794">InlineFunction.cpp:1794</a></div></div>
<div class="ttc" id="aclassllvm_1_1IRBuilderBase_html_aed7ebff53a4fe006b39662f94e976d24"><div class="ttname"><a href="classllvm_1_1IRBuilderBase.html#aed7ebff53a4fe006b39662f94e976d24">llvm::IRBuilderBase::CreateNoAliasScopeDeclaration</a></div><div class="ttdeci">Instruction * CreateNoAliasScopeDeclaration(Value *Scope)</div><div class="ttdoc">Create a llvm.experimental.noalias.scope.decl intrinsic call.</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8cpp_source.html#l00572">IRBuilder.cpp:572</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallBase_html_ac62778065b99372cc62cf994b967e7e8"><div class="ttname"><a href="classllvm_1_1CallBase.html#ac62778065b99372cc62cf994b967e7e8">llvm::CallBase::getIntrinsicID</a></div><div class="ttdeci">Intrinsic::ID getIntrinsicID() const</div><div class="ttdoc">Returns the intrinsic ID of the intrinsic called or Intrinsic::not_intrinsic if the called function i...</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l00322">Instructions.cpp:322</a></div></div>
<div class="ttc" id="aMachineInstrBundle_8cpp_html_af44c9b089359803924e0b92bea3b6d03"><div class="ttname"><a href="MachineInstrBundle_8cpp.html#af44c9b089359803924e0b92bea3b6d03">getDebugLoc</a></div><div class="ttdeci">static DebugLoc getDebugLoc(MachineBasicBlock::instr_iterator FirstMI, MachineBasicBlock::instr_iterator LastMI)</div><div class="ttdoc">Return the first found DebugLoc that has a DILocation, given a range of instructions.</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBundle_8cpp_source.html#l00110">MachineInstrBundle.cpp:110</a></div></div>
<div class="ttc" id="aclassllvm_1_1DominatorTreeBase_html_aa0641ae965656ff9988d67a35140e4d9"><div class="ttname"><a href="classllvm_1_1DominatorTreeBase.html#aa0641ae965656ff9988d67a35140e4d9">llvm::DominatorTreeBase::recalculate</a></div><div class="ttdeci">void recalculate(ParentType &amp;Func)</div><div class="ttdoc">recalculate - compute a dominator tree for the given function</div><div class="ttdef"><b>Definition:</b> <a href="GenericDomTree_8h_source.html#l00795">GenericDomTree.h:795</a></div></div>
<div class="ttc" id="anamespacellvm_html_a7a6386c071e1087512cdc8a4071a02b5"><div class="ttname"><a href="namespacellvm.html#a7a6386c071e1087512cdc8a4071a02b5">llvm::CloneAndPruneFunctionInto</a></div><div class="ttdeci">void CloneAndPruneFunctionInto(Function *NewFunc, const Function *OldFunc, ValueToValueMapTy &amp;VMap, bool ModuleLevelChanges, SmallVectorImpl&lt; ReturnInst * &gt; &amp;Returns, const char *NameSuffix=&quot;&quot;, ClonedCodeInfo *CodeInfo=nullptr)</div><div class="ttdoc">This works exactly like CloneFunctionInto, except that it does some simple constant prop and DCE on t...</div><div class="ttdef"><b>Definition:</b> <a href="CloneFunction_8cpp_source.html#l00931">CloneFunction.cpp:931</a></div></div>
<div class="ttc" id="anamespacellvm_1_1memprof_html_ab5636c9dedf3853480a075cefc7cc1fa"><div class="ttname"><a href="namespacellvm_1_1memprof.html#ab5636c9dedf3853480a075cefc7cc1fa">llvm::memprof::getMIBStackNode</a></div><div class="ttdeci">MDNode * getMIBStackNode(const MDNode *MIB)</div><div class="ttdoc">Returns the stack node from an MIB metadata node.</div><div class="ttdef"><b>Definition:</b> <a href="MemoryProfileInfo_8cpp_source.html#l00055">MemoryProfileInfo.cpp:55</a></div></div>
<div class="ttc" id="anamespacellvm_html_a57f2ca0e57f4f7b13f56f9aa16af3e0d"><div class="ttname"><a href="namespacellvm.html#a57f2ca0e57f4f7b13f56f9aa16af3e0d">llvm::min</a></div><div class="ttdeci">Expected&lt; ExpressionValue &gt; min(const ExpressionValue &amp;Lhs, const ExpressionValue &amp;Rhs)</div><div class="ttdef"><b>Definition:</b> <a href="FileCheck_8cpp_source.html#l00357">FileCheck.cpp:357</a></div></div>
<div class="ttc" id="aDataLayout_8h_html"><div class="ttname"><a href="DataLayout_8h.html">DataLayout.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallBase_html_a87921b2b4748a722da30339103c08f62"><div class="ttname"><a href="classllvm_1_1CallBase.html#a87921b2b4748a722da30339103c08f62">llvm::CallBase::getOperandBundle</a></div><div class="ttdeci">std::optional&lt; OperandBundleUse &gt; getOperandBundle(StringRef Name) const</div><div class="ttdoc">Return an operand bundle by name, if present.</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l02036">InstrTypes.h:2036</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html_ae6db8746934e6feae3649a8709fce3cc"><div class="ttname"><a href="classllvm_1_1Function.html#ae6db8746934e6feae3649a8709fce3cc">llvm::Function::setCallingConv</a></div><div class="ttdeci">void setCallingConv(CallingConv::ID CC)</div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00241">Function.h:241</a></div></div>
<div class="ttc" id="aclassllvm_1_1AssumptionCache_html"><div class="ttname"><a href="classllvm_1_1AssumptionCache.html">llvm::AssumptionCache</a></div><div class="ttdoc">A cache of @llvm.assume calls within a function.</div><div class="ttdef"><b>Definition:</b> <a href="AssumptionCache_8h_source.html#l00042">AssumptionCache.h:42</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallBase_html_a1b38c4ecbbce4814b679f08b72b1d67f"><div class="ttname"><a href="classllvm_1_1CallBase.html#a1b38c4ecbbce4814b679f08b72b1d67f">llvm::CallBase::getOperandBundleAt</a></div><div class="ttdeci">OperandBundleUse getOperandBundleAt(unsigned Index) const</div><div class="ttdoc">Return the operand bundle at a specific index.</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l02005">InstrTypes.h:2005</a></div></div>
<div class="ttc" id="aSupport_2ErrorHandling_8h_html_ace243f5c25697a1107cce46626b3dc94"><div class="ttname"><a href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a></div><div class="ttdeci">#define llvm_unreachable(msg)</div><div class="ttdoc">Marks that the current location is not supposed to be reachable.</div><div class="ttdef"><b>Definition:</b> <a href="Support_2ErrorHandling_8h_source.html#l00143">ErrorHandling.h:143</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_a6393a2d4fe7e10b28a0dcc35f881567b"><div class="ttname"><a href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">llvm::Value::getType</a></div><div class="ttdeci">Type * getType() const</div><div class="ttdoc">All values are typed, get the type of this value.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00255">Value.h:255</a></div></div>
<div class="ttc" id="aclassllvm_1_1MDNode_html_a3279d6d110c594673e692308fce00fab"><div class="ttname"><a href="classllvm_1_1MDNode.html#a3279d6d110c594673e692308fce00fab">llvm::MDNode::concatenate</a></div><div class="ttdeci">static MDNode * concatenate(MDNode *A, MDNode *B)</div><div class="ttdoc">Methods for metadata merging.</div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8cpp_source.html#l01005">Metadata.cpp:1005</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a6a66ebb3aa12757479a3c88de77d78f8"><div class="ttname"><a href="classllvm_1_1Instruction.html#a6a66ebb3aa12757479a3c88de77d78f8">llvm::Instruction::getFunction</a></div><div class="ttdeci">const Function * getFunction() const</div><div class="ttdoc">Return the function this instruction belongs to.</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8cpp_source.html#l00074">Instruction.cpp:74</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_a3ab5fc45117b450e8bb04e564cb6e5f2"><div class="ttname"><a href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">llvm::Value::replaceAllUsesWith</a></div><div class="ttdeci">void replaceAllUsesWith(Value *V)</div><div class="ttdoc">Change all uses of this to point to a new Value.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00532">Value.cpp:532</a></div></div>
<div class="ttc" id="aInlineFunction_8cpp_html_ac51fa4a21d783cc9e8c2cd5992cf8f6b"><div class="ttname"><a href="InlineFunction_8cpp.html#ac51fa4a21d783cc9e8c2cd5992cf8f6b">HandleByValArgument</a></div><div class="ttdeci">static Value * HandleByValArgument(Type *ByValType, Value *Arg, Instruction *TheCall, const Function *CalledFunc, InlineFunctionInfo &amp;IFI, MaybeAlign ByValAlignment)</div><div class="ttdoc">When inlining a call site that has a byval argument, we have to make the implicit memcpy explicit by ...</div><div class="ttdef"><b>Definition:</b> <a href="InlineFunction_8cpp_source.html#l01555">InlineFunction.cpp:1555</a></div></div>
<div class="ttc" id="aclassuint32__t_html"><div class="ttname"><a href="classuint32__t.html">uint32_t</a></div></div>
<div class="ttc" id="aInlineFunction_8cpp_html_a493e20406e393ad60cef6e39e8465312"><div class="ttname"><a href="InlineFunction_8cpp.html#a493e20406e393ad60cef6e39e8465312">AddReturnAttributes</a></div><div class="ttdeci">static void AddReturnAttributes(CallBase &amp;CB, ValueToValueMapTy &amp;VMap)</div><div class="ttdef"><b>Definition:</b> <a href="InlineFunction_8cpp_source.html#l01370">InlineFunction.cpp:1370</a></div></div>
<div class="ttc" id="anamespacellvm_html_a39d3d23a084c4544ee5903203db10e8a"><div class="ttname"><a href="namespacellvm.html#a39d3d23a084c4544ee5903203db10e8a">llvm::append_range</a></div><div class="ttdeci">void append_range(Container &amp;C, Range &amp;&amp;R)</div><div class="ttdoc">Wrapper function to append a range to a container.</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l02014">STLExtras.h:2014</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_ab3fc0225d8aaf8434026c3573f961f2c"><div class="ttname"><a href="classllvm_1_1Value.html#ab3fc0225d8aaf8434026c3573f961f2c">llvm::Value::getContext</a></div><div class="ttdeci">LLVMContext &amp; getContext() const</div><div class="ttdoc">All values hold a context through their type.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00994">Value.cpp:994</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html_a97fb0bcc88f78900c3d4780d963540e0"><div class="ttname"><a href="classllvm_1_1Function.html#a97fb0bcc88f78900c3d4780d963540e0">llvm::Function::getParamAlign</a></div><div class="ttdeci">MaybeAlign getParamAlign(unsigned ArgNo) const</div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00440">Function.h:440</a></div></div>
<div class="ttc" id="aclassllvm_1_1ilist__node__impl_html_af719fc783be6589465137d997701a432"><div class="ttname"><a href="classllvm_1_1ilist__node__impl.html#af719fc783be6589465137d997701a432">llvm::ilist_node_impl::getIterator</a></div><div class="ttdeci">self_iterator getIterator()</div><div class="ttdef"><b>Definition:</b> <a href="ilist__node_8h_source.html#l00082">ilist_node.h:82</a></div></div>
<div class="ttc" id="aAArch64SLSHardening_8cpp_html_ad467c4ab9119043f9b7750ab986be61a"><div class="ttname"><a href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a></div><div class="ttdeci">MachineBasicBlock MachineBasicBlock::iterator DebugLoc DL</div><div class="ttdef"><b>Definition:</b> <a href="AArch64SLSHardening_8cpp_source.html#l00076">AArch64SLSHardening.cpp:76</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html_af7736e14235372b75b72e119f852c280"><div class="ttname"><a href="classllvm_1_1Function.html#af7736e14235372b75b72e119f852c280">llvm::Function::onlyReadsMemory</a></div><div class="ttdeci">bool onlyReadsMemory() const</div><div class="ttdoc">Determine if the function does not access or only reads memory.</div><div class="ttdef"><b>Definition:</b> <a href="Function_8cpp_source.html#l00771">Function.cpp:771</a></div></div>
<div class="ttc" id="aInlineFunction_8cpp_html_afa5f37b98bb6d7bfe55e6d6267aba424"><div class="ttname"><a href="InlineFunction_8cpp.html#afa5f37b98bb6d7bfe55e6d6267aba424">PreserveAlignmentAssumptions</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; PreserveAlignmentAssumptions(&quot;preserve-alignment-assumptions-during-inlining&quot;, cl::init(false), cl::Hidden, cl::desc(&quot;Convert align attributes to assumptions during inlining.&quot;))</div></div>
<div class="ttc" id="anamespacellvm_1_1objcarc_html_a0174304150a18968bb6e6436f5c675f2"><div class="ttname"><a href="namespacellvm_1_1objcarc.html#a0174304150a18968bb6e6436f5c675f2">llvm::objcarc::getAttachedARCFunctionKind</a></div><div class="ttdeci">ARCInstKind getAttachedARCFunctionKind(const CallBase *CB)</div><div class="ttdoc">This function returns the ARCInstKind of the function attached to operand bundle clang_arc_attachedca...</div><div class="ttdef"><b>Definition:</b> <a href="ObjCARCUtil_8h_source.html#l00060">ObjCARCUtil.h:60</a></div></div>
<div class="ttc" id="aMIRSampleProfile_8cpp_html_a009775794ead70aa23c76df46ab4ed8a"><div class="ttname"><a href="MIRSampleProfile_8cpp.html#a009775794ead70aa23c76df46ab4ed8a">Profile</a></div><div class="ttdeci">Load MIR Sample Profile</div><div class="ttdef"><b>Definition:</b> <a href="MIRSampleProfile_8cpp_source.html#l00071">MIRSampleProfile.cpp:71</a></div></div>
<div class="ttc" id="anamespacellvm_html_ad66c4759666aab78529658362b498c74"><div class="ttname"><a href="namespacellvm.html#ad66c4759666aab78529658362b498c74">llvm::pred_empty</a></div><div class="ttdeci">bool pred_empty(const BasicBlock *BB)</div><div class="ttdef"><b>Definition:</b> <a href="IR_2CFG_8h_source.html#l00118">CFG.h:118</a></div></div>
<div class="ttc" id="anamespacellvm_html_aecd4ed57fa6a20d048310d43f5c96da9"><div class="ttname"><a href="namespacellvm.html#aecd4ed57fa6a20d048310d43f5c96da9">llvm::updateLoopMetadataDebugLocations</a></div><div class="ttdeci">void updateLoopMetadataDebugLocations(Instruction &amp;I, function_ref&lt; Metadata *(Metadata *)&gt; Updater)</div><div class="ttdoc">Update the debug locations contained within the MD_loop metadata attached to the instruction I,...</div><div class="ttdef"><b>Definition:</b> <a href="DebugInfo_8cpp_source.html#l00389">DebugInfo.cpp:389</a></div></div>
<div class="ttc" id="aclassllvm_1_1IntrinsicInst_html_a04df6c03772f85899d30bdcd06cbcd06"><div class="ttname"><a href="classllvm_1_1IntrinsicInst.html#a04df6c03772f85899d30bdcd06cbcd06">llvm::IntrinsicInst::mayLowerToFunctionCall</a></div><div class="ttdeci">static bool mayLowerToFunctionCall(Intrinsic::ID IID)</div><div class="ttdoc">Check if the intrinsic might lower into a regular function call in the course of IR transformations.</div><div class="ttdef"><b>Definition:</b> <a href="IntrinsicInst_8cpp_source.html#l00036">IntrinsicInst.cpp:36</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallInst_html_ad3c897ba734b78e973db4622dff7bdcb"><div class="ttname"><a href="classllvm_1_1CallInst.html#ad3c897ba734b78e973db4622dff7bdcb">llvm::CallInst::isMustTailCall</a></div><div class="ttdeci">bool isMustTailCall() const</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01682">Instructions.h:1682</a></div></div>
<div class="ttc" id="aclassllvm_1_1MDTuple_html_ac2e84f7e25af6e1de8cb811a57c6ee29"><div class="ttname"><a href="classllvm_1_1MDTuple.html#ac2e84f7e25af6e1de8cb811a57c6ee29">llvm::MDTuple::getTemporary</a></div><div class="ttdeci">static TempMDTuple getTemporary(LLVMContext &amp;Context, ArrayRef&lt; Metadata * &gt; MDs)</div><div class="ttdoc">Return a temporary node.</div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8h_source.html#l01376">Metadata.h:1376</a></div></div>
<div class="ttc" id="aclassllvm_1_1LLVMContext_html_a800c1300065ca1615d2f4fb88623afd5adb925bc2eb2c117b3ec0b76d1e267127"><div class="ttname"><a href="classllvm_1_1LLVMContext.html#a800c1300065ca1615d2f4fb88623afd5adb925bc2eb2c117b3ec0b76d1e267127">llvm::LLVMContext::OB_kcfi</a></div><div class="ttdeci">@ OB_kcfi</div><div class="ttdef"><b>Definition:</b> <a href="LLVMContext_8h_source.html#l00097">LLVMContext.h:97</a></div></div>
<div class="ttc" id="aBlockFrequencyInfo_8h_html"><div class="ttname"><a href="BlockFrequencyInfo_8h.html">BlockFrequencyInfo.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1MDNode_html_a21a975fd58c287a6ca3f1c89c048e7d3"><div class="ttname"><a href="classllvm_1_1MDNode.html#a21a975fd58c287a6ca3f1c89c048e7d3">llvm::MDNode::getDistinct</a></div><div class="ttdeci">static MDTuple * getDistinct(LLVMContext &amp;Context, ArrayRef&lt; Metadata * &gt; MDs)</div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8h_source.html#l01407">Metadata.h:1407</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_adb5c319f5905c1d3ca9eb5df546388c5"><div class="ttname"><a href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">llvm::Value::getName</a></div><div class="ttdeci">StringRef getName() const</div><div class="ttdoc">Return a constant reference to the value's name.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00308">Value.cpp:308</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a0566221f10834bfcea70965379745a20"><div class="ttname"><a href="classllvm_1_1Type.html#a0566221f10834bfcea70965379745a20">llvm::Type::getContext</a></div><div class="ttdeci">LLVMContext &amp; getContext() const</div><div class="ttdoc">Return the LLVMContext in which this type was uniqued.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00129">Type.h:129</a></div></div>
<div class="ttc" id="aclassllvm_1_1ValueMap_html"><div class="ttname"><a href="classllvm_1_1ValueMap.html">llvm::ValueMap&lt; const Value *, WeakTrackingVH &gt;</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoadInst_html"><div class="ttname"><a href="classllvm_1_1LoadInst.html">llvm::LoadInst</a></div><div class="ttdoc">An instruction for reading from memory.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00177">Instructions.h:177</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseMapBase_html_a99f811d53704275b4158c62a2dd138d9"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#a99f811d53704275b4158c62a2dd138d9">llvm::DenseMapBase&lt; DenseMap&lt; KeyT, ValueT, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;, KeyT, ValueT, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;::insert</a></div><div class="ttdeci">std::pair&lt; iterator, bool &gt; insert(const std::pair&lt; KeyT, ValueT &gt; &amp;KV)</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00207">DenseMap.h:207</a></div></div>
<div class="ttc" id="anamespacellvm_html_a5d56157a385f8cd7d3e54ed87da1ba6a"><div class="ttname"><a href="namespacellvm.html#a5d56157a385f8cd7d3e54ed87da1ba6a">llvm::EHPersonality</a></div><div class="ttdeci">EHPersonality</div><div class="ttdef"><b>Definition:</b> <a href="EHPersonalities_8h_source.html#l00021">EHPersonalities.h:21</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallBase_html_a4cbb2344996abd4332716e76178ad4f4"><div class="ttname"><a href="classllvm_1_1CallBase.html#a4cbb2344996abd4332716e76178ad4f4">llvm::CallBase::paramHasAttr</a></div><div class="ttdeci">bool paramHasAttr(unsigned ArgNo, Attribute::AttrKind Kind) const</div><div class="ttdoc">Determine whether the argument or parameter has the given attribute.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l00352">Instructions.cpp:352</a></div></div>
<div class="ttc" id="anamespacellvm_1_1objcarc_html_aa72ef5ef299b7531b84aafcf9c1f755f"><div class="ttname"><a href="namespacellvm_1_1objcarc.html#aa72ef5ef299b7531b84aafcf9c1f755f">llvm::objcarc::GetRCIdentityRoot</a></div><div class="ttdeci">const Value * GetRCIdentityRoot(const Value *V)</div><div class="ttdoc">The RCIdentity root of a value V is a dominating value U for which retaining or releasing U is equiva...</div><div class="ttdef"><b>Definition:</b> <a href="ObjCARCAnalysisUtils_8h_source.html#l00110">ObjCARCAnalysisUtils.h:110</a></div></div>
<div class="ttc" id="aclassllvm_1_1Constant_html_a0ebfdc2c511407c9ba517ccde6cad85f"><div class="ttname"><a href="classllvm_1_1Constant.html#a0ebfdc2c511407c9ba517ccde6cad85f">llvm::Constant::stripPointerCasts</a></div><div class="ttdeci">const Constant * stripPointerCasts() const</div><div class="ttdef"><b>Definition:</b> <a href="Constant_8h_source.html#l00213">Constant.h:213</a></div></div>
<div class="ttc" id="aclassllvm_1_1Init_html"><div class="ttname"><a href="classllvm_1_1Init.html">llvm::Init</a></div><div class="ttdef"><b>Definition:</b> <a href="Record_8h_source.html#l00282">Record.h:282</a></div></div>
<div class="ttc" id="anamespacellvm_1_1Intrinsic_html_aefa39f6b622360ce4e947feb9f671b73"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#aefa39f6b622360ce4e947feb9f671b73">llvm::Intrinsic::getDeclaration</a></div><div class="ttdeci">Function * getDeclaration(Module *M, ID id, ArrayRef&lt; Type * &gt; Tys=std::nullopt)</div><div class="ttdoc">Create or insert an LLVM Function declaration for an intrinsic, and return it.</div><div class="ttdef"><b>Definition:</b> <a href="Function_8cpp_source.html#l01502">Function.cpp:1502</a></div></div>
<div class="ttc" id="aclassllvm_1_1AtomicRMWInst_html"><div class="ttname"><a href="classllvm_1_1AtomicRMWInst.html">llvm::AtomicRMWInst</a></div><div class="ttdoc">an instruction that atomically reads a memory location, combines it with another value,...</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00718">Instructions.h:718</a></div></div>
<div class="ttc" id="astructllvm_1_1ClonedCodeInfo_html_a6bbe5e652464ac9213907e3446874900"><div class="ttname"><a href="structllvm_1_1ClonedCodeInfo.html#a6bbe5e652464ac9213907e3446874900">llvm::ClonedCodeInfo::ContainsCalls</a></div><div class="ttdeci">bool ContainsCalls</div><div class="ttdoc">This is set to true if the cloned code contains a normal call instruction.</div><div class="ttdef"><b>Definition:</b> <a href="Cloning_8h_source.html#l00064">Cloning.h:64</a></div></div>
<div class="ttc" id="aObjCARCAnalysisUtils_8h_html"><div class="ttname"><a href="ObjCARCAnalysisUtils_8h.html">ObjCARCAnalysisUtils.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallBase_html_aa87fae97a8c702741eca5a95748af49d"><div class="ttname"><a href="classllvm_1_1CallBase.html#aa87fae97a8c702741eca5a95748af49d">llvm::CallBase::doesNotThrow</a></div><div class="ttdeci">bool doesNotThrow() const</div><div class="ttdoc">Determine if the call cannot unwind.</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l01908">InstrTypes.h:1908</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_1_1ProfileCount_html_a3f91c16432464ed01d0ff1b380786f9b"><div class="ttname"><a href="classllvm_1_1Function_1_1ProfileCount.html#a3f91c16432464ed01d0ff1b380786f9b">llvm::Function::ProfileCount::getCount</a></div><div class="ttdeci">uint64_t getCount() const</div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00260">Function.h:260</a></div></div>
<div class="ttc" id="aclassllvm_1_1InlineFunctionInfo_html_afee77c39305987451e9495b749863d07"><div class="ttname"><a href="classllvm_1_1InlineFunctionInfo.html#afee77c39305987451e9495b749863d07">llvm::InlineFunctionInfo::InlinedCallSites</a></div><div class="ttdeci">SmallVector&lt; CallBase *, 8 &gt; InlinedCallSites</div><div class="ttdoc">All of the new call sites inlined into the caller.</div><div class="ttdef"><b>Definition:</b> <a href="Cloning_8h_source.html#l00235">Cloning.h:235</a></div></div>
<div class="ttc" id="aArgument_8h_html"><div class="ttname"><a href="Argument_8h.html">Argument.h</a></div></div>
<div class="ttc" id="aInlineFunction_8cpp_html_afab29f1ed29c826e504beee9867df6e3"><div class="ttname"><a href="InlineFunction_8cpp.html#afab29f1ed29c826e504beee9867df6e3">HandleByValArgumentInit</a></div><div class="ttdeci">static void HandleByValArgumentInit(Type *ByValType, Value *Dst, Value *Src, Module *M, BasicBlock *InsertBlock, InlineFunctionInfo &amp;IFI)</div><div class="ttdef"><b>Definition:</b> <a href="InlineFunction_8cpp_source.html#l01538">InlineFunction.cpp:1538</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_ab706e7ebb1969c5e34f28bfcf2ff719e"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#ab706e7ebb1969c5e34f28bfcf2ff719e">llvm::BasicBlock::front</a></div><div class="ttdeci">const Instruction &amp; front() const</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00326">BasicBlock.h:326</a></div></div>
<div class="ttc" id="aAMDGPULibCalls_8cpp_html_a537c835c34f0b44b6ad2696643754390"><div class="ttname"><a href="AMDGPULibCalls_8cpp.html#a537c835c34f0b44b6ad2696643754390">Callee</a></div><div class="ttdeci">amdgpu Simplify well known AMD library false FunctionCallee Callee</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULibCalls_8cpp_source.html#l00187">AMDGPULibCalls.cpp:187</a></div></div>
<div class="ttc" id="aclassllvm_1_1MDNode_html_a936739514bcdb01ddd2826fa70cf15a5"><div class="ttname"><a href="classllvm_1_1MDNode.html#a936739514bcdb01ddd2826fa70cf15a5">llvm::MDNode::getContext</a></div><div class="ttdeci">LLVMContext &amp; getContext() const</div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8h_source.html#l01107">Metadata.h:1107</a></div></div>
<div class="ttc" id="aObjCARCUtil_8h_html"><div class="ttname"><a href="ObjCARCUtil_8h.html">ObjCARCUtil.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1BlockFrequencyInfo_html_a5f51a6fb898c169382d668bf246c16da"><div class="ttname"><a href="classllvm_1_1BlockFrequencyInfo.html#a5f51a6fb898c169382d668bf246c16da">llvm::BlockFrequencyInfo::setBlockFreqAndScale</a></div><div class="ttdeci">void setBlockFreqAndScale(const BasicBlock *ReferenceBB, uint64_t Freq, SmallPtrSetImpl&lt; BasicBlock * &gt; &amp;BlocksToScale)</div><div class="ttdoc">Set the frequency of ReferenceBB to Freq and scale the frequencies of the blocks in BlocksToScale suc...</div><div class="ttdef"><b>Definition:</b> <a href="BlockFrequencyInfo_8cpp_source.html#l00233">BlockFrequencyInfo.cpp:233</a></div></div>
<div class="ttc" id="aclassllvm_1_1InlineFunctionInfo_html_acbbc7320e82682aed3c325a08b187a2f"><div class="ttname"><a href="classllvm_1_1InlineFunctionInfo.html#acbbc7320e82682aed3c325a08b187a2f">llvm::InlineFunctionInfo::reset</a></div><div class="ttdeci">void reset()</div><div class="ttdef"><b>Definition:</b> <a href="Cloning_8h_source.html#l00241">Cloning.h:241</a></div></div>
<div class="ttc" id="anamespacellvm_1_1memprof_html"><div class="ttname"><a href="namespacellvm_1_1memprof.html">llvm::memprof</a></div><div class="ttdef"><b>Definition:</b> <a href="MemoryProfileInfo_8h_source.html#l00024">MemoryProfileInfo.h:24</a></div></div>
<div class="ttc" id="aConstant_8h_html"><div class="ttname"><a href="Constant_8h.html">Constant.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1ResumeInst_html"><div class="ttname"><a href="classllvm_1_1ResumeInst.html">llvm::ResumeInst</a></div><div class="ttdoc">Resume the propagation of an exception.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l04256">Instructions.h:4256</a></div></div>
<div class="ttc" id="aclassllvm_1_1MDNode_html_a2e9fe39301fbac7276c8d9f3e1884dc2"><div class="ttname"><a href="classllvm_1_1MDNode.html#a2e9fe39301fbac7276c8d9f3e1884dc2">llvm::MDNode::replaceAllUsesWith</a></div><div class="ttdeci">void replaceAllUsesWith(Metadata *MD)</div><div class="ttdoc">RAUW a temporary.</div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8h_source.html#l01132">Metadata.h:1132</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a05186fa23e4d11b9855a9599ba87a4b7"><div class="ttname"><a href="classllvm_1_1Type.html#a05186fa23e4d11b9855a9599ba87a4b7">llvm::Type::getInt64Ty</a></div><div class="ttdeci">static IntegerType * getInt64Ty(LLVMContext &amp;C)</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00242">Type.cpp:242</a></div></div>
<div class="ttc" id="anamespacellvm_html_aed2c5dd2a303159f87771db83f54352b"><div class="ttname"><a href="namespacellvm.html#aed2c5dd2a303159f87771db83f54352b">llvm::isIdentifiedObject</a></div><div class="ttdeci">bool isIdentifiedObject(const Value *V)</div><div class="ttdoc">Return true if this pointer refers to a distinct and identifiable object.</div><div class="ttdef"><b>Definition:</b> <a href="AliasAnalysis_8cpp_source.html#l00878">AliasAnalysis.cpp:878</a></div></div>
<div class="ttc" id="aclassllvm_1_1ValueMapIterator_html"><div class="ttname"><a href="classllvm_1_1ValueMapIterator.html">llvm::ValueMapIterator</a></div><div class="ttdef"><b>Definition:</b> <a href="ValueMap_8h_source.html#l00048">ValueMap.h:48</a></div></div>
<div class="ttc" id="aMemoryProfileInfo_8h_html"><div class="ttname"><a href="MemoryProfileInfo_8h.html">MemoryProfileInfo.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseMapBase_html_a65520b9c67759099e313d0f4e7b5ff9e"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#a65520b9c67759099e313d0f4e7b5ff9e">llvm::DenseMapBase::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00084">DenseMap.h:84</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AMDGPU_1_1SendMsg_html_a8594419a4ddfad2c9a79279c490e466d"><div class="ttname"><a href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">llvm::AMDGPU::SendMsg::Op</a></div><div class="ttdeci">Op</div><div class="ttdef"><b>Definition:</b> <a href="SIDefines_8h_source.html#l00357">SIDefines.h:357</a></div></div>
<div class="ttc" id="aclassllvm_1_1PHINode_html_ab0ff669b12c20c07137705c38872ec63"><div class="ttname"><a href="classllvm_1_1PHINode.html#ab0ff669b12c20c07137705c38872ec63">llvm::PHINode::Create</a></div><div class="ttdeci">static PHINode * Create(Type *Ty, unsigned NumReservedValues, const Twine &amp;NameStr=&quot;&quot;, Instruction *InsertBefore=nullptr)</div><div class="ttdoc">Constructors - NumReservedValues is a hint for the number of incoming edges that this phi node will h...</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02750">Instructions.h:2750</a></div></div>
<div class="ttc" id="aclassllvm_1_1LLVMContext_html_a800c1300065ca1615d2f4fb88623afd5a3f6df86c6efab701ade7abbc3134c25a"><div class="ttname"><a href="classllvm_1_1LLVMContext.html#a800c1300065ca1615d2f4fb88623afd5a3f6df86c6efab701ade7abbc3134c25a">llvm::LLVMContext::OB_deopt</a></div><div class="ttdeci">@ OB_deopt</div><div class="ttdef"><b>Definition:</b> <a href="LLVMContext_8h_source.html#l00089">LLVMContext.h:89</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html_a8052a4f265aa7540f68ca3103a55538d"><div class="ttname"><a href="classllvm_1_1Function.html#a8052a4f265aa7540f68ca3103a55538d">llvm::Function::getArg</a></div><div class="ttdeci">Argument * getArg(unsigned i) const</div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00784">Function.h:784</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallBase_html_adde2ea00dd2613ee41bfe91908e4e68e"><div class="ttname"><a href="classllvm_1_1CallBase.html#adde2ea00dd2613ee41bfe91908e4e68e">llvm::CallBase::arg_size</a></div><div class="ttdeci">unsigned arg_size() const</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l01349">InstrTypes.h:1349</a></div></div>
<div class="ttc" id="aInlineFunction_8cpp_html_ac57dae906fe8ac64efe52571121b0fe1"><div class="ttname"><a href="InlineFunction_8cpp.html#ac57dae906fe8ac64efe52571121b0fe1">ProfileCount</a></div><div class="ttdeci">Function::ProfileCount ProfileCount</div><div class="ttdef"><b>Definition:</b> <a href="InlineFunction_8cpp_source.html#l00081">InlineFunction.cpp:81</a></div></div>
<div class="ttc" id="astructllvm_1_1at_1_1VarRecord_html"><div class="ttname"><a href="structllvm_1_1at_1_1VarRecord.html">llvm::at::VarRecord</a></div><div class="ttdoc">Helper struct for trackAssignments, below.</div><div class="ttdef"><b>Definition:</b> <a href="IR_2DebugInfo_8h_source.html#l00238">DebugInfo.h:238</a></div></div>
<div class="ttc" id="anamespacellvm_html_abff5a423c1f45e23958dde8ee695c9a9"><div class="ttname"><a href="namespacellvm.html#abff5a423c1f45e23958dde8ee695c9a9">llvm::isGuaranteedToTransferExecutionToSuccessor</a></div><div class="ttdeci">bool isGuaranteedToTransferExecutionToSuccessor(const Instruction *I)</div><div class="ttdoc">Return true if this function can prove that the instruction I will always transfer execution to one o...</div><div class="ttdef"><b>Definition:</b> <a href="ValueTracking_8cpp_source.html#l05612">ValueTracking.cpp:5612</a></div></div>
<div class="ttc" id="aclassllvm_1_1TypeSize_html"><div class="ttname"><a href="classllvm_1_1TypeSize.html">llvm::TypeSize</a></div><div class="ttdef"><b>Definition:</b> <a href="TypeSize_8h_source.html#l00314">TypeSize.h:314</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantTokenNone_html_a8e29fb8e39fb67b3bb746dbba47fcb29"><div class="ttname"><a href="classllvm_1_1ConstantTokenNone.html#a8e29fb8e39fb67b3bb746dbba47fcb29">llvm::ConstantTokenNone::get</a></div><div class="ttdeci">static ConstantTokenNone * get(LLVMContext &amp;Context)</div><div class="ttdoc">Return the ConstantTokenNone.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l01429">Constants.cpp:1429</a></div></div>
<div class="ttc" id="aCasting_8h_html"><div class="ttname"><a href="Casting_8h.html">Casting.h</a></div></div>
<div class="ttc" id="aFunction_8h_html"><div class="ttname"><a href="Function_8h.html">Function.h</a></div></div>
<div class="ttc" id="aInlineFunction_8cpp_html_a8385c2a142c1616d8d486bcb93213649"><div class="ttname"><a href="InlineFunction_8cpp.html#a8385c2a142c1616d8d486bcb93213649">updateCallProfile</a></div><div class="ttdeci">static void updateCallProfile(Function *Callee, const ValueToValueMapTy &amp;VMap, const ProfileCount &amp;CalleeEntryCount, const CallBase &amp;TheCall, ProfileSummaryInfo *PSI, BlockFrequencyInfo *CallerBFI)</div><div class="ttdoc">Update the branch metadata for cloned call instructions.</div><div class="ttdef"><b>Definition:</b> <a href="InlineFunction_8cpp_source.html#l01854">InlineFunction.cpp:1854</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_a7c779ce2ba55bc94f52014fc25f3d520"><div class="ttname"><a href="classllvm_1_1Value.html#a7c779ce2ba55bc94f52014fc25f3d520">llvm::Value::hasNUses</a></div><div class="ttdeci">bool hasNUses(unsigned N) const</div><div class="ttdoc">Return true if this Value has exactly N uses.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00148">Value.cpp:148</a></div></div>
<div class="ttc" id="aclassllvm_1_1InlineFunctionInfo_html"><div class="ttname"><a href="classllvm_1_1InlineFunctionInfo.html">llvm::InlineFunctionInfo</a></div><div class="ttdoc">This class captures the data input to the InlineFunction call, and records the auxiliary results prod...</div><div class="ttdef"><b>Definition:</b> <a href="Cloning_8h_source.html#l00203">Cloning.h:203</a></div></div>
<div class="ttc" id="aclassllvm_1_1DIAssignID_html_a9d9cf0278178d1da39f6797777e683f7"><div class="ttname"><a href="classllvm_1_1DIAssignID.html#a9d9cf0278178d1da39f6797777e683f7">llvm::DIAssignID::getDistinct</a></div><div class="ttdeci">static DIAssignID * getDistinct(LLVMContext &amp;Context)</div><div class="ttdef"><b>Definition:</b> <a href="DebugInfoMetadata_8h_source.html#l00320">DebugInfoMetadata.h:320</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html_adf50671db83d2813e0d897ea2cfc9102"><div class="ttname"><a href="classllvm_1_1Function.html#adf50671db83d2813e0d897ea2cfc9102">llvm::Function::getFunctionType</a></div><div class="ttdeci">FunctionType * getFunctionType() const</div><div class="ttdoc">Returns the FunctionType for me.</div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00174">Function.h:174</a></div></div>
<div class="ttc" id="aclassllvm_1_1ValueMap_html_a7629b8c5f6a6802ee0fdc5c290769692"><div class="ttname"><a href="classllvm_1_1ValueMap.html#a7629b8c5f6a6802ee0fdc5c290769692">llvm::ValueMap::find</a></div><div class="ttdeci">iterator find(const KeyT &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="ValueMap_8h_source.html#l00155">ValueMap.h:155</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a5d3d315f678bc76e43b27d18e5d72829"><div class="ttname"><a href="classllvm_1_1Instruction.html#a5d3d315f678bc76e43b27d18e5d72829">llvm::Instruction::isEHPad</a></div><div class="ttdeci">bool isEHPad() const</div><div class="ttdoc">Return true if the instruction is a variety of EH-block.</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00685">Instruction.h:685</a></div></div>
<div class="ttc" id="aclassllvm_1_1InlineResult_html_a77027fdc657b15aa5dd3d022e0fc07d3"><div class="ttname"><a href="classllvm_1_1InlineResult.html#a77027fdc657b15aa5dd3d022e0fc07d3">llvm::InlineResult::failure</a></div><div class="ttdeci">static InlineResult failure(const char *Reason)</div><div class="ttdef"><b>Definition:</b> <a href="InlineCost_8h_source.html#l00185">InlineCost.h:185</a></div></div>
<div class="ttc" id="aclassllvm_1_1ProfileSummaryInfo_html_a37e70e7a7b5e8ebe792ecaec8639d16e"><div class="ttname"><a href="classllvm_1_1ProfileSummaryInfo.html#a37e70e7a7b5e8ebe792ecaec8639d16e">llvm::ProfileSummaryInfo::getProfileCount</a></div><div class="ttdeci">std::optional&lt; uint64_t &gt; getProfileCount(const CallBase &amp;CallInst, BlockFrequencyInfo *BFI, bool AllowSynthetic=false) const</div><div class="ttdoc">Returns the profile count for CallInst.</div><div class="ttdef"><b>Definition:</b> <a href="ProfileSummaryInfo_8cpp_source.html#l00079">ProfileSummaryInfo.cpp:79</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html_aac0ea55010b7b1a301e65a0baea057aa"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">llvm::SmallVectorImpl::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00614">SmallVector.h:614</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallBase_html_a7ac9329ef7292ee640d87f45ce7ae05c"><div class="ttname"><a href="classllvm_1_1CallBase.html#a7ac9329ef7292ee640d87f45ce7ae05c">llvm::CallBase::getCalledOperand</a></div><div class="ttdeci">Value * getCalledOperand() const</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l01399">InstrTypes.h:1399</a></div></div>
<div class="ttc" id="aclassllvm_1_1BlockFrequencyInfo_html_ab8b72c18add22acd827f7a6cd1ff1bff"><div class="ttname"><a href="classllvm_1_1BlockFrequencyInfo.html#ab8b72c18add22acd827f7a6cd1ff1bff">llvm::BlockFrequencyInfo::getBlockFreq</a></div><div class="ttdeci">BlockFrequency getBlockFreq(const BasicBlock *BB) const</div><div class="ttdoc">getblockFreq - Return block frequency.</div><div class="ttdef"><b>Definition:</b> <a href="BlockFrequencyInfo_8cpp_source.html#l00203">BlockFrequencyInfo.cpp:203</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html_a6f77e4e800ba4dffd63e8ddb330062aa"><div class="ttname"><a href="classllvm_1_1Function.html#a6f77e4e800ba4dffd63e8ddb330062aa">llvm::Function::getPersonalityFn</a></div><div class="ttdeci">Constant * getPersonalityFn() const</div><div class="ttdoc">Get the personality function associated with this function.</div><div class="ttdef"><b>Definition:</b> <a href="Function_8cpp_source.html#l01995">Function.cpp:1995</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html_a8bf193a781a92cae52d7f9216d0824f8"><div class="ttname"><a href="classllvm_1_1Function.html#a8bf193a781a92cae52d7f9216d0824f8">llvm::Function::arg_begin</a></div><div class="ttdeci">arg_iterator arg_begin()</div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00766">Function.h:766</a></div></div>
<div class="ttc" id="aInlineFunction_8cpp_html_a8e4039f04450ff68d8d2cf3db092315c"><div class="ttname"><a href="InlineFunction_8cpp.html#a8e4039f04450ff68d8d2cf3db092315c">EnableNoAliasConversion</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; EnableNoAliasConversion(&quot;enable-noalias-to-md-conversion&quot;, cl::init(true), cl::Hidden, cl::desc(&quot;Convert noalias attributes to metadata during inlining.&quot;))</div></div>
<div class="ttc" id="aclassllvm_1_1IntrinsicInst_html"><div class="ttname"><a href="classllvm_1_1IntrinsicInst.html">llvm::IntrinsicInst</a></div><div class="ttdoc">A wrapper class for inspecting calls to intrinsic functions.</div><div class="ttdef"><b>Definition:</b> <a href="IntrinsicInst_8h_source.html#l00047">IntrinsicInst.h:47</a></div></div>
<div class="ttc" id="aclassllvm_1_1AttrBuilder_html_a676e566281b7f39a0c685bc6d1032283"><div class="ttname"><a href="classllvm_1_1AttrBuilder.html#a676e566281b7f39a0c685bc6d1032283">llvm::AttrBuilder::addDereferenceableAttr</a></div><div class="ttdeci">AttrBuilder &amp; addDereferenceableAttr(uint64_t Bytes)</div><div class="ttdoc">This turns the number of dereferenceable bytes into the form used internally in Attribute.</div><div class="ttdef"><b>Definition:</b> <a href="Attributes_8cpp_source.html#l01758">Attributes.cpp:1758</a></div></div>
<div class="ttc" id="aclassllvm_1_1MDBuilder_html"><div class="ttname"><a href="classllvm_1_1MDBuilder.html">llvm::MDBuilder</a></div><div class="ttdef"><b>Definition:</b> <a href="MDBuilder_8h_source.html#l00036">MDBuilder.h:36</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html_a79fd2bece62d2060209f319c45450c0c"><div class="ttname"><a href="classllvm_1_1Function.html#a79fd2bece62d2060209f319c45450c0c">llvm::Function::front</a></div><div class="ttdeci">const BasicBlock &amp; front() const</div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00758">Function.h:758</a></div></div>
<div class="ttc" id="aCallGraph_8h_html"><div class="ttname"><a href="CallGraph_8h.html">CallGraph.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1DebugLoc_html_a427c256af834975c7869ad28fac00563"><div class="ttname"><a href="classllvm_1_1DebugLoc.html#a427c256af834975c7869ad28fac00563">llvm::DebugLoc::getLine</a></div><div class="ttdeci">unsigned getLine() const</div><div class="ttdef"><b>Definition:</b> <a href="DebugLoc_8cpp_source.html#l00024">DebugLoc.cpp:24</a></div></div>
<div class="ttc" id="aclassllvm_1_1MemoryEffects_html_a05319d3cd9be33731ba884642cf1df76"><div class="ttname"><a href="classllvm_1_1MemoryEffects.html#a05319d3cd9be33731ba884642cf1df76">llvm::MemoryEffects::onlyAccessesArgPointees</a></div><div class="ttdeci">bool onlyAccessesArgPointees() const</div><div class="ttdoc">Whether this function only (at most) accesses argument memory.</div><div class="ttdef"><b>Definition:</b> <a href="ModRef_8h_source.html#l00200">ModRef.h:200</a></div></div>
<div class="ttc" id="anamespacellvm_html_a97370114df349e0996f133e3402c1595"><div class="ttname"><a href="namespacellvm.html#a97370114df349e0996f133e3402c1595">llvm::changeToUnreachable</a></div><div class="ttdeci">unsigned changeToUnreachable(Instruction *I, bool PreserveLCSSA=false, DomTreeUpdater *DTU=nullptr, MemorySSAUpdater *MSSAU=nullptr)</div><div class="ttdoc">Insert an unreachable instruction before the specified instruction, making it and the rest of the cod...</div><div class="ttdef"><b>Definition:</b> <a href="Transforms_2Utils_2Local_8cpp_source.html#l02250">Local.cpp:2250</a></div></div>
<div class="ttc" id="aclassllvm_1_1InlineFunctionInfo_html_a9c259c76065eb3b4ce3697ce346008ce"><div class="ttname"><a href="classllvm_1_1InlineFunctionInfo.html#a9c259c76065eb3b4ce3697ce346008ce">llvm::InlineFunctionInfo::StaticAllocas</a></div><div class="ttdeci">SmallVector&lt; AllocaInst *, 4 &gt; StaticAllocas</div><div class="ttdoc">InlineFunction fills this in with all static allocas that get copied into the caller.</div><div class="ttdef"><b>Definition:</b> <a href="Cloning_8h_source.html#l00224">Cloning.h:224</a></div></div>
<div class="ttc" id="aclassllvm_1_1MDNode_html_a4a3aafff3f29eba4c6d639e6648c330c"><div class="ttname"><a href="classllvm_1_1MDNode.html#a4a3aafff3f29eba4c6d639e6648c330c">llvm::MDNode::isTemporary</a></div><div class="ttdeci">bool isTemporary() const</div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8h_source.html#l01127">Metadata.h:1127</a></div></div>
<div class="ttc" id="aInstructions_8h_html"><div class="ttname"><a href="Instructions_8h.html">Instructions.h</a></div></div>
<div class="ttc" id="anamespacellvm_1_1numbers_html_a9473b507816be4056a158a41cfb86807"><div class="ttname"><a href="namespacellvm_1_1numbers.html#a9473b507816be4056a158a41cfb86807">llvm::numbers::phi</a></div><div class="ttdeci">constexpr double phi</div><div class="ttdef"><b>Definition:</b> <a href="MathExtras_8h_source.html#l00045">MathExtras.h:45</a></div></div>
<div class="ttc" id="aclassllvm_1_1AllocaInst_html_a9bb98c4ac4cf77f5782e5e41f2c6f38a"><div class="ttname"><a href="classllvm_1_1AllocaInst.html#a9bb98c4ac4cf77f5782e5e41f2c6f38a">llvm::AllocaInst::isUsedWithInAlloca</a></div><div class="ttdeci">bool isUsedWithInAlloca() const</div><div class="ttdoc">Return true if this alloca is used as an inalloca argument to a call.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00140">Instructions.h:140</a></div></div>
<div class="ttc" id="anamespacellvm_1_1objcarc_html_a494b44abeacdfac8bb26d3203571d1c2a6adf97f83acf6453d4a6a4b1070f3754"><div class="ttname"><a href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2a6adf97f83acf6453d4a6a4b1070f3754">llvm::objcarc::ARCInstKind::None</a></div><div class="ttdeci">@ None</div><div class="ttdoc">anything that is inert from an ARC perspective.</div></div>
<div class="ttc" id="aSmallVector_8h_html"><div class="ttname"><a href="SmallVector_8h.html">SmallVector.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1AttrBuilder_html_a4cf3cb56358d18065c78992569c32d2f"><div class="ttname"><a href="classllvm_1_1AttrBuilder.html#a4cf3cb56358d18065c78992569c32d2f">llvm::AttrBuilder::hasAttributes</a></div><div class="ttdeci">bool hasAttributes() const</div><div class="ttdoc">Return true if the builder has IR-level attributes.</div><div class="ttdef"><b>Definition:</b> <a href="Attributes_8h_source.html#l01099">Attributes.h:1099</a></div></div>
<div class="ttc" id="aclassllvm_1_1ilist__iterator_html_a78fdbf2880abbb855abdb5bf030d9105"><div class="ttname"><a href="classllvm_1_1ilist__iterator.html#a78fdbf2880abbb855abdb5bf030d9105">llvm::ilist_iterator::getReverse</a></div><div class="ttdeci">ilist_iterator&lt; OptionsT, !IsReverse, IsConst &gt; getReverse() const</div><div class="ttdoc">Get a reverse iterator to the same node.</div><div class="ttdef"><b>Definition:</b> <a href="ilist__iterator_8h_source.html#l00121">ilist_iterator.h:121</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_ab4f3bf98b5054831b608852e33427814"><div class="ttname"><a href="classllvm_1_1Instruction.html#ab4f3bf98b5054831b608852e33427814">llvm::Instruction::getDebugLoc</a></div><div class="ttdeci">const DebugLoc &amp; getDebugLoc() const</div><div class="ttdoc">Return the debug location for this node as a DebugLoc.</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00358">Instruction.h:358</a></div></div>
<div class="ttc" id="aUser_8h_html"><div class="ttname"><a href="User_8h.html">User.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1InlineFunctionInfo_html_a2479f3ea47eee2627b24bddfa6333415"><div class="ttname"><a href="classllvm_1_1InlineFunctionInfo.html#a2479f3ea47eee2627b24bddfa6333415">llvm::InlineFunctionInfo::UpdateProfile</a></div><div class="ttdeci">bool UpdateProfile</div><div class="ttdoc">Update profile for callee as well as cloned version.</div><div class="ttdef"><b>Definition:</b> <a href="Cloning_8h_source.html#l00239">Cloning.h:239</a></div></div>
<div class="ttc" id="aclassllvm_1_1IRBuilderBase_html_a31c5c58143c6e9da9c544a7afcba2710"><div class="ttname"><a href="classllvm_1_1IRBuilderBase.html#a31c5c58143c6e9da9c544a7afcba2710">llvm::IRBuilderBase::CreateCall</a></div><div class="ttdeci">CallInst * CreateCall(FunctionType *FTy, Value *Callee, ArrayRef&lt; Value * &gt; Args=std::nullopt, const Twine &amp;Name=&quot;&quot;, MDNode *FPMathTag=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l02293">IRBuilder.h:2293</a></div></div>
<div class="ttc" id="aclassllvm_1_1memprof_1_1CallStackTrie_html"><div class="ttname"><a href="classllvm_1_1memprof_1_1CallStackTrie.html">llvm::memprof::CallStackTrie</a></div><div class="ttdoc">Class to build a trie of call stack contexts for a particular profiled allocation call,...</div><div class="ttdef"><b>Definition:</b> <a href="MemoryProfileInfo_8h_source.html#l00045">MemoryProfileInfo.h:45</a></div></div>
<div class="ttc" id="aInlineFunction_8cpp_html_ae71573dba191b26eda0d5ea27b81ef62"><div class="ttname"><a href="InlineFunction_8cpp.html#ae71573dba191b26eda0d5ea27b81ef62">trackInlinedStores</a></div><div class="ttdeci">static void trackInlinedStores(Function::iterator Start, Function::iterator End, const CallBase &amp;CB)</div><div class="ttdef"><b>Definition:</b> <a href="InlineFunction_8cpp_source.html#l01782">InlineFunction.cpp:1782</a></div></div>
<div class="ttc" id="aDominators_8h_html"><div class="ttname"><a href="Dominators_8h.html">Dominators.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1DIAssignID_html"><div class="ttname"><a href="classllvm_1_1DIAssignID.html">llvm::DIAssignID</a></div><div class="ttdoc">Assignment ID.</div><div class="ttdef"><b>Definition:</b> <a href="DebugInfoMetadata_8h_source.html#l00302">DebugInfoMetadata.h:302</a></div></div>
<div class="ttc" id="aCSKYInstPrinter_8cpp_html_a0a9c49021d8cb10425b2928d1957e5d6"><div class="ttname"><a href="CSKYInstPrinter_8cpp.html#a0a9c49021d8cb10425b2928d1957e5d6">NoAliases</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; NoAliases(&quot;csky-no-aliases&quot;, cl::desc(&quot;Disable the emission of assembler pseudo instructions&quot;), cl::init(false), cl::Hidden)</div></div>
<div class="ttc" id="aInlineFunction_8cpp_html_a83a2e4a8c4f5b3b8dee5407d55e8872d"><div class="ttname"><a href="InlineFunction_8cpp.html#a83a2e4a8c4f5b3b8dee5407d55e8872d">updateCallerBFI</a></div><div class="ttdeci">static void updateCallerBFI(BasicBlock *CallSiteBlock, const ValueToValueMapTy &amp;VMap, BlockFrequencyInfo *CallerBFI, BlockFrequencyInfo *CalleeBFI, const BasicBlock &amp;CalleeEntryBlock)</div><div class="ttdoc">Update the block frequencies of the caller after a callee has been inlined.</div><div class="ttdef"><b>Definition:</b> <a href="InlineFunction_8cpp_source.html#l01825">InlineFunction.cpp:1825</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallBase_html_ab2caa29167597390ab2fc3cf30d70389"><div class="ttname"><a href="classllvm_1_1CallBase.html#ab2caa29167597390ab2fc3cf30d70389">llvm::CallBase::getArgOperand</a></div><div class="ttdeci">Value * getArgOperand(unsigned i) const</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l01351">InstrTypes.h:1351</a></div></div>
<div class="ttc" id="aInlineFunction_8cpp_html_af7016ec74e60284d198d9b70ec8f1ab2"><div class="ttname"><a href="InlineFunction_8cpp.html#af7016ec74e60284d198d9b70ec8f1ab2">haveCommonPrefix</a></div><div class="ttdeci">static bool haveCommonPrefix(MDNode *MIBStackContext, MDNode *CallsiteStackContext)</div><div class="ttdef"><b>Definition:</b> <a href="InlineFunction_8cpp_source.html#l00781">InlineFunction.cpp:781</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a1a7f07aaef6a3bee130bf0e0f0536802"><div class="ttname"><a href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">llvm::Instruction::getParent</a></div><div class="ttdeci">const BasicBlock * getParent() const</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00090">Instruction.h:90</a></div></div>
<div class="ttc" id="aclassllvm_1_1MDNode_html_a679e07915a76a131faa1460665755151"><div class="ttname"><a href="classllvm_1_1MDNode.html#a679e07915a76a131faa1460665755151">llvm::MDNode::op_end</a></div><div class="ttdeci">op_iterator op_end() const</div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8h_source.html#l01285">Metadata.h:1285</a></div></div>
<div class="ttc" id="aInstructionSimplify_8h_html"><div class="ttname"><a href="InstructionSimplify_8h.html">InstructionSimplify.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html_a0c8ffe664a36e30d49c84d0aded2fe08"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#a0c8ffe664a36e30d49c84d0aded2fe08">llvm::SmallVectorImpl::pop_back_val</a></div><div class="ttdeci">T pop_back_val()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00677">SmallVector.h:677</a></div></div>
<div class="ttc" id="aclassllvm_1_1PHINode_html"><div class="ttname"><a href="classllvm_1_1PHINode.html">llvm::PHINode</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02708">Instructions.h:2708</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a8de021e28a3c04c9216ad8decf104f02"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">llvm::BasicBlock::getTerminator</a></div><div class="ttdeci">const Instruction * getTerminator() const LLVM_READONLY</div><div class="ttdoc">Returns the terminator instruction if the block is well formed or null if the block is not well forme...</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00127">BasicBlock.h:127</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_afe7af0c3ec2ef1f525173acd2ea4ba60"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#afe7af0c3ec2ef1f525173acd2ea4ba60">llvm::BasicBlock::removePredecessor</a></div><div class="ttdeci">void removePredecessor(BasicBlock *Pred, bool KeepOneInputPHIs=false)</div><div class="ttdoc">Update PHI nodes in this BasicBlock before removal of predecessor Pred.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00341">BasicBlock.cpp:341</a></div></div>
<div class="ttc" id="aInlineFunction_8cpp_html_abf4fabc264b52dbd503f04805135a40e"><div class="ttname"><a href="InlineFunction_8cpp.html#abf4fabc264b52dbd503f04805135a40e">inlineRetainOrClaimRVCalls</a></div><div class="ttdeci">static void inlineRetainOrClaimRVCalls(CallBase &amp;CB, objcarc::ARCInstKind RVCallKind, const SmallVectorImpl&lt; ReturnInst * &gt; &amp;Returns)</div><div class="ttdoc">An operand bundle &quot;clang.arc.attachedcall&quot; on a call indicates the call result is implicitly consumed...</div><div class="ttdef"><b>Definition:</b> <a href="InlineFunction_8cpp_source.html#l01922">InlineFunction.cpp:1922</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html">llvm::SmallVectorImpl</a></div><div class="ttdoc">This class consists of common code factored out of the SmallVector class to reduce code duplication b...</div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l00042">APFloat.h:42</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallBase_html"><div class="ttname"><a href="classllvm_1_1CallBase.html">llvm::CallBase</a></div><div class="ttdoc">Base class for all callable instructions (InvokeInst and CallInst) Holds everything related to callin...</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l01184">InstrTypes.h:1184</a></div></div>
<div class="ttc" id="aclassllvm_1_1Module_html_a6d883605206368bc536cc9ded97209b8"><div class="ttname"><a href="classllvm_1_1Module.html#a6d883605206368bc536cc9ded97209b8">llvm::Module::getDataLayout</a></div><div class="ttdeci">const DataLayout &amp; getDataLayout() const</div><div class="ttdoc">Get the data layout for the module's target platform.</div><div class="ttdef"><b>Definition:</b> <a href="Module_8cpp_source.html#l00398">Module.cpp:398</a></div></div>
<div class="ttc" id="aDerivedTypes_8h_html"><div class="ttname"><a href="DerivedTypes_8h.html">DerivedTypes.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSetImpl_html"><div class="ttname"><a href="classllvm_1_1SmallPtrSetImpl.html">llvm::SmallPtrSetImpl</a></div><div class="ttdoc">A templated base class for SmallPtrSet which provides the typesafe interface that is common across al...</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00344">SmallPtrSet.h:344</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallSetVector_html"><div class="ttname"><a href="classllvm_1_1SmallSetVector.html">llvm::SmallSetVector</a></div><div class="ttdoc">A SetVector that performs no allocations if smaller than a certain size.</div><div class="ttdef"><b>Definition:</b> <a href="SetVector_8h_source.html#l00300">SetVector.h:300</a></div></div>
<div class="ttc" id="aclassllvm_1_1LLVMContext_html_a800c1300065ca1615d2f4fb88623afd5a6c03d5e52bbdefc8c392e3ed77c7d6a1"><div class="ttname"><a href="classllvm_1_1LLVMContext.html#a800c1300065ca1615d2f4fb88623afd5a6c03d5e52bbdefc8c392e3ed77c7d6a1">llvm::LLVMContext::OB_clang_arc_attachedcall</a></div><div class="ttdeci">@ OB_clang_arc_attachedcall</div><div class="ttdef"><b>Definition:</b> <a href="LLVMContext_8h_source.html#l00095">LLVMContext.h:95</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallInst_html"><div class="ttname"><a href="classllvm_1_1CallInst.html">llvm::CallInst</a></div><div class="ttdoc">This class represents a function call, abstracting a target machine's calling convention.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01485">Instructions.h:1485</a></div></div>
<div class="ttc" id="alib_2CodeGen_2README_8txt_html_a09776db24cf586ec9f1e18f3bae14099"><div class="ttname"><a href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a></div><div class="ttdeci">Common register allocation spilling lr str ldr sxth r3 ldr mla r4 can lr mov lr str ldr sxth r3 mla r4 and then merge mul and lr str ldr sxth r3 mla r4 It also increase the likelihood the store may become dead bb27 Successors according to LLVM BB</div><div class="ttdef"><b>Definition:</b> <a href="lib_2CodeGen_2README_8txt_source.html#l00039">README.txt:39</a></div></div>
<div class="ttc" id="aclassllvm_1_1ValueMap_html_a15f92579a5fc316dab8cd1fad51015ef"><div class="ttname"><a href="classllvm_1_1ValueMap.html#a15f92579a5fc316dab8cd1fad51015ef">llvm::ValueMap::lookup</a></div><div class="ttdeci">ValueT lookup(const KeyT &amp;Val) const</div><div class="ttdoc">lookup - Return the entry for the specified key, or a default constructed value if no such entry exis...</div><div class="ttdef"><b>Definition:</b> <a href="ValueMap_8h_source.html#l00164">ValueMap.h:164</a></div></div>
<div class="ttc" id="aLLVMContext_8h_html"><div class="ttname"><a href="LLVMContext_8h.html">LLVMContext.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_ae855357b6c5e6e7ed1869272708a3a84"><div class="ttname"><a href="classllvm_1_1Value.html#ae855357b6c5e6e7ed1869272708a3a84">llvm::Value::takeName</a></div><div class="ttdeci">void takeName(Value *V)</div><div class="ttdoc">Transfer the name from V to this value.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00381">Value.cpp:381</a></div></div>
<div class="ttc" id="aclassllvm_1_1DebugLoc_html"><div class="ttname"><a href="classllvm_1_1DebugLoc.html">llvm::DebugLoc</a></div><div class="ttdoc">A debug info location.</div><div class="ttdef"><b>Definition:</b> <a href="DebugLoc_8h_source.html#l00033">DebugLoc.h:33</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AttributeFuncs_html_ae05b3471aef6ffe376ceef99af9b4709"><div class="ttname"><a href="namespacellvm_1_1AttributeFuncs.html#ae05b3471aef6ffe376ceef99af9b4709">llvm::AttributeFuncs::mergeAttributesForInlining</a></div><div class="ttdeci">void mergeAttributesForInlining(Function &amp;Caller, const Function &amp;Callee)</div><div class="ttdoc">Merge caller's and callee's attributes.</div><div class="ttdef"><b>Definition:</b> <a href="Attributes_8cpp_source.html#l02128">Attributes.cpp:2128</a></div></div>
<div class="ttc" id="aclassllvm_1_1AllocaInst_html"><div class="ttname"><a href="classllvm_1_1AllocaInst.html">llvm::AllocaInst</a></div><div class="ttdoc">an instruction to allocate memory on the stack</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00058">Instructions.h:58</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_1_1ProfileCount_html"><div class="ttname"><a href="classllvm_1_1Function_1_1ProfileCount.html">llvm::Function::ProfileCount</a></div><div class="ttdoc">Class to represent profile counts.</div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00252">Function.h:252</a></div></div>
<div class="ttc" id="aclassllvm_1_1DebugLoc_html_a51e7213ee467c71c8feec9ff30a580bd"><div class="ttname"><a href="classllvm_1_1DebugLoc.html#a51e7213ee467c71c8feec9ff30a580bd">llvm::DebugLoc::getScope</a></div><div class="ttdeci">MDNode * getScope() const</div><div class="ttdef"><b>Definition:</b> <a href="DebugLoc_8cpp_source.html#l00034">DebugLoc.cpp:34</a></div></div>
<div class="ttc" id="aclassllvm_1_1User_html_abe1de1520a21f77ac57cc210bf0fb0b4"><div class="ttname"><a href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">llvm::User::getOperand</a></div><div class="ttdeci">Value * getOperand(unsigned i) const</div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00169">User.h:169</a></div></div>
<div class="ttc" id="aclassllvm_1_1InlineFunctionInfo_html_a6d3c3f9f13bd38d8aa6410841d2b99c0"><div class="ttname"><a href="classllvm_1_1InlineFunctionInfo.html#a6d3c3f9f13bd38d8aa6410841d2b99c0">llvm::InlineFunctionInfo::GetAssumptionCache</a></div><div class="ttdeci">function_ref&lt; AssumptionCache &amp;(Function &amp;)&gt; GetAssumptionCache</div><div class="ttdef"><b>Definition:</b> <a href="Cloning_8h_source.html#l00218">Cloning.h:218</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_ad7038933b96247814b611635abb9686c"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#ad7038933b96247814b611635abb9686c">llvm::BasicBlock::getTerminatingMustTailCall</a></div><div class="ttdeci">const CallInst * getTerminatingMustTailCall() const</div><div class="ttdoc">Returns the call instruction marked 'musttail' prior to the terminating return instruction of this ba...</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00150">BasicBlock.cpp:150</a></div></div>
<div class="ttc" id="astructllvm_1_1cl_1_1desc_html"><div class="ttname"><a href="structllvm_1_1cl_1_1desc.html">llvm::cl::desc</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00411">CommandLine.h:411</a></div></div>
<div class="ttc" id="aPassBuilderBindings_8cpp_html_a76adb4549f349676de0a703a497ca5a5"><div class="ttname"><a href="PassBuilderBindings_8cpp.html#a76adb4549f349676de0a703a497ca5a5">Mod</a></div><div class="ttdeci">Module * Mod</div><div class="ttdef"><b>Definition:</b> <a href="PassBuilderBindings_8cpp_source.html#l00054">PassBuilderBindings.cpp:54</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchInst_html"><div class="ttname"><a href="classllvm_1_1BranchInst.html">llvm::BranchInst</a></div><div class="ttdoc">Conditional or Unconditional Branch instruction.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03139">Instructions.h:3139</a></div></div>
<div class="ttc" id="aInlineFunction_8cpp_html_aceef73a2afed724fc28b76a05bc57898"><div class="ttname"><a href="InlineFunction_8cpp.html#aceef73a2afed724fc28b76a05bc57898">InlinerAttributeWindow</a></div><div class="ttdeci">static cl::opt&lt; unsigned &gt; InlinerAttributeWindow(&quot;max-inst-checked-for-throw-during-inlining&quot;, cl::Hidden, cl::desc(&quot;the maximum number of instructions analyzed for may throw during &quot; &quot;attribute inference in inlined body&quot;), cl::init(4))</div></div>
<div class="ttc" id="astructllvm_1_1ClonedCodeInfo_html_a2eea9c7c9cadaa593a7a71c8d44aac25"><div class="ttname"><a href="structllvm_1_1ClonedCodeInfo.html#a2eea9c7c9cadaa593a7a71c8d44aac25">llvm::ClonedCodeInfo::ContainsDynamicAllocas</a></div><div class="ttdeci">bool ContainsDynamicAllocas</div><div class="ttdoc">This is set to true if the cloned code contains a 'dynamic' alloca.</div><div class="ttdef"><b>Definition:</b> <a href="Cloning_8h_source.html#l00073">Cloning.h:73</a></div></div>
<div class="ttc" id="aclassllvm_1_1SetVector_html"><div class="ttname"><a href="classllvm_1_1SetVector.html">llvm::SetVector</a></div><div class="ttdoc">A vector that has set insertion semantics.</div><div class="ttdef"><b>Definition:</b> <a href="SetVector_8h_source.html#l00040">SetVector.h:40</a></div></div>
<div class="ttc" id="aInlineFunction_8cpp_html_a2ebf7459caf9252729048bd9c5231f6c"><div class="ttname"><a href="InlineFunction_8cpp.html#a2ebf7459caf9252729048bd9c5231f6c">collectEscapedLocals</a></div><div class="ttdeci">static at::StorageToVarsMap collectEscapedLocals(const DataLayout &amp;DL, const CallBase &amp;CB)</div><div class="ttdoc">Find Alloca and linked DbgAssignIntrinsic for locals escaped by CB.</div><div class="ttdef"><b>Definition:</b> <a href="InlineFunction_8cpp_source.html#l01734">InlineFunction.cpp:1734</a></div></div>
<div class="ttc" id="aclassllvm_1_1AttributeList_html_ada7a173c40ca7ac048a4b7099ceb71c0"><div class="ttname"><a href="classllvm_1_1AttributeList.html#ada7a173c40ca7ac048a4b7099ceb71c0">llvm::AttributeList::getParamAttrs</a></div><div class="ttdeci">AttributeSet getParamAttrs(unsigned ArgNo) const</div><div class="ttdoc">The attributes for the argument or parameter at the given index are returned.</div><div class="ttdef"><b>Definition:</b> <a href="Attributes_8cpp_source.html#l01454">Attributes.cpp:1454</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html_a499ea32ca1b8d16cedfe01d1e5b08f29"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#a499ea32ca1b8d16cedfe01d1e5b08f29">llvm::SmallVectorImpl::reserve</a></div><div class="ttdeci">void reserve(size_type N)</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00667">SmallVector.h:667</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallInst_html_ad682514c13f12f1a8d759d422fce6aefa876f2a1fd3dd74831f85634cb14b72fe"><div class="ttname"><a href="classllvm_1_1CallInst.html#ad682514c13f12f1a8d759d422fce6aefa876f2a1fd3dd74831f85634cb14b72fe">llvm::CallInst::TCK_NoTail</a></div><div class="ttdeci">@ TCK_NoTail</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01664">Instructions.h:1664</a></div></div>
<div class="ttc" id="aclassllvm_1_1LLVMContext_html_a800c1300065ca1615d2f4fb88623afd5a8997c6b0930e2c05209e95e7172c6cf3"><div class="ttname"><a href="classllvm_1_1LLVMContext.html#a800c1300065ca1615d2f4fb88623afd5a8997c6b0930e2c05209e95e7172c6cf3">llvm::LLVMContext::OB_funclet</a></div><div class="ttdeci">@ OB_funclet</div><div class="ttdef"><b>Definition:</b> <a href="LLVMContext_8h_source.html#l00090">LLVMContext.h:90</a></div></div>
<div class="ttc" id="aclassllvm_1_1IRBuilderBase_html_a480959ce9fb41e0ac0ce2cd7907d7ace"><div class="ttname"><a href="classllvm_1_1IRBuilderBase.html#a480959ce9fb41e0ac0ce2cd7907d7ace">llvm::IRBuilderBase::CreateAlignmentAssumption</a></div><div class="ttdeci">CallInst * CreateAlignmentAssumption(const DataLayout &amp;DL, Value *PtrValue, unsigned Alignment, Value *OffsetValue=nullptr)</div><div class="ttdoc">Create an assume intrinsic call that represents an alignment assumption on the provided pointer.</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8cpp_source.html#l01383">IRBuilder.cpp:1383</a></div></div>
<div class="ttc" id="aValue_8h_html"><div class="ttname"><a href="Value_8h.html">Value.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1InvokeInst_html_a5ba379c3251d99b4c23c8f2e6abe4a6c"><div class="ttname"><a href="classllvm_1_1InvokeInst.html#a5ba379c3251d99b4c23c8f2e6abe4a6c">llvm::InvokeInst::getUnwindDest</a></div><div class="ttdeci">BasicBlock * getUnwindDest() const</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03949">Instructions.h:3949</a></div></div>
<div class="ttc" id="aclassllvm_1_1InlineFunctionInfo_html_a82c69d5928263cabdebf13ea93008be4"><div class="ttname"><a href="classllvm_1_1InlineFunctionInfo.html#a82c69d5928263cabdebf13ea93008be4">llvm::InlineFunctionInfo::CalleeBFI</a></div><div class="ttdeci">BlockFrequencyInfo * CalleeBFI</div><div class="ttdef"><b>Definition:</b> <a href="Cloning_8h_source.html#l00220">Cloning.h:220</a></div></div>
<div class="ttc" id="aclassllvm_1_1MDNode_html_ac9a44b78ebdc1a9be01a96cc5e3bbb59"><div class="ttname"><a href="classllvm_1_1MDNode.html#ac9a44b78ebdc1a9be01a96cc5e3bbb59">llvm::MDNode::op_begin</a></div><div class="ttdeci">op_iterator op_begin() const</div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8h_source.html#l01281">Metadata.h:1281</a></div></div>
<div class="ttc" id="anamespacellvm_html_a3693cec8e936224ad3e5748debe73b75"><div class="ttname"><a href="namespacellvm.html#a3693cec8e936224ad3e5748debe73b75">llvm::PointerMayBeCapturedBefore</a></div><div class="ttdeci">bool PointerMayBeCapturedBefore(const Value *V, bool ReturnCaptures, bool StoreCaptures, const Instruction *I, const DominatorTree *DT, bool IncludeI=false, unsigned MaxUsesToExplore=0, const LoopInfo *LI=nullptr)</div><div class="ttdoc">PointerMayBeCapturedBefore - Return true if this pointer value may be captured by the enclosing funct...</div><div class="ttdef"><b>Definition:</b> <a href="CaptureTracking_8cpp_source.html#l00254">CaptureTracking.cpp:254</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html"><div class="ttname"><a href="classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00074">Value.h:74</a></div></div>
<div class="ttc" id="aclassllvm_1_1AtomicCmpXchgInst_html"><div class="ttname"><a href="classllvm_1_1AtomicCmpXchgInst.html">llvm::AtomicCmpXchgInst</a></div><div class="ttdoc">An instruction that atomically checks whether a specified value is in a memory location,...</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00513">Instructions.h:513</a></div></div>
<div class="ttc" id="aclassllvm_1_1InlineResult_html"><div class="ttname"><a href="classllvm_1_1InlineResult.html">llvm::InlineResult</a></div><div class="ttdoc">InlineResult is basically true or false.</div><div class="ttdef"><b>Definition:</b> <a href="InlineCost_8h_source.html#l00179">InlineCost.h:179</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_ab4e0512c7e1c7adaa56677e3155685f1"><div class="ttname"><a href="classllvm_1_1Value.html#ab4e0512c7e1c7adaa56677e3155685f1">llvm::Value::users</a></div><div class="ttdeci">iterator_range&lt; user_iterator &gt; users()</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00421">Value.h:421</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallInst_html_a8f907245246e05c0220934144c013aee"><div class="ttname"><a href="classllvm_1_1CallInst.html#a8f907245246e05c0220934144c013aee">llvm::CallInst::getTailCallKind</a></div><div class="ttdeci">TailCallKind getTailCallKind() const</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01673">Instructions.h:1673</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallBase_html_ac63dbb4994494c46f025715272cdb81e"><div class="ttname"><a href="classllvm_1_1CallBase.html#ac63dbb4994494c46f025715272cdb81e">llvm::CallBase::args</a></div><div class="ttdeci">iterator_range&lt; User::op_iterator &gt; args()</div><div class="ttdoc">Iteration adapter for range-for loops.</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l01342">InstrTypes.h:1342</a></div></div>
<div class="ttc" id="aSetVector_8h_html"><div class="ttname"><a href="SetVector_8h.html">SetVector.h</a></div></div>
<div class="ttc" id="anamespacellvm_1_1sampleprof_html_a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41"><div class="ttname"><a href="namespacellvm_1_1sampleprof.html#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">llvm::sampleprof::Base</a></div><div class="ttdeci">@ Base</div><div class="ttdef"><b>Definition:</b> <a href="Discriminator_8h_source.html#l00058">Discriminator.h:58</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallBase_html_a0851b4de29686e9c3918449b054cfada"><div class="ttname"><a href="classllvm_1_1CallBase.html#a0851b4de29686e9c3918449b054cfada">llvm::CallBase::setCallingConv</a></div><div class="ttdeci">void setCallingConv(CallingConv::ID CC)</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l01469">InstrTypes.h:1469</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html_a396fcfee6914c76974b73c3d203da6a5"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#a396fcfee6914c76974b73c3d203da6a5">llvm::SmallVectorImpl::emplace_back</a></div><div class="ttdeci">reference emplace_back(ArgTypes &amp;&amp;... Args)</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00941">SmallVector.h:941</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html_a19595c245bd2e3eefa93ce22db5ad15f"><div class="ttname"><a href="classllvm_1_1Function.html#a19595c245bd2e3eefa93ce22db5ad15f">llvm::Function::iterator</a></div><div class="ttdeci">BasicBlockListType::iterator iterator</div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00065">Function.h:65</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSetImpl_html_a6bc6fb89fe2e91c25559a8631f56e27e"><div class="ttname"><a href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">llvm::SmallPtrSetImpl::insert</a></div><div class="ttdeci">std::pair&lt; iterator, bool &gt; insert(PtrType Ptr)</div><div class="ttdoc">Inserts Ptr if and only if there is no element in the container equal to Ptr.</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00365">SmallPtrSet.h:365</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallGraphNode_html_a4f29edc585030005e8215897bb1e792f"><div class="ttname"><a href="classllvm_1_1CallGraphNode.html#a4f29edc585030005e8215897bb1e792f">llvm::CallGraphNode::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="CallGraph_8h_source.html#l00199">CallGraph.h:199</a></div></div>
<div class="ttc" id="aclassllvm_1_1PoisonValue_html_a1bf08613fb664a2e377a9a72c59a6b66"><div class="ttname"><a href="classllvm_1_1PoisonValue.html#a1bf08613fb664a2e377a9a72c59a6b66">llvm::PoisonValue::get</a></div><div class="ttdeci">static PoisonValue * get(Type *T)</div><div class="ttdoc">Static factory methods - Return an 'poison' object of the specified type.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l01759">Constants.cpp:1759</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Aug 7 2023 10:35:57 for LLVM by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>

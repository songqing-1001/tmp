<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LLVM: lib/CodeGen/TailDuplicator.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">LLVM
   &#160;<span id="projectnumber">17.0.0git</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a class="el" href="dir_1e8ad0574bd6e387992681ee57691a07.html">CodeGen</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">TailDuplicator.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="TailDuplicator_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//===- TailDuplicator.cpp - Duplicate blocks into predecessors&#39; tails -----===//</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">// See https://llvm.org/LICENSE.txt for license information.</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">// This utility class duplicates basic blocks ending in unconditional branches</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">// into the tails of their predecessors.</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160; </div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="TailDuplicator_8h.html">llvm/CodeGen/TailDuplicator.h</a>&quot;</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DenseMap_8h.html">llvm/ADT/DenseMap.h</a>&quot;</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DenseSet_8h.html">llvm/ADT/DenseSet.h</a>&quot;</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="STLExtras_8h.html">llvm/ADT/STLExtras.h</a>&quot;</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SetVector_8h.html">llvm/ADT/SetVector.h</a>&quot;</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SmallPtrSet_8h.html">llvm/ADT/SmallPtrSet.h</a>&quot;</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SmallVector_8h.html">llvm/ADT/SmallVector.h</a>&quot;</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Statistic_8h.html">llvm/ADT/Statistic.h</a>&quot;</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineBasicBlock_8h.html">llvm/CodeGen/MachineBasicBlock.h</a>&quot;</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineBranchProbabilityInfo_8h.html">llvm/CodeGen/MachineBranchProbabilityInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineFunction_8h.html">llvm/CodeGen/MachineFunction.h</a>&quot;</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineInstr_8h.html">llvm/CodeGen/MachineInstr.h</a>&quot;</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineInstrBuilder_8h.html">llvm/CodeGen/MachineInstrBuilder.h</a>&quot;</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineOperand_8h.html">llvm/CodeGen/MachineOperand.h</a>&quot;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineRegisterInfo_8h.html">llvm/CodeGen/MachineRegisterInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineSSAUpdater_8h.html">llvm/CodeGen/MachineSSAUpdater.h</a>&quot;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineSizeOpts_8h.html">llvm/CodeGen/MachineSizeOpts.h</a>&quot;</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="TargetInstrInfo_8h.html">llvm/CodeGen/TargetInstrInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="TargetRegisterInfo_8h.html">llvm/CodeGen/TargetRegisterInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="TargetSubtargetInfo_8h.html">llvm/CodeGen/TargetSubtargetInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DebugLoc_8h.html">llvm/IR/DebugLoc.h</a>&quot;</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Function_8h.html">llvm/IR/Function.h</a>&quot;</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CommandLine_8h.html">llvm/Support/CommandLine.h</a>&quot;</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Debug_8h.html">llvm/Support/Debug.h</a>&quot;</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Support_2ErrorHandling_8h.html">llvm/Support/ErrorHandling.h</a>&quot;</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="raw__ostream_8h.html">llvm/Support/raw_ostream.h</a>&quot;</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Target_2TargetMachine_8h.html">llvm/Target/TargetMachine.h</a>&quot;</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#include &lt;algorithm&gt;</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &lt;cassert&gt;</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#include &lt;iterator&gt;</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#include &lt;utility&gt;</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160; </div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespacellvm.html">llvm</a>;</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160; </div>
<div class="line"><a name="l00048"></a><span class="lineno"><a class="line" href="TailDuplicator_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">   48</a></span>&#160;<span class="preprocessor">#define DEBUG_TYPE &quot;tailduplication&quot;</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160; </div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(NumTails, <span class="stringliteral">&quot;Number of tails duplicated&quot;</span>);</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(NumTailDups, <span class="stringliteral">&quot;Number of tail duplicated blocks&quot;</span>);</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(NumTailDupAdded,</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;          <span class="stringliteral">&quot;Number of instructions added due to tail duplication&quot;</span>);</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(NumTailDupRemoved,</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;          <span class="stringliteral">&quot;Number of instructions removed due to tail duplication&quot;</span>);</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(NumDeadBlocks, <span class="stringliteral">&quot;Number of dead blocks removed&quot;</span>);</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(NumAddedPHIs, <span class="stringliteral">&quot;Number of phis added&quot;</span>);</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160; </div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="comment">// Heuristic for tail duplication.</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;unsigned&gt;</a> <a class="code" href="TailDuplicator_8cpp.html#a650dbeb818b3823619b56309f3d6fdd4">TailDuplicateSize</a>(</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    <span class="stringliteral">&quot;tail-dup-size&quot;</span>,</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Maximum instructions to consider tail duplicating&quot;</span>), <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(2),</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>);</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160; </div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;unsigned&gt;</a> <a class="code" href="TailDuplicator_8cpp.html#a0f8adacb7541ff7197a2b08bee392440">TailDupIndirectBranchSize</a>(</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    <span class="stringliteral">&quot;tail-dup-indirect-size&quot;</span>,</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Maximum instructions to consider tail duplicating blocks that &quot;</span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;             <span class="stringliteral">&quot;end with indirect branches.&quot;</span>), <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(20),</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>);</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160; </div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a></div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    <a class="code" href="TailDuplicator_8cpp.html#a1b3ac2a9f1ec3750cb6732b1e3d8274b">TailDupVerify</a>(<span class="stringliteral">&quot;tail-dup-verify&quot;</span>,</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;                  <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Verify sanity of PHI instructions during taildup&quot;</span>),</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;                  <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">false</span>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>);</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160; </div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;unsigned&gt;</a> <a class="code" href="TailDuplicator_8cpp.html#addf0b268270efd00e0b70dee396e11b7">TailDupLimit</a>(<span class="stringliteral">&quot;tail-dup-limit&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(~0U),</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;                                      <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>);</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160; </div>
<div class="line"><a name="l00079"></a><span class="lineno"><a class="line" href="classllvm_1_1TailDuplicator.html#a1974019840857f5ae10aa6b4edc5317d">   79</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1TailDuplicator.html#a1974019840857f5ae10aa6b4edc5317d">TailDuplicator::initMF</a>(<a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MFin, <span class="keywordtype">bool</span> PreRegAlloc,</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;                            <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineBranchProbabilityInfo.html">MachineBranchProbabilityInfo</a> *MBPIin,</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;                            <a class="code" href="classllvm_1_1MBFIWrapper.html">MBFIWrapper</a> *MBFIin,</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;                            <a class="code" href="classllvm_1_1ProfileSummaryInfo.html">ProfileSummaryInfo</a> *PSIin,</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;                            <span class="keywordtype">bool</span> LayoutModeIn, <span class="keywordtype">unsigned</span> TailDupSizeIn) {</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;  MF = &amp;MFin;</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;  TII = MF-&gt;<a class="code" href="classllvm_1_1MachineFunction.html#a325f6b611ef9ec06798d3b4eb9572093">getSubtarget</a>().<a class="code" href="classllvm_1_1TargetSubtargetInfo.html#ad34f7e3cd7a9add3ab2529e267b48004">getInstrInfo</a>();</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;  TRI = MF-&gt;<a class="code" href="classllvm_1_1MachineFunction.html#a325f6b611ef9ec06798d3b4eb9572093">getSubtarget</a>().<a class="code" href="classllvm_1_1TargetSubtargetInfo.html#a87849514193302b75f50a8092f94b98a">getRegisterInfo</a>();</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;  MRI = &amp;MF-&gt;<a class="code" href="classllvm_1_1MachineFunction.html#ab4a6ca428289b667dd691a00e9f7e334">getRegInfo</a>();</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;  MMI = &amp;MF-&gt;<a class="code" href="classllvm_1_1MachineFunction.html#a6691cc6c9b7341348045f8d54a14e7a7">getMMI</a>();</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;  MBPI = MBPIin;</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;  MBFI = MBFIin;</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;  PSI = PSIin;</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;  TailDupSize = TailDupSizeIn;</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160; </div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(MBPI != <span class="keyword">nullptr</span> &amp;&amp; <span class="stringliteral">&quot;Machine Branch Probability Info required&quot;</span>);</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160; </div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;  LayoutMode = LayoutModeIn;</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;  this-&gt;PreRegAlloc = PreRegAlloc;</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;}</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160; </div>
<div class="line"><a name="l00100"></a><span class="lineno"><a class="line" href="TailDuplicator_8cpp.html#a833919b7851dc025ff507a7f8652bb8e">  100</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="TailDuplicator_8cpp.html#a833919b7851dc025ff507a7f8652bb8e">VerifyPHIs</a>(<a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF, <span class="keywordtype">bool</span> CheckExtra) {</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a> : <a class="code" href="namespacellvm.html#a02981de53fb6ffd384d39addc4d25f37">llvm::drop_begin</a>(MF)) {</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    <a class="code" href="classllvm_1_1SmallSetVector.html">SmallSetVector&lt;MachineBasicBlock *, 8&gt;</a> Preds(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#ab644fcf07a4c2708333cf66276282357">pred_begin</a>(),</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;                                                 <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a0359a738e0412c5a7ea55d61175e0661">pred_end</a>());</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    <a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> = <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#ab2d91e7bec944efcbc39d8e30644f111">begin</a>();</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    <span class="keywordflow">while</span> (<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> != <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">end</a>()) {</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;isPHI())</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *PredBB : Preds) {</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;        <span class="keywordtype">bool</span> Found = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 1, <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a> = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getNumOperands(); <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a>; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> += 2) {</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;          <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *PHIBB = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getOperand(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> + 1).getMBB();</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;          <span class="keywordflow">if</span> (PHIBB == PredBB) {</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;            Found = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;          }</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;        }</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;        <span class="keywordflow">if</span> (!Found) {</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;          <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Malformed PHI in &quot;</span> &lt;&lt; <a class="code" href="namespacellvm.html#af7881286e3ea4d7f1c4a63c87c132dac">printMBBReference</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>) &lt;&lt; <span class="stringliteral">&quot;: &quot;</span></div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;                 &lt;&lt; *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>;</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;          <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  missing input from predecessor &quot;</span></div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;                 &lt;&lt; <a class="code" href="namespacellvm.html#af7881286e3ea4d7f1c4a63c87c132dac">printMBBReference</a>(*PredBB) &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;          <a class="code" href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;        }</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;      }</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160; </div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 1, <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a> = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getNumOperands(); <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a>; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> += 2) {</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;        <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *PHIBB = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getOperand(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> + 1).getMBB();</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;        <span class="keywordflow">if</span> (CheckExtra &amp;&amp; !Preds.count(PHIBB)) {</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;          <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Warning: malformed PHI in &quot;</span> &lt;&lt; <a class="code" href="namespacellvm.html#af7881286e3ea4d7f1c4a63c87c132dac">printMBBReference</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>)</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;                 &lt;&lt; <span class="stringliteral">&quot;: &quot;</span> &lt;&lt; *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>;</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;          <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  extra input from predecessor &quot;</span></div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;                 &lt;&lt; <a class="code" href="namespacellvm.html#af7881286e3ea4d7f1c4a63c87c132dac">printMBBReference</a>(*PHIBB) &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;          <a class="code" href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;        }</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;        <span class="keywordflow">if</span> (PHIBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a3aa22d521bd6a7e6b9f35545dc7b0f1e">getNumber</a>() &lt; 0) {</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;          <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Malformed PHI in &quot;</span> &lt;&lt; <a class="code" href="namespacellvm.html#af7881286e3ea4d7f1c4a63c87c132dac">printMBBReference</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>) &lt;&lt; <span class="stringliteral">&quot;: &quot;</span></div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;                 &lt;&lt; *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>;</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;          <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  non-existing &quot;</span> &lt;&lt; <a class="code" href="namespacellvm.html#af7881286e3ea4d7f1c4a63c87c132dac">printMBBReference</a>(*PHIBB) &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;          <a class="code" href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;        }</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;      }</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;      ++<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>;</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    }</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;  }</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;}</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;<span class="comment">/// Tail duplicate the block and cleanup.</span></div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;<span class="comment">/// \p IsSimple - return value of isSimpleBB</span></div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;<span class="comment">/// \p MBB - block to be duplicated</span></div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;<span class="comment">/// \p ForcedLayoutPred - If non-null, treat this block as the layout</span></div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;<span class="comment">///     predecessor, instead of using the ordering in MF</span></div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;<span class="comment">/// \p DuplicatedPreds - if non-null, \p DuplicatedPreds will contain a list of</span></div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;<span class="comment">///     all Preds that received a copy of \p MBB.</span></div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;<span class="comment">/// \p RemovalCallback - if non-null, called just before MBB is deleted.</span></div>
<div class="line"><a name="l00155"></a><span class="lineno"><a class="line" href="classllvm_1_1TailDuplicator.html#a1c0f17f40e0399c6d151a50e99797e58">  155</a></span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1TailDuplicator.html#a1c0f17f40e0399c6d151a50e99797e58">TailDuplicator::tailDuplicateAndUpdate</a>(</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <span class="keywordtype">bool</span> IsSimple, <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>,</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *ForcedLayoutPred,</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;MachineBasicBlock*&gt;</a> *DuplicatedPreds,</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    <a class="code" href="classllvm_1_1function__ref.html">function_ref</a>&lt;<span class="keywordtype">void</span>(<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *)&gt; *RemovalCallback,</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;MachineBasicBlock *&gt;</a> *CandidatePtr) {</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;  <span class="comment">// Save the successors list.</span></div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;  <a class="code" href="classllvm_1_1SmallSetVector.html">SmallSetVector&lt;MachineBasicBlock *, 8&gt;</a> Succs(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a6321b189ea8fd5058663f8a87d6c23e9">succ_begin</a>(),</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;                                               <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a3ddd708642d60c1661992ff8ba1b215d">succ_end</a>());</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160; </div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;MachineBasicBlock *, 8&gt;</a> TDBBs;</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;MachineInstr *, 16&gt;</a> <a class="code" href="SILowerI1Copies_8cpp.html#a5cd9e4c7fe1a7ebe8b545eb891a2a949">Copies</a>;</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;  <span class="keywordflow">if</span> (!tailDuplicate(IsSimple, <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, ForcedLayoutPred,</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;                     TDBBs, <a class="code" href="SILowerI1Copies_8cpp.html#a5cd9e4c7fe1a7ebe8b545eb891a2a949">Copies</a>, CandidatePtr))</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160; </div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;  ++NumTails;</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160; </div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;MachineInstr *, 8&gt;</a> NewPHIs;</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;  <a class="code" href="classllvm_1_1MachineSSAUpdater.html">MachineSSAUpdater</a> SSAUpdate(*MF, &amp;NewPHIs);</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160; </div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;  <span class="comment">// TailBB&#39;s immediate successors are now successors of those predecessors</span></div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;  <span class="comment">// which duplicated TailBB. Add the predecessors as sources to the PHI</span></div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;  <span class="comment">// instructions.</span></div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;  <span class="keywordtype">bool</span> isDead = <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a877507fda31c207ec36a018784369708">pred_empty</a>() &amp;&amp; !<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a86ae593fc791eda3aae24bd9d6df2322">hasAddressTaken</a>();</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;  <span class="keywordflow">if</span> (PreRegAlloc)</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    updateSuccessorsPHIs(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, isDead, TDBBs, Succs);</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160; </div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;  <span class="comment">// If it is dead, remove it.</span></div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;  <span class="keywordflow">if</span> (isDead) {</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    NumTailDupRemoved += <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#adbff55f335d303816547f35eb6edb948">size</a>();</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    removeDeadBlock(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, RemovalCallback);</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    ++NumDeadBlocks;</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;  }</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160; </div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;  <span class="comment">// Update SSA form.</span></div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;  <span class="keywordflow">if</span> (!SSAUpdateVRs.empty()) {</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a> = SSAUpdateVRs.size(); <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a>; ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;      <span class="keywordtype">unsigned</span> VReg = SSAUpdateVRs[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;      SSAUpdate.<a class="code" href="classllvm_1_1MachineSSAUpdater.html#a00117e47ce48a2a6e82e852dbb342202">Initialize</a>(VReg);</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160; </div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;      <span class="comment">// If the original definition is still around, add it as an available</span></div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;      <span class="comment">// value.</span></div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;      <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="AArch64ExpandPseudoInsts_8cpp.html#ad3ece0ac2421637044624c9b01c42466">DefMI</a> = MRI-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a40d954b9cf9ee8b545a78725f2549cba">getVRegDef</a>(VReg);</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;      <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *DefBB = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="AArch64ExpandPseudoInsts_8cpp.html#ad3ece0ac2421637044624c9b01c42466">DefMI</a>) {</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;        DefBB = <a class="code" href="AArch64ExpandPseudoInsts_8cpp.html#ad3ece0ac2421637044624c9b01c42466">DefMI</a>-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a002fd916e7206e01d512eeb06d405cf0">getParent</a>();</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;        SSAUpdate.<a class="code" href="classllvm_1_1MachineSSAUpdater.html#ab01bfdaa2826542f165fa1ff6a2aacf1">AddAvailableValue</a>(DefBB, VReg);</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;      }</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160; </div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;      <span class="comment">// Add the new vregs as available values.</span></div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;      <a class="code" href="classllvm_1_1DenseMapIterator.html">DenseMap&lt;Register, AvailableValsTy&gt;::iterator</a> LI =</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;          SSAUpdateVals.find(VReg);</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;      <span class="keywordflow">for</span> (std::pair&lt;MachineBasicBlock *, Register&gt; &amp;J : LI-&gt;second) {</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;        <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *SrcBB = J.first;</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;        <a class="code" href="classllvm_1_1Register.html">Register</a> SrcReg = J.second;</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;        SSAUpdate.<a class="code" href="classllvm_1_1MachineSSAUpdater.html#ab01bfdaa2826542f165fa1ff6a2aacf1">AddAvailableValue</a>(SrcBB, SrcReg);</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;      }</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160; </div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;      <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;MachineOperand *&gt;</a> DebugUses;</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;      <span class="comment">// Rewrite uses that are outside of the original def&#39;s block.</span></div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;UseMO :</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;           <a class="code" href="namespacellvm.html#a8154638df88e4eaa568b67b23d463dac">llvm::make_early_inc_range</a>(MRI-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a314b8f9b578670938c23b1cc9de623c3">use_operands</a>(VReg))) {</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;        <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="AArch64ExpandPseudoInsts_8cpp.html#a6cf2f8996b1e9aaf2d7a435aaa62382f">UseMI</a> = UseMO.getParent();</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;        <span class="comment">// Rewrite debug uses last so that they can take advantage of any</span></div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;        <span class="comment">// register mappings introduced by other users in its BB, since we</span></div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;        <span class="comment">// cannot create new register definitions specifically for the debug</span></div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;        <span class="comment">// instruction (as debug instructions should not affect CodeGen).</span></div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="AArch64ExpandPseudoInsts_8cpp.html#a6cf2f8996b1e9aaf2d7a435aaa62382f">UseMI</a>-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#accb3520c6008297678829eed493b6c68">isDebugValue</a>()) {</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;          DebugUses.push_back(&amp;UseMO);</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;        }</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="AArch64ExpandPseudoInsts_8cpp.html#a6cf2f8996b1e9aaf2d7a435aaa62382f">UseMI</a>-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a002fd916e7206e01d512eeb06d405cf0">getParent</a>() == DefBB &amp;&amp; !<a class="code" href="AArch64ExpandPseudoInsts_8cpp.html#a6cf2f8996b1e9aaf2d7a435aaa62382f">UseMI</a>-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#ad43bf1af480830a4d6604e969e3f38e9">isPHI</a>())</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;        SSAUpdate.<a class="code" href="classllvm_1_1MachineSSAUpdater.html#a71a08885f7838dc5a544816a357e2ec7">RewriteUse</a>(UseMO);</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;      }</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">auto</span> *UseMO : DebugUses) {</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;        <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="AArch64ExpandPseudoInsts_8cpp.html#a6cf2f8996b1e9aaf2d7a435aaa62382f">UseMI</a> = UseMO-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a002fd916e7206e01d512eeb06d405cf0">getParent</a>();</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;        UseMO-&gt;setReg(</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;            SSAUpdate.<a class="code" href="classllvm_1_1MachineSSAUpdater.html#a670da7741129c7d591dc19951ecce6c3">GetValueInMiddleOfBlock</a>(<a class="code" href="AArch64ExpandPseudoInsts_8cpp.html#a6cf2f8996b1e9aaf2d7a435aaa62382f">UseMI</a>-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a002fd916e7206e01d512eeb06d405cf0">getParent</a>(), <span class="keyword">true</span>));</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;      }</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    }</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160; </div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    SSAUpdateVRs.clear();</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    SSAUpdateVals.clear();</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;  }</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160; </div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;  <span class="comment">// Eliminate some of the copies inserted by tail duplication to maintain</span></div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;  <span class="comment">// SSA form.</span></div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a> = <a class="code" href="SILowerI1Copies_8cpp.html#a5cd9e4c7fe1a7ebe8b545eb891a2a949">Copies</a>.size(); <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a>; ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *Copy = <a class="code" href="SILowerI1Copies_8cpp.html#a5cd9e4c7fe1a7ebe8b545eb891a2a949">Copies</a>[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    <span class="keywordflow">if</span> (!Copy-&gt;isCopy())</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> Dst = Copy-&gt;getOperand(0).getReg();</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> Src = Copy-&gt;getOperand(1).getReg();</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    <span class="keywordflow">if</span> (MRI-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a01bf72631b0bc836a8c07fe840b13233">hasOneNonDBGUse</a>(Src) &amp;&amp;</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;        MRI-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#ad85285685fc46db3f2b3b0bf90bf9184">constrainRegClass</a>(Src, MRI-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#aa363afffca4fc13a709673936b47fe33">getRegClass</a>(Dst))) {</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;      <span class="comment">// Copy is the only use. Do trivial copy propagation here.</span></div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;      MRI-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#af16c39ee36e4633f821b6820f8bd52ef">replaceRegWith</a>(Dst, Src);</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;      Copy-&gt;eraseFromParent();</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    }</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;  }</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160; </div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;  <span class="keywordflow">if</span> (NewPHIs.size())</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    NumAddedPHIs += NewPHIs.size();</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160; </div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;  <span class="keywordflow">if</span> (DuplicatedPreds)</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    *DuplicatedPreds = <a class="code" href="lib_2Target_2ARM_2README_8txt.html#ad3a99906764c35b2694ae90fa57744a5">std::move</a>(TDBBs);</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160; </div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;}</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;<span class="comment">/// Look for small blocks that are unconditionally branched to and do not fall</span></div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;<span class="comment">/// through. Tail-duplicate their instructions into their predecessors to</span></div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;<span class="comment">/// eliminate (dynamic) branches.</span></div>
<div class="line"><a name="l00270"></a><span class="lineno"><a class="line" href="classllvm_1_1TailDuplicator.html#a1b957210a6d62c3fe19410e746fc6ab4">  270</a></span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1TailDuplicator.html#a1b957210a6d62c3fe19410e746fc6ab4">TailDuplicator::tailDuplicateBlocks</a>() {</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;  <span class="keywordtype">bool</span> MadeChange = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160; </div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;  <span class="keywordflow">if</span> (PreRegAlloc &amp;&amp; <a class="code" href="TailDuplicator_8cpp.html#a1b3ac2a9f1ec3750cb6732b1e3d8274b">TailDupVerify</a>) {</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;\n*** Before tail-duplicating\n&quot;</span>);</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    <a class="code" href="TailDuplicator_8cpp.html#a833919b7851dc025ff507a7f8652bb8e">VerifyPHIs</a>(*MF, <span class="keyword">true</span>);</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;  }</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160; </div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a> :</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;       <a class="code" href="namespacellvm.html#a8154638df88e4eaa568b67b23d463dac">llvm::make_early_inc_range</a>(<a class="code" href="namespacellvm.html#a02981de53fb6ffd384d39addc4d25f37">llvm::drop_begin</a>(*MF))) {</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    <span class="keywordflow">if</span> (NumTails == <a class="code" href="TailDuplicator_8cpp.html#addf0b268270efd00e0b70dee396e11b7">TailDupLimit</a>)</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160; </div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    <span class="keywordtype">bool</span> IsSimple = <a class="code" href="classllvm_1_1TailDuplicator.html#a22b5f49c33bc7b11d150556b0ee1ca0a">isSimpleBB</a>(&amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>);</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160; </div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classllvm_1_1TailDuplicator.html#aa7dba30d4d9162f00367404e06085391">shouldTailDuplicate</a>(IsSimple, <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>))</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160; </div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    MadeChange |= <a class="code" href="classllvm_1_1TailDuplicator.html#a1c0f17f40e0399c6d151a50e99797e58">tailDuplicateAndUpdate</a>(IsSimple, &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;  }</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160; </div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;  <span class="keywordflow">if</span> (PreRegAlloc &amp;&amp; <a class="code" href="TailDuplicator_8cpp.html#a1b3ac2a9f1ec3750cb6732b1e3d8274b">TailDupVerify</a>)</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    <a class="code" href="TailDuplicator_8cpp.html#a833919b7851dc025ff507a7f8652bb8e">VerifyPHIs</a>(*MF, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160; </div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;  <span class="keywordflow">return</span> MadeChange;</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;}</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160; </div>
<div class="line"><a name="l00297"></a><span class="lineno"><a class="line" href="TailDuplicator_8cpp.html#af85a5fe23faddaea6601422ca2854b05">  297</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="TailDuplicator_8cpp.html#af85a5fe23faddaea6601422ca2854b05">isDefLiveOut</a>(<a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>, <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>,</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;                         <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineRegisterInfo.html">MachineRegisterInfo</a> *<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>) {</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="AArch64ExpandPseudoInsts_8cpp.html#a6cf2f8996b1e9aaf2d7a435aaa62382f">UseMI</a> : <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#af400646844b3c80b534e81a0d855ed4a">use_instructions</a>(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>)) {</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="AArch64ExpandPseudoInsts_8cpp.html#a6cf2f8996b1e9aaf2d7a435aaa62382f">UseMI</a>.isDebugValue())</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="AArch64ExpandPseudoInsts_8cpp.html#a6cf2f8996b1e9aaf2d7a435aaa62382f">UseMI</a>.getParent() != <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>)</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;  }</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;}</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160; </div>
<div class="line"><a name="l00308"></a><span class="lineno"><a class="line" href="TailDuplicator_8cpp.html#aa0c584322547d392248159b2754429f1">  308</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">unsigned</span> <a class="code" href="TailDuplicator_8cpp.html#aa0c584322547d392248159b2754429f1">getPHISrcRegOpIdx</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *SrcBB) {</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 1, <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a> = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getNumOperands(); <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a>; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> += 2)</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getOperand(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> + 1).getMBB() == SrcBB)</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;  <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;}</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160; </div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;<span class="comment">// Remember which registers are used by phis in this block. This is</span></div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;<span class="comment">// used to determine which registers are liveout while modifying the</span></div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;<span class="comment">// block (which is why we need to copy the information).</span></div>
<div class="line"><a name="l00318"></a><span class="lineno"><a class="line" href="TailDuplicator_8cpp.html#ac3fb3fc8ff6a8d4c09110a9eee40321f">  318</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="TailDuplicator_8cpp.html#ac3fb3fc8ff6a8d4c09110a9eee40321f">getRegsUsedByPHIs</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>,</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;                              <a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;Register&gt;</a> *UsedByPhi) {</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> : <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) {</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.isPHI())</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 1, <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a> = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getNumOperands(); <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a>; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> += 2) {</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;      <a class="code" href="classllvm_1_1Register.html">Register</a> SrcReg = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>).getReg();</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;      UsedByPhi-&gt;<a class="code" href="classllvm_1_1detail_1_1DenseSetImpl.html#a79eed48913651aeedda2eed25201ea84">insert</a>(SrcReg);</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    }</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;  }</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;}</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;<span class="comment">/// Add a definition and source virtual registers pair for SSA update.</span></div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> TailDuplicator::addSSAUpdateEntry(<a class="code" href="classllvm_1_1Register.html">Register</a> OrigReg, <a class="code" href="classllvm_1_1Register.html">Register</a> NewReg,</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;                                       <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) {</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;  <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;Register, AvailableValsTy&gt;::iterator</a> LI =</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;      SSAUpdateVals.find(OrigReg);</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;  <span class="keywordflow">if</span> (LI != SSAUpdateVals.end())</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    LI-&gt;second.push_back(std::make_pair(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, NewReg));</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;  <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    <a class="code" href="classllvm_1_1DenseMap.html">AvailableValsTy</a> Vals;</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    Vals.push_back(std::make_pair(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, NewReg));</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    SSAUpdateVals.insert(std::make_pair(OrigReg, Vals));</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    SSAUpdateVRs.push_back(OrigReg);</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;  }</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;}</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;<span class="comment">/// Process PHI node in TailBB by turning it into a copy in PredBB. Remember the</span></div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;<span class="comment">/// source register that&#39;s contributed by PredBB and update SSA update map.</span></div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> TailDuplicator::processPHI(</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *TailBB, <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *PredBB,</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;Register, RegSubRegPair&gt;</a> &amp;LocalVRMap,</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl</a>&lt;std::pair&lt;Register, RegSubRegPair&gt;&gt; &amp;<a class="code" href="SILowerI1Copies_8cpp.html#a5cd9e4c7fe1a7ebe8b545eb891a2a949">Copies</a>,</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;Register&gt;</a> &amp;RegsUsedByPhi, <span class="keywordtype">bool</span> Remove) {</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> DefReg = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getOperand(0).getReg();</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;  <span class="keywordtype">unsigned</span> SrcOpIdx = <a class="code" href="TailDuplicator_8cpp.html#aa0c584322547d392248159b2754429f1">getPHISrcRegOpIdx</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, PredBB);</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(SrcOpIdx &amp;&amp; <span class="stringliteral">&quot;Unable to find matching PHI source?&quot;</span>);</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> SrcReg = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getOperand(SrcOpIdx).getReg();</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;  <span class="keywordtype">unsigned</span> SrcSubReg = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getOperand(SrcOpIdx).getSubReg();</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetRegisterClass.html">TargetRegisterClass</a> *RC = MRI-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#aa363afffca4fc13a709673936b47fe33">getRegClass</a>(DefReg);</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;  LocalVRMap.<a class="code" href="classllvm_1_1DenseMapBase.html#a99f811d53704275b4158c62a2dd138d9">insert</a>(std::make_pair(DefReg, <a class="code" href="structllvm_1_1TargetInstrInfo_1_1RegSubRegPair.html">RegSubRegPair</a>(SrcReg, SrcSubReg)));</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160; </div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;  <span class="comment">// Insert a copy from source to the end of the block. The def register is the</span></div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;  <span class="comment">// available value liveout of the block.</span></div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> NewDef = MRI-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5c77792a06583e0fe7a0379ad94a2809">createVirtualRegister</a>(RC);</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;  <a class="code" href="SILowerI1Copies_8cpp.html#a5cd9e4c7fe1a7ebe8b545eb891a2a949">Copies</a>.push_back(std::make_pair(NewDef, <a class="code" href="structllvm_1_1TargetInstrInfo_1_1RegSubRegPair.html">RegSubRegPair</a>(SrcReg, SrcSubReg)));</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="TailDuplicator_8cpp.html#af85a5fe23faddaea6601422ca2854b05">isDefLiveOut</a>(DefReg, TailBB, MRI) || RegsUsedByPhi.<a class="code" href="classllvm_1_1detail_1_1DenseSetImpl.html#afe504aa31a6a354cec13f5b32d0b1d9d">count</a>(DefReg))</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    addSSAUpdateEntry(DefReg, NewDef, PredBB);</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160; </div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;  <span class="keywordflow">if</span> (!Remove)</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160; </div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;  <span class="comment">// Remove PredBB from the PHI node.</span></div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;removeOperand(SrcOpIdx + 1);</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;removeOperand(SrcOpIdx);</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getNumOperands() == 1 &amp;&amp; !TailBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a86ae593fc791eda3aae24bd9d6df2322">hasAddressTaken</a>())</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;eraseFromParent();</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getNumOperands() == 1)</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;setDesc(TII-&gt;<a class="code" href="classllvm_1_1MCInstrInfo.html#a0587abbded61717d8a153b7e5bfdbfed">get</a>(TargetOpcode::IMPLICIT_DEF));</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;}</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;<span class="comment">/// Duplicate a TailBB instruction to PredBB and update</span></div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;<span class="comment">/// the source operands due to earlier PHI translation.</span></div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> TailDuplicator::duplicateInstruction(</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *TailBB, <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *PredBB,</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;Register, RegSubRegPair&gt;</a> &amp;LocalVRMap,</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;Register&gt;</a> &amp;UsedByPhi) {</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;  <span class="comment">// Allow duplication of CFI instructions.</span></div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;isCFIInstruction()) {</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(*PredBB, PredBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">end</a>(), PredBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#ab622d694b5fcb0edb99159f1ebdcdb6b">findDebugLoc</a>(PredBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#ab2d91e7bec944efcbc39d8e30644f111">begin</a>()),</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;            TII-&gt;<a class="code" href="classllvm_1_1MCInstrInfo.html#a0587abbded61717d8a153b7e5bfdbfed">get</a>(TargetOpcode::CFI_INSTRUCTION))</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad51b0d1c80a9dbf0eea9162e2e3ec0dd">addCFIIndex</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getOperand(0).getCFIIndex())</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a860467662b17cef898ece774ab400235">setMIFlags</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getFlags());</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;  }</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;  <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;NewMI = TII-&gt;<a class="code" href="classllvm_1_1TargetInstrInfo.html#a8d5210bd68a86582390a6fbf1f57e319">duplicate</a>(*PredBB, PredBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">end</a>(), *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;  <span class="keywordflow">if</span> (PreRegAlloc) {</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a> = NewMI.<a class="code" href="classllvm_1_1MachineInstr.html#a432824f0975bb863478bf4ef3a5df258">getNumOperands</a>(); <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a>; ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;      <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;MO = NewMI.<a class="code" href="classllvm_1_1MachineInstr.html#a3f7a45f6e10668a5f702e26bca80d18e">getOperand</a>(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;      <span class="keywordflow">if</span> (!MO.<a class="code" href="classllvm_1_1MachineOperand.html#a4c9594c955fec80c73ddd964b5efd554">isReg</a>())</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;      <a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a> = MO.<a class="code" href="classllvm_1_1MachineOperand.html#ac0035d7c1c860501c877c20e6e93297b">getReg</a>();</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>.isVirtual())</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;      <span class="keywordflow">if</span> (MO.<a class="code" href="classllvm_1_1MachineOperand.html#a75eb135014670ce946e78739cdc9b51b">isDef</a>()) {</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;        <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetRegisterClass.html">TargetRegisterClass</a> *RC = MRI-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#aa363afffca4fc13a709673936b47fe33">getRegClass</a>(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>);</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;        <a class="code" href="classllvm_1_1Register.html">Register</a> NewReg = MRI-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5c77792a06583e0fe7a0379ad94a2809">createVirtualRegister</a>(RC);</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;        MO.<a class="code" href="classllvm_1_1MachineOperand.html#a682ba82f42f7903d0000ffbb13ea3b57">setReg</a>(NewReg);</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;        LocalVRMap.<a class="code" href="classllvm_1_1DenseMapBase.html#a99f811d53704275b4158c62a2dd138d9">insert</a>(std::make_pair(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>, <a class="code" href="structllvm_1_1TargetInstrInfo_1_1RegSubRegPair.html">RegSubRegPair</a>(NewReg, 0)));</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="TailDuplicator_8cpp.html#af85a5fe23faddaea6601422ca2854b05">isDefLiveOut</a>(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>, TailBB, MRI) || UsedByPhi.<a class="code" href="classllvm_1_1detail_1_1DenseSetImpl.html#afe504aa31a6a354cec13f5b32d0b1d9d">count</a>(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>))</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;          addSSAUpdateEntry(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>, NewReg, PredBB);</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;        <span class="keyword">auto</span> <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a97bce951e4585a39601c04d86bb14ffd">VI</a> = LocalVRMap.<a class="code" href="classllvm_1_1DenseMapBase.html#a0c047f127ed4380a6f383d70bec4eb94">find</a>(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>);</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a97bce951e4585a39601c04d86bb14ffd">VI</a> != LocalVRMap.<a class="code" href="classllvm_1_1DenseMapBase.html#a65520b9c67759099e313d0f4e7b5ff9e">end</a>()) {</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;          <span class="comment">// Need to make sure that the register class of the mapped register</span></div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;          <span class="comment">// will satisfy the constraints of the class of the register being</span></div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;          <span class="comment">// replaced.</span></div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;          <span class="keyword">auto</span> *OrigRC = MRI-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#aa363afffca4fc13a709673936b47fe33">getRegClass</a>(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>);</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;          <span class="keyword">auto</span> *MappedRC = MRI-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#aa363afffca4fc13a709673936b47fe33">getRegClass</a>(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a97bce951e4585a39601c04d86bb14ffd">VI</a>-&gt;second.Reg);</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;          <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetRegisterClass.html">TargetRegisterClass</a> *ConstrRC;</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a97bce951e4585a39601c04d86bb14ffd">VI</a>-&gt;second.SubReg != 0) {</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;            ConstrRC = TRI-&gt;<a class="code" href="classllvm_1_1TargetRegisterInfo.html#af14d27fb00fd2058e8da7eec1489df19">getMatchingSuperRegClass</a>(MappedRC, OrigRC,</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;                                                     <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a97bce951e4585a39601c04d86bb14ffd">VI</a>-&gt;second.SubReg);</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;            <span class="keywordflow">if</span> (ConstrRC) {</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;              <span class="comment">// The actual constraining (as in &quot;find appropriate new class&quot;)</span></div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;              <span class="comment">// is done by getMatchingSuperRegClass, so now we only need to</span></div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;              <span class="comment">// change the class of the mapped register.</span></div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;              MRI-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a965a15cef77a97f0e17f9f26fd5be53e">setRegClass</a>(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a97bce951e4585a39601c04d86bb14ffd">VI</a>-&gt;second.Reg, ConstrRC);</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;            }</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;          } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;            <span class="comment">// For mapped registers that do not have sub-registers, simply</span></div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;            <span class="comment">// restrict their class to match the original one.</span></div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;            ConstrRC = MRI-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#ad85285685fc46db3f2b3b0bf90bf9184">constrainRegClass</a>(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a97bce951e4585a39601c04d86bb14ffd">VI</a>-&gt;second.Reg, OrigRC);</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;          }</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160; </div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;          <span class="keywordflow">if</span> (ConstrRC) {</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;            <span class="comment">// If the class constraining succeeded, we can simply replace</span></div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;            <span class="comment">// the old register with the mapped one.</span></div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;            MO.<a class="code" href="classllvm_1_1MachineOperand.html#a682ba82f42f7903d0000ffbb13ea3b57">setReg</a>(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a97bce951e4585a39601c04d86bb14ffd">VI</a>-&gt;second.Reg);</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;            <span class="comment">// We have Reg -&gt; VI.Reg:VI.SubReg, so if Reg is used with a</span></div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;            <span class="comment">// sub-register, we need to compose the sub-register indices.</span></div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;            MO.<a class="code" href="classllvm_1_1MachineOperand.html#a001d31fcea92be51d2999826b806606f">setSubReg</a>(</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;                TRI-&gt;<a class="code" href="classllvm_1_1TargetRegisterInfo.html#a3a4eeb9ff94628ed00e695d6aa8e897f">composeSubRegIndices</a>(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a97bce951e4585a39601c04d86bb14ffd">VI</a>-&gt;second.SubReg, MO.<a class="code" href="classllvm_1_1MachineOperand.html#a028a8c5113d40d8c3f4427053bf36738">getSubReg</a>()));</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;          } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;            <span class="comment">// The direct replacement is not possible, due to failing register</span></div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;            <span class="comment">// class constraints. An explicit COPY is necessary. Create one</span></div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;            <span class="comment">// that can be reused.</span></div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;            <a class="code" href="classllvm_1_1Register.html">Register</a> NewReg = MRI-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5c77792a06583e0fe7a0379ad94a2809">createVirtualRegister</a>(OrigRC);</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;            <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(*PredBB, NewMI, NewMI.<a class="code" href="classllvm_1_1MachineInstr.html#ae8ff2acea4fe63e48e8fc6cf0620ff78">getDebugLoc</a>(),</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;                    TII-&gt;<a class="code" href="classllvm_1_1MCInstrInfo.html#a0587abbded61717d8a153b7e5bfdbfed">get</a>(TargetOpcode::COPY), NewReg)</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;                .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a97bce951e4585a39601c04d86bb14ffd">VI</a>-&gt;second.Reg, 0, <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a97bce951e4585a39601c04d86bb14ffd">VI</a>-&gt;second.SubReg);</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;            LocalVRMap.<a class="code" href="classllvm_1_1DenseMapBase.html#a1eb8504bab5f794778d82db6ac829923">erase</a>(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a97bce951e4585a39601c04d86bb14ffd">VI</a>);</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;            LocalVRMap.<a class="code" href="classllvm_1_1DenseMapBase.html#a99f811d53704275b4158c62a2dd138d9">insert</a>(std::make_pair(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>, <a class="code" href="structllvm_1_1TargetInstrInfo_1_1RegSubRegPair.html">RegSubRegPair</a>(NewReg, 0)));</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;            MO.<a class="code" href="classllvm_1_1MachineOperand.html#a682ba82f42f7903d0000ffbb13ea3b57">setReg</a>(NewReg);</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;            <span class="comment">// The composed VI.Reg:VI.SubReg is replaced with NewReg, which</span></div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;            <span class="comment">// is equivalent to the whole register Reg. Hence, Reg:subreg</span></div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;            <span class="comment">// is same as NewReg:subreg, so keep the sub-register index</span></div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;            <span class="comment">// unchanged.</span></div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;          }</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;          <span class="comment">// Clear any kill flags from this operand.  The new register could</span></div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;          <span class="comment">// have uses after this one, so kills are not valid here.</span></div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;          MO.<a class="code" href="classllvm_1_1MachineOperand.html#a8a82683fccdef8a5ef772ef03277aee7">setIsKill</a>(<span class="keyword">false</span>);</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;        }</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;      }</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    }</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;  }</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;}</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;<span class="comment">/// After FromBB is tail duplicated into its predecessor blocks, the successors</span></div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;<span class="comment">/// have gained new predecessors. Update the PHI instructions in them</span></div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;<span class="comment">/// accordingly.</span></div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> TailDuplicator::updateSuccessorsPHIs(</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;    <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *FromBB, <span class="keywordtype">bool</span> isDead,</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;    <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;MachineBasicBlock *&gt;</a> &amp;TDBBs,</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;    <a class="code" href="classllvm_1_1SmallSetVector.html">SmallSetVector&lt;MachineBasicBlock *, 8&gt;</a> &amp;Succs) {</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *SuccBB : Succs) {</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> : *SuccBB) {</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.isPHI())</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;      <a class="code" href="classllvm_1_1MachineInstrBuilder.html">MachineInstrBuilder</a> MIB(*FromBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a4e21760f681d6f97f95c8414e7b83ea5">getParent</a>(), <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;      <span class="keywordtype">unsigned</span> Idx = 0;</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 1, <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a> = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getNumOperands(); <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a>; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> += 2) {</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;        <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;MO = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> + 1);</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;        <span class="keywordflow">if</span> (MO.<a class="code" href="classllvm_1_1MachineOperand.html#a9b48cb80ee1534c2b51d789b673137c1">getMBB</a>() == FromBB) {</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;          Idx = <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;        }</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;      }</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160; </div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Idx != 0);</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;      <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;MO0 = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(Idx);</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;      <a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a> = MO0.<a class="code" href="classllvm_1_1MachineOperand.html#ac0035d7c1c860501c877c20e6e93297b">getReg</a>();</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;      <span class="keywordflow">if</span> (isDead) {</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;        <span class="comment">// Folded into the previous BB.</span></div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;        <span class="comment">// There could be duplicate phi source entries. FIXME: Should sdisel</span></div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;        <span class="comment">// or earlier pass fixed this?</span></div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getNumOperands() - 2; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != Idx; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> -= 2) {</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;          <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;MO = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> + 1);</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;          <span class="keywordflow">if</span> (MO.<a class="code" href="classllvm_1_1MachineOperand.html#a9b48cb80ee1534c2b51d789b673137c1">getMBB</a>() == FromBB) {</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;            <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.removeOperand(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> + 1);</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;            <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.removeOperand(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;          }</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;        }</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;      } <span class="keywordflow">else</span></div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;        Idx = 0;</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160; </div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;      <span class="comment">// If Idx is set, the operands at Idx and Idx+1 must be removed.</span></div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;      <span class="comment">// We reuse the location to avoid expensive removeOperand calls.</span></div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160; </div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;      <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;Register, AvailableValsTy&gt;::iterator</a> LI =</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;          SSAUpdateVals.find(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>);</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;      <span class="keywordflow">if</span> (LI != SSAUpdateVals.end()) {</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;        <span class="comment">// This register is defined in the tail block.</span></div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;        <span class="keywordflow">for</span> (<span class="keyword">const</span> std::pair&lt;MachineBasicBlock *, Register&gt; &amp;J : LI-&gt;second) {</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;          <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *SrcBB = J.first;</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;          <span class="comment">// If we didn&#39;t duplicate a bb into a particular predecessor, we</span></div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;          <span class="comment">// might still have added an entry to SSAUpdateVals to correcly</span></div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;          <span class="comment">// recompute SSA. If that case, avoid adding a dummy extra argument</span></div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;          <span class="comment">// this PHI.</span></div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;          <span class="keywordflow">if</span> (!SrcBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#adc8f1be4a77ae671ac139d5f06b44deb">isSuccessor</a>(SuccBB))</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160; </div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;          <a class="code" href="classllvm_1_1Register.html">Register</a> SrcReg = J.second;</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;          <span class="keywordflow">if</span> (Idx != 0) {</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;            <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(Idx).setReg(SrcReg);</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;            <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(Idx + 1).setMBB(SrcBB);</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;            Idx = 0;</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;          } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;            MIB.addReg(SrcReg).addMBB(SrcBB);</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;          }</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;        }</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;        <span class="comment">// Live in tail block, must also be live in predecessors.</span></div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *SrcBB : TDBBs) {</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;          <span class="keywordflow">if</span> (Idx != 0) {</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;            <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(Idx).setReg(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>);</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;            <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(Idx + 1).setMBB(SrcBB);</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;            Idx = 0;</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;          } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;            MIB.addReg(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>).addMBB(SrcBB);</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;          }</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;        }</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;      }</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;      <span class="keywordflow">if</span> (Idx != 0) {</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;        <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.removeOperand(Idx + 1);</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;        <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.removeOperand(Idx);</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;      }</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;    }</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;  }</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;}</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;<span class="comment">/// Determine if it is profitable to duplicate this block.</span></div>
<div class="line"><a name="l00550"></a><span class="lineno"><a class="line" href="classllvm_1_1TailDuplicator.html#aa7dba30d4d9162f00367404e06085391">  550</a></span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1TailDuplicator.html#aa7dba30d4d9162f00367404e06085391">TailDuplicator::shouldTailDuplicate</a>(<span class="keywordtype">bool</span> IsSimple,</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;                                         <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;TailBB) {</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;  <span class="comment">// When doing tail-duplication during layout, the block ordering is in flux,</span></div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;  <span class="comment">// so canFallThrough returns a result based on incorrect information and</span></div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;  <span class="comment">// should just be ignored.</span></div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;  <span class="keywordflow">if</span> (!LayoutMode &amp;&amp; TailBB.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a5ffb77c69d69a5beff906caaecfd7be4">canFallThrough</a>())</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160; </div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;  <span class="comment">// Don&#39;t try to tail-duplicate single-block loops.</span></div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;  <span class="keywordflow">if</span> (TailBB.<a class="code" href="classllvm_1_1MachineBasicBlock.html#adc8f1be4a77ae671ac139d5f06b44deb">isSuccessor</a>(&amp;TailBB))</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160; </div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;  <span class="comment">// Set the limit on the cost to duplicate. When optimizing for size,</span></div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;  <span class="comment">// duplicate only one, because one branch instruction can be eliminated to</span></div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;  <span class="comment">// compensate for the duplication.</span></div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;  <span class="keywordtype">unsigned</span> MaxDuplicateCount;</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;  <span class="keywordtype">bool</span> OptForSize = MF-&gt;<a class="code" href="classllvm_1_1MachineFunction.html#a4b21394c138cc5ae719510bb529ee099">getFunction</a>().<a class="code" href="classllvm_1_1Function.html#a1c455e007178a24dfb18ac0e200ea02c">hasOptSize</a>() ||</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;                    <a class="code" href="namespacellvm.html#a3af72f14ea20f2c762c751d2d49e5ea3">llvm::shouldOptimizeForSize</a>(&amp;TailBB, PSI, MBFI);</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;  <span class="keywordflow">if</span> (TailDupSize == 0)</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;    MaxDuplicateCount = <a class="code" href="TailDuplicator_8cpp.html#a650dbeb818b3823619b56309f3d6fdd4">TailDuplicateSize</a>;</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;    MaxDuplicateCount = TailDupSize;</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;  <span class="keywordflow">if</span> (OptForSize)</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;    MaxDuplicateCount = 1;</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160; </div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;  <span class="comment">// If the block to be duplicated ends in an unanalyzable fallthrough, don&#39;t</span></div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;  <span class="comment">// duplicate it.</span></div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;  <span class="comment">// A similar check is necessary in MachineBlockPlacement to make sure pairs of</span></div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;  <span class="comment">// blocks with unanalyzable fallthrough get layed out contiguously.</span></div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;  <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *PredTBB = <span class="keyword">nullptr</span>, *PredFBB = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;MachineOperand, 4&gt;</a> PredCond;</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;  <span class="keywordflow">if</span> (TII-&gt;<a class="code" href="classllvm_1_1TargetInstrInfo.html#a0dfb0c744373d4b6112eb343a5b07fc7">analyzeBranch</a>(TailBB, PredTBB, PredFBB, PredCond) &amp;&amp;</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;      TailBB.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a5ffb77c69d69a5beff906caaecfd7be4">canFallThrough</a>())</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160; </div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;  <span class="comment">// If the target has hardware branch prediction that can handle indirect</span></div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;  <span class="comment">// branches, duplicating them can often make them predictable when there</span></div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;  <span class="comment">// are common paths through the code.  The limit needs to be high enough</span></div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;  <span class="comment">// to allow undoing the effects of tail merging and other optimizations</span></div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;  <span class="comment">// that rearrange the predecessors of the indirect branch.</span></div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160; </div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;  <span class="keywordtype">bool</span> HasIndirectbr = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;  <span class="keywordflow">if</span> (!TailBB.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a095ce2d870dadf620a4c887ecc0efef8">empty</a>())</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;    HasIndirectbr = TailBB.<a class="code" href="classllvm_1_1MachineBasicBlock.html#ace3ed0412f841777b7de55d47883890e">back</a>().<a class="code" href="classllvm_1_1MachineInstr.html#af2a873c264b53d77e7c3fc7402379960">isIndirectBranch</a>();</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160; </div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;  <span class="keywordflow">if</span> (HasIndirectbr &amp;&amp; PreRegAlloc)</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;    MaxDuplicateCount = <a class="code" href="TailDuplicator_8cpp.html#a0f8adacb7541ff7197a2b08bee392440">TailDupIndirectBranchSize</a>;</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160; </div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;  <span class="comment">// Check the instructions in the block to determine whether tail-duplication</span></div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;  <span class="comment">// is invalid or unlikely to be profitable.</span></div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;  <span class="keywordtype">unsigned</span> <a class="code" href="DFAPacketizer_8cpp.html#acc16edf21eddec420cd4b27adb3111c6">InstrCount</a> = 0;</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> : TailBB) {</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;    <span class="comment">// Non-duplicable things shouldn&#39;t be tail-duplicated.</span></div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;    <span class="comment">// CFI instructions are marked as non-duplicable, because Darwin compact</span></div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;    <span class="comment">// unwind info emission can&#39;t handle multiple prologue setups. In case of</span></div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;    <span class="comment">// DWARF, allow them be duplicated, so that their existence doesn&#39;t prevent</span></div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;    <span class="comment">// tail duplication of some basic blocks, that would be duplicated otherwise.</span></div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.isNotDuplicable() &amp;&amp;</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;        (TailBB.getParent()-&gt;getTarget().getTargetTriple().isOSDarwin() ||</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;        !<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.isCFIInstruction()))</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160; </div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;    <span class="comment">// Convergent instructions can be duplicated only if doing so doesn&#39;t add</span></div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;    <span class="comment">// new control dependencies, which is what we&#39;re going to do here.</span></div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.isConvergent())</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160; </div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;    <span class="comment">// Do not duplicate &#39;return&#39; instructions if this is a pre-regalloc run.</span></div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;    <span class="comment">// A return may expand into a lot more instructions (e.g. reload of callee</span></div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;    <span class="comment">// saved registers) after PEI.</span></div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;    <span class="keywordflow">if</span> (PreRegAlloc &amp;&amp; <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.isReturn())</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160; </div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;    <span class="comment">// Avoid duplicating calls before register allocation. Calls presents a</span></div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;    <span class="comment">// barrier to register allocation so duplicating them may end up increasing</span></div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;    <span class="comment">// spills.</span></div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;    <span class="keywordflow">if</span> (PreRegAlloc &amp;&amp; <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.isCall())</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160; </div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;    <span class="comment">// TailDuplicator::appendCopies will erroneously place COPYs after</span></div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;    <span class="comment">// INLINEASM_BR instructions after 4b0aa5724fea, which demonstrates the same</span></div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;    <span class="comment">// bug that was fixed in f7a53d82c090.</span></div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;    <span class="comment">// FIXME: Use findPHICopyInsertPoint() to find the correct insertion point</span></div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;    <span class="comment">//        for the COPY when replacing PHIs.</span></div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode() == <a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110ab969e7d43eb37a0398b5ded23bccc136">TargetOpcode::INLINEASM_BR</a>)</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160; </div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.isBundle())</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;      <a class="code" href="DFAPacketizer_8cpp.html#acc16edf21eddec420cd4b27adb3111c6">InstrCount</a> += <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getBundleSize();</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.isPHI() &amp;&amp; !<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.isMetaInstruction())</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;      <a class="code" href="DFAPacketizer_8cpp.html#acc16edf21eddec420cd4b27adb3111c6">InstrCount</a> += 1;</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160; </div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="DFAPacketizer_8cpp.html#acc16edf21eddec420cd4b27adb3111c6">InstrCount</a> &gt; MaxDuplicateCount)</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;  }</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160; </div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;  <span class="comment">// Check if any of the successors of TailBB has a PHI node in which the</span></div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;  <span class="comment">// value corresponding to TailBB uses a subregister.</span></div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;  <span class="comment">// If a phi node uses a register paired with a subregister, the actual</span></div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;  <span class="comment">// &quot;value type&quot; of the phi may differ from the type of the register without</span></div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;  <span class="comment">// any subregisters. Due to a bug, tail duplication may add a new operand</span></div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;  <span class="comment">// without a necessary subregister, producing an invalid code. This is</span></div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;  <span class="comment">// demonstrated by test/CodeGen/Hexagon/tail-dup-subreg-abort.ll.</span></div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;  <span class="comment">// Disable tail duplication for this case for now, until the problem is</span></div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;  <span class="comment">// fixed.</span></div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> *SB : TailBB.successors()) {</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : *SB) {</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.isPHI())</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;      <span class="keywordtype">unsigned</span> Idx = <a class="code" href="TailDuplicator_8cpp.html#aa0c584322547d392248159b2754429f1">getPHISrcRegOpIdx</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, &amp;TailBB);</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Idx != 0);</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;      <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;PU = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(Idx);</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;      <span class="keywordflow">if</span> (PU.<a class="code" href="classllvm_1_1MachineOperand.html#a028a8c5113d40d8c3f4427053bf36738">getSubReg</a>() != 0)</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;    }</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;  }</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160; </div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;  <span class="keywordflow">if</span> (HasIndirectbr &amp;&amp; PreRegAlloc)</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160; </div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;  <span class="keywordflow">if</span> (IsSimple)</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160; </div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;  <span class="keywordflow">if</span> (!PreRegAlloc)</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160; </div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;  <span class="keywordflow">return</span> canCompletelyDuplicateBB(TailBB);</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;}</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;<span class="comment">/// True if this BB has only one unconditional jump.</span></div>
<div class="line"><a name="l00680"></a><span class="lineno"><a class="line" href="classllvm_1_1TailDuplicator.html#a22b5f49c33bc7b11d150556b0ee1ca0a">  680</a></span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1TailDuplicator.html#a22b5f49c33bc7b11d150556b0ee1ca0a">TailDuplicator::isSimpleBB</a>(<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *TailBB) {</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;  <span class="keywordflow">if</span> (TailBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a81626de817a0cb021ff8e915cf1942ed">succ_size</a>() != 1)</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;  <span class="keywordflow">if</span> (TailBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a877507fda31c207ec36a018784369708">pred_empty</a>())</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;  <a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = TailBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a62b5d2211c09378c471307293453d780">getFirstNonDebugInstr</a>(<span class="keyword">true</span>);</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> == TailBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">end</a>())</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;isUnconditionalBranch();</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;}</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160; </div>
<div class="line"><a name="l00691"></a><span class="lineno"><a class="line" href="TailDuplicator_8cpp.html#a8d60ca423c44106297940619d9411856">  691</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="TailDuplicator_8cpp.html#a8d60ca423c44106297940619d9411856">bothUsedInPHI</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;A,</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;                          <span class="keyword">const</span> <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;MachineBasicBlock *, 8&gt;</a> &amp;SuccsB) {</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> : A.successors())</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;    <span class="keywordflow">if</span> (SuccsB.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a1f475b0df44ebd7169e720fa1bf9169e">count</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) &amp;&amp; !<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;empty() &amp;&amp; <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;begin()-&gt;isPHI())</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160; </div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;}</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160; </div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;<span class="keywordtype">bool</span> TailDuplicator::canCompletelyDuplicateBB(<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) {</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *PredBB : <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>.predecessors()) {</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;    <span class="keywordflow">if</span> (PredBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a81626de817a0cb021ff8e915cf1942ed">succ_size</a>() &gt; 1)</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160; </div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;    <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *PredTBB = <span class="keyword">nullptr</span>, *PredFBB = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;MachineOperand, 4&gt;</a> PredCond;</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;    <span class="keywordflow">if</span> (TII-&gt;<a class="code" href="classllvm_1_1TargetInstrInfo.html#a0dfb0c744373d4b6112eb343a5b07fc7">analyzeBranch</a>(*PredBB, PredTBB, PredFBB, PredCond))</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160; </div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;    <span class="keywordflow">if</span> (!PredCond.empty())</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;  }</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;}</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160; </div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;<span class="keywordtype">bool</span> TailDuplicator::duplicateSimpleBB(</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;    <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *TailBB, <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;MachineBasicBlock *&gt;</a> &amp;TDBBs,</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;Register&gt;</a> &amp;UsedByPhi) {</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;MachineBasicBlock *, 8&gt;</a> Succs(TailBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a6321b189ea8fd5058663f8a87d6c23e9">succ_begin</a>(),</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;                                            TailBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a3ddd708642d60c1661992ff8ba1b215d">succ_end</a>());</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;MachineBasicBlock *, 8&gt;</a> Preds(TailBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#afd9b9b8655c008bf6cd6afb05d41b69e">predecessors</a>());</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;  <span class="keywordtype">bool</span> Changed = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *PredBB : Preds) {</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;    <span class="keywordflow">if</span> (PredBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a07ccfc69389d4e9657d22698f4a7ef46">hasEHPadSuccessor</a>() || PredBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#aefb323794dab5bb00d738a3f32dd65e6">mayHaveInlineAsmBr</a>())</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160; </div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="TailDuplicator_8cpp.html#a8d60ca423c44106297940619d9411856">bothUsedInPHI</a>(*PredBB, Succs))</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160; </div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;    <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *PredTBB = <span class="keyword">nullptr</span>, *PredFBB = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;MachineOperand, 4&gt;</a> PredCond;</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;    <span class="keywordflow">if</span> (TII-&gt;<a class="code" href="classllvm_1_1TargetInstrInfo.html#a0dfb0c744373d4b6112eb343a5b07fc7">analyzeBranch</a>(*PredBB, PredTBB, PredFBB, PredCond))</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160; </div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;    Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;\nTail-duplicating into PredBB: &quot;</span> &lt;&lt; *PredBB</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;                      &lt;&lt; <span class="stringliteral">&quot;From simple Succ: &quot;</span> &lt;&lt; *TailBB);</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160; </div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;    <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *NewTarget = *TailBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a6321b189ea8fd5058663f8a87d6c23e9">succ_begin</a>();</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;    <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *NextBB = PredBB-&gt;<a class="code" href="classllvm_1_1ilist__node__with__parent.html#a26708685cc8b94fe3d7092ee080dbb34">getNextNode</a>();</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160; </div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;    <span class="comment">// Make PredFBB explicit.</span></div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;    <span class="keywordflow">if</span> (PredCond.empty())</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;      PredFBB = PredTBB;</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160; </div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;    <span class="comment">// Make fall through explicit.</span></div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;    <span class="keywordflow">if</span> (!PredTBB)</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;      PredTBB = NextBB;</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;    <span class="keywordflow">if</span> (!PredFBB)</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;      PredFBB = NextBB;</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160; </div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;    <span class="comment">// Redirect</span></div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;    <span class="keywordflow">if</span> (PredFBB == TailBB)</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;      PredFBB = NewTarget;</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;    <span class="keywordflow">if</span> (PredTBB == TailBB)</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;      PredTBB = NewTarget;</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160; </div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;    <span class="comment">// Make the branch unconditional if possible</span></div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;    <span class="keywordflow">if</span> (PredTBB == PredFBB) {</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;      PredCond.<a class="code" href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">clear</a>();</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;      PredFBB = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;    }</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160; </div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;    <span class="comment">// Avoid adding fall through branches.</span></div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;    <span class="keywordflow">if</span> (PredFBB == NextBB)</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;      PredFBB = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;    <span class="keywordflow">if</span> (PredTBB == NextBB &amp;&amp; PredFBB == <span class="keyword">nullptr</span>)</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;      PredTBB = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160; </div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;    <span class="keyword">auto</span> <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a> = PredBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#ad81901d0d8b768b240e78bf357999f34">findBranchDebugLoc</a>();</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;    TII-&gt;<a class="code" href="classllvm_1_1TargetInstrInfo.html#a0317b8d1d0eb9aaf9af9d636f5f66e8d">removeBranch</a>(*PredBB);</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160; </div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;    <span class="keywordflow">if</span> (!PredBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#adc8f1be4a77ae671ac139d5f06b44deb">isSuccessor</a>(NewTarget))</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;      PredBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a2d4703c258359175d1c7840735bd77b6">replaceSuccessor</a>(TailBB, NewTarget);</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;    <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;      PredBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#aa7114bb360b922025e7a4fec442676db">removeSuccessor</a>(TailBB, <span class="keyword">true</span>);</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(PredBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a81626de817a0cb021ff8e915cf1942ed">succ_size</a>() &lt;= 1);</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;    }</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160; </div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;    <span class="keywordflow">if</span> (PredTBB)</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;      TII-&gt;<a class="code" href="classllvm_1_1TargetInstrInfo.html#a762db1f75e789783b689f22cda71bad4">insertBranch</a>(*PredBB, PredTBB, PredFBB, PredCond, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>);</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160; </div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;    TDBBs.push_back(PredBB);</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;  }</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;  <span class="keywordflow">return</span> Changed;</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;}</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160; </div>
<div class="line"><a name="l00788"></a><span class="lineno"><a class="line" href="classllvm_1_1TailDuplicator.html#a8fffb36a3e1523ff3d26521f27c02df8">  788</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1TailDuplicator.html#a8fffb36a3e1523ff3d26521f27c02df8">TailDuplicator::canTailDuplicate</a>(<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *TailBB,</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;                                      <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *PredBB) {</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;  <span class="comment">// EH edges are ignored by analyzeBranch.</span></div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;  <span class="keywordflow">if</span> (PredBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a81626de817a0cb021ff8e915cf1942ed">succ_size</a>() &gt; 1)</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160; </div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;  <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *PredTBB = <span class="keyword">nullptr</span>, *PredFBB = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;MachineOperand, 4&gt;</a> PredCond;</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;  <span class="keywordflow">if</span> (TII-&gt;<a class="code" href="classllvm_1_1TargetInstrInfo.html#a0dfb0c744373d4b6112eb343a5b07fc7">analyzeBranch</a>(*PredBB, PredTBB, PredFBB, PredCond))</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;  <span class="keywordflow">if</span> (!PredCond.empty())</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;  <span class="comment">// FIXME: This is overly conservative; it may be ok to relax this in the</span></div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;  <span class="comment">// future under more specific conditions. If TailBB is an INLINEASM_BR</span></div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;  <span class="comment">// indirect target, we need to see if the edge from PredBB to TailBB is from</span></div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;  <span class="comment">// an INLINEASM_BR in PredBB, and then also if that edge was from the</span></div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;  <span class="comment">// indirect target list, fallthrough/default target, or potentially both. If</span></div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;  <span class="comment">// it&#39;s both, TailDuplicator::tailDuplicate will remove the edge, corrupting</span></div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;  <span class="comment">// the successor list in PredBB and predecessor list in TailBB.</span></div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;  <span class="keywordflow">if</span> (TailBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a00e55a6b6b44b739e9da1d62f1d8a5b3">isInlineAsmBrIndirectTarget</a>())</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;}</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;<span class="comment">/// If it is profitable, duplicate TailBB&#39;s contents in each</span></div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;<span class="comment">/// of its predecessors.</span></div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;<span class="comment">/// \p IsSimple result of isSimpleBB</span></div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;<span class="comment">/// \p TailBB   Block to be duplicated.</span></div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;<span class="comment">/// \p ForcedLayoutPred  When non-null, use this block as the layout predecessor</span></div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;<span class="comment">///                      instead of the previous block in MF&#39;s order.</span></div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;<span class="comment">/// \p TDBBs             A vector to keep track of all blocks tail-duplicated</span></div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;<span class="comment">///                      into.</span></div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;<span class="comment">/// \p Copies            A vector of copy instructions inserted. Used later to</span></div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;<span class="comment">///                      walk all the inserted copies and remove redundant ones.</span></div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> TailDuplicator::tailDuplicate(<span class="keywordtype">bool</span> IsSimple, <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *TailBB,</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;                          <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *ForcedLayoutPred,</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;                          <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;MachineBasicBlock *&gt;</a> &amp;TDBBs,</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;                          <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;MachineInstr *&gt;</a> &amp;<a class="code" href="SILowerI1Copies_8cpp.html#a5cd9e4c7fe1a7ebe8b545eb891a2a949">Copies</a>,</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;                          <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;MachineBasicBlock *&gt;</a> *CandidatePtr) {</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;\n*** Tail-duplicating &quot;</span> &lt;&lt; <a class="code" href="namespacellvm.html#af7881286e3ea4d7f1c4a63c87c132dac">printMBBReference</a>(*TailBB)</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;                    &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160; </div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;  <span class="keywordtype">bool</span> ShouldUpdateTerminators = TailBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a5ffb77c69d69a5beff906caaecfd7be4">canFallThrough</a>();</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160; </div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;  <a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;Register&gt;</a> UsedByPhi;</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;  <a class="code" href="TailDuplicator_8cpp.html#ac3fb3fc8ff6a8d4c09110a9eee40321f">getRegsUsedByPHIs</a>(*TailBB, &amp;UsedByPhi);</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160; </div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;  <span class="keywordflow">if</span> (IsSimple)</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;    <span class="keywordflow">return</span> duplicateSimpleBB(TailBB, TDBBs, UsedByPhi);</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160; </div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;  <span class="comment">// Iterate through all the unique predecessors and tail-duplicate this</span></div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;  <span class="comment">// block into them, if possible. Copying the list ahead of time also</span></div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;  <span class="comment">// avoids trouble with the predecessor list reallocating.</span></div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;  <span class="keywordtype">bool</span> Changed = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;  <a class="code" href="classllvm_1_1SmallSetVector.html">SmallSetVector&lt;MachineBasicBlock *, 8&gt;</a> Preds;</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;  <span class="keywordflow">if</span> (CandidatePtr)</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;    Preds.<a class="code" href="classllvm_1_1SetVector.html#a72d928b7fc2c5f2d56c6ac0265fd9c6e">insert</a>(CandidatePtr-&gt;begin(), CandidatePtr-&gt;end());</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;    Preds.<a class="code" href="classllvm_1_1SetVector.html#a72d928b7fc2c5f2d56c6ac0265fd9c6e">insert</a>(TailBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#ab644fcf07a4c2708333cf66276282357">pred_begin</a>(), TailBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a0359a738e0412c5a7ea55d61175e0661">pred_end</a>());</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160; </div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *PredBB : Preds) {</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(TailBB != PredBB &amp;&amp;</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;           <span class="stringliteral">&quot;Single-block loop should have been rejected earlier!&quot;</span>);</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160; </div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classllvm_1_1TailDuplicator.html#a8fffb36a3e1523ff3d26521f27c02df8">canTailDuplicate</a>(TailBB, PredBB))</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160; </div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;    <span class="comment">// Don&#39;t duplicate into a fall-through predecessor (at least for now).</span></div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;    <span class="comment">// If profile is available, findDuplicateCandidates can choose better</span></div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;    <span class="comment">// fall-through predecessor.</span></div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;    <span class="keywordflow">if</span> (!(MF-&gt;<a class="code" href="classllvm_1_1MachineFunction.html#a4b21394c138cc5ae719510bb529ee099">getFunction</a>().<a class="code" href="classllvm_1_1Function.html#a9084ce2576fad285c1c0dc1e165dd4b6">hasProfileData</a>() &amp;&amp; LayoutMode)) {</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;      <span class="keywordtype">bool</span> IsLayoutSuccessor = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;      <span class="keywordflow">if</span> (ForcedLayoutPred)</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;        IsLayoutSuccessor = (ForcedLayoutPred == PredBB);</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (PredBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#abd85c9d7c51eb515a550069e9ad9445e">isLayoutSuccessor</a>(TailBB) &amp;&amp; PredBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a5ffb77c69d69a5beff906caaecfd7be4">canFallThrough</a>())</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;        IsLayoutSuccessor = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;      <span class="keywordflow">if</span> (IsLayoutSuccessor)</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;    }</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160; </div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;\nTail-duplicating into PredBB: &quot;</span> &lt;&lt; *PredBB</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;                      &lt;&lt; <span class="stringliteral">&quot;From Succ: &quot;</span> &lt;&lt; *TailBB);</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160; </div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;    TDBBs.push_back(PredBB);</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160; </div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;    <span class="comment">// Remove PredBB&#39;s unconditional branch.</span></div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;    TII-&gt;<a class="code" href="classllvm_1_1TargetInstrInfo.html#a0317b8d1d0eb9aaf9af9d636f5f66e8d">removeBranch</a>(*PredBB);</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160; </div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;    <span class="comment">// Clone the contents of TailBB into PredBB.</span></div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;    <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;Register, RegSubRegPair&gt;</a> LocalVRMap;</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;std::pair&lt;Register, RegSubRegPair&gt;</a>, 4&gt; CopyInfos;</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> : <a class="code" href="namespacellvm.html#a8154638df88e4eaa568b67b23d463dac">llvm::make_early_inc_range</a>(*TailBB)) {</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.isPHI()) {</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;        <span class="comment">// Replace the uses of the def of the PHI with the register coming</span></div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;        <span class="comment">// from PredBB.</span></div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;        processPHI(&amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, TailBB, PredBB, LocalVRMap, CopyInfos, UsedByPhi, <span class="keyword">true</span>);</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;        <span class="comment">// Replace def of virtual registers with new registers, and update</span></div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;        <span class="comment">// uses with PHI source register or the new registers.</span></div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;        duplicateInstruction(&amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, TailBB, PredBB, LocalVRMap, UsedByPhi);</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;      }</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;    }</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;    appendCopies(PredBB, CopyInfos, <a class="code" href="SILowerI1Copies_8cpp.html#a5cd9e4c7fe1a7ebe8b545eb891a2a949">Copies</a>);</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160; </div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;    NumTailDupAdded += TailBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#adbff55f335d303816547f35eb6edb948">size</a>() - 1; <span class="comment">// subtract one for removed branch</span></div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160; </div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;    <span class="comment">// Update the CFG.</span></div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;    PredBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#aa7114bb360b922025e7a4fec442676db">removeSuccessor</a>(PredBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a6321b189ea8fd5058663f8a87d6c23e9">succ_begin</a>());</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(PredBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#aa8d1d8d88835b75b05b14ab774785e8a">succ_empty</a>() &amp;&amp;</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;           <span class="stringliteral">&quot;TailDuplicate called on block with multiple successors!&quot;</span>);</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *Succ : TailBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a4d2c96836214c1f13357ffb99125fb4a">successors</a>())</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;      PredBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a935e2a8884592189d8f261634a0b24c5">addSuccessor</a>(Succ, MBPI-&gt;<a class="code" href="classllvm_1_1MachineBranchProbabilityInfo.html#ad78fb9b4721b71aa297bd2bda44e7e39">getEdgeProbability</a>(TailBB, Succ));</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160; </div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;    <span class="comment">// Update branches in pred to jump to tail&#39;s layout successor if needed.</span></div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;    <span class="keywordflow">if</span> (ShouldUpdateTerminators)</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;      PredBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a5803a49facae20ca4b002dcba6f1d03e">updateTerminator</a>(TailBB-&gt;<a class="code" href="classllvm_1_1ilist__node__with__parent.html#a26708685cc8b94fe3d7092ee080dbb34">getNextNode</a>());</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160; </div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;    Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;    ++NumTailDups;</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;  }</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160; </div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;  <span class="comment">// If TailBB was duplicated into all its predecessors except for the prior</span></div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;  <span class="comment">// block, which falls through unconditionally, move the contents of this</span></div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;  <span class="comment">// block into the prior block.</span></div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;  <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *PrevBB = ForcedLayoutPred;</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;  <span class="keywordflow">if</span> (!PrevBB)</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;    PrevBB = &amp;*std::prev(TailBB-&gt;<a class="code" href="classllvm_1_1ilist__node__impl.html#af719fc783be6589465137d997701a432">getIterator</a>());</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;  <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *PriorTBB = <span class="keyword">nullptr</span>, *PriorFBB = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;MachineOperand, 4&gt;</a> PriorCond;</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;  <span class="comment">// This has to check PrevBB-&gt;succ_size() because EH edges are ignored by</span></div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;  <span class="comment">// analyzeBranch.</span></div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;  <span class="keywordflow">if</span> (PrevBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a81626de817a0cb021ff8e915cf1942ed">succ_size</a>() == 1 &amp;&amp;</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;      <span class="comment">// Layout preds are not always CFG preds. Check.</span></div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;      *PrevBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a6321b189ea8fd5058663f8a87d6c23e9">succ_begin</a>() == TailBB &amp;&amp;</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;      !TII-&gt;<a class="code" href="classllvm_1_1TargetInstrInfo.html#a0dfb0c744373d4b6112eb343a5b07fc7">analyzeBranch</a>(*PrevBB, PriorTBB, PriorFBB, PriorCond) &amp;&amp;</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;      PriorCond.empty() &amp;&amp;</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;      (!PriorTBB || PriorTBB == TailBB) &amp;&amp;</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;      TailBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a03936a9b37da541420049422204ab206">pred_size</a>() == 1 &amp;&amp;</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;      !TailBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a86ae593fc791eda3aae24bd9d6df2322">hasAddressTaken</a>()) {</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;\nMerging into block: &quot;</span> &lt;&lt; *PrevBB</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;                      &lt;&lt; <span class="stringliteral">&quot;From MBB: &quot;</span> &lt;&lt; *TailBB);</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;    <span class="comment">// There may be a branch to the layout successor. This is unlikely but it</span></div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;    <span class="comment">// happens. The correct thing to do is to remove the branch before</span></div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;    <span class="comment">// duplicating the instructions in all cases.</span></div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;    <span class="keywordtype">bool</span> RemovedBranches = TII-&gt;<a class="code" href="classllvm_1_1TargetInstrInfo.html#a0317b8d1d0eb9aaf9af9d636f5f66e8d">removeBranch</a>(*PrevBB) != 0;</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160; </div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;    <span class="comment">// If there are still tail instructions, abort the merge</span></div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;    <span class="keywordflow">if</span> (PrevBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a7f0521fa2de44271fd4b909ea7351ef3">getFirstTerminator</a>() == PrevBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">end</a>()) {</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;      <span class="keywordflow">if</span> (PreRegAlloc) {</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;        <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;Register, RegSubRegPair&gt;</a> LocalVRMap;</div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;        <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;std::pair&lt;Register, RegSubRegPair&gt;</a>, 4&gt; CopyInfos;</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;        <a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = TailBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#ab2d91e7bec944efcbc39d8e30644f111">begin</a>();</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;        <span class="comment">// Process PHI instructions first.</span></div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;        <span class="keywordflow">while</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != TailBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">end</a>() &amp;&amp; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;isPHI()) {</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;          <span class="comment">// Replace the uses of the def of the PHI with the register coming</span></div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;          <span class="comment">// from PredBB.</span></div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;          <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> = &amp;*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>++;</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;          processPHI(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, TailBB, PrevBB, LocalVRMap, CopyInfos, UsedByPhi,</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;                     <span class="keyword">true</span>);</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;        }</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160; </div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;        <span class="comment">// Now copy the non-PHI instructions.</span></div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;        <span class="keywordflow">while</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != TailBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">end</a>()) {</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;          <span class="comment">// Replace def of virtual registers with new registers, and update</span></div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;          <span class="comment">// uses with PHI source register or the new registers.</span></div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;          <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> = &amp;*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>++;</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;          <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;isBundle() &amp;&amp; <span class="stringliteral">&quot;Not expecting bundles before regalloc!&quot;</span>);</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;          duplicateInstruction(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, TailBB, PrevBB, LocalVRMap, UsedByPhi);</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;          <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;eraseFromParent();</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;        }</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;        appendCopies(PrevBB, CopyInfos, <a class="code" href="SILowerI1Copies_8cpp.html#a5cd9e4c7fe1a7ebe8b545eb891a2a949">Copies</a>);</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;        TII-&gt;<a class="code" href="classllvm_1_1TargetInstrInfo.html#a0317b8d1d0eb9aaf9af9d636f5f66e8d">removeBranch</a>(*PrevBB);</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;        <span class="comment">// No PHIs to worry about, just splice the instructions over.</span></div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;        PrevBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#adf0023bdc4f05a7849c35b1c859580d8">splice</a>(PrevBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">end</a>(), TailBB, TailBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#ab2d91e7bec944efcbc39d8e30644f111">begin</a>(), TailBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">end</a>());</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;      }</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;      PrevBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#aa7114bb360b922025e7a4fec442676db">removeSuccessor</a>(PrevBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a6321b189ea8fd5058663f8a87d6c23e9">succ_begin</a>());</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(PrevBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#aa8d1d8d88835b75b05b14ab774785e8a">succ_empty</a>());</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;      PrevBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a31e57b158a17c459f0dc34b0e602ecc6">transferSuccessors</a>(TailBB);</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160; </div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;      <span class="comment">// Update branches in PrevBB based on Tail&#39;s layout successor.</span></div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;      <span class="keywordflow">if</span> (ShouldUpdateTerminators)</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;        PrevBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a5803a49facae20ca4b002dcba6f1d03e">updateTerminator</a>(TailBB-&gt;<a class="code" href="classllvm_1_1ilist__node__with__parent.html#a26708685cc8b94fe3d7092ee080dbb34">getNextNode</a>());</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160; </div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;      TDBBs.push_back(PrevBB);</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;      Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Abort merging blocks, the predecessor still &quot;</span></div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;                           <span class="stringliteral">&quot;contains terminator instructions&quot;</span>);</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;      <span class="comment">// Return early if no changes were made</span></div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;      <span class="keywordflow">if</span> (!Changed)</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;        <span class="keywordflow">return</span> RemovedBranches;</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;    }</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;    Changed |= RemovedBranches;</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;  }</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160; </div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;  <span class="comment">// If this is after register allocation, there are no phis to fix.</span></div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;  <span class="keywordflow">if</span> (!PreRegAlloc)</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;    <span class="keywordflow">return</span> Changed;</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160; </div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;  <span class="comment">// If we made no changes so far, we are safe.</span></div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;  <span class="keywordflow">if</span> (!Changed)</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;    <span class="keywordflow">return</span> Changed;</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160; </div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;  <span class="comment">// Handle the nasty case in that we duplicated a block that is part of a loop</span></div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;  <span class="comment">// into some but not all of its predecessors. For example:</span></div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;  <span class="comment">//    1 -&gt; 2 &lt;-&gt; 3                 |</span></div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;  <span class="comment">//          \                      |</span></div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;  <span class="comment">//           \---&gt; rest            |</span></div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;  <span class="comment">// if we duplicate 2 into 1 but not into 3, we end up with</span></div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;  <span class="comment">// 12 -&gt; 3 &lt;-&gt; 2 -&gt; rest           |</span></div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;  <span class="comment">//   \             /               |</span></div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;  <span class="comment">//    \-----&gt;-----/                |</span></div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;  <span class="comment">// If there was a &quot;var = phi(1, 3)&quot; in 2, it has to be ultimately replaced</span></div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;  <span class="comment">// with a phi in 3 (which now dominates 2).</span></div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;  <span class="comment">// What we do here is introduce a copy in 3 of the register defined by the</span></div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;  <span class="comment">// phi, just like when we are duplicating 2 into 3, but we don&#39;t copy any</span></div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;  <span class="comment">// real instructions or remove the 3 -&gt; 2 edge from the phi in 2.</span></div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *PredBB : Preds) {</div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#acd1cd968cb420c82d70926920fcdc7d7">is_contained</a>(TDBBs, PredBB))</div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160; </div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;    <span class="comment">// EH edges</span></div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;    <span class="keywordflow">if</span> (PredBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a81626de817a0cb021ff8e915cf1942ed">succ_size</a>() != 1)</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160; </div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;    <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;Register, RegSubRegPair&gt;</a> LocalVRMap;</div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;std::pair&lt;Register, RegSubRegPair&gt;</a>, 4&gt; CopyInfos;</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;    <a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = TailBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#ab2d91e7bec944efcbc39d8e30644f111">begin</a>();</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;    <span class="comment">// Process PHI instructions first.</span></div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;    <span class="keywordflow">while</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != TailBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">end</a>() &amp;&amp; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;isPHI()) {</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;      <span class="comment">// Replace the uses of the def of the PHI with the register coming</span></div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;      <span class="comment">// from PredBB.</span></div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;      <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> = &amp;*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>++;</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;      processPHI(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, TailBB, PredBB, LocalVRMap, CopyInfos, UsedByPhi, <span class="keyword">false</span>);</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;    }</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;    appendCopies(PredBB, CopyInfos, <a class="code" href="SILowerI1Copies_8cpp.html#a5cd9e4c7fe1a7ebe8b545eb891a2a949">Copies</a>);</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;  }</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160; </div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;  <span class="keywordflow">return</span> Changed;</div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;}</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;<span class="comment">/// At the end of the block \p MBB generate COPY instructions between registers</span></div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;<span class="comment">/// described by \p CopyInfos. Append resulting instructions to \p Copies.</span></div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> TailDuplicator::appendCopies(<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>,</div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;      <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl</a>&lt;std::pair&lt;Register, RegSubRegPair&gt;&gt; &amp;CopyInfos,</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;      <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;MachineInstr*&gt;</a> &amp;<a class="code" href="SILowerI1Copies_8cpp.html#a5cd9e4c7fe1a7ebe8b545eb891a2a949">Copies</a>) {</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;  <a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> Loc = <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a7f0521fa2de44271fd4b909ea7351ef3">getFirstTerminator</a>();</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1MCInstrDesc.html">MCInstrDesc</a> &amp;CopyD = TII-&gt;<a class="code" href="classllvm_1_1MCInstrInfo.html#a0587abbded61717d8a153b7e5bfdbfed">get</a>(TargetOpcode::COPY);</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;CI : CopyInfos) {</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;    <span class="keyword">auto</span> <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(*<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, Loc, <a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a>(), CopyD, CI.first)</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;                .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(CI.second.Reg, 0, CI.second.SubReg);</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;    <a class="code" href="SILowerI1Copies_8cpp.html#a5cd9e4c7fe1a7ebe8b545eb891a2a949">Copies</a>.push_back(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;  }</div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;}</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;<span class="comment">/// Remove the specified dead machine basic block from the function, updating</span></div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;<span class="comment">/// the CFG.</span></div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> TailDuplicator::removeDeadBlock(</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;    <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>,</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;    <a class="code" href="classllvm_1_1function__ref.html">function_ref</a>&lt;<span class="keywordtype">void</span>(<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *)&gt; *RemovalCallback) {</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a877507fda31c207ec36a018784369708">pred_empty</a>() &amp;&amp; <span class="stringliteral">&quot;MBB must be dead!&quot;</span>);</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;\nRemoving MBB: &quot;</span> &lt;&lt; *<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>);</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160; </div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;  <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> *MF = <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a4e21760f681d6f97f95c8414e7b83ea5">getParent</a>();</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;  <span class="comment">// Update the call site info.</span></div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> : *<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>)</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.shouldUpdateCallSiteInfo())</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;      MF-&gt;<a class="code" href="classllvm_1_1MachineFunction.html#ac551eef2a223f5e069bb900026f370eb">eraseCallSiteInfo</a>(&amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160; </div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;  <span class="keywordflow">if</span> (RemovalCallback)</div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;    (*RemovalCallback)(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>);</div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160; </div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;  <span class="comment">// Remove all successors.</span></div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;  <span class="keywordflow">while</span> (!<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#aa8d1d8d88835b75b05b14ab774785e8a">succ_empty</a>())</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;    <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#aa7114bb360b922025e7a4fec442676db">removeSuccessor</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a3ddd708642d60c1661992ff8ba1b215d">succ_end</a>() - 1);</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160; </div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;  <span class="comment">// Remove the block.</span></div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;  <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#ac421fe6513e43aedbba712e4a981744e">eraseFromParent</a>();</div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;}</div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="aclassllvm_1_1MachineInstr_html_accb3520c6008297678829eed493b6c68"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#accb3520c6008297678829eed493b6c68">llvm::MachineInstr::isDebugValue</a></div><div class="ttdeci">bool isDebugValue() const</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l01268">MachineInstr.h:1268</a></div></div>
<div class="ttc" id="alib_2Target_2README_8txt_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">i</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2README_8txt_source.html#l00029">README.txt:29</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_a81626de817a0cb021ff8e915cf1942ed"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a81626de817a0cb021ff8e915cf1942ed">llvm::MachineBasicBlock::succ_size</a></div><div class="ttdeci">unsigned succ_size() const</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00385">MachineBasicBlock.h:385</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_ab644fcf07a4c2708333cf66276282357"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#ab644fcf07a4c2708333cf66276282357">llvm::MachineBasicBlock::pred_begin</a></div><div class="ttdeci">pred_iterator pred_begin()</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00357">MachineBasicBlock.h:357</a></div></div>
<div class="ttc" id="aIRTranslator_8cpp_html_abe44dfdea65b4f7e11e0a608ab708b76"><div class="ttname"><a href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a></div><div class="ttdeci">IRTranslator LLVM IR MI</div><div class="ttdef"><b>Definition:</b> <a href="IRTranslator_8cpp_source.html#l00109">IRTranslator.cpp:109</a></div></div>
<div class="ttc" id="aMachineInstr_8h_html"><div class="ttname"><a href="MachineInstr_8h.html">MachineInstr.h</a></div></div>
<div class="ttc" id="anamespacellvm_html"><div class="ttname"><a href="namespacellvm.html">llvm</a></div><div class="ttdoc">This is an optimization pass for GlobalISel generic memory operations.</div><div class="ttdef"><b>Definition:</b> <a href="AddressRanges_8h_source.html#l00018">AddressRanges.h:18</a></div></div>
<div class="ttc" id="aMachineSSAUpdater_8h_html"><div class="ttname"><a href="MachineSSAUpdater_8h.html">MachineSSAUpdater.h</a></div></div>
<div class="ttc" id="aAArch64ExpandPseudoInsts_8cpp_html_a6cf2f8996b1e9aaf2d7a435aaa62382f"><div class="ttname"><a href="AArch64ExpandPseudoInsts_8cpp.html#a6cf2f8996b1e9aaf2d7a435aaa62382f">UseMI</a></div><div class="ttdeci">MachineInstrBuilder &amp; UseMI</div><div class="ttdef"><b>Definition:</b> <a href="AArch64ExpandPseudoInsts_8cpp_source.html#l00107">AArch64ExpandPseudoInsts.cpp:107</a></div></div>
<div class="ttc" id="anamespacellvm_html_a02981de53fb6ffd384d39addc4d25f37"><div class="ttname"><a href="namespacellvm.html#a02981de53fb6ffd384d39addc4d25f37">llvm::drop_begin</a></div><div class="ttdeci">auto drop_begin(T &amp;&amp;RangeOrContainer, size_t N=1)</div><div class="ttdoc">Return a range covering RangeOrContainer with the first N elements excluded.</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l00386">STLExtras.h:386</a></div></div>
<div class="ttc" id="aclassllvm_1_1TailDuplicator_html_a1974019840857f5ae10aa6b4edc5317d"><div class="ttname"><a href="classllvm_1_1TailDuplicator.html#a1974019840857f5ae10aa6b4edc5317d">llvm::TailDuplicator::initMF</a></div><div class="ttdeci">void initMF(MachineFunction &amp;MF, bool PreRegAlloc, const MachineBranchProbabilityInfo *MBPI, MBFIWrapper *MBFI, ProfileSummaryInfo *PSI, bool LayoutMode, unsigned TailDupSize=0)</div><div class="ttdoc">Prepare to run on a specific machine function.</div><div class="ttdef"><b>Definition:</b> <a href="TailDuplicator_8cpp_source.html#l00079">TailDuplicator.cpp:79</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstr_html_af2a873c264b53d77e7c3fc7402379960"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#af2a873c264b53d77e7c3fc7402379960">llvm::MachineInstr::isIndirectBranch</a></div><div class="ttdeci">bool isIndirectBranch(QueryType Type=AnyInBundle) const</div><div class="ttdoc">Return true if this is an indirect branch, such as a branch through a register.</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00910">MachineInstr.h:910</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetInstrInfo_html_a8d5210bd68a86582390a6fbf1f57e319"><div class="ttname"><a href="classllvm_1_1TargetInstrInfo.html#a8d5210bd68a86582390a6fbf1f57e319">llvm::TargetInstrInfo::duplicate</a></div><div class="ttdeci">virtual MachineInstr &amp; duplicate(MachineBasicBlock &amp;MBB, MachineBasicBlock::iterator InsertBefore, const MachineInstr &amp;Orig) const</div><div class="ttdoc">Clones instruction or the whole instruction bundle Orig and insert into MBB before InsertBefore.</div><div class="ttdef"><b>Definition:</b> <a href="TargetInstrInfo_8cpp_source.html#l00432">TargetInstrInfo.cpp:432</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineRegisterInfo_html_a5c77792a06583e0fe7a0379ad94a2809"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html#a5c77792a06583e0fe7a0379ad94a2809">llvm::MachineRegisterInfo::createVirtualRegister</a></div><div class="ttdeci">Register createVirtualRegister(const TargetRegisterClass *RegClass, StringRef Name=&quot;&quot;)</div><div class="ttdoc">createVirtualRegister - Create and return a new virtual register in the function with the specified r...</div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8cpp_source.html#l00157">MachineRegisterInfo.cpp:157</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineRegisterInfo_html"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html">llvm::MachineRegisterInfo</a></div><div class="ttdoc">MachineRegisterInfo - Keep track of information for virtual and physical registers,...</div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8h_source.html#l00051">MachineRegisterInfo.h:51</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetSubtargetInfo_html_ad34f7e3cd7a9add3ab2529e267b48004"><div class="ttname"><a href="classllvm_1_1TargetSubtargetInfo.html#ad34f7e3cd7a9add3ab2529e267b48004">llvm::TargetSubtargetInfo::getInstrInfo</a></div><div class="ttdeci">virtual const TargetInstrInfo * getInstrInfo() const</div><div class="ttdef"><b>Definition:</b> <a href="TargetSubtargetInfo_8h_source.html#l00095">TargetSubtargetInfo.h:95</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstrBuilder_html_ad51b0d1c80a9dbf0eea9162e2e3ec0dd"><div class="ttname"><a href="classllvm_1_1MachineInstrBuilder.html#ad51b0d1c80a9dbf0eea9162e2e3ec0dd">llvm::MachineInstrBuilder::addCFIIndex</a></div><div class="ttdeci">const MachineInstrBuilder &amp; addCFIIndex(unsigned CFIIndex) const</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBuilder_8h_source.html#l00247">MachineInstrBuilder.h:247</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineOperand_html_a8a82683fccdef8a5ef772ef03277aee7"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#a8a82683fccdef8a5ef772ef03277aee7">llvm::MachineOperand::setIsKill</a></div><div class="ttdeci">void setIsKill(bool Val=true)</div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00519">MachineOperand.h:519</a></div></div>
<div class="ttc" id="aclassllvm_1_1ilist__node__with__parent_html_a26708685cc8b94fe3d7092ee080dbb34"><div class="ttname"><a href="classllvm_1_1ilist__node__with__parent.html#a26708685cc8b94fe3d7092ee080dbb34">llvm::ilist_node_with_parent::getNextNode</a></div><div class="ttdeci">NodeTy * getNextNode()</div><div class="ttdoc">Get the next node, or nullptr for the list tail.</div><div class="ttdef"><b>Definition:</b> <a href="ilist__node_8h_source.html#l00289">ilist_node.h:289</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVector_html"><div class="ttname"><a href="classllvm_1_1SmallVector.html">llvm::SmallVector</a></div><div class="ttdoc">This is a 'vector' (really, a variable-sized array), optimized for the case when the array is small.</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l01199">SmallVector.h:1199</a></div></div>
<div class="ttc" id="aStatistic_8h_html"><div class="ttname"><a href="Statistic_8h.html">Statistic.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_af7881286e3ea4d7f1c4a63c87c132dac"><div class="ttname"><a href="namespacellvm.html#af7881286e3ea4d7f1c4a63c87c132dac">llvm::printMBBReference</a></div><div class="ttdeci">Printable printMBBReference(const MachineBasicBlock &amp;MBB)</div><div class="ttdoc">Prints a machine basic block reference.</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8cpp_source.html#l00118">MachineBasicBlock.cpp:118</a></div></div>
<div class="ttc" id="aSupport_2ErrorHandling_8h_html"><div class="ttname"><a href="Support_2ErrorHandling_8h.html">ErrorHandling.h</a></div></div>
<div class="ttc" id="anamespacellvm_1_1X86Disassembler_html_a1e59b79e1d09149912cad9c0ef2809ad"><div class="ttname"><a href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">llvm::X86Disassembler::Reg</a></div><div class="ttdeci">Reg</div><div class="ttdoc">All possible values of the reg field in the ModR/M byte.</div><div class="ttdef"><b>Definition:</b> <a href="X86DisassemblerDecoder_8h_source.html#l00462">X86DisassemblerDecoder.h:462</a></div></div>
<div class="ttc" id="aMachineSizeOpts_8h_html"><div class="ttname"><a href="MachineSizeOpts_8h.html">MachineSizeOpts.h</a></div></div>
<div class="ttc" id="aMachineBasicBlock_8h_html"><div class="ttname"><a href="MachineBasicBlock_8h.html">MachineBasicBlock.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetSubtargetInfo_html_a87849514193302b75f50a8092f94b98a"><div class="ttname"><a href="classllvm_1_1TargetSubtargetInfo.html#a87849514193302b75f50a8092f94b98a">llvm::TargetSubtargetInfo::getRegisterInfo</a></div><div class="ttdeci">virtual const TargetRegisterInfo * getRegisterInfo() const</div><div class="ttdoc">getRegisterInfo - If register information is available, return it.</div><div class="ttdef"><b>Definition:</b> <a href="TargetSubtargetInfo_8h_source.html#l00127">TargetSubtargetInfo.h:127</a></div></div>
<div class="ttc" id="anamespacellvm_1_1cl_html_a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6"><div class="ttname"><a href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">llvm::cl::Hidden</a></div><div class="ttdeci">@ Hidden</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00138">CommandLine.h:138</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseMapBase_html_a1eb8504bab5f794778d82db6ac829923"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#a1eb8504bab5f794778d82db6ac829923">llvm::DenseMapBase&lt; DenseMap&lt; KeyT, ValueT, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;, KeyT, ValueT, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;::erase</a></div><div class="ttdeci">bool erase(const KeyT &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00302">DenseMap.h:302</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_ab622d694b5fcb0edb99159f1ebdcdb6b"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#ab622d694b5fcb0edb99159f1ebdcdb6b">llvm::MachineBasicBlock::findDebugLoc</a></div><div class="ttdeci">DebugLoc findDebugLoc(instr_iterator MBBI)</div><div class="ttdoc">Find the next valid DebugLoc starting at MBBI, skipping any DBG_VALUE and DBG_LABEL instructions.</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8cpp_source.html#l01397">MachineBasicBlock.cpp:1397</a></div></div>
<div class="ttc" id="aDFAPacketizer_8cpp_html_acc16edf21eddec420cd4b27adb3111c6"><div class="ttname"><a href="DFAPacketizer_8cpp.html#acc16edf21eddec420cd4b27adb3111c6">InstrCount</a></div><div class="ttdeci">static unsigned InstrCount</div><div class="ttdef"><b>Definition:</b> <a href="DFAPacketizer_8cpp_source.html#l00051">DFAPacketizer.cpp:51</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseMapIterator_html"><div class="ttname"><a href="classllvm_1_1DenseMapIterator.html">llvm::DenseMapIterator</a></div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00057">DenseMap.h:57</a></div></div>
<div class="ttc" id="aDenseMap_8h_html"><div class="ttname"><a href="DenseMap_8h.html">DenseMap.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineRegisterInfo_html_af400646844b3c80b534e81a0d855ed4a"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html#af400646844b3c80b534e81a0d855ed4a">llvm::MachineRegisterInfo::use_instructions</a></div><div class="ttdeci">iterator_range&lt; use_instr_iterator &gt; use_instructions(Register Reg) const</div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8h_source.html#l00507">MachineRegisterInfo.h:507</a></div></div>
<div class="ttc" id="aTargetInstrInfo_8h_html"><div class="ttname"><a href="TargetInstrInfo_8h.html">TargetInstrInfo.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1TailDuplicator_html_aa7dba30d4d9162f00367404e06085391"><div class="ttname"><a href="classllvm_1_1TailDuplicator.html#aa7dba30d4d9162f00367404e06085391">llvm::TailDuplicator::shouldTailDuplicate</a></div><div class="ttdeci">bool shouldTailDuplicate(bool IsSimple, MachineBasicBlock &amp;TailBB)</div><div class="ttdoc">Determine if it is profitable to duplicate this block.</div><div class="ttdef"><b>Definition:</b> <a href="TailDuplicator_8cpp_source.html#l00550">TailDuplicator.cpp:550</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineRegisterInfo_html_a314b8f9b578670938c23b1cc9de623c3"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html#a314b8f9b578670938c23b1cc9de623c3">llvm::MachineRegisterInfo::use_operands</a></div><div class="ttdeci">iterator_range&lt; use_iterator &gt; use_operands(Register Reg) const</div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8h_source.html#l00491">MachineRegisterInfo.h:491</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSet_html"><div class="ttname"><a href="classllvm_1_1SmallPtrSet.html">llvm::SmallPtrSet</a></div><div class="ttdoc">SmallPtrSet - This class implements a set which is optimized for holding SmallSize or less elements.</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00450">SmallPtrSet.h:450</a></div></div>
<div class="ttc" id="aSTLExtras_8h_html"><div class="ttname"><a href="STLExtras_8h.html">STLExtras.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_ace3ed0412f841777b7de55d47883890e"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#ace3ed0412f841777b7de55d47883890e">llvm::MachineBasicBlock::back</a></div><div class="ttdeci">MachineInstr &amp; back()</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00289">MachineBasicBlock.h:289</a></div></div>
<div class="ttc" id="aTailDuplicator_8cpp_html_af85a5fe23faddaea6601422ca2854b05"><div class="ttname"><a href="TailDuplicator_8cpp.html#af85a5fe23faddaea6601422ca2854b05">isDefLiveOut</a></div><div class="ttdeci">static bool isDefLiveOut(Register Reg, MachineBasicBlock *BB, const MachineRegisterInfo *MRI)</div><div class="ttdef"><b>Definition:</b> <a href="TailDuplicator_8cpp_source.html#l00297">TailDuplicator.cpp:297</a></div></div>
<div class="ttc" id="aclassllvm_1_1detail_1_1DenseSetImpl_html_a79eed48913651aeedda2eed25201ea84"><div class="ttname"><a href="classllvm_1_1detail_1_1DenseSetImpl.html#a79eed48913651aeedda2eed25201ea84">llvm::detail::DenseSetImpl&lt; ValueT, DenseMap&lt; ValueT, detail::DenseSetEmpty, DenseMapInfo&lt; ValueT &gt;, detail::DenseSetPair&lt; ValueT &gt; &gt;, DenseMapInfo&lt; ValueT &gt; &gt;::insert</a></div><div class="ttdeci">std::pair&lt; iterator, bool &gt; insert(const ValueT &amp;V)</div><div class="ttdef"><b>Definition:</b> <a href="DenseSet_8h_source.html#l00206">DenseSet.h:206</a></div></div>
<div class="ttc" id="aclassllvm_1_1detail_1_1DenseSetImpl_html_afe504aa31a6a354cec13f5b32d0b1d9d"><div class="ttname"><a href="classllvm_1_1detail_1_1DenseSetImpl.html#afe504aa31a6a354cec13f5b32d0b1d9d">llvm::detail::DenseSetImpl&lt; ValueT, DenseMap&lt; ValueT, detail::DenseSetEmpty, DenseMapInfo&lt; ValueT &gt;, detail::DenseSetPair&lt; ValueT &gt; &gt;, DenseMapInfo&lt; ValueT &gt; &gt;::count</a></div><div class="ttdeci">size_type count(const_arg_type_t&lt; ValueT &gt; V) const</div><div class="ttdoc">Return 1 if the specified key is in the set, 0 otherwise.</div><div class="ttdef"><b>Definition:</b> <a href="DenseSet_8h_source.html#l00097">DenseSet.h:97</a></div></div>
<div class="ttc" id="aDebug_8h_html_a08efc68d15935eb8889400a46c3749ba"><div class="ttname"><a href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a></div><div class="ttdeci">#define LLVM_DEBUG(X)</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8h_source.html#l00101">Debug.h:101</a></div></div>
<div class="ttc" id="aMachineRegisterInfo_8h_html"><div class="ttname"><a href="MachineRegisterInfo_8h.html">MachineRegisterInfo.h</a></div></div>
<div class="ttc" id="astructllvm_1_1TargetInstrInfo_1_1RegSubRegPair_html"><div class="ttname"><a href="structllvm_1_1TargetInstrInfo_1_1RegSubRegPair.html">llvm::TargetInstrInfo::RegSubRegPair</a></div><div class="ttdoc">A pair composed of a register and a sub-register index.</div><div class="ttdef"><b>Definition:</b> <a href="TargetInstrInfo_8h_source.html#l00494">TargetInstrInfo.h:494</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetInstrInfo_html_a762db1f75e789783b689f22cda71bad4"><div class="ttname"><a href="classllvm_1_1TargetInstrInfo.html#a762db1f75e789783b689f22cda71bad4">llvm::TargetInstrInfo::insertBranch</a></div><div class="ttdeci">virtual unsigned insertBranch(MachineBasicBlock &amp;MBB, MachineBasicBlock *TBB, MachineBasicBlock *FBB, ArrayRef&lt; MachineOperand &gt; Cond, const DebugLoc &amp;DL, int *BytesAdded=nullptr) const</div><div class="ttdoc">Insert branch code into the end of the specified MachineBasicBlock.</div><div class="ttdef"><b>Definition:</b> <a href="TargetInstrInfo_8h_source.html#l00712">TargetInstrInfo.h:712</a></div></div>
<div class="ttc" id="aclassllvm_1_1TailDuplicator_html_a22b5f49c33bc7b11d150556b0ee1ca0a"><div class="ttname"><a href="classllvm_1_1TailDuplicator.html#a22b5f49c33bc7b11d150556b0ee1ca0a">llvm::TailDuplicator::isSimpleBB</a></div><div class="ttdeci">static bool isSimpleBB(MachineBasicBlock *TailBB)</div><div class="ttdoc">True if this BB has only one unconditional jump.</div><div class="ttdef"><b>Definition:</b> <a href="TailDuplicator_8cpp_source.html#l00680">TailDuplicator.cpp:680</a></div></div>
<div class="ttc" id="anamespacellvm_html_a7c46c742c31be54870e2038048e6b391"><div class="ttname"><a href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">llvm::dbgs</a></div><div class="ttdeci">raw_ostream &amp; dbgs()</div><div class="ttdoc">dbgs() - This returns a reference to a raw_ostream for debugging messages.</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8cpp_source.html#l00163">Debug.cpp:163</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_a935e2a8884592189d8f261634a0b24c5"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a935e2a8884592189d8f261634a0b24c5">llvm::MachineBasicBlock::addSuccessor</a></div><div class="ttdeci">void addSuccessor(MachineBasicBlock *Succ, BranchProbability Prob=BranchProbability::getUnknown())</div><div class="ttdoc">Add Succ as a successor of this MachineBasicBlock.</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8cpp_source.html#l00772">MachineBasicBlock.cpp:772</a></div></div>
<div class="ttc" id="aCommandLine_8h_html"><div class="ttname"><a href="CommandLine_8h.html">CommandLine.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_a03936a9b37da541420049422204ab206"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a03936a9b37da541420049422204ab206">llvm::MachineBasicBlock::pred_size</a></div><div class="ttdeci">unsigned pred_size() const</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00369">MachineBasicBlock.h:369</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunction_html_ab4a6ca428289b667dd691a00e9f7e334"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#ab4a6ca428289b667dd691a00e9f7e334">llvm::MachineFunction::getRegInfo</a></div><div class="ttdeci">MachineRegisterInfo &amp; getRegInfo()</div><div class="ttdoc">getRegInfo - Return information about the registers currently in use.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00682">MachineFunction.h:682</a></div></div>
<div class="ttc" id="anamespacellvm_html_a3af72f14ea20f2c762c751d2d49e5ea3"><div class="ttname"><a href="namespacellvm.html#a3af72f14ea20f2c762c751d2d49e5ea3">llvm::shouldOptimizeForSize</a></div><div class="ttdeci">bool shouldOptimizeForSize(const MachineFunction *MF, ProfileSummaryInfo *PSI, const MachineBlockFrequencyInfo *BFI, PGSOQueryType QueryType=PGSOQueryType::Other)</div><div class="ttdoc">Returns true if machine function MF is suggested to be size-optimized based on the profile.</div><div class="ttdef"><b>Definition:</b> <a href="MachineSizeOpts_8cpp_source.html#l00183">MachineSizeOpts.cpp:183</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetInstrInfo_html_a0317b8d1d0eb9aaf9af9d636f5f66e8d"><div class="ttname"><a href="classllvm_1_1TargetInstrInfo.html#a0317b8d1d0eb9aaf9af9d636f5f66e8d">llvm::TargetInstrInfo::removeBranch</a></div><div class="ttdeci">virtual unsigned removeBranch(MachineBasicBlock &amp;MBB, int *BytesRemoved=nullptr) const</div><div class="ttdoc">Remove the branching code at the end of the specific MBB.</div><div class="ttdef"><b>Definition:</b> <a href="TargetInstrInfo_8h_source.html#l00694">TargetInstrInfo.h:694</a></div></div>
<div class="ttc" id="aTailDuplicator_8cpp_html_aa0c584322547d392248159b2754429f1"><div class="ttname"><a href="TailDuplicator_8cpp.html#aa0c584322547d392248159b2754429f1">getPHISrcRegOpIdx</a></div><div class="ttdeci">static unsigned getPHISrcRegOpIdx(MachineInstr *MI, MachineBasicBlock *SrcBB)</div><div class="ttdef"><b>Definition:</b> <a href="TailDuplicator_8cpp_source.html#l00308">TailDuplicator.cpp:308</a></div></div>
<div class="ttc" id="aTarget_2TargetMachine_8h_html"><div class="ttname"><a href="Target_2TargetMachine_8h.html">TargetMachine.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBranchProbabilityInfo_html"><div class="ttname"><a href="classllvm_1_1MachineBranchProbabilityInfo.html">llvm::MachineBranchProbabilityInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineBranchProbabilityInfo_8h_source.html#l00022">MachineBranchProbabilityInfo.h:22</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_a3ddd708642d60c1661992ff8ba1b215d"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a3ddd708642d60c1661992ff8ba1b215d">llvm::MachineBasicBlock::succ_end</a></div><div class="ttdeci">succ_iterator succ_end()</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00375">MachineBasicBlock.h:375</a></div></div>
<div class="ttc" id="aREADME__ALTIVEC_8txt_html_a9aacd9146afe44bf656cd664e2a88c8c"><div class="ttname"><a href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a></div><div class="ttdeci">(vector float) vec_cmpeq(*A, *B) C</div><div class="ttdef"><b>Definition:</b> <a href="README__ALTIVEC_8txt_source.html#l00086">README_ALTIVEC.txt:86</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstr_html_a3f7a45f6e10668a5f702e26bca80d18e"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#a3f7a45f6e10668a5f702e26bca80d18e">llvm::MachineInstr::getOperand</a></div><div class="ttdeci">const MachineOperand &amp; getOperand(unsigned i) const</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00526">MachineInstr.h:526</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_adc8f1be4a77ae671ac139d5f06b44deb"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#adc8f1be4a77ae671ac139d5f06b44deb">llvm::MachineBasicBlock::isSuccessor</a></div><div class="ttdeci">bool isSuccessor(const MachineBasicBlock *MBB) const</div><div class="ttdoc">Return true if the specified MBB is a successor of this block.</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8cpp_source.html#l00934">MachineBasicBlock.cpp:934</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineOperand_html_a001d31fcea92be51d2999826b806606f"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#a001d31fcea92be51d2999826b806606f">llvm::MachineOperand::setSubReg</a></div><div class="ttdeci">void setSubReg(unsigned subReg)</div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00490">MachineOperand.h:490</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_ac421fe6513e43aedbba712e4a981744e"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#ac421fe6513e43aedbba712e4a981744e">llvm::MachineBasicBlock::eraseFromParent</a></div><div class="ttdeci">void eraseFromParent()</div><div class="ttdoc">This method unlinks 'this' from the containing function and deletes it.</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8cpp_source.html#l01356">MachineBasicBlock.cpp:1356</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetRegisterClass_html"><div class="ttname"><a href="classllvm_1_1TargetRegisterClass.html">llvm::TargetRegisterClass</a></div><div class="ttdef"><b>Definition:</b> <a href="TargetRegisterInfo_8h_source.html#l00045">TargetRegisterInfo.h:45</a></div></div>
<div class="ttc" id="aDenseSet_8h_html"><div class="ttname"><a href="DenseSet_8h.html">DenseSet.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1MCInstrDesc_html"><div class="ttname"><a href="classllvm_1_1MCInstrDesc.html">llvm::MCInstrDesc</a></div><div class="ttdoc">Describe properties that are true of each instruction in the target description file.</div><div class="ttdef"><b>Definition:</b> <a href="MCInstrDesc_8h_source.html#l00198">MCInstrDesc.h:198</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineOperand_html"><div class="ttname"><a href="classllvm_1_1MachineOperand.html">llvm::MachineOperand</a></div><div class="ttdoc">MachineOperand class - Representation of each machine instruction operand.</div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00048">MachineOperand.h:48</a></div></div>
<div class="ttc" id="aTailDuplicator_8cpp_html_a1b3ac2a9f1ec3750cb6732b1e3d8274b"><div class="ttname"><a href="TailDuplicator_8cpp.html#a1b3ac2a9f1ec3750cb6732b1e3d8274b">TailDupVerify</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; TailDupVerify(&quot;tail-dup-verify&quot;, cl::desc(&quot;Verify sanity of PHI instructions during taildup&quot;), cl::init(false), cl::Hidden)</div></div>
<div class="ttc" id="anamespacellvm_html_a0bf75467957937ad23ad7be19f489934"><div class="ttname"><a href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">llvm::STATISTIC</a></div><div class="ttdeci">STATISTIC(NumFunctions, &quot;Total number of functions&quot;)</div></div>
<div class="ttc" id="aDebugLoc_8h_html"><div class="ttname"><a href="DebugLoc_8h.html">DebugLoc.h</a></div></div>
<div class="ttc" id="aSmallPtrSet_8h_html"><div class="ttname"><a href="SmallPtrSet_8h.html">SmallPtrSet.h</a></div></div>
<div class="ttc" id="aSILowerI1Copies_8cpp_html_a5cd9e4c7fe1a7ebe8b545eb891a2a949"><div class="ttname"><a href="SILowerI1Copies_8cpp.html#a5cd9e4c7fe1a7ebe8b545eb891a2a949">Copies</a></div><div class="ttdeci">SI Lower i1 Copies</div><div class="ttdef"><b>Definition:</b> <a href="SILowerI1Copies_8cpp_source.html#l00397">SILowerI1Copies.cpp:397</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetRegisterInfo_html_af14d27fb00fd2058e8da7eec1489df19"><div class="ttname"><a href="classllvm_1_1TargetRegisterInfo.html#af14d27fb00fd2058e8da7eec1489df19">llvm::TargetRegisterInfo::getMatchingSuperRegClass</a></div><div class="ttdeci">virtual const TargetRegisterClass * getMatchingSuperRegClass(const TargetRegisterClass *A, const TargetRegisterClass *B, unsigned Idx) const</div><div class="ttdoc">Return a subclass of the specified register class A so that each register in it has a sub-register of...</div><div class="ttdef"><b>Definition:</b> <a href="TargetRegisterInfo_8cpp_source.html#l00303">TargetRegisterInfo.cpp:303</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineRegisterInfo_html_a40d954b9cf9ee8b545a78725f2549cba"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html#a40d954b9cf9ee8b545a78725f2549cba">llvm::MachineRegisterInfo::getVRegDef</a></div><div class="ttdeci">MachineInstr * getVRegDef(Register Reg) const</div><div class="ttdoc">getVRegDef - Return the machine instr that defines the specified virtual register or null if none is ...</div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8cpp_source.html#l00398">MachineRegisterInfo.cpp:398</a></div></div>
<div class="ttc" id="aclassllvm_1_1MBFIWrapper_html"><div class="ttname"><a href="classllvm_1_1MBFIWrapper.html">llvm::MBFIWrapper</a></div><div class="ttdef"><b>Definition:</b> <a href="MBFIWrapper_8h_source.html#l00027">MBFIWrapper.h:27</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html">llvm::MachineBasicBlock</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00094">MachineBasicBlock.h:94</a></div></div>
<div class="ttc" id="aclassllvm_1_1ProfileSummaryInfo_html"><div class="ttname"><a href="classllvm_1_1ProfileSummaryInfo.html">llvm::ProfileSummaryInfo</a></div><div class="ttdoc">Analysis providing profile information.</div><div class="ttdef"><b>Definition:</b> <a href="ProfileSummaryInfo_8h_source.html#l00040">ProfileSummaryInfo.h:40</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineRegisterInfo_html_aa363afffca4fc13a709673936b47fe33"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html#aa363afffca4fc13a709673936b47fe33">llvm::MachineRegisterInfo::getRegClass</a></div><div class="ttdeci">const TargetRegisterClass * getRegClass(Register Reg) const</div><div class="ttdoc">Return the register class of the specified virtual register.</div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8h_source.html#l00661">MachineRegisterInfo.h:661</a></div></div>
<div class="ttc" id="aTailDuplicator_8cpp_html_a833919b7851dc025ff507a7f8652bb8e"><div class="ttname"><a href="TailDuplicator_8cpp.html#a833919b7851dc025ff507a7f8652bb8e">VerifyPHIs</a></div><div class="ttdeci">static void VerifyPHIs(MachineFunction &amp;MF, bool CheckExtra)</div><div class="ttdef"><b>Definition:</b> <a href="TailDuplicator_8cpp_source.html#l00100">TailDuplicator.cpp:100</a></div></div>
<div class="ttc" id="aclassllvm_1_1function__ref_html"><div class="ttname"><a href="classllvm_1_1function__ref.html">llvm::function_ref</a></div><div class="ttdoc">An efficient, type-erasing, non-owning reference to a callable.</div><div class="ttdef"><b>Definition:</b> <a href="STLFunctionalExtras_8h_source.html#l00036">STLFunctionalExtras.h:36</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunction_html_a6691cc6c9b7341348045f8d54a14e7a7"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#a6691cc6c9b7341348045f8d54a14e7a7">llvm::MachineFunction::getMMI</a></div><div class="ttdeci">MachineModuleInfo &amp; getMMI() const</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00623">MachineFunction.h:623</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseSet_html"><div class="ttname"><a href="classllvm_1_1DenseSet.html">llvm::DenseSet</a></div><div class="ttdoc">Implements a dense probed hash-table based set.</div><div class="ttdef"><b>Definition:</b> <a href="DenseSet_8h_source.html#l00268">DenseSet.h:268</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunction_html_a325f6b611ef9ec06798d3b4eb9572093"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#a325f6b611ef9ec06798d3b4eb9572093">llvm::MachineFunction::getSubtarget</a></div><div class="ttdeci">const TargetSubtargetInfo &amp; getSubtarget() const</div><div class="ttdoc">getSubtarget - Return the subtarget for which this machine code is being compiled.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00672">MachineFunction.h:672</a></div></div>
<div class="ttc" id="aclassllvm_1_1cl_1_1opt_html"><div class="ttname"><a href="classllvm_1_1cl_1_1opt.html">llvm::cl::opt</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l01410">CommandLine.h:1410</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstr_html_ae8ff2acea4fe63e48e8fc6cf0620ff78"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#ae8ff2acea4fe63e48e8fc6cf0620ff78">llvm::MachineInstr::getDebugLoc</a></div><div class="ttdeci">const DebugLoc &amp; getDebugLoc() const</div><div class="ttdoc">Returns the debug location id of this MachineInstr.</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00445">MachineInstr.h:445</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_aefb323794dab5bb00d738a3f32dd65e6"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#aefb323794dab5bb00d738a3f32dd65e6">llvm::MachineBasicBlock::mayHaveInlineAsmBr</a></div><div class="ttdeci">bool mayHaveInlineAsmBr() const</div><div class="ttdoc">Returns true if this block may have an INLINEASM_BR (overestimate, by checking if any of the successo...</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8cpp_source.html#l00302">MachineBasicBlock.cpp:302</a></div></div>
<div class="ttc" id="aSIInstrInfo_8cpp_html_a0dfd55eaf0bcb495f09ecf8c55b256b2a97bce951e4585a39601c04d86bb14ffd"><div class="ttname"><a href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a97bce951e4585a39601c04d86bb14ffd">VI</a></div><div class="ttdeci">@ VI</div><div class="ttdef"><b>Definition:</b> <a href="SIInstrInfo_8cpp_source.html#l07994">SIInstrInfo.cpp:7994</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_a0359a738e0412c5a7ea55d61175e0661"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a0359a738e0412c5a7ea55d61175e0661">llvm::MachineBasicBlock::pred_end</a></div><div class="ttdeci">pred_iterator pred_end()</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00359">MachineBasicBlock.h:359</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineOperand_html_a4c9594c955fec80c73ddd964b5efd554"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#a4c9594c955fec80c73ddd964b5efd554">llvm::MachineOperand::isReg</a></div><div class="ttdeci">bool isReg() const</div><div class="ttdoc">isReg - Tests if this is a MO_Register operand.</div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00329">MachineOperand.h:329</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstr_html"><div class="ttname"><a href="classllvm_1_1MachineInstr.html">llvm::MachineInstr</a></div><div class="ttdoc">Representation of each machine instruction.</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00066">MachineInstr.h:66</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstrBuilder_html"><div class="ttname"><a href="classllvm_1_1MachineInstrBuilder.html">llvm::MachineInstrBuilder</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBuilder_8h_source.html#l00069">MachineInstrBuilder.h:69</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_a86ae593fc791eda3aae24bd9d6df2322"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a86ae593fc791eda3aae24bd9d6df2322">llvm::MachineBasicBlock::hasAddressTaken</a></div><div class="ttdeci">bool hasAddressTaken() const</div><div class="ttdoc">Test whether this block is used as as something other than the target of a terminator,...</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00231">MachineBasicBlock.h:231</a></div></div>
<div class="ttc" id="aTailDuplicator_8cpp_html_a8d60ca423c44106297940619d9411856"><div class="ttname"><a href="TailDuplicator_8cpp.html#a8d60ca423c44106297940619d9411856">bothUsedInPHI</a></div><div class="ttdeci">static bool bothUsedInPHI(const MachineBasicBlock &amp;A, const SmallPtrSet&lt; MachineBasicBlock *, 8 &gt; &amp;SuccsB)</div><div class="ttdef"><b>Definition:</b> <a href="TailDuplicator_8cpp_source.html#l00691">TailDuplicator.cpp:691</a></div></div>
<div class="ttc" id="alib_2Target_2ARM_2README_8txt_html_ad3a99906764c35b2694ae90fa57744a5"><div class="ttname"><a href="lib_2Target_2ARM_2README_8txt.html#ad3a99906764c35b2694ae90fa57744a5">move</a></div><div class="ttdeci">compiles ldr LCPI1_0 ldr ldr mov lsr tst moveq r1 ldr LCPI1_1 and r0 bx lr It would be better to do something like to fold the shift into the conditional move</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2ARM_2README_8txt_source.html#l00546">README.txt:546</a></div></div>
<div class="ttc" id="anamespacellvm_1_1numbers_html_a92f4283d4e0e2ea1776894b3ae93640f"><div class="ttname"><a href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">llvm::numbers::e</a></div><div class="ttdeci">constexpr double e</div><div class="ttdef"><b>Definition:</b> <a href="MathExtras_8h_source.html#l00031">MathExtras.h:31</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseMap_html"><div class="ttname"><a href="classllvm_1_1DenseMap.html">llvm::DenseMap</a></div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00714">DenseMap.h:714</a></div></div>
<div class="ttc" id="aclassllvm_1_1TailDuplicator_html_a1c0f17f40e0399c6d151a50e99797e58"><div class="ttname"><a href="classllvm_1_1TailDuplicator.html#a1c0f17f40e0399c6d151a50e99797e58">llvm::TailDuplicator::tailDuplicateAndUpdate</a></div><div class="ttdeci">bool tailDuplicateAndUpdate(bool IsSimple, MachineBasicBlock *MBB, MachineBasicBlock *ForcedLayoutPred, SmallVectorImpl&lt; MachineBasicBlock * &gt; *DuplicatedPreds=nullptr, function_ref&lt; void(MachineBasicBlock *)&gt; *RemovalCallback=nullptr, SmallVectorImpl&lt; MachineBasicBlock * &gt; *CandidatePtr=nullptr)</div><div class="ttdoc">Tail duplicate a single basic block into its predecessors, and then clean up.</div><div class="ttdef"><b>Definition:</b> <a href="TailDuplicator_8cpp_source.html#l00155">TailDuplicator.cpp:155</a></div></div>
<div class="ttc" id="aMD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00058">MD5.cpp:58</a></div></div>
<div class="ttc" id="anamespacellvm_1_1cl_html_a10a041239ae1870cfcc064bfaa79fb65"><div class="ttname"><a href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">llvm::cl::init</a></div><div class="ttdeci">initializer&lt; Ty &gt; init(const Ty &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00445">CommandLine.h:445</a></div></div>
<div class="ttc" id="anamespacellvm_html_a8154638df88e4eaa568b67b23d463dac"><div class="ttname"><a href="namespacellvm.html#a8154638df88e4eaa568b67b23d463dac">llvm::make_early_inc_range</a></div><div class="ttdeci">iterator_range&lt; early_inc_iterator_impl&lt; detail::IterOfRange&lt; RangeT &gt; &gt; &gt; make_early_inc_range(RangeT &amp;&amp;Range)</div><div class="ttdoc">Make a range that does early increment to allow mutation of the underlying range without disrupting i...</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l00721">STLExtras.h:721</a></div></div>
<div class="ttc" id="anamespacellvm_html_acd1cd968cb420c82d70926920fcdc7d7"><div class="ttname"><a href="namespacellvm.html#acd1cd968cb420c82d70926920fcdc7d7">llvm::is_contained</a></div><div class="ttdeci">bool is_contained(R &amp;&amp;Range, const E &amp;Element)</div><div class="ttdoc">Wrapper function around std::find to detect if an element exists in a container.</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l01869">STLExtras.h:1869</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseMapBase_html_a0c047f127ed4380a6f383d70bec4eb94"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#a0c047f127ed4380a6f383d70bec4eb94">llvm::DenseMapBase&lt; DenseMap&lt; KeyT, ValueT, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;, KeyT, ValueT, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;::find</a></div><div class="ttdeci">iterator find(const_arg_type_t&lt; KeyT &gt; Val)</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00150">DenseMap.h:150</a></div></div>
<div class="ttc" id="aSILowerControlFlow_8cpp_html_a4868c5d81c5ccc98c47aeab6244346a0"><div class="ttname"><a href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a></div><div class="ttdeci">assert(ImpDefSCC.getReg()==AMDGPU::SCC &amp;&amp;ImpDefSCC.isDef())</div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_a5ffb77c69d69a5beff906caaecfd7be4"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a5ffb77c69d69a5beff906caaecfd7be4">llvm::MachineBasicBlock::canFallThrough</a></div><div class="ttdeci">bool canFallThrough()</div><div class="ttdoc">Return true if the block can implicitly transfer control to the block after it by falling off the end...</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8cpp_source.html#l00991">MachineBasicBlock.cpp:991</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_adbff55f335d303816547f35eb6edb948"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#adbff55f335d303816547f35eb6edb948">llvm::MachineBasicBlock::size</a></div><div class="ttdeci">unsigned size() const</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00279">MachineBasicBlock.h:279</a></div></div>
<div class="ttc" id="aMachineBranchProbabilityInfo_8h_html"><div class="ttname"><a href="MachineBranchProbabilityInfo_8h.html">MachineBranchProbabilityInfo.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_a6321b189ea8fd5058663f8a87d6c23e9"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a6321b189ea8fd5058663f8a87d6c23e9">llvm::MachineBasicBlock::succ_begin</a></div><div class="ttdeci">succ_iterator succ_begin()</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00373">MachineBasicBlock.h:373</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_a4e21760f681d6f97f95c8414e7b83ea5"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a4e21760f681d6f97f95c8414e7b83ea5">llvm::MachineBasicBlock::getParent</a></div><div class="ttdeci">const MachineFunction * getParent() const</div><div class="ttdoc">Return the MachineFunction containing this basic block.</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00265">MachineBasicBlock.h:265</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstr_html_ad43bf1af480830a4d6604e969e3f38e9"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#ad43bf1af480830a4d6604e969e3f38e9">llvm::MachineInstr::isPHI</a></div><div class="ttdeci">bool isPHI() const</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l01308">MachineInstr.h:1308</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstrBuilder_html_ad08ed580345a51c50d9477dec1e65818"><div class="ttname"><a href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">llvm::MachineInstrBuilder::addReg</a></div><div class="ttdeci">const MachineInstrBuilder &amp; addReg(Register RegNo, unsigned flags=0, unsigned SubReg=0) const</div><div class="ttdoc">Add a new virtual register operand.</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBuilder_8h_source.html#l00097">MachineInstrBuilder.h:97</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineOperand_html_ac0035d7c1c860501c877c20e6e93297b"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#ac0035d7c1c860501c877c20e6e93297b">llvm::MachineOperand::getReg</a></div><div class="ttdeci">Register getReg() const</div><div class="ttdoc">getReg - Returns the register number.</div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00369">MachineOperand.h:369</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_afd9b9b8655c008bf6cd6afb05d41b69e"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#afd9b9b8655c008bf6cd6afb05d41b69e">llvm::MachineBasicBlock::predecessors</a></div><div class="ttdeci">iterator_range&lt; pred_iterator &gt; predecessors()</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00390">MachineBasicBlock.h:390</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBranchProbabilityInfo_html_ad78fb9b4721b71aa297bd2bda44e7e39"><div class="ttname"><a href="classllvm_1_1MachineBranchProbabilityInfo.html#ad78fb9b4721b71aa297bd2bda44e7e39">llvm::MachineBranchProbabilityInfo::getEdgeProbability</a></div><div class="ttdeci">BranchProbability getEdgeProbability(const MachineBasicBlock *Src, const MachineBasicBlock *Dst) const</div><div class="ttdef"><b>Definition:</b> <a href="MachineBranchProbabilityInfo_8cpp_source.html#l00056">MachineBranchProbabilityInfo.cpp:56</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_a877507fda31c207ec36a018784369708"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a877507fda31c207ec36a018784369708">llvm::MachineBasicBlock::pred_empty</a></div><div class="ttdeci">bool pred_empty() const</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00372">MachineBasicBlock.h:372</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSetImpl_html_a1f475b0df44ebd7169e720fa1bf9169e"><div class="ttname"><a href="classllvm_1_1SmallPtrSetImpl.html#a1f475b0df44ebd7169e720fa1bf9169e">llvm::SmallPtrSetImpl::count</a></div><div class="ttdeci">size_type count(ConstPtrType Ptr) const</div><div class="ttdoc">count - Return 1 if the specified pointer is in the set, 0 otherwise.</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00383">SmallPtrSet.h:383</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunction_html"><div class="ttname"><a href="classllvm_1_1MachineFunction.html">llvm::MachineFunction</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00258">MachineFunction.h:258</a></div></div>
<div class="ttc" id="aclassllvm_1_1SetVector_html_a72d928b7fc2c5f2d56c6ac0265fd9c6e"><div class="ttname"><a href="classllvm_1_1SetVector.html#a72d928b7fc2c5f2d56c6ac0265fd9c6e">llvm::SetVector&lt; T, SmallVector&lt; T, N &gt;, SmallDenseSet&lt; T, N &gt; &gt;::insert</a></div><div class="ttdeci">bool insert(const value_type &amp;X)</div><div class="ttdoc">Insert a new element into the SetVector.</div><div class="ttdef"><b>Definition:</b> <a href="SetVector_8h_source.html#l00141">SetVector.h:141</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_aa8d1d8d88835b75b05b14ab774785e8a"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#aa8d1d8d88835b75b05b14ab774785e8a">llvm::MachineBasicBlock::succ_empty</a></div><div class="ttdeci">bool succ_empty() const</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00388">MachineBasicBlock.h:388</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_a7f0521fa2de44271fd4b909ea7351ef3"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a7f0521fa2de44271fd4b909ea7351ef3">llvm::MachineBasicBlock::getFirstTerminator</a></div><div class="ttdeci">iterator getFirstTerminator()</div><div class="ttdoc">Returns an iterator to the first terminator instruction of this basic block.</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8cpp_source.html#l00240">MachineBasicBlock.cpp:240</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineOperand_html_a9b48cb80ee1534c2b51d789b673137c1"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#a9b48cb80ee1534c2b51d789b673137c1">llvm::MachineOperand::getMBB</a></div><div class="ttdeci">MachineBasicBlock * getMBB() const</div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00571">MachineOperand.h:571</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_a3aa22d521bd6a7e6b9f35545dc7b0f1e"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a3aa22d521bd6a7e6b9f35545dc7b0f1e">llvm::MachineBasicBlock::getNumber</a></div><div class="ttdeci">int getNumber() const</div><div class="ttdoc">MachineBasicBlocks are uniquely numbered at the function level, unless they're not in a MachineFuncti...</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l01143">MachineBasicBlock.h:1143</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_a4d2c96836214c1f13357ffb99125fb4a"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a4d2c96836214c1f13357ffb99125fb4a">llvm::MachineBasicBlock::successors</a></div><div class="ttdeci">iterator_range&lt; succ_iterator &gt; successors()</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00396">MachineBasicBlock.h:396</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_a62b5d2211c09378c471307293453d780"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a62b5d2211c09378c471307293453d780">llvm::MachineBasicBlock::getFirstNonDebugInstr</a></div><div class="ttdeci">iterator getFirstNonDebugInstr(bool SkipPseudoOp=true)</div><div class="ttdoc">Returns an iterator to the first non-debug instruction in the basic block, or end().</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8cpp_source.html#l00263">MachineBasicBlock.cpp:263</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_adf0023bdc4f05a7849c35b1c859580d8"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#adf0023bdc4f05a7849c35b1c859580d8">llvm::MachineBasicBlock::splice</a></div><div class="ttdeci">void splice(iterator Where, MachineBasicBlock *Other, iterator From)</div><div class="ttdoc">Take an instruction from MBB 'Other' at the position From, and insert it into this MBB right before '...</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l01037">MachineBasicBlock.h:1037</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_a07ccfc69389d4e9657d22698f4a7ef46"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a07ccfc69389d4e9657d22698f4a7ef46">llvm::MachineBasicBlock::hasEHPadSuccessor</a></div><div class="ttdeci">bool hasEHPadSuccessor() const</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8cpp_source.html#l00285">MachineBasicBlock.cpp:285</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineRegisterInfo_html_a01bf72631b0bc836a8c07fe840b13233"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html#a01bf72631b0bc836a8c07fe840b13233">llvm::MachineRegisterInfo::hasOneNonDBGUse</a></div><div class="ttdeci">bool hasOneNonDBGUse(Register RegNo) const</div><div class="ttdoc">hasOneNonDBGUse - Return true if there is exactly one non-Debug use of the specified register.</div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8cpp_source.html#l00417">MachineRegisterInfo.cpp:417</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetRegisterInfo_html_a3a4eeb9ff94628ed00e695d6aa8e897f"><div class="ttname"><a href="classllvm_1_1TargetRegisterInfo.html#a3a4eeb9ff94628ed00e695d6aa8e897f">llvm::TargetRegisterInfo::composeSubRegIndices</a></div><div class="ttdeci">unsigned composeSubRegIndices(unsigned a, unsigned b) const</div><div class="ttdoc">Return the subregister index you get from composing two subregister indices.</div><div class="ttdef"><b>Definition:</b> <a href="TargetRegisterInfo_8h_source.html#l00662">TargetRegisterInfo.h:662</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_ad81901d0d8b768b240e78bf357999f34"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#ad81901d0d8b768b240e78bf357999f34">llvm::MachineBasicBlock::findBranchDebugLoc</a></div><div class="ttdeci">DebugLoc findBranchDebugLoc()</div><div class="ttdoc">Find and return the merged DebugLoc of the branch instructions of the block.</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8cpp_source.html#l01436">MachineBasicBlock.cpp:1436</a></div></div>
<div class="ttc" id="aSupport_2ErrorHandling_8h_html_ace243f5c25697a1107cce46626b3dc94"><div class="ttname"><a href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a></div><div class="ttdeci">#define llvm_unreachable(msg)</div><div class="ttdoc">Marks that the current location is not supposed to be reachable.</div><div class="ttdef"><b>Definition:</b> <a href="Support_2ErrorHandling_8h_source.html#l00143">ErrorHandling.h:143</a></div></div>
<div class="ttc" id="aclassllvm_1_1ilist__node__impl_html_af719fc783be6589465137d997701a432"><div class="ttname"><a href="classllvm_1_1ilist__node__impl.html#af719fc783be6589465137d997701a432">llvm::ilist_node_impl::getIterator</a></div><div class="ttdeci">self_iterator getIterator()</div><div class="ttdef"><b>Definition:</b> <a href="ilist__node_8h_source.html#l00082">ilist_node.h:82</a></div></div>
<div class="ttc" id="aTargetSubtargetInfo_8h_html"><div class="ttname"><a href="TargetSubtargetInfo_8h.html">TargetSubtargetInfo.h</a></div></div>
<div class="ttc" id="aAArch64SLSHardening_8cpp_html_ad467c4ab9119043f9b7750ab986be61a"><div class="ttname"><a href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a></div><div class="ttdeci">MachineBasicBlock MachineBasicBlock::iterator DebugLoc DL</div><div class="ttdef"><b>Definition:</b> <a href="AArch64SLSHardening_8cpp_source.html#l00076">AArch64SLSHardening.cpp:76</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineOperand_html_a75eb135014670ce946e78739cdc9b51b"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#a75eb135014670ce946e78739cdc9b51b">llvm::MachineOperand::isDef</a></div><div class="ttdeci">bool isDef() const</div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00384">MachineOperand.h:384</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstr_html_a002fd916e7206e01d512eeb06d405cf0"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#a002fd916e7206e01d512eeb06d405cf0">llvm::MachineInstr::getParent</a></div><div class="ttdeci">const MachineBasicBlock * getParent() const</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00313">MachineInstr.h:313</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseMapBase_html_a99f811d53704275b4158c62a2dd138d9"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#a99f811d53704275b4158c62a2dd138d9">llvm::DenseMapBase&lt; DenseMap&lt; KeyT, ValueT, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;, KeyT, ValueT, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;::insert</a></div><div class="ttdeci">std::pair&lt; iterator, bool &gt; insert(const std::pair&lt; KeyT, ValueT &gt; &amp;KV)</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00207">DenseMap.h:207</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_a31e57b158a17c459f0dc34b0e602ecc6"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a31e57b158a17c459f0dc34b0e602ecc6">llvm::MachineBasicBlock::transferSuccessors</a></div><div class="ttdeci">void transferSuccessors(MachineBasicBlock *FromMBB)</div><div class="ttdoc">Transfers all the successors from MBB to this machine basic block (i.e., copies all the successors Fr...</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8cpp_source.html#l00891">MachineBasicBlock.cpp:891</a></div></div>
<div class="ttc" id="aAArch64AdvSIMDScalarPass_8cpp_html_aacd2ab195054a3e6a74bfbb9d5d571c8"><div class="ttname"><a href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a></div><div class="ttdeci">unsigned const MachineRegisterInfo * MRI</div><div class="ttdef"><b>Definition:</b> <a href="AArch64AdvSIMDScalarPass_8cpp_source.html#l00105">AArch64AdvSIMDScalarPass.cpp:105</a></div></div>
<div class="ttc" id="aclassllvm_1_1Register_html"><div class="ttname"><a href="classllvm_1_1Register.html">llvm::Register</a></div><div class="ttdoc">Wrapper class representing virtual and physical registers.</div><div class="ttdef"><b>Definition:</b> <a href="Register_8h_source.html#l00019">Register.h:19</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineOperand_html_a028a8c5113d40d8c3f4427053bf36738"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#a028a8c5113d40d8c3f4427053bf36738">llvm::MachineOperand::getSubReg</a></div><div class="ttdeci">unsigned getSubReg() const</div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00374">MachineOperand.h:374</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html_a1c455e007178a24dfb18ac0e200ea02c"><div class="ttname"><a href="classllvm_1_1Function.html#a1c455e007178a24dfb18ac0e200ea02c">llvm::Function::hasOptSize</a></div><div class="ttdeci">bool hasOptSize() const</div><div class="ttdoc">Optimize this function for size (-Os) or minimum size (-Oz).</div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00644">Function.h:644</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineRegisterInfo_html_af16c39ee36e4633f821b6820f8bd52ef"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html#af16c39ee36e4633f821b6820f8bd52ef">llvm::MachineRegisterInfo::replaceRegWith</a></div><div class="ttdeci">void replaceRegWith(Register FromReg, Register ToReg)</div><div class="ttdoc">replaceRegWith - Replace all instances of FromReg with ToReg in the machine function.</div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8cpp_source.html#l00380">MachineRegisterInfo.cpp:380</a></div></div>
<div class="ttc" id="aAArch64SLSHardening_8cpp_html_a5958512eae2979bd2eb383977996a600"><div class="ttname"><a href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a></div><div class="ttdeci">MachineBasicBlock &amp; MBB</div><div class="ttdef"><b>Definition:</b> <a href="AArch64SLSHardening_8cpp_source.html#l00074">AArch64SLSHardening.cpp:74</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_a2d4703c258359175d1c7840735bd77b6"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a2d4703c258359175d1c7840735bd77b6">llvm::MachineBasicBlock::replaceSuccessor</a></div><div class="ttdeci">void replaceSuccessor(MachineBasicBlock *Old, MachineBasicBlock *New)</div><div class="ttdoc">Replace successor OLD with NEW and update probability info.</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8cpp_source.html#l00833">MachineBasicBlock.cpp:833</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunction_html_a4b21394c138cc5ae719510bb529ee099"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#a4b21394c138cc5ae719510bb529ee099">llvm::MachineFunction::getFunction</a></div><div class="ttdeci">Function &amp; getFunction()</div><div class="ttdoc">Return the LLVM function that this machine code represents.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00638">MachineFunction.h:638</a></div></div>
<div class="ttc" id="aTailDuplicator_8cpp_html_ac3fb3fc8ff6a8d4c09110a9eee40321f"><div class="ttname"><a href="TailDuplicator_8cpp.html#ac3fb3fc8ff6a8d4c09110a9eee40321f">getRegsUsedByPHIs</a></div><div class="ttdeci">static void getRegsUsedByPHIs(const MachineBasicBlock &amp;BB, DenseSet&lt; Register &gt; *UsedByPhi)</div><div class="ttdef"><b>Definition:</b> <a href="TailDuplicator_8cpp_source.html#l00318">TailDuplicator.cpp:318</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_aa7114bb360b922025e7a4fec442676db"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#aa7114bb360b922025e7a4fec442676db">llvm::MachineBasicBlock::removeSuccessor</a></div><div class="ttdeci">void removeSuccessor(MachineBasicBlock *Succ, bool NormalizeSuccProbs=false)</div><div class="ttdoc">Remove successor from the successors list of this MachineBasicBlock.</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8cpp_source.html#l00810">MachineBasicBlock.cpp:810</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseMapBase_html_a65520b9c67759099e313d0f4e7b5ff9e"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#a65520b9c67759099e313d0f4e7b5ff9e">llvm::DenseMapBase&lt; DenseMap&lt; KeyT, ValueT, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;, KeyT, ValueT, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00084">DenseMap.h:84</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetInstrInfo_html_a0dfb0c744373d4b6112eb343a5b07fc7"><div class="ttname"><a href="classllvm_1_1TargetInstrInfo.html#a0dfb0c744373d4b6112eb343a5b07fc7">llvm::TargetInstrInfo::analyzeBranch</a></div><div class="ttdeci">virtual bool analyzeBranch(MachineBasicBlock &amp;MBB, MachineBasicBlock *&amp;TBB, MachineBasicBlock *&amp;FBB, SmallVectorImpl&lt; MachineOperand &gt; &amp;Cond, bool AllowModify=false) const</div><div class="ttdoc">Analyze the branching code at the end of MBB, returning true if it cannot be understood (e....</div><div class="ttdef"><b>Definition:</b> <a href="TargetInstrInfo_8h_source.html#l00641">TargetInstrInfo.h:641</a></div></div>
<div class="ttc" id="anamespacellvm_1_1ISD_html_a22ea9cec080dd5f4f47ba234c2f59110ab969e7d43eb37a0398b5ded23bccc136"><div class="ttname"><a href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110ab969e7d43eb37a0398b5ded23bccc136">llvm::ISD::INLINEASM_BR</a></div><div class="ttdeci">@ INLINEASM_BR</div><div class="ttdoc">INLINEASM_BR - Branching version of inline asm. Used by asm-goto.</div><div class="ttdef"><b>Definition:</b> <a href="ISDOpcodes_8h_source.html#l01027">ISDOpcodes.h:1027</a></div></div>
<div class="ttc" id="aFunction_8h_html"><div class="ttname"><a href="Function_8h.html">Function.h</a></div></div>
<div class="ttc" id="aTailDuplicator_8cpp_html_a650dbeb818b3823619b56309f3d6fdd4"><div class="ttname"><a href="TailDuplicator_8cpp.html#a650dbeb818b3823619b56309f3d6fdd4">TailDuplicateSize</a></div><div class="ttdeci">static cl::opt&lt; unsigned &gt; TailDuplicateSize(&quot;tail-dup-size&quot;, cl::desc(&quot;Maximum instructions to consider tail duplicating&quot;), cl::init(2), cl::Hidden)</div></div>
<div class="ttc" id="aclassllvm_1_1Function_html_a9084ce2576fad285c1c0dc1e165dd4b6"><div class="ttname"><a href="classllvm_1_1Function.html#a9084ce2576fad285c1c0dc1e165dd4b6">llvm::Function::hasProfileData</a></div><div class="ttdeci">bool hasProfileData(bool IncludeSynthetic=false) const</div><div class="ttdoc">Return true if the function is annotated with profile data.</div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00289">Function.h:289</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html_aac0ea55010b7b1a301e65a0baea057aa"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">llvm::SmallVectorImpl::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00614">SmallVector.h:614</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_abd85c9d7c51eb515a550069e9ad9445e"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#abd85c9d7c51eb515a550069e9ad9445e">llvm::MachineBasicBlock::isLayoutSuccessor</a></div><div class="ttdeci">bool isLayoutSuccessor(const MachineBasicBlock *MBB) const</div><div class="ttdoc">Return true if the specified MBB will be emitted immediately after this block, such that if this bloc...</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8cpp_source.html#l00938">MachineBasicBlock.cpp:938</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineSSAUpdater_html_a71a08885f7838dc5a544816a357e2ec7"><div class="ttname"><a href="classllvm_1_1MachineSSAUpdater.html#a71a08885f7838dc5a544816a357e2ec7">llvm::MachineSSAUpdater::RewriteUse</a></div><div class="ttdeci">void RewriteUse(MachineOperand &amp;U)</div><div class="ttdoc">RewriteUse - Rewrite a use of the symbolic value.</div><div class="ttdef"><b>Definition:</b> <a href="MachineSSAUpdater_8cpp_source.html#l00234">MachineSSAUpdater.cpp:234</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineSSAUpdater_html_a670da7741129c7d591dc19951ecce6c3"><div class="ttname"><a href="classllvm_1_1MachineSSAUpdater.html#a670da7741129c7d591dc19951ecce6c3">llvm::MachineSSAUpdater::GetValueInMiddleOfBlock</a></div><div class="ttdeci">Register GetValueInMiddleOfBlock(MachineBasicBlock *BB, bool ExistingValueOnly=false)</div><div class="ttdoc">GetValueInMiddleOfBlock - Construct SSA form, materializing a value that is live in the middle of the...</div><div class="ttdef"><b>Definition:</b> <a href="MachineSSAUpdater_8cpp_source.html#l00148">MachineSSAUpdater.cpp:148</a></div></div>
<div class="ttc" id="aclassllvm_1_1TailDuplicator_html_a8fffb36a3e1523ff3d26521f27c02df8"><div class="ttname"><a href="classllvm_1_1TailDuplicator.html#a8fffb36a3e1523ff3d26521f27c02df8">llvm::TailDuplicator::canTailDuplicate</a></div><div class="ttdeci">bool canTailDuplicate(MachineBasicBlock *TailBB, MachineBasicBlock *PredBB)</div><div class="ttdoc">Returns true if TailBB can successfully be duplicated into PredBB.</div><div class="ttdef"><b>Definition:</b> <a href="TailDuplicator_8cpp_source.html#l00788">TailDuplicator.cpp:788</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineSSAUpdater_html"><div class="ttname"><a href="classllvm_1_1MachineSSAUpdater.html">llvm::MachineSSAUpdater</a></div><div class="ttdoc">MachineSSAUpdater - This class updates SSA form for a set of virtual registers defined in multiple bl...</div><div class="ttdef"><b>Definition:</b> <a href="MachineSSAUpdater_8h_source.html#l00034">MachineSSAUpdater.h:34</a></div></div>
<div class="ttc" id="anamespacellvm_html_a17e04afcf0c5efeb0eb6a9a45287b5e4"><div class="ttname"><a href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">llvm::BuildMI</a></div><div class="ttdeci">MachineInstrBuilder BuildMI(MachineFunction &amp;MF, const MIMetadata &amp;MIMD, const MCInstrDesc &amp;MCID)</div><div class="ttdoc">Builder interface. Specify how to create the initial instruction itself.</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBuilder_8h_source.html#l00357">MachineInstrBuilder.h:357</a></div></div>
<div class="ttc" id="aSmallVector_8h_html"><div class="ttname"><a href="SmallVector_8h.html">SmallVector.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_ab2d91e7bec944efcbc39d8e30644f111"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#ab2d91e7bec944efcbc39d8e30644f111">llvm::MachineBasicBlock::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00309">MachineBasicBlock.h:309</a></div></div>
<div class="ttc" id="aMachineInstrBuilder_8h_html"><div class="ttname"><a href="MachineInstrBuilder_8h.html">MachineInstrBuilder.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_a00e55a6b6b44b739e9da1d62f1d8a5b3"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a00e55a6b6b44b739e9da1d62f1d8a5b3">llvm::MachineBasicBlock::isInlineAsmBrIndirectTarget</a></div><div class="ttdeci">bool isInlineAsmBrIndirectTarget() const</div><div class="ttdoc">Returns true if this is the indirect dest of an INLINEASM_BR.</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00662">MachineBasicBlock.h:662</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstrBuilder_html_a860467662b17cef898ece774ab400235"><div class="ttname"><a href="classllvm_1_1MachineInstrBuilder.html#a860467662b17cef898ece774ab400235">llvm::MachineInstrBuilder::setMIFlags</a></div><div class="ttdeci">const MachineInstrBuilder &amp; setMIFlags(unsigned Flags) const</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBuilder_8h_source.html#l00273">MachineInstrBuilder.h:273</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineOperand_html_a682ba82f42f7903d0000ffbb13ea3b57"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#a682ba82f42f7903d0000ffbb13ea3b57">llvm::MachineOperand::setReg</a></div><div class="ttdeci">void setReg(Register Reg)</div><div class="ttdoc">Change the register this operand corresponds to.</div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8cpp_source.html#l00061">MachineOperand.cpp:61</a></div></div>
<div class="ttc" id="aAArch64ExpandPseudoInsts_8cpp_html_ad3ece0ac2421637044624c9b01c42466"><div class="ttname"><a href="AArch64ExpandPseudoInsts_8cpp.html#ad3ece0ac2421637044624c9b01c42466">DefMI</a></div><div class="ttdeci">MachineInstrBuilder MachineInstrBuilder &amp; DefMI</div><div class="ttdef"><b>Definition:</b> <a href="AArch64ExpandPseudoInsts_8cpp_source.html#l00108">AArch64ExpandPseudoInsts.cpp:108</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstr_html_a432824f0975bb863478bf4ef3a5df258"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#a432824f0975bb863478bf4ef3a5df258">llvm::MachineInstr::getNumOperands</a></div><div class="ttdeci">unsigned getNumOperands() const</div><div class="ttdoc">Retuns the total number of operands.</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00519">MachineInstr.h:519</a></div></div>
<div class="ttc" id="aTailDuplicator_8h_html"><div class="ttname"><a href="TailDuplicator_8h.html">TailDuplicator.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_a095ce2d870dadf620a4c887ecc0efef8"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a095ce2d870dadf620a4c887ecc0efef8">llvm::MachineBasicBlock::empty</a></div><div class="ttdeci">bool empty() const</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00281">MachineBasicBlock.h:281</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineRegisterInfo_html_ad85285685fc46db3f2b3b0bf90bf9184"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html#ad85285685fc46db3f2b3b0bf90bf9184">llvm::MachineRegisterInfo::constrainRegClass</a></div><div class="ttdeci">const TargetRegisterClass * constrainRegClass(Register Reg, const TargetRegisterClass *RC, unsigned MinNumRegs=0)</div><div class="ttdoc">constrainRegClass - Constrain the register class of the specified virtual register to be a common sub...</div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8cpp_source.html#l00083">MachineRegisterInfo.cpp:83</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html">llvm::SmallVectorImpl</a></div><div class="ttdoc">This class consists of common code factored out of the SmallVector class to reduce code duplication b...</div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l00042">APFloat.h:42</a></div></div>
<div class="ttc" id="aMachineOperand_8h_html"><div class="ttname"><a href="MachineOperand_8h.html">MachineOperand.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallSetVector_html"><div class="ttname"><a href="classllvm_1_1SmallSetVector.html">llvm::SmallSetVector</a></div><div class="ttdoc">A SetVector that performs no allocations if smaller than a certain size.</div><div class="ttdef"><b>Definition:</b> <a href="SetVector_8h_source.html#l00300">SetVector.h:300</a></div></div>
<div class="ttc" id="alib_2CodeGen_2README_8txt_html_a09776db24cf586ec9f1e18f3bae14099"><div class="ttname"><a href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a></div><div class="ttdeci">Common register allocation spilling lr str ldr sxth r3 ldr mla r4 can lr mov lr str ldr sxth r3 mla r4 and then merge mul and lr str ldr sxth r3 mla r4 It also increase the likelihood the store may become dead bb27 Successors according to LLVM BB</div><div class="ttdef"><b>Definition:</b> <a href="lib_2CodeGen_2README_8txt_source.html#l00039">README.txt:39</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineSSAUpdater_html_ab01bfdaa2826542f165fa1ff6a2aacf1"><div class="ttname"><a href="classllvm_1_1MachineSSAUpdater.html#ab01bfdaa2826542f165fa1ff6a2aacf1">llvm::MachineSSAUpdater::AddAvailableValue</a></div><div class="ttdeci">void AddAvailableValue(MachineBasicBlock *BB, Register V)</div><div class="ttdoc">AddAvailableValue - Indicate that a rewritten value is available at the end of the specified block wi...</div><div class="ttdef"><b>Definition:</b> <a href="MachineSSAUpdater_8cpp_source.html#l00075">MachineSSAUpdater.cpp:75</a></div></div>
<div class="ttc" id="aclassllvm_1_1MCInstrInfo_html_a0587abbded61717d8a153b7e5bfdbfed"><div class="ttname"><a href="classllvm_1_1MCInstrInfo.html#a0587abbded61717d8a153b7e5bfdbfed">llvm::MCInstrInfo::get</a></div><div class="ttdeci">const MCInstrDesc &amp; get(unsigned Opcode) const</div><div class="ttdoc">Return the machine instruction descriptor that corresponds to the specified instruction opcode.</div><div class="ttdef"><b>Definition:</b> <a href="MCInstrInfo_8h_source.html#l00063">MCInstrInfo.h:63</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineSSAUpdater_html_a00117e47ce48a2a6e82e852dbb342202"><div class="ttname"><a href="classllvm_1_1MachineSSAUpdater.html#a00117e47ce48a2a6e82e852dbb342202">llvm::MachineSSAUpdater::Initialize</a></div><div class="ttdeci">void Initialize(Register V)</div><div class="ttdoc">Initialize - Reset this object to get ready for a new set of SSA updates.</div><div class="ttdef"><b>Definition:</b> <a href="MachineSSAUpdater_8cpp_source.html#l00063">MachineSSAUpdater.cpp:63</a></div></div>
<div class="ttc" id="aclassllvm_1_1DebugLoc_html"><div class="ttname"><a href="classllvm_1_1DebugLoc.html">llvm::DebugLoc</a></div><div class="ttdoc">A debug info location.</div><div class="ttdef"><b>Definition:</b> <a href="DebugLoc_8h_source.html#l00033">DebugLoc.h:33</a></div></div>
<div class="ttc" id="astructllvm_1_1cl_1_1desc_html"><div class="ttname"><a href="structllvm_1_1cl_1_1desc.html">llvm::cl::desc</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00411">CommandLine.h:411</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_a5803a49facae20ca4b002dcba6f1d03e"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a5803a49facae20ca4b002dcba6f1d03e">llvm::MachineBasicBlock::updateTerminator</a></div><div class="ttdeci">void updateTerminator(MachineBasicBlock *PreviousLayoutSuccessor)</div><div class="ttdoc">Update the terminator instructions in block to account for changes to block layout which may have bee...</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8cpp_source.html#l00667">MachineBasicBlock.cpp:667</a></div></div>
<div class="ttc" id="araw__ostream_8h_html"><div class="ttname"><a href="raw__ostream_8h.html">raw_ostream.h</a></div></div>
<div class="ttc" id="aMachineFunction_8h_html"><div class="ttname"><a href="MachineFunction_8h.html">MachineFunction.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunction_html_ac551eef2a223f5e069bb900026f370eb"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#ac551eef2a223f5e069bb900026f370eb">llvm::MachineFunction::eraseCallSiteInfo</a></div><div class="ttdeci">void eraseCallSiteInfo(const MachineInstr *MI)</div><div class="ttdoc">Following functions update call site info.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8cpp_source.html#l00872">MachineFunction.cpp:872</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstrBundleIterator_html"><div class="ttname"><a href="classllvm_1_1MachineInstrBundleIterator.html">llvm::MachineInstrBundleIterator&lt; MachineInstr &gt;</a></div></div>
<div class="ttc" id="aTailDuplicator_8cpp_html_a0f8adacb7541ff7197a2b08bee392440"><div class="ttname"><a href="TailDuplicator_8cpp.html#a0f8adacb7541ff7197a2b08bee392440">TailDupIndirectBranchSize</a></div><div class="ttdeci">static cl::opt&lt; unsigned &gt; TailDupIndirectBranchSize(&quot;tail-dup-indirect-size&quot;, cl::desc(&quot;Maximum instructions to consider tail duplicating blocks that &quot; &quot;end with indirect branches.&quot;), cl::init(20), cl::Hidden)</div></div>
<div class="ttc" id="aTargetRegisterInfo_8h_html"><div class="ttname"><a href="TargetRegisterInfo_8h.html">TargetRegisterInfo.h</a></div></div>
<div class="ttc" id="aDebug_8h_html"><div class="ttname"><a href="Debug_8h.html">Debug.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_acbc921830578e2741be6549db716c0ce"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">llvm::MachineBasicBlock::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00311">MachineBasicBlock.h:311</a></div></div>
<div class="ttc" id="aTailDuplicator_8cpp_html_addf0b268270efd00e0b70dee396e11b7"><div class="ttname"><a href="TailDuplicator_8cpp.html#addf0b268270efd00e0b70dee396e11b7">TailDupLimit</a></div><div class="ttdeci">static cl::opt&lt; unsigned &gt; TailDupLimit(&quot;tail-dup-limit&quot;, cl::init(~0U), cl::Hidden)</div></div>
<div class="ttc" id="aclassllvm_1_1MachineRegisterInfo_html_a965a15cef77a97f0e17f9f26fd5be53e"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html#a965a15cef77a97f0e17f9f26fd5be53e">llvm::MachineRegisterInfo::setRegClass</a></div><div class="ttdeci">void setRegClass(Register Reg, const TargetRegisterClass *RC)</div><div class="ttdoc">setRegClass - Set the register class of the specified virtual register.</div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8cpp_source.html#l00057">MachineRegisterInfo.cpp:57</a></div></div>
<div class="ttc" id="aSetVector_8h_html"><div class="ttname"><a href="SetVector_8h.html">SetVector.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1TailDuplicator_html_a1b957210a6d62c3fe19410e746fc6ab4"><div class="ttname"><a href="classllvm_1_1TailDuplicator.html#a1b957210a6d62c3fe19410e746fc6ab4">llvm::TailDuplicator::tailDuplicateBlocks</a></div><div class="ttdeci">bool tailDuplicateBlocks()</div><div class="ttdoc">Look for small blocks that are unconditionally branched to and do not fall through.</div><div class="ttdef"><b>Definition:</b> <a href="TailDuplicator_8cpp_source.html#l00270">TailDuplicator.cpp:270</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Aug 7 2023 10:02:06 for LLVM by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>

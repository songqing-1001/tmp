<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LLVM: lib/Transforms/InstCombine/InstCombineCompares.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">LLVM
   &#160;<span id="projectnumber">17.0.0git</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a class="el" href="dir_a72932e0778af28115095468f6286ff8.html">Transforms</a></li><li class="navelem"><a class="el" href="dir_99567d9c0c7f3685f25b19ecc341a865.html">InstCombine</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">InstCombineCompares.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="InstCombineCompares_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//===- InstCombineCompares.cpp --------------------------------------------===//</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">// See https://llvm.org/LICENSE.txt for license information.</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">// This file implements the visitICmp and visitFCmp functions.</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160; </div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="InstCombineInternal_8h.html">InstCombineInternal.h</a>&quot;</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="APSInt_8h.html">llvm/ADT/APSInt.h</a>&quot;</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SetVector_8h.html">llvm/ADT/SetVector.h</a>&quot;</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Statistic_8h.html">llvm/ADT/Statistic.h</a>&quot;</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CmpInstAnalysis_8h.html">llvm/Analysis/CmpInstAnalysis.h</a>&quot;</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ConstantFolding_8h.html">llvm/Analysis/ConstantFolding.h</a>&quot;</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="InstructionSimplify_8h.html">llvm/Analysis/InstructionSimplify.h</a>&quot;</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="VectorUtils_8h.html">llvm/Analysis/VectorUtils.h</a>&quot;</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ConstantRange_8h.html">llvm/IR/ConstantRange.h</a>&quot;</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DataLayout_8h.html">llvm/IR/DataLayout.h</a>&quot;</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="GetElementPtrTypeIterator_8h.html">llvm/IR/GetElementPtrTypeIterator.h</a>&quot;</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="IntrinsicInst_8h.html">llvm/IR/IntrinsicInst.h</a>&quot;</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="PatternMatch_8h.html">llvm/IR/PatternMatch.h</a>&quot;</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="KnownBits_8h.html">llvm/Support/KnownBits.h</a>&quot;</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="InstCombiner_8h.html">llvm/Transforms/InstCombine/InstCombiner.h</a>&quot;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160; </div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespacellvm.html">llvm</a>;</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="keyword">using namespace </span>PatternMatch;</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160; </div>
<div class="line"><a name="l00032"></a><span class="lineno"><a class="line" href="InstCombineCompares_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">   32</a></span>&#160;<span class="preprocessor">#define DEBUG_TYPE &quot;instcombine&quot;</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160; </div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="comment">// How many times is a select replaced by one of its operands?</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(NumSel, <span class="stringliteral">&quot;Number of select opts&quot;</span>);</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160; </div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="comment">/// Compute Result = In1+In2, returning true if the result overflowed for this</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="comment">/// type.</span></div>
<div class="line"><a name="l00040"></a><span class="lineno"><a class="line" href="InstCombineCompares_8cpp.html#a21d115d23f25fa3a2eabb1acaac67444">   40</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="InstCombineCompares_8cpp.html#a21d115d23f25fa3a2eabb1acaac67444">addWithOverflow</a>(<a class="code" href="classllvm_1_1APInt.html">APInt</a> &amp;Result, <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> &amp;In1,</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;                            <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> &amp;In2, <span class="keywordtype">bool</span> IsSigned = <span class="keyword">false</span>) {</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;  <span class="keywordtype">bool</span> Overflow;</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;  <span class="keywordflow">if</span> (IsSigned)</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    Result = In1.<a class="code" href="classllvm_1_1APInt.html#a694293446a074c3d64270e7671bb5052">sadd_ov</a>(In2, Overflow);</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    Result = In1.<a class="code" href="classllvm_1_1APInt.html#a8268fbc3014081004056f6466452c904">uadd_ov</a>(In2, Overflow);</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160; </div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;  <span class="keywordflow">return</span> Overflow;</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;}</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="comment">/// Compute Result = In1-In2, returning true if the result overflowed for this</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="comment">/// type.</span></div>
<div class="line"><a name="l00053"></a><span class="lineno"><a class="line" href="InstCombineCompares_8cpp.html#a9ca0d2b442af6eec7e00bb32d14d44b7">   53</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="InstCombineCompares_8cpp.html#a9ca0d2b442af6eec7e00bb32d14d44b7">subWithOverflow</a>(<a class="code" href="classllvm_1_1APInt.html">APInt</a> &amp;Result, <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> &amp;In1,</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;                            <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> &amp;In2, <span class="keywordtype">bool</span> IsSigned = <span class="keyword">false</span>) {</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;  <span class="keywordtype">bool</span> Overflow;</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;  <span class="keywordflow">if</span> (IsSigned)</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    Result = In1.<a class="code" href="classllvm_1_1APInt.html#ae324de5041feaf7eb8433221cdaca9aa">ssub_ov</a>(In2, Overflow);</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    Result = In1.<a class="code" href="classllvm_1_1APInt.html#a44d622af4cca05108d8d7eb9bfd79977">usub_ov</a>(In2, Overflow);</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160; </div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;  <span class="keywordflow">return</span> Overflow;</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;}</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="comment">/// Given an icmp instruction, return true if any use of this comparison is a</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="comment">/// branch on sign bit comparison.</span></div>
<div class="line"><a name="l00066"></a><span class="lineno"><a class="line" href="InstCombineCompares_8cpp.html#a4c4d096b05846dc75914e02cbe37a805">   66</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="InstCombineCompares_8cpp.html#a4c4d096b05846dc75914e02cbe37a805">hasBranchUse</a>(<a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> *U : <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.users())</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    <span class="keywordflow">if</span> (isa&lt;BranchInst&gt;(U))</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;}</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="comment">/// Returns true if the exploded icmp can be expressed as a signed comparison</span></div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="comment">/// to zero and updates the predicate accordingly.</span></div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="comment">/// The signedness of the comparison is preserved.</span></div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="comment">/// TODO: Refactor with decomposeBitTestICmp()?</span></div>
<div class="line"><a name="l00077"></a><span class="lineno"><a class="line" href="InstCombineCompares_8cpp.html#ab8102f1d2d3e331db1f1781055e61013">   77</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="InstCombineCompares_8cpp.html#ab8102f1d2d3e331db1f1781055e61013">isSignTest</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">ICmpInst::Predicate</a> &amp;Pred, <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> &amp;<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>) {</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classllvm_1_1CmpInst.html#a3712279d70deeec90a93db09deb12d02">ICmpInst::isSigned</a>(Pred))</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160; </div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.isZero())</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1ICmpInst.html#ae955171baab3d9254f3ffb089c082206">ICmpInst::isRelational</a>(Pred);</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160; </div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.isOne()) {</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    <span class="keywordflow">if</span> (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba15ae464950ac676919c2f0c7aafc706c">ICmpInst::ICMP_SLT</a>) {</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;      Pred = <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba2751d6136a2819749dcef65dc19a4246">ICmpInst::ICMP_SLE</a>;</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    }</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.isAllOnes()) {</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    <span class="keywordflow">if</span> (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba720a42e85f7e981afd61e28473b0000a">ICmpInst::ICMP_SGT</a>) {</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;      Pred = <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac1aa7b798ba11d2e497d5cce6ce6d3dc">ICmpInst::ICMP_SGE</a>;</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    }</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;  }</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160; </div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;}</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="comment">/// This is called when we see this pattern:</span></div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;<span class="comment">///   cmp pred (load (gep GV, ...)), cmpcst</span></div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;<span class="comment">/// where GV is a global variable with a constant initializer. Try to simplify</span></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;<span class="comment">/// this into some simple computation that does not need the load. For example</span></div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="comment">/// we can optimize &quot;icmp eq (load (gep &quot;foo&quot;, 0, i)), 0&quot; into &quot;icmp eq i, 3&quot;.</span></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="comment">/// If AndCst is non-null, then the loaded value is masked with that constant</span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="comment">/// before doing the comparison. This handles cases like &quot;A[i]&amp;4 == 0&quot;.</span></div>
<div class="line"><a name="l00107"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombinerImpl.html#a866883cec7ed781fcf1e9cda18b24f5b">  107</a></span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombinerImpl.html#a866883cec7ed781fcf1e9cda18b24f5b">InstCombinerImpl::foldCmpLoadFromIndexedGlobal</a>(</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    <a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a> *LI, <a class="code" href="classllvm_1_1GetElementPtrInst.html">GetElementPtrInst</a> *<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>, <a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a> *GV, <a class="code" href="classllvm_1_1CmpInst.html">CmpInst</a> &amp;ICI,</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *AndCst) {</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;  <span class="keywordflow">if</span> (LI-&gt;<a class="code" href="classllvm_1_1LoadInst.html#a2eccc19f9061eeb7ad1e30e21f76034d">isVolatile</a>() || LI-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>() != <a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>-&gt;getResultElementType() ||</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;      GV-&gt;<a class="code" href="classllvm_1_1GlobalValue.html#a29e0b1c558b350347e2652b35b26fea8">getValueType</a>() != <a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>-&gt;getSourceElementType() ||</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;      !GV-&gt;<a class="code" href="classllvm_1_1GlobalVariable.html#aa859e108741fa64681b63f0c0c672512">isConstant</a>() || !GV-&gt;<a class="code" href="classllvm_1_1GlobalVariable.html#aec2d700d8b1e57f830a673c39a1f30dc">hasDefinitiveInitializer</a>())</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160; </div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="classllvm_1_1Init.html">Init</a> = GV-&gt;<a class="code" href="classllvm_1_1GlobalVariable.html#a0e5946885029c1bce1350d34f2539b1b">getInitializer</a>();</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;  <span class="keywordflow">if</span> (!isa&lt;ConstantArray&gt;(<a class="code" href="classllvm_1_1Init.html">Init</a>) &amp;&amp; !isa&lt;ConstantDataArray&gt;(<a class="code" href="classllvm_1_1Init.html">Init</a>))</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160; </div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;  <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> ArrayElementCount = <a class="code" href="classllvm_1_1Init.html">Init</a>-&gt;getType()-&gt;getArrayNumElements();</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;  <span class="comment">// Don&#39;t blow up on huge arrays.</span></div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;  <span class="keywordflow">if</span> (ArrayElementCount &gt; MaxArraySizeForCombine)</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160; </div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;  <span class="comment">// There are many forms of this optimization we can handle, for now, just do</span></div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;  <span class="comment">// the simple index into a single-dimensional array.</span></div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;  <span class="comment">// Require: GEP GV, 0, i {{, constant indices}}</span></div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>-&gt;getNumOperands() &lt; 3 ||</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;      !isa&lt;ConstantInt&gt;(<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>-&gt;getOperand(1)) ||</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;      !cast&lt;ConstantInt&gt;(<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>-&gt;getOperand(1))-&gt;isZero() ||</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;      isa&lt;Constant&gt;(<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>-&gt;getOperand(2)))</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160; </div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;  <span class="comment">// Check that indices after the variable are constants and in-range for the</span></div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;  <span class="comment">// type they index.  Collect the indices.  This is typically for arrays of</span></div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;  <span class="comment">// structs.</span></div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;unsigned, 4&gt;</a> LaterIndices;</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160; </div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *EltTy = <a class="code" href="classllvm_1_1Init.html">Init</a>-&gt;getType()-&gt;getArrayElementType();</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 3, <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a> = <a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>-&gt;getNumOperands(); <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a>; ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *Idx = dyn_cast&lt;ConstantInt&gt;(<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>-&gt;getOperand(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>));</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    <span class="keywordflow">if</span> (!Idx) <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;  <span class="comment">// Variable index.</span></div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160; </div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> IdxVal = Idx-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#ac09a21c371a9c535cbc13e8f82503aec">getZExtValue</a>();</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    <span class="keywordflow">if</span> ((<span class="keywordtype">unsigned</span>)IdxVal != IdxVal) <span class="keywordflow">return</span> <span class="keyword">nullptr</span>; <span class="comment">// Too large array index.</span></div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160; </div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1StructType.html">StructType</a> *STy = dyn_cast&lt;StructType&gt;(EltTy))</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;      EltTy = STy-&gt;getElementType(IdxVal);</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ArrayType.html">ArrayType</a> *ATy = dyn_cast&lt;ArrayType&gt;(EltTy)) {</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;      <span class="keywordflow">if</span> (IdxVal &gt;= ATy-&gt;getNumElements()) <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;      EltTy = ATy-&gt;getElementType();</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>; <span class="comment">// Unknown type.</span></div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    }</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160; </div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    LaterIndices.push_back(IdxVal);</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;  }</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160; </div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;  <span class="keyword">enum</span> { Overdefined = -3, Undefined = -2 };</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160; </div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;  <span class="comment">// Variables for our state machines.</span></div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160; </div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;  <span class="comment">// FirstTrueElement/SecondTrueElement - Used to emit a comparison of the form</span></div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;  <span class="comment">// &quot;i == 47 | i == 87&quot;, where 47 is the first index the condition is true for,</span></div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;  <span class="comment">// and 87 is the second (and last) index.  FirstTrueElement is -2 when</span></div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;  <span class="comment">// undefined, otherwise set to the first true element.  SecondTrueElement is</span></div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;  <span class="comment">// -2 when undefined, -3 when overdefined and &gt;= 0 when that index is true.</span></div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;  <span class="keywordtype">int</span> FirstTrueElement = Undefined, SecondTrueElement = Undefined;</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160; </div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;  <span class="comment">// FirstFalseElement/SecondFalseElement - Used to emit a comparison of the</span></div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;  <span class="comment">// form &quot;i != 47 &amp; i != 87&quot;.  Same state transitions as for true elements.</span></div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;  <span class="keywordtype">int</span> FirstFalseElement = Undefined, SecondFalseElement = Undefined;</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;<span class="comment">  /// TrueRangeEnd/FalseRangeEnd - In conjunction with First*Element, these</span></div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;<span class="comment">  /// define a state machine that triggers for ranges of values that the index</span></div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;<span class="comment">  /// is true or false for.  This triggers on things like &quot;abbbbc&quot;[i] == &#39;b&#39;.</span></div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;<span class="comment">  /// This is -2 when undefined, -3 when overdefined, and otherwise the last</span></div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;<span class="comment">  /// index in the range (inclusive).  We use -2 for undefined here because we</span></div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;<span class="comment">  /// use relative comparisons and don&#39;t want 0-1 to match -1.</span></div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;<span class="comment"></span>  <span class="keywordtype">int</span> TrueRangeEnd = Undefined, FalseRangeEnd = Undefined;</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160; </div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;  <span class="comment">// MagicBitvector - This is a magic bitvector where we set a bit if the</span></div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;  <span class="comment">// comparison is true for element &#39;i&#39;.  If there are 64 elements or less in</span></div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;  <span class="comment">// the array, this will fully represent all the comparison results.</span></div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;  <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> MagicBitvector = 0;</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160; </div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;  <span class="comment">// Scan the array and see if one of our patterns matches.</span></div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *CompareRHS = cast&lt;Constant&gt;(ICI.<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(1));</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a> = ArrayElementCount; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a>; ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    <a class="code" href="classllvm_1_1Constant.html">Constant</a> *Elt = <a class="code" href="classllvm_1_1Init.html">Init</a>-&gt;getAggregateElement(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    <span class="keywordflow">if</span> (!Elt) <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160; </div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    <span class="comment">// If this is indexing an array of structures, get the structure element.</span></div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    <span class="keywordflow">if</span> (!LaterIndices.empty()) {</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;      Elt = <a class="code" href="namespacellvm.html#a557be4c1daf6eb2611b214f927dccee2">ConstantFoldExtractValueInstruction</a>(Elt, LaterIndices);</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;      <span class="keywordflow">if</span> (!Elt)</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    }</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160; </div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    <span class="comment">// If the element is masked, handle it.</span></div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    <span class="keywordflow">if</span> (AndCst) Elt = <a class="code" href="classllvm_1_1ConstantExpr.html#ae6d2fbefb704650e3b01a0bbcdd43ffa">ConstantExpr::getAnd</a>(Elt, AndCst);</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160; </div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    <span class="comment">// Find out if the comparison would be true or false for the i&#39;th element.</span></div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    <a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = <a class="code" href="namespacellvm.html#a3cd3a3ec28036937ecebe767498ba55d">ConstantFoldCompareInstOperands</a>(ICI.<a class="code" href="classllvm_1_1CmpInst.html#aa7414ba9f658ff1287d22a4b8fe81bcb">getPredicate</a>(), Elt,</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;                                                  CompareRHS, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, &amp;TLI);</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    <span class="comment">// If the result is undef for this element, ignore it.</span></div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    <span class="keywordflow">if</span> (isa&lt;UndefValue&gt;(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)) {</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;      <span class="comment">// Extend range state machines to cover this element in case there is an</span></div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;      <span class="comment">// undef in the middle of the range.</span></div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;      <span class="keywordflow">if</span> (TrueRangeEnd == (<span class="keywordtype">int</span>)<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>-1)</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;        TrueRangeEnd = <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;      <span class="keywordflow">if</span> (FalseRangeEnd == (<span class="keywordtype">int</span>)<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>-1)</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;        FalseRangeEnd = <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    }</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160; </div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    <span class="comment">// If we can&#39;t compute the result for any of the elements, we have to give</span></div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    <span class="comment">// up evaluating the entire conditional.</span></div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    <span class="keywordflow">if</span> (!isa&lt;ConstantInt&gt;(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)) <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160; </div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    <span class="comment">// Otherwise, we know if the comparison is true or false for this element,</span></div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    <span class="comment">// update our state machines.</span></div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    <span class="keywordtype">bool</span> IsTrueForElt = !cast&lt;ConstantInt&gt;(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)-&gt;isZero();</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160; </div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    <span class="comment">// State machine for single/double/range index comparison.</span></div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    <span class="keywordflow">if</span> (IsTrueForElt) {</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;      <span class="comment">// Update the TrueElement state machine.</span></div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;      <span class="keywordflow">if</span> (FirstTrueElement == Undefined)</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;        FirstTrueElement = TrueRangeEnd = <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>;  <span class="comment">// First true element.</span></div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;      <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;        <span class="comment">// Update double-compare state machine.</span></div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;        <span class="keywordflow">if</span> (SecondTrueElement == Undefined)</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;          SecondTrueElement = <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;          SecondTrueElement = Overdefined;</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160; </div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;        <span class="comment">// Update range state machine.</span></div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;        <span class="keywordflow">if</span> (TrueRangeEnd == (<span class="keywordtype">int</span>)<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>-1)</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;          TrueRangeEnd = <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;          TrueRangeEnd = Overdefined;</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;      }</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;      <span class="comment">// Update the FalseElement state machine.</span></div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;      <span class="keywordflow">if</span> (FirstFalseElement == Undefined)</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;        FirstFalseElement = FalseRangeEnd = <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>; <span class="comment">// First false element.</span></div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;      <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;        <span class="comment">// Update double-compare state machine.</span></div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;        <span class="keywordflow">if</span> (SecondFalseElement == Undefined)</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;          SecondFalseElement = <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;          SecondFalseElement = Overdefined;</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160; </div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;        <span class="comment">// Update range state machine.</span></div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;        <span class="keywordflow">if</span> (FalseRangeEnd == (<span class="keywordtype">int</span>)<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>-1)</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;          FalseRangeEnd = <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;          FalseRangeEnd = Overdefined;</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;      }</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    }</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160; </div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    <span class="comment">// If this element is in range, update our magic bitvector.</span></div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 64 &amp;&amp; IsTrueForElt)</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;      MagicBitvector |= 1ULL &lt;&lt; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160; </div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    <span class="comment">// If all of our states become overdefined, bail out early.  Since the</span></div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    <span class="comment">// predicate is expensive, only check it every 8 elements.  This is only</span></div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    <span class="comment">// really useful for really huge arrays.</span></div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    <span class="keywordflow">if</span> ((<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &amp; 8) == 0 &amp;&amp; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &gt;= 64 &amp;&amp; SecondTrueElement == Overdefined &amp;&amp;</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;        SecondFalseElement == Overdefined &amp;&amp; TrueRangeEnd == Overdefined &amp;&amp;</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;        FalseRangeEnd == Overdefined)</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;  }</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160; </div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;  <span class="comment">// Now that we&#39;ve scanned the entire array, emit our new comparison(s).  We</span></div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;  <span class="comment">// order the state machines in complexity of the generated code.</span></div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Idx = <a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>-&gt;getOperand(2);</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160; </div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;  <span class="comment">// If the index is larger than the pointer size of the target, truncate the</span></div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;  <span class="comment">// index down like the GEP would do implicitly.  We don&#39;t have to do this for</span></div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;  <span class="comment">// an inbounds GEP because the index can&#39;t be out of range.</span></div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>-&gt;isInBounds()) {</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *IntPtrTy = <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getIntPtrType(<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>-&gt;getType());</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    <span class="keywordtype">unsigned</span> PtrSize = IntPtrTy-&gt;<a class="code" href="classllvm_1_1Type.html#a13e877ef779ba7a0688081079f4f9b03">getIntegerBitWidth</a>();</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    <span class="keywordflow">if</span> (Idx-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a833daf718a49c5cd637d8c9ddeaebe07">getPrimitiveSizeInBits</a>().<a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#a33880aaca0ad05e5f1557f079305bde5">getFixedValue</a>() &gt; PtrSize)</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;      Idx = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateTrunc(Idx, IntPtrTy);</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;  }</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160; </div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;  <span class="comment">// If inbounds keyword is not present, Idx * ElementSize can overflow.</span></div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;  <span class="comment">// Let&#39;s assume that ElementSize is 2 and the wanted value is at offset 0.</span></div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;  <span class="comment">// Then, there are two possible values for Idx to match offset 0:</span></div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;  <span class="comment">// 0x00..00, 0x80..00.</span></div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;  <span class="comment">// Emitting &#39;icmp eq Idx, 0&#39; isn&#39;t correct in this case because the</span></div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;  <span class="comment">// comparison is false if Idx was 0x80..00.</span></div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;  <span class="comment">// We need to erase the highest countTrailingZeros(ElementSize) bits of Idx.</span></div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;  <span class="keywordtype">unsigned</span> ElementSize =</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;      <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getTypeAllocSize(<a class="code" href="classllvm_1_1Init.html">Init</a>-&gt;getType()-&gt;getArrayElementType());</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;  <span class="keyword">auto</span> MaskIdx = [&amp;](<a class="code" href="classllvm_1_1Value.html">Value</a> *Idx) {</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>-&gt;isInBounds() &amp;&amp; <a class="code" href="namespacellvm.html#a57d2f9ee99e9e68cff564d0d579c8163">llvm::countr_zero</a>(ElementSize) != 0) {</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a> = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Idx-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>(), -1);</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;      <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateLShr(<a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a>, <a class="code" href="namespacellvm.html#a57d2f9ee99e9e68cff564d0d579c8163">llvm::countr_zero</a>(ElementSize));</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;      Idx = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAnd(Idx, <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a>);</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    }</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    <span class="keywordflow">return</span> Idx;</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;  };</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160; </div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;  <span class="comment">// If the comparison is only true for one or two elements, emit direct</span></div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;  <span class="comment">// comparisons.</span></div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;  <span class="keywordflow">if</span> (SecondTrueElement != Overdefined) {</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    Idx = MaskIdx(Idx);</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    <span class="comment">// None true -&gt; false.</span></div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    <span class="keywordflow">if</span> (FirstTrueElement == Undefined)</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;      <span class="keywordflow">return</span> replaceInstUsesWith(ICI, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getFalse());</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160; </div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *FirstTrueIdx = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Idx-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>(), FirstTrueElement);</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160; </div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    <span class="comment">// True for one element -&gt; &#39;i == 47&#39;.</span></div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    <span class="keywordflow">if</span> (SecondTrueElement == Undefined)</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a>, Idx, FirstTrueIdx);</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160; </div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    <span class="comment">// True for two elements -&gt; &#39;i == 47 | i == 72&#39;.</span></div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateICmpEQ(Idx, FirstTrueIdx);</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *SecondTrueIdx = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Idx-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>(), SecondTrueElement);</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *C2 = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateICmpEQ(Idx, SecondTrueIdx);</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    <span class="keywordflow">return</span> BinaryOperator::CreateOr(<a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>, C2);</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;  }</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160; </div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;  <span class="comment">// If the comparison is only false for one or two elements, emit direct</span></div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;  <span class="comment">// comparisons.</span></div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;  <span class="keywordflow">if</span> (SecondFalseElement != Overdefined) {</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    Idx = MaskIdx(Idx);</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    <span class="comment">// None false -&gt; true.</span></div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    <span class="keywordflow">if</span> (FirstFalseElement == Undefined)</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;      <span class="keywordflow">return</span> replaceInstUsesWith(ICI, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getTrue());</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160; </div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *FirstFalseIdx = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Idx-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>(), FirstFalseElement);</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160; </div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    <span class="comment">// False for one element -&gt; &#39;i != 47&#39;.</span></div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    <span class="keywordflow">if</span> (SecondFalseElement == Undefined)</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a>, Idx, FirstFalseIdx);</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160; </div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    <span class="comment">// False for two elements -&gt; &#39;i != 47 &amp; i != 72&#39;.</span></div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateICmpNE(Idx, FirstFalseIdx);</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *SecondFalseIdx = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Idx-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>(),SecondFalseElement);</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *C2 = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateICmpNE(Idx, SecondFalseIdx);</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    <span class="keywordflow">return</span> BinaryOperator::CreateAnd(<a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>, C2);</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;  }</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160; </div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;  <span class="comment">// If the comparison can be replaced with a range comparison for the elements</span></div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;  <span class="comment">// where it is true, emit the range check.</span></div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;  <span class="keywordflow">if</span> (TrueRangeEnd != Overdefined) {</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(TrueRangeEnd != FirstTrueElement &amp;&amp; <span class="stringliteral">&quot;Should emit single compare&quot;</span>);</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    Idx = MaskIdx(Idx);</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160; </div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    <span class="comment">// Generate (i-FirstTrue) &lt;u (TrueRangeEnd-FirstTrue+1).</span></div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    <span class="keywordflow">if</span> (FirstTrueElement) {</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *Offs = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Idx-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>(), -FirstTrueElement);</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;      Idx = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAdd(Idx, Offs);</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    }</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160; </div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *End = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Idx-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>(),</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;                                  TrueRangeEnd-FirstTrueElement+1);</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e">ICmpInst::ICMP_ULT</a>, Idx, End);</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;  }</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160; </div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;  <span class="comment">// False range check.</span></div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;  <span class="keywordflow">if</span> (FalseRangeEnd != Overdefined) {</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(FalseRangeEnd != FirstFalseElement &amp;&amp; <span class="stringliteral">&quot;Should emit single compare&quot;</span>);</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    Idx = MaskIdx(Idx);</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;    <span class="comment">// Generate (i-FirstFalse) &gt;u (FalseRangeEnd-FirstFalse).</span></div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    <span class="keywordflow">if</span> (FirstFalseElement) {</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *Offs = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Idx-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>(), -FirstFalseElement);</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;      Idx = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAdd(Idx, Offs);</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    }</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160; </div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *End = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Idx-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>(),</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;                                  FalseRangeEnd-FirstFalseElement);</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba607cecdc5172814382033e001ed11fad">ICmpInst::ICMP_UGT</a>, Idx, End);</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;  }</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160; </div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;  <span class="comment">// If a magic bitvector captures the entire comparison state</span></div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;  <span class="comment">// of this load, replace it with computation that does:</span></div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;  <span class="comment">//   ((magic_cst &gt;&gt; i) &amp; 1) != 0</span></div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;  {</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *Ty = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160; </div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    <span class="comment">// Look for an appropriate type:</span></div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    <span class="comment">// - The type of Idx if the magic fits</span></div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    <span class="comment">// - The smallest fitting legal type</span></div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;    <span class="keywordflow">if</span> (ArrayElementCount &lt;= Idx-&gt;<a class="code" href="M68kELFObjectWriter_8cpp.html#ae4a8bc3879d2282eefd72b16b12c2a37">getType</a>()-&gt;getIntegerBitWidth())</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;      Ty = Idx-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>();</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;      Ty = <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getSmallestLegalIntType(<a class="code" href="classllvm_1_1Init.html">Init</a>-&gt;getContext(), ArrayElementCount);</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160; </div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    <span class="keywordflow">if</span> (Ty) {</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;      Idx = MaskIdx(Idx);</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *V = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateIntCast(Idx, Ty, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;      V = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateLShr(<a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Ty, MagicBitvector), V);</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;      V = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAnd(<a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Ty, 1), V);</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a>, V, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Ty, 0));</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    }</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;  }</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160; </div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;}</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;<span class="comment">/// Returns true if we can rewrite Start as a GEP with pointer Base</span></div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;<span class="comment">/// and some integer offset. The nodes that need to be re-written</span></div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;<span class="comment">/// for this transformation will be added to Explored.</span></div>
<div class="line"><a name="l00410"></a><span class="lineno"><a class="line" href="InstCombineCompares_8cpp.html#aa0ff2e37cf366df0d46226a21431a47a">  410</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="InstCombineCompares_8cpp.html#aa0ff2e37cf366df0d46226a21431a47a">canRewriteGEPAsOffset</a>(<a class="code" href="classllvm_1_1Type.html">Type</a> *ElemTy, <a class="code" href="classllvm_1_1Value.html">Value</a> *Start, <a class="code" href="classllvm_1_1Value.html">Value</a> *Base,</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;                                  <span class="keyword">const</span> <a class="code" href="classllvm_1_1DataLayout.html">DataLayout</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>,</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;                                  <a class="code" href="classllvm_1_1SetVector.html">SetVector&lt;Value *&gt;</a> &amp;Explored) {</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Value *, 16&gt;</a> WorkList(1, Start);</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;  Explored.<a class="code" href="classllvm_1_1SetVector.html#a72d928b7fc2c5f2d56c6ac0265fd9c6e">insert</a>(<a class="code" href="namespacellvm_1_1sampleprof.html#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">Base</a>);</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160; </div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;  <span class="comment">// The following traversal gives us an order which can be used</span></div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;  <span class="comment">// when doing the final transformation. Since in the final</span></div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;  <span class="comment">// transformation we create the PHI replacement instructions first,</span></div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;  <span class="comment">// we don&#39;t have to get them in any particular order.</span></div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;  <span class="comment">// However, for other instructions we will have to traverse the</span></div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;  <span class="comment">// operands of an instruction first, which means that we have to</span></div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;  <span class="comment">// do a post-order traversal.</span></div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;  <span class="keywordflow">while</span> (!WorkList.empty()) {</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    <a class="code" href="classllvm_1_1SetVector.html">SetVector&lt;PHINode *&gt;</a> PHIs;</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160; </div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    <span class="keywordflow">while</span> (!WorkList.empty()) {</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;      <span class="keywordflow">if</span> (Explored.<a class="code" href="classllvm_1_1SetVector.html#a18b9d328d2490f447589ba60345eba6e">size</a>() &gt;= 100)</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160; </div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *V = WorkList.back();</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160; </div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;      <span class="keywordflow">if</span> (Explored.<a class="code" href="classllvm_1_1SetVector.html#a51469ab7f147668678a486661b02ae59">contains</a>(V)) {</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;        WorkList.pop_back();</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;      }</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160; </div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;      <span class="keywordflow">if</span> (!isa&lt;IntToPtrInst&gt;(V) &amp;&amp; !isa&lt;PtrToIntInst&gt;(V) &amp;&amp;</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;          !isa&lt;GetElementPtrInst&gt;(V) &amp;&amp; !isa&lt;PHINode&gt;(V))</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;        <span class="comment">// We&#39;ve found some value that we can&#39;t explore which is different from</span></div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;        <span class="comment">// the base. Therefore we can&#39;t do this transformation.</span></div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160; </div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;      <span class="keywordflow">if</span> (isa&lt;IntToPtrInst&gt;(V) || isa&lt;PtrToIntInst&gt;(V)) {</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;        <span class="keyword">auto</span> *CI = cast&lt;CastInst&gt;(V);</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;        <span class="keywordflow">if</span> (!CI-&gt;isNoopCast(<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>))</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160; </div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;        <span class="keywordflow">if</span> (!Explored.<a class="code" href="classllvm_1_1SetVector.html#a51469ab7f147668678a486661b02ae59">contains</a>(CI-&gt;getOperand(0)))</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;          WorkList.push_back(CI-&gt;getOperand(0));</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;      }</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160; </div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> *<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a> = dyn_cast&lt;GEPOperator&gt;(V)) {</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;        <span class="comment">// We&#39;re limiting the GEP to having one index. This will preserve</span></div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;        <span class="comment">// the original pointer type. We could handle more cases in the</span></div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;        <span class="comment">// future.</span></div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>-&gt;getNumIndices() != 1 || !<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>-&gt;isInBounds() ||</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;            <a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>-&gt;getSourceElementType() != ElemTy)</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160; </div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;        <span class="keywordflow">if</span> (!Explored.<a class="code" href="classllvm_1_1SetVector.html#a51469ab7f147668678a486661b02ae59">contains</a>(<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>-&gt;getOperand(0)))</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;          WorkList.push_back(<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>-&gt;getOperand(0));</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;      }</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160; </div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;      <span class="keywordflow">if</span> (WorkList.back() == V) {</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;        WorkList.pop_back();</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;        <span class="comment">// We&#39;ve finished visiting this node, mark it as such.</span></div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;        Explored.<a class="code" href="classllvm_1_1SetVector.html#a72d928b7fc2c5f2d56c6ac0265fd9c6e">insert</a>(V);</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;      }</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160; </div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> *PN = dyn_cast&lt;PHINode&gt;(V)) {</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;        <span class="comment">// We cannot transform PHIs on unsplittable basic blocks.</span></div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;        <span class="keywordflow">if</span> (isa&lt;CatchSwitchInst&gt;(PN-&gt;getParent()-&gt;getTerminator()))</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;        Explored.<a class="code" href="classllvm_1_1SetVector.html#a72d928b7fc2c5f2d56c6ac0265fd9c6e">insert</a>(PN);</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;        PHIs.<a class="code" href="classllvm_1_1SetVector.html#a72d928b7fc2c5f2d56c6ac0265fd9c6e">insert</a>(PN);</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;      }</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;    }</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160; </div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;    <span class="comment">// Explore the PHI nodes further.</span></div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> *PN : PHIs)</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a> : PN-&gt;incoming_values())</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;        <span class="keywordflow">if</span> (!Explored.<a class="code" href="classllvm_1_1SetVector.html#a51469ab7f147668678a486661b02ae59">contains</a>(<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>))</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;          WorkList.push_back(<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>);</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;  }</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160; </div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;  <span class="comment">// Make sure that we can do this. Since we can&#39;t insert GEPs in a basic</span></div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;  <span class="comment">// block before a PHI node, we can&#39;t easily do this transformation if</span></div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;  <span class="comment">// we have PHI node users of transformed instructions.</span></div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *Val : Explored) {</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="classllvm_1_1Use.html">Use</a> : Val-&gt;<a class="code" href="classllvm_1_1Value.html#aecb93439702247fe5353a9966f7cefcd">uses</a>()) {</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160; </div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;      <span class="keyword">auto</span> *<a class="code" href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">PHI</a> = dyn_cast&lt;PHINode&gt;(<a class="code" href="classllvm_1_1Use.html">Use</a>);</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;      <span class="keyword">auto</span> *Inst = dyn_cast&lt;Instruction&gt;(Val);</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160; </div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;      <span class="keywordflow">if</span> (Inst == <a class="code" href="namespacellvm_1_1sampleprof.html#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">Base</a> || Inst == <a class="code" href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">PHI</a> || !Inst || !<a class="code" href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">PHI</a> ||</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;          !Explored.contains(<a class="code" href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">PHI</a>))</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160; </div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">PHI</a>-&gt;getParent() == Inst-&gt;getParent())</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    }</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;  }</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;}</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160; </div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;<span class="comment">// Sets the appropriate insert point on Builder where we can add</span></div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;<span class="comment">// a replacement Instruction for V (if that is possible).</span></div>
<div class="line"><a name="l00509"></a><span class="lineno"><a class="line" href="InstCombineCompares_8cpp.html#ac8e72cc39ee52ef30175aa8278cd0dfc">  509</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="InstCombineCompares_8cpp.html#ac8e72cc39ee52ef30175aa8278cd0dfc">setInsertionPoint</a>(<a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> &amp;<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>, <a class="code" href="classllvm_1_1Value.html">Value</a> *V,</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;                              <span class="keywordtype">bool</span> Before = <span class="keyword">true</span>) {</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *<a class="code" href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">PHI</a> = dyn_cast&lt;PHINode&gt;(V)) {</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;    <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(&amp;*<a class="code" href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">PHI</a>-&gt;getParent()-&gt;getFirstInsertionPt());</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;  }</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = dyn_cast&lt;Instruction&gt;(V)) {</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;    <span class="keywordflow">if</span> (!Before)</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;      <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = &amp;*std::next(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getIterator());</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;    <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;  }</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *A = dyn_cast&lt;Argument&gt;(V)) {</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;    <span class="comment">// Set the insertion point in the entry block.</span></div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> &amp;Entry = A-&gt;getParent()-&gt;getEntryBlock();</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;    <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(&amp;*Entry.getFirstInsertionPt());</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;  }</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;  <span class="comment">// Otherwise, this is a constant and we don&#39;t need to set a new</span></div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;  <span class="comment">// insertion point.</span></div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(isa&lt;Constant&gt;(V) &amp;&amp; <span class="stringliteral">&quot;Setting insertion point for unknown value!&quot;</span>);</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;}</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;<span class="comment">/// Returns a re-written value of Start as an indexed GEP using Base as a</span></div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;<span class="comment">/// pointer.</span></div>
<div class="line"><a name="l00534"></a><span class="lineno"><a class="line" href="InstCombineCompares_8cpp.html#aedc1445e8c8e04ab10190855f6393813">  534</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="InstCombineCompares_8cpp.html#aedc1445e8c8e04ab10190855f6393813">rewriteGEPAsOffset</a>(<a class="code" href="classllvm_1_1Type.html">Type</a> *ElemTy, <a class="code" href="classllvm_1_1Value.html">Value</a> *Start, <a class="code" href="classllvm_1_1Value.html">Value</a> *Base,</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;                                 <span class="keyword">const</span> <a class="code" href="classllvm_1_1DataLayout.html">DataLayout</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>,</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;                                 <a class="code" href="classllvm_1_1SetVector.html">SetVector&lt;Value *&gt;</a> &amp;Explored) {</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;  <span class="comment">// Perform all the substitutions. This is a bit tricky because we can</span></div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;  <span class="comment">// have cycles in our use-def chains.</span></div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;  <span class="comment">// 1. Create the PHI nodes without any incoming values.</span></div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;  <span class="comment">// 2. Create all the other values.</span></div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;  <span class="comment">// 3. Add the edges for the PHI nodes.</span></div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;  <span class="comment">// 4. Emit GEPs to get the original pointers.</span></div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;  <span class="comment">// 5. Remove the original instructions.</span></div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *IndexType = <a class="code" href="classllvm_1_1IntegerType.html#a14f7b4f1aed38192fb6b7772eb506bdb">IntegerType::get</a>(</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;      <a class="code" href="namespacellvm_1_1sampleprof.html#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">Base</a>-&gt;getContext(), <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getIndexTypeSizeInBits(Start-&gt;getType()));</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160; </div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;  <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;Value *, Value *&gt;</a> NewInsts;</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;  NewInsts[<a class="code" href="namespacellvm_1_1sampleprof.html#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">Base</a>] = <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">ConstantInt::getNullValue</a>(IndexType);</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160; </div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;  <span class="comment">// Create the new PHI nodes, without adding any incoming values.</span></div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *Val : Explored) {</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;    <span class="keywordflow">if</span> (Val == <a class="code" href="namespacellvm_1_1sampleprof.html#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">Base</a>)</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;    <span class="comment">// Create empty phi nodes. This avoids cyclic dependencies when creating</span></div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;    <span class="comment">// the remaining instructions.</span></div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> *<a class="code" href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">PHI</a> = dyn_cast&lt;PHINode&gt;(Val))</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;      NewInsts[<a class="code" href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">PHI</a>] = <a class="code" href="classllvm_1_1PHINode.html#ab0ff669b12c20c07137705c38872ec63">PHINode::Create</a>(IndexType, <a class="code" href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">PHI</a>-&gt;getNumIncomingValues(),</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;                                      <a class="code" href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">PHI</a>-&gt;getName() + <span class="stringliteral">&quot;.idx&quot;</span>, <a class="code" href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">PHI</a>);</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;  }</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;  <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>(<a class="code" href="namespacellvm_1_1sampleprof.html#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">Base</a>-&gt;getContext());</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160; </div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;  <span class="comment">// Create all the other instructions.</span></div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *Val : Explored) {</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160; </div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;    <span class="keywordflow">if</span> (NewInsts.<a class="code" href="classllvm_1_1DenseMapBase.html#a0c047f127ed4380a6f383d70bec4eb94">find</a>(Val) != NewInsts.<a class="code" href="classllvm_1_1DenseMapBase.html#a65520b9c67759099e313d0f4e7b5ff9e">end</a>())</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160; </div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> *CI = dyn_cast&lt;CastInst&gt;(Val)) {</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;      <span class="comment">// Don&#39;t get rid of the intermediate variable here; the store can grow</span></div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;      <span class="comment">// the map which will invalidate the reference to the input value.</span></div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *V = NewInsts[CI-&gt;getOperand(0)];</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;      NewInsts[CI] = V;</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;    }</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> *<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a> = dyn_cast&lt;GEPOperator&gt;(Val)) {</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a> = NewInsts[<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>-&gt;getOperand(1)] ? NewInsts[<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>-&gt;getOperand(1)]</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;                                                  : <a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>-&gt;getOperand(1);</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;      <a class="code" href="InstCombineCompares_8cpp.html#ac8e72cc39ee52ef30175aa8278cd0dfc">setInsertionPoint</a>(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>, <a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>);</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;      <span class="comment">// Indices might need to be sign extended. GEPs will magically do</span></div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;      <span class="comment">// this, but we need to do it ourselves here.</span></div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a>-&gt;getType()-&gt;getScalarSizeInBits() !=</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;          NewInsts[<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>-&gt;getOperand(0)]-&gt;getType()-&gt;getScalarSizeInBits()) {</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;        <a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateSExtOrTrunc(</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;            <a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a>, NewInsts[<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>-&gt;getOperand(0)]-&gt;getType(),</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;            <a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>-&gt;getOperand(0)-&gt;getName() + <span class="stringliteral">&quot;.sext&quot;</span>);</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;      }</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160; </div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;      <span class="keyword">auto</span> *<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a> = NewInsts[<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>-&gt;getOperand(0)];</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;      <span class="keywordflow">if</span> (isa&lt;ConstantInt&gt;(<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>) &amp;&amp; cast&lt;ConstantInt&gt;(<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>)-&gt;<a class="code" href="Lint_8cpp.html#a45005634b54e2126cb3e6ec0dbc9ade4">isZero</a>())</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;        NewInsts[<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>] = <a class="code" href="ELFObjHandler_8cpp.html#aef61945034b9431b804748fc317c5548">Index</a>;</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;        NewInsts[<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>] = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateNSWAdd(</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;            <a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>, <a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a>, <a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>-&gt;getOperand(0)-&gt;getName() + <span class="stringliteral">&quot;.add&quot;</span>);</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;    }</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;    <span class="keywordflow">if</span> (isa&lt;PHINode&gt;(Val))</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160; </div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;    <a class="code" href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Unexpected instruction type&quot;</span>);</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;  }</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160; </div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;  <span class="comment">// Add the incoming values to the PHI nodes.</span></div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *Val : Explored) {</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;    <span class="keywordflow">if</span> (Val == <a class="code" href="namespacellvm_1_1sampleprof.html#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">Base</a>)</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;    <span class="comment">// All the instructions have been created, we can now add edges to the</span></div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;    <span class="comment">// phi nodes.</span></div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> *<a class="code" href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">PHI</a> = dyn_cast&lt;PHINode&gt;(Val)) {</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;      <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *NewPhi = <span class="keyword">static_cast&lt;</span><a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *<span class="keyword">&gt;</span>(NewInsts[<a class="code" href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">PHI</a>]);</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0, <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = <a class="code" href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">PHI</a>-&gt;getNumIncomingValues(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> &lt; <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *NewIncoming = <a class="code" href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">PHI</a>-&gt;getIncomingValue(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160; </div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;        <span class="keywordflow">if</span> (NewInsts.<a class="code" href="classllvm_1_1DenseMapBase.html#a0c047f127ed4380a6f383d70bec4eb94">find</a>(NewIncoming) != NewInsts.<a class="code" href="classllvm_1_1DenseMapBase.html#a65520b9c67759099e313d0f4e7b5ff9e">end</a>())</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;          NewIncoming = NewInsts[NewIncoming];</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160; </div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;        NewPhi-&gt;<a class="code" href="classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">addIncoming</a>(NewIncoming, <a class="code" href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">PHI</a>-&gt;getIncomingBlock(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>));</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;      }</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;    }</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;  }</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160; </div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;  <a class="code" href="classllvm_1_1PointerType.html">PointerType</a> *PtrTy =</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;      ElemTy-&gt;<a class="code" href="classllvm_1_1Type.html#adc01a7457de85fc52a3bb860d7e1c6a4">getPointerTo</a>(Start-&gt;getType()-&gt;getPointerAddressSpace());</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *Val : Explored) {</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;    <span class="keywordflow">if</span> (Val == <a class="code" href="namespacellvm_1_1sampleprof.html#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">Base</a>)</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160; </div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;    <span class="comment">// Depending on the type, for external users we have to emit</span></div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;    <span class="comment">// a GEP or a GEP + ptrtoint.</span></div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;    <a class="code" href="InstCombineCompares_8cpp.html#ac8e72cc39ee52ef30175aa8278cd0dfc">setInsertionPoint</a>(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>, Val, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160; </div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;    <span class="comment">// Cast base to the expected type.</span></div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *NewVal = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBitOrPointerCast(</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;        <a class="code" href="namespacellvm_1_1sampleprof.html#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">Base</a>, PtrTy, Start-&gt;getName() + <span class="stringliteral">&quot;to.ptr&quot;</span>);</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;    NewVal = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateInBoundsGEP(ElemTy, NewVal, <a class="code" href="namespacellvm.html#ab9c6b351507d3c0730f4290919d43a12">ArrayRef</a>(NewInsts[Val]),</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;                                       Val-&gt;getName() + <span class="stringliteral">&quot;.ptr&quot;</span>);</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;    NewVal = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBitOrPointerCast(</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;        NewVal, Val-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>(), Val-&gt;getName() + <span class="stringliteral">&quot;.conv&quot;</span>);</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;    Val-&gt;replaceAllUsesWith(NewVal);</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;  }</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160; </div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;  <span class="keywordflow">return</span> NewInsts[Start];</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;}</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;<span class="comment">/// Looks through GEPs, IntToPtrInsts and PtrToIntInsts in order to express</span></div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;<span class="comment">/// the input Value as a constant indexed GEP. Returns a pair containing</span></div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;<span class="comment">/// the GEPs Pointer and Index.</span></div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;<span class="comment"></span><span class="keyword">static</span> std::pair&lt;Value *, Value *&gt;</div>
<div class="line"><a name="l00648"></a><span class="lineno"><a class="line" href="InstCombineCompares_8cpp.html#a841d82051da50c3373b91f4962eb98d8">  648</a></span>&#160;<a class="code" href="InstCombineCompares_8cpp.html#a841d82051da50c3373b91f4962eb98d8">getAsConstantIndexedAddress</a>(<a class="code" href="classllvm_1_1Type.html">Type</a> *ElemTy, <a class="code" href="classllvm_1_1Value.html">Value</a> *V, <span class="keyword">const</span> <a class="code" href="classllvm_1_1DataLayout.html">DataLayout</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>) {</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *IndexType = <a class="code" href="classllvm_1_1IntegerType.html#a14f7b4f1aed38192fb6b7772eb506bdb">IntegerType::get</a>(V-&gt;<a class="code" href="classllvm_1_1Value.html#ab3fc0225d8aaf8434026c3573f961f2c">getContext</a>(),</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;                                     <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getIndexTypeSizeInBits(V-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()));</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160; </div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a> = <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">ConstantInt::getNullValue</a>(IndexType);</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;  <span class="keywordflow">while</span> (<span class="keyword">true</span>) {</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1GEPOperator.html">GEPOperator</a> *<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a> = dyn_cast&lt;GEPOperator&gt;(V)) {</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;      <span class="comment">// We accept only inbouds GEPs here to exclude the possibility of</span></div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;      <span class="comment">// overflow.</span></div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>-&gt;isInBounds())</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>-&gt;hasAllConstantIndices() &amp;&amp; <a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>-&gt;getNumIndices() == 1 &amp;&amp;</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;          <a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>-&gt;getSourceElementType() == ElemTy) {</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;        V = <a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>-&gt;getOperand(0);</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;        <a class="code" href="classllvm_1_1Constant.html">Constant</a> *GEPIndex = <span class="keyword">static_cast&lt;</span><a class="code" href="classllvm_1_1Constant.html">Constant</a> *<span class="keyword">&gt;</span>(<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>-&gt;getOperand(1));</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;        <a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a> = <a class="code" href="classllvm_1_1ConstantExpr.html#ae6f1c15034bc5515033874630a8ecce6">ConstantExpr::getAdd</a>(</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;            <a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a>, <a class="code" href="classllvm_1_1ConstantExpr.html#a0196fe6a421b8d2fcf6448f6d55591c5">ConstantExpr::getSExtOrTrunc</a>(GEPIndex, IndexType));</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;      }</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;    }</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> *CI = dyn_cast&lt;IntToPtrInst&gt;(V)) {</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;      <span class="keywordflow">if</span> (!CI-&gt;isNoopCast(<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>))</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;      V = CI-&gt;getOperand(0);</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;    }</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> *CI = dyn_cast&lt;PtrToIntInst&gt;(V)) {</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;      <span class="keywordflow">if</span> (!CI-&gt;isNoopCast(<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>))</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;      V = CI-&gt;getOperand(0);</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;    }</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;  }</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;  <span class="keywordflow">return</span> {V, <a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a>};</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;}</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;<span class="comment">/// Converts (CMP GEPLHS, RHS) if this change would make RHS a constant.</span></div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;<span class="comment">/// We can look through PHIs, GEPs and casts in order to determine a common base</span></div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;<span class="comment">/// between GEPLHS and RHS.</span></div>
<div class="line"><a name="l00689"></a><span class="lineno"><a class="line" href="InstCombineCompares_8cpp.html#aa791b7ded62a6362bd34f374d37029fc">  689</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="InstCombineCompares_8cpp.html#aa791b7ded62a6362bd34f374d37029fc">transformToIndexedCompare</a>(<a class="code" href="classllvm_1_1GEPOperator.html">GEPOperator</a> *GEPLHS, <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>,</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;                                              <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">ICmpInst::Predicate</a> <a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>,</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;                                              <span class="keyword">const</span> <a class="code" href="classllvm_1_1DataLayout.html">DataLayout</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>) {</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;  <span class="comment">// FIXME: Support vector of pointers.</span></div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;  <span class="keywordflow">if</span> (GEPLHS-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a1bc022868b23918efa44df511f4d5b61">isVectorTy</a>())</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160; </div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;  <span class="keywordflow">if</span> (!GEPLHS-&gt;<a class="code" href="classllvm_1_1GEPOperator.html#aa4d79f790f6bd3fa3234d4137979215b">hasAllConstantIndices</a>())</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160; </div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *ElemTy = GEPLHS-&gt;<a class="code" href="classllvm_1_1GEPOperator.html#a58518ce0fd3570c7bfce00aa2df58e42">getSourceElementType</a>();</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *PtrBase, *<a class="code" href="ELFObjHandler_8cpp.html#aef61945034b9431b804748fc317c5548">Index</a>;</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;  std::tie(PtrBase, <a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a>) = <a class="code" href="InstCombineCompares_8cpp.html#a841d82051da50c3373b91f4962eb98d8">getAsConstantIndexedAddress</a>(ElemTy, GEPLHS, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>);</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160; </div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;  <span class="comment">// The set of nodes that will take part in this transformation.</span></div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;  <a class="code" href="classllvm_1_1SetVector.html">SetVector&lt;Value *&gt;</a> Nodes;</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160; </div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="InstCombineCompares_8cpp.html#aa0ff2e37cf366df0d46226a21431a47a">canRewriteGEPAsOffset</a>(ElemTy, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, PtrBase, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, Nodes))</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160; </div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;  <span class="comment">// We know we can re-write this as</span></div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;  <span class="comment">//  ((gep Ptr, OFFSET1) cmp (gep Ptr, OFFSET2)</span></div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;  <span class="comment">// Since we&#39;ve only looked through inbouds GEPs we know that we</span></div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;  <span class="comment">// can&#39;t have overflow on either side. We can therefore re-write</span></div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;  <span class="comment">// this as:</span></div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;  <span class="comment">//   OFFSET1 cmp OFFSET2</span></div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *NewRHS = <a class="code" href="InstCombineCompares_8cpp.html#aedc1445e8c8e04ab10190855f6393813">rewriteGEPAsOffset</a>(ElemTy, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, PtrBase, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, Nodes);</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160; </div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;  <span class="comment">// RewriteGEPAsOffset has replaced RHS and all of its uses with a re-written</span></div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;  <span class="comment">// GEP having PtrBase as the pointer base, and has returned in NewRHS the</span></div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;  <span class="comment">// offset. Since Index is the offset of LHS to the base pointer, we will now</span></div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;  <span class="comment">// compare the offsets instead of comparing the pointers.</span></div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1ICmpInst.html#a9d5f70171d811078c4d263811f13c121">ICmpInst::getSignedPredicate</a>(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>), <a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a>, NewRHS);</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;}</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;<span class="comment">/// Fold comparisons between a GEP instruction and something else. At this point</span></div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;<span class="comment">/// we know that the GEP is on the LHS of the comparison.</span></div>
<div class="line"><a name="l00726"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombinerImpl.html#a465c98f023986f46e34c395e9c891166">  726</a></span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombinerImpl.html#a465c98f023986f46e34c395e9c891166">InstCombinerImpl::foldGEPICmp</a>(<a class="code" href="classllvm_1_1GEPOperator.html">GEPOperator</a> *GEPLHS, <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>,</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;                                           <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">ICmpInst::Predicate</a> <a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>,</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;                                           <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;  <span class="comment">// Don&#39;t transform signed compares of GEPs into index compares. Even if the</span></div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;  <span class="comment">// GEP is inbounds, the final add of the base pointer can have signed overflow</span></div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;  <span class="comment">// and would change the result of the icmp.</span></div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;  <span class="comment">// e.g. &quot;&amp;foo[0] &lt;s &amp;foo[1]&quot; can&#39;t be folded to &quot;true&quot; because &quot;foo&quot; could be</span></div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;  <span class="comment">// the maximum signed value for the pointer type.</span></div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1CmpInst.html#a3712279d70deeec90a93db09deb12d02">ICmpInst::isSigned</a>(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>))</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160; </div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;  <span class="comment">// Look through bitcasts and addrspacecasts. We do not however want to remove</span></div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;  <span class="comment">// 0 GEPs.</span></div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;  <span class="keywordflow">if</span> (!isa&lt;GetElementPtrInst&gt;(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>))</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;    <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a> = <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>-&gt;<a class="code" href="classllvm_1_1Value.html#a966eb231e7d4e572874d2cb49b18faea">stripPointerCasts</a>();</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160; </div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *PtrBase = GEPLHS-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0);</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;  <span class="keywordflow">if</span> (PtrBase == <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a> &amp;&amp; GEPLHS-&gt;<a class="code" href="classllvm_1_1GEPOperator.html#a3783a9756e9b9a1fe124622d27522713">isInBounds</a>()) {</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;    <span class="comment">// ((gep Ptr, OFFSET) cmp Ptr)   ---&gt; (OFFSET cmp 0).</span></div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Offset = EmitGEPOffset(GEPLHS);</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1ICmpInst.html#a9d5f70171d811078c4d263811f13c121">ICmpInst::getSignedPredicate</a>(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>), Offset,</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;                        <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(Offset-&gt;getType()));</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;  }</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160; </div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;  <span class="keywordflow">if</span> (GEPLHS-&gt;<a class="code" href="classllvm_1_1GEPOperator.html#a3783a9756e9b9a1fe124622d27522713">isInBounds</a>() &amp;&amp; <a class="code" href="classllvm_1_1ICmpInst.html#aaaeded5d0cab77f531b294638459aca5">ICmpInst::isEquality</a>(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>) &amp;&amp;</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;      isa&lt;Constant&gt;(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>) &amp;&amp; cast&lt;Constant&gt;(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>)-&gt;isNullValue() &amp;&amp;</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;      !<a class="code" href="namespacellvm.html#a7b03ed78a8e299bde6d26a8793cd4e06">NullPointerIsDefined</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getFunction(),</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;                            <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a5ab2d0b0f0b8ceec3b907184e7567197">getPointerAddressSpace</a>())) {</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;    <span class="comment">// For most address spaces, an allocation can&#39;t be placed at null, but null</span></div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;    <span class="comment">// itself is treated as a 0 size allocation in the in bounds rules.  Thus,</span></div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;    <span class="comment">// the only valid inbounds address derived from null, is null itself.</span></div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;    <span class="comment">// Thus, we have four cases to consider:</span></div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;    <span class="comment">// 1) Base == nullptr, Offset == 0 -&gt; inbounds, null</span></div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;    <span class="comment">// 2) Base == nullptr, Offset != 0 -&gt; poison as the result is out of bounds</span></div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;    <span class="comment">// 3) Base != nullptr, Offset == (-base) -&gt; poison (crossing allocations)</span></div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;    <span class="comment">// 4) Base != nullptr, Offset != (-base) -&gt; nonnull (and possibly poison)</span></div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;    <span class="comment">// (Note if we&#39;re indexing a type of size 0, that simply collapses into one</span></div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;    <span class="comment">//  of the buckets above.)</span></div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;    <span class="comment">// In general, we&#39;re allowed to make values less poison (i.e. remove</span></div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;    <span class="comment">//   sources of full UB), so in this case, we just select between the two</span></div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;    <span class="comment">//   non-poison cases (1 and 4 above).</span></div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;    <span class="comment">// For vectors, we apply the same reasoning on a per-lane basis.</span></div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;    <span class="keyword">auto</span> *<a class="code" href="namespacellvm_1_1sampleprof.html#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">Base</a> = GEPLHS-&gt;<a class="code" href="classllvm_1_1GEPOperator.html#a3e7aed6d56bdb4dfdb9faf5821d159d6">getPointerOperand</a>();</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;    <span class="keywordflow">if</span> (GEPLHS-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a1bc022868b23918efa44df511f4d5b61">isVectorTy</a>() &amp;&amp; <a class="code" href="namespacellvm_1_1sampleprof.html#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">Base</a>-&gt;getType()-&gt;isPointerTy()) {</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;      <span class="keyword">auto</span> EC = cast&lt;VectorType&gt;(GEPLHS-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>())-&gt;getElementCount();</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;      <a class="code" href="namespacellvm_1_1sampleprof.html#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">Base</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateVectorSplat(EC, <a class="code" href="namespacellvm_1_1sampleprof.html#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">Base</a>);</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;    }</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>, <a class="code" href="namespacellvm_1_1sampleprof.html#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">Base</a>,</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;                        <a class="code" href="classllvm_1_1ConstantExpr.html#a28bf8984fbfb08fd27df435e631e6832">ConstantExpr::getPointerBitCastOrAddrSpaceCast</a>(</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;                            cast&lt;Constant&gt;(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>), <a class="code" href="namespacellvm_1_1sampleprof.html#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">Base</a>-&gt;getType()));</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1GEPOperator.html">GEPOperator</a> *GEPRHS = dyn_cast&lt;GEPOperator&gt;(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>)) {</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;    <span class="comment">// If the base pointers are different, but the indices are the same, just</span></div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;    <span class="comment">// compare the base pointer.</span></div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;    <span class="keywordflow">if</span> (PtrBase != GEPRHS-&gt;getOperand(0)) {</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;      <span class="keywordtype">bool</span> IndicesTheSame =</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;          GEPLHS-&gt;<a class="code" href="classllvm_1_1User.html#addec638786f763d967811b45cb662f1f">getNumOperands</a>() == GEPRHS-&gt;getNumOperands() &amp;&amp;</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;          GEPLHS-&gt;<a class="code" href="classllvm_1_1GEPOperator.html#a3e7aed6d56bdb4dfdb9faf5821d159d6">getPointerOperand</a>()-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>() ==</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;              GEPRHS-&gt;getPointerOperand()-&gt;getType() &amp;&amp;</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;          GEPLHS-&gt;<a class="code" href="classllvm_1_1GEPOperator.html#a58518ce0fd3570c7bfce00aa2df58e42">getSourceElementType</a>() == GEPRHS-&gt;getSourceElementType();</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;      <span class="keywordflow">if</span> (IndicesTheSame)</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 1, <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a> = GEPLHS-&gt;<a class="code" href="classllvm_1_1User.html#addec638786f763d967811b45cb662f1f">getNumOperands</a>(); <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a>; ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;          <span class="keywordflow">if</span> (GEPLHS-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) != GEPRHS-&gt;getOperand(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)) {</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;            IndicesTheSame = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;          }</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160; </div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;      <span class="comment">// If all indices are the same, just compare the base pointers.</span></div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;      <a class="code" href="classllvm_1_1Type.html">Type</a> *<a class="code" href="classBaseType.html">BaseType</a> = GEPLHS-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0)-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>();</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;      <span class="keywordflow">if</span> (IndicesTheSame &amp;&amp; <a class="code" href="classllvm_1_1CmpInst.html#a4b5e1f50cb0890ec60d8c61a61241170">CmpInst::makeCmpResultType</a>(<a class="code" href="classBaseType.html">BaseType</a>) == <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getType())</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>, GEPLHS-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0), GEPRHS-&gt;getOperand(0));</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160; </div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;      <span class="comment">// If we&#39;re comparing GEPs with two base pointers that only differ in type</span></div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;      <span class="comment">// and both GEPs have only constant indices or just one use, then fold</span></div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;      <span class="comment">// the compare with the adjusted indices.</span></div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;      <span class="comment">// FIXME: Support vector of pointers.</span></div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;      <span class="keywordflow">if</span> (GEPLHS-&gt;<a class="code" href="classllvm_1_1GEPOperator.html#a3783a9756e9b9a1fe124622d27522713">isInBounds</a>() &amp;&amp; GEPRHS-&gt;isInBounds() &amp;&amp;</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;          (GEPLHS-&gt;<a class="code" href="classllvm_1_1GEPOperator.html#aa4d79f790f6bd3fa3234d4137979215b">hasAllConstantIndices</a>() || GEPLHS-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>()) &amp;&amp;</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;          (GEPRHS-&gt;hasAllConstantIndices() || GEPRHS-&gt;hasOneUse()) &amp;&amp;</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;          PtrBase-&gt;<a class="code" href="classllvm_1_1Value.html#a966eb231e7d4e572874d2cb49b18faea">stripPointerCasts</a>() ==</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;              GEPRHS-&gt;getOperand(0)-&gt;<a class="code" href="classllvm_1_1Value.html#a966eb231e7d4e572874d2cb49b18faea">stripPointerCasts</a>() &amp;&amp;</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;          !GEPLHS-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a1bc022868b23918efa44df511f4d5b61">isVectorTy</a>()) {</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *LOffset = EmitGEPOffset(GEPLHS);</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *ROffset = EmitGEPOffset(GEPRHS);</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160; </div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;        <span class="comment">// If we looked through an addrspacecast between different sized address</span></div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;        <span class="comment">// spaces, the LHS and RHS pointers are different sized</span></div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;        <span class="comment">// integers. Truncate to the smaller one.</span></div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;        <a class="code" href="classllvm_1_1Type.html">Type</a> *LHSIndexTy = LOffset-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>();</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;        <a class="code" href="classllvm_1_1Type.html">Type</a> *RHSIndexTy = ROffset-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>();</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;        <span class="keywordflow">if</span> (LHSIndexTy != RHSIndexTy) {</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;          <span class="keywordflow">if</span> (LHSIndexTy-&gt;<a class="code" href="classllvm_1_1Type.html#a833daf718a49c5cd637d8c9ddeaebe07">getPrimitiveSizeInBits</a>().<a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#a33880aaca0ad05e5f1557f079305bde5">getFixedValue</a>() &lt;</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;              RHSIndexTy-&gt;<a class="code" href="classllvm_1_1Type.html#a833daf718a49c5cd637d8c9ddeaebe07">getPrimitiveSizeInBits</a>().<a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#a33880aaca0ad05e5f1557f079305bde5">getFixedValue</a>()) {</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;            ROffset = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateTrunc(ROffset, LHSIndexTy);</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;          } <span class="keywordflow">else</span></div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;            LOffset = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateTrunc(LOffset, RHSIndexTy);</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;        }</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160; </div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *Cmp = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateICmp(<a class="code" href="classllvm_1_1ICmpInst.html#a9d5f70171d811078c4d263811f13c121">ICmpInst::getSignedPredicate</a>(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>),</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;                                        LOffset, ROffset);</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;        <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, Cmp);</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;      }</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160; </div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;      <span class="comment">// Otherwise, the base pointers are different and the indices are</span></div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;      <span class="comment">// different. Try convert this to an indexed compare by looking through</span></div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;      <span class="comment">// PHIs/casts.</span></div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="InstCombineCompares_8cpp.html#aa791b7ded62a6362bd34f374d37029fc">transformToIndexedCompare</a>(GEPLHS, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, <a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>);</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;    }</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160; </div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;    <span class="comment">// If one of the GEPs has all zero indices, recurse.</span></div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;    <span class="comment">// FIXME: Handle vector of pointers.</span></div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;    <span class="keywordflow">if</span> (!GEPLHS-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a1bc022868b23918efa44df511f4d5b61">isVectorTy</a>() &amp;&amp; GEPLHS-&gt;<a class="code" href="classllvm_1_1GEPOperator.html#a608bf9c26922fc798bc8bd85601ce94d">hasAllZeroIndices</a>())</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;      <span class="keywordflow">return</span> foldGEPICmp(GEPRHS, GEPLHS-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0),</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;                         <a class="code" href="classllvm_1_1CmpInst.html#a49a2d8f483ea08a3d6ea75f90c640d76">ICmpInst::getSwappedPredicate</a>(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>), <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160; </div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;    <span class="comment">// If the other GEP has all zero indices, recurse.</span></div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;    <span class="comment">// FIXME: Handle vector of pointers.</span></div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;    <span class="keywordflow">if</span> (!GEPRHS-&gt;getType()-&gt;isVectorTy() &amp;&amp; GEPRHS-&gt;hasAllZeroIndices())</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;      <span class="keywordflow">return</span> foldGEPICmp(GEPLHS, GEPRHS-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0), <a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160; </div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;    <span class="keywordtype">bool</span> GEPsInBounds = GEPLHS-&gt;<a class="code" href="classllvm_1_1GEPOperator.html#a3783a9756e9b9a1fe124622d27522713">isInBounds</a>() &amp;&amp; GEPRHS-&gt;isInBounds();</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;    <span class="keywordflow">if</span> (GEPLHS-&gt;<a class="code" href="classllvm_1_1User.html#addec638786f763d967811b45cb662f1f">getNumOperands</a>() == GEPRHS-&gt;getNumOperands() &amp;&amp;</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;        GEPLHS-&gt;<a class="code" href="classllvm_1_1GEPOperator.html#a58518ce0fd3570c7bfce00aa2df58e42">getSourceElementType</a>() == GEPRHS-&gt;getSourceElementType()) {</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;      <span class="comment">// If the GEPs only differ by one index, compare it.</span></div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;      <span class="keywordtype">unsigned</span> NumDifferences = 0;  <span class="comment">// Keep track of # differences.</span></div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;      <span class="keywordtype">unsigned</span> DiffOperand = 0;     <span class="comment">// The operand that differs.</span></div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 1, <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a> = GEPRHS-&gt;getNumOperands(); <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a>; ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;        <span class="keywordflow">if</span> (GEPLHS-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) != GEPRHS-&gt;getOperand(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)) {</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;          <a class="code" href="classllvm_1_1Type.html">Type</a> *LHSType = GEPLHS-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>();</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;          <a class="code" href="classllvm_1_1Type.html">Type</a> *RHSType = GEPRHS-&gt;getOperand(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)-&gt;getType();</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;          <span class="comment">// FIXME: Better support for vector of pointers.</span></div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;          <span class="keywordflow">if</span> (LHSType-&gt;<a class="code" href="classllvm_1_1Type.html#a833daf718a49c5cd637d8c9ddeaebe07">getPrimitiveSizeInBits</a>() !=</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;                   RHSType-&gt;<a class="code" href="classllvm_1_1Type.html#a833daf718a49c5cd637d8c9ddeaebe07">getPrimitiveSizeInBits</a>() ||</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;              (GEPLHS-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a1bc022868b23918efa44df511f4d5b61">isVectorTy</a>() &amp;&amp;</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;               (!LHSType-&gt;<a class="code" href="classllvm_1_1Type.html#a1bc022868b23918efa44df511f4d5b61">isVectorTy</a>() || !RHSType-&gt;<a class="code" href="classllvm_1_1Type.html#a1bc022868b23918efa44df511f4d5b61">isVectorTy</a>()))) {</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;            <span class="comment">// Irreconcilable differences.</span></div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;            NumDifferences = 2;</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;          }</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160; </div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;          <span class="keywordflow">if</span> (NumDifferences++) <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;          DiffOperand = <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;        }</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160; </div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;      <span class="keywordflow">if</span> (NumDifferences == 0)   <span class="comment">// SAME GEP?</span></div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;        <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <span class="comment">// No comparison is needed here.</span></div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;          <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getType(), <a class="code" href="classllvm_1_1CmpInst.html#a5ba8484cef2818d14b85640a903b2598">ICmpInst::isTrueWhenEqual</a>(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>)));</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160; </div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (NumDifferences == 1 &amp;&amp; GEPsInBounds) {</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *LHSV = GEPLHS-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(DiffOperand);</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *RHSV = GEPRHS-&gt;getOperand(DiffOperand);</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;        <span class="comment">// Make sure we do a signed comparison here.</span></div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1ICmpInst.html#a9d5f70171d811078c4d263811f13c121">ICmpInst::getSignedPredicate</a>(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>), LHSV, RHSV);</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;      }</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;    }</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160; </div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;    <span class="comment">// Only lower this if the icmp is the only user of the GEP or if we expect</span></div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;    <span class="comment">// the result to fold to a constant!</span></div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;    <span class="keywordflow">if</span> (GEPsInBounds &amp;&amp; (isa&lt;ConstantExpr&gt;(GEPLHS) || GEPLHS-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>()) &amp;&amp;</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;        (isa&lt;ConstantExpr&gt;(GEPRHS) || GEPRHS-&gt;hasOneUse())) {</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;      <span class="comment">// ((gep Ptr, OFFSET1) cmp (gep Ptr, OFFSET2)  ---&gt;  (OFFSET1 cmp OFFSET2)</span></div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *L = EmitGEPOffset(GEPLHS);</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *R = EmitGEPOffset(GEPRHS);</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1ICmpInst.html#a9d5f70171d811078c4d263811f13c121">ICmpInst::getSignedPredicate</a>(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>), L, R);</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;    }</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;  }</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160; </div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;  <span class="comment">// Try convert this to an indexed compare by looking through PHIs/casts as a</span></div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;  <span class="comment">// last resort.</span></div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="InstCombineCompares_8cpp.html#aa791b7ded62a6362bd34f374d37029fc">transformToIndexedCompare</a>(GEPLHS, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, <a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>);</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;}</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160; </div>
<div class="line"><a name="l00900"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombinerImpl.html#a53c2f8012aca86c3726300e27c7df693">  900</a></span>&#160;<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombinerImpl.html#a53c2f8012aca86c3726300e27c7df693">InstCombinerImpl::foldAllocaCmp</a>(<a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> &amp;ICI,</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;                                             <span class="keyword">const</span> <a class="code" href="classllvm_1_1AllocaInst.html">AllocaInst</a> *Alloca) {</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(ICI.<a class="code" href="classllvm_1_1ICmpInst.html#abe8988eef2e6fc2baba032cb22afedd7">isEquality</a>() &amp;&amp; <span class="stringliteral">&quot;Cannot fold non-equality comparison.&quot;</span>);</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160; </div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;  <span class="comment">// It would be tempting to fold away comparisons between allocas and any</span></div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;  <span class="comment">// pointer not based on that alloca (e.g. an argument). However, even</span></div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;  <span class="comment">// though such pointers cannot alias, they can still compare equal.</span></div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;  <span class="comment">// But LLVM doesn&#39;t specify where allocas get their memory, so if the alloca</span></div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;  <span class="comment">// doesn&#39;t escape we can argue that it&#39;s impossible to guess its value, and we</span></div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;  <span class="comment">// can therefore act as if any such guesses are wrong.</span></div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;  <span class="comment">// The code below checks that the alloca doesn&#39;t escape, and that it&#39;s only</span></div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;  <span class="comment">// used in a comparison once (the current instruction). The</span></div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;  <span class="comment">// single-comparison-use condition ensures that we&#39;re trivially folding all</span></div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;  <span class="comment">// comparisons against the alloca consistently, and avoids the risk of</span></div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;  <span class="comment">// erroneously folding a comparison of the pointer with itself.</span></div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160; </div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;  <span class="keywordtype">unsigned</span> MaxIter = 32; <span class="comment">// Break cycles and bound to constant-time.</span></div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160; </div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;const Use *, 32&gt;</a> Worklist;</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1Use.html">Use</a> &amp;U : Alloca-&gt;<a class="code" href="classllvm_1_1Value.html#aecb93439702247fe5353a9966f7cefcd">uses</a>()) {</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;    <span class="keywordflow">if</span> (Worklist.size() &gt;= MaxIter)</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;    Worklist.push_back(&amp;U);</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;  }</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160; </div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;  <span class="keywordtype">unsigned</span> NumCmps = 0;</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;  <span class="keywordflow">while</span> (!Worklist.empty()) {</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Worklist.size() &lt;= MaxIter);</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1Use.html">Use</a> *U = Worklist.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a0c8ffe664a36e30d49c84d0aded2fe08">pop_back_val</a>();</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *V = U-&gt;getUser();</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;    --MaxIter;</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160; </div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;    <span class="keywordflow">if</span> (isa&lt;BitCastInst&gt;(V) || isa&lt;GetElementPtrInst&gt;(V) || isa&lt;PHINode&gt;(V) ||</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;        isa&lt;SelectInst&gt;(V)) {</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;      <span class="comment">// Track the uses.</span></div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (isa&lt;LoadInst&gt;(V)) {</div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;      <span class="comment">// Loading from the pointer doesn&#39;t escape it.</span></div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">const</span> <span class="keyword">auto</span> *<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a> = dyn_cast&lt;StoreInst&gt;(V)) {</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;      <span class="comment">// Storing *to* the pointer is fine, but storing the pointer escapes it.</span></div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;getValueOperand() == U-&gt;get())</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (isa&lt;ICmpInst&gt;(V)) {</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;      <span class="keywordflow">if</span> (NumCmps++)</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">nullptr</span>; <span class="comment">// Found more than one cmp.</span></div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">const</span> <span class="keyword">auto</span> *Intrin = dyn_cast&lt;IntrinsicInst&gt;(V)) {</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;      <span class="keywordflow">switch</span> (Intrin-&gt;getIntrinsicID()) {</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;        <span class="comment">// These intrinsics don&#39;t escape or compare the pointer. Memset is safe</span></div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;        <span class="comment">// because we don&#39;t allow ptrtoint. Memcpy and memmove are safe because</span></div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;        <span class="comment">// we don&#39;t allow stores, so src cannot point to V.</span></div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;        <span class="keywordflow">case</span> Intrinsic::lifetime_start: <span class="keywordflow">case</span> Intrinsic::lifetime_end:</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="lib_2Target_2ARM_2README_8txt.html#ae2bb081d94f22e64ca6bc4bd58512a93">Intrinsic::memcpy</a>: <span class="keywordflow">case</span> Intrinsic::memmove: <span class="keywordflow">case</span> Intrinsic::memset:</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;      }</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;    }</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1Use.html">Use</a> &amp;U : V-&gt;<a class="code" href="classllvm_1_1Value.html#aecb93439702247fe5353a9966f7cefcd">uses</a>()) {</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;      <span class="keywordflow">if</span> (Worklist.size() &gt;= MaxIter)</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;      Worklist.push_back(&amp;U);</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;    }</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;  }</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160; </div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;  <span class="keyword">auto</span> *Res = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(ICI.<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>(),</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;                               !<a class="code" href="classllvm_1_1CmpInst.html#a5ba8484cef2818d14b85640a903b2598">CmpInst::isTrueWhenEqual</a>(ICI.<a class="code" href="classllvm_1_1CmpInst.html#aa7414ba9f658ff1287d22a4b8fe81bcb">getPredicate</a>()));</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;  <span class="keywordflow">return</span> replaceInstUsesWith(ICI, Res);</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;}</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;<span class="comment">/// Fold &quot;icmp pred (X+C), X&quot;.</span></div>
<div class="line"><a name="l00976"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombinerImpl.html#aa9ac71e54b01420c48c031925c854c96">  976</a></span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombinerImpl.html#aa9ac71e54b01420c48c031925c854c96">InstCombinerImpl::foldICmpAddOpConst</a>(<a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> &amp;<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>,</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;                                                  <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">ICmpInst::Predicate</a> Pred) {</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;  <span class="comment">// From this point on, we know that (X+C &lt;= X) --&gt; (X+C &lt; X) because C != 0,</span></div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;  <span class="comment">// so the values can never be equal.  Similarly for all other &quot;or equals&quot;</span></div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;  <span class="comment">// operators.</span></div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!!<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> &amp;&amp; <span class="stringliteral">&quot;C should not be zero!&quot;</span>);</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160; </div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;  <span class="comment">// (X+1) &lt;u X        --&gt; X &gt;u (MAXUINT-1)        --&gt; X == 255</span></div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;  <span class="comment">// (X+2) &lt;u X        --&gt; X &gt;u (MAXUINT-2)        --&gt; X &gt; 253</span></div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;  <span class="comment">// (X+MAXUINT) &lt;u X  --&gt; X &gt;u (MAXUINT-MAXUINT)  --&gt; X != 0</span></div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;  <span class="keywordflow">if</span> (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e">ICmpInst::ICMP_ULT</a> || Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bad92f160316221fd4090520bb2b3cefc5">ICmpInst::ICMP_ULE</a>) {</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;    <a class="code" href="classllvm_1_1Constant.html">Constant</a> *R = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getType(),</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;                                   <a class="code" href="classllvm_1_1APInt.html#a331d69b5f93e47e7c596062b77dd5913">APInt::getMaxValue</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.getBitWidth()) - <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba607cecdc5172814382033e001ed11fad">ICmpInst::ICMP_UGT</a>, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, R);</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;  }</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160; </div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;  <span class="comment">// (X+1) &gt;u X        --&gt; X &lt;u (0-1)        --&gt; X != 255</span></div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;  <span class="comment">// (X+2) &gt;u X        --&gt; X &lt;u (0-2)        --&gt; X &lt;u 254</span></div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;  <span class="comment">// (X+MAXUINT) &gt;u X  --&gt; X &lt;u (0-MAXUINT)  --&gt; X &lt;u 1  --&gt; X == 0</span></div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;  <span class="keywordflow">if</span> (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba607cecdc5172814382033e001ed11fad">ICmpInst::ICMP_UGT</a> || Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba573bcd571c938fce863525330bbfc4b8">ICmpInst::ICMP_UGE</a>)</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e">ICmpInst::ICMP_ULT</a>, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>,</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;                        <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getType(), -<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>));</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160; </div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;  <a class="code" href="classllvm_1_1APInt.html">APInt</a> <a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eabccd0de85dfbe7aef83629b318a4df6e">SMax</a> = <a class="code" href="classllvm_1_1APInt.html#a562c9513409b74f02cb3a5c9bae672ea">APInt::getSignedMaxValue</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.getBitWidth());</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160; </div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;  <span class="comment">// (X+ 1) &lt;s X       --&gt; X &gt;s (MAXSINT-1)          --&gt; X == 127</span></div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;  <span class="comment">// (X+ 2) &lt;s X       --&gt; X &gt;s (MAXSINT-2)          --&gt; X &gt;s 125</span></div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;  <span class="comment">// (X+MAXSINT) &lt;s X  --&gt; X &gt;s (MAXSINT-MAXSINT)    --&gt; X &gt;s 0</span></div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;  <span class="comment">// (X+MINSINT) &lt;s X  --&gt; X &gt;s (MAXSINT-MINSINT)    --&gt; X &gt;s -1</span></div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;  <span class="comment">// (X+ -2) &lt;s X      --&gt; X &gt;s (MAXSINT- -2)        --&gt; X &gt;s 126</span></div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;  <span class="comment">// (X+ -1) &lt;s X      --&gt; X &gt;s (MAXSINT- -1)        --&gt; X != 127</span></div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;  <span class="keywordflow">if</span> (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba15ae464950ac676919c2f0c7aafc706c">ICmpInst::ICMP_SLT</a> || Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba2751d6136a2819749dcef65dc19a4246">ICmpInst::ICMP_SLE</a>)</div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba720a42e85f7e981afd61e28473b0000a">ICmpInst::ICMP_SGT</a>, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>,</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;                        <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getType(), <a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eabccd0de85dfbe7aef83629b318a4df6e">SMax</a> - <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>));</div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160; </div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;  <span class="comment">// (X+ 1) &gt;s X       --&gt; X &lt;s (MAXSINT-(1-1))       --&gt; X != 127</span></div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;  <span class="comment">// (X+ 2) &gt;s X       --&gt; X &lt;s (MAXSINT-(2-1))       --&gt; X &lt;s 126</span></div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;  <span class="comment">// (X+MAXSINT) &gt;s X  --&gt; X &lt;s (MAXSINT-(MAXSINT-1)) --&gt; X &lt;s 1</span></div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;  <span class="comment">// (X+MINSINT) &gt;s X  --&gt; X &lt;s (MAXSINT-(MINSINT-1)) --&gt; X &lt;s -2</span></div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;  <span class="comment">// (X+ -2) &gt;s X      --&gt; X &lt;s (MAXSINT-(-2-1))      --&gt; X &lt;s -126</span></div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;  <span class="comment">// (X+ -1) &gt;s X      --&gt; X &lt;s (MAXSINT-(-1-1))      --&gt; X == -128</span></div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160; </div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba720a42e85f7e981afd61e28473b0000a">ICmpInst::ICMP_SGT</a> || Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac1aa7b798ba11d2e497d5cce6ce6d3dc">ICmpInst::ICMP_SGE</a>);</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba15ae464950ac676919c2f0c7aafc706c">ICmpInst::ICMP_SLT</a>, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>,</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;                      <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getType(), <a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eabccd0de85dfbe7aef83629b318a4df6e">SMax</a> - (<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> - 1)));</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;}</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;<span class="comment">/// Handle &quot;(icmp eq/ne (ashr/lshr AP2, A), AP1)&quot; -&gt;</span></div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;<span class="comment">/// (icmp eq/ne A, Log2(AP2/AP1)) -&gt;</span></div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;<span class="comment">/// (icmp eq/ne A, Log2(AP2) - Log2(AP1)).</span></div>
<div class="line"><a name="l01026"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombinerImpl.html#af57017eaefdf5b514ffd801e9923bbca"> 1026</a></span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombinerImpl.html#af57017eaefdf5b514ffd801e9923bbca">InstCombinerImpl::foldICmpShrConstConst</a>(<a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1Value.html">Value</a> *A,</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;                                                     <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> &amp;AP1,</div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;                                                     <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> &amp;AP2) {</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.isEquality() &amp;&amp; <span class="stringliteral">&quot;Cannot fold icmp gt/lt&quot;</span>);</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160; </div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;  <span class="keyword">auto</span> getICmp = [&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>](<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">CmpInst::Predicate</a> Pred, <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>) {</div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getPredicate() == <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.ICMP_NE)</div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;      Pred = <a class="code" href="classllvm_1_1CmpInst.html#aa2a54b545d237ecfe450fd1292f7675e">CmpInst::getInversePredicate</a>(Pred);</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>);</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;  };</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160; </div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;  <span class="comment">// Don&#39;t bother doing any work for cases which InstSimplify handles.</span></div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;  <span class="keywordflow">if</span> (AP2.<a class="code" href="classllvm_1_1APInt.html#a49cd5939942c6665aba4cae8c220dff1">isZero</a>())</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160; </div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;  <span class="keywordtype">bool</span> IsAShr = isa&lt;AShrOperator&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(0));</div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;  <span class="keywordflow">if</span> (IsAShr) {</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;    <span class="keywordflow">if</span> (AP2.<a class="code" href="classllvm_1_1APInt.html#a423e2c491de1408d54e35f0b47d076be">isAllOnes</a>())</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;    <span class="keywordflow">if</span> (AP2.<a class="code" href="classllvm_1_1APInt.html#a6804d9caf15411f55e7b9e9f397f0422">isNegative</a>() != AP1.<a class="code" href="classllvm_1_1APInt.html#a6804d9caf15411f55e7b9e9f397f0422">isNegative</a>())</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;    <span class="keywordflow">if</span> (AP2.<a class="code" href="classllvm_1_1APInt.html#a3d430216d32f4363e4df154599b98055">sgt</a>(AP1))</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;  }</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160; </div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;  <span class="keywordflow">if</span> (!AP1)</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;    <span class="comment">// &#39;A&#39; must be large enough to shift out the highest set bit.</span></div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;    <span class="keywordflow">return</span> getICmp(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.ICMP_UGT, A,</div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;                   <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(A-&gt;getType(), AP2.<a class="code" href="classllvm_1_1APInt.html#aae3b959a0a2981340fd03c29f528f2f0">logBase2</a>()));</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160; </div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;  <span class="keywordflow">if</span> (AP1 == AP2)</div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;    <span class="keywordflow">return</span> getICmp(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.ICMP_EQ, A, <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">ConstantInt::getNullValue</a>(A-&gt;getType()));</div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160; </div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="lib_2Target_2README_8txt.html#a8db36c82f32d6f6a4d35a00e55be03a8">Shift</a>;</div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;  <span class="keywordflow">if</span> (IsAShr &amp;&amp; AP1.<a class="code" href="classllvm_1_1APInt.html#a6804d9caf15411f55e7b9e9f397f0422">isNegative</a>())</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;    <a class="code" href="lib_2Target_2README_8txt.html#a8db36c82f32d6f6a4d35a00e55be03a8">Shift</a> = AP1.<a class="code" href="classllvm_1_1APInt.html#a3a2a335dd528474e41dcf609f79b0be2">countLeadingOnes</a>() - AP2.<a class="code" href="classllvm_1_1APInt.html#a3a2a335dd528474e41dcf609f79b0be2">countLeadingOnes</a>();</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;    <a class="code" href="lib_2Target_2README_8txt.html#a8db36c82f32d6f6a4d35a00e55be03a8">Shift</a> = AP1.<a class="code" href="classllvm_1_1APInt.html#aa074b9f5a1efaa0fd8aa4522593f299a">countLeadingZeros</a>() - AP2.<a class="code" href="classllvm_1_1APInt.html#aa074b9f5a1efaa0fd8aa4522593f299a">countLeadingZeros</a>();</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160; </div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="lib_2Target_2README_8txt.html#a8db36c82f32d6f6a4d35a00e55be03a8">Shift</a> &gt; 0) {</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;    <span class="keywordflow">if</span> (IsAShr &amp;&amp; AP1 == AP2.<a class="code" href="classllvm_1_1APInt.html#ab6006923d1a3139d70abc8f6552a7960">ashr</a>(<a class="code" href="lib_2Target_2README_8txt.html#a8db36c82f32d6f6a4d35a00e55be03a8">Shift</a>)) {</div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;      <span class="comment">// There are multiple solutions if we are comparing against -1 and the LHS</span></div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;      <span class="comment">// of the ashr is not a power of two.</span></div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;      <span class="keywordflow">if</span> (AP1.<a class="code" href="classllvm_1_1APInt.html#a423e2c491de1408d54e35f0b47d076be">isAllOnes</a>() &amp;&amp; !AP2.<a class="code" href="classllvm_1_1APInt.html#ad1b0513de876d1c85cf6268ca21b2c86">isPowerOf2</a>())</div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;        <span class="keywordflow">return</span> getICmp(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.ICMP_UGE, A, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(A-&gt;getType(), <a class="code" href="lib_2Target_2README_8txt.html#a8db36c82f32d6f6a4d35a00e55be03a8">Shift</a>));</div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;      <span class="keywordflow">return</span> getICmp(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.ICMP_EQ, A, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(A-&gt;getType(), <a class="code" href="lib_2Target_2README_8txt.html#a8db36c82f32d6f6a4d35a00e55be03a8">Shift</a>));</div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (AP1 == AP2.<a class="code" href="classllvm_1_1APInt.html#af34549c39d6f741fbdaf9a795aa306e9">lshr</a>(<a class="code" href="lib_2Target_2README_8txt.html#a8db36c82f32d6f6a4d35a00e55be03a8">Shift</a>)) {</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;      <span class="keywordflow">return</span> getICmp(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.ICMP_EQ, A, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(A-&gt;getType(), <a class="code" href="lib_2Target_2README_8txt.html#a8db36c82f32d6f6a4d35a00e55be03a8">Shift</a>));</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;    }</div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;  }</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160; </div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;  <span class="comment">// Shifting const2 will never be equal to const1.</span></div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;  <span class="comment">// FIXME: This should always be handled by InstSimplify?</span></div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;  <span class="keyword">auto</span> *TorF = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getType(), <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getPredicate() == <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.ICMP_NE);</div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;  <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, TorF);</div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;}</div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;<span class="comment">/// Handle &quot;(icmp eq/ne (shl AP2, A), AP1)&quot; -&gt;</span></div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;<span class="comment">/// (icmp eq/ne A, TrailingZeros(AP1) - TrailingZeros(AP2)).</span></div>
<div class="line"><a name="l01085"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombinerImpl.html#a47a83bda096455c177d40a2fbae13de1"> 1085</a></span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombinerImpl.html#a47a83bda096455c177d40a2fbae13de1">InstCombinerImpl::foldICmpShlConstConst</a>(<a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1Value.html">Value</a> *A,</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;                                                     <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> &amp;AP1,</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;                                                     <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> &amp;AP2) {</div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.isEquality() &amp;&amp; <span class="stringliteral">&quot;Cannot fold icmp gt/lt&quot;</span>);</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160; </div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;  <span class="keyword">auto</span> getICmp = [&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>](<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">CmpInst::Predicate</a> Pred, <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>) {</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getPredicate() == <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.ICMP_NE)</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;      Pred = <a class="code" href="classllvm_1_1CmpInst.html#aa2a54b545d237ecfe450fd1292f7675e">CmpInst::getInversePredicate</a>(Pred);</div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>);</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;  };</div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160; </div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;  <span class="comment">// Don&#39;t bother doing any work for cases which InstSimplify handles.</span></div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;  <span class="keywordflow">if</span> (AP2.<a class="code" href="classllvm_1_1APInt.html#a49cd5939942c6665aba4cae8c220dff1">isZero</a>())</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160; </div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;  <span class="keywordtype">unsigned</span> AP2TrailingZeros = AP2.<a class="code" href="classllvm_1_1APInt.html#a9a99431f0828d0222c617eb876bc5d34">countTrailingZeros</a>();</div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160; </div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;  <span class="keywordflow">if</span> (!AP1 &amp;&amp; AP2TrailingZeros != 0)</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;    <span class="keywordflow">return</span> getICmp(</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;        <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.ICMP_UGE, A,</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;        <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(A-&gt;getType(), AP2.<a class="code" href="classllvm_1_1APInt.html#a512fe2c15ea651294688eeec1341644c">getBitWidth</a>() - AP2TrailingZeros));</div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160; </div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;  <span class="keywordflow">if</span> (AP1 == AP2)</div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;    <span class="keywordflow">return</span> getICmp(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.ICMP_EQ, A, <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">ConstantInt::getNullValue</a>(A-&gt;getType()));</div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160; </div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;  <span class="comment">// Get the distance between the lowest bits that are set.</span></div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="lib_2Target_2README_8txt.html#a8db36c82f32d6f6a4d35a00e55be03a8">Shift</a> = AP1.<a class="code" href="classllvm_1_1APInt.html#a9a99431f0828d0222c617eb876bc5d34">countTrailingZeros</a>() - AP2TrailingZeros;</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160; </div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="lib_2Target_2README_8txt.html#a8db36c82f32d6f6a4d35a00e55be03a8">Shift</a> &gt; 0 &amp;&amp; AP2.<a class="code" href="classllvm_1_1APInt.html#acb9c55b6986369948507ca5241b4e411">shl</a>(<a class="code" href="lib_2Target_2README_8txt.html#a8db36c82f32d6f6a4d35a00e55be03a8">Shift</a>) == AP1)</div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;    <span class="keywordflow">return</span> getICmp(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.ICMP_EQ, A, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(A-&gt;getType(), <a class="code" href="lib_2Target_2README_8txt.html#a8db36c82f32d6f6a4d35a00e55be03a8">Shift</a>));</div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160; </div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;  <span class="comment">// Shifting const2 will never be equal to const1.</span></div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;  <span class="comment">// FIXME: This should always be handled by InstSimplify?</span></div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;  <span class="keyword">auto</span> *TorF = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getType(), <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getPredicate() == <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.ICMP_NE);</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;  <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, TorF);</div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;}</div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;<span class="comment">/// The caller has matched a pattern of the form:</span></div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;<span class="comment">///   I = icmp ugt (add (add A, B), CI2), CI1</span></div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;<span class="comment">/// If this is of the form:</span></div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;<span class="comment">///   sum = a + b</span></div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;<span class="comment">///   if (sum+128 &gt;u 255)</span></div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;<span class="comment">/// Then replace it with llvm.sadd.with.overflow.i8.</span></div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l01129"></a><span class="lineno"><a class="line" href="InstCombineCompares_8cpp.html#a01d807e681c095e21d6af31fb60ede41"> 1129</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="InstCombineCompares_8cpp.html#a01d807e681c095e21d6af31fb60ede41">processUGT_ADDCST_ADD</a>(<a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1Value.html">Value</a> *A, <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>,</div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;                                          <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *CI2, <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *CI1,</div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;                                          <a class="code" href="classllvm_1_1InstCombinerImpl.html">InstCombinerImpl</a> &amp;IC) {</div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;  <span class="comment">// The transformation we&#39;re trying to do here is to transform this into an</span></div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;  <span class="comment">// llvm.sadd.with.overflow.  To do this, we have to replace the original add</span></div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;  <span class="comment">// with a narrower add, and discard the add-with-constant that is part of the</span></div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;  <span class="comment">// range check (if we can&#39;t eliminate it, this isn&#39;t profitable).</span></div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160; </div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;  <span class="comment">// In order to eliminate the add-with-constant, the compare can be its only</span></div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;  <span class="comment">// use.</span></div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *AddWithCst = cast&lt;Instruction&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(0));</div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;  <span class="keywordflow">if</span> (!AddWithCst-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>())</div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160; </div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;  <span class="comment">// If CI2 is 2^7, 2^15, 2^31, then it might be an sadd.with.overflow.</span></div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;  <span class="keywordflow">if</span> (!CI2-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#a4b001d9b458035fbbfc154d52d354ee9">getValue</a>().<a class="code" href="classllvm_1_1APInt.html#ad1b0513de876d1c85cf6268ca21b2c86">isPowerOf2</a>())</div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;  <span class="keywordtype">unsigned</span> NewWidth = CI2-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#a4b001d9b458035fbbfc154d52d354ee9">getValue</a>().<a class="code" href="classllvm_1_1APInt.html#a9a99431f0828d0222c617eb876bc5d34">countTrailingZeros</a>();</div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;  <span class="keywordflow">if</span> (NewWidth != 7 &amp;&amp; NewWidth != 15 &amp;&amp; NewWidth != 31)</div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160; </div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;  <span class="comment">// The width of the new add formed is 1 more than the bias.</span></div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;  ++NewWidth;</div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160; </div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;  <span class="comment">// Check to see that CI1 is an all-ones value with NewWidth bits.</span></div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;  <span class="keywordflow">if</span> (CI1-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#ab240d0d30dfa9b392ef9d813f3f9e4be">getBitWidth</a>() == NewWidth ||</div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;      CI1-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#a4b001d9b458035fbbfc154d52d354ee9">getValue</a>() != <a class="code" href="classllvm_1_1APInt.html#ad960e1ff48d25c382b6d28e7961f074e">APInt::getLowBitsSet</a>(CI1-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#ab240d0d30dfa9b392ef9d813f3f9e4be">getBitWidth</a>(), NewWidth))</div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160; </div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;  <span class="comment">// This is only really a signed overflow check if the inputs have been</span></div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;  <span class="comment">// sign-extended; check for that condition. For example, if CI2 is 2^31 and</span></div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;  <span class="comment">// the operands of the add are 64 bits wide, we need at least 33 sign bits.</span></div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;  <span class="keywordflow">if</span> (IC.<a class="code" href="classllvm_1_1InstCombiner.html#afe741651c79e1ff35939d1c04a3a191b">ComputeMaxSignificantBits</a>(A, 0, &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &gt; NewWidth ||</div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;      IC.<a class="code" href="classllvm_1_1InstCombiner.html#afe741651c79e1ff35939d1c04a3a191b">ComputeMaxSignificantBits</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, 0, &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &gt; NewWidth)</div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160; </div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;  <span class="comment">// In order to replace the original add with a narrower</span></div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;  <span class="comment">// llvm.sadd.with.overflow, the only uses allowed are the add-with-constant</span></div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;  <span class="comment">// and truncates that discard the high bits of the add.  Verify that this is</span></div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;  <span class="comment">// the case.</span></div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *OrigAdd = cast&lt;Instruction&gt;(AddWithCst-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0));</div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1User.html">User</a> *U : OrigAdd-&gt;<a class="code" href="classllvm_1_1Value.html#ab4e0512c7e1c7adaa56677e3155685f1">users</a>()) {</div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;    <span class="keywordflow">if</span> (U == AddWithCst)</div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160; </div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;    <span class="comment">// Only accept truncates for now.  We would really like a nice recursive</span></div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;    <span class="comment">// predicate like SimplifyDemandedBits, but which goes downwards the use-def</span></div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;    <span class="comment">// chain to see which bits of a value are actually demanded.  If the</span></div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;    <span class="comment">// original add had another add which was then immediately truncated, we</span></div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;    <span class="comment">// could still do the transformation.</span></div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;    <a class="code" href="classllvm_1_1TruncInst.html">TruncInst</a> *TI = dyn_cast&lt;TruncInst&gt;(U);</div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;    <span class="keywordflow">if</span> (!TI || TI-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a833daf718a49c5cd637d8c9ddeaebe07">getPrimitiveSizeInBits</a>() &gt; NewWidth)</div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;  }</div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160; </div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;  <span class="comment">// If the pattern matches, truncate the inputs to the narrower type and</span></div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;  <span class="comment">// use the sadd_with_overflow intrinsic to efficiently compute both the</span></div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;  <span class="comment">// result and the overflow bit.</span></div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *NewType = <a class="code" href="classllvm_1_1IntegerType.html#a14f7b4f1aed38192fb6b7772eb506bdb">IntegerType::get</a>(OrigAdd-&gt;<a class="code" href="classllvm_1_1Value.html#ab3fc0225d8aaf8434026c3573f961f2c">getContext</a>(), NewWidth);</div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> = <a class="code" href="namespacellvm_1_1Intrinsic.html#aefa39f6b622360ce4e947feb9f671b73">Intrinsic::getDeclaration</a>(</div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;      <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getModule(), Intrinsic::sadd_with_overflow, NewType);</div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160; </div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;  <a class="code" href="classllvm_1_1IRBuilder.html">InstCombiner::BuilderTy</a> &amp;<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a> = IC.<a class="code" href="classllvm_1_1InstCombiner.html#ae1d331bc844ecb92bdeb0b706ae04396">Builder</a>;</div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160; </div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;  <span class="comment">// Put the new code above the original add, in case there are any uses of the</span></div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;  <span class="comment">// add between the add and the compare.</span></div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(OrigAdd);</div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160; </div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *TruncA = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateTrunc(A, NewType, A-&gt;getName() + <span class="stringliteral">&quot;.trunc&quot;</span>);</div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *TruncB = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateTrunc(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, NewType, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>-&gt;getName() + <span class="stringliteral">&quot;.trunc&quot;</span>);</div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;  <a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *Call = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCall(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, {TruncA, TruncB}, <span class="stringliteral">&quot;sadd&quot;</span>);</div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Add = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateExtractValue(Call, 0, <span class="stringliteral">&quot;sadd.result&quot;</span>);</div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *ZExt = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateZExt(Add, OrigAdd-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>());</div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160; </div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;  <span class="comment">// The inner add was the result of the narrow add, zero extended to the</span></div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;  <span class="comment">// wider type.  Replace it with the result computed by the intrinsic.</span></div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;  IC.<a class="code" href="classllvm_1_1InstCombiner.html#aa00031e59684d793baa874f11ddaf189">replaceInstUsesWith</a>(*OrigAdd, ZExt);</div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;  IC.<a class="code" href="classllvm_1_1InstCombinerImpl.html#a8a9b236a3c941e893f6eaa6ca6e4a36f">eraseInstFromFunction</a>(*OrigAdd);</div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160; </div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;  <span class="comment">// The original icmp gets replaced with the overflow value.</span></div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1ExtractValueInst.html#a1cccf41f6be0351ccceed2c6447ff04a">ExtractValueInst::Create</a>(Call, 1, <span class="stringliteral">&quot;sadd.overflow&quot;</span>);</div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;}</div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;<span class="comment">/// If we have:</span></div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;<span class="comment">///   icmp eq/ne (urem/srem %x, %y), 0</span></div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;<span class="comment">/// iff %y is a power-of-two, we can replace this with a bit test:</span></div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;<span class="comment">///   icmp eq/ne (and %x, (add %y, -1)), 0</span></div>
<div class="line"><a name="l01216"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombinerImpl.html#a90148636c6d38a9475471b8b43e93b04"> 1216</a></span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombinerImpl.html#a90148636c6d38a9475471b8b43e93b04">InstCombinerImpl::foldIRemByPowerOfTwoToBitTest</a>(<a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;  <span class="comment">// This fold is only valid for equality predicates.</span></div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.isEquality())</div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;  <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">ICmpInst::Predicate</a> Pred;</div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, *<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, *Zero;</div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a3fe9b3ddb71b9fb53d9fc74b3a0710bf">m_ICmp</a>(Pred, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a7e85813cf9465b923f3cffba71ebb0d8">m_IRem</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>))),</div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;                        <a class="code" href="namespacellvm_1_1PatternMatch.html#a575c2299c6f145ba3a12efa20829db43">m_CombineAnd</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#ae77be336e228cf9aa00709a8606dfb98">m_Zero</a>(), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(Zero)))))</div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm.html#a4036c3c75bcee1206cd199548b87f9ae">isKnownToBeAPowerOfTwo</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, <span class="comment">/*OrZero*/</span> <span class="keyword">true</span>, 0, &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;  <span class="comment">// This may increase instruction count, we don&#39;t enforce that Y is a constant.</span></div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAdd(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, <a class="code" href="classllvm_1_1Constant.html#a4d51384de6e1798bb6aa875aebeea9f0">Constant::getAllOnesValue</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>-&gt;getType()));</div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Masked = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAnd(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a>);</div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1CmpInst.html#a3b4a54b076454fec43b13554b28252a9">ICmpInst::Create</a>(Instruction::ICmp, Pred, Masked, Zero);</div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;}</div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;<span class="comment">/// Fold equality-comparison between zero and any (maybe truncated) right-shift</span></div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;<span class="comment">/// by one-less-than-bitwidth into a sign test on the original value.</span></div>
<div class="line"><a name="l01235"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombinerImpl.html#a1f737dab05d29dca38561bc99b9ef5b5"> 1235</a></span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombinerImpl.html#a1f737dab05d29dca38561bc99b9ef5b5">InstCombinerImpl::foldSignBitTest</a>(<a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Val;</div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;  <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">ICmpInst::Predicate</a> Pred;</div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.isEquality() || !<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a3fe9b3ddb71b9fb53d9fc74b3a0710bf">m_ICmp</a>(Pred, <a class="code" href="namespacellvm_1_1PatternMatch.html#a04353aa48874f9bda89ff9059cd1a5a6">m_Instruction</a>(Val), <a class="code" href="namespacellvm_1_1PatternMatch.html#ae77be336e228cf9aa00709a8606dfb98">m_Zero</a>())))</div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160; </div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>;</div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *XTy;</div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160; </div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>;</div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Val, <a class="code" href="namespacellvm_1_1PatternMatch.html#a054bc550cc29339bf1b5c79c73aa4dac">m_TruncOrSelf</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#aa41636955199b88164376e06e5914855">m_Shr</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#aadd209ba7e1bfa8113a609e09a7fe62f">m_Constant</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>))))) {</div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;    XTy = <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getType();</div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;    <span class="keywordtype">unsigned</span> XBitWidth = XTy-&gt;<a class="code" href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>();</div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#abb22519fa3bf66d9e0bc6d1a733a5821">m_SpecificInt_ICMP</a>(ICmpInst::Predicate::ICMP_EQ,</div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;                                     <a class="code" href="classllvm_1_1APInt.html">APInt</a>(XBitWidth, XBitWidth - 1))))</div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (isa&lt;BinaryOperator&gt;(Val) &amp;&amp;</div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;             (<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a> = reassociateShiftAmtsOfTwoSameDirectionShifts(</div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;                  cast&lt;BinaryOperator&gt;(Val), SQ.getWithInstruction(Val),</div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;                  <span class="comment">/*AnalyzeForSignBitExtraction=*/</span><span class="keyword">true</span>))) {</div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;    XTy = <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getType();</div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;  } <span class="keywordflow">else</span></div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160; </div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1CmpInst.html#a3b4a54b076454fec43b13554b28252a9">ICmpInst::Create</a>(Instruction::ICmp,</div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;                          Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a> ? <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac1aa7b798ba11d2e497d5cce6ce6d3dc">ICmpInst::ICMP_SGE</a></div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;                                                    : <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba15ae464950ac676919c2f0c7aafc706c">ICmpInst::ICMP_SLT</a>,</div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;                          <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">ConstantInt::getNullValue</a>(XTy));</div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;}</div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160; </div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;<span class="comment">// Handle  icmp pred X, 0</span></div>
<div class="line"><a name="l01266"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombinerImpl.html#a6fccc5a9bafccfbd5927bb72eb035635"> 1266</a></span>&#160;<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombinerImpl.html#a6fccc5a9bafccfbd5927bb72eb035635">InstCombinerImpl::foldICmpWithZero</a>(<a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> &amp;Cmp) {</div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;  <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">CmpInst::Predicate</a> Pred = Cmp.getPredicate();</div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Cmp.getOperand(1), <a class="code" href="namespacellvm_1_1PatternMatch.html#ae77be336e228cf9aa00709a8606dfb98">m_Zero</a>()))</div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160; </div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;  <span class="comment">// (icmp sgt smin(PosA, B) 0) -&gt; (icmp sgt B 0)</span></div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;  <span class="keywordflow">if</span> (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba720a42e85f7e981afd61e28473b0000a">ICmpInst::ICMP_SGT</a>) {</div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *A, *<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>;</div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Cmp.getOperand(0), <a class="code" href="namespacellvm_1_1PatternMatch.html#af16a6c9336ca2a17389ea709b45fe7f5">m_SMin</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>)))) {</div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a02061a5619c04262c3a5f48c3ef8a033">isKnownPositive</a>(A, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, 0, &amp;AC, &amp;Cmp, &amp;DT))</div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, Cmp.getOperand(1));</div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a02061a5619c04262c3a5f48c3ef8a033">isKnownPositive</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, 0, &amp;AC, &amp;Cmp, &amp;DT))</div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, A, Cmp.getOperand(1));</div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;    }</div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;  }</div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160; </div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *New = foldIRemByPowerOfTwoToBitTest(Cmp))</div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;    <span class="keywordflow">return</span> New;</div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160; </div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;  <span class="comment">// Given:</span></div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;  <span class="comment">//   icmp eq/ne (urem %x, %y), 0</span></div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;  <span class="comment">// Iff %x has 0 or 1 bits set, and %y has at least 2 bits set, omit &#39;urem&#39;:</span></div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;  <span class="comment">//   icmp eq/ne %x, 0</span></div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, *<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>;</div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Cmp.getOperand(0), <a class="code" href="namespacellvm_1_1PatternMatch.html#ae1a04895305aaea96e5e82d95c39bbe0">m_URem</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>))) &amp;&amp;</div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;      <a class="code" href="classllvm_1_1ICmpInst.html#aaaeded5d0cab77f531b294638459aca5">ICmpInst::isEquality</a>(Pred)) {</div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;    <a class="code" href="structllvm_1_1KnownBits.html">KnownBits</a> XKnown = <a class="code" href="namespacellvm.html#aa1f8f0633edd8b9a1c5ec15bb9fc5640">computeKnownBits</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, 0, &amp;Cmp);</div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;    <a class="code" href="structllvm_1_1KnownBits.html">KnownBits</a> YKnown = <a class="code" href="namespacellvm.html#aa1f8f0633edd8b9a1c5ec15bb9fc5640">computeKnownBits</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, 0, &amp;Cmp);</div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;    <span class="keywordflow">if</span> (XKnown.<a class="code" href="structllvm_1_1KnownBits.html#a4676f4bc7da9235ff3b6683dd670d7be">countMaxPopulation</a>() == 1 &amp;&amp; YKnown.<a class="code" href="structllvm_1_1KnownBits.html#ad2ecbbccee1ca4e3ddde24cc714ec79e">countMinPopulation</a>() &gt;= 2)</div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, Cmp.getOperand(1));</div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;  }</div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160; </div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;  <span class="comment">// (icmp eq/ne (mul X Y)) -&gt; (icmp eq/ne X/Y) if we know about whether X/Y are</span></div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;  <span class="comment">// odd/non-zero/there is no overflow.</span></div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Cmp.getOperand(0), <a class="code" href="namespacellvm_1_1PatternMatch.html#a971522b36bf432ad69a0083581ab4108">m_Mul</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>))) &amp;&amp;</div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;      <a class="code" href="classllvm_1_1ICmpInst.html#aaaeded5d0cab77f531b294638459aca5">ICmpInst::isEquality</a>(Pred)) {</div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160; </div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;    <a class="code" href="structllvm_1_1KnownBits.html">KnownBits</a> XKnown = <a class="code" href="namespacellvm.html#aa1f8f0633edd8b9a1c5ec15bb9fc5640">computeKnownBits</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, 0, &amp;Cmp);</div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;    <span class="comment">// if X % 2 != 0</span></div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;    <span class="comment">//    (icmp eq/ne Y)</span></div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;    <span class="keywordflow">if</span> (XKnown.<a class="code" href="structllvm_1_1KnownBits.html#a2ad6370e532a52014fe2e5a54bfbaddd">countMaxTrailingZeros</a>() == 0)</div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, Cmp.getOperand(1));</div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160; </div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;    <a class="code" href="structllvm_1_1KnownBits.html">KnownBits</a> YKnown = <a class="code" href="namespacellvm.html#aa1f8f0633edd8b9a1c5ec15bb9fc5640">computeKnownBits</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, 0, &amp;Cmp);</div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;    <span class="comment">// if Y % 2 != 0</span></div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;    <span class="comment">//    (icmp eq/ne X)</span></div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;    <span class="keywordflow">if</span> (YKnown.<a class="code" href="structllvm_1_1KnownBits.html#a2ad6370e532a52014fe2e5a54bfbaddd">countMaxTrailingZeros</a>() == 0)</div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, Cmp.getOperand(1));</div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160; </div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;    <span class="keyword">auto</span> *BO0 = cast&lt;OverflowingBinaryOperator&gt;(Cmp.getOperand(0));</div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;    <span class="keywordflow">if</span> (BO0-&gt;hasNoUnsignedWrap() || BO0-&gt;hasNoSignedWrap()) {</div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;      <span class="keyword">const</span> <a class="code" href="structllvm_1_1SimplifyQuery.html">SimplifyQuery</a> Q = SQ.<a class="code" href="structllvm_1_1SimplifyQuery.html#aaf05c1194f5c7869a00434c13c46c228">getWithInstruction</a>(&amp;Cmp);</div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;      <span class="comment">// `isKnownNonZero` does more analysis than just `!KnownBits.One.isZero()`</span></div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;      <span class="comment">// but to avoid unnecessary work, first just if this is an obvious case.</span></div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160; </div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;      <span class="comment">// if X non-zero and NoOverflow(X * Y)</span></div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;      <span class="comment">//    (icmp eq/ne Y)</span></div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;      <span class="keywordflow">if</span> (!XKnown.<a class="code" href="structllvm_1_1KnownBits.html#aba205f553f24c184ea47fc1a6cb56537">One</a>.<a class="code" href="classllvm_1_1APInt.html#a49cd5939942c6665aba4cae8c220dff1">isZero</a>() || <a class="code" href="namespacellvm.html#a07256e6859fcb3b9d5eb02ecea9e9a38">isKnownNonZero</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, 0, Q.<a class="code" href="structllvm_1_1SimplifyQuery.html#a928ce56952772d0e0f43cab3a489a6fe">AC</a>, Q.<a class="code" href="structllvm_1_1SimplifyQuery.html#a30647c42c8c40890c577ba5b4ab16468">CxtI</a>, Q.<a class="code" href="structllvm_1_1SimplifyQuery.html#a4776fa0f5a726bd5a8a444981c283c69">DT</a>))</div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, Cmp.getOperand(1));</div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160; </div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;      <span class="comment">// if Y non-zero and NoOverflow(X * Y)</span></div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;      <span class="comment">//    (icmp eq/ne X)</span></div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;      <span class="keywordflow">if</span> (!YKnown.<a class="code" href="structllvm_1_1KnownBits.html#aba205f553f24c184ea47fc1a6cb56537">One</a>.<a class="code" href="classllvm_1_1APInt.html#a49cd5939942c6665aba4cae8c220dff1">isZero</a>() || <a class="code" href="namespacellvm.html#a07256e6859fcb3b9d5eb02ecea9e9a38">isKnownNonZero</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, 0, Q.<a class="code" href="structllvm_1_1SimplifyQuery.html#a928ce56952772d0e0f43cab3a489a6fe">AC</a>, Q.<a class="code" href="structllvm_1_1SimplifyQuery.html#a30647c42c8c40890c577ba5b4ab16468">CxtI</a>, Q.<a class="code" href="structllvm_1_1SimplifyQuery.html#a4776fa0f5a726bd5a8a444981c283c69">DT</a>))</div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, Cmp.getOperand(1));</div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;    }</div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;    <span class="comment">// Note, we are skipping cases:</span></div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;    <span class="comment">//      if Y % 2 != 0 AND X % 2 != 0</span></div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;    <span class="comment">//          (false/true)</span></div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;    <span class="comment">//      if X non-zero and Y non-zero and NoOverflow(X * Y)</span></div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;    <span class="comment">//          (false/true)</span></div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;    <span class="comment">// Those can be simplified later as we would have already replaced the (icmp</span></div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;    <span class="comment">// eq/ne (mul X, Y)) with (icmp eq/ne X/Y) and if X/Y is known non-zero that</span></div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;    <span class="comment">// will fold to a constant elsewhere.</span></div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;  }</div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;}</div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;<span class="comment">/// Fold icmp Pred X, C.</span></div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;<span class="comment">/// TODO: This code structure does not make sense. The saturating add fold</span></div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;<span class="comment">/// should be moved to some other helper and extended as noted below (it is also</span></div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;<span class="comment">/// possible that code has been made unnecessary - do we canonicalize IR to</span></div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;<span class="comment">/// overflow/saturating intrinsics or not?).</span></div>
<div class="line"><a name="l01348"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombinerImpl.html#a6c028a26ae2c72e9018e5a80713ba819"> 1348</a></span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombinerImpl.html#a6c028a26ae2c72e9018e5a80713ba819">InstCombinerImpl::foldICmpWithConstant</a>(<a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> &amp;Cmp) {</div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;  <span class="comment">// Match the following pattern, which is a common idiom when writing</span></div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;  <span class="comment">// overflow-safe integer arithmetic functions. The source performs an addition</span></div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;  <span class="comment">// in wider type and explicitly checks for overflow using comparisons against</span></div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;  <span class="comment">// INT_MIN and INT_MAX. Simplify by using the sadd_with_overflow intrinsic.</span></div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;  <span class="comment">// TODO: This could probably be generalized to handle other overflow-safe</span></div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;  <span class="comment">// operations if we worked out the formulas to compute the appropriate magic</span></div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;  <span class="comment">// constants.</span></div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;  <span class="comment">// sum = a + b</span></div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;  <span class="comment">// if (sum+128 &gt;u 255)  ...  -&gt; llvm.sadd.with.overflow.i8</span></div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;  <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">CmpInst::Predicate</a> Pred = Cmp.getPredicate();</div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Op0 = Cmp.getOperand(0), *Op1 = Cmp.getOperand(1);</div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *A, *<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>;</div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;  <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *CI, *CI2; <span class="comment">// I = icmp ugt (add (add A, B), CI2), CI</span></div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;  <span class="keywordflow">if</span> (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba607cecdc5172814382033e001ed11fad">ICmpInst::ICMP_UGT</a> &amp;&amp; <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#a677ac8d99ff3c2d32a95c21de9ed372c">m_ConstantInt</a>(CI)) &amp;&amp;</div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;      <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a944c25ac9b73b02a17a20a08a25b9b21">m_Add</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a944c25ac9b73b02a17a20a08a25b9b21">m_Add</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>)), <a class="code" href="namespacellvm_1_1PatternMatch.html#a677ac8d99ff3c2d32a95c21de9ed372c">m_ConstantInt</a>(CI2))))</div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Res = <a class="code" href="InstCombineCompares_8cpp.html#a01d807e681c095e21d6af31fb60ede41">processUGT_ADDCST_ADD</a>(Cmp, A, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, CI2, CI, *<span class="keyword">this</span>))</div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;      <span class="keywordflow">return</span> Res;</div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160; </div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;  <span class="comment">// icmp(phi(C1, C2, ...), C) -&gt; phi(icmp(C1, C), icmp(C2, C), ...).</span></div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = dyn_cast&lt;Constant&gt;(Op1);</div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)</div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160; </div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *Phi = dyn_cast&lt;PHINode&gt;(Op0))</div>
<div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a0d10fe510ced2849a8074fe81e5d04ce">all_of</a>(Phi-&gt;operands(), [](<a class="code" href="classllvm_1_1Value.html">Value</a> *V) { return isa&lt;Constant&gt;(V); })) {</div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;      <a class="code" href="classllvm_1_1Type.html">Type</a> *Ty = Cmp.getType();</div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;      <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(Phi);</div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;      <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *NewPhi =</div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;          <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreatePHI(Ty, Phi-&gt;getNumOperands());</div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Predecessor : <a class="code" href="namespacellvm.html#acb22fb04083152eee862457e42e8dc31">predecessors</a>(Phi-&gt;getParent())) {</div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;        <span class="keyword">auto</span> *Input =</div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;            cast&lt;Constant&gt;(Phi-&gt;getIncomingValueForBlock(Predecessor));</div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;        <span class="keyword">auto</span> *BoolInput = <a class="code" href="classllvm_1_1ConstantExpr.html#afe6a25e856a1a63ffff098f05e3f26d2">ConstantExpr::getCompare</a>(Pred, Input, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;        NewPhi-&gt;<a class="code" href="classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">addIncoming</a>(BoolInput, Predecessor);</div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;      }</div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;      NewPhi-&gt;<a class="code" href="classllvm_1_1Value.html#ae855357b6c5e6e7ed1869272708a3a84">takeName</a>(&amp;Cmp);</div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;      <span class="keywordflow">return</span> replaceInstUsesWith(Cmp, NewPhi);</div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;    }</div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160; </div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;}</div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;<span class="comment">/// Canonicalize icmp instructions based on dominating conditions.</span></div>
<div class="line"><a name="l01394"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombinerImpl.html#af24dc3f2a89de0b400a681002927217d"> 1394</a></span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombinerImpl.html#af24dc3f2a89de0b400a681002927217d">InstCombinerImpl::foldICmpWithDominatingICmp</a>(<a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> &amp;Cmp) {</div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;  <span class="comment">// This is a cheap/incomplete check for dominance - just match a single</span></div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;  <span class="comment">// predecessor with a conditional branch.</span></div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *CmpBB = Cmp.getParent();</div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *DomBB = CmpBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a59fb91d1691350f7d1b8e8a114e3f2a4">getSinglePredecessor</a>();</div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;  <span class="keywordflow">if</span> (!DomBB)</div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160; </div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *DomCond;</div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *TrueBB, *FalseBB;</div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(DomBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>(), <a class="code" href="namespacellvm_1_1PatternMatch.html#a4fd27a44c5fd9958fdd9150622129cd3">m_Br</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(DomCond), TrueBB, FalseBB)))</div>
<div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160; </div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((TrueBB == CmpBB || FalseBB == CmpBB) &amp;&amp;</div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;         <span class="stringliteral">&quot;Predecessor block does not point to successor?&quot;</span>);</div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160; </div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;  <span class="comment">// The branch should get simplified. Don&#39;t bother simplifying this condition.</span></div>
<div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;  <span class="keywordflow">if</span> (TrueBB == FalseBB)</div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160; </div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;  <span class="comment">// Try to simplify this compare to T/F based on the dominating condition.</span></div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;  std::optional&lt;bool&gt; Imp =</div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;      <a class="code" href="namespacellvm.html#af7f2eb961a542779e97c0b3ec7fa6623">isImpliedCondition</a>(DomCond, &amp;Cmp, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, TrueBB == CmpBB);</div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;  <span class="keywordflow">if</span> (Imp)</div>
<div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;    <span class="keywordflow">return</span> replaceInstUsesWith(Cmp, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Cmp.getType(), *Imp));</div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160; </div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;  <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">CmpInst::Predicate</a> Pred = Cmp.getPredicate();</div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a> = Cmp.getOperand(0), *<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a> = Cmp.getOperand(1);</div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;  <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">ICmpInst::Predicate</a> DomPred;</div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, *DomC;</div>
<div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(DomCond, <a class="code" href="namespacellvm_1_1PatternMatch.html#a3fe9b3ddb71b9fb53d9fc74b3a0710bf">m_ICmp</a>(DomPred, <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(DomC))) &amp;&amp;</div>
<div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;      <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>))) {</div>
<div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;    <span class="comment">// We have 2 compares of a variable with constants. Calculate the constant</span></div>
<div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;    <span class="comment">// ranges of those compares to see if we can transform the 2nd compare:</span></div>
<div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;    <span class="comment">// DomBB:</span></div>
<div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;    <span class="comment">//   DomCond = icmp DomPred X, DomC</span></div>
<div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;    <span class="comment">//   br DomCond, CmpBB, FalseBB</span></div>
<div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;    <span class="comment">// CmpBB:</span></div>
<div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;    <span class="comment">//   Cmp = icmp Pred X, C</span></div>
<div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;    <a class="code" href="classllvm_1_1ConstantRange.html">ConstantRange</a> CR = <a class="code" href="classllvm_1_1ConstantRange.html#aa89e9cec92a0b38d2f47a077bf12cc98">ConstantRange::makeExactICmpRegion</a>(Pred, *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div>
<div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;    <a class="code" href="classllvm_1_1ConstantRange.html">ConstantRange</a> DominatingCR =</div>
<div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;        (CmpBB == TrueBB) ? <a class="code" href="classllvm_1_1ConstantRange.html#aa89e9cec92a0b38d2f47a077bf12cc98">ConstantRange::makeExactICmpRegion</a>(DomPred, *DomC)</div>
<div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;                          : <a class="code" href="classllvm_1_1ConstantRange.html#aa89e9cec92a0b38d2f47a077bf12cc98">ConstantRange::makeExactICmpRegion</a>(</div>
<div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;                                <a class="code" href="classllvm_1_1CmpInst.html#aa2a54b545d237ecfe450fd1292f7675e">CmpInst::getInversePredicate</a>(DomPred), *DomC);</div>
<div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;    <a class="code" href="classllvm_1_1ConstantRange.html">ConstantRange</a> Intersection = DominatingCR.<a class="code" href="classllvm_1_1ConstantRange.html#ac098fe4f07549fb029fbf950dbe78fd3">intersectWith</a>(CR);</div>
<div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;    <a class="code" href="classllvm_1_1ConstantRange.html">ConstantRange</a> Difference = DominatingCR.<a class="code" href="classllvm_1_1ConstantRange.html#a4f4790febf2bf7aa44f5283a74ddf744">difference</a>(CR);</div>
<div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;    <span class="keywordflow">if</span> (Intersection.<a class="code" href="classllvm_1_1ConstantRange.html#a5bd6d98b4a7ecc1dcdc571e4352fcc52">isEmptySet</a>())</div>
<div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;      <span class="keywordflow">return</span> replaceInstUsesWith(Cmp, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getFalse());</div>
<div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;    <span class="keywordflow">if</span> (Difference.<a class="code" href="classllvm_1_1ConstantRange.html#a5bd6d98b4a7ecc1dcdc571e4352fcc52">isEmptySet</a>())</div>
<div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;      <span class="keywordflow">return</span> replaceInstUsesWith(Cmp, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getTrue());</div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160; </div>
<div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;    <span class="comment">// Canonicalizing a sign bit comparison that gets used in a branch,</span></div>
<div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;    <span class="comment">// pessimizes codegen by generating branch on zero instruction instead</span></div>
<div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;    <span class="comment">// of a test and branch. So we avoid canonicalizing in such situations</span></div>
<div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;    <span class="comment">// because test and branch instruction has better branch displacement</span></div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;    <span class="comment">// than compare and branch instruction.</span></div>
<div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;    <span class="keywordtype">bool</span> UnusedBit;</div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;    <span class="keywordtype">bool</span> IsSignBit = isSignBitCheck(Pred, *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, UnusedBit);</div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;    <span class="keywordflow">if</span> (Cmp.isEquality() || (IsSignBit &amp;&amp; <a class="code" href="InstCombineCompares_8cpp.html#a4c4d096b05846dc75914e02cbe37a805">hasBranchUse</a>(Cmp)))</div>
<div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160; </div>
<div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;    <span class="comment">// Avoid an infinite loop with min/max canonicalization.</span></div>
<div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;    <span class="comment">// TODO: This will be unnecessary if we canonicalize to min/max intrinsics.</span></div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;    <span class="keywordflow">if</span> (Cmp.hasOneUse() &amp;&amp;</div>
<div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;        <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Cmp.user_back(), <a class="code" href="namespacellvm_1_1PatternMatch.html#a74a8221adbd09a9076a1ab471644b223">m_MaxOrMin</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>())))</div>
<div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160; </div>
<div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *EqC = Intersection.<a class="code" href="classllvm_1_1ConstantRange.html#ad8654634aa99cb48cbd028baba36eb84">getSingleElement</a>())</div>
<div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a>, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getInt(*EqC));</div>
<div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *NeC = Difference.<a class="code" href="classllvm_1_1ConstantRange.html#ad8654634aa99cb48cbd028baba36eb84">getSingleElement</a>())</div>
<div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a>, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getInt(*NeC));</div>
<div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;  }</div>
<div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160; </div>
<div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;}</div>
<div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;<span class="comment">/// Fold icmp (trunc X), C.</span></div>
<div class="line"><a name="l01471"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombinerImpl.html#a9bbadd565d3ba2855a90a04101d8d4cf"> 1471</a></span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombinerImpl.html#a9bbadd565d3ba2855a90a04101d8d4cf">InstCombinerImpl::foldICmpTruncConstant</a>(<a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> &amp;Cmp,</div>
<div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;                                                     <a class="code" href="classllvm_1_1TruncInst.html">TruncInst</a> *Trunc,</div>
<div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;                                                     <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> &amp;<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>) {</div>
<div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;  <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">ICmpInst::Predicate</a> Pred = Cmp.getPredicate();</div>
<div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a> = Trunc-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0);</div>
<div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.isOne() &amp;&amp; <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.getBitWidth() &gt; 1) {</div>
<div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;    <span class="comment">// icmp slt trunc(signum(V)) 1 --&gt; icmp slt V, 1</span></div>
<div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *V = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;    <span class="keywordflow">if</span> (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba15ae464950ac676919c2f0c7aafc706c">ICmpInst::ICMP_SLT</a> &amp;&amp; <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a50c6e9fa97e7373aca8dca86d385daa7">m_Signum</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(V))))</div>
<div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba15ae464950ac676919c2f0c7aafc706c">ICmpInst::ICMP_SLT</a>, V,</div>
<div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;                          <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(V-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>(), 1));</div>
<div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;  }</div>
<div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160; </div>
<div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *SrcTy = <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getType();</div>
<div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;  <span class="keywordtype">unsigned</span> DstBits = Trunc-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>(),</div>
<div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;           SrcBits = SrcTy-&gt;<a class="code" href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>();</div>
<div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160; </div>
<div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;  <span class="comment">// TODO: Handle any shifted constant by subtracting trailing zeros.</span></div>
<div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;  <span class="comment">// TODO: Handle non-equality predicates.</span></div>
<div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>;</div>
<div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;  <span class="keywordflow">if</span> (Cmp.isEquality() &amp;&amp; <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a37668d9884c78ac77254cf9fb8a4276a">m_Shl</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#aebdb2700a77d10ae6f0ce115e23d9f77">m_One</a>(), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>)))) {</div>
<div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;    <span class="comment">// (trunc (1 &lt;&lt; Y) to iN) == 0 --&gt; Y u&gt;= N</span></div>
<div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;    <span class="comment">// (trunc (1 &lt;&lt; Y) to iN) != 0 --&gt; Y u&lt;  N</span></div>
<div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.isZero()) {</div>
<div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;      <span class="keyword">auto</span> NewPred = (Pred == Cmp.ICMP_EQ) ? Cmp.ICMP_UGE : Cmp.ICMP_ULT;</div>
<div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(NewPred, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(SrcTy, DstBits));</div>
<div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;    }</div>
<div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;    <span class="comment">// (trunc (1 &lt;&lt; Y) to iN) == 2**C --&gt; Y == C</span></div>
<div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;    <span class="comment">// (trunc (1 &lt;&lt; Y) to iN) != 2**C --&gt; Y != C</span></div>
<div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.isPowerOf2())</div>
<div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(SrcTy, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.logBase2()));</div>
<div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;  }</div>
<div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160; </div>
<div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;  <span class="keywordflow">if</span> (Cmp.isEquality() &amp;&amp; Trunc-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>()) {</div>
<div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;    <span class="comment">// Canonicalize to a mask and wider compare if the wide type is suitable:</span></div>
<div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;    <span class="comment">// (trunc X to i8) == C --&gt; (X &amp; 0xff) == (zext C)</span></div>
<div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;    <span class="keywordflow">if</span> (!SrcTy-&gt;<a class="code" href="classllvm_1_1Type.html#a1bc022868b23918efa44df511f4d5b61">isVectorTy</a>() &amp;&amp; shouldChangeType(DstBits, SrcBits)) {</div>
<div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;      <a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a> =</div>
<div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;          <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(SrcTy, <a class="code" href="classllvm_1_1APInt.html#ad960e1ff48d25c382b6d28e7961f074e">APInt::getLowBitsSet</a>(SrcBits, DstBits));</div>
<div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eac33315685a0cba3ce53be378b3c7874b">And</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAnd(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a>);</div>
<div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;      <a class="code" href="classllvm_1_1Constant.html">Constant</a> *WideC = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(SrcTy, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.zext(SrcBits));</div>
<div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, <a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eac33315685a0cba3ce53be378b3c7874b">And</a>, WideC);</div>
<div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;    }</div>
<div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160; </div>
<div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;    <span class="comment">// Simplify icmp eq (trunc x to i8), 42 -&gt; icmp eq x, 42|highbits if all</span></div>
<div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;    <span class="comment">// of the high bits truncated out of x are known.</span></div>
<div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;    <a class="code" href="structllvm_1_1KnownBits.html">KnownBits</a> Known = <a class="code" href="namespacellvm.html#aa1f8f0633edd8b9a1c5ec15bb9fc5640">computeKnownBits</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, 0, &amp;Cmp);</div>
<div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160; </div>
<div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;    <span class="comment">// If all the high bits are known, we can do this xform.</span></div>
<div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;    <span class="keywordflow">if</span> ((Known.<a class="code" href="structllvm_1_1KnownBits.html#ac67bca6c764da76f5e152330d92ed916">Zero</a> | Known.<a class="code" href="structllvm_1_1KnownBits.html#aba205f553f24c184ea47fc1a6cb56537">One</a>).countLeadingOnes() &gt;= SrcBits - DstBits) {</div>
<div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;      <span class="comment">// Pull in the high bits from known-ones set.</span></div>
<div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;      <a class="code" href="classllvm_1_1APInt.html">APInt</a> NewRHS = <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.<a class="code" href="classllvm_1_1APInt.html#a1dc76cc8bf703e6ada68bededcbb9573">zext</a>(SrcBits);</div>
<div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;      NewRHS |= Known.<a class="code" href="structllvm_1_1KnownBits.html#aba205f553f24c184ea47fc1a6cb56537">One</a> &amp; <a class="code" href="classllvm_1_1APInt.html#adcb96bd09d7c75c7669fa5f9d1190899">APInt::getHighBitsSet</a>(SrcBits, SrcBits - DstBits);</div>
<div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(SrcTy, NewRHS));</div>
<div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;    }</div>
<div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;  }</div>
<div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160; </div>
<div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;  <span class="comment">// Look through truncated right-shift of the sign-bit for a sign-bit check:</span></div>
<div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;  <span class="comment">// trunc iN (ShOp &gt;&gt; ShAmtC) to i[N - ShAmtC] &lt; 0  --&gt; ShOp &lt;  0</span></div>
<div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;  <span class="comment">// trunc iN (ShOp &gt;&gt; ShAmtC) to i[N - ShAmtC] &gt; -1 --&gt; ShOp &gt; -1</span></div>
<div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *ShOp;</div>
<div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *ShAmtC;</div>
<div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;  <span class="keywordtype">bool</span> TrueIfSigned;</div>
<div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;  <span class="keywordflow">if</span> (isSignBitCheck(Pred, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, TrueIfSigned) &amp;&amp;</div>
<div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;      <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#aa41636955199b88164376e06e5914855">m_Shr</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(ShOp), <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(ShAmtC))) &amp;&amp;</div>
<div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;      DstBits == SrcBits - ShAmtC-&gt;<a class="code" href="classllvm_1_1APInt.html#a217e0207d9cc8e046c2dccbf0e4bb198">getZExtValue</a>()) {</div>
<div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;    <span class="keywordflow">return</span> TrueIfSigned ? <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba15ae464950ac676919c2f0c7aafc706c">ICmpInst::ICMP_SLT</a>, ShOp,</div>
<div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;                                       <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">ConstantInt::getNullValue</a>(SrcTy))</div>
<div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;                        : <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba720a42e85f7e981afd61e28473b0000a">ICmpInst::ICMP_SGT</a>, ShOp,</div>
<div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;                                       <a class="code" href="classllvm_1_1Constant.html#a4d51384de6e1798bb6aa875aebeea9f0">ConstantInt::getAllOnesValue</a>(SrcTy));</div>
<div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;  }</div>
<div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160; </div>
<div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;}</div>
<div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;<span class="comment">/// Fold icmp (xor X, Y), C.</span></div>
<div class="line"><a name="l01547"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombinerImpl.html#aa8f0b6273a443e7a98755fcb08d97f22"> 1547</a></span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombinerImpl.html#aa8f0b6273a443e7a98755fcb08d97f22">InstCombinerImpl::foldICmpXorConstant</a>(<a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> &amp;Cmp,</div>
<div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;                                                   <a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> *Xor,</div>
<div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;                                                   <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> &amp;<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>) {</div>
<div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = foldICmpXorShiftConst(Cmp, <a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830ea76feb79109026728a20736a8c6504548">Xor</a>, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>))</div>
<div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160; </div>
<div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a> = <a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830ea76feb79109026728a20736a8c6504548">Xor</a>-&gt;getOperand(0);</div>
<div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a> = <a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830ea76feb79109026728a20736a8c6504548">Xor</a>-&gt;getOperand(1);</div>
<div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *XorC;</div>
<div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(XorC)))</div>
<div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160; </div>
<div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;  <span class="comment">// If this is a comparison that tests the signbit (X &lt; 0) or (x &gt; -1),</span></div>
<div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;  <span class="comment">// fold the xor.</span></div>
<div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;  <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">ICmpInst::Predicate</a> Pred = Cmp.getPredicate();</div>
<div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;  <span class="keywordtype">bool</span> TrueIfSigned = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;  <span class="keywordflow">if</span> (isSignBitCheck(Cmp.getPredicate(), <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, TrueIfSigned)) {</div>
<div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160; </div>
<div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;    <span class="comment">// If the sign bit of the XorCst is not set, there is no change to</span></div>
<div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;    <span class="comment">// the operation, just stop using the Xor.</span></div>
<div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;    <span class="keywordflow">if</span> (!XorC-&gt;<a class="code" href="classllvm_1_1APInt.html#a6804d9caf15411f55e7b9e9f397f0422">isNegative</a>())</div>
<div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;      <span class="keywordflow">return</span> replaceOperand(Cmp, 0, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>);</div>
<div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160; </div>
<div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;    <span class="comment">// Emit the opposite comparison.</span></div>
<div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;    <span class="keywordflow">if</span> (TrueIfSigned)</div>
<div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba720a42e85f7e981afd61e28473b0000a">ICmpInst::ICMP_SGT</a>, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>,</div>
<div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;                          <a class="code" href="classllvm_1_1Constant.html#a4d51384de6e1798bb6aa875aebeea9f0">ConstantInt::getAllOnesValue</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getType()));</div>
<div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba15ae464950ac676919c2f0c7aafc706c">ICmpInst::ICMP_SLT</a>, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>,</div>
<div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;                          <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">ConstantInt::getNullValue</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getType()));</div>
<div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;  }</div>
<div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160; </div>
<div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830ea76feb79109026728a20736a8c6504548">Xor</a>-&gt;hasOneUse()) {</div>
<div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;    <span class="comment">// (icmp u/s (xor X SignMask), C) -&gt; (icmp s/u X, (xor C SignMask))</span></div>
<div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;    <span class="keywordflow">if</span> (!Cmp.isEquality() &amp;&amp; XorC-&gt;<a class="code" href="classllvm_1_1APInt.html#a4aa7e7ca8ab4093fd0dbadb223b998c0">isSignMask</a>()) {</div>
<div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;      Pred = Cmp.getFlippedSignednessPredicate();</div>
<div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getType(), <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> ^ *XorC));</div>
<div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;    }</div>
<div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160; </div>
<div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;    <span class="comment">// (icmp u/s (xor X ~SignMask), C) -&gt; (icmp s/u X, (xor C ~SignMask))</span></div>
<div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;    <span class="keywordflow">if</span> (!Cmp.isEquality() &amp;&amp; XorC-&gt;<a class="code" href="classllvm_1_1APInt.html#ac8099bedfdef48644386b16230fef2e5">isMaxSignedValue</a>()) {</div>
<div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;      Pred = Cmp.getFlippedSignednessPredicate();</div>
<div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;      Pred = Cmp.getSwappedPredicate(Pred);</div>
<div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getType(), <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> ^ *XorC));</div>
<div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;    }</div>
<div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;  }</div>
<div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160; </div>
<div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;  <span class="comment">// Mask constant magic can eliminate an &#39;xor&#39; with unsigned compares.</span></div>
<div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;  <span class="keywordflow">if</span> (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba607cecdc5172814382033e001ed11fad">ICmpInst::ICMP_UGT</a>) {</div>
<div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;    <span class="comment">// (xor X, ~C) &gt;u C --&gt; X &lt;u ~C (when C+1 is a power of 2)</span></div>
<div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;    <span class="keywordflow">if</span> (*XorC == ~<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> &amp;&amp; (<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> + 1).isPowerOf2())</div>
<div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e">ICmpInst::ICMP_ULT</a>, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>);</div>
<div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;    <span class="comment">// (xor X, C) &gt;u C --&gt; X &gt;u C (when C+1 is a power of 2)</span></div>
<div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;    <span class="keywordflow">if</span> (*XorC == <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> &amp;&amp; (<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> + 1).isPowerOf2())</div>
<div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba607cecdc5172814382033e001ed11fad">ICmpInst::ICMP_UGT</a>, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>);</div>
<div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;  }</div>
<div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;  <span class="keywordflow">if</span> (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e">ICmpInst::ICMP_ULT</a>) {</div>
<div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;    <span class="comment">// (xor X, -C) &lt;u C --&gt; X &gt;u ~C (when C is a power of 2)</span></div>
<div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;    <span class="keywordflow">if</span> (*XorC == -<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> &amp;&amp; <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.<a class="code" href="classllvm_1_1APInt.html#ad1b0513de876d1c85cf6268ca21b2c86">isPowerOf2</a>())</div>
<div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba607cecdc5172814382033e001ed11fad">ICmpInst::ICMP_UGT</a>, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>,</div>
<div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;                          <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getType(), ~<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>));</div>
<div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;    <span class="comment">// (xor X, C) &lt;u C --&gt; X &gt;u ~C (when -C is a power of 2)</span></div>
<div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;    <span class="keywordflow">if</span> (*XorC == <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> &amp;&amp; (-<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>).isPowerOf2())</div>
<div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba607cecdc5172814382033e001ed11fad">ICmpInst::ICMP_UGT</a>, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>,</div>
<div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;                          <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getType(), ~<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>));</div>
<div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;  }</div>
<div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;}</div>
<div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;<span class="comment">/// For power-of-2 C:</span></div>
<div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;<span class="comment">/// ((X s&gt;&gt; ShiftC) ^ X) u&lt; C --&gt; (X + C) u&lt; (C &lt;&lt; 1)</span></div>
<div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;<span class="comment">/// ((X s&gt;&gt; ShiftC) ^ X) u&gt; (C - 1) --&gt; (X + C) u&gt; ((C &lt;&lt; 1) - 1)</span></div>
<div class="line"><a name="l01619"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombinerImpl.html#abb66b7fb706f49e1966d64fa3ebeabfb"> 1619</a></span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombinerImpl.html#abb66b7fb706f49e1966d64fa3ebeabfb">InstCombinerImpl::foldICmpXorShiftConst</a>(<a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> &amp;Cmp,</div>
<div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;                                                     <a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> *Xor,</div>
<div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;                                                     <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> &amp;<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>) {</div>
<div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;  <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">CmpInst::Predicate</a> Pred = Cmp.getPredicate();</div>
<div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;  <a class="code" href="classllvm_1_1APInt.html">APInt</a> PowerOf2;</div>
<div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;  <span class="keywordflow">if</span> (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e">ICmpInst::ICMP_ULT</a>)</div>
<div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;    PowerOf2 = <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>;</div>
<div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba607cecdc5172814382033e001ed11fad">ICmpInst::ICMP_UGT</a> &amp;&amp; !<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.isMaxValue())</div>
<div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;    PowerOf2 = <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> + 1;</div>
<div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;  <span class="keywordflow">if</span> (!PowerOf2.<a class="code" href="classllvm_1_1APInt.html#ad1b0513de876d1c85cf6268ca21b2c86">isPowerOf2</a>())</div>
<div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>;</div>
<div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *ShiftC;</div>
<div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830ea76feb79109026728a20736a8c6504548">Xor</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a5cd1934b6c8ddec3a2d161ce710d59bc">m_c_Xor</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>),</div>
<div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;                                   <a class="code" href="namespacellvm_1_1PatternMatch.html#a64153676e101a130bbbaaf91635d253a">m_AShr</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a94bf3939e0bea91b481096473d0e549f">m_Deferred</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(ShiftC))))))</div>
<div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;  <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> <a class="code" href="lib_2Target_2README_8txt.html#a8db36c82f32d6f6a4d35a00e55be03a8">Shift</a> = ShiftC-&gt;<a class="code" href="classllvm_1_1APInt.html#ab01d8694a759a934e01f1c558c3ce862">getLimitedValue</a>();</div>
<div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *XType = <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getType();</div>
<div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="lib_2Target_2README_8txt.html#a8db36c82f32d6f6a4d35a00e55be03a8">Shift</a> == 0 || PowerOf2.<a class="code" href="classllvm_1_1APInt.html#a1f04e382556a817950fd0390aeaf9b0e">isMinSignedValue</a>())</div>
<div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Add = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAdd(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(XType, PowerOf2));</div>
<div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;  <a class="code" href="classllvm_1_1APInt.html">APInt</a> Bound =</div>
<div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;      Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e">ICmpInst::ICMP_ULT</a> ? PowerOf2 &lt;&lt; 1 : ((PowerOf2 &lt;&lt; 1) - 1);</div>
<div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, Add, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(XType, Bound));</div>
<div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;}</div>
<div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;<span class="comment">/// Fold icmp (and (sh X, Y), C2), C1.</span></div>
<div class="line"><a name="l01648"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombinerImpl.html#ab60c98e34bf6a4b6b599ab93a3f12b06"> 1648</a></span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombinerImpl.html#ab60c98e34bf6a4b6b599ab93a3f12b06">InstCombinerImpl::foldICmpAndShift</a>(<a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> &amp;Cmp,</div>
<div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;                                                <a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> *And,</div>
<div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;                                                <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> &amp;<a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>,</div>
<div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;                                                <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> &amp;C2) {</div>
<div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;  <a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> *<a class="code" href="lib_2Target_2README_8txt.html#a8db36c82f32d6f6a4d35a00e55be03a8">Shift</a> = dyn_cast&lt;BinaryOperator&gt;(<a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eac33315685a0cba3ce53be378b3c7874b">And</a>-&gt;getOperand(0));</div>
<div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="lib_2Target_2README_8txt.html#a8db36c82f32d6f6a4d35a00e55be03a8">Shift</a> || !<a class="code" href="lib_2Target_2README_8txt.html#a8db36c82f32d6f6a4d35a00e55be03a8">Shift</a>-&gt;isShift())</div>
<div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160; </div>
<div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;  <span class="comment">// If this is: (X &gt;&gt; C3) &amp; C2 != C1 (where any shift and any compare could</span></div>
<div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;  <span class="comment">// exist), turn it into (X &amp; (C2 &lt;&lt; C3)) != (C1 &lt;&lt; C3). This happens a LOT in</span></div>
<div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;  <span class="comment">// code produced by the clang front-end, for bitfield access.</span></div>
<div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;  <span class="comment">// This seemingly simple opportunity to fold away a shift turns out to be</span></div>
<div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;  <span class="comment">// rather complicated. See PR17827 for details.</span></div>
<div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;  <span class="keywordtype">unsigned</span> ShiftOpcode = <a class="code" href="lib_2Target_2README_8txt.html#a8db36c82f32d6f6a4d35a00e55be03a8">Shift</a>-&gt;getOpcode();</div>
<div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;  <span class="keywordtype">bool</span> IsShl = ShiftOpcode == Instruction::Shl;</div>
<div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *C3;</div>
<div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="lib_2Target_2README_8txt.html#a8db36c82f32d6f6a4d35a00e55be03a8">Shift</a>-&gt;getOperand(1), <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(C3))) {</div>
<div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;    <a class="code" href="classllvm_1_1APInt.html">APInt</a> NewAndCst, NewCmpCst;</div>
<div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;    <span class="keywordtype">bool</span> AnyCmpCstBitsShiftedOut;</div>
<div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;    <span class="keywordflow">if</span> (ShiftOpcode == Instruction::Shl) {</div>
<div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;      <span class="comment">// For a left shift, we can fold if the comparison is not signed. We can</span></div>
<div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;      <span class="comment">// also fold a signed comparison if the mask value and comparison value</span></div>
<div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;      <span class="comment">// are not negative. These constraints may not be obvious, but we can</span></div>
<div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;      <span class="comment">// prove that they are correct using an SMT solver.</span></div>
<div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;      <span class="keywordflow">if</span> (Cmp.isSigned() &amp;&amp; (C2.<a class="code" href="classllvm_1_1APInt.html#a6804d9caf15411f55e7b9e9f397f0422">isNegative</a>() || <a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>.isNegative()))</div>
<div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160; </div>
<div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;      NewCmpCst = <a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>.lshr(*C3);</div>
<div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;      NewAndCst = C2.<a class="code" href="classllvm_1_1APInt.html#af34549c39d6f741fbdaf9a795aa306e9">lshr</a>(*C3);</div>
<div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;      AnyCmpCstBitsShiftedOut = NewCmpCst.<a class="code" href="classllvm_1_1APInt.html#acb9c55b6986369948507ca5241b4e411">shl</a>(*C3) != <a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>;</div>
<div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ShiftOpcode == Instruction::LShr) {</div>
<div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;      <span class="comment">// For a logical right shift, we can fold if the comparison is not signed.</span></div>
<div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;      <span class="comment">// We can also fold a signed comparison if the shifted mask value and the</span></div>
<div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;      <span class="comment">// shifted comparison value are not negative. These constraints may not be</span></div>
<div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;      <span class="comment">// obvious, but we can prove that they are correct using an SMT solver.</span></div>
<div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;      NewCmpCst = <a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>.shl(*C3);</div>
<div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;      NewAndCst = C2.<a class="code" href="classllvm_1_1APInt.html#acb9c55b6986369948507ca5241b4e411">shl</a>(*C3);</div>
<div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;      AnyCmpCstBitsShiftedOut = NewCmpCst.<a class="code" href="classllvm_1_1APInt.html#af34549c39d6f741fbdaf9a795aa306e9">lshr</a>(*C3) != <a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>;</div>
<div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;      <span class="keywordflow">if</span> (Cmp.isSigned() &amp;&amp; (NewAndCst.<a class="code" href="classllvm_1_1APInt.html#a6804d9caf15411f55e7b9e9f397f0422">isNegative</a>() || NewCmpCst.<a class="code" href="classllvm_1_1APInt.html#a6804d9caf15411f55e7b9e9f397f0422">isNegative</a>()))</div>
<div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;      <span class="comment">// For an arithmetic shift, check that both constants don&#39;t use (in a</span></div>
<div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;      <span class="comment">// signed sense) the top bits being shifted out.</span></div>
<div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(ShiftOpcode == Instruction::AShr &amp;&amp; <span class="stringliteral">&quot;Unknown shift opcode&quot;</span>);</div>
<div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;      NewCmpCst = <a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>.shl(*C3);</div>
<div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;      NewAndCst = C2.<a class="code" href="classllvm_1_1APInt.html#acb9c55b6986369948507ca5241b4e411">shl</a>(*C3);</div>
<div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;      AnyCmpCstBitsShiftedOut = NewCmpCst.<a class="code" href="classllvm_1_1APInt.html#ab6006923d1a3139d70abc8f6552a7960">ashr</a>(*C3) != <a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>;</div>
<div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;      <span class="keywordflow">if</span> (NewAndCst.<a class="code" href="classllvm_1_1APInt.html#ab6006923d1a3139d70abc8f6552a7960">ashr</a>(*C3) != C2)</div>
<div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;    }</div>
<div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160; </div>
<div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;    <span class="keywordflow">if</span> (AnyCmpCstBitsShiftedOut) {</div>
<div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;      <span class="comment">// If we shifted bits out, the fold is not going to work out. As a</span></div>
<div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;      <span class="comment">// special case, check to see if this means that the result is always</span></div>
<div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;      <span class="comment">// true or false now.</span></div>
<div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;      <span class="keywordflow">if</span> (Cmp.getPredicate() == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a>)</div>
<div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;        <span class="keywordflow">return</span> replaceInstUsesWith(Cmp, <a class="code" href="classllvm_1_1ConstantInt.html#aa7cce62ac5cc6df09cce0535874336b7">ConstantInt::getFalse</a>(Cmp.getType()));</div>
<div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;      <span class="keywordflow">if</span> (Cmp.getPredicate() == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a>)</div>
<div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;        <span class="keywordflow">return</span> replaceInstUsesWith(Cmp, <a class="code" href="classllvm_1_1ConstantInt.html#a82dbbd8e3688b0bc1eedb338864d0d0c">ConstantInt::getTrue</a>(Cmp.getType()));</div>
<div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *NewAnd = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAnd(</div>
<div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;          <a class="code" href="lib_2Target_2README_8txt.html#a8db36c82f32d6f6a4d35a00e55be03a8">Shift</a>-&gt;getOperand(0), <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(<a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eac33315685a0cba3ce53be378b3c7874b">And</a>-&gt;getType(), NewAndCst));</div>
<div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Cmp.getPredicate(),</div>
<div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;          NewAnd, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(<a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eac33315685a0cba3ce53be378b3c7874b">And</a>-&gt;getType(), NewCmpCst));</div>
<div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;    }</div>
<div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;  }</div>
<div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160; </div>
<div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;  <span class="comment">// Turn ((X &gt;&gt; Y) &amp; C2) == 0  into  (X &amp; (C2 &lt;&lt; Y)) == 0.  The latter is</span></div>
<div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;  <span class="comment">// preferable because it allows the C2 &lt;&lt; Y expression to be hoisted out of a</span></div>
<div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;  <span class="comment">// loop if Y is invariant and X is not.</span></div>
<div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="lib_2Target_2README_8txt.html#a8db36c82f32d6f6a4d35a00e55be03a8">Shift</a>-&gt;hasOneUse() &amp;&amp; <a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>.isZero() &amp;&amp; Cmp.isEquality() &amp;&amp;</div>
<div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;      !<a class="code" href="lib_2Target_2README_8txt.html#a8db36c82f32d6f6a4d35a00e55be03a8">Shift</a>-&gt;isArithmeticShift() &amp;&amp; !isa&lt;Constant&gt;(<a class="code" href="lib_2Target_2README_8txt.html#a8db36c82f32d6f6a4d35a00e55be03a8">Shift</a>-&gt;getOperand(0))) {</div>
<div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;    <span class="comment">// Compute C2 &lt;&lt; Y.</span></div>
<div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *NewShift =</div>
<div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;        IsShl ? <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateLShr(<a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eac33315685a0cba3ce53be378b3c7874b">And</a>-&gt;getOperand(1), <a class="code" href="lib_2Target_2README_8txt.html#a8db36c82f32d6f6a4d35a00e55be03a8">Shift</a>-&gt;getOperand(1))</div>
<div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;              : <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateShl(<a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eac33315685a0cba3ce53be378b3c7874b">And</a>-&gt;getOperand(1), <a class="code" href="lib_2Target_2README_8txt.html#a8db36c82f32d6f6a4d35a00e55be03a8">Shift</a>-&gt;getOperand(1));</div>
<div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160; </div>
<div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;    <span class="comment">// Compute X &amp; (C2 &lt;&lt; Y).</span></div>
<div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *NewAnd = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAnd(<a class="code" href="lib_2Target_2README_8txt.html#a8db36c82f32d6f6a4d35a00e55be03a8">Shift</a>-&gt;getOperand(0), NewShift);</div>
<div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;    <span class="keywordflow">return</span> replaceOperand(Cmp, 0, NewAnd);</div>
<div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;  }</div>
<div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160; </div>
<div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;}</div>
<div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;<span class="comment">/// Fold icmp (and X, C2), C1.</span></div>
<div class="line"><a name="l01734"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombinerImpl.html#afa5f2de80c23c28bd1a3320e8369aab2"> 1734</a></span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombinerImpl.html#afa5f2de80c23c28bd1a3320e8369aab2">InstCombinerImpl::foldICmpAndConstConst</a>(<a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> &amp;Cmp,</div>
<div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;                                                     <a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> *And,</div>
<div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;                                                     <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> &amp;<a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>) {</div>
<div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;  <span class="keywordtype">bool</span> isICMP_NE = Cmp.getPredicate() == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a>;</div>
<div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160; </div>
<div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;  <span class="comment">// For vectors: icmp ne (and X, 1), 0 --&gt; trunc X to N x i1</span></div>
<div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;  <span class="comment">// TODO: We canonicalize to the longer form for scalars because we have</span></div>
<div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;  <span class="comment">// better analysis/folds for icmp, and codegen may be better with icmp.</span></div>
<div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;  <span class="keywordflow">if</span> (isICMP_NE &amp;&amp; Cmp.getType()-&gt;isVectorTy() &amp;&amp; <a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>.isZero() &amp;&amp;</div>
<div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;      <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eac33315685a0cba3ce53be378b3c7874b">And</a>-&gt;getOperand(1), <a class="code" href="namespacellvm_1_1PatternMatch.html#aebdb2700a77d10ae6f0ce115e23d9f77">m_One</a>()))</div>
<div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1TruncInst.html">TruncInst</a>(<a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eac33315685a0cba3ce53be378b3c7874b">And</a>-&gt;getOperand(0), Cmp.getType());</div>
<div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160; </div>
<div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *C2;</div>
<div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>;</div>
<div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eac33315685a0cba3ce53be378b3c7874b">And</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a427435d4da769ae680a8e77ef89520aa">m_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(C2))))</div>
<div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160; </div>
<div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;  <span class="comment">// Don&#39;t perform the following transforms if the AND has multiple uses</span></div>
<div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eac33315685a0cba3ce53be378b3c7874b">And</a>-&gt;hasOneUse())</div>
<div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160; </div>
<div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;  <span class="keywordflow">if</span> (Cmp.isEquality() &amp;&amp; <a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>.isZero()) {</div>
<div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;    <span class="comment">// Restrict this fold to single-use &#39;and&#39; (PR10267).</span></div>
<div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;    <span class="comment">// Replace (and X, (1 &lt;&lt; size(X)-1) != 0) with X s&lt; 0</span></div>
<div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;    <span class="keywordflow">if</span> (C2-&gt;<a class="code" href="classllvm_1_1APInt.html#a4aa7e7ca8ab4093fd0dbadb223b998c0">isSignMask</a>()) {</div>
<div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;      <a class="code" href="classllvm_1_1Constant.html">Constant</a> *Zero = <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getType());</div>
<div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;      <span class="keyword">auto</span> NewPred = isICMP_NE ? <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba15ae464950ac676919c2f0c7aafc706c">ICmpInst::ICMP_SLT</a> : <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac1aa7b798ba11d2e497d5cce6ce6d3dc">ICmpInst::ICMP_SGE</a>;</div>
<div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(NewPred, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, Zero);</div>
<div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;    }</div>
<div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160; </div>
<div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;    <a class="code" href="classllvm_1_1APInt.html">APInt</a> NewC2 = *C2;</div>
<div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;    <a class="code" href="structllvm_1_1KnownBits.html">KnownBits</a> Know = <a class="code" href="namespacellvm.html#aa1f8f0633edd8b9a1c5ec15bb9fc5640">computeKnownBits</a>(<a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eac33315685a0cba3ce53be378b3c7874b">And</a>-&gt;getOperand(0), 0, <a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eac33315685a0cba3ce53be378b3c7874b">And</a>);</div>
<div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;    <span class="comment">// Set high zeros of C2 to allow matching negated power-of-2.</span></div>
<div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;    NewC2 = *C2 | <a class="code" href="classllvm_1_1APInt.html#adcb96bd09d7c75c7669fa5f9d1190899">APInt::getHighBitsSet</a>(C2-&gt;<a class="code" href="classllvm_1_1APInt.html#a512fe2c15ea651294688eeec1341644c">getBitWidth</a>(),</div>
<div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;                                        Know.<a class="code" href="structllvm_1_1KnownBits.html#a7f47812e8e75b0616a97d7004e5fb909">countMinLeadingZeros</a>());</div>
<div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160; </div>
<div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;    <span class="comment">// Restrict this fold only for single-use &#39;and&#39; (PR10267).</span></div>
<div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;    <span class="comment">// ((%x &amp; C) == 0) --&gt; %x u&lt; (-C)  iff (-C) is power of two.</span></div>
<div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;    <span class="keywordflow">if</span> (NewC2.<a class="code" href="classllvm_1_1APInt.html#a1b6b4785fa27be394cf040e543d9fe7c">isNegatedPowerOf2</a>()) {</div>
<div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;      <a class="code" href="classllvm_1_1Constant.html">Constant</a> *NegBOC = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(<a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eac33315685a0cba3ce53be378b3c7874b">And</a>-&gt;getType(), -NewC2);</div>
<div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;      <span class="keyword">auto</span> NewPred = isICMP_NE ? <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba573bcd571c938fce863525330bbfc4b8">ICmpInst::ICMP_UGE</a> : <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e">ICmpInst::ICMP_ULT</a>;</div>
<div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(NewPred, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, NegBOC);</div>
<div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;    }</div>
<div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;  }</div>
<div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160; </div>
<div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;  <span class="comment">// If the LHS is an &#39;and&#39; of a truncate and we can widen the and/compare to</span></div>
<div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;  <span class="comment">// the input width without changing the value produced, eliminate the cast:</span></div>
<div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;  <span class="comment">// icmp (and (trunc W), C2), C1 -&gt; icmp (and W, C2&#39;), C1&#39;</span></div>
<div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;  <span class="comment">// We can do this transformation if the constants do not have their sign bits</span></div>
<div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;  <span class="comment">// set or if it is an equality comparison. Extending a relational comparison</span></div>
<div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;  <span class="comment">// when we&#39;re checking the sign bit would not work.</span></div>
<div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa05c79fbfc58d9dd2851c467a1ef166bf">W</a>;</div>
<div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eac33315685a0cba3ce53be378b3c7874b">And</a>-&gt;getOperand(0), <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a5b844aada27c4c6fdb87146ac458c0d8">m_Trunc</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa05c79fbfc58d9dd2851c467a1ef166bf">W</a>)))) &amp;&amp;</div>
<div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;      (Cmp.isEquality() || (!<a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>.isNegative() &amp;&amp; !C2-&gt;<a class="code" href="classllvm_1_1APInt.html#a6804d9caf15411f55e7b9e9f397f0422">isNegative</a>()))) {</div>
<div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;    <span class="comment">// TODO: Is this a good transform for vectors? Wider types may reduce</span></div>
<div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;    <span class="comment">// throughput. Should this transform be limited (even for scalars) by using</span></div>
<div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;    <span class="comment">// shouldChangeType()?</span></div>
<div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;    <span class="keywordflow">if</span> (!Cmp.getType()-&gt;isVectorTy()) {</div>
<div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;      <a class="code" href="classllvm_1_1Type.html">Type</a> *WideType = <a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa05c79fbfc58d9dd2851c467a1ef166bf">W</a>-&gt;getType();</div>
<div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;      <span class="keywordtype">unsigned</span> WideScalarBits = WideType-&gt;<a class="code" href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>();</div>
<div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;      <a class="code" href="classllvm_1_1Constant.html">Constant</a> *ZextC1 = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(WideType, <a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>.zext(WideScalarBits));</div>
<div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;      <a class="code" href="classllvm_1_1Constant.html">Constant</a> *ZextC2 = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(WideType, C2-&gt;<a class="code" href="classllvm_1_1APInt.html#a1dc76cc8bf703e6ada68bededcbb9573">zext</a>(WideScalarBits));</div>
<div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *NewAnd = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAnd(<a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa05c79fbfc58d9dd2851c467a1ef166bf">W</a>, ZextC2, <a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eac33315685a0cba3ce53be378b3c7874b">And</a>-&gt;getName());</div>
<div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Cmp.getPredicate(), NewAnd, ZextC1);</div>
<div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;    }</div>
<div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;  }</div>
<div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160; </div>
<div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = foldICmpAndShift(Cmp, <a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eac33315685a0cba3ce53be378b3c7874b">And</a>, <a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>, *C2))</div>
<div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160; </div>
<div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;  <span class="comment">// (icmp pred (and (or (lshr A, B), A), 1), 0) --&gt;</span></div>
<div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;  <span class="comment">// (icmp pred (and A, (or (shl 1, B), 1), 0))</span></div>
<div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;  <span class="comment">// iff pred isn&#39;t signed</span></div>
<div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;  <span class="keywordflow">if</span> (!Cmp.isSigned() &amp;&amp; <a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>.isZero() &amp;&amp; <a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eac33315685a0cba3ce53be378b3c7874b">And</a>-&gt;getOperand(0)-&gt;hasOneUse() &amp;&amp;</div>
<div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;      <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eac33315685a0cba3ce53be378b3c7874b">And</a>-&gt;getOperand(1), <a class="code" href="namespacellvm_1_1PatternMatch.html#aebdb2700a77d10ae6f0ce115e23d9f77">m_One</a>())) {</div>
<div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;    <a class="code" href="classllvm_1_1Constant.html">Constant</a> *One = cast&lt;Constant&gt;(<a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eac33315685a0cba3ce53be378b3c7874b">And</a>-&gt;getOperand(1));</div>
<div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830ea3a2d5fe857d8f9541136a124c2edec6c">Or</a> = <a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eac33315685a0cba3ce53be378b3c7874b">And</a>-&gt;getOperand(0);</div>
<div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *A, *<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, *LShr;</div>
<div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830ea3a2d5fe857d8f9541136a124c2edec6c">Or</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a42569041ddafba7d40243e126af07f42">m_Or</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(LShr), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A))) &amp;&amp;</div>
<div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;        <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(LShr, <a class="code" href="namespacellvm_1_1PatternMatch.html#aa08fee11e8a5ec10c0cc2a7abbbd799a">m_LShr</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>)))) {</div>
<div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;      <span class="keywordtype">unsigned</span> UsesRemoved = 0;</div>
<div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eac33315685a0cba3ce53be378b3c7874b">And</a>-&gt;hasOneUse())</div>
<div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;        ++UsesRemoved;</div>
<div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830ea3a2d5fe857d8f9541136a124c2edec6c">Or</a>-&gt;hasOneUse())</div>
<div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;        ++UsesRemoved;</div>
<div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;      <span class="keywordflow">if</span> (LShr-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>())</div>
<div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;        ++UsesRemoved;</div>
<div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160; </div>
<div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;      <span class="comment">// Compute A &amp; ((1 &lt;&lt; B) | 1)</span></div>
<div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *NewOr = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = dyn_cast&lt;Constant&gt;(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>)) {</div>
<div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;        <span class="keywordflow">if</span> (UsesRemoved &gt;= 1)</div>
<div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;          NewOr = <a class="code" href="classllvm_1_1ConstantExpr.html#adc8a4e6a8e701e1924f0293da78badb6">ConstantExpr::getOr</a>(<a class="code" href="classllvm_1_1ConstantExpr.html#a894f338095f5f9abf4a3a6344a905cb3">ConstantExpr::getNUWShl</a>(One, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>), One);</div>
<div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;        <span class="keywordflow">if</span> (UsesRemoved &gt;= 3)</div>
<div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;          NewOr = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateOr(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateShl(One, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, LShr-&gt;<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>(),</div>
<div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;                                                     <span class="comment">/*HasNUW=*/</span><span class="keyword">true</span>),</div>
<div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;                                   One, <a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830ea3a2d5fe857d8f9541136a124c2edec6c">Or</a>-&gt;getName());</div>
<div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;      }</div>
<div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;      <span class="keywordflow">if</span> (NewOr) {</div>
<div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *NewAnd = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAnd(A, NewOr, <a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eac33315685a0cba3ce53be378b3c7874b">And</a>-&gt;getName());</div>
<div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;        <span class="keywordflow">return</span> replaceOperand(Cmp, 0, NewAnd);</div>
<div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;      }</div>
<div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;    }</div>
<div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;  }</div>
<div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160; </div>
<div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;}</div>
<div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;<span class="comment">/// Fold icmp (and X, Y), C.</span></div>
<div class="line"><a name="l01847"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombinerImpl.html#ac457b78bde79027e427b9d2ca79bb2f1"> 1847</a></span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombinerImpl.html#ac457b78bde79027e427b9d2ca79bb2f1">InstCombinerImpl::foldICmpAndConstant</a>(<a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> &amp;Cmp,</div>
<div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;                                                   <a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> *And,</div>
<div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;                                                   <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> &amp;<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>) {</div>
<div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = foldICmpAndConstConst(Cmp, <a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eac33315685a0cba3ce53be378b3c7874b">And</a>, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>))</div>
<div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160; </div>
<div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">ICmpInst::Predicate</a> Pred = Cmp.getPredicate();</div>
<div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;  <span class="keywordtype">bool</span> TrueIfNeg;</div>
<div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;  <span class="keywordflow">if</span> (isSignBitCheck(Pred, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, TrueIfNeg)) {</div>
<div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;    <span class="comment">// ((X - 1) &amp; ~X) &lt;  0 --&gt; X == 0</span></div>
<div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;    <span class="comment">// ((X - 1) &amp; ~X) &gt;= 0 --&gt; X != 0</span></div>
<div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>;</div>
<div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eac33315685a0cba3ce53be378b3c7874b">And</a>-&gt;getOperand(0), <a class="code" href="namespacellvm_1_1PatternMatch.html#a944c25ac9b73b02a17a20a08a25b9b21">m_Add</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#aaea0d5ebb8b57ddde2095f80e2e94bb2">m_AllOnes</a>())) &amp;&amp;</div>
<div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;        <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eac33315685a0cba3ce53be378b3c7874b">And</a>-&gt;getOperand(1), <a class="code" href="namespacellvm_1_1PatternMatch.html#a2ff0f084844b189a858647d637d47eba">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>)))) {</div>
<div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;      <span class="keyword">auto</span> NewPred = TrueIfNeg ? <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">CmpInst::ICMP_EQ</a> : <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">CmpInst::ICMP_NE</a>;</div>
<div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(NewPred, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">ConstantInt::getNullValue</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getType()));</div>
<div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;    }</div>
<div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;  }</div>
<div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160; </div>
<div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;  <span class="comment">// TODO: These all require that Y is constant too, so refactor with the above.</span></div>
<div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160; </div>
<div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;  <span class="comment">// Try to optimize things like &quot;A[i] &amp; 42 == 0&quot; to index computations.</span></div>
<div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a> = <a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eac33315685a0cba3ce53be378b3c7874b">And</a>-&gt;getOperand(0);</div>
<div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a> = <a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eac33315685a0cba3ce53be378b3c7874b">And</a>-&gt;getOperand(1);</div>
<div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *C2 = dyn_cast&lt;ConstantInt&gt;(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>))</div>
<div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> *LI = dyn_cast&lt;LoadInst&gt;(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>))</div>
<div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> *<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a> = dyn_cast&lt;GetElementPtrInst&gt;(LI-&gt;getOperand(0)))</div>
<div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;        <span class="keywordflow">if</span> (<span class="keyword">auto</span> *GV = dyn_cast&lt;GlobalVariable&gt;(<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>-&gt;getOperand(0)))</div>
<div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Res =</div>
<div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;                  foldCmpLoadFromIndexedGlobal(LI, <a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>, GV, Cmp, C2))</div>
<div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;            <span class="keywordflow">return</span> Res;</div>
<div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160; </div>
<div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;  <span class="keywordflow">if</span> (!Cmp.isEquality())</div>
<div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160; </div>
<div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;  <span class="comment">// X &amp; -C == -C -&gt; X &gt;  u ~C</span></div>
<div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;  <span class="comment">// X &amp; -C != -C -&gt; X &lt;= u ~C</span></div>
<div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;  <span class="comment">//   iff C is a power of 2</span></div>
<div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;  <span class="keywordflow">if</span> (Cmp.getOperand(1) == <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a> &amp;&amp; <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.isNegatedPowerOf2()) {</div>
<div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;    <span class="keyword">auto</span> NewPred =</div>
<div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;        Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">CmpInst::ICMP_EQ</a> ? <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba607cecdc5172814382033e001ed11fad">CmpInst::ICMP_UGT</a> : <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bad92f160316221fd4090520bb2b3cefc5">CmpInst::ICMP_ULE</a>;</div>
<div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(NewPred, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, SubOne(cast&lt;Constant&gt;(Cmp.getOperand(1))));</div>
<div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;  }</div>
<div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160; </div>
<div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;  <span class="comment">// If we are testing the intersection of 2 select-of-nonzero-constants with no</span></div>
<div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;  <span class="comment">// common bits set, it&#39;s the same as checking if exactly one select condition</span></div>
<div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;  <span class="comment">// is set:</span></div>
<div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;  <span class="comment">// ((A ? TC : FC) &amp; (B ? TC : FC)) == 0 --&gt; xor A, B</span></div>
<div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;  <span class="comment">// ((A ? TC : FC) &amp; (B ? TC : FC)) != 0 --&gt; not(xor A, B)</span></div>
<div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;  <span class="comment">// TODO: Generalize for non-constant values.</span></div>
<div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;  <span class="comment">// TODO: Handle signed/unsigned predicates.</span></div>
<div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;  <span class="comment">// TODO: Handle other bitwise logic connectors.</span></div>
<div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;  <span class="comment">// TODO: Extend to handle a non-zero compare constant.</span></div>
<div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.isZero() &amp;&amp; (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">CmpInst::ICMP_EQ</a> || <a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eac33315685a0cba3ce53be378b3c7874b">And</a>-&gt;hasOneUse())) {</div>
<div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Cmp.isEquality() &amp;&amp; <span class="stringliteral">&quot;Not expecting non-equality predicates&quot;</span>);</div>
<div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *A, *<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>;</div>
<div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *TC, *<a class="code" href="namespaceR600__InstFlag.html#a23106439cc906be24dc8953eedd3940da8949a42ff4563a29d1e70e18338fd522">FC</a>;</div>
<div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#addb87fe3f509b7803d3f5933ee24b560">m_Select</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(TC), <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(<a class="code" href="namespaceR600__InstFlag.html#a23106439cc906be24dc8953eedd3940da8949a42ff4563a29d1e70e18338fd522">FC</a>))) &amp;&amp;</div>
<div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;        <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>,</div>
<div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;              <a class="code" href="namespacellvm_1_1PatternMatch.html#addb87fe3f509b7803d3f5933ee24b560">m_Select</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a3acbd0be97863e3e03e3b85641254018">m_SpecificInt</a>(*TC), <a class="code" href="namespacellvm_1_1PatternMatch.html#a3acbd0be97863e3e03e3b85641254018">m_SpecificInt</a>(*<a class="code" href="namespaceR600__InstFlag.html#a23106439cc906be24dc8953eedd3940da8949a42ff4563a29d1e70e18338fd522">FC</a>))) &amp;&amp;</div>
<div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;        !TC-&gt;<a class="code" href="classllvm_1_1APInt.html#a49cd5939942c6665aba4cae8c220dff1">isZero</a>() &amp;&amp; !<a class="code" href="namespaceR600__InstFlag.html#a23106439cc906be24dc8953eedd3940da8949a42ff4563a29d1e70e18338fd522">FC</a>-&gt;isZero() &amp;&amp; !TC-&gt;<a class="code" href="classllvm_1_1APInt.html#a6da514c588b2668280a861a59bfc9fa5">intersects</a>(*<a class="code" href="namespaceR600__InstFlag.html#a23106439cc906be24dc8953eedd3940da8949a42ff4563a29d1e70e18338fd522">FC</a>)) {</div>
<div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *R = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateXor(A, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div>
<div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;      <span class="keywordflow">if</span> (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">CmpInst::ICMP_NE</a>)</div>
<div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;        R = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateNot(R);</div>
<div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;      <span class="keywordflow">return</span> replaceInstUsesWith(Cmp, R);</div>
<div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;    }</div>
<div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;  }</div>
<div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160; </div>
<div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;  <span class="comment">// ((zext i1 X) &amp; Y) == 0 --&gt; !((trunc Y) &amp; X)</span></div>
<div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;  <span class="comment">// ((zext i1 X) &amp; Y) != 0 --&gt;  ((trunc Y) &amp; X)</span></div>
<div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;  <span class="comment">// ((zext i1 X) &amp; Y) == 1 --&gt;  ((trunc Y) &amp; X)</span></div>
<div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;  <span class="comment">// ((zext i1 X) &amp; Y) != 1 --&gt; !((trunc Y) &amp; X)</span></div>
<div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eac33315685a0cba3ce53be378b3c7874b">And</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#ae9d735be1ececf149966a4da253f0320">m_c_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2cbdca7c8267aac6914d674f8e81841b">m_ZExt</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>))), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>)))) &amp;&amp;</div>
<div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;      <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getType()-&gt;isIntOrIntVectorTy(1) &amp;&amp; (<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.isZero() || <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.isOne())) {</div>
<div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *TruncY = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateTrunc(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getType());</div>
<div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.isZero() ^ (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">CmpInst::ICMP_NE</a>)) {</div>
<div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eac33315685a0cba3ce53be378b3c7874b">And</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAnd(TruncY, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>);</div>
<div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1BinaryOperator.html#a4f500ae0de71695b652af4c0958d8ea8">BinaryOperator::CreateNot</a>(<a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eac33315685a0cba3ce53be378b3c7874b">And</a>);</div>
<div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;    }</div>
<div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;    <span class="keywordflow">return</span> BinaryOperator::CreateAnd(TruncY, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>);</div>
<div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;  }</div>
<div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160; </div>
<div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;}</div>
<div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;<span class="comment">/// Fold icmp (or X, Y), C.</span></div>
<div class="line"><a name="l01933"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombinerImpl.html#a1140591a375ac3efde57977192880eb0"> 1933</a></span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombinerImpl.html#a1140591a375ac3efde57977192880eb0">InstCombinerImpl::foldICmpOrConstant</a>(<a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> &amp;Cmp,</div>
<div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;                                                  <a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> *Or,</div>
<div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;                                                  <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> &amp;<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>) {</div>
<div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;  <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">ICmpInst::Predicate</a> Pred = Cmp.getPredicate();</div>
<div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.isOne()) {</div>
<div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;    <span class="comment">// icmp slt signum(V) 1 --&gt; icmp slt V, 1</span></div>
<div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *V = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;    <span class="keywordflow">if</span> (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba15ae464950ac676919c2f0c7aafc706c">ICmpInst::ICMP_SLT</a> &amp;&amp; <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830ea3a2d5fe857d8f9541136a124c2edec6c">Or</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a50c6e9fa97e7373aca8dca86d385daa7">m_Signum</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(V))))</div>
<div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba15ae464950ac676919c2f0c7aafc706c">ICmpInst::ICMP_SLT</a>, V,</div>
<div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;                          <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(V-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>(), 1));</div>
<div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;  }</div>
<div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160; </div>
<div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *OrOp0 = <a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830ea3a2d5fe857d8f9541136a124c2edec6c">Or</a>-&gt;getOperand(0), *OrOp1 = <a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830ea3a2d5fe857d8f9541136a124c2edec6c">Or</a>-&gt;getOperand(1);</div>
<div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *MaskC;</div>
<div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(OrOp1, <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(MaskC)) &amp;&amp; Cmp.isEquality()) {</div>
<div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;    <span class="keywordflow">if</span> (*MaskC == <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> &amp;&amp; (<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> + 1).isPowerOf2()) {</div>
<div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;      <span class="comment">// X | C == C --&gt; X &lt;=u C</span></div>
<div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;      <span class="comment">// X | C != C --&gt; X  &gt;u C</span></div>
<div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;      <span class="comment">//   iff C+1 is a power of 2 (C is a bitmask of the low bits)</span></div>
<div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;      Pred = (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">CmpInst::ICMP_EQ</a>) ? <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bad92f160316221fd4090520bb2b3cefc5">CmpInst::ICMP_ULE</a> : <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba607cecdc5172814382033e001ed11fad">CmpInst::ICMP_UGT</a>;</div>
<div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, OrOp0, OrOp1);</div>
<div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;    }</div>
<div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160; </div>
<div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;    <span class="comment">// More general: canonicalize &#39;equality with set bits mask&#39; to</span></div>
<div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;    <span class="comment">// &#39;equality with clear bits mask&#39;.</span></div>
<div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;    <span class="comment">// (X | MaskC) == C --&gt; (X &amp; ~MaskC) == C ^ MaskC</span></div>
<div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;    <span class="comment">// (X | MaskC) != C --&gt; (X &amp; ~MaskC) != C ^ MaskC</span></div>
<div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830ea3a2d5fe857d8f9541136a124c2edec6c">Or</a>-&gt;hasOneUse()) {</div>
<div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eac33315685a0cba3ce53be378b3c7874b">And</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAnd(OrOp0, ~(*MaskC));</div>
<div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;      <a class="code" href="classllvm_1_1Constant.html">Constant</a> *NewC = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(<a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830ea3a2d5fe857d8f9541136a124c2edec6c">Or</a>-&gt;getType(), <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> ^ (*MaskC));</div>
<div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, <a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eac33315685a0cba3ce53be378b3c7874b">And</a>, NewC);</div>
<div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;    }</div>
<div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;  }</div>
<div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160; </div>
<div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;  <span class="comment">// (X | (X-1)) s&lt;  0 --&gt; X s&lt; 1</span></div>
<div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;  <span class="comment">// (X | (X-1)) s&gt; -1 --&gt; X s&gt; 0</span></div>
<div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>;</div>
<div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;  <span class="keywordtype">bool</span> TrueIfSigned;</div>
<div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;  <span class="keywordflow">if</span> (isSignBitCheck(Pred, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, TrueIfSigned) &amp;&amp;</div>
<div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;      <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830ea3a2d5fe857d8f9541136a124c2edec6c">Or</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a7af604b3a6b3a44113d4c54c5c04d031">m_c_Or</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a944c25ac9b73b02a17a20a08a25b9b21">m_Add</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#aaea0d5ebb8b57ddde2095f80e2e94bb2">m_AllOnes</a>()), <a class="code" href="namespacellvm_1_1PatternMatch.html#a94bf3939e0bea91b481096473d0e549f">m_Deferred</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>)))) {</div>
<div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;    <span class="keyword">auto</span> NewPred = TrueIfSigned ? <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba15ae464950ac676919c2f0c7aafc706c">ICmpInst::ICMP_SLT</a> : <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba720a42e85f7e981afd61e28473b0000a">ICmpInst::ICMP_SGT</a>;</div>
<div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;    <a class="code" href="classllvm_1_1Constant.html">Constant</a> *NewC = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getType(), TrueIfSigned ? 1 : 0);</div>
<div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(NewPred, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, NewC);</div>
<div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;  }</div>
<div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160; </div>
<div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;  <span class="keywordflow">if</span> (!Cmp.isEquality() || !<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.isZero() || !<a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830ea3a2d5fe857d8f9541136a124c2edec6c">Or</a>-&gt;hasOneUse())</div>
<div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160; </div>
<div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>, *Q;</div>
<div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830ea3a2d5fe857d8f9541136a124c2edec6c">Or</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a42569041ddafba7d40243e126af07f42">m_Or</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a3ffbacd388121d5e3ba1c4360b7449d0">m_PtrToInt</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>)), <a class="code" href="namespacellvm_1_1PatternMatch.html#a3ffbacd388121d5e3ba1c4360b7449d0">m_PtrToInt</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(Q))))) {</div>
<div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;    <span class="comment">// Simplify icmp eq (or (ptrtoint P), (ptrtoint Q)), 0</span></div>
<div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;    <span class="comment">// -&gt; and (icmp eq P, null), (icmp eq Q, null).</span></div>
<div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *CmpP =</div>
<div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;        <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateICmp(Pred, <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>, <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">ConstantInt::getNullValue</a>(<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>-&gt;getType()));</div>
<div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *CmpQ =</div>
<div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;        <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateICmp(Pred, Q, <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">ConstantInt::getNullValue</a>(Q-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()));</div>
<div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;    <span class="keyword">auto</span> BOpc = Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">CmpInst::ICMP_EQ</a> ? Instruction::And : Instruction::Or;</div>
<div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1BinaryOperator.html#a02ce9966395063ac501ecbc1623deda4">BinaryOperator::Create</a>(BOpc, CmpP, CmpQ);</div>
<div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;  }</div>
<div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160; </div>
<div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;  <span class="comment">// Are we using xors to bitwise check for a pair of (in)equalities? Convert to</span></div>
<div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;  <span class="comment">// a shorter form that has more potential to be folded even further.</span></div>
<div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *X1, *X2, *X3, *X4;</div>
<div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(OrOp0, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a82e2ea7f0ab67e33e22b3a2a188feaba">m_Xor</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(X1), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(X2)))) &amp;&amp;</div>
<div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;      <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(OrOp1, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a82e2ea7f0ab67e33e22b3a2a188feaba">m_Xor</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(X3), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(X4))))) {</div>
<div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;    <span class="comment">// ((X1 ^ X2) || (X3 ^ X4)) == 0 --&gt; (X1 == X2) &amp;&amp; (X3 == X4)</span></div>
<div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;    <span class="comment">// ((X1 ^ X2) || (X3 ^ X4)) != 0 --&gt; (X1 != X2) || (X3 != X4)</span></div>
<div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Cmp12 = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateICmp(Pred, X1, X2);</div>
<div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Cmp34 = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateICmp(Pred, X3, X4);</div>
<div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160;    <span class="keyword">auto</span> BOpc = Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">CmpInst::ICMP_EQ</a> ? Instruction::And : Instruction::Or;</div>
<div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1BinaryOperator.html#a02ce9966395063ac501ecbc1623deda4">BinaryOperator::Create</a>(BOpc, Cmp12, Cmp34);</div>
<div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;  }</div>
<div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160; </div>
<div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;}</div>
<div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;<span class="comment">/// Fold icmp (mul X, Y), C.</span></div>
<div class="line"><a name="l02010"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombinerImpl.html#aa270db889638f96fa18c715cdce379e0"> 2010</a></span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombinerImpl.html#aa270db889638f96fa18c715cdce379e0">InstCombinerImpl::foldICmpMulConstant</a>(<a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> &amp;Cmp,</div>
<div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;                                                   <a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> *Mul,</div>
<div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160;                                                   <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> &amp;<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>) {</div>
<div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;  <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">ICmpInst::Predicate</a> Pred = Cmp.getPredicate();</div>
<div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *MulTy = <a class="code" href="X86PartialReduction_8cpp.html#ae0f503db91504a3f3440ab81260e4134">Mul</a>-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>();</div>
<div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a> = <a class="code" href="X86PartialReduction_8cpp.html#ae0f503db91504a3f3440ab81260e4134">Mul</a>-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0);</div>
<div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160; </div>
<div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160;  <span class="comment">// If there&#39;s no overflow:</span></div>
<div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160;  <span class="comment">// X * X == 0 --&gt; X == 0</span></div>
<div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;  <span class="comment">// X * X != 0 --&gt; X != 0</span></div>
<div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;  <span class="keywordflow">if</span> (Cmp.isEquality() &amp;&amp; <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.isZero() &amp;&amp; <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a> == <a class="code" href="X86PartialReduction_8cpp.html#ae0f503db91504a3f3440ab81260e4134">Mul</a>-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(1) &amp;&amp;</div>
<div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160;      (<a class="code" href="X86PartialReduction_8cpp.html#ae0f503db91504a3f3440ab81260e4134">Mul</a>-&gt;<a class="code" href="classllvm_1_1Instruction.html#a100c666f9253331dd1d166a863248326">hasNoUnsignedWrap</a>() || <a class="code" href="X86PartialReduction_8cpp.html#ae0f503db91504a3f3440ab81260e4134">Mul</a>-&gt;<a class="code" href="classllvm_1_1Instruction.html#a350f4fdc01c770b5cf6a8be2624ae3e5">hasNoSignedWrap</a>()))</div>
<div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">ConstantInt::getNullValue</a>(MulTy));</div>
<div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160; </div>
<div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *MulC;</div>
<div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="X86PartialReduction_8cpp.html#ae0f503db91504a3f3440ab81260e4134">Mul</a>-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(1), <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(MulC)))</div>
<div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160; </div>
<div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160;  <span class="comment">// If this is a test of the sign bit and the multiply is sign-preserving with</span></div>
<div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160;  <span class="comment">// a constant operand, use the multiply LHS operand instead:</span></div>
<div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160;  <span class="comment">// (X * +MulC) &lt; 0 --&gt; X &lt; 0</span></div>
<div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;  <span class="comment">// (X * -MulC) &lt; 0 --&gt; X &gt; 0</span></div>
<div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="InstCombineCompares_8cpp.html#ab8102f1d2d3e331db1f1781055e61013">isSignTest</a>(Pred, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>) &amp;&amp; <a class="code" href="X86PartialReduction_8cpp.html#ae0f503db91504a3f3440ab81260e4134">Mul</a>-&gt;<a class="code" href="classllvm_1_1Instruction.html#a350f4fdc01c770b5cf6a8be2624ae3e5">hasNoSignedWrap</a>()) {</div>
<div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;    <span class="keywordflow">if</span> (MulC-&gt;<a class="code" href="classllvm_1_1APInt.html#a6804d9caf15411f55e7b9e9f397f0422">isNegative</a>())</div>
<div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160;      Pred = <a class="code" href="classllvm_1_1CmpInst.html#a49a2d8f483ea08a3d6ea75f90c640d76">ICmpInst::getSwappedPredicate</a>(Pred);</div>
<div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">ConstantInt::getNullValue</a>(MulTy));</div>
<div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160;  }</div>
<div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160; </div>
<div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160;  <span class="keywordflow">if</span> (MulC-&gt;<a class="code" href="classllvm_1_1APInt.html#a49cd5939942c6665aba4cae8c220dff1">isZero</a>())</div>
<div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160; </div>
<div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160;  <span class="comment">// If the multiply does not wrap or the constant is odd, try to divide the</span></div>
<div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;  <span class="comment">// compare constant by the multiplication factor.</span></div>
<div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160;  <span class="keywordflow">if</span> (Cmp.isEquality()) {</div>
<div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;    <span class="comment">// (mul nsw X, MulC) eq/ne C --&gt; X eq/ne C /s MulC</span></div>
<div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="X86PartialReduction_8cpp.html#ae0f503db91504a3f3440ab81260e4134">Mul</a>-&gt;<a class="code" href="classllvm_1_1Instruction.html#a350f4fdc01c770b5cf6a8be2624ae3e5">hasNoSignedWrap</a>() &amp;&amp; <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.srem(*MulC).isZero()) {</div>
<div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;      <a class="code" href="classllvm_1_1Constant.html">Constant</a> *NewC = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(MulTy, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.sdiv(*MulC));</div>
<div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, NewC);</div>
<div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;    }</div>
<div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160; </div>
<div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;    <span class="comment">// C % MulC == 0 is weaker than we could use if MulC is odd because it</span></div>
<div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;    <span class="comment">// correct to transform if MulC * N == C including overflow. I.e with i8</span></div>
<div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;    <span class="comment">// (icmp eq (mul X, 5), 101) -&gt; (icmp eq X, 225) but since 101 % 5 != 0, we</span></div>
<div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160;    <span class="comment">// miss that case.</span></div>
<div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.urem(*MulC).isZero()) {</div>
<div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;      <span class="comment">// (mul nuw X, MulC) eq/ne C --&gt; X eq/ne C /u MulC</span></div>
<div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;      <span class="comment">// (mul X, OddC) eq/ne N * C --&gt; X eq/ne N</span></div>
<div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160;      <span class="keywordflow">if</span> ((*MulC &amp; 1).isOne() || <a class="code" href="X86PartialReduction_8cpp.html#ae0f503db91504a3f3440ab81260e4134">Mul</a>-&gt;<a class="code" href="classllvm_1_1Instruction.html#a100c666f9253331dd1d166a863248326">hasNoUnsignedWrap</a>()) {</div>
<div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;        <a class="code" href="classllvm_1_1Constant.html">Constant</a> *NewC = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(MulTy, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.udiv(*MulC));</div>
<div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, NewC);</div>
<div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160;      }</div>
<div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160;    }</div>
<div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160;  }</div>
<div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160; </div>
<div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160;  <span class="comment">// With a matching no-overflow guarantee, fold the constants:</span></div>
<div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160;  <span class="comment">// (X * MulC) &lt; C --&gt; X &lt; (C / MulC)</span></div>
<div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;  <span class="comment">// (X * MulC) &gt; C --&gt; X &gt; (C / MulC)</span></div>
<div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160;  <span class="comment">// TODO: Assert that Pred is not equal to SGE, SLE, UGE, ULE?</span></div>
<div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *NewC = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="X86PartialReduction_8cpp.html#ae0f503db91504a3f3440ab81260e4134">Mul</a>-&gt;<a class="code" href="classllvm_1_1Instruction.html#a350f4fdc01c770b5cf6a8be2624ae3e5">hasNoSignedWrap</a>() &amp;&amp; <a class="code" href="classllvm_1_1CmpInst.html#a3712279d70deeec90a93db09deb12d02">ICmpInst::isSigned</a>(Pred)) {</div>
<div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;    <span class="comment">// MININT / -1 --&gt; overflow.</span></div>
<div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.isMinSignedValue() &amp;&amp; MulC-&gt;<a class="code" href="classllvm_1_1APInt.html#a423e2c491de1408d54e35f0b47d076be">isAllOnes</a>())</div>
<div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;    <span class="keywordflow">if</span> (MulC-&gt;<a class="code" href="classllvm_1_1APInt.html#a6804d9caf15411f55e7b9e9f397f0422">isNegative</a>())</div>
<div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;      Pred = <a class="code" href="classllvm_1_1CmpInst.html#a49a2d8f483ea08a3d6ea75f90c640d76">ICmpInst::getSwappedPredicate</a>(Pred);</div>
<div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160; </div>
<div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;    <span class="keywordflow">if</span> (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba15ae464950ac676919c2f0c7aafc706c">ICmpInst::ICMP_SLT</a> || Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac1aa7b798ba11d2e497d5cce6ce6d3dc">ICmpInst::ICMP_SGE</a>) {</div>
<div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160;      NewC = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(</div>
<div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160;          MulTy, <a class="code" href="namespacellvm_1_1APIntOps.html#a59d1e0778623481e8a1599800d892946">APIntOps::RoundingSDiv</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, *MulC, <a class="code" href="classllvm_1_1APInt.html#a3a0519ef55bfe3d07f8fb2eafb5cdbbdafbaedde498cdead4f2780217646e9ba1">APInt::Rounding::UP</a>));</div>
<div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba2751d6136a2819749dcef65dc19a4246">ICmpInst::ICMP_SLE</a> || Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba720a42e85f7e981afd61e28473b0000a">ICmpInst::ICMP_SGT</a>) &amp;&amp;</div>
<div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;             <span class="stringliteral">&quot;Unexpected predicate&quot;</span>);</div>
<div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160;      NewC = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(</div>
<div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160;          MulTy, <a class="code" href="namespacellvm_1_1APIntOps.html#a59d1e0778623481e8a1599800d892946">APIntOps::RoundingSDiv</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, *MulC, <a class="code" href="classllvm_1_1APInt.html#a3a0519ef55bfe3d07f8fb2eafb5cdbbdac4e0e4e3118472beeb2ae75827450f1f">APInt::Rounding::DOWN</a>));</div>
<div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;    }</div>
<div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="X86PartialReduction_8cpp.html#ae0f503db91504a3f3440ab81260e4134">Mul</a>-&gt;<a class="code" href="classllvm_1_1Instruction.html#a100c666f9253331dd1d166a863248326">hasNoUnsignedWrap</a>() &amp;&amp; <a class="code" href="classllvm_1_1CmpInst.html#af206a3d6f58d9e53b074460f0d1ecb86">ICmpInst::isUnsigned</a>(Pred)) {</div>
<div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;    <span class="keywordflow">if</span> (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e">ICmpInst::ICMP_ULT</a> || Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba573bcd571c938fce863525330bbfc4b8">ICmpInst::ICMP_UGE</a>) {</div>
<div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;      NewC = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(</div>
<div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;          MulTy, <a class="code" href="namespacellvm_1_1APIntOps.html#a1c533fb6a26fce38d9cec2b51a7a90b0">APIntOps::RoundingUDiv</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, *MulC, <a class="code" href="classllvm_1_1APInt.html#a3a0519ef55bfe3d07f8fb2eafb5cdbbdafbaedde498cdead4f2780217646e9ba1">APInt::Rounding::UP</a>));</div>
<div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bad92f160316221fd4090520bb2b3cefc5">ICmpInst::ICMP_ULE</a> || Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba607cecdc5172814382033e001ed11fad">ICmpInst::ICMP_UGT</a>) &amp;&amp;</div>
<div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;             <span class="stringliteral">&quot;Unexpected predicate&quot;</span>);</div>
<div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;      NewC = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(</div>
<div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;          MulTy, <a class="code" href="namespacellvm_1_1APIntOps.html#a1c533fb6a26fce38d9cec2b51a7a90b0">APIntOps::RoundingUDiv</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, *MulC, <a class="code" href="classllvm_1_1APInt.html#a3a0519ef55bfe3d07f8fb2eafb5cdbbdac4e0e4e3118472beeb2ae75827450f1f">APInt::Rounding::DOWN</a>));</div>
<div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;    }</div>
<div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160;  }</div>
<div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160; </div>
<div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;  <span class="keywordflow">return</span> NewC ? <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, NewC) : <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160;}</div>
<div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;<span class="comment">/// Fold icmp (shl 1, Y), C.</span></div>
<div class="line"><a name="l02101"></a><span class="lineno"><a class="line" href="InstCombineCompares_8cpp.html#a23bd5c3ac042286389d708b03932343a"> 2101</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="InstCombineCompares_8cpp.html#a23bd5c3ac042286389d708b03932343a">foldICmpShlOne</a>(<a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> &amp;Cmp, <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Shl,</div>
<div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;                                   <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> &amp;<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>) {</div>
<div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>;</div>
<div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Shl, <a class="code" href="namespacellvm_1_1PatternMatch.html#a37668d9884c78ac77254cf9fb8a4276a">m_Shl</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#aebdb2700a77d10ae6f0ce115e23d9f77">m_One</a>(), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>))))</div>
<div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160; </div>
<div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *ShiftType = Shl-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>();</div>
<div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;  <span class="keywordtype">unsigned</span> TypeBits = <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.getBitWidth();</div>
<div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160;  <span class="keywordtype">bool</span> CIsPowerOf2 = <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.isPowerOf2();</div>
<div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160;  <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">ICmpInst::Predicate</a> Pred = Cmp.getPredicate();</div>
<div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;  <span class="keywordflow">if</span> (Cmp.isUnsigned()) {</div>
<div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160;    <span class="comment">// (1 &lt;&lt; Y) pred C -&gt; Y pred Log2(C)</span></div>
<div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;    <span class="keywordflow">if</span> (!CIsPowerOf2) {</div>
<div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;      <span class="comment">// (1 &lt;&lt; Y) &lt;  30 -&gt; Y &lt;= 4</span></div>
<div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160;      <span class="comment">// (1 &lt;&lt; Y) &lt;= 30 -&gt; Y &lt;= 4</span></div>
<div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160;      <span class="comment">// (1 &lt;&lt; Y) &gt;= 30 -&gt; Y &gt;  4</span></div>
<div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;      <span class="comment">// (1 &lt;&lt; Y) &gt;  30 -&gt; Y &gt;  4</span></div>
<div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;      <span class="keywordflow">if</span> (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e">ICmpInst::ICMP_ULT</a>)</div>
<div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;        Pred = <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bad92f160316221fd4090520bb2b3cefc5">ICmpInst::ICMP_ULE</a>;</div>
<div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba573bcd571c938fce863525330bbfc4b8">ICmpInst::ICMP_UGE</a>)</div>
<div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;        Pred = <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba607cecdc5172814382033e001ed11fad">ICmpInst::ICMP_UGT</a>;</div>
<div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;    }</div>
<div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160; </div>
<div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160;    <span class="keywordtype">unsigned</span> CLog2 = <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.logBase2();</div>
<div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(ShiftType, CLog2));</div>
<div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Cmp.isSigned()) {</div>
<div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160;    <a class="code" href="classllvm_1_1Constant.html">Constant</a> *BitWidthMinusOne = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(ShiftType, TypeBits - 1);</div>
<div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160;    <span class="comment">// (1 &lt;&lt; Y) &gt;  0 -&gt; Y != 31</span></div>
<div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160;    <span class="comment">// (1 &lt;&lt; Y) &gt;  C -&gt; Y != 31 if C is negative.</span></div>
<div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160;    <span class="keywordflow">if</span> (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba720a42e85f7e981afd61e28473b0000a">ICmpInst::ICMP_SGT</a> &amp;&amp; <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.sle(0))</div>
<div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a>, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, BitWidthMinusOne);</div>
<div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160; </div>
<div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160;    <span class="comment">// (1 &lt;&lt; Y) &lt;  0 -&gt; Y == 31</span></div>
<div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;    <span class="comment">// (1 &lt;&lt; Y) &lt;  1 -&gt; Y == 31</span></div>
<div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160;    <span class="comment">// (1 &lt;&lt; Y) &lt;  C -&gt; Y == 31 if C is negative and not signed min.</span></div>
<div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160;    <span class="comment">// Exclude signed min by subtracting 1 and lower the upper bound to 0.</span></div>
<div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160;    <span class="keywordflow">if</span> (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba15ae464950ac676919c2f0c7aafc706c">ICmpInst::ICMP_SLT</a> &amp;&amp; (<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-1).sle(0))</div>
<div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a>, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, BitWidthMinusOne);</div>
<div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160;  }</div>
<div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160; </div>
<div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160;}</div>
<div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160;<span class="comment">/// Fold icmp (shl X, Y), C.</span></div>
<div class="line"><a name="l02145"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombinerImpl.html#abe15d83fb0501730bbfe840143cedc08"> 2145</a></span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombinerImpl.html#abe15d83fb0501730bbfe840143cedc08">InstCombinerImpl::foldICmpShlConstant</a>(<a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> &amp;Cmp,</div>
<div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160;                                                   <a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> *Shl,</div>
<div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160;                                                   <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> &amp;<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>) {</div>
<div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *ShiftVal;</div>
<div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160;  <span class="keywordflow">if</span> (Cmp.isEquality() &amp;&amp; <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Shl-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0), <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(ShiftVal)))</div>
<div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160;    <span class="keywordflow">return</span> foldICmpShlConstConst(Cmp, Shl-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(1), <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, *ShiftVal);</div>
<div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160; </div>
<div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *ShiftAmt;</div>
<div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Shl-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(1), <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(ShiftAmt)))</div>
<div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="InstCombineCompares_8cpp.html#a23bd5c3ac042286389d708b03932343a">foldICmpShlOne</a>(Cmp, Shl, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div>
<div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160; </div>
<div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;  <span class="comment">// Check that the shift amount is in range. If not, don&#39;t perform undefined</span></div>
<div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;  <span class="comment">// shifts. When the shift is visited, it will be simplified.</span></div>
<div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160;  <span class="keywordtype">unsigned</span> TypeBits = <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.getBitWidth();</div>
<div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160;  <span class="keywordflow">if</span> (ShiftAmt-&gt;<a class="code" href="classllvm_1_1APInt.html#af4b1ccc0b78f9da9f3f3944e06007f1d">uge</a>(TypeBits))</div>
<div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160; </div>
<div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160;  <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">ICmpInst::Predicate</a> Pred = Cmp.getPredicate();</div>
<div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a> = Shl-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0);</div>
<div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *ShType = Shl-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>();</div>
<div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160; </div>
<div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160;  <span class="comment">// NSW guarantees that we are only shifting out sign bits from the high bits,</span></div>
<div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;  <span class="comment">// so we can ASHR the compare constant without needing a mask and eliminate</span></div>
<div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160;  <span class="comment">// the shift.</span></div>
<div class="line"><a name="l02169"></a><span class="lineno"> 2169</span>&#160;  <span class="keywordflow">if</span> (Shl-&gt;<a class="code" href="classllvm_1_1Instruction.html#a350f4fdc01c770b5cf6a8be2624ae3e5">hasNoSignedWrap</a>()) {</div>
<div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160;    <span class="keywordflow">if</span> (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba720a42e85f7e981afd61e28473b0000a">ICmpInst::ICMP_SGT</a>) {</div>
<div class="line"><a name="l02171"></a><span class="lineno"> 2171</span>&#160;      <span class="comment">// icmp Pred (shl nsw X, ShiftAmt), C --&gt; icmp Pred X, (C &gt;&gt;s ShiftAmt)</span></div>
<div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160;      <a class="code" href="classllvm_1_1APInt.html">APInt</a> ShiftedC = <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.<a class="code" href="classllvm_1_1APInt.html#ab6006923d1a3139d70abc8f6552a7960">ashr</a>(*ShiftAmt);</div>
<div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(ShType, ShiftedC));</div>
<div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160;    }</div>
<div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160;    <span class="keywordflow">if</span> ((Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a> || Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a>) &amp;&amp;</div>
<div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160;        <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.ashr(*ShiftAmt).shl(*ShiftAmt) == <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>) {</div>
<div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160;      <a class="code" href="classllvm_1_1APInt.html">APInt</a> ShiftedC = <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.<a class="code" href="classllvm_1_1APInt.html#ab6006923d1a3139d70abc8f6552a7960">ashr</a>(*ShiftAmt);</div>
<div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(ShType, ShiftedC));</div>
<div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160;    }</div>
<div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160;    <span class="keywordflow">if</span> (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba15ae464950ac676919c2f0c7aafc706c">ICmpInst::ICMP_SLT</a>) {</div>
<div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160;      <span class="comment">// SLE is the same as above, but SLE is canonicalized to SLT, so convert:</span></div>
<div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160;      <span class="comment">// (X &lt;&lt; S) &lt;=s C is equiv to X &lt;=s (C &gt;&gt; S) for all C</span></div>
<div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;      <span class="comment">// (X &lt;&lt; S) &lt;s (C + 1) is equiv to X &lt;s (C &gt;&gt; S) + 1 if C &lt;s SMAX</span></div>
<div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;      <span class="comment">// (X &lt;&lt; S) &lt;s C is equiv to X &lt;s ((C - 1) &gt;&gt; S) + 1 if C &gt;s SMIN</span></div>
<div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.isMinSignedValue() &amp;&amp; <span class="stringliteral">&quot;Unexpected icmp slt&quot;</span>);</div>
<div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;      <a class="code" href="classllvm_1_1APInt.html">APInt</a> ShiftedC = (<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> - 1).ashr(*ShiftAmt) + 1;</div>
<div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(ShType, ShiftedC));</div>
<div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;    }</div>
<div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;    <span class="comment">// If this is a signed comparison to 0 and the shift is sign preserving,</span></div>
<div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;    <span class="comment">// use the shift LHS operand instead; isSignTest may change &#39;Pred&#39;, so only</span></div>
<div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160;    <span class="comment">// do that if we&#39;re sure to not continue on in this function.</span></div>
<div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="InstCombineCompares_8cpp.html#ab8102f1d2d3e331db1f1781055e61013">isSignTest</a>(Pred, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>))</div>
<div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(ShType));</div>
<div class="line"><a name="l02194"></a><span class="lineno"> 2194</span>&#160;  }</div>
<div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160; </div>
<div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160;  <span class="comment">// NUW guarantees that we are only shifting out zero bits from the high bits,</span></div>
<div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160;  <span class="comment">// so we can LSHR the compare constant without needing a mask and eliminate</span></div>
<div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160;  <span class="comment">// the shift.</span></div>
<div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160;  <span class="keywordflow">if</span> (Shl-&gt;<a class="code" href="classllvm_1_1Instruction.html#a100c666f9253331dd1d166a863248326">hasNoUnsignedWrap</a>()) {</div>
<div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160;    <span class="keywordflow">if</span> (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba607cecdc5172814382033e001ed11fad">ICmpInst::ICMP_UGT</a>) {</div>
<div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;      <span class="comment">// icmp Pred (shl nuw X, ShiftAmt), C --&gt; icmp Pred X, (C &gt;&gt;u ShiftAmt)</span></div>
<div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;      <a class="code" href="classllvm_1_1APInt.html">APInt</a> ShiftedC = <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.<a class="code" href="classllvm_1_1APInt.html#af34549c39d6f741fbdaf9a795aa306e9">lshr</a>(*ShiftAmt);</div>
<div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(ShType, ShiftedC));</div>
<div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;    }</div>
<div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160;    <span class="keywordflow">if</span> ((Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a> || Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a>) &amp;&amp;</div>
<div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;        <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.lshr(*ShiftAmt).shl(*ShiftAmt) == <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>) {</div>
<div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160;      <a class="code" href="classllvm_1_1APInt.html">APInt</a> ShiftedC = <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.<a class="code" href="classllvm_1_1APInt.html#af34549c39d6f741fbdaf9a795aa306e9">lshr</a>(*ShiftAmt);</div>
<div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(ShType, ShiftedC));</div>
<div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160;    }</div>
<div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;    <span class="keywordflow">if</span> (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e">ICmpInst::ICMP_ULT</a>) {</div>
<div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;      <span class="comment">// ULE is the same as above, but ULE is canonicalized to ULT, so convert:</span></div>
<div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;      <span class="comment">// (X &lt;&lt; S) &lt;=u C is equiv to X &lt;=u (C &gt;&gt; S) for all C</span></div>
<div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;      <span class="comment">// (X &lt;&lt; S) &lt;u (C + 1) is equiv to X &lt;u (C &gt;&gt; S) + 1 if C &lt;u ~0u</span></div>
<div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;      <span class="comment">// (X &lt;&lt; S) &lt;u C is equiv to X &lt;u ((C - 1) &gt;&gt; S) + 1 if C &gt;u 0</span></div>
<div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.ugt(0) &amp;&amp; <span class="stringliteral">&quot;ult 0 should have been eliminated&quot;</span>);</div>
<div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160;      <a class="code" href="classllvm_1_1APInt.html">APInt</a> ShiftedC = (<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> - 1).<a class="code" href="README__P9_8txt.html#a1339768ca51595b3ebf5c0e69b80c9e8">lshr</a>(*ShiftAmt) + 1;</div>
<div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(ShType, ShiftedC));</div>
<div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;    }</div>
<div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160;  }</div>
<div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160; </div>
<div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160;  <span class="keywordflow">if</span> (Cmp.isEquality() &amp;&amp; Shl-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>()) {</div>
<div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;    <span class="comment">// Strength-reduce the shift into an &#39;and&#39;.</span></div>
<div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160;    <a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a> = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(</div>
<div class="line"><a name="l02224"></a><span class="lineno"> 2224</span>&#160;        ShType,</div>
<div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160;        <a class="code" href="classllvm_1_1APInt.html#ad960e1ff48d25c382b6d28e7961f074e">APInt::getLowBitsSet</a>(TypeBits, TypeBits - ShiftAmt-&gt;<a class="code" href="classllvm_1_1APInt.html#a217e0207d9cc8e046c2dccbf0e4bb198">getZExtValue</a>()));</div>
<div class="line"><a name="l02226"></a><span class="lineno"> 2226</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eac33315685a0cba3ce53be378b3c7874b">And</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAnd(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a>, Shl-&gt;<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>() + <span class="stringliteral">&quot;.mask&quot;</span>);</div>
<div class="line"><a name="l02227"></a><span class="lineno"> 2227</span>&#160;    <a class="code" href="classllvm_1_1Constant.html">Constant</a> *LShrC = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(ShType, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.lshr(*ShiftAmt));</div>
<div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, <a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eac33315685a0cba3ce53be378b3c7874b">And</a>, LShrC);</div>
<div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160;  }</div>
<div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160; </div>
<div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160;  <span class="comment">// Otherwise, if this is a comparison of the sign bit, simplify to and/test.</span></div>
<div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160;  <span class="keywordtype">bool</span> TrueIfSigned = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160;  <span class="keywordflow">if</span> (Shl-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>() &amp;&amp; isSignBitCheck(Pred, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, TrueIfSigned)) {</div>
<div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>&#160;    <span class="comment">// (X &lt;&lt; 31) &lt;s 0  --&gt; (X &amp; 1) != 0</span></div>
<div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160;    <a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a> = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(</div>
<div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160;        ShType,</div>
<div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;        <a class="code" href="classllvm_1_1APInt.html#aec662ee6ab1490a4cabebf2812e5b9ca">APInt::getOneBitSet</a>(TypeBits, TypeBits - ShiftAmt-&gt;<a class="code" href="classllvm_1_1APInt.html#a217e0207d9cc8e046c2dccbf0e4bb198">getZExtValue</a>() - 1));</div>
<div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eac33315685a0cba3ce53be378b3c7874b">And</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAnd(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a>, Shl-&gt;<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>() + <span class="stringliteral">&quot;.mask&quot;</span>);</div>
<div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(TrueIfSigned ? <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a> : <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a>,</div>
<div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160;                        <a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eac33315685a0cba3ce53be378b3c7874b">And</a>, <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(ShType));</div>
<div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160;  }</div>
<div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160; </div>
<div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160;  <span class="comment">// Simplify &#39;shl&#39; inequality test into &#39;and&#39; equality test.</span></div>
<div class="line"><a name="l02244"></a><span class="lineno"> 2244</span>&#160;  <span class="keywordflow">if</span> (Cmp.isUnsigned() &amp;&amp; Shl-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>()) {</div>
<div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160;    <span class="comment">// (X l&lt;&lt; C2) u&lt;=/u&gt; C1 iff C1+1 is power of two -&gt; X &amp; (~C1 l&gt;&gt; C2) ==/!= 0</span></div>
<div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160;    <span class="keywordflow">if</span> ((<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> + 1).isPowerOf2() &amp;&amp;</div>
<div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160;        (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bad92f160316221fd4090520bb2b3cefc5">ICmpInst::ICMP_ULE</a> || Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba607cecdc5172814382033e001ed11fad">ICmpInst::ICMP_UGT</a>)) {</div>
<div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eac33315685a0cba3ce53be378b3c7874b">And</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAnd(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, (~<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>).<a class="code" href="README__P9_8txt.html#a1339768ca51595b3ebf5c0e69b80c9e8">lshr</a>(ShiftAmt-&gt;<a class="code" href="classllvm_1_1APInt.html#a217e0207d9cc8e046c2dccbf0e4bb198">getZExtValue</a>()));</div>
<div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bad92f160316221fd4090520bb2b3cefc5">ICmpInst::ICMP_ULE</a> ? <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a></div>
<div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;                                                     : <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a>,</div>
<div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160;                          <a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eac33315685a0cba3ce53be378b3c7874b">And</a>, <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(ShType));</div>
<div class="line"><a name="l02252"></a><span class="lineno"> 2252</span>&#160;    }</div>
<div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160;    <span class="comment">// (X l&lt;&lt; C2) u&lt;/u&gt;= C1 iff C1 is power of two -&gt; X &amp; (-C1 l&gt;&gt; C2) ==/!= 0</span></div>
<div class="line"><a name="l02254"></a><span class="lineno"> 2254</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.isPowerOf2() &amp;&amp;</div>
<div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160;        (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e">ICmpInst::ICMP_ULT</a> || Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba573bcd571c938fce863525330bbfc4b8">ICmpInst::ICMP_UGE</a>)) {</div>
<div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eac33315685a0cba3ce53be378b3c7874b">And</a> =</div>
<div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160;          <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAnd(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, (~(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> - 1)).<a class="code" href="README__P9_8txt.html#a1339768ca51595b3ebf5c0e69b80c9e8">lshr</a>(ShiftAmt-&gt;<a class="code" href="classllvm_1_1APInt.html#a217e0207d9cc8e046c2dccbf0e4bb198">getZExtValue</a>()));</div>
<div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e">ICmpInst::ICMP_ULT</a> ? <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a></div>
<div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160;                                                     : <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a>,</div>
<div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160;                          <a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eac33315685a0cba3ce53be378b3c7874b">And</a>, <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(ShType));</div>
<div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160;    }</div>
<div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160;  }</div>
<div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160; </div>
<div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160;  <span class="comment">// Transform (icmp pred iM (shl iM %v, N), C)</span></div>
<div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160;  <span class="comment">// -&gt; (icmp pred i(M-N) (trunc %v iM to i(M-N)), (trunc (C&gt;&gt;N))</span></div>
<div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160;  <span class="comment">// Transform the shl to a trunc if (trunc (C&gt;&gt;N)) has no loss and M-N.</span></div>
<div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160;  <span class="comment">// This enables us to get rid of the shift in favor of a trunc that may be</span></div>
<div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160;  <span class="comment">// free on the target. It has the additional benefit of comparing to a</span></div>
<div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160;  <span class="comment">// smaller constant that may be more target-friendly.</span></div>
<div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>&#160;  <span class="keywordtype">unsigned</span> Amt = ShiftAmt-&gt;<a class="code" href="classllvm_1_1APInt.html#ab01d8694a759a934e01f1c558c3ce862">getLimitedValue</a>(TypeBits - 1);</div>
<div class="line"><a name="l02271"></a><span class="lineno"> 2271</span>&#160;  <span class="keywordflow">if</span> (Shl-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>() &amp;&amp; Amt != 0 &amp;&amp; <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.countTrailingZeros() &gt;= Amt &amp;&amp;</div>
<div class="line"><a name="l02272"></a><span class="lineno"> 2272</span>&#160;      <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.isLegalInteger(TypeBits - Amt)) {</div>
<div class="line"><a name="l02273"></a><span class="lineno"> 2273</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *TruncTy = <a class="code" href="classllvm_1_1IntegerType.html#a14f7b4f1aed38192fb6b7772eb506bdb">IntegerType::get</a>(Cmp.getContext(), TypeBits - Amt);</div>
<div class="line"><a name="l02274"></a><span class="lineno"> 2274</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> *ShVTy = dyn_cast&lt;VectorType&gt;(ShType))</div>
<div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160;      TruncTy = <a class="code" href="classllvm_1_1VectorType.html#a8c90e6c50e795b17466482a04947690e">VectorType::get</a>(TruncTy, ShVTy-&gt;getElementCount());</div>
<div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160;    <a class="code" href="classllvm_1_1Constant.html">Constant</a> *NewC =</div>
<div class="line"><a name="l02277"></a><span class="lineno"> 2277</span>&#160;        <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(TruncTy, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.ashr(*ShiftAmt).trunc(TypeBits - Amt));</div>
<div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateTrunc(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, TruncTy), NewC);</div>
<div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160;  }</div>
<div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160; </div>
<div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160;}</div>
<div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160;<span class="comment">/// Fold icmp ({al}shr X, Y), C.</span></div>
<div class="line"><a name="l02285"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombinerImpl.html#a037006a1d44974a6840403beb4febd30"> 2285</a></span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombinerImpl.html#a037006a1d44974a6840403beb4febd30">InstCombinerImpl::foldICmpShrConstant</a>(<a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> &amp;Cmp,</div>
<div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160;                                                   <a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> *Shr,</div>
<div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160;                                                   <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> &amp;<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>) {</div>
<div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160;  <span class="comment">// An exact shr only shifts out zero bits, so:</span></div>
<div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160;  <span class="comment">// icmp eq/ne (shr X, Y), 0 --&gt; icmp eq/ne X, 0</span></div>
<div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a> = Shr-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0);</div>
<div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;  <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">CmpInst::Predicate</a> Pred = Cmp.getPredicate();</div>
<div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160;  <span class="keywordflow">if</span> (Cmp.isEquality() &amp;&amp; Shr-&gt;<a class="code" href="classllvm_1_1Instruction.html#a689a03df5b4ae094d6a3a1bd13dac574">isExact</a>() &amp;&amp; <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.isZero())</div>
<div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, Cmp.getOperand(1));</div>
<div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160; </div>
<div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160;  <span class="keywordtype">bool</span> IsAShr = Shr-&gt;<a class="code" href="classllvm_1_1BinaryOperator.html#a31bf07f3f61525486633bc1d0bbaf029">getOpcode</a>() == Instruction::AShr;</div>
<div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *ShiftValC;</div>
<div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(ShiftValC))) {</div>
<div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;    <span class="keywordflow">if</span> (Cmp.isEquality())</div>
<div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160;      <span class="keywordflow">return</span> foldICmpShrConstConst(Cmp, Shr-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(1), <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, *ShiftValC);</div>
<div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160; </div>
<div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160;    <span class="comment">// (ShiftValC &gt;&gt; Y) &gt;s -1 --&gt; Y != 0 with ShiftValC &lt; 0</span></div>
<div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160;    <span class="comment">// (ShiftValC &gt;&gt; Y) &lt;s  0 --&gt; Y == 0 with ShiftValC &lt; 0</span></div>
<div class="line"><a name="l02303"></a><span class="lineno"> 2303</span>&#160;    <span class="keywordtype">bool</span> TrueIfSigned;</div>
<div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160;    <span class="keywordflow">if</span> (!IsAShr &amp;&amp; ShiftValC-&gt;<a class="code" href="classllvm_1_1APInt.html#a6804d9caf15411f55e7b9e9f397f0422">isNegative</a>() &amp;&amp;</div>
<div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160;        isSignBitCheck(Pred, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, TrueIfSigned))</div>
<div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(TrueIfSigned ? <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">CmpInst::ICMP_EQ</a> : <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">CmpInst::ICMP_NE</a>,</div>
<div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160;                          Shr-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(1),</div>
<div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160;                          <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">ConstantInt::getNullValue</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getType()));</div>
<div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160; </div>
<div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160;    <span class="comment">// If the shifted constant is a power-of-2, test the shift amount directly:</span></div>
<div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160;    <span class="comment">// (ShiftValC &gt;&gt; Y) &gt;u C --&gt; X &lt;u (LZ(C) - LZ(ShiftValC))</span></div>
<div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;    <span class="comment">// (ShiftValC &gt;&gt; Y) &lt;u C --&gt; X &gt;=u (LZ(C-1) - LZ(ShiftValC))</span></div>
<div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;    <span class="keywordflow">if</span> (!IsAShr &amp;&amp; ShiftValC-&gt;<a class="code" href="classllvm_1_1APInt.html#ad1b0513de876d1c85cf6268ca21b2c86">isPowerOf2</a>() &amp;&amp;</div>
<div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160;        (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba607cecdc5172814382033e001ed11fad">CmpInst::ICMP_UGT</a> || Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e">CmpInst::ICMP_ULT</a>)) {</div>
<div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160;      <span class="keywordtype">bool</span> IsUGT = Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba607cecdc5172814382033e001ed11fad">CmpInst::ICMP_UGT</a>;</div>
<div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(ShiftValC-&gt;<a class="code" href="classllvm_1_1APInt.html#af4b1ccc0b78f9da9f3f3944e06007f1d">uge</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>) &amp;&amp; <span class="stringliteral">&quot;Expected simplify of compare&quot;</span>);</div>
<div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((IsUGT || !<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.isZero()) &amp;&amp; <span class="stringliteral">&quot;Expected X u&lt; 0 to simplify&quot;</span>);</div>
<div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160; </div>
<div class="line"><a name="l02319"></a><span class="lineno"> 2319</span>&#160;      <span class="keywordtype">unsigned</span> CmpLZ =</div>
<div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160;          IsUGT ? <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.countLeadingZeros() : (<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> - 1).<a class="code" href="namespacellvm.html#acd2b6fb514f63152133c43a7e4a11b03">countLeadingZeros</a>();</div>
<div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160;      <span class="keywordtype">unsigned</span> ShiftLZ = ShiftValC-&gt;<a class="code" href="classllvm_1_1APInt.html#aa074b9f5a1efaa0fd8aa4522593f299a">countLeadingZeros</a>();</div>
<div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160;      <a class="code" href="classllvm_1_1Constant.html">Constant</a> *NewC = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Shr-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>(), CmpLZ - ShiftLZ);</div>
<div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160;      <span class="keyword">auto</span> NewPred = IsUGT ? <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e">CmpInst::ICMP_ULT</a> : <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba573bcd571c938fce863525330bbfc4b8">CmpInst::ICMP_UGE</a>;</div>
<div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(NewPred, Shr-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(1), NewC);</div>
<div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160;    }</div>
<div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160;  }</div>
<div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160; </div>
<div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *ShiftAmtC;</div>
<div class="line"><a name="l02329"></a><span class="lineno"> 2329</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Shr-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(1), <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(ShiftAmtC)))</div>
<div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160; </div>
<div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160;  <span class="comment">// Check that the shift amount is in range. If not, don&#39;t perform undefined</span></div>
<div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160;  <span class="comment">// shifts. When the shift is visited it will be simplified.</span></div>
<div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160;  <span class="keywordtype">unsigned</span> TypeBits = <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.<a class="code" href="classllvm_1_1APInt.html#a512fe2c15ea651294688eeec1341644c">getBitWidth</a>();</div>
<div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160;  <span class="keywordtype">unsigned</span> ShAmtVal = ShiftAmtC-&gt;<a class="code" href="classllvm_1_1APInt.html#ab01d8694a759a934e01f1c558c3ce862">getLimitedValue</a>(TypeBits);</div>
<div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160;  <span class="keywordflow">if</span> (ShAmtVal &gt;= TypeBits || ShAmtVal == 0)</div>
<div class="line"><a name="l02337"></a><span class="lineno"> 2337</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02338"></a><span class="lineno"> 2338</span>&#160; </div>
<div class="line"><a name="l02339"></a><span class="lineno"> 2339</span>&#160;  <span class="keywordtype">bool</span> IsExact = Shr-&gt;<a class="code" href="classllvm_1_1Instruction.html#a689a03df5b4ae094d6a3a1bd13dac574">isExact</a>();</div>
<div class="line"><a name="l02340"></a><span class="lineno"> 2340</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *ShrTy = Shr-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>();</div>
<div class="line"><a name="l02341"></a><span class="lineno"> 2341</span>&#160;  <span class="comment">// TODO: If we could guarantee that InstSimplify would handle all of the</span></div>
<div class="line"><a name="l02342"></a><span class="lineno"> 2342</span>&#160;  <span class="comment">// constant-value-based preconditions in the folds below, then we could assert</span></div>
<div class="line"><a name="l02343"></a><span class="lineno"> 2343</span>&#160;  <span class="comment">// those conditions rather than checking them. This is difficult because of</span></div>
<div class="line"><a name="l02344"></a><span class="lineno"> 2344</span>&#160;  <span class="comment">// undef/poison (PR34838).</span></div>
<div class="line"><a name="l02345"></a><span class="lineno"> 2345</span>&#160;  <span class="keywordflow">if</span> (IsAShr) {</div>
<div class="line"><a name="l02346"></a><span class="lineno"> 2346</span>&#160;    <span class="keywordflow">if</span> (IsExact || Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba15ae464950ac676919c2f0c7aafc706c">CmpInst::ICMP_SLT</a> || Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e">CmpInst::ICMP_ULT</a>) {</div>
<div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>&#160;      <span class="comment">// When ShAmtC can be shifted losslessly:</span></div>
<div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160;      <span class="comment">// icmp PRED (ashr exact X, ShAmtC), C --&gt; icmp PRED X, (C &lt;&lt; ShAmtC)</span></div>
<div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160;      <span class="comment">// icmp slt/ult (ashr X, ShAmtC), C --&gt; icmp slt/ult X, (C &lt;&lt; ShAmtC)</span></div>
<div class="line"><a name="l02350"></a><span class="lineno"> 2350</span>&#160;      <a class="code" href="classllvm_1_1APInt.html">APInt</a> ShiftedC = <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.<a class="code" href="classllvm_1_1APInt.html#acb9c55b6986369948507ca5241b4e411">shl</a>(ShAmtVal);</div>
<div class="line"><a name="l02351"></a><span class="lineno"> 2351</span>&#160;      <span class="keywordflow">if</span> (ShiftedC.<a class="code" href="classllvm_1_1APInt.html#ab6006923d1a3139d70abc8f6552a7960">ashr</a>(ShAmtVal) == <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)</div>
<div class="line"><a name="l02352"></a><span class="lineno"> 2352</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(ShrTy, ShiftedC));</div>
<div class="line"><a name="l02353"></a><span class="lineno"> 2353</span>&#160;    }</div>
<div class="line"><a name="l02354"></a><span class="lineno"> 2354</span>&#160;    <span class="keywordflow">if</span> (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba720a42e85f7e981afd61e28473b0000a">CmpInst::ICMP_SGT</a>) {</div>
<div class="line"><a name="l02355"></a><span class="lineno"> 2355</span>&#160;      <span class="comment">// icmp sgt (ashr X, ShAmtC), C --&gt; icmp sgt X, ((C + 1) &lt;&lt; ShAmtC) - 1</span></div>
<div class="line"><a name="l02356"></a><span class="lineno"> 2356</span>&#160;      <a class="code" href="classllvm_1_1APInt.html">APInt</a> ShiftedC = (<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> + 1).<a class="code" href="lib_2Target_2X86_2README_8txt.html#af91797dc0ab1ae005fdbf19482859eaf">shl</a>(ShAmtVal) - 1;</div>
<div class="line"><a name="l02357"></a><span class="lineno"> 2357</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.isMaxSignedValue() &amp;&amp; !(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> + 1).<a class="code" href="lib_2Target_2X86_2README_8txt.html#af91797dc0ab1ae005fdbf19482859eaf">shl</a>(ShAmtVal).isMinSignedValue() &amp;&amp;</div>
<div class="line"><a name="l02358"></a><span class="lineno"> 2358</span>&#160;          (ShiftedC + 1).ashr(ShAmtVal) == (<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> + 1))</div>
<div class="line"><a name="l02359"></a><span class="lineno"> 2359</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(ShrTy, ShiftedC));</div>
<div class="line"><a name="l02360"></a><span class="lineno"> 2360</span>&#160;    }</div>
<div class="line"><a name="l02361"></a><span class="lineno"> 2361</span>&#160;    <span class="keywordflow">if</span> (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba607cecdc5172814382033e001ed11fad">CmpInst::ICMP_UGT</a>) {</div>
<div class="line"><a name="l02362"></a><span class="lineno"> 2362</span>&#160;      <span class="comment">// icmp ugt (ashr X, ShAmtC), C --&gt; icmp ugt X, ((C + 1) &lt;&lt; ShAmtC) - 1</span></div>
<div class="line"><a name="l02363"></a><span class="lineno"> 2363</span>&#160;      <span class="comment">// &#39;C + 1 &lt;&lt; ShAmtC&#39; can overflow as a signed number, so the 2nd</span></div>
<div class="line"><a name="l02364"></a><span class="lineno"> 2364</span>&#160;      <span class="comment">// clause accounts for that pattern.</span></div>
<div class="line"><a name="l02365"></a><span class="lineno"> 2365</span>&#160;      <a class="code" href="classllvm_1_1APInt.html">APInt</a> ShiftedC = (<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> + 1).<a class="code" href="lib_2Target_2X86_2README_8txt.html#af91797dc0ab1ae005fdbf19482859eaf">shl</a>(ShAmtVal) - 1;</div>
<div class="line"><a name="l02366"></a><span class="lineno"> 2366</span>&#160;      <span class="keywordflow">if</span> ((ShiftedC + 1).ashr(ShAmtVal) == (<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> + 1) ||</div>
<div class="line"><a name="l02367"></a><span class="lineno"> 2367</span>&#160;          (<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> + 1).shl(ShAmtVal).isMinSignedValue())</div>
<div class="line"><a name="l02368"></a><span class="lineno"> 2368</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(ShrTy, ShiftedC));</div>
<div class="line"><a name="l02369"></a><span class="lineno"> 2369</span>&#160;    }</div>
<div class="line"><a name="l02370"></a><span class="lineno"> 2370</span>&#160; </div>
<div class="line"><a name="l02371"></a><span class="lineno"> 2371</span>&#160;    <span class="comment">// If the compare constant has significant bits above the lowest sign-bit,</span></div>
<div class="line"><a name="l02372"></a><span class="lineno"> 2372</span>&#160;    <span class="comment">// then convert an unsigned cmp to a test of the sign-bit:</span></div>
<div class="line"><a name="l02373"></a><span class="lineno"> 2373</span>&#160;    <span class="comment">// (ashr X, ShiftC) u&gt; C --&gt; X s&lt; 0</span></div>
<div class="line"><a name="l02374"></a><span class="lineno"> 2374</span>&#160;    <span class="comment">// (ashr X, ShiftC) u&lt; C --&gt; X s&gt; -1</span></div>
<div class="line"><a name="l02375"></a><span class="lineno"> 2375</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.getBitWidth() &gt; 2 &amp;&amp; <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.getNumSignBits() &lt;= ShAmtVal) {</div>
<div class="line"><a name="l02376"></a><span class="lineno"> 2376</span>&#160;      <span class="keywordflow">if</span> (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba607cecdc5172814382033e001ed11fad">CmpInst::ICMP_UGT</a>) {</div>
<div class="line"><a name="l02377"></a><span class="lineno"> 2377</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba15ae464950ac676919c2f0c7aafc706c">CmpInst::ICMP_SLT</a>, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>,</div>
<div class="line"><a name="l02378"></a><span class="lineno"> 2378</span>&#160;                            <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">ConstantInt::getNullValue</a>(ShrTy));</div>
<div class="line"><a name="l02379"></a><span class="lineno"> 2379</span>&#160;      }</div>
<div class="line"><a name="l02380"></a><span class="lineno"> 2380</span>&#160;      <span class="keywordflow">if</span> (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e">CmpInst::ICMP_ULT</a>) {</div>
<div class="line"><a name="l02381"></a><span class="lineno"> 2381</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba720a42e85f7e981afd61e28473b0000a">CmpInst::ICMP_SGT</a>, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>,</div>
<div class="line"><a name="l02382"></a><span class="lineno"> 2382</span>&#160;                            <a class="code" href="classllvm_1_1Constant.html#a4d51384de6e1798bb6aa875aebeea9f0">ConstantInt::getAllOnesValue</a>(ShrTy));</div>
<div class="line"><a name="l02383"></a><span class="lineno"> 2383</span>&#160;      }</div>
<div class="line"><a name="l02384"></a><span class="lineno"> 2384</span>&#160;    }</div>
<div class="line"><a name="l02385"></a><span class="lineno"> 2385</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02386"></a><span class="lineno"> 2386</span>&#160;    <span class="keywordflow">if</span> (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e">CmpInst::ICMP_ULT</a> || (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba607cecdc5172814382033e001ed11fad">CmpInst::ICMP_UGT</a> &amp;&amp; IsExact)) {</div>
<div class="line"><a name="l02387"></a><span class="lineno"> 2387</span>&#160;      <span class="comment">// icmp ult (lshr X, ShAmtC), C --&gt; icmp ult X, (C &lt;&lt; ShAmtC)</span></div>
<div class="line"><a name="l02388"></a><span class="lineno"> 2388</span>&#160;      <span class="comment">// icmp ugt (lshr exact X, ShAmtC), C --&gt; icmp ugt X, (C &lt;&lt; ShAmtC)</span></div>
<div class="line"><a name="l02389"></a><span class="lineno"> 2389</span>&#160;      <a class="code" href="classllvm_1_1APInt.html">APInt</a> ShiftedC = <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.<a class="code" href="classllvm_1_1APInt.html#acb9c55b6986369948507ca5241b4e411">shl</a>(ShAmtVal);</div>
<div class="line"><a name="l02390"></a><span class="lineno"> 2390</span>&#160;      <span class="keywordflow">if</span> (ShiftedC.<a class="code" href="classllvm_1_1APInt.html#af34549c39d6f741fbdaf9a795aa306e9">lshr</a>(ShAmtVal) == <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)</div>
<div class="line"><a name="l02391"></a><span class="lineno"> 2391</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(ShrTy, ShiftedC));</div>
<div class="line"><a name="l02392"></a><span class="lineno"> 2392</span>&#160;    }</div>
<div class="line"><a name="l02393"></a><span class="lineno"> 2393</span>&#160;    <span class="keywordflow">if</span> (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba607cecdc5172814382033e001ed11fad">CmpInst::ICMP_UGT</a>) {</div>
<div class="line"><a name="l02394"></a><span class="lineno"> 2394</span>&#160;      <span class="comment">// icmp ugt (lshr X, ShAmtC), C --&gt; icmp ugt X, ((C + 1) &lt;&lt; ShAmtC) - 1</span></div>
<div class="line"><a name="l02395"></a><span class="lineno"> 2395</span>&#160;      <a class="code" href="classllvm_1_1APInt.html">APInt</a> ShiftedC = (<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> + 1).<a class="code" href="lib_2Target_2X86_2README_8txt.html#af91797dc0ab1ae005fdbf19482859eaf">shl</a>(ShAmtVal) - 1;</div>
<div class="line"><a name="l02396"></a><span class="lineno"> 2396</span>&#160;      <span class="keywordflow">if</span> ((ShiftedC + 1).lshr(ShAmtVal) == (<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> + 1))</div>
<div class="line"><a name="l02397"></a><span class="lineno"> 2397</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(ShrTy, ShiftedC));</div>
<div class="line"><a name="l02398"></a><span class="lineno"> 2398</span>&#160;    }</div>
<div class="line"><a name="l02399"></a><span class="lineno"> 2399</span>&#160;  }</div>
<div class="line"><a name="l02400"></a><span class="lineno"> 2400</span>&#160; </div>
<div class="line"><a name="l02401"></a><span class="lineno"> 2401</span>&#160;  <span class="keywordflow">if</span> (!Cmp.isEquality())</div>
<div class="line"><a name="l02402"></a><span class="lineno"> 2402</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02403"></a><span class="lineno"> 2403</span>&#160; </div>
<div class="line"><a name="l02404"></a><span class="lineno"> 2404</span>&#160;  <span class="comment">// Handle equality comparisons of shift-by-constant.</span></div>
<div class="line"><a name="l02405"></a><span class="lineno"> 2405</span>&#160; </div>
<div class="line"><a name="l02406"></a><span class="lineno"> 2406</span>&#160;  <span class="comment">// If the comparison constant changes with the shift, the comparison cannot</span></div>
<div class="line"><a name="l02407"></a><span class="lineno"> 2407</span>&#160;  <span class="comment">// succeed (bits of the comparison constant cannot match the shifted value).</span></div>
<div class="line"><a name="l02408"></a><span class="lineno"> 2408</span>&#160;  <span class="comment">// This should be known by InstSimplify and already be folded to true/false.</span></div>
<div class="line"><a name="l02409"></a><span class="lineno"> 2409</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(((IsAShr &amp;&amp; <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.shl(ShAmtVal).ashr(ShAmtVal) == <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>) ||</div>
<div class="line"><a name="l02410"></a><span class="lineno"> 2410</span>&#160;          (!IsAShr &amp;&amp; <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.shl(ShAmtVal).lshr(ShAmtVal) == <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)) &amp;&amp;</div>
<div class="line"><a name="l02411"></a><span class="lineno"> 2411</span>&#160;         <span class="stringliteral">&quot;Expected icmp+shr simplify did not occur.&quot;</span>);</div>
<div class="line"><a name="l02412"></a><span class="lineno"> 2412</span>&#160; </div>
<div class="line"><a name="l02413"></a><span class="lineno"> 2413</span>&#160;  <span class="comment">// If the bits shifted out are known zero, compare the unshifted value:</span></div>
<div class="line"><a name="l02414"></a><span class="lineno"> 2414</span>&#160;  <span class="comment">//  (X &amp; 4) &gt;&gt; 1 == 2  --&gt; (X &amp; 4) == 4.</span></div>
<div class="line"><a name="l02415"></a><span class="lineno"> 2415</span>&#160;  <span class="keywordflow">if</span> (Shr-&gt;<a class="code" href="classllvm_1_1Instruction.html#a689a03df5b4ae094d6a3a1bd13dac574">isExact</a>())</div>
<div class="line"><a name="l02416"></a><span class="lineno"> 2416</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(ShrTy, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> &lt;&lt; ShAmtVal));</div>
<div class="line"><a name="l02417"></a><span class="lineno"> 2417</span>&#160; </div>
<div class="line"><a name="l02418"></a><span class="lineno"> 2418</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.isZero()) {</div>
<div class="line"><a name="l02419"></a><span class="lineno"> 2419</span>&#160;    <span class="comment">// == 0 is u&lt; 1.</span></div>
<div class="line"><a name="l02420"></a><span class="lineno"> 2420</span>&#160;    <span class="keywordflow">if</span> (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">CmpInst::ICMP_EQ</a>)</div>
<div class="line"><a name="l02421"></a><span class="lineno"> 2421</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e">CmpInst::ICMP_ULT</a>, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>,</div>
<div class="line"><a name="l02422"></a><span class="lineno"> 2422</span>&#160;                          <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(ShrTy, (<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> + 1).<a class="code" href="lib_2Target_2X86_2README_8txt.html#af91797dc0ab1ae005fdbf19482859eaf">shl</a>(ShAmtVal)));</div>
<div class="line"><a name="l02423"></a><span class="lineno"> 2423</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l02424"></a><span class="lineno"> 2424</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba607cecdc5172814382033e001ed11fad">CmpInst::ICMP_UGT</a>, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>,</div>
<div class="line"><a name="l02425"></a><span class="lineno"> 2425</span>&#160;                          <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(ShrTy, (<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> + 1).<a class="code" href="lib_2Target_2X86_2README_8txt.html#af91797dc0ab1ae005fdbf19482859eaf">shl</a>(ShAmtVal) - 1));</div>
<div class="line"><a name="l02426"></a><span class="lineno"> 2426</span>&#160;  }</div>
<div class="line"><a name="l02427"></a><span class="lineno"> 2427</span>&#160; </div>
<div class="line"><a name="l02428"></a><span class="lineno"> 2428</span>&#160;  <span class="keywordflow">if</span> (Shr-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>()) {</div>
<div class="line"><a name="l02429"></a><span class="lineno"> 2429</span>&#160;    <span class="comment">// Canonicalize the shift into an &#39;and&#39;:</span></div>
<div class="line"><a name="l02430"></a><span class="lineno"> 2430</span>&#160;    <span class="comment">// icmp eq/ne (shr X, ShAmt), C --&gt; icmp eq/ne (and X, HiMask), (C &lt;&lt; ShAmt)</span></div>
<div class="line"><a name="l02431"></a><span class="lineno"> 2431</span>&#160;    <a class="code" href="classllvm_1_1APInt.html">APInt</a> Val(<a class="code" href="classllvm_1_1APInt.html#adcb96bd09d7c75c7669fa5f9d1190899">APInt::getHighBitsSet</a>(TypeBits, TypeBits - ShAmtVal));</div>
<div class="line"><a name="l02432"></a><span class="lineno"> 2432</span>&#160;    <a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a> = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(ShrTy, Val);</div>
<div class="line"><a name="l02433"></a><span class="lineno"> 2433</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eac33315685a0cba3ce53be378b3c7874b">And</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAnd(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a>, Shr-&gt;<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>() + <span class="stringliteral">&quot;.mask&quot;</span>);</div>
<div class="line"><a name="l02434"></a><span class="lineno"> 2434</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, <a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eac33315685a0cba3ce53be378b3c7874b">And</a>, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(ShrTy, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> &lt;&lt; ShAmtVal));</div>
<div class="line"><a name="l02435"></a><span class="lineno"> 2435</span>&#160;  }</div>
<div class="line"><a name="l02436"></a><span class="lineno"> 2436</span>&#160; </div>
<div class="line"><a name="l02437"></a><span class="lineno"> 2437</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02438"></a><span class="lineno"> 2438</span>&#160;}</div>
<div class="line"><a name="l02439"></a><span class="lineno"> 2439</span>&#160; </div>
<div class="line"><a name="l02440"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombinerImpl.html#a06131a96d98381fd2b73c4ef401d416c"> 2440</a></span>&#160;<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombinerImpl.html#a06131a96d98381fd2b73c4ef401d416c">InstCombinerImpl::foldICmpSRemConstant</a>(<a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> &amp;Cmp,</div>
<div class="line"><a name="l02441"></a><span class="lineno"> 2441</span>&#160;                                                    <a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> *SRem,</div>
<div class="line"><a name="l02442"></a><span class="lineno"> 2442</span>&#160;                                                    <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> &amp;<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>) {</div>
<div class="line"><a name="l02443"></a><span class="lineno"> 2443</span>&#160;  <span class="comment">// Match an &#39;is positive&#39; or &#39;is negative&#39; comparison of remainder by a</span></div>
<div class="line"><a name="l02444"></a><span class="lineno"> 2444</span>&#160;  <span class="comment">// constant power-of-2 value:</span></div>
<div class="line"><a name="l02445"></a><span class="lineno"> 2445</span>&#160;  <span class="comment">// (X % pow2C) sgt/slt 0</span></div>
<div class="line"><a name="l02446"></a><span class="lineno"> 2446</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">ICmpInst::Predicate</a> Pred = Cmp.getPredicate();</div>
<div class="line"><a name="l02447"></a><span class="lineno"> 2447</span>&#160;  <span class="keywordflow">if</span> (Pred != <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba720a42e85f7e981afd61e28473b0000a">ICmpInst::ICMP_SGT</a> &amp;&amp; Pred != <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba15ae464950ac676919c2f0c7aafc706c">ICmpInst::ICMP_SLT</a> &amp;&amp;</div>
<div class="line"><a name="l02448"></a><span class="lineno"> 2448</span>&#160;      Pred != <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a> &amp;&amp; Pred != <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a>)</div>
<div class="line"><a name="l02449"></a><span class="lineno"> 2449</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02450"></a><span class="lineno"> 2450</span>&#160; </div>
<div class="line"><a name="l02451"></a><span class="lineno"> 2451</span>&#160;  <span class="comment">// TODO: The one-use check is standard because we do not typically want to</span></div>
<div class="line"><a name="l02452"></a><span class="lineno"> 2452</span>&#160;  <span class="comment">//       create longer instruction sequences, but this might be a special-case</span></div>
<div class="line"><a name="l02453"></a><span class="lineno"> 2453</span>&#160;  <span class="comment">//       because srem is not good for analysis or codegen.</span></div>
<div class="line"><a name="l02454"></a><span class="lineno"> 2454</span>&#160;  <span class="keywordflow">if</span> (!SRem-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>())</div>
<div class="line"><a name="l02455"></a><span class="lineno"> 2455</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02456"></a><span class="lineno"> 2456</span>&#160; </div>
<div class="line"><a name="l02457"></a><span class="lineno"> 2457</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *DivisorC;</div>
<div class="line"><a name="l02458"></a><span class="lineno"> 2458</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(SRem-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(1), <a class="code" href="namespacellvm_1_1PatternMatch.html#ad5e60756e331a97669d11b5c9d8691a2">m_Power2</a>(DivisorC)))</div>
<div class="line"><a name="l02459"></a><span class="lineno"> 2459</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02460"></a><span class="lineno"> 2460</span>&#160; </div>
<div class="line"><a name="l02461"></a><span class="lineno"> 2461</span>&#160;  <span class="comment">// For cmp_sgt/cmp_slt only zero valued C is handled.</span></div>
<div class="line"><a name="l02462"></a><span class="lineno"> 2462</span>&#160;  <span class="comment">// For cmp_eq/cmp_ne only positive valued C is handled.</span></div>
<div class="line"><a name="l02463"></a><span class="lineno"> 2463</span>&#160;  <span class="keywordflow">if</span> (((Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba720a42e85f7e981afd61e28473b0000a">ICmpInst::ICMP_SGT</a> || Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba15ae464950ac676919c2f0c7aafc706c">ICmpInst::ICMP_SLT</a>) &amp;&amp;</div>
<div class="line"><a name="l02464"></a><span class="lineno"> 2464</span>&#160;       !<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.isZero()) ||</div>
<div class="line"><a name="l02465"></a><span class="lineno"> 2465</span>&#160;      ((Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a> || Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a>) &amp;&amp;</div>
<div class="line"><a name="l02466"></a><span class="lineno"> 2466</span>&#160;       !<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.isStrictlyPositive()))</div>
<div class="line"><a name="l02467"></a><span class="lineno"> 2467</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02468"></a><span class="lineno"> 2468</span>&#160; </div>
<div class="line"><a name="l02469"></a><span class="lineno"> 2469</span>&#160;  <span class="comment">// Mask off the sign bit and the modulo bits (low-bits).</span></div>
<div class="line"><a name="l02470"></a><span class="lineno"> 2470</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *Ty = SRem-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>();</div>
<div class="line"><a name="l02471"></a><span class="lineno"> 2471</span>&#160;  <a class="code" href="classllvm_1_1APInt.html">APInt</a> SignMask = <a class="code" href="classllvm_1_1APInt.html#a1e6f0d8dfed0ab631b488a3e6317718e">APInt::getSignMask</a>(Ty-&gt;<a class="code" href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>());</div>
<div class="line"><a name="l02472"></a><span class="lineno"> 2472</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *MaskC = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Ty, SignMask | (*DivisorC - 1));</div>
<div class="line"><a name="l02473"></a><span class="lineno"> 2473</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eac33315685a0cba3ce53be378b3c7874b">And</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAnd(SRem-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0), MaskC);</div>
<div class="line"><a name="l02474"></a><span class="lineno"> 2474</span>&#160; </div>
<div class="line"><a name="l02475"></a><span class="lineno"> 2475</span>&#160;  <span class="keywordflow">if</span> (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a> || Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a>)</div>
<div class="line"><a name="l02476"></a><span class="lineno"> 2476</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, <a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eac33315685a0cba3ce53be378b3c7874b">And</a>, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Ty, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>));</div>
<div class="line"><a name="l02477"></a><span class="lineno"> 2477</span>&#160; </div>
<div class="line"><a name="l02478"></a><span class="lineno"> 2478</span>&#160;  <span class="comment">// For &#39;is positive?&#39; check that the sign-bit is clear and at least 1 masked</span></div>
<div class="line"><a name="l02479"></a><span class="lineno"> 2479</span>&#160;  <span class="comment">// bit is set. Example:</span></div>
<div class="line"><a name="l02480"></a><span class="lineno"> 2480</span>&#160;  <span class="comment">// (i8 X % 32) s&gt; 0 --&gt; (X &amp; 159) s&gt; 0</span></div>
<div class="line"><a name="l02481"></a><span class="lineno"> 2481</span>&#160;  <span class="keywordflow">if</span> (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba720a42e85f7e981afd61e28473b0000a">ICmpInst::ICMP_SGT</a>)</div>
<div class="line"><a name="l02482"></a><span class="lineno"> 2482</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba720a42e85f7e981afd61e28473b0000a">ICmpInst::ICMP_SGT</a>, <a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eac33315685a0cba3ce53be378b3c7874b">And</a>, <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">ConstantInt::getNullValue</a>(Ty));</div>
<div class="line"><a name="l02483"></a><span class="lineno"> 2483</span>&#160; </div>
<div class="line"><a name="l02484"></a><span class="lineno"> 2484</span>&#160;  <span class="comment">// For &#39;is negative?&#39; check that the sign-bit is set and at least 1 masked</span></div>
<div class="line"><a name="l02485"></a><span class="lineno"> 2485</span>&#160;  <span class="comment">// bit is set. Example:</span></div>
<div class="line"><a name="l02486"></a><span class="lineno"> 2486</span>&#160;  <span class="comment">// (i16 X % 4) s&lt; 0 --&gt; (X &amp; 32771) u&gt; 32768</span></div>
<div class="line"><a name="l02487"></a><span class="lineno"> 2487</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba607cecdc5172814382033e001ed11fad">ICmpInst::ICMP_UGT</a>, <a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eac33315685a0cba3ce53be378b3c7874b">And</a>, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Ty, SignMask));</div>
<div class="line"><a name="l02488"></a><span class="lineno"> 2488</span>&#160;}</div>
<div class="line"><a name="l02489"></a><span class="lineno"> 2489</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02490"></a><span class="lineno"> 2490</span>&#160;<span class="comment">/// Fold icmp (udiv X, Y), C.</span></div>
<div class="line"><a name="l02491"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombinerImpl.html#a9175bf0e4b0c3a18e2f86bb11270ee78"> 2491</a></span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombinerImpl.html#a9175bf0e4b0c3a18e2f86bb11270ee78">InstCombinerImpl::foldICmpUDivConstant</a>(<a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> &amp;Cmp,</div>
<div class="line"><a name="l02492"></a><span class="lineno"> 2492</span>&#160;                                                    <a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> *UDiv,</div>
<div class="line"><a name="l02493"></a><span class="lineno"> 2493</span>&#160;                                                    <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> &amp;<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>) {</div>
<div class="line"><a name="l02494"></a><span class="lineno"> 2494</span>&#160;  <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">ICmpInst::Predicate</a> Pred = Cmp.getPredicate();</div>
<div class="line"><a name="l02495"></a><span class="lineno"> 2495</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a> = UDiv-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0);</div>
<div class="line"><a name="l02496"></a><span class="lineno"> 2496</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a> = UDiv-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(1);</div>
<div class="line"><a name="l02497"></a><span class="lineno"> 2497</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *Ty = UDiv-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>();</div>
<div class="line"><a name="l02498"></a><span class="lineno"> 2498</span>&#160; </div>
<div class="line"><a name="l02499"></a><span class="lineno"> 2499</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *C2;</div>
<div class="line"><a name="l02500"></a><span class="lineno"> 2500</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(C2)))</div>
<div class="line"><a name="l02501"></a><span class="lineno"> 2501</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02502"></a><span class="lineno"> 2502</span>&#160; </div>
<div class="line"><a name="l02503"></a><span class="lineno"> 2503</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(*C2 != 0 &amp;&amp; <span class="stringliteral">&quot;udiv 0, X should have been simplified already.&quot;</span>);</div>
<div class="line"><a name="l02504"></a><span class="lineno"> 2504</span>&#160; </div>
<div class="line"><a name="l02505"></a><span class="lineno"> 2505</span>&#160;  <span class="comment">// (icmp ugt (udiv C2, Y), C) -&gt; (icmp ule Y, C2/(C+1))</span></div>
<div class="line"><a name="l02506"></a><span class="lineno"> 2506</span>&#160;  <span class="keywordflow">if</span> (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba607cecdc5172814382033e001ed11fad">ICmpInst::ICMP_UGT</a>) {</div>
<div class="line"><a name="l02507"></a><span class="lineno"> 2507</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.isMaxValue() &amp;&amp;</div>
<div class="line"><a name="l02508"></a><span class="lineno"> 2508</span>&#160;           <span class="stringliteral">&quot;icmp ugt X, UINT_MAX should have been simplified already.&quot;</span>);</div>
<div class="line"><a name="l02509"></a><span class="lineno"> 2509</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bad92f160316221fd4090520bb2b3cefc5">ICmpInst::ICMP_ULE</a>, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>,</div>
<div class="line"><a name="l02510"></a><span class="lineno"> 2510</span>&#160;                        <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Ty, C2-&gt;<a class="code" href="classllvm_1_1APInt.html#a05d674becc60ba4ef8cd4dd4d38ac27a">udiv</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> + 1)));</div>
<div class="line"><a name="l02511"></a><span class="lineno"> 2511</span>&#160;  }</div>
<div class="line"><a name="l02512"></a><span class="lineno"> 2512</span>&#160; </div>
<div class="line"><a name="l02513"></a><span class="lineno"> 2513</span>&#160;  <span class="comment">// (icmp ult (udiv C2, Y), C) -&gt; (icmp ugt Y, C2/C)</span></div>
<div class="line"><a name="l02514"></a><span class="lineno"> 2514</span>&#160;  <span class="keywordflow">if</span> (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e">ICmpInst::ICMP_ULT</a>) {</div>
<div class="line"><a name="l02515"></a><span class="lineno"> 2515</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> != 0 &amp;&amp; <span class="stringliteral">&quot;icmp ult X, 0 should have been simplified already.&quot;</span>);</div>
<div class="line"><a name="l02516"></a><span class="lineno"> 2516</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba607cecdc5172814382033e001ed11fad">ICmpInst::ICMP_UGT</a>, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>,</div>
<div class="line"><a name="l02517"></a><span class="lineno"> 2517</span>&#160;                        <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Ty, C2-&gt;<a class="code" href="classllvm_1_1APInt.html#a05d674becc60ba4ef8cd4dd4d38ac27a">udiv</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)));</div>
<div class="line"><a name="l02518"></a><span class="lineno"> 2518</span>&#160;  }</div>
<div class="line"><a name="l02519"></a><span class="lineno"> 2519</span>&#160; </div>
<div class="line"><a name="l02520"></a><span class="lineno"> 2520</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02521"></a><span class="lineno"> 2521</span>&#160;}</div>
<div class="line"><a name="l02522"></a><span class="lineno"> 2522</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02523"></a><span class="lineno"> 2523</span>&#160;<span class="comment">/// Fold icmp ({su}div X, Y), C.</span></div>
<div class="line"><a name="l02524"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombinerImpl.html#a8efbb860a56c4deccffeca4d2963fb70"> 2524</a></span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombinerImpl.html#a8efbb860a56c4deccffeca4d2963fb70">InstCombinerImpl::foldICmpDivConstant</a>(<a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> &amp;Cmp,</div>
<div class="line"><a name="l02525"></a><span class="lineno"> 2525</span>&#160;                                                   <a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> *Div,</div>
<div class="line"><a name="l02526"></a><span class="lineno"> 2526</span>&#160;                                                   <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> &amp;<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>) {</div>
<div class="line"><a name="l02527"></a><span class="lineno"> 2527</span>&#160;  <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">ICmpInst::Predicate</a> Pred = Cmp.getPredicate();</div>
<div class="line"><a name="l02528"></a><span class="lineno"> 2528</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a> = Div-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0);</div>
<div class="line"><a name="l02529"></a><span class="lineno"> 2529</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a> = Div-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(1);</div>
<div class="line"><a name="l02530"></a><span class="lineno"> 2530</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *Ty = Div-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>();</div>
<div class="line"><a name="l02531"></a><span class="lineno"> 2531</span>&#160;  <span class="keywordtype">bool</span> DivIsSigned = Div-&gt;<a class="code" href="classllvm_1_1BinaryOperator.html#a31bf07f3f61525486633bc1d0bbaf029">getOpcode</a>() == Instruction::SDiv;</div>
<div class="line"><a name="l02532"></a><span class="lineno"> 2532</span>&#160; </div>
<div class="line"><a name="l02533"></a><span class="lineno"> 2533</span>&#160;  <span class="comment">// If unsigned division and the compare constant is bigger than</span></div>
<div class="line"><a name="l02534"></a><span class="lineno"> 2534</span>&#160;  <span class="comment">// UMAX/2 (negative), there&#39;s only one pair of values that satisfies an</span></div>
<div class="line"><a name="l02535"></a><span class="lineno"> 2535</span>&#160;  <span class="comment">// equality check, so eliminate the division:</span></div>
<div class="line"><a name="l02536"></a><span class="lineno"> 2536</span>&#160;  <span class="comment">// (X u/ Y) == C --&gt; (X == C) &amp;&amp; (Y == 1)</span></div>
<div class="line"><a name="l02537"></a><span class="lineno"> 2537</span>&#160;  <span class="comment">// (X u/ Y) != C --&gt; (X != C) || (Y != 1)</span></div>
<div class="line"><a name="l02538"></a><span class="lineno"> 2538</span>&#160;  <span class="comment">// Similarly, if signed division and the compare constant is exactly SMIN:</span></div>
<div class="line"><a name="l02539"></a><span class="lineno"> 2539</span>&#160;  <span class="comment">// (X s/ Y) == SMIN --&gt; (X == SMIN) &amp;&amp; (Y == 1)</span></div>
<div class="line"><a name="l02540"></a><span class="lineno"> 2540</span>&#160;  <span class="comment">// (X s/ Y) != SMIN --&gt; (X != SMIN) || (Y != 1)</span></div>
<div class="line"><a name="l02541"></a><span class="lineno"> 2541</span>&#160;  <span class="keywordflow">if</span> (Cmp.isEquality() &amp;&amp; Div-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>() &amp;&amp; <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.isSignBitSet() &amp;&amp;</div>
<div class="line"><a name="l02542"></a><span class="lineno"> 2542</span>&#160;      (!DivIsSigned || <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.isMinSignedValue()))   {</div>
<div class="line"><a name="l02543"></a><span class="lineno"> 2543</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *XBig = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateICmp(Pred, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Ty, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>));</div>
<div class="line"><a name="l02544"></a><span class="lineno"> 2544</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *YOne = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateICmp(Pred, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Ty, 1));</div>
<div class="line"><a name="l02545"></a><span class="lineno"> 2545</span>&#160;    <span class="keyword">auto</span> Logic = Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a> ? Instruction::And : Instruction::Or;</div>
<div class="line"><a name="l02546"></a><span class="lineno"> 2546</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1BinaryOperator.html#a02ce9966395063ac501ecbc1623deda4">BinaryOperator::Create</a>(Logic, XBig, YOne);</div>
<div class="line"><a name="l02547"></a><span class="lineno"> 2547</span>&#160;  }</div>
<div class="line"><a name="l02548"></a><span class="lineno"> 2548</span>&#160; </div>
<div class="line"><a name="l02549"></a><span class="lineno"> 2549</span>&#160;  <span class="comment">// Fold: icmp pred ([us]div X, C2), C -&gt; range test</span></div>
<div class="line"><a name="l02550"></a><span class="lineno"> 2550</span>&#160;  <span class="comment">// Fold this div into the comparison, producing a range check.</span></div>
<div class="line"><a name="l02551"></a><span class="lineno"> 2551</span>&#160;  <span class="comment">// Determine, based on the divide type, what the range is being</span></div>
<div class="line"><a name="l02552"></a><span class="lineno"> 2552</span>&#160;  <span class="comment">// checked.  If there is an overflow on the low or high side, remember</span></div>
<div class="line"><a name="l02553"></a><span class="lineno"> 2553</span>&#160;  <span class="comment">// it, otherwise compute the range [low, hi) bounding the new value.</span></div>
<div class="line"><a name="l02554"></a><span class="lineno"> 2554</span>&#160;  <span class="comment">// See: InsertRangeTest above for the kinds of replacements possible.</span></div>
<div class="line"><a name="l02555"></a><span class="lineno"> 2555</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *C2;</div>
<div class="line"><a name="l02556"></a><span class="lineno"> 2556</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(C2)))</div>
<div class="line"><a name="l02557"></a><span class="lineno"> 2557</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02558"></a><span class="lineno"> 2558</span>&#160; </div>
<div class="line"><a name="l02559"></a><span class="lineno"> 2559</span>&#160;  <span class="comment">// FIXME: If the operand types don&#39;t match the type of the divide</span></div>
<div class="line"><a name="l02560"></a><span class="lineno"> 2560</span>&#160;  <span class="comment">// then don&#39;t attempt this transform. The code below doesn&#39;t have the</span></div>
<div class="line"><a name="l02561"></a><span class="lineno"> 2561</span>&#160;  <span class="comment">// logic to deal with a signed divide and an unsigned compare (and</span></div>
<div class="line"><a name="l02562"></a><span class="lineno"> 2562</span>&#160;  <span class="comment">// vice versa). This is because (x /s C2) &lt;s C  produces different</span></div>
<div class="line"><a name="l02563"></a><span class="lineno"> 2563</span>&#160;  <span class="comment">// results than (x /s C2) &lt;u C or (x /u C2) &lt;s C or even</span></div>
<div class="line"><a name="l02564"></a><span class="lineno"> 2564</span>&#160;  <span class="comment">// (x /u C2) &lt;u C.  Simply casting the operands and result won&#39;t</span></div>
<div class="line"><a name="l02565"></a><span class="lineno"> 2565</span>&#160;  <span class="comment">// work. :(  The if statement below tests that condition and bails</span></div>
<div class="line"><a name="l02566"></a><span class="lineno"> 2566</span>&#160;  <span class="comment">// if it finds it.</span></div>
<div class="line"><a name="l02567"></a><span class="lineno"> 2567</span>&#160;  <span class="keywordflow">if</span> (!Cmp.isEquality() &amp;&amp; DivIsSigned != Cmp.isSigned())</div>
<div class="line"><a name="l02568"></a><span class="lineno"> 2568</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02569"></a><span class="lineno"> 2569</span>&#160; </div>
<div class="line"><a name="l02570"></a><span class="lineno"> 2570</span>&#160;  <span class="comment">// The ProdOV computation fails on divide by 0 and divide by -1. Cases with</span></div>
<div class="line"><a name="l02571"></a><span class="lineno"> 2571</span>&#160;  <span class="comment">// INT_MIN will also fail if the divisor is 1. Although folds of all these</span></div>
<div class="line"><a name="l02572"></a><span class="lineno"> 2572</span>&#160;  <span class="comment">// division-by-constant cases should be present, we can not assert that they</span></div>
<div class="line"><a name="l02573"></a><span class="lineno"> 2573</span>&#160;  <span class="comment">// have happened before we reach this icmp instruction.</span></div>
<div class="line"><a name="l02574"></a><span class="lineno"> 2574</span>&#160;  <span class="keywordflow">if</span> (C2-&gt;<a class="code" href="classllvm_1_1APInt.html#a49cd5939942c6665aba4cae8c220dff1">isZero</a>() || C2-&gt;<a class="code" href="classllvm_1_1APInt.html#aea5f26deda5ef97e02f6afc57c0c3920">isOne</a>() || (DivIsSigned &amp;&amp; C2-&gt;<a class="code" href="classllvm_1_1APInt.html#a423e2c491de1408d54e35f0b47d076be">isAllOnes</a>()))</div>
<div class="line"><a name="l02575"></a><span class="lineno"> 2575</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02576"></a><span class="lineno"> 2576</span>&#160; </div>
<div class="line"><a name="l02577"></a><span class="lineno"> 2577</span>&#160;  <span class="comment">// Compute Prod = C * C2. We are essentially solving an equation of</span></div>
<div class="line"><a name="l02578"></a><span class="lineno"> 2578</span>&#160;  <span class="comment">// form X / C2 = C. We solve for X by multiplying C2 and C.</span></div>
<div class="line"><a name="l02579"></a><span class="lineno"> 2579</span>&#160;  <span class="comment">// By solving for X, we can turn this into a range check instead of computing</span></div>
<div class="line"><a name="l02580"></a><span class="lineno"> 2580</span>&#160;  <span class="comment">// a divide.</span></div>
<div class="line"><a name="l02581"></a><span class="lineno"> 2581</span>&#160;  <a class="code" href="classllvm_1_1APInt.html">APInt</a> Prod = <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> * *C2;</div>
<div class="line"><a name="l02582"></a><span class="lineno"> 2582</span>&#160; </div>
<div class="line"><a name="l02583"></a><span class="lineno"> 2583</span>&#160;  <span class="comment">// Determine if the product overflows by seeing if the product is not equal to</span></div>
<div class="line"><a name="l02584"></a><span class="lineno"> 2584</span>&#160;  <span class="comment">// the divide. Make sure we do the same kind of divide as in the LHS</span></div>
<div class="line"><a name="l02585"></a><span class="lineno"> 2585</span>&#160;  <span class="comment">// instruction that we&#39;re folding.</span></div>
<div class="line"><a name="l02586"></a><span class="lineno"> 2586</span>&#160;  <span class="keywordtype">bool</span> ProdOV = (DivIsSigned ? Prod.<a class="code" href="classllvm_1_1APInt.html#a71f7f6e3a4774296efc7274196a74793">sdiv</a>(*C2) : Prod.<a class="code" href="classllvm_1_1APInt.html#a05d674becc60ba4ef8cd4dd4d38ac27a">udiv</a>(*C2)) != <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>;</div>
<div class="line"><a name="l02587"></a><span class="lineno"> 2587</span>&#160; </div>
<div class="line"><a name="l02588"></a><span class="lineno"> 2588</span>&#160;  <span class="comment">// If the division is known to be exact, then there is no remainder from the</span></div>
<div class="line"><a name="l02589"></a><span class="lineno"> 2589</span>&#160;  <span class="comment">// divide, so the covered range size is unit, otherwise it is the divisor.</span></div>
<div class="line"><a name="l02590"></a><span class="lineno"> 2590</span>&#160;  <a class="code" href="classllvm_1_1APInt.html">APInt</a> RangeSize = Div-&gt;<a class="code" href="classllvm_1_1Instruction.html#a689a03df5b4ae094d6a3a1bd13dac574">isExact</a>() ? <a class="code" href="classllvm_1_1APInt.html">APInt</a>(C2-&gt;getBitWidth(), 1) : *C2;</div>
<div class="line"><a name="l02591"></a><span class="lineno"> 2591</span>&#160; </div>
<div class="line"><a name="l02592"></a><span class="lineno"> 2592</span>&#160;  <span class="comment">// Figure out the interval that is being checked.  For example, a comparison</span></div>
<div class="line"><a name="l02593"></a><span class="lineno"> 2593</span>&#160;  <span class="comment">// like &quot;X /u 5 == 0&quot; is really checking that X is in the interval [0, 5).</span></div>
<div class="line"><a name="l02594"></a><span class="lineno"> 2594</span>&#160;  <span class="comment">// Compute this interval based on the constants involved and the signedness of</span></div>
<div class="line"><a name="l02595"></a><span class="lineno"> 2595</span>&#160;  <span class="comment">// the compare/divide.  This computes a half-open interval, keeping track of</span></div>
<div class="line"><a name="l02596"></a><span class="lineno"> 2596</span>&#160;  <span class="comment">// whether either value in the interval overflows.  After analysis each</span></div>
<div class="line"><a name="l02597"></a><span class="lineno"> 2597</span>&#160;  <span class="comment">// overflow variable is set to 0 if it&#39;s corresponding bound variable is valid</span></div>
<div class="line"><a name="l02598"></a><span class="lineno"> 2598</span>&#160;  <span class="comment">// -1 if overflowed off the bottom end, or +1 if overflowed off the top end.</span></div>
<div class="line"><a name="l02599"></a><span class="lineno"> 2599</span>&#160;  <span class="keywordtype">int</span> LoOverflow = 0, HiOverflow = 0;</div>
<div class="line"><a name="l02600"></a><span class="lineno"> 2600</span>&#160;  <a class="code" href="classllvm_1_1APInt.html">APInt</a> LoBound, HiBound;</div>
<div class="line"><a name="l02601"></a><span class="lineno"> 2601</span>&#160; </div>
<div class="line"><a name="l02602"></a><span class="lineno"> 2602</span>&#160;  <span class="keywordflow">if</span> (!DivIsSigned) { <span class="comment">// udiv</span></div>
<div class="line"><a name="l02603"></a><span class="lineno"> 2603</span>&#160;    <span class="comment">// e.g. X/5 op 3  --&gt; [15, 20)</span></div>
<div class="line"><a name="l02604"></a><span class="lineno"> 2604</span>&#160;    LoBound = Prod;</div>
<div class="line"><a name="l02605"></a><span class="lineno"> 2605</span>&#160;    HiOverflow = LoOverflow = ProdOV;</div>
<div class="line"><a name="l02606"></a><span class="lineno"> 2606</span>&#160;    <span class="keywordflow">if</span> (!HiOverflow) {</div>
<div class="line"><a name="l02607"></a><span class="lineno"> 2607</span>&#160;      <span class="comment">// If this is not an exact divide, then many values in the range collapse</span></div>
<div class="line"><a name="l02608"></a><span class="lineno"> 2608</span>&#160;      <span class="comment">// to the same result value.</span></div>
<div class="line"><a name="l02609"></a><span class="lineno"> 2609</span>&#160;      HiOverflow = <a class="code" href="InstCombineCompares_8cpp.html#a21d115d23f25fa3a2eabb1acaac67444">addWithOverflow</a>(HiBound, LoBound, RangeSize, <span class="keyword">false</span>);</div>
<div class="line"><a name="l02610"></a><span class="lineno"> 2610</span>&#160;    }</div>
<div class="line"><a name="l02611"></a><span class="lineno"> 2611</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (C2-&gt;isStrictlyPositive()) { <span class="comment">// Divisor is &gt; 0.</span></div>
<div class="line"><a name="l02612"></a><span class="lineno"> 2612</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.isZero()) {                    <span class="comment">// (X / pos) op 0</span></div>
<div class="line"><a name="l02613"></a><span class="lineno"> 2613</span>&#160;      <span class="comment">// Can&#39;t overflow.  e.g.  X/2 op 0 --&gt; [-1, 2)</span></div>
<div class="line"><a name="l02614"></a><span class="lineno"> 2614</span>&#160;      LoBound = -(RangeSize - 1);</div>
<div class="line"><a name="l02615"></a><span class="lineno"> 2615</span>&#160;      HiBound = RangeSize;</div>
<div class="line"><a name="l02616"></a><span class="lineno"> 2616</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.isStrictlyPositive()) { <span class="comment">// (X / pos) op pos</span></div>
<div class="line"><a name="l02617"></a><span class="lineno"> 2617</span>&#160;      LoBound = Prod;                    <span class="comment">// e.g.   X/5 op 3 --&gt; [15, 20)</span></div>
<div class="line"><a name="l02618"></a><span class="lineno"> 2618</span>&#160;      HiOverflow = LoOverflow = ProdOV;</div>
<div class="line"><a name="l02619"></a><span class="lineno"> 2619</span>&#160;      <span class="keywordflow">if</span> (!HiOverflow)</div>
<div class="line"><a name="l02620"></a><span class="lineno"> 2620</span>&#160;        HiOverflow = <a class="code" href="InstCombineCompares_8cpp.html#a21d115d23f25fa3a2eabb1acaac67444">addWithOverflow</a>(HiBound, Prod, RangeSize, <span class="keyword">true</span>);</div>
<div class="line"><a name="l02621"></a><span class="lineno"> 2621</span>&#160;    } <span class="keywordflow">else</span> { <span class="comment">// (X / pos) op neg</span></div>
<div class="line"><a name="l02622"></a><span class="lineno"> 2622</span>&#160;      <span class="comment">// e.g. X/5 op -3  --&gt; [-15-4, -15+1) --&gt; [-19, -14)</span></div>
<div class="line"><a name="l02623"></a><span class="lineno"> 2623</span>&#160;      HiBound = Prod + 1;</div>
<div class="line"><a name="l02624"></a><span class="lineno"> 2624</span>&#160;      LoOverflow = HiOverflow = ProdOV ? -1 : 0;</div>
<div class="line"><a name="l02625"></a><span class="lineno"> 2625</span>&#160;      <span class="keywordflow">if</span> (!LoOverflow) {</div>
<div class="line"><a name="l02626"></a><span class="lineno"> 2626</span>&#160;        <a class="code" href="classllvm_1_1APInt.html">APInt</a> DivNeg = -RangeSize;</div>
<div class="line"><a name="l02627"></a><span class="lineno"> 2627</span>&#160;        LoOverflow = <a class="code" href="InstCombineCompares_8cpp.html#a21d115d23f25fa3a2eabb1acaac67444">addWithOverflow</a>(LoBound, HiBound, DivNeg, <span class="keyword">true</span>) ? -1 : 0;</div>
<div class="line"><a name="l02628"></a><span class="lineno"> 2628</span>&#160;      }</div>
<div class="line"><a name="l02629"></a><span class="lineno"> 2629</span>&#160;    }</div>
<div class="line"><a name="l02630"></a><span class="lineno"> 2630</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (C2-&gt;isNegative()) { <span class="comment">// Divisor is &lt; 0.</span></div>
<div class="line"><a name="l02631"></a><span class="lineno"> 2631</span>&#160;    <span class="keywordflow">if</span> (Div-&gt;<a class="code" href="classllvm_1_1Instruction.html#a689a03df5b4ae094d6a3a1bd13dac574">isExact</a>())</div>
<div class="line"><a name="l02632"></a><span class="lineno"> 2632</span>&#160;      RangeSize.<a class="code" href="classllvm_1_1APInt.html#a8376734f311508662dd7e737752e5953">negate</a>();</div>
<div class="line"><a name="l02633"></a><span class="lineno"> 2633</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.isZero()) { <span class="comment">// (X / neg) op 0</span></div>
<div class="line"><a name="l02634"></a><span class="lineno"> 2634</span>&#160;      <span class="comment">// e.g. X/-5 op 0  --&gt; [-4, 5)</span></div>
<div class="line"><a name="l02635"></a><span class="lineno"> 2635</span>&#160;      LoBound = RangeSize + 1;</div>
<div class="line"><a name="l02636"></a><span class="lineno"> 2636</span>&#160;      HiBound = -RangeSize;</div>
<div class="line"><a name="l02637"></a><span class="lineno"> 2637</span>&#160;      <span class="keywordflow">if</span> (HiBound == *C2) { <span class="comment">// -INTMIN = INTMIN</span></div>
<div class="line"><a name="l02638"></a><span class="lineno"> 2638</span>&#160;        HiOverflow = 1;     <span class="comment">// [INTMIN+1, overflow)</span></div>
<div class="line"><a name="l02639"></a><span class="lineno"> 2639</span>&#160;        HiBound = <a class="code" href="classllvm_1_1APInt.html">APInt</a>();  <span class="comment">// e.g. X/INTMIN = 0 --&gt; X &gt; INTMIN</span></div>
<div class="line"><a name="l02640"></a><span class="lineno"> 2640</span>&#160;      }</div>
<div class="line"><a name="l02641"></a><span class="lineno"> 2641</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.isStrictlyPositive()) { <span class="comment">// (X / neg) op pos</span></div>
<div class="line"><a name="l02642"></a><span class="lineno"> 2642</span>&#160;      <span class="comment">// e.g. X/-5 op 3  --&gt; [-19, -14)</span></div>
<div class="line"><a name="l02643"></a><span class="lineno"> 2643</span>&#160;      HiBound = Prod + 1;</div>
<div class="line"><a name="l02644"></a><span class="lineno"> 2644</span>&#160;      HiOverflow = LoOverflow = ProdOV ? -1 : 0;</div>
<div class="line"><a name="l02645"></a><span class="lineno"> 2645</span>&#160;      <span class="keywordflow">if</span> (!LoOverflow)</div>
<div class="line"><a name="l02646"></a><span class="lineno"> 2646</span>&#160;        LoOverflow =</div>
<div class="line"><a name="l02647"></a><span class="lineno"> 2647</span>&#160;            <a class="code" href="InstCombineCompares_8cpp.html#a21d115d23f25fa3a2eabb1acaac67444">addWithOverflow</a>(LoBound, HiBound, RangeSize, <span class="keyword">true</span>) ? -1 : 0;</div>
<div class="line"><a name="l02648"></a><span class="lineno"> 2648</span>&#160;    } <span class="keywordflow">else</span> {          <span class="comment">// (X / neg) op neg</span></div>
<div class="line"><a name="l02649"></a><span class="lineno"> 2649</span>&#160;      LoBound = Prod; <span class="comment">// e.g. X/-5 op -3  --&gt; [15, 20)</span></div>
<div class="line"><a name="l02650"></a><span class="lineno"> 2650</span>&#160;      LoOverflow = HiOverflow = ProdOV;</div>
<div class="line"><a name="l02651"></a><span class="lineno"> 2651</span>&#160;      <span class="keywordflow">if</span> (!HiOverflow)</div>
<div class="line"><a name="l02652"></a><span class="lineno"> 2652</span>&#160;        HiOverflow = <a class="code" href="InstCombineCompares_8cpp.html#a9ca0d2b442af6eec7e00bb32d14d44b7">subWithOverflow</a>(HiBound, Prod, RangeSize, <span class="keyword">true</span>);</div>
<div class="line"><a name="l02653"></a><span class="lineno"> 2653</span>&#160;    }</div>
<div class="line"><a name="l02654"></a><span class="lineno"> 2654</span>&#160; </div>
<div class="line"><a name="l02655"></a><span class="lineno"> 2655</span>&#160;    <span class="comment">// Dividing by a negative swaps the condition.  LT &lt;-&gt; GT</span></div>
<div class="line"><a name="l02656"></a><span class="lineno"> 2656</span>&#160;    Pred = <a class="code" href="classllvm_1_1CmpInst.html#a49a2d8f483ea08a3d6ea75f90c640d76">ICmpInst::getSwappedPredicate</a>(Pred);</div>
<div class="line"><a name="l02657"></a><span class="lineno"> 2657</span>&#160;  }</div>
<div class="line"><a name="l02658"></a><span class="lineno"> 2658</span>&#160; </div>
<div class="line"><a name="l02659"></a><span class="lineno"> 2659</span>&#160;  <span class="keywordflow">switch</span> (Pred) {</div>
<div class="line"><a name="l02660"></a><span class="lineno"> 2660</span>&#160;  <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l02661"></a><span class="lineno"> 2661</span>&#160;    <a class="code" href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Unhandled icmp predicate!&quot;</span>);</div>
<div class="line"><a name="l02662"></a><span class="lineno"> 2662</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a>:</div>
<div class="line"><a name="l02663"></a><span class="lineno"> 2663</span>&#160;    <span class="keywordflow">if</span> (LoOverflow &amp;&amp; HiOverflow)</div>
<div class="line"><a name="l02664"></a><span class="lineno"> 2664</span>&#160;      <span class="keywordflow">return</span> replaceInstUsesWith(Cmp, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getFalse());</div>
<div class="line"><a name="l02665"></a><span class="lineno"> 2665</span>&#160;    <span class="keywordflow">if</span> (HiOverflow)</div>
<div class="line"><a name="l02666"></a><span class="lineno"> 2666</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(DivIsSigned ? <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac1aa7b798ba11d2e497d5cce6ce6d3dc">ICmpInst::ICMP_SGE</a> : <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba573bcd571c938fce863525330bbfc4b8">ICmpInst::ICMP_UGE</a>,</div>
<div class="line"><a name="l02667"></a><span class="lineno"> 2667</span>&#160;                          <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Ty, LoBound));</div>
<div class="line"><a name="l02668"></a><span class="lineno"> 2668</span>&#160;    <span class="keywordflow">if</span> (LoOverflow)</div>
<div class="line"><a name="l02669"></a><span class="lineno"> 2669</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(DivIsSigned ? <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba15ae464950ac676919c2f0c7aafc706c">ICmpInst::ICMP_SLT</a> : <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e">ICmpInst::ICMP_ULT</a>,</div>
<div class="line"><a name="l02670"></a><span class="lineno"> 2670</span>&#160;                          <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Ty, HiBound));</div>
<div class="line"><a name="l02671"></a><span class="lineno"> 2671</span>&#160;    <span class="keywordflow">return</span> replaceInstUsesWith(</div>
<div class="line"><a name="l02672"></a><span class="lineno"> 2672</span>&#160;        Cmp, insertRangeTest(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, LoBound, HiBound, DivIsSigned, <span class="keyword">true</span>));</div>
<div class="line"><a name="l02673"></a><span class="lineno"> 2673</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a>:</div>
<div class="line"><a name="l02674"></a><span class="lineno"> 2674</span>&#160;    <span class="keywordflow">if</span> (LoOverflow &amp;&amp; HiOverflow)</div>
<div class="line"><a name="l02675"></a><span class="lineno"> 2675</span>&#160;      <span class="keywordflow">return</span> replaceInstUsesWith(Cmp, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getTrue());</div>
<div class="line"><a name="l02676"></a><span class="lineno"> 2676</span>&#160;    <span class="keywordflow">if</span> (HiOverflow)</div>
<div class="line"><a name="l02677"></a><span class="lineno"> 2677</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(DivIsSigned ? <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba15ae464950ac676919c2f0c7aafc706c">ICmpInst::ICMP_SLT</a> : <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e">ICmpInst::ICMP_ULT</a>,</div>
<div class="line"><a name="l02678"></a><span class="lineno"> 2678</span>&#160;                          <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Ty, LoBound));</div>
<div class="line"><a name="l02679"></a><span class="lineno"> 2679</span>&#160;    <span class="keywordflow">if</span> (LoOverflow)</div>
<div class="line"><a name="l02680"></a><span class="lineno"> 2680</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(DivIsSigned ? <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac1aa7b798ba11d2e497d5cce6ce6d3dc">ICmpInst::ICMP_SGE</a> : <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba573bcd571c938fce863525330bbfc4b8">ICmpInst::ICMP_UGE</a>,</div>
<div class="line"><a name="l02681"></a><span class="lineno"> 2681</span>&#160;                          <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Ty, HiBound));</div>
<div class="line"><a name="l02682"></a><span class="lineno"> 2682</span>&#160;    <span class="keywordflow">return</span> replaceInstUsesWith(</div>
<div class="line"><a name="l02683"></a><span class="lineno"> 2683</span>&#160;        Cmp, insertRangeTest(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, LoBound, HiBound, DivIsSigned, <span class="keyword">false</span>));</div>
<div class="line"><a name="l02684"></a><span class="lineno"> 2684</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e">ICmpInst::ICMP_ULT</a>:</div>
<div class="line"><a name="l02685"></a><span class="lineno"> 2685</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba15ae464950ac676919c2f0c7aafc706c">ICmpInst::ICMP_SLT</a>:</div>
<div class="line"><a name="l02686"></a><span class="lineno"> 2686</span>&#160;    <span class="keywordflow">if</span> (LoOverflow == +1) <span class="comment">// Low bound is greater than input range.</span></div>
<div class="line"><a name="l02687"></a><span class="lineno"> 2687</span>&#160;      <span class="keywordflow">return</span> replaceInstUsesWith(Cmp, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getTrue());</div>
<div class="line"><a name="l02688"></a><span class="lineno"> 2688</span>&#160;    <span class="keywordflow">if</span> (LoOverflow == -1) <span class="comment">// Low bound is less than input range.</span></div>
<div class="line"><a name="l02689"></a><span class="lineno"> 2689</span>&#160;      <span class="keywordflow">return</span> replaceInstUsesWith(Cmp, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getFalse());</div>
<div class="line"><a name="l02690"></a><span class="lineno"> 2690</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Ty, LoBound));</div>
<div class="line"><a name="l02691"></a><span class="lineno"> 2691</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba607cecdc5172814382033e001ed11fad">ICmpInst::ICMP_UGT</a>:</div>
<div class="line"><a name="l02692"></a><span class="lineno"> 2692</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba720a42e85f7e981afd61e28473b0000a">ICmpInst::ICMP_SGT</a>:</div>
<div class="line"><a name="l02693"></a><span class="lineno"> 2693</span>&#160;    <span class="keywordflow">if</span> (HiOverflow == +1) <span class="comment">// High bound greater than input range.</span></div>
<div class="line"><a name="l02694"></a><span class="lineno"> 2694</span>&#160;      <span class="keywordflow">return</span> replaceInstUsesWith(Cmp, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getFalse());</div>
<div class="line"><a name="l02695"></a><span class="lineno"> 2695</span>&#160;    <span class="keywordflow">if</span> (HiOverflow == -1) <span class="comment">// High bound less than input range.</span></div>
<div class="line"><a name="l02696"></a><span class="lineno"> 2696</span>&#160;      <span class="keywordflow">return</span> replaceInstUsesWith(Cmp, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getTrue());</div>
<div class="line"><a name="l02697"></a><span class="lineno"> 2697</span>&#160;    <span class="keywordflow">if</span> (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba607cecdc5172814382033e001ed11fad">ICmpInst::ICMP_UGT</a>)</div>
<div class="line"><a name="l02698"></a><span class="lineno"> 2698</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba573bcd571c938fce863525330bbfc4b8">ICmpInst::ICMP_UGE</a>, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Ty, HiBound));</div>
<div class="line"><a name="l02699"></a><span class="lineno"> 2699</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac1aa7b798ba11d2e497d5cce6ce6d3dc">ICmpInst::ICMP_SGE</a>, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Ty, HiBound));</div>
<div class="line"><a name="l02700"></a><span class="lineno"> 2700</span>&#160;  }</div>
<div class="line"><a name="l02701"></a><span class="lineno"> 2701</span>&#160; </div>
<div class="line"><a name="l02702"></a><span class="lineno"> 2702</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02703"></a><span class="lineno"> 2703</span>&#160;}</div>
<div class="line"><a name="l02704"></a><span class="lineno"> 2704</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02705"></a><span class="lineno"> 2705</span>&#160;<span class="comment">/// Fold icmp (sub X, Y), C.</span></div>
<div class="line"><a name="l02706"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombinerImpl.html#a39e315cb89b7144083895c083cc958e0"> 2706</a></span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombinerImpl.html#a39e315cb89b7144083895c083cc958e0">InstCombinerImpl::foldICmpSubConstant</a>(<a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> &amp;Cmp,</div>
<div class="line"><a name="l02707"></a><span class="lineno"> 2707</span>&#160;                                                   <a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> *Sub,</div>
<div class="line"><a name="l02708"></a><span class="lineno"> 2708</span>&#160;                                                   <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> &amp;<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>) {</div>
<div class="line"><a name="l02709"></a><span class="lineno"> 2709</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a> = Sub-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0), *<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a> = Sub-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(1);</div>
<div class="line"><a name="l02710"></a><span class="lineno"> 2710</span>&#160;  <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">ICmpInst::Predicate</a> Pred = Cmp.getPredicate();</div>
<div class="line"><a name="l02711"></a><span class="lineno"> 2711</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *Ty = Sub-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>();</div>
<div class="line"><a name="l02712"></a><span class="lineno"> 2712</span>&#160; </div>
<div class="line"><a name="l02713"></a><span class="lineno"> 2713</span>&#160;  <span class="comment">// (SubC - Y) == C) --&gt; Y == (SubC - C)</span></div>
<div class="line"><a name="l02714"></a><span class="lineno"> 2714</span>&#160;  <span class="comment">// (SubC - Y) != C) --&gt; Y != (SubC - C)</span></div>
<div class="line"><a name="l02715"></a><span class="lineno"> 2715</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *SubC;</div>
<div class="line"><a name="l02716"></a><span class="lineno"> 2716</span>&#160;  <span class="keywordflow">if</span> (Cmp.isEquality() &amp;&amp; <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#aec0ccdbde0581b3aae7f001634a34d8e">m_ImmConstant</a>(SubC))) {</div>
<div class="line"><a name="l02717"></a><span class="lineno"> 2717</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>,</div>
<div class="line"><a name="l02718"></a><span class="lineno"> 2718</span>&#160;                        <a class="code" href="classllvm_1_1ConstantExpr.html#a554ab77949b0a16670a83ec3307501eb">ConstantExpr::getSub</a>(SubC, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Ty, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)));</div>
<div class="line"><a name="l02719"></a><span class="lineno"> 2719</span>&#160;  }</div>
<div class="line"><a name="l02720"></a><span class="lineno"> 2720</span>&#160; </div>
<div class="line"><a name="l02721"></a><span class="lineno"> 2721</span>&#160;  <span class="comment">// (icmp P (sub nuw|nsw C2, Y), C) -&gt; (icmp swap(P) Y, C2-C)</span></div>
<div class="line"><a name="l02722"></a><span class="lineno"> 2722</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *C2;</div>
<div class="line"><a name="l02723"></a><span class="lineno"> 2723</span>&#160;  <a class="code" href="classllvm_1_1APInt.html">APInt</a> SubResult;</div>
<div class="line"><a name="l02724"></a><span class="lineno"> 2724</span>&#160;  <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">ICmpInst::Predicate</a> SwappedPred = Cmp.getSwappedPredicate();</div>
<div class="line"><a name="l02725"></a><span class="lineno"> 2725</span>&#160;  <span class="keywordtype">bool</span> HasNSW = Sub-&gt;<a class="code" href="classllvm_1_1Instruction.html#a350f4fdc01c770b5cf6a8be2624ae3e5">hasNoSignedWrap</a>();</div>
<div class="line"><a name="l02726"></a><span class="lineno"> 2726</span>&#160;  <span class="keywordtype">bool</span> HasNUW = Sub-&gt;<a class="code" href="classllvm_1_1Instruction.html#a100c666f9253331dd1d166a863248326">hasNoUnsignedWrap</a>();</div>
<div class="line"><a name="l02727"></a><span class="lineno"> 2727</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(C2)) &amp;&amp;</div>
<div class="line"><a name="l02728"></a><span class="lineno"> 2728</span>&#160;      ((Cmp.isUnsigned() &amp;&amp; HasNUW) || (Cmp.isSigned() &amp;&amp; HasNSW)) &amp;&amp;</div>
<div class="line"><a name="l02729"></a><span class="lineno"> 2729</span>&#160;      !<a class="code" href="InstCombineCompares_8cpp.html#a9ca0d2b442af6eec7e00bb32d14d44b7">subWithOverflow</a>(SubResult, *C2, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, Cmp.isSigned()))</div>
<div class="line"><a name="l02730"></a><span class="lineno"> 2730</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(SwappedPred, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Ty, SubResult));</div>
<div class="line"><a name="l02731"></a><span class="lineno"> 2731</span>&#160; </div>
<div class="line"><a name="l02732"></a><span class="lineno"> 2732</span>&#160;  <span class="comment">// X - Y == 0 --&gt; X == Y.</span></div>
<div class="line"><a name="l02733"></a><span class="lineno"> 2733</span>&#160;  <span class="comment">// X - Y != 0 --&gt; X != Y.</span></div>
<div class="line"><a name="l02734"></a><span class="lineno"> 2734</span>&#160;  <span class="comment">// TODO: We allow this with multiple uses as long as the other uses are not</span></div>
<div class="line"><a name="l02735"></a><span class="lineno"> 2735</span>&#160;  <span class="comment">//       in phis. The phi use check is guarding against a codegen regression</span></div>
<div class="line"><a name="l02736"></a><span class="lineno"> 2736</span>&#160;  <span class="comment">//       for a loop test. If the backend could undo this (and possibly</span></div>
<div class="line"><a name="l02737"></a><span class="lineno"> 2737</span>&#160;  <span class="comment">//       subsequent transforms), we would not need this hack.</span></div>
<div class="line"><a name="l02738"></a><span class="lineno"> 2738</span>&#160;  <span class="keywordflow">if</span> (Cmp.isEquality() &amp;&amp; <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.isZero() &amp;&amp;</div>
<div class="line"><a name="l02739"></a><span class="lineno"> 2739</span>&#160;      <a class="code" href="namespacellvm.html#a7dc3069afa2ce5ea62ac2eb183e51c00">none_of</a>((Sub-&gt;<a class="code" href="classllvm_1_1Value.html#ab4e0512c7e1c7adaa56677e3155685f1">users</a>()), [](<span class="keyword">const</span> <a class="code" href="classllvm_1_1User.html">User</a> *U) { return isa&lt;PHINode&gt;(U); }))</div>
<div class="line"><a name="l02740"></a><span class="lineno"> 2740</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>);</div>
<div class="line"><a name="l02741"></a><span class="lineno"> 2741</span>&#160; </div>
<div class="line"><a name="l02742"></a><span class="lineno"> 2742</span>&#160;  <span class="comment">// The following transforms are only worth it if the only user of the subtract</span></div>
<div class="line"><a name="l02743"></a><span class="lineno"> 2743</span>&#160;  <span class="comment">// is the icmp.</span></div>
<div class="line"><a name="l02744"></a><span class="lineno"> 2744</span>&#160;  <span class="comment">// TODO: This is an artificial restriction for all of the transforms below</span></div>
<div class="line"><a name="l02745"></a><span class="lineno"> 2745</span>&#160;  <span class="comment">//       that only need a single replacement icmp. Can these use the phi test</span></div>
<div class="line"><a name="l02746"></a><span class="lineno"> 2746</span>&#160;  <span class="comment">//       like the transform above here?</span></div>
<div class="line"><a name="l02747"></a><span class="lineno"> 2747</span>&#160;  <span class="keywordflow">if</span> (!Sub-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>())</div>
<div class="line"><a name="l02748"></a><span class="lineno"> 2748</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02749"></a><span class="lineno"> 2749</span>&#160; </div>
<div class="line"><a name="l02750"></a><span class="lineno"> 2750</span>&#160;  <span class="keywordflow">if</span> (Sub-&gt;<a class="code" href="classllvm_1_1Instruction.html#a350f4fdc01c770b5cf6a8be2624ae3e5">hasNoSignedWrap</a>()) {</div>
<div class="line"><a name="l02751"></a><span class="lineno"> 2751</span>&#160;    <span class="comment">// (icmp sgt (sub nsw X, Y), -1) -&gt; (icmp sge X, Y)</span></div>
<div class="line"><a name="l02752"></a><span class="lineno"> 2752</span>&#160;    <span class="keywordflow">if</span> (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba720a42e85f7e981afd61e28473b0000a">ICmpInst::ICMP_SGT</a> &amp;&amp; <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.isAllOnes())</div>
<div class="line"><a name="l02753"></a><span class="lineno"> 2753</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac1aa7b798ba11d2e497d5cce6ce6d3dc">ICmpInst::ICMP_SGE</a>, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>);</div>
<div class="line"><a name="l02754"></a><span class="lineno"> 2754</span>&#160; </div>
<div class="line"><a name="l02755"></a><span class="lineno"> 2755</span>&#160;    <span class="comment">// (icmp sgt (sub nsw X, Y), 0) -&gt; (icmp sgt X, Y)</span></div>
<div class="line"><a name="l02756"></a><span class="lineno"> 2756</span>&#160;    <span class="keywordflow">if</span> (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba720a42e85f7e981afd61e28473b0000a">ICmpInst::ICMP_SGT</a> &amp;&amp; <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.isZero())</div>
<div class="line"><a name="l02757"></a><span class="lineno"> 2757</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba720a42e85f7e981afd61e28473b0000a">ICmpInst::ICMP_SGT</a>, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>);</div>
<div class="line"><a name="l02758"></a><span class="lineno"> 2758</span>&#160; </div>
<div class="line"><a name="l02759"></a><span class="lineno"> 2759</span>&#160;    <span class="comment">// (icmp slt (sub nsw X, Y), 0) -&gt; (icmp slt X, Y)</span></div>
<div class="line"><a name="l02760"></a><span class="lineno"> 2760</span>&#160;    <span class="keywordflow">if</span> (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba15ae464950ac676919c2f0c7aafc706c">ICmpInst::ICMP_SLT</a> &amp;&amp; <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.isZero())</div>
<div class="line"><a name="l02761"></a><span class="lineno"> 2761</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba15ae464950ac676919c2f0c7aafc706c">ICmpInst::ICMP_SLT</a>, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>);</div>
<div class="line"><a name="l02762"></a><span class="lineno"> 2762</span>&#160; </div>
<div class="line"><a name="l02763"></a><span class="lineno"> 2763</span>&#160;    <span class="comment">// (icmp slt (sub nsw X, Y), 1) -&gt; (icmp sle X, Y)</span></div>
<div class="line"><a name="l02764"></a><span class="lineno"> 2764</span>&#160;    <span class="keywordflow">if</span> (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba15ae464950ac676919c2f0c7aafc706c">ICmpInst::ICMP_SLT</a> &amp;&amp; <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.isOne())</div>
<div class="line"><a name="l02765"></a><span class="lineno"> 2765</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba2751d6136a2819749dcef65dc19a4246">ICmpInst::ICMP_SLE</a>, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>);</div>
<div class="line"><a name="l02766"></a><span class="lineno"> 2766</span>&#160;  }</div>
<div class="line"><a name="l02767"></a><span class="lineno"> 2767</span>&#160; </div>
<div class="line"><a name="l02768"></a><span class="lineno"> 2768</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(C2)))</div>
<div class="line"><a name="l02769"></a><span class="lineno"> 2769</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02770"></a><span class="lineno"> 2770</span>&#160; </div>
<div class="line"><a name="l02771"></a><span class="lineno"> 2771</span>&#160;  <span class="comment">// C2 - Y &lt;u C -&gt; (Y | (C - 1)) == C2</span></div>
<div class="line"><a name="l02772"></a><span class="lineno"> 2772</span>&#160;  <span class="comment">//   iff (C2 &amp; (C - 1)) == C - 1 and C is a power of 2</span></div>
<div class="line"><a name="l02773"></a><span class="lineno"> 2773</span>&#160;  <span class="keywordflow">if</span> (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e">ICmpInst::ICMP_ULT</a> &amp;&amp; <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.isPowerOf2() &amp;&amp;</div>
<div class="line"><a name="l02774"></a><span class="lineno"> 2774</span>&#160;      (*C2 &amp; (<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> - 1)) == (<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> - 1))</div>
<div class="line"><a name="l02775"></a><span class="lineno"> 2775</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a>, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateOr(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> - 1), <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>);</div>
<div class="line"><a name="l02776"></a><span class="lineno"> 2776</span>&#160; </div>
<div class="line"><a name="l02777"></a><span class="lineno"> 2777</span>&#160;  <span class="comment">// C2 - Y &gt;u C -&gt; (Y | C) != C2</span></div>
<div class="line"><a name="l02778"></a><span class="lineno"> 2778</span>&#160;  <span class="comment">//   iff C2 &amp; C == C and C + 1 is a power of 2</span></div>
<div class="line"><a name="l02779"></a><span class="lineno"> 2779</span>&#160;  <span class="keywordflow">if</span> (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba607cecdc5172814382033e001ed11fad">ICmpInst::ICMP_UGT</a> &amp;&amp; (<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> + 1).isPowerOf2() &amp;&amp; (*C2 &amp; <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>) == <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)</div>
<div class="line"><a name="l02780"></a><span class="lineno"> 2780</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a>, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateOr(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>), <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>);</div>
<div class="line"><a name="l02781"></a><span class="lineno"> 2781</span>&#160; </div>
<div class="line"><a name="l02782"></a><span class="lineno"> 2782</span>&#160;  <span class="comment">// We have handled special cases that reduce.</span></div>
<div class="line"><a name="l02783"></a><span class="lineno"> 2783</span>&#160;  <span class="comment">// Canonicalize any remaining sub to add as:</span></div>
<div class="line"><a name="l02784"></a><span class="lineno"> 2784</span>&#160;  <span class="comment">// (C2 - Y) &gt; C --&gt; (Y + ~C2) &lt; ~C</span></div>
<div class="line"><a name="l02785"></a><span class="lineno"> 2785</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Add = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAdd(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Ty, ~(*C2)), <span class="stringliteral">&quot;notsub&quot;</span>,</div>
<div class="line"><a name="l02786"></a><span class="lineno"> 2786</span>&#160;                                 HasNUW, HasNSW);</div>
<div class="line"><a name="l02787"></a><span class="lineno"> 2787</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(SwappedPred, Add, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Ty, ~<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>));</div>
<div class="line"><a name="l02788"></a><span class="lineno"> 2788</span>&#160;}</div>
<div class="line"><a name="l02789"></a><span class="lineno"> 2789</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02790"></a><span class="lineno"> 2790</span>&#160;<span class="comment">/// Fold icmp (add X, Y), C.</span></div>
<div class="line"><a name="l02791"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombinerImpl.html#aa148a41463d0d36003033ac988b2c28d"> 2791</a></span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombinerImpl.html#aa148a41463d0d36003033ac988b2c28d">InstCombinerImpl::foldICmpAddConstant</a>(<a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> &amp;Cmp,</div>
<div class="line"><a name="l02792"></a><span class="lineno"> 2792</span>&#160;                                                   <a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> *Add,</div>
<div class="line"><a name="l02793"></a><span class="lineno"> 2793</span>&#160;                                                   <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> &amp;<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>) {</div>
<div class="line"><a name="l02794"></a><span class="lineno"> 2794</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a> = Add-&gt;getOperand(1);</div>
<div class="line"><a name="l02795"></a><span class="lineno"> 2795</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *C2;</div>
<div class="line"><a name="l02796"></a><span class="lineno"> 2796</span>&#160;  <span class="keywordflow">if</span> (Cmp.isEquality() || !<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(C2)))</div>
<div class="line"><a name="l02797"></a><span class="lineno"> 2797</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02798"></a><span class="lineno"> 2798</span>&#160; </div>
<div class="line"><a name="l02799"></a><span class="lineno"> 2799</span>&#160;  <span class="comment">// Fold icmp pred (add X, C2), C.</span></div>
<div class="line"><a name="l02800"></a><span class="lineno"> 2800</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a> = Add-&gt;getOperand(0);</div>
<div class="line"><a name="l02801"></a><span class="lineno"> 2801</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *Ty = Add-&gt;getType();</div>
<div class="line"><a name="l02802"></a><span class="lineno"> 2802</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">CmpInst::Predicate</a> Pred = Cmp.getPredicate();</div>
<div class="line"><a name="l02803"></a><span class="lineno"> 2803</span>&#160; </div>
<div class="line"><a name="l02804"></a><span class="lineno"> 2804</span>&#160;  <span class="comment">// If the add does not wrap, we can always adjust the compare by subtracting</span></div>
<div class="line"><a name="l02805"></a><span class="lineno"> 2805</span>&#160;  <span class="comment">// the constants. Equality comparisons are handled elsewhere. SGE/SLE/UGE/ULE</span></div>
<div class="line"><a name="l02806"></a><span class="lineno"> 2806</span>&#160;  <span class="comment">// are canonicalized to SGT/SLT/UGT/ULT.</span></div>
<div class="line"><a name="l02807"></a><span class="lineno"> 2807</span>&#160;  <span class="keywordflow">if</span> ((Add-&gt;hasNoSignedWrap() &amp;&amp;</div>
<div class="line"><a name="l02808"></a><span class="lineno"> 2808</span>&#160;       (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba720a42e85f7e981afd61e28473b0000a">ICmpInst::ICMP_SGT</a> || Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba15ae464950ac676919c2f0c7aafc706c">ICmpInst::ICMP_SLT</a>)) ||</div>
<div class="line"><a name="l02809"></a><span class="lineno"> 2809</span>&#160;      (Add-&gt;hasNoUnsignedWrap() &amp;&amp;</div>
<div class="line"><a name="l02810"></a><span class="lineno"> 2810</span>&#160;       (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba607cecdc5172814382033e001ed11fad">ICmpInst::ICMP_UGT</a> || Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e">ICmpInst::ICMP_ULT</a>))) {</div>
<div class="line"><a name="l02811"></a><span class="lineno"> 2811</span>&#160;    <span class="keywordtype">bool</span> Overflow;</div>
<div class="line"><a name="l02812"></a><span class="lineno"> 2812</span>&#160;    <a class="code" href="classllvm_1_1APInt.html">APInt</a> NewC =</div>
<div class="line"><a name="l02813"></a><span class="lineno"> 2813</span>&#160;        Cmp.isSigned() ? <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.ssub_ov(*C2, Overflow) : <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.usub_ov(*C2, Overflow);</div>
<div class="line"><a name="l02814"></a><span class="lineno"> 2814</span>&#160;    <span class="comment">// If there is overflow, the result must be true or false.</span></div>
<div class="line"><a name="l02815"></a><span class="lineno"> 2815</span>&#160;    <span class="comment">// TODO: Can we assert there is no overflow because InstSimplify always</span></div>
<div class="line"><a name="l02816"></a><span class="lineno"> 2816</span>&#160;    <span class="comment">// handles those cases?</span></div>
<div class="line"><a name="l02817"></a><span class="lineno"> 2817</span>&#160;    <span class="keywordflow">if</span> (!Overflow)</div>
<div class="line"><a name="l02818"></a><span class="lineno"> 2818</span>&#160;      <span class="comment">// icmp Pred (add nsw X, C2), C --&gt; icmp Pred X, (C - C2)</span></div>
<div class="line"><a name="l02819"></a><span class="lineno"> 2819</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Ty, NewC));</div>
<div class="line"><a name="l02820"></a><span class="lineno"> 2820</span>&#160;  }</div>
<div class="line"><a name="l02821"></a><span class="lineno"> 2821</span>&#160; </div>
<div class="line"><a name="l02822"></a><span class="lineno"> 2822</span>&#160;  <span class="keyword">auto</span> CR = <a class="code" href="classllvm_1_1ConstantRange.html#aa89e9cec92a0b38d2f47a077bf12cc98">ConstantRange::makeExactICmpRegion</a>(Pred, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>).<a class="code" href="classllvm_1_1ConstantRange.html#a1d29074c7a610816d4f328b7cd9b783d">subtract</a>(*C2);</div>
<div class="line"><a name="l02823"></a><span class="lineno"> 2823</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> &amp;<a class="code" href="namespacellvm.html#a6893db19648a2dba0912d181aaa57ec0a19de5b94f7b83900d4b296d9fa491aec">Upper</a> = CR.getUpper();</div>
<div class="line"><a name="l02824"></a><span class="lineno"> 2824</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> &amp;Lower = CR.getLower();</div>
<div class="line"><a name="l02825"></a><span class="lineno"> 2825</span>&#160;  <span class="keywordflow">if</span> (Cmp.isSigned()) {</div>
<div class="line"><a name="l02826"></a><span class="lineno"> 2826</span>&#160;    <span class="keywordflow">if</span> (Lower.isSignMask())</div>
<div class="line"><a name="l02827"></a><span class="lineno"> 2827</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba15ae464950ac676919c2f0c7aafc706c">ICmpInst::ICMP_SLT</a>, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Ty, <a class="code" href="namespacellvm.html#a6893db19648a2dba0912d181aaa57ec0a19de5b94f7b83900d4b296d9fa491aec">Upper</a>));</div>
<div class="line"><a name="l02828"></a><span class="lineno"> 2828</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a6893db19648a2dba0912d181aaa57ec0a19de5b94f7b83900d4b296d9fa491aec">Upper</a>.isSignMask())</div>
<div class="line"><a name="l02829"></a><span class="lineno"> 2829</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac1aa7b798ba11d2e497d5cce6ce6d3dc">ICmpInst::ICMP_SGE</a>, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Ty, Lower));</div>
<div class="line"><a name="l02830"></a><span class="lineno"> 2830</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02831"></a><span class="lineno"> 2831</span>&#160;    <span class="keywordflow">if</span> (Lower.isMinValue())</div>
<div class="line"><a name="l02832"></a><span class="lineno"> 2832</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e">ICmpInst::ICMP_ULT</a>, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Ty, <a class="code" href="namespacellvm.html#a6893db19648a2dba0912d181aaa57ec0a19de5b94f7b83900d4b296d9fa491aec">Upper</a>));</div>
<div class="line"><a name="l02833"></a><span class="lineno"> 2833</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a6893db19648a2dba0912d181aaa57ec0a19de5b94f7b83900d4b296d9fa491aec">Upper</a>.isMinValue())</div>
<div class="line"><a name="l02834"></a><span class="lineno"> 2834</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba573bcd571c938fce863525330bbfc4b8">ICmpInst::ICMP_UGE</a>, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Ty, Lower));</div>
<div class="line"><a name="l02835"></a><span class="lineno"> 2835</span>&#160;  }</div>
<div class="line"><a name="l02836"></a><span class="lineno"> 2836</span>&#160; </div>
<div class="line"><a name="l02837"></a><span class="lineno"> 2837</span>&#160;  <span class="comment">// This set of folds is intentionally placed after folds that use no-wrapping</span></div>
<div class="line"><a name="l02838"></a><span class="lineno"> 2838</span>&#160;  <span class="comment">// flags because those folds are likely better for later analysis/codegen.</span></div>
<div class="line"><a name="l02839"></a><span class="lineno"> 2839</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> <a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eabccd0de85dfbe7aef83629b318a4df6e">SMax</a> = <a class="code" href="classllvm_1_1APInt.html#a562c9513409b74f02cb3a5c9bae672ea">APInt::getSignedMaxValue</a>(Ty-&gt;<a class="code" href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>());</div>
<div class="line"><a name="l02840"></a><span class="lineno"> 2840</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> <a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830ead6bb6a2eca7d60c75e349ea45e138d74">SMin</a> = <a class="code" href="classllvm_1_1APInt.html#a8f877403433892e14ff0c692cbe9efdf">APInt::getSignedMinValue</a>(Ty-&gt;<a class="code" href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>());</div>
<div class="line"><a name="l02841"></a><span class="lineno"> 2841</span>&#160; </div>
<div class="line"><a name="l02842"></a><span class="lineno"> 2842</span>&#160;  <span class="comment">// Fold compare with offset to opposite sign compare if it eliminates offset:</span></div>
<div class="line"><a name="l02843"></a><span class="lineno"> 2843</span>&#160;  <span class="comment">// (X + C2) &gt;u C --&gt; X &lt;s -C2 (if C == C2 + SMAX)</span></div>
<div class="line"><a name="l02844"></a><span class="lineno"> 2844</span>&#160;  <span class="keywordflow">if</span> (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba607cecdc5172814382033e001ed11fad">CmpInst::ICMP_UGT</a> &amp;&amp; <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> == *C2 + <a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eabccd0de85dfbe7aef83629b318a4df6e">SMax</a>)</div>
<div class="line"><a name="l02845"></a><span class="lineno"> 2845</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba15ae464950ac676919c2f0c7aafc706c">ICmpInst::ICMP_SLT</a>, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Ty, -(*C2)));</div>
<div class="line"><a name="l02846"></a><span class="lineno"> 2846</span>&#160; </div>
<div class="line"><a name="l02847"></a><span class="lineno"> 2847</span>&#160;  <span class="comment">// (X + C2) &lt;u C --&gt; X &gt;s ~C2 (if C == C2 + SMIN)</span></div>
<div class="line"><a name="l02848"></a><span class="lineno"> 2848</span>&#160;  <span class="keywordflow">if</span> (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e">CmpInst::ICMP_ULT</a> &amp;&amp; <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> == *C2 + <a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830ead6bb6a2eca7d60c75e349ea45e138d74">SMin</a>)</div>
<div class="line"><a name="l02849"></a><span class="lineno"> 2849</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba720a42e85f7e981afd61e28473b0000a">ICmpInst::ICMP_SGT</a>, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Ty, ~(*C2)));</div>
<div class="line"><a name="l02850"></a><span class="lineno"> 2850</span>&#160; </div>
<div class="line"><a name="l02851"></a><span class="lineno"> 2851</span>&#160;  <span class="comment">// (X + C2) &gt;s C --&gt; X &lt;u (SMAX - C) (if C == C2 - 1)</span></div>
<div class="line"><a name="l02852"></a><span class="lineno"> 2852</span>&#160;  <span class="keywordflow">if</span> (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba720a42e85f7e981afd61e28473b0000a">CmpInst::ICMP_SGT</a> &amp;&amp; <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> == *C2 - 1)</div>
<div class="line"><a name="l02853"></a><span class="lineno"> 2853</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e">ICmpInst::ICMP_ULT</a>, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Ty, <a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eabccd0de85dfbe7aef83629b318a4df6e">SMax</a> - <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>));</div>
<div class="line"><a name="l02854"></a><span class="lineno"> 2854</span>&#160; </div>
<div class="line"><a name="l02855"></a><span class="lineno"> 2855</span>&#160;  <span class="comment">// (X + C2) &lt;s C --&gt; X &gt;u (C ^ SMAX) (if C == C2)</span></div>
<div class="line"><a name="l02856"></a><span class="lineno"> 2856</span>&#160;  <span class="keywordflow">if</span> (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba15ae464950ac676919c2f0c7aafc706c">CmpInst::ICMP_SLT</a> &amp;&amp; <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> == *C2)</div>
<div class="line"><a name="l02857"></a><span class="lineno"> 2857</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba607cecdc5172814382033e001ed11fad">ICmpInst::ICMP_UGT</a>, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Ty, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> ^ <a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eabccd0de85dfbe7aef83629b318a4df6e">SMax</a>));</div>
<div class="line"><a name="l02858"></a><span class="lineno"> 2858</span>&#160; </div>
<div class="line"><a name="l02859"></a><span class="lineno"> 2859</span>&#160;  <span class="comment">// (X + -1) &lt;u C --&gt; X &lt;=u C (if X is never null)</span></div>
<div class="line"><a name="l02860"></a><span class="lineno"> 2860</span>&#160;  <span class="keywordflow">if</span> (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e">CmpInst::ICMP_ULT</a> &amp;&amp; C2-&gt;<a class="code" href="classllvm_1_1APInt.html#a423e2c491de1408d54e35f0b47d076be">isAllOnes</a>()) {</div>
<div class="line"><a name="l02861"></a><span class="lineno"> 2861</span>&#160;    <span class="keyword">const</span> <a class="code" href="structllvm_1_1SimplifyQuery.html">SimplifyQuery</a> Q = SQ.<a class="code" href="structllvm_1_1SimplifyQuery.html#aaf05c1194f5c7869a00434c13c46c228">getWithInstruction</a>(&amp;Cmp);</div>
<div class="line"><a name="l02862"></a><span class="lineno"> 2862</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a07256e6859fcb3b9d5eb02ecea9e9a38">llvm::isKnownNonZero</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, 0, Q.<a class="code" href="structllvm_1_1SimplifyQuery.html#a928ce56952772d0e0f43cab3a489a6fe">AC</a>, Q.<a class="code" href="structllvm_1_1SimplifyQuery.html#a30647c42c8c40890c577ba5b4ab16468">CxtI</a>, Q.<a class="code" href="structllvm_1_1SimplifyQuery.html#a4776fa0f5a726bd5a8a444981c283c69">DT</a>))</div>
<div class="line"><a name="l02863"></a><span class="lineno"> 2863</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bad92f160316221fd4090520bb2b3cefc5">ICmpInst::ICMP_ULE</a>, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Ty, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>));</div>
<div class="line"><a name="l02864"></a><span class="lineno"> 2864</span>&#160;  }</div>
<div class="line"><a name="l02865"></a><span class="lineno"> 2865</span>&#160; </div>
<div class="line"><a name="l02866"></a><span class="lineno"> 2866</span>&#160;  <span class="keywordflow">if</span> (!Add-&gt;hasOneUse())</div>
<div class="line"><a name="l02867"></a><span class="lineno"> 2867</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02868"></a><span class="lineno"> 2868</span>&#160; </div>
<div class="line"><a name="l02869"></a><span class="lineno"> 2869</span>&#160;  <span class="comment">// X+C &lt;u C2 -&gt; (X &amp; -C2) == C</span></div>
<div class="line"><a name="l02870"></a><span class="lineno"> 2870</span>&#160;  <span class="comment">//   iff C &amp; (C2-1) == 0</span></div>
<div class="line"><a name="l02871"></a><span class="lineno"> 2871</span>&#160;  <span class="comment">//       C2 is a power of 2</span></div>
<div class="line"><a name="l02872"></a><span class="lineno"> 2872</span>&#160;  <span class="keywordflow">if</span> (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e">ICmpInst::ICMP_ULT</a> &amp;&amp; <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.isPowerOf2() &amp;&amp; (*C2 &amp; (<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> - 1)) == 0)</div>
<div class="line"><a name="l02873"></a><span class="lineno"> 2873</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a>, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAnd(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, -<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>),</div>
<div class="line"><a name="l02874"></a><span class="lineno"> 2874</span>&#160;                        <a class="code" href="classllvm_1_1ConstantExpr.html#afa29f0cd072ab9b3a2630681ffe5760f">ConstantExpr::getNeg</a>(cast&lt;Constant&gt;(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>)));</div>
<div class="line"><a name="l02875"></a><span class="lineno"> 2875</span>&#160; </div>
<div class="line"><a name="l02876"></a><span class="lineno"> 2876</span>&#160;  <span class="comment">// X+C &gt;u C2 -&gt; (X &amp; ~C2) != C</span></div>
<div class="line"><a name="l02877"></a><span class="lineno"> 2877</span>&#160;  <span class="comment">//   iff C &amp; C2 == 0</span></div>
<div class="line"><a name="l02878"></a><span class="lineno"> 2878</span>&#160;  <span class="comment">//       C2+1 is a power of 2</span></div>
<div class="line"><a name="l02879"></a><span class="lineno"> 2879</span>&#160;  <span class="keywordflow">if</span> (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba607cecdc5172814382033e001ed11fad">ICmpInst::ICMP_UGT</a> &amp;&amp; (<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> + 1).isPowerOf2() &amp;&amp; (*C2 &amp; <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>) == 0)</div>
<div class="line"><a name="l02880"></a><span class="lineno"> 2880</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a>, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAnd(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, ~<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>),</div>
<div class="line"><a name="l02881"></a><span class="lineno"> 2881</span>&#160;                        <a class="code" href="classllvm_1_1ConstantExpr.html#afa29f0cd072ab9b3a2630681ffe5760f">ConstantExpr::getNeg</a>(cast&lt;Constant&gt;(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>)));</div>
<div class="line"><a name="l02882"></a><span class="lineno"> 2882</span>&#160; </div>
<div class="line"><a name="l02883"></a><span class="lineno"> 2883</span>&#160;  <span class="comment">// The range test idiom can use either ult or ugt. Arbitrarily canonicalize</span></div>
<div class="line"><a name="l02884"></a><span class="lineno"> 2884</span>&#160;  <span class="comment">// to the ult form.</span></div>
<div class="line"><a name="l02885"></a><span class="lineno"> 2885</span>&#160;  <span class="comment">// X+C2 &gt;u C -&gt; X+(C2-C-1) &lt;u ~C</span></div>
<div class="line"><a name="l02886"></a><span class="lineno"> 2886</span>&#160;  <span class="keywordflow">if</span> (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba607cecdc5172814382033e001ed11fad">ICmpInst::ICMP_UGT</a>)</div>
<div class="line"><a name="l02887"></a><span class="lineno"> 2887</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e">ICmpInst::ICMP_ULT</a>,</div>
<div class="line"><a name="l02888"></a><span class="lineno"> 2888</span>&#160;                        <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAdd(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Ty, *C2 - <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> - 1)),</div>
<div class="line"><a name="l02889"></a><span class="lineno"> 2889</span>&#160;                        <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Ty, ~<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>));</div>
<div class="line"><a name="l02890"></a><span class="lineno"> 2890</span>&#160; </div>
<div class="line"><a name="l02891"></a><span class="lineno"> 2891</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02892"></a><span class="lineno"> 2892</span>&#160;}</div>
<div class="line"><a name="l02893"></a><span class="lineno"> 2893</span>&#160; </div>
<div class="line"><a name="l02894"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombinerImpl.html#a8274be96f16c9dfbe1d003c5797d9644"> 2894</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1InstCombinerImpl.html#a8274be96f16c9dfbe1d003c5797d9644">InstCombinerImpl::matchThreeWayIntCompare</a>(<a class="code" href="classllvm_1_1SelectInst.html">SelectInst</a> *<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>, <a class="code" href="classllvm_1_1Value.html">Value</a> *&amp;<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>,</div>
<div class="line"><a name="l02895"></a><span class="lineno"> 2895</span>&#160;                                               <a class="code" href="classllvm_1_1Value.html">Value</a> *&amp;<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *&amp;<a class="code" href="namespacellvm_1_1CodeGenOpt.html#ad7e52174abb1cfb84238ad1ac475ee36ae56b4de70fb3488b3ae4ec998c0b6303">Less</a>,</div>
<div class="line"><a name="l02896"></a><span class="lineno"> 2896</span>&#160;                                               <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *&amp;<a class="code" href="namespacellvm_1_1object.html#a42e5b6ee6f67085d2115b2ea44588c47a21197b49151a350ee6714622ed988cc7">Equal</a>,</div>
<div class="line"><a name="l02897"></a><span class="lineno"> 2897</span>&#160;                                               <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *&amp;Greater) {</div>
<div class="line"><a name="l02898"></a><span class="lineno"> 2898</span>&#160;  <span class="comment">// TODO: Generalize this to work with other comparison idioms or ensure</span></div>
<div class="line"><a name="l02899"></a><span class="lineno"> 2899</span>&#160;  <span class="comment">// they get canonicalized into this form.</span></div>
<div class="line"><a name="l02900"></a><span class="lineno"> 2900</span>&#160; </div>
<div class="line"><a name="l02901"></a><span class="lineno"> 2901</span>&#160;  <span class="comment">// select i1 (a == b),</span></div>
<div class="line"><a name="l02902"></a><span class="lineno"> 2902</span>&#160;  <span class="comment">//        i32 Equal,</span></div>
<div class="line"><a name="l02903"></a><span class="lineno"> 2903</span>&#160;  <span class="comment">//        i32 (select i1 (a &lt; b), i32 Less, i32 Greater)</span></div>
<div class="line"><a name="l02904"></a><span class="lineno"> 2904</span>&#160;  <span class="comment">// where Equal, Less and Greater are placeholders for any three constants.</span></div>
<div class="line"><a name="l02905"></a><span class="lineno"> 2905</span>&#160;  <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">ICmpInst::Predicate</a> PredA;</div>
<div class="line"><a name="l02906"></a><span class="lineno"> 2906</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;getCondition(), <a class="code" href="namespacellvm_1_1PatternMatch.html#a3fe9b3ddb71b9fb53d9fc74b3a0710bf">m_ICmp</a>(PredA, <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>))) ||</div>
<div class="line"><a name="l02907"></a><span class="lineno"> 2907</span>&#160;      !<a class="code" href="classllvm_1_1ICmpInst.html#aaaeded5d0cab77f531b294638459aca5">ICmpInst::isEquality</a>(PredA))</div>
<div class="line"><a name="l02908"></a><span class="lineno"> 2908</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02909"></a><span class="lineno"> 2909</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *EqualVal = <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;getTrueValue();</div>
<div class="line"><a name="l02910"></a><span class="lineno"> 2910</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *UnequalVal = <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;getFalseValue();</div>
<div class="line"><a name="l02911"></a><span class="lineno"> 2911</span>&#160;  <span class="comment">// We still can get non-canonical predicate here, so canonicalize.</span></div>
<div class="line"><a name="l02912"></a><span class="lineno"> 2912</span>&#160;  <span class="keywordflow">if</span> (PredA == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a>)</div>
<div class="line"><a name="l02913"></a><span class="lineno"> 2913</span>&#160;    <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(EqualVal, UnequalVal);</div>
<div class="line"><a name="l02914"></a><span class="lineno"> 2914</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(EqualVal, <a class="code" href="namespacellvm_1_1PatternMatch.html#a677ac8d99ff3c2d32a95c21de9ed372c">m_ConstantInt</a>(<a class="code" href="namespacellvm_1_1object.html#a42e5b6ee6f67085d2115b2ea44588c47a21197b49151a350ee6714622ed988cc7">Equal</a>)))</div>
<div class="line"><a name="l02915"></a><span class="lineno"> 2915</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02916"></a><span class="lineno"> 2916</span>&#160;  <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">ICmpInst::Predicate</a> PredB;</div>
<div class="line"><a name="l02917"></a><span class="lineno"> 2917</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *LHS2, *RHS2;</div>
<div class="line"><a name="l02918"></a><span class="lineno"> 2918</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(UnequalVal, <a class="code" href="namespacellvm_1_1PatternMatch.html#addb87fe3f509b7803d3f5933ee24b560">m_Select</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a3fe9b3ddb71b9fb53d9fc74b3a0710bf">m_ICmp</a>(PredB, <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(LHS2), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(RHS2)),</div>
<div class="line"><a name="l02919"></a><span class="lineno"> 2919</span>&#160;                                  <a class="code" href="namespacellvm_1_1PatternMatch.html#a677ac8d99ff3c2d32a95c21de9ed372c">m_ConstantInt</a>(<a class="code" href="namespacellvm_1_1CodeGenOpt.html#ad7e52174abb1cfb84238ad1ac475ee36ae56b4de70fb3488b3ae4ec998c0b6303">Less</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a677ac8d99ff3c2d32a95c21de9ed372c">m_ConstantInt</a>(Greater))))</div>
<div class="line"><a name="l02920"></a><span class="lineno"> 2920</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02921"></a><span class="lineno"> 2921</span>&#160;  <span class="comment">// We can get predicate mismatch here, so canonicalize if possible:</span></div>
<div class="line"><a name="l02922"></a><span class="lineno"> 2922</span>&#160;  <span class="comment">// First, ensure that &#39;LHS&#39; match.</span></div>
<div class="line"><a name="l02923"></a><span class="lineno"> 2923</span>&#160;  <span class="keywordflow">if</span> (LHS2 != <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>) {</div>
<div class="line"><a name="l02924"></a><span class="lineno"> 2924</span>&#160;    <span class="comment">// x sgt y &lt;--&gt; y slt x</span></div>
<div class="line"><a name="l02925"></a><span class="lineno"> 2925</span>&#160;    <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(LHS2, RHS2);</div>
<div class="line"><a name="l02926"></a><span class="lineno"> 2926</span>&#160;    PredB = <a class="code" href="classllvm_1_1CmpInst.html#a49a2d8f483ea08a3d6ea75f90c640d76">ICmpInst::getSwappedPredicate</a>(PredB);</div>
<div class="line"><a name="l02927"></a><span class="lineno"> 2927</span>&#160;  }</div>
<div class="line"><a name="l02928"></a><span class="lineno"> 2928</span>&#160;  <span class="keywordflow">if</span> (LHS2 != <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>)</div>
<div class="line"><a name="l02929"></a><span class="lineno"> 2929</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02930"></a><span class="lineno"> 2930</span>&#160;  <span class="comment">// We also need to canonicalize &#39;RHS&#39;.</span></div>
<div class="line"><a name="l02931"></a><span class="lineno"> 2931</span>&#160;  <span class="keywordflow">if</span> (PredB == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba720a42e85f7e981afd61e28473b0000a">ICmpInst::ICMP_SGT</a> &amp;&amp; isa&lt;Constant&gt;(RHS2)) {</div>
<div class="line"><a name="l02932"></a><span class="lineno"> 2932</span>&#160;    <span class="comment">// x sgt C-1  &lt;--&gt;  x sge C  &lt;--&gt;  not(x slt C)</span></div>
<div class="line"><a name="l02933"></a><span class="lineno"> 2933</span>&#160;    <span class="keyword">auto</span> FlippedStrictness =</div>
<div class="line"><a name="l02934"></a><span class="lineno"> 2934</span>&#160;        <a class="code" href="classllvm_1_1InstCombiner.html#a63d5f62f004af8e0903574463abc6a81">InstCombiner::getFlippedStrictnessPredicateAndConstant</a>(</div>
<div class="line"><a name="l02935"></a><span class="lineno"> 2935</span>&#160;            PredB, cast&lt;Constant&gt;(RHS2));</div>
<div class="line"><a name="l02936"></a><span class="lineno"> 2936</span>&#160;    <span class="keywordflow">if</span> (!FlippedStrictness)</div>
<div class="line"><a name="l02937"></a><span class="lineno"> 2937</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02938"></a><span class="lineno"> 2938</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(FlippedStrictness-&gt;first == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac1aa7b798ba11d2e497d5cce6ce6d3dc">ICmpInst::ICMP_SGE</a> &amp;&amp;</div>
<div class="line"><a name="l02939"></a><span class="lineno"> 2939</span>&#160;           <span class="stringliteral">&quot;basic correctness failure&quot;</span>);</div>
<div class="line"><a name="l02940"></a><span class="lineno"> 2940</span>&#160;    RHS2 = FlippedStrictness-&gt;second;</div>
<div class="line"><a name="l02941"></a><span class="lineno"> 2941</span>&#160;    <span class="comment">// And kind-of perform the result swap.</span></div>
<div class="line"><a name="l02942"></a><span class="lineno"> 2942</span>&#160;    <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(<a class="code" href="namespacellvm_1_1CodeGenOpt.html#ad7e52174abb1cfb84238ad1ac475ee36ae56b4de70fb3488b3ae4ec998c0b6303">Less</a>, Greater);</div>
<div class="line"><a name="l02943"></a><span class="lineno"> 2943</span>&#160;    PredB = <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba15ae464950ac676919c2f0c7aafc706c">ICmpInst::ICMP_SLT</a>;</div>
<div class="line"><a name="l02944"></a><span class="lineno"> 2944</span>&#160;  }</div>
<div class="line"><a name="l02945"></a><span class="lineno"> 2945</span>&#160;  <span class="keywordflow">return</span> PredB == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba15ae464950ac676919c2f0c7aafc706c">ICmpInst::ICMP_SLT</a> &amp;&amp; <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a> == RHS2;</div>
<div class="line"><a name="l02946"></a><span class="lineno"> 2946</span>&#160;}</div>
<div class="line"><a name="l02947"></a><span class="lineno"> 2947</span>&#160; </div>
<div class="line"><a name="l02948"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombinerImpl.html#a0550f165f22c1b1372bf6428191f0a9e"> 2948</a></span>&#160;<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombinerImpl.html#a0550f165f22c1b1372bf6428191f0a9e">InstCombinerImpl::foldICmpSelectConstant</a>(<a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> &amp;Cmp,</div>
<div class="line"><a name="l02949"></a><span class="lineno"> 2949</span>&#160;                                                      <a class="code" href="classllvm_1_1SelectInst.html">SelectInst</a> *<a class="code" href="AMDGPURegBankSelect_8cpp.html#a14e0c000ed52e5fc187d4a885914cc1a">Select</a>,</div>
<div class="line"><a name="l02950"></a><span class="lineno"> 2950</span>&#160;                                                      <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>) {</div>
<div class="line"><a name="l02951"></a><span class="lineno"> 2951</span>&#160; </div>
<div class="line"><a name="l02952"></a><span class="lineno"> 2952</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> &amp;&amp; <span class="stringliteral">&quot;Cmp RHS should be a constant int!&quot;</span>);</div>
<div class="line"><a name="l02953"></a><span class="lineno"> 2953</span>&#160;  <span class="comment">// If we&#39;re testing a constant value against the result of a three way</span></div>
<div class="line"><a name="l02954"></a><span class="lineno"> 2954</span>&#160;  <span class="comment">// comparison, the result can be expressed directly in terms of the</span></div>
<div class="line"><a name="l02955"></a><span class="lineno"> 2955</span>&#160;  <span class="comment">// original values being compared.  Note: We could possibly be more</span></div>
<div class="line"><a name="l02956"></a><span class="lineno"> 2956</span>&#160;  <span class="comment">// aggressive here and remove the hasOneUse test. The original select is</span></div>
<div class="line"><a name="l02957"></a><span class="lineno"> 2957</span>&#160;  <span class="comment">// really likely to simplify or sink when we remove a test of the result.</span></div>
<div class="line"><a name="l02958"></a><span class="lineno"> 2958</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *OrigLHS, *OrigRHS;</div>
<div class="line"><a name="l02959"></a><span class="lineno"> 2959</span>&#160;  <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *C1LessThan, *C2Equal, *C3GreaterThan;</div>
<div class="line"><a name="l02960"></a><span class="lineno"> 2960</span>&#160;  <span class="keywordflow">if</span> (Cmp.hasOneUse() &amp;&amp;</div>
<div class="line"><a name="l02961"></a><span class="lineno"> 2961</span>&#160;      matchThreeWayIntCompare(<a class="code" href="AMDGPURegBankSelect_8cpp.html#a14e0c000ed52e5fc187d4a885914cc1a">Select</a>, OrigLHS, OrigRHS, C1LessThan, C2Equal,</div>
<div class="line"><a name="l02962"></a><span class="lineno"> 2962</span>&#160;                              C3GreaterThan)) {</div>
<div class="line"><a name="l02963"></a><span class="lineno"> 2963</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(C1LessThan &amp;&amp; C2Equal &amp;&amp; C3GreaterThan);</div>
<div class="line"><a name="l02964"></a><span class="lineno"> 2964</span>&#160; </div>
<div class="line"><a name="l02965"></a><span class="lineno"> 2965</span>&#160;    <span class="keywordtype">bool</span> TrueWhenLessThan =</div>
<div class="line"><a name="l02966"></a><span class="lineno"> 2966</span>&#160;        <a class="code" href="classllvm_1_1ConstantExpr.html#afe6a25e856a1a63ffff098f05e3f26d2">ConstantExpr::getCompare</a>(Cmp.getPredicate(), C1LessThan, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)</div>
<div class="line"><a name="l02967"></a><span class="lineno"> 2967</span>&#160;            -&gt;<a class="code" href="classllvm_1_1Constant.html#a662be1e66a5af621d46fa1c7a8aa1004">isAllOnesValue</a>();</div>
<div class="line"><a name="l02968"></a><span class="lineno"> 2968</span>&#160;    <span class="keywordtype">bool</span> TrueWhenEqual =</div>
<div class="line"><a name="l02969"></a><span class="lineno"> 2969</span>&#160;        <a class="code" href="classllvm_1_1ConstantExpr.html#afe6a25e856a1a63ffff098f05e3f26d2">ConstantExpr::getCompare</a>(Cmp.getPredicate(), C2Equal, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)</div>
<div class="line"><a name="l02970"></a><span class="lineno"> 2970</span>&#160;            -&gt;<a class="code" href="classllvm_1_1Constant.html#a662be1e66a5af621d46fa1c7a8aa1004">isAllOnesValue</a>();</div>
<div class="line"><a name="l02971"></a><span class="lineno"> 2971</span>&#160;    <span class="keywordtype">bool</span> TrueWhenGreaterThan =</div>
<div class="line"><a name="l02972"></a><span class="lineno"> 2972</span>&#160;        <a class="code" href="classllvm_1_1ConstantExpr.html#afe6a25e856a1a63ffff098f05e3f26d2">ConstantExpr::getCompare</a>(Cmp.getPredicate(), C3GreaterThan, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)</div>
<div class="line"><a name="l02973"></a><span class="lineno"> 2973</span>&#160;            -&gt;<a class="code" href="classllvm_1_1Constant.html#a662be1e66a5af621d46fa1c7a8aa1004">isAllOnesValue</a>();</div>
<div class="line"><a name="l02974"></a><span class="lineno"> 2974</span>&#160; </div>
<div class="line"><a name="l02975"></a><span class="lineno"> 2975</span>&#160;    <span class="comment">// This generates the new instruction that will replace the original Cmp</span></div>
<div class="line"><a name="l02976"></a><span class="lineno"> 2976</span>&#160;    <span class="comment">// Instruction. Instead of enumerating the various combinations when</span></div>
<div class="line"><a name="l02977"></a><span class="lineno"> 2977</span>&#160;    <span class="comment">// TrueWhenLessThan, TrueWhenEqual and TrueWhenGreaterThan are true versus</span></div>
<div class="line"><a name="l02978"></a><span class="lineno"> 2978</span>&#160;    <span class="comment">// false, we rely on chaining of ORs and future passes of InstCombine to</span></div>
<div class="line"><a name="l02979"></a><span class="lineno"> 2979</span>&#160;    <span class="comment">// simplify the OR further (i.e. a s&lt; b || a == b becomes a s&lt;= b).</span></div>
<div class="line"><a name="l02980"></a><span class="lineno"> 2980</span>&#160; </div>
<div class="line"><a name="l02981"></a><span class="lineno"> 2981</span>&#160;    <span class="comment">// When none of the three constants satisfy the predicate for the RHS (C),</span></div>
<div class="line"><a name="l02982"></a><span class="lineno"> 2982</span>&#160;    <span class="comment">// the entire original Cmp can be simplified to a false.</span></div>
<div class="line"><a name="l02983"></a><span class="lineno"> 2983</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getFalse();</div>
<div class="line"><a name="l02984"></a><span class="lineno"> 2984</span>&#160;    <span class="keywordflow">if</span> (TrueWhenLessThan)</div>
<div class="line"><a name="l02985"></a><span class="lineno"> 2985</span>&#160;      <a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateOr(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateICmp(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba15ae464950ac676919c2f0c7aafc706c">ICmpInst::ICMP_SLT</a>,</div>
<div class="line"><a name="l02986"></a><span class="lineno"> 2986</span>&#160;                                                       OrigLHS, OrigRHS));</div>
<div class="line"><a name="l02987"></a><span class="lineno"> 2987</span>&#160;    <span class="keywordflow">if</span> (TrueWhenEqual)</div>
<div class="line"><a name="l02988"></a><span class="lineno"> 2988</span>&#160;      <a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateOr(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateICmp(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a>,</div>
<div class="line"><a name="l02989"></a><span class="lineno"> 2989</span>&#160;                                                       OrigLHS, OrigRHS));</div>
<div class="line"><a name="l02990"></a><span class="lineno"> 2990</span>&#160;    <span class="keywordflow">if</span> (TrueWhenGreaterThan)</div>
<div class="line"><a name="l02991"></a><span class="lineno"> 2991</span>&#160;      <a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateOr(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateICmp(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba720a42e85f7e981afd61e28473b0000a">ICmpInst::ICMP_SGT</a>,</div>
<div class="line"><a name="l02992"></a><span class="lineno"> 2992</span>&#160;                                                       OrigLHS, OrigRHS));</div>
<div class="line"><a name="l02993"></a><span class="lineno"> 2993</span>&#160; </div>
<div class="line"><a name="l02994"></a><span class="lineno"> 2994</span>&#160;    <span class="keywordflow">return</span> replaceInstUsesWith(Cmp, <a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>);</div>
<div class="line"><a name="l02995"></a><span class="lineno"> 2995</span>&#160;  }</div>
<div class="line"><a name="l02996"></a><span class="lineno"> 2996</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02997"></a><span class="lineno"> 2997</span>&#160;}</div>
<div class="line"><a name="l02998"></a><span class="lineno"> 2998</span>&#160; </div>
<div class="line"><a name="l02999"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombinerImpl.html#afbfe964338488078570fe14e7deb0551"> 2999</a></span>&#160;<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombinerImpl.html#afbfe964338488078570fe14e7deb0551">InstCombinerImpl::foldICmpBitCast</a>(<a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> &amp;Cmp) {</div>
<div class="line"><a name="l03000"></a><span class="lineno"> 3000</span>&#160;  <span class="keyword">auto</span> *<a class="code" href="namespacellvm_1_1LegacyLegalizeActions.html#ad25716c86372dafbf624b34891685078a031174d0f974cf1041a9cadb84f0dcbf">Bitcast</a> = dyn_cast&lt;BitCastInst&gt;(Cmp.getOperand(0));</div>
<div class="line"><a name="l03001"></a><span class="lineno"> 3001</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1LegacyLegalizeActions.html#ad25716c86372dafbf624b34891685078a031174d0f974cf1041a9cadb84f0dcbf">Bitcast</a>)</div>
<div class="line"><a name="l03002"></a><span class="lineno"> 3002</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l03003"></a><span class="lineno"> 3003</span>&#160; </div>
<div class="line"><a name="l03004"></a><span class="lineno"> 3004</span>&#160;  <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">ICmpInst::Predicate</a> Pred = Cmp.getPredicate();</div>
<div class="line"><a name="l03005"></a><span class="lineno"> 3005</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Op1 = Cmp.getOperand(1);</div>
<div class="line"><a name="l03006"></a><span class="lineno"> 3006</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *BCSrcOp = <a class="code" href="namespacellvm_1_1LegacyLegalizeActions.html#ad25716c86372dafbf624b34891685078a031174d0f974cf1041a9cadb84f0dcbf">Bitcast</a>-&gt;getOperand(0);</div>
<div class="line"><a name="l03007"></a><span class="lineno"> 3007</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *SrcType = <a class="code" href="namespacellvm_1_1LegacyLegalizeActions.html#ad25716c86372dafbf624b34891685078a031174d0f974cf1041a9cadb84f0dcbf">Bitcast</a>-&gt;getSrcTy();</div>
<div class="line"><a name="l03008"></a><span class="lineno"> 3008</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *DstType = <a class="code" href="namespacellvm_1_1LegacyLegalizeActions.html#ad25716c86372dafbf624b34891685078a031174d0f974cf1041a9cadb84f0dcbf">Bitcast</a>-&gt;getType();</div>
<div class="line"><a name="l03009"></a><span class="lineno"> 3009</span>&#160; </div>
<div class="line"><a name="l03010"></a><span class="lineno"> 3010</span>&#160;  <span class="comment">// Make sure the bitcast doesn&#39;t change between scalar and vector and</span></div>
<div class="line"><a name="l03011"></a><span class="lineno"> 3011</span>&#160;  <span class="comment">// doesn&#39;t change the number of vector elements.</span></div>
<div class="line"><a name="l03012"></a><span class="lineno"> 3012</span>&#160;  <span class="keywordflow">if</span> (SrcType-&gt;<a class="code" href="classllvm_1_1Type.html#a1bc022868b23918efa44df511f4d5b61">isVectorTy</a>() == DstType-&gt;<a class="code" href="classllvm_1_1Type.html#a1bc022868b23918efa44df511f4d5b61">isVectorTy</a>() &amp;&amp;</div>
<div class="line"><a name="l03013"></a><span class="lineno"> 3013</span>&#160;      SrcType-&gt;<a class="code" href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>() == DstType-&gt;<a class="code" href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>()) {</div>
<div class="line"><a name="l03014"></a><span class="lineno"> 3014</span>&#160;    <span class="comment">// Zero-equality and sign-bit checks are preserved through sitofp + bitcast.</span></div>
<div class="line"><a name="l03015"></a><span class="lineno"> 3015</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>;</div>
<div class="line"><a name="l03016"></a><span class="lineno"> 3016</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(BCSrcOp, <a class="code" href="namespacellvm_1_1PatternMatch.html#ab7a6af71f539f24743081bf2e6adc0f7">m_SIToFP</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>)))) {</div>
<div class="line"><a name="l03017"></a><span class="lineno"> 3017</span>&#160;      <span class="comment">// icmp  eq (bitcast (sitofp X)), 0 --&gt; icmp  eq X, 0</span></div>
<div class="line"><a name="l03018"></a><span class="lineno"> 3018</span>&#160;      <span class="comment">// icmp  ne (bitcast (sitofp X)), 0 --&gt; icmp  ne X, 0</span></div>
<div class="line"><a name="l03019"></a><span class="lineno"> 3019</span>&#160;      <span class="comment">// icmp slt (bitcast (sitofp X)), 0 --&gt; icmp slt X, 0</span></div>
<div class="line"><a name="l03020"></a><span class="lineno"> 3020</span>&#160;      <span class="comment">// icmp sgt (bitcast (sitofp X)), 0 --&gt; icmp sgt X, 0</span></div>
<div class="line"><a name="l03021"></a><span class="lineno"> 3021</span>&#160;      <span class="keywordflow">if</span> ((Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a> || Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba15ae464950ac676919c2f0c7aafc706c">ICmpInst::ICMP_SLT</a> ||</div>
<div class="line"><a name="l03022"></a><span class="lineno"> 3022</span>&#160;           Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a> || Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba720a42e85f7e981afd61e28473b0000a">ICmpInst::ICMP_SGT</a>) &amp;&amp;</div>
<div class="line"><a name="l03023"></a><span class="lineno"> 3023</span>&#160;          <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#ae77be336e228cf9aa00709a8606dfb98">m_Zero</a>()))</div>
<div class="line"><a name="l03024"></a><span class="lineno"> 3024</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">ConstantInt::getNullValue</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getType()));</div>
<div class="line"><a name="l03025"></a><span class="lineno"> 3025</span>&#160; </div>
<div class="line"><a name="l03026"></a><span class="lineno"> 3026</span>&#160;      <span class="comment">// icmp slt (bitcast (sitofp X)), 1 --&gt; icmp slt X, 1</span></div>
<div class="line"><a name="l03027"></a><span class="lineno"> 3027</span>&#160;      <span class="keywordflow">if</span> (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba15ae464950ac676919c2f0c7aafc706c">ICmpInst::ICMP_SLT</a> &amp;&amp; <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#aebdb2700a77d10ae6f0ce115e23d9f77">m_One</a>()))</div>
<div class="line"><a name="l03028"></a><span class="lineno"> 3028</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getType(), 1));</div>
<div class="line"><a name="l03029"></a><span class="lineno"> 3029</span>&#160; </div>
<div class="line"><a name="l03030"></a><span class="lineno"> 3030</span>&#160;      <span class="comment">// icmp sgt (bitcast (sitofp X)), -1 --&gt; icmp sgt X, -1</span></div>
<div class="line"><a name="l03031"></a><span class="lineno"> 3031</span>&#160;      <span class="keywordflow">if</span> (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba720a42e85f7e981afd61e28473b0000a">ICmpInst::ICMP_SGT</a> &amp;&amp; <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#aaea0d5ebb8b57ddde2095f80e2e94bb2">m_AllOnes</a>()))</div>
<div class="line"><a name="l03032"></a><span class="lineno"> 3032</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>,</div>
<div class="line"><a name="l03033"></a><span class="lineno"> 3033</span>&#160;                            <a class="code" href="classllvm_1_1Constant.html#a4d51384de6e1798bb6aa875aebeea9f0">ConstantInt::getAllOnesValue</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getType()));</div>
<div class="line"><a name="l03034"></a><span class="lineno"> 3034</span>&#160;    }</div>
<div class="line"><a name="l03035"></a><span class="lineno"> 3035</span>&#160; </div>
<div class="line"><a name="l03036"></a><span class="lineno"> 3036</span>&#160;    <span class="comment">// Zero-equality checks are preserved through unsigned floating-point casts:</span></div>
<div class="line"><a name="l03037"></a><span class="lineno"> 3037</span>&#160;    <span class="comment">// icmp eq (bitcast (uitofp X)), 0 --&gt; icmp eq X, 0</span></div>
<div class="line"><a name="l03038"></a><span class="lineno"> 3038</span>&#160;    <span class="comment">// icmp ne (bitcast (uitofp X)), 0 --&gt; icmp ne X, 0</span></div>
<div class="line"><a name="l03039"></a><span class="lineno"> 3039</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(BCSrcOp, <a class="code" href="namespacellvm_1_1PatternMatch.html#ac47353e50683b2440ca9ad4a1fa860d0">m_UIToFP</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>))))</div>
<div class="line"><a name="l03040"></a><span class="lineno"> 3040</span>&#160;      <span class="keywordflow">if</span> (Cmp.isEquality() &amp;&amp; <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#ae77be336e228cf9aa00709a8606dfb98">m_Zero</a>()))</div>
<div class="line"><a name="l03041"></a><span class="lineno"> 3041</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">ConstantInt::getNullValue</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getType()));</div>
<div class="line"><a name="l03042"></a><span class="lineno"> 3042</span>&#160; </div>
<div class="line"><a name="l03043"></a><span class="lineno"> 3043</span>&#160;    <span class="comment">// If this is a sign-bit test of a bitcast of a casted FP value, eliminate</span></div>
<div class="line"><a name="l03044"></a><span class="lineno"> 3044</span>&#160;    <span class="comment">// the FP extend/truncate because that cast does not change the sign-bit.</span></div>
<div class="line"><a name="l03045"></a><span class="lineno"> 3045</span>&#160;    <span class="comment">// This is true for all standard IEEE-754 types and the X86 80-bit type.</span></div>
<div class="line"><a name="l03046"></a><span class="lineno"> 3046</span>&#160;    <span class="comment">// The sign-bit is always the most significant bit in those types.</span></div>
<div class="line"><a name="l03047"></a><span class="lineno"> 3047</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>;</div>
<div class="line"><a name="l03048"></a><span class="lineno"> 3048</span>&#160;    <span class="keywordtype">bool</span> TrueIfSigned;</div>
<div class="line"><a name="l03049"></a><span class="lineno"> 3049</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)) &amp;&amp; <a class="code" href="namespacellvm_1_1LegacyLegalizeActions.html#ad25716c86372dafbf624b34891685078a031174d0f974cf1041a9cadb84f0dcbf">Bitcast</a>-&gt;hasOneUse() &amp;&amp;</div>
<div class="line"><a name="l03050"></a><span class="lineno"> 3050</span>&#160;        isSignBitCheck(Pred, *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, TrueIfSigned)) {</div>
<div class="line"><a name="l03051"></a><span class="lineno"> 3051</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(BCSrcOp, <a class="code" href="namespacellvm_1_1PatternMatch.html#a2997340992a508357b480467a6901c70">m_FPExt</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>))) ||</div>
<div class="line"><a name="l03052"></a><span class="lineno"> 3052</span>&#160;          <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(BCSrcOp, <a class="code" href="namespacellvm_1_1PatternMatch.html#a3029ab4957ff8bf58c4cd361cb243c47">m_FPTrunc</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>)))) {</div>
<div class="line"><a name="l03053"></a><span class="lineno"> 3053</span>&#160;        <span class="comment">// (bitcast (fpext/fptrunc X)) to iX) &lt; 0 --&gt; (bitcast X to iY) &lt; 0</span></div>
<div class="line"><a name="l03054"></a><span class="lineno"> 3054</span>&#160;        <span class="comment">// (bitcast (fpext/fptrunc X)) to iX) &gt; -1 --&gt; (bitcast X to iY) &gt; -1</span></div>
<div class="line"><a name="l03055"></a><span class="lineno"> 3055</span>&#160;        <a class="code" href="classllvm_1_1Type.html">Type</a> *XType = <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getType();</div>
<div class="line"><a name="l03056"></a><span class="lineno"> 3056</span>&#160; </div>
<div class="line"><a name="l03057"></a><span class="lineno"> 3057</span>&#160;        <span class="comment">// We can&#39;t currently handle Power style floating point operations here.</span></div>
<div class="line"><a name="l03058"></a><span class="lineno"> 3058</span>&#160;        <span class="keywordflow">if</span> (!(XType-&gt;<a class="code" href="classllvm_1_1Type.html#a670980c63f2e5ca39022baf96173eb9c">isPPC_FP128Ty</a>() || SrcType-&gt;<a class="code" href="classllvm_1_1Type.html#a670980c63f2e5ca39022baf96173eb9c">isPPC_FP128Ty</a>())) {</div>
<div class="line"><a name="l03059"></a><span class="lineno"> 3059</span>&#160;          <a class="code" href="classllvm_1_1Type.html">Type</a> *NewType = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getIntNTy(XType-&gt;<a class="code" href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>());</div>
<div class="line"><a name="l03060"></a><span class="lineno"> 3060</span>&#160;          <span class="keywordflow">if</span> (<span class="keyword">auto</span> *XVTy = dyn_cast&lt;VectorType&gt;(XType))</div>
<div class="line"><a name="l03061"></a><span class="lineno"> 3061</span>&#160;            NewType = <a class="code" href="classllvm_1_1VectorType.html#a8c90e6c50e795b17466482a04947690e">VectorType::get</a>(NewType, XVTy-&gt;getElementCount());</div>
<div class="line"><a name="l03062"></a><span class="lineno"> 3062</span>&#160;          <a class="code" href="classllvm_1_1Value.html">Value</a> *NewBitcast = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBitCast(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, NewType);</div>
<div class="line"><a name="l03063"></a><span class="lineno"> 3063</span>&#160;          <span class="keywordflow">if</span> (TrueIfSigned)</div>
<div class="line"><a name="l03064"></a><span class="lineno"> 3064</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba15ae464950ac676919c2f0c7aafc706c">ICmpInst::ICMP_SLT</a>, NewBitcast,</div>
<div class="line"><a name="l03065"></a><span class="lineno"> 3065</span>&#160;                                <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">ConstantInt::getNullValue</a>(NewType));</div>
<div class="line"><a name="l03066"></a><span class="lineno"> 3066</span>&#160;          <span class="keywordflow">else</span></div>
<div class="line"><a name="l03067"></a><span class="lineno"> 3067</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba720a42e85f7e981afd61e28473b0000a">ICmpInst::ICMP_SGT</a>, NewBitcast,</div>
<div class="line"><a name="l03068"></a><span class="lineno"> 3068</span>&#160;                                <a class="code" href="classllvm_1_1Constant.html#a4d51384de6e1798bb6aa875aebeea9f0">ConstantInt::getAllOnesValue</a>(NewType));</div>
<div class="line"><a name="l03069"></a><span class="lineno"> 3069</span>&#160;        }</div>
<div class="line"><a name="l03070"></a><span class="lineno"> 3070</span>&#160;      }</div>
<div class="line"><a name="l03071"></a><span class="lineno"> 3071</span>&#160;    }</div>
<div class="line"><a name="l03072"></a><span class="lineno"> 3072</span>&#160;  }</div>
<div class="line"><a name="l03073"></a><span class="lineno"> 3073</span>&#160; </div>
<div class="line"><a name="l03074"></a><span class="lineno"> 3074</span>&#160;  <span class="comment">// Test to see if the operands of the icmp are casted versions of other</span></div>
<div class="line"><a name="l03075"></a><span class="lineno"> 3075</span>&#160;  <span class="comment">// values. If the ptr-&gt;ptr cast can be stripped off both arguments, do so.</span></div>
<div class="line"><a name="l03076"></a><span class="lineno"> 3076</span>&#160;  <span class="keywordflow">if</span> (DstType-&gt;<a class="code" href="classllvm_1_1Type.html#a3b996fbf8458aafffc86cb98a68d0a47">isPointerTy</a>() &amp;&amp; (isa&lt;Constant&gt;(Op1) || isa&lt;BitCastInst&gt;(Op1))) {</div>
<div class="line"><a name="l03077"></a><span class="lineno"> 3077</span>&#160;    <span class="comment">// If operand #1 is a bitcast instruction, it must also be a ptr-&gt;ptr cast</span></div>
<div class="line"><a name="l03078"></a><span class="lineno"> 3078</span>&#160;    <span class="comment">// so eliminate it as well.</span></div>
<div class="line"><a name="l03079"></a><span class="lineno"> 3079</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> *BC2 = dyn_cast&lt;BitCastInst&gt;(Op1))</div>
<div class="line"><a name="l03080"></a><span class="lineno"> 3080</span>&#160;      Op1 = BC2-&gt;getOperand(0);</div>
<div class="line"><a name="l03081"></a><span class="lineno"> 3081</span>&#160; </div>
<div class="line"><a name="l03082"></a><span class="lineno"> 3082</span>&#160;    Op1 = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBitCast(Op1, SrcType);</div>
<div class="line"><a name="l03083"></a><span class="lineno"> 3083</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, BCSrcOp, Op1);</div>
<div class="line"><a name="l03084"></a><span class="lineno"> 3084</span>&#160;  }</div>
<div class="line"><a name="l03085"></a><span class="lineno"> 3085</span>&#160; </div>
<div class="line"><a name="l03086"></a><span class="lineno"> 3086</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>;</div>
<div class="line"><a name="l03087"></a><span class="lineno"> 3087</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Cmp.getOperand(1), <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)) || !DstType-&gt;<a class="code" href="classllvm_1_1Type.html#ac6d28a9b11139182134a9618028a0d07">isIntegerTy</a>() ||</div>
<div class="line"><a name="l03088"></a><span class="lineno"> 3088</span>&#160;      !SrcType-&gt;<a class="code" href="classllvm_1_1Type.html#a34ee40bb2f4f5ece47ef19e5f1f57e3c">isIntOrIntVectorTy</a>())</div>
<div class="line"><a name="l03089"></a><span class="lineno"> 3089</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l03090"></a><span class="lineno"> 3090</span>&#160; </div>
<div class="line"><a name="l03091"></a><span class="lineno"> 3091</span>&#160;  <span class="comment">// If this is checking if all elements of a vector compare are set or not,</span></div>
<div class="line"><a name="l03092"></a><span class="lineno"> 3092</span>&#160;  <span class="comment">// invert the casted vector equality compare and test if all compare</span></div>
<div class="line"><a name="l03093"></a><span class="lineno"> 3093</span>&#160;  <span class="comment">// elements are clear or not. Compare against zero is generally easier for</span></div>
<div class="line"><a name="l03094"></a><span class="lineno"> 3094</span>&#160;  <span class="comment">// analysis and codegen.</span></div>
<div class="line"><a name="l03095"></a><span class="lineno"> 3095</span>&#160;  <span class="comment">// icmp eq/ne (bitcast (not X) to iN), -1 --&gt; icmp eq/ne (bitcast X to iN), 0</span></div>
<div class="line"><a name="l03096"></a><span class="lineno"> 3096</span>&#160;  <span class="comment">// Example: are all elements equal? --&gt; are zero elements not equal?</span></div>
<div class="line"><a name="l03097"></a><span class="lineno"> 3097</span>&#160;  <span class="comment">// TODO: Try harder to reduce compare of 2 freely invertible operands?</span></div>
<div class="line"><a name="l03098"></a><span class="lineno"> 3098</span>&#160;  <span class="keywordflow">if</span> (Cmp.isEquality() &amp;&amp; <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;isAllOnes() &amp;&amp; <a class="code" href="namespacellvm_1_1LegacyLegalizeActions.html#ad25716c86372dafbf624b34891685078a031174d0f974cf1041a9cadb84f0dcbf">Bitcast</a>-&gt;hasOneUse() &amp;&amp;</div>
<div class="line"><a name="l03099"></a><span class="lineno"> 3099</span>&#160;      isFreeToInvert(BCSrcOp, BCSrcOp-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>())) {</div>
<div class="line"><a name="l03100"></a><span class="lineno"> 3100</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Cast = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBitCast(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateNot(BCSrcOp), DstType);</div>
<div class="line"><a name="l03101"></a><span class="lineno"> 3101</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, Cast, <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">ConstantInt::getNullValue</a>(DstType));</div>
<div class="line"><a name="l03102"></a><span class="lineno"> 3102</span>&#160;  }</div>
<div class="line"><a name="l03103"></a><span class="lineno"> 3103</span>&#160; </div>
<div class="line"><a name="l03104"></a><span class="lineno"> 3104</span>&#160;  <span class="comment">// If this is checking if all elements of an extended vector are clear or not,</span></div>
<div class="line"><a name="l03105"></a><span class="lineno"> 3105</span>&#160;  <span class="comment">// compare in a narrow type to eliminate the extend:</span></div>
<div class="line"><a name="l03106"></a><span class="lineno"> 3106</span>&#160;  <span class="comment">// icmp eq/ne (bitcast (ext X) to iN), 0 --&gt; icmp eq/ne (bitcast X to iM), 0</span></div>
<div class="line"><a name="l03107"></a><span class="lineno"> 3107</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>;</div>
<div class="line"><a name="l03108"></a><span class="lineno"> 3108</span>&#160;  <span class="keywordflow">if</span> (Cmp.isEquality() &amp;&amp; <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;isZero() &amp;&amp; <a class="code" href="namespacellvm_1_1LegacyLegalizeActions.html#ad25716c86372dafbf624b34891685078a031174d0f974cf1041a9cadb84f0dcbf">Bitcast</a>-&gt;hasOneUse() &amp;&amp;</div>
<div class="line"><a name="l03109"></a><span class="lineno"> 3109</span>&#160;      <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(BCSrcOp, <a class="code" href="namespacellvm_1_1PatternMatch.html#a247b6987d634040b8aa6fb9c5887b703">m_ZExtOrSExt</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>)))) {</div>
<div class="line"><a name="l03110"></a><span class="lineno"> 3110</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> *VecTy = dyn_cast&lt;FixedVectorType&gt;(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getType())) {</div>
<div class="line"><a name="l03111"></a><span class="lineno"> 3111</span>&#160;      <a class="code" href="classllvm_1_1Type.html">Type</a> *NewType = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getIntNTy(VecTy-&gt;getPrimitiveSizeInBits());</div>
<div class="line"><a name="l03112"></a><span class="lineno"> 3112</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *NewCast = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBitCast(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, NewType);</div>
<div class="line"><a name="l03113"></a><span class="lineno"> 3113</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, NewCast, <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">ConstantInt::getNullValue</a>(NewType));</div>
<div class="line"><a name="l03114"></a><span class="lineno"> 3114</span>&#160;    }</div>
<div class="line"><a name="l03115"></a><span class="lineno"> 3115</span>&#160;  }</div>
<div class="line"><a name="l03116"></a><span class="lineno"> 3116</span>&#160; </div>
<div class="line"><a name="l03117"></a><span class="lineno"> 3117</span>&#160;  <span class="comment">// Folding: icmp &lt;pred&gt; iN X, C</span></div>
<div class="line"><a name="l03118"></a><span class="lineno"> 3118</span>&#160;  <span class="comment">//  where X = bitcast &lt;M x iK&gt; (shufflevector &lt;M x iK&gt; %vec, undef, SC)) to iN</span></div>
<div class="line"><a name="l03119"></a><span class="lineno"> 3119</span>&#160;  <span class="comment">//    and C is a splat of a K-bit pattern</span></div>
<div class="line"><a name="l03120"></a><span class="lineno"> 3120</span>&#160;  <span class="comment">//    and SC is a constant vector = &lt;C&#39;, C&#39;, C&#39;, ..., C&#39;&gt;</span></div>
<div class="line"><a name="l03121"></a><span class="lineno"> 3121</span>&#160;  <span class="comment">// Into:</span></div>
<div class="line"><a name="l03122"></a><span class="lineno"> 3122</span>&#160;  <span class="comment">//   %E = extractelement &lt;M x iK&gt; %vec, i32 C&#39;</span></div>
<div class="line"><a name="l03123"></a><span class="lineno"> 3123</span>&#160;  <span class="comment">//   icmp &lt;pred&gt; iK %E, trunc(C)</span></div>
<div class="line"><a name="l03124"></a><span class="lineno"> 3124</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Vec;</div>
<div class="line"><a name="l03125"></a><span class="lineno"> 3125</span>&#160;  <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;int&gt;</a> <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a>;</div>
<div class="line"><a name="l03126"></a><span class="lineno"> 3126</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(BCSrcOp, <a class="code" href="namespacellvm_1_1PatternMatch.html#afd3e8a6706810fef8cdbaf1f9f40dfbd">m_Shuffle</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(Vec), <a class="code" href="namespacellvm_1_1PatternMatch.html#adea6dc2e42baa345b97be48b0370313d">m_Undef</a>(), <a class="code" href="structllvm_1_1PatternMatch_1_1m__Mask.html">m_Mask</a>(<a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a>)))) {</div>
<div class="line"><a name="l03127"></a><span class="lineno"> 3127</span>&#160;    <span class="comment">// Check whether every element of Mask is the same constant</span></div>
<div class="line"><a name="l03128"></a><span class="lineno"> 3128</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#ad78da75bd1f157e72100f97d1ecdc756">all_equal</a>(<a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a>)) {</div>
<div class="line"><a name="l03129"></a><span class="lineno"> 3129</span>&#160;      <span class="keyword">auto</span> *VecTy = cast&lt;VectorType&gt;(SrcType);</div>
<div class="line"><a name="l03130"></a><span class="lineno"> 3130</span>&#160;      <span class="keyword">auto</span> *EltTy = cast&lt;IntegerType&gt;(VecTy-&gt;getElementType());</div>
<div class="line"><a name="l03131"></a><span class="lineno"> 3131</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;isSplat(EltTy-&gt;getBitWidth())) {</div>
<div class="line"><a name="l03132"></a><span class="lineno"> 3132</span>&#160;        <span class="comment">// Fold the icmp based on the value of C</span></div>
<div class="line"><a name="l03133"></a><span class="lineno"> 3133</span>&#160;        <span class="comment">// If C is M copies of an iK sized bit pattern,</span></div>
<div class="line"><a name="l03134"></a><span class="lineno"> 3134</span>&#160;        <span class="comment">// then:</span></div>
<div class="line"><a name="l03135"></a><span class="lineno"> 3135</span>&#160;        <span class="comment">//   =&gt;  %E = extractelement &lt;N x iK&gt; %vec, i32 Elem</span></div>
<div class="line"><a name="l03136"></a><span class="lineno"> 3136</span>&#160;        <span class="comment">//       icmp &lt;pred&gt; iK %SplatVal, &lt;pattern&gt;</span></div>
<div class="line"><a name="l03137"></a><span class="lineno"> 3137</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *Elem = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getInt32(<a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a>[0]);</div>
<div class="line"><a name="l03138"></a><span class="lineno"> 3138</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *Extract = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateExtractElement(Vec, Elem);</div>
<div class="line"><a name="l03139"></a><span class="lineno"> 3139</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *NewC = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(EltTy, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;trunc(EltTy-&gt;getBitWidth()));</div>
<div class="line"><a name="l03140"></a><span class="lineno"> 3140</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, Extract, NewC);</div>
<div class="line"><a name="l03141"></a><span class="lineno"> 3141</span>&#160;      }</div>
<div class="line"><a name="l03142"></a><span class="lineno"> 3142</span>&#160;    }</div>
<div class="line"><a name="l03143"></a><span class="lineno"> 3143</span>&#160;  }</div>
<div class="line"><a name="l03144"></a><span class="lineno"> 3144</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l03145"></a><span class="lineno"> 3145</span>&#160;}</div>
<div class="line"><a name="l03146"></a><span class="lineno"> 3146</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l03147"></a><span class="lineno"> 3147</span>&#160;<span class="comment">/// Try to fold integer comparisons with a constant operand: icmp Pred X, C</span></div>
<div class="line"><a name="l03148"></a><span class="lineno"> 3148</span>&#160;<span class="comment">/// where X is some kind of instruction.</span></div>
<div class="line"><a name="l03149"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombinerImpl.html#ab82eb0514d646d43f777a8b0cc83fdec"> 3149</a></span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombinerImpl.html#ab82eb0514d646d43f777a8b0cc83fdec">InstCombinerImpl::foldICmpInstWithConstant</a>(<a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> &amp;Cmp) {</div>
<div class="line"><a name="l03150"></a><span class="lineno"> 3150</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>;</div>
<div class="line"><a name="l03151"></a><span class="lineno"> 3151</span>&#160; </div>
<div class="line"><a name="l03152"></a><span class="lineno"> 3152</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Cmp.getOperand(1), <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>))) {</div>
<div class="line"><a name="l03153"></a><span class="lineno"> 3153</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> *BO = dyn_cast&lt;BinaryOperator&gt;(Cmp.getOperand(0)))</div>
<div class="line"><a name="l03154"></a><span class="lineno"> 3154</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = foldICmpBinOpWithConstant(Cmp, BO, *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>))</div>
<div class="line"><a name="l03155"></a><span class="lineno"> 3155</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l03156"></a><span class="lineno"> 3156</span>&#160; </div>
<div class="line"><a name="l03157"></a><span class="lineno"> 3157</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> *<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a> = dyn_cast&lt;SelectInst&gt;(Cmp.getOperand(0)))</div>
<div class="line"><a name="l03158"></a><span class="lineno"> 3158</span>&#160;      <span class="comment">// For now, we only support constant integers while folding the</span></div>
<div class="line"><a name="l03159"></a><span class="lineno"> 3159</span>&#160;      <span class="comment">// ICMP(SELECT)) pattern. We can extend this to support vector of integers</span></div>
<div class="line"><a name="l03160"></a><span class="lineno"> 3160</span>&#160;      <span class="comment">// similar to the cases handled by binary ops above.</span></div>
<div class="line"><a name="l03161"></a><span class="lineno"> 3161</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> *ConstRHS = dyn_cast&lt;ConstantInt&gt;(Cmp.getOperand(1)))</div>
<div class="line"><a name="l03162"></a><span class="lineno"> 3162</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = foldICmpSelectConstant(Cmp, <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>, ConstRHS))</div>
<div class="line"><a name="l03163"></a><span class="lineno"> 3163</span>&#160;          <span class="keywordflow">return</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l03164"></a><span class="lineno"> 3164</span>&#160; </div>
<div class="line"><a name="l03165"></a><span class="lineno"> 3165</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> *TI = dyn_cast&lt;TruncInst&gt;(Cmp.getOperand(0)))</div>
<div class="line"><a name="l03166"></a><span class="lineno"> 3166</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = foldICmpTruncConstant(Cmp, TI, *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>))</div>
<div class="line"><a name="l03167"></a><span class="lineno"> 3167</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l03168"></a><span class="lineno"> 3168</span>&#160; </div>
<div class="line"><a name="l03169"></a><span class="lineno"> 3169</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> *II = dyn_cast&lt;IntrinsicInst&gt;(Cmp.getOperand(0)))</div>
<div class="line"><a name="l03170"></a><span class="lineno"> 3170</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = foldICmpIntrinsicWithConstant(Cmp, II, *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>))</div>
<div class="line"><a name="l03171"></a><span class="lineno"> 3171</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l03172"></a><span class="lineno"> 3172</span>&#160; </div>
<div class="line"><a name="l03173"></a><span class="lineno"> 3173</span>&#160;    <span class="comment">// (extractval ([s/u]subo X, Y), 0) == 0 --&gt; X == Y</span></div>
<div class="line"><a name="l03174"></a><span class="lineno"> 3174</span>&#160;    <span class="comment">// (extractval ([s/u]subo X, Y), 0) != 0 --&gt; X != Y</span></div>
<div class="line"><a name="l03175"></a><span class="lineno"> 3175</span>&#160;    <span class="comment">// TODO: This checks one-use, but that is not strictly necessary.</span></div>
<div class="line"><a name="l03176"></a><span class="lineno"> 3176</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Cmp0 = Cmp.getOperand(0);</div>
<div class="line"><a name="l03177"></a><span class="lineno"> 3177</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, *<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>;</div>
<div class="line"><a name="l03178"></a><span class="lineno"> 3178</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;isZero() &amp;&amp; Cmp.isEquality() &amp;&amp; Cmp0-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>() &amp;&amp;</div>
<div class="line"><a name="l03179"></a><span class="lineno"> 3179</span>&#160;        (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Cmp0,</div>
<div class="line"><a name="l03180"></a><span class="lineno"> 3180</span>&#160;               m_ExtractValue&lt;0&gt;(m_Intrinsic&lt;Intrinsic::ssub_with_overflow&gt;(</div>
<div class="line"><a name="l03181"></a><span class="lineno"> 3181</span>&#160;                   <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>)))) ||</div>
<div class="line"><a name="l03182"></a><span class="lineno"> 3182</span>&#160;         <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Cmp0,</div>
<div class="line"><a name="l03183"></a><span class="lineno"> 3183</span>&#160;               m_ExtractValue&lt;0&gt;(m_Intrinsic&lt;Intrinsic::usub_with_overflow&gt;(</div>
<div class="line"><a name="l03184"></a><span class="lineno"> 3184</span>&#160;                   <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>))))))</div>
<div class="line"><a name="l03185"></a><span class="lineno"> 3185</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Cmp.getPredicate(), <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>);</div>
<div class="line"><a name="l03186"></a><span class="lineno"> 3186</span>&#160;  }</div>
<div class="line"><a name="l03187"></a><span class="lineno"> 3187</span>&#160; </div>
<div class="line"><a name="l03188"></a><span class="lineno"> 3188</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Cmp.getOperand(1), <a class="code" href="namespacellvm_1_1PatternMatch.html#a0f8629c0ff1db9c384e378b2ca860f0a">m_APIntAllowUndef</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)))</div>
<div class="line"><a name="l03189"></a><span class="lineno"> 3189</span>&#160;    <span class="keywordflow">return</span> foldICmpInstWithConstantAllowUndef(Cmp, *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div>
<div class="line"><a name="l03190"></a><span class="lineno"> 3190</span>&#160; </div>
<div class="line"><a name="l03191"></a><span class="lineno"> 3191</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l03192"></a><span class="lineno"> 3192</span>&#160;}</div>
<div class="line"><a name="l03193"></a><span class="lineno"> 3193</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l03194"></a><span class="lineno"> 3194</span>&#160;<span class="comment">/// Fold an icmp equality instruction with binary operator LHS and constant RHS:</span></div>
<div class="line"><a name="l03195"></a><span class="lineno"> 3195</span>&#160;<span class="comment">/// icmp eq/ne BO, C.</span></div>
<div class="line"><a name="l03196"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombinerImpl.html#a78aa741a7874614a21b66826ffe6e5ce"> 3196</a></span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombinerImpl.html#a78aa741a7874614a21b66826ffe6e5ce">InstCombinerImpl::foldICmpBinOpEqualityWithConstant</a>(</div>
<div class="line"><a name="l03197"></a><span class="lineno"> 3197</span>&#160;    <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> &amp;Cmp, <a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> *BO, <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> &amp;<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>) {</div>
<div class="line"><a name="l03198"></a><span class="lineno"> 3198</span>&#160;  <span class="comment">// TODO: Some of these folds could work with arbitrary constants, but this</span></div>
<div class="line"><a name="l03199"></a><span class="lineno"> 3199</span>&#160;  <span class="comment">// function is limited to scalar and vector splat constants.</span></div>
<div class="line"><a name="l03200"></a><span class="lineno"> 3200</span>&#160;  <span class="keywordflow">if</span> (!Cmp.isEquality())</div>
<div class="line"><a name="l03201"></a><span class="lineno"> 3201</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l03202"></a><span class="lineno"> 3202</span>&#160; </div>
<div class="line"><a name="l03203"></a><span class="lineno"> 3203</span>&#160;  <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">ICmpInst::Predicate</a> Pred = Cmp.getPredicate();</div>
<div class="line"><a name="l03204"></a><span class="lineno"> 3204</span>&#160;  <span class="keywordtype">bool</span> isICMP_NE = Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a>;</div>
<div class="line"><a name="l03205"></a><span class="lineno"> 3205</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a> = cast&lt;Constant&gt;(Cmp.getOperand(1));</div>
<div class="line"><a name="l03206"></a><span class="lineno"> 3206</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *BOp0 = BO-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0), *BOp1 = BO-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(1);</div>
<div class="line"><a name="l03207"></a><span class="lineno"> 3207</span>&#160; </div>
<div class="line"><a name="l03208"></a><span class="lineno"> 3208</span>&#160;  <span class="keywordflow">switch</span> (BO-&gt;<a class="code" href="classllvm_1_1BinaryOperator.html#a31bf07f3f61525486633bc1d0bbaf029">getOpcode</a>()) {</div>
<div class="line"><a name="l03209"></a><span class="lineno"> 3209</span>&#160;  <span class="keywordflow">case</span> Instruction::SRem:</div>
<div class="line"><a name="l03210"></a><span class="lineno"> 3210</span>&#160;    <span class="comment">// If we have a signed (X % (2^c)) == 0, turn it into an unsigned one.</span></div>
<div class="line"><a name="l03211"></a><span class="lineno"> 3211</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.isZero() &amp;&amp; BO-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>()) {</div>
<div class="line"><a name="l03212"></a><span class="lineno"> 3212</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *BOC;</div>
<div class="line"><a name="l03213"></a><span class="lineno"> 3213</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(BOp1, <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(BOC)) &amp;&amp; BOC-&gt;<a class="code" href="classllvm_1_1APInt.html#a3d430216d32f4363e4df154599b98055">sgt</a>(1) &amp;&amp; BOC-&gt;<a class="code" href="classllvm_1_1APInt.html#ad1b0513de876d1c85cf6268ca21b2c86">isPowerOf2</a>()) {</div>
<div class="line"><a name="l03214"></a><span class="lineno"> 3214</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *NewRem = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateURem(BOp0, BOp1, BO-&gt;<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>());</div>
<div class="line"><a name="l03215"></a><span class="lineno"> 3215</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, NewRem,</div>
<div class="line"><a name="l03216"></a><span class="lineno"> 3216</span>&#160;                            <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(BO-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()));</div>
<div class="line"><a name="l03217"></a><span class="lineno"> 3217</span>&#160;      }</div>
<div class="line"><a name="l03218"></a><span class="lineno"> 3218</span>&#160;    }</div>
<div class="line"><a name="l03219"></a><span class="lineno"> 3219</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03220"></a><span class="lineno"> 3220</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a2b016c207343046b2bac45e69e76dcec">Instruction::Add</a>: {</div>
<div class="line"><a name="l03221"></a><span class="lineno"> 3221</span>&#160;    <span class="comment">// (A + C2) == C --&gt; A == (C - C2)</span></div>
<div class="line"><a name="l03222"></a><span class="lineno"> 3222</span>&#160;    <span class="comment">// (A + C2) != C --&gt; A != (C - C2)</span></div>
<div class="line"><a name="l03223"></a><span class="lineno"> 3223</span>&#160;    <span class="comment">// TODO: Remove the one-use limitation? See discussion in D58633.</span></div>
<div class="line"><a name="l03224"></a><span class="lineno"> 3224</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Constant.html">Constant</a> *C2 = dyn_cast&lt;Constant&gt;(BOp1)) {</div>
<div class="line"><a name="l03225"></a><span class="lineno"> 3225</span>&#160;      <span class="keywordflow">if</span> (BO-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>())</div>
<div class="line"><a name="l03226"></a><span class="lineno"> 3226</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, BOp0, <a class="code" href="classllvm_1_1ConstantExpr.html#a554ab77949b0a16670a83ec3307501eb">ConstantExpr::getSub</a>(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, C2));</div>
<div class="line"><a name="l03227"></a><span class="lineno"> 3227</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.isZero()) {</div>
<div class="line"><a name="l03228"></a><span class="lineno"> 3228</span>&#160;      <span class="comment">// Replace ((add A, B) != 0) with (A != -B) if A or B is</span></div>
<div class="line"><a name="l03229"></a><span class="lineno"> 3229</span>&#160;      <span class="comment">// efficiently invertible, or if the add has just this one use.</span></div>
<div class="line"><a name="l03230"></a><span class="lineno"> 3230</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *NegVal = dyn_castNegVal(BOp1))</div>
<div class="line"><a name="l03231"></a><span class="lineno"> 3231</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, BOp0, NegVal);</div>
<div class="line"><a name="l03232"></a><span class="lineno"> 3232</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *NegVal = dyn_castNegVal(BOp0))</div>
<div class="line"><a name="l03233"></a><span class="lineno"> 3233</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, NegVal, BOp1);</div>
<div class="line"><a name="l03234"></a><span class="lineno"> 3234</span>&#160;      <span class="keywordflow">if</span> (BO-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>()) {</div>
<div class="line"><a name="l03235"></a><span class="lineno"> 3235</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *Neg = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateNeg(BOp1);</div>
<div class="line"><a name="l03236"></a><span class="lineno"> 3236</span>&#160;        Neg-&gt;<a class="code" href="classllvm_1_1Value.html#ae855357b6c5e6e7ed1869272708a3a84">takeName</a>(BO);</div>
<div class="line"><a name="l03237"></a><span class="lineno"> 3237</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, BOp0, Neg);</div>
<div class="line"><a name="l03238"></a><span class="lineno"> 3238</span>&#160;      }</div>
<div class="line"><a name="l03239"></a><span class="lineno"> 3239</span>&#160;    }</div>
<div class="line"><a name="l03240"></a><span class="lineno"> 3240</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03241"></a><span class="lineno"> 3241</span>&#160;  }</div>
<div class="line"><a name="l03242"></a><span class="lineno"> 3242</span>&#160;  <span class="keywordflow">case</span> Instruction::Xor:</div>
<div class="line"><a name="l03243"></a><span class="lineno"> 3243</span>&#160;    <span class="keywordflow">if</span> (BO-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>()) {</div>
<div class="line"><a name="l03244"></a><span class="lineno"> 3244</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Constant.html">Constant</a> *BOC = dyn_cast&lt;Constant&gt;(BOp1)) {</div>
<div class="line"><a name="l03245"></a><span class="lineno"> 3245</span>&#160;        <span class="comment">// For the xor case, we can xor two constants together, eliminating</span></div>
<div class="line"><a name="l03246"></a><span class="lineno"> 3246</span>&#160;        <span class="comment">// the explicit xor.</span></div>
<div class="line"><a name="l03247"></a><span class="lineno"> 3247</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, BOp0, <a class="code" href="classllvm_1_1ConstantExpr.html#a9fe0b1e68f897c642cde7e54184f2f4e">ConstantExpr::getXor</a>(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, BOC));</div>
<div class="line"><a name="l03248"></a><span class="lineno"> 3248</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.isZero()) {</div>
<div class="line"><a name="l03249"></a><span class="lineno"> 3249</span>&#160;        <span class="comment">// Replace ((xor A, B) != 0) with (A != B)</span></div>
<div class="line"><a name="l03250"></a><span class="lineno"> 3250</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, BOp0, BOp1);</div>
<div class="line"><a name="l03251"></a><span class="lineno"> 3251</span>&#160;      }</div>
<div class="line"><a name="l03252"></a><span class="lineno"> 3252</span>&#160;    }</div>
<div class="line"><a name="l03253"></a><span class="lineno"> 3253</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03254"></a><span class="lineno"> 3254</span>&#160;  <span class="keywordflow">case</span> Instruction::Or: {</div>
<div class="line"><a name="l03255"></a><span class="lineno"> 3255</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *BOC;</div>
<div class="line"><a name="l03256"></a><span class="lineno"> 3256</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(BOp1, <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(BOC)) &amp;&amp; BO-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>() &amp;&amp; <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>-&gt;isAllOnesValue()) {</div>
<div class="line"><a name="l03257"></a><span class="lineno"> 3257</span>&#160;      <span class="comment">// Comparing if all bits outside of a constant mask are set?</span></div>
<div class="line"><a name="l03258"></a><span class="lineno"> 3258</span>&#160;      <span class="comment">// Replace (X | C) == -1 with (X &amp; ~C) == ~C.</span></div>
<div class="line"><a name="l03259"></a><span class="lineno"> 3259</span>&#160;      <span class="comment">// This removes the -1 constant.</span></div>
<div class="line"><a name="l03260"></a><span class="lineno"> 3260</span>&#160;      <a class="code" href="classllvm_1_1Constant.html">Constant</a> *NotBOC = <a class="code" href="classllvm_1_1ConstantExpr.html#a5b43a866f0fca605556f0f69f70c522a">ConstantExpr::getNot</a>(cast&lt;Constant&gt;(BOp1));</div>
<div class="line"><a name="l03261"></a><span class="lineno"> 3261</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eac33315685a0cba3ce53be378b3c7874b">And</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAnd(BOp0, NotBOC);</div>
<div class="line"><a name="l03262"></a><span class="lineno"> 3262</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, <a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eac33315685a0cba3ce53be378b3c7874b">And</a>, NotBOC);</div>
<div class="line"><a name="l03263"></a><span class="lineno"> 3263</span>&#160;    }</div>
<div class="line"><a name="l03264"></a><span class="lineno"> 3264</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03265"></a><span class="lineno"> 3265</span>&#160;  }</div>
<div class="line"><a name="l03266"></a><span class="lineno"> 3266</span>&#160;  <span class="keywordflow">case</span> Instruction::And: {</div>
<div class="line"><a name="l03267"></a><span class="lineno"> 3267</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *BOC;</div>
<div class="line"><a name="l03268"></a><span class="lineno"> 3268</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(BOp1, <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(BOC))) {</div>
<div class="line"><a name="l03269"></a><span class="lineno"> 3269</span>&#160;      <span class="comment">// If we have ((X &amp; C) == C), turn it into ((X &amp; C) != 0).</span></div>
<div class="line"><a name="l03270"></a><span class="lineno"> 3270</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> == *BOC &amp;&amp; <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.<a class="code" href="classllvm_1_1APInt.html#ad1b0513de876d1c85cf6268ca21b2c86">isPowerOf2</a>())</div>
<div class="line"><a name="l03271"></a><span class="lineno"> 3271</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(isICMP_NE ? <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a> : <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a>,</div>
<div class="line"><a name="l03272"></a><span class="lineno"> 3272</span>&#160;                            BO, <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()));</div>
<div class="line"><a name="l03273"></a><span class="lineno"> 3273</span>&#160;    }</div>
<div class="line"><a name="l03274"></a><span class="lineno"> 3274</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03275"></a><span class="lineno"> 3275</span>&#160;  }</div>
<div class="line"><a name="l03276"></a><span class="lineno"> 3276</span>&#160;  <span class="keywordflow">case</span> Instruction::UDiv:</div>
<div class="line"><a name="l03277"></a><span class="lineno"> 3277</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.isZero()) {</div>
<div class="line"><a name="l03278"></a><span class="lineno"> 3278</span>&#160;      <span class="comment">// (icmp eq/ne (udiv A, B), 0) -&gt; (icmp ugt/ule i32 B, A)</span></div>
<div class="line"><a name="l03279"></a><span class="lineno"> 3279</span>&#160;      <span class="keyword">auto</span> NewPred = isICMP_NE ? <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bad92f160316221fd4090520bb2b3cefc5">ICmpInst::ICMP_ULE</a> : <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba607cecdc5172814382033e001ed11fad">ICmpInst::ICMP_UGT</a>;</div>
<div class="line"><a name="l03280"></a><span class="lineno"> 3280</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(NewPred, BOp1, BOp0);</div>
<div class="line"><a name="l03281"></a><span class="lineno"> 3281</span>&#160;    }</div>
<div class="line"><a name="l03282"></a><span class="lineno"> 3282</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03283"></a><span class="lineno"> 3283</span>&#160;  <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l03284"></a><span class="lineno"> 3284</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03285"></a><span class="lineno"> 3285</span>&#160;  }</div>
<div class="line"><a name="l03286"></a><span class="lineno"> 3286</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l03287"></a><span class="lineno"> 3287</span>&#160;}</div>
<div class="line"><a name="l03288"></a><span class="lineno"> 3288</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l03289"></a><span class="lineno"> 3289</span>&#160;<span class="comment">/// Fold an equality icmp with LLVM intrinsic and constant operand.</span></div>
<div class="line"><a name="l03290"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombinerImpl.html#a4f55d7706c3a7a5983907b84d98ddbad"> 3290</a></span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombinerImpl.html#a4f55d7706c3a7a5983907b84d98ddbad">InstCombinerImpl::foldICmpEqIntrinsicWithConstant</a>(</div>
<div class="line"><a name="l03291"></a><span class="lineno"> 3291</span>&#160;    <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> &amp;Cmp, <a class="code" href="classllvm_1_1IntrinsicInst.html">IntrinsicInst</a> *II, <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> &amp;<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>) {</div>
<div class="line"><a name="l03292"></a><span class="lineno"> 3292</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *Ty = II-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>();</div>
<div class="line"><a name="l03293"></a><span class="lineno"> 3293</span>&#160;  <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm.html#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a> = <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.getBitWidth();</div>
<div class="line"><a name="l03294"></a><span class="lineno"> 3294</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">ICmpInst::Predicate</a> Pred = Cmp.getPredicate();</div>
<div class="line"><a name="l03295"></a><span class="lineno"> 3295</span>&#160; </div>
<div class="line"><a name="l03296"></a><span class="lineno"> 3296</span>&#160;  <span class="keywordflow">switch</span> (II-&gt;<a class="code" href="classllvm_1_1IntrinsicInst.html#a7ff64b3625b6f9020556ed05a5f72af4">getIntrinsicID</a>()) {</div>
<div class="line"><a name="l03297"></a><span class="lineno"> 3297</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm.html#a2816e84a08c108d18bc4665bc1817e01">Intrinsic::abs</a>:</div>
<div class="line"><a name="l03298"></a><span class="lineno"> 3298</span>&#160;    <span class="comment">// abs(A) == 0  -&gt;  A == 0</span></div>
<div class="line"><a name="l03299"></a><span class="lineno"> 3299</span>&#160;    <span class="comment">// abs(A) == INT_MIN  -&gt;  A == INT_MIN</span></div>
<div class="line"><a name="l03300"></a><span class="lineno"> 3300</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.isZero() || <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.isMinSignedValue())</div>
<div class="line"><a name="l03301"></a><span class="lineno"> 3301</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, II-&gt;<a class="code" href="classllvm_1_1CallBase.html#ab2caa29167597390ab2fc3cf30d70389">getArgOperand</a>(0), <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Ty, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>));</div>
<div class="line"><a name="l03302"></a><span class="lineno"> 3302</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03303"></a><span class="lineno"> 3303</span>&#160; </div>
<div class="line"><a name="l03304"></a><span class="lineno"> 3304</span>&#160;  <span class="keywordflow">case</span> Intrinsic::bswap:</div>
<div class="line"><a name="l03305"></a><span class="lineno"> 3305</span>&#160;    <span class="comment">// bswap(A) == C  -&gt;  A == bswap(C)</span></div>
<div class="line"><a name="l03306"></a><span class="lineno"> 3306</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, II-&gt;<a class="code" href="classllvm_1_1CallBase.html#ab2caa29167597390ab2fc3cf30d70389">getArgOperand</a>(0),</div>
<div class="line"><a name="l03307"></a><span class="lineno"> 3307</span>&#160;                        <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Ty, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.byteSwap()));</div>
<div class="line"><a name="l03308"></a><span class="lineno"> 3308</span>&#160; </div>
<div class="line"><a name="l03309"></a><span class="lineno"> 3309</span>&#160;  <span class="keywordflow">case</span> Intrinsic::ctlz:</div>
<div class="line"><a name="l03310"></a><span class="lineno"> 3310</span>&#160;  <span class="keywordflow">case</span> Intrinsic::cttz: {</div>
<div class="line"><a name="l03311"></a><span class="lineno"> 3311</span>&#160;    <span class="comment">// ctz(A) == bitwidth(A)  -&gt;  A == 0 and likewise for !=</span></div>
<div class="line"><a name="l03312"></a><span class="lineno"> 3312</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> == <a class="code" href="namespacellvm.html#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a>)</div>
<div class="line"><a name="l03313"></a><span class="lineno"> 3313</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, II-&gt;<a class="code" href="classllvm_1_1CallBase.html#ab2caa29167597390ab2fc3cf30d70389">getArgOperand</a>(0),</div>
<div class="line"><a name="l03314"></a><span class="lineno"> 3314</span>&#160;                          <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">ConstantInt::getNullValue</a>(Ty));</div>
<div class="line"><a name="l03315"></a><span class="lineno"> 3315</span>&#160; </div>
<div class="line"><a name="l03316"></a><span class="lineno"> 3316</span>&#160;    <span class="comment">// ctz(A) == C -&gt; A &amp; Mask1 == Mask2, where Mask2 only has bit C set</span></div>
<div class="line"><a name="l03317"></a><span class="lineno"> 3317</span>&#160;    <span class="comment">// and Mask1 has bits 0..C+1 set. Similar for ctl, but for high bits.</span></div>
<div class="line"><a name="l03318"></a><span class="lineno"> 3318</span>&#160;    <span class="comment">// Limit to one use to ensure we don&#39;t increase instruction count.</span></div>
<div class="line"><a name="l03319"></a><span class="lineno"> 3319</span>&#160;    <span class="keywordtype">unsigned</span> Num = <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.getLimitedValue(<a class="code" href="namespacellvm.html#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a>);</div>
<div class="line"><a name="l03320"></a><span class="lineno"> 3320</span>&#160;    <span class="keywordflow">if</span> (Num != <a class="code" href="namespacellvm.html#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a> &amp;&amp; II-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>()) {</div>
<div class="line"><a name="l03321"></a><span class="lineno"> 3321</span>&#160;      <span class="keywordtype">bool</span> IsTrailing = II-&gt;<a class="code" href="classllvm_1_1IntrinsicInst.html#a7ff64b3625b6f9020556ed05a5f72af4">getIntrinsicID</a>() == Intrinsic::cttz;</div>
<div class="line"><a name="l03322"></a><span class="lineno"> 3322</span>&#160;      <a class="code" href="classllvm_1_1APInt.html">APInt</a> Mask1 = IsTrailing ? <a class="code" href="classllvm_1_1APInt.html#ad960e1ff48d25c382b6d28e7961f074e">APInt::getLowBitsSet</a>(<a class="code" href="namespacellvm.html#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a>, Num + 1)</div>
<div class="line"><a name="l03323"></a><span class="lineno"> 3323</span>&#160;                               : <a class="code" href="classllvm_1_1APInt.html#adcb96bd09d7c75c7669fa5f9d1190899">APInt::getHighBitsSet</a>(<a class="code" href="namespacellvm.html#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a>, Num + 1);</div>
<div class="line"><a name="l03324"></a><span class="lineno"> 3324</span>&#160;      <a class="code" href="classllvm_1_1APInt.html">APInt</a> Mask2 = IsTrailing</div>
<div class="line"><a name="l03325"></a><span class="lineno"> 3325</span>&#160;        ? <a class="code" href="classllvm_1_1APInt.html#aec662ee6ab1490a4cabebf2812e5b9ca">APInt::getOneBitSet</a>(<a class="code" href="namespacellvm.html#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a>, Num)</div>
<div class="line"><a name="l03326"></a><span class="lineno"> 3326</span>&#160;        : <a class="code" href="classllvm_1_1APInt.html#aec662ee6ab1490a4cabebf2812e5b9ca">APInt::getOneBitSet</a>(<a class="code" href="namespacellvm.html#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a>, <a class="code" href="namespacellvm.html#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a> - Num - 1);</div>
<div class="line"><a name="l03327"></a><span class="lineno"> 3327</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAnd(II-&gt;<a class="code" href="classllvm_1_1CallBase.html#ab2caa29167597390ab2fc3cf30d70389">getArgOperand</a>(0), Mask1),</div>
<div class="line"><a name="l03328"></a><span class="lineno"> 3328</span>&#160;                          <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Ty, Mask2));</div>
<div class="line"><a name="l03329"></a><span class="lineno"> 3329</span>&#160;    }</div>
<div class="line"><a name="l03330"></a><span class="lineno"> 3330</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03331"></a><span class="lineno"> 3331</span>&#160;  }</div>
<div class="line"><a name="l03332"></a><span class="lineno"> 3332</span>&#160; </div>
<div class="line"><a name="l03333"></a><span class="lineno"> 3333</span>&#160;  <span class="keywordflow">case</span> Intrinsic::ctpop: {</div>
<div class="line"><a name="l03334"></a><span class="lineno"> 3334</span>&#160;    <span class="comment">// popcount(A) == 0  -&gt;  A == 0 and likewise for !=</span></div>
<div class="line"><a name="l03335"></a><span class="lineno"> 3335</span>&#160;    <span class="comment">// popcount(A) == bitwidth(A)  -&gt;  A == -1 and likewise for !=</span></div>
<div class="line"><a name="l03336"></a><span class="lineno"> 3336</span>&#160;    <span class="keywordtype">bool</span> IsZero = <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.isZero();</div>
<div class="line"><a name="l03337"></a><span class="lineno"> 3337</span>&#160;    <span class="keywordflow">if</span> (IsZero || <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> == <a class="code" href="namespacellvm.html#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a>)</div>
<div class="line"><a name="l03338"></a><span class="lineno"> 3338</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, II-&gt;<a class="code" href="classllvm_1_1CallBase.html#ab2caa29167597390ab2fc3cf30d70389">getArgOperand</a>(0),</div>
<div class="line"><a name="l03339"></a><span class="lineno"> 3339</span>&#160;                          IsZero ? <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(Ty)</div>
<div class="line"><a name="l03340"></a><span class="lineno"> 3340</span>&#160;                                 : <a class="code" href="classllvm_1_1Constant.html#a4d51384de6e1798bb6aa875aebeea9f0">Constant::getAllOnesValue</a>(Ty));</div>
<div class="line"><a name="l03341"></a><span class="lineno"> 3341</span>&#160; </div>
<div class="line"><a name="l03342"></a><span class="lineno"> 3342</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03343"></a><span class="lineno"> 3343</span>&#160;  }</div>
<div class="line"><a name="l03344"></a><span class="lineno"> 3344</span>&#160; </div>
<div class="line"><a name="l03345"></a><span class="lineno"> 3345</span>&#160;  <span class="keywordflow">case</span> Intrinsic::fshl:</div>
<div class="line"><a name="l03346"></a><span class="lineno"> 3346</span>&#160;  <span class="keywordflow">case</span> Intrinsic::fshr:</div>
<div class="line"><a name="l03347"></a><span class="lineno"> 3347</span>&#160;    <span class="keywordflow">if</span> (II-&gt;<a class="code" href="classllvm_1_1CallBase.html#ab2caa29167597390ab2fc3cf30d70389">getArgOperand</a>(0) == II-&gt;<a class="code" href="classllvm_1_1CallBase.html#ab2caa29167597390ab2fc3cf30d70389">getArgOperand</a>(1)) {</div>
<div class="line"><a name="l03348"></a><span class="lineno"> 3348</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *RotAmtC;</div>
<div class="line"><a name="l03349"></a><span class="lineno"> 3349</span>&#160;      <span class="comment">// ror(X, RotAmtC) == C --&gt; X == rol(C, RotAmtC)</span></div>
<div class="line"><a name="l03350"></a><span class="lineno"> 3350</span>&#160;      <span class="comment">// rol(X, RotAmtC) == C --&gt; X == ror(C, RotAmtC)</span></div>
<div class="line"><a name="l03351"></a><span class="lineno"> 3351</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(II-&gt;<a class="code" href="classllvm_1_1CallBase.html#ab2caa29167597390ab2fc3cf30d70389">getArgOperand</a>(2), <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(RotAmtC)))</div>
<div class="line"><a name="l03352"></a><span class="lineno"> 3352</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, II-&gt;<a class="code" href="classllvm_1_1CallBase.html#ab2caa29167597390ab2fc3cf30d70389">getArgOperand</a>(0),</div>
<div class="line"><a name="l03353"></a><span class="lineno"> 3353</span>&#160;                            II-&gt;<a class="code" href="classllvm_1_1IntrinsicInst.html#a7ff64b3625b6f9020556ed05a5f72af4">getIntrinsicID</a>() == Intrinsic::fshl</div>
<div class="line"><a name="l03354"></a><span class="lineno"> 3354</span>&#160;                                ? <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Ty, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.rotr(*RotAmtC))</div>
<div class="line"><a name="l03355"></a><span class="lineno"> 3355</span>&#160;                                : <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Ty, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.rotl(*RotAmtC)));</div>
<div class="line"><a name="l03356"></a><span class="lineno"> 3356</span>&#160;    }</div>
<div class="line"><a name="l03357"></a><span class="lineno"> 3357</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03358"></a><span class="lineno"> 3358</span>&#160; </div>
<div class="line"><a name="l03359"></a><span class="lineno"> 3359</span>&#160;  <span class="keywordflow">case</span> Intrinsic::uadd_sat: {</div>
<div class="line"><a name="l03360"></a><span class="lineno"> 3360</span>&#160;    <span class="comment">// uadd.sat(a, b) == 0  -&gt;  (a | b) == 0</span></div>
<div class="line"><a name="l03361"></a><span class="lineno"> 3361</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.isZero()) {</div>
<div class="line"><a name="l03362"></a><span class="lineno"> 3362</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830ea3a2d5fe857d8f9541136a124c2edec6c">Or</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateOr(II-&gt;<a class="code" href="classllvm_1_1CallBase.html#ab2caa29167597390ab2fc3cf30d70389">getArgOperand</a>(0), II-&gt;<a class="code" href="classllvm_1_1CallBase.html#ab2caa29167597390ab2fc3cf30d70389">getArgOperand</a>(1));</div>
<div class="line"><a name="l03363"></a><span class="lineno"> 3363</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, <a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830ea3a2d5fe857d8f9541136a124c2edec6c">Or</a>, <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(Ty));</div>
<div class="line"><a name="l03364"></a><span class="lineno"> 3364</span>&#160;    }</div>
<div class="line"><a name="l03365"></a><span class="lineno"> 3365</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03366"></a><span class="lineno"> 3366</span>&#160;  }</div>
<div class="line"><a name="l03367"></a><span class="lineno"> 3367</span>&#160; </div>
<div class="line"><a name="l03368"></a><span class="lineno"> 3368</span>&#160;  <span class="keywordflow">case</span> Intrinsic::usub_sat: {</div>
<div class="line"><a name="l03369"></a><span class="lineno"> 3369</span>&#160;    <span class="comment">// usub.sat(a, b) == 0  -&gt;  a &lt;= b</span></div>
<div class="line"><a name="l03370"></a><span class="lineno"> 3370</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.isZero()) {</div>
<div class="line"><a name="l03371"></a><span class="lineno"> 3371</span>&#160;      <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">ICmpInst::Predicate</a> NewPred =</div>
<div class="line"><a name="l03372"></a><span class="lineno"> 3372</span>&#160;          Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a> ? <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bad92f160316221fd4090520bb2b3cefc5">ICmpInst::ICMP_ULE</a> : <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba607cecdc5172814382033e001ed11fad">ICmpInst::ICMP_UGT</a>;</div>
<div class="line"><a name="l03373"></a><span class="lineno"> 3373</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(NewPred, II-&gt;<a class="code" href="classllvm_1_1CallBase.html#ab2caa29167597390ab2fc3cf30d70389">getArgOperand</a>(0), II-&gt;<a class="code" href="classllvm_1_1CallBase.html#ab2caa29167597390ab2fc3cf30d70389">getArgOperand</a>(1));</div>
<div class="line"><a name="l03374"></a><span class="lineno"> 3374</span>&#160;    }</div>
<div class="line"><a name="l03375"></a><span class="lineno"> 3375</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03376"></a><span class="lineno"> 3376</span>&#160;  }</div>
<div class="line"><a name="l03377"></a><span class="lineno"> 3377</span>&#160;  <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l03378"></a><span class="lineno"> 3378</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03379"></a><span class="lineno"> 3379</span>&#160;  }</div>
<div class="line"><a name="l03380"></a><span class="lineno"> 3380</span>&#160; </div>
<div class="line"><a name="l03381"></a><span class="lineno"> 3381</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l03382"></a><span class="lineno"> 3382</span>&#160;}</div>
<div class="line"><a name="l03383"></a><span class="lineno"> 3383</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l03384"></a><span class="lineno"> 3384</span>&#160;<span class="comment">/// Fold an icmp with LLVM intrinsics</span></div>
<div class="line"><a name="l03385"></a><span class="lineno"><a class="line" href="InstCombineCompares_8cpp.html#a257335da07186a947a2e4d3a9dd85207"> 3385</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="InstCombineCompares_8cpp.html#a257335da07186a947a2e4d3a9dd85207">foldICmpIntrinsicWithIntrinsic</a>(<a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> &amp;Cmp) {</div>
<div class="line"><a name="l03386"></a><span class="lineno"> 3386</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Cmp.isEquality());</div>
<div class="line"><a name="l03387"></a><span class="lineno"> 3387</span>&#160; </div>
<div class="line"><a name="l03388"></a><span class="lineno"> 3388</span>&#160;  <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">ICmpInst::Predicate</a> Pred = Cmp.getPredicate();</div>
<div class="line"><a name="l03389"></a><span class="lineno"> 3389</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Op0 = Cmp.getOperand(0);</div>
<div class="line"><a name="l03390"></a><span class="lineno"> 3390</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Op1 = Cmp.getOperand(1);</div>
<div class="line"><a name="l03391"></a><span class="lineno"> 3391</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span> *IIOp0 = dyn_cast&lt;IntrinsicInst&gt;(Op0);</div>
<div class="line"><a name="l03392"></a><span class="lineno"> 3392</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span> *IIOp1 = dyn_cast&lt;IntrinsicInst&gt;(Op1);</div>
<div class="line"><a name="l03393"></a><span class="lineno"> 3393</span>&#160;  <span class="keywordflow">if</span> (!IIOp0 || !IIOp1 || IIOp0-&gt;getIntrinsicID() != IIOp1-&gt;getIntrinsicID())</div>
<div class="line"><a name="l03394"></a><span class="lineno"> 3394</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l03395"></a><span class="lineno"> 3395</span>&#160; </div>
<div class="line"><a name="l03396"></a><span class="lineno"> 3396</span>&#160;  <span class="keywordflow">switch</span> (IIOp0-&gt;getIntrinsicID()) {</div>
<div class="line"><a name="l03397"></a><span class="lineno"> 3397</span>&#160;  <span class="keywordflow">case</span> Intrinsic::bswap:</div>
<div class="line"><a name="l03398"></a><span class="lineno"> 3398</span>&#160;  <span class="keywordflow">case</span> Intrinsic::bitreverse:</div>
<div class="line"><a name="l03399"></a><span class="lineno"> 3399</span>&#160;    <span class="comment">// If both operands are byte-swapped or bit-reversed, just compare the</span></div>
<div class="line"><a name="l03400"></a><span class="lineno"> 3400</span>&#160;    <span class="comment">// original values.</span></div>
<div class="line"><a name="l03401"></a><span class="lineno"> 3401</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, IIOp0-&gt;getOperand(0), IIOp1-&gt;getOperand(0));</div>
<div class="line"><a name="l03402"></a><span class="lineno"> 3402</span>&#160;  <span class="keywordflow">case</span> Intrinsic::fshl:</div>
<div class="line"><a name="l03403"></a><span class="lineno"> 3403</span>&#160;  <span class="keywordflow">case</span> Intrinsic::fshr:</div>
<div class="line"><a name="l03404"></a><span class="lineno"> 3404</span>&#160;    <span class="comment">// If both operands are rotated by same amount, just compare the</span></div>
<div class="line"><a name="l03405"></a><span class="lineno"> 3405</span>&#160;    <span class="comment">// original values.</span></div>
<div class="line"><a name="l03406"></a><span class="lineno"> 3406</span>&#160;    <span class="keywordflow">if</span> (IIOp0-&gt;getOperand(0) != IIOp0-&gt;getOperand(1))</div>
<div class="line"><a name="l03407"></a><span class="lineno"> 3407</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03408"></a><span class="lineno"> 3408</span>&#160;    <span class="keywordflow">if</span> (IIOp1-&gt;getOperand(0) != IIOp1-&gt;getOperand(1))</div>
<div class="line"><a name="l03409"></a><span class="lineno"> 3409</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03410"></a><span class="lineno"> 3410</span>&#160;    <span class="keywordflow">if</span> (IIOp0-&gt;getOperand(2) != IIOp1-&gt;getOperand(2))</div>
<div class="line"><a name="l03411"></a><span class="lineno"> 3411</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03412"></a><span class="lineno"> 3412</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, IIOp0-&gt;getOperand(0), IIOp1-&gt;getOperand(0));</div>
<div class="line"><a name="l03413"></a><span class="lineno"> 3413</span>&#160;  <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l03414"></a><span class="lineno"> 3414</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03415"></a><span class="lineno"> 3415</span>&#160;  }</div>
<div class="line"><a name="l03416"></a><span class="lineno"> 3416</span>&#160; </div>
<div class="line"><a name="l03417"></a><span class="lineno"> 3417</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l03418"></a><span class="lineno"> 3418</span>&#160;}</div>
<div class="line"><a name="l03419"></a><span class="lineno"> 3419</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l03420"></a><span class="lineno"> 3420</span>&#160;<span class="comment">/// Try to fold integer comparisons with a constant operand: icmp Pred X, C</span></div>
<div class="line"><a name="l03421"></a><span class="lineno"> 3421</span>&#160;<span class="comment">/// where X is some kind of instruction and C is AllowUndef.</span></div>
<div class="line"><a name="l03422"></a><span class="lineno"> 3422</span>&#160;<span class="comment">/// TODO: Move more folds which allow undef to this function.</span></div>
<div class="line"><a name="l03423"></a><span class="lineno"> 3423</span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *</div>
<div class="line"><a name="l03424"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombinerImpl.html#a676411f28657ced572f5b8030254af13"> 3424</a></span>&#160;<a class="code" href="classllvm_1_1InstCombinerImpl.html#a676411f28657ced572f5b8030254af13">InstCombinerImpl::foldICmpInstWithConstantAllowUndef</a>(<a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> &amp;Cmp,</div>
<div class="line"><a name="l03425"></a><span class="lineno"> 3425</span>&#160;                                                     <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> &amp;<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>) {</div>
<div class="line"><a name="l03426"></a><span class="lineno"> 3426</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">ICmpInst::Predicate</a> Pred = Cmp.getPredicate();</div>
<div class="line"><a name="l03427"></a><span class="lineno"> 3427</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *II = dyn_cast&lt;IntrinsicInst&gt;(Cmp.getOperand(0))) {</div>
<div class="line"><a name="l03428"></a><span class="lineno"> 3428</span>&#160;    <span class="keywordflow">switch</span> (II-&gt;getIntrinsicID()) {</div>
<div class="line"><a name="l03429"></a><span class="lineno"> 3429</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l03430"></a><span class="lineno"> 3430</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03431"></a><span class="lineno"> 3431</span>&#160;    <span class="keywordflow">case</span> Intrinsic::fshl:</div>
<div class="line"><a name="l03432"></a><span class="lineno"> 3432</span>&#160;    <span class="keywordflow">case</span> Intrinsic::fshr:</div>
<div class="line"><a name="l03433"></a><span class="lineno"> 3433</span>&#160;      <span class="keywordflow">if</span> (Cmp.isEquality() &amp;&amp; II-&gt;getArgOperand(0) == II-&gt;getArgOperand(1)) {</div>
<div class="line"><a name="l03434"></a><span class="lineno"> 3434</span>&#160;        <span class="comment">// (rot X, ?) == 0/-1 --&gt; X == 0/-1</span></div>
<div class="line"><a name="l03435"></a><span class="lineno"> 3435</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.isZero() || <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.isAllOnes())</div>
<div class="line"><a name="l03436"></a><span class="lineno"> 3436</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, II-&gt;getArgOperand(0), Cmp.getOperand(1));</div>
<div class="line"><a name="l03437"></a><span class="lineno"> 3437</span>&#160;      }</div>
<div class="line"><a name="l03438"></a><span class="lineno"> 3438</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03439"></a><span class="lineno"> 3439</span>&#160;    }</div>
<div class="line"><a name="l03440"></a><span class="lineno"> 3440</span>&#160;  }</div>
<div class="line"><a name="l03441"></a><span class="lineno"> 3441</span>&#160; </div>
<div class="line"><a name="l03442"></a><span class="lineno"> 3442</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l03443"></a><span class="lineno"> 3443</span>&#160;}</div>
<div class="line"><a name="l03444"></a><span class="lineno"> 3444</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l03445"></a><span class="lineno"> 3445</span>&#160;<span class="comment">/// Fold an icmp with BinaryOp and constant operand: icmp Pred BO, C.</span></div>
<div class="line"><a name="l03446"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombinerImpl.html#a10cb0815e46ca2e42c7c40205f77277a"> 3446</a></span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombinerImpl.html#a10cb0815e46ca2e42c7c40205f77277a">InstCombinerImpl::foldICmpBinOpWithConstant</a>(<a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> &amp;Cmp,</div>
<div class="line"><a name="l03447"></a><span class="lineno"> 3447</span>&#160;                                                         <a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> *BO,</div>
<div class="line"><a name="l03448"></a><span class="lineno"> 3448</span>&#160;                                                         <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> &amp;<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>) {</div>
<div class="line"><a name="l03449"></a><span class="lineno"> 3449</span>&#160;  <span class="keywordflow">switch</span> (BO-&gt;<a class="code" href="classllvm_1_1BinaryOperator.html#a31bf07f3f61525486633bc1d0bbaf029">getOpcode</a>()) {</div>
<div class="line"><a name="l03450"></a><span class="lineno"> 3450</span>&#160;  <span class="keywordflow">case</span> Instruction::Xor:</div>
<div class="line"><a name="l03451"></a><span class="lineno"> 3451</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = foldICmpXorConstant(Cmp, BO, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>))</div>
<div class="line"><a name="l03452"></a><span class="lineno"> 3452</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l03453"></a><span class="lineno"> 3453</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03454"></a><span class="lineno"> 3454</span>&#160;  <span class="keywordflow">case</span> Instruction::And:</div>
<div class="line"><a name="l03455"></a><span class="lineno"> 3455</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = foldICmpAndConstant(Cmp, BO, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>))</div>
<div class="line"><a name="l03456"></a><span class="lineno"> 3456</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l03457"></a><span class="lineno"> 3457</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03458"></a><span class="lineno"> 3458</span>&#160;  <span class="keywordflow">case</span> Instruction::Or:</div>
<div class="line"><a name="l03459"></a><span class="lineno"> 3459</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = foldICmpOrConstant(Cmp, BO, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>))</div>
<div class="line"><a name="l03460"></a><span class="lineno"> 3460</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l03461"></a><span class="lineno"> 3461</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03462"></a><span class="lineno"> 3462</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="X86PartialReduction_8cpp.html#ae0f503db91504a3f3440ab81260e4134">Instruction::Mul</a>:</div>
<div class="line"><a name="l03463"></a><span class="lineno"> 3463</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = foldICmpMulConstant(Cmp, BO, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>))</div>
<div class="line"><a name="l03464"></a><span class="lineno"> 3464</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l03465"></a><span class="lineno"> 3465</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03466"></a><span class="lineno"> 3466</span>&#160;  <span class="keywordflow">case</span> Instruction::Shl:</div>
<div class="line"><a name="l03467"></a><span class="lineno"> 3467</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = foldICmpShlConstant(Cmp, BO, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>))</div>
<div class="line"><a name="l03468"></a><span class="lineno"> 3468</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l03469"></a><span class="lineno"> 3469</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03470"></a><span class="lineno"> 3470</span>&#160;  <span class="keywordflow">case</span> Instruction::LShr:</div>
<div class="line"><a name="l03471"></a><span class="lineno"> 3471</span>&#160;  <span class="keywordflow">case</span> Instruction::AShr:</div>
<div class="line"><a name="l03472"></a><span class="lineno"> 3472</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = foldICmpShrConstant(Cmp, BO, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>))</div>
<div class="line"><a name="l03473"></a><span class="lineno"> 3473</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l03474"></a><span class="lineno"> 3474</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03475"></a><span class="lineno"> 3475</span>&#160;  <span class="keywordflow">case</span> Instruction::SRem:</div>
<div class="line"><a name="l03476"></a><span class="lineno"> 3476</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = foldICmpSRemConstant(Cmp, BO, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>))</div>
<div class="line"><a name="l03477"></a><span class="lineno"> 3477</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l03478"></a><span class="lineno"> 3478</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03479"></a><span class="lineno"> 3479</span>&#160;  <span class="keywordflow">case</span> Instruction::UDiv:</div>
<div class="line"><a name="l03480"></a><span class="lineno"> 3480</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = foldICmpUDivConstant(Cmp, BO, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>))</div>
<div class="line"><a name="l03481"></a><span class="lineno"> 3481</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l03482"></a><span class="lineno"> 3482</span>&#160;    [[fallthrough]];</div>
<div class="line"><a name="l03483"></a><span class="lineno"> 3483</span>&#160;  <span class="keywordflow">case</span> Instruction::SDiv:</div>
<div class="line"><a name="l03484"></a><span class="lineno"> 3484</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = foldICmpDivConstant(Cmp, BO, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>))</div>
<div class="line"><a name="l03485"></a><span class="lineno"> 3485</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l03486"></a><span class="lineno"> 3486</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03487"></a><span class="lineno"> 3487</span>&#160;  <span class="keywordflow">case</span> Instruction::Sub:</div>
<div class="line"><a name="l03488"></a><span class="lineno"> 3488</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = foldICmpSubConstant(Cmp, BO, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>))</div>
<div class="line"><a name="l03489"></a><span class="lineno"> 3489</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l03490"></a><span class="lineno"> 3490</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03491"></a><span class="lineno"> 3491</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a2b016c207343046b2bac45e69e76dcec">Instruction::Add</a>:</div>
<div class="line"><a name="l03492"></a><span class="lineno"> 3492</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = foldICmpAddConstant(Cmp, BO, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>))</div>
<div class="line"><a name="l03493"></a><span class="lineno"> 3493</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l03494"></a><span class="lineno"> 3494</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03495"></a><span class="lineno"> 3495</span>&#160;  <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l03496"></a><span class="lineno"> 3496</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03497"></a><span class="lineno"> 3497</span>&#160;  }</div>
<div class="line"><a name="l03498"></a><span class="lineno"> 3498</span>&#160; </div>
<div class="line"><a name="l03499"></a><span class="lineno"> 3499</span>&#160;  <span class="comment">// TODO: These folds could be refactored to be part of the above calls.</span></div>
<div class="line"><a name="l03500"></a><span class="lineno"> 3500</span>&#160;  <span class="keywordflow">return</span> foldICmpBinOpEqualityWithConstant(Cmp, BO, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div>
<div class="line"><a name="l03501"></a><span class="lineno"> 3501</span>&#160;}</div>
<div class="line"><a name="l03502"></a><span class="lineno"> 3502</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l03503"></a><span class="lineno"> 3503</span>&#160;<span class="comment">/// Fold an icmp with LLVM intrinsic and constant operand: icmp Pred II, C.</span></div>
<div class="line"><a name="l03504"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombinerImpl.html#a7df35aaa0732f4b23e5458034a2c29d1"> 3504</a></span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombinerImpl.html#a7df35aaa0732f4b23e5458034a2c29d1">InstCombinerImpl::foldICmpIntrinsicWithConstant</a>(<a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> &amp;Cmp,</div>
<div class="line"><a name="l03505"></a><span class="lineno"> 3505</span>&#160;                                                             <a class="code" href="classllvm_1_1IntrinsicInst.html">IntrinsicInst</a> *II,</div>
<div class="line"><a name="l03506"></a><span class="lineno"> 3506</span>&#160;                                                             <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> &amp;<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>) {</div>
<div class="line"><a name="l03507"></a><span class="lineno"> 3507</span>&#160;  <span class="keywordflow">if</span> (Cmp.isEquality())</div>
<div class="line"><a name="l03508"></a><span class="lineno"> 3508</span>&#160;    <span class="keywordflow">return</span> foldICmpEqIntrinsicWithConstant(Cmp, II, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div>
<div class="line"><a name="l03509"></a><span class="lineno"> 3509</span>&#160; </div>
<div class="line"><a name="l03510"></a><span class="lineno"> 3510</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *Ty = II-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>();</div>
<div class="line"><a name="l03511"></a><span class="lineno"> 3511</span>&#160;  <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm.html#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a> = <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.getBitWidth();</div>
<div class="line"><a name="l03512"></a><span class="lineno"> 3512</span>&#160;  <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">ICmpInst::Predicate</a> Pred = Cmp.getPredicate();</div>
<div class="line"><a name="l03513"></a><span class="lineno"> 3513</span>&#160;  <span class="keywordflow">switch</span> (II-&gt;<a class="code" href="classllvm_1_1IntrinsicInst.html#a7ff64b3625b6f9020556ed05a5f72af4">getIntrinsicID</a>()) {</div>
<div class="line"><a name="l03514"></a><span class="lineno"> 3514</span>&#160;  <span class="keywordflow">case</span> Intrinsic::ctpop: {</div>
<div class="line"><a name="l03515"></a><span class="lineno"> 3515</span>&#160;    <span class="comment">// (ctpop X &gt; BitWidth - 1) --&gt; X == -1</span></div>
<div class="line"><a name="l03516"></a><span class="lineno"> 3516</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a> = II-&gt;<a class="code" href="classllvm_1_1CallBase.html#ab2caa29167597390ab2fc3cf30d70389">getArgOperand</a>(0);</div>
<div class="line"><a name="l03517"></a><span class="lineno"> 3517</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> == <a class="code" href="namespacellvm.html#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a> - 1 &amp;&amp; Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba607cecdc5172814382033e001ed11fad">ICmpInst::ICMP_UGT</a>)</div>
<div class="line"><a name="l03518"></a><span class="lineno"> 3518</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1CmpInst.html#a3b4a54b076454fec43b13554b28252a9">CmpInst::Create</a>(Instruction::ICmp, <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a>, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>,</div>
<div class="line"><a name="l03519"></a><span class="lineno"> 3519</span>&#160;                             <a class="code" href="classllvm_1_1Constant.html#a4d51384de6e1798bb6aa875aebeea9f0">ConstantInt::getAllOnesValue</a>(Ty));</div>
<div class="line"><a name="l03520"></a><span class="lineno"> 3520</span>&#160;    <span class="comment">// (ctpop X &lt; BitWidth) --&gt; X != -1</span></div>
<div class="line"><a name="l03521"></a><span class="lineno"> 3521</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> == <a class="code" href="namespacellvm.html#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a> &amp;&amp; Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e">ICmpInst::ICMP_ULT</a>)</div>
<div class="line"><a name="l03522"></a><span class="lineno"> 3522</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1CmpInst.html#a3b4a54b076454fec43b13554b28252a9">CmpInst::Create</a>(Instruction::ICmp, <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a>, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>,</div>
<div class="line"><a name="l03523"></a><span class="lineno"> 3523</span>&#160;                             <a class="code" href="classllvm_1_1Constant.html#a4d51384de6e1798bb6aa875aebeea9f0">ConstantInt::getAllOnesValue</a>(Ty));</div>
<div class="line"><a name="l03524"></a><span class="lineno"> 3524</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03525"></a><span class="lineno"> 3525</span>&#160;  }</div>
<div class="line"><a name="l03526"></a><span class="lineno"> 3526</span>&#160;  <span class="keywordflow">case</span> Intrinsic::ctlz: {</div>
<div class="line"><a name="l03527"></a><span class="lineno"> 3527</span>&#160;    <span class="comment">// ctlz(0bXXXXXXXX) &gt; 3 -&gt; 0bXXXXXXXX &lt; 0b00010000</span></div>
<div class="line"><a name="l03528"></a><span class="lineno"> 3528</span>&#160;    <span class="keywordflow">if</span> (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba607cecdc5172814382033e001ed11fad">ICmpInst::ICMP_UGT</a> &amp;&amp; <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.ult(<a class="code" href="namespacellvm.html#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a>)) {</div>
<div class="line"><a name="l03529"></a><span class="lineno"> 3529</span>&#160;      <span class="keywordtype">unsigned</span> Num = <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.getLimitedValue();</div>
<div class="line"><a name="l03530"></a><span class="lineno"> 3530</span>&#160;      <a class="code" href="classllvm_1_1APInt.html">APInt</a> Limit = <a class="code" href="classllvm_1_1APInt.html#aec662ee6ab1490a4cabebf2812e5b9ca">APInt::getOneBitSet</a>(<a class="code" href="namespacellvm.html#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a>, <a class="code" href="namespacellvm.html#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a> - Num - 1);</div>
<div class="line"><a name="l03531"></a><span class="lineno"> 3531</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1CmpInst.html#a3b4a54b076454fec43b13554b28252a9">CmpInst::Create</a>(Instruction::ICmp, <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e">ICmpInst::ICMP_ULT</a>,</div>
<div class="line"><a name="l03532"></a><span class="lineno"> 3532</span>&#160;                             II-&gt;<a class="code" href="classllvm_1_1CallBase.html#ab2caa29167597390ab2fc3cf30d70389">getArgOperand</a>(0), <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Ty, Limit));</div>
<div class="line"><a name="l03533"></a><span class="lineno"> 3533</span>&#160;    }</div>
<div class="line"><a name="l03534"></a><span class="lineno"> 3534</span>&#160; </div>
<div class="line"><a name="l03535"></a><span class="lineno"> 3535</span>&#160;    <span class="comment">// ctlz(0bXXXXXXXX) &lt; 3 -&gt; 0bXXXXXXXX &gt; 0b00011111</span></div>
<div class="line"><a name="l03536"></a><span class="lineno"> 3536</span>&#160;    <span class="keywordflow">if</span> (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e">ICmpInst::ICMP_ULT</a> &amp;&amp; <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.uge(1) &amp;&amp; <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.ule(<a class="code" href="namespacellvm.html#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a>)) {</div>
<div class="line"><a name="l03537"></a><span class="lineno"> 3537</span>&#160;      <span class="keywordtype">unsigned</span> Num = <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.getLimitedValue();</div>
<div class="line"><a name="l03538"></a><span class="lineno"> 3538</span>&#160;      <a class="code" href="classllvm_1_1APInt.html">APInt</a> Limit = <a class="code" href="classllvm_1_1APInt.html#ad960e1ff48d25c382b6d28e7961f074e">APInt::getLowBitsSet</a>(<a class="code" href="namespacellvm.html#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a>, <a class="code" href="namespacellvm.html#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a> - Num);</div>
<div class="line"><a name="l03539"></a><span class="lineno"> 3539</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1CmpInst.html#a3b4a54b076454fec43b13554b28252a9">CmpInst::Create</a>(Instruction::ICmp, <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba607cecdc5172814382033e001ed11fad">ICmpInst::ICMP_UGT</a>,</div>
<div class="line"><a name="l03540"></a><span class="lineno"> 3540</span>&#160;                             II-&gt;<a class="code" href="classllvm_1_1CallBase.html#ab2caa29167597390ab2fc3cf30d70389">getArgOperand</a>(0), <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Ty, Limit));</div>
<div class="line"><a name="l03541"></a><span class="lineno"> 3541</span>&#160;    }</div>
<div class="line"><a name="l03542"></a><span class="lineno"> 3542</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03543"></a><span class="lineno"> 3543</span>&#160;  }</div>
<div class="line"><a name="l03544"></a><span class="lineno"> 3544</span>&#160;  <span class="keywordflow">case</span> Intrinsic::cttz: {</div>
<div class="line"><a name="l03545"></a><span class="lineno"> 3545</span>&#160;    <span class="comment">// Limit to one use to ensure we don&#39;t increase instruction count.</span></div>
<div class="line"><a name="l03546"></a><span class="lineno"> 3546</span>&#160;    <span class="keywordflow">if</span> (!II-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>())</div>
<div class="line"><a name="l03547"></a><span class="lineno"> 3547</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l03548"></a><span class="lineno"> 3548</span>&#160; </div>
<div class="line"><a name="l03549"></a><span class="lineno"> 3549</span>&#160;    <span class="comment">// cttz(0bXXXXXXXX) &gt; 3 -&gt; 0bXXXXXXXX &amp; 0b00001111 == 0</span></div>
<div class="line"><a name="l03550"></a><span class="lineno"> 3550</span>&#160;    <span class="keywordflow">if</span> (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba607cecdc5172814382033e001ed11fad">ICmpInst::ICMP_UGT</a> &amp;&amp; <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.ult(<a class="code" href="namespacellvm.html#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a>)) {</div>
<div class="line"><a name="l03551"></a><span class="lineno"> 3551</span>&#160;      <a class="code" href="classllvm_1_1APInt.html">APInt</a> <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a> = <a class="code" href="classllvm_1_1APInt.html#ad960e1ff48d25c382b6d28e7961f074e">APInt::getLowBitsSet</a>(<a class="code" href="namespacellvm.html#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a>, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.getLimitedValue() + 1);</div>
<div class="line"><a name="l03552"></a><span class="lineno"> 3552</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1CmpInst.html#a3b4a54b076454fec43b13554b28252a9">CmpInst::Create</a>(Instruction::ICmp, <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a>,</div>
<div class="line"><a name="l03553"></a><span class="lineno"> 3553</span>&#160;                             <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAnd(II-&gt;<a class="code" href="classllvm_1_1CallBase.html#ab2caa29167597390ab2fc3cf30d70389">getArgOperand</a>(0), <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a>),</div>
<div class="line"><a name="l03554"></a><span class="lineno"> 3554</span>&#160;                             <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">ConstantInt::getNullValue</a>(Ty));</div>
<div class="line"><a name="l03555"></a><span class="lineno"> 3555</span>&#160;    }</div>
<div class="line"><a name="l03556"></a><span class="lineno"> 3556</span>&#160; </div>
<div class="line"><a name="l03557"></a><span class="lineno"> 3557</span>&#160;    <span class="comment">// cttz(0bXXXXXXXX) &lt; 3 -&gt; 0bXXXXXXXX &amp; 0b00000111 != 0</span></div>
<div class="line"><a name="l03558"></a><span class="lineno"> 3558</span>&#160;    <span class="keywordflow">if</span> (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e">ICmpInst::ICMP_ULT</a> &amp;&amp; <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.uge(1) &amp;&amp; <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.ule(<a class="code" href="namespacellvm.html#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a>)) {</div>
<div class="line"><a name="l03559"></a><span class="lineno"> 3559</span>&#160;      <a class="code" href="classllvm_1_1APInt.html">APInt</a> <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a> = <a class="code" href="classllvm_1_1APInt.html#ad960e1ff48d25c382b6d28e7961f074e">APInt::getLowBitsSet</a>(<a class="code" href="namespacellvm.html#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a>, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.getLimitedValue());</div>
<div class="line"><a name="l03560"></a><span class="lineno"> 3560</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1CmpInst.html#a3b4a54b076454fec43b13554b28252a9">CmpInst::Create</a>(Instruction::ICmp, <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a>,</div>
<div class="line"><a name="l03561"></a><span class="lineno"> 3561</span>&#160;                             <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAnd(II-&gt;<a class="code" href="classllvm_1_1CallBase.html#ab2caa29167597390ab2fc3cf30d70389">getArgOperand</a>(0), <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a>),</div>
<div class="line"><a name="l03562"></a><span class="lineno"> 3562</span>&#160;                             <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">ConstantInt::getNullValue</a>(Ty));</div>
<div class="line"><a name="l03563"></a><span class="lineno"> 3563</span>&#160;    }</div>
<div class="line"><a name="l03564"></a><span class="lineno"> 3564</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03565"></a><span class="lineno"> 3565</span>&#160;  }</div>
<div class="line"><a name="l03566"></a><span class="lineno"> 3566</span>&#160;  <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l03567"></a><span class="lineno"> 3567</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03568"></a><span class="lineno"> 3568</span>&#160;  }</div>
<div class="line"><a name="l03569"></a><span class="lineno"> 3569</span>&#160; </div>
<div class="line"><a name="l03570"></a><span class="lineno"> 3570</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l03571"></a><span class="lineno"> 3571</span>&#160;}</div>
<div class="line"><a name="l03572"></a><span class="lineno"> 3572</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l03573"></a><span class="lineno"> 3573</span>&#160;<span class="comment">/// Handle icmp with constant (but not simple integer constant) RHS.</span></div>
<div class="line"><a name="l03574"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombinerImpl.html#a3d58c11c9787c2764e5f11bb127ced00"> 3574</a></span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombinerImpl.html#a3d58c11c9787c2764e5f11bb127ced00">InstCombinerImpl::foldICmpInstWithConstantNotInt</a>(<a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l03575"></a><span class="lineno"> 3575</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Op0 = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(0), *Op1 = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(1);</div>
<div class="line"><a name="l03576"></a><span class="lineno"> 3576</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *RHSC = dyn_cast&lt;Constant&gt;(Op1);</div>
<div class="line"><a name="l03577"></a><span class="lineno"> 3577</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *LHSI = dyn_cast&lt;Instruction&gt;(Op0);</div>
<div class="line"><a name="l03578"></a><span class="lineno"> 3578</span>&#160;  <span class="keywordflow">if</span> (!RHSC || !LHSI)</div>
<div class="line"><a name="l03579"></a><span class="lineno"> 3579</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l03580"></a><span class="lineno"> 3580</span>&#160; </div>
<div class="line"><a name="l03581"></a><span class="lineno"> 3581</span>&#160;  <span class="keywordflow">switch</span> (LHSI-&gt;<a class="code" href="classllvm_1_1Instruction.html#ab4e05d690df389b8b1477c90387b575f">getOpcode</a>()) {</div>
<div class="line"><a name="l03582"></a><span class="lineno"> 3582</span>&#160;  <span class="keywordflow">case</span> Instruction::GetElementPtr:</div>
<div class="line"><a name="l03583"></a><span class="lineno"> 3583</span>&#160;    <span class="comment">// icmp pred GEP (P, int 0, int 0, int 0), null -&gt; icmp pred P, null</span></div>
<div class="line"><a name="l03584"></a><span class="lineno"> 3584</span>&#160;    <span class="keywordflow">if</span> (RHSC-&gt;<a class="code" href="classllvm_1_1Constant.html#ae4b6abe77abf42fb02081a6cc41a0132">isNullValue</a>() &amp;&amp;</div>
<div class="line"><a name="l03585"></a><span class="lineno"> 3585</span>&#160;        cast&lt;GetElementPtrInst&gt;(LHSI)-&gt;hasAllZeroIndices())</div>
<div class="line"><a name="l03586"></a><span class="lineno"> 3586</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(</div>
<div class="line"><a name="l03587"></a><span class="lineno"> 3587</span>&#160;          <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getPredicate(), LHSI-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0),</div>
<div class="line"><a name="l03588"></a><span class="lineno"> 3588</span>&#160;          <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(LHSI-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0)-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()));</div>
<div class="line"><a name="l03589"></a><span class="lineno"> 3589</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03590"></a><span class="lineno"> 3590</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">Instruction::PHI</a>:</div>
<div class="line"><a name="l03591"></a><span class="lineno"> 3591</span>&#160;    <span class="comment">// Only fold icmp into the PHI if the phi and icmp are in the same</span></div>
<div class="line"><a name="l03592"></a><span class="lineno"> 3592</span>&#160;    <span class="comment">// block.  If in the same block, we&#39;re encouraging jump threading.  If</span></div>
<div class="line"><a name="l03593"></a><span class="lineno"> 3593</span>&#160;    <span class="comment">// not, we are just pessimizing the code by making an i1 phi.</span></div>
<div class="line"><a name="l03594"></a><span class="lineno"> 3594</span>&#160;    <span class="keywordflow">if</span> (LHSI-&gt;<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>() == <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getParent())</div>
<div class="line"><a name="l03595"></a><span class="lineno"> 3595</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="namespacellvm_1_1ore.html#a8f5533240c6722d987a2443cba42019d">NV</a> = foldOpIntoPhi(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, cast&lt;PHINode&gt;(LHSI)))</div>
<div class="line"><a name="l03596"></a><span class="lineno"> 3596</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1ore.html#a8f5533240c6722d987a2443cba42019d">NV</a>;</div>
<div class="line"><a name="l03597"></a><span class="lineno"> 3597</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03598"></a><span class="lineno"> 3598</span>&#160;  <span class="keywordflow">case</span> Instruction::IntToPtr:</div>
<div class="line"><a name="l03599"></a><span class="lineno"> 3599</span>&#160;    <span class="comment">// icmp pred inttoptr(X), null -&gt; icmp pred X, 0</span></div>
<div class="line"><a name="l03600"></a><span class="lineno"> 3600</span>&#160;    <span class="keywordflow">if</span> (RHSC-&gt;<a class="code" href="classllvm_1_1Constant.html#ae4b6abe77abf42fb02081a6cc41a0132">isNullValue</a>() &amp;&amp;</div>
<div class="line"><a name="l03601"></a><span class="lineno"> 3601</span>&#160;        <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getIntPtrType(RHSC-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()) == LHSI-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0)-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>())</div>
<div class="line"><a name="l03602"></a><span class="lineno"> 3602</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(</div>
<div class="line"><a name="l03603"></a><span class="lineno"> 3603</span>&#160;          <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getPredicate(), LHSI-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0),</div>
<div class="line"><a name="l03604"></a><span class="lineno"> 3604</span>&#160;          <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(LHSI-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0)-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()));</div>
<div class="line"><a name="l03605"></a><span class="lineno"> 3605</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03606"></a><span class="lineno"> 3606</span>&#160; </div>
<div class="line"><a name="l03607"></a><span class="lineno"> 3607</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1SPII.html#a1c7202c6054fef862bbed45957747cdfa5069619ca8fdce305534f3fe85091a0f">Instruction::Load</a>:</div>
<div class="line"><a name="l03608"></a><span class="lineno"> 3608</span>&#160;    <span class="comment">// Try to optimize things like &quot;A[i] &gt; 4&quot; to index computations.</span></div>
<div class="line"><a name="l03609"></a><span class="lineno"> 3609</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1GetElementPtrInst.html">GetElementPtrInst</a> *<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a> =</div>
<div class="line"><a name="l03610"></a><span class="lineno"> 3610</span>&#160;            dyn_cast&lt;GetElementPtrInst&gt;(LHSI-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0)))</div>
<div class="line"><a name="l03611"></a><span class="lineno"> 3611</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a> *GV = dyn_cast&lt;GlobalVariable&gt;(<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>-&gt;getOperand(0)))</div>
<div class="line"><a name="l03612"></a><span class="lineno"> 3612</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Res =</div>
<div class="line"><a name="l03613"></a><span class="lineno"> 3613</span>&#160;                foldCmpLoadFromIndexedGlobal(cast&lt;LoadInst&gt;(LHSI), <a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>, GV, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l03614"></a><span class="lineno"> 3614</span>&#160;          <span class="keywordflow">return</span> Res;</div>
<div class="line"><a name="l03615"></a><span class="lineno"> 3615</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03616"></a><span class="lineno"> 3616</span>&#160;  }</div>
<div class="line"><a name="l03617"></a><span class="lineno"> 3617</span>&#160; </div>
<div class="line"><a name="l03618"></a><span class="lineno"> 3618</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l03619"></a><span class="lineno"> 3619</span>&#160;}</div>
<div class="line"><a name="l03620"></a><span class="lineno"> 3620</span>&#160; </div>
<div class="line"><a name="l03621"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombinerImpl.html#ae64d6ae438e079f9098564d46d5bae84"> 3621</a></span>&#160;<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombinerImpl.html#ae64d6ae438e079f9098564d46d5bae84">InstCombinerImpl::foldSelectICmp</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">ICmpInst::Predicate</a> Pred,</div>
<div class="line"><a name="l03622"></a><span class="lineno"> 3622</span>&#160;                                              <a class="code" href="classllvm_1_1SelectInst.html">SelectInst</a> *<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>, <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>,</div>
<div class="line"><a name="l03623"></a><span class="lineno"> 3623</span>&#160;                                              <span class="keyword">const</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l03624"></a><span class="lineno"> 3624</span>&#160;  <span class="comment">// Try to fold the comparison into the select arms, which will cause the</span></div>
<div class="line"><a name="l03625"></a><span class="lineno"> 3625</span>&#160;  <span class="comment">// select to be converted into a logical and/or.</span></div>
<div class="line"><a name="l03626"></a><span class="lineno"> 3626</span>&#160;  <span class="keyword">auto</span> SimplifyOp = [&amp;](<a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>, <span class="keywordtype">bool</span> SelectCondIsTrue) -&gt; <a class="code" href="classllvm_1_1Value.html">Value</a> * {</div>
<div class="line"><a name="l03627"></a><span class="lineno"> 3627</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *Res = <a class="code" href="namespacellvm.html#a969e30a11e5b3ac2ad7ab5fcc537d495">simplifyICmpInst</a>(Pred, <a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, SQ))</div>
<div class="line"><a name="l03628"></a><span class="lineno"> 3628</span>&#160;      <span class="keywordflow">return</span> Res;</div>
<div class="line"><a name="l03629"></a><span class="lineno"> 3629</span>&#160;    <span class="keywordflow">if</span> (std::optional&lt;bool&gt; Impl = <a class="code" href="namespacellvm.html#af7f2eb961a542779e97c0b3ec7fa6623">isImpliedCondition</a>(</div>
<div class="line"><a name="l03630"></a><span class="lineno"> 3630</span>&#160;            <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;getCondition(), Pred, <a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, SelectCondIsTrue))</div>
<div class="line"><a name="l03631"></a><span class="lineno"> 3631</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getType(), *Impl);</div>
<div class="line"><a name="l03632"></a><span class="lineno"> 3632</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l03633"></a><span class="lineno"> 3633</span>&#160;  };</div>
<div class="line"><a name="l03634"></a><span class="lineno"> 3634</span>&#160; </div>
<div class="line"><a name="l03635"></a><span class="lineno"> 3635</span>&#160;  <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *CI = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l03636"></a><span class="lineno"> 3636</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Op1 = SimplifyOp(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;getOperand(1), <span class="keyword">true</span>);</div>
<div class="line"><a name="l03637"></a><span class="lineno"> 3637</span>&#160;  <span class="keywordflow">if</span> (Op1)</div>
<div class="line"><a name="l03638"></a><span class="lineno"> 3638</span>&#160;    CI = dyn_cast&lt;ConstantInt&gt;(Op1);</div>
<div class="line"><a name="l03639"></a><span class="lineno"> 3639</span>&#160; </div>
<div class="line"><a name="l03640"></a><span class="lineno"> 3640</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Op2 = SimplifyOp(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;getOperand(2), <span class="keyword">false</span>);</div>
<div class="line"><a name="l03641"></a><span class="lineno"> 3641</span>&#160;  <span class="keywordflow">if</span> (Op2)</div>
<div class="line"><a name="l03642"></a><span class="lineno"> 3642</span>&#160;    CI = dyn_cast&lt;ConstantInt&gt;(Op2);</div>
<div class="line"><a name="l03643"></a><span class="lineno"> 3643</span>&#160; </div>
<div class="line"><a name="l03644"></a><span class="lineno"> 3644</span>&#160;  <span class="comment">// We only want to perform this transformation if it will not lead to</span></div>
<div class="line"><a name="l03645"></a><span class="lineno"> 3645</span>&#160;  <span class="comment">// additional code. This is true if either both sides of the select</span></div>
<div class="line"><a name="l03646"></a><span class="lineno"> 3646</span>&#160;  <span class="comment">// fold to a constant (in which case the icmp is replaced with a select</span></div>
<div class="line"><a name="l03647"></a><span class="lineno"> 3647</span>&#160;  <span class="comment">// which will usually simplify) or this is the only user of the</span></div>
<div class="line"><a name="l03648"></a><span class="lineno"> 3648</span>&#160;  <span class="comment">// select (in which case we are trading a select+icmp for a simpler</span></div>
<div class="line"><a name="l03649"></a><span class="lineno"> 3649</span>&#160;  <span class="comment">// select+icmp) or all uses of the select can be replaced based on</span></div>
<div class="line"><a name="l03650"></a><span class="lineno"> 3650</span>&#160;  <span class="comment">// dominance information (&quot;Global cases&quot;).</span></div>
<div class="line"><a name="l03651"></a><span class="lineno"> 3651</span>&#160;  <span class="keywordtype">bool</span> Transform = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03652"></a><span class="lineno"> 3652</span>&#160;  <span class="keywordflow">if</span> (Op1 &amp;&amp; Op2)</div>
<div class="line"><a name="l03653"></a><span class="lineno"> 3653</span>&#160;    Transform = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03654"></a><span class="lineno"> 3654</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Op1 || Op2) {</div>
<div class="line"><a name="l03655"></a><span class="lineno"> 3655</span>&#160;    <span class="comment">// Local case</span></div>
<div class="line"><a name="l03656"></a><span class="lineno"> 3656</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;hasOneUse())</div>
<div class="line"><a name="l03657"></a><span class="lineno"> 3657</span>&#160;      Transform = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03658"></a><span class="lineno"> 3658</span>&#160;    <span class="comment">// Global cases</span></div>
<div class="line"><a name="l03659"></a><span class="lineno"> 3659</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (CI &amp;&amp; !CI-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#a882d55a6aa2028e1a5ad708b275334e0">isZero</a>())</div>
<div class="line"><a name="l03660"></a><span class="lineno"> 3660</span>&#160;      <span class="comment">// When Op1 is constant try replacing select with second operand.</span></div>
<div class="line"><a name="l03661"></a><span class="lineno"> 3661</span>&#160;      <span class="comment">// Otherwise Op2 is constant and try replacing select with first</span></div>
<div class="line"><a name="l03662"></a><span class="lineno"> 3662</span>&#160;      <span class="comment">// operand.</span></div>
<div class="line"><a name="l03663"></a><span class="lineno"> 3663</span>&#160;      Transform = replacedSelectWithOperand(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>, &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, Op1 ? 2 : 1);</div>
<div class="line"><a name="l03664"></a><span class="lineno"> 3664</span>&#160;  }</div>
<div class="line"><a name="l03665"></a><span class="lineno"> 3665</span>&#160;  <span class="keywordflow">if</span> (Transform) {</div>
<div class="line"><a name="l03666"></a><span class="lineno"> 3666</span>&#160;    <span class="keywordflow">if</span> (!Op1)</div>
<div class="line"><a name="l03667"></a><span class="lineno"> 3667</span>&#160;      Op1 = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateICmp(Pred, <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;getOperand(1), <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getName());</div>
<div class="line"><a name="l03668"></a><span class="lineno"> 3668</span>&#160;    <span class="keywordflow">if</span> (!Op2)</div>
<div class="line"><a name="l03669"></a><span class="lineno"> 3669</span>&#160;      Op2 = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateICmp(Pred, <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;getOperand(2), <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getName());</div>
<div class="line"><a name="l03670"></a><span class="lineno"> 3670</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1SelectInst.html#aa55fb74dd22008fdcc26a63f44576022">SelectInst::Create</a>(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;getOperand(0), Op1, Op2);</div>
<div class="line"><a name="l03671"></a><span class="lineno"> 3671</span>&#160;  }</div>
<div class="line"><a name="l03672"></a><span class="lineno"> 3672</span>&#160; </div>
<div class="line"><a name="l03673"></a><span class="lineno"> 3673</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l03674"></a><span class="lineno"> 3674</span>&#160;}</div>
<div class="line"><a name="l03675"></a><span class="lineno"> 3675</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l03676"></a><span class="lineno"> 3676</span>&#160;<span class="comment">/// Some comparisons can be simplified.</span></div>
<div class="line"><a name="l03677"></a><span class="lineno"> 3677</span>&#160;<span class="comment">/// In this case, we are looking for comparisons that look like</span></div>
<div class="line"><a name="l03678"></a><span class="lineno"> 3678</span>&#160;<span class="comment">/// a check for a lossy truncation.</span></div>
<div class="line"><a name="l03679"></a><span class="lineno"> 3679</span>&#160;<span class="comment">/// Folds:</span></div>
<div class="line"><a name="l03680"></a><span class="lineno"> 3680</span>&#160;<span class="comment">///   icmp SrcPred (x &amp; Mask), x    to    icmp DstPred x, Mask</span></div>
<div class="line"><a name="l03681"></a><span class="lineno"> 3681</span>&#160;<span class="comment">/// Where Mask is some pattern that produces all-ones in low bits:</span></div>
<div class="line"><a name="l03682"></a><span class="lineno"> 3682</span>&#160;<span class="comment">///    (-1 &gt;&gt; y)</span></div>
<div class="line"><a name="l03683"></a><span class="lineno"> 3683</span>&#160;<span class="comment">///    ((-1 &lt;&lt; y) &gt;&gt; y)     &lt;- non-canonical, has extra uses</span></div>
<div class="line"><a name="l03684"></a><span class="lineno"> 3684</span>&#160;<span class="comment">///   ~(-1 &lt;&lt; y)</span></div>
<div class="line"><a name="l03685"></a><span class="lineno"> 3685</span>&#160;<span class="comment">///    ((1 &lt;&lt; y) + (-1))    &lt;- non-canonical, has extra uses</span></div>
<div class="line"><a name="l03686"></a><span class="lineno"> 3686</span>&#160;<span class="comment">/// The Mask can be a constant, too.</span></div>
<div class="line"><a name="l03687"></a><span class="lineno"> 3687</span>&#160;<span class="comment">/// For some predicates, the operands are commutative.</span></div>
<div class="line"><a name="l03688"></a><span class="lineno"> 3688</span>&#160;<span class="comment">/// For others, x can only be on a specific side.</span></div>
<div class="line"><a name="l03689"></a><span class="lineno"><a class="line" href="InstCombineCompares_8cpp.html#a0dc1a1e560014003d76b017e35528984"> 3689</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="InstCombineCompares_8cpp.html#a0dc1a1e560014003d76b017e35528984">foldICmpWithLowBitMaskedVal</a>(<a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>,</div>
<div class="line"><a name="l03690"></a><span class="lineno"> 3690</span>&#160;                                          <a class="code" href="classllvm_1_1IRBuilder.html">InstCombiner::BuilderTy</a> &amp;<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>) {</div>
<div class="line"><a name="l03691"></a><span class="lineno"> 3691</span>&#160;  <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">ICmpInst::Predicate</a> SrcPred;</div>
<div class="line"><a name="l03692"></a><span class="lineno"> 3692</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, *<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>, *<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>;</div>
<div class="line"><a name="l03693"></a><span class="lineno"> 3693</span>&#160;  <span class="keyword">auto</span> m_VariableMask = <a class="code" href="namespacellvm_1_1PatternMatch.html#af4feec45578e32fe65d8efc59112bc8e">m_CombineOr</a>(</div>
<div class="line"><a name="l03694"></a><span class="lineno"> 3694</span>&#160;      <a class="code" href="namespacellvm_1_1PatternMatch.html#af4feec45578e32fe65d8efc59112bc8e">m_CombineOr</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2ff0f084844b189a858647d637d47eba">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a37668d9884c78ac77254cf9fb8a4276a">m_Shl</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#aaea0d5ebb8b57ddde2095f80e2e94bb2">m_AllOnes</a>(), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>())),</div>
<div class="line"><a name="l03695"></a><span class="lineno"> 3695</span>&#160;                  <a class="code" href="namespacellvm_1_1PatternMatch.html#a944c25ac9b73b02a17a20a08a25b9b21">m_Add</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a37668d9884c78ac77254cf9fb8a4276a">m_Shl</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#aebdb2700a77d10ae6f0ce115e23d9f77">m_One</a>(), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>()), <a class="code" href="namespacellvm_1_1PatternMatch.html#aaea0d5ebb8b57ddde2095f80e2e94bb2">m_AllOnes</a>())),</div>
<div class="line"><a name="l03696"></a><span class="lineno"> 3696</span>&#160;      <a class="code" href="namespacellvm_1_1PatternMatch.html#af4feec45578e32fe65d8efc59112bc8e">m_CombineOr</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#aa08fee11e8a5ec10c0cc2a7abbbd799a">m_LShr</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#aaea0d5ebb8b57ddde2095f80e2e94bb2">m_AllOnes</a>(), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>()),</div>
<div class="line"><a name="l03697"></a><span class="lineno"> 3697</span>&#160;                  <a class="code" href="namespacellvm_1_1PatternMatch.html#aa08fee11e8a5ec10c0cc2a7abbbd799a">m_LShr</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a37668d9884c78ac77254cf9fb8a4276a">m_Shl</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#aaea0d5ebb8b57ddde2095f80e2e94bb2">m_AllOnes</a>(), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>)), <a class="code" href="namespacellvm_1_1PatternMatch.html#a94bf3939e0bea91b481096473d0e549f">m_Deferred</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>))));</div>
<div class="line"><a name="l03698"></a><span class="lineno"> 3698</span>&#160;  <span class="keyword">auto</span> <a class="code" href="structllvm_1_1PatternMatch_1_1m__Mask.html">m_Mask</a> = <a class="code" href="namespacellvm_1_1PatternMatch.html#af4feec45578e32fe65d8efc59112bc8e">m_CombineOr</a>(m_VariableMask, <a class="code" href="namespacellvm_1_1PatternMatch.html#a69cd23c0f1215087c5b006c1bf6222c4">m_LowBitMask</a>());</div>
<div class="line"><a name="l03699"></a><span class="lineno"> 3699</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a3de757fc0f1dc7f8f8e9211b32ac106d">m_c_ICmp</a>(SrcPred,</div>
<div class="line"><a name="l03700"></a><span class="lineno"> 3700</span>&#160;                          <a class="code" href="namespacellvm_1_1PatternMatch.html#ae9d735be1ececf149966a4da253f0320">m_c_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a575c2299c6f145ba3a12efa20829db43">m_CombineAnd</a>(<a class="code" href="structllvm_1_1PatternMatch_1_1m__Mask.html">m_Mask</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>)), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>)),</div>
<div class="line"><a name="l03701"></a><span class="lineno"> 3701</span>&#160;                          <a class="code" href="namespacellvm_1_1PatternMatch.html#a94bf3939e0bea91b481096473d0e549f">m_Deferred</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>))))</div>
<div class="line"><a name="l03702"></a><span class="lineno"> 3702</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l03703"></a><span class="lineno"> 3703</span>&#160; </div>
<div class="line"><a name="l03704"></a><span class="lineno"> 3704</span>&#160;  <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">ICmpInst::Predicate</a> DstPred;</div>
<div class="line"><a name="l03705"></a><span class="lineno"> 3705</span>&#160;  <span class="keywordflow">switch</span> (SrcPred) {</div>
<div class="line"><a name="l03706"></a><span class="lineno"> 3706</span>&#160;  <span class="keywordflow">case</span> ICmpInst::Predicate::ICMP_EQ:</div>
<div class="line"><a name="l03707"></a><span class="lineno"> 3707</span>&#160;    <span class="comment">//  x &amp; (-1 &gt;&gt; y) == x    -&gt;    x u&lt;= (-1 &gt;&gt; y)</span></div>
<div class="line"><a name="l03708"></a><span class="lineno"> 3708</span>&#160;    DstPred = ICmpInst::Predicate::ICMP_ULE;</div>
<div class="line"><a name="l03709"></a><span class="lineno"> 3709</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03710"></a><span class="lineno"> 3710</span>&#160;  <span class="keywordflow">case</span> ICmpInst::Predicate::ICMP_NE:</div>
<div class="line"><a name="l03711"></a><span class="lineno"> 3711</span>&#160;    <span class="comment">//  x &amp; (-1 &gt;&gt; y) != x    -&gt;    x u&gt; (-1 &gt;&gt; y)</span></div>
<div class="line"><a name="l03712"></a><span class="lineno"> 3712</span>&#160;    DstPred = ICmpInst::Predicate::ICMP_UGT;</div>
<div class="line"><a name="l03713"></a><span class="lineno"> 3713</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03714"></a><span class="lineno"> 3714</span>&#160;  <span class="keywordflow">case</span> ICmpInst::Predicate::ICMP_ULT:</div>
<div class="line"><a name="l03715"></a><span class="lineno"> 3715</span>&#160;    <span class="comment">//  x &amp; (-1 &gt;&gt; y) u&lt; x    -&gt;    x u&gt; (-1 &gt;&gt; y)</span></div>
<div class="line"><a name="l03716"></a><span class="lineno"> 3716</span>&#160;    <span class="comment">//  x u&gt; x &amp; (-1 &gt;&gt; y)    -&gt;    x u&gt; (-1 &gt;&gt; y)</span></div>
<div class="line"><a name="l03717"></a><span class="lineno"> 3717</span>&#160;    DstPred = ICmpInst::Predicate::ICMP_UGT;</div>
<div class="line"><a name="l03718"></a><span class="lineno"> 3718</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03719"></a><span class="lineno"> 3719</span>&#160;  <span class="keywordflow">case</span> ICmpInst::Predicate::ICMP_UGE:</div>
<div class="line"><a name="l03720"></a><span class="lineno"> 3720</span>&#160;    <span class="comment">//  x &amp; (-1 &gt;&gt; y) u&gt;= x    -&gt;    x u&lt;= (-1 &gt;&gt; y)</span></div>
<div class="line"><a name="l03721"></a><span class="lineno"> 3721</span>&#160;    <span class="comment">//  x u&lt;= x &amp; (-1 &gt;&gt; y)    -&gt;    x u&lt;= (-1 &gt;&gt; y)</span></div>
<div class="line"><a name="l03722"></a><span class="lineno"> 3722</span>&#160;    DstPred = ICmpInst::Predicate::ICMP_ULE;</div>
<div class="line"><a name="l03723"></a><span class="lineno"> 3723</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03724"></a><span class="lineno"> 3724</span>&#160;  <span class="keywordflow">case</span> ICmpInst::Predicate::ICMP_SLT:</div>
<div class="line"><a name="l03725"></a><span class="lineno"> 3725</span>&#160;    <span class="comment">//  x &amp; (-1 &gt;&gt; y) s&lt; x    -&gt;    x s&gt; (-1 &gt;&gt; y)</span></div>
<div class="line"><a name="l03726"></a><span class="lineno"> 3726</span>&#160;    <span class="comment">//  x s&gt; x &amp; (-1 &gt;&gt; y)    -&gt;    x s&gt; (-1 &gt;&gt; y)</span></div>
<div class="line"><a name="l03727"></a><span class="lineno"> 3727</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#aadd209ba7e1bfa8113a609e09a7fe62f">m_Constant</a>())) <span class="comment">// Can not do this fold with non-constant.</span></div>
<div class="line"><a name="l03728"></a><span class="lineno"> 3728</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l03729"></a><span class="lineno"> 3729</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a1c0eba92185bf1962f1b627ff0a85a82">m_NonNegative</a>())) <span class="comment">// Must not have any -1 vector elements.</span></div>
<div class="line"><a name="l03730"></a><span class="lineno"> 3730</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l03731"></a><span class="lineno"> 3731</span>&#160;    DstPred = ICmpInst::Predicate::ICMP_SGT;</div>
<div class="line"><a name="l03732"></a><span class="lineno"> 3732</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03733"></a><span class="lineno"> 3733</span>&#160;  <span class="keywordflow">case</span> ICmpInst::Predicate::ICMP_SGE:</div>
<div class="line"><a name="l03734"></a><span class="lineno"> 3734</span>&#160;    <span class="comment">//  x &amp; (-1 &gt;&gt; y) s&gt;= x    -&gt;    x s&lt;= (-1 &gt;&gt; y)</span></div>
<div class="line"><a name="l03735"></a><span class="lineno"> 3735</span>&#160;    <span class="comment">//  x s&lt;= x &amp; (-1 &gt;&gt; y)    -&gt;    x s&lt;= (-1 &gt;&gt; y)</span></div>
<div class="line"><a name="l03736"></a><span class="lineno"> 3736</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#aadd209ba7e1bfa8113a609e09a7fe62f">m_Constant</a>())) <span class="comment">// Can not do this fold with non-constant.</span></div>
<div class="line"><a name="l03737"></a><span class="lineno"> 3737</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l03738"></a><span class="lineno"> 3738</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a1c0eba92185bf1962f1b627ff0a85a82">m_NonNegative</a>())) <span class="comment">// Must not have any -1 vector elements.</span></div>
<div class="line"><a name="l03739"></a><span class="lineno"> 3739</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l03740"></a><span class="lineno"> 3740</span>&#160;    DstPred = ICmpInst::Predicate::ICMP_SLE;</div>
<div class="line"><a name="l03741"></a><span class="lineno"> 3741</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03742"></a><span class="lineno"> 3742</span>&#160;  <span class="keywordflow">case</span> ICmpInst::Predicate::ICMP_SGT:</div>
<div class="line"><a name="l03743"></a><span class="lineno"> 3743</span>&#160;  <span class="keywordflow">case</span> ICmpInst::Predicate::ICMP_SLE:</div>
<div class="line"><a name="l03744"></a><span class="lineno"> 3744</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l03745"></a><span class="lineno"> 3745</span>&#160;  <span class="keywordflow">case</span> ICmpInst::Predicate::ICMP_UGT:</div>
<div class="line"><a name="l03746"></a><span class="lineno"> 3746</span>&#160;  <span class="keywordflow">case</span> ICmpInst::Predicate::ICMP_ULE:</div>
<div class="line"><a name="l03747"></a><span class="lineno"> 3747</span>&#160;    <a class="code" href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Instsimplify took care of commut. variant&quot;</span>);</div>
<div class="line"><a name="l03748"></a><span class="lineno"> 3748</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03749"></a><span class="lineno"> 3749</span>&#160;  <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l03750"></a><span class="lineno"> 3750</span>&#160;    <a class="code" href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;All possible folds are handled.&quot;</span>);</div>
<div class="line"><a name="l03751"></a><span class="lineno"> 3751</span>&#160;  }</div>
<div class="line"><a name="l03752"></a><span class="lineno"> 3752</span>&#160; </div>
<div class="line"><a name="l03753"></a><span class="lineno"> 3753</span>&#160;  <span class="comment">// The mask value may be a vector constant that has undefined elements. But it</span></div>
<div class="line"><a name="l03754"></a><span class="lineno"> 3754</span>&#160;  <span class="comment">// may not be safe to propagate those undefs into the new compare, so replace</span></div>
<div class="line"><a name="l03755"></a><span class="lineno"> 3755</span>&#160;  <span class="comment">// those elements by copying an existing, defined, and safe scalar constant.</span></div>
<div class="line"><a name="l03756"></a><span class="lineno"> 3756</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *OpTy = <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>-&gt;getType();</div>
<div class="line"><a name="l03757"></a><span class="lineno"> 3757</span>&#160;  <span class="keyword">auto</span> *VecC = dyn_cast&lt;Constant&gt;(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>);</div>
<div class="line"><a name="l03758"></a><span class="lineno"> 3758</span>&#160;  <span class="keyword">auto</span> *OpVTy = dyn_cast&lt;FixedVectorType&gt;(OpTy);</div>
<div class="line"><a name="l03759"></a><span class="lineno"> 3759</span>&#160;  <span class="keywordflow">if</span> (OpVTy &amp;&amp; VecC &amp;&amp; VecC-&gt;containsUndefOrPoisonElement()) {</div>
<div class="line"><a name="l03760"></a><span class="lineno"> 3760</span>&#160;    <a class="code" href="classllvm_1_1Constant.html">Constant</a> *SafeReplacementConstant = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l03761"></a><span class="lineno"> 3761</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a> = OpVTy-&gt;getNumElements(); <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a>; ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l03762"></a><span class="lineno"> 3762</span>&#160;      <span class="keywordflow">if</span> (!isa&lt;UndefValue&gt;(VecC-&gt;getAggregateElement(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>))) {</div>
<div class="line"><a name="l03763"></a><span class="lineno"> 3763</span>&#160;        SafeReplacementConstant = VecC-&gt;<a class="code" href="classllvm_1_1Constant.html#acd530d0571f320d47d37e7ae51cf70ff">getAggregateElement</a>(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div>
<div class="line"><a name="l03764"></a><span class="lineno"> 3764</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03765"></a><span class="lineno"> 3765</span>&#160;      }</div>
<div class="line"><a name="l03766"></a><span class="lineno"> 3766</span>&#160;    }</div>
<div class="line"><a name="l03767"></a><span class="lineno"> 3767</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(SafeReplacementConstant &amp;&amp; <span class="stringliteral">&quot;Failed to find undef replacement&quot;</span>);</div>
<div class="line"><a name="l03768"></a><span class="lineno"> 3768</span>&#160;    <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a> = <a class="code" href="classllvm_1_1Constant.html#a174c8fd19771468c53842a7fde8ddce1">Constant::replaceUndefsWith</a>(VecC, SafeReplacementConstant);</div>
<div class="line"><a name="l03769"></a><span class="lineno"> 3769</span>&#160;  }</div>
<div class="line"><a name="l03770"></a><span class="lineno"> 3770</span>&#160; </div>
<div class="line"><a name="l03771"></a><span class="lineno"> 3771</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateICmp(DstPred, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>);</div>
<div class="line"><a name="l03772"></a><span class="lineno"> 3772</span>&#160;}</div>
<div class="line"><a name="l03773"></a><span class="lineno"> 3773</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l03774"></a><span class="lineno"> 3774</span>&#160;<span class="comment">/// Some comparisons can be simplified.</span></div>
<div class="line"><a name="l03775"></a><span class="lineno"> 3775</span>&#160;<span class="comment">/// In this case, we are looking for comparisons that look like</span></div>
<div class="line"><a name="l03776"></a><span class="lineno"> 3776</span>&#160;<span class="comment">/// a check for a lossy signed truncation.</span></div>
<div class="line"><a name="l03777"></a><span class="lineno"> 3777</span>&#160;<span class="comment">/// Folds:   (MaskedBits is a constant.)</span></div>
<div class="line"><a name="l03778"></a><span class="lineno"> 3778</span>&#160;<span class="comment">///   ((%x &lt;&lt; MaskedBits) a&gt;&gt; MaskedBits) SrcPred %x</span></div>
<div class="line"><a name="l03779"></a><span class="lineno"> 3779</span>&#160;<span class="comment">/// Into:</span></div>
<div class="line"><a name="l03780"></a><span class="lineno"> 3780</span>&#160;<span class="comment">///   (add %x, (1 &lt;&lt; (KeptBits-1))) DstPred (1 &lt;&lt; KeptBits)</span></div>
<div class="line"><a name="l03781"></a><span class="lineno"> 3781</span>&#160;<span class="comment">/// Where  KeptBits = bitwidth(%x) - MaskedBits</span></div>
<div class="line"><a name="l03782"></a><span class="lineno"> 3782</span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *</div>
<div class="line"><a name="l03783"></a><span class="lineno"><a class="line" href="InstCombineCompares_8cpp.html#ae597bfbd02f7f19a21c4a506e3ba5300"> 3783</a></span>&#160;<a class="code" href="InstCombineCompares_8cpp.html#ae597bfbd02f7f19a21c4a506e3ba5300">foldICmpWithTruncSignExtendedVal</a>(<a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>,</div>
<div class="line"><a name="l03784"></a><span class="lineno"> 3784</span>&#160;                                 <a class="code" href="classllvm_1_1IRBuilder.html">InstCombiner::BuilderTy</a> &amp;<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>) {</div>
<div class="line"><a name="l03785"></a><span class="lineno"> 3785</span>&#160;  <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">ICmpInst::Predicate</a> SrcPred;</div>
<div class="line"><a name="l03786"></a><span class="lineno"> 3786</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>;</div>
<div class="line"><a name="l03787"></a><span class="lineno"> 3787</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *C0, *<a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>; <span class="comment">// FIXME: non-splats, potentially with undef.</span></div>
<div class="line"><a name="l03788"></a><span class="lineno"> 3788</span>&#160;  <span class="comment">// We are ok with &#39;shl&#39; having multiple uses, but &#39;ashr&#39; must be one-use.</span></div>
<div class="line"><a name="l03789"></a><span class="lineno"> 3789</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a3de757fc0f1dc7f8f8e9211b32ac106d">m_c_ICmp</a>(SrcPred,</div>
<div class="line"><a name="l03790"></a><span class="lineno"> 3790</span>&#160;                          <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a64153676e101a130bbbaaf91635d253a">m_AShr</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a37668d9884c78ac77254cf9fb8a4276a">m_Shl</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(C0)),</div>
<div class="line"><a name="l03791"></a><span class="lineno"> 3791</span>&#160;                                          <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(<a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>))),</div>
<div class="line"><a name="l03792"></a><span class="lineno"> 3792</span>&#160;                          <a class="code" href="namespacellvm_1_1PatternMatch.html#a94bf3939e0bea91b481096473d0e549f">m_Deferred</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>))))</div>
<div class="line"><a name="l03793"></a><span class="lineno"> 3793</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l03794"></a><span class="lineno"> 3794</span>&#160; </div>
<div class="line"><a name="l03795"></a><span class="lineno"> 3795</span>&#160;  <span class="comment">// Potential handling of non-splats: for each element:</span></div>
<div class="line"><a name="l03796"></a><span class="lineno"> 3796</span>&#160;  <span class="comment">//  * if both are undef, replace with constant 0.</span></div>
<div class="line"><a name="l03797"></a><span class="lineno"> 3797</span>&#160;  <span class="comment">//    Because (1&lt;&lt;0) is OK and is 1, and ((1&lt;&lt;0)&gt;&gt;1) is also OK and is 0.</span></div>
<div class="line"><a name="l03798"></a><span class="lineno"> 3798</span>&#160;  <span class="comment">//  * if both are not undef, and are different, bailout.</span></div>
<div class="line"><a name="l03799"></a><span class="lineno"> 3799</span>&#160;  <span class="comment">//  * else, only one is undef, then pick the non-undef one.</span></div>
<div class="line"><a name="l03800"></a><span class="lineno"> 3800</span>&#160; </div>
<div class="line"><a name="l03801"></a><span class="lineno"> 3801</span>&#160;  <span class="comment">// The shift amount must be equal.</span></div>
<div class="line"><a name="l03802"></a><span class="lineno"> 3802</span>&#160;  <span class="keywordflow">if</span> (*C0 != *<a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>)</div>
<div class="line"><a name="l03803"></a><span class="lineno"> 3803</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l03804"></a><span class="lineno"> 3804</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> &amp;MaskedBits = *C0;</div>
<div class="line"><a name="l03805"></a><span class="lineno"> 3805</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(MaskedBits != 0 &amp;&amp; <span class="stringliteral">&quot;shift by zero should be folded away already.&quot;</span>);</div>
<div class="line"><a name="l03806"></a><span class="lineno"> 3806</span>&#160; </div>
<div class="line"><a name="l03807"></a><span class="lineno"> 3807</span>&#160;  <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">ICmpInst::Predicate</a> DstPred;</div>
<div class="line"><a name="l03808"></a><span class="lineno"> 3808</span>&#160;  <span class="keywordflow">switch</span> (SrcPred) {</div>
<div class="line"><a name="l03809"></a><span class="lineno"> 3809</span>&#160;  <span class="keywordflow">case</span> ICmpInst::Predicate::ICMP_EQ:</div>
<div class="line"><a name="l03810"></a><span class="lineno"> 3810</span>&#160;    <span class="comment">// ((%x &lt;&lt; MaskedBits) a&gt;&gt; MaskedBits) == %x</span></div>
<div class="line"><a name="l03811"></a><span class="lineno"> 3811</span>&#160;    <span class="comment">//   =&gt;</span></div>
<div class="line"><a name="l03812"></a><span class="lineno"> 3812</span>&#160;    <span class="comment">// (add %x, (1 &lt;&lt; (KeptBits-1))) u&lt; (1 &lt;&lt; KeptBits)</span></div>
<div class="line"><a name="l03813"></a><span class="lineno"> 3813</span>&#160;    DstPred = ICmpInst::Predicate::ICMP_ULT;</div>
<div class="line"><a name="l03814"></a><span class="lineno"> 3814</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03815"></a><span class="lineno"> 3815</span>&#160;  <span class="keywordflow">case</span> ICmpInst::Predicate::ICMP_NE:</div>
<div class="line"><a name="l03816"></a><span class="lineno"> 3816</span>&#160;    <span class="comment">// ((%x &lt;&lt; MaskedBits) a&gt;&gt; MaskedBits) != %x</span></div>
<div class="line"><a name="l03817"></a><span class="lineno"> 3817</span>&#160;    <span class="comment">//   =&gt;</span></div>
<div class="line"><a name="l03818"></a><span class="lineno"> 3818</span>&#160;    <span class="comment">// (add %x, (1 &lt;&lt; (KeptBits-1))) u&gt;= (1 &lt;&lt; KeptBits)</span></div>
<div class="line"><a name="l03819"></a><span class="lineno"> 3819</span>&#160;    DstPred = ICmpInst::Predicate::ICMP_UGE;</div>
<div class="line"><a name="l03820"></a><span class="lineno"> 3820</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03821"></a><span class="lineno"> 3821</span>&#160;  <span class="comment">// FIXME: are more folds possible?</span></div>
<div class="line"><a name="l03822"></a><span class="lineno"> 3822</span>&#160;  <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l03823"></a><span class="lineno"> 3823</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l03824"></a><span class="lineno"> 3824</span>&#160;  }</div>
<div class="line"><a name="l03825"></a><span class="lineno"> 3825</span>&#160; </div>
<div class="line"><a name="l03826"></a><span class="lineno"> 3826</span>&#160;  <span class="keyword">auto</span> *XType = <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getType();</div>
<div class="line"><a name="l03827"></a><span class="lineno"> 3827</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">unsigned</span> XBitWidth = XType-&gt;getScalarSizeInBits();</div>
<div class="line"><a name="l03828"></a><span class="lineno"> 3828</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> <a class="code" href="namespacellvm.html#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a> = <a class="code" href="classllvm_1_1APInt.html">APInt</a>(XBitWidth, XBitWidth);</div>
<div class="line"><a name="l03829"></a><span class="lineno"> 3829</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="namespacellvm.html#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a>.ugt(MaskedBits) &amp;&amp; <span class="stringliteral">&quot;shifts should leave some bits untouched&quot;</span>);</div>
<div class="line"><a name="l03830"></a><span class="lineno"> 3830</span>&#160; </div>
<div class="line"><a name="l03831"></a><span class="lineno"> 3831</span>&#160;  <span class="comment">// KeptBits = bitwidth(%x) - MaskedBits</span></div>
<div class="line"><a name="l03832"></a><span class="lineno"> 3832</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> KeptBits = <a class="code" href="namespacellvm.html#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a> - MaskedBits;</div>
<div class="line"><a name="l03833"></a><span class="lineno"> 3833</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(KeptBits.<a class="code" href="classllvm_1_1APInt.html#a46a7cbf3724080a5f4f4c7e7a4551e26">ugt</a>(0) &amp;&amp; KeptBits.<a class="code" href="classllvm_1_1APInt.html#a545e8d5dfa1688acea0d0e275b03682f">ult</a>(<a class="code" href="namespacellvm.html#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a>) &amp;&amp; <span class="stringliteral">&quot;unreachable&quot;</span>);</div>
<div class="line"><a name="l03834"></a><span class="lineno"> 3834</span>&#160;  <span class="comment">// ICmpCst = (1 &lt;&lt; KeptBits)</span></div>
<div class="line"><a name="l03835"></a><span class="lineno"> 3835</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> ICmpCst = <a class="code" href="classllvm_1_1APInt.html">APInt</a>(XBitWidth, 1).<a class="code" href="classllvm_1_1APInt.html#acb9c55b6986369948507ca5241b4e411">shl</a>(KeptBits);</div>
<div class="line"><a name="l03836"></a><span class="lineno"> 3836</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(ICmpCst.<a class="code" href="classllvm_1_1APInt.html#ad1b0513de876d1c85cf6268ca21b2c86">isPowerOf2</a>());</div>
<div class="line"><a name="l03837"></a><span class="lineno"> 3837</span>&#160;  <span class="comment">// AddCst = (1 &lt;&lt; (KeptBits-1))</span></div>
<div class="line"><a name="l03838"></a><span class="lineno"> 3838</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> AddCst = ICmpCst.<a class="code" href="classllvm_1_1APInt.html#af34549c39d6f741fbdaf9a795aa306e9">lshr</a>(1);</div>
<div class="line"><a name="l03839"></a><span class="lineno"> 3839</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(AddCst.<a class="code" href="classllvm_1_1APInt.html#a545e8d5dfa1688acea0d0e275b03682f">ult</a>(ICmpCst) &amp;&amp; AddCst.<a class="code" href="classllvm_1_1APInt.html#ad1b0513de876d1c85cf6268ca21b2c86">isPowerOf2</a>());</div>
<div class="line"><a name="l03840"></a><span class="lineno"> 3840</span>&#160; </div>
<div class="line"><a name="l03841"></a><span class="lineno"> 3841</span>&#160;  <span class="comment">// T0 = add %x, AddCst</span></div>
<div class="line"><a name="l03842"></a><span class="lineno"> 3842</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *T0 = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAdd(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(XType, AddCst));</div>
<div class="line"><a name="l03843"></a><span class="lineno"> 3843</span>&#160;  <span class="comment">// T1 = T0 DstPred ICmpCst</span></div>
<div class="line"><a name="l03844"></a><span class="lineno"> 3844</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="Mips16ISelLowering_8cpp.html#ac16509a75e3d3fc46b9df1726be486ec">T1</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateICmp(DstPred, T0, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(XType, ICmpCst));</div>
<div class="line"><a name="l03845"></a><span class="lineno"> 3845</span>&#160; </div>
<div class="line"><a name="l03846"></a><span class="lineno"> 3846</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="Mips16ISelLowering_8cpp.html#ac16509a75e3d3fc46b9df1726be486ec">T1</a>;</div>
<div class="line"><a name="l03847"></a><span class="lineno"> 3847</span>&#160;}</div>
<div class="line"><a name="l03848"></a><span class="lineno"> 3848</span>&#160; </div>
<div class="line"><a name="l03849"></a><span class="lineno"> 3849</span>&#160;<span class="comment">// Given pattern:</span></div>
<div class="line"><a name="l03850"></a><span class="lineno"> 3850</span>&#160;<span class="comment">//   icmp eq/ne (and ((x shift Q), (y oppositeshift K))), 0</span></div>
<div class="line"><a name="l03851"></a><span class="lineno"> 3851</span>&#160;<span class="comment">// we should move shifts to the same hand of &#39;and&#39;, i.e. rewrite as</span></div>
<div class="line"><a name="l03852"></a><span class="lineno"> 3852</span>&#160;<span class="comment">//   icmp eq/ne (and (x shift (Q+K)), y), 0  iff (Q+K) u&lt; bitwidth(x)</span></div>
<div class="line"><a name="l03853"></a><span class="lineno"> 3853</span>&#160;<span class="comment">// We are only interested in opposite logical shifts here.</span></div>
<div class="line"><a name="l03854"></a><span class="lineno"> 3854</span>&#160;<span class="comment">// One of the shifts can be truncated.</span></div>
<div class="line"><a name="l03855"></a><span class="lineno"> 3855</span>&#160;<span class="comment">// If we can, we want to end up creating &#39;lshr&#39; shift.</span></div>
<div class="line"><a name="l03856"></a><span class="lineno"> 3856</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *</div>
<div class="line"><a name="l03857"></a><span class="lineno"><a class="line" href="InstCombineCompares_8cpp.html#a55797b5bbbbd581a91789a8106df8e99"> 3857</a></span>&#160;<a class="code" href="InstCombineCompares_8cpp.html#a55797b5bbbbd581a91789a8106df8e99">foldShiftIntoShiftInAnotherHandOfAndInICmp</a>(<a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <span class="keyword">const</span> <a class="code" href="structllvm_1_1SimplifyQuery.html">SimplifyQuery</a> SQ,</div>
<div class="line"><a name="l03858"></a><span class="lineno"> 3858</span>&#160;                                           <a class="code" href="classllvm_1_1IRBuilder.html">InstCombiner::BuilderTy</a> &amp;<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>) {</div>
<div class="line"><a name="l03859"></a><span class="lineno"> 3859</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.isEquality() || !<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(1), <a class="code" href="namespacellvm_1_1PatternMatch.html#ae77be336e228cf9aa00709a8606dfb98">m_Zero</a>()) ||</div>
<div class="line"><a name="l03860"></a><span class="lineno"> 3860</span>&#160;      !<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(0)-&gt;hasOneUse())</div>
<div class="line"><a name="l03861"></a><span class="lineno"> 3861</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l03862"></a><span class="lineno"> 3862</span>&#160; </div>
<div class="line"><a name="l03863"></a><span class="lineno"> 3863</span>&#160;  <span class="keyword">auto</span> m_AnyLogicalShift = <a class="code" href="namespacellvm_1_1PatternMatch.html#a595e5029858e33416e500bed9317d309">m_LogicalShift</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>());</div>
<div class="line"><a name="l03864"></a><span class="lineno"> 3864</span>&#160; </div>
<div class="line"><a name="l03865"></a><span class="lineno"> 3865</span>&#160;  <span class="comment">// Look for an &#39;and&#39; of two logical shifts, one of which may be truncated.</span></div>
<div class="line"><a name="l03866"></a><span class="lineno"> 3866</span>&#160;  <span class="comment">// We use m_TruncOrSelf() on the RHS to correctly handle commutative case.</span></div>
<div class="line"><a name="l03867"></a><span class="lineno"> 3867</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *XShift, *MaybeTruncation, *YShift;</div>
<div class="line"><a name="l03868"></a><span class="lineno"> 3868</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(</div>
<div class="line"><a name="l03869"></a><span class="lineno"> 3869</span>&#160;          <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(0),</div>
<div class="line"><a name="l03870"></a><span class="lineno"> 3870</span>&#160;          <a class="code" href="namespacellvm_1_1PatternMatch.html#ae9d735be1ececf149966a4da253f0320">m_c_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a575c2299c6f145ba3a12efa20829db43">m_CombineAnd</a>(m_AnyLogicalShift, <a class="code" href="namespacellvm_1_1PatternMatch.html#a04353aa48874f9bda89ff9059cd1a5a6">m_Instruction</a>(XShift)),</div>
<div class="line"><a name="l03871"></a><span class="lineno"> 3871</span>&#160;                  <a class="code" href="namespacellvm_1_1PatternMatch.html#a575c2299c6f145ba3a12efa20829db43">m_CombineAnd</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a054bc550cc29339bf1b5c79c73aa4dac">m_TruncOrSelf</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a575c2299c6f145ba3a12efa20829db43">m_CombineAnd</a>(</div>
<div class="line"><a name="l03872"></a><span class="lineno"> 3872</span>&#160;                                   m_AnyLogicalShift, <a class="code" href="namespacellvm_1_1PatternMatch.html#a04353aa48874f9bda89ff9059cd1a5a6">m_Instruction</a>(YShift))),</div>
<div class="line"><a name="l03873"></a><span class="lineno"> 3873</span>&#160;                               <a class="code" href="namespacellvm_1_1PatternMatch.html#a04353aa48874f9bda89ff9059cd1a5a6">m_Instruction</a>(MaybeTruncation)))))</div>
<div class="line"><a name="l03874"></a><span class="lineno"> 3874</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l03875"></a><span class="lineno"> 3875</span>&#160; </div>
<div class="line"><a name="l03876"></a><span class="lineno"> 3876</span>&#160;  <span class="comment">// We potentially looked past &#39;trunc&#39;, but only when matching YShift,</span></div>
<div class="line"><a name="l03877"></a><span class="lineno"> 3877</span>&#160;  <span class="comment">// therefore YShift must have the widest type.</span></div>
<div class="line"><a name="l03878"></a><span class="lineno"> 3878</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *WidestShift = YShift;</div>
<div class="line"><a name="l03879"></a><span class="lineno"> 3879</span>&#160;  <span class="comment">// Therefore XShift must have the shallowest type.</span></div>
<div class="line"><a name="l03880"></a><span class="lineno"> 3880</span>&#160;  <span class="comment">// Or they both have identical types if there was no truncation.</span></div>
<div class="line"><a name="l03881"></a><span class="lineno"> 3881</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *NarrowestShift = XShift;</div>
<div class="line"><a name="l03882"></a><span class="lineno"> 3882</span>&#160; </div>
<div class="line"><a name="l03883"></a><span class="lineno"> 3883</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *WidestTy = WidestShift-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>();</div>
<div class="line"><a name="l03884"></a><span class="lineno"> 3884</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *NarrowestTy = NarrowestShift-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>();</div>
<div class="line"><a name="l03885"></a><span class="lineno"> 3885</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(NarrowestTy == <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(0)-&gt;getType() &amp;&amp;</div>
<div class="line"><a name="l03886"></a><span class="lineno"> 3886</span>&#160;         <span class="stringliteral">&quot;We did not look past any shifts while matching XShift though.&quot;</span>);</div>
<div class="line"><a name="l03887"></a><span class="lineno"> 3887</span>&#160;  <span class="keywordtype">bool</span> HadTrunc = WidestTy != <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(0)-&gt;getType();</div>
<div class="line"><a name="l03888"></a><span class="lineno"> 3888</span>&#160; </div>
<div class="line"><a name="l03889"></a><span class="lineno"> 3889</span>&#160;  <span class="comment">// If YShift is a &#39;lshr&#39;, swap the shifts around.</span></div>
<div class="line"><a name="l03890"></a><span class="lineno"> 3890</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(YShift, <a class="code" href="namespacellvm_1_1PatternMatch.html#aa08fee11e8a5ec10c0cc2a7abbbd799a">m_LShr</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>())))</div>
<div class="line"><a name="l03891"></a><span class="lineno"> 3891</span>&#160;    <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(XShift, YShift);</div>
<div class="line"><a name="l03892"></a><span class="lineno"> 3892</span>&#160; </div>
<div class="line"><a name="l03893"></a><span class="lineno"> 3893</span>&#160;  <span class="comment">// The shifts must be in opposite directions.</span></div>
<div class="line"><a name="l03894"></a><span class="lineno"> 3894</span>&#160;  <span class="keyword">auto</span> XShiftOpcode = XShift-&gt;<a class="code" href="classllvm_1_1Instruction.html#ab4e05d690df389b8b1477c90387b575f">getOpcode</a>();</div>
<div class="line"><a name="l03895"></a><span class="lineno"> 3895</span>&#160;  <span class="keywordflow">if</span> (XShiftOpcode == YShift-&gt;<a class="code" href="classllvm_1_1Instruction.html#ab4e05d690df389b8b1477c90387b575f">getOpcode</a>())</div>
<div class="line"><a name="l03896"></a><span class="lineno"> 3896</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>; <span class="comment">// Do not care about same-direction shifts here.</span></div>
<div class="line"><a name="l03897"></a><span class="lineno"> 3897</span>&#160; </div>
<div class="line"><a name="l03898"></a><span class="lineno"> 3898</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, *XShAmt, *<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, *YShAmt;</div>
<div class="line"><a name="l03899"></a><span class="lineno"> 3899</span>&#160;  <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(XShift, <a class="code" href="namespacellvm_1_1PatternMatch.html#a43ac4fbaaf63a88eb5ac05f6d3e5649c">m_BinOp</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a92ad549d62e33f9f5b8c3bc4b510b365">m_ZExtOrSelf</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(XShAmt))));</div>
<div class="line"><a name="l03900"></a><span class="lineno"> 3900</span>&#160;  <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(YShift, <a class="code" href="namespacellvm_1_1PatternMatch.html#a43ac4fbaaf63a88eb5ac05f6d3e5649c">m_BinOp</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a92ad549d62e33f9f5b8c3bc4b510b365">m_ZExtOrSelf</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(YShAmt))));</div>
<div class="line"><a name="l03901"></a><span class="lineno"> 3901</span>&#160; </div>
<div class="line"><a name="l03902"></a><span class="lineno"> 3902</span>&#160;  <span class="comment">// If one of the values being shifted is a constant, then we will end with</span></div>
<div class="line"><a name="l03903"></a><span class="lineno"> 3903</span>&#160;  <span class="comment">// and+icmp, and [zext+]shift instrs will be constant-folded. If they are not,</span></div>
<div class="line"><a name="l03904"></a><span class="lineno"> 3904</span>&#160;  <span class="comment">// however, we will need to ensure that we won&#39;t increase instruction count.</span></div>
<div class="line"><a name="l03905"></a><span class="lineno"> 3905</span>&#160;  <span class="keywordflow">if</span> (!isa&lt;Constant&gt;(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>) &amp;&amp; !isa&lt;Constant&gt;(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>)) {</div>
<div class="line"><a name="l03906"></a><span class="lineno"> 3906</span>&#160;    <span class="comment">// At least one of the hands of the &#39;and&#39; should be one-use shift.</span></div>
<div class="line"><a name="l03907"></a><span class="lineno"> 3907</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(0),</div>
<div class="line"><a name="l03908"></a><span class="lineno"> 3908</span>&#160;               <a class="code" href="namespacellvm_1_1PatternMatch.html#ae9d735be1ececf149966a4da253f0320">m_c_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(m_AnyLogicalShift), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>())))</div>
<div class="line"><a name="l03909"></a><span class="lineno"> 3909</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l03910"></a><span class="lineno"> 3910</span>&#160;    <span class="keywordflow">if</span> (HadTrunc) {</div>
<div class="line"><a name="l03911"></a><span class="lineno"> 3911</span>&#160;      <span class="comment">// Due to the &#39;trunc&#39;, we will need to widen X. For that either the old</span></div>
<div class="line"><a name="l03912"></a><span class="lineno"> 3912</span>&#160;      <span class="comment">// &#39;trunc&#39; or the shift amt in the non-truncated shift should be one-use.</span></div>
<div class="line"><a name="l03913"></a><span class="lineno"> 3913</span>&#160;      <span class="keywordflow">if</span> (!MaybeTruncation-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>() &amp;&amp;</div>
<div class="line"><a name="l03914"></a><span class="lineno"> 3914</span>&#160;          !NarrowestShift-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(1)-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>())</div>
<div class="line"><a name="l03915"></a><span class="lineno"> 3915</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l03916"></a><span class="lineno"> 3916</span>&#160;    }</div>
<div class="line"><a name="l03917"></a><span class="lineno"> 3917</span>&#160;  }</div>
<div class="line"><a name="l03918"></a><span class="lineno"> 3918</span>&#160; </div>
<div class="line"><a name="l03919"></a><span class="lineno"> 3919</span>&#160;  <span class="comment">// We have two shift amounts from two different shifts. The types of those</span></div>
<div class="line"><a name="l03920"></a><span class="lineno"> 3920</span>&#160;  <span class="comment">// shift amounts may not match. If that&#39;s the case let&#39;s bailout now.</span></div>
<div class="line"><a name="l03921"></a><span class="lineno"> 3921</span>&#160;  <span class="keywordflow">if</span> (XShAmt-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>() != YShAmt-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>())</div>
<div class="line"><a name="l03922"></a><span class="lineno"> 3922</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l03923"></a><span class="lineno"> 3923</span>&#160; </div>
<div class="line"><a name="l03924"></a><span class="lineno"> 3924</span>&#160;  <span class="comment">// As input, we have the following pattern:</span></div>
<div class="line"><a name="l03925"></a><span class="lineno"> 3925</span>&#160;  <span class="comment">//   icmp eq/ne (and ((x shift Q), (y oppositeshift K))), 0</span></div>
<div class="line"><a name="l03926"></a><span class="lineno"> 3926</span>&#160;  <span class="comment">// We want to rewrite that as:</span></div>
<div class="line"><a name="l03927"></a><span class="lineno"> 3927</span>&#160;  <span class="comment">//   icmp eq/ne (and (x shift (Q+K)), y), 0  iff (Q+K) u&lt; bitwidth(x)</span></div>
<div class="line"><a name="l03928"></a><span class="lineno"> 3928</span>&#160;  <span class="comment">// While we know that originally (Q+K) would not overflow</span></div>
<div class="line"><a name="l03929"></a><span class="lineno"> 3929</span>&#160;  <span class="comment">// (because  2 * (N-1) u&lt;= iN -1), we have looked past extensions of</span></div>
<div class="line"><a name="l03930"></a><span class="lineno"> 3930</span>&#160;  <span class="comment">// shift amounts. so it may now overflow in smaller bitwidth.</span></div>
<div class="line"><a name="l03931"></a><span class="lineno"> 3931</span>&#160;  <span class="comment">// To ensure that does not happen, we need to ensure that the total maximal</span></div>
<div class="line"><a name="l03932"></a><span class="lineno"> 3932</span>&#160;  <span class="comment">// shift amount is still representable in that smaller bit width.</span></div>
<div class="line"><a name="l03933"></a><span class="lineno"> 3933</span>&#160;  <span class="keywordtype">unsigned</span> MaximalPossibleTotalShiftAmount =</div>
<div class="line"><a name="l03934"></a><span class="lineno"> 3934</span>&#160;      (WidestTy-&gt;<a class="code" href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>() - 1) +</div>
<div class="line"><a name="l03935"></a><span class="lineno"> 3935</span>&#160;      (NarrowestTy-&gt;<a class="code" href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>() - 1);</div>
<div class="line"><a name="l03936"></a><span class="lineno"> 3936</span>&#160;  <a class="code" href="classllvm_1_1APInt.html">APInt</a> MaximalRepresentableShiftAmount =</div>
<div class="line"><a name="l03937"></a><span class="lineno"> 3937</span>&#160;      <a class="code" href="classllvm_1_1APInt.html#a071e8d814b2b30b02544fad964227b8e">APInt::getAllOnes</a>(XShAmt-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>());</div>
<div class="line"><a name="l03938"></a><span class="lineno"> 3938</span>&#160;  <span class="keywordflow">if</span> (MaximalRepresentableShiftAmount.<a class="code" href="classllvm_1_1APInt.html#a545e8d5dfa1688acea0d0e275b03682f">ult</a>(MaximalPossibleTotalShiftAmount))</div>
<div class="line"><a name="l03939"></a><span class="lineno"> 3939</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l03940"></a><span class="lineno"> 3940</span>&#160; </div>
<div class="line"><a name="l03941"></a><span class="lineno"> 3941</span>&#160;  <span class="comment">// Can we fold (XShAmt+YShAmt) ?</span></div>
<div class="line"><a name="l03942"></a><span class="lineno"> 3942</span>&#160;  <span class="keyword">auto</span> *NewShAmt = dyn_cast_or_null&lt;Constant&gt;(</div>
<div class="line"><a name="l03943"></a><span class="lineno"> 3943</span>&#160;      <a class="code" href="namespacellvm.html#a5e0af1b16cab9e0efc63a6ce9de2b9cc">simplifyAddInst</a>(XShAmt, YShAmt, <span class="comment">/*isNSW=*/</span><span class="keyword">false</span>,</div>
<div class="line"><a name="l03944"></a><span class="lineno"> 3944</span>&#160;                      <span class="comment">/*isNUW=*/</span><span class="keyword">false</span>, SQ.<a class="code" href="structllvm_1_1SimplifyQuery.html#aaf05c1194f5c7869a00434c13c46c228">getWithInstruction</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)));</div>
<div class="line"><a name="l03945"></a><span class="lineno"> 3945</span>&#160;  <span class="keywordflow">if</span> (!NewShAmt)</div>
<div class="line"><a name="l03946"></a><span class="lineno"> 3946</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l03947"></a><span class="lineno"> 3947</span>&#160;  NewShAmt = <a class="code" href="classllvm_1_1ConstantExpr.html#aa4f10f3d02f427b2a8ea7a6dc25f4c69">ConstantExpr::getZExtOrBitCast</a>(NewShAmt, WidestTy);</div>
<div class="line"><a name="l03948"></a><span class="lineno"> 3948</span>&#160;  <span class="keywordtype">unsigned</span> WidestBitWidth = WidestTy-&gt;<a class="code" href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>();</div>
<div class="line"><a name="l03949"></a><span class="lineno"> 3949</span>&#160; </div>
<div class="line"><a name="l03950"></a><span class="lineno"> 3950</span>&#160;  <span class="comment">// Is the new shift amount smaller than the bit width?</span></div>
<div class="line"><a name="l03951"></a><span class="lineno"> 3951</span>&#160;  <span class="comment">// FIXME: could also rely on ConstantRange.</span></div>
<div class="line"><a name="l03952"></a><span class="lineno"> 3952</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(NewShAmt,</div>
<div class="line"><a name="l03953"></a><span class="lineno"> 3953</span>&#160;             <a class="code" href="namespacellvm_1_1PatternMatch.html#abb22519fa3bf66d9e0bc6d1a733a5821">m_SpecificInt_ICMP</a>(ICmpInst::Predicate::ICMP_ULT,</div>
<div class="line"><a name="l03954"></a><span class="lineno"> 3954</span>&#160;                                <a class="code" href="classllvm_1_1APInt.html">APInt</a>(WidestBitWidth, WidestBitWidth))))</div>
<div class="line"><a name="l03955"></a><span class="lineno"> 3955</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l03956"></a><span class="lineno"> 3956</span>&#160; </div>
<div class="line"><a name="l03957"></a><span class="lineno"> 3957</span>&#160;  <span class="comment">// An extra legality check is needed if we had trunc-of-lshr.</span></div>
<div class="line"><a name="l03958"></a><span class="lineno"> 3958</span>&#160;  <span class="keywordflow">if</span> (HadTrunc &amp;&amp; <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(WidestShift, <a class="code" href="namespacellvm_1_1PatternMatch.html#aa08fee11e8a5ec10c0cc2a7abbbd799a">m_LShr</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>()))) {</div>
<div class="line"><a name="l03959"></a><span class="lineno"> 3959</span>&#160;    <span class="keyword">auto</span> CanFold = [NewShAmt, WidestBitWidth, NarrowestShift, SQ,</div>
<div class="line"><a name="l03960"></a><span class="lineno"> 3960</span>&#160;                    WidestShift]() {</div>
<div class="line"><a name="l03961"></a><span class="lineno"> 3961</span>&#160;      <span class="comment">// It isn&#39;t obvious whether it&#39;s worth it to analyze non-constants here.</span></div>
<div class="line"><a name="l03962"></a><span class="lineno"> 3962</span>&#160;      <span class="comment">// Also, let&#39;s basically give up on non-splat cases, pessimizing vectors.</span></div>
<div class="line"><a name="l03963"></a><span class="lineno"> 3963</span>&#160;      <span class="comment">// If *any* of these preconditions matches we can perform the fold.</span></div>
<div class="line"><a name="l03964"></a><span class="lineno"> 3964</span>&#160;      <a class="code" href="classllvm_1_1Constant.html">Constant</a> *NewShAmtSplat = NewShAmt-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a1bc022868b23918efa44df511f4d5b61">isVectorTy</a>()</div>
<div class="line"><a name="l03965"></a><span class="lineno"> 3965</span>&#160;                                    ? NewShAmt-&gt;getSplatValue()</div>
<div class="line"><a name="l03966"></a><span class="lineno"> 3966</span>&#160;                                    : NewShAmt;</div>
<div class="line"><a name="l03967"></a><span class="lineno"> 3967</span>&#160;      <span class="comment">// If it&#39;s edge-case shift (by 0 or by WidestBitWidth-1) we can fold.</span></div>
<div class="line"><a name="l03968"></a><span class="lineno"> 3968</span>&#160;      <span class="keywordflow">if</span> (NewShAmtSplat &amp;&amp;</div>
<div class="line"><a name="l03969"></a><span class="lineno"> 3969</span>&#160;          (NewShAmtSplat-&gt;<a class="code" href="classllvm_1_1Constant.html#ae4b6abe77abf42fb02081a6cc41a0132">isNullValue</a>() ||</div>
<div class="line"><a name="l03970"></a><span class="lineno"> 3970</span>&#160;           NewShAmtSplat-&gt;<a class="code" href="classllvm_1_1Constant.html#a90b7d2d0eb9eb04c4d9e60c0fabb1efb">getUniqueInteger</a>() == WidestBitWidth - 1))</div>
<div class="line"><a name="l03971"></a><span class="lineno"> 3971</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l03972"></a><span class="lineno"> 3972</span>&#160;      <span class="comment">// We consider *min* leading zeros so a single outlier</span></div>
<div class="line"><a name="l03973"></a><span class="lineno"> 3973</span>&#160;      <span class="comment">// blocks the transform as opposed to allowing it.</span></div>
<div class="line"><a name="l03974"></a><span class="lineno"> 3974</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = dyn_cast&lt;Constant&gt;(NarrowestShift-&gt;getOperand(0))) {</div>
<div class="line"><a name="l03975"></a><span class="lineno"> 3975</span>&#160;        <a class="code" href="structllvm_1_1KnownBits.html">KnownBits</a> Known = <a class="code" href="namespacellvm.html#aa1f8f0633edd8b9a1c5ec15bb9fc5640">computeKnownBits</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, SQ.DL);</div>
<div class="line"><a name="l03976"></a><span class="lineno"> 3976</span>&#160;        <span class="keywordtype">unsigned</span> MinLeadZero = Known.<a class="code" href="structllvm_1_1KnownBits.html#a7f47812e8e75b0616a97d7004e5fb909">countMinLeadingZeros</a>();</div>
<div class="line"><a name="l03977"></a><span class="lineno"> 3977</span>&#160;        <span class="comment">// If the value being shifted has at most lowest bit set we can fold.</span></div>
<div class="line"><a name="l03978"></a><span class="lineno"> 3978</span>&#160;        <span class="keywordtype">unsigned</span> MaxActiveBits = Known.<a class="code" href="structllvm_1_1KnownBits.html#a4fdc09049a61f952b5d52788dbd2f69b">getBitWidth</a>() - MinLeadZero;</div>
<div class="line"><a name="l03979"></a><span class="lineno"> 3979</span>&#160;        <span class="keywordflow">if</span> (MaxActiveBits &lt;= 1)</div>
<div class="line"><a name="l03980"></a><span class="lineno"> 3980</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l03981"></a><span class="lineno"> 3981</span>&#160;        <span class="comment">// Precondition:  NewShAmt u&lt;= countLeadingZeros(C)</span></div>
<div class="line"><a name="l03982"></a><span class="lineno"> 3982</span>&#160;        <span class="keywordflow">if</span> (NewShAmtSplat &amp;&amp; NewShAmtSplat-&gt;<a class="code" href="classllvm_1_1Constant.html#a90b7d2d0eb9eb04c4d9e60c0fabb1efb">getUniqueInteger</a>().<a class="code" href="classllvm_1_1APInt.html#aca14d9ec64ba4ab7fb2cef37c57d9ce4">ule</a>(MinLeadZero))</div>
<div class="line"><a name="l03983"></a><span class="lineno"> 3983</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l03984"></a><span class="lineno"> 3984</span>&#160;      }</div>
<div class="line"><a name="l03985"></a><span class="lineno"> 3985</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = dyn_cast&lt;Constant&gt;(WidestShift-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0))) {</div>
<div class="line"><a name="l03986"></a><span class="lineno"> 3986</span>&#160;        <a class="code" href="structllvm_1_1KnownBits.html">KnownBits</a> Known = <a class="code" href="namespacellvm.html#aa1f8f0633edd8b9a1c5ec15bb9fc5640">computeKnownBits</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, SQ.DL);</div>
<div class="line"><a name="l03987"></a><span class="lineno"> 3987</span>&#160;        <span class="keywordtype">unsigned</span> MinLeadZero = Known.<a class="code" href="structllvm_1_1KnownBits.html#a7f47812e8e75b0616a97d7004e5fb909">countMinLeadingZeros</a>();</div>
<div class="line"><a name="l03988"></a><span class="lineno"> 3988</span>&#160;        <span class="comment">// If the value being shifted has at most lowest bit set we can fold.</span></div>
<div class="line"><a name="l03989"></a><span class="lineno"> 3989</span>&#160;        <span class="keywordtype">unsigned</span> MaxActiveBits = Known.<a class="code" href="structllvm_1_1KnownBits.html#a4fdc09049a61f952b5d52788dbd2f69b">getBitWidth</a>() - MinLeadZero;</div>
<div class="line"><a name="l03990"></a><span class="lineno"> 3990</span>&#160;        <span class="keywordflow">if</span> (MaxActiveBits &lt;= 1)</div>
<div class="line"><a name="l03991"></a><span class="lineno"> 3991</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l03992"></a><span class="lineno"> 3992</span>&#160;        <span class="comment">// Precondition:  ((WidestBitWidth-1)-NewShAmt) u&lt;= countLeadingZeros(C)</span></div>
<div class="line"><a name="l03993"></a><span class="lineno"> 3993</span>&#160;        <span class="keywordflow">if</span> (NewShAmtSplat) {</div>
<div class="line"><a name="l03994"></a><span class="lineno"> 3994</span>&#160;          <a class="code" href="classllvm_1_1APInt.html">APInt</a> AdjNewShAmt =</div>
<div class="line"><a name="l03995"></a><span class="lineno"> 3995</span>&#160;              (WidestBitWidth - 1) - NewShAmtSplat-&gt;<a class="code" href="classllvm_1_1Constant.html#a90b7d2d0eb9eb04c4d9e60c0fabb1efb">getUniqueInteger</a>();</div>
<div class="line"><a name="l03996"></a><span class="lineno"> 3996</span>&#160;          <span class="keywordflow">if</span> (AdjNewShAmt.<a class="code" href="classllvm_1_1APInt.html#aca14d9ec64ba4ab7fb2cef37c57d9ce4">ule</a>(MinLeadZero))</div>
<div class="line"><a name="l03997"></a><span class="lineno"> 3997</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l03998"></a><span class="lineno"> 3998</span>&#160;        }</div>
<div class="line"><a name="l03999"></a><span class="lineno"> 3999</span>&#160;      }</div>
<div class="line"><a name="l04000"></a><span class="lineno"> 4000</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="comment">// Can&#39;t tell if it&#39;s ok.</span></div>
<div class="line"><a name="l04001"></a><span class="lineno"> 4001</span>&#160;    };</div>
<div class="line"><a name="l04002"></a><span class="lineno"> 4002</span>&#160;    <span class="keywordflow">if</span> (!CanFold())</div>
<div class="line"><a name="l04003"></a><span class="lineno"> 4003</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l04004"></a><span class="lineno"> 4004</span>&#160;  }</div>
<div class="line"><a name="l04005"></a><span class="lineno"> 4005</span>&#160; </div>
<div class="line"><a name="l04006"></a><span class="lineno"> 4006</span>&#160;  <span class="comment">// All good, we can do this fold.</span></div>
<div class="line"><a name="l04007"></a><span class="lineno"> 4007</span>&#160;  <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateZExt(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, WidestTy);</div>
<div class="line"><a name="l04008"></a><span class="lineno"> 4008</span>&#160;  <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateZExt(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, WidestTy);</div>
<div class="line"><a name="l04009"></a><span class="lineno"> 4009</span>&#160;  <span class="comment">// The shift is the same that was for X.</span></div>
<div class="line"><a name="l04010"></a><span class="lineno"> 4010</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *T0 = XShiftOpcode == Instruction::BinaryOps::LShr</div>
<div class="line"><a name="l04011"></a><span class="lineno"> 4011</span>&#160;                  ? <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateLShr(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, NewShAmt)</div>
<div class="line"><a name="l04012"></a><span class="lineno"> 4012</span>&#160;                  : <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateShl(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, NewShAmt);</div>
<div class="line"><a name="l04013"></a><span class="lineno"> 4013</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="Mips16ISelLowering_8cpp.html#ac16509a75e3d3fc46b9df1726be486ec">T1</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAnd(T0, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>);</div>
<div class="line"><a name="l04014"></a><span class="lineno"> 4014</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateICmp(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getPredicate(), <a class="code" href="Mips16ISelLowering_8cpp.html#ac16509a75e3d3fc46b9df1726be486ec">T1</a>,</div>
<div class="line"><a name="l04015"></a><span class="lineno"> 4015</span>&#160;                            <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(WidestTy));</div>
<div class="line"><a name="l04016"></a><span class="lineno"> 4016</span>&#160;}</div>
<div class="line"><a name="l04017"></a><span class="lineno"> 4017</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l04018"></a><span class="lineno"> 4018</span>&#160;<span class="comment">/// Fold</span></div>
<div class="line"><a name="l04019"></a><span class="lineno"> 4019</span>&#160;<span class="comment">///   (-1 u/ x) u&lt; y</span></div>
<div class="line"><a name="l04020"></a><span class="lineno"> 4020</span>&#160;<span class="comment">///   ((x * y) ?/ x) != y</span></div>
<div class="line"><a name="l04021"></a><span class="lineno"> 4021</span>&#160;<span class="comment">/// to</span></div>
<div class="line"><a name="l04022"></a><span class="lineno"> 4022</span>&#160;<span class="comment">///   @llvm.?mul.with.overflow(x, y) plus extraction of overflow bit</span></div>
<div class="line"><a name="l04023"></a><span class="lineno"> 4023</span>&#160;<span class="comment">/// Note that the comparison is commutative, while inverted (u&gt;=, ==) predicate</span></div>
<div class="line"><a name="l04024"></a><span class="lineno"> 4024</span>&#160;<span class="comment">/// will mean that we are looking for the opposite answer.</span></div>
<div class="line"><a name="l04025"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombinerImpl.html#a657815d57170937e7e75bee5ecf235ce"> 4025</a></span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="classllvm_1_1InstCombinerImpl.html#a657815d57170937e7e75bee5ecf235ce">InstCombinerImpl::foldMultiplicationOverflowCheck</a>(<a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l04026"></a><span class="lineno"> 4026</span>&#160;  <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">ICmpInst::Predicate</a> Pred;</div>
<div class="line"><a name="l04027"></a><span class="lineno"> 4027</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, *<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>;</div>
<div class="line"><a name="l04028"></a><span class="lineno"> 4028</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="X86PartialReduction_8cpp.html#ae0f503db91504a3f3440ab81260e4134">Mul</a>;</div>
<div class="line"><a name="l04029"></a><span class="lineno"> 4029</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Div;</div>
<div class="line"><a name="l04030"></a><span class="lineno"> 4030</span>&#160;  <span class="keywordtype">bool</span> NeedNegation;</div>
<div class="line"><a name="l04031"></a><span class="lineno"> 4031</span>&#160;  <span class="comment">// Look for: (-1 u/ x) u&lt;/u&gt;= y</span></div>
<div class="line"><a name="l04032"></a><span class="lineno"> 4032</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.isEquality() &amp;&amp;</div>
<div class="line"><a name="l04033"></a><span class="lineno"> 4033</span>&#160;      <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a3de757fc0f1dc7f8f8e9211b32ac106d">m_c_ICmp</a>(Pred,</div>
<div class="line"><a name="l04034"></a><span class="lineno"> 4034</span>&#160;                         <a class="code" href="namespacellvm_1_1PatternMatch.html#a575c2299c6f145ba3a12efa20829db43">m_CombineAnd</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#abd9323a37d0beb24f9975b4d36994b24">m_UDiv</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#aaea0d5ebb8b57ddde2095f80e2e94bb2">m_AllOnes</a>(), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>))),</div>
<div class="line"><a name="l04035"></a><span class="lineno"> 4035</span>&#160;                                      <a class="code" href="namespacellvm_1_1PatternMatch.html#a04353aa48874f9bda89ff9059cd1a5a6">m_Instruction</a>(Div)),</div>
<div class="line"><a name="l04036"></a><span class="lineno"> 4036</span>&#160;                         <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>)))) {</div>
<div class="line"><a name="l04037"></a><span class="lineno"> 4037</span>&#160;    <a class="code" href="X86PartialReduction_8cpp.html#ae0f503db91504a3f3440ab81260e4134">Mul</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l04038"></a><span class="lineno"> 4038</span>&#160; </div>
<div class="line"><a name="l04039"></a><span class="lineno"> 4039</span>&#160;    <span class="comment">// Are we checking that overflow does not happen, or does happen?</span></div>
<div class="line"><a name="l04040"></a><span class="lineno"> 4040</span>&#160;    <span class="keywordflow">switch</span> (Pred) {</div>
<div class="line"><a name="l04041"></a><span class="lineno"> 4041</span>&#160;    <span class="keywordflow">case</span> ICmpInst::Predicate::ICMP_ULT:</div>
<div class="line"><a name="l04042"></a><span class="lineno"> 4042</span>&#160;      NeedNegation = <span class="keyword">false</span>;</div>
<div class="line"><a name="l04043"></a><span class="lineno"> 4043</span>&#160;      <span class="keywordflow">break</span>; <span class="comment">// OK</span></div>
<div class="line"><a name="l04044"></a><span class="lineno"> 4044</span>&#160;    <span class="keywordflow">case</span> ICmpInst::Predicate::ICMP_UGE:</div>
<div class="line"><a name="l04045"></a><span class="lineno"> 4045</span>&#160;      NeedNegation = <span class="keyword">true</span>;</div>
<div class="line"><a name="l04046"></a><span class="lineno"> 4046</span>&#160;      <span class="keywordflow">break</span>; <span class="comment">// OK</span></div>
<div class="line"><a name="l04047"></a><span class="lineno"> 4047</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l04048"></a><span class="lineno"> 4048</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>; <span class="comment">// Wrong predicate.</span></div>
<div class="line"><a name="l04049"></a><span class="lineno"> 4049</span>&#160;    }</div>
<div class="line"><a name="l04050"></a><span class="lineno"> 4050</span>&#160;  } <span class="keywordflow">else</span> <span class="comment">// Look for: ((x * y) / x) !=/== y</span></div>
<div class="line"><a name="l04051"></a><span class="lineno"> 4051</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.isEquality() &amp;&amp;</div>
<div class="line"><a name="l04052"></a><span class="lineno"> 4052</span>&#160;          <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>,</div>
<div class="line"><a name="l04053"></a><span class="lineno"> 4053</span>&#160;                <a class="code" href="namespacellvm_1_1PatternMatch.html#a3de757fc0f1dc7f8f8e9211b32ac106d">m_c_ICmp</a>(Pred, <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>),</div>
<div class="line"><a name="l04054"></a><span class="lineno"> 4054</span>&#160;                         <a class="code" href="namespacellvm_1_1PatternMatch.html#a575c2299c6f145ba3a12efa20829db43">m_CombineAnd</a>(</div>
<div class="line"><a name="l04055"></a><span class="lineno"> 4055</span>&#160;                             <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a3d1ce4e87339c423692359ff22209b42">m_IDiv</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a575c2299c6f145ba3a12efa20829db43">m_CombineAnd</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a8f3259c7db0ce698876fe79f45b80a32">m_c_Mul</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a94bf3939e0bea91b481096473d0e549f">m_Deferred</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>),</div>
<div class="line"><a name="l04056"></a><span class="lineno"> 4056</span>&#160;                                                                  <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>)),</div>
<div class="line"><a name="l04057"></a><span class="lineno"> 4057</span>&#160;                                                          <a class="code" href="namespacellvm_1_1PatternMatch.html#a04353aa48874f9bda89ff9059cd1a5a6">m_Instruction</a>(<a class="code" href="X86PartialReduction_8cpp.html#ae0f503db91504a3f3440ab81260e4134">Mul</a>)),</div>
<div class="line"><a name="l04058"></a><span class="lineno"> 4058</span>&#160;                                             <a class="code" href="namespacellvm_1_1PatternMatch.html#a94bf3939e0bea91b481096473d0e549f">m_Deferred</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>))),</div>
<div class="line"><a name="l04059"></a><span class="lineno"> 4059</span>&#160;                             <a class="code" href="namespacellvm_1_1PatternMatch.html#a04353aa48874f9bda89ff9059cd1a5a6">m_Instruction</a>(Div))))) {</div>
<div class="line"><a name="l04060"></a><span class="lineno"> 4060</span>&#160;    NeedNegation = Pred == ICmpInst::Predicate::ICMP_EQ;</div>
<div class="line"><a name="l04061"></a><span class="lineno"> 4061</span>&#160;  } <span class="keywordflow">else</span></div>
<div class="line"><a name="l04062"></a><span class="lineno"> 4062</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l04063"></a><span class="lineno"> 4063</span>&#160; </div>
<div class="line"><a name="l04064"></a><span class="lineno"> 4064</span>&#160;  <a class="code" href="classllvm_1_1IRBuilderBase_1_1InsertPointGuard.html">BuilderTy::InsertPointGuard</a> Guard(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>);</div>
<div class="line"><a name="l04065"></a><span class="lineno"> 4065</span>&#160;  <span class="comment">// If the pattern included (x * y), we&#39;ll want to insert new instructions</span></div>
<div class="line"><a name="l04066"></a><span class="lineno"> 4066</span>&#160;  <span class="comment">// right before that original multiplication so that we can replace it.</span></div>
<div class="line"><a name="l04067"></a><span class="lineno"> 4067</span>&#160;  <span class="keywordtype">bool</span> MulHadOtherUses = <a class="code" href="X86PartialReduction_8cpp.html#ae0f503db91504a3f3440ab81260e4134">Mul</a> &amp;&amp; !<a class="code" href="X86PartialReduction_8cpp.html#ae0f503db91504a3f3440ab81260e4134">Mul</a>-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>();</div>
<div class="line"><a name="l04068"></a><span class="lineno"> 4068</span>&#160;  <span class="keywordflow">if</span> (MulHadOtherUses)</div>
<div class="line"><a name="l04069"></a><span class="lineno"> 4069</span>&#160;    <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(<a class="code" href="X86PartialReduction_8cpp.html#ae0f503db91504a3f3440ab81260e4134">Mul</a>);</div>
<div class="line"><a name="l04070"></a><span class="lineno"> 4070</span>&#160; </div>
<div class="line"><a name="l04071"></a><span class="lineno"> 4071</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> = <a class="code" href="namespacellvm_1_1Intrinsic.html#aefa39f6b622360ce4e947feb9f671b73">Intrinsic::getDeclaration</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getModule(),</div>
<div class="line"><a name="l04072"></a><span class="lineno"> 4072</span>&#160;                                          Div-&gt;<a class="code" href="classllvm_1_1Instruction.html#ab4e05d690df389b8b1477c90387b575f">getOpcode</a>() == Instruction::UDiv</div>
<div class="line"><a name="l04073"></a><span class="lineno"> 4073</span>&#160;                                              ? Intrinsic::umul_with_overflow</div>
<div class="line"><a name="l04074"></a><span class="lineno"> 4074</span>&#160;                                              : Intrinsic::smul_with_overflow,</div>
<div class="line"><a name="l04075"></a><span class="lineno"> 4075</span>&#160;                                          <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getType());</div>
<div class="line"><a name="l04076"></a><span class="lineno"> 4076</span>&#160;  <a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *Call = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCall(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, {<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>}, <span class="stringliteral">&quot;mul&quot;</span>);</div>
<div class="line"><a name="l04077"></a><span class="lineno"> 4077</span>&#160; </div>
<div class="line"><a name="l04078"></a><span class="lineno"> 4078</span>&#160;  <span class="comment">// If the multiplication was used elsewhere, to ensure that we don&#39;t leave</span></div>
<div class="line"><a name="l04079"></a><span class="lineno"> 4079</span>&#160;  <span class="comment">// &quot;duplicate&quot; instructions, replace uses of that original multiplication</span></div>
<div class="line"><a name="l04080"></a><span class="lineno"> 4080</span>&#160;  <span class="comment">// with the multiplication result from the with.overflow intrinsic.</span></div>
<div class="line"><a name="l04081"></a><span class="lineno"> 4081</span>&#160;  <span class="keywordflow">if</span> (MulHadOtherUses)</div>
<div class="line"><a name="l04082"></a><span class="lineno"> 4082</span>&#160;    replaceInstUsesWith(*<a class="code" href="X86PartialReduction_8cpp.html#ae0f503db91504a3f3440ab81260e4134">Mul</a>, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateExtractValue(Call, 0, <span class="stringliteral">&quot;mul.val&quot;</span>));</div>
<div class="line"><a name="l04083"></a><span class="lineno"> 4083</span>&#160; </div>
<div class="line"><a name="l04084"></a><span class="lineno"> 4084</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Res = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateExtractValue(Call, 1, <span class="stringliteral">&quot;mul.ov&quot;</span>);</div>
<div class="line"><a name="l04085"></a><span class="lineno"> 4085</span>&#160;  <span class="keywordflow">if</span> (NeedNegation) <span class="comment">// This technically increases instruction count.</span></div>
<div class="line"><a name="l04086"></a><span class="lineno"> 4086</span>&#160;    Res = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateNot(Res, <span class="stringliteral">&quot;mul.not.ov&quot;</span>);</div>
<div class="line"><a name="l04087"></a><span class="lineno"> 4087</span>&#160; </div>
<div class="line"><a name="l04088"></a><span class="lineno"> 4088</span>&#160;  <span class="comment">// If we replaced the mul, erase it. Do this after all uses of Builder,</span></div>
<div class="line"><a name="l04089"></a><span class="lineno"> 4089</span>&#160;  <span class="comment">// as the mul is used as insertion point.</span></div>
<div class="line"><a name="l04090"></a><span class="lineno"> 4090</span>&#160;  <span class="keywordflow">if</span> (MulHadOtherUses)</div>
<div class="line"><a name="l04091"></a><span class="lineno"> 4091</span>&#160;    eraseInstFromFunction(*<a class="code" href="X86PartialReduction_8cpp.html#ae0f503db91504a3f3440ab81260e4134">Mul</a>);</div>
<div class="line"><a name="l04092"></a><span class="lineno"> 4092</span>&#160; </div>
<div class="line"><a name="l04093"></a><span class="lineno"> 4093</span>&#160;  <span class="keywordflow">return</span> Res;</div>
<div class="line"><a name="l04094"></a><span class="lineno"> 4094</span>&#160;}</div>
<div class="line"><a name="l04095"></a><span class="lineno"> 4095</span>&#160; </div>
<div class="line"><a name="l04096"></a><span class="lineno"><a class="line" href="InstCombineCompares_8cpp.html#a455c6b1d87087b9e66b60afaf19e67fb"> 4096</a></span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="InstCombineCompares_8cpp.html#a455c6b1d87087b9e66b60afaf19e67fb">foldICmpXNegX</a>(<a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l04097"></a><span class="lineno"> 4097</span>&#160;  <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">CmpInst::Predicate</a> Pred;</div>
<div class="line"><a name="l04098"></a><span class="lineno"> 4098</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>;</div>
<div class="line"><a name="l04099"></a><span class="lineno"> 4099</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a3de757fc0f1dc7f8f8e9211b32ac106d">m_c_ICmp</a>(Pred, <a class="code" href="namespacellvm_1_1PatternMatch.html#ab50076cb704b1bd42c536d9f51c5100e">m_NSWNeg</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>)), <a class="code" href="namespacellvm_1_1PatternMatch.html#a94bf3939e0bea91b481096473d0e549f">m_Deferred</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>))))</div>
<div class="line"><a name="l04100"></a><span class="lineno"> 4100</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l04101"></a><span class="lineno"> 4101</span>&#160; </div>
<div class="line"><a name="l04102"></a><span class="lineno"> 4102</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1CmpInst.html#a3712279d70deeec90a93db09deb12d02">ICmpInst::isSigned</a>(Pred))</div>
<div class="line"><a name="l04103"></a><span class="lineno"> 4103</span>&#160;    Pred = <a class="code" href="classllvm_1_1CmpInst.html#a49a2d8f483ea08a3d6ea75f90c640d76">ICmpInst::getSwappedPredicate</a>(Pred);</div>
<div class="line"><a name="l04104"></a><span class="lineno"> 4104</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1CmpInst.html#af206a3d6f58d9e53b074460f0d1ecb86">ICmpInst::isUnsigned</a>(Pred))</div>
<div class="line"><a name="l04105"></a><span class="lineno"> 4105</span>&#160;    Pred = <a class="code" href="classllvm_1_1ICmpInst.html#a9d5f70171d811078c4d263811f13c121">ICmpInst::getSignedPredicate</a>(Pred);</div>
<div class="line"><a name="l04106"></a><span class="lineno"> 4106</span>&#160;  <span class="comment">// else for equality-comparisons just keep the predicate.</span></div>
<div class="line"><a name="l04107"></a><span class="lineno"> 4107</span>&#160; </div>
<div class="line"><a name="l04108"></a><span class="lineno"> 4108</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1CmpInst.html#a3b4a54b076454fec43b13554b28252a9">ICmpInst::Create</a>(Instruction::ICmp, Pred, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>,</div>
<div class="line"><a name="l04109"></a><span class="lineno"> 4109</span>&#160;                          <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getType()), <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getName());</div>
<div class="line"><a name="l04110"></a><span class="lineno"> 4110</span>&#160;}</div>
<div class="line"><a name="l04111"></a><span class="lineno"> 4111</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l04112"></a><span class="lineno"> 4112</span>&#160;<span class="comment">/// Try to fold icmp (binop), X or icmp X, (binop).</span></div>
<div class="line"><a name="l04113"></a><span class="lineno"> 4113</span>&#160;<span class="comment">/// TODO: A large part of this logic is duplicated in InstSimplify&#39;s</span></div>
<div class="line"><a name="l04114"></a><span class="lineno"> 4114</span>&#160;<span class="comment">/// simplifyICmpWithBinOp(). We should be able to share that and avoid the code</span></div>
<div class="line"><a name="l04115"></a><span class="lineno"> 4115</span>&#160;<span class="comment">/// duplication.</span></div>
<div class="line"><a name="l04116"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombinerImpl.html#a36ef4128d8b08242e337bcbed0dce3c8"> 4116</a></span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombinerImpl.html#a36ef4128d8b08242e337bcbed0dce3c8">InstCombinerImpl::foldICmpBinOp</a>(<a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>,</div>
<div class="line"><a name="l04117"></a><span class="lineno"> 4117</span>&#160;                                             <span class="keyword">const</span> <a class="code" href="structllvm_1_1SimplifyQuery.html">SimplifyQuery</a> &amp;SQ) {</div>
<div class="line"><a name="l04118"></a><span class="lineno"> 4118</span>&#160;  <span class="keyword">const</span> <a class="code" href="structllvm_1_1SimplifyQuery.html">SimplifyQuery</a> Q = SQ.<a class="code" href="structllvm_1_1SimplifyQuery.html#aaf05c1194f5c7869a00434c13c46c228">getWithInstruction</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l04119"></a><span class="lineno"> 4119</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Op0 = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(0), *Op1 = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(1);</div>
<div class="line"><a name="l04120"></a><span class="lineno"> 4120</span>&#160; </div>
<div class="line"><a name="l04121"></a><span class="lineno"> 4121</span>&#160;  <span class="comment">// Special logic for binary operators.</span></div>
<div class="line"><a name="l04122"></a><span class="lineno"> 4122</span>&#160;  <a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> *BO0 = dyn_cast&lt;BinaryOperator&gt;(Op0);</div>
<div class="line"><a name="l04123"></a><span class="lineno"> 4123</span>&#160;  <a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> *BO1 = dyn_cast&lt;BinaryOperator&gt;(Op1);</div>
<div class="line"><a name="l04124"></a><span class="lineno"> 4124</span>&#160;  <span class="keywordflow">if</span> (!BO0 &amp;&amp; !BO1)</div>
<div class="line"><a name="l04125"></a><span class="lineno"> 4125</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l04126"></a><span class="lineno"> 4126</span>&#160; </div>
<div class="line"><a name="l04127"></a><span class="lineno"> 4127</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *NewICmp = <a class="code" href="InstCombineCompares_8cpp.html#a455c6b1d87087b9e66b60afaf19e67fb">foldICmpXNegX</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l04128"></a><span class="lineno"> 4128</span>&#160;    <span class="keywordflow">return</span> NewICmp;</div>
<div class="line"><a name="l04129"></a><span class="lineno"> 4129</span>&#160; </div>
<div class="line"><a name="l04130"></a><span class="lineno"> 4130</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">CmpInst::Predicate</a> Pred = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getPredicate();</div>
<div class="line"><a name="l04131"></a><span class="lineno"> 4131</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>;</div>
<div class="line"><a name="l04132"></a><span class="lineno"> 4132</span>&#160; </div>
<div class="line"><a name="l04133"></a><span class="lineno"> 4133</span>&#160;  <span class="comment">// Convert add-with-unsigned-overflow comparisons into a &#39;not&#39; with compare.</span></div>
<div class="line"><a name="l04134"></a><span class="lineno"> 4134</span>&#160;  <span class="comment">// (Op1 + X) u&lt;/u&gt;= Op1 --&gt; ~Op1 u&lt;/u&gt;= X</span></div>
<div class="line"><a name="l04135"></a><span class="lineno"> 4135</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#ad191220adaaedcfba833985509a17452">m_c_Add</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(Op1), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>)))) &amp;&amp;</div>
<div class="line"><a name="l04136"></a><span class="lineno"> 4136</span>&#160;      (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e">ICmpInst::ICMP_ULT</a> || Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba573bcd571c938fce863525330bbfc4b8">ICmpInst::ICMP_UGE</a>))</div>
<div class="line"><a name="l04137"></a><span class="lineno"> 4137</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateNot(Op1), <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>);</div>
<div class="line"><a name="l04138"></a><span class="lineno"> 4138</span>&#160;  <span class="comment">// Op0 u&gt;/u&lt;= (Op0 + X) --&gt; X u&gt;/u&lt;= ~Op0</span></div>
<div class="line"><a name="l04139"></a><span class="lineno"> 4139</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#ad191220adaaedcfba833985509a17452">m_c_Add</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(Op0), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>)))) &amp;&amp;</div>
<div class="line"><a name="l04140"></a><span class="lineno"> 4140</span>&#160;      (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba607cecdc5172814382033e001ed11fad">ICmpInst::ICMP_UGT</a> || Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bad92f160316221fd4090520bb2b3cefc5">ICmpInst::ICMP_ULE</a>))</div>
<div class="line"><a name="l04141"></a><span class="lineno"> 4141</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateNot(Op0));</div>
<div class="line"><a name="l04142"></a><span class="lineno"> 4142</span>&#160; </div>
<div class="line"><a name="l04143"></a><span class="lineno"> 4143</span>&#160;  {</div>
<div class="line"><a name="l04144"></a><span class="lineno"> 4144</span>&#160;    <span class="comment">// (Op1 + X) + C u&lt;/u&gt;= Op1 --&gt; ~C - X u&lt;/u&gt;= Op1</span></div>
<div class="line"><a name="l04145"></a><span class="lineno"> 4145</span>&#160;    <a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>;</div>
<div class="line"><a name="l04146"></a><span class="lineno"> 4146</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a944c25ac9b73b02a17a20a08a25b9b21">m_Add</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#ad191220adaaedcfba833985509a17452">m_c_Add</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(Op1), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>)),</div>
<div class="line"><a name="l04147"></a><span class="lineno"> 4147</span>&#160;                                  <a class="code" href="namespacellvm_1_1PatternMatch.html#aec0ccdbde0581b3aae7f001634a34d8e">m_ImmConstant</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)))) &amp;&amp;</div>
<div class="line"><a name="l04148"></a><span class="lineno"> 4148</span>&#160;        (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e">ICmpInst::ICMP_ULT</a> || Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba573bcd571c938fce863525330bbfc4b8">ICmpInst::ICMP_UGE</a>)) {</div>
<div class="line"><a name="l04149"></a><span class="lineno"> 4149</span>&#160;      <a class="code" href="classllvm_1_1Constant.html">Constant</a> *C2 = <a class="code" href="classllvm_1_1ConstantExpr.html#a5b43a866f0fca605556f0f69f70c522a">ConstantExpr::getNot</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div>
<div class="line"><a name="l04150"></a><span class="lineno"> 4150</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateSub(C2, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), Op1);</div>
<div class="line"><a name="l04151"></a><span class="lineno"> 4151</span>&#160;    }</div>
<div class="line"><a name="l04152"></a><span class="lineno"> 4152</span>&#160;    <span class="comment">// Op0 u&gt;/u&lt;= (Op0 + X) + C --&gt; Op0 u&gt;/u&lt;= ~C - X</span></div>
<div class="line"><a name="l04153"></a><span class="lineno"> 4153</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a944c25ac9b73b02a17a20a08a25b9b21">m_Add</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#ad191220adaaedcfba833985509a17452">m_c_Add</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(Op0), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>)),</div>
<div class="line"><a name="l04154"></a><span class="lineno"> 4154</span>&#160;                                  <a class="code" href="namespacellvm_1_1PatternMatch.html#aec0ccdbde0581b3aae7f001634a34d8e">m_ImmConstant</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)))) &amp;&amp;</div>
<div class="line"><a name="l04155"></a><span class="lineno"> 4155</span>&#160;        (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba607cecdc5172814382033e001ed11fad">ICmpInst::ICMP_UGT</a> || Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bad92f160316221fd4090520bb2b3cefc5">ICmpInst::ICMP_ULE</a>)) {</div>
<div class="line"><a name="l04156"></a><span class="lineno"> 4156</span>&#160;      <a class="code" href="classllvm_1_1Constant.html">Constant</a> *C2 = <a class="code" href="classllvm_1_1ConstantExpr.html#a5b43a866f0fca605556f0f69f70c522a">ConstantExpr::getNot</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div>
<div class="line"><a name="l04157"></a><span class="lineno"> 4157</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, Op0, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateSub(C2, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>));</div>
<div class="line"><a name="l04158"></a><span class="lineno"> 4158</span>&#160;    }</div>
<div class="line"><a name="l04159"></a><span class="lineno"> 4159</span>&#160;  }</div>
<div class="line"><a name="l04160"></a><span class="lineno"> 4160</span>&#160; </div>
<div class="line"><a name="l04161"></a><span class="lineno"> 4161</span>&#160;  {</div>
<div class="line"><a name="l04162"></a><span class="lineno"> 4162</span>&#160;    <span class="comment">// Similar to above: an unsigned overflow comparison may use offset + mask:</span></div>
<div class="line"><a name="l04163"></a><span class="lineno"> 4163</span>&#160;    <span class="comment">// ((Op1 + C) &amp; C) u&lt;  Op1 --&gt; Op1 != 0</span></div>
<div class="line"><a name="l04164"></a><span class="lineno"> 4164</span>&#160;    <span class="comment">// ((Op1 + C) &amp; C) u&gt;= Op1 --&gt; Op1 == 0</span></div>
<div class="line"><a name="l04165"></a><span class="lineno"> 4165</span>&#160;    <span class="comment">// Op0 u&gt;  ((Op0 + C) &amp; C) --&gt; Op0 != 0</span></div>
<div class="line"><a name="l04166"></a><span class="lineno"> 4166</span>&#160;    <span class="comment">// Op0 u&lt;= ((Op0 + C) &amp; C) --&gt; Op0 == 0</span></div>
<div class="line"><a name="l04167"></a><span class="lineno"> 4167</span>&#160;    <a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> *BO;</div>
<div class="line"><a name="l04168"></a><span class="lineno"> 4168</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>;</div>
<div class="line"><a name="l04169"></a><span class="lineno"> 4169</span>&#160;    <span class="keywordflow">if</span> ((Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e">ICmpInst::ICMP_ULT</a> || Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba573bcd571c938fce863525330bbfc4b8">ICmpInst::ICMP_UGE</a>) &amp;&amp;</div>
<div class="line"><a name="l04170"></a><span class="lineno"> 4170</span>&#160;        <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a427435d4da769ae680a8e77ef89520aa">m_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a43ac4fbaaf63a88eb5ac05f6d3e5649c">m_BinOp</a>(BO), <a class="code" href="namespacellvm_1_1PatternMatch.html#a69cd23c0f1215087c5b006c1bf6222c4">m_LowBitMask</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>))) &amp;&amp;</div>
<div class="line"><a name="l04171"></a><span class="lineno"> 4171</span>&#160;        <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(BO, <a class="code" href="namespacellvm_1_1PatternMatch.html#a944c25ac9b73b02a17a20a08a25b9b21">m_Add</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(Op1), <a class="code" href="namespacellvm_1_1PatternMatch.html#aa4a99c313af96b3b50a9768338a54b2e">m_SpecificIntAllowUndef</a>(*<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)))) {</div>
<div class="line"><a name="l04172"></a><span class="lineno"> 4172</span>&#160;      <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">CmpInst::Predicate</a> NewPred =</div>
<div class="line"><a name="l04173"></a><span class="lineno"> 4173</span>&#160;          Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e">ICmpInst::ICMP_ULT</a> ? <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a> : <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a>;</div>
<div class="line"><a name="l04174"></a><span class="lineno"> 4174</span>&#160;      <a class="code" href="classllvm_1_1Constant.html">Constant</a> *Zero = <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">ConstantInt::getNullValue</a>(Op1-&gt;getType());</div>
<div class="line"><a name="l04175"></a><span class="lineno"> 4175</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(NewPred, Op1, Zero);</div>
<div class="line"><a name="l04176"></a><span class="lineno"> 4176</span>&#160;    }</div>
<div class="line"><a name="l04177"></a><span class="lineno"> 4177</span>&#160; </div>
<div class="line"><a name="l04178"></a><span class="lineno"> 4178</span>&#160;    <span class="keywordflow">if</span> ((Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba607cecdc5172814382033e001ed11fad">ICmpInst::ICMP_UGT</a> || Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bad92f160316221fd4090520bb2b3cefc5">ICmpInst::ICMP_ULE</a>) &amp;&amp;</div>
<div class="line"><a name="l04179"></a><span class="lineno"> 4179</span>&#160;        <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#a427435d4da769ae680a8e77ef89520aa">m_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a43ac4fbaaf63a88eb5ac05f6d3e5649c">m_BinOp</a>(BO), <a class="code" href="namespacellvm_1_1PatternMatch.html#a69cd23c0f1215087c5b006c1bf6222c4">m_LowBitMask</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>))) &amp;&amp;</div>
<div class="line"><a name="l04180"></a><span class="lineno"> 4180</span>&#160;        <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(BO, <a class="code" href="namespacellvm_1_1PatternMatch.html#a944c25ac9b73b02a17a20a08a25b9b21">m_Add</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(Op0), <a class="code" href="namespacellvm_1_1PatternMatch.html#aa4a99c313af96b3b50a9768338a54b2e">m_SpecificIntAllowUndef</a>(*<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)))) {</div>
<div class="line"><a name="l04181"></a><span class="lineno"> 4181</span>&#160;      <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">CmpInst::Predicate</a> NewPred =</div>
<div class="line"><a name="l04182"></a><span class="lineno"> 4182</span>&#160;          Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba607cecdc5172814382033e001ed11fad">ICmpInst::ICMP_UGT</a> ? <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a> : <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a>;</div>
<div class="line"><a name="l04183"></a><span class="lineno"> 4183</span>&#160;      <a class="code" href="classllvm_1_1Constant.html">Constant</a> *Zero = <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">ConstantInt::getNullValue</a>(Op1-&gt;getType());</div>
<div class="line"><a name="l04184"></a><span class="lineno"> 4184</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(NewPred, Op0, Zero);</div>
<div class="line"><a name="l04185"></a><span class="lineno"> 4185</span>&#160;    }</div>
<div class="line"><a name="l04186"></a><span class="lineno"> 4186</span>&#160;  }</div>
<div class="line"><a name="l04187"></a><span class="lineno"> 4187</span>&#160; </div>
<div class="line"><a name="l04188"></a><span class="lineno"> 4188</span>&#160;  <span class="keywordtype">bool</span> NoOp0WrapProblem = <span class="keyword">false</span>, NoOp1WrapProblem = <span class="keyword">false</span>;</div>
<div class="line"><a name="l04189"></a><span class="lineno"> 4189</span>&#160;  <span class="keywordflow">if</span> (BO0 &amp;&amp; isa&lt;OverflowingBinaryOperator&gt;(BO0))</div>
<div class="line"><a name="l04190"></a><span class="lineno"> 4190</span>&#160;    NoOp0WrapProblem =</div>
<div class="line"><a name="l04191"></a><span class="lineno"> 4191</span>&#160;        <a class="code" href="classllvm_1_1ICmpInst.html#aaaeded5d0cab77f531b294638459aca5">ICmpInst::isEquality</a>(Pred) ||</div>
<div class="line"><a name="l04192"></a><span class="lineno"> 4192</span>&#160;        (<a class="code" href="classllvm_1_1CmpInst.html#af206a3d6f58d9e53b074460f0d1ecb86">CmpInst::isUnsigned</a>(Pred) &amp;&amp; BO0-&gt;<a class="code" href="classllvm_1_1Instruction.html#a100c666f9253331dd1d166a863248326">hasNoUnsignedWrap</a>()) ||</div>
<div class="line"><a name="l04193"></a><span class="lineno"> 4193</span>&#160;        (<a class="code" href="classllvm_1_1CmpInst.html#a3712279d70deeec90a93db09deb12d02">CmpInst::isSigned</a>(Pred) &amp;&amp; BO0-&gt;<a class="code" href="classllvm_1_1Instruction.html#a350f4fdc01c770b5cf6a8be2624ae3e5">hasNoSignedWrap</a>());</div>
<div class="line"><a name="l04194"></a><span class="lineno"> 4194</span>&#160;  <span class="keywordflow">if</span> (BO1 &amp;&amp; isa&lt;OverflowingBinaryOperator&gt;(BO1))</div>
<div class="line"><a name="l04195"></a><span class="lineno"> 4195</span>&#160;    NoOp1WrapProblem =</div>
<div class="line"><a name="l04196"></a><span class="lineno"> 4196</span>&#160;        <a class="code" href="classllvm_1_1ICmpInst.html#aaaeded5d0cab77f531b294638459aca5">ICmpInst::isEquality</a>(Pred) ||</div>
<div class="line"><a name="l04197"></a><span class="lineno"> 4197</span>&#160;        (<a class="code" href="classllvm_1_1CmpInst.html#af206a3d6f58d9e53b074460f0d1ecb86">CmpInst::isUnsigned</a>(Pred) &amp;&amp; BO1-&gt;<a class="code" href="classllvm_1_1Instruction.html#a100c666f9253331dd1d166a863248326">hasNoUnsignedWrap</a>()) ||</div>
<div class="line"><a name="l04198"></a><span class="lineno"> 4198</span>&#160;        (<a class="code" href="classllvm_1_1CmpInst.html#a3712279d70deeec90a93db09deb12d02">CmpInst::isSigned</a>(Pred) &amp;&amp; BO1-&gt;<a class="code" href="classllvm_1_1Instruction.html#a350f4fdc01c770b5cf6a8be2624ae3e5">hasNoSignedWrap</a>());</div>
<div class="line"><a name="l04199"></a><span class="lineno"> 4199</span>&#160; </div>
<div class="line"><a name="l04200"></a><span class="lineno"> 4200</span>&#160;  <span class="comment">// Analyze the case when either Op0 or Op1 is an add instruction.</span></div>
<div class="line"><a name="l04201"></a><span class="lineno"> 4201</span>&#160;  <span class="comment">// Op0 = A + B (or A and B are null); Op1 = C + D (or C and D are null).</span></div>
<div class="line"><a name="l04202"></a><span class="lineno"> 4202</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *A = <span class="keyword">nullptr</span>, *<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a> = <span class="keyword">nullptr</span>, *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = <span class="keyword">nullptr</span>, *<a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l04203"></a><span class="lineno"> 4203</span>&#160;  <span class="keywordflow">if</span> (BO0 &amp;&amp; BO0-&gt;<a class="code" href="classllvm_1_1BinaryOperator.html#a31bf07f3f61525486633bc1d0bbaf029">getOpcode</a>() == <a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a2b016c207343046b2bac45e69e76dcec">Instruction::Add</a>) {</div>
<div class="line"><a name="l04204"></a><span class="lineno"> 4204</span>&#160;    A = BO0-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0);</div>
<div class="line"><a name="l04205"></a><span class="lineno"> 4205</span>&#160;    <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a> = BO0-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(1);</div>
<div class="line"><a name="l04206"></a><span class="lineno"> 4206</span>&#160;  }</div>
<div class="line"><a name="l04207"></a><span class="lineno"> 4207</span>&#160;  <span class="keywordflow">if</span> (BO1 &amp;&amp; BO1-&gt;<a class="code" href="classllvm_1_1BinaryOperator.html#a31bf07f3f61525486633bc1d0bbaf029">getOpcode</a>() == <a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a2b016c207343046b2bac45e69e76dcec">Instruction::Add</a>) {</div>
<div class="line"><a name="l04208"></a><span class="lineno"> 4208</span>&#160;    <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = BO1-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0);</div>
<div class="line"><a name="l04209"></a><span class="lineno"> 4209</span>&#160;    <a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a> = BO1-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(1);</div>
<div class="line"><a name="l04210"></a><span class="lineno"> 4210</span>&#160;  }</div>
<div class="line"><a name="l04211"></a><span class="lineno"> 4211</span>&#160; </div>
<div class="line"><a name="l04212"></a><span class="lineno"> 4212</span>&#160;  <span class="comment">// icmp (A+B), A -&gt; icmp B, 0 for equalities or if there is no overflow.</span></div>
<div class="line"><a name="l04213"></a><span class="lineno"> 4213</span>&#160;  <span class="comment">// icmp (A+B), B -&gt; icmp A, 0 for equalities or if there is no overflow.</span></div>
<div class="line"><a name="l04214"></a><span class="lineno"> 4214</span>&#160;  <span class="keywordflow">if</span> ((A == Op1 || <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a> == Op1) &amp;&amp; NoOp0WrapProblem)</div>
<div class="line"><a name="l04215"></a><span class="lineno"> 4215</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, A == Op1 ? <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a> : A,</div>
<div class="line"><a name="l04216"></a><span class="lineno"> 4216</span>&#160;                        <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(Op1-&gt;getType()));</div>
<div class="line"><a name="l04217"></a><span class="lineno"> 4217</span>&#160; </div>
<div class="line"><a name="l04218"></a><span class="lineno"> 4218</span>&#160;  <span class="comment">// icmp C, (C+D) -&gt; icmp 0, D for equalities or if there is no overflow.</span></div>
<div class="line"><a name="l04219"></a><span class="lineno"> 4219</span>&#160;  <span class="comment">// icmp D, (C+D) -&gt; icmp 0, C for equalities or if there is no overflow.</span></div>
<div class="line"><a name="l04220"></a><span class="lineno"> 4220</span>&#160;  <span class="keywordflow">if</span> ((<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> == Op0 || <a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a> == Op0) &amp;&amp; NoOp1WrapProblem)</div>
<div class="line"><a name="l04221"></a><span class="lineno"> 4221</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(Op0-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()),</div>
<div class="line"><a name="l04222"></a><span class="lineno"> 4222</span>&#160;                        <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> == Op0 ? <a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a> : <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div>
<div class="line"><a name="l04223"></a><span class="lineno"> 4223</span>&#160; </div>
<div class="line"><a name="l04224"></a><span class="lineno"> 4224</span>&#160;  <span class="comment">// icmp (A+B), (A+D) -&gt; icmp B, D for equalities or if there is no overflow.</span></div>
<div class="line"><a name="l04225"></a><span class="lineno"> 4225</span>&#160;  <span class="keywordflow">if</span> (A &amp;&amp; <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> &amp;&amp; (A == <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> || A == <a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a> || <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a> == <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> || <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a> == <a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>) &amp;&amp; NoOp0WrapProblem &amp;&amp;</div>
<div class="line"><a name="l04226"></a><span class="lineno"> 4226</span>&#160;      NoOp1WrapProblem) {</div>
<div class="line"><a name="l04227"></a><span class="lineno"> 4227</span>&#160;    <span class="comment">// Determine Y and Z in the form icmp (X+Y), (X+Z).</span></div>
<div class="line"><a name="l04228"></a><span class="lineno"> 4228</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, *<a class="code" href="namespacellvm_1_1ARCCC.html#a9a81d9a1b379cf08150b22e81d7dd006aceb189306b941666e679bf556207c1e4">Z</a>;</div>
<div class="line"><a name="l04229"></a><span class="lineno"> 4229</span>&#160;    <span class="keywordflow">if</span> (A == <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>) {</div>
<div class="line"><a name="l04230"></a><span class="lineno"> 4230</span>&#160;      <span class="comment">// C + B == C + D  -&gt;  B == D</span></div>
<div class="line"><a name="l04231"></a><span class="lineno"> 4231</span>&#160;      <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a> = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>;</div>
<div class="line"><a name="l04232"></a><span class="lineno"> 4232</span>&#160;      <a class="code" href="namespacellvm_1_1ARCCC.html#a9a81d9a1b379cf08150b22e81d7dd006aceb189306b941666e679bf556207c1e4">Z</a> = <a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>;</div>
<div class="line"><a name="l04233"></a><span class="lineno"> 4233</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (A == <a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>) {</div>
<div class="line"><a name="l04234"></a><span class="lineno"> 4234</span>&#160;      <span class="comment">// D + B == C + D  -&gt;  B == C</span></div>
<div class="line"><a name="l04235"></a><span class="lineno"> 4235</span>&#160;      <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a> = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>;</div>
<div class="line"><a name="l04236"></a><span class="lineno"> 4236</span>&#160;      <a class="code" href="namespacellvm_1_1ARCCC.html#a9a81d9a1b379cf08150b22e81d7dd006aceb189306b941666e679bf556207c1e4">Z</a> = <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>;</div>
<div class="line"><a name="l04237"></a><span class="lineno"> 4237</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a> == <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>) {</div>
<div class="line"><a name="l04238"></a><span class="lineno"> 4238</span>&#160;      <span class="comment">// A + C == C + D  -&gt;  A == D</span></div>
<div class="line"><a name="l04239"></a><span class="lineno"> 4239</span>&#160;      <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a> = A;</div>
<div class="line"><a name="l04240"></a><span class="lineno"> 4240</span>&#160;      <a class="code" href="namespacellvm_1_1ARCCC.html#a9a81d9a1b379cf08150b22e81d7dd006aceb189306b941666e679bf556207c1e4">Z</a> = <a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>;</div>
<div class="line"><a name="l04241"></a><span class="lineno"> 4241</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04242"></a><span class="lineno"> 4242</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a> == <a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>);</div>
<div class="line"><a name="l04243"></a><span class="lineno"> 4243</span>&#160;      <span class="comment">// A + D == C + D  -&gt;  A == C</span></div>
<div class="line"><a name="l04244"></a><span class="lineno"> 4244</span>&#160;      <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a> = A;</div>
<div class="line"><a name="l04245"></a><span class="lineno"> 4245</span>&#160;      <a class="code" href="namespacellvm_1_1ARCCC.html#a9a81d9a1b379cf08150b22e81d7dd006aceb189306b941666e679bf556207c1e4">Z</a> = <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>;</div>
<div class="line"><a name="l04246"></a><span class="lineno"> 4246</span>&#160;    }</div>
<div class="line"><a name="l04247"></a><span class="lineno"> 4247</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, <a class="code" href="namespacellvm_1_1ARCCC.html#a9a81d9a1b379cf08150b22e81d7dd006aceb189306b941666e679bf556207c1e4">Z</a>);</div>
<div class="line"><a name="l04248"></a><span class="lineno"> 4248</span>&#160;  }</div>
<div class="line"><a name="l04249"></a><span class="lineno"> 4249</span>&#160; </div>
<div class="line"><a name="l04250"></a><span class="lineno"> 4250</span>&#160;  <span class="comment">// icmp slt (A + -1), Op1 -&gt; icmp sle A, Op1</span></div>
<div class="line"><a name="l04251"></a><span class="lineno"> 4251</span>&#160;  <span class="keywordflow">if</span> (A &amp;&amp; NoOp0WrapProblem &amp;&amp; Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba15ae464950ac676919c2f0c7aafc706c">CmpInst::ICMP_SLT</a> &amp;&amp;</div>
<div class="line"><a name="l04252"></a><span class="lineno"> 4252</span>&#160;      <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#aaea0d5ebb8b57ddde2095f80e2e94bb2">m_AllOnes</a>()))</div>
<div class="line"><a name="l04253"></a><span class="lineno"> 4253</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba2751d6136a2819749dcef65dc19a4246">CmpInst::ICMP_SLE</a>, A, Op1);</div>
<div class="line"><a name="l04254"></a><span class="lineno"> 4254</span>&#160; </div>
<div class="line"><a name="l04255"></a><span class="lineno"> 4255</span>&#160;  <span class="comment">// icmp sge (A + -1), Op1 -&gt; icmp sgt A, Op1</span></div>
<div class="line"><a name="l04256"></a><span class="lineno"> 4256</span>&#160;  <span class="keywordflow">if</span> (A &amp;&amp; NoOp0WrapProblem &amp;&amp; Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac1aa7b798ba11d2e497d5cce6ce6d3dc">CmpInst::ICMP_SGE</a> &amp;&amp;</div>
<div class="line"><a name="l04257"></a><span class="lineno"> 4257</span>&#160;      <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#aaea0d5ebb8b57ddde2095f80e2e94bb2">m_AllOnes</a>()))</div>
<div class="line"><a name="l04258"></a><span class="lineno"> 4258</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba720a42e85f7e981afd61e28473b0000a">CmpInst::ICMP_SGT</a>, A, Op1);</div>
<div class="line"><a name="l04259"></a><span class="lineno"> 4259</span>&#160; </div>
<div class="line"><a name="l04260"></a><span class="lineno"> 4260</span>&#160;  <span class="comment">// icmp sle (A + 1), Op1 -&gt; icmp slt A, Op1</span></div>
<div class="line"><a name="l04261"></a><span class="lineno"> 4261</span>&#160;  <span class="keywordflow">if</span> (A &amp;&amp; NoOp0WrapProblem &amp;&amp; Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba2751d6136a2819749dcef65dc19a4246">CmpInst::ICMP_SLE</a> &amp;&amp; <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#aebdb2700a77d10ae6f0ce115e23d9f77">m_One</a>()))</div>
<div class="line"><a name="l04262"></a><span class="lineno"> 4262</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba15ae464950ac676919c2f0c7aafc706c">CmpInst::ICMP_SLT</a>, A, Op1);</div>
<div class="line"><a name="l04263"></a><span class="lineno"> 4263</span>&#160; </div>
<div class="line"><a name="l04264"></a><span class="lineno"> 4264</span>&#160;  <span class="comment">// icmp sgt (A + 1), Op1 -&gt; icmp sge A, Op1</span></div>
<div class="line"><a name="l04265"></a><span class="lineno"> 4265</span>&#160;  <span class="keywordflow">if</span> (A &amp;&amp; NoOp0WrapProblem &amp;&amp; Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba720a42e85f7e981afd61e28473b0000a">CmpInst::ICMP_SGT</a> &amp;&amp; <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#aebdb2700a77d10ae6f0ce115e23d9f77">m_One</a>()))</div>
<div class="line"><a name="l04266"></a><span class="lineno"> 4266</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac1aa7b798ba11d2e497d5cce6ce6d3dc">CmpInst::ICMP_SGE</a>, A, Op1);</div>
<div class="line"><a name="l04267"></a><span class="lineno"> 4267</span>&#160; </div>
<div class="line"><a name="l04268"></a><span class="lineno"> 4268</span>&#160;  <span class="comment">// icmp sgt Op0, (C + -1) -&gt; icmp sge Op0, C</span></div>
<div class="line"><a name="l04269"></a><span class="lineno"> 4269</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> &amp;&amp; NoOp1WrapProblem &amp;&amp; Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba720a42e85f7e981afd61e28473b0000a">CmpInst::ICMP_SGT</a> &amp;&amp;</div>
<div class="line"><a name="l04270"></a><span class="lineno"> 4270</span>&#160;      <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#aaea0d5ebb8b57ddde2095f80e2e94bb2">m_AllOnes</a>()))</div>
<div class="line"><a name="l04271"></a><span class="lineno"> 4271</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac1aa7b798ba11d2e497d5cce6ce6d3dc">CmpInst::ICMP_SGE</a>, Op0, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div>
<div class="line"><a name="l04272"></a><span class="lineno"> 4272</span>&#160; </div>
<div class="line"><a name="l04273"></a><span class="lineno"> 4273</span>&#160;  <span class="comment">// icmp sle Op0, (C + -1) -&gt; icmp slt Op0, C</span></div>
<div class="line"><a name="l04274"></a><span class="lineno"> 4274</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> &amp;&amp; NoOp1WrapProblem &amp;&amp; Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba2751d6136a2819749dcef65dc19a4246">CmpInst::ICMP_SLE</a> &amp;&amp;</div>
<div class="line"><a name="l04275"></a><span class="lineno"> 4275</span>&#160;      <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#aaea0d5ebb8b57ddde2095f80e2e94bb2">m_AllOnes</a>()))</div>
<div class="line"><a name="l04276"></a><span class="lineno"> 4276</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba15ae464950ac676919c2f0c7aafc706c">CmpInst::ICMP_SLT</a>, Op0, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div>
<div class="line"><a name="l04277"></a><span class="lineno"> 4277</span>&#160; </div>
<div class="line"><a name="l04278"></a><span class="lineno"> 4278</span>&#160;  <span class="comment">// icmp sge Op0, (C + 1) -&gt; icmp sgt Op0, C</span></div>
<div class="line"><a name="l04279"></a><span class="lineno"> 4279</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> &amp;&amp; NoOp1WrapProblem &amp;&amp; Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac1aa7b798ba11d2e497d5cce6ce6d3dc">CmpInst::ICMP_SGE</a> &amp;&amp; <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#aebdb2700a77d10ae6f0ce115e23d9f77">m_One</a>()))</div>
<div class="line"><a name="l04280"></a><span class="lineno"> 4280</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba720a42e85f7e981afd61e28473b0000a">CmpInst::ICMP_SGT</a>, Op0, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div>
<div class="line"><a name="l04281"></a><span class="lineno"> 4281</span>&#160; </div>
<div class="line"><a name="l04282"></a><span class="lineno"> 4282</span>&#160;  <span class="comment">// icmp slt Op0, (C + 1) -&gt; icmp sle Op0, C</span></div>
<div class="line"><a name="l04283"></a><span class="lineno"> 4283</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> &amp;&amp; NoOp1WrapProblem &amp;&amp; Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba15ae464950ac676919c2f0c7aafc706c">CmpInst::ICMP_SLT</a> &amp;&amp; <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#aebdb2700a77d10ae6f0ce115e23d9f77">m_One</a>()))</div>
<div class="line"><a name="l04284"></a><span class="lineno"> 4284</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba2751d6136a2819749dcef65dc19a4246">CmpInst::ICMP_SLE</a>, Op0, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div>
<div class="line"><a name="l04285"></a><span class="lineno"> 4285</span>&#160; </div>
<div class="line"><a name="l04286"></a><span class="lineno"> 4286</span>&#160;  <span class="comment">// TODO: The subtraction-related identities shown below also hold, but</span></div>
<div class="line"><a name="l04287"></a><span class="lineno"> 4287</span>&#160;  <span class="comment">// canonicalization from (X -nuw 1) to (X + -1) means that the combinations</span></div>
<div class="line"><a name="l04288"></a><span class="lineno"> 4288</span>&#160;  <span class="comment">// wouldn&#39;t happen even if they were implemented.</span></div>
<div class="line"><a name="l04289"></a><span class="lineno"> 4289</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l04290"></a><span class="lineno"> 4290</span>&#160;  <span class="comment">// icmp ult (A - 1), Op1 -&gt; icmp ule A, Op1</span></div>
<div class="line"><a name="l04291"></a><span class="lineno"> 4291</span>&#160;  <span class="comment">// icmp uge (A - 1), Op1 -&gt; icmp ugt A, Op1</span></div>
<div class="line"><a name="l04292"></a><span class="lineno"> 4292</span>&#160;  <span class="comment">// icmp ugt Op0, (C - 1) -&gt; icmp uge Op0, C</span></div>
<div class="line"><a name="l04293"></a><span class="lineno"> 4293</span>&#160;  <span class="comment">// icmp ule Op0, (C - 1) -&gt; icmp ult Op0, C</span></div>
<div class="line"><a name="l04294"></a><span class="lineno"> 4294</span>&#160; </div>
<div class="line"><a name="l04295"></a><span class="lineno"> 4295</span>&#160;  <span class="comment">// icmp ule (A + 1), Op0 -&gt; icmp ult A, Op1</span></div>
<div class="line"><a name="l04296"></a><span class="lineno"> 4296</span>&#160;  <span class="keywordflow">if</span> (A &amp;&amp; NoOp0WrapProblem &amp;&amp; Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bad92f160316221fd4090520bb2b3cefc5">CmpInst::ICMP_ULE</a> &amp;&amp; <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#aebdb2700a77d10ae6f0ce115e23d9f77">m_One</a>()))</div>
<div class="line"><a name="l04297"></a><span class="lineno"> 4297</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e">CmpInst::ICMP_ULT</a>, A, Op1);</div>
<div class="line"><a name="l04298"></a><span class="lineno"> 4298</span>&#160; </div>
<div class="line"><a name="l04299"></a><span class="lineno"> 4299</span>&#160;  <span class="comment">// icmp ugt (A + 1), Op0 -&gt; icmp uge A, Op1</span></div>
<div class="line"><a name="l04300"></a><span class="lineno"> 4300</span>&#160;  <span class="keywordflow">if</span> (A &amp;&amp; NoOp0WrapProblem &amp;&amp; Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba607cecdc5172814382033e001ed11fad">CmpInst::ICMP_UGT</a> &amp;&amp; <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#aebdb2700a77d10ae6f0ce115e23d9f77">m_One</a>()))</div>
<div class="line"><a name="l04301"></a><span class="lineno"> 4301</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba573bcd571c938fce863525330bbfc4b8">CmpInst::ICMP_UGE</a>, A, Op1);</div>
<div class="line"><a name="l04302"></a><span class="lineno"> 4302</span>&#160; </div>
<div class="line"><a name="l04303"></a><span class="lineno"> 4303</span>&#160;  <span class="comment">// icmp uge Op0, (C + 1) -&gt; icmp ugt Op0, C</span></div>
<div class="line"><a name="l04304"></a><span class="lineno"> 4304</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> &amp;&amp; NoOp1WrapProblem &amp;&amp; Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba573bcd571c938fce863525330bbfc4b8">CmpInst::ICMP_UGE</a> &amp;&amp; <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#aebdb2700a77d10ae6f0ce115e23d9f77">m_One</a>()))</div>
<div class="line"><a name="l04305"></a><span class="lineno"> 4305</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba607cecdc5172814382033e001ed11fad">CmpInst::ICMP_UGT</a>, Op0, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div>
<div class="line"><a name="l04306"></a><span class="lineno"> 4306</span>&#160; </div>
<div class="line"><a name="l04307"></a><span class="lineno"> 4307</span>&#160;  <span class="comment">// icmp ult Op0, (C + 1) -&gt; icmp ule Op0, C</span></div>
<div class="line"><a name="l04308"></a><span class="lineno"> 4308</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> &amp;&amp; NoOp1WrapProblem &amp;&amp; Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e">CmpInst::ICMP_ULT</a> &amp;&amp; <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#aebdb2700a77d10ae6f0ce115e23d9f77">m_One</a>()))</div>
<div class="line"><a name="l04309"></a><span class="lineno"> 4309</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bad92f160316221fd4090520bb2b3cefc5">CmpInst::ICMP_ULE</a>, Op0, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div>
<div class="line"><a name="l04310"></a><span class="lineno"> 4310</span>&#160; </div>
<div class="line"><a name="l04311"></a><span class="lineno"> 4311</span>&#160;  <span class="comment">// if C1 has greater magnitude than C2:</span></div>
<div class="line"><a name="l04312"></a><span class="lineno"> 4312</span>&#160;  <span class="comment">//  icmp (A + C1), (C + C2) -&gt; icmp (A + C3), C</span></div>
<div class="line"><a name="l04313"></a><span class="lineno"> 4313</span>&#160;  <span class="comment">//  s.t. C3 = C1 - C2</span></div>
<div class="line"><a name="l04314"></a><span class="lineno"> 4314</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l04315"></a><span class="lineno"> 4315</span>&#160;  <span class="comment">// if C2 has greater magnitude than C1:</span></div>
<div class="line"><a name="l04316"></a><span class="lineno"> 4316</span>&#160;  <span class="comment">//  icmp (A + C1), (C + C2) -&gt; icmp A, (C + C3)</span></div>
<div class="line"><a name="l04317"></a><span class="lineno"> 4317</span>&#160;  <span class="comment">//  s.t. C3 = C2 - C1</span></div>
<div class="line"><a name="l04318"></a><span class="lineno"> 4318</span>&#160;  <span class="keywordflow">if</span> (A &amp;&amp; <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> &amp;&amp; NoOp0WrapProblem &amp;&amp; NoOp1WrapProblem &amp;&amp;</div>
<div class="line"><a name="l04319"></a><span class="lineno"> 4319</span>&#160;      (BO0-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>() || BO1-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>()) &amp;&amp; !<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.isUnsigned()) {</div>
<div class="line"><a name="l04320"></a><span class="lineno"> 4320</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *AP1, *AP2;</div>
<div class="line"><a name="l04321"></a><span class="lineno"> 4321</span>&#160;    <span class="comment">// TODO: Support non-uniform vectors.</span></div>
<div class="line"><a name="l04322"></a><span class="lineno"> 4322</span>&#160;    <span class="comment">// TODO: Allow undef passthrough if B AND D&#39;s element is undef.</span></div>
<div class="line"><a name="l04323"></a><span class="lineno"> 4323</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a0f8629c0ff1db9c384e378b2ca860f0a">m_APIntAllowUndef</a>(AP1)) &amp;&amp; <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a0f8629c0ff1db9c384e378b2ca860f0a">m_APIntAllowUndef</a>(AP2)) &amp;&amp;</div>
<div class="line"><a name="l04324"></a><span class="lineno"> 4324</span>&#160;        AP1-&gt;<a class="code" href="classllvm_1_1APInt.html#a6804d9caf15411f55e7b9e9f397f0422">isNegative</a>() == AP2-&gt;<a class="code" href="classllvm_1_1APInt.html#a6804d9caf15411f55e7b9e9f397f0422">isNegative</a>()) {</div>
<div class="line"><a name="l04325"></a><span class="lineno"> 4325</span>&#160;      <a class="code" href="classllvm_1_1APInt.html">APInt</a> AP1Abs = AP1-&gt;<a class="code" href="classllvm_1_1APInt.html#a38e964f0cadf077725453884734a6c99">abs</a>();</div>
<div class="line"><a name="l04326"></a><span class="lineno"> 4326</span>&#160;      <a class="code" href="classllvm_1_1APInt.html">APInt</a> AP2Abs = AP2-&gt;<a class="code" href="classllvm_1_1APInt.html#a38e964f0cadf077725453884734a6c99">abs</a>();</div>
<div class="line"><a name="l04327"></a><span class="lineno"> 4327</span>&#160;      <span class="keywordflow">if</span> (AP1Abs.<a class="code" href="classllvm_1_1APInt.html#af4b1ccc0b78f9da9f3f3944e06007f1d">uge</a>(AP2Abs)) {</div>
<div class="line"><a name="l04328"></a><span class="lineno"> 4328</span>&#160;        <a class="code" href="classllvm_1_1APInt.html">APInt</a> Diff = *AP1 - *AP2;</div>
<div class="line"><a name="l04329"></a><span class="lineno"> 4329</span>&#160;        <span class="keywordtype">bool</span> HasNUW = BO0-&gt;<a class="code" href="classllvm_1_1Instruction.html#a100c666f9253331dd1d166a863248326">hasNoUnsignedWrap</a>() &amp;&amp; Diff.<a class="code" href="classllvm_1_1APInt.html#aca14d9ec64ba4ab7fb2cef37c57d9ce4">ule</a>(*AP1);</div>
<div class="line"><a name="l04330"></a><span class="lineno"> 4330</span>&#160;        <span class="keywordtype">bool</span> HasNSW = BO0-&gt;<a class="code" href="classllvm_1_1Instruction.html#a350f4fdc01c770b5cf6a8be2624ae3e5">hasNoSignedWrap</a>();</div>
<div class="line"><a name="l04331"></a><span class="lineno"> 4331</span>&#160;        <a class="code" href="classllvm_1_1Constant.html">Constant</a> *C3 = <a class="code" href="classllvm_1_1Constant.html#a0154da1d06b29a1d5649607ae2dfc389">Constant::getIntegerValue</a>(BO0-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>(), Diff);</div>
<div class="line"><a name="l04332"></a><span class="lineno"> 4332</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *NewAdd = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAdd(A, C3, <span class="stringliteral">&quot;&quot;</span>, HasNUW, HasNSW);</div>
<div class="line"><a name="l04333"></a><span class="lineno"> 4333</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, NewAdd, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div>
<div class="line"><a name="l04334"></a><span class="lineno"> 4334</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04335"></a><span class="lineno"> 4335</span>&#160;        <a class="code" href="classllvm_1_1APInt.html">APInt</a> Diff = *AP2 - *AP1;</div>
<div class="line"><a name="l04336"></a><span class="lineno"> 4336</span>&#160;        <span class="keywordtype">bool</span> HasNUW = BO1-&gt;<a class="code" href="classllvm_1_1Instruction.html#a100c666f9253331dd1d166a863248326">hasNoUnsignedWrap</a>() &amp;&amp; Diff.<a class="code" href="classllvm_1_1APInt.html#aca14d9ec64ba4ab7fb2cef37c57d9ce4">ule</a>(*AP2);</div>
<div class="line"><a name="l04337"></a><span class="lineno"> 4337</span>&#160;        <span class="keywordtype">bool</span> HasNSW = BO1-&gt;<a class="code" href="classllvm_1_1Instruction.html#a350f4fdc01c770b5cf6a8be2624ae3e5">hasNoSignedWrap</a>();</div>
<div class="line"><a name="l04338"></a><span class="lineno"> 4338</span>&#160;        <a class="code" href="classllvm_1_1Constant.html">Constant</a> *C3 = <a class="code" href="classllvm_1_1Constant.html#a0154da1d06b29a1d5649607ae2dfc389">Constant::getIntegerValue</a>(BO0-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>(), Diff);</div>
<div class="line"><a name="l04339"></a><span class="lineno"> 4339</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *NewAdd = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAdd(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, C3, <span class="stringliteral">&quot;&quot;</span>, HasNUW, HasNSW);</div>
<div class="line"><a name="l04340"></a><span class="lineno"> 4340</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, A, NewAdd);</div>
<div class="line"><a name="l04341"></a><span class="lineno"> 4341</span>&#160;      }</div>
<div class="line"><a name="l04342"></a><span class="lineno"> 4342</span>&#160;    }</div>
<div class="line"><a name="l04343"></a><span class="lineno"> 4343</span>&#160;    <a class="code" href="classllvm_1_1Constant.html">Constant</a> *Cst1, *Cst2;</div>
<div class="line"><a name="l04344"></a><span class="lineno"> 4344</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#aec0ccdbde0581b3aae7f001634a34d8e">m_ImmConstant</a>(Cst1)) &amp;&amp; <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#aec0ccdbde0581b3aae7f001634a34d8e">m_ImmConstant</a>(Cst2)) &amp;&amp;</div>
<div class="line"><a name="l04345"></a><span class="lineno"> 4345</span>&#160;        <a class="code" href="classllvm_1_1ICmpInst.html#aaaeded5d0cab77f531b294638459aca5">ICmpInst::isEquality</a>(Pred)) {</div>
<div class="line"><a name="l04346"></a><span class="lineno"> 4346</span>&#160;      <a class="code" href="classllvm_1_1Constant.html">Constant</a> *Diff = <a class="code" href="classllvm_1_1ConstantExpr.html#a554ab77949b0a16670a83ec3307501eb">ConstantExpr::getSub</a>(Cst2, Cst1);</div>
<div class="line"><a name="l04347"></a><span class="lineno"> 4347</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *NewAdd = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAdd(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, Diff);</div>
<div class="line"><a name="l04348"></a><span class="lineno"> 4348</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, A, NewAdd);</div>
<div class="line"><a name="l04349"></a><span class="lineno"> 4349</span>&#160;    }</div>
<div class="line"><a name="l04350"></a><span class="lineno"> 4350</span>&#160;  }</div>
<div class="line"><a name="l04351"></a><span class="lineno"> 4351</span>&#160; </div>
<div class="line"><a name="l04352"></a><span class="lineno"> 4352</span>&#160;  <span class="comment">// Analyze the case when either Op0 or Op1 is a sub instruction.</span></div>
<div class="line"><a name="l04353"></a><span class="lineno"> 4353</span>&#160;  <span class="comment">// Op0 = A - B (or A and B are null); Op1 = C - D (or C and D are null).</span></div>
<div class="line"><a name="l04354"></a><span class="lineno"> 4354</span>&#160;  A = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l04355"></a><span class="lineno"> 4355</span>&#160;  <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l04356"></a><span class="lineno"> 4356</span>&#160;  <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l04357"></a><span class="lineno"> 4357</span>&#160;  <a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l04358"></a><span class="lineno"> 4358</span>&#160;  <span class="keywordflow">if</span> (BO0 &amp;&amp; BO0-&gt;<a class="code" href="classllvm_1_1BinaryOperator.html#a31bf07f3f61525486633bc1d0bbaf029">getOpcode</a>() == Instruction::Sub) {</div>
<div class="line"><a name="l04359"></a><span class="lineno"> 4359</span>&#160;    A = BO0-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0);</div>
<div class="line"><a name="l04360"></a><span class="lineno"> 4360</span>&#160;    <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a> = BO0-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(1);</div>
<div class="line"><a name="l04361"></a><span class="lineno"> 4361</span>&#160;  }</div>
<div class="line"><a name="l04362"></a><span class="lineno"> 4362</span>&#160;  <span class="keywordflow">if</span> (BO1 &amp;&amp; BO1-&gt;<a class="code" href="classllvm_1_1BinaryOperator.html#a31bf07f3f61525486633bc1d0bbaf029">getOpcode</a>() == Instruction::Sub) {</div>
<div class="line"><a name="l04363"></a><span class="lineno"> 4363</span>&#160;    <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = BO1-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0);</div>
<div class="line"><a name="l04364"></a><span class="lineno"> 4364</span>&#160;    <a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a> = BO1-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(1);</div>
<div class="line"><a name="l04365"></a><span class="lineno"> 4365</span>&#160;  }</div>
<div class="line"><a name="l04366"></a><span class="lineno"> 4366</span>&#160; </div>
<div class="line"><a name="l04367"></a><span class="lineno"> 4367</span>&#160;  <span class="comment">// icmp (A-B), A -&gt; icmp 0, B for equalities or if there is no overflow.</span></div>
<div class="line"><a name="l04368"></a><span class="lineno"> 4368</span>&#160;  <span class="keywordflow">if</span> (A == Op1 &amp;&amp; NoOp0WrapProblem)</div>
<div class="line"><a name="l04369"></a><span class="lineno"> 4369</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(Op1-&gt;getType()), <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div>
<div class="line"><a name="l04370"></a><span class="lineno"> 4370</span>&#160;  <span class="comment">// icmp C, (C-D) -&gt; icmp D, 0 for equalities or if there is no overflow.</span></div>
<div class="line"><a name="l04371"></a><span class="lineno"> 4371</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> == Op0 &amp;&amp; NoOp1WrapProblem)</div>
<div class="line"><a name="l04372"></a><span class="lineno"> 4372</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, <a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>, <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(Op0-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()));</div>
<div class="line"><a name="l04373"></a><span class="lineno"> 4373</span>&#160; </div>
<div class="line"><a name="l04374"></a><span class="lineno"> 4374</span>&#160;  <span class="comment">// Convert sub-with-unsigned-overflow comparisons into a comparison of args.</span></div>
<div class="line"><a name="l04375"></a><span class="lineno"> 4375</span>&#160;  <span class="comment">// (A - B) u&gt;/u&lt;= A --&gt; B u&gt;/u&lt;= A</span></div>
<div class="line"><a name="l04376"></a><span class="lineno"> 4376</span>&#160;  <span class="keywordflow">if</span> (A == Op1 &amp;&amp; (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba607cecdc5172814382033e001ed11fad">ICmpInst::ICMP_UGT</a> || Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bad92f160316221fd4090520bb2b3cefc5">ICmpInst::ICMP_ULE</a>))</div>
<div class="line"><a name="l04377"></a><span class="lineno"> 4377</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, A);</div>
<div class="line"><a name="l04378"></a><span class="lineno"> 4378</span>&#160;  <span class="comment">// C u&lt;/u&gt;= (C - D) --&gt; C u&lt;/u&gt;= D</span></div>
<div class="line"><a name="l04379"></a><span class="lineno"> 4379</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> == Op0 &amp;&amp; (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e">ICmpInst::ICMP_ULT</a> || Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba573bcd571c938fce863525330bbfc4b8">ICmpInst::ICMP_UGE</a>))</div>
<div class="line"><a name="l04380"></a><span class="lineno"> 4380</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, <a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>);</div>
<div class="line"><a name="l04381"></a><span class="lineno"> 4381</span>&#160;  <span class="comment">// (A - B) u&gt;=/u&lt; A --&gt; B u&gt;/u&lt;= A  iff B != 0</span></div>
<div class="line"><a name="l04382"></a><span class="lineno"> 4382</span>&#160;  <span class="keywordflow">if</span> (A == Op1 &amp;&amp; (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba573bcd571c938fce863525330bbfc4b8">ICmpInst::ICMP_UGE</a> || Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e">ICmpInst::ICMP_ULT</a>) &amp;&amp;</div>
<div class="line"><a name="l04383"></a><span class="lineno"> 4383</span>&#160;      <a class="code" href="namespacellvm.html#a07256e6859fcb3b9d5eb02ecea9e9a38">isKnownNonZero</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, Q.<a class="code" href="structllvm_1_1SimplifyQuery.html#a0ffb6d79f6befe2030328bd1d7110feb">DL</a>, <span class="comment">/*Depth=*/</span>0, Q.<a class="code" href="structllvm_1_1SimplifyQuery.html#a928ce56952772d0e0f43cab3a489a6fe">AC</a>, Q.<a class="code" href="structllvm_1_1SimplifyQuery.html#a30647c42c8c40890c577ba5b4ab16468">CxtI</a>, Q.<a class="code" href="structllvm_1_1SimplifyQuery.html#a4776fa0f5a726bd5a8a444981c283c69">DT</a>))</div>
<div class="line"><a name="l04384"></a><span class="lineno"> 4384</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#aafc99bbdcf56632d353043ae3e2bca21">CmpInst::getFlippedStrictnessPredicate</a>(Pred), <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, A);</div>
<div class="line"><a name="l04385"></a><span class="lineno"> 4385</span>&#160;  <span class="comment">// C u&lt;=/u&gt; (C - D) --&gt; C u&lt;/u&gt;= D  iff B != 0</span></div>
<div class="line"><a name="l04386"></a><span class="lineno"> 4386</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> == Op0 &amp;&amp; (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bad92f160316221fd4090520bb2b3cefc5">ICmpInst::ICMP_ULE</a> || Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba607cecdc5172814382033e001ed11fad">ICmpInst::ICMP_UGT</a>) &amp;&amp;</div>
<div class="line"><a name="l04387"></a><span class="lineno"> 4387</span>&#160;      <a class="code" href="namespacellvm.html#a07256e6859fcb3b9d5eb02ecea9e9a38">isKnownNonZero</a>(<a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>, Q.<a class="code" href="structllvm_1_1SimplifyQuery.html#a0ffb6d79f6befe2030328bd1d7110feb">DL</a>, <span class="comment">/*Depth=*/</span>0, Q.<a class="code" href="structllvm_1_1SimplifyQuery.html#a928ce56952772d0e0f43cab3a489a6fe">AC</a>, Q.<a class="code" href="structllvm_1_1SimplifyQuery.html#a30647c42c8c40890c577ba5b4ab16468">CxtI</a>, Q.<a class="code" href="structllvm_1_1SimplifyQuery.html#a4776fa0f5a726bd5a8a444981c283c69">DT</a>))</div>
<div class="line"><a name="l04388"></a><span class="lineno"> 4388</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#aafc99bbdcf56632d353043ae3e2bca21">CmpInst::getFlippedStrictnessPredicate</a>(Pred), <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, <a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>);</div>
<div class="line"><a name="l04389"></a><span class="lineno"> 4389</span>&#160; </div>
<div class="line"><a name="l04390"></a><span class="lineno"> 4390</span>&#160;  <span class="comment">// icmp (A-B), (C-B) -&gt; icmp A, C for equalities or if there is no overflow.</span></div>
<div class="line"><a name="l04391"></a><span class="lineno"> 4391</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a> &amp;&amp; <a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a> &amp;&amp; <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a> == <a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a> &amp;&amp; NoOp0WrapProblem &amp;&amp; NoOp1WrapProblem)</div>
<div class="line"><a name="l04392"></a><span class="lineno"> 4392</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, A, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div>
<div class="line"><a name="l04393"></a><span class="lineno"> 4393</span>&#160; </div>
<div class="line"><a name="l04394"></a><span class="lineno"> 4394</span>&#160;  <span class="comment">// icmp (A-B), (A-D) -&gt; icmp D, B for equalities or if there is no overflow.</span></div>
<div class="line"><a name="l04395"></a><span class="lineno"> 4395</span>&#160;  <span class="keywordflow">if</span> (A &amp;&amp; <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> &amp;&amp; A == <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> &amp;&amp; NoOp0WrapProblem &amp;&amp; NoOp1WrapProblem)</div>
<div class="line"><a name="l04396"></a><span class="lineno"> 4396</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, <a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div>
<div class="line"><a name="l04397"></a><span class="lineno"> 4397</span>&#160; </div>
<div class="line"><a name="l04398"></a><span class="lineno"> 4398</span>&#160;  <span class="comment">// icmp (0-X) &lt; cst --&gt; x &gt; -cst</span></div>
<div class="line"><a name="l04399"></a><span class="lineno"> 4399</span>&#160;  <span class="keywordflow">if</span> (NoOp0WrapProblem &amp;&amp; <a class="code" href="classllvm_1_1CmpInst.html#a3712279d70deeec90a93db09deb12d02">ICmpInst::isSigned</a>(Pred)) {</div>
<div class="line"><a name="l04400"></a><span class="lineno"> 4400</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>;</div>
<div class="line"><a name="l04401"></a><span class="lineno"> 4401</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(BO0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a2fed53ed2b3225752bd9e4fce4967361">m_Neg</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>))))</div>
<div class="line"><a name="l04402"></a><span class="lineno"> 4402</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Constant.html">Constant</a> *RHSC = dyn_cast&lt;Constant&gt;(Op1))</div>
<div class="line"><a name="l04403"></a><span class="lineno"> 4403</span>&#160;        <span class="keywordflow">if</span> (RHSC-&gt;isNotMinSignedValue())</div>
<div class="line"><a name="l04404"></a><span class="lineno"> 4404</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getSwappedPredicate(), <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>,</div>
<div class="line"><a name="l04405"></a><span class="lineno"> 4405</span>&#160;                              <a class="code" href="classllvm_1_1ConstantExpr.html#afa29f0cd072ab9b3a2630681ffe5760f">ConstantExpr::getNeg</a>(RHSC));</div>
<div class="line"><a name="l04406"></a><span class="lineno"> 4406</span>&#160;  }</div>
<div class="line"><a name="l04407"></a><span class="lineno"> 4407</span>&#160; </div>
<div class="line"><a name="l04408"></a><span class="lineno"> 4408</span>&#160;  {</div>
<div class="line"><a name="l04409"></a><span class="lineno"> 4409</span>&#160;    <span class="comment">// Try to remove shared multiplier from comparison:</span></div>
<div class="line"><a name="l04410"></a><span class="lineno"> 4410</span>&#160;    <span class="comment">// X * Z u{lt/le/gt/ge}/eq/ne Y * Z</span></div>
<div class="line"><a name="l04411"></a><span class="lineno"> 4411</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, *<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, *<a class="code" href="namespacellvm_1_1ARCCC.html#a9a81d9a1b379cf08150b22e81d7dd006aceb189306b941666e679bf556207c1e4">Z</a>;</div>
<div class="line"><a name="l04412"></a><span class="lineno"> 4412</span>&#160;    <span class="keywordflow">if</span> (Pred == <a class="code" href="classllvm_1_1ICmpInst.html#af07a09f1cda33d984cc725dc9e856d40">ICmpInst::getUnsignedPredicate</a>(Pred) &amp;&amp;</div>
<div class="line"><a name="l04413"></a><span class="lineno"> 4413</span>&#160;        ((<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a971522b36bf432ad69a0083581ab4108">m_Mul</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="namespacellvm_1_1ARCCC.html#a9a81d9a1b379cf08150b22e81d7dd006aceb189306b941666e679bf556207c1e4">Z</a>))) &amp;&amp;</div>
<div class="line"><a name="l04414"></a><span class="lineno"> 4414</span>&#160;          <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#a8f3259c7db0ce698876fe79f45b80a32">m_c_Mul</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="namespacellvm_1_1ARCCC.html#a9a81d9a1b379cf08150b22e81d7dd006aceb189306b941666e679bf556207c1e4">Z</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>)))) ||</div>
<div class="line"><a name="l04415"></a><span class="lineno"> 4415</span>&#160;         (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a971522b36bf432ad69a0083581ab4108">m_Mul</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="namespacellvm_1_1ARCCC.html#a9a81d9a1b379cf08150b22e81d7dd006aceb189306b941666e679bf556207c1e4">Z</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>))) &amp;&amp;</div>
<div class="line"><a name="l04416"></a><span class="lineno"> 4416</span>&#160;          <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#a8f3259c7db0ce698876fe79f45b80a32">m_c_Mul</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="namespacellvm_1_1ARCCC.html#a9a81d9a1b379cf08150b22e81d7dd006aceb189306b941666e679bf556207c1e4">Z</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>)))))) {</div>
<div class="line"><a name="l04417"></a><span class="lineno"> 4417</span>&#160;      <span class="keywordtype">bool</span> NonZero;</div>
<div class="line"><a name="l04418"></a><span class="lineno"> 4418</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ICmpInst.html#aaaeded5d0cab77f531b294638459aca5">ICmpInst::isEquality</a>(Pred)) {</div>
<div class="line"><a name="l04419"></a><span class="lineno"> 4419</span>&#160;        <a class="code" href="structllvm_1_1KnownBits.html">KnownBits</a> ZKnown = <a class="code" href="namespacellvm.html#aa1f8f0633edd8b9a1c5ec15bb9fc5640">computeKnownBits</a>(<a class="code" href="namespacellvm_1_1ARCCC.html#a9a81d9a1b379cf08150b22e81d7dd006aceb189306b941666e679bf556207c1e4">Z</a>, 0, &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l04420"></a><span class="lineno"> 4420</span>&#160;        <span class="comment">// if Z % 2 != 0</span></div>
<div class="line"><a name="l04421"></a><span class="lineno"> 4421</span>&#160;        <span class="comment">//    X * Z eq/ne Y * Z -&gt; X eq/ne Y</span></div>
<div class="line"><a name="l04422"></a><span class="lineno"> 4422</span>&#160;        <span class="keywordflow">if</span> (ZKnown.<a class="code" href="structllvm_1_1KnownBits.html#a2ad6370e532a52014fe2e5a54bfbaddd">countMaxTrailingZeros</a>() == 0)</div>
<div class="line"><a name="l04423"></a><span class="lineno"> 4423</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>);</div>
<div class="line"><a name="l04424"></a><span class="lineno"> 4424</span>&#160;        NonZero = !ZKnown.<a class="code" href="structllvm_1_1KnownBits.html#aba205f553f24c184ea47fc1a6cb56537">One</a>.<a class="code" href="classllvm_1_1APInt.html#a49cd5939942c6665aba4cae8c220dff1">isZero</a>() ||</div>
<div class="line"><a name="l04425"></a><span class="lineno"> 4425</span>&#160;                  <a class="code" href="namespacellvm.html#a07256e6859fcb3b9d5eb02ecea9e9a38">isKnownNonZero</a>(<a class="code" href="namespacellvm_1_1ARCCC.html#a9a81d9a1b379cf08150b22e81d7dd006aceb189306b941666e679bf556207c1e4">Z</a>, Q.<a class="code" href="structllvm_1_1SimplifyQuery.html#a0ffb6d79f6befe2030328bd1d7110feb">DL</a>, <span class="comment">/*Depth=*/</span>0, Q.<a class="code" href="structllvm_1_1SimplifyQuery.html#a928ce56952772d0e0f43cab3a489a6fe">AC</a>, Q.<a class="code" href="structllvm_1_1SimplifyQuery.html#a30647c42c8c40890c577ba5b4ab16468">CxtI</a>, Q.<a class="code" href="structllvm_1_1SimplifyQuery.html#a4776fa0f5a726bd5a8a444981c283c69">DT</a>);</div>
<div class="line"><a name="l04426"></a><span class="lineno"> 4426</span>&#160;        <span class="comment">// if Z != 0 and nsw(X * Z) and nsw(Y * Z)</span></div>
<div class="line"><a name="l04427"></a><span class="lineno"> 4427</span>&#160;        <span class="comment">//    X * Z eq/ne Y * Z -&gt; X eq/ne Y</span></div>
<div class="line"><a name="l04428"></a><span class="lineno"> 4428</span>&#160;        <span class="keywordflow">if</span> (NonZero &amp;&amp; BO0 &amp;&amp; BO1 &amp;&amp; BO0-&gt;<a class="code" href="classllvm_1_1Instruction.html#a350f4fdc01c770b5cf6a8be2624ae3e5">hasNoSignedWrap</a>() &amp;&amp;</div>
<div class="line"><a name="l04429"></a><span class="lineno"> 4429</span>&#160;            BO1-&gt;<a class="code" href="classllvm_1_1Instruction.html#a350f4fdc01c770b5cf6a8be2624ae3e5">hasNoSignedWrap</a>())</div>
<div class="line"><a name="l04430"></a><span class="lineno"> 4430</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>);</div>
<div class="line"><a name="l04431"></a><span class="lineno"> 4431</span>&#160;      } <span class="keywordflow">else</span></div>
<div class="line"><a name="l04432"></a><span class="lineno"> 4432</span>&#160;        NonZero = <a class="code" href="namespacellvm.html#a07256e6859fcb3b9d5eb02ecea9e9a38">isKnownNonZero</a>(<a class="code" href="namespacellvm_1_1ARCCC.html#a9a81d9a1b379cf08150b22e81d7dd006aceb189306b941666e679bf556207c1e4">Z</a>, Q.<a class="code" href="structllvm_1_1SimplifyQuery.html#a0ffb6d79f6befe2030328bd1d7110feb">DL</a>, <span class="comment">/*Depth=*/</span>0, Q.<a class="code" href="structllvm_1_1SimplifyQuery.html#a928ce56952772d0e0f43cab3a489a6fe">AC</a>, Q.<a class="code" href="structllvm_1_1SimplifyQuery.html#a30647c42c8c40890c577ba5b4ab16468">CxtI</a>, Q.<a class="code" href="structllvm_1_1SimplifyQuery.html#a4776fa0f5a726bd5a8a444981c283c69">DT</a>);</div>
<div class="line"><a name="l04433"></a><span class="lineno"> 4433</span>&#160; </div>
<div class="line"><a name="l04434"></a><span class="lineno"> 4434</span>&#160;      <span class="comment">// If Z != 0 and nuw(X * Z) and nuw(Y * Z)</span></div>
<div class="line"><a name="l04435"></a><span class="lineno"> 4435</span>&#160;      <span class="comment">//    X * Z u{lt/le/gt/ge}/eq/ne Y * Z -&gt; X u{lt/le/gt/ge}/eq/ne Y</span></div>
<div class="line"><a name="l04436"></a><span class="lineno"> 4436</span>&#160;      <span class="keywordflow">if</span> (NonZero &amp;&amp; BO0 &amp;&amp; BO1 &amp;&amp; BO0-&gt;<a class="code" href="classllvm_1_1Instruction.html#a100c666f9253331dd1d166a863248326">hasNoUnsignedWrap</a>() &amp;&amp;</div>
<div class="line"><a name="l04437"></a><span class="lineno"> 4437</span>&#160;          BO1-&gt;<a class="code" href="classllvm_1_1Instruction.html#a100c666f9253331dd1d166a863248326">hasNoUnsignedWrap</a>())</div>
<div class="line"><a name="l04438"></a><span class="lineno"> 4438</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>);</div>
<div class="line"><a name="l04439"></a><span class="lineno"> 4439</span>&#160;    }</div>
<div class="line"><a name="l04440"></a><span class="lineno"> 4440</span>&#160;  }</div>
<div class="line"><a name="l04441"></a><span class="lineno"> 4441</span>&#160; </div>
<div class="line"><a name="l04442"></a><span class="lineno"> 4442</span>&#160;  <a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> *SRem = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l04443"></a><span class="lineno"> 4443</span>&#160;  <span class="comment">// icmp (srem X, Y), Y</span></div>
<div class="line"><a name="l04444"></a><span class="lineno"> 4444</span>&#160;  <span class="keywordflow">if</span> (BO0 &amp;&amp; BO0-&gt;<a class="code" href="classllvm_1_1BinaryOperator.html#a31bf07f3f61525486633bc1d0bbaf029">getOpcode</a>() == Instruction::SRem &amp;&amp; Op1 == BO0-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(1))</div>
<div class="line"><a name="l04445"></a><span class="lineno"> 4445</span>&#160;    SRem = BO0;</div>
<div class="line"><a name="l04446"></a><span class="lineno"> 4446</span>&#160;  <span class="comment">// icmp Y, (srem X, Y)</span></div>
<div class="line"><a name="l04447"></a><span class="lineno"> 4447</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (BO1 &amp;&amp; BO1-&gt;<a class="code" href="classllvm_1_1BinaryOperator.html#a31bf07f3f61525486633bc1d0bbaf029">getOpcode</a>() == Instruction::SRem &amp;&amp;</div>
<div class="line"><a name="l04448"></a><span class="lineno"> 4448</span>&#160;           Op0 == BO1-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(1))</div>
<div class="line"><a name="l04449"></a><span class="lineno"> 4449</span>&#160;    SRem = BO1;</div>
<div class="line"><a name="l04450"></a><span class="lineno"> 4450</span>&#160;  <span class="keywordflow">if</span> (SRem) {</div>
<div class="line"><a name="l04451"></a><span class="lineno"> 4451</span>&#160;    <span class="comment">// We don&#39;t check hasOneUse to avoid increasing register pressure because</span></div>
<div class="line"><a name="l04452"></a><span class="lineno"> 4452</span>&#160;    <span class="comment">// the value we use is the same value this instruction was already using.</span></div>
<div class="line"><a name="l04453"></a><span class="lineno"> 4453</span>&#160;    <span class="keywordflow">switch</span> (SRem == BO0 ? <a class="code" href="classllvm_1_1CmpInst.html#a49a2d8f483ea08a3d6ea75f90c640d76">ICmpInst::getSwappedPredicate</a>(Pred) : Pred) {</div>
<div class="line"><a name="l04454"></a><span class="lineno"> 4454</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l04455"></a><span class="lineno"> 4455</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04456"></a><span class="lineno"> 4456</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a>:</div>
<div class="line"><a name="l04457"></a><span class="lineno"> 4457</span>&#160;      <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1ConstantInt.html#aa7cce62ac5cc6df09cce0535874336b7">ConstantInt::getFalse</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getType()));</div>
<div class="line"><a name="l04458"></a><span class="lineno"> 4458</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a>:</div>
<div class="line"><a name="l04459"></a><span class="lineno"> 4459</span>&#160;      <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1ConstantInt.html#a82dbbd8e3688b0bc1eedb338864d0d0c">ConstantInt::getTrue</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getType()));</div>
<div class="line"><a name="l04460"></a><span class="lineno"> 4460</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba720a42e85f7e981afd61e28473b0000a">ICmpInst::ICMP_SGT</a>:</div>
<div class="line"><a name="l04461"></a><span class="lineno"> 4461</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac1aa7b798ba11d2e497d5cce6ce6d3dc">ICmpInst::ICMP_SGE</a>:</div>
<div class="line"><a name="l04462"></a><span class="lineno"> 4462</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba720a42e85f7e981afd61e28473b0000a">ICmpInst::ICMP_SGT</a>, SRem-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(1),</div>
<div class="line"><a name="l04463"></a><span class="lineno"> 4463</span>&#160;                          <a class="code" href="classllvm_1_1Constant.html#a4d51384de6e1798bb6aa875aebeea9f0">Constant::getAllOnesValue</a>(SRem-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()));</div>
<div class="line"><a name="l04464"></a><span class="lineno"> 4464</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba15ae464950ac676919c2f0c7aafc706c">ICmpInst::ICMP_SLT</a>:</div>
<div class="line"><a name="l04465"></a><span class="lineno"> 4465</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba2751d6136a2819749dcef65dc19a4246">ICmpInst::ICMP_SLE</a>:</div>
<div class="line"><a name="l04466"></a><span class="lineno"> 4466</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba15ae464950ac676919c2f0c7aafc706c">ICmpInst::ICMP_SLT</a>, SRem-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(1),</div>
<div class="line"><a name="l04467"></a><span class="lineno"> 4467</span>&#160;                          <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(SRem-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()));</div>
<div class="line"><a name="l04468"></a><span class="lineno"> 4468</span>&#160;    }</div>
<div class="line"><a name="l04469"></a><span class="lineno"> 4469</span>&#160;  }</div>
<div class="line"><a name="l04470"></a><span class="lineno"> 4470</span>&#160; </div>
<div class="line"><a name="l04471"></a><span class="lineno"> 4471</span>&#160;  <span class="keywordflow">if</span> (BO0 &amp;&amp; BO1 &amp;&amp; BO0-&gt;<a class="code" href="classllvm_1_1BinaryOperator.html#a31bf07f3f61525486633bc1d0bbaf029">getOpcode</a>() == BO1-&gt;<a class="code" href="classllvm_1_1BinaryOperator.html#a31bf07f3f61525486633bc1d0bbaf029">getOpcode</a>() &amp;&amp; BO0-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>() &amp;&amp;</div>
<div class="line"><a name="l04472"></a><span class="lineno"> 4472</span>&#160;      BO1-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>() &amp;&amp; BO0-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(1) == BO1-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(1)) {</div>
<div class="line"><a name="l04473"></a><span class="lineno"> 4473</span>&#160;    <span class="keywordflow">switch</span> (BO0-&gt;<a class="code" href="classllvm_1_1BinaryOperator.html#a31bf07f3f61525486633bc1d0bbaf029">getOpcode</a>()) {</div>
<div class="line"><a name="l04474"></a><span class="lineno"> 4474</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l04475"></a><span class="lineno"> 4475</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04476"></a><span class="lineno"> 4476</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a2b016c207343046b2bac45e69e76dcec">Instruction::Add</a>:</div>
<div class="line"><a name="l04477"></a><span class="lineno"> 4477</span>&#160;    <span class="keywordflow">case</span> Instruction::Sub:</div>
<div class="line"><a name="l04478"></a><span class="lineno"> 4478</span>&#160;    <span class="keywordflow">case</span> Instruction::Xor: {</div>
<div class="line"><a name="l04479"></a><span class="lineno"> 4479</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.isEquality()) <span class="comment">// a+x icmp eq/ne b+x --&gt; a icmp b</span></div>
<div class="line"><a name="l04480"></a><span class="lineno"> 4480</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, BO0-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0), BO1-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0));</div>
<div class="line"><a name="l04481"></a><span class="lineno"> 4481</span>&#160; </div>
<div class="line"><a name="l04482"></a><span class="lineno"> 4482</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>;</div>
<div class="line"><a name="l04483"></a><span class="lineno"> 4483</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(BO0-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(1), <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>))) {</div>
<div class="line"><a name="l04484"></a><span class="lineno"> 4484</span>&#160;        <span class="comment">// icmp u/s (a ^ signmask), (b ^ signmask) --&gt; icmp s/u a, b</span></div>
<div class="line"><a name="l04485"></a><span class="lineno"> 4485</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;isSignMask()) {</div>
<div class="line"><a name="l04486"></a><span class="lineno"> 4486</span>&#160;          <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">ICmpInst::Predicate</a> NewPred = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getFlippedSignednessPredicate();</div>
<div class="line"><a name="l04487"></a><span class="lineno"> 4487</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(NewPred, BO0-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0), BO1-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0));</div>
<div class="line"><a name="l04488"></a><span class="lineno"> 4488</span>&#160;        }</div>
<div class="line"><a name="l04489"></a><span class="lineno"> 4489</span>&#160; </div>
<div class="line"><a name="l04490"></a><span class="lineno"> 4490</span>&#160;        <span class="comment">// icmp u/s (a ^ maxsignval), (b ^ maxsignval) --&gt; icmp s/u&#39; a, b</span></div>
<div class="line"><a name="l04491"></a><span class="lineno"> 4491</span>&#160;        <span class="keywordflow">if</span> (BO0-&gt;<a class="code" href="classllvm_1_1BinaryOperator.html#a31bf07f3f61525486633bc1d0bbaf029">getOpcode</a>() == Instruction::Xor &amp;&amp; <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;isMaxSignedValue()) {</div>
<div class="line"><a name="l04492"></a><span class="lineno"> 4492</span>&#160;          <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">ICmpInst::Predicate</a> NewPred = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getFlippedSignednessPredicate();</div>
<div class="line"><a name="l04493"></a><span class="lineno"> 4493</span>&#160;          NewPred = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getSwappedPredicate(NewPred);</div>
<div class="line"><a name="l04494"></a><span class="lineno"> 4494</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(NewPred, BO0-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0), BO1-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0));</div>
<div class="line"><a name="l04495"></a><span class="lineno"> 4495</span>&#160;        }</div>
<div class="line"><a name="l04496"></a><span class="lineno"> 4496</span>&#160;      }</div>
<div class="line"><a name="l04497"></a><span class="lineno"> 4497</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04498"></a><span class="lineno"> 4498</span>&#160;    }</div>
<div class="line"><a name="l04499"></a><span class="lineno"> 4499</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="X86PartialReduction_8cpp.html#ae0f503db91504a3f3440ab81260e4134">Instruction::Mul</a>: {</div>
<div class="line"><a name="l04500"></a><span class="lineno"> 4500</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.isEquality())</div>
<div class="line"><a name="l04501"></a><span class="lineno"> 4501</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04502"></a><span class="lineno"> 4502</span>&#160; </div>
<div class="line"><a name="l04503"></a><span class="lineno"> 4503</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>;</div>
<div class="line"><a name="l04504"></a><span class="lineno"> 4504</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(BO0-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(1), <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)) &amp;&amp; !<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;isZero() &amp;&amp;</div>
<div class="line"><a name="l04505"></a><span class="lineno"> 4505</span>&#160;          !<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;isOne()) {</div>
<div class="line"><a name="l04506"></a><span class="lineno"> 4506</span>&#160;        <span class="comment">// icmp eq/ne (X * C), (Y * C) --&gt; icmp (X &amp; Mask), (Y &amp; Mask)</span></div>
<div class="line"><a name="l04507"></a><span class="lineno"> 4507</span>&#160;        <span class="comment">// Mask = -1 &gt;&gt; count-trailing-zeros(C).</span></div>
<div class="line"><a name="l04508"></a><span class="lineno"> 4508</span>&#160;        <span class="keywordflow">if</span> (<span class="keywordtype">unsigned</span> TZs = <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;countTrailingZeros()) {</div>
<div class="line"><a name="l04509"></a><span class="lineno"> 4509</span>&#160;          <a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a> = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(</div>
<div class="line"><a name="l04510"></a><span class="lineno"> 4510</span>&#160;              BO0-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>(),</div>
<div class="line"><a name="l04511"></a><span class="lineno"> 4511</span>&#160;              <a class="code" href="classllvm_1_1APInt.html#ad960e1ff48d25c382b6d28e7961f074e">APInt::getLowBitsSet</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;getBitWidth(), <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;getBitWidth() - TZs));</div>
<div class="line"><a name="l04512"></a><span class="lineno"> 4512</span>&#160;          <a class="code" href="classllvm_1_1Value.html">Value</a> *And1 = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAnd(BO0-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0), <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a>);</div>
<div class="line"><a name="l04513"></a><span class="lineno"> 4513</span>&#160;          <a class="code" href="classllvm_1_1Value.html">Value</a> *And2 = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAnd(BO1-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0), <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a>);</div>
<div class="line"><a name="l04514"></a><span class="lineno"> 4514</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, And1, And2);</div>
<div class="line"><a name="l04515"></a><span class="lineno"> 4515</span>&#160;        }</div>
<div class="line"><a name="l04516"></a><span class="lineno"> 4516</span>&#160;      }</div>
<div class="line"><a name="l04517"></a><span class="lineno"> 4517</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04518"></a><span class="lineno"> 4518</span>&#160;    }</div>
<div class="line"><a name="l04519"></a><span class="lineno"> 4519</span>&#160;    <span class="keywordflow">case</span> Instruction::UDiv:</div>
<div class="line"><a name="l04520"></a><span class="lineno"> 4520</span>&#160;    <span class="keywordflow">case</span> Instruction::LShr:</div>
<div class="line"><a name="l04521"></a><span class="lineno"> 4521</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.isSigned() || !BO0-&gt;<a class="code" href="classllvm_1_1Instruction.html#a689a03df5b4ae094d6a3a1bd13dac574">isExact</a>() || !BO1-&gt;<a class="code" href="classllvm_1_1Instruction.html#a689a03df5b4ae094d6a3a1bd13dac574">isExact</a>())</div>
<div class="line"><a name="l04522"></a><span class="lineno"> 4522</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04523"></a><span class="lineno"> 4523</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, BO0-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0), BO1-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0));</div>
<div class="line"><a name="l04524"></a><span class="lineno"> 4524</span>&#160; </div>
<div class="line"><a name="l04525"></a><span class="lineno"> 4525</span>&#160;    <span class="keywordflow">case</span> Instruction::SDiv:</div>
<div class="line"><a name="l04526"></a><span class="lineno"> 4526</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.isEquality() || !BO0-&gt;<a class="code" href="classllvm_1_1Instruction.html#a689a03df5b4ae094d6a3a1bd13dac574">isExact</a>() || !BO1-&gt;<a class="code" href="classllvm_1_1Instruction.html#a689a03df5b4ae094d6a3a1bd13dac574">isExact</a>())</div>
<div class="line"><a name="l04527"></a><span class="lineno"> 4527</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04528"></a><span class="lineno"> 4528</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, BO0-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0), BO1-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0));</div>
<div class="line"><a name="l04529"></a><span class="lineno"> 4529</span>&#160; </div>
<div class="line"><a name="l04530"></a><span class="lineno"> 4530</span>&#160;    <span class="keywordflow">case</span> Instruction::AShr:</div>
<div class="line"><a name="l04531"></a><span class="lineno"> 4531</span>&#160;      <span class="keywordflow">if</span> (!BO0-&gt;<a class="code" href="classllvm_1_1Instruction.html#a689a03df5b4ae094d6a3a1bd13dac574">isExact</a>() || !BO1-&gt;<a class="code" href="classllvm_1_1Instruction.html#a689a03df5b4ae094d6a3a1bd13dac574">isExact</a>())</div>
<div class="line"><a name="l04532"></a><span class="lineno"> 4532</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04533"></a><span class="lineno"> 4533</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, BO0-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0), BO1-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0));</div>
<div class="line"><a name="l04534"></a><span class="lineno"> 4534</span>&#160; </div>
<div class="line"><a name="l04535"></a><span class="lineno"> 4535</span>&#160;    <span class="keywordflow">case</span> Instruction::Shl: {</div>
<div class="line"><a name="l04536"></a><span class="lineno"> 4536</span>&#160;      <span class="keywordtype">bool</span> NUW = BO0-&gt;<a class="code" href="classllvm_1_1Instruction.html#a100c666f9253331dd1d166a863248326">hasNoUnsignedWrap</a>() &amp;&amp; BO1-&gt;<a class="code" href="classllvm_1_1Instruction.html#a100c666f9253331dd1d166a863248326">hasNoUnsignedWrap</a>();</div>
<div class="line"><a name="l04537"></a><span class="lineno"> 4537</span>&#160;      <span class="keywordtype">bool</span> NSW = BO0-&gt;<a class="code" href="classllvm_1_1Instruction.html#a350f4fdc01c770b5cf6a8be2624ae3e5">hasNoSignedWrap</a>() &amp;&amp; BO1-&gt;<a class="code" href="classllvm_1_1Instruction.html#a350f4fdc01c770b5cf6a8be2624ae3e5">hasNoSignedWrap</a>();</div>
<div class="line"><a name="l04538"></a><span class="lineno"> 4538</span>&#160;      <span class="keywordflow">if</span> (!NUW &amp;&amp; !NSW)</div>
<div class="line"><a name="l04539"></a><span class="lineno"> 4539</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04540"></a><span class="lineno"> 4540</span>&#160;      <span class="keywordflow">if</span> (!NSW &amp;&amp; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.isSigned())</div>
<div class="line"><a name="l04541"></a><span class="lineno"> 4541</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04542"></a><span class="lineno"> 4542</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, BO0-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0), BO1-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0));</div>
<div class="line"><a name="l04543"></a><span class="lineno"> 4543</span>&#160;    }</div>
<div class="line"><a name="l04544"></a><span class="lineno"> 4544</span>&#160;    }</div>
<div class="line"><a name="l04545"></a><span class="lineno"> 4545</span>&#160;  }</div>
<div class="line"><a name="l04546"></a><span class="lineno"> 4546</span>&#160; </div>
<div class="line"><a name="l04547"></a><span class="lineno"> 4547</span>&#160;  <span class="keywordflow">if</span> (BO0) {</div>
<div class="line"><a name="l04548"></a><span class="lineno"> 4548</span>&#160;    <span class="comment">// Transform  A &amp; (L - 1) `ult` L --&gt; L != 0</span></div>
<div class="line"><a name="l04549"></a><span class="lineno"> 4549</span>&#160;    <span class="keyword">auto</span> LSubOne = <a class="code" href="namespacellvm_1_1PatternMatch.html#a944c25ac9b73b02a17a20a08a25b9b21">m_Add</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(Op1), <a class="code" href="namespacellvm_1_1PatternMatch.html#aaea0d5ebb8b57ddde2095f80e2e94bb2">m_AllOnes</a>());</div>
<div class="line"><a name="l04550"></a><span class="lineno"> 4550</span>&#160;    <span class="keyword">auto</span> BitwiseAnd = <a class="code" href="namespacellvm_1_1PatternMatch.html#ae9d735be1ececf149966a4da253f0320">m_c_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(), LSubOne);</div>
<div class="line"><a name="l04551"></a><span class="lineno"> 4551</span>&#160; </div>
<div class="line"><a name="l04552"></a><span class="lineno"> 4552</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(BO0, BitwiseAnd) &amp;&amp; Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e">ICmpInst::ICMP_ULT</a>) {</div>
<div class="line"><a name="l04553"></a><span class="lineno"> 4553</span>&#160;      <span class="keyword">auto</span> *Zero = <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(BO0-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>());</div>
<div class="line"><a name="l04554"></a><span class="lineno"> 4554</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a>, Op1, Zero);</div>
<div class="line"><a name="l04555"></a><span class="lineno"> 4555</span>&#160;    }</div>
<div class="line"><a name="l04556"></a><span class="lineno"> 4556</span>&#160;  }</div>
<div class="line"><a name="l04557"></a><span class="lineno"> 4557</span>&#160; </div>
<div class="line"><a name="l04558"></a><span class="lineno"> 4558</span>&#160;  <span class="comment">// For unsigned predicates / eq / ne:</span></div>
<div class="line"><a name="l04559"></a><span class="lineno"> 4559</span>&#160;  <span class="comment">// icmp pred (x &lt;&lt; 1), x --&gt; icmp getSignedPredicate(pred) x, 0</span></div>
<div class="line"><a name="l04560"></a><span class="lineno"> 4560</span>&#160;  <span class="comment">// icmp pred x, (x &lt;&lt; 1) --&gt; icmp getSignedPredicate(pred) 0, x</span></div>
<div class="line"><a name="l04561"></a><span class="lineno"> 4561</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classllvm_1_1CmpInst.html#a3712279d70deeec90a93db09deb12d02">ICmpInst::isSigned</a>(Pred)) {</div>
<div class="line"><a name="l04562"></a><span class="lineno"> 4562</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a37668d9884c78ac77254cf9fb8a4276a">m_Shl</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(Op1), <a class="code" href="namespacellvm_1_1PatternMatch.html#aebdb2700a77d10ae6f0ce115e23d9f77">m_One</a>())))</div>
<div class="line"><a name="l04563"></a><span class="lineno"> 4563</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1ICmpInst.html#a9d5f70171d811078c4d263811f13c121">ICmpInst::getSignedPredicate</a>(Pred), Op1,</div>
<div class="line"><a name="l04564"></a><span class="lineno"> 4564</span>&#160;                          <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(Op1-&gt;getType()));</div>
<div class="line"><a name="l04565"></a><span class="lineno"> 4565</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#a37668d9884c78ac77254cf9fb8a4276a">m_Shl</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(Op0), <a class="code" href="namespacellvm_1_1PatternMatch.html#aebdb2700a77d10ae6f0ce115e23d9f77">m_One</a>())))</div>
<div class="line"><a name="l04566"></a><span class="lineno"> 4566</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1ICmpInst.html#a9d5f70171d811078c4d263811f13c121">ICmpInst::getSignedPredicate</a>(Pred),</div>
<div class="line"><a name="l04567"></a><span class="lineno"> 4567</span>&#160;                          <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(Op0-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()), Op0);</div>
<div class="line"><a name="l04568"></a><span class="lineno"> 4568</span>&#160;  }</div>
<div class="line"><a name="l04569"></a><span class="lineno"> 4569</span>&#160; </div>
<div class="line"><a name="l04570"></a><span class="lineno"> 4570</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V = foldMultiplicationOverflowCheck(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l04571"></a><span class="lineno"> 4571</span>&#160;    <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, V);</div>
<div class="line"><a name="l04572"></a><span class="lineno"> 4572</span>&#160; </div>
<div class="line"><a name="l04573"></a><span class="lineno"> 4573</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V = <a class="code" href="InstCombineCompares_8cpp.html#a0dc1a1e560014003d76b017e35528984">foldICmpWithLowBitMaskedVal</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>))</div>
<div class="line"><a name="l04574"></a><span class="lineno"> 4574</span>&#160;    <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, V);</div>
<div class="line"><a name="l04575"></a><span class="lineno"> 4575</span>&#160; </div>
<div class="line"><a name="l04576"></a><span class="lineno"> 4576</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V = <a class="code" href="InstCombineCompares_8cpp.html#ae597bfbd02f7f19a21c4a506e3ba5300">foldICmpWithTruncSignExtendedVal</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>))</div>
<div class="line"><a name="l04577"></a><span class="lineno"> 4577</span>&#160;    <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, V);</div>
<div class="line"><a name="l04578"></a><span class="lineno"> 4578</span>&#160; </div>
<div class="line"><a name="l04579"></a><span class="lineno"> 4579</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V = <a class="code" href="InstCombineCompares_8cpp.html#a55797b5bbbbd581a91789a8106df8e99">foldShiftIntoShiftInAnotherHandOfAndInICmp</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, SQ, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>))</div>
<div class="line"><a name="l04580"></a><span class="lineno"> 4580</span>&#160;    <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, V);</div>
<div class="line"><a name="l04581"></a><span class="lineno"> 4581</span>&#160; </div>
<div class="line"><a name="l04582"></a><span class="lineno"> 4582</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l04583"></a><span class="lineno"> 4583</span>&#160;}</div>
<div class="line"><a name="l04584"></a><span class="lineno"> 4584</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l04585"></a><span class="lineno"> 4585</span>&#160;<span class="comment">/// Fold icmp Pred min|max(X, Y), X.</span></div>
<div class="line"><a name="l04586"></a><span class="lineno"><a class="line" href="InstCombineCompares_8cpp.html#abe6ef19bc83468345a1244362a54986e"> 4586</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="InstCombineCompares_8cpp.html#abe6ef19bc83468345a1244362a54986e">foldICmpWithMinMax</a>(<a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> &amp;Cmp) {</div>
<div class="line"><a name="l04587"></a><span class="lineno"> 4587</span>&#160;  <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">ICmpInst::Predicate</a> Pred = Cmp.getPredicate();</div>
<div class="line"><a name="l04588"></a><span class="lineno"> 4588</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Op0 = Cmp.getOperand(0);</div>
<div class="line"><a name="l04589"></a><span class="lineno"> 4589</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a> = Cmp.getOperand(1);</div>
<div class="line"><a name="l04590"></a><span class="lineno"> 4590</span>&#160; </div>
<div class="line"><a name="l04591"></a><span class="lineno"> 4591</span>&#160;  <span class="comment">// Canonicalize minimum or maximum operand to LHS of the icmp.</span></div>
<div class="line"><a name="l04592"></a><span class="lineno"> 4592</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#afd71f5991b2fcbd948c1d74e9eb7e1ee">m_c_SMin</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(Op0), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>())) ||</div>
<div class="line"><a name="l04593"></a><span class="lineno"> 4593</span>&#160;      <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a39ad7ce51b0add3af5ac2577d1b45c7b">m_c_SMax</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(Op0), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>())) ||</div>
<div class="line"><a name="l04594"></a><span class="lineno"> 4594</span>&#160;      <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a858f42cd002d944befe9675788d94ba7">m_c_UMin</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(Op0), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>())) ||</div>
<div class="line"><a name="l04595"></a><span class="lineno"> 4595</span>&#160;      <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#aaa1ec19d8da987f818acfcfd9111f480">m_c_UMax</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(Op0), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>()))) {</div>
<div class="line"><a name="l04596"></a><span class="lineno"> 4596</span>&#160;    <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(Op0, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>);</div>
<div class="line"><a name="l04597"></a><span class="lineno"> 4597</span>&#160;    Pred = Cmp.getSwappedPredicate();</div>
<div class="line"><a name="l04598"></a><span class="lineno"> 4598</span>&#160;  }</div>
<div class="line"><a name="l04599"></a><span class="lineno"> 4599</span>&#160; </div>
<div class="line"><a name="l04600"></a><span class="lineno"> 4600</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>;</div>
<div class="line"><a name="l04601"></a><span class="lineno"> 4601</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#afd71f5991b2fcbd948c1d74e9eb7e1ee">m_c_SMin</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>)))) {</div>
<div class="line"><a name="l04602"></a><span class="lineno"> 4602</span>&#160;    <span class="comment">// smin(X, Y)  == X --&gt; X s&lt;= Y</span></div>
<div class="line"><a name="l04603"></a><span class="lineno"> 4603</span>&#160;    <span class="comment">// smin(X, Y) s&gt;= X --&gt; X s&lt;= Y</span></div>
<div class="line"><a name="l04604"></a><span class="lineno"> 4604</span>&#160;    <span class="keywordflow">if</span> (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">CmpInst::ICMP_EQ</a> || Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac1aa7b798ba11d2e497d5cce6ce6d3dc">CmpInst::ICMP_SGE</a>)</div>
<div class="line"><a name="l04605"></a><span class="lineno"> 4605</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba2751d6136a2819749dcef65dc19a4246">ICmpInst::ICMP_SLE</a>, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>);</div>
<div class="line"><a name="l04606"></a><span class="lineno"> 4606</span>&#160; </div>
<div class="line"><a name="l04607"></a><span class="lineno"> 4607</span>&#160;    <span class="comment">// smin(X, Y) != X --&gt; X s&gt; Y</span></div>
<div class="line"><a name="l04608"></a><span class="lineno"> 4608</span>&#160;    <span class="comment">// smin(X, Y) s&lt; X --&gt; X s&gt; Y</span></div>
<div class="line"><a name="l04609"></a><span class="lineno"> 4609</span>&#160;    <span class="keywordflow">if</span> (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">CmpInst::ICMP_NE</a> || Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba15ae464950ac676919c2f0c7aafc706c">CmpInst::ICMP_SLT</a>)</div>
<div class="line"><a name="l04610"></a><span class="lineno"> 4610</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba720a42e85f7e981afd61e28473b0000a">ICmpInst::ICMP_SGT</a>, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>);</div>
<div class="line"><a name="l04611"></a><span class="lineno"> 4611</span>&#160; </div>
<div class="line"><a name="l04612"></a><span class="lineno"> 4612</span>&#160;    <span class="comment">// These cases should be handled in InstSimplify:</span></div>
<div class="line"><a name="l04613"></a><span class="lineno"> 4613</span>&#160;    <span class="comment">// smin(X, Y) s&lt;= X --&gt; true</span></div>
<div class="line"><a name="l04614"></a><span class="lineno"> 4614</span>&#160;    <span class="comment">// smin(X, Y) s&gt; X --&gt; false</span></div>
<div class="line"><a name="l04615"></a><span class="lineno"> 4615</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l04616"></a><span class="lineno"> 4616</span>&#160;  }</div>
<div class="line"><a name="l04617"></a><span class="lineno"> 4617</span>&#160; </div>
<div class="line"><a name="l04618"></a><span class="lineno"> 4618</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a39ad7ce51b0add3af5ac2577d1b45c7b">m_c_SMax</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>)))) {</div>
<div class="line"><a name="l04619"></a><span class="lineno"> 4619</span>&#160;    <span class="comment">// smax(X, Y)  == X --&gt; X s&gt;= Y</span></div>
<div class="line"><a name="l04620"></a><span class="lineno"> 4620</span>&#160;    <span class="comment">// smax(X, Y) s&lt;= X --&gt; X s&gt;= Y</span></div>
<div class="line"><a name="l04621"></a><span class="lineno"> 4621</span>&#160;    <span class="keywordflow">if</span> (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">CmpInst::ICMP_EQ</a> || Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba2751d6136a2819749dcef65dc19a4246">CmpInst::ICMP_SLE</a>)</div>
<div class="line"><a name="l04622"></a><span class="lineno"> 4622</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac1aa7b798ba11d2e497d5cce6ce6d3dc">ICmpInst::ICMP_SGE</a>, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>);</div>
<div class="line"><a name="l04623"></a><span class="lineno"> 4623</span>&#160; </div>
<div class="line"><a name="l04624"></a><span class="lineno"> 4624</span>&#160;    <span class="comment">// smax(X, Y) != X --&gt; X s&lt; Y</span></div>
<div class="line"><a name="l04625"></a><span class="lineno"> 4625</span>&#160;    <span class="comment">// smax(X, Y) s&gt; X --&gt; X s&lt; Y</span></div>
<div class="line"><a name="l04626"></a><span class="lineno"> 4626</span>&#160;    <span class="keywordflow">if</span> (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">CmpInst::ICMP_NE</a> || Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba720a42e85f7e981afd61e28473b0000a">CmpInst::ICMP_SGT</a>)</div>
<div class="line"><a name="l04627"></a><span class="lineno"> 4627</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba15ae464950ac676919c2f0c7aafc706c">ICmpInst::ICMP_SLT</a>, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>);</div>
<div class="line"><a name="l04628"></a><span class="lineno"> 4628</span>&#160; </div>
<div class="line"><a name="l04629"></a><span class="lineno"> 4629</span>&#160;    <span class="comment">// These cases should be handled in InstSimplify:</span></div>
<div class="line"><a name="l04630"></a><span class="lineno"> 4630</span>&#160;    <span class="comment">// smax(X, Y) s&gt;= X --&gt; true</span></div>
<div class="line"><a name="l04631"></a><span class="lineno"> 4631</span>&#160;    <span class="comment">// smax(X, Y) s&lt; X --&gt; false</span></div>
<div class="line"><a name="l04632"></a><span class="lineno"> 4632</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l04633"></a><span class="lineno"> 4633</span>&#160;  }</div>
<div class="line"><a name="l04634"></a><span class="lineno"> 4634</span>&#160; </div>
<div class="line"><a name="l04635"></a><span class="lineno"> 4635</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a858f42cd002d944befe9675788d94ba7">m_c_UMin</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>)))) {</div>
<div class="line"><a name="l04636"></a><span class="lineno"> 4636</span>&#160;    <span class="comment">// umin(X, Y)  == X --&gt; X u&lt;= Y</span></div>
<div class="line"><a name="l04637"></a><span class="lineno"> 4637</span>&#160;    <span class="comment">// umin(X, Y) u&gt;= X --&gt; X u&lt;= Y</span></div>
<div class="line"><a name="l04638"></a><span class="lineno"> 4638</span>&#160;    <span class="keywordflow">if</span> (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">CmpInst::ICMP_EQ</a> || Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba573bcd571c938fce863525330bbfc4b8">CmpInst::ICMP_UGE</a>)</div>
<div class="line"><a name="l04639"></a><span class="lineno"> 4639</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bad92f160316221fd4090520bb2b3cefc5">ICmpInst::ICMP_ULE</a>, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>);</div>
<div class="line"><a name="l04640"></a><span class="lineno"> 4640</span>&#160; </div>
<div class="line"><a name="l04641"></a><span class="lineno"> 4641</span>&#160;    <span class="comment">// umin(X, Y) != X --&gt; X u&gt; Y</span></div>
<div class="line"><a name="l04642"></a><span class="lineno"> 4642</span>&#160;    <span class="comment">// umin(X, Y) u&lt; X --&gt; X u&gt; Y</span></div>
<div class="line"><a name="l04643"></a><span class="lineno"> 4643</span>&#160;    <span class="keywordflow">if</span> (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">CmpInst::ICMP_NE</a> || Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e">CmpInst::ICMP_ULT</a>)</div>
<div class="line"><a name="l04644"></a><span class="lineno"> 4644</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba607cecdc5172814382033e001ed11fad">ICmpInst::ICMP_UGT</a>, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>);</div>
<div class="line"><a name="l04645"></a><span class="lineno"> 4645</span>&#160; </div>
<div class="line"><a name="l04646"></a><span class="lineno"> 4646</span>&#160;    <span class="comment">// These cases should be handled in InstSimplify:</span></div>
<div class="line"><a name="l04647"></a><span class="lineno"> 4647</span>&#160;    <span class="comment">// umin(X, Y) u&lt;= X --&gt; true</span></div>
<div class="line"><a name="l04648"></a><span class="lineno"> 4648</span>&#160;    <span class="comment">// umin(X, Y) u&gt; X --&gt; false</span></div>
<div class="line"><a name="l04649"></a><span class="lineno"> 4649</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l04650"></a><span class="lineno"> 4650</span>&#160;  }</div>
<div class="line"><a name="l04651"></a><span class="lineno"> 4651</span>&#160; </div>
<div class="line"><a name="l04652"></a><span class="lineno"> 4652</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#aaa1ec19d8da987f818acfcfd9111f480">m_c_UMax</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>)))) {</div>
<div class="line"><a name="l04653"></a><span class="lineno"> 4653</span>&#160;    <span class="comment">// umax(X, Y)  == X --&gt; X u&gt;= Y</span></div>
<div class="line"><a name="l04654"></a><span class="lineno"> 4654</span>&#160;    <span class="comment">// umax(X, Y) u&lt;= X --&gt; X u&gt;= Y</span></div>
<div class="line"><a name="l04655"></a><span class="lineno"> 4655</span>&#160;    <span class="keywordflow">if</span> (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">CmpInst::ICMP_EQ</a> || Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bad92f160316221fd4090520bb2b3cefc5">CmpInst::ICMP_ULE</a>)</div>
<div class="line"><a name="l04656"></a><span class="lineno"> 4656</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba573bcd571c938fce863525330bbfc4b8">ICmpInst::ICMP_UGE</a>, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>);</div>
<div class="line"><a name="l04657"></a><span class="lineno"> 4657</span>&#160; </div>
<div class="line"><a name="l04658"></a><span class="lineno"> 4658</span>&#160;    <span class="comment">// umax(X, Y) != X --&gt; X u&lt; Y</span></div>
<div class="line"><a name="l04659"></a><span class="lineno"> 4659</span>&#160;    <span class="comment">// umax(X, Y) u&gt; X --&gt; X u&lt; Y</span></div>
<div class="line"><a name="l04660"></a><span class="lineno"> 4660</span>&#160;    <span class="keywordflow">if</span> (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">CmpInst::ICMP_NE</a> || Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba607cecdc5172814382033e001ed11fad">CmpInst::ICMP_UGT</a>)</div>
<div class="line"><a name="l04661"></a><span class="lineno"> 4661</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e">ICmpInst::ICMP_ULT</a>, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>);</div>
<div class="line"><a name="l04662"></a><span class="lineno"> 4662</span>&#160; </div>
<div class="line"><a name="l04663"></a><span class="lineno"> 4663</span>&#160;    <span class="comment">// These cases should be handled in InstSimplify:</span></div>
<div class="line"><a name="l04664"></a><span class="lineno"> 4664</span>&#160;    <span class="comment">// umax(X, Y) u&gt;= X --&gt; true</span></div>
<div class="line"><a name="l04665"></a><span class="lineno"> 4665</span>&#160;    <span class="comment">// umax(X, Y) u&lt; X --&gt; false</span></div>
<div class="line"><a name="l04666"></a><span class="lineno"> 4666</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l04667"></a><span class="lineno"> 4667</span>&#160;  }</div>
<div class="line"><a name="l04668"></a><span class="lineno"> 4668</span>&#160; </div>
<div class="line"><a name="l04669"></a><span class="lineno"> 4669</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l04670"></a><span class="lineno"> 4670</span>&#160;}</div>
<div class="line"><a name="l04671"></a><span class="lineno"> 4671</span>&#160; </div>
<div class="line"><a name="l04672"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombinerImpl.html#acb575761ffbc75842def91257cc5168d"> 4672</a></span>&#160;<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombinerImpl.html#acb575761ffbc75842def91257cc5168d">InstCombinerImpl::foldICmpEquality</a>(<a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l04673"></a><span class="lineno"> 4673</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.isEquality())</div>
<div class="line"><a name="l04674"></a><span class="lineno"> 4674</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l04675"></a><span class="lineno"> 4675</span>&#160; </div>
<div class="line"><a name="l04676"></a><span class="lineno"> 4676</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Op0 = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(0), *Op1 = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(1);</div>
<div class="line"><a name="l04677"></a><span class="lineno"> 4677</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">CmpInst::Predicate</a> Pred = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getPredicate();</div>
<div class="line"><a name="l04678"></a><span class="lineno"> 4678</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *A, *<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, *<a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>;</div>
<div class="line"><a name="l04679"></a><span class="lineno"> 4679</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a82e2ea7f0ab67e33e22b3a2a188feaba">m_Xor</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>)))) {</div>
<div class="line"><a name="l04680"></a><span class="lineno"> 4680</span>&#160;    <span class="keywordflow">if</span> (A == Op1 || <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a> == Op1) { <span class="comment">// (A^B) == A  -&gt;  B == 0</span></div>
<div class="line"><a name="l04681"></a><span class="lineno"> 4681</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *OtherVal = A == Op1 ? <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a> : A;</div>
<div class="line"><a name="l04682"></a><span class="lineno"> 4682</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, OtherVal, <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(A-&gt;getType()));</div>
<div class="line"><a name="l04683"></a><span class="lineno"> 4683</span>&#160;    }</div>
<div class="line"><a name="l04684"></a><span class="lineno"> 4684</span>&#160; </div>
<div class="line"><a name="l04685"></a><span class="lineno"> 4685</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#a82e2ea7f0ab67e33e22b3a2a188feaba">m_Xor</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>)))) {</div>
<div class="line"><a name="l04686"></a><span class="lineno"> 4686</span>&#160;      <span class="comment">// A^c1 == C^c2 --&gt; A == C^(c1^c2)</span></div>
<div class="line"><a name="l04687"></a><span class="lineno"> 4687</span>&#160;      <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *<a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>, *C2;</div>
<div class="line"><a name="l04688"></a><span class="lineno"> 4688</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a677ac8d99ff3c2d32a95c21de9ed372c">m_ConstantInt</a>(<a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>)) &amp;&amp; <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a677ac8d99ff3c2d32a95c21de9ed372c">m_ConstantInt</a>(C2)) &amp;&amp;</div>
<div class="line"><a name="l04689"></a><span class="lineno"> 4689</span>&#160;          Op1-&gt;hasOneUse()) {</div>
<div class="line"><a name="l04690"></a><span class="lineno"> 4690</span>&#160;        <a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="regutils_8h.html#a1fa2460e32327ade49189c95740bc1b5">NC</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getInt(<a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>-&gt;getValue() ^ C2-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#a4b001d9b458035fbbfc154d52d354ee9">getValue</a>());</div>
<div class="line"><a name="l04691"></a><span class="lineno"> 4691</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830ea76feb79109026728a20736a8c6504548">Xor</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateXor(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, <a class="code" href="regutils_8h.html#a1fa2460e32327ade49189c95740bc1b5">NC</a>);</div>
<div class="line"><a name="l04692"></a><span class="lineno"> 4692</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, A, <a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830ea76feb79109026728a20736a8c6504548">Xor</a>);</div>
<div class="line"><a name="l04693"></a><span class="lineno"> 4693</span>&#160;      }</div>
<div class="line"><a name="l04694"></a><span class="lineno"> 4694</span>&#160; </div>
<div class="line"><a name="l04695"></a><span class="lineno"> 4695</span>&#160;      <span class="comment">// A^B == A^D -&gt; B == D</span></div>
<div class="line"><a name="l04696"></a><span class="lineno"> 4696</span>&#160;      <span class="keywordflow">if</span> (A == <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)</div>
<div class="line"><a name="l04697"></a><span class="lineno"> 4697</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>);</div>
<div class="line"><a name="l04698"></a><span class="lineno"> 4698</span>&#160;      <span class="keywordflow">if</span> (A == <a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>)</div>
<div class="line"><a name="l04699"></a><span class="lineno"> 4699</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div>
<div class="line"><a name="l04700"></a><span class="lineno"> 4700</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a> == <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)</div>
<div class="line"><a name="l04701"></a><span class="lineno"> 4701</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, A, <a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>);</div>
<div class="line"><a name="l04702"></a><span class="lineno"> 4702</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a> == <a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>)</div>
<div class="line"><a name="l04703"></a><span class="lineno"> 4703</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, A, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div>
<div class="line"><a name="l04704"></a><span class="lineno"> 4704</span>&#160;    }</div>
<div class="line"><a name="l04705"></a><span class="lineno"> 4705</span>&#160;  }</div>
<div class="line"><a name="l04706"></a><span class="lineno"> 4706</span>&#160; </div>
<div class="line"><a name="l04707"></a><span class="lineno"> 4707</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#a82e2ea7f0ab67e33e22b3a2a188feaba">m_Xor</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>))) &amp;&amp; (A == Op0 || <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a> == Op0)) {</div>
<div class="line"><a name="l04708"></a><span class="lineno"> 4708</span>&#160;    <span class="comment">// A == (A^B)  -&gt;  B == 0</span></div>
<div class="line"><a name="l04709"></a><span class="lineno"> 4709</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *OtherVal = A == Op0 ? <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a> : A;</div>
<div class="line"><a name="l04710"></a><span class="lineno"> 4710</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, OtherVal, <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(A-&gt;getType()));</div>
<div class="line"><a name="l04711"></a><span class="lineno"> 4711</span>&#160;  }</div>
<div class="line"><a name="l04712"></a><span class="lineno"> 4712</span>&#160; </div>
<div class="line"><a name="l04713"></a><span class="lineno"> 4713</span>&#160;  <span class="comment">// (X&amp;Z) == (Y&amp;Z) -&gt; (X^Y) &amp; Z == 0</span></div>
<div class="line"><a name="l04714"></a><span class="lineno"> 4714</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a427435d4da769ae680a8e77ef89520aa">m_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>)))) &amp;&amp;</div>
<div class="line"><a name="l04715"></a><span class="lineno"> 4715</span>&#160;      <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a427435d4da769ae680a8e77ef89520aa">m_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>))))) {</div>
<div class="line"><a name="l04716"></a><span class="lineno"> 4716</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a> = <span class="keyword">nullptr</span>, *<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a> = <span class="keyword">nullptr</span>, *<a class="code" href="namespacellvm_1_1ARCCC.html#a9a81d9a1b379cf08150b22e81d7dd006aceb189306b941666e679bf556207c1e4">Z</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l04717"></a><span class="lineno"> 4717</span>&#160; </div>
<div class="line"><a name="l04718"></a><span class="lineno"> 4718</span>&#160;    <span class="keywordflow">if</span> (A == <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>) {</div>
<div class="line"><a name="l04719"></a><span class="lineno"> 4719</span>&#160;      <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a> = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>;</div>
<div class="line"><a name="l04720"></a><span class="lineno"> 4720</span>&#160;      <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a> = <a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>;</div>
<div class="line"><a name="l04721"></a><span class="lineno"> 4721</span>&#160;      <a class="code" href="namespacellvm_1_1ARCCC.html#a9a81d9a1b379cf08150b22e81d7dd006aceb189306b941666e679bf556207c1e4">Z</a> = A;</div>
<div class="line"><a name="l04722"></a><span class="lineno"> 4722</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (A == <a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>) {</div>
<div class="line"><a name="l04723"></a><span class="lineno"> 4723</span>&#160;      <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a> = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>;</div>
<div class="line"><a name="l04724"></a><span class="lineno"> 4724</span>&#160;      <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a> = <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>;</div>
<div class="line"><a name="l04725"></a><span class="lineno"> 4725</span>&#160;      <a class="code" href="namespacellvm_1_1ARCCC.html#a9a81d9a1b379cf08150b22e81d7dd006aceb189306b941666e679bf556207c1e4">Z</a> = A;</div>
<div class="line"><a name="l04726"></a><span class="lineno"> 4726</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a> == <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>) {</div>
<div class="line"><a name="l04727"></a><span class="lineno"> 4727</span>&#160;      <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a> = A;</div>
<div class="line"><a name="l04728"></a><span class="lineno"> 4728</span>&#160;      <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a> = <a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>;</div>
<div class="line"><a name="l04729"></a><span class="lineno"> 4729</span>&#160;      <a class="code" href="namespacellvm_1_1ARCCC.html#a9a81d9a1b379cf08150b22e81d7dd006aceb189306b941666e679bf556207c1e4">Z</a> = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>;</div>
<div class="line"><a name="l04730"></a><span class="lineno"> 4730</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a> == <a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>) {</div>
<div class="line"><a name="l04731"></a><span class="lineno"> 4731</span>&#160;      <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a> = A;</div>
<div class="line"><a name="l04732"></a><span class="lineno"> 4732</span>&#160;      <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a> = <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>;</div>
<div class="line"><a name="l04733"></a><span class="lineno"> 4733</span>&#160;      <a class="code" href="namespacellvm_1_1ARCCC.html#a9a81d9a1b379cf08150b22e81d7dd006aceb189306b941666e679bf556207c1e4">Z</a> = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>;</div>
<div class="line"><a name="l04734"></a><span class="lineno"> 4734</span>&#160;    }</div>
<div class="line"><a name="l04735"></a><span class="lineno"> 4735</span>&#160; </div>
<div class="line"><a name="l04736"></a><span class="lineno"> 4736</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>) { <span class="comment">// Build (X^Y) &amp; Z</span></div>
<div class="line"><a name="l04737"></a><span class="lineno"> 4737</span>&#160;      Op1 = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateXor(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>);</div>
<div class="line"><a name="l04738"></a><span class="lineno"> 4738</span>&#160;      Op1 = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAnd(Op1, <a class="code" href="namespacellvm_1_1ARCCC.html#a9a81d9a1b379cf08150b22e81d7dd006aceb189306b941666e679bf556207c1e4">Z</a>);</div>
<div class="line"><a name="l04739"></a><span class="lineno"> 4739</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, Op1, <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(Op1-&gt;getType()));</div>
<div class="line"><a name="l04740"></a><span class="lineno"> 4740</span>&#160;    }</div>
<div class="line"><a name="l04741"></a><span class="lineno"> 4741</span>&#160;  }</div>
<div class="line"><a name="l04742"></a><span class="lineno"> 4742</span>&#160; </div>
<div class="line"><a name="l04743"></a><span class="lineno"> 4743</span>&#160;  {</div>
<div class="line"><a name="l04744"></a><span class="lineno"> 4744</span>&#160;    <span class="comment">// Similar to above, but specialized for constant because invert is needed:</span></div>
<div class="line"><a name="l04745"></a><span class="lineno"> 4745</span>&#160;    <span class="comment">// (X | C) == (Y | C) --&gt; (X ^ Y) &amp; ~C == 0</span></div>
<div class="line"><a name="l04746"></a><span class="lineno"> 4746</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, *<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>;</div>
<div class="line"><a name="l04747"></a><span class="lineno"> 4747</span>&#160;    <a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>;</div>
<div class="line"><a name="l04748"></a><span class="lineno"> 4748</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a42569041ddafba7d40243e126af07f42">m_Or</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#aadd209ba7e1bfa8113a609e09a7fe62f">m_Constant</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)))) &amp;&amp;</div>
<div class="line"><a name="l04749"></a><span class="lineno"> 4749</span>&#160;        <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a42569041ddafba7d40243e126af07f42">m_Or</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>))))) {</div>
<div class="line"><a name="l04750"></a><span class="lineno"> 4750</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830ea76feb79109026728a20736a8c6504548">Xor</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateXor(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>);</div>
<div class="line"><a name="l04751"></a><span class="lineno"> 4751</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eac33315685a0cba3ce53be378b3c7874b">And</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAnd(<a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830ea76feb79109026728a20736a8c6504548">Xor</a>, <a class="code" href="classllvm_1_1ConstantExpr.html#a5b43a866f0fca605556f0f69f70c522a">ConstantExpr::getNot</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>));</div>
<div class="line"><a name="l04752"></a><span class="lineno"> 4752</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, <a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eac33315685a0cba3ce53be378b3c7874b">And</a>, <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(<a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eac33315685a0cba3ce53be378b3c7874b">And</a>-&gt;getType()));</div>
<div class="line"><a name="l04753"></a><span class="lineno"> 4753</span>&#160;    }</div>
<div class="line"><a name="l04754"></a><span class="lineno"> 4754</span>&#160;  }</div>
<div class="line"><a name="l04755"></a><span class="lineno"> 4755</span>&#160; </div>
<div class="line"><a name="l04756"></a><span class="lineno"> 4756</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#a2cbdca7c8267aac6914d674f8e81841b">m_ZExt</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A))) &amp;&amp;</div>
<div class="line"><a name="l04757"></a><span class="lineno"> 4757</span>&#160;      (Op0-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>() || Op1-&gt;hasOneUse())) {</div>
<div class="line"><a name="l04758"></a><span class="lineno"> 4758</span>&#160;    <span class="comment">// (B &amp; (Pow2C-1)) == zext A --&gt; A == trunc B</span></div>
<div class="line"><a name="l04759"></a><span class="lineno"> 4759</span>&#160;    <span class="comment">// (B &amp; (Pow2C-1)) != zext A --&gt; A != trunc B</span></div>
<div class="line"><a name="l04760"></a><span class="lineno"> 4760</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *MaskC;</div>
<div class="line"><a name="l04761"></a><span class="lineno"> 4761</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a427435d4da769ae680a8e77ef89520aa">m_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a69cd23c0f1215087c5b006c1bf6222c4">m_LowBitMask</a>(MaskC))) &amp;&amp;</div>
<div class="line"><a name="l04762"></a><span class="lineno"> 4762</span>&#160;        MaskC-&gt;<a class="code" href="classllvm_1_1APInt.html#ae155fc08c52bcfd6026faf4c640a2cf7">countTrailingOnes</a>() == A-&gt;getType()-&gt;getScalarSizeInBits())</div>
<div class="line"><a name="l04763"></a><span class="lineno"> 4763</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, A, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateTrunc(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, A-&gt;getType()));</div>
<div class="line"><a name="l04764"></a><span class="lineno"> 4764</span>&#160;  }</div>
<div class="line"><a name="l04765"></a><span class="lineno"> 4765</span>&#160; </div>
<div class="line"><a name="l04766"></a><span class="lineno"> 4766</span>&#160;  <span class="comment">// Test if 2 values have different or same signbits:</span></div>
<div class="line"><a name="l04767"></a><span class="lineno"> 4767</span>&#160;  <span class="comment">// (X u&gt;&gt; BitWidth - 1) == zext (Y s&gt; -1) --&gt; (X ^ Y) &lt; 0</span></div>
<div class="line"><a name="l04768"></a><span class="lineno"> 4768</span>&#160;  <span class="comment">// (X u&gt;&gt; BitWidth - 1) != zext (Y s&gt; -1) --&gt; (X ^ Y) &gt; -1</span></div>
<div class="line"><a name="l04769"></a><span class="lineno"> 4769</span>&#160;  <span class="comment">// (X s&gt;&gt; BitWidth - 1) == sext (Y s&gt; -1) --&gt; (X ^ Y) &lt; 0</span></div>
<div class="line"><a name="l04770"></a><span class="lineno"> 4770</span>&#160;  <span class="comment">// (X s&gt;&gt; BitWidth - 1) != sext (Y s&gt; -1) --&gt; (X ^ Y) &gt; -1</span></div>
<div class="line"><a name="l04771"></a><span class="lineno"> 4771</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *ExtI;</div>
<div class="line"><a name="l04772"></a><span class="lineno"> 4772</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#a575c2299c6f145ba3a12efa20829db43">m_CombineAnd</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a04353aa48874f9bda89ff9059cd1a5a6">m_Instruction</a>(ExtI), <a class="code" href="namespacellvm_1_1PatternMatch.html#a247b6987d634040b8aa6fb9c5887b703">m_ZExtOrSExt</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A)))) &amp;&amp;</div>
<div class="line"><a name="l04773"></a><span class="lineno"> 4773</span>&#160;      (Op0-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>() || Op1-&gt;hasOneUse())) {</div>
<div class="line"><a name="l04774"></a><span class="lineno"> 4774</span>&#160;    <span class="keywordtype">unsigned</span> OpWidth = Op0-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>();</div>
<div class="line"><a name="l04775"></a><span class="lineno"> 4775</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *ShiftI;</div>
<div class="line"><a name="l04776"></a><span class="lineno"> 4776</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, *<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>;</div>
<div class="line"><a name="l04777"></a><span class="lineno"> 4777</span>&#160;    <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">ICmpInst::Predicate</a> Pred2;</div>
<div class="line"><a name="l04778"></a><span class="lineno"> 4778</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a575c2299c6f145ba3a12efa20829db43">m_CombineAnd</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a04353aa48874f9bda89ff9059cd1a5a6">m_Instruction</a>(ShiftI),</div>
<div class="line"><a name="l04779"></a><span class="lineno"> 4779</span>&#160;                                <a class="code" href="namespacellvm_1_1PatternMatch.html#aa41636955199b88164376e06e5914855">m_Shr</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>),</div>
<div class="line"><a name="l04780"></a><span class="lineno"> 4780</span>&#160;                                      <a class="code" href="namespacellvm_1_1PatternMatch.html#aa4a99c313af96b3b50a9768338a54b2e">m_SpecificIntAllowUndef</a>(OpWidth - 1)))) &amp;&amp;</div>
<div class="line"><a name="l04781"></a><span class="lineno"> 4781</span>&#160;        <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(A, <a class="code" href="namespacellvm_1_1PatternMatch.html#a3fe9b3ddb71b9fb53d9fc74b3a0710bf">m_ICmp</a>(Pred2, <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#aaea0d5ebb8b57ddde2095f80e2e94bb2">m_AllOnes</a>())) &amp;&amp;</div>
<div class="line"><a name="l04782"></a><span class="lineno"> 4782</span>&#160;        Pred2 == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba720a42e85f7e981afd61e28473b0000a">ICmpInst::ICMP_SGT</a> &amp;&amp; <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getType() == <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>-&gt;getType()) {</div>
<div class="line"><a name="l04783"></a><span class="lineno"> 4783</span>&#160;      <span class="keywordtype">unsigned</span> ExtOpc = ExtI-&gt;<a class="code" href="classllvm_1_1Instruction.html#ab4e05d690df389b8b1477c90387b575f">getOpcode</a>();</div>
<div class="line"><a name="l04784"></a><span class="lineno"> 4784</span>&#160;      <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm_1_1ARM__AM.html#a76f5f9f36bbd9f03c844c5b565f239ef">ShiftOpc</a> = ShiftI-&gt;<a class="code" href="classllvm_1_1Instruction.html#ab4e05d690df389b8b1477c90387b575f">getOpcode</a>();</div>
<div class="line"><a name="l04785"></a><span class="lineno"> 4785</span>&#160;      <span class="keywordflow">if</span> ((ExtOpc == Instruction::ZExt &amp;&amp; <a class="code" href="namespacellvm_1_1ARM__AM.html#a76f5f9f36bbd9f03c844c5b565f239ef">ShiftOpc</a> == Instruction::LShr) ||</div>
<div class="line"><a name="l04786"></a><span class="lineno"> 4786</span>&#160;          (ExtOpc == Instruction::SExt &amp;&amp; <a class="code" href="namespacellvm_1_1ARM__AM.html#a76f5f9f36bbd9f03c844c5b565f239ef">ShiftOpc</a> == Instruction::AShr)) {</div>
<div class="line"><a name="l04787"></a><span class="lineno"> 4787</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830ea76feb79109026728a20736a8c6504548">Xor</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateXor(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, <span class="stringliteral">&quot;xor.signbits&quot;</span>);</div>
<div class="line"><a name="l04788"></a><span class="lineno"> 4788</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *R = (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a>) ? <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateIsNeg(<a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830ea76feb79109026728a20736a8c6504548">Xor</a>)</div>
<div class="line"><a name="l04789"></a><span class="lineno"> 4789</span>&#160;                                               : <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateIsNotNeg(<a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830ea76feb79109026728a20736a8c6504548">Xor</a>);</div>
<div class="line"><a name="l04790"></a><span class="lineno"> 4790</span>&#160;        <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, R);</div>
<div class="line"><a name="l04791"></a><span class="lineno"> 4791</span>&#160;      }</div>
<div class="line"><a name="l04792"></a><span class="lineno"> 4792</span>&#160;    }</div>
<div class="line"><a name="l04793"></a><span class="lineno"> 4793</span>&#160;  }</div>
<div class="line"><a name="l04794"></a><span class="lineno"> 4794</span>&#160; </div>
<div class="line"><a name="l04795"></a><span class="lineno"> 4795</span>&#160;  <span class="comment">// (A &gt;&gt; C) == (B &gt;&gt; C) --&gt; (A^B) u&lt; (1 &lt;&lt; C)</span></div>
<div class="line"><a name="l04796"></a><span class="lineno"> 4796</span>&#160;  <span class="comment">// For lshr and ashr pairs.</span></div>
<div class="line"><a name="l04797"></a><span class="lineno"> 4797</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *AP1, *AP2;</div>
<div class="line"><a name="l04798"></a><span class="lineno"> 4798</span>&#160;  <span class="keywordflow">if</span> ((<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#aa08fee11e8a5ec10c0cc2a7abbbd799a">m_LShr</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a0f8629c0ff1db9c384e378b2ca860f0a">m_APIntAllowUndef</a>(AP1)))) &amp;&amp;</div>
<div class="line"><a name="l04799"></a><span class="lineno"> 4799</span>&#160;       <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#aa08fee11e8a5ec10c0cc2a7abbbd799a">m_LShr</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a0f8629c0ff1db9c384e378b2ca860f0a">m_APIntAllowUndef</a>(AP2))))) ||</div>
<div class="line"><a name="l04800"></a><span class="lineno"> 4800</span>&#160;      (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a64153676e101a130bbbaaf91635d253a">m_AShr</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a0f8629c0ff1db9c384e378b2ca860f0a">m_APIntAllowUndef</a>(AP1)))) &amp;&amp;</div>
<div class="line"><a name="l04801"></a><span class="lineno"> 4801</span>&#160;       <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a64153676e101a130bbbaaf91635d253a">m_AShr</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a0f8629c0ff1db9c384e378b2ca860f0a">m_APIntAllowUndef</a>(AP2)))))) {</div>
<div class="line"><a name="l04802"></a><span class="lineno"> 4802</span>&#160;    <span class="keywordflow">if</span> (AP1 != AP2)</div>
<div class="line"><a name="l04803"></a><span class="lineno"> 4803</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l04804"></a><span class="lineno"> 4804</span>&#160;    <span class="keywordtype">unsigned</span> TypeBits = AP1-&gt;<a class="code" href="classllvm_1_1APInt.html#a512fe2c15ea651294688eeec1341644c">getBitWidth</a>();</div>
<div class="line"><a name="l04805"></a><span class="lineno"> 4805</span>&#160;    <span class="keywordtype">unsigned</span> ShAmt = AP1-&gt;<a class="code" href="classllvm_1_1APInt.html#ab01d8694a759a934e01f1c558c3ce862">getLimitedValue</a>(TypeBits);</div>
<div class="line"><a name="l04806"></a><span class="lineno"> 4806</span>&#160;    <span class="keywordflow">if</span> (ShAmt &lt; TypeBits &amp;&amp; ShAmt != 0) {</div>
<div class="line"><a name="l04807"></a><span class="lineno"> 4807</span>&#160;      <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">ICmpInst::Predicate</a> NewPred =</div>
<div class="line"><a name="l04808"></a><span class="lineno"> 4808</span>&#160;          Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a> ? <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba573bcd571c938fce863525330bbfc4b8">ICmpInst::ICMP_UGE</a> : <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e">ICmpInst::ICMP_ULT</a>;</div>
<div class="line"><a name="l04809"></a><span class="lineno"> 4809</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830ea76feb79109026728a20736a8c6504548">Xor</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateXor(A, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getName() + <span class="stringliteral">&quot;.unshifted&quot;</span>);</div>
<div class="line"><a name="l04810"></a><span class="lineno"> 4810</span>&#160;      <a class="code" href="classllvm_1_1APInt.html">APInt</a> CmpVal = <a class="code" href="classllvm_1_1APInt.html#aec662ee6ab1490a4cabebf2812e5b9ca">APInt::getOneBitSet</a>(TypeBits, ShAmt);</div>
<div class="line"><a name="l04811"></a><span class="lineno"> 4811</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(NewPred, <a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830ea76feb79109026728a20736a8c6504548">Xor</a>, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(A-&gt;getType(), CmpVal));</div>
<div class="line"><a name="l04812"></a><span class="lineno"> 4812</span>&#160;    }</div>
<div class="line"><a name="l04813"></a><span class="lineno"> 4813</span>&#160;  }</div>
<div class="line"><a name="l04814"></a><span class="lineno"> 4814</span>&#160; </div>
<div class="line"><a name="l04815"></a><span class="lineno"> 4815</span>&#160;  <span class="comment">// (A &lt;&lt; C) == (B &lt;&lt; C) --&gt; ((A^B) &amp; (~0U &gt;&gt; C)) == 0</span></div>
<div class="line"><a name="l04816"></a><span class="lineno"> 4816</span>&#160;  <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *Cst1;</div>
<div class="line"><a name="l04817"></a><span class="lineno"> 4817</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a37668d9884c78ac77254cf9fb8a4276a">m_Shl</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a677ac8d99ff3c2d32a95c21de9ed372c">m_ConstantInt</a>(Cst1)))) &amp;&amp;</div>
<div class="line"><a name="l04818"></a><span class="lineno"> 4818</span>&#160;      <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a37668d9884c78ac77254cf9fb8a4276a">m_Shl</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(Cst1))))) {</div>
<div class="line"><a name="l04819"></a><span class="lineno"> 4819</span>&#160;    <span class="keywordtype">unsigned</span> TypeBits = Cst1-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#ab240d0d30dfa9b392ef9d813f3f9e4be">getBitWidth</a>();</div>
<div class="line"><a name="l04820"></a><span class="lineno"> 4820</span>&#160;    <span class="keywordtype">unsigned</span> ShAmt = (<a class="code" href="ADT_2tmp_8txt.html#aa10ee7493bddf2c751ca6e05451ef410">unsigned</a>)Cst1-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#a31e8da5adf63afd38b4ab94bca823150">getLimitedValue</a>(TypeBits);</div>
<div class="line"><a name="l04821"></a><span class="lineno"> 4821</span>&#160;    <span class="keywordflow">if</span> (ShAmt &lt; TypeBits &amp;&amp; ShAmt != 0) {</div>
<div class="line"><a name="l04822"></a><span class="lineno"> 4822</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830ea76feb79109026728a20736a8c6504548">Xor</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateXor(A, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getName() + <span class="stringliteral">&quot;.unshifted&quot;</span>);</div>
<div class="line"><a name="l04823"></a><span class="lineno"> 4823</span>&#160;      <a class="code" href="classllvm_1_1APInt.html">APInt</a> AndVal = <a class="code" href="classllvm_1_1APInt.html#ad960e1ff48d25c382b6d28e7961f074e">APInt::getLowBitsSet</a>(TypeBits, TypeBits - ShAmt);</div>
<div class="line"><a name="l04824"></a><span class="lineno"> 4824</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eac33315685a0cba3ce53be378b3c7874b">And</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAnd(<a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830ea76feb79109026728a20736a8c6504548">Xor</a>, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getInt(AndVal),</div>
<div class="line"><a name="l04825"></a><span class="lineno"> 4825</span>&#160;                                      <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getName() + <span class="stringliteral">&quot;.mask&quot;</span>);</div>
<div class="line"><a name="l04826"></a><span class="lineno"> 4826</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, <a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eac33315685a0cba3ce53be378b3c7874b">And</a>, <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(Cst1-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#afe3ce7fc89f36474eb0369cbb792c05a">getType</a>()));</div>
<div class="line"><a name="l04827"></a><span class="lineno"> 4827</span>&#160;    }</div>
<div class="line"><a name="l04828"></a><span class="lineno"> 4828</span>&#160;  }</div>
<div class="line"><a name="l04829"></a><span class="lineno"> 4829</span>&#160; </div>
<div class="line"><a name="l04830"></a><span class="lineno"> 4830</span>&#160;  <span class="comment">// Transform &quot;icmp eq (trunc (lshr(X, cst1)), cst&quot; to</span></div>
<div class="line"><a name="l04831"></a><span class="lineno"> 4831</span>&#160;  <span class="comment">// &quot;icmp (and X, mask), cst&quot;</span></div>
<div class="line"><a name="l04832"></a><span class="lineno"> 4832</span>&#160;  <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> ShAmt = 0;</div>
<div class="line"><a name="l04833"></a><span class="lineno"> 4833</span>&#160;  <span class="keywordflow">if</span> (Op0-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>() &amp;&amp;</div>
<div class="line"><a name="l04834"></a><span class="lineno"> 4834</span>&#160;      <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a5b844aada27c4c6fdb87146ac458c0d8">m_Trunc</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#aa08fee11e8a5ec10c0cc2a7abbbd799a">m_LShr</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a677ac8d99ff3c2d32a95c21de9ed372c">m_ConstantInt</a>(ShAmt))))) &amp;&amp;</div>
<div class="line"><a name="l04835"></a><span class="lineno"> 4835</span>&#160;      <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#a677ac8d99ff3c2d32a95c21de9ed372c">m_ConstantInt</a>(Cst1)) &amp;&amp;</div>
<div class="line"><a name="l04836"></a><span class="lineno"> 4836</span>&#160;      <span class="comment">// Only do this when A has multiple uses.  This is most important to do</span></div>
<div class="line"><a name="l04837"></a><span class="lineno"> 4837</span>&#160;      <span class="comment">// when it exposes other optimizations.</span></div>
<div class="line"><a name="l04838"></a><span class="lineno"> 4838</span>&#160;      !A-&gt;hasOneUse()) {</div>
<div class="line"><a name="l04839"></a><span class="lineno"> 4839</span>&#160;    <span class="keywordtype">unsigned</span> ASize = cast&lt;IntegerType&gt;(A-&gt;getType())-&gt;getPrimitiveSizeInBits();</div>
<div class="line"><a name="l04840"></a><span class="lineno"> 4840</span>&#160; </div>
<div class="line"><a name="l04841"></a><span class="lineno"> 4841</span>&#160;    <span class="keywordflow">if</span> (ShAmt &lt; ASize) {</div>
<div class="line"><a name="l04842"></a><span class="lineno"> 4842</span>&#160;      <a class="code" href="classllvm_1_1APInt.html">APInt</a> MaskV =</div>
<div class="line"><a name="l04843"></a><span class="lineno"> 4843</span>&#160;          <a class="code" href="classllvm_1_1APInt.html#ad960e1ff48d25c382b6d28e7961f074e">APInt::getLowBitsSet</a>(ASize, Op0-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a833daf718a49c5cd637d8c9ddeaebe07">getPrimitiveSizeInBits</a>());</div>
<div class="line"><a name="l04844"></a><span class="lineno"> 4844</span>&#160;      MaskV &lt;&lt;= ShAmt;</div>
<div class="line"><a name="l04845"></a><span class="lineno"> 4845</span>&#160; </div>
<div class="line"><a name="l04846"></a><span class="lineno"> 4846</span>&#160;      <a class="code" href="classllvm_1_1APInt.html">APInt</a> CmpV = Cst1-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#a4b001d9b458035fbbfc154d52d354ee9">getValue</a>().<a class="code" href="classllvm_1_1APInt.html#a1dc76cc8bf703e6ada68bededcbb9573">zext</a>(ASize);</div>
<div class="line"><a name="l04847"></a><span class="lineno"> 4847</span>&#160;      CmpV &lt;&lt;= ShAmt;</div>
<div class="line"><a name="l04848"></a><span class="lineno"> 4848</span>&#160; </div>
<div class="line"><a name="l04849"></a><span class="lineno"> 4849</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAnd(A, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getInt(MaskV));</div>
<div class="line"><a name="l04850"></a><span class="lineno"> 4850</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a>, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getInt(CmpV));</div>
<div class="line"><a name="l04851"></a><span class="lineno"> 4851</span>&#160;    }</div>
<div class="line"><a name="l04852"></a><span class="lineno"> 4852</span>&#160;  }</div>
<div class="line"><a name="l04853"></a><span class="lineno"> 4853</span>&#160; </div>
<div class="line"><a name="l04854"></a><span class="lineno"> 4854</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *ICmp = <a class="code" href="InstCombineCompares_8cpp.html#a257335da07186a947a2e4d3a9dd85207">foldICmpIntrinsicWithIntrinsic</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l04855"></a><span class="lineno"> 4855</span>&#160;    <span class="keywordflow">return</span> ICmp;</div>
<div class="line"><a name="l04856"></a><span class="lineno"> 4856</span>&#160; </div>
<div class="line"><a name="l04857"></a><span class="lineno"> 4857</span>&#160;  <span class="comment">// Canonicalize checking for a power-of-2-or-zero value:</span></div>
<div class="line"><a name="l04858"></a><span class="lineno"> 4858</span>&#160;  <span class="comment">// (A &amp; (A-1)) == 0 --&gt; ctpop(A) &lt; 2 (two commuted variants)</span></div>
<div class="line"><a name="l04859"></a><span class="lineno"> 4859</span>&#160;  <span class="comment">// ((A-1) &amp; A) != 0 --&gt; ctpop(A) &gt; 1 (two commuted variants)</span></div>
<div class="line"><a name="l04860"></a><span class="lineno"> 4860</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#ae9d735be1ececf149966a4da253f0320">m_c_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a944c25ac9b73b02a17a20a08a25b9b21">m_Add</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#aaea0d5ebb8b57ddde2095f80e2e94bb2">m_AllOnes</a>()),</div>
<div class="line"><a name="l04861"></a><span class="lineno"> 4861</span>&#160;                                   <a class="code" href="namespacellvm_1_1PatternMatch.html#a94bf3939e0bea91b481096473d0e549f">m_Deferred</a>(A)))) ||</div>
<div class="line"><a name="l04862"></a><span class="lineno"> 4862</span>&#160;      !<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#a874d53817a4923de8e58af6b278c09b0">m_ZeroInt</a>()))</div>
<div class="line"><a name="l04863"></a><span class="lineno"> 4863</span>&#160;    A = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l04864"></a><span class="lineno"> 4864</span>&#160; </div>
<div class="line"><a name="l04865"></a><span class="lineno"> 4865</span>&#160;  <span class="comment">// (A &amp; -A) == A --&gt; ctpop(A) &lt; 2 (four commuted variants)</span></div>
<div class="line"><a name="l04866"></a><span class="lineno"> 4866</span>&#160;  <span class="comment">// (-A &amp; A) != A --&gt; ctpop(A) &gt; 1 (four commuted variants)</span></div>
<div class="line"><a name="l04867"></a><span class="lineno"> 4867</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#ae9d735be1ececf149966a4da253f0320">m_c_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2fed53ed2b3225752bd9e4fce4967361">m_Neg</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(Op1)), <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(Op1)))))</div>
<div class="line"><a name="l04868"></a><span class="lineno"> 4868</span>&#160;    A = Op1;</div>
<div class="line"><a name="l04869"></a><span class="lineno"> 4869</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1,</div>
<div class="line"><a name="l04870"></a><span class="lineno"> 4870</span>&#160;                 <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#ae9d735be1ececf149966a4da253f0320">m_c_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2fed53ed2b3225752bd9e4fce4967361">m_Neg</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(Op0)), <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(Op0)))))</div>
<div class="line"><a name="l04871"></a><span class="lineno"> 4871</span>&#160;    A = Op0;</div>
<div class="line"><a name="l04872"></a><span class="lineno"> 4872</span>&#160; </div>
<div class="line"><a name="l04873"></a><span class="lineno"> 4873</span>&#160;  <span class="keywordflow">if</span> (A) {</div>
<div class="line"><a name="l04874"></a><span class="lineno"> 4874</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *Ty = A-&gt;getType();</div>
<div class="line"><a name="l04875"></a><span class="lineno"> 4875</span>&#160;    <a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *CtPop = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateUnaryIntrinsic(Intrinsic::ctpop, A);</div>
<div class="line"><a name="l04876"></a><span class="lineno"> 4876</span>&#160;    <span class="keywordflow">return</span> Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a></div>
<div class="line"><a name="l04877"></a><span class="lineno"> 4877</span>&#160;        ? <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e">ICmpInst::ICMP_ULT</a>, CtPop, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Ty, 2))</div>
<div class="line"><a name="l04878"></a><span class="lineno"> 4878</span>&#160;        : <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba607cecdc5172814382033e001ed11fad">ICmpInst::ICMP_UGT</a>, CtPop, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Ty, 1));</div>
<div class="line"><a name="l04879"></a><span class="lineno"> 4879</span>&#160;  }</div>
<div class="line"><a name="l04880"></a><span class="lineno"> 4880</span>&#160; </div>
<div class="line"><a name="l04881"></a><span class="lineno"> 4881</span>&#160;  <span class="comment">// Match icmp eq (trunc (lshr A, BW), (ashr (trunc A), BW-1)), which checks the</span></div>
<div class="line"><a name="l04882"></a><span class="lineno"> 4882</span>&#160;  <span class="comment">// top BW/2 + 1 bits are all the same. Create &quot;A &gt;=s INT_MIN &amp;&amp; A &lt;=s INT_MAX&quot;,</span></div>
<div class="line"><a name="l04883"></a><span class="lineno"> 4883</span>&#160;  <span class="comment">// which we generate as &quot;icmp ult (add A, 2^(BW-1)), 2^BW&quot; to skip a few steps</span></div>
<div class="line"><a name="l04884"></a><span class="lineno"> 4884</span>&#160;  <span class="comment">// of instcombine.</span></div>
<div class="line"><a name="l04885"></a><span class="lineno"> 4885</span>&#160;  <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm.html#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a> = Op0-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>();</div>
<div class="line"><a name="l04886"></a><span class="lineno"> 4886</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a64153676e101a130bbbaaf91635d253a">m_AShr</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a5b844aada27c4c6fdb87146ac458c0d8">m_Trunc</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A)), <a class="code" href="namespacellvm_1_1PatternMatch.html#a3acbd0be97863e3e03e3b85641254018">m_SpecificInt</a>(<a class="code" href="namespacellvm.html#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a> - 1))) &amp;&amp;</div>
<div class="line"><a name="l04887"></a><span class="lineno"> 4887</span>&#160;      <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#a5b844aada27c4c6fdb87146ac458c0d8">m_Trunc</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#aa08fee11e8a5ec10c0cc2a7abbbd799a">m_LShr</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a3acbd0be97863e3e03e3b85641254018">m_SpecificInt</a>(<a class="code" href="namespacellvm.html#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a>)))) &amp;&amp;</div>
<div class="line"><a name="l04888"></a><span class="lineno"> 4888</span>&#160;      A-&gt;getType()-&gt;getScalarSizeInBits() == <a class="code" href="namespacellvm.html#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a> * 2 &amp;&amp;</div>
<div class="line"><a name="l04889"></a><span class="lineno"> 4889</span>&#160;      (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(0)-&gt;hasOneUse() || <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(1)-&gt;hasOneUse())) {</div>
<div class="line"><a name="l04890"></a><span class="lineno"> 4890</span>&#160;    <a class="code" href="classllvm_1_1APInt.html">APInt</a> <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = <a class="code" href="classllvm_1_1APInt.html#aec662ee6ab1490a4cabebf2812e5b9ca">APInt::getOneBitSet</a>(<a class="code" href="namespacellvm.html#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a> * 2, <a class="code" href="namespacellvm.html#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a> - 1);</div>
<div class="line"><a name="l04891"></a><span class="lineno"> 4891</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Add = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAdd(A, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(A-&gt;getType(), <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>));</div>
<div class="line"><a name="l04892"></a><span class="lineno"> 4892</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a> ? <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e">ICmpInst::ICMP_ULT</a></div>
<div class="line"><a name="l04893"></a><span class="lineno"> 4893</span>&#160;                                                  : <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba573bcd571c938fce863525330bbfc4b8">ICmpInst::ICMP_UGE</a>,</div>
<div class="line"><a name="l04894"></a><span class="lineno"> 4894</span>&#160;                        Add, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(A-&gt;getType(), <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.shl(1)));</div>
<div class="line"><a name="l04895"></a><span class="lineno"> 4895</span>&#160;  }</div>
<div class="line"><a name="l04896"></a><span class="lineno"> 4896</span>&#160; </div>
<div class="line"><a name="l04897"></a><span class="lineno"> 4897</span>&#160;  <span class="comment">// Canonicalize:</span></div>
<div class="line"><a name="l04898"></a><span class="lineno"> 4898</span>&#160;  <span class="comment">// Assume B_Pow2 != 0</span></div>
<div class="line"><a name="l04899"></a><span class="lineno"> 4899</span>&#160;  <span class="comment">// 1. A &amp; B_Pow2 != B_Pow2 -&gt; A &amp; B_Pow2 == 0</span></div>
<div class="line"><a name="l04900"></a><span class="lineno"> 4900</span>&#160;  <span class="comment">// 2. A &amp; B_Pow2 == B_Pow2 -&gt; A &amp; B_Pow2 != 0</span></div>
<div class="line"><a name="l04901"></a><span class="lineno"> 4901</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#ae9d735be1ececf149966a4da253f0320">m_c_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(Op1), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>())) &amp;&amp;</div>
<div class="line"><a name="l04902"></a><span class="lineno"> 4902</span>&#160;      <a class="code" href="namespacellvm.html#a4036c3c75bcee1206cd199548b87f9ae">isKnownToBeAPowerOfTwo</a>(Op1, <span class="comment">/* OrZero */</span> <span class="keyword">false</span>, 0, &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l04903"></a><span class="lineno"> 4903</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#aa2a54b545d237ecfe450fd1292f7675e">CmpInst::getInversePredicate</a>(Pred), Op0,</div>
<div class="line"><a name="l04904"></a><span class="lineno"> 4904</span>&#160;                        <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">ConstantInt::getNullValue</a>(Op0-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()));</div>
<div class="line"><a name="l04905"></a><span class="lineno"> 4905</span>&#160; </div>
<div class="line"><a name="l04906"></a><span class="lineno"> 4906</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#ae9d735be1ececf149966a4da253f0320">m_c_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(Op0), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>())) &amp;&amp;</div>
<div class="line"><a name="l04907"></a><span class="lineno"> 4907</span>&#160;      <a class="code" href="namespacellvm.html#a4036c3c75bcee1206cd199548b87f9ae">isKnownToBeAPowerOfTwo</a>(Op0, <span class="comment">/* OrZero */</span> <span class="keyword">false</span>, 0, &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l04908"></a><span class="lineno"> 4908</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#aa2a54b545d237ecfe450fd1292f7675e">CmpInst::getInversePredicate</a>(Pred), Op1,</div>
<div class="line"><a name="l04909"></a><span class="lineno"> 4909</span>&#160;                        <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">ConstantInt::getNullValue</a>(Op1-&gt;getType()));</div>
<div class="line"><a name="l04910"></a><span class="lineno"> 4910</span>&#160; </div>
<div class="line"><a name="l04911"></a><span class="lineno"> 4911</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l04912"></a><span class="lineno"> 4912</span>&#160;}</div>
<div class="line"><a name="l04913"></a><span class="lineno"> 4913</span>&#160; </div>
<div class="line"><a name="l04914"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombinerImpl.html#a7caf9cd5dff4734b8af500d6f0f07437"> 4914</a></span>&#160;<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombinerImpl.html#a7caf9cd5dff4734b8af500d6f0f07437">InstCombinerImpl::foldICmpWithTrunc</a>(<a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> &amp;ICmp) {</div>
<div class="line"><a name="l04915"></a><span class="lineno"> 4915</span>&#160;  <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">ICmpInst::Predicate</a> Pred = ICmp.<a class="code" href="classllvm_1_1CmpInst.html#aa7414ba9f658ff1287d22a4b8fe81bcb">getPredicate</a>();</div>
<div class="line"><a name="l04916"></a><span class="lineno"> 4916</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Op0 = ICmp.<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0), *Op1 = ICmp.<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(1);</div>
<div class="line"><a name="l04917"></a><span class="lineno"> 4917</span>&#160; </div>
<div class="line"><a name="l04918"></a><span class="lineno"> 4918</span>&#160;  <span class="comment">// Try to canonicalize trunc + compare-to-constant into a mask + cmp.</span></div>
<div class="line"><a name="l04919"></a><span class="lineno"> 4919</span>&#160;  <span class="comment">// The trunc masks high bits while the compare may effectively mask low bits.</span></div>
<div class="line"><a name="l04920"></a><span class="lineno"> 4920</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>;</div>
<div class="line"><a name="l04921"></a><span class="lineno"> 4921</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>;</div>
<div class="line"><a name="l04922"></a><span class="lineno"> 4922</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a5b844aada27c4c6fdb87146ac458c0d8">m_Trunc</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>)))) || !<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)))</div>
<div class="line"><a name="l04923"></a><span class="lineno"> 4923</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l04924"></a><span class="lineno"> 4924</span>&#160; </div>
<div class="line"><a name="l04925"></a><span class="lineno"> 4925</span>&#160;  <span class="comment">// This matches patterns corresponding to tests of the signbit as well as:</span></div>
<div class="line"><a name="l04926"></a><span class="lineno"> 4926</span>&#160;  <span class="comment">// (trunc X) u&lt; C --&gt; (X &amp; -C) == 0 (are all masked-high-bits clear?)</span></div>
<div class="line"><a name="l04927"></a><span class="lineno"> 4927</span>&#160;  <span class="comment">// (trunc X) u&gt; C --&gt; (X &amp; ~C) != 0 (are any masked-high-bits set?)</span></div>
<div class="line"><a name="l04928"></a><span class="lineno"> 4928</span>&#160;  <a class="code" href="classllvm_1_1APInt.html">APInt</a> <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a>;</div>
<div class="line"><a name="l04929"></a><span class="lineno"> 4929</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#ad4d2f143e181b60a4f70d791bbcba8b3">decomposeBitTestICmp</a>(Op0, Op1, Pred, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a>, <span class="keyword">true</span> <span class="comment">/* WithTrunc */</span>)) {</div>
<div class="line"><a name="l04930"></a><span class="lineno"> 4930</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eac33315685a0cba3ce53be378b3c7874b">And</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAnd(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a>);</div>
<div class="line"><a name="l04931"></a><span class="lineno"> 4931</span>&#160;    <a class="code" href="classllvm_1_1Constant.html">Constant</a> *Zero = <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">ConstantInt::getNullValue</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getType());</div>
<div class="line"><a name="l04932"></a><span class="lineno"> 4932</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, <a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eac33315685a0cba3ce53be378b3c7874b">And</a>, Zero);</div>
<div class="line"><a name="l04933"></a><span class="lineno"> 4933</span>&#160;  }</div>
<div class="line"><a name="l04934"></a><span class="lineno"> 4934</span>&#160; </div>
<div class="line"><a name="l04935"></a><span class="lineno"> 4935</span>&#160;  <span class="keywordtype">unsigned</span> SrcBits = <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getType()-&gt;getScalarSizeInBits();</div>
<div class="line"><a name="l04936"></a><span class="lineno"> 4936</span>&#160;  <span class="keywordflow">if</span> (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e">ICmpInst::ICMP_ULT</a> &amp;&amp; <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;isNegatedPowerOf2()) {</div>
<div class="line"><a name="l04937"></a><span class="lineno"> 4937</span>&#160;    <span class="comment">// If C is a negative power-of-2 (high-bit mask):</span></div>
<div class="line"><a name="l04938"></a><span class="lineno"> 4938</span>&#160;    <span class="comment">// (trunc X) u&lt; C --&gt; (X &amp; C) != C (are any masked-high-bits clear?)</span></div>
<div class="line"><a name="l04939"></a><span class="lineno"> 4939</span>&#160;    <a class="code" href="classllvm_1_1Constant.html">Constant</a> *MaskC = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getType(), <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;zext(SrcBits));</div>
<div class="line"><a name="l04940"></a><span class="lineno"> 4940</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eac33315685a0cba3ce53be378b3c7874b">And</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAnd(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, MaskC);</div>
<div class="line"><a name="l04941"></a><span class="lineno"> 4941</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a>, <a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eac33315685a0cba3ce53be378b3c7874b">And</a>, MaskC);</div>
<div class="line"><a name="l04942"></a><span class="lineno"> 4942</span>&#160;  }</div>
<div class="line"><a name="l04943"></a><span class="lineno"> 4943</span>&#160; </div>
<div class="line"><a name="l04944"></a><span class="lineno"> 4944</span>&#160;  <span class="keywordflow">if</span> (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba607cecdc5172814382033e001ed11fad">ICmpInst::ICMP_UGT</a> &amp;&amp; (~*<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>).isPowerOf2()) {</div>
<div class="line"><a name="l04945"></a><span class="lineno"> 4945</span>&#160;    <span class="comment">// If C is not-of-power-of-2 (one clear bit):</span></div>
<div class="line"><a name="l04946"></a><span class="lineno"> 4946</span>&#160;    <span class="comment">// (trunc X) u&gt; C --&gt; (X &amp; (C+1)) == C+1 (are all masked-high-bits set?)</span></div>
<div class="line"><a name="l04947"></a><span class="lineno"> 4947</span>&#160;    <a class="code" href="classllvm_1_1Constant.html">Constant</a> *MaskC = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getType(), (*<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> + 1).zext(SrcBits));</div>
<div class="line"><a name="l04948"></a><span class="lineno"> 4948</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eac33315685a0cba3ce53be378b3c7874b">And</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAnd(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, MaskC);</div>
<div class="line"><a name="l04949"></a><span class="lineno"> 4949</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a>, <a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eac33315685a0cba3ce53be378b3c7874b">And</a>, MaskC);</div>
<div class="line"><a name="l04950"></a><span class="lineno"> 4950</span>&#160;  }</div>
<div class="line"><a name="l04951"></a><span class="lineno"> 4951</span>&#160; </div>
<div class="line"><a name="l04952"></a><span class="lineno"> 4952</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *II = dyn_cast&lt;IntrinsicInst&gt;(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>)) {</div>
<div class="line"><a name="l04953"></a><span class="lineno"> 4953</span>&#160;    <span class="keywordflow">if</span> (II-&gt;getIntrinsicID() == Intrinsic::cttz ||</div>
<div class="line"><a name="l04954"></a><span class="lineno"> 4954</span>&#160;        II-&gt;getIntrinsicID() == Intrinsic::ctlz) {</div>
<div class="line"><a name="l04955"></a><span class="lineno"> 4955</span>&#160;      <span class="keywordtype">unsigned</span> MaxRet = SrcBits;</div>
<div class="line"><a name="l04956"></a><span class="lineno"> 4956</span>&#160;      <span class="comment">// If the &quot;is_zero_poison&quot; argument is set, then we know at least</span></div>
<div class="line"><a name="l04957"></a><span class="lineno"> 4957</span>&#160;      <span class="comment">// one bit is set in the input, so the result is always at least one</span></div>
<div class="line"><a name="l04958"></a><span class="lineno"> 4958</span>&#160;      <span class="comment">// less than the full bitwidth of that input.</span></div>
<div class="line"><a name="l04959"></a><span class="lineno"> 4959</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(II-&gt;getArgOperand(1), <a class="code" href="namespacellvm_1_1PatternMatch.html#aebdb2700a77d10ae6f0ce115e23d9f77">m_One</a>()))</div>
<div class="line"><a name="l04960"></a><span class="lineno"> 4960</span>&#160;        MaxRet--;</div>
<div class="line"><a name="l04961"></a><span class="lineno"> 4961</span>&#160; </div>
<div class="line"><a name="l04962"></a><span class="lineno"> 4962</span>&#160;      <span class="comment">// Make sure the destination is wide enough to hold the largest output of</span></div>
<div class="line"><a name="l04963"></a><span class="lineno"> 4963</span>&#160;      <span class="comment">// the intrinsic.</span></div>
<div class="line"><a name="l04964"></a><span class="lineno"> 4964</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a646986783f35e0fef8988f0f28d2589f">llvm::Log2_32</a>(MaxRet) + 1 &lt;= Op0-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>())</div>
<div class="line"><a name="l04965"></a><span class="lineno"> 4965</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> =</div>
<div class="line"><a name="l04966"></a><span class="lineno"> 4966</span>&#160;                foldICmpIntrinsicWithConstant(ICmp, II, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;zext(SrcBits)))</div>
<div class="line"><a name="l04967"></a><span class="lineno"> 4967</span>&#160;          <span class="keywordflow">return</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l04968"></a><span class="lineno"> 4968</span>&#160;    }</div>
<div class="line"><a name="l04969"></a><span class="lineno"> 4969</span>&#160;  }</div>
<div class="line"><a name="l04970"></a><span class="lineno"> 4970</span>&#160; </div>
<div class="line"><a name="l04971"></a><span class="lineno"> 4971</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l04972"></a><span class="lineno"> 4972</span>&#160;}</div>
<div class="line"><a name="l04973"></a><span class="lineno"> 4973</span>&#160; </div>
<div class="line"><a name="l04974"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombinerImpl.html#a04d40b2885dcf7e80feed09ba6209e54"> 4974</a></span>&#160;<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombinerImpl.html#a04d40b2885dcf7e80feed09ba6209e54">InstCombinerImpl::foldICmpWithZextOrSext</a>(<a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> &amp;ICmp) {</div>
<div class="line"><a name="l04975"></a><span class="lineno"> 4975</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(isa&lt;CastInst&gt;(ICmp.<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0)) &amp;&amp; <span class="stringliteral">&quot;Expected cast for operand 0&quot;</span>);</div>
<div class="line"><a name="l04976"></a><span class="lineno"> 4976</span>&#160;  <span class="keyword">auto</span> *CastOp0 = cast&lt;CastInst&gt;(ICmp.<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0));</div>
<div class="line"><a name="l04977"></a><span class="lineno"> 4977</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>;</div>
<div class="line"><a name="l04978"></a><span class="lineno"> 4978</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(CastOp0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a247b6987d634040b8aa6fb9c5887b703">m_ZExtOrSExt</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>))))</div>
<div class="line"><a name="l04979"></a><span class="lineno"> 4979</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l04980"></a><span class="lineno"> 4980</span>&#160; </div>
<div class="line"><a name="l04981"></a><span class="lineno"> 4981</span>&#160;  <span class="keywordtype">bool</span> IsSignedExt = CastOp0-&gt;getOpcode() == Instruction::SExt;</div>
<div class="line"><a name="l04982"></a><span class="lineno"> 4982</span>&#160;  <span class="keywordtype">bool</span> IsSignedCmp = ICmp.<a class="code" href="classllvm_1_1CmpInst.html#a3712279d70deeec90a93db09deb12d02">isSigned</a>();</div>
<div class="line"><a name="l04983"></a><span class="lineno"> 4983</span>&#160; </div>
<div class="line"><a name="l04984"></a><span class="lineno"> 4984</span>&#160;  <span class="comment">// icmp Pred (ext X), (ext Y)</span></div>
<div class="line"><a name="l04985"></a><span class="lineno"> 4985</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>;</div>
<div class="line"><a name="l04986"></a><span class="lineno"> 4986</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(ICmp.<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(1), <a class="code" href="namespacellvm_1_1PatternMatch.html#a247b6987d634040b8aa6fb9c5887b703">m_ZExtOrSExt</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>)))) {</div>
<div class="line"><a name="l04987"></a><span class="lineno"> 4987</span>&#160;    <span class="keywordtype">bool</span> IsZext0 = isa&lt;ZExtOperator&gt;(ICmp.<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0));</div>
<div class="line"><a name="l04988"></a><span class="lineno"> 4988</span>&#160;    <span class="keywordtype">bool</span> IsZext1 = isa&lt;ZExtOperator&gt;(ICmp.<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(1));</div>
<div class="line"><a name="l04989"></a><span class="lineno"> 4989</span>&#160; </div>
<div class="line"><a name="l04990"></a><span class="lineno"> 4990</span>&#160;    <span class="comment">// If we have mismatched casts, treat the zext of a non-negative source as</span></div>
<div class="line"><a name="l04991"></a><span class="lineno"> 4991</span>&#160;    <span class="comment">// a sext to simulate matching casts. Otherwise, we are done.</span></div>
<div class="line"><a name="l04992"></a><span class="lineno"> 4992</span>&#160;    <span class="comment">// TODO: Can we handle some predicates (equality) without non-negative?</span></div>
<div class="line"><a name="l04993"></a><span class="lineno"> 4993</span>&#160;    <span class="keywordflow">if</span> (IsZext0 != IsZext1) {</div>
<div class="line"><a name="l04994"></a><span class="lineno"> 4994</span>&#160;      <span class="keywordflow">if</span> ((IsZext0 &amp;&amp; <a class="code" href="namespacellvm.html#ac0be0d93ccd89dac00411b3a5a8bef87">isKnownNonNegative</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, 0, &amp;AC, &amp;ICmp, &amp;DT)) ||</div>
<div class="line"><a name="l04995"></a><span class="lineno"> 4995</span>&#160;          (IsZext1 &amp;&amp; <a class="code" href="namespacellvm.html#ac0be0d93ccd89dac00411b3a5a8bef87">isKnownNonNegative</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, 0, &amp;AC, &amp;ICmp, &amp;DT)))</div>
<div class="line"><a name="l04996"></a><span class="lineno"> 4996</span>&#160;        IsSignedExt = <span class="keyword">true</span>;</div>
<div class="line"><a name="l04997"></a><span class="lineno"> 4997</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l04998"></a><span class="lineno"> 4998</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l04999"></a><span class="lineno"> 4999</span>&#160;    }</div>
<div class="line"><a name="l05000"></a><span class="lineno"> 5000</span>&#160; </div>
<div class="line"><a name="l05001"></a><span class="lineno"> 5001</span>&#160;    <span class="comment">// Not an extension from the same type?</span></div>
<div class="line"><a name="l05002"></a><span class="lineno"> 5002</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *XTy = <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getType(), *YTy = <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>-&gt;getType();</div>
<div class="line"><a name="l05003"></a><span class="lineno"> 5003</span>&#160;    <span class="keywordflow">if</span> (XTy != YTy) {</div>
<div class="line"><a name="l05004"></a><span class="lineno"> 5004</span>&#160;      <span class="comment">// One of the casts must have one use because we are creating a new cast.</span></div>
<div class="line"><a name="l05005"></a><span class="lineno"> 5005</span>&#160;      <span class="keywordflow">if</span> (!ICmp.<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0)-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>() &amp;&amp; !ICmp.<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(1)-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>())</div>
<div class="line"><a name="l05006"></a><span class="lineno"> 5006</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l05007"></a><span class="lineno"> 5007</span>&#160;      <span class="comment">// Extend the narrower operand to the type of the wider operand.</span></div>
<div class="line"><a name="l05008"></a><span class="lineno"> 5008</span>&#160;      <a class="code" href="classllvm_1_1Instruction.html#afa0b2fa29ba074f2b6ec9ac11163f2d9">CastInst::CastOps</a> CastOpcode =</div>
<div class="line"><a name="l05009"></a><span class="lineno"> 5009</span>&#160;          IsSignedExt ? Instruction::SExt : Instruction::ZExt;</div>
<div class="line"><a name="l05010"></a><span class="lineno"> 5010</span>&#160;      <span class="keywordflow">if</span> (XTy-&gt;<a class="code" href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>() &lt; YTy-&gt;getScalarSizeInBits())</div>
<div class="line"><a name="l05011"></a><span class="lineno"> 5011</span>&#160;        <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCast(CastOpcode, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, YTy);</div>
<div class="line"><a name="l05012"></a><span class="lineno"> 5012</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (YTy-&gt;getScalarSizeInBits() &lt; XTy-&gt;<a class="code" href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>())</div>
<div class="line"><a name="l05013"></a><span class="lineno"> 5013</span>&#160;        <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCast(CastOpcode, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, XTy);</div>
<div class="line"><a name="l05014"></a><span class="lineno"> 5014</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l05015"></a><span class="lineno"> 5015</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l05016"></a><span class="lineno"> 5016</span>&#160;    }</div>
<div class="line"><a name="l05017"></a><span class="lineno"> 5017</span>&#160; </div>
<div class="line"><a name="l05018"></a><span class="lineno"> 5018</span>&#160;    <span class="comment">// (zext X) == (zext Y) --&gt; X == Y</span></div>
<div class="line"><a name="l05019"></a><span class="lineno"> 5019</span>&#160;    <span class="comment">// (sext X) == (sext Y) --&gt; X == Y</span></div>
<div class="line"><a name="l05020"></a><span class="lineno"> 5020</span>&#160;    <span class="keywordflow">if</span> (ICmp.<a class="code" href="classllvm_1_1ICmpInst.html#abe8988eef2e6fc2baba032cb22afedd7">isEquality</a>())</div>
<div class="line"><a name="l05021"></a><span class="lineno"> 5021</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(ICmp.<a class="code" href="classllvm_1_1CmpInst.html#aa7414ba9f658ff1287d22a4b8fe81bcb">getPredicate</a>(), <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>);</div>
<div class="line"><a name="l05022"></a><span class="lineno"> 5022</span>&#160; </div>
<div class="line"><a name="l05023"></a><span class="lineno"> 5023</span>&#160;    <span class="comment">// A signed comparison of sign extended values simplifies into a</span></div>
<div class="line"><a name="l05024"></a><span class="lineno"> 5024</span>&#160;    <span class="comment">// signed comparison.</span></div>
<div class="line"><a name="l05025"></a><span class="lineno"> 5025</span>&#160;    <span class="keywordflow">if</span> (IsSignedCmp &amp;&amp; IsSignedExt)</div>
<div class="line"><a name="l05026"></a><span class="lineno"> 5026</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(ICmp.<a class="code" href="classllvm_1_1CmpInst.html#aa7414ba9f658ff1287d22a4b8fe81bcb">getPredicate</a>(), <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>);</div>
<div class="line"><a name="l05027"></a><span class="lineno"> 5027</span>&#160; </div>
<div class="line"><a name="l05028"></a><span class="lineno"> 5028</span>&#160;    <span class="comment">// The other three cases all fold into an unsigned comparison.</span></div>
<div class="line"><a name="l05029"></a><span class="lineno"> 5029</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(ICmp.<a class="code" href="classllvm_1_1ICmpInst.html#af07a09f1cda33d984cc725dc9e856d40">getUnsignedPredicate</a>(), <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>);</div>
<div class="line"><a name="l05030"></a><span class="lineno"> 5030</span>&#160;  }</div>
<div class="line"><a name="l05031"></a><span class="lineno"> 5031</span>&#160; </div>
<div class="line"><a name="l05032"></a><span class="lineno"> 5032</span>&#160;  <span class="comment">// Below here, we are only folding a compare with constant.</span></div>
<div class="line"><a name="l05033"></a><span class="lineno"> 5033</span>&#160;  <span class="keyword">auto</span> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = dyn_cast&lt;Constant&gt;(ICmp.<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(1));</div>
<div class="line"><a name="l05034"></a><span class="lineno"> 5034</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)</div>
<div class="line"><a name="l05035"></a><span class="lineno"> 5035</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l05036"></a><span class="lineno"> 5036</span>&#160; </div>
<div class="line"><a name="l05037"></a><span class="lineno"> 5037</span>&#160;  <span class="comment">// Compute the constant that would happen if we truncated to SrcTy then</span></div>
<div class="line"><a name="l05038"></a><span class="lineno"> 5038</span>&#160;  <span class="comment">// re-extended to DestTy.</span></div>
<div class="line"><a name="l05039"></a><span class="lineno"> 5039</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *SrcTy = CastOp0-&gt;getSrcTy();</div>
<div class="line"><a name="l05040"></a><span class="lineno"> 5040</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *DestTy = CastOp0-&gt;getDestTy();</div>
<div class="line"><a name="l05041"></a><span class="lineno"> 5041</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *Res1 = <a class="code" href="classllvm_1_1ConstantExpr.html#af238147cf5453729781a0fcc7322e1c6">ConstantExpr::getTrunc</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, SrcTy);</div>
<div class="line"><a name="l05042"></a><span class="lineno"> 5042</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *Res2 = <a class="code" href="classllvm_1_1ConstantExpr.html#a49b69843927f7cd96d866768b3aec92b">ConstantExpr::getCast</a>(CastOp0-&gt;getOpcode(), Res1, DestTy);</div>
<div class="line"><a name="l05043"></a><span class="lineno"> 5043</span>&#160; </div>
<div class="line"><a name="l05044"></a><span class="lineno"> 5044</span>&#160;  <span class="comment">// If the re-extended constant didn&#39;t change...</span></div>
<div class="line"><a name="l05045"></a><span class="lineno"> 5045</span>&#160;  <span class="keywordflow">if</span> (Res2 == <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>) {</div>
<div class="line"><a name="l05046"></a><span class="lineno"> 5046</span>&#160;    <span class="keywordflow">if</span> (ICmp.<a class="code" href="classllvm_1_1ICmpInst.html#abe8988eef2e6fc2baba032cb22afedd7">isEquality</a>())</div>
<div class="line"><a name="l05047"></a><span class="lineno"> 5047</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(ICmp.<a class="code" href="classllvm_1_1CmpInst.html#aa7414ba9f658ff1287d22a4b8fe81bcb">getPredicate</a>(), <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, Res1);</div>
<div class="line"><a name="l05048"></a><span class="lineno"> 5048</span>&#160; </div>
<div class="line"><a name="l05049"></a><span class="lineno"> 5049</span>&#160;    <span class="comment">// A signed comparison of sign extended values simplifies into a</span></div>
<div class="line"><a name="l05050"></a><span class="lineno"> 5050</span>&#160;    <span class="comment">// signed comparison.</span></div>
<div class="line"><a name="l05051"></a><span class="lineno"> 5051</span>&#160;    <span class="keywordflow">if</span> (IsSignedExt &amp;&amp; IsSignedCmp)</div>
<div class="line"><a name="l05052"></a><span class="lineno"> 5052</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(ICmp.<a class="code" href="classllvm_1_1CmpInst.html#aa7414ba9f658ff1287d22a4b8fe81bcb">getPredicate</a>(), <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, Res1);</div>
<div class="line"><a name="l05053"></a><span class="lineno"> 5053</span>&#160; </div>
<div class="line"><a name="l05054"></a><span class="lineno"> 5054</span>&#160;    <span class="comment">// The other three cases all fold into an unsigned comparison.</span></div>
<div class="line"><a name="l05055"></a><span class="lineno"> 5055</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(ICmp.<a class="code" href="classllvm_1_1ICmpInst.html#af07a09f1cda33d984cc725dc9e856d40">getUnsignedPredicate</a>(), <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, Res1);</div>
<div class="line"><a name="l05056"></a><span class="lineno"> 5056</span>&#160;  }</div>
<div class="line"><a name="l05057"></a><span class="lineno"> 5057</span>&#160; </div>
<div class="line"><a name="l05058"></a><span class="lineno"> 5058</span>&#160;  <span class="comment">// The re-extended constant changed, partly changed (in the case of a vector),</span></div>
<div class="line"><a name="l05059"></a><span class="lineno"> 5059</span>&#160;  <span class="comment">// or could not be determined to be equal (in the case of a constant</span></div>
<div class="line"><a name="l05060"></a><span class="lineno"> 5060</span>&#160;  <span class="comment">// expression), so the constant cannot be represented in the shorter type.</span></div>
<div class="line"><a name="l05061"></a><span class="lineno"> 5061</span>&#160;  <span class="comment">// All the cases that fold to true or false will have already been handled</span></div>
<div class="line"><a name="l05062"></a><span class="lineno"> 5062</span>&#160;  <span class="comment">// by simplifyICmpInst, so only deal with the tricky case.</span></div>
<div class="line"><a name="l05063"></a><span class="lineno"> 5063</span>&#160;  <span class="keywordflow">if</span> (IsSignedCmp || !IsSignedExt || !isa&lt;ConstantInt&gt;(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>))</div>
<div class="line"><a name="l05064"></a><span class="lineno"> 5064</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l05065"></a><span class="lineno"> 5065</span>&#160; </div>
<div class="line"><a name="l05066"></a><span class="lineno"> 5066</span>&#160;  <span class="comment">// Is source op positive?</span></div>
<div class="line"><a name="l05067"></a><span class="lineno"> 5067</span>&#160;  <span class="comment">// icmp ult (sext X), C --&gt; icmp sgt X, -1</span></div>
<div class="line"><a name="l05068"></a><span class="lineno"> 5068</span>&#160;  <span class="keywordflow">if</span> (ICmp.<a class="code" href="classllvm_1_1CmpInst.html#aa7414ba9f658ff1287d22a4b8fe81bcb">getPredicate</a>() == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e">ICmpInst::ICMP_ULT</a>)</div>
<div class="line"><a name="l05069"></a><span class="lineno"> 5069</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba720a42e85f7e981afd61e28473b0000a">CmpInst::ICMP_SGT</a>, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="classllvm_1_1Constant.html#a4d51384de6e1798bb6aa875aebeea9f0">Constant::getAllOnesValue</a>(SrcTy));</div>
<div class="line"><a name="l05070"></a><span class="lineno"> 5070</span>&#160; </div>
<div class="line"><a name="l05071"></a><span class="lineno"> 5071</span>&#160;  <span class="comment">// Is source op negative?</span></div>
<div class="line"><a name="l05072"></a><span class="lineno"> 5072</span>&#160;  <span class="comment">// icmp ugt (sext X), C --&gt; icmp slt X, 0</span></div>
<div class="line"><a name="l05073"></a><span class="lineno"> 5073</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(ICmp.<a class="code" href="classllvm_1_1CmpInst.html#aa7414ba9f658ff1287d22a4b8fe81bcb">getPredicate</a>() == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba607cecdc5172814382033e001ed11fad">ICmpInst::ICMP_UGT</a> &amp;&amp; <span class="stringliteral">&quot;ICmp should be folded!&quot;</span>);</div>
<div class="line"><a name="l05074"></a><span class="lineno"> 5074</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba15ae464950ac676919c2f0c7aafc706c">CmpInst::ICMP_SLT</a>, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(SrcTy));</div>
<div class="line"><a name="l05075"></a><span class="lineno"> 5075</span>&#160;}</div>
<div class="line"><a name="l05076"></a><span class="lineno"> 5076</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l05077"></a><span class="lineno"> 5077</span>&#160;<span class="comment">/// Handle icmp (cast x), (cast or constant).</span></div>
<div class="line"><a name="l05078"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombinerImpl.html#a9ab27a13577b53506529f28d41aa0672"> 5078</a></span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombinerImpl.html#a9ab27a13577b53506529f28d41aa0672">InstCombinerImpl::foldICmpWithCastOp</a>(<a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> &amp;ICmp) {</div>
<div class="line"><a name="l05079"></a><span class="lineno"> 5079</span>&#160;  <span class="comment">// If any operand of ICmp is a inttoptr roundtrip cast then remove it as</span></div>
<div class="line"><a name="l05080"></a><span class="lineno"> 5080</span>&#160;  <span class="comment">// icmp compares only pointer&#39;s value.</span></div>
<div class="line"><a name="l05081"></a><span class="lineno"> 5081</span>&#160;  <span class="comment">// icmp (inttoptr (ptrtoint p1)), p2 --&gt; icmp p1, p2.</span></div>
<div class="line"><a name="l05082"></a><span class="lineno"> 5082</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *SimplifiedOp0 = simplifyIntToPtrRoundTripCast(ICmp.<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0));</div>
<div class="line"><a name="l05083"></a><span class="lineno"> 5083</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *SimplifiedOp1 = simplifyIntToPtrRoundTripCast(ICmp.<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(1));</div>
<div class="line"><a name="l05084"></a><span class="lineno"> 5084</span>&#160;  <span class="keywordflow">if</span> (SimplifiedOp0 || SimplifiedOp1)</div>
<div class="line"><a name="l05085"></a><span class="lineno"> 5085</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(ICmp.<a class="code" href="classllvm_1_1CmpInst.html#aa7414ba9f658ff1287d22a4b8fe81bcb">getPredicate</a>(),</div>
<div class="line"><a name="l05086"></a><span class="lineno"> 5086</span>&#160;                        SimplifiedOp0 ? SimplifiedOp0 : ICmp.<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0),</div>
<div class="line"><a name="l05087"></a><span class="lineno"> 5087</span>&#160;                        SimplifiedOp1 ? SimplifiedOp1 : ICmp.<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(1));</div>
<div class="line"><a name="l05088"></a><span class="lineno"> 5088</span>&#160; </div>
<div class="line"><a name="l05089"></a><span class="lineno"> 5089</span>&#160;  <span class="keyword">auto</span> *CastOp0 = dyn_cast&lt;CastInst&gt;(ICmp.<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0));</div>
<div class="line"><a name="l05090"></a><span class="lineno"> 5090</span>&#160;  <span class="keywordflow">if</span> (!CastOp0)</div>
<div class="line"><a name="l05091"></a><span class="lineno"> 5091</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l05092"></a><span class="lineno"> 5092</span>&#160;  <span class="keywordflow">if</span> (!isa&lt;Constant&gt;(ICmp.<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(1)) &amp;&amp; !isa&lt;CastInst&gt;(ICmp.<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(1)))</div>
<div class="line"><a name="l05093"></a><span class="lineno"> 5093</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l05094"></a><span class="lineno"> 5094</span>&#160; </div>
<div class="line"><a name="l05095"></a><span class="lineno"> 5095</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Op0Src = CastOp0-&gt;getOperand(0);</div>
<div class="line"><a name="l05096"></a><span class="lineno"> 5096</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *SrcTy = CastOp0-&gt;getSrcTy();</div>
<div class="line"><a name="l05097"></a><span class="lineno"> 5097</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *DestTy = CastOp0-&gt;getDestTy();</div>
<div class="line"><a name="l05098"></a><span class="lineno"> 5098</span>&#160; </div>
<div class="line"><a name="l05099"></a><span class="lineno"> 5099</span>&#160;  <span class="comment">// Turn icmp (ptrtoint x), (ptrtoint/c) into a compare of the input if the</span></div>
<div class="line"><a name="l05100"></a><span class="lineno"> 5100</span>&#160;  <span class="comment">// integer type is the same size as the pointer type.</span></div>
<div class="line"><a name="l05101"></a><span class="lineno"> 5101</span>&#160;  <span class="keyword">auto</span> CompatibleSizes = [&amp;](<a class="code" href="classllvm_1_1Type.html">Type</a> *SrcTy, <a class="code" href="classllvm_1_1Type.html">Type</a> *DestTy) {</div>
<div class="line"><a name="l05102"></a><span class="lineno"> 5102</span>&#160;    <span class="keywordflow">if</span> (isa&lt;VectorType&gt;(SrcTy)) {</div>
<div class="line"><a name="l05103"></a><span class="lineno"> 5103</span>&#160;      SrcTy = cast&lt;VectorType&gt;(SrcTy)-&gt;getElementType();</div>
<div class="line"><a name="l05104"></a><span class="lineno"> 5104</span>&#160;      DestTy = cast&lt;VectorType&gt;(DestTy)-&gt;getElementType();</div>
<div class="line"><a name="l05105"></a><span class="lineno"> 5105</span>&#160;    }</div>
<div class="line"><a name="l05106"></a><span class="lineno"> 5106</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getPointerTypeSizeInBits(SrcTy) == DestTy-&gt;<a class="code" href="classllvm_1_1Type.html#a13e877ef779ba7a0688081079f4f9b03">getIntegerBitWidth</a>();</div>
<div class="line"><a name="l05107"></a><span class="lineno"> 5107</span>&#160;  };</div>
<div class="line"><a name="l05108"></a><span class="lineno"> 5108</span>&#160;  <span class="keywordflow">if</span> (CastOp0-&gt;getOpcode() == Instruction::PtrToInt &amp;&amp;</div>
<div class="line"><a name="l05109"></a><span class="lineno"> 5109</span>&#160;      CompatibleSizes(SrcTy, DestTy)) {</div>
<div class="line"><a name="l05110"></a><span class="lineno"> 5110</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *NewOp1 = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l05111"></a><span class="lineno"> 5111</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> *PtrToIntOp1 = dyn_cast&lt;PtrToIntOperator&gt;(ICmp.<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(1))) {</div>
<div class="line"><a name="l05112"></a><span class="lineno"> 5112</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *PtrSrc = PtrToIntOp1-&gt;getOperand(0);</div>
<div class="line"><a name="l05113"></a><span class="lineno"> 5113</span>&#160;      <span class="keywordflow">if</span> (PtrSrc-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a5ab2d0b0f0b8ceec3b907184e7567197">getPointerAddressSpace</a>() ==</div>
<div class="line"><a name="l05114"></a><span class="lineno"> 5114</span>&#160;          Op0Src-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a5ab2d0b0f0b8ceec3b907184e7567197">getPointerAddressSpace</a>()) {</div>
<div class="line"><a name="l05115"></a><span class="lineno"> 5115</span>&#160;        NewOp1 = PtrToIntOp1-&gt;getOperand(0);</div>
<div class="line"><a name="l05116"></a><span class="lineno"> 5116</span>&#160;        <span class="comment">// If the pointer types don&#39;t match, insert a bitcast.</span></div>
<div class="line"><a name="l05117"></a><span class="lineno"> 5117</span>&#160;        <span class="keywordflow">if</span> (Op0Src-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>() != NewOp1-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>())</div>
<div class="line"><a name="l05118"></a><span class="lineno"> 5118</span>&#160;          NewOp1 = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBitCast(NewOp1, Op0Src-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>());</div>
<div class="line"><a name="l05119"></a><span class="lineno"> 5119</span>&#160;      }</div>
<div class="line"><a name="l05120"></a><span class="lineno"> 5120</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">auto</span> *RHSC = dyn_cast&lt;Constant&gt;(ICmp.<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(1))) {</div>
<div class="line"><a name="l05121"></a><span class="lineno"> 5121</span>&#160;      NewOp1 = <a class="code" href="classllvm_1_1ConstantExpr.html#a02560cda155aaed54314383bed827d60">ConstantExpr::getIntToPtr</a>(RHSC, SrcTy);</div>
<div class="line"><a name="l05122"></a><span class="lineno"> 5122</span>&#160;    }</div>
<div class="line"><a name="l05123"></a><span class="lineno"> 5123</span>&#160; </div>
<div class="line"><a name="l05124"></a><span class="lineno"> 5124</span>&#160;    <span class="keywordflow">if</span> (NewOp1)</div>
<div class="line"><a name="l05125"></a><span class="lineno"> 5125</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(ICmp.<a class="code" href="classllvm_1_1CmpInst.html#aa7414ba9f658ff1287d22a4b8fe81bcb">getPredicate</a>(), Op0Src, NewOp1);</div>
<div class="line"><a name="l05126"></a><span class="lineno"> 5126</span>&#160;  }</div>
<div class="line"><a name="l05127"></a><span class="lineno"> 5127</span>&#160; </div>
<div class="line"><a name="l05128"></a><span class="lineno"> 5128</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *R = foldICmpWithTrunc(ICmp))</div>
<div class="line"><a name="l05129"></a><span class="lineno"> 5129</span>&#160;    <span class="keywordflow">return</span> R;</div>
<div class="line"><a name="l05130"></a><span class="lineno"> 5130</span>&#160; </div>
<div class="line"><a name="l05131"></a><span class="lineno"> 5131</span>&#160;  <span class="keywordflow">return</span> foldICmpWithZextOrSext(ICmp);</div>
<div class="line"><a name="l05132"></a><span class="lineno"> 5132</span>&#160;}</div>
<div class="line"><a name="l05133"></a><span class="lineno"> 5133</span>&#160; </div>
<div class="line"><a name="l05134"></a><span class="lineno"><a class="line" href="InstCombineCompares_8cpp.html#ad9cf1659d9bbb94bd12262ce66ec2ba4"> 5134</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="InstCombineCompares_8cpp.html#ad9cf1659d9bbb94bd12262ce66ec2ba4">isNeutralValue</a>(<a class="code" href="classllvm_1_1Instruction.html#ac26154a24f393f523c87cc5f8239f36c">Instruction::BinaryOps</a> BinaryOp, <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, <span class="keywordtype">bool</span> IsSigned) {</div>
<div class="line"><a name="l05135"></a><span class="lineno"> 5135</span>&#160;  <span class="keywordflow">switch</span> (BinaryOp) {</div>
<div class="line"><a name="l05136"></a><span class="lineno"> 5136</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l05137"></a><span class="lineno"> 5137</span>&#160;      <a class="code" href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Unsupported binary op&quot;</span>);</div>
<div class="line"><a name="l05138"></a><span class="lineno"> 5138</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a2b016c207343046b2bac45e69e76dcec">Instruction::Add</a>:</div>
<div class="line"><a name="l05139"></a><span class="lineno"> 5139</span>&#160;    <span class="keywordflow">case</span> Instruction::Sub:</div>
<div class="line"><a name="l05140"></a><span class="lineno"> 5140</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#ae77be336e228cf9aa00709a8606dfb98">m_Zero</a>());</div>
<div class="line"><a name="l05141"></a><span class="lineno"> 5141</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="X86PartialReduction_8cpp.html#ae0f503db91504a3f3440ab81260e4134">Instruction::Mul</a>:</div>
<div class="line"><a name="l05142"></a><span class="lineno"> 5142</span>&#160;      <span class="keywordflow">return</span> !(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a34ee40bb2f4f5ece47ef19e5f1f57e3c">isIntOrIntVectorTy</a>(1) &amp;&amp; IsSigned) &amp;&amp;</div>
<div class="line"><a name="l05143"></a><span class="lineno"> 5143</span>&#160;             <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#aebdb2700a77d10ae6f0ce115e23d9f77">m_One</a>());</div>
<div class="line"><a name="l05144"></a><span class="lineno"> 5144</span>&#160;  }</div>
<div class="line"><a name="l05145"></a><span class="lineno"> 5145</span>&#160;}</div>
<div class="line"><a name="l05146"></a><span class="lineno"> 5146</span>&#160; </div>
<div class="line"><a name="l05147"></a><span class="lineno"> 5147</span>&#160;<a class="code" href="namespacellvm.html#a06c60fef11885eadbda4026c83ae9a13">OverflowResult</a></div>
<div class="line"><a name="l05148"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombinerImpl.html#aefea2d173494ecda5fae066b6b04eca4"> 5148</a></span>&#160;<a class="code" href="classllvm_1_1InstCombinerImpl.html#aefea2d173494ecda5fae066b6b04eca4">InstCombinerImpl::computeOverflow</a>(<a class="code" href="classllvm_1_1Instruction.html#ac26154a24f393f523c87cc5f8239f36c">Instruction::BinaryOps</a> BinaryOp,</div>
<div class="line"><a name="l05149"></a><span class="lineno"> 5149</span>&#160;                                  <span class="keywordtype">bool</span> IsSigned, <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>,</div>
<div class="line"><a name="l05150"></a><span class="lineno"> 5150</span>&#160;                                  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *CxtI)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l05151"></a><span class="lineno"> 5151</span>&#160;  <span class="keywordflow">switch</span> (BinaryOp) {</div>
<div class="line"><a name="l05152"></a><span class="lineno"> 5152</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l05153"></a><span class="lineno"> 5153</span>&#160;      <a class="code" href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Unsupported binary op&quot;</span>);</div>
<div class="line"><a name="l05154"></a><span class="lineno"> 5154</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a2b016c207343046b2bac45e69e76dcec">Instruction::Add</a>:</div>
<div class="line"><a name="l05155"></a><span class="lineno"> 5155</span>&#160;      <span class="keywordflow">if</span> (IsSigned)</div>
<div class="line"><a name="l05156"></a><span class="lineno"> 5156</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#a1f2af9794c01bcd5e098a24c80c8410f">computeOverflowForSignedAdd</a>(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, CxtI);</div>
<div class="line"><a name="l05157"></a><span class="lineno"> 5157</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l05158"></a><span class="lineno"> 5158</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#af4a93234b99e09100376f8a8a503ca44">computeOverflowForUnsignedAdd</a>(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, CxtI);</div>
<div class="line"><a name="l05159"></a><span class="lineno"> 5159</span>&#160;    <span class="keywordflow">case</span> Instruction::Sub:</div>
<div class="line"><a name="l05160"></a><span class="lineno"> 5160</span>&#160;      <span class="keywordflow">if</span> (IsSigned)</div>
<div class="line"><a name="l05161"></a><span class="lineno"> 5161</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#a101ff77214c2a41c0b769a81311b819a">computeOverflowForSignedSub</a>(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, CxtI);</div>
<div class="line"><a name="l05162"></a><span class="lineno"> 5162</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l05163"></a><span class="lineno"> 5163</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#a9a02293c780a5f242786686646db5130">computeOverflowForUnsignedSub</a>(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, CxtI);</div>
<div class="line"><a name="l05164"></a><span class="lineno"> 5164</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="X86PartialReduction_8cpp.html#ae0f503db91504a3f3440ab81260e4134">Instruction::Mul</a>:</div>
<div class="line"><a name="l05165"></a><span class="lineno"> 5165</span>&#160;      <span class="keywordflow">if</span> (IsSigned)</div>
<div class="line"><a name="l05166"></a><span class="lineno"> 5166</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#a0844b1df9a5ba7f45716415965966e63">computeOverflowForSignedMul</a>(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, CxtI);</div>
<div class="line"><a name="l05167"></a><span class="lineno"> 5167</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l05168"></a><span class="lineno"> 5168</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#a24b63d7ba7f620e5f036b2d188393245">computeOverflowForUnsignedMul</a>(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, CxtI);</div>
<div class="line"><a name="l05169"></a><span class="lineno"> 5169</span>&#160;  }</div>
<div class="line"><a name="l05170"></a><span class="lineno"> 5170</span>&#160;}</div>
<div class="line"><a name="l05171"></a><span class="lineno"> 5171</span>&#160; </div>
<div class="line"><a name="l05172"></a><span class="lineno"> 5172</span>&#160;<span class="keywordtype">bool</span> InstCombinerImpl::OptimizeOverflowCheck(<a class="code" href="classllvm_1_1Instruction.html#ac26154a24f393f523c87cc5f8239f36c">Instruction::BinaryOps</a> BinaryOp,</div>
<div class="line"><a name="l05173"></a><span class="lineno"> 5173</span>&#160;                                             <span class="keywordtype">bool</span> IsSigned, <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>,</div>
<div class="line"><a name="l05174"></a><span class="lineno"> 5174</span>&#160;                                             <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;OrigI,</div>
<div class="line"><a name="l05175"></a><span class="lineno"> 5175</span>&#160;                                             <a class="code" href="classllvm_1_1Value.html">Value</a> *&amp;Result,</div>
<div class="line"><a name="l05176"></a><span class="lineno"> 5176</span>&#160;                                             <a class="code" href="classllvm_1_1Constant.html">Constant</a> *&amp;Overflow) {</div>
<div class="line"><a name="l05177"></a><span class="lineno"> 5177</span>&#160;  <span class="keywordflow">if</span> (OrigI.<a class="code" href="classllvm_1_1Instruction.html#a55743bd32282bf6f87aeb49237b1fb68">isCommutative</a>() &amp;&amp; isa&lt;Constant&gt;(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>) &amp;&amp; !isa&lt;Constant&gt;(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>))</div>
<div class="line"><a name="l05178"></a><span class="lineno"> 5178</span>&#160;    <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>);</div>
<div class="line"><a name="l05179"></a><span class="lineno"> 5179</span>&#160; </div>
<div class="line"><a name="l05180"></a><span class="lineno"> 5180</span>&#160;  <span class="comment">// If the overflow check was an add followed by a compare, the insertion point</span></div>
<div class="line"><a name="l05181"></a><span class="lineno"> 5181</span>&#160;  <span class="comment">// may be pointing to the compare.  We want to insert the new instructions</span></div>
<div class="line"><a name="l05182"></a><span class="lineno"> 5182</span>&#160;  <span class="comment">// before the add in case there are uses of the add between the add and the</span></div>
<div class="line"><a name="l05183"></a><span class="lineno"> 5183</span>&#160;  <span class="comment">// compare.</span></div>
<div class="line"><a name="l05184"></a><span class="lineno"> 5184</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(&amp;OrigI);</div>
<div class="line"><a name="l05185"></a><span class="lineno"> 5185</span>&#160; </div>
<div class="line"><a name="l05186"></a><span class="lineno"> 5186</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *OverflowTy = <a class="code" href="classllvm_1_1Type.html#aa75984a442f2379de0c66018201fa628">Type::getInt1Ty</a>(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>-&gt;<a class="code" href="classllvm_1_1Value.html#ab3fc0225d8aaf8434026c3573f961f2c">getContext</a>());</div>
<div class="line"><a name="l05187"></a><span class="lineno"> 5187</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *LHSTy = dyn_cast&lt;VectorType&gt;(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()))</div>
<div class="line"><a name="l05188"></a><span class="lineno"> 5188</span>&#160;    OverflowTy = <a class="code" href="classllvm_1_1VectorType.html#a8c90e6c50e795b17466482a04947690e">VectorType::get</a>(OverflowTy, LHSTy-&gt;getElementCount());</div>
<div class="line"><a name="l05189"></a><span class="lineno"> 5189</span>&#160; </div>
<div class="line"><a name="l05190"></a><span class="lineno"> 5190</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="InstCombineCompares_8cpp.html#ad9cf1659d9bbb94bd12262ce66ec2ba4">isNeutralValue</a>(BinaryOp, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, IsSigned)) {</div>
<div class="line"><a name="l05191"></a><span class="lineno"> 5191</span>&#160;    Result = <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>;</div>
<div class="line"><a name="l05192"></a><span class="lineno"> 5192</span>&#160;    Overflow = <a class="code" href="classllvm_1_1ConstantInt.html#aa7cce62ac5cc6df09cce0535874336b7">ConstantInt::getFalse</a>(OverflowTy);</div>
<div class="line"><a name="l05193"></a><span class="lineno"> 5193</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l05194"></a><span class="lineno"> 5194</span>&#160;  }</div>
<div class="line"><a name="l05195"></a><span class="lineno"> 5195</span>&#160; </div>
<div class="line"><a name="l05196"></a><span class="lineno"> 5196</span>&#160;  <span class="keywordflow">switch</span> (computeOverflow(BinaryOp, IsSigned, <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, &amp;OrigI)) {</div>
<div class="line"><a name="l05197"></a><span class="lineno"> 5197</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm.html#a06c60fef11885eadbda4026c83ae9a13ad4d9862eafa015a05101d9f662bb153a">OverflowResult::MayOverflow</a>:</div>
<div class="line"><a name="l05198"></a><span class="lineno"> 5198</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l05199"></a><span class="lineno"> 5199</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm.html#a06c60fef11885eadbda4026c83ae9a13ac8cc76d76703c81c16e939be370683c1">OverflowResult::AlwaysOverflowsLow</a>:</div>
<div class="line"><a name="l05200"></a><span class="lineno"> 5200</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm.html#a06c60fef11885eadbda4026c83ae9a13a9ac50ff0c308dad407db9f09e418363e">OverflowResult::AlwaysOverflowsHigh</a>:</div>
<div class="line"><a name="l05201"></a><span class="lineno"> 5201</span>&#160;      Result = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBinOp(BinaryOp, <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>);</div>
<div class="line"><a name="l05202"></a><span class="lineno"> 5202</span>&#160;      Result-&gt;takeName(&amp;OrigI);</div>
<div class="line"><a name="l05203"></a><span class="lineno"> 5203</span>&#160;      Overflow = <a class="code" href="classllvm_1_1ConstantInt.html#a82dbbd8e3688b0bc1eedb338864d0d0c">ConstantInt::getTrue</a>(OverflowTy);</div>
<div class="line"><a name="l05204"></a><span class="lineno"> 5204</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l05205"></a><span class="lineno"> 5205</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm.html#a06c60fef11885eadbda4026c83ae9a13a56624a95592b438e05ab500a6a200a03">OverflowResult::NeverOverflows</a>:</div>
<div class="line"><a name="l05206"></a><span class="lineno"> 5206</span>&#160;      Result = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBinOp(BinaryOp, <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>);</div>
<div class="line"><a name="l05207"></a><span class="lineno"> 5207</span>&#160;      Result-&gt;takeName(&amp;OrigI);</div>
<div class="line"><a name="l05208"></a><span class="lineno"> 5208</span>&#160;      Overflow = <a class="code" href="classllvm_1_1ConstantInt.html#aa7cce62ac5cc6df09cce0535874336b7">ConstantInt::getFalse</a>(OverflowTy);</div>
<div class="line"><a name="l05209"></a><span class="lineno"> 5209</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> *Inst = dyn_cast&lt;Instruction&gt;(Result)) {</div>
<div class="line"><a name="l05210"></a><span class="lineno"> 5210</span>&#160;        <span class="keywordflow">if</span> (IsSigned)</div>
<div class="line"><a name="l05211"></a><span class="lineno"> 5211</span>&#160;          Inst-&gt;setHasNoSignedWrap();</div>
<div class="line"><a name="l05212"></a><span class="lineno"> 5212</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l05213"></a><span class="lineno"> 5213</span>&#160;          Inst-&gt;setHasNoUnsignedWrap();</div>
<div class="line"><a name="l05214"></a><span class="lineno"> 5214</span>&#160;      }</div>
<div class="line"><a name="l05215"></a><span class="lineno"> 5215</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l05216"></a><span class="lineno"> 5216</span>&#160;  }</div>
<div class="line"><a name="l05217"></a><span class="lineno"> 5217</span>&#160; </div>
<div class="line"><a name="l05218"></a><span class="lineno"> 5218</span>&#160;  <a class="code" href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Unexpected overflow result&quot;</span>);</div>
<div class="line"><a name="l05219"></a><span class="lineno"> 5219</span>&#160;}</div>
<div class="line"><a name="l05220"></a><span class="lineno"> 5220</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l05221"></a><span class="lineno"> 5221</span>&#160;<span class="comment">/// Recognize and process idiom involving test for multiplication</span></div>
<div class="line"><a name="l05222"></a><span class="lineno"> 5222</span>&#160;<span class="comment">/// overflow.</span></div>
<div class="line"><a name="l05223"></a><span class="lineno"> 5223</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l05224"></a><span class="lineno"> 5224</span>&#160;<span class="comment">/// The caller has matched a pattern of the form:</span></div>
<div class="line"><a name="l05225"></a><span class="lineno"> 5225</span>&#160;<span class="comment">///   I = cmp u (mul(zext A, zext B), V</span></div>
<div class="line"><a name="l05226"></a><span class="lineno"> 5226</span>&#160;<span class="comment">/// The function checks if this is a test for overflow and if so replaces</span></div>
<div class="line"><a name="l05227"></a><span class="lineno"> 5227</span>&#160;<span class="comment">/// multiplication with call to &#39;mul.with.overflow&#39; intrinsic.</span></div>
<div class="line"><a name="l05228"></a><span class="lineno"> 5228</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l05229"></a><span class="lineno"> 5229</span>&#160;<span class="comment">/// \param I Compare instruction.</span></div>
<div class="line"><a name="l05230"></a><span class="lineno"> 5230</span>&#160;<span class="comment">/// \param MulVal Result of &#39;mult&#39; instruction.  It is one of the arguments of</span></div>
<div class="line"><a name="l05231"></a><span class="lineno"> 5231</span>&#160;<span class="comment">///               the compare instruction.  Must be of integer type.</span></div>
<div class="line"><a name="l05232"></a><span class="lineno"> 5232</span>&#160;<span class="comment">/// \param OtherVal The other argument of compare instruction.</span></div>
<div class="line"><a name="l05233"></a><span class="lineno"> 5233</span>&#160;<span class="comment">/// \returns Instruction which must replace the compare instruction, NULL if no</span></div>
<div class="line"><a name="l05234"></a><span class="lineno"> 5234</span>&#160;<span class="comment">///          replacement required.</span></div>
<div class="line"><a name="l05235"></a><span class="lineno"><a class="line" href="InstCombineCompares_8cpp.html#a672a7ba358ab0b9cbd11d044d58fe842"> 5235</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="InstCombineCompares_8cpp.html#a672a7ba358ab0b9cbd11d044d58fe842">processUMulZExtIdiom</a>(<a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1Value.html">Value</a> *MulVal,</div>
<div class="line"><a name="l05236"></a><span class="lineno"> 5236</span>&#160;                                         <a class="code" href="classllvm_1_1Value.html">Value</a> *OtherVal,</div>
<div class="line"><a name="l05237"></a><span class="lineno"> 5237</span>&#160;                                         <a class="code" href="classllvm_1_1InstCombinerImpl.html">InstCombinerImpl</a> &amp;IC) {</div>
<div class="line"><a name="l05238"></a><span class="lineno"> 5238</span>&#160;  <span class="comment">// Don&#39;t bother doing this transformation for pointers, don&#39;t do it for</span></div>
<div class="line"><a name="l05239"></a><span class="lineno"> 5239</span>&#160;  <span class="comment">// vectors.</span></div>
<div class="line"><a name="l05240"></a><span class="lineno"> 5240</span>&#160;  <span class="keywordflow">if</span> (!isa&lt;IntegerType&gt;(MulVal-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()))</div>
<div class="line"><a name="l05241"></a><span class="lineno"> 5241</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l05242"></a><span class="lineno"> 5242</span>&#160; </div>
<div class="line"><a name="l05243"></a><span class="lineno"> 5243</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(0) == MulVal || <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(1) == MulVal);</div>
<div class="line"><a name="l05244"></a><span class="lineno"> 5244</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(0) == OtherVal || <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(1) == OtherVal);</div>
<div class="line"><a name="l05245"></a><span class="lineno"> 5245</span>&#160;  <span class="keyword">auto</span> *MulInstr = dyn_cast&lt;Instruction&gt;(MulVal);</div>
<div class="line"><a name="l05246"></a><span class="lineno"> 5246</span>&#160;  <span class="keywordflow">if</span> (!MulInstr)</div>
<div class="line"><a name="l05247"></a><span class="lineno"> 5247</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l05248"></a><span class="lineno"> 5248</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(MulInstr-&gt;getOpcode() == <a class="code" href="X86PartialReduction_8cpp.html#ae0f503db91504a3f3440ab81260e4134">Instruction::Mul</a>);</div>
<div class="line"><a name="l05249"></a><span class="lineno"> 5249</span>&#160; </div>
<div class="line"><a name="l05250"></a><span class="lineno"> 5250</span>&#160;  <span class="keyword">auto</span> *<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a> = cast&lt;ZExtOperator&gt;(MulInstr-&gt;getOperand(0)),</div>
<div class="line"><a name="l05251"></a><span class="lineno"> 5251</span>&#160;       *<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a> = cast&lt;ZExtOperator&gt;(MulInstr-&gt;getOperand(1));</div>
<div class="line"><a name="l05252"></a><span class="lineno"> 5252</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>-&gt;getOpcode() == Instruction::ZExt);</div>
<div class="line"><a name="l05253"></a><span class="lineno"> 5253</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>-&gt;getOpcode() == Instruction::ZExt);</div>
<div class="line"><a name="l05254"></a><span class="lineno"> 5254</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *A = <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>-&gt;getOperand(0), *<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a> = <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>-&gt;getOperand(0);</div>
<div class="line"><a name="l05255"></a><span class="lineno"> 5255</span>&#160; </div>
<div class="line"><a name="l05256"></a><span class="lineno"> 5256</span>&#160;  <span class="comment">// Calculate type and width of the result produced by mul.with.overflow.</span></div>
<div class="line"><a name="l05257"></a><span class="lineno"> 5257</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *TyA = A-&gt;getType(), *TyB = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>-&gt;getType();</div>
<div class="line"><a name="l05258"></a><span class="lineno"> 5258</span>&#160;  <span class="keywordtype">unsigned</span> WidthA = TyA-&gt;<a class="code" href="classllvm_1_1Type.html#a833daf718a49c5cd637d8c9ddeaebe07">getPrimitiveSizeInBits</a>(),</div>
<div class="line"><a name="l05259"></a><span class="lineno"> 5259</span>&#160;           WidthB = TyB-&gt;getPrimitiveSizeInBits();</div>
<div class="line"><a name="l05260"></a><span class="lineno"> 5260</span>&#160;  <span class="keywordtype">unsigned</span> MulWidth;</div>
<div class="line"><a name="l05261"></a><span class="lineno"> 5261</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *MulType;</div>
<div class="line"><a name="l05262"></a><span class="lineno"> 5262</span>&#160;  <span class="keywordflow">if</span> (WidthB &gt; WidthA) {</div>
<div class="line"><a name="l05263"></a><span class="lineno"> 5263</span>&#160;    MulWidth = WidthB;</div>
<div class="line"><a name="l05264"></a><span class="lineno"> 5264</span>&#160;    MulType = TyB;</div>
<div class="line"><a name="l05265"></a><span class="lineno"> 5265</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l05266"></a><span class="lineno"> 5266</span>&#160;    MulWidth = WidthA;</div>
<div class="line"><a name="l05267"></a><span class="lineno"> 5267</span>&#160;    MulType = TyA;</div>
<div class="line"><a name="l05268"></a><span class="lineno"> 5268</span>&#160;  }</div>
<div class="line"><a name="l05269"></a><span class="lineno"> 5269</span>&#160; </div>
<div class="line"><a name="l05270"></a><span class="lineno"> 5270</span>&#160;  <span class="comment">// In order to replace the original mul with a narrower mul.with.overflow,</span></div>
<div class="line"><a name="l05271"></a><span class="lineno"> 5271</span>&#160;  <span class="comment">// all uses must ignore upper bits of the product.  The number of used low</span></div>
<div class="line"><a name="l05272"></a><span class="lineno"> 5272</span>&#160;  <span class="comment">// bits must be not greater than the width of mul.with.overflow.</span></div>
<div class="line"><a name="l05273"></a><span class="lineno"> 5273</span>&#160;  <span class="keywordflow">if</span> (MulVal-&gt;<a class="code" href="classllvm_1_1Value.html#a72fb137716cff838d389e392b9729dc9">hasNUsesOrMore</a>(2))</div>
<div class="line"><a name="l05274"></a><span class="lineno"> 5274</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1User.html">User</a> *U : MulVal-&gt;<a class="code" href="classllvm_1_1Value.html#ab4e0512c7e1c7adaa56677e3155685f1">users</a>()) {</div>
<div class="line"><a name="l05275"></a><span class="lineno"> 5275</span>&#160;      <span class="keywordflow">if</span> (U == &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div>
<div class="line"><a name="l05276"></a><span class="lineno"> 5276</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l05277"></a><span class="lineno"> 5277</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1TruncInst.html">TruncInst</a> *TI = dyn_cast&lt;TruncInst&gt;(U)) {</div>
<div class="line"><a name="l05278"></a><span class="lineno"> 5278</span>&#160;        <span class="comment">// Check if truncation ignores bits above MulWidth.</span></div>
<div class="line"><a name="l05279"></a><span class="lineno"> 5279</span>&#160;        <span class="keywordtype">unsigned</span> TruncWidth = TI-&gt;getType()-&gt;<a class="code" href="classllvm_1_1Type.html#a833daf718a49c5cd637d8c9ddeaebe07">getPrimitiveSizeInBits</a>();</div>
<div class="line"><a name="l05280"></a><span class="lineno"> 5280</span>&#160;        <span class="keywordflow">if</span> (TruncWidth &gt; MulWidth)</div>
<div class="line"><a name="l05281"></a><span class="lineno"> 5281</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l05282"></a><span class="lineno"> 5282</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> *BO = dyn_cast&lt;BinaryOperator&gt;(U)) {</div>
<div class="line"><a name="l05283"></a><span class="lineno"> 5283</span>&#160;        <span class="comment">// Check if AND ignores bits above MulWidth.</span></div>
<div class="line"><a name="l05284"></a><span class="lineno"> 5284</span>&#160;        <span class="keywordflow">if</span> (BO-&gt;getOpcode() != Instruction::And)</div>
<div class="line"><a name="l05285"></a><span class="lineno"> 5285</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l05286"></a><span class="lineno"> 5286</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *CI = dyn_cast&lt;ConstantInt&gt;(BO-&gt;getOperand(1))) {</div>
<div class="line"><a name="l05287"></a><span class="lineno"> 5287</span>&#160;          <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> &amp;CVal = CI-&gt;getValue();</div>
<div class="line"><a name="l05288"></a><span class="lineno"> 5288</span>&#160;          <span class="keywordflow">if</span> (CVal.<a class="code" href="classllvm_1_1APInt.html#a512fe2c15ea651294688eeec1341644c">getBitWidth</a>() - CVal.<a class="code" href="classllvm_1_1APInt.html#aa074b9f5a1efaa0fd8aa4522593f299a">countLeadingZeros</a>() &gt; MulWidth)</div>
<div class="line"><a name="l05289"></a><span class="lineno"> 5289</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l05290"></a><span class="lineno"> 5290</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l05291"></a><span class="lineno"> 5291</span>&#160;          <span class="comment">// In this case we could have the operand of the binary operation</span></div>
<div class="line"><a name="l05292"></a><span class="lineno"> 5292</span>&#160;          <span class="comment">// being defined in another block, and performing the replacement</span></div>
<div class="line"><a name="l05293"></a><span class="lineno"> 5293</span>&#160;          <span class="comment">// could break the dominance relation.</span></div>
<div class="line"><a name="l05294"></a><span class="lineno"> 5294</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l05295"></a><span class="lineno"> 5295</span>&#160;        }</div>
<div class="line"><a name="l05296"></a><span class="lineno"> 5296</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l05297"></a><span class="lineno"> 5297</span>&#160;        <span class="comment">// Other uses prohibit this transformation.</span></div>
<div class="line"><a name="l05298"></a><span class="lineno"> 5298</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l05299"></a><span class="lineno"> 5299</span>&#160;      }</div>
<div class="line"><a name="l05300"></a><span class="lineno"> 5300</span>&#160;    }</div>
<div class="line"><a name="l05301"></a><span class="lineno"> 5301</span>&#160; </div>
<div class="line"><a name="l05302"></a><span class="lineno"> 5302</span>&#160;  <span class="comment">// Recognize patterns</span></div>
<div class="line"><a name="l05303"></a><span class="lineno"> 5303</span>&#160;  <span class="keywordflow">switch</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getPredicate()) {</div>
<div class="line"><a name="l05304"></a><span class="lineno"> 5304</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a>:</div>
<div class="line"><a name="l05305"></a><span class="lineno"> 5305</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a>:</div>
<div class="line"><a name="l05306"></a><span class="lineno"> 5306</span>&#160;    <span class="comment">// Recognize pattern:</span></div>
<div class="line"><a name="l05307"></a><span class="lineno"> 5307</span>&#160;    <span class="comment">//   mulval = mul(zext A, zext B)</span></div>
<div class="line"><a name="l05308"></a><span class="lineno"> 5308</span>&#160;    <span class="comment">//   cmp eq/neq mulval, and(mulval, mask), mask selects low MulWidth bits.</span></div>
<div class="line"><a name="l05309"></a><span class="lineno"> 5309</span>&#160;    <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *CI;</div>
<div class="line"><a name="l05310"></a><span class="lineno"> 5310</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *ValToMask;</div>
<div class="line"><a name="l05311"></a><span class="lineno"> 5311</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(OtherVal, <a class="code" href="namespacellvm_1_1PatternMatch.html#a427435d4da769ae680a8e77ef89520aa">m_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(ValToMask), <a class="code" href="namespacellvm_1_1PatternMatch.html#a677ac8d99ff3c2d32a95c21de9ed372c">m_ConstantInt</a>(CI)))) {</div>
<div class="line"><a name="l05312"></a><span class="lineno"> 5312</span>&#160;      <span class="keywordflow">if</span> (ValToMask != MulVal)</div>
<div class="line"><a name="l05313"></a><span class="lineno"> 5313</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l05314"></a><span class="lineno"> 5314</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> &amp;CVal = CI-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#a4b001d9b458035fbbfc154d52d354ee9">getValue</a>() + 1;</div>
<div class="line"><a name="l05315"></a><span class="lineno"> 5315</span>&#160;      <span class="keywordflow">if</span> (CVal.<a class="code" href="classllvm_1_1APInt.html#ad1b0513de876d1c85cf6268ca21b2c86">isPowerOf2</a>()) {</div>
<div class="line"><a name="l05316"></a><span class="lineno"> 5316</span>&#160;        <span class="keywordtype">unsigned</span> MaskWidth = CVal.<a class="code" href="classllvm_1_1APInt.html#aae3b959a0a2981340fd03c29f528f2f0">logBase2</a>();</div>
<div class="line"><a name="l05317"></a><span class="lineno"> 5317</span>&#160;        <span class="keywordflow">if</span> (MaskWidth == MulWidth)</div>
<div class="line"><a name="l05318"></a><span class="lineno"> 5318</span>&#160;          <span class="keywordflow">break</span>; <span class="comment">// Recognized</span></div>
<div class="line"><a name="l05319"></a><span class="lineno"> 5319</span>&#160;      }</div>
<div class="line"><a name="l05320"></a><span class="lineno"> 5320</span>&#160;    }</div>
<div class="line"><a name="l05321"></a><span class="lineno"> 5321</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l05322"></a><span class="lineno"> 5322</span>&#160; </div>
<div class="line"><a name="l05323"></a><span class="lineno"> 5323</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba607cecdc5172814382033e001ed11fad">ICmpInst::ICMP_UGT</a>:</div>
<div class="line"><a name="l05324"></a><span class="lineno"> 5324</span>&#160;    <span class="comment">// Recognize pattern:</span></div>
<div class="line"><a name="l05325"></a><span class="lineno"> 5325</span>&#160;    <span class="comment">//   mulval = mul(zext A, zext B)</span></div>
<div class="line"><a name="l05326"></a><span class="lineno"> 5326</span>&#160;    <span class="comment">//   cmp ugt mulval, max</span></div>
<div class="line"><a name="l05327"></a><span class="lineno"> 5327</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *CI = dyn_cast&lt;ConstantInt&gt;(OtherVal)) {</div>
<div class="line"><a name="l05328"></a><span class="lineno"> 5328</span>&#160;      <a class="code" href="classllvm_1_1APInt.html">APInt</a> MaxVal = <a class="code" href="classllvm_1_1APInt.html#a331d69b5f93e47e7c596062b77dd5913">APInt::getMaxValue</a>(MulWidth);</div>
<div class="line"><a name="l05329"></a><span class="lineno"> 5329</span>&#160;      MaxVal = MaxVal.<a class="code" href="classllvm_1_1APInt.html#a1dc76cc8bf703e6ada68bededcbb9573">zext</a>(CI-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#ab240d0d30dfa9b392ef9d813f3f9e4be">getBitWidth</a>());</div>
<div class="line"><a name="l05330"></a><span class="lineno"> 5330</span>&#160;      <span class="keywordflow">if</span> (MaxVal.<a class="code" href="classllvm_1_1APInt.html#a6e17f9e532ca4a61804f28091b10b522">eq</a>(CI-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#a4b001d9b458035fbbfc154d52d354ee9">getValue</a>()))</div>
<div class="line"><a name="l05331"></a><span class="lineno"> 5331</span>&#160;        <span class="keywordflow">break</span>; <span class="comment">// Recognized</span></div>
<div class="line"><a name="l05332"></a><span class="lineno"> 5332</span>&#160;    }</div>
<div class="line"><a name="l05333"></a><span class="lineno"> 5333</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l05334"></a><span class="lineno"> 5334</span>&#160; </div>
<div class="line"><a name="l05335"></a><span class="lineno"> 5335</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba573bcd571c938fce863525330bbfc4b8">ICmpInst::ICMP_UGE</a>:</div>
<div class="line"><a name="l05336"></a><span class="lineno"> 5336</span>&#160;    <span class="comment">// Recognize pattern:</span></div>
<div class="line"><a name="l05337"></a><span class="lineno"> 5337</span>&#160;    <span class="comment">//   mulval = mul(zext A, zext B)</span></div>
<div class="line"><a name="l05338"></a><span class="lineno"> 5338</span>&#160;    <span class="comment">//   cmp uge mulval, max+1</span></div>
<div class="line"><a name="l05339"></a><span class="lineno"> 5339</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *CI = dyn_cast&lt;ConstantInt&gt;(OtherVal)) {</div>
<div class="line"><a name="l05340"></a><span class="lineno"> 5340</span>&#160;      <a class="code" href="classllvm_1_1APInt.html">APInt</a> MaxVal = <a class="code" href="classllvm_1_1APInt.html#aec662ee6ab1490a4cabebf2812e5b9ca">APInt::getOneBitSet</a>(CI-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#ab240d0d30dfa9b392ef9d813f3f9e4be">getBitWidth</a>(), MulWidth);</div>
<div class="line"><a name="l05341"></a><span class="lineno"> 5341</span>&#160;      <span class="keywordflow">if</span> (MaxVal.<a class="code" href="classllvm_1_1APInt.html#a6e17f9e532ca4a61804f28091b10b522">eq</a>(CI-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#a4b001d9b458035fbbfc154d52d354ee9">getValue</a>()))</div>
<div class="line"><a name="l05342"></a><span class="lineno"> 5342</span>&#160;        <span class="keywordflow">break</span>; <span class="comment">// Recognized</span></div>
<div class="line"><a name="l05343"></a><span class="lineno"> 5343</span>&#160;    }</div>
<div class="line"><a name="l05344"></a><span class="lineno"> 5344</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l05345"></a><span class="lineno"> 5345</span>&#160; </div>
<div class="line"><a name="l05346"></a><span class="lineno"> 5346</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bad92f160316221fd4090520bb2b3cefc5">ICmpInst::ICMP_ULE</a>:</div>
<div class="line"><a name="l05347"></a><span class="lineno"> 5347</span>&#160;    <span class="comment">// Recognize pattern:</span></div>
<div class="line"><a name="l05348"></a><span class="lineno"> 5348</span>&#160;    <span class="comment">//   mulval = mul(zext A, zext B)</span></div>
<div class="line"><a name="l05349"></a><span class="lineno"> 5349</span>&#160;    <span class="comment">//   cmp ule mulval, max</span></div>
<div class="line"><a name="l05350"></a><span class="lineno"> 5350</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *CI = dyn_cast&lt;ConstantInt&gt;(OtherVal)) {</div>
<div class="line"><a name="l05351"></a><span class="lineno"> 5351</span>&#160;      <a class="code" href="classllvm_1_1APInt.html">APInt</a> MaxVal = <a class="code" href="classllvm_1_1APInt.html#a331d69b5f93e47e7c596062b77dd5913">APInt::getMaxValue</a>(MulWidth);</div>
<div class="line"><a name="l05352"></a><span class="lineno"> 5352</span>&#160;      MaxVal = MaxVal.<a class="code" href="classllvm_1_1APInt.html#a1dc76cc8bf703e6ada68bededcbb9573">zext</a>(CI-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#ab240d0d30dfa9b392ef9d813f3f9e4be">getBitWidth</a>());</div>
<div class="line"><a name="l05353"></a><span class="lineno"> 5353</span>&#160;      <span class="keywordflow">if</span> (MaxVal.<a class="code" href="classllvm_1_1APInt.html#a6e17f9e532ca4a61804f28091b10b522">eq</a>(CI-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#a4b001d9b458035fbbfc154d52d354ee9">getValue</a>()))</div>
<div class="line"><a name="l05354"></a><span class="lineno"> 5354</span>&#160;        <span class="keywordflow">break</span>; <span class="comment">// Recognized</span></div>
<div class="line"><a name="l05355"></a><span class="lineno"> 5355</span>&#160;    }</div>
<div class="line"><a name="l05356"></a><span class="lineno"> 5356</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l05357"></a><span class="lineno"> 5357</span>&#160; </div>
<div class="line"><a name="l05358"></a><span class="lineno"> 5358</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e">ICmpInst::ICMP_ULT</a>:</div>
<div class="line"><a name="l05359"></a><span class="lineno"> 5359</span>&#160;    <span class="comment">// Recognize pattern:</span></div>
<div class="line"><a name="l05360"></a><span class="lineno"> 5360</span>&#160;    <span class="comment">//   mulval = mul(zext A, zext B)</span></div>
<div class="line"><a name="l05361"></a><span class="lineno"> 5361</span>&#160;    <span class="comment">//   cmp ule mulval, max + 1</span></div>
<div class="line"><a name="l05362"></a><span class="lineno"> 5362</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *CI = dyn_cast&lt;ConstantInt&gt;(OtherVal)) {</div>
<div class="line"><a name="l05363"></a><span class="lineno"> 5363</span>&#160;      <a class="code" href="classllvm_1_1APInt.html">APInt</a> MaxVal = <a class="code" href="classllvm_1_1APInt.html#aec662ee6ab1490a4cabebf2812e5b9ca">APInt::getOneBitSet</a>(CI-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#ab240d0d30dfa9b392ef9d813f3f9e4be">getBitWidth</a>(), MulWidth);</div>
<div class="line"><a name="l05364"></a><span class="lineno"> 5364</span>&#160;      <span class="keywordflow">if</span> (MaxVal.<a class="code" href="classllvm_1_1APInt.html#a6e17f9e532ca4a61804f28091b10b522">eq</a>(CI-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#a4b001d9b458035fbbfc154d52d354ee9">getValue</a>()))</div>
<div class="line"><a name="l05365"></a><span class="lineno"> 5365</span>&#160;        <span class="keywordflow">break</span>; <span class="comment">// Recognized</span></div>
<div class="line"><a name="l05366"></a><span class="lineno"> 5366</span>&#160;    }</div>
<div class="line"><a name="l05367"></a><span class="lineno"> 5367</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l05368"></a><span class="lineno"> 5368</span>&#160; </div>
<div class="line"><a name="l05369"></a><span class="lineno"> 5369</span>&#160;  <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l05370"></a><span class="lineno"> 5370</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l05371"></a><span class="lineno"> 5371</span>&#160;  }</div>
<div class="line"><a name="l05372"></a><span class="lineno"> 5372</span>&#160; </div>
<div class="line"><a name="l05373"></a><span class="lineno"> 5373</span>&#160;  <a class="code" href="classllvm_1_1IRBuilder.html">InstCombiner::BuilderTy</a> &amp;<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a> = IC.<a class="code" href="classllvm_1_1InstCombiner.html#ae1d331bc844ecb92bdeb0b706ae04396">Builder</a>;</div>
<div class="line"><a name="l05374"></a><span class="lineno"> 5374</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(MulInstr);</div>
<div class="line"><a name="l05375"></a><span class="lineno"> 5375</span>&#160; </div>
<div class="line"><a name="l05376"></a><span class="lineno"> 5376</span>&#160;  <span class="comment">// Replace: mul(zext A, zext B) --&gt; mul.with.overflow(A, B)</span></div>
<div class="line"><a name="l05377"></a><span class="lineno"> 5377</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *MulA = A, *MulB = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>;</div>
<div class="line"><a name="l05378"></a><span class="lineno"> 5378</span>&#160;  <span class="keywordflow">if</span> (WidthA &lt; MulWidth)</div>
<div class="line"><a name="l05379"></a><span class="lineno"> 5379</span>&#160;    MulA = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateZExt(A, MulType);</div>
<div class="line"><a name="l05380"></a><span class="lineno"> 5380</span>&#160;  <span class="keywordflow">if</span> (WidthB &lt; MulWidth)</div>
<div class="line"><a name="l05381"></a><span class="lineno"> 5381</span>&#160;    MulB = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateZExt(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, MulType);</div>
<div class="line"><a name="l05382"></a><span class="lineno"> 5382</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> = <a class="code" href="namespacellvm_1_1Intrinsic.html#aefa39f6b622360ce4e947feb9f671b73">Intrinsic::getDeclaration</a>(</div>
<div class="line"><a name="l05383"></a><span class="lineno"> 5383</span>&#160;      <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getModule(), Intrinsic::umul_with_overflow, MulType);</div>
<div class="line"><a name="l05384"></a><span class="lineno"> 5384</span>&#160;  <a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *Call = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCall(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, {MulA, MulB}, <span class="stringliteral">&quot;umul&quot;</span>);</div>
<div class="line"><a name="l05385"></a><span class="lineno"> 5385</span>&#160;  IC.<a class="code" href="classllvm_1_1InstCombiner.html#ab86d58ae73173328360a32cbbb0d5b14">addToWorklist</a>(MulInstr);</div>
<div class="line"><a name="l05386"></a><span class="lineno"> 5386</span>&#160; </div>
<div class="line"><a name="l05387"></a><span class="lineno"> 5387</span>&#160;  <span class="comment">// If there are uses of mul result other than the comparison, we know that</span></div>
<div class="line"><a name="l05388"></a><span class="lineno"> 5388</span>&#160;  <span class="comment">// they are truncation or binary AND. Change them to use result of</span></div>
<div class="line"><a name="l05389"></a><span class="lineno"> 5389</span>&#160;  <span class="comment">// mul.with.overflow and adjust properly mask/size.</span></div>
<div class="line"><a name="l05390"></a><span class="lineno"> 5390</span>&#160;  <span class="keywordflow">if</span> (MulVal-&gt;<a class="code" href="classllvm_1_1Value.html#a72fb137716cff838d389e392b9729dc9">hasNUsesOrMore</a>(2)) {</div>
<div class="line"><a name="l05391"></a><span class="lineno"> 5391</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="X86PartialReduction_8cpp.html#ae0f503db91504a3f3440ab81260e4134">Mul</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateExtractValue(Call, 0, <span class="stringliteral">&quot;umul.value&quot;</span>);</div>
<div class="line"><a name="l05392"></a><span class="lineno"> 5392</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1User.html">User</a> *U : <a class="code" href="namespacellvm.html#a8154638df88e4eaa568b67b23d463dac">make_early_inc_range</a>(MulVal-&gt;<a class="code" href="classllvm_1_1Value.html#ab4e0512c7e1c7adaa56677e3155685f1">users</a>())) {</div>
<div class="line"><a name="l05393"></a><span class="lineno"> 5393</span>&#160;      <span class="keywordflow">if</span> (U == &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> || U == OtherVal)</div>
<div class="line"><a name="l05394"></a><span class="lineno"> 5394</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l05395"></a><span class="lineno"> 5395</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1TruncInst.html">TruncInst</a> *TI = dyn_cast&lt;TruncInst&gt;(U)) {</div>
<div class="line"><a name="l05396"></a><span class="lineno"> 5396</span>&#160;        <span class="keywordflow">if</span> (TI-&gt;getType()-&gt;getPrimitiveSizeInBits() == MulWidth)</div>
<div class="line"><a name="l05397"></a><span class="lineno"> 5397</span>&#160;          IC.<a class="code" href="classllvm_1_1InstCombiner.html#aa00031e59684d793baa874f11ddaf189">replaceInstUsesWith</a>(*TI, <a class="code" href="X86PartialReduction_8cpp.html#ae0f503db91504a3f3440ab81260e4134">Mul</a>);</div>
<div class="line"><a name="l05398"></a><span class="lineno"> 5398</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l05399"></a><span class="lineno"> 5399</span>&#160;          TI-&gt;<a class="code" href="classllvm_1_1User.html#a5fa9b8e1842b354f64c1ba6be0a4a17f">setOperand</a>(0, <a class="code" href="X86PartialReduction_8cpp.html#ae0f503db91504a3f3440ab81260e4134">Mul</a>);</div>
<div class="line"><a name="l05400"></a><span class="lineno"> 5400</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> *BO = dyn_cast&lt;BinaryOperator&gt;(U)) {</div>
<div class="line"><a name="l05401"></a><span class="lineno"> 5401</span>&#160;        <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(BO-&gt;getOpcode() == Instruction::And);</div>
<div class="line"><a name="l05402"></a><span class="lineno"> 5402</span>&#160;        <span class="comment">// Replace (mul &amp; mask) --&gt; zext (mul.with.overflow &amp; short_mask)</span></div>
<div class="line"><a name="l05403"></a><span class="lineno"> 5403</span>&#160;        <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *CI = cast&lt;ConstantInt&gt;(BO-&gt;getOperand(1));</div>
<div class="line"><a name="l05404"></a><span class="lineno"> 5404</span>&#160;        <a class="code" href="classllvm_1_1APInt.html">APInt</a> ShortMask = CI-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#a4b001d9b458035fbbfc154d52d354ee9">getValue</a>().<a class="code" href="classllvm_1_1APInt.html#a317c64fd4cfebc88e79387b3821a629d">trunc</a>(MulWidth);</div>
<div class="line"><a name="l05405"></a><span class="lineno"> 5405</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *ShortAnd = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAnd(<a class="code" href="X86PartialReduction_8cpp.html#ae0f503db91504a3f3440ab81260e4134">Mul</a>, ShortMask);</div>
<div class="line"><a name="l05406"></a><span class="lineno"> 5406</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *Zext = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateZExt(ShortAnd, BO-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>());</div>
<div class="line"><a name="l05407"></a><span class="lineno"> 5407</span>&#160;        IC.<a class="code" href="classllvm_1_1InstCombiner.html#aa00031e59684d793baa874f11ddaf189">replaceInstUsesWith</a>(*BO, Zext);</div>
<div class="line"><a name="l05408"></a><span class="lineno"> 5408</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l05409"></a><span class="lineno"> 5409</span>&#160;        <a class="code" href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Unexpected Binary operation&quot;</span>);</div>
<div class="line"><a name="l05410"></a><span class="lineno"> 5410</span>&#160;      }</div>
<div class="line"><a name="l05411"></a><span class="lineno"> 5411</span>&#160;      IC.<a class="code" href="classllvm_1_1InstCombiner.html#ab86d58ae73173328360a32cbbb0d5b14">addToWorklist</a>(cast&lt;Instruction&gt;(U));</div>
<div class="line"><a name="l05412"></a><span class="lineno"> 5412</span>&#160;    }</div>
<div class="line"><a name="l05413"></a><span class="lineno"> 5413</span>&#160;  }</div>
<div class="line"><a name="l05414"></a><span class="lineno"> 5414</span>&#160;  <span class="keywordflow">if</span> (isa&lt;Instruction&gt;(OtherVal))</div>
<div class="line"><a name="l05415"></a><span class="lineno"> 5415</span>&#160;    IC.<a class="code" href="classllvm_1_1InstCombiner.html#ab86d58ae73173328360a32cbbb0d5b14">addToWorklist</a>(cast&lt;Instruction&gt;(OtherVal));</div>
<div class="line"><a name="l05416"></a><span class="lineno"> 5416</span>&#160; </div>
<div class="line"><a name="l05417"></a><span class="lineno"> 5417</span>&#160;  <span class="comment">// The original icmp gets replaced with the overflow value, maybe inverted</span></div>
<div class="line"><a name="l05418"></a><span class="lineno"> 5418</span>&#160;  <span class="comment">// depending on predicate.</span></div>
<div class="line"><a name="l05419"></a><span class="lineno"> 5419</span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="structllvm_1_1Inverse.html">Inverse</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l05420"></a><span class="lineno"> 5420</span>&#160;  <span class="keywordflow">switch</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getPredicate()) {</div>
<div class="line"><a name="l05421"></a><span class="lineno"> 5421</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a>:</div>
<div class="line"><a name="l05422"></a><span class="lineno"> 5422</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05423"></a><span class="lineno"> 5423</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a>:</div>
<div class="line"><a name="l05424"></a><span class="lineno"> 5424</span>&#160;    <a class="code" href="structllvm_1_1Inverse.html">Inverse</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l05425"></a><span class="lineno"> 5425</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05426"></a><span class="lineno"> 5426</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba607cecdc5172814382033e001ed11fad">ICmpInst::ICMP_UGT</a>:</div>
<div class="line"><a name="l05427"></a><span class="lineno"> 5427</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba573bcd571c938fce863525330bbfc4b8">ICmpInst::ICMP_UGE</a>:</div>
<div class="line"><a name="l05428"></a><span class="lineno"> 5428</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(0) == MulVal)</div>
<div class="line"><a name="l05429"></a><span class="lineno"> 5429</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05430"></a><span class="lineno"> 5430</span>&#160;    <a class="code" href="structllvm_1_1Inverse.html">Inverse</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l05431"></a><span class="lineno"> 5431</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05432"></a><span class="lineno"> 5432</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e">ICmpInst::ICMP_ULT</a>:</div>
<div class="line"><a name="l05433"></a><span class="lineno"> 5433</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bad92f160316221fd4090520bb2b3cefc5">ICmpInst::ICMP_ULE</a>:</div>
<div class="line"><a name="l05434"></a><span class="lineno"> 5434</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(1) == MulVal)</div>
<div class="line"><a name="l05435"></a><span class="lineno"> 5435</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05436"></a><span class="lineno"> 5436</span>&#160;    <a class="code" href="structllvm_1_1Inverse.html">Inverse</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l05437"></a><span class="lineno"> 5437</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05438"></a><span class="lineno"> 5438</span>&#160;  <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l05439"></a><span class="lineno"> 5439</span>&#160;    <a class="code" href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Unexpected predicate&quot;</span>);</div>
<div class="line"><a name="l05440"></a><span class="lineno"> 5440</span>&#160;  }</div>
<div class="line"><a name="l05441"></a><span class="lineno"> 5441</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="structllvm_1_1Inverse.html">Inverse</a>) {</div>
<div class="line"><a name="l05442"></a><span class="lineno"> 5442</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Res = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateExtractValue(Call, 1);</div>
<div class="line"><a name="l05443"></a><span class="lineno"> 5443</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1BinaryOperator.html#a4f500ae0de71695b652af4c0958d8ea8">BinaryOperator::CreateNot</a>(Res);</div>
<div class="line"><a name="l05444"></a><span class="lineno"> 5444</span>&#160;  }</div>
<div class="line"><a name="l05445"></a><span class="lineno"> 5445</span>&#160; </div>
<div class="line"><a name="l05446"></a><span class="lineno"> 5446</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1ExtractValueInst.html#a1cccf41f6be0351ccceed2c6447ff04a">ExtractValueInst::Create</a>(Call, 1);</div>
<div class="line"><a name="l05447"></a><span class="lineno"> 5447</span>&#160;}</div>
<div class="line"><a name="l05448"></a><span class="lineno"> 5448</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l05449"></a><span class="lineno"> 5449</span>&#160;<span class="comment">/// When performing a comparison against a constant, it is possible that not all</span></div>
<div class="line"><a name="l05450"></a><span class="lineno"> 5450</span>&#160;<span class="comment">/// the bits in the LHS are demanded. This helper method computes the mask that</span></div>
<div class="line"><a name="l05451"></a><span class="lineno"> 5451</span>&#160;<span class="comment">/// IS demanded.</span></div>
<div class="line"><a name="l05452"></a><span class="lineno"><a class="line" href="InstCombineCompares_8cpp.html#a596e1e2a1e7f415e9df16dc4550f8fd9"> 5452</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> <a class="code" href="InstCombineCompares_8cpp.html#a596e1e2a1e7f415e9df16dc4550f8fd9">getDemandedBitsLHSMask</a>(<a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm.html#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a>) {</div>
<div class="line"><a name="l05453"></a><span class="lineno"> 5453</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>;</div>
<div class="line"><a name="l05454"></a><span class="lineno"> 5454</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(1), <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>)))</div>
<div class="line"><a name="l05455"></a><span class="lineno"> 5455</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1APInt.html#a071e8d814b2b30b02544fad964227b8e">APInt::getAllOnes</a>(<a class="code" href="namespacellvm.html#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a>);</div>
<div class="line"><a name="l05456"></a><span class="lineno"> 5456</span>&#160; </div>
<div class="line"><a name="l05457"></a><span class="lineno"> 5457</span>&#160;  <span class="comment">// If this is a normal comparison, it demands all bits. If it is a sign bit</span></div>
<div class="line"><a name="l05458"></a><span class="lineno"> 5458</span>&#160;  <span class="comment">// comparison, it only demands the sign bit.</span></div>
<div class="line"><a name="l05459"></a><span class="lineno"> 5459</span>&#160;  <span class="keywordtype">bool</span> UnusedBit;</div>
<div class="line"><a name="l05460"></a><span class="lineno"> 5460</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1InstCombiner.html#ad6a655e662d683cd55d2201b5e6a6360">InstCombiner::isSignBitCheck</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getPredicate(), *<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, UnusedBit))</div>
<div class="line"><a name="l05461"></a><span class="lineno"> 5461</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1APInt.html#a1e6f0d8dfed0ab631b488a3e6317718e">APInt::getSignMask</a>(<a class="code" href="namespacellvm.html#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a>);</div>
<div class="line"><a name="l05462"></a><span class="lineno"> 5462</span>&#160; </div>
<div class="line"><a name="l05463"></a><span class="lineno"> 5463</span>&#160;  <span class="keywordflow">switch</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getPredicate()) {</div>
<div class="line"><a name="l05464"></a><span class="lineno"> 5464</span>&#160;  <span class="comment">// For a UGT comparison, we don&#39;t care about any bits that</span></div>
<div class="line"><a name="l05465"></a><span class="lineno"> 5465</span>&#160;  <span class="comment">// correspond to the trailing ones of the comparand.  The value of these</span></div>
<div class="line"><a name="l05466"></a><span class="lineno"> 5466</span>&#160;  <span class="comment">// bits doesn&#39;t impact the outcome of the comparison, because any value</span></div>
<div class="line"><a name="l05467"></a><span class="lineno"> 5467</span>&#160;  <span class="comment">// greater than the RHS must differ in a bit higher than these due to carry.</span></div>
<div class="line"><a name="l05468"></a><span class="lineno"> 5468</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba607cecdc5172814382033e001ed11fad">ICmpInst::ICMP_UGT</a>:</div>
<div class="line"><a name="l05469"></a><span class="lineno"> 5469</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1APInt.html#aeaf22e8d92fd978a5eca9ab031994399">APInt::getBitsSetFrom</a>(<a class="code" href="namespacellvm.html#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a>, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>-&gt;countTrailingOnes());</div>
<div class="line"><a name="l05470"></a><span class="lineno"> 5470</span>&#160; </div>
<div class="line"><a name="l05471"></a><span class="lineno"> 5471</span>&#160;  <span class="comment">// Similarly, for a ULT comparison, we don&#39;t care about the trailing zeros.</span></div>
<div class="line"><a name="l05472"></a><span class="lineno"> 5472</span>&#160;  <span class="comment">// Any value less than the RHS must differ in a higher bit because of carries.</span></div>
<div class="line"><a name="l05473"></a><span class="lineno"> 5473</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e">ICmpInst::ICMP_ULT</a>:</div>
<div class="line"><a name="l05474"></a><span class="lineno"> 5474</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1APInt.html#aeaf22e8d92fd978a5eca9ab031994399">APInt::getBitsSetFrom</a>(<a class="code" href="namespacellvm.html#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a>, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>-&gt;countTrailingZeros());</div>
<div class="line"><a name="l05475"></a><span class="lineno"> 5475</span>&#160; </div>
<div class="line"><a name="l05476"></a><span class="lineno"> 5476</span>&#160;  <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l05477"></a><span class="lineno"> 5477</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1APInt.html#a071e8d814b2b30b02544fad964227b8e">APInt::getAllOnes</a>(<a class="code" href="namespacellvm.html#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a>);</div>
<div class="line"><a name="l05478"></a><span class="lineno"> 5478</span>&#160;  }</div>
<div class="line"><a name="l05479"></a><span class="lineno"> 5479</span>&#160;}</div>
<div class="line"><a name="l05480"></a><span class="lineno"> 5480</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l05481"></a><span class="lineno"> 5481</span>&#160;<span class="comment">/// Check if the order of \p Op0 and \p Op1 as operands in an ICmpInst</span></div>
<div class="line"><a name="l05482"></a><span class="lineno"> 5482</span>&#160;<span class="comment">/// should be swapped.</span></div>
<div class="line"><a name="l05483"></a><span class="lineno"> 5483</span>&#160;<span class="comment">/// The decision is based on how many times these two operands are reused</span></div>
<div class="line"><a name="l05484"></a><span class="lineno"> 5484</span>&#160;<span class="comment">/// as subtract operands and their positions in those instructions.</span></div>
<div class="line"><a name="l05485"></a><span class="lineno"> 5485</span>&#160;<span class="comment">/// The rationale is that several architectures use the same instruction for</span></div>
<div class="line"><a name="l05486"></a><span class="lineno"> 5486</span>&#160;<span class="comment">/// both subtract and cmp. Thus, it is better if the order of those operands</span></div>
<div class="line"><a name="l05487"></a><span class="lineno"> 5487</span>&#160;<span class="comment">/// match.</span></div>
<div class="line"><a name="l05488"></a><span class="lineno"> 5488</span>&#160;<span class="comment">/// \return true if Op0 and Op1 should be swapped.</span></div>
<div class="line"><a name="l05489"></a><span class="lineno"><a class="line" href="InstCombineCompares_8cpp.html#aaead33f71104b5e889a5cd491cd2bb56"> 5489</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="InstCombineCompares_8cpp.html#aaead33f71104b5e889a5cd491cd2bb56">swapMayExposeCSEOpportunities</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *Op0, <span class="keyword">const</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *Op1) {</div>
<div class="line"><a name="l05490"></a><span class="lineno"> 5490</span>&#160;  <span class="comment">// Filter out pointer values as those cannot appear directly in subtract.</span></div>
<div class="line"><a name="l05491"></a><span class="lineno"> 5491</span>&#160;  <span class="comment">// FIXME: we may want to go through inttoptrs or bitcasts.</span></div>
<div class="line"><a name="l05492"></a><span class="lineno"> 5492</span>&#160;  <span class="keywordflow">if</span> (Op0-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a3b996fbf8458aafffc86cb98a68d0a47">isPointerTy</a>())</div>
<div class="line"><a name="l05493"></a><span class="lineno"> 5493</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l05494"></a><span class="lineno"> 5494</span>&#160;  <span class="comment">// If a subtract already has the same operands as a compare, swapping would be</span></div>
<div class="line"><a name="l05495"></a><span class="lineno"> 5495</span>&#160;  <span class="comment">// bad. If a subtract has the same operands as a compare but in reverse order,</span></div>
<div class="line"><a name="l05496"></a><span class="lineno"> 5496</span>&#160;  <span class="comment">// then swapping is good.</span></div>
<div class="line"><a name="l05497"></a><span class="lineno"> 5497</span>&#160;  <span class="keywordtype">int</span> GoodToSwap = 0;</div>
<div class="line"><a name="l05498"></a><span class="lineno"> 5498</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1User.html">User</a> *U : Op0-&gt;<a class="code" href="classllvm_1_1Value.html#ab4e0512c7e1c7adaa56677e3155685f1">users</a>()) {</div>
<div class="line"><a name="l05499"></a><span class="lineno"> 5499</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(U, <a class="code" href="namespacellvm_1_1PatternMatch.html#ac3ed5602889a22db44a16e1b97fac5b8">m_Sub</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(Op1), <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(Op0))))</div>
<div class="line"><a name="l05500"></a><span class="lineno"> 5500</span>&#160;      GoodToSwap++;</div>
<div class="line"><a name="l05501"></a><span class="lineno"> 5501</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(U, <a class="code" href="namespacellvm_1_1PatternMatch.html#ac3ed5602889a22db44a16e1b97fac5b8">m_Sub</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(Op0), <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(Op1))))</div>
<div class="line"><a name="l05502"></a><span class="lineno"> 5502</span>&#160;      GoodToSwap--;</div>
<div class="line"><a name="l05503"></a><span class="lineno"> 5503</span>&#160;  }</div>
<div class="line"><a name="l05504"></a><span class="lineno"> 5504</span>&#160;  <span class="keywordflow">return</span> GoodToSwap &gt; 0;</div>
<div class="line"><a name="l05505"></a><span class="lineno"> 5505</span>&#160;}</div>
<div class="line"><a name="l05506"></a><span class="lineno"> 5506</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l05507"></a><span class="lineno"> 5507</span>&#160;<span class="comment">/// Check that one use is in the same block as the definition and all</span></div>
<div class="line"><a name="l05508"></a><span class="lineno"> 5508</span>&#160;<span class="comment">/// other uses are in blocks dominated by a given block.</span></div>
<div class="line"><a name="l05509"></a><span class="lineno"> 5509</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l05510"></a><span class="lineno"> 5510</span>&#160;<span class="comment">/// \param DI Definition</span></div>
<div class="line"><a name="l05511"></a><span class="lineno"> 5511</span>&#160;<span class="comment">/// \param UI Use</span></div>
<div class="line"><a name="l05512"></a><span class="lineno"> 5512</span>&#160;<span class="comment">/// \param DB Block that must dominate all uses of \p DI outside</span></div>
<div class="line"><a name="l05513"></a><span class="lineno"> 5513</span>&#160;<span class="comment">///           the parent block</span></div>
<div class="line"><a name="l05514"></a><span class="lineno"> 5514</span>&#160;<span class="comment">/// \return true when \p UI is the only use of \p DI in the parent block</span></div>
<div class="line"><a name="l05515"></a><span class="lineno"> 5515</span>&#160;<span class="comment">/// and all other uses of \p DI are in blocks dominated by \p DB.</span></div>
<div class="line"><a name="l05516"></a><span class="lineno"> 5516</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l05517"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombinerImpl.html#ad3f2b185fd3e7dd4d0e694e773792fb8"> 5517</a></span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1InstCombinerImpl.html#ad3f2b185fd3e7dd4d0e694e773792fb8">InstCombinerImpl::dominatesAllUses</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *DI,</div>
<div class="line"><a name="l05518"></a><span class="lineno"> 5518</span>&#160;                                        <span class="keyword">const</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *UI,</div>
<div class="line"><a name="l05519"></a><span class="lineno"> 5519</span>&#160;                                        <span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="namespacellvm_1_1AArch64PACKey.html#abf4394f452bde3f544999858d71e4b46a8a67c950f093761829058d45fbc3f522">DB</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l05520"></a><span class="lineno"> 5520</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(DI &amp;&amp; UI &amp;&amp; <span class="stringliteral">&quot;Instruction not defined\n&quot;</span>);</div>
<div class="line"><a name="l05521"></a><span class="lineno"> 5521</span>&#160;  <span class="comment">// Ignore incomplete definitions.</span></div>
<div class="line"><a name="l05522"></a><span class="lineno"> 5522</span>&#160;  <span class="keywordflow">if</span> (!DI-&gt;<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>())</div>
<div class="line"><a name="l05523"></a><span class="lineno"> 5523</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l05524"></a><span class="lineno"> 5524</span>&#160;  <span class="comment">// DI and UI must be in the same block.</span></div>
<div class="line"><a name="l05525"></a><span class="lineno"> 5525</span>&#160;  <span class="keywordflow">if</span> (DI-&gt;<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>() != UI-&gt;<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>())</div>
<div class="line"><a name="l05526"></a><span class="lineno"> 5526</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l05527"></a><span class="lineno"> 5527</span>&#160;  <span class="comment">// Protect from self-referencing blocks.</span></div>
<div class="line"><a name="l05528"></a><span class="lineno"> 5528</span>&#160;  <span class="keywordflow">if</span> (DI-&gt;<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>() == <a class="code" href="namespacellvm_1_1AArch64PACKey.html#abf4394f452bde3f544999858d71e4b46a8a67c950f093761829058d45fbc3f522">DB</a>)</div>
<div class="line"><a name="l05529"></a><span class="lineno"> 5529</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l05530"></a><span class="lineno"> 5530</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1User.html">User</a> *U : DI-&gt;<a class="code" href="classllvm_1_1Value.html#ab4e0512c7e1c7adaa56677e3155685f1">users</a>()) {</div>
<div class="line"><a name="l05531"></a><span class="lineno"> 5531</span>&#160;    <span class="keyword">auto</span> *Usr = cast&lt;Instruction&gt;(U);</div>
<div class="line"><a name="l05532"></a><span class="lineno"> 5532</span>&#160;    <span class="keywordflow">if</span> (Usr != UI &amp;&amp; !DT.dominates(<a class="code" href="namespacellvm_1_1AArch64PACKey.html#abf4394f452bde3f544999858d71e4b46a8a67c950f093761829058d45fbc3f522">DB</a>, Usr-&gt;getParent()))</div>
<div class="line"><a name="l05533"></a><span class="lineno"> 5533</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l05534"></a><span class="lineno"> 5534</span>&#160;  }</div>
<div class="line"><a name="l05535"></a><span class="lineno"> 5535</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l05536"></a><span class="lineno"> 5536</span>&#160;}</div>
<div class="line"><a name="l05537"></a><span class="lineno"> 5537</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l05538"></a><span class="lineno"> 5538</span>&#160;<span class="comment">/// Return true when the instruction sequence within a block is select-cmp-br.</span></div>
<div class="line"><a name="l05539"></a><span class="lineno"><a class="line" href="InstCombineCompares_8cpp.html#a3bed745566338e51f330ff68e39ff4a1"> 5539</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="InstCombineCompares_8cpp.html#a3bed745566338e51f330ff68e39ff4a1">isChainSelectCmpBranch</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1SelectInst.html">SelectInst</a> *<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>) {</div>
<div class="line"><a name="l05540"></a><span class="lineno"> 5540</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> = <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;getParent();</div>
<div class="line"><a name="l05541"></a><span class="lineno"> 5541</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>)</div>
<div class="line"><a name="l05542"></a><span class="lineno"> 5542</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l05543"></a><span class="lineno"> 5543</span>&#160;  <span class="keyword">auto</span> *BI = dyn_cast_or_null&lt;BranchInst&gt;(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getTerminator());</div>
<div class="line"><a name="l05544"></a><span class="lineno"> 5544</span>&#160;  <span class="keywordflow">if</span> (!BI || BI-&gt;getNumSuccessors() != 2)</div>
<div class="line"><a name="l05545"></a><span class="lineno"> 5545</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l05546"></a><span class="lineno"> 5546</span>&#160;  <span class="keyword">auto</span> *IC = dyn_cast&lt;ICmpInst&gt;(BI-&gt;getCondition());</div>
<div class="line"><a name="l05547"></a><span class="lineno"> 5547</span>&#160;  <span class="keywordflow">if</span> (!IC || (IC-&gt;getOperand(0) != <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a> &amp;&amp; IC-&gt;getOperand(1) != <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>))</div>
<div class="line"><a name="l05548"></a><span class="lineno"> 5548</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l05549"></a><span class="lineno"> 5549</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l05550"></a><span class="lineno"> 5550</span>&#160;}</div>
<div class="line"><a name="l05551"></a><span class="lineno"> 5551</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l05552"></a><span class="lineno"> 5552</span>&#160;<span class="comment">/// True when a select result is replaced by one of its operands</span></div>
<div class="line"><a name="l05553"></a><span class="lineno"> 5553</span>&#160;<span class="comment">/// in select-icmp sequence. This will eventually result in the elimination</span></div>
<div class="line"><a name="l05554"></a><span class="lineno"> 5554</span>&#160;<span class="comment">/// of the select.</span></div>
<div class="line"><a name="l05555"></a><span class="lineno"> 5555</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l05556"></a><span class="lineno"> 5556</span>&#160;<span class="comment">/// \param SI    Select instruction</span></div>
<div class="line"><a name="l05557"></a><span class="lineno"> 5557</span>&#160;<span class="comment">/// \param Icmp  Compare instruction</span></div>
<div class="line"><a name="l05558"></a><span class="lineno"> 5558</span>&#160;<span class="comment">/// \param SIOpd Operand that replaces the select</span></div>
<div class="line"><a name="l05559"></a><span class="lineno"> 5559</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l05560"></a><span class="lineno"> 5560</span>&#160;<span class="comment">/// Notes:</span></div>
<div class="line"><a name="l05561"></a><span class="lineno"> 5561</span>&#160;<span class="comment">/// - The replacement is global and requires dominator information</span></div>
<div class="line"><a name="l05562"></a><span class="lineno"> 5562</span>&#160;<span class="comment">/// - The caller is responsible for the actual replacement</span></div>
<div class="line"><a name="l05563"></a><span class="lineno"> 5563</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l05564"></a><span class="lineno"> 5564</span>&#160;<span class="comment">/// Example:</span></div>
<div class="line"><a name="l05565"></a><span class="lineno"> 5565</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l05566"></a><span class="lineno"> 5566</span>&#160;<span class="comment">/// entry:</span></div>
<div class="line"><a name="l05567"></a><span class="lineno"> 5567</span>&#160;<span class="comment">///  %4 = select i1 %3, %C* %0, %C* null</span></div>
<div class="line"><a name="l05568"></a><span class="lineno"> 5568</span>&#160;<span class="comment">///  %5 = icmp eq %C* %4, null</span></div>
<div class="line"><a name="l05569"></a><span class="lineno"> 5569</span>&#160;<span class="comment">///  br i1 %5, label %9, label %7</span></div>
<div class="line"><a name="l05570"></a><span class="lineno"> 5570</span>&#160;<span class="comment">///  ...</span></div>
<div class="line"><a name="l05571"></a><span class="lineno"> 5571</span>&#160;<span class="comment">///  ; &lt;label&gt;:7                                       ; preds = %entry</span></div>
<div class="line"><a name="l05572"></a><span class="lineno"> 5572</span>&#160;<span class="comment">///  %8 = getelementptr inbounds %C* %4, i64 0, i32 0</span></div>
<div class="line"><a name="l05573"></a><span class="lineno"> 5573</span>&#160;<span class="comment">///  ...</span></div>
<div class="line"><a name="l05574"></a><span class="lineno"> 5574</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l05575"></a><span class="lineno"> 5575</span>&#160;<span class="comment">/// can be transformed to</span></div>
<div class="line"><a name="l05576"></a><span class="lineno"> 5576</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l05577"></a><span class="lineno"> 5577</span>&#160;<span class="comment">///  %5 = icmp eq %C* %0, null</span></div>
<div class="line"><a name="l05578"></a><span class="lineno"> 5578</span>&#160;<span class="comment">///  %6 = select i1 %3, i1 %5, i1 true</span></div>
<div class="line"><a name="l05579"></a><span class="lineno"> 5579</span>&#160;<span class="comment">///  br i1 %6, label %9, label %7</span></div>
<div class="line"><a name="l05580"></a><span class="lineno"> 5580</span>&#160;<span class="comment">///  ...</span></div>
<div class="line"><a name="l05581"></a><span class="lineno"> 5581</span>&#160;<span class="comment">///  ; &lt;label&gt;:7                                       ; preds = %entry</span></div>
<div class="line"><a name="l05582"></a><span class="lineno"> 5582</span>&#160;<span class="comment">///  %8 = getelementptr inbounds %C* %0, i64 0, i32 0  // replace by %0!</span></div>
<div class="line"><a name="l05583"></a><span class="lineno"> 5583</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l05584"></a><span class="lineno"> 5584</span>&#160;<span class="comment">/// Similar when the first operand of the select is a constant or/and</span></div>
<div class="line"><a name="l05585"></a><span class="lineno"> 5585</span>&#160;<span class="comment">/// the compare is for not equal rather than equal.</span></div>
<div class="line"><a name="l05586"></a><span class="lineno"> 5586</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l05587"></a><span class="lineno"> 5587</span>&#160;<span class="comment">/// NOTE: The function is only called when the select and compare constants</span></div>
<div class="line"><a name="l05588"></a><span class="lineno"> 5588</span>&#160;<span class="comment">/// are equal, the optimization can work only for EQ predicates. This is not a</span></div>
<div class="line"><a name="l05589"></a><span class="lineno"> 5589</span>&#160;<span class="comment">/// major restriction since a NE compare should be &#39;normalized&#39; to an equal</span></div>
<div class="line"><a name="l05590"></a><span class="lineno"> 5590</span>&#160;<span class="comment">/// compare, which usually happens in the combiner and test case</span></div>
<div class="line"><a name="l05591"></a><span class="lineno"> 5591</span>&#160;<span class="comment">/// select-cmp-br.ll checks for it.</span></div>
<div class="line"><a name="l05592"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombinerImpl.html#af37433fe005d86f4551e44915bd97e0b"> 5592</a></span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1InstCombinerImpl.html#af37433fe005d86f4551e44915bd97e0b">InstCombinerImpl::replacedSelectWithOperand</a>(<a class="code" href="classllvm_1_1SelectInst.html">SelectInst</a> *<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>,</div>
<div class="line"><a name="l05593"></a><span class="lineno"> 5593</span>&#160;                                                 <span class="keyword">const</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> *Icmp,</div>
<div class="line"><a name="l05594"></a><span class="lineno"> 5594</span>&#160;                                                 <span class="keyword">const</span> <span class="keywordtype">unsigned</span> SIOpd) {</div>
<div class="line"><a name="l05595"></a><span class="lineno"> 5595</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((SIOpd == 1 || SIOpd == 2) &amp;&amp; <span class="stringliteral">&quot;Invalid select operand!&quot;</span>);</div>
<div class="line"><a name="l05596"></a><span class="lineno"> 5596</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="InstCombineCompares_8cpp.html#a3bed745566338e51f330ff68e39ff4a1">isChainSelectCmpBranch</a>(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>) &amp;&amp; Icmp-&gt;<a class="code" href="classllvm_1_1CmpInst.html#aa7414ba9f658ff1287d22a4b8fe81bcb">getPredicate</a>() == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a>) {</div>
<div class="line"><a name="l05597"></a><span class="lineno"> 5597</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Succ = <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;getParent()-&gt;getTerminator()-&gt;getSuccessor(1);</div>
<div class="line"><a name="l05598"></a><span class="lineno"> 5598</span>&#160;    <span class="comment">// The check for the single predecessor is not the best that can be</span></div>
<div class="line"><a name="l05599"></a><span class="lineno"> 5599</span>&#160;    <span class="comment">// done. But it protects efficiently against cases like when SI&#39;s</span></div>
<div class="line"><a name="l05600"></a><span class="lineno"> 5600</span>&#160;    <span class="comment">// home block has two successors, Succ and Succ1, and Succ1 predecessor</span></div>
<div class="line"><a name="l05601"></a><span class="lineno"> 5601</span>&#160;    <span class="comment">// of Succ. Then SI can&#39;t be replaced by SIOpd because the use that gets</span></div>
<div class="line"><a name="l05602"></a><span class="lineno"> 5602</span>&#160;    <span class="comment">// replaced can be reached on either path. So the uniqueness check</span></div>
<div class="line"><a name="l05603"></a><span class="lineno"> 5603</span>&#160;    <span class="comment">// guarantees that the path all uses of SI (outside SI&#39;s parent) are on</span></div>
<div class="line"><a name="l05604"></a><span class="lineno"> 5604</span>&#160;    <span class="comment">// is disjoint from all other paths out of SI. But that information</span></div>
<div class="line"><a name="l05605"></a><span class="lineno"> 5605</span>&#160;    <span class="comment">// is more expensive to compute, and the trade-off here is in favor</span></div>
<div class="line"><a name="l05606"></a><span class="lineno"> 5606</span>&#160;    <span class="comment">// of compile-time. It should also be noticed that we check for a single</span></div>
<div class="line"><a name="l05607"></a><span class="lineno"> 5607</span>&#160;    <span class="comment">// predecessor and not only uniqueness. This to handle the situation when</span></div>
<div class="line"><a name="l05608"></a><span class="lineno"> 5608</span>&#160;    <span class="comment">// Succ and Succ1 points to the same basic block.</span></div>
<div class="line"><a name="l05609"></a><span class="lineno"> 5609</span>&#160;    <span class="keywordflow">if</span> (Succ-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a59fb91d1691350f7d1b8e8a114e3f2a4">getSinglePredecessor</a>() &amp;&amp; dominatesAllUses(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>, Icmp, Succ)) {</div>
<div class="line"><a name="l05610"></a><span class="lineno"> 5610</span>&#160;      NumSel++;</div>
<div class="line"><a name="l05611"></a><span class="lineno"> 5611</span>&#160;      <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;replaceUsesOutsideBlock(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;getOperand(SIOpd), <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;getParent());</div>
<div class="line"><a name="l05612"></a><span class="lineno"> 5612</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l05613"></a><span class="lineno"> 5613</span>&#160;    }</div>
<div class="line"><a name="l05614"></a><span class="lineno"> 5614</span>&#160;  }</div>
<div class="line"><a name="l05615"></a><span class="lineno"> 5615</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l05616"></a><span class="lineno"> 5616</span>&#160;}</div>
<div class="line"><a name="l05617"></a><span class="lineno"> 5617</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l05618"></a><span class="lineno"> 5618</span>&#160;<span class="comment">/// Try to fold the comparison based on range information we can get by checking</span></div>
<div class="line"><a name="l05619"></a><span class="lineno"> 5619</span>&#160;<span class="comment">/// whether bits are known to be zero or one in the inputs.</span></div>
<div class="line"><a name="l05620"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombinerImpl.html#a8de411243dcb508d9d512006edaba1ec"> 5620</a></span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombinerImpl.html#a8de411243dcb508d9d512006edaba1ec">InstCombinerImpl::foldICmpUsingKnownBits</a>(<a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l05621"></a><span class="lineno"> 5621</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Op0 = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(0), *Op1 = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(1);</div>
<div class="line"><a name="l05622"></a><span class="lineno"> 5622</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *Ty = Op0-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>();</div>
<div class="line"><a name="l05623"></a><span class="lineno"> 5623</span>&#160;  <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">ICmpInst::Predicate</a> Pred = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getPredicate();</div>
<div class="line"><a name="l05624"></a><span class="lineno"> 5624</span>&#160; </div>
<div class="line"><a name="l05625"></a><span class="lineno"> 5625</span>&#160;  <span class="comment">// Get scalar or pointer size.</span></div>
<div class="line"><a name="l05626"></a><span class="lineno"> 5626</span>&#160;  <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm.html#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a> = Ty-&gt;<a class="code" href="classllvm_1_1Type.html#a34ee40bb2f4f5ece47ef19e5f1f57e3c">isIntOrIntVectorTy</a>()</div>
<div class="line"><a name="l05627"></a><span class="lineno"> 5627</span>&#160;                          ? Ty-&gt;<a class="code" href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>()</div>
<div class="line"><a name="l05628"></a><span class="lineno"> 5628</span>&#160;                          : <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getPointerTypeSizeInBits(Ty-&gt;<a class="code" href="classllvm_1_1Type.html#a4abb39a66573f61fda80469faa5d861d">getScalarType</a>());</div>
<div class="line"><a name="l05629"></a><span class="lineno"> 5629</span>&#160; </div>
<div class="line"><a name="l05630"></a><span class="lineno"> 5630</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm.html#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a>)</div>
<div class="line"><a name="l05631"></a><span class="lineno"> 5631</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l05632"></a><span class="lineno"> 5632</span>&#160; </div>
<div class="line"><a name="l05633"></a><span class="lineno"> 5633</span>&#160;  <a class="code" href="structllvm_1_1KnownBits.html">KnownBits</a> Op0Known(<a class="code" href="namespacellvm.html#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a>);</div>
<div class="line"><a name="l05634"></a><span class="lineno"> 5634</span>&#160;  <a class="code" href="structllvm_1_1KnownBits.html">KnownBits</a> Op1Known(<a class="code" href="namespacellvm.html#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a>);</div>
<div class="line"><a name="l05635"></a><span class="lineno"> 5635</span>&#160; </div>
<div class="line"><a name="l05636"></a><span class="lineno"> 5636</span>&#160;  <span class="keywordflow">if</span> (SimplifyDemandedBits(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, 0,</div>
<div class="line"><a name="l05637"></a><span class="lineno"> 5637</span>&#160;                           <a class="code" href="InstCombineCompares_8cpp.html#a596e1e2a1e7f415e9df16dc4550f8fd9">getDemandedBitsLHSMask</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="namespacellvm.html#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a>),</div>
<div class="line"><a name="l05638"></a><span class="lineno"> 5638</span>&#160;                           Op0Known, 0))</div>
<div class="line"><a name="l05639"></a><span class="lineno"> 5639</span>&#160;    <span class="keywordflow">return</span> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l05640"></a><span class="lineno"> 5640</span>&#160; </div>
<div class="line"><a name="l05641"></a><span class="lineno"> 5641</span>&#160;  <span class="keywordflow">if</span> (SimplifyDemandedBits(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, 1, <a class="code" href="classllvm_1_1APInt.html#a071e8d814b2b30b02544fad964227b8e">APInt::getAllOnes</a>(<a class="code" href="namespacellvm.html#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a>), Op1Known, 0))</div>
<div class="line"><a name="l05642"></a><span class="lineno"> 5642</span>&#160;    <span class="keywordflow">return</span> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l05643"></a><span class="lineno"> 5643</span>&#160; </div>
<div class="line"><a name="l05644"></a><span class="lineno"> 5644</span>&#160;  <span class="comment">// Given the known and unknown bits, compute a range that the LHS could be</span></div>
<div class="line"><a name="l05645"></a><span class="lineno"> 5645</span>&#160;  <span class="comment">// in.  Compute the Min, Max and RHS values based on the known bits. For the</span></div>
<div class="line"><a name="l05646"></a><span class="lineno"> 5646</span>&#160;  <span class="comment">// EQ and NE we use unsigned values.</span></div>
<div class="line"><a name="l05647"></a><span class="lineno"> 5647</span>&#160;  <a class="code" href="classllvm_1_1APInt.html">APInt</a> Op0Min(<a class="code" href="namespacellvm.html#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a>, 0), Op0Max(<a class="code" href="namespacellvm.html#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a>, 0);</div>
<div class="line"><a name="l05648"></a><span class="lineno"> 5648</span>&#160;  <a class="code" href="classllvm_1_1APInt.html">APInt</a> Op1Min(<a class="code" href="namespacellvm.html#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a>, 0), Op1Max(<a class="code" href="namespacellvm.html#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a>, 0);</div>
<div class="line"><a name="l05649"></a><span class="lineno"> 5649</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.isSigned()) {</div>
<div class="line"><a name="l05650"></a><span class="lineno"> 5650</span>&#160;    Op0Min = Op0Known.<a class="code" href="structllvm_1_1KnownBits.html#ae0b0ab35dee6bb5d9d53098111bf5c84">getSignedMinValue</a>();</div>
<div class="line"><a name="l05651"></a><span class="lineno"> 5651</span>&#160;    Op0Max = Op0Known.<a class="code" href="structllvm_1_1KnownBits.html#a30c829b0f51e87159f116f980af6237d">getSignedMaxValue</a>();</div>
<div class="line"><a name="l05652"></a><span class="lineno"> 5652</span>&#160;    Op1Min = Op1Known.<a class="code" href="structllvm_1_1KnownBits.html#ae0b0ab35dee6bb5d9d53098111bf5c84">getSignedMinValue</a>();</div>
<div class="line"><a name="l05653"></a><span class="lineno"> 5653</span>&#160;    Op1Max = Op1Known.<a class="code" href="structllvm_1_1KnownBits.html#a30c829b0f51e87159f116f980af6237d">getSignedMaxValue</a>();</div>
<div class="line"><a name="l05654"></a><span class="lineno"> 5654</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l05655"></a><span class="lineno"> 5655</span>&#160;    Op0Min = Op0Known.<a class="code" href="structllvm_1_1KnownBits.html#a9b35c622a902a7a7dc93b807a9fa9265">getMinValue</a>();</div>
<div class="line"><a name="l05656"></a><span class="lineno"> 5656</span>&#160;    Op0Max = Op0Known.<a class="code" href="structllvm_1_1KnownBits.html#a825476b2436eb817b735fdd34ee521c4">getMaxValue</a>();</div>
<div class="line"><a name="l05657"></a><span class="lineno"> 5657</span>&#160;    Op1Min = Op1Known.<a class="code" href="structllvm_1_1KnownBits.html#a9b35c622a902a7a7dc93b807a9fa9265">getMinValue</a>();</div>
<div class="line"><a name="l05658"></a><span class="lineno"> 5658</span>&#160;    Op1Max = Op1Known.<a class="code" href="structllvm_1_1KnownBits.html#a825476b2436eb817b735fdd34ee521c4">getMaxValue</a>();</div>
<div class="line"><a name="l05659"></a><span class="lineno"> 5659</span>&#160;  }</div>
<div class="line"><a name="l05660"></a><span class="lineno"> 5660</span>&#160; </div>
<div class="line"><a name="l05661"></a><span class="lineno"> 5661</span>&#160;  <span class="comment">// If Min and Max are known to be the same, then SimplifyDemandedBits figured</span></div>
<div class="line"><a name="l05662"></a><span class="lineno"> 5662</span>&#160;  <span class="comment">// out that the LHS or RHS is a constant. Constant fold this now, so that</span></div>
<div class="line"><a name="l05663"></a><span class="lineno"> 5663</span>&#160;  <span class="comment">// code below can assume that Min != Max.</span></div>
<div class="line"><a name="l05664"></a><span class="lineno"> 5664</span>&#160;  <span class="keywordflow">if</span> (!isa&lt;Constant&gt;(Op0) &amp;&amp; Op0Min == Op0Max)</div>
<div class="line"><a name="l05665"></a><span class="lineno"> 5665</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, <a class="code" href="classllvm_1_1Constant.html#a0154da1d06b29a1d5649607ae2dfc389">ConstantExpr::getIntegerValue</a>(Ty, Op0Min), Op1);</div>
<div class="line"><a name="l05666"></a><span class="lineno"> 5666</span>&#160;  <span class="keywordflow">if</span> (!isa&lt;Constant&gt;(Op1) &amp;&amp; Op1Min == Op1Max)</div>
<div class="line"><a name="l05667"></a><span class="lineno"> 5667</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, Op0, <a class="code" href="classllvm_1_1Constant.html#a0154da1d06b29a1d5649607ae2dfc389">ConstantExpr::getIntegerValue</a>(Ty, Op1Min));</div>
<div class="line"><a name="l05668"></a><span class="lineno"> 5668</span>&#160; </div>
<div class="line"><a name="l05669"></a><span class="lineno"> 5669</span>&#160;  <span class="comment">// Don&#39;t break up a clamp pattern -- (min(max X, Y), Z) -- by replacing a</span></div>
<div class="line"><a name="l05670"></a><span class="lineno"> 5670</span>&#160;  <span class="comment">// min/max canonical compare with some other compare. That could lead to</span></div>
<div class="line"><a name="l05671"></a><span class="lineno"> 5671</span>&#160;  <span class="comment">// conflict with select canonicalization and infinite looping.</span></div>
<div class="line"><a name="l05672"></a><span class="lineno"> 5672</span>&#160;  <span class="comment">// FIXME: This constraint may go away if min/max intrinsics are canonical.</span></div>
<div class="line"><a name="l05673"></a><span class="lineno"> 5673</span>&#160;  <span class="keyword">auto</span> isMinMaxCmp = [&amp;](<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;Cmp) {</div>
<div class="line"><a name="l05674"></a><span class="lineno"> 5674</span>&#160;    <span class="keywordflow">if</span> (!Cmp.hasOneUse())</div>
<div class="line"><a name="l05675"></a><span class="lineno"> 5675</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l05676"></a><span class="lineno"> 5676</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *A, *<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>;</div>
<div class="line"><a name="l05677"></a><span class="lineno"> 5677</span>&#160;    <a class="code" href="namespacellvm.html#a6bf471c1030973649c2e426afc212097">SelectPatternFlavor</a> SPF = <a class="code" href="namespacellvm.html#a7aad5a0e62a54747f455651ee2dd08ed">matchSelectPattern</a>(Cmp.user_back(), A, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>).<a class="code" href="structllvm_1_1SelectPatternResult.html#a3ca9c2098248eac9051008d6eb9f321d">Flavor</a>;</div>
<div class="line"><a name="l05678"></a><span class="lineno"> 5678</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="structllvm_1_1SelectPatternResult.html#a94c732c9e96c40976f0509fe0233fe7b">SelectPatternResult::isMinOrMax</a>(SPF))</div>
<div class="line"><a name="l05679"></a><span class="lineno"> 5679</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l05680"></a><span class="lineno"> 5680</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a74a8221adbd09a9076a1ab471644b223">m_MaxOrMin</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>())) ||</div>
<div class="line"><a name="l05681"></a><span class="lineno"> 5681</span>&#160;           <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#a74a8221adbd09a9076a1ab471644b223">m_MaxOrMin</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>()));</div>
<div class="line"><a name="l05682"></a><span class="lineno"> 5682</span>&#160;  };</div>
<div class="line"><a name="l05683"></a><span class="lineno"> 5683</span>&#160;  <span class="keywordflow">if</span> (!isMinMaxCmp(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l05684"></a><span class="lineno"> 5684</span>&#160;    <span class="keywordflow">switch</span> (Pred) {</div>
<div class="line"><a name="l05685"></a><span class="lineno"> 5685</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l05686"></a><span class="lineno"> 5686</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05687"></a><span class="lineno"> 5687</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e">ICmpInst::ICMP_ULT</a>: {</div>
<div class="line"><a name="l05688"></a><span class="lineno"> 5688</span>&#160;      <span class="keywordflow">if</span> (Op1Min == Op0Max) <span class="comment">// A &lt;u B -&gt; A != B if max(A) == min(B)</span></div>
<div class="line"><a name="l05689"></a><span class="lineno"> 5689</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a>, Op0, Op1);</div>
<div class="line"><a name="l05690"></a><span class="lineno"> 5690</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *CmpC;</div>
<div class="line"><a name="l05691"></a><span class="lineno"> 5691</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(CmpC))) {</div>
<div class="line"><a name="l05692"></a><span class="lineno"> 5692</span>&#160;        <span class="comment">// A &lt;u C -&gt; A == C-1 if min(A)+1 == C</span></div>
<div class="line"><a name="l05693"></a><span class="lineno"> 5693</span>&#160;        <span class="keywordflow">if</span> (*CmpC == Op0Min + 1)</div>
<div class="line"><a name="l05694"></a><span class="lineno"> 5694</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a>, Op0,</div>
<div class="line"><a name="l05695"></a><span class="lineno"> 5695</span>&#160;                              <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Op1-&gt;getType(), *CmpC - 1));</div>
<div class="line"><a name="l05696"></a><span class="lineno"> 5696</span>&#160;        <span class="comment">// X &lt;u C --&gt; X == 0, if the number of zero bits in the bottom of X</span></div>
<div class="line"><a name="l05697"></a><span class="lineno"> 5697</span>&#160;        <span class="comment">// exceeds the log2 of C.</span></div>
<div class="line"><a name="l05698"></a><span class="lineno"> 5698</span>&#160;        <span class="keywordflow">if</span> (Op0Known.<a class="code" href="structllvm_1_1KnownBits.html#a1eeff70353694cb360b2893553c18e7d">countMinTrailingZeros</a>() &gt;= CmpC-&gt;<a class="code" href="classllvm_1_1APInt.html#a392d67031c5429420ac0b46478fe893e">ceilLogBase2</a>())</div>
<div class="line"><a name="l05699"></a><span class="lineno"> 5699</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a>, Op0,</div>
<div class="line"><a name="l05700"></a><span class="lineno"> 5700</span>&#160;                              <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(Op1-&gt;getType()));</div>
<div class="line"><a name="l05701"></a><span class="lineno"> 5701</span>&#160;      }</div>
<div class="line"><a name="l05702"></a><span class="lineno"> 5702</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05703"></a><span class="lineno"> 5703</span>&#160;    }</div>
<div class="line"><a name="l05704"></a><span class="lineno"> 5704</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba607cecdc5172814382033e001ed11fad">ICmpInst::ICMP_UGT</a>: {</div>
<div class="line"><a name="l05705"></a><span class="lineno"> 5705</span>&#160;      <span class="keywordflow">if</span> (Op1Max == Op0Min) <span class="comment">// A &gt;u B -&gt; A != B if min(A) == max(B)</span></div>
<div class="line"><a name="l05706"></a><span class="lineno"> 5706</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a>, Op0, Op1);</div>
<div class="line"><a name="l05707"></a><span class="lineno"> 5707</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *CmpC;</div>
<div class="line"><a name="l05708"></a><span class="lineno"> 5708</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(CmpC))) {</div>
<div class="line"><a name="l05709"></a><span class="lineno"> 5709</span>&#160;        <span class="comment">// A &gt;u C -&gt; A == C+1 if max(a)-1 == C</span></div>
<div class="line"><a name="l05710"></a><span class="lineno"> 5710</span>&#160;        <span class="keywordflow">if</span> (*CmpC == Op0Max - 1)</div>
<div class="line"><a name="l05711"></a><span class="lineno"> 5711</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a>, Op0,</div>
<div class="line"><a name="l05712"></a><span class="lineno"> 5712</span>&#160;                              <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Op1-&gt;getType(), *CmpC + 1));</div>
<div class="line"><a name="l05713"></a><span class="lineno"> 5713</span>&#160;        <span class="comment">// X &gt;u C --&gt; X != 0, if the number of zero bits in the bottom of X</span></div>
<div class="line"><a name="l05714"></a><span class="lineno"> 5714</span>&#160;        <span class="comment">// exceeds the log2 of C.</span></div>
<div class="line"><a name="l05715"></a><span class="lineno"> 5715</span>&#160;        <span class="keywordflow">if</span> (Op0Known.<a class="code" href="structllvm_1_1KnownBits.html#a1eeff70353694cb360b2893553c18e7d">countMinTrailingZeros</a>() &gt;= CmpC-&gt;<a class="code" href="classllvm_1_1APInt.html#a3015474e70e59c0a3ed4f9f0e8644b75">getActiveBits</a>())</div>
<div class="line"><a name="l05716"></a><span class="lineno"> 5716</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a>, Op0,</div>
<div class="line"><a name="l05717"></a><span class="lineno"> 5717</span>&#160;                              <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(Op1-&gt;getType()));</div>
<div class="line"><a name="l05718"></a><span class="lineno"> 5718</span>&#160;      }</div>
<div class="line"><a name="l05719"></a><span class="lineno"> 5719</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05720"></a><span class="lineno"> 5720</span>&#160;    }</div>
<div class="line"><a name="l05721"></a><span class="lineno"> 5721</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba15ae464950ac676919c2f0c7aafc706c">ICmpInst::ICMP_SLT</a>: {</div>
<div class="line"><a name="l05722"></a><span class="lineno"> 5722</span>&#160;      <span class="keywordflow">if</span> (Op1Min == Op0Max) <span class="comment">// A &lt;s B -&gt; A != B if max(A) == min(B)</span></div>
<div class="line"><a name="l05723"></a><span class="lineno"> 5723</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a>, Op0, Op1);</div>
<div class="line"><a name="l05724"></a><span class="lineno"> 5724</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *CmpC;</div>
<div class="line"><a name="l05725"></a><span class="lineno"> 5725</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(CmpC))) {</div>
<div class="line"><a name="l05726"></a><span class="lineno"> 5726</span>&#160;        <span class="keywordflow">if</span> (*CmpC == Op0Min + 1) <span class="comment">// A &lt;s C -&gt; A == C-1 if min(A)+1 == C</span></div>
<div class="line"><a name="l05727"></a><span class="lineno"> 5727</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a>, Op0,</div>
<div class="line"><a name="l05728"></a><span class="lineno"> 5728</span>&#160;                              <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Op1-&gt;getType(), *CmpC - 1));</div>
<div class="line"><a name="l05729"></a><span class="lineno"> 5729</span>&#160;      }</div>
<div class="line"><a name="l05730"></a><span class="lineno"> 5730</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05731"></a><span class="lineno"> 5731</span>&#160;    }</div>
<div class="line"><a name="l05732"></a><span class="lineno"> 5732</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba720a42e85f7e981afd61e28473b0000a">ICmpInst::ICMP_SGT</a>: {</div>
<div class="line"><a name="l05733"></a><span class="lineno"> 5733</span>&#160;      <span class="keywordflow">if</span> (Op1Max == Op0Min) <span class="comment">// A &gt;s B -&gt; A != B if min(A) == max(B)</span></div>
<div class="line"><a name="l05734"></a><span class="lineno"> 5734</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a>, Op0, Op1);</div>
<div class="line"><a name="l05735"></a><span class="lineno"> 5735</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *CmpC;</div>
<div class="line"><a name="l05736"></a><span class="lineno"> 5736</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(CmpC))) {</div>
<div class="line"><a name="l05737"></a><span class="lineno"> 5737</span>&#160;        <span class="keywordflow">if</span> (*CmpC == Op0Max - 1) <span class="comment">// A &gt;s C -&gt; A == C+1 if max(A)-1 == C</span></div>
<div class="line"><a name="l05738"></a><span class="lineno"> 5738</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a>, Op0,</div>
<div class="line"><a name="l05739"></a><span class="lineno"> 5739</span>&#160;                              <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Op1-&gt;getType(), *CmpC + 1));</div>
<div class="line"><a name="l05740"></a><span class="lineno"> 5740</span>&#160;      }</div>
<div class="line"><a name="l05741"></a><span class="lineno"> 5741</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05742"></a><span class="lineno"> 5742</span>&#160;    }</div>
<div class="line"><a name="l05743"></a><span class="lineno"> 5743</span>&#160;    }</div>
<div class="line"><a name="l05744"></a><span class="lineno"> 5744</span>&#160;  }</div>
<div class="line"><a name="l05745"></a><span class="lineno"> 5745</span>&#160; </div>
<div class="line"><a name="l05746"></a><span class="lineno"> 5746</span>&#160;  <span class="comment">// Based on the range information we know about the LHS, see if we can</span></div>
<div class="line"><a name="l05747"></a><span class="lineno"> 5747</span>&#160;  <span class="comment">// simplify this comparison.  For example, (x&amp;4) &lt; 8 is always true.</span></div>
<div class="line"><a name="l05748"></a><span class="lineno"> 5748</span>&#160;  <span class="keywordflow">switch</span> (Pred) {</div>
<div class="line"><a name="l05749"></a><span class="lineno"> 5749</span>&#160;  <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l05750"></a><span class="lineno"> 5750</span>&#160;    <a class="code" href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Unknown icmp opcode!&quot;</span>);</div>
<div class="line"><a name="l05751"></a><span class="lineno"> 5751</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a>:</div>
<div class="line"><a name="l05752"></a><span class="lineno"> 5752</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a>: {</div>
<div class="line"><a name="l05753"></a><span class="lineno"> 5753</span>&#160;    <span class="keywordflow">if</span> (Op0Max.<a class="code" href="classllvm_1_1APInt.html#a545e8d5dfa1688acea0d0e275b03682f">ult</a>(Op1Min) || Op0Min.ugt(Op1Max))</div>
<div class="line"><a name="l05754"></a><span class="lineno"> 5754</span>&#160;      <span class="keywordflow">return</span> replaceInstUsesWith(</div>
<div class="line"><a name="l05755"></a><span class="lineno"> 5755</span>&#160;          <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1ConstantInt.html#afe7d477c6022fe7123b90e3b39c58e69">ConstantInt::getBool</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getType(), Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">CmpInst::ICMP_NE</a>));</div>
<div class="line"><a name="l05756"></a><span class="lineno"> 5756</span>&#160; </div>
<div class="line"><a name="l05757"></a><span class="lineno"> 5757</span>&#160;    <span class="comment">// If all bits are known zero except for one, then we know at most one bit</span></div>
<div class="line"><a name="l05758"></a><span class="lineno"> 5758</span>&#160;    <span class="comment">// is set. If the comparison is against zero, then this is a check to see if</span></div>
<div class="line"><a name="l05759"></a><span class="lineno"> 5759</span>&#160;    <span class="comment">// *that* bit is set.</span></div>
<div class="line"><a name="l05760"></a><span class="lineno"> 5760</span>&#160;    <a class="code" href="classllvm_1_1APInt.html">APInt</a> Op0KnownZeroInverted = ~Op0Known.<a class="code" href="structllvm_1_1KnownBits.html#ac67bca6c764da76f5e152330d92ed916">Zero</a>;</div>
<div class="line"><a name="l05761"></a><span class="lineno"> 5761</span>&#160;    <span class="keywordflow">if</span> (Op1Known.<a class="code" href="structllvm_1_1KnownBits.html#a1620c017d995c7ccbcb59e0212618017">isZero</a>()) {</div>
<div class="line"><a name="l05762"></a><span class="lineno"> 5762</span>&#160;      <span class="comment">// If the LHS is an AND with the same constant, look through it.</span></div>
<div class="line"><a name="l05763"></a><span class="lineno"> 5763</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l05764"></a><span class="lineno"> 5764</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *LHSC;</div>
<div class="line"><a name="l05765"></a><span class="lineno"> 5765</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a427435d4da769ae680a8e77ef89520aa">m_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(LHSC))) ||</div>
<div class="line"><a name="l05766"></a><span class="lineno"> 5766</span>&#160;          *LHSC != Op0KnownZeroInverted)</div>
<div class="line"><a name="l05767"></a><span class="lineno"> 5767</span>&#160;        <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a> = Op0;</div>
<div class="line"><a name="l05768"></a><span class="lineno"> 5768</span>&#160; </div>
<div class="line"><a name="l05769"></a><span class="lineno"> 5769</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>;</div>
<div class="line"><a name="l05770"></a><span class="lineno"> 5770</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *<a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>;</div>
<div class="line"><a name="l05771"></a><span class="lineno"> 5771</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a37668d9884c78ac77254cf9fb8a4276a">m_Shl</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#ad5e60756e331a97669d11b5c9d8691a2">m_Power2</a>(<a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>)))) {</div>
<div class="line"><a name="l05772"></a><span class="lineno"> 5772</span>&#160;        <a class="code" href="classllvm_1_1Type.html">Type</a> *XTy = <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getType();</div>
<div class="line"><a name="l05773"></a><span class="lineno"> 5773</span>&#160;        <span class="keywordtype">unsigned</span> Log2C1 = <a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>-&gt;countTrailingZeros();</div>
<div class="line"><a name="l05774"></a><span class="lineno"> 5774</span>&#160;        <a class="code" href="classllvm_1_1APInt.html">APInt</a> C2 = Op0KnownZeroInverted;</div>
<div class="line"><a name="l05775"></a><span class="lineno"> 5775</span>&#160;        <a class="code" href="classllvm_1_1APInt.html">APInt</a> C2Pow2 = (C2 &amp; ~(*<a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a> - 1)) + *<a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>;</div>
<div class="line"><a name="l05776"></a><span class="lineno"> 5776</span>&#160;        <span class="keywordflow">if</span> (C2Pow2.<a class="code" href="classllvm_1_1APInt.html#ad1b0513de876d1c85cf6268ca21b2c86">isPowerOf2</a>()) {</div>
<div class="line"><a name="l05777"></a><span class="lineno"> 5777</span>&#160;          <span class="comment">// iff (C1 is pow2) &amp; ((C2 &amp; ~(C1-1)) + C1) is pow2):</span></div>
<div class="line"><a name="l05778"></a><span class="lineno"> 5778</span>&#160;          <span class="comment">// ((C1 &lt;&lt; X) &amp; C2) == 0 -&gt; X &gt;= (Log2(C2+C1) - Log2(C1))</span></div>
<div class="line"><a name="l05779"></a><span class="lineno"> 5779</span>&#160;          <span class="comment">// ((C1 &lt;&lt; X) &amp; C2) != 0 -&gt; X  &lt; (Log2(C2+C1) - Log2(C1))</span></div>
<div class="line"><a name="l05780"></a><span class="lineno"> 5780</span>&#160;          <span class="keywordtype">unsigned</span> Log2C2 = C2Pow2.<a class="code" href="classllvm_1_1APInt.html#a9a99431f0828d0222c617eb876bc5d34">countTrailingZeros</a>();</div>
<div class="line"><a name="l05781"></a><span class="lineno"> 5781</span>&#160;          <span class="keyword">auto</span> *CmpC = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(XTy, Log2C2 - Log2C1);</div>
<div class="line"><a name="l05782"></a><span class="lineno"> 5782</span>&#160;          <span class="keyword">auto</span> NewPred =</div>
<div class="line"><a name="l05783"></a><span class="lineno"> 5783</span>&#160;              Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">CmpInst::ICMP_EQ</a> ? <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba573bcd571c938fce863525330bbfc4b8">CmpInst::ICMP_UGE</a> : <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e">CmpInst::ICMP_ULT</a>;</div>
<div class="line"><a name="l05784"></a><span class="lineno"> 5784</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(NewPred, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, CmpC);</div>
<div class="line"><a name="l05785"></a><span class="lineno"> 5785</span>&#160;        }</div>
<div class="line"><a name="l05786"></a><span class="lineno"> 5786</span>&#160;      }</div>
<div class="line"><a name="l05787"></a><span class="lineno"> 5787</span>&#160;    }</div>
<div class="line"><a name="l05788"></a><span class="lineno"> 5788</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05789"></a><span class="lineno"> 5789</span>&#160;  }</div>
<div class="line"><a name="l05790"></a><span class="lineno"> 5790</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e">ICmpInst::ICMP_ULT</a>: {</div>
<div class="line"><a name="l05791"></a><span class="lineno"> 5791</span>&#160;    <span class="keywordflow">if</span> (Op0Max.<a class="code" href="classllvm_1_1APInt.html#a545e8d5dfa1688acea0d0e275b03682f">ult</a>(Op1Min)) <span class="comment">// A &lt;u B -&gt; true if max(A) &lt; min(B)</span></div>
<div class="line"><a name="l05792"></a><span class="lineno"> 5792</span>&#160;      <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1ConstantInt.html#a82dbbd8e3688b0bc1eedb338864d0d0c">ConstantInt::getTrue</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getType()));</div>
<div class="line"><a name="l05793"></a><span class="lineno"> 5793</span>&#160;    <span class="keywordflow">if</span> (Op0Min.uge(Op1Max)) <span class="comment">// A &lt;u B -&gt; false if min(A) &gt;= max(B)</span></div>
<div class="line"><a name="l05794"></a><span class="lineno"> 5794</span>&#160;      <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1ConstantInt.html#aa7cce62ac5cc6df09cce0535874336b7">ConstantInt::getFalse</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getType()));</div>
<div class="line"><a name="l05795"></a><span class="lineno"> 5795</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05796"></a><span class="lineno"> 5796</span>&#160;  }</div>
<div class="line"><a name="l05797"></a><span class="lineno"> 5797</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba607cecdc5172814382033e001ed11fad">ICmpInst::ICMP_UGT</a>: {</div>
<div class="line"><a name="l05798"></a><span class="lineno"> 5798</span>&#160;    <span class="keywordflow">if</span> (Op0Min.ugt(Op1Max)) <span class="comment">// A &gt;u B -&gt; true if min(A) &gt; max(B)</span></div>
<div class="line"><a name="l05799"></a><span class="lineno"> 5799</span>&#160;      <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1ConstantInt.html#a82dbbd8e3688b0bc1eedb338864d0d0c">ConstantInt::getTrue</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getType()));</div>
<div class="line"><a name="l05800"></a><span class="lineno"> 5800</span>&#160;    <span class="keywordflow">if</span> (Op0Max.<a class="code" href="classllvm_1_1APInt.html#aca14d9ec64ba4ab7fb2cef37c57d9ce4">ule</a>(Op1Min)) <span class="comment">// A &gt;u B -&gt; false if max(A) &lt;= max(B)</span></div>
<div class="line"><a name="l05801"></a><span class="lineno"> 5801</span>&#160;      <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1ConstantInt.html#aa7cce62ac5cc6df09cce0535874336b7">ConstantInt::getFalse</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getType()));</div>
<div class="line"><a name="l05802"></a><span class="lineno"> 5802</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05803"></a><span class="lineno"> 5803</span>&#160;  }</div>
<div class="line"><a name="l05804"></a><span class="lineno"> 5804</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba15ae464950ac676919c2f0c7aafc706c">ICmpInst::ICMP_SLT</a>: {</div>
<div class="line"><a name="l05805"></a><span class="lineno"> 5805</span>&#160;    <span class="keywordflow">if</span> (Op0Max.<a class="code" href="classllvm_1_1APInt.html#adafa9575780f9246d1df0b7e2a619356">slt</a>(Op1Min)) <span class="comment">// A &lt;s B -&gt; true if max(A) &lt; min(C)</span></div>
<div class="line"><a name="l05806"></a><span class="lineno"> 5806</span>&#160;      <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1ConstantInt.html#a82dbbd8e3688b0bc1eedb338864d0d0c">ConstantInt::getTrue</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getType()));</div>
<div class="line"><a name="l05807"></a><span class="lineno"> 5807</span>&#160;    <span class="keywordflow">if</span> (Op0Min.sge(Op1Max)) <span class="comment">// A &lt;s B -&gt; false if min(A) &gt;= max(C)</span></div>
<div class="line"><a name="l05808"></a><span class="lineno"> 5808</span>&#160;      <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1ConstantInt.html#aa7cce62ac5cc6df09cce0535874336b7">ConstantInt::getFalse</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getType()));</div>
<div class="line"><a name="l05809"></a><span class="lineno"> 5809</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05810"></a><span class="lineno"> 5810</span>&#160;  }</div>
<div class="line"><a name="l05811"></a><span class="lineno"> 5811</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba720a42e85f7e981afd61e28473b0000a">ICmpInst::ICMP_SGT</a>: {</div>
<div class="line"><a name="l05812"></a><span class="lineno"> 5812</span>&#160;    <span class="keywordflow">if</span> (Op0Min.sgt(Op1Max)) <span class="comment">// A &gt;s B -&gt; true if min(A) &gt; max(B)</span></div>
<div class="line"><a name="l05813"></a><span class="lineno"> 5813</span>&#160;      <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1ConstantInt.html#a82dbbd8e3688b0bc1eedb338864d0d0c">ConstantInt::getTrue</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getType()));</div>
<div class="line"><a name="l05814"></a><span class="lineno"> 5814</span>&#160;    <span class="keywordflow">if</span> (Op0Max.<a class="code" href="classllvm_1_1APInt.html#a7e8226e6453c8bcf7e5c06d28b1e207b">sle</a>(Op1Min)) <span class="comment">// A &gt;s B -&gt; false if max(A) &lt;= min(B)</span></div>
<div class="line"><a name="l05815"></a><span class="lineno"> 5815</span>&#160;      <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1ConstantInt.html#aa7cce62ac5cc6df09cce0535874336b7">ConstantInt::getFalse</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getType()));</div>
<div class="line"><a name="l05816"></a><span class="lineno"> 5816</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05817"></a><span class="lineno"> 5817</span>&#160;  }</div>
<div class="line"><a name="l05818"></a><span class="lineno"> 5818</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac1aa7b798ba11d2e497d5cce6ce6d3dc">ICmpInst::ICMP_SGE</a>:</div>
<div class="line"><a name="l05819"></a><span class="lineno"> 5819</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!isa&lt;ConstantInt&gt;(Op1) &amp;&amp; <span class="stringliteral">&quot;ICMP_SGE with ConstantInt not folded!&quot;</span>);</div>
<div class="line"><a name="l05820"></a><span class="lineno"> 5820</span>&#160;    <span class="keywordflow">if</span> (Op0Min.sge(Op1Max)) <span class="comment">// A &gt;=s B -&gt; true if min(A) &gt;= max(B)</span></div>
<div class="line"><a name="l05821"></a><span class="lineno"> 5821</span>&#160;      <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1ConstantInt.html#a82dbbd8e3688b0bc1eedb338864d0d0c">ConstantInt::getTrue</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getType()));</div>
<div class="line"><a name="l05822"></a><span class="lineno"> 5822</span>&#160;    <span class="keywordflow">if</span> (Op0Max.<a class="code" href="classllvm_1_1APInt.html#adafa9575780f9246d1df0b7e2a619356">slt</a>(Op1Min)) <span class="comment">// A &gt;=s B -&gt; false if max(A) &lt; min(B)</span></div>
<div class="line"><a name="l05823"></a><span class="lineno"> 5823</span>&#160;      <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1ConstantInt.html#aa7cce62ac5cc6df09cce0535874336b7">ConstantInt::getFalse</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getType()));</div>
<div class="line"><a name="l05824"></a><span class="lineno"> 5824</span>&#160;    <span class="keywordflow">if</span> (Op1Min == Op0Max) <span class="comment">// A &gt;=s B -&gt; A == B if max(A) == min(B)</span></div>
<div class="line"><a name="l05825"></a><span class="lineno"> 5825</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a>, Op0, Op1);</div>
<div class="line"><a name="l05826"></a><span class="lineno"> 5826</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05827"></a><span class="lineno"> 5827</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba2751d6136a2819749dcef65dc19a4246">ICmpInst::ICMP_SLE</a>:</div>
<div class="line"><a name="l05828"></a><span class="lineno"> 5828</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!isa&lt;ConstantInt&gt;(Op1) &amp;&amp; <span class="stringliteral">&quot;ICMP_SLE with ConstantInt not folded!&quot;</span>);</div>
<div class="line"><a name="l05829"></a><span class="lineno"> 5829</span>&#160;    <span class="keywordflow">if</span> (Op0Max.<a class="code" href="classllvm_1_1APInt.html#a7e8226e6453c8bcf7e5c06d28b1e207b">sle</a>(Op1Min)) <span class="comment">// A &lt;=s B -&gt; true if max(A) &lt;= min(B)</span></div>
<div class="line"><a name="l05830"></a><span class="lineno"> 5830</span>&#160;      <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1ConstantInt.html#a82dbbd8e3688b0bc1eedb338864d0d0c">ConstantInt::getTrue</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getType()));</div>
<div class="line"><a name="l05831"></a><span class="lineno"> 5831</span>&#160;    <span class="keywordflow">if</span> (Op0Min.sgt(Op1Max)) <span class="comment">// A &lt;=s B -&gt; false if min(A) &gt; max(B)</span></div>
<div class="line"><a name="l05832"></a><span class="lineno"> 5832</span>&#160;      <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1ConstantInt.html#aa7cce62ac5cc6df09cce0535874336b7">ConstantInt::getFalse</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getType()));</div>
<div class="line"><a name="l05833"></a><span class="lineno"> 5833</span>&#160;    <span class="keywordflow">if</span> (Op1Max == Op0Min) <span class="comment">// A &lt;=s B -&gt; A == B if min(A) == max(B)</span></div>
<div class="line"><a name="l05834"></a><span class="lineno"> 5834</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a>, Op0, Op1);</div>
<div class="line"><a name="l05835"></a><span class="lineno"> 5835</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05836"></a><span class="lineno"> 5836</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba573bcd571c938fce863525330bbfc4b8">ICmpInst::ICMP_UGE</a>:</div>
<div class="line"><a name="l05837"></a><span class="lineno"> 5837</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!isa&lt;ConstantInt&gt;(Op1) &amp;&amp; <span class="stringliteral">&quot;ICMP_UGE with ConstantInt not folded!&quot;</span>);</div>
<div class="line"><a name="l05838"></a><span class="lineno"> 5838</span>&#160;    <span class="keywordflow">if</span> (Op0Min.uge(Op1Max)) <span class="comment">// A &gt;=u B -&gt; true if min(A) &gt;= max(B)</span></div>
<div class="line"><a name="l05839"></a><span class="lineno"> 5839</span>&#160;      <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1ConstantInt.html#a82dbbd8e3688b0bc1eedb338864d0d0c">ConstantInt::getTrue</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getType()));</div>
<div class="line"><a name="l05840"></a><span class="lineno"> 5840</span>&#160;    <span class="keywordflow">if</span> (Op0Max.<a class="code" href="classllvm_1_1APInt.html#a545e8d5dfa1688acea0d0e275b03682f">ult</a>(Op1Min)) <span class="comment">// A &gt;=u B -&gt; false if max(A) &lt; min(B)</span></div>
<div class="line"><a name="l05841"></a><span class="lineno"> 5841</span>&#160;      <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1ConstantInt.html#aa7cce62ac5cc6df09cce0535874336b7">ConstantInt::getFalse</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getType()));</div>
<div class="line"><a name="l05842"></a><span class="lineno"> 5842</span>&#160;    <span class="keywordflow">if</span> (Op1Min == Op0Max) <span class="comment">// A &gt;=u B -&gt; A == B if max(A) == min(B)</span></div>
<div class="line"><a name="l05843"></a><span class="lineno"> 5843</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a>, Op0, Op1);</div>
<div class="line"><a name="l05844"></a><span class="lineno"> 5844</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05845"></a><span class="lineno"> 5845</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bad92f160316221fd4090520bb2b3cefc5">ICmpInst::ICMP_ULE</a>:</div>
<div class="line"><a name="l05846"></a><span class="lineno"> 5846</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!isa&lt;ConstantInt&gt;(Op1) &amp;&amp; <span class="stringliteral">&quot;ICMP_ULE with ConstantInt not folded!&quot;</span>);</div>
<div class="line"><a name="l05847"></a><span class="lineno"> 5847</span>&#160;    <span class="keywordflow">if</span> (Op0Max.<a class="code" href="classllvm_1_1APInt.html#aca14d9ec64ba4ab7fb2cef37c57d9ce4">ule</a>(Op1Min)) <span class="comment">// A &lt;=u B -&gt; true if max(A) &lt;= min(B)</span></div>
<div class="line"><a name="l05848"></a><span class="lineno"> 5848</span>&#160;      <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1ConstantInt.html#a82dbbd8e3688b0bc1eedb338864d0d0c">ConstantInt::getTrue</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getType()));</div>
<div class="line"><a name="l05849"></a><span class="lineno"> 5849</span>&#160;    <span class="keywordflow">if</span> (Op0Min.ugt(Op1Max)) <span class="comment">// A &lt;=u B -&gt; false if min(A) &gt; max(B)</span></div>
<div class="line"><a name="l05850"></a><span class="lineno"> 5850</span>&#160;      <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1ConstantInt.html#aa7cce62ac5cc6df09cce0535874336b7">ConstantInt::getFalse</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getType()));</div>
<div class="line"><a name="l05851"></a><span class="lineno"> 5851</span>&#160;    <span class="keywordflow">if</span> (Op1Max == Op0Min) <span class="comment">// A &lt;=u B -&gt; A == B if min(A) == max(B)</span></div>
<div class="line"><a name="l05852"></a><span class="lineno"> 5852</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a>, Op0, Op1);</div>
<div class="line"><a name="l05853"></a><span class="lineno"> 5853</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05854"></a><span class="lineno"> 5854</span>&#160;  }</div>
<div class="line"><a name="l05855"></a><span class="lineno"> 5855</span>&#160; </div>
<div class="line"><a name="l05856"></a><span class="lineno"> 5856</span>&#160;  <span class="comment">// Turn a signed comparison into an unsigned one if both operands are known to</span></div>
<div class="line"><a name="l05857"></a><span class="lineno"> 5857</span>&#160;  <span class="comment">// have the same sign.</span></div>
<div class="line"><a name="l05858"></a><span class="lineno"> 5858</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.isSigned() &amp;&amp;</div>
<div class="line"><a name="l05859"></a><span class="lineno"> 5859</span>&#160;      ((Op0Known.<a class="code" href="structllvm_1_1KnownBits.html#ac67bca6c764da76f5e152330d92ed916">Zero</a>.<a class="code" href="classllvm_1_1APInt.html#a6804d9caf15411f55e7b9e9f397f0422">isNegative</a>() &amp;&amp; Op1Known.<a class="code" href="structllvm_1_1KnownBits.html#ac67bca6c764da76f5e152330d92ed916">Zero</a>.<a class="code" href="classllvm_1_1APInt.html#a6804d9caf15411f55e7b9e9f397f0422">isNegative</a>()) ||</div>
<div class="line"><a name="l05860"></a><span class="lineno"> 5860</span>&#160;       (Op0Known.<a class="code" href="structllvm_1_1KnownBits.html#aba205f553f24c184ea47fc1a6cb56537">One</a>.<a class="code" href="classllvm_1_1APInt.html#a6804d9caf15411f55e7b9e9f397f0422">isNegative</a>() &amp;&amp; Op1Known.<a class="code" href="structllvm_1_1KnownBits.html#aba205f553f24c184ea47fc1a6cb56537">One</a>.<a class="code" href="classllvm_1_1APInt.html#a6804d9caf15411f55e7b9e9f397f0422">isNegative</a>())))</div>
<div class="line"><a name="l05861"></a><span class="lineno"> 5861</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getUnsignedPredicate(), Op0, Op1);</div>
<div class="line"><a name="l05862"></a><span class="lineno"> 5862</span>&#160; </div>
<div class="line"><a name="l05863"></a><span class="lineno"> 5863</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l05864"></a><span class="lineno"> 5864</span>&#160;}</div>
<div class="line"><a name="l05865"></a><span class="lineno"> 5865</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l05866"></a><span class="lineno"> 5866</span>&#160;<span class="comment">/// If one operand of an icmp is effectively a bool (value range of {0,1}),</span></div>
<div class="line"><a name="l05867"></a><span class="lineno"> 5867</span>&#160;<span class="comment">/// then try to reduce patterns based on that limit.</span></div>
<div class="line"><a name="l05868"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombinerImpl.html#a7c9fd9f2dba79c2289639f72457fcea1"> 5868</a></span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombinerImpl.html#a7c9fd9f2dba79c2289639f72457fcea1">InstCombinerImpl::foldICmpUsingBoolRange</a>(<a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l05869"></a><span class="lineno"> 5869</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, *<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>;</div>
<div class="line"><a name="l05870"></a><span class="lineno"> 5870</span>&#160;  <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">ICmpInst::Predicate</a> Pred;</div>
<div class="line"><a name="l05871"></a><span class="lineno"> 5871</span>&#160; </div>
<div class="line"><a name="l05872"></a><span class="lineno"> 5872</span>&#160;  <span class="comment">// X must be 0 and bool must be true for &quot;ULT&quot;:</span></div>
<div class="line"><a name="l05873"></a><span class="lineno"> 5873</span>&#160;  <span class="comment">// X &lt;u (zext i1 Y) --&gt; (X == 0) &amp; Y</span></div>
<div class="line"><a name="l05874"></a><span class="lineno"> 5874</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a3de757fc0f1dc7f8f8e9211b32ac106d">m_c_ICmp</a>(Pred, <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2cbdca7c8267aac6914d674f8e81841b">m_ZExt</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>))))) &amp;&amp;</div>
<div class="line"><a name="l05875"></a><span class="lineno"> 5875</span>&#160;      <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>-&gt;getType()-&gt;isIntOrIntVectorTy(1) &amp;&amp; Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e">ICmpInst::ICMP_ULT</a>)</div>
<div class="line"><a name="l05876"></a><span class="lineno"> 5876</span>&#160;    <span class="keywordflow">return</span> BinaryOperator::CreateAnd(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateIsNull(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>);</div>
<div class="line"><a name="l05877"></a><span class="lineno"> 5877</span>&#160; </div>
<div class="line"><a name="l05878"></a><span class="lineno"> 5878</span>&#160;  <span class="comment">// X must be 0 or bool must be true for &quot;ULE&quot;:</span></div>
<div class="line"><a name="l05879"></a><span class="lineno"> 5879</span>&#160;  <span class="comment">// X &lt;=u (sext i1 Y) --&gt; (X == 0) | Y</span></div>
<div class="line"><a name="l05880"></a><span class="lineno"> 5880</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a3de757fc0f1dc7f8f8e9211b32ac106d">m_c_ICmp</a>(Pred, <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#aaab494a433fbb23bc68393ee8bcfc5ac">m_SExt</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>))))) &amp;&amp;</div>
<div class="line"><a name="l05881"></a><span class="lineno"> 5881</span>&#160;      <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>-&gt;getType()-&gt;isIntOrIntVectorTy(1) &amp;&amp; Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bad92f160316221fd4090520bb2b3cefc5">ICmpInst::ICMP_ULE</a>)</div>
<div class="line"><a name="l05882"></a><span class="lineno"> 5882</span>&#160;    <span class="keywordflow">return</span> BinaryOperator::CreateOr(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateIsNull(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>);</div>
<div class="line"><a name="l05883"></a><span class="lineno"> 5883</span>&#160; </div>
<div class="line"><a name="l05884"></a><span class="lineno"> 5884</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>;</div>
<div class="line"><a name="l05885"></a><span class="lineno"> 5885</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(0),</div>
<div class="line"><a name="l05886"></a><span class="lineno"> 5886</span>&#160;            <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#ad191220adaaedcfba833985509a17452">m_c_Add</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2cbdca7c8267aac6914d674f8e81841b">m_ZExt</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>)), <a class="code" href="namespacellvm_1_1PatternMatch.html#aaab494a433fbb23bc68393ee8bcfc5ac">m_SExt</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>))))) &amp;&amp;</div>
<div class="line"><a name="l05887"></a><span class="lineno"> 5887</span>&#160;      <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(1), <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)) &amp;&amp;</div>
<div class="line"><a name="l05888"></a><span class="lineno"> 5888</span>&#160;      <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getType()-&gt;isIntOrIntVectorTy(1) &amp;&amp;</div>
<div class="line"><a name="l05889"></a><span class="lineno"> 5889</span>&#160;      <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>-&gt;getType()-&gt;isIntOrIntVectorTy(1)) {</div>
<div class="line"><a name="l05890"></a><span class="lineno"> 5890</span>&#160;    <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm.html#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a> = <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;getBitWidth();</div>
<div class="line"><a name="l05891"></a><span class="lineno"> 5891</span>&#160;    Pred = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getPredicate();</div>
<div class="line"><a name="l05892"></a><span class="lineno"> 5892</span>&#160;    <a class="code" href="classllvm_1_1APInt.html">APInt</a> Zero = <a class="code" href="classllvm_1_1APInt.html#add4e37b60ea64faafbc9a5bf3e27280f">APInt::getZero</a>(<a class="code" href="namespacellvm.html#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a>);</div>
<div class="line"><a name="l05893"></a><span class="lineno"> 5893</span>&#160;    <a class="code" href="classllvm_1_1APInt.html">APInt</a> MinusOne = <a class="code" href="classllvm_1_1APInt.html#a071e8d814b2b30b02544fad964227b8e">APInt::getAllOnes</a>(<a class="code" href="namespacellvm.html#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a>);</div>
<div class="line"><a name="l05894"></a><span class="lineno"> 5894</span>&#160;    <a class="code" href="classllvm_1_1APInt.html">APInt</a> One(<a class="code" href="namespacellvm.html#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a>, 1);</div>
<div class="line"><a name="l05895"></a><span class="lineno"> 5895</span>&#160;    <span class="keywordflow">if</span> ((<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;sgt(Zero) &amp;&amp; Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba720a42e85f7e981afd61e28473b0000a">ICmpInst::ICMP_SGT</a>) ||</div>
<div class="line"><a name="l05896"></a><span class="lineno"> 5896</span>&#160;        (<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;slt(Zero) &amp;&amp; Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba15ae464950ac676919c2f0c7aafc706c">ICmpInst::ICMP_SLT</a>))</div>
<div class="line"><a name="l05897"></a><span class="lineno"> 5897</span>&#160;      <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1ConstantInt.html#aa7cce62ac5cc6df09cce0535874336b7">ConstantInt::getFalse</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getType()));</div>
<div class="line"><a name="l05898"></a><span class="lineno"> 5898</span>&#160;    <span class="keywordflow">if</span> ((<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;sgt(One) &amp;&amp; Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba15ae464950ac676919c2f0c7aafc706c">ICmpInst::ICMP_SLT</a>) ||</div>
<div class="line"><a name="l05899"></a><span class="lineno"> 5899</span>&#160;        (<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;slt(MinusOne) &amp;&amp; Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba720a42e85f7e981afd61e28473b0000a">ICmpInst::ICMP_SGT</a>))</div>
<div class="line"><a name="l05900"></a><span class="lineno"> 5900</span>&#160;      <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1ConstantInt.html#a82dbbd8e3688b0bc1eedb338864d0d0c">ConstantInt::getTrue</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getType()));</div>
<div class="line"><a name="l05901"></a><span class="lineno"> 5901</span>&#160; </div>
<div class="line"><a name="l05902"></a><span class="lineno"> 5902</span>&#160;    <a class="code" href="classllvm_1_1APInt.html">APInt</a> NewC = *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>;</div>
<div class="line"><a name="l05903"></a><span class="lineno"> 5903</span>&#160;    <span class="comment">// canonicalize predicate to eq/ne</span></div>
<div class="line"><a name="l05904"></a><span class="lineno"> 5904</span>&#160;    <span class="keywordflow">if</span> ((*<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> == Zero &amp;&amp; Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba15ae464950ac676919c2f0c7aafc706c">ICmpInst::ICMP_SLT</a>) ||</div>
<div class="line"><a name="l05905"></a><span class="lineno"> 5905</span>&#160;        (*<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> != Zero &amp;&amp; *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> != MinusOne &amp;&amp; Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba607cecdc5172814382033e001ed11fad">ICmpInst::ICMP_UGT</a>)) {</div>
<div class="line"><a name="l05906"></a><span class="lineno"> 5906</span>&#160;      <span class="comment">// x s&lt; 0 in [-1, 1] --&gt; x == -1</span></div>
<div class="line"><a name="l05907"></a><span class="lineno"> 5907</span>&#160;      <span class="comment">// x u&gt; 1(or any const !=0 !=-1) in [-1, 1] --&gt; x == -1</span></div>
<div class="line"><a name="l05908"></a><span class="lineno"> 5908</span>&#160;      NewC = MinusOne;</div>
<div class="line"><a name="l05909"></a><span class="lineno"> 5909</span>&#160;      Pred = <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a>;</div>
<div class="line"><a name="l05910"></a><span class="lineno"> 5910</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((*<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> == MinusOne &amp;&amp; Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba720a42e85f7e981afd61e28473b0000a">ICmpInst::ICMP_SGT</a>) ||</div>
<div class="line"><a name="l05911"></a><span class="lineno"> 5911</span>&#160;               (*<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> != Zero &amp;&amp; *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> != One &amp;&amp; Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e">ICmpInst::ICMP_ULT</a>)) {</div>
<div class="line"><a name="l05912"></a><span class="lineno"> 5912</span>&#160;      <span class="comment">// x s&gt; -1 in [-1, 1] --&gt; x != -1</span></div>
<div class="line"><a name="l05913"></a><span class="lineno"> 5913</span>&#160;      <span class="comment">// x u&lt; -1 in [-1, 1] --&gt; x != -1</span></div>
<div class="line"><a name="l05914"></a><span class="lineno"> 5914</span>&#160;      Pred = <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a>;</div>
<div class="line"><a name="l05915"></a><span class="lineno"> 5915</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (*<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> == Zero &amp;&amp; Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba720a42e85f7e981afd61e28473b0000a">ICmpInst::ICMP_SGT</a>) {</div>
<div class="line"><a name="l05916"></a><span class="lineno"> 5916</span>&#160;      <span class="comment">// x s&gt; 0 in [-1, 1] --&gt; x == 1</span></div>
<div class="line"><a name="l05917"></a><span class="lineno"> 5917</span>&#160;      NewC = One;</div>
<div class="line"><a name="l05918"></a><span class="lineno"> 5918</span>&#160;      Pred = <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a>;</div>
<div class="line"><a name="l05919"></a><span class="lineno"> 5919</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (*<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> == One &amp;&amp; Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba15ae464950ac676919c2f0c7aafc706c">ICmpInst::ICMP_SLT</a>) {</div>
<div class="line"><a name="l05920"></a><span class="lineno"> 5920</span>&#160;      <span class="comment">// x s&lt; 1 in [-1, 1] --&gt; x != 1</span></div>
<div class="line"><a name="l05921"></a><span class="lineno"> 5921</span>&#160;      Pred = <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a>;</div>
<div class="line"><a name="l05922"></a><span class="lineno"> 5922</span>&#160;    }</div>
<div class="line"><a name="l05923"></a><span class="lineno"> 5923</span>&#160; </div>
<div class="line"><a name="l05924"></a><span class="lineno"> 5924</span>&#160;    <span class="keywordflow">if</span> (NewC == MinusOne) {</div>
<div class="line"><a name="l05925"></a><span class="lineno"> 5925</span>&#160;      <span class="keywordflow">if</span> (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a>)</div>
<div class="line"><a name="l05926"></a><span class="lineno"> 5926</span>&#160;        <span class="keywordflow">return</span> BinaryOperator::CreateAnd(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateNot(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>);</div>
<div class="line"><a name="l05927"></a><span class="lineno"> 5927</span>&#160;      <span class="keywordflow">if</span> (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a>)</div>
<div class="line"><a name="l05928"></a><span class="lineno"> 5928</span>&#160;        <span class="keywordflow">return</span> BinaryOperator::CreateOr(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateNot(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>));</div>
<div class="line"><a name="l05929"></a><span class="lineno"> 5929</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (NewC == One) {</div>
<div class="line"><a name="l05930"></a><span class="lineno"> 5930</span>&#160;      <span class="keywordflow">if</span> (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a>)</div>
<div class="line"><a name="l05931"></a><span class="lineno"> 5931</span>&#160;        <span class="keywordflow">return</span> BinaryOperator::CreateAnd(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateNot(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>));</div>
<div class="line"><a name="l05932"></a><span class="lineno"> 5932</span>&#160;      <span class="keywordflow">if</span> (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a>)</div>
<div class="line"><a name="l05933"></a><span class="lineno"> 5933</span>&#160;        <span class="keywordflow">return</span> BinaryOperator::CreateOr(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateNot(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>);</div>
<div class="line"><a name="l05934"></a><span class="lineno"> 5934</span>&#160;    }</div>
<div class="line"><a name="l05935"></a><span class="lineno"> 5935</span>&#160;  }</div>
<div class="line"><a name="l05936"></a><span class="lineno"> 5936</span>&#160; </div>
<div class="line"><a name="l05937"></a><span class="lineno"> 5937</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l05938"></a><span class="lineno"> 5938</span>&#160;}</div>
<div class="line"><a name="l05939"></a><span class="lineno"> 5939</span>&#160; </div>
<div class="line"><a name="l05940"></a><span class="lineno"> 5940</span>&#160;std::optional&lt;std::pair&lt;CmpInst::Predicate, Constant *&gt;&gt;</div>
<div class="line"><a name="l05941"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombiner.html#a63d5f62f004af8e0903574463abc6a81"> 5941</a></span>&#160;<a class="code" href="classllvm_1_1InstCombiner.html#a63d5f62f004af8e0903574463abc6a81">InstCombiner::getFlippedStrictnessPredicateAndConstant</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">CmpInst::Predicate</a> Pred,</div>
<div class="line"><a name="l05942"></a><span class="lineno"> 5942</span>&#160;                                                       <a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>) {</div>
<div class="line"><a name="l05943"></a><span class="lineno"> 5943</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="classllvm_1_1ICmpInst.html#ae955171baab3d9254f3ffb089c082206">ICmpInst::isRelational</a>(Pred) &amp;&amp; <a class="code" href="classllvm_1_1CmpInst.html#ad73f009e1b3b060bcdf6c2c1dd86600e">ICmpInst::isIntPredicate</a>(Pred) &amp;&amp;</div>
<div class="line"><a name="l05944"></a><span class="lineno"> 5944</span>&#160;         <span class="stringliteral">&quot;Only for relational integer predicates.&quot;</span>);</div>
<div class="line"><a name="l05945"></a><span class="lineno"> 5945</span>&#160; </div>
<div class="line"><a name="l05946"></a><span class="lineno"> 5946</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *<a class="code" href="classllvm_1_1Type.html">Type</a> = <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;getType();</div>
<div class="line"><a name="l05947"></a><span class="lineno"> 5947</span>&#160;  <span class="keywordtype">bool</span> IsSigned = <a class="code" href="classllvm_1_1CmpInst.html#a3712279d70deeec90a93db09deb12d02">ICmpInst::isSigned</a>(Pred);</div>
<div class="line"><a name="l05948"></a><span class="lineno"> 5948</span>&#160; </div>
<div class="line"><a name="l05949"></a><span class="lineno"> 5949</span>&#160;  <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">CmpInst::Predicate</a> UnsignedPred = <a class="code" href="classllvm_1_1ICmpInst.html#af07a09f1cda33d984cc725dc9e856d40">ICmpInst::getUnsignedPredicate</a>(Pred);</div>
<div class="line"><a name="l05950"></a><span class="lineno"> 5950</span>&#160;  <span class="keywordtype">bool</span> WillIncrement =</div>
<div class="line"><a name="l05951"></a><span class="lineno"> 5951</span>&#160;      UnsignedPred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bad92f160316221fd4090520bb2b3cefc5">ICmpInst::ICMP_ULE</a> || UnsignedPred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba607cecdc5172814382033e001ed11fad">ICmpInst::ICMP_UGT</a>;</div>
<div class="line"><a name="l05952"></a><span class="lineno"> 5952</span>&#160; </div>
<div class="line"><a name="l05953"></a><span class="lineno"> 5953</span>&#160;  <span class="comment">// Check if the constant operand can be safely incremented/decremented</span></div>
<div class="line"><a name="l05954"></a><span class="lineno"> 5954</span>&#160;  <span class="comment">// without overflowing/underflowing.</span></div>
<div class="line"><a name="l05955"></a><span class="lineno"> 5955</span>&#160;  <span class="keyword">auto</span> ConstantIsOk = [WillIncrement, IsSigned](<a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>) {</div>
<div class="line"><a name="l05956"></a><span class="lineno"> 5956</span>&#160;    <span class="keywordflow">return</span> WillIncrement ? !<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;isMaxValue(IsSigned) : !<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;isMinValue(IsSigned);</div>
<div class="line"><a name="l05957"></a><span class="lineno"> 5957</span>&#160;  };</div>
<div class="line"><a name="l05958"></a><span class="lineno"> 5958</span>&#160; </div>
<div class="line"><a name="l05959"></a><span class="lineno"> 5959</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *SafeReplacementConstant = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l05960"></a><span class="lineno"> 5960</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *CI = dyn_cast&lt;ConstantInt&gt;(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)) {</div>
<div class="line"><a name="l05961"></a><span class="lineno"> 5961</span>&#160;    <span class="comment">// Bail out if the constant can&#39;t be safely incremented/decremented.</span></div>
<div class="line"><a name="l05962"></a><span class="lineno"> 5962</span>&#160;    <span class="keywordflow">if</span> (!ConstantIsOk(CI))</div>
<div class="line"><a name="l05963"></a><span class="lineno"> 5963</span>&#160;      <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l05964"></a><span class="lineno"> 5964</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">auto</span> *FVTy = dyn_cast&lt;FixedVectorType&gt;(<a class="code" href="classllvm_1_1Type.html">Type</a>)) {</div>
<div class="line"><a name="l05965"></a><span class="lineno"> 5965</span>&#160;    <span class="keywordtype">unsigned</span> NumElts = FVTy-&gt;getNumElements();</div>
<div class="line"><a name="l05966"></a><span class="lineno"> 5966</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != NumElts; ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l05967"></a><span class="lineno"> 5967</span>&#160;      <a class="code" href="classllvm_1_1Constant.html">Constant</a> *Elt = <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;<a class="code" href="classllvm_1_1Constant.html#acd530d0571f320d47d37e7ae51cf70ff">getAggregateElement</a>(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div>
<div class="line"><a name="l05968"></a><span class="lineno"> 5968</span>&#160;      <span class="keywordflow">if</span> (!Elt)</div>
<div class="line"><a name="l05969"></a><span class="lineno"> 5969</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l05970"></a><span class="lineno"> 5970</span>&#160; </div>
<div class="line"><a name="l05971"></a><span class="lineno"> 5971</span>&#160;      <span class="keywordflow">if</span> (isa&lt;UndefValue&gt;(Elt))</div>
<div class="line"><a name="l05972"></a><span class="lineno"> 5972</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l05973"></a><span class="lineno"> 5973</span>&#160; </div>
<div class="line"><a name="l05974"></a><span class="lineno"> 5974</span>&#160;      <span class="comment">// Bail out if we can&#39;t determine if this constant is min/max or if we</span></div>
<div class="line"><a name="l05975"></a><span class="lineno"> 5975</span>&#160;      <span class="comment">// know that this constant is min/max.</span></div>
<div class="line"><a name="l05976"></a><span class="lineno"> 5976</span>&#160;      <span class="keyword">auto</span> *CI = dyn_cast&lt;ConstantInt&gt;(Elt);</div>
<div class="line"><a name="l05977"></a><span class="lineno"> 5977</span>&#160;      <span class="keywordflow">if</span> (!CI || !ConstantIsOk(CI))</div>
<div class="line"><a name="l05978"></a><span class="lineno"> 5978</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l05979"></a><span class="lineno"> 5979</span>&#160; </div>
<div class="line"><a name="l05980"></a><span class="lineno"> 5980</span>&#160;      <span class="keywordflow">if</span> (!SafeReplacementConstant)</div>
<div class="line"><a name="l05981"></a><span class="lineno"> 5981</span>&#160;        SafeReplacementConstant = CI;</div>
<div class="line"><a name="l05982"></a><span class="lineno"> 5982</span>&#160;    }</div>
<div class="line"><a name="l05983"></a><span class="lineno"> 5983</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l05984"></a><span class="lineno"> 5984</span>&#160;    <span class="comment">// ConstantExpr?</span></div>
<div class="line"><a name="l05985"></a><span class="lineno"> 5985</span>&#160;    <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l05986"></a><span class="lineno"> 5986</span>&#160;  }</div>
<div class="line"><a name="l05987"></a><span class="lineno"> 5987</span>&#160; </div>
<div class="line"><a name="l05988"></a><span class="lineno"> 5988</span>&#160;  <span class="comment">// It may not be safe to change a compare predicate in the presence of</span></div>
<div class="line"><a name="l05989"></a><span class="lineno"> 5989</span>&#160;  <span class="comment">// undefined elements, so replace those elements with the first safe constant</span></div>
<div class="line"><a name="l05990"></a><span class="lineno"> 5990</span>&#160;  <span class="comment">// that we found.</span></div>
<div class="line"><a name="l05991"></a><span class="lineno"> 5991</span>&#160;  <span class="comment">// TODO: in case of poison, it is safe; let&#39;s replace undefs only.</span></div>
<div class="line"><a name="l05992"></a><span class="lineno"> 5992</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;containsUndefOrPoisonElement()) {</div>
<div class="line"><a name="l05993"></a><span class="lineno"> 5993</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(SafeReplacementConstant &amp;&amp; <span class="stringliteral">&quot;Replacement constant not set&quot;</span>);</div>
<div class="line"><a name="l05994"></a><span class="lineno"> 5994</span>&#160;    <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = <a class="code" href="classllvm_1_1Constant.html#a174c8fd19771468c53842a7fde8ddce1">Constant::replaceUndefsWith</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, SafeReplacementConstant);</div>
<div class="line"><a name="l05995"></a><span class="lineno"> 5995</span>&#160;  }</div>
<div class="line"><a name="l05996"></a><span class="lineno"> 5996</span>&#160; </div>
<div class="line"><a name="l05997"></a><span class="lineno"> 5997</span>&#160;  <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">CmpInst::Predicate</a> NewPred = <a class="code" href="classllvm_1_1CmpInst.html#aafc99bbdcf56632d353043ae3e2bca21">CmpInst::getFlippedStrictnessPredicate</a>(Pred);</div>
<div class="line"><a name="l05998"></a><span class="lineno"> 5998</span>&#160; </div>
<div class="line"><a name="l05999"></a><span class="lineno"> 5999</span>&#160;  <span class="comment">// Increment or decrement the constant.</span></div>
<div class="line"><a name="l06000"></a><span class="lineno"> 6000</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *OneOrNegOne = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(<a class="code" href="classllvm_1_1Type.html">Type</a>, WillIncrement ? 1 : -1, <span class="keyword">true</span>);</div>
<div class="line"><a name="l06001"></a><span class="lineno"> 6001</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *NewC = <a class="code" href="classllvm_1_1ConstantExpr.html#ae6f1c15034bc5515033874630a8ecce6">ConstantExpr::getAdd</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, OneOrNegOne);</div>
<div class="line"><a name="l06002"></a><span class="lineno"> 6002</span>&#160; </div>
<div class="line"><a name="l06003"></a><span class="lineno"> 6003</span>&#160;  <span class="keywordflow">return</span> std::make_pair(NewPred, NewC);</div>
<div class="line"><a name="l06004"></a><span class="lineno"> 6004</span>&#160;}</div>
<div class="line"><a name="l06005"></a><span class="lineno"> 6005</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l06006"></a><span class="lineno"> 6006</span>&#160;<span class="comment">/// If we have an icmp le or icmp ge instruction with a constant operand, turn</span></div>
<div class="line"><a name="l06007"></a><span class="lineno"> 6007</span>&#160;<span class="comment">/// it into the appropriate icmp lt or icmp gt instruction. This transform</span></div>
<div class="line"><a name="l06008"></a><span class="lineno"> 6008</span>&#160;<span class="comment">/// allows them to be folded in visitICmpInst.</span></div>
<div class="line"><a name="l06009"></a><span class="lineno"><a class="line" href="InstCombineCompares_8cpp.html#a16fb1ef0518c86c028c57381c4bd831a"> 6009</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> *<a class="code" href="InstCombineCompares_8cpp.html#a16fb1ef0518c86c028c57381c4bd831a">canonicalizeCmpWithConstant</a>(<a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l06010"></a><span class="lineno"> 6010</span>&#160;  <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">ICmpInst::Predicate</a> Pred = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getPredicate();</div>
<div class="line"><a name="l06011"></a><span class="lineno"> 6011</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ICmpInst.html#aaaeded5d0cab77f531b294638459aca5">ICmpInst::isEquality</a>(Pred) || !<a class="code" href="classllvm_1_1CmpInst.html#ad73f009e1b3b060bcdf6c2c1dd86600e">ICmpInst::isIntPredicate</a>(Pred) ||</div>
<div class="line"><a name="l06012"></a><span class="lineno"> 6012</span>&#160;      <a class="code" href="classllvm_1_1InstCombiner.html#a17baa08df1b509edb0429cb2676e1079">InstCombiner::isCanonicalPredicate</a>(Pred))</div>
<div class="line"><a name="l06013"></a><span class="lineno"> 6013</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l06014"></a><span class="lineno"> 6014</span>&#160; </div>
<div class="line"><a name="l06015"></a><span class="lineno"> 6015</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Op0 = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(0);</div>
<div class="line"><a name="l06016"></a><span class="lineno"> 6016</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Op1 = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(1);</div>
<div class="line"><a name="l06017"></a><span class="lineno"> 6017</span>&#160;  <span class="keyword">auto</span> *Op1C = dyn_cast&lt;Constant&gt;(Op1);</div>
<div class="line"><a name="l06018"></a><span class="lineno"> 6018</span>&#160;  <span class="keywordflow">if</span> (!Op1C)</div>
<div class="line"><a name="l06019"></a><span class="lineno"> 6019</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l06020"></a><span class="lineno"> 6020</span>&#160; </div>
<div class="line"><a name="l06021"></a><span class="lineno"> 6021</span>&#160;  <span class="keyword">auto</span> FlippedStrictness =</div>
<div class="line"><a name="l06022"></a><span class="lineno"> 6022</span>&#160;      <a class="code" href="classllvm_1_1InstCombiner.html#a63d5f62f004af8e0903574463abc6a81">InstCombiner::getFlippedStrictnessPredicateAndConstant</a>(Pred, Op1C);</div>
<div class="line"><a name="l06023"></a><span class="lineno"> 6023</span>&#160;  <span class="keywordflow">if</span> (!FlippedStrictness)</div>
<div class="line"><a name="l06024"></a><span class="lineno"> 6024</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l06025"></a><span class="lineno"> 6025</span>&#160; </div>
<div class="line"><a name="l06026"></a><span class="lineno"> 6026</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(FlippedStrictness-&gt;first, Op0, FlippedStrictness-&gt;second);</div>
<div class="line"><a name="l06027"></a><span class="lineno"> 6027</span>&#160;}</div>
<div class="line"><a name="l06028"></a><span class="lineno"> 6028</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l06029"></a><span class="lineno"> 6029</span>&#160;<span class="comment">/// If we have a comparison with a non-canonical predicate, if we can update</span></div>
<div class="line"><a name="l06030"></a><span class="lineno"> 6030</span>&#160;<span class="comment">/// all the users, invert the predicate and adjust all the users.</span></div>
<div class="line"><a name="l06031"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombinerImpl.html#a6f392d7a34855ef605496d0afcb913cd"> 6031</a></span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1CmpInst.html">CmpInst</a> *<a class="code" href="classllvm_1_1InstCombinerImpl.html#a6f392d7a34855ef605496d0afcb913cd">InstCombinerImpl::canonicalizeICmpPredicate</a>(<a class="code" href="classllvm_1_1CmpInst.html">CmpInst</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l06032"></a><span class="lineno"> 6032</span>&#160;  <span class="comment">// Is the predicate already canonical?</span></div>
<div class="line"><a name="l06033"></a><span class="lineno"> 6033</span>&#160;  <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">CmpInst::Predicate</a> Pred = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getPredicate();</div>
<div class="line"><a name="l06034"></a><span class="lineno"> 6034</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1InstCombiner.html#a17baa08df1b509edb0429cb2676e1079">InstCombiner::isCanonicalPredicate</a>(Pred))</div>
<div class="line"><a name="l06035"></a><span class="lineno"> 6035</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l06036"></a><span class="lineno"> 6036</span>&#160; </div>
<div class="line"><a name="l06037"></a><span class="lineno"> 6037</span>&#160;  <span class="comment">// Can all users be adjusted to predicate inversion?</span></div>
<div class="line"><a name="l06038"></a><span class="lineno"> 6038</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classllvm_1_1InstCombiner.html#a0c32de3a8e64735bd308fb50fa7f1f38">InstCombiner::canFreelyInvertAllUsersOf</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <span class="comment">/*IgnoredUser=*/</span><span class="keyword">nullptr</span>))</div>
<div class="line"><a name="l06039"></a><span class="lineno"> 6039</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l06040"></a><span class="lineno"> 6040</span>&#160; </div>
<div class="line"><a name="l06041"></a><span class="lineno"> 6041</span>&#160;  <span class="comment">// Ok, we can canonicalize comparison!</span></div>
<div class="line"><a name="l06042"></a><span class="lineno"> 6042</span>&#160;  <span class="comment">// Let&#39;s first invert the comparison&#39;s predicate.</span></div>
<div class="line"><a name="l06043"></a><span class="lineno"> 6043</span>&#160;  <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.setPredicate(<a class="code" href="classllvm_1_1CmpInst.html#aa2a54b545d237ecfe450fd1292f7675e">CmpInst::getInversePredicate</a>(Pred));</div>
<div class="line"><a name="l06044"></a><span class="lineno"> 6044</span>&#160;  <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.setName(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getName() + <span class="stringliteral">&quot;.not&quot;</span>);</div>
<div class="line"><a name="l06045"></a><span class="lineno"> 6045</span>&#160; </div>
<div class="line"><a name="l06046"></a><span class="lineno"> 6046</span>&#160;  <span class="comment">// And, adapt users.</span></div>
<div class="line"><a name="l06047"></a><span class="lineno"> 6047</span>&#160;  freelyInvertAllUsersOf(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l06048"></a><span class="lineno"> 6048</span>&#160; </div>
<div class="line"><a name="l06049"></a><span class="lineno"> 6049</span>&#160;  <span class="keywordflow">return</span> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l06050"></a><span class="lineno"> 6050</span>&#160;}</div>
<div class="line"><a name="l06051"></a><span class="lineno"> 6051</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l06052"></a><span class="lineno"> 6052</span>&#160;<span class="comment">/// Integer compare with boolean values can always be turned into bitwise ops.</span></div>
<div class="line"><a name="l06053"></a><span class="lineno"><a class="line" href="InstCombineCompares_8cpp.html#a2577f2e8dc0c15d16b2751424fc225d2"> 6053</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="InstCombineCompares_8cpp.html#a2577f2e8dc0c15d16b2751424fc225d2">canonicalizeICmpBool</a>(<a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>,</div>
<div class="line"><a name="l06054"></a><span class="lineno"> 6054</span>&#160;                                         <a class="code" href="classllvm_1_1IRBuilder.html">InstCombiner::BuilderTy</a> &amp;<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>) {</div>
<div class="line"><a name="l06055"></a><span class="lineno"> 6055</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *A = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(0), *<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a> = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(1);</div>
<div class="line"><a name="l06056"></a><span class="lineno"> 6056</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(A-&gt;getType()-&gt;isIntOrIntVectorTy(1) &amp;&amp; <span class="stringliteral">&quot;Bools only&quot;</span>);</div>
<div class="line"><a name="l06057"></a><span class="lineno"> 6057</span>&#160; </div>
<div class="line"><a name="l06058"></a><span class="lineno"> 6058</span>&#160;  <span class="comment">// A boolean compared to true/false can be simplified to Op0/true/false in</span></div>
<div class="line"><a name="l06059"></a><span class="lineno"> 6059</span>&#160;  <span class="comment">// 14 out of the 20 (10 predicates * 2 constants) possible combinations.</span></div>
<div class="line"><a name="l06060"></a><span class="lineno"> 6060</span>&#160;  <span class="comment">// Cases not handled by InstSimplify are always &#39;not&#39; of Op0.</span></div>
<div class="line"><a name="l06061"></a><span class="lineno"> 6061</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#ae77be336e228cf9aa00709a8606dfb98">m_Zero</a>())) {</div>
<div class="line"><a name="l06062"></a><span class="lineno"> 6062</span>&#160;    <span class="keywordflow">switch</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getPredicate()) {</div>
<div class="line"><a name="l06063"></a><span class="lineno"> 6063</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">CmpInst::ICMP_EQ</a>:  <span class="comment">// A ==   0 -&gt; !A</span></div>
<div class="line"><a name="l06064"></a><span class="lineno"> 6064</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bad92f160316221fd4090520bb2b3cefc5">CmpInst::ICMP_ULE</a>: <span class="comment">// A &lt;=u  0 -&gt; !A</span></div>
<div class="line"><a name="l06065"></a><span class="lineno"> 6065</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac1aa7b798ba11d2e497d5cce6ce6d3dc">CmpInst::ICMP_SGE</a>: <span class="comment">// A &gt;=s  0 -&gt; !A</span></div>
<div class="line"><a name="l06066"></a><span class="lineno"> 6066</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1BinaryOperator.html#a4f500ae0de71695b652af4c0958d8ea8">BinaryOperator::CreateNot</a>(A);</div>
<div class="line"><a name="l06067"></a><span class="lineno"> 6067</span>&#160;      <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l06068"></a><span class="lineno"> 6068</span>&#160;        <a class="code" href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;ICmp i1 X, C not simplified as expected.&quot;</span>);</div>
<div class="line"><a name="l06069"></a><span class="lineno"> 6069</span>&#160;    }</div>
<div class="line"><a name="l06070"></a><span class="lineno"> 6070</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#aebdb2700a77d10ae6f0ce115e23d9f77">m_One</a>())) {</div>
<div class="line"><a name="l06071"></a><span class="lineno"> 6071</span>&#160;    <span class="keywordflow">switch</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getPredicate()) {</div>
<div class="line"><a name="l06072"></a><span class="lineno"> 6072</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">CmpInst::ICMP_NE</a>:  <span class="comment">// A !=  1 -&gt; !A</span></div>
<div class="line"><a name="l06073"></a><span class="lineno"> 6073</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e">CmpInst::ICMP_ULT</a>: <span class="comment">// A &lt;u  1 -&gt; !A</span></div>
<div class="line"><a name="l06074"></a><span class="lineno"> 6074</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba720a42e85f7e981afd61e28473b0000a">CmpInst::ICMP_SGT</a>: <span class="comment">// A &gt;s -1 -&gt; !A</span></div>
<div class="line"><a name="l06075"></a><span class="lineno"> 6075</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1BinaryOperator.html#a4f500ae0de71695b652af4c0958d8ea8">BinaryOperator::CreateNot</a>(A);</div>
<div class="line"><a name="l06076"></a><span class="lineno"> 6076</span>&#160;      <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l06077"></a><span class="lineno"> 6077</span>&#160;        <a class="code" href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;ICmp i1 X, C not simplified as expected.&quot;</span>);</div>
<div class="line"><a name="l06078"></a><span class="lineno"> 6078</span>&#160;    }</div>
<div class="line"><a name="l06079"></a><span class="lineno"> 6079</span>&#160;  }</div>
<div class="line"><a name="l06080"></a><span class="lineno"> 6080</span>&#160; </div>
<div class="line"><a name="l06081"></a><span class="lineno"> 6081</span>&#160;  <span class="keywordflow">switch</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getPredicate()) {</div>
<div class="line"><a name="l06082"></a><span class="lineno"> 6082</span>&#160;  <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l06083"></a><span class="lineno"> 6083</span>&#160;    <a class="code" href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Invalid icmp instruction!&quot;</span>);</div>
<div class="line"><a name="l06084"></a><span class="lineno"> 6084</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a>:</div>
<div class="line"><a name="l06085"></a><span class="lineno"> 6085</span>&#160;    <span class="comment">// icmp eq i1 A, B -&gt; ~(A ^ B)</span></div>
<div class="line"><a name="l06086"></a><span class="lineno"> 6086</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1BinaryOperator.html#a4f500ae0de71695b652af4c0958d8ea8">BinaryOperator::CreateNot</a>(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateXor(A, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>));</div>
<div class="line"><a name="l06087"></a><span class="lineno"> 6087</span>&#160; </div>
<div class="line"><a name="l06088"></a><span class="lineno"> 6088</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a>:</div>
<div class="line"><a name="l06089"></a><span class="lineno"> 6089</span>&#160;    <span class="comment">// icmp ne i1 A, B -&gt; A ^ B</span></div>
<div class="line"><a name="l06090"></a><span class="lineno"> 6090</span>&#160;    <span class="keywordflow">return</span> BinaryOperator::CreateXor(A, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div>
<div class="line"><a name="l06091"></a><span class="lineno"> 6091</span>&#160; </div>
<div class="line"><a name="l06092"></a><span class="lineno"> 6092</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba607cecdc5172814382033e001ed11fad">ICmpInst::ICMP_UGT</a>:</div>
<div class="line"><a name="l06093"></a><span class="lineno"> 6093</span>&#160;    <span class="comment">// icmp ugt -&gt; icmp ult</span></div>
<div class="line"><a name="l06094"></a><span class="lineno"> 6094</span>&#160;    <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(A, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div>
<div class="line"><a name="l06095"></a><span class="lineno"> 6095</span>&#160;    [[fallthrough]];</div>
<div class="line"><a name="l06096"></a><span class="lineno"> 6096</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e">ICmpInst::ICMP_ULT</a>:</div>
<div class="line"><a name="l06097"></a><span class="lineno"> 6097</span>&#160;    <span class="comment">// icmp ult i1 A, B -&gt; ~A &amp; B</span></div>
<div class="line"><a name="l06098"></a><span class="lineno"> 6098</span>&#160;    <span class="keywordflow">return</span> BinaryOperator::CreateAnd(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateNot(A), <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div>
<div class="line"><a name="l06099"></a><span class="lineno"> 6099</span>&#160; </div>
<div class="line"><a name="l06100"></a><span class="lineno"> 6100</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba720a42e85f7e981afd61e28473b0000a">ICmpInst::ICMP_SGT</a>:</div>
<div class="line"><a name="l06101"></a><span class="lineno"> 6101</span>&#160;    <span class="comment">// icmp sgt -&gt; icmp slt</span></div>
<div class="line"><a name="l06102"></a><span class="lineno"> 6102</span>&#160;    <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(A, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div>
<div class="line"><a name="l06103"></a><span class="lineno"> 6103</span>&#160;    [[fallthrough]];</div>
<div class="line"><a name="l06104"></a><span class="lineno"> 6104</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba15ae464950ac676919c2f0c7aafc706c">ICmpInst::ICMP_SLT</a>:</div>
<div class="line"><a name="l06105"></a><span class="lineno"> 6105</span>&#160;    <span class="comment">// icmp slt i1 A, B -&gt; A &amp; ~B</span></div>
<div class="line"><a name="l06106"></a><span class="lineno"> 6106</span>&#160;    <span class="keywordflow">return</span> BinaryOperator::CreateAnd(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateNot(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>), A);</div>
<div class="line"><a name="l06107"></a><span class="lineno"> 6107</span>&#160; </div>
<div class="line"><a name="l06108"></a><span class="lineno"> 6108</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba573bcd571c938fce863525330bbfc4b8">ICmpInst::ICMP_UGE</a>:</div>
<div class="line"><a name="l06109"></a><span class="lineno"> 6109</span>&#160;    <span class="comment">// icmp uge -&gt; icmp ule</span></div>
<div class="line"><a name="l06110"></a><span class="lineno"> 6110</span>&#160;    <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(A, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div>
<div class="line"><a name="l06111"></a><span class="lineno"> 6111</span>&#160;    [[fallthrough]];</div>
<div class="line"><a name="l06112"></a><span class="lineno"> 6112</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bad92f160316221fd4090520bb2b3cefc5">ICmpInst::ICMP_ULE</a>:</div>
<div class="line"><a name="l06113"></a><span class="lineno"> 6113</span>&#160;    <span class="comment">// icmp ule i1 A, B -&gt; ~A | B</span></div>
<div class="line"><a name="l06114"></a><span class="lineno"> 6114</span>&#160;    <span class="keywordflow">return</span> BinaryOperator::CreateOr(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateNot(A), <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div>
<div class="line"><a name="l06115"></a><span class="lineno"> 6115</span>&#160; </div>
<div class="line"><a name="l06116"></a><span class="lineno"> 6116</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac1aa7b798ba11d2e497d5cce6ce6d3dc">ICmpInst::ICMP_SGE</a>:</div>
<div class="line"><a name="l06117"></a><span class="lineno"> 6117</span>&#160;    <span class="comment">// icmp sge -&gt; icmp sle</span></div>
<div class="line"><a name="l06118"></a><span class="lineno"> 6118</span>&#160;    <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(A, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div>
<div class="line"><a name="l06119"></a><span class="lineno"> 6119</span>&#160;    [[fallthrough]];</div>
<div class="line"><a name="l06120"></a><span class="lineno"> 6120</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba2751d6136a2819749dcef65dc19a4246">ICmpInst::ICMP_SLE</a>:</div>
<div class="line"><a name="l06121"></a><span class="lineno"> 6121</span>&#160;    <span class="comment">// icmp sle i1 A, B -&gt; A | ~B</span></div>
<div class="line"><a name="l06122"></a><span class="lineno"> 6122</span>&#160;    <span class="keywordflow">return</span> BinaryOperator::CreateOr(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateNot(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>), A);</div>
<div class="line"><a name="l06123"></a><span class="lineno"> 6123</span>&#160;  }</div>
<div class="line"><a name="l06124"></a><span class="lineno"> 6124</span>&#160;}</div>
<div class="line"><a name="l06125"></a><span class="lineno"> 6125</span>&#160; </div>
<div class="line"><a name="l06126"></a><span class="lineno"> 6126</span>&#160;<span class="comment">// Transform pattern like:</span></div>
<div class="line"><a name="l06127"></a><span class="lineno"> 6127</span>&#160;<span class="comment">//   (1 &lt;&lt; Y) u&lt;= X  or  ~(-1 &lt;&lt; Y) u&lt;  X  or  ((1 &lt;&lt; Y)+(-1)) u&lt;  X</span></div>
<div class="line"><a name="l06128"></a><span class="lineno"> 6128</span>&#160;<span class="comment">//   (1 &lt;&lt; Y) u&gt;  X  or  ~(-1 &lt;&lt; Y) u&gt;= X  or  ((1 &lt;&lt; Y)+(-1)) u&gt;= X</span></div>
<div class="line"><a name="l06129"></a><span class="lineno"> 6129</span>&#160;<span class="comment">// Into:</span></div>
<div class="line"><a name="l06130"></a><span class="lineno"> 6130</span>&#160;<span class="comment">//   (X l&gt;&gt; Y) != 0</span></div>
<div class="line"><a name="l06131"></a><span class="lineno"> 6131</span>&#160;<span class="comment">//   (X l&gt;&gt; Y) == 0</span></div>
<div class="line"><a name="l06132"></a><span class="lineno"><a class="line" href="InstCombineCompares_8cpp.html#a60e6e6fe404897eed5f8dcc4d87f3796"> 6132</a></span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="InstCombineCompares_8cpp.html#a60e6e6fe404897eed5f8dcc4d87f3796">foldICmpWithHighBitMask</a>(<a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> &amp;Cmp,</div>
<div class="line"><a name="l06133"></a><span class="lineno"> 6133</span>&#160;                                            <a class="code" href="classllvm_1_1IRBuilder.html">InstCombiner::BuilderTy</a> &amp;<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>) {</div>
<div class="line"><a name="l06134"></a><span class="lineno"> 6134</span>&#160;  <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">ICmpInst::Predicate</a> Pred, NewPred;</div>
<div class="line"><a name="l06135"></a><span class="lineno"> 6135</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, *<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>;</div>
<div class="line"><a name="l06136"></a><span class="lineno"> 6136</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(&amp;Cmp,</div>
<div class="line"><a name="l06137"></a><span class="lineno"> 6137</span>&#160;            <a class="code" href="namespacellvm_1_1PatternMatch.html#a3de757fc0f1dc7f8f8e9211b32ac106d">m_c_ICmp</a>(Pred, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a37668d9884c78ac77254cf9fb8a4276a">m_Shl</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#aebdb2700a77d10ae6f0ce115e23d9f77">m_One</a>(), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>))), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>)))) {</div>
<div class="line"><a name="l06138"></a><span class="lineno"> 6138</span>&#160;    <span class="keywordflow">switch</span> (Pred) {</div>
<div class="line"><a name="l06139"></a><span class="lineno"> 6139</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bad92f160316221fd4090520bb2b3cefc5">ICmpInst::ICMP_ULE</a>:</div>
<div class="line"><a name="l06140"></a><span class="lineno"> 6140</span>&#160;      NewPred = <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a>;</div>
<div class="line"><a name="l06141"></a><span class="lineno"> 6141</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l06142"></a><span class="lineno"> 6142</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba607cecdc5172814382033e001ed11fad">ICmpInst::ICMP_UGT</a>:</div>
<div class="line"><a name="l06143"></a><span class="lineno"> 6143</span>&#160;      NewPred = <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a>;</div>
<div class="line"><a name="l06144"></a><span class="lineno"> 6144</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l06145"></a><span class="lineno"> 6145</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l06146"></a><span class="lineno"> 6146</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l06147"></a><span class="lineno"> 6147</span>&#160;    }</div>
<div class="line"><a name="l06148"></a><span class="lineno"> 6148</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(&amp;Cmp, <a class="code" href="namespacellvm_1_1PatternMatch.html#a3de757fc0f1dc7f8f8e9211b32ac106d">m_c_ICmp</a>(Pred,</div>
<div class="line"><a name="l06149"></a><span class="lineno"> 6149</span>&#160;                                  <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#af4feec45578e32fe65d8efc59112bc8e">m_CombineOr</a>(</div>
<div class="line"><a name="l06150"></a><span class="lineno"> 6150</span>&#160;                                      <a class="code" href="namespacellvm_1_1PatternMatch.html#a2ff0f084844b189a858647d637d47eba">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a37668d9884c78ac77254cf9fb8a4276a">m_Shl</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#aaea0d5ebb8b57ddde2095f80e2e94bb2">m_AllOnes</a>(), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>))),</div>
<div class="line"><a name="l06151"></a><span class="lineno"> 6151</span>&#160;                                      <a class="code" href="namespacellvm_1_1PatternMatch.html#a944c25ac9b73b02a17a20a08a25b9b21">m_Add</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a37668d9884c78ac77254cf9fb8a4276a">m_Shl</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#aebdb2700a77d10ae6f0ce115e23d9f77">m_One</a>(), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>)),</div>
<div class="line"><a name="l06152"></a><span class="lineno"> 6152</span>&#160;                                            <a class="code" href="namespacellvm_1_1PatternMatch.html#aaea0d5ebb8b57ddde2095f80e2e94bb2">m_AllOnes</a>()))),</div>
<div class="line"><a name="l06153"></a><span class="lineno"> 6153</span>&#160;                                  <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>)))) {</div>
<div class="line"><a name="l06154"></a><span class="lineno"> 6154</span>&#160;    <span class="comment">// The variant with &#39;add&#39; is not canonical, (the variant with &#39;not&#39; is)</span></div>
<div class="line"><a name="l06155"></a><span class="lineno"> 6155</span>&#160;    <span class="comment">// we only get it because it has extra uses, and can&#39;t be canonicalized,</span></div>
<div class="line"><a name="l06156"></a><span class="lineno"> 6156</span>&#160; </div>
<div class="line"><a name="l06157"></a><span class="lineno"> 6157</span>&#160;    <span class="keywordflow">switch</span> (Pred) {</div>
<div class="line"><a name="l06158"></a><span class="lineno"> 6158</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e">ICmpInst::ICMP_ULT</a>:</div>
<div class="line"><a name="l06159"></a><span class="lineno"> 6159</span>&#160;      NewPred = <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a>;</div>
<div class="line"><a name="l06160"></a><span class="lineno"> 6160</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l06161"></a><span class="lineno"> 6161</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba573bcd571c938fce863525330bbfc4b8">ICmpInst::ICMP_UGE</a>:</div>
<div class="line"><a name="l06162"></a><span class="lineno"> 6162</span>&#160;      NewPred = <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a>;</div>
<div class="line"><a name="l06163"></a><span class="lineno"> 6163</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l06164"></a><span class="lineno"> 6164</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l06165"></a><span class="lineno"> 6165</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l06166"></a><span class="lineno"> 6166</span>&#160;    }</div>
<div class="line"><a name="l06167"></a><span class="lineno"> 6167</span>&#160;  } <span class="keywordflow">else</span></div>
<div class="line"><a name="l06168"></a><span class="lineno"> 6168</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l06169"></a><span class="lineno"> 6169</span>&#160; </div>
<div class="line"><a name="l06170"></a><span class="lineno"> 6170</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *NewX = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateLShr(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getName() + <span class="stringliteral">&quot;.highbits&quot;</span>);</div>
<div class="line"><a name="l06171"></a><span class="lineno"> 6171</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *Zero = <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(NewX-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>());</div>
<div class="line"><a name="l06172"></a><span class="lineno"> 6172</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1CmpInst.html#a3b4a54b076454fec43b13554b28252a9">CmpInst::Create</a>(Instruction::ICmp, NewPred, NewX, Zero);</div>
<div class="line"><a name="l06173"></a><span class="lineno"> 6173</span>&#160;}</div>
<div class="line"><a name="l06174"></a><span class="lineno"> 6174</span>&#160; </div>
<div class="line"><a name="l06175"></a><span class="lineno"><a class="line" href="InstCombineCompares_8cpp.html#a1f13fe408d6285f56e9635116c119108"> 6175</a></span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="InstCombineCompares_8cpp.html#a1f13fe408d6285f56e9635116c119108">foldVectorCmp</a>(<a class="code" href="classllvm_1_1CmpInst.html">CmpInst</a> &amp;Cmp,</div>
<div class="line"><a name="l06176"></a><span class="lineno"> 6176</span>&#160;                                  <a class="code" href="classllvm_1_1IRBuilder.html">InstCombiner::BuilderTy</a> &amp;<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>) {</div>
<div class="line"><a name="l06177"></a><span class="lineno"> 6177</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">CmpInst::Predicate</a> Pred = Cmp.getPredicate();</div>
<div class="line"><a name="l06178"></a><span class="lineno"> 6178</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a> = Cmp.getOperand(0), *<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a> = Cmp.getOperand(1);</div>
<div class="line"><a name="l06179"></a><span class="lineno"> 6179</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *V1, *<a class="code" href="namespacellvm_1_1NVPTX_1_1PTXLdStInstCode.html#a91119cbee2be000c528a690252aee07ca24244a27b634ef3e256ab3c64c6fecd4">V2</a>;</div>
<div class="line"><a name="l06180"></a><span class="lineno"> 6180</span>&#160; </div>
<div class="line"><a name="l06181"></a><span class="lineno"> 6181</span>&#160;  <span class="keyword">auto</span> createCmpReverse = [&amp;](<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">CmpInst::Predicate</a> Pred, <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>) {</div>
<div class="line"><a name="l06182"></a><span class="lineno"> 6182</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *V = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCmp(Pred, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, Cmp.getName());</div>
<div class="line"><a name="l06183"></a><span class="lineno"> 6183</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = dyn_cast&lt;Instruction&gt;(V))</div>
<div class="line"><a name="l06184"></a><span class="lineno"> 6184</span>&#160;      <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;copyIRFlags(&amp;Cmp);</div>
<div class="line"><a name="l06185"></a><span class="lineno"> 6185</span>&#160;    <a class="code" href="classllvm_1_1Module.html">Module</a> *<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a> = Cmp.getModule();</div>
<div class="line"><a name="l06186"></a><span class="lineno"> 6186</span>&#160;    <a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> = <a class="code" href="namespacellvm_1_1Intrinsic.html#aefa39f6b622360ce4e947feb9f671b73">Intrinsic::getDeclaration</a>(</div>
<div class="line"><a name="l06187"></a><span class="lineno"> 6187</span>&#160;        <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>, Intrinsic::experimental_vector_reverse, V-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>());</div>
<div class="line"><a name="l06188"></a><span class="lineno"> 6188</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1CallInst.html#a850d8262cd900958b3153c4aa080b2bb">CallInst::Create</a>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, V);</div>
<div class="line"><a name="l06189"></a><span class="lineno"> 6189</span>&#160;  };</div>
<div class="line"><a name="l06190"></a><span class="lineno"> 6190</span>&#160; </div>
<div class="line"><a name="l06191"></a><span class="lineno"> 6191</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#ad4201fc3d0958c5d8dff30af6fa45803">m_VecReverse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(V1)))) {</div>
<div class="line"><a name="l06192"></a><span class="lineno"> 6192</span>&#160;    <span class="comment">// cmp Pred, rev(V1), rev(V2) --&gt; rev(cmp Pred, V1, V2)</span></div>
<div class="line"><a name="l06193"></a><span class="lineno"> 6193</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#ad4201fc3d0958c5d8dff30af6fa45803">m_VecReverse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="namespacellvm_1_1NVPTX_1_1PTXLdStInstCode.html#a91119cbee2be000c528a690252aee07ca24244a27b634ef3e256ab3c64c6fecd4">V2</a>))) &amp;&amp;</div>
<div class="line"><a name="l06194"></a><span class="lineno"> 6194</span>&#160;        (<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>() || <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>()))</div>
<div class="line"><a name="l06195"></a><span class="lineno"> 6195</span>&#160;      <span class="keywordflow">return</span> createCmpReverse(Pred, V1, <a class="code" href="namespacellvm_1_1NVPTX_1_1PTXLdStInstCode.html#a91119cbee2be000c528a690252aee07ca24244a27b634ef3e256ab3c64c6fecd4">V2</a>);</div>
<div class="line"><a name="l06196"></a><span class="lineno"> 6196</span>&#160; </div>
<div class="line"><a name="l06197"></a><span class="lineno"> 6197</span>&#160;    <span class="comment">// cmp Pred, rev(V1), RHSSplat --&gt; rev(cmp Pred, V1, RHSSplat)</span></div>
<div class="line"><a name="l06198"></a><span class="lineno"> 6198</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>() &amp;&amp; <a class="code" href="namespacellvm.html#a6339f2ad6701dc229c34ca4305596d3a">isSplatValue</a>(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>))</div>
<div class="line"><a name="l06199"></a><span class="lineno"> 6199</span>&#160;      <span class="keywordflow">return</span> createCmpReverse(Pred, V1, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>);</div>
<div class="line"><a name="l06200"></a><span class="lineno"> 6200</span>&#160;  }</div>
<div class="line"><a name="l06201"></a><span class="lineno"> 6201</span>&#160;  <span class="comment">// cmp Pred, LHSSplat, rev(V2) --&gt; rev(cmp Pred, LHSSplat, V2)</span></div>
<div class="line"><a name="l06202"></a><span class="lineno"> 6202</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a6339f2ad6701dc229c34ca4305596d3a">isSplatValue</a>(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>) &amp;&amp; <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#ad4201fc3d0958c5d8dff30af6fa45803">m_VecReverse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="namespacellvm_1_1NVPTX_1_1PTXLdStInstCode.html#a91119cbee2be000c528a690252aee07ca24244a27b634ef3e256ab3c64c6fecd4">V2</a>)))))</div>
<div class="line"><a name="l06203"></a><span class="lineno"> 6203</span>&#160;    <span class="keywordflow">return</span> createCmpReverse(Pred, <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="namespacellvm_1_1NVPTX_1_1PTXLdStInstCode.html#a91119cbee2be000c528a690252aee07ca24244a27b634ef3e256ab3c64c6fecd4">V2</a>);</div>
<div class="line"><a name="l06204"></a><span class="lineno"> 6204</span>&#160; </div>
<div class="line"><a name="l06205"></a><span class="lineno"> 6205</span>&#160;  <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;int&gt;</a> <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>;</div>
<div class="line"><a name="l06206"></a><span class="lineno"> 6206</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#afd3e8a6706810fef8cdbaf1f9f40dfbd">m_Shuffle</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(V1), <a class="code" href="namespacellvm_1_1PatternMatch.html#adea6dc2e42baa345b97be48b0370313d">m_Undef</a>(), <a class="code" href="structllvm_1_1PatternMatch_1_1m__Mask.html">m_Mask</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>))))</div>
<div class="line"><a name="l06207"></a><span class="lineno"> 6207</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l06208"></a><span class="lineno"> 6208</span>&#160; </div>
<div class="line"><a name="l06209"></a><span class="lineno"> 6209</span>&#160;  <span class="comment">// If both arguments of the cmp are shuffles that use the same mask and</span></div>
<div class="line"><a name="l06210"></a><span class="lineno"> 6210</span>&#160;  <span class="comment">// shuffle within a single vector, move the shuffle after the cmp:</span></div>
<div class="line"><a name="l06211"></a><span class="lineno"> 6211</span>&#160;  <span class="comment">// cmp (shuffle V1, M), (shuffle V2, M) --&gt; shuffle (cmp V1, V2), M</span></div>
<div class="line"><a name="l06212"></a><span class="lineno"> 6212</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *V1Ty = V1-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>();</div>
<div class="line"><a name="l06213"></a><span class="lineno"> 6213</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#afd3e8a6706810fef8cdbaf1f9f40dfbd">m_Shuffle</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="namespacellvm_1_1NVPTX_1_1PTXLdStInstCode.html#a91119cbee2be000c528a690252aee07ca24244a27b634ef3e256ab3c64c6fecd4">V2</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#adea6dc2e42baa345b97be48b0370313d">m_Undef</a>(), <a class="code" href="structllvm_1_1PatternMatch_1_1m__SpecificMask.html">m_SpecificMask</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>))) &amp;&amp;</div>
<div class="line"><a name="l06214"></a><span class="lineno"> 6214</span>&#160;      V1Ty == <a class="code" href="namespacellvm_1_1NVPTX_1_1PTXLdStInstCode.html#a91119cbee2be000c528a690252aee07ca24244a27b634ef3e256ab3c64c6fecd4">V2</a>-&gt;getType() &amp;&amp; (<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>() || <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>())) {</div>
<div class="line"><a name="l06215"></a><span class="lineno"> 6215</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *NewCmp = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCmp(Pred, V1, <a class="code" href="namespacellvm_1_1NVPTX_1_1PTXLdStInstCode.html#a91119cbee2be000c528a690252aee07ca24244a27b634ef3e256ab3c64c6fecd4">V2</a>);</div>
<div class="line"><a name="l06216"></a><span class="lineno"> 6216</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ShuffleVectorInst.html">ShuffleVectorInst</a>(NewCmp, <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>);</div>
<div class="line"><a name="l06217"></a><span class="lineno"> 6217</span>&#160;  }</div>
<div class="line"><a name="l06218"></a><span class="lineno"> 6218</span>&#160; </div>
<div class="line"><a name="l06219"></a><span class="lineno"> 6219</span>&#160;  <span class="comment">// Try to canonicalize compare with splatted operand and splat constant.</span></div>
<div class="line"><a name="l06220"></a><span class="lineno"> 6220</span>&#160;  <span class="comment">// TODO: We could generalize this for more than splats. See/use the code in</span></div>
<div class="line"><a name="l06221"></a><span class="lineno"> 6221</span>&#160;  <span class="comment">//       InstCombiner::foldVectorBinop().</span></div>
<div class="line"><a name="l06222"></a><span class="lineno"> 6222</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>;</div>
<div class="line"><a name="l06223"></a><span class="lineno"> 6223</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>() || !<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#aadd209ba7e1bfa8113a609e09a7fe62f">m_Constant</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)))</div>
<div class="line"><a name="l06224"></a><span class="lineno"> 6224</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l06225"></a><span class="lineno"> 6225</span>&#160; </div>
<div class="line"><a name="l06226"></a><span class="lineno"> 6226</span>&#160;  <span class="comment">// Length-changing splats are ok, so adjust the constants as needed:</span></div>
<div class="line"><a name="l06227"></a><span class="lineno"> 6227</span>&#160;  <span class="comment">// cmp (shuffle V1, M), C --&gt; shuffle (cmp V1, C&#39;), M</span></div>
<div class="line"><a name="l06228"></a><span class="lineno"> 6228</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *ScalarC = <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;<a class="code" href="classllvm_1_1Constant.html#a292ffa1290b082be7ce24676c26f04d6">getSplatValue</a>(<span class="comment">/* AllowUndefs */</span> <span class="keyword">true</span>);</div>
<div class="line"><a name="l06229"></a><span class="lineno"> 6229</span>&#160;  <span class="keywordtype">int</span> MaskSplatIndex;</div>
<div class="line"><a name="l06230"></a><span class="lineno"> 6230</span>&#160;  <span class="keywordflow">if</span> (ScalarC &amp;&amp; <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>, <a class="code" href="structllvm_1_1PatternMatch_1_1m__SplatOrUndefMask.html">m_SplatOrUndefMask</a>(MaskSplatIndex))) {</div>
<div class="line"><a name="l06231"></a><span class="lineno"> 6231</span>&#160;    <span class="comment">// We allow undefs in matching, but this transform removes those for safety.</span></div>
<div class="line"><a name="l06232"></a><span class="lineno"> 6232</span>&#160;    <span class="comment">// Demanded elements analysis should be able to recover some/all of that.</span></div>
<div class="line"><a name="l06233"></a><span class="lineno"> 6233</span>&#160;    <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = <a class="code" href="classllvm_1_1ConstantVector.html#aa3b241b35b0039b413faf1ef4e873eb7">ConstantVector::getSplat</a>(cast&lt;VectorType&gt;(V1Ty)-&gt;getElementCount(),</div>
<div class="line"><a name="l06234"></a><span class="lineno"> 6234</span>&#160;                                 ScalarC);</div>
<div class="line"><a name="l06235"></a><span class="lineno"> 6235</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;int, 8&gt;</a> NewM(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.size(), MaskSplatIndex);</div>
<div class="line"><a name="l06236"></a><span class="lineno"> 6236</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *NewCmp = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCmp(Pred, V1, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div>
<div class="line"><a name="l06237"></a><span class="lineno"> 6237</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ShuffleVectorInst.html">ShuffleVectorInst</a>(NewCmp, NewM);</div>
<div class="line"><a name="l06238"></a><span class="lineno"> 6238</span>&#160;  }</div>
<div class="line"><a name="l06239"></a><span class="lineno"> 6239</span>&#160; </div>
<div class="line"><a name="l06240"></a><span class="lineno"> 6240</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l06241"></a><span class="lineno"> 6241</span>&#160;}</div>
<div class="line"><a name="l06242"></a><span class="lineno"> 6242</span>&#160; </div>
<div class="line"><a name="l06243"></a><span class="lineno"> 6243</span>&#160;<span class="comment">// extract(uadd.with.overflow(A, B), 0) ult A</span></div>
<div class="line"><a name="l06244"></a><span class="lineno"> 6244</span>&#160;<span class="comment">//  -&gt; extract(uadd.with.overflow(A, B), 1)</span></div>
<div class="line"><a name="l06245"></a><span class="lineno"><a class="line" href="InstCombineCompares_8cpp.html#ae5edf88ac708ed10940b4092fda1742b"> 6245</a></span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="InstCombineCompares_8cpp.html#ae5edf88ac708ed10940b4092fda1742b">foldICmpOfUAddOv</a>(<a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l06246"></a><span class="lineno"> 6246</span>&#160;  <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">CmpInst::Predicate</a> Pred = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getPredicate();</div>
<div class="line"><a name="l06247"></a><span class="lineno"> 6247</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Op0 = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(0), *Op1 = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(1);</div>
<div class="line"><a name="l06248"></a><span class="lineno"> 6248</span>&#160; </div>
<div class="line"><a name="l06249"></a><span class="lineno"> 6249</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *UAddOv;</div>
<div class="line"><a name="l06250"></a><span class="lineno"> 6250</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *A, *<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>;</div>
<div class="line"><a name="l06251"></a><span class="lineno"> 6251</span>&#160;  <span class="keyword">auto</span> UAddOvResultPat = m_ExtractValue&lt;0&gt;(</div>
<div class="line"><a name="l06252"></a><span class="lineno"> 6252</span>&#160;      m_Intrinsic&lt;Intrinsic::uadd_with_overflow&gt;(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>)));</div>
<div class="line"><a name="l06253"></a><span class="lineno"> 6253</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, UAddOvResultPat) &amp;&amp;</div>
<div class="line"><a name="l06254"></a><span class="lineno"> 6254</span>&#160;      ((Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e">ICmpInst::ICMP_ULT</a> &amp;&amp; (Op1 == A || Op1 == <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>)) ||</div>
<div class="line"><a name="l06255"></a><span class="lineno"> 6255</span>&#160;       (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a> &amp;&amp; <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#a874d53817a4923de8e58af6b278c09b0">m_ZeroInt</a>()) &amp;&amp;</div>
<div class="line"><a name="l06256"></a><span class="lineno"> 6256</span>&#160;        (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(A, <a class="code" href="namespacellvm_1_1PatternMatch.html#aebdb2700a77d10ae6f0ce115e23d9f77">m_One</a>()) || <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#aebdb2700a77d10ae6f0ce115e23d9f77">m_One</a>()))) ||</div>
<div class="line"><a name="l06257"></a><span class="lineno"> 6257</span>&#160;       (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a> &amp;&amp; <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#aaea0d5ebb8b57ddde2095f80e2e94bb2">m_AllOnes</a>()) &amp;&amp;</div>
<div class="line"><a name="l06258"></a><span class="lineno"> 6258</span>&#160;        (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(A, <a class="code" href="namespacellvm_1_1PatternMatch.html#aaea0d5ebb8b57ddde2095f80e2e94bb2">m_AllOnes</a>()) || <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#aaea0d5ebb8b57ddde2095f80e2e94bb2">m_AllOnes</a>())))))</div>
<div class="line"><a name="l06259"></a><span class="lineno"> 6259</span>&#160;    <span class="comment">// extract(uadd.with.overflow(A, B), 0) &lt; A</span></div>
<div class="line"><a name="l06260"></a><span class="lineno"> 6260</span>&#160;    <span class="comment">// extract(uadd.with.overflow(A, 1), 0) == 0</span></div>
<div class="line"><a name="l06261"></a><span class="lineno"> 6261</span>&#160;    <span class="comment">// extract(uadd.with.overflow(A, -1), 0) != -1</span></div>
<div class="line"><a name="l06262"></a><span class="lineno"> 6262</span>&#160;    UAddOv = cast&lt;ExtractValueInst&gt;(Op0)-&gt;getAggregateOperand();</div>
<div class="line"><a name="l06263"></a><span class="lineno"> 6263</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, UAddOvResultPat) &amp;&amp;</div>
<div class="line"><a name="l06264"></a><span class="lineno"> 6264</span>&#160;           Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba607cecdc5172814382033e001ed11fad">ICmpInst::ICMP_UGT</a> &amp;&amp; (Op0 == A || Op0 == <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>))</div>
<div class="line"><a name="l06265"></a><span class="lineno"> 6265</span>&#160;    <span class="comment">// A &gt; extract(uadd.with.overflow(A, B), 0)</span></div>
<div class="line"><a name="l06266"></a><span class="lineno"> 6266</span>&#160;    UAddOv = cast&lt;ExtractValueInst&gt;(Op1)-&gt;getAggregateOperand();</div>
<div class="line"><a name="l06267"></a><span class="lineno"> 6267</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l06268"></a><span class="lineno"> 6268</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l06269"></a><span class="lineno"> 6269</span>&#160; </div>
<div class="line"><a name="l06270"></a><span class="lineno"> 6270</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1ExtractValueInst.html#a1cccf41f6be0351ccceed2c6447ff04a">ExtractValueInst::Create</a>(UAddOv, 1);</div>
<div class="line"><a name="l06271"></a><span class="lineno"> 6271</span>&#160;}</div>
<div class="line"><a name="l06272"></a><span class="lineno"> 6272</span>&#160; </div>
<div class="line"><a name="l06273"></a><span class="lineno"><a class="line" href="InstCombineCompares_8cpp.html#ac8e5857b6e0d2ca06918e827da2696cb"> 6273</a></span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="InstCombineCompares_8cpp.html#ac8e5857b6e0d2ca06918e827da2696cb">foldICmpInvariantGroup</a>(<a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l06274"></a><span class="lineno"> 6274</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(0)-&gt;getType()-&gt;isPointerTy() ||</div>
<div class="line"><a name="l06275"></a><span class="lineno"> 6275</span>&#160;      <a class="code" href="namespacellvm.html#a7b03ed78a8e299bde6d26a8793cd4e06">NullPointerIsDefined</a>(</div>
<div class="line"><a name="l06276"></a><span class="lineno"> 6276</span>&#160;          <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getParent()-&gt;getParent(),</div>
<div class="line"><a name="l06277"></a><span class="lineno"> 6277</span>&#160;          <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(0)-&gt;getType()-&gt;getPointerAddressSpace())) {</div>
<div class="line"><a name="l06278"></a><span class="lineno"> 6278</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l06279"></a><span class="lineno"> 6279</span>&#160;  }</div>
<div class="line"><a name="l06280"></a><span class="lineno"> 6280</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>;</div>
<div class="line"><a name="l06281"></a><span class="lineno"> 6281</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(0), <a class="code" href="namespacellvm_1_1PatternMatch.html#a04353aa48874f9bda89ff9059cd1a5a6">m_Instruction</a>(<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>)) &amp;&amp;</div>
<div class="line"><a name="l06282"></a><span class="lineno"> 6282</span>&#160;      <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(1), <a class="code" href="namespacellvm_1_1PatternMatch.html#ae77be336e228cf9aa00709a8606dfb98">m_Zero</a>()) &amp;&amp;</div>
<div class="line"><a name="l06283"></a><span class="lineno"> 6283</span>&#160;      <a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>-&gt;isLaunderOrStripInvariantGroup()) {</div>
<div class="line"><a name="l06284"></a><span class="lineno"> 6284</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1CmpInst.html#a3b4a54b076454fec43b13554b28252a9">ICmpInst::Create</a>(Instruction::ICmp, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getPredicate(),</div>
<div class="line"><a name="l06285"></a><span class="lineno"> 6285</span>&#160;                            <a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>-&gt;getOperand(0), <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(1));</div>
<div class="line"><a name="l06286"></a><span class="lineno"> 6286</span>&#160;  }</div>
<div class="line"><a name="l06287"></a><span class="lineno"> 6287</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l06288"></a><span class="lineno"> 6288</span>&#160;}</div>
<div class="line"><a name="l06289"></a><span class="lineno"> 6289</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l06290"></a><span class="lineno"> 6290</span>&#160;<span class="comment">/// This function folds patterns produced by lowering of reduce idioms, such as</span></div>
<div class="line"><a name="l06291"></a><span class="lineno"> 6291</span>&#160;<span class="comment">/// llvm.vector.reduce.and which are lowered into instruction chains. This code</span></div>
<div class="line"><a name="l06292"></a><span class="lineno"> 6292</span>&#160;<span class="comment">/// attempts to generate fewer number of scalar comparisons instead of vector</span></div>
<div class="line"><a name="l06293"></a><span class="lineno"> 6293</span>&#160;<span class="comment">/// comparisons when possible.</span></div>
<div class="line"><a name="l06294"></a><span class="lineno"><a class="line" href="InstCombineCompares_8cpp.html#ac8db7df93eb66c619e9f165ec4475bf8"> 6294</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="InstCombineCompares_8cpp.html#ac8db7df93eb66c619e9f165ec4475bf8">foldReductionIdiom</a>(<a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>,</div>
<div class="line"><a name="l06295"></a><span class="lineno"> 6295</span>&#160;                                       <a class="code" href="classllvm_1_1IRBuilder.html">InstCombiner::BuilderTy</a> &amp;<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>,</div>
<div class="line"><a name="l06296"></a><span class="lineno"> 6296</span>&#160;                                       <span class="keyword">const</span> <a class="code" href="classllvm_1_1DataLayout.html">DataLayout</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>) {</div>
<div class="line"><a name="l06297"></a><span class="lineno"> 6297</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getType()-&gt;isVectorTy())</div>
<div class="line"><a name="l06298"></a><span class="lineno"> 6298</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l06299"></a><span class="lineno"> 6299</span>&#160;  <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">ICmpInst::Predicate</a> OuterPred, InnerPred;</div>
<div class="line"><a name="l06300"></a><span class="lineno"> 6300</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, *<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>;</div>
<div class="line"><a name="l06301"></a><span class="lineno"> 6301</span>&#160; </div>
<div class="line"><a name="l06302"></a><span class="lineno"> 6302</span>&#160;  <span class="comment">// Match lowering of @llvm.vector.reduce.and. Turn</span><span class="comment"></span></div>
<div class="line"><a name="l06303"></a><span class="lineno"> 6303</span>&#160;<span class="comment">  ///   %vec_ne = icmp ne &lt;8 x i8&gt; %lhs, %rhs</span></div>
<div class="line"><a name="l06304"></a><span class="lineno"> 6304</span>&#160;<span class="comment">  ///   %scalar_ne = bitcast &lt;8 x i1&gt; %vec_ne to i8</span></div>
<div class="line"><a name="l06305"></a><span class="lineno"> 6305</span>&#160;<span class="comment">  ///   %res = icmp &lt;pred&gt; i8 %scalar_ne, 0</span></div>
<div class="line"><a name="l06306"></a><span class="lineno"> 6306</span>&#160;<span class="comment">  ///</span></div>
<div class="line"><a name="l06307"></a><span class="lineno"> 6307</span>&#160;<span class="comment">  /// into</span></div>
<div class="line"><a name="l06308"></a><span class="lineno"> 6308</span>&#160;<span class="comment">  ///</span></div>
<div class="line"><a name="l06309"></a><span class="lineno"> 6309</span>&#160;<span class="comment">  ///   %lhs.scalar = bitcast &lt;8 x i8&gt; %lhs to i64</span></div>
<div class="line"><a name="l06310"></a><span class="lineno"> 6310</span>&#160;<span class="comment">  ///   %rhs.scalar = bitcast &lt;8 x i8&gt; %rhs to i64</span></div>
<div class="line"><a name="l06311"></a><span class="lineno"> 6311</span>&#160;<span class="comment">  ///   %res = icmp &lt;pred&gt; i64 %lhs.scalar, %rhs.scalar</span></div>
<div class="line"><a name="l06312"></a><span class="lineno"> 6312</span>&#160;<span class="comment">  ///</span></div>
<div class="line"><a name="l06313"></a><span class="lineno"> 6313</span>&#160;<span class="comment">  /// for &lt;pred&gt; in {ne, eq}.</span></div>
<div class="line"><a name="l06314"></a><span class="lineno"> 6314</span>&#160;<span class="comment"></span>  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a3fe9b3ddb71b9fb53d9fc74b3a0710bf">m_ICmp</a>(OuterPred,</div>
<div class="line"><a name="l06315"></a><span class="lineno"> 6315</span>&#160;                        <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#ac0467ca7fad871738b10db95feb40dad">m_BitCast</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(</div>
<div class="line"><a name="l06316"></a><span class="lineno"> 6316</span>&#160;                            <a class="code" href="namespacellvm_1_1PatternMatch.html#a3fe9b3ddb71b9fb53d9fc74b3a0710bf">m_ICmp</a>(InnerPred, <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>))))),</div>
<div class="line"><a name="l06317"></a><span class="lineno"> 6317</span>&#160;                        <a class="code" href="namespacellvm_1_1PatternMatch.html#ae77be336e228cf9aa00709a8606dfb98">m_Zero</a>())))</div>
<div class="line"><a name="l06318"></a><span class="lineno"> 6318</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l06319"></a><span class="lineno"> 6319</span>&#160;  <span class="keyword">auto</span> *LHSTy = dyn_cast&lt;FixedVectorType&gt;(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>());</div>
<div class="line"><a name="l06320"></a><span class="lineno"> 6320</span>&#160;  <span class="keywordflow">if</span> (!LHSTy || !LHSTy-&gt;getElementType()-&gt;isIntegerTy())</div>
<div class="line"><a name="l06321"></a><span class="lineno"> 6321</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l06322"></a><span class="lineno"> 6322</span>&#160;  <span class="keywordtype">unsigned</span> NumBits =</div>
<div class="line"><a name="l06323"></a><span class="lineno"> 6323</span>&#160;      LHSTy-&gt;getNumElements() * LHSTy-&gt;getElementType()-&gt;getIntegerBitWidth();</div>
<div class="line"><a name="l06324"></a><span class="lineno"> 6324</span>&#160;  <span class="comment">// TODO: Relax this to &quot;not wider than max legal integer type&quot;?</span></div>
<div class="line"><a name="l06325"></a><span class="lineno"> 6325</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.isLegalInteger(NumBits))</div>
<div class="line"><a name="l06326"></a><span class="lineno"> 6326</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l06327"></a><span class="lineno"> 6327</span>&#160; </div>
<div class="line"><a name="l06328"></a><span class="lineno"> 6328</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ICmpInst.html#aaaeded5d0cab77f531b294638459aca5">ICmpInst::isEquality</a>(OuterPred) &amp;&amp; InnerPred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a>) {</div>
<div class="line"><a name="l06329"></a><span class="lineno"> 6329</span>&#160;    <span class="keyword">auto</span> *ScalarTy = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getIntNTy(NumBits);</div>
<div class="line"><a name="l06330"></a><span class="lineno"> 6330</span>&#160;    <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBitCast(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, ScalarTy, <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>-&gt;<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>() + <span class="stringliteral">&quot;.scalar&quot;</span>);</div>
<div class="line"><a name="l06331"></a><span class="lineno"> 6331</span>&#160;    <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBitCast(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, ScalarTy, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>-&gt;<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>() + <span class="stringliteral">&quot;.scalar&quot;</span>);</div>
<div class="line"><a name="l06332"></a><span class="lineno"> 6332</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1CmpInst.html#a3b4a54b076454fec43b13554b28252a9">ICmpInst::Create</a>(Instruction::ICmp, OuterPred, <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>,</div>
<div class="line"><a name="l06333"></a><span class="lineno"> 6333</span>&#160;                            <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getName());</div>
<div class="line"><a name="l06334"></a><span class="lineno"> 6334</span>&#160;  }</div>
<div class="line"><a name="l06335"></a><span class="lineno"> 6335</span>&#160; </div>
<div class="line"><a name="l06336"></a><span class="lineno"> 6336</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l06337"></a><span class="lineno"> 6337</span>&#160;}</div>
<div class="line"><a name="l06338"></a><span class="lineno"> 6338</span>&#160; </div>
<div class="line"><a name="l06339"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombinerImpl.html#ae31c50e938b95587c87aed0f133b1346"> 6339</a></span>&#160;<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombinerImpl.html#ae31c50e938b95587c87aed0f133b1346">InstCombinerImpl::visitICmpInst</a>(<a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l06340"></a><span class="lineno"> 6340</span>&#160;  <span class="keywordtype">bool</span> Changed = <span class="keyword">false</span>;</div>
<div class="line"><a name="l06341"></a><span class="lineno"> 6341</span>&#160;  <span class="keyword">const</span> <a class="code" href="structllvm_1_1SimplifyQuery.html">SimplifyQuery</a> Q = SQ.<a class="code" href="structllvm_1_1SimplifyQuery.html#aaf05c1194f5c7869a00434c13c46c228">getWithInstruction</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l06342"></a><span class="lineno"> 6342</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Op0 = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(0), *Op1 = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(1);</div>
<div class="line"><a name="l06343"></a><span class="lineno"> 6343</span>&#160;  <span class="keywordtype">unsigned</span> Op0Cplxity = getComplexity(Op0);</div>
<div class="line"><a name="l06344"></a><span class="lineno"> 6344</span>&#160;  <span class="keywordtype">unsigned</span> Op1Cplxity = getComplexity(Op1);</div>
<div class="line"><a name="l06345"></a><span class="lineno"> 6345</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l06346"></a><span class="lineno"> 6346</span>&#160;<span class="comment">  /// Orders the operands of the compare so that they are listed from most</span></div>
<div class="line"><a name="l06347"></a><span class="lineno"> 6347</span>&#160;<span class="comment">  /// complex to least complex.  This puts constants before unary operators,</span></div>
<div class="line"><a name="l06348"></a><span class="lineno"> 6348</span>&#160;<span class="comment">  /// before binary operators.</span></div>
<div class="line"><a name="l06349"></a><span class="lineno"> 6349</span>&#160;<span class="comment"></span>  <span class="keywordflow">if</span> (Op0Cplxity &lt; Op1Cplxity ||</div>
<div class="line"><a name="l06350"></a><span class="lineno"> 6350</span>&#160;      (Op0Cplxity == Op1Cplxity &amp;&amp; <a class="code" href="InstCombineCompares_8cpp.html#aaead33f71104b5e889a5cd491cd2bb56">swapMayExposeCSEOpportunities</a>(Op0, Op1))) {</div>
<div class="line"><a name="l06351"></a><span class="lineno"> 6351</span>&#160;    <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.swapOperands();</div>
<div class="line"><a name="l06352"></a><span class="lineno"> 6352</span>&#160;    <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(Op0, Op1);</div>
<div class="line"><a name="l06353"></a><span class="lineno"> 6353</span>&#160;    Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l06354"></a><span class="lineno"> 6354</span>&#160;  }</div>
<div class="line"><a name="l06355"></a><span class="lineno"> 6355</span>&#160; </div>
<div class="line"><a name="l06356"></a><span class="lineno"> 6356</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V = <a class="code" href="namespacellvm.html#a969e30a11e5b3ac2ad7ab5fcc537d495">simplifyICmpInst</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getPredicate(), Op0, Op1, Q))</div>
<div class="line"><a name="l06357"></a><span class="lineno"> 6357</span>&#160;    <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, V);</div>
<div class="line"><a name="l06358"></a><span class="lineno"> 6358</span>&#160; </div>
<div class="line"><a name="l06359"></a><span class="lineno"> 6359</span>&#160;  <span class="comment">// Comparing -val or val with non-zero is the same as just comparing val</span></div>
<div class="line"><a name="l06360"></a><span class="lineno"> 6360</span>&#160;  <span class="comment">// ie, abs(val) != 0 -&gt; val != 0</span></div>
<div class="line"><a name="l06361"></a><span class="lineno"> 6361</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getPredicate() == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a> &amp;&amp; <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#ae77be336e228cf9aa00709a8606dfb98">m_Zero</a>())) {</div>
<div class="line"><a name="l06362"></a><span class="lineno"> 6362</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>, *SelectTrue, *SelectFalse;</div>
<div class="line"><a name="l06363"></a><span class="lineno"> 6363</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#addb87fe3f509b7803d3f5933ee24b560">m_Select</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(SelectTrue),</div>
<div class="line"><a name="l06364"></a><span class="lineno"> 6364</span>&#160;                            <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(SelectFalse)))) {</div>
<div class="line"><a name="l06365"></a><span class="lineno"> 6365</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V = dyn_castNegVal(SelectTrue)) {</div>
<div class="line"><a name="l06366"></a><span class="lineno"> 6366</span>&#160;        <span class="keywordflow">if</span> (V == SelectFalse)</div>
<div class="line"><a name="l06367"></a><span class="lineno"> 6367</span>&#160;          <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1CmpInst.html#a3b4a54b076454fec43b13554b28252a9">CmpInst::Create</a>(Instruction::ICmp, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getPredicate(), V, Op1);</div>
<div class="line"><a name="l06368"></a><span class="lineno"> 6368</span>&#160;      }</div>
<div class="line"><a name="l06369"></a><span class="lineno"> 6369</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V = dyn_castNegVal(SelectFalse)) {</div>
<div class="line"><a name="l06370"></a><span class="lineno"> 6370</span>&#160;        <span class="keywordflow">if</span> (V == SelectTrue)</div>
<div class="line"><a name="l06371"></a><span class="lineno"> 6371</span>&#160;          <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1CmpInst.html#a3b4a54b076454fec43b13554b28252a9">CmpInst::Create</a>(Instruction::ICmp, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getPredicate(), V, Op1);</div>
<div class="line"><a name="l06372"></a><span class="lineno"> 6372</span>&#160;      }</div>
<div class="line"><a name="l06373"></a><span class="lineno"> 6373</span>&#160;    }</div>
<div class="line"><a name="l06374"></a><span class="lineno"> 6374</span>&#160;  }</div>
<div class="line"><a name="l06375"></a><span class="lineno"> 6375</span>&#160; </div>
<div class="line"><a name="l06376"></a><span class="lineno"> 6376</span>&#160;  <span class="keywordflow">if</span> (Op0-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a34ee40bb2f4f5ece47ef19e5f1f57e3c">isIntOrIntVectorTy</a>(1))</div>
<div class="line"><a name="l06377"></a><span class="lineno"> 6377</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Res = <a class="code" href="InstCombineCompares_8cpp.html#a2577f2e8dc0c15d16b2751424fc225d2">canonicalizeICmpBool</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>))</div>
<div class="line"><a name="l06378"></a><span class="lineno"> 6378</span>&#160;      <span class="keywordflow">return</span> Res;</div>
<div class="line"><a name="l06379"></a><span class="lineno"> 6379</span>&#160; </div>
<div class="line"><a name="l06380"></a><span class="lineno"> 6380</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Res = <a class="code" href="InstCombineCompares_8cpp.html#a16fb1ef0518c86c028c57381c4bd831a">canonicalizeCmpWithConstant</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l06381"></a><span class="lineno"> 6381</span>&#160;    <span class="keywordflow">return</span> Res;</div>
<div class="line"><a name="l06382"></a><span class="lineno"> 6382</span>&#160; </div>
<div class="line"><a name="l06383"></a><span class="lineno"> 6383</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Res = canonicalizeICmpPredicate(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l06384"></a><span class="lineno"> 6384</span>&#160;    <span class="keywordflow">return</span> Res;</div>
<div class="line"><a name="l06385"></a><span class="lineno"> 6385</span>&#160; </div>
<div class="line"><a name="l06386"></a><span class="lineno"> 6386</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Res = foldICmpWithConstant(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l06387"></a><span class="lineno"> 6387</span>&#160;    <span class="keywordflow">return</span> Res;</div>
<div class="line"><a name="l06388"></a><span class="lineno"> 6388</span>&#160; </div>
<div class="line"><a name="l06389"></a><span class="lineno"> 6389</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Res = <a class="code" href="CodeGenPrepare_8cpp.html#a98c59bcf49cb7343886e8f425d6d877b">foldICmpWithDominatingICmp</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l06390"></a><span class="lineno"> 6390</span>&#160;    <span class="keywordflow">return</span> Res;</div>
<div class="line"><a name="l06391"></a><span class="lineno"> 6391</span>&#160; </div>
<div class="line"><a name="l06392"></a><span class="lineno"> 6392</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Res = foldICmpUsingBoolRange(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l06393"></a><span class="lineno"> 6393</span>&#160;    <span class="keywordflow">return</span> Res;</div>
<div class="line"><a name="l06394"></a><span class="lineno"> 6394</span>&#160; </div>
<div class="line"><a name="l06395"></a><span class="lineno"> 6395</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Res = foldICmpUsingKnownBits(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l06396"></a><span class="lineno"> 6396</span>&#160;    <span class="keywordflow">return</span> Res;</div>
<div class="line"><a name="l06397"></a><span class="lineno"> 6397</span>&#160; </div>
<div class="line"><a name="l06398"></a><span class="lineno"> 6398</span>&#160;  <span class="comment">// Test if the ICmpInst instruction is used exclusively by a select as</span></div>
<div class="line"><a name="l06399"></a><span class="lineno"> 6399</span>&#160;  <span class="comment">// part of a minimum or maximum operation. If so, refrain from doing</span></div>
<div class="line"><a name="l06400"></a><span class="lineno"> 6400</span>&#160;  <span class="comment">// any other folding. This helps out other analyses which understand</span></div>
<div class="line"><a name="l06401"></a><span class="lineno"> 6401</span>&#160;  <span class="comment">// non-obfuscated minimum and maximum idioms, such as ScalarEvolution</span></div>
<div class="line"><a name="l06402"></a><span class="lineno"> 6402</span>&#160;  <span class="comment">// and CodeGen. And in this case, at least one of the comparison</span></div>
<div class="line"><a name="l06403"></a><span class="lineno"> 6403</span>&#160;  <span class="comment">// operands has at least one user besides the compare (the select),</span></div>
<div class="line"><a name="l06404"></a><span class="lineno"> 6404</span>&#160;  <span class="comment">// which would often largely negate the benefit of folding anyway.</span></div>
<div class="line"><a name="l06405"></a><span class="lineno"> 6405</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l06406"></a><span class="lineno"> 6406</span>&#160;  <span class="comment">// Do the same for the other patterns recognized by matchSelectPattern.</span></div>
<div class="line"><a name="l06407"></a><span class="lineno"> 6407</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.hasOneUse())</div>
<div class="line"><a name="l06408"></a><span class="lineno"> 6408</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1SelectInst.html">SelectInst</a> *<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a> = dyn_cast&lt;SelectInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.user_back())) {</div>
<div class="line"><a name="l06409"></a><span class="lineno"> 6409</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *A, *<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>;</div>
<div class="line"><a name="l06410"></a><span class="lineno"> 6410</span>&#160;      <a class="code" href="structllvm_1_1SelectPatternResult.html">SelectPatternResult</a> SPR = <a class="code" href="namespacellvm.html#a7aad5a0e62a54747f455651ee2dd08ed">matchSelectPattern</a>(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>, A, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div>
<div class="line"><a name="l06411"></a><span class="lineno"> 6411</span>&#160;      <span class="keywordflow">if</span> (SPR.<a class="code" href="structllvm_1_1SelectPatternResult.html#a3ca9c2098248eac9051008d6eb9f321d">Flavor</a> != <a class="code" href="namespacellvm.html#a6bf471c1030973649c2e426afc212097aee3dafa9fac8f6fa1e1110ef463cc452">SPF_UNKNOWN</a>)</div>
<div class="line"><a name="l06412"></a><span class="lineno"> 6412</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l06413"></a><span class="lineno"> 6413</span>&#160;    }</div>
<div class="line"><a name="l06414"></a><span class="lineno"> 6414</span>&#160; </div>
<div class="line"><a name="l06415"></a><span class="lineno"> 6415</span>&#160;  <span class="comment">// Do this after checking for min/max to prevent infinite looping.</span></div>
<div class="line"><a name="l06416"></a><span class="lineno"> 6416</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Res = foldICmpWithZero(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l06417"></a><span class="lineno"> 6417</span>&#160;    <span class="keywordflow">return</span> Res;</div>
<div class="line"><a name="l06418"></a><span class="lineno"> 6418</span>&#160; </div>
<div class="line"><a name="l06419"></a><span class="lineno"> 6419</span>&#160;  <span class="comment">// FIXME: We only do this after checking for min/max to prevent infinite</span></div>
<div class="line"><a name="l06420"></a><span class="lineno"> 6420</span>&#160;  <span class="comment">// looping caused by a reverse canonicalization of these patterns for min/max.</span></div>
<div class="line"><a name="l06421"></a><span class="lineno"> 6421</span>&#160;  <span class="comment">// FIXME: The organization of folds is a mess. These would naturally go into</span></div>
<div class="line"><a name="l06422"></a><span class="lineno"> 6422</span>&#160;  <span class="comment">// canonicalizeCmpWithConstant(), but we can&#39;t move all of the above folds</span></div>
<div class="line"><a name="l06423"></a><span class="lineno"> 6423</span>&#160;  <span class="comment">// down here after the min/max restriction.</span></div>
<div class="line"><a name="l06424"></a><span class="lineno"> 6424</span>&#160;  <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">ICmpInst::Predicate</a> Pred = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getPredicate();</div>
<div class="line"><a name="l06425"></a><span class="lineno"> 6425</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>;</div>
<div class="line"><a name="l06426"></a><span class="lineno"> 6426</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>))) {</div>
<div class="line"><a name="l06427"></a><span class="lineno"> 6427</span>&#160;    <span class="comment">// For i32: x &gt;u 2147483647 -&gt; x &lt;s 0  -&gt; true if sign bit set</span></div>
<div class="line"><a name="l06428"></a><span class="lineno"> 6428</span>&#160;    <span class="keywordflow">if</span> (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba607cecdc5172814382033e001ed11fad">ICmpInst::ICMP_UGT</a> &amp;&amp; <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;isMaxSignedValue()) {</div>
<div class="line"><a name="l06429"></a><span class="lineno"> 6429</span>&#160;      <a class="code" href="classllvm_1_1Constant.html">Constant</a> *Zero = <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(Op0-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>());</div>
<div class="line"><a name="l06430"></a><span class="lineno"> 6430</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba15ae464950ac676919c2f0c7aafc706c">ICmpInst::ICMP_SLT</a>, Op0, Zero);</div>
<div class="line"><a name="l06431"></a><span class="lineno"> 6431</span>&#160;    }</div>
<div class="line"><a name="l06432"></a><span class="lineno"> 6432</span>&#160; </div>
<div class="line"><a name="l06433"></a><span class="lineno"> 6433</span>&#160;    <span class="comment">// For i32: x &lt;u 2147483648 -&gt; x &gt;s -1  -&gt; true if sign bit clear</span></div>
<div class="line"><a name="l06434"></a><span class="lineno"> 6434</span>&#160;    <span class="keywordflow">if</span> (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e">ICmpInst::ICMP_ULT</a> &amp;&amp; <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;isMinSignedValue()) {</div>
<div class="line"><a name="l06435"></a><span class="lineno"> 6435</span>&#160;      <a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="namespacellvm.html#af14335020a68db7b9f722810e4a05180a421c6b20238e6e6585270538188f15b9">AllOnes</a> = <a class="code" href="classllvm_1_1Constant.html#a4d51384de6e1798bb6aa875aebeea9f0">Constant::getAllOnesValue</a>(Op0-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>());</div>
<div class="line"><a name="l06436"></a><span class="lineno"> 6436</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba720a42e85f7e981afd61e28473b0000a">ICmpInst::ICMP_SGT</a>, Op0, <a class="code" href="namespacellvm.html#af14335020a68db7b9f722810e4a05180a421c6b20238e6e6585270538188f15b9">AllOnes</a>);</div>
<div class="line"><a name="l06437"></a><span class="lineno"> 6437</span>&#160;    }</div>
<div class="line"><a name="l06438"></a><span class="lineno"> 6438</span>&#160;  }</div>
<div class="line"><a name="l06439"></a><span class="lineno"> 6439</span>&#160; </div>
<div class="line"><a name="l06440"></a><span class="lineno"> 6440</span>&#160;  <span class="comment">// The folds in here may rely on wrapping flags and special constants, so</span></div>
<div class="line"><a name="l06441"></a><span class="lineno"> 6441</span>&#160;  <span class="comment">// they can break up min/max idioms in some cases but not seemingly similar</span></div>
<div class="line"><a name="l06442"></a><span class="lineno"> 6442</span>&#160;  <span class="comment">// patterns.</span></div>
<div class="line"><a name="l06443"></a><span class="lineno"> 6443</span>&#160;  <span class="comment">// FIXME: It may be possible to enhance select folding to make this</span></div>
<div class="line"><a name="l06444"></a><span class="lineno"> 6444</span>&#160;  <span class="comment">//        unnecessary. It may also be moot if we canonicalize to min/max</span></div>
<div class="line"><a name="l06445"></a><span class="lineno"> 6445</span>&#160;  <span class="comment">//        intrinsics.</span></div>
<div class="line"><a name="l06446"></a><span class="lineno"> 6446</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Res = foldICmpBinOp(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, Q))</div>
<div class="line"><a name="l06447"></a><span class="lineno"> 6447</span>&#160;    <span class="keywordflow">return</span> Res;</div>
<div class="line"><a name="l06448"></a><span class="lineno"> 6448</span>&#160; </div>
<div class="line"><a name="l06449"></a><span class="lineno"> 6449</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Res = foldICmpInstWithConstant(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l06450"></a><span class="lineno"> 6450</span>&#160;    <span class="keywordflow">return</span> Res;</div>
<div class="line"><a name="l06451"></a><span class="lineno"> 6451</span>&#160; </div>
<div class="line"><a name="l06452"></a><span class="lineno"> 6452</span>&#160;  <span class="comment">// Try to match comparison as a sign bit test. Intentionally do this after</span></div>
<div class="line"><a name="l06453"></a><span class="lineno"> 6453</span>&#160;  <span class="comment">// foldICmpInstWithConstant() to potentially let other folds to happen first.</span></div>
<div class="line"><a name="l06454"></a><span class="lineno"> 6454</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *New = foldSignBitTest(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l06455"></a><span class="lineno"> 6455</span>&#160;    <span class="keywordflow">return</span> New;</div>
<div class="line"><a name="l06456"></a><span class="lineno"> 6456</span>&#160; </div>
<div class="line"><a name="l06457"></a><span class="lineno"> 6457</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Res = foldICmpInstWithConstantNotInt(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l06458"></a><span class="lineno"> 6458</span>&#160;    <span class="keywordflow">return</span> Res;</div>
<div class="line"><a name="l06459"></a><span class="lineno"> 6459</span>&#160; </div>
<div class="line"><a name="l06460"></a><span class="lineno"> 6460</span>&#160;  <span class="comment">// Try to optimize &#39;icmp GEP, P&#39; or &#39;icmp P, GEP&#39;.</span></div>
<div class="line"><a name="l06461"></a><span class="lineno"> 6461</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a> = dyn_cast&lt;GEPOperator&gt;(Op0))</div>
<div class="line"><a name="l06462"></a><span class="lineno"> 6462</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *NI = foldGEPICmp(<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>, Op1, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getPredicate(), <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l06463"></a><span class="lineno"> 6463</span>&#160;      <span class="keywordflow">return</span> NI;</div>
<div class="line"><a name="l06464"></a><span class="lineno"> 6464</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a> = dyn_cast&lt;GEPOperator&gt;(Op1))</div>
<div class="line"><a name="l06465"></a><span class="lineno"> 6465</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *NI = foldGEPICmp(<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>, Op0, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getSwappedPredicate(), <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l06466"></a><span class="lineno"> 6466</span>&#160;      <span class="keywordflow">return</span> NI;</div>
<div class="line"><a name="l06467"></a><span class="lineno"> 6467</span>&#160; </div>
<div class="line"><a name="l06468"></a><span class="lineno"> 6468</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a> = dyn_cast&lt;SelectInst&gt;(Op0))</div>
<div class="line"><a name="l06469"></a><span class="lineno"> 6469</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *NI = foldSelectICmp(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getPredicate(), <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>, Op1, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l06470"></a><span class="lineno"> 6470</span>&#160;      <span class="keywordflow">return</span> NI;</div>
<div class="line"><a name="l06471"></a><span class="lineno"> 6471</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a> = dyn_cast&lt;SelectInst&gt;(Op1))</div>
<div class="line"><a name="l06472"></a><span class="lineno"> 6472</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *NI = foldSelectICmp(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getSwappedPredicate(), <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>, Op0, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l06473"></a><span class="lineno"> 6473</span>&#160;      <span class="keywordflow">return</span> NI;</div>
<div class="line"><a name="l06474"></a><span class="lineno"> 6474</span>&#160; </div>
<div class="line"><a name="l06475"></a><span class="lineno"> 6475</span>&#160;  <span class="comment">// Try to optimize equality comparisons against alloca-based pointers.</span></div>
<div class="line"><a name="l06476"></a><span class="lineno"> 6476</span>&#160;  <span class="keywordflow">if</span> (Op0-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a3b996fbf8458aafffc86cb98a68d0a47">isPointerTy</a>() &amp;&amp; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.isEquality()) {</div>
<div class="line"><a name="l06477"></a><span class="lineno"> 6477</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Op1-&gt;getType()-&gt;isPointerTy() &amp;&amp; <span class="stringliteral">&quot;Comparing pointer with non-pointer?&quot;</span>);</div>
<div class="line"><a name="l06478"></a><span class="lineno"> 6478</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> *Alloca = dyn_cast&lt;AllocaInst&gt;(<a class="code" href="namespacellvm.html#a3b1c5788b85ffa254be0e834edf5cf8f">getUnderlyingObject</a>(Op0)))</div>
<div class="line"><a name="l06479"></a><span class="lineno"> 6479</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *New = foldAllocaCmp(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, Alloca))</div>
<div class="line"><a name="l06480"></a><span class="lineno"> 6480</span>&#160;        <span class="keywordflow">return</span> New;</div>
<div class="line"><a name="l06481"></a><span class="lineno"> 6481</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> *Alloca = dyn_cast&lt;AllocaInst&gt;(<a class="code" href="namespacellvm.html#a3b1c5788b85ffa254be0e834edf5cf8f">getUnderlyingObject</a>(Op1)))</div>
<div class="line"><a name="l06482"></a><span class="lineno"> 6482</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *New = foldAllocaCmp(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, Alloca))</div>
<div class="line"><a name="l06483"></a><span class="lineno"> 6483</span>&#160;        <span class="keywordflow">return</span> New;</div>
<div class="line"><a name="l06484"></a><span class="lineno"> 6484</span>&#160;  }</div>
<div class="line"><a name="l06485"></a><span class="lineno"> 6485</span>&#160; </div>
<div class="line"><a name="l06486"></a><span class="lineno"> 6486</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Res = foldICmpBitCast(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l06487"></a><span class="lineno"> 6487</span>&#160;    <span class="keywordflow">return</span> Res;</div>
<div class="line"><a name="l06488"></a><span class="lineno"> 6488</span>&#160; </div>
<div class="line"><a name="l06489"></a><span class="lineno"> 6489</span>&#160;  <span class="comment">// TODO: Hoist this above the min/max bailout.</span></div>
<div class="line"><a name="l06490"></a><span class="lineno"> 6490</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *R = foldICmpWithCastOp(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l06491"></a><span class="lineno"> 6491</span>&#160;    <span class="keywordflow">return</span> R;</div>
<div class="line"><a name="l06492"></a><span class="lineno"> 6492</span>&#160; </div>
<div class="line"><a name="l06493"></a><span class="lineno"> 6493</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Res = <a class="code" href="InstCombineCompares_8cpp.html#abe6ef19bc83468345a1244362a54986e">foldICmpWithMinMax</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l06494"></a><span class="lineno"> 6494</span>&#160;    <span class="keywordflow">return</span> Res;</div>
<div class="line"><a name="l06495"></a><span class="lineno"> 6495</span>&#160; </div>
<div class="line"><a name="l06496"></a><span class="lineno"> 6496</span>&#160;  {</div>
<div class="line"><a name="l06497"></a><span class="lineno"> 6497</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *A, *<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>;</div>
<div class="line"><a name="l06498"></a><span class="lineno"> 6498</span>&#160;    <span class="comment">// Transform (A &amp; ~B) == 0 --&gt; (A &amp; B) != 0</span></div>
<div class="line"><a name="l06499"></a><span class="lineno"> 6499</span>&#160;    <span class="comment">// and       (A &amp; ~B) != 0 --&gt; (A &amp; B) == 0</span></div>
<div class="line"><a name="l06500"></a><span class="lineno"> 6500</span>&#160;    <span class="comment">// if A is a power of 2.</span></div>
<div class="line"><a name="l06501"></a><span class="lineno"> 6501</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a427435d4da769ae680a8e77ef89520aa">m_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a2ff0f084844b189a858647d637d47eba">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>)))) &amp;&amp;</div>
<div class="line"><a name="l06502"></a><span class="lineno"> 6502</span>&#160;        <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#ae77be336e228cf9aa00709a8606dfb98">m_Zero</a>()) &amp;&amp;</div>
<div class="line"><a name="l06503"></a><span class="lineno"> 6503</span>&#160;        <a class="code" href="namespacellvm.html#a4036c3c75bcee1206cd199548b87f9ae">isKnownToBeAPowerOfTwo</a>(A, <span class="keyword">false</span>, 0, &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &amp;&amp; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.isEquality())</div>
<div class="line"><a name="l06504"></a><span class="lineno"> 6504</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getInversePredicate(), <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAnd(A, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>),</div>
<div class="line"><a name="l06505"></a><span class="lineno"> 6505</span>&#160;                          Op1);</div>
<div class="line"><a name="l06506"></a><span class="lineno"> 6506</span>&#160; </div>
<div class="line"><a name="l06507"></a><span class="lineno"> 6507</span>&#160;    <span class="comment">// ~X &lt; ~Y --&gt; Y &lt; X</span></div>
<div class="line"><a name="l06508"></a><span class="lineno"> 6508</span>&#160;    <span class="comment">// ~X &lt; C --&gt;  X &gt; ~C</span></div>
<div class="line"><a name="l06509"></a><span class="lineno"> 6509</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a2ff0f084844b189a858647d637d47eba">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A)))) {</div>
<div class="line"><a name="l06510"></a><span class="lineno"> 6510</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#a2ff0f084844b189a858647d637d47eba">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>))))</div>
<div class="line"><a name="l06511"></a><span class="lineno"> 6511</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getPredicate(), <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, A);</div>
<div class="line"><a name="l06512"></a><span class="lineno"> 6512</span>&#160; </div>
<div class="line"><a name="l06513"></a><span class="lineno"> 6513</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>;</div>
<div class="line"><a name="l06514"></a><span class="lineno"> 6514</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)))</div>
<div class="line"><a name="l06515"></a><span class="lineno"> 6515</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getSwappedPredicate(), A,</div>
<div class="line"><a name="l06516"></a><span class="lineno"> 6516</span>&#160;                            <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Op1-&gt;getType(), ~(*<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)));</div>
<div class="line"><a name="l06517"></a><span class="lineno"> 6517</span>&#160;    }</div>
<div class="line"><a name="l06518"></a><span class="lineno"> 6518</span>&#160; </div>
<div class="line"><a name="l06519"></a><span class="lineno"> 6519</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *AddI = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l06520"></a><span class="lineno"> 6520</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a435102a3ba336fd6223f84a475868e09">m_UAddWithOverflow</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>),</div>
<div class="line"><a name="l06521"></a><span class="lineno"> 6521</span>&#160;                                     <a class="code" href="namespacellvm_1_1PatternMatch.html#a04353aa48874f9bda89ff9059cd1a5a6">m_Instruction</a>(AddI))) &amp;&amp;</div>
<div class="line"><a name="l06522"></a><span class="lineno"> 6522</span>&#160;        isa&lt;IntegerType&gt;(A-&gt;getType())) {</div>
<div class="line"><a name="l06523"></a><span class="lineno"> 6523</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *Result;</div>
<div class="line"><a name="l06524"></a><span class="lineno"> 6524</span>&#160;      <a class="code" href="classllvm_1_1Constant.html">Constant</a> *Overflow;</div>
<div class="line"><a name="l06525"></a><span class="lineno"> 6525</span>&#160;      <span class="comment">// m_UAddWithOverflow can match patterns that do not include  an explicit</span></div>
<div class="line"><a name="l06526"></a><span class="lineno"> 6526</span>&#160;      <span class="comment">// &quot;add&quot; instruction, so check the opcode of the matched op.</span></div>
<div class="line"><a name="l06527"></a><span class="lineno"> 6527</span>&#160;      <span class="keywordflow">if</span> (AddI-&gt;<a class="code" href="classllvm_1_1Instruction.html#ab4e05d690df389b8b1477c90387b575f">getOpcode</a>() == <a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a2b016c207343046b2bac45e69e76dcec">Instruction::Add</a> &amp;&amp;</div>
<div class="line"><a name="l06528"></a><span class="lineno"> 6528</span>&#160;          OptimizeOverflowCheck(<a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a2b016c207343046b2bac45e69e76dcec">Instruction::Add</a>, <span class="comment">/*Signed*/</span> <span class="keyword">false</span>, A, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, *AddI,</div>
<div class="line"><a name="l06529"></a><span class="lineno"> 6529</span>&#160;                                Result, Overflow)) {</div>
<div class="line"><a name="l06530"></a><span class="lineno"> 6530</span>&#160;        replaceInstUsesWith(*AddI, Result);</div>
<div class="line"><a name="l06531"></a><span class="lineno"> 6531</span>&#160;        eraseInstFromFunction(*AddI);</div>
<div class="line"><a name="l06532"></a><span class="lineno"> 6532</span>&#160;        <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, Overflow);</div>
<div class="line"><a name="l06533"></a><span class="lineno"> 6533</span>&#160;      }</div>
<div class="line"><a name="l06534"></a><span class="lineno"> 6534</span>&#160;    }</div>
<div class="line"><a name="l06535"></a><span class="lineno"> 6535</span>&#160; </div>
<div class="line"><a name="l06536"></a><span class="lineno"> 6536</span>&#160;    <span class="comment">// (zext a) * (zext b)  --&gt; llvm.umul.with.overflow.</span></div>
<div class="line"><a name="l06537"></a><span class="lineno"> 6537</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a7580eaba3cee9cdf52c080253bd57f5d">m_NUWMul</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2cbdca7c8267aac6914d674f8e81841b">m_ZExt</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A)), <a class="code" href="namespacellvm_1_1PatternMatch.html#a2cbdca7c8267aac6914d674f8e81841b">m_ZExt</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>))))) {</div>
<div class="line"><a name="l06538"></a><span class="lineno"> 6538</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *R = <a class="code" href="InstCombineCompares_8cpp.html#a672a7ba358ab0b9cbd11d044d58fe842">processUMulZExtIdiom</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, Op0, Op1, *<span class="keyword">this</span>))</div>
<div class="line"><a name="l06539"></a><span class="lineno"> 6539</span>&#160;        <span class="keywordflow">return</span> R;</div>
<div class="line"><a name="l06540"></a><span class="lineno"> 6540</span>&#160;    }</div>
<div class="line"><a name="l06541"></a><span class="lineno"> 6541</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#a7580eaba3cee9cdf52c080253bd57f5d">m_NUWMul</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2cbdca7c8267aac6914d674f8e81841b">m_ZExt</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A)), <a class="code" href="namespacellvm_1_1PatternMatch.html#a2cbdca7c8267aac6914d674f8e81841b">m_ZExt</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>))))) {</div>
<div class="line"><a name="l06542"></a><span class="lineno"> 6542</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *R = <a class="code" href="InstCombineCompares_8cpp.html#a672a7ba358ab0b9cbd11d044d58fe842">processUMulZExtIdiom</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, Op1, Op0, *<span class="keyword">this</span>))</div>
<div class="line"><a name="l06543"></a><span class="lineno"> 6543</span>&#160;        <span class="keywordflow">return</span> R;</div>
<div class="line"><a name="l06544"></a><span class="lineno"> 6544</span>&#160;    }</div>
<div class="line"><a name="l06545"></a><span class="lineno"> 6545</span>&#160;  }</div>
<div class="line"><a name="l06546"></a><span class="lineno"> 6546</span>&#160; </div>
<div class="line"><a name="l06547"></a><span class="lineno"> 6547</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Res = foldICmpEquality(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l06548"></a><span class="lineno"> 6548</span>&#160;    <span class="keywordflow">return</span> Res;</div>
<div class="line"><a name="l06549"></a><span class="lineno"> 6549</span>&#160; </div>
<div class="line"><a name="l06550"></a><span class="lineno"> 6550</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Res = <a class="code" href="InstCombineCompares_8cpp.html#ae5edf88ac708ed10940b4092fda1742b">foldICmpOfUAddOv</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l06551"></a><span class="lineno"> 6551</span>&#160;    <span class="keywordflow">return</span> Res;</div>
<div class="line"><a name="l06552"></a><span class="lineno"> 6552</span>&#160; </div>
<div class="line"><a name="l06553"></a><span class="lineno"> 6553</span>&#160;  <span class="comment">// The &#39;cmpxchg&#39; instruction returns an aggregate containing the old value and</span></div>
<div class="line"><a name="l06554"></a><span class="lineno"> 6554</span>&#160;  <span class="comment">// an i1 which indicates whether or not we successfully did the swap.</span></div>
<div class="line"><a name="l06555"></a><span class="lineno"> 6555</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l06556"></a><span class="lineno"> 6556</span>&#160;  <span class="comment">// Replace comparisons between the old value and the expected value with the</span></div>
<div class="line"><a name="l06557"></a><span class="lineno"> 6557</span>&#160;  <span class="comment">// indicator that &#39;cmpxchg&#39; returns.</span></div>
<div class="line"><a name="l06558"></a><span class="lineno"> 6558</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l06559"></a><span class="lineno"> 6559</span>&#160;  <span class="comment">// N.B.  This transform is only valid when the &#39;cmpxchg&#39; is not permitted to</span></div>
<div class="line"><a name="l06560"></a><span class="lineno"> 6560</span>&#160;  <span class="comment">// spuriously fail.  In those cases, the old value may equal the expected</span></div>
<div class="line"><a name="l06561"></a><span class="lineno"> 6561</span>&#160;  <span class="comment">// value but it is possible for the swap to not occur.</span></div>
<div class="line"><a name="l06562"></a><span class="lineno"> 6562</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getPredicate() == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a>)</div>
<div class="line"><a name="l06563"></a><span class="lineno"> 6563</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> *EVI = dyn_cast&lt;ExtractValueInst&gt;(Op0))</div>
<div class="line"><a name="l06564"></a><span class="lineno"> 6564</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> *ACXI = dyn_cast&lt;AtomicCmpXchgInst&gt;(EVI-&gt;getAggregateOperand()))</div>
<div class="line"><a name="l06565"></a><span class="lineno"> 6565</span>&#160;        <span class="keywordflow">if</span> (EVI-&gt;getIndices()[0] == 0 &amp;&amp; ACXI-&gt;getCompareOperand() == Op1 &amp;&amp;</div>
<div class="line"><a name="l06566"></a><span class="lineno"> 6566</span>&#160;            !ACXI-&gt;isWeak())</div>
<div class="line"><a name="l06567"></a><span class="lineno"> 6567</span>&#160;          <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1ExtractValueInst.html#a1cccf41f6be0351ccceed2c6447ff04a">ExtractValueInst::Create</a>(ACXI, 1);</div>
<div class="line"><a name="l06568"></a><span class="lineno"> 6568</span>&#160; </div>
<div class="line"><a name="l06569"></a><span class="lineno"> 6569</span>&#160;  {</div>
<div class="line"><a name="l06570"></a><span class="lineno"> 6570</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>;</div>
<div class="line"><a name="l06571"></a><span class="lineno"> 6571</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>;</div>
<div class="line"><a name="l06572"></a><span class="lineno"> 6572</span>&#160;    <span class="comment">// icmp X+Cst, X</span></div>
<div class="line"><a name="l06573"></a><span class="lineno"> 6573</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a944c25ac9b73b02a17a20a08a25b9b21">m_Add</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>))) &amp;&amp; Op1 == <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>)</div>
<div class="line"><a name="l06574"></a><span class="lineno"> 6574</span>&#160;      <span class="keywordflow">return</span> foldICmpAddOpConst(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getPredicate());</div>
<div class="line"><a name="l06575"></a><span class="lineno"> 6575</span>&#160; </div>
<div class="line"><a name="l06576"></a><span class="lineno"> 6576</span>&#160;    <span class="comment">// icmp X, X+Cst</span></div>
<div class="line"><a name="l06577"></a><span class="lineno"> 6577</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#a944c25ac9b73b02a17a20a08a25b9b21">m_Add</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>))) &amp;&amp; Op0 == <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>)</div>
<div class="line"><a name="l06578"></a><span class="lineno"> 6578</span>&#160;      <span class="keywordflow">return</span> foldICmpAddOpConst(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getSwappedPredicate());</div>
<div class="line"><a name="l06579"></a><span class="lineno"> 6579</span>&#160;  }</div>
<div class="line"><a name="l06580"></a><span class="lineno"> 6580</span>&#160; </div>
<div class="line"><a name="l06581"></a><span class="lineno"> 6581</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Res = <a class="code" href="InstCombineCompares_8cpp.html#a60e6e6fe404897eed5f8dcc4d87f3796">foldICmpWithHighBitMask</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>))</div>
<div class="line"><a name="l06582"></a><span class="lineno"> 6582</span>&#160;    <span class="keywordflow">return</span> Res;</div>
<div class="line"><a name="l06583"></a><span class="lineno"> 6583</span>&#160; </div>
<div class="line"><a name="l06584"></a><span class="lineno"> 6584</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getType()-&gt;isVectorTy())</div>
<div class="line"><a name="l06585"></a><span class="lineno"> 6585</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Res = <a class="code" href="InstCombineCompares_8cpp.html#a1f13fe408d6285f56e9635116c119108">foldVectorCmp</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>))</div>
<div class="line"><a name="l06586"></a><span class="lineno"> 6586</span>&#160;      <span class="keywordflow">return</span> Res;</div>
<div class="line"><a name="l06587"></a><span class="lineno"> 6587</span>&#160; </div>
<div class="line"><a name="l06588"></a><span class="lineno"> 6588</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Res = <a class="code" href="InstCombineCompares_8cpp.html#ac8e5857b6e0d2ca06918e827da2696cb">foldICmpInvariantGroup</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l06589"></a><span class="lineno"> 6589</span>&#160;    <span class="keywordflow">return</span> Res;</div>
<div class="line"><a name="l06590"></a><span class="lineno"> 6590</span>&#160; </div>
<div class="line"><a name="l06591"></a><span class="lineno"> 6591</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Res = <a class="code" href="InstCombineCompares_8cpp.html#ac8db7df93eb66c619e9f165ec4475bf8">foldReductionIdiom</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>))</div>
<div class="line"><a name="l06592"></a><span class="lineno"> 6592</span>&#160;    <span class="keywordflow">return</span> Res;</div>
<div class="line"><a name="l06593"></a><span class="lineno"> 6593</span>&#160; </div>
<div class="line"><a name="l06594"></a><span class="lineno"> 6594</span>&#160;  <span class="keywordflow">return</span> Changed ? &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l06595"></a><span class="lineno"> 6595</span>&#160;}</div>
<div class="line"><a name="l06596"></a><span class="lineno"> 6596</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l06597"></a><span class="lineno"> 6597</span>&#160;<span class="comment">/// Fold fcmp ([us]itofp x, cst) if possible.</span></div>
<div class="line"><a name="l06598"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombinerImpl.html#a901cc1fd9cbb0ec57e3d7f53a70ecd09"> 6598</a></span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombinerImpl.html#a901cc1fd9cbb0ec57e3d7f53a70ecd09">InstCombinerImpl::foldFCmpIntToFPConst</a>(<a class="code" href="classllvm_1_1FCmpInst.html">FCmpInst</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>,</div>
<div class="line"><a name="l06599"></a><span class="lineno"> 6599</span>&#160;                                                    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *LHSI,</div>
<div class="line"><a name="l06600"></a><span class="lineno"> 6600</span>&#160;                                                    <a class="code" href="classllvm_1_1Constant.html">Constant</a> *RHSC) {</div>
<div class="line"><a name="l06601"></a><span class="lineno"> 6601</span>&#160;  <span class="keywordflow">if</span> (!isa&lt;ConstantFP&gt;(RHSC)) <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l06602"></a><span class="lineno"> 6602</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1APFloat.html">APFloat</a> &amp;<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a> = cast&lt;ConstantFP&gt;(RHSC)-&gt;getValueAPF();</div>
<div class="line"><a name="l06603"></a><span class="lineno"> 6603</span>&#160; </div>
<div class="line"><a name="l06604"></a><span class="lineno"> 6604</span>&#160;  <span class="comment">// Get the width of the mantissa.  We don&#39;t want to hack on conversions that</span></div>
<div class="line"><a name="l06605"></a><span class="lineno"> 6605</span>&#160;  <span class="comment">// might lose information from the integer, e.g. &quot;i64 -&gt; float&quot;</span></div>
<div class="line"><a name="l06606"></a><span class="lineno"> 6606</span>&#160;  <span class="keywordtype">int</span> MantissaWidth = LHSI-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#ad9b99a13e459cb18bb386ddd610ecf8c">getFPMantissaWidth</a>();</div>
<div class="line"><a name="l06607"></a><span class="lineno"> 6607</span>&#160;  <span class="keywordflow">if</span> (MantissaWidth == -1) <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;  <span class="comment">// Unknown.</span></div>
<div class="line"><a name="l06608"></a><span class="lineno"> 6608</span>&#160; </div>
<div class="line"><a name="l06609"></a><span class="lineno"> 6609</span>&#160;  <a class="code" href="classllvm_1_1IntegerType.html">IntegerType</a> *IntTy = cast&lt;IntegerType&gt;(LHSI-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0)-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>());</div>
<div class="line"><a name="l06610"></a><span class="lineno"> 6610</span>&#160; </div>
<div class="line"><a name="l06611"></a><span class="lineno"> 6611</span>&#160;  <span class="keywordtype">bool</span> LHSUnsigned = isa&lt;UIToFPInst&gt;(LHSI);</div>
<div class="line"><a name="l06612"></a><span class="lineno"> 6612</span>&#160; </div>
<div class="line"><a name="l06613"></a><span class="lineno"> 6613</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.isEquality()) {</div>
<div class="line"><a name="l06614"></a><span class="lineno"> 6614</span>&#160;    <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">FCmpInst::Predicate</a> <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a> = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getPredicate();</div>
<div class="line"><a name="l06615"></a><span class="lineno"> 6615</span>&#160;    <span class="keywordtype">bool</span> IsExact = <span class="keyword">false</span>;</div>
<div class="line"><a name="l06616"></a><span class="lineno"> 6616</span>&#160;    <a class="code" href="classllvm_1_1APSInt.html">APSInt</a> RHSCvt(IntTy-&gt;<a class="code" href="classllvm_1_1IntegerType.html#a90b790ccb1af4ea5ccd69db4b8cd2d81">getBitWidth</a>(), LHSUnsigned);</div>
<div class="line"><a name="l06617"></a><span class="lineno"> 6617</span>&#160;    <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>.convertToInteger(RHSCvt, <a class="code" href="structllvm_1_1APFloatBase.html#a22ed74f1ed33c4d33f524a650ea536a6">APFloat::rmNearestTiesToEven</a>, &amp;IsExact);</div>
<div class="line"><a name="l06618"></a><span class="lineno"> 6618</span>&#160; </div>
<div class="line"><a name="l06619"></a><span class="lineno"> 6619</span>&#160;    <span class="comment">// If the floating point constant isn&#39;t an integer value, we know if we will</span></div>
<div class="line"><a name="l06620"></a><span class="lineno"> 6620</span>&#160;    <span class="comment">// ever compare equal / not equal to it.</span></div>
<div class="line"><a name="l06621"></a><span class="lineno"> 6621</span>&#160;    <span class="keywordflow">if</span> (!IsExact) {</div>
<div class="line"><a name="l06622"></a><span class="lineno"> 6622</span>&#160;      <span class="comment">// TODO: Can never be -0.0 and other non-representable values</span></div>
<div class="line"><a name="l06623"></a><span class="lineno"> 6623</span>&#160;      <a class="code" href="classllvm_1_1APFloat.html">APFloat</a> RHSRoundInt(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>);</div>
<div class="line"><a name="l06624"></a><span class="lineno"> 6624</span>&#160;      RHSRoundInt.<a class="code" href="classllvm_1_1APFloat.html#ae4eca54fe8b71670e3bd3a2b18469d73">roundToIntegral</a>(<a class="code" href="structllvm_1_1APFloatBase.html#a22ed74f1ed33c4d33f524a650ea536a6">APFloat::rmNearestTiesToEven</a>);</div>
<div class="line"><a name="l06625"></a><span class="lineno"> 6625</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a> != RHSRoundInt) {</div>
<div class="line"><a name="l06626"></a><span class="lineno"> 6626</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a> == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba024db78a5ed74f64666f3ca4955e6eca">FCmpInst::FCMP_OEQ</a> || <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a> == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba919643b83ce3c9af2e4296ed5e413a1f">FCmpInst::FCMP_UEQ</a>)</div>
<div class="line"><a name="l06627"></a><span class="lineno"> 6627</span>&#160;          <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getFalse());</div>
<div class="line"><a name="l06628"></a><span class="lineno"> 6628</span>&#160; </div>
<div class="line"><a name="l06629"></a><span class="lineno"> 6629</span>&#160;        <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a> == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba8a80b27ca29fe2076b9bbdee02c65464">FCmpInst::FCMP_ONE</a> || <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a> == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bad601460c9371d0f0ada5ae006bdba2bd">FCmpInst::FCMP_UNE</a>);</div>
<div class="line"><a name="l06630"></a><span class="lineno"> 6630</span>&#160;        <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getTrue());</div>
<div class="line"><a name="l06631"></a><span class="lineno"> 6631</span>&#160;      }</div>
<div class="line"><a name="l06632"></a><span class="lineno"> 6632</span>&#160;    }</div>
<div class="line"><a name="l06633"></a><span class="lineno"> 6633</span>&#160; </div>
<div class="line"><a name="l06634"></a><span class="lineno"> 6634</span>&#160;    <span class="comment">// TODO: If the constant is exactly representable, is it always OK to do</span></div>
<div class="line"><a name="l06635"></a><span class="lineno"> 6635</span>&#160;    <span class="comment">// equality compares as integer?</span></div>
<div class="line"><a name="l06636"></a><span class="lineno"> 6636</span>&#160;  }</div>
<div class="line"><a name="l06637"></a><span class="lineno"> 6637</span>&#160; </div>
<div class="line"><a name="l06638"></a><span class="lineno"> 6638</span>&#160;  <span class="comment">// Check to see that the input is converted from an integer type that is small</span></div>
<div class="line"><a name="l06639"></a><span class="lineno"> 6639</span>&#160;  <span class="comment">// enough that preserves all bits.  TODO: check here for &quot;known&quot; sign bits.</span></div>
<div class="line"><a name="l06640"></a><span class="lineno"> 6640</span>&#160;  <span class="comment">// This would allow us to handle (fptosi (x &gt;&gt;s 62) to float) if x is i64 f.e.</span></div>
<div class="line"><a name="l06641"></a><span class="lineno"> 6641</span>&#160;  <span class="keywordtype">unsigned</span> InputSize = IntTy-&gt;<a class="code" href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>();</div>
<div class="line"><a name="l06642"></a><span class="lineno"> 6642</span>&#160; </div>
<div class="line"><a name="l06643"></a><span class="lineno"> 6643</span>&#160;  <span class="comment">// Following test does NOT adjust InputSize downwards for signed inputs,</span></div>
<div class="line"><a name="l06644"></a><span class="lineno"> 6644</span>&#160;  <span class="comment">// because the most negative value still requires all the mantissa bits</span></div>
<div class="line"><a name="l06645"></a><span class="lineno"> 6645</span>&#160;  <span class="comment">// to distinguish it from one less than that value.</span></div>
<div class="line"><a name="l06646"></a><span class="lineno"> 6646</span>&#160;  <span class="keywordflow">if</span> ((<span class="keywordtype">int</span>)InputSize &gt; MantissaWidth) {</div>
<div class="line"><a name="l06647"></a><span class="lineno"> 6647</span>&#160;    <span class="comment">// Conversion would lose accuracy. Check if loss can impact comparison.</span></div>
<div class="line"><a name="l06648"></a><span class="lineno"> 6648</span>&#160;    <span class="keywordtype">int</span> Exp = <a class="code" href="namespacellvm_1_1detail.html#adacdd44e0be9a1b6ebb5c4163bbe8e55">ilogb</a>(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>);</div>
<div class="line"><a name="l06649"></a><span class="lineno"> 6649</span>&#160;    <span class="keywordflow">if</span> (Exp == <a class="code" href="structllvm_1_1APFloatBase.html#aa78db24ff4e5fbe0c3013bd4b9edb7fca4c1772918997b32aa846df0cf32ca5f1">APFloat::IEK_Inf</a>) {</div>
<div class="line"><a name="l06650"></a><span class="lineno"> 6650</span>&#160;      <span class="keywordtype">int</span> MaxExponent = <a class="code" href="namespacellvm_1_1detail.html#adacdd44e0be9a1b6ebb5c4163bbe8e55">ilogb</a>(<a class="code" href="classllvm_1_1APFloat.html#aaa67fe0741c2b3712630ae636f8c2c20">APFloat::getLargest</a>(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>.getSemantics()));</div>
<div class="line"><a name="l06651"></a><span class="lineno"> 6651</span>&#160;      <span class="keywordflow">if</span> (MaxExponent &lt; (<span class="keywordtype">int</span>)InputSize - !LHSUnsigned)</div>
<div class="line"><a name="l06652"></a><span class="lineno"> 6652</span>&#160;        <span class="comment">// Conversion could create infinity.</span></div>
<div class="line"><a name="l06653"></a><span class="lineno"> 6653</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l06654"></a><span class="lineno"> 6654</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l06655"></a><span class="lineno"> 6655</span>&#160;      <span class="comment">// Note that if RHS is zero or NaN, then Exp is negative</span></div>
<div class="line"><a name="l06656"></a><span class="lineno"> 6656</span>&#160;      <span class="comment">// and first condition is trivially false.</span></div>
<div class="line"><a name="l06657"></a><span class="lineno"> 6657</span>&#160;      <span class="keywordflow">if</span> (MantissaWidth &lt;= Exp &amp;&amp; Exp &lt;= (<span class="keywordtype">int</span>)InputSize - !LHSUnsigned)</div>
<div class="line"><a name="l06658"></a><span class="lineno"> 6658</span>&#160;        <span class="comment">// Conversion could affect comparison.</span></div>
<div class="line"><a name="l06659"></a><span class="lineno"> 6659</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l06660"></a><span class="lineno"> 6660</span>&#160;    }</div>
<div class="line"><a name="l06661"></a><span class="lineno"> 6661</span>&#160;  }</div>
<div class="line"><a name="l06662"></a><span class="lineno"> 6662</span>&#160; </div>
<div class="line"><a name="l06663"></a><span class="lineno"> 6663</span>&#160;  <span class="comment">// Otherwise, we can potentially simplify the comparison.  We know that it</span></div>
<div class="line"><a name="l06664"></a><span class="lineno"> 6664</span>&#160;  <span class="comment">// will always come through as an integer value and we know the constant is</span></div>
<div class="line"><a name="l06665"></a><span class="lineno"> 6665</span>&#160;  <span class="comment">// not a NAN (it would have been previously simplified).</span></div>
<div class="line"><a name="l06666"></a><span class="lineno"> 6666</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>.isNaN() &amp;&amp; <span class="stringliteral">&quot;NaN comparison not already folded!&quot;</span>);</div>
<div class="line"><a name="l06667"></a><span class="lineno"> 6667</span>&#160; </div>
<div class="line"><a name="l06668"></a><span class="lineno"> 6668</span>&#160;  <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">ICmpInst::Predicate</a> Pred;</div>
<div class="line"><a name="l06669"></a><span class="lineno"> 6669</span>&#160;  <span class="keywordflow">switch</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getPredicate()) {</div>
<div class="line"><a name="l06670"></a><span class="lineno"> 6670</span>&#160;  <span class="keywordflow">default</span>: <a class="code" href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Unexpected predicate!&quot;</span>);</div>
<div class="line"><a name="l06671"></a><span class="lineno"> 6671</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba919643b83ce3c9af2e4296ed5e413a1f">FCmpInst::FCMP_UEQ</a>:</div>
<div class="line"><a name="l06672"></a><span class="lineno"> 6672</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba024db78a5ed74f64666f3ca4955e6eca">FCmpInst::FCMP_OEQ</a>:</div>
<div class="line"><a name="l06673"></a><span class="lineno"> 6673</span>&#160;    Pred = <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a>;</div>
<div class="line"><a name="l06674"></a><span class="lineno"> 6674</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l06675"></a><span class="lineno"> 6675</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba959268ceeae23abe5c9ad9e895669d0c">FCmpInst::FCMP_UGT</a>:</div>
<div class="line"><a name="l06676"></a><span class="lineno"> 6676</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba4c399f525bbcf03d72af4b303e6eeca8">FCmpInst::FCMP_OGT</a>:</div>
<div class="line"><a name="l06677"></a><span class="lineno"> 6677</span>&#160;    Pred = LHSUnsigned ? <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba607cecdc5172814382033e001ed11fad">ICmpInst::ICMP_UGT</a> : <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba720a42e85f7e981afd61e28473b0000a">ICmpInst::ICMP_SGT</a>;</div>
<div class="line"><a name="l06678"></a><span class="lineno"> 6678</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l06679"></a><span class="lineno"> 6679</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bae51609fc6a425f849d37c28cb9bc0344">FCmpInst::FCMP_UGE</a>:</div>
<div class="line"><a name="l06680"></a><span class="lineno"> 6680</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba541533f34077bbbcfb703a90f6d2da9b">FCmpInst::FCMP_OGE</a>:</div>
<div class="line"><a name="l06681"></a><span class="lineno"> 6681</span>&#160;    Pred = LHSUnsigned ? <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba573bcd571c938fce863525330bbfc4b8">ICmpInst::ICMP_UGE</a> : <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac1aa7b798ba11d2e497d5cce6ce6d3dc">ICmpInst::ICMP_SGE</a>;</div>
<div class="line"><a name="l06682"></a><span class="lineno"> 6682</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l06683"></a><span class="lineno"> 6683</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba75016d5872d90adf89cc1cbf5763f474">FCmpInst::FCMP_ULT</a>:</div>
<div class="line"><a name="l06684"></a><span class="lineno"> 6684</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba326bee0a4a424cef21c1cf8adb8b8dd8">FCmpInst::FCMP_OLT</a>:</div>
<div class="line"><a name="l06685"></a><span class="lineno"> 6685</span>&#160;    Pred = LHSUnsigned ? <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e">ICmpInst::ICMP_ULT</a> : <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba15ae464950ac676919c2f0c7aafc706c">ICmpInst::ICMP_SLT</a>;</div>
<div class="line"><a name="l06686"></a><span class="lineno"> 6686</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l06687"></a><span class="lineno"> 6687</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba396dda2571cd3c575f1d9cb44dc2cc09">FCmpInst::FCMP_ULE</a>:</div>
<div class="line"><a name="l06688"></a><span class="lineno"> 6688</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba9835cfe02fb5027680bd7203b024f77a">FCmpInst::FCMP_OLE</a>:</div>
<div class="line"><a name="l06689"></a><span class="lineno"> 6689</span>&#160;    Pred = LHSUnsigned ? <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bad92f160316221fd4090520bb2b3cefc5">ICmpInst::ICMP_ULE</a> : <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba2751d6136a2819749dcef65dc19a4246">ICmpInst::ICMP_SLE</a>;</div>
<div class="line"><a name="l06690"></a><span class="lineno"> 6690</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l06691"></a><span class="lineno"> 6691</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bad601460c9371d0f0ada5ae006bdba2bd">FCmpInst::FCMP_UNE</a>:</div>
<div class="line"><a name="l06692"></a><span class="lineno"> 6692</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba8a80b27ca29fe2076b9bbdee02c65464">FCmpInst::FCMP_ONE</a>:</div>
<div class="line"><a name="l06693"></a><span class="lineno"> 6693</span>&#160;    Pred = <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a>;</div>
<div class="line"><a name="l06694"></a><span class="lineno"> 6694</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l06695"></a><span class="lineno"> 6695</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa3213b645e029aba8bb1b85213607d5e">FCmpInst::FCMP_ORD</a>:</div>
<div class="line"><a name="l06696"></a><span class="lineno"> 6696</span>&#160;    <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getTrue());</div>
<div class="line"><a name="l06697"></a><span class="lineno"> 6697</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baf0159e4005258dc54f20b6fc227d19ed">FCmpInst::FCMP_UNO</a>:</div>
<div class="line"><a name="l06698"></a><span class="lineno"> 6698</span>&#160;    <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getFalse());</div>
<div class="line"><a name="l06699"></a><span class="lineno"> 6699</span>&#160;  }</div>
<div class="line"><a name="l06700"></a><span class="lineno"> 6700</span>&#160; </div>
<div class="line"><a name="l06701"></a><span class="lineno"> 6701</span>&#160;  <span class="comment">// Now we know that the APFloat is a normal number, zero or inf.</span></div>
<div class="line"><a name="l06702"></a><span class="lineno"> 6702</span>&#160; </div>
<div class="line"><a name="l06703"></a><span class="lineno"> 6703</span>&#160;  <span class="comment">// See if the FP constant is too large for the integer.  For example,</span></div>
<div class="line"><a name="l06704"></a><span class="lineno"> 6704</span>&#160;  <span class="comment">// comparing an i8 to 300.0.</span></div>
<div class="line"><a name="l06705"></a><span class="lineno"> 6705</span>&#160;  <span class="keywordtype">unsigned</span> IntWidth = IntTy-&gt;<a class="code" href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>();</div>
<div class="line"><a name="l06706"></a><span class="lineno"> 6706</span>&#160; </div>
<div class="line"><a name="l06707"></a><span class="lineno"> 6707</span>&#160;  <span class="keywordflow">if</span> (!LHSUnsigned) {</div>
<div class="line"><a name="l06708"></a><span class="lineno"> 6708</span>&#160;    <span class="comment">// If the RHS value is &gt; SignedMax, fold the comparison.  This handles +INF</span></div>
<div class="line"><a name="l06709"></a><span class="lineno"> 6709</span>&#160;    <span class="comment">// and large values.</span></div>
<div class="line"><a name="l06710"></a><span class="lineno"> 6710</span>&#160;    <a class="code" href="classllvm_1_1APFloat.html">APFloat</a> <a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eabccd0de85dfbe7aef83629b318a4df6e">SMax</a>(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>.getSemantics());</div>
<div class="line"><a name="l06711"></a><span class="lineno"> 6711</span>&#160;    <a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eabccd0de85dfbe7aef83629b318a4df6e">SMax</a>.convertFromAPInt(<a class="code" href="classllvm_1_1APInt.html#a562c9513409b74f02cb3a5c9bae672ea">APInt::getSignedMaxValue</a>(IntWidth), <span class="keyword">true</span>,</div>
<div class="line"><a name="l06712"></a><span class="lineno"> 6712</span>&#160;                          <a class="code" href="structllvm_1_1APFloatBase.html#a22ed74f1ed33c4d33f524a650ea536a6">APFloat::rmNearestTiesToEven</a>);</div>
<div class="line"><a name="l06713"></a><span class="lineno"> 6713</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eabccd0de85dfbe7aef83629b318a4df6e">SMax</a> &lt; <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>) { <span class="comment">// smax &lt; 13123.0</span></div>
<div class="line"><a name="l06714"></a><span class="lineno"> 6714</span>&#160;      <span class="keywordflow">if</span> (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a>  || Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba15ae464950ac676919c2f0c7aafc706c">ICmpInst::ICMP_SLT</a> ||</div>
<div class="line"><a name="l06715"></a><span class="lineno"> 6715</span>&#160;          Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba2751d6136a2819749dcef65dc19a4246">ICmpInst::ICMP_SLE</a>)</div>
<div class="line"><a name="l06716"></a><span class="lineno"> 6716</span>&#160;        <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getTrue());</div>
<div class="line"><a name="l06717"></a><span class="lineno"> 6717</span>&#160;      <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getFalse());</div>
<div class="line"><a name="l06718"></a><span class="lineno"> 6718</span>&#160;    }</div>
<div class="line"><a name="l06719"></a><span class="lineno"> 6719</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l06720"></a><span class="lineno"> 6720</span>&#160;    <span class="comment">// If the RHS value is &gt; UnsignedMax, fold the comparison. This handles</span></div>
<div class="line"><a name="l06721"></a><span class="lineno"> 6721</span>&#160;    <span class="comment">// +INF and large values.</span></div>
<div class="line"><a name="l06722"></a><span class="lineno"> 6722</span>&#160;    <a class="code" href="classllvm_1_1APFloat.html">APFloat</a> <a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eafaa1f94cd925672925f691e7f5727a6b">UMax</a>(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>.getSemantics());</div>
<div class="line"><a name="l06723"></a><span class="lineno"> 6723</span>&#160;    <a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eafaa1f94cd925672925f691e7f5727a6b">UMax</a>.convertFromAPInt(<a class="code" href="classllvm_1_1APInt.html#a331d69b5f93e47e7c596062b77dd5913">APInt::getMaxValue</a>(IntWidth), <span class="keyword">false</span>,</div>
<div class="line"><a name="l06724"></a><span class="lineno"> 6724</span>&#160;                          <a class="code" href="structllvm_1_1APFloatBase.html#a22ed74f1ed33c4d33f524a650ea536a6">APFloat::rmNearestTiesToEven</a>);</div>
<div class="line"><a name="l06725"></a><span class="lineno"> 6725</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eafaa1f94cd925672925f691e7f5727a6b">UMax</a> &lt; <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>) { <span class="comment">// umax &lt; 13123.0</span></div>
<div class="line"><a name="l06726"></a><span class="lineno"> 6726</span>&#160;      <span class="keywordflow">if</span> (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a>  || Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e">ICmpInst::ICMP_ULT</a> ||</div>
<div class="line"><a name="l06727"></a><span class="lineno"> 6727</span>&#160;          Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bad92f160316221fd4090520bb2b3cefc5">ICmpInst::ICMP_ULE</a>)</div>
<div class="line"><a name="l06728"></a><span class="lineno"> 6728</span>&#160;        <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getTrue());</div>
<div class="line"><a name="l06729"></a><span class="lineno"> 6729</span>&#160;      <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getFalse());</div>
<div class="line"><a name="l06730"></a><span class="lineno"> 6730</span>&#160;    }</div>
<div class="line"><a name="l06731"></a><span class="lineno"> 6731</span>&#160;  }</div>
<div class="line"><a name="l06732"></a><span class="lineno"> 6732</span>&#160; </div>
<div class="line"><a name="l06733"></a><span class="lineno"> 6733</span>&#160;  <span class="keywordflow">if</span> (!LHSUnsigned) {</div>
<div class="line"><a name="l06734"></a><span class="lineno"> 6734</span>&#160;    <span class="comment">// See if the RHS value is &lt; SignedMin.</span></div>
<div class="line"><a name="l06735"></a><span class="lineno"> 6735</span>&#160;    <a class="code" href="classllvm_1_1APFloat.html">APFloat</a> <a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830ead6bb6a2eca7d60c75e349ea45e138d74">SMin</a>(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>.getSemantics());</div>
<div class="line"><a name="l06736"></a><span class="lineno"> 6736</span>&#160;    <a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830ead6bb6a2eca7d60c75e349ea45e138d74">SMin</a>.convertFromAPInt(<a class="code" href="classllvm_1_1APInt.html#a8f877403433892e14ff0c692cbe9efdf">APInt::getSignedMinValue</a>(IntWidth), <span class="keyword">true</span>,</div>
<div class="line"><a name="l06737"></a><span class="lineno"> 6737</span>&#160;                          <a class="code" href="structllvm_1_1APFloatBase.html#a22ed74f1ed33c4d33f524a650ea536a6">APFloat::rmNearestTiesToEven</a>);</div>
<div class="line"><a name="l06738"></a><span class="lineno"> 6738</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830ead6bb6a2eca7d60c75e349ea45e138d74">SMin</a> &gt; <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>) { <span class="comment">// smin &gt; 12312.0</span></div>
<div class="line"><a name="l06739"></a><span class="lineno"> 6739</span>&#160;      <span class="keywordflow">if</span> (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a> || Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba720a42e85f7e981afd61e28473b0000a">ICmpInst::ICMP_SGT</a> ||</div>
<div class="line"><a name="l06740"></a><span class="lineno"> 6740</span>&#160;          Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac1aa7b798ba11d2e497d5cce6ce6d3dc">ICmpInst::ICMP_SGE</a>)</div>
<div class="line"><a name="l06741"></a><span class="lineno"> 6741</span>&#160;        <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getTrue());</div>
<div class="line"><a name="l06742"></a><span class="lineno"> 6742</span>&#160;      <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getFalse());</div>
<div class="line"><a name="l06743"></a><span class="lineno"> 6743</span>&#160;    }</div>
<div class="line"><a name="l06744"></a><span class="lineno"> 6744</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l06745"></a><span class="lineno"> 6745</span>&#160;    <span class="comment">// See if the RHS value is &lt; UnsignedMin.</span></div>
<div class="line"><a name="l06746"></a><span class="lineno"> 6746</span>&#160;    <a class="code" href="classllvm_1_1APFloat.html">APFloat</a> <a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830ea1c692ed4bf463fb08fca4d8cb8201ac0">UMin</a>(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>.getSemantics());</div>
<div class="line"><a name="l06747"></a><span class="lineno"> 6747</span>&#160;    <a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830ea1c692ed4bf463fb08fca4d8cb8201ac0">UMin</a>.convertFromAPInt(<a class="code" href="classllvm_1_1APInt.html#a65a6479206acd4113b8aa1c0fbc2158c">APInt::getMinValue</a>(IntWidth), <span class="keyword">false</span>,</div>
<div class="line"><a name="l06748"></a><span class="lineno"> 6748</span>&#160;                          <a class="code" href="structllvm_1_1APFloatBase.html#a22ed74f1ed33c4d33f524a650ea536a6">APFloat::rmNearestTiesToEven</a>);</div>
<div class="line"><a name="l06749"></a><span class="lineno"> 6749</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830ea1c692ed4bf463fb08fca4d8cb8201ac0">UMin</a> &gt; <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>) { <span class="comment">// umin &gt; 12312.0</span></div>
<div class="line"><a name="l06750"></a><span class="lineno"> 6750</span>&#160;      <span class="keywordflow">if</span> (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a> || Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba607cecdc5172814382033e001ed11fad">ICmpInst::ICMP_UGT</a> ||</div>
<div class="line"><a name="l06751"></a><span class="lineno"> 6751</span>&#160;          Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba573bcd571c938fce863525330bbfc4b8">ICmpInst::ICMP_UGE</a>)</div>
<div class="line"><a name="l06752"></a><span class="lineno"> 6752</span>&#160;        <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getTrue());</div>
<div class="line"><a name="l06753"></a><span class="lineno"> 6753</span>&#160;      <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getFalse());</div>
<div class="line"><a name="l06754"></a><span class="lineno"> 6754</span>&#160;    }</div>
<div class="line"><a name="l06755"></a><span class="lineno"> 6755</span>&#160;  }</div>
<div class="line"><a name="l06756"></a><span class="lineno"> 6756</span>&#160; </div>
<div class="line"><a name="l06757"></a><span class="lineno"> 6757</span>&#160;  <span class="comment">// Okay, now we know that the FP constant fits in the range [SMIN, SMAX] or</span></div>
<div class="line"><a name="l06758"></a><span class="lineno"> 6758</span>&#160;  <span class="comment">// [0, UMAX], but it may still be fractional.  See if it is fractional by</span></div>
<div class="line"><a name="l06759"></a><span class="lineno"> 6759</span>&#160;  <span class="comment">// casting the FP value to the integer value and back, checking for equality.</span></div>
<div class="line"><a name="l06760"></a><span class="lineno"> 6760</span>&#160;  <span class="comment">// Don&#39;t do this for zero, because -0.0 is not fractional.</span></div>
<div class="line"><a name="l06761"></a><span class="lineno"> 6761</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *RHSInt = LHSUnsigned</div>
<div class="line"><a name="l06762"></a><span class="lineno"> 6762</span>&#160;    ? <a class="code" href="classllvm_1_1ConstantExpr.html#a308f804e11489de248b9b9bbc0ee8d64">ConstantExpr::getFPToUI</a>(RHSC, IntTy)</div>
<div class="line"><a name="l06763"></a><span class="lineno"> 6763</span>&#160;    : <a class="code" href="classllvm_1_1ConstantExpr.html#aca9adeb29ed06c9f8694fc69cb2bf426">ConstantExpr::getFPToSI</a>(RHSC, IntTy);</div>
<div class="line"><a name="l06764"></a><span class="lineno"> 6764</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>.isZero()) {</div>
<div class="line"><a name="l06765"></a><span class="lineno"> 6765</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="namespacellvm_1_1object.html#a42e5b6ee6f67085d2115b2ea44588c47a21197b49151a350ee6714622ed988cc7">Equal</a> = LHSUnsigned</div>
<div class="line"><a name="l06766"></a><span class="lineno"> 6766</span>&#160;      ? <a class="code" href="classllvm_1_1ConstantExpr.html#abe73ff00db626eb990d2236c20811261">ConstantExpr::getUIToFP</a>(RHSInt, RHSC-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()) == RHSC</div>
<div class="line"><a name="l06767"></a><span class="lineno"> 6767</span>&#160;      : <a class="code" href="classllvm_1_1ConstantExpr.html#a76d6befe67c4e647ed64cc5f22114c80">ConstantExpr::getSIToFP</a>(RHSInt, RHSC-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()) == RHSC;</div>
<div class="line"><a name="l06768"></a><span class="lineno"> 6768</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1object.html#a42e5b6ee6f67085d2115b2ea44588c47a21197b49151a350ee6714622ed988cc7">Equal</a>) {</div>
<div class="line"><a name="l06769"></a><span class="lineno"> 6769</span>&#160;      <span class="comment">// If we had a comparison against a fractional value, we have to adjust</span></div>
<div class="line"><a name="l06770"></a><span class="lineno"> 6770</span>&#160;      <span class="comment">// the compare predicate and sometimes the value.  RHSC is rounded towards</span></div>
<div class="line"><a name="l06771"></a><span class="lineno"> 6771</span>&#160;      <span class="comment">// zero at this point.</span></div>
<div class="line"><a name="l06772"></a><span class="lineno"> 6772</span>&#160;      <span class="keywordflow">switch</span> (Pred) {</div>
<div class="line"><a name="l06773"></a><span class="lineno"> 6773</span>&#160;      <span class="keywordflow">default</span>: <a class="code" href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Unexpected integer comparison!&quot;</span>);</div>
<div class="line"><a name="l06774"></a><span class="lineno"> 6774</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a>:  <span class="comment">// (float)int != 4.4   --&gt; true</span></div>
<div class="line"><a name="l06775"></a><span class="lineno"> 6775</span>&#160;        <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getTrue());</div>
<div class="line"><a name="l06776"></a><span class="lineno"> 6776</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a>:  <span class="comment">// (float)int == 4.4   --&gt; false</span></div>
<div class="line"><a name="l06777"></a><span class="lineno"> 6777</span>&#160;        <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getFalse());</div>
<div class="line"><a name="l06778"></a><span class="lineno"> 6778</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bad92f160316221fd4090520bb2b3cefc5">ICmpInst::ICMP_ULE</a>:</div>
<div class="line"><a name="l06779"></a><span class="lineno"> 6779</span>&#160;        <span class="comment">// (float)int &lt;= 4.4   --&gt; int &lt;= 4</span></div>
<div class="line"><a name="l06780"></a><span class="lineno"> 6780</span>&#160;        <span class="comment">// (float)int &lt;= -4.4  --&gt; false</span></div>
<div class="line"><a name="l06781"></a><span class="lineno"> 6781</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>.isNegative())</div>
<div class="line"><a name="l06782"></a><span class="lineno"> 6782</span>&#160;          <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getFalse());</div>
<div class="line"><a name="l06783"></a><span class="lineno"> 6783</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l06784"></a><span class="lineno"> 6784</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba2751d6136a2819749dcef65dc19a4246">ICmpInst::ICMP_SLE</a>:</div>
<div class="line"><a name="l06785"></a><span class="lineno"> 6785</span>&#160;        <span class="comment">// (float)int &lt;= 4.4   --&gt; int &lt;= 4</span></div>
<div class="line"><a name="l06786"></a><span class="lineno"> 6786</span>&#160;        <span class="comment">// (float)int &lt;= -4.4  --&gt; int &lt; -4</span></div>
<div class="line"><a name="l06787"></a><span class="lineno"> 6787</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>.isNegative())</div>
<div class="line"><a name="l06788"></a><span class="lineno"> 6788</span>&#160;          Pred = <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba15ae464950ac676919c2f0c7aafc706c">ICmpInst::ICMP_SLT</a>;</div>
<div class="line"><a name="l06789"></a><span class="lineno"> 6789</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l06790"></a><span class="lineno"> 6790</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e">ICmpInst::ICMP_ULT</a>:</div>
<div class="line"><a name="l06791"></a><span class="lineno"> 6791</span>&#160;        <span class="comment">// (float)int &lt; -4.4   --&gt; false</span></div>
<div class="line"><a name="l06792"></a><span class="lineno"> 6792</span>&#160;        <span class="comment">// (float)int &lt; 4.4    --&gt; int &lt;= 4</span></div>
<div class="line"><a name="l06793"></a><span class="lineno"> 6793</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>.isNegative())</div>
<div class="line"><a name="l06794"></a><span class="lineno"> 6794</span>&#160;          <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getFalse());</div>
<div class="line"><a name="l06795"></a><span class="lineno"> 6795</span>&#160;        Pred = <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bad92f160316221fd4090520bb2b3cefc5">ICmpInst::ICMP_ULE</a>;</div>
<div class="line"><a name="l06796"></a><span class="lineno"> 6796</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l06797"></a><span class="lineno"> 6797</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba15ae464950ac676919c2f0c7aafc706c">ICmpInst::ICMP_SLT</a>:</div>
<div class="line"><a name="l06798"></a><span class="lineno"> 6798</span>&#160;        <span class="comment">// (float)int &lt; -4.4   --&gt; int &lt; -4</span></div>
<div class="line"><a name="l06799"></a><span class="lineno"> 6799</span>&#160;        <span class="comment">// (float)int &lt; 4.4    --&gt; int &lt;= 4</span></div>
<div class="line"><a name="l06800"></a><span class="lineno"> 6800</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>.isNegative())</div>
<div class="line"><a name="l06801"></a><span class="lineno"> 6801</span>&#160;          Pred = <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba2751d6136a2819749dcef65dc19a4246">ICmpInst::ICMP_SLE</a>;</div>
<div class="line"><a name="l06802"></a><span class="lineno"> 6802</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l06803"></a><span class="lineno"> 6803</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba607cecdc5172814382033e001ed11fad">ICmpInst::ICMP_UGT</a>:</div>
<div class="line"><a name="l06804"></a><span class="lineno"> 6804</span>&#160;        <span class="comment">// (float)int &gt; 4.4    --&gt; int &gt; 4</span></div>
<div class="line"><a name="l06805"></a><span class="lineno"> 6805</span>&#160;        <span class="comment">// (float)int &gt; -4.4   --&gt; true</span></div>
<div class="line"><a name="l06806"></a><span class="lineno"> 6806</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>.isNegative())</div>
<div class="line"><a name="l06807"></a><span class="lineno"> 6807</span>&#160;          <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getTrue());</div>
<div class="line"><a name="l06808"></a><span class="lineno"> 6808</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l06809"></a><span class="lineno"> 6809</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba720a42e85f7e981afd61e28473b0000a">ICmpInst::ICMP_SGT</a>:</div>
<div class="line"><a name="l06810"></a><span class="lineno"> 6810</span>&#160;        <span class="comment">// (float)int &gt; 4.4    --&gt; int &gt; 4</span></div>
<div class="line"><a name="l06811"></a><span class="lineno"> 6811</span>&#160;        <span class="comment">// (float)int &gt; -4.4   --&gt; int &gt;= -4</span></div>
<div class="line"><a name="l06812"></a><span class="lineno"> 6812</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>.isNegative())</div>
<div class="line"><a name="l06813"></a><span class="lineno"> 6813</span>&#160;          Pred = <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac1aa7b798ba11d2e497d5cce6ce6d3dc">ICmpInst::ICMP_SGE</a>;</div>
<div class="line"><a name="l06814"></a><span class="lineno"> 6814</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l06815"></a><span class="lineno"> 6815</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba573bcd571c938fce863525330bbfc4b8">ICmpInst::ICMP_UGE</a>:</div>
<div class="line"><a name="l06816"></a><span class="lineno"> 6816</span>&#160;        <span class="comment">// (float)int &gt;= -4.4   --&gt; true</span></div>
<div class="line"><a name="l06817"></a><span class="lineno"> 6817</span>&#160;        <span class="comment">// (float)int &gt;= 4.4    --&gt; int &gt; 4</span></div>
<div class="line"><a name="l06818"></a><span class="lineno"> 6818</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>.isNegative())</div>
<div class="line"><a name="l06819"></a><span class="lineno"> 6819</span>&#160;          <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getTrue());</div>
<div class="line"><a name="l06820"></a><span class="lineno"> 6820</span>&#160;        Pred = <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba607cecdc5172814382033e001ed11fad">ICmpInst::ICMP_UGT</a>;</div>
<div class="line"><a name="l06821"></a><span class="lineno"> 6821</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l06822"></a><span class="lineno"> 6822</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac1aa7b798ba11d2e497d5cce6ce6d3dc">ICmpInst::ICMP_SGE</a>:</div>
<div class="line"><a name="l06823"></a><span class="lineno"> 6823</span>&#160;        <span class="comment">// (float)int &gt;= -4.4   --&gt; int &gt;= -4</span></div>
<div class="line"><a name="l06824"></a><span class="lineno"> 6824</span>&#160;        <span class="comment">// (float)int &gt;= 4.4    --&gt; int &gt; 4</span></div>
<div class="line"><a name="l06825"></a><span class="lineno"> 6825</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>.isNegative())</div>
<div class="line"><a name="l06826"></a><span class="lineno"> 6826</span>&#160;          Pred = <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba720a42e85f7e981afd61e28473b0000a">ICmpInst::ICMP_SGT</a>;</div>
<div class="line"><a name="l06827"></a><span class="lineno"> 6827</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l06828"></a><span class="lineno"> 6828</span>&#160;      }</div>
<div class="line"><a name="l06829"></a><span class="lineno"> 6829</span>&#160;    }</div>
<div class="line"><a name="l06830"></a><span class="lineno"> 6830</span>&#160;  }</div>
<div class="line"><a name="l06831"></a><span class="lineno"> 6831</span>&#160; </div>
<div class="line"><a name="l06832"></a><span class="lineno"> 6832</span>&#160;  <span class="comment">// Lower this FP comparison into an appropriate integer version of the</span></div>
<div class="line"><a name="l06833"></a><span class="lineno"> 6833</span>&#160;  <span class="comment">// comparison.</span></div>
<div class="line"><a name="l06834"></a><span class="lineno"> 6834</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, LHSI-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0), RHSInt);</div>
<div class="line"><a name="l06835"></a><span class="lineno"> 6835</span>&#160;}</div>
<div class="line"><a name="l06836"></a><span class="lineno"> 6836</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l06837"></a><span class="lineno"> 6837</span>&#160;<span class="comment">/// Fold (C / X) &lt; 0.0 --&gt; X &lt; 0.0 if possible. Swap predicate if necessary.</span></div>
<div class="line"><a name="l06838"></a><span class="lineno"><a class="line" href="InstCombineCompares_8cpp.html#ad60c0239275d1852d9e3b7cc06c2fbee"> 6838</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="InstCombineCompares_8cpp.html#ad60c0239275d1852d9e3b7cc06c2fbee">foldFCmpReciprocalAndZero</a>(<a class="code" href="classllvm_1_1FCmpInst.html">FCmpInst</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *LHSI,</div>
<div class="line"><a name="l06839"></a><span class="lineno"> 6839</span>&#160;                                              <a class="code" href="classllvm_1_1Constant.html">Constant</a> *RHSC) {</div>
<div class="line"><a name="l06840"></a><span class="lineno"> 6840</span>&#160;  <span class="comment">// When C is not 0.0 and infinities are not allowed:</span></div>
<div class="line"><a name="l06841"></a><span class="lineno"> 6841</span>&#160;  <span class="comment">// (C / X) &lt; 0.0 is a sign-bit test of X</span></div>
<div class="line"><a name="l06842"></a><span class="lineno"> 6842</span>&#160;  <span class="comment">// (C / X) &lt; 0.0 --&gt; X &lt; 0.0 (if C is positive)</span></div>
<div class="line"><a name="l06843"></a><span class="lineno"> 6843</span>&#160;  <span class="comment">// (C / X) &lt; 0.0 --&gt; X &gt; 0.0 (if C is negative, swap the predicate)</span></div>
<div class="line"><a name="l06844"></a><span class="lineno"> 6844</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l06845"></a><span class="lineno"> 6845</span>&#160;  <span class="comment">// Proof:</span></div>
<div class="line"><a name="l06846"></a><span class="lineno"> 6846</span>&#160;  <span class="comment">// Multiply (C / X) &lt; 0.0 by X * X / C.</span></div>
<div class="line"><a name="l06847"></a><span class="lineno"> 6847</span>&#160;  <span class="comment">// - X is non zero, if it is the flag &#39;ninf&#39; is violated.</span></div>
<div class="line"><a name="l06848"></a><span class="lineno"> 6848</span>&#160;  <span class="comment">// - C defines the sign of X * X * C. Thus it also defines whether to swap</span></div>
<div class="line"><a name="l06849"></a><span class="lineno"> 6849</span>&#160;  <span class="comment">//   the predicate. C is also non zero by definition.</span></div>
<div class="line"><a name="l06850"></a><span class="lineno"> 6850</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l06851"></a><span class="lineno"> 6851</span>&#160;  <span class="comment">// Thus X * X / C is non zero and the transformation is valid. [qed]</span></div>
<div class="line"><a name="l06852"></a><span class="lineno"> 6852</span>&#160; </div>
<div class="line"><a name="l06853"></a><span class="lineno"> 6853</span>&#160;  <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">FCmpInst::Predicate</a> Pred = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getPredicate();</div>
<div class="line"><a name="l06854"></a><span class="lineno"> 6854</span>&#160; </div>
<div class="line"><a name="l06855"></a><span class="lineno"> 6855</span>&#160;  <span class="comment">// Check that predicates are valid.</span></div>
<div class="line"><a name="l06856"></a><span class="lineno"> 6856</span>&#160;  <span class="keywordflow">if</span> ((Pred != <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba4c399f525bbcf03d72af4b303e6eeca8">FCmpInst::FCMP_OGT</a>) &amp;&amp; (Pred != <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba326bee0a4a424cef21c1cf8adb8b8dd8">FCmpInst::FCMP_OLT</a>) &amp;&amp;</div>
<div class="line"><a name="l06857"></a><span class="lineno"> 6857</span>&#160;      (Pred != <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba541533f34077bbbcfb703a90f6d2da9b">FCmpInst::FCMP_OGE</a>) &amp;&amp; (Pred != <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba9835cfe02fb5027680bd7203b024f77a">FCmpInst::FCMP_OLE</a>))</div>
<div class="line"><a name="l06858"></a><span class="lineno"> 6858</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l06859"></a><span class="lineno"> 6859</span>&#160; </div>
<div class="line"><a name="l06860"></a><span class="lineno"> 6860</span>&#160;  <span class="comment">// Check that RHS operand is zero.</span></div>
<div class="line"><a name="l06861"></a><span class="lineno"> 6861</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(RHSC, <a class="code" href="namespacellvm_1_1PatternMatch.html#ab9370b798ae530641518075b0832723a">m_AnyZeroFP</a>()))</div>
<div class="line"><a name="l06862"></a><span class="lineno"> 6862</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l06863"></a><span class="lineno"> 6863</span>&#160; </div>
<div class="line"><a name="l06864"></a><span class="lineno"> 6864</span>&#160;  <span class="comment">// Check fastmath flags (&#39;ninf&#39;).</span></div>
<div class="line"><a name="l06865"></a><span class="lineno"> 6865</span>&#160;  <span class="keywordflow">if</span> (!LHSI-&gt;<a class="code" href="classllvm_1_1Instruction.html#a10d8839494fe8385aa1ddbca6f801d79">hasNoInfs</a>() || !<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.hasNoInfs())</div>
<div class="line"><a name="l06866"></a><span class="lineno"> 6866</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l06867"></a><span class="lineno"> 6867</span>&#160; </div>
<div class="line"><a name="l06868"></a><span class="lineno"> 6868</span>&#160;  <span class="comment">// Check the properties of the dividend. It must not be zero to avoid a</span></div>
<div class="line"><a name="l06869"></a><span class="lineno"> 6869</span>&#160;  <span class="comment">// division by zero (see Proof).</span></div>
<div class="line"><a name="l06870"></a><span class="lineno"> 6870</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1APFloat.html">APFloat</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>;</div>
<div class="line"><a name="l06871"></a><span class="lineno"> 6871</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(LHSI-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0), <a class="code" href="namespacellvm_1_1PatternMatch.html#acd794d7b3653822f61ba126e1678e03f">m_APFloat</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)))</div>
<div class="line"><a name="l06872"></a><span class="lineno"> 6872</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l06873"></a><span class="lineno"> 6873</span>&#160; </div>
<div class="line"><a name="l06874"></a><span class="lineno"> 6874</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;isZero())</div>
<div class="line"><a name="l06875"></a><span class="lineno"> 6875</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l06876"></a><span class="lineno"> 6876</span>&#160; </div>
<div class="line"><a name="l06877"></a><span class="lineno"> 6877</span>&#160;  <span class="comment">// Get swapped predicate if necessary.</span></div>
<div class="line"><a name="l06878"></a><span class="lineno"> 6878</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;isNegative())</div>
<div class="line"><a name="l06879"></a><span class="lineno"> 6879</span>&#160;    Pred = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getSwappedPredicate();</div>
<div class="line"><a name="l06880"></a><span class="lineno"> 6880</span>&#160; </div>
<div class="line"><a name="l06881"></a><span class="lineno"> 6881</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1FCmpInst.html">FCmpInst</a>(Pred, LHSI-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(1), RHSC, <span class="stringliteral">&quot;&quot;</span>, &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l06882"></a><span class="lineno"> 6882</span>&#160;}</div>
<div class="line"><a name="l06883"></a><span class="lineno"> 6883</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l06884"></a><span class="lineno"> 6884</span>&#160;<span class="comment">/// Optimize fabs(X) compared with zero.</span></div>
<div class="line"><a name="l06885"></a><span class="lineno"><a class="line" href="InstCombineCompares_8cpp.html#a2374f343a581f0096975d8a8a8d48fd6"> 6885</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="InstCombineCompares_8cpp.html#a2374f343a581f0096975d8a8a8d48fd6">foldFabsWithFcmpZero</a>(<a class="code" href="classllvm_1_1FCmpInst.html">FCmpInst</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1InstCombinerImpl.html">InstCombinerImpl</a> &amp;IC) {</div>
<div class="line"><a name="l06886"></a><span class="lineno"> 6886</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>;</div>
<div class="line"><a name="l06887"></a><span class="lineno"> 6887</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(0), <a class="code" href="namespacellvm_1_1PatternMatch.html#a7638daf70e17d093dd35f06211dc7a87">m_FAbs</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>))))</div>
<div class="line"><a name="l06888"></a><span class="lineno"> 6888</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l06889"></a><span class="lineno"> 6889</span>&#160; </div>
<div class="line"><a name="l06890"></a><span class="lineno"> 6890</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1APFloat.html">APFloat</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>;</div>
<div class="line"><a name="l06891"></a><span class="lineno"> 6891</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(1), <a class="code" href="namespacellvm_1_1PatternMatch.html#acd794d7b3653822f61ba126e1678e03f">m_APFloat</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)))</div>
<div class="line"><a name="l06892"></a><span class="lineno"> 6892</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l06893"></a><span class="lineno"> 6893</span>&#160; </div>
<div class="line"><a name="l06894"></a><span class="lineno"> 6894</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;isPosZero()) {</div>
<div class="line"><a name="l06895"></a><span class="lineno"> 6895</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;isSmallestNormalized())</div>
<div class="line"><a name="l06896"></a><span class="lineno"> 6896</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l06897"></a><span class="lineno"> 6897</span>&#160; </div>
<div class="line"><a name="l06898"></a><span class="lineno"> 6898</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getFunction();</div>
<div class="line"><a name="l06899"></a><span class="lineno"> 6899</span>&#160;    <a class="code" href="structllvm_1_1DenormalMode.html">DenormalMode</a> <a class="code" href="SIWholeQuadMode_8cpp.html#a0c198437833c48138f49e3589bd08773">Mode</a> = <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;getDenormalMode(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;getSemantics());</div>
<div class="line"><a name="l06900"></a><span class="lineno"> 6900</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="SIWholeQuadMode_8cpp.html#a0c198437833c48138f49e3589bd08773">Mode</a>.Input == <a class="code" href="structllvm_1_1DenormalMode.html#a29b26e3ae30f3f6ec4106ff181282893a40bc80ae1d362a1461703637e946cbd8">DenormalMode::PreserveSign</a> ||</div>
<div class="line"><a name="l06901"></a><span class="lineno"> 6901</span>&#160;        <a class="code" href="SIWholeQuadMode_8cpp.html#a0c198437833c48138f49e3589bd08773">Mode</a>.Input == <a class="code" href="structllvm_1_1DenormalMode.html#a29b26e3ae30f3f6ec4106ff181282893a7de61db082dcdc6e8d34d1c5fd2e9757">DenormalMode::PositiveZero</a>) {</div>
<div class="line"><a name="l06902"></a><span class="lineno"> 6902</span>&#160; </div>
<div class="line"><a name="l06903"></a><span class="lineno"> 6903</span>&#160;      <span class="keyword">auto</span> replaceFCmp = [](<a class="code" href="classllvm_1_1FCmpInst.html">FCmpInst</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">FCmpInst::Predicate</a> <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>, <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>) {</div>
<div class="line"><a name="l06904"></a><span class="lineno"> 6904</span>&#160;        <a class="code" href="classllvm_1_1Constant.html">Constant</a> *Zero = <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">ConstantFP::getNullValue</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getType());</div>
<div class="line"><a name="l06905"></a><span class="lineno"> 6905</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1FCmpInst.html">FCmpInst</a>(<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, Zero, <span class="stringliteral">&quot;&quot;</span>, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l06906"></a><span class="lineno"> 6906</span>&#160;      };</div>
<div class="line"><a name="l06907"></a><span class="lineno"> 6907</span>&#160; </div>
<div class="line"><a name="l06908"></a><span class="lineno"> 6908</span>&#160;      <span class="keywordflow">switch</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getPredicate()) {</div>
<div class="line"><a name="l06909"></a><span class="lineno"> 6909</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba326bee0a4a424cef21c1cf8adb8b8dd8">FCmpInst::FCMP_OLT</a>:</div>
<div class="line"><a name="l06910"></a><span class="lineno"> 6910</span>&#160;        <span class="comment">// fcmp olt fabs(x), smallest_normalized_number -&gt; fcmp oeq x, 0.0</span></div>
<div class="line"><a name="l06911"></a><span class="lineno"> 6911</span>&#160;        <span class="keywordflow">return</span> replaceFCmp(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba024db78a5ed74f64666f3ca4955e6eca">FCmpInst::FCMP_OEQ</a>, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>);</div>
<div class="line"><a name="l06912"></a><span class="lineno"> 6912</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bae51609fc6a425f849d37c28cb9bc0344">FCmpInst::FCMP_UGE</a>:</div>
<div class="line"><a name="l06913"></a><span class="lineno"> 6913</span>&#160;        <span class="comment">// fcmp uge fabs(x), smallest_normalized_number -&gt; fcmp une x, 0.0</span></div>
<div class="line"><a name="l06914"></a><span class="lineno"> 6914</span>&#160;        <span class="keywordflow">return</span> replaceFCmp(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bad601460c9371d0f0ada5ae006bdba2bd">FCmpInst::FCMP_UNE</a>, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>);</div>
<div class="line"><a name="l06915"></a><span class="lineno"> 6915</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba541533f34077bbbcfb703a90f6d2da9b">FCmpInst::FCMP_OGE</a>:</div>
<div class="line"><a name="l06916"></a><span class="lineno"> 6916</span>&#160;        <span class="comment">// fcmp oge fabs(x), smallest_normalized_number -&gt; fcmp one x, 0.0</span></div>
<div class="line"><a name="l06917"></a><span class="lineno"> 6917</span>&#160;        <span class="keywordflow">return</span> replaceFCmp(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba8a80b27ca29fe2076b9bbdee02c65464">FCmpInst::FCMP_ONE</a>, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>);</div>
<div class="line"><a name="l06918"></a><span class="lineno"> 6918</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba75016d5872d90adf89cc1cbf5763f474">FCmpInst::FCMP_ULT</a>:</div>
<div class="line"><a name="l06919"></a><span class="lineno"> 6919</span>&#160;        <span class="comment">// fcmp ult fabs(x), smallest_normalized_number -&gt; fcmp ueq x, 0.0</span></div>
<div class="line"><a name="l06920"></a><span class="lineno"> 6920</span>&#160;        <span class="keywordflow">return</span> replaceFCmp(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba919643b83ce3c9af2e4296ed5e413a1f">FCmpInst::FCMP_UEQ</a>, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>);</div>
<div class="line"><a name="l06921"></a><span class="lineno"> 6921</span>&#160;      <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l06922"></a><span class="lineno"> 6922</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l06923"></a><span class="lineno"> 6923</span>&#160;      }</div>
<div class="line"><a name="l06924"></a><span class="lineno"> 6924</span>&#160;    }</div>
<div class="line"><a name="l06925"></a><span class="lineno"> 6925</span>&#160; </div>
<div class="line"><a name="l06926"></a><span class="lineno"> 6926</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l06927"></a><span class="lineno"> 6927</span>&#160;  }</div>
<div class="line"><a name="l06928"></a><span class="lineno"> 6928</span>&#160; </div>
<div class="line"><a name="l06929"></a><span class="lineno"> 6929</span>&#160;  <span class="keyword">auto</span> replacePredAndOp0 = [&amp;IC](<a class="code" href="classllvm_1_1FCmpInst.html">FCmpInst</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">FCmpInst::Predicate</a> <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>, <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>) {</div>
<div class="line"><a name="l06930"></a><span class="lineno"> 6930</span>&#160;    <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;setPredicate(<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>);</div>
<div class="line"><a name="l06931"></a><span class="lineno"> 6931</span>&#160;    <span class="keywordflow">return</span> IC.<a class="code" href="classllvm_1_1InstCombiner.html#abc13043585e5845ce7fc26b858851ec9">replaceOperand</a>(*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, 0, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>);</div>
<div class="line"><a name="l06932"></a><span class="lineno"> 6932</span>&#160;  };</div>
<div class="line"><a name="l06933"></a><span class="lineno"> 6933</span>&#160; </div>
<div class="line"><a name="l06934"></a><span class="lineno"> 6934</span>&#160;  <span class="keywordflow">switch</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getPredicate()) {</div>
<div class="line"><a name="l06935"></a><span class="lineno"> 6935</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bae51609fc6a425f849d37c28cb9bc0344">FCmpInst::FCMP_UGE</a>:</div>
<div class="line"><a name="l06936"></a><span class="lineno"> 6936</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba326bee0a4a424cef21c1cf8adb8b8dd8">FCmpInst::FCMP_OLT</a>:</div>
<div class="line"><a name="l06937"></a><span class="lineno"> 6937</span>&#160;    <span class="comment">// fabs(X) &gt;= 0.0 --&gt; true</span></div>
<div class="line"><a name="l06938"></a><span class="lineno"> 6938</span>&#160;    <span class="comment">// fabs(X) &lt;  0.0 --&gt; false</span></div>
<div class="line"><a name="l06939"></a><span class="lineno"> 6939</span>&#160;    <a class="code" href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;fcmp should have simplified&quot;</span>);</div>
<div class="line"><a name="l06940"></a><span class="lineno"> 6940</span>&#160; </div>
<div class="line"><a name="l06941"></a><span class="lineno"> 6941</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba4c399f525bbcf03d72af4b303e6eeca8">FCmpInst::FCMP_OGT</a>:</div>
<div class="line"><a name="l06942"></a><span class="lineno"> 6942</span>&#160;    <span class="comment">// fabs(X) &gt; 0.0 --&gt; X != 0.0</span></div>
<div class="line"><a name="l06943"></a><span class="lineno"> 6943</span>&#160;    <span class="keywordflow">return</span> replacePredAndOp0(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba8a80b27ca29fe2076b9bbdee02c65464">FCmpInst::FCMP_ONE</a>, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>);</div>
<div class="line"><a name="l06944"></a><span class="lineno"> 6944</span>&#160; </div>
<div class="line"><a name="l06945"></a><span class="lineno"> 6945</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba959268ceeae23abe5c9ad9e895669d0c">FCmpInst::FCMP_UGT</a>:</div>
<div class="line"><a name="l06946"></a><span class="lineno"> 6946</span>&#160;    <span class="comment">// fabs(X) u&gt; 0.0 --&gt; X u!= 0.0</span></div>
<div class="line"><a name="l06947"></a><span class="lineno"> 6947</span>&#160;    <span class="keywordflow">return</span> replacePredAndOp0(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bad601460c9371d0f0ada5ae006bdba2bd">FCmpInst::FCMP_UNE</a>, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>);</div>
<div class="line"><a name="l06948"></a><span class="lineno"> 6948</span>&#160; </div>
<div class="line"><a name="l06949"></a><span class="lineno"> 6949</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba9835cfe02fb5027680bd7203b024f77a">FCmpInst::FCMP_OLE</a>:</div>
<div class="line"><a name="l06950"></a><span class="lineno"> 6950</span>&#160;    <span class="comment">// fabs(X) &lt;= 0.0 --&gt; X == 0.0</span></div>
<div class="line"><a name="l06951"></a><span class="lineno"> 6951</span>&#160;    <span class="keywordflow">return</span> replacePredAndOp0(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba024db78a5ed74f64666f3ca4955e6eca">FCmpInst::FCMP_OEQ</a>, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>);</div>
<div class="line"><a name="l06952"></a><span class="lineno"> 6952</span>&#160; </div>
<div class="line"><a name="l06953"></a><span class="lineno"> 6953</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba396dda2571cd3c575f1d9cb44dc2cc09">FCmpInst::FCMP_ULE</a>:</div>
<div class="line"><a name="l06954"></a><span class="lineno"> 6954</span>&#160;    <span class="comment">// fabs(X) u&lt;= 0.0 --&gt; X u== 0.0</span></div>
<div class="line"><a name="l06955"></a><span class="lineno"> 6955</span>&#160;    <span class="keywordflow">return</span> replacePredAndOp0(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba919643b83ce3c9af2e4296ed5e413a1f">FCmpInst::FCMP_UEQ</a>, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>);</div>
<div class="line"><a name="l06956"></a><span class="lineno"> 6956</span>&#160; </div>
<div class="line"><a name="l06957"></a><span class="lineno"> 6957</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba541533f34077bbbcfb703a90f6d2da9b">FCmpInst::FCMP_OGE</a>:</div>
<div class="line"><a name="l06958"></a><span class="lineno"> 6958</span>&#160;    <span class="comment">// fabs(X) &gt;= 0.0 --&gt; !isnan(X)</span></div>
<div class="line"><a name="l06959"></a><span class="lineno"> 6959</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.hasNoNaNs() &amp;&amp; <span class="stringliteral">&quot;fcmp should have simplified&quot;</span>);</div>
<div class="line"><a name="l06960"></a><span class="lineno"> 6960</span>&#160;    <span class="keywordflow">return</span> replacePredAndOp0(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa3213b645e029aba8bb1b85213607d5e">FCmpInst::FCMP_ORD</a>, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>);</div>
<div class="line"><a name="l06961"></a><span class="lineno"> 6961</span>&#160; </div>
<div class="line"><a name="l06962"></a><span class="lineno"> 6962</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba75016d5872d90adf89cc1cbf5763f474">FCmpInst::FCMP_ULT</a>:</div>
<div class="line"><a name="l06963"></a><span class="lineno"> 6963</span>&#160;    <span class="comment">// fabs(X) u&lt; 0.0 --&gt; isnan(X)</span></div>
<div class="line"><a name="l06964"></a><span class="lineno"> 6964</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.hasNoNaNs() &amp;&amp; <span class="stringliteral">&quot;fcmp should have simplified&quot;</span>);</div>
<div class="line"><a name="l06965"></a><span class="lineno"> 6965</span>&#160;    <span class="keywordflow">return</span> replacePredAndOp0(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baf0159e4005258dc54f20b6fc227d19ed">FCmpInst::FCMP_UNO</a>, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>);</div>
<div class="line"><a name="l06966"></a><span class="lineno"> 6966</span>&#160; </div>
<div class="line"><a name="l06967"></a><span class="lineno"> 6967</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba024db78a5ed74f64666f3ca4955e6eca">FCmpInst::FCMP_OEQ</a>:</div>
<div class="line"><a name="l06968"></a><span class="lineno"> 6968</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba919643b83ce3c9af2e4296ed5e413a1f">FCmpInst::FCMP_UEQ</a>:</div>
<div class="line"><a name="l06969"></a><span class="lineno"> 6969</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba8a80b27ca29fe2076b9bbdee02c65464">FCmpInst::FCMP_ONE</a>:</div>
<div class="line"><a name="l06970"></a><span class="lineno"> 6970</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bad601460c9371d0f0ada5ae006bdba2bd">FCmpInst::FCMP_UNE</a>:</div>
<div class="line"><a name="l06971"></a><span class="lineno"> 6971</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa3213b645e029aba8bb1b85213607d5e">FCmpInst::FCMP_ORD</a>:</div>
<div class="line"><a name="l06972"></a><span class="lineno"> 6972</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baf0159e4005258dc54f20b6fc227d19ed">FCmpInst::FCMP_UNO</a>:</div>
<div class="line"><a name="l06973"></a><span class="lineno"> 6973</span>&#160;    <span class="comment">// Look through the fabs() because it doesn&#39;t change anything but the sign.</span></div>
<div class="line"><a name="l06974"></a><span class="lineno"> 6974</span>&#160;    <span class="comment">// fabs(X) == 0.0 --&gt; X == 0.0,</span></div>
<div class="line"><a name="l06975"></a><span class="lineno"> 6975</span>&#160;    <span class="comment">// fabs(X) != 0.0 --&gt; X != 0.0</span></div>
<div class="line"><a name="l06976"></a><span class="lineno"> 6976</span>&#160;    <span class="comment">// isnan(fabs(X)) --&gt; isnan(X)</span></div>
<div class="line"><a name="l06977"></a><span class="lineno"> 6977</span>&#160;    <span class="comment">// !isnan(fabs(X) --&gt; !isnan(X)</span></div>
<div class="line"><a name="l06978"></a><span class="lineno"> 6978</span>&#160;    <span class="keywordflow">return</span> replacePredAndOp0(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getPredicate(), <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>);</div>
<div class="line"><a name="l06979"></a><span class="lineno"> 6979</span>&#160; </div>
<div class="line"><a name="l06980"></a><span class="lineno"> 6980</span>&#160;  <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l06981"></a><span class="lineno"> 6981</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l06982"></a><span class="lineno"> 6982</span>&#160;  }</div>
<div class="line"><a name="l06983"></a><span class="lineno"> 6983</span>&#160;}</div>
<div class="line"><a name="l06984"></a><span class="lineno"> 6984</span>&#160; </div>
<div class="line"><a name="l06985"></a><span class="lineno"><a class="line" href="InstCombineCompares_8cpp.html#ab335c3e40e2c31212c57288e514ad149"> 6985</a></span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="InstCombineCompares_8cpp.html#ab335c3e40e2c31212c57288e514ad149">foldFCmpFNegCommonOp</a>(<a class="code" href="classllvm_1_1FCmpInst.html">FCmpInst</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l06986"></a><span class="lineno"> 6986</span>&#160;  <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">CmpInst::Predicate</a> Pred = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getPredicate();</div>
<div class="line"><a name="l06987"></a><span class="lineno"> 6987</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Op0 = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(0), *Op1 = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(1);</div>
<div class="line"><a name="l06988"></a><span class="lineno"> 6988</span>&#160; </div>
<div class="line"><a name="l06989"></a><span class="lineno"> 6989</span>&#160;  <span class="comment">// Canonicalize fneg as Op1.</span></div>
<div class="line"><a name="l06990"></a><span class="lineno"> 6990</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#af431ec215bba8bb9c56e7541d99920f2">m_FNeg</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>())) &amp;&amp; !<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#af431ec215bba8bb9c56e7541d99920f2">m_FNeg</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>()))) {</div>
<div class="line"><a name="l06991"></a><span class="lineno"> 6991</span>&#160;    <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(Op0, Op1);</div>
<div class="line"><a name="l06992"></a><span class="lineno"> 6992</span>&#160;    Pred = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getSwappedPredicate();</div>
<div class="line"><a name="l06993"></a><span class="lineno"> 6993</span>&#160;  }</div>
<div class="line"><a name="l06994"></a><span class="lineno"> 6994</span>&#160; </div>
<div class="line"><a name="l06995"></a><span class="lineno"> 6995</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#af431ec215bba8bb9c56e7541d99920f2">m_FNeg</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(Op0))))</div>
<div class="line"><a name="l06996"></a><span class="lineno"> 6996</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l06997"></a><span class="lineno"> 6997</span>&#160; </div>
<div class="line"><a name="l06998"></a><span class="lineno"> 6998</span>&#160;  <span class="comment">// Replace the negated operand with 0.0:</span></div>
<div class="line"><a name="l06999"></a><span class="lineno"> 6999</span>&#160;  <span class="comment">// fcmp Pred Op0, -Op0 --&gt; fcmp Pred Op0, 0.0</span></div>
<div class="line"><a name="l07000"></a><span class="lineno"> 7000</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *Zero = <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">ConstantFP::getNullValue</a>(Op0-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>());</div>
<div class="line"><a name="l07001"></a><span class="lineno"> 7001</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1FCmpInst.html">FCmpInst</a>(Pred, Op0, Zero, <span class="stringliteral">&quot;&quot;</span>, &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l07002"></a><span class="lineno"> 7002</span>&#160;}</div>
<div class="line"><a name="l07003"></a><span class="lineno"> 7003</span>&#160; </div>
<div class="line"><a name="l07004"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombinerImpl.html#a86b0437dceb8e39c8185dc7def325011"> 7004</a></span>&#160;<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombinerImpl.html#a86b0437dceb8e39c8185dc7def325011">InstCombinerImpl::visitFCmpInst</a>(<a class="code" href="classllvm_1_1FCmpInst.html">FCmpInst</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l07005"></a><span class="lineno"> 7005</span>&#160;  <span class="keywordtype">bool</span> Changed = <span class="keyword">false</span>;</div>
<div class="line"><a name="l07006"></a><span class="lineno"> 7006</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l07007"></a><span class="lineno"> 7007</span>&#160;<span class="comment">  /// Orders the operands of the compare so that they are listed from most</span></div>
<div class="line"><a name="l07008"></a><span class="lineno"> 7008</span>&#160;<span class="comment">  /// complex to least complex.  This puts constants before unary operators,</span></div>
<div class="line"><a name="l07009"></a><span class="lineno"> 7009</span>&#160;<span class="comment">  /// before binary operators.</span></div>
<div class="line"><a name="l07010"></a><span class="lineno"> 7010</span>&#160;<span class="comment"></span>  <span class="keywordflow">if</span> (getComplexity(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(0)) &lt; getComplexity(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(1))) {</div>
<div class="line"><a name="l07011"></a><span class="lineno"> 7011</span>&#160;    <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.swapOperands();</div>
<div class="line"><a name="l07012"></a><span class="lineno"> 7012</span>&#160;    Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l07013"></a><span class="lineno"> 7013</span>&#160;  }</div>
<div class="line"><a name="l07014"></a><span class="lineno"> 7014</span>&#160; </div>
<div class="line"><a name="l07015"></a><span class="lineno"> 7015</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">CmpInst::Predicate</a> Pred = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getPredicate();</div>
<div class="line"><a name="l07016"></a><span class="lineno"> 7016</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Op0 = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(0), *Op1 = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(1);</div>
<div class="line"><a name="l07017"></a><span class="lineno"> 7017</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V = <a class="code" href="namespacellvm.html#ae490b518ab7ca0abfd0abad2e2eabb0f">simplifyFCmpInst</a>(Pred, Op0, Op1, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getFastMathFlags(),</div>
<div class="line"><a name="l07018"></a><span class="lineno"> 7018</span>&#160;                                  SQ.getWithInstruction(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)))</div>
<div class="line"><a name="l07019"></a><span class="lineno"> 7019</span>&#160;    <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, V);</div>
<div class="line"><a name="l07020"></a><span class="lineno"> 7020</span>&#160; </div>
<div class="line"><a name="l07021"></a><span class="lineno"> 7021</span>&#160;  <span class="comment">// Simplify &#39;fcmp pred X, X&#39;</span></div>
<div class="line"><a name="l07022"></a><span class="lineno"> 7022</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *OpType = Op0-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>();</div>
<div class="line"><a name="l07023"></a><span class="lineno"> 7023</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(OpType == Op1-&gt;getType() &amp;&amp; <span class="stringliteral">&quot;fcmp with different-typed operands?&quot;</span>);</div>
<div class="line"><a name="l07024"></a><span class="lineno"> 7024</span>&#160;  <span class="keywordflow">if</span> (Op0 == Op1) {</div>
<div class="line"><a name="l07025"></a><span class="lineno"> 7025</span>&#160;    <span class="keywordflow">switch</span> (Pred) {</div>
<div class="line"><a name="l07026"></a><span class="lineno"> 7026</span>&#160;      <span class="keywordflow">default</span>: <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l07027"></a><span class="lineno"> 7027</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baf0159e4005258dc54f20b6fc227d19ed">FCmpInst::FCMP_UNO</a>:    <span class="comment">// True if unordered: isnan(X) | isnan(Y)</span></div>
<div class="line"><a name="l07028"></a><span class="lineno"> 7028</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba75016d5872d90adf89cc1cbf5763f474">FCmpInst::FCMP_ULT</a>:    <span class="comment">// True if unordered or less than</span></div>
<div class="line"><a name="l07029"></a><span class="lineno"> 7029</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba959268ceeae23abe5c9ad9e895669d0c">FCmpInst::FCMP_UGT</a>:    <span class="comment">// True if unordered or greater than</span></div>
<div class="line"><a name="l07030"></a><span class="lineno"> 7030</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bad601460c9371d0f0ada5ae006bdba2bd">FCmpInst::FCMP_UNE</a>:    <span class="comment">// True if unordered or not equal</span></div>
<div class="line"><a name="l07031"></a><span class="lineno"> 7031</span>&#160;      <span class="comment">// Canonicalize these to be &#39;fcmp uno %X, 0.0&#39;.</span></div>
<div class="line"><a name="l07032"></a><span class="lineno"> 7032</span>&#160;      <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.setPredicate(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baf0159e4005258dc54f20b6fc227d19ed">FCmpInst::FCMP_UNO</a>);</div>
<div class="line"><a name="l07033"></a><span class="lineno"> 7033</span>&#160;      <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.setOperand(1, <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(OpType));</div>
<div class="line"><a name="l07034"></a><span class="lineno"> 7034</span>&#160;      <span class="keywordflow">return</span> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l07035"></a><span class="lineno"> 7035</span>&#160; </div>
<div class="line"><a name="l07036"></a><span class="lineno"> 7036</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa3213b645e029aba8bb1b85213607d5e">FCmpInst::FCMP_ORD</a>:    <span class="comment">// True if ordered (no nans)</span></div>
<div class="line"><a name="l07037"></a><span class="lineno"> 7037</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba024db78a5ed74f64666f3ca4955e6eca">FCmpInst::FCMP_OEQ</a>:    <span class="comment">// True if ordered and equal</span></div>
<div class="line"><a name="l07038"></a><span class="lineno"> 7038</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba541533f34077bbbcfb703a90f6d2da9b">FCmpInst::FCMP_OGE</a>:    <span class="comment">// True if ordered and greater than or equal</span></div>
<div class="line"><a name="l07039"></a><span class="lineno"> 7039</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba9835cfe02fb5027680bd7203b024f77a">FCmpInst::FCMP_OLE</a>:    <span class="comment">// True if ordered and less than or equal</span></div>
<div class="line"><a name="l07040"></a><span class="lineno"> 7040</span>&#160;      <span class="comment">// Canonicalize these to be &#39;fcmp ord %X, 0.0&#39;.</span></div>
<div class="line"><a name="l07041"></a><span class="lineno"> 7041</span>&#160;      <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.setPredicate(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa3213b645e029aba8bb1b85213607d5e">FCmpInst::FCMP_ORD</a>);</div>
<div class="line"><a name="l07042"></a><span class="lineno"> 7042</span>&#160;      <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.setOperand(1, <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(OpType));</div>
<div class="line"><a name="l07043"></a><span class="lineno"> 7043</span>&#160;      <span class="keywordflow">return</span> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l07044"></a><span class="lineno"> 7044</span>&#160;    }</div>
<div class="line"><a name="l07045"></a><span class="lineno"> 7045</span>&#160;  }</div>
<div class="line"><a name="l07046"></a><span class="lineno"> 7046</span>&#160; </div>
<div class="line"><a name="l07047"></a><span class="lineno"> 7047</span>&#160;  <span class="comment">// If we&#39;re just checking for a NaN (ORD/UNO) and have a non-NaN operand,</span></div>
<div class="line"><a name="l07048"></a><span class="lineno"> 7048</span>&#160;  <span class="comment">// then canonicalize the operand to 0.0.</span></div>
<div class="line"><a name="l07049"></a><span class="lineno"> 7049</span>&#160;  <span class="keywordflow">if</span> (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa3213b645e029aba8bb1b85213607d5e">CmpInst::FCMP_ORD</a> || Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baf0159e4005258dc54f20b6fc227d19ed">CmpInst::FCMP_UNO</a>) {</div>
<div class="line"><a name="l07050"></a><span class="lineno"> 7050</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a7a371c4faf8e41f7cac98ad694f504dc">m_PosZeroFP</a>()) &amp;&amp; <a class="code" href="namespacellvm.html#a4c88ebe757c51044c4ad4275012e4593">isKnownNeverNaN</a>(Op0, &amp;TLI))</div>
<div class="line"><a name="l07051"></a><span class="lineno"> 7051</span>&#160;      <span class="keywordflow">return</span> replaceOperand(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, 0, <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">ConstantFP::getNullValue</a>(OpType));</div>
<div class="line"><a name="l07052"></a><span class="lineno"> 7052</span>&#160; </div>
<div class="line"><a name="l07053"></a><span class="lineno"> 7053</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#a7a371c4faf8e41f7cac98ad694f504dc">m_PosZeroFP</a>()) &amp;&amp; <a class="code" href="namespacellvm.html#a4c88ebe757c51044c4ad4275012e4593">isKnownNeverNaN</a>(Op1, &amp;TLI))</div>
<div class="line"><a name="l07054"></a><span class="lineno"> 7054</span>&#160;      <span class="keywordflow">return</span> replaceOperand(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, 1, <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">ConstantFP::getNullValue</a>(OpType));</div>
<div class="line"><a name="l07055"></a><span class="lineno"> 7055</span>&#160;  }</div>
<div class="line"><a name="l07056"></a><span class="lineno"> 7056</span>&#160; </div>
<div class="line"><a name="l07057"></a><span class="lineno"> 7057</span>&#160;  <span class="comment">// fcmp pred (fneg X), (fneg Y) -&gt; fcmp swap(pred) X, Y</span></div>
<div class="line"><a name="l07058"></a><span class="lineno"> 7058</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, *<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>;</div>
<div class="line"><a name="l07059"></a><span class="lineno"> 7059</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#af431ec215bba8bb9c56e7541d99920f2">m_FNeg</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>))) &amp;&amp; <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#af431ec215bba8bb9c56e7541d99920f2">m_FNeg</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>))))</div>
<div class="line"><a name="l07060"></a><span class="lineno"> 7060</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1FCmpInst.html">FCmpInst</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getSwappedPredicate(), <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, <span class="stringliteral">&quot;&quot;</span>, &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l07061"></a><span class="lineno"> 7061</span>&#160; </div>
<div class="line"><a name="l07062"></a><span class="lineno"> 7062</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *R = <a class="code" href="InstCombineCompares_8cpp.html#ab335c3e40e2c31212c57288e514ad149">foldFCmpFNegCommonOp</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l07063"></a><span class="lineno"> 7063</span>&#160;    <span class="keywordflow">return</span> R;</div>
<div class="line"><a name="l07064"></a><span class="lineno"> 7064</span>&#160; </div>
<div class="line"><a name="l07065"></a><span class="lineno"> 7065</span>&#160;  <span class="comment">// Test if the FCmpInst instruction is used exclusively by a select as</span></div>
<div class="line"><a name="l07066"></a><span class="lineno"> 7066</span>&#160;  <span class="comment">// part of a minimum or maximum operation. If so, refrain from doing</span></div>
<div class="line"><a name="l07067"></a><span class="lineno"> 7067</span>&#160;  <span class="comment">// any other folding. This helps out other analyses which understand</span></div>
<div class="line"><a name="l07068"></a><span class="lineno"> 7068</span>&#160;  <span class="comment">// non-obfuscated minimum and maximum idioms, such as ScalarEvolution</span></div>
<div class="line"><a name="l07069"></a><span class="lineno"> 7069</span>&#160;  <span class="comment">// and CodeGen. And in this case, at least one of the comparison</span></div>
<div class="line"><a name="l07070"></a><span class="lineno"> 7070</span>&#160;  <span class="comment">// operands has at least one user besides the compare (the select),</span></div>
<div class="line"><a name="l07071"></a><span class="lineno"> 7071</span>&#160;  <span class="comment">// which would often largely negate the benefit of folding anyway.</span></div>
<div class="line"><a name="l07072"></a><span class="lineno"> 7072</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.hasOneUse())</div>
<div class="line"><a name="l07073"></a><span class="lineno"> 7073</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1SelectInst.html">SelectInst</a> *<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a> = dyn_cast&lt;SelectInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.user_back())) {</div>
<div class="line"><a name="l07074"></a><span class="lineno"> 7074</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *A, *<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>;</div>
<div class="line"><a name="l07075"></a><span class="lineno"> 7075</span>&#160;      <a class="code" href="structllvm_1_1SelectPatternResult.html">SelectPatternResult</a> SPR = <a class="code" href="namespacellvm.html#a7aad5a0e62a54747f455651ee2dd08ed">matchSelectPattern</a>(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>, A, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div>
<div class="line"><a name="l07076"></a><span class="lineno"> 7076</span>&#160;      <span class="keywordflow">if</span> (SPR.<a class="code" href="structllvm_1_1SelectPatternResult.html#a3ca9c2098248eac9051008d6eb9f321d">Flavor</a> != <a class="code" href="namespacellvm.html#a6bf471c1030973649c2e426afc212097aee3dafa9fac8f6fa1e1110ef463cc452">SPF_UNKNOWN</a>)</div>
<div class="line"><a name="l07077"></a><span class="lineno"> 7077</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l07078"></a><span class="lineno"> 7078</span>&#160;    }</div>
<div class="line"><a name="l07079"></a><span class="lineno"> 7079</span>&#160; </div>
<div class="line"><a name="l07080"></a><span class="lineno"> 7080</span>&#160;  <span class="comment">// The sign of 0.0 is ignored by fcmp, so canonicalize to +0.0:</span></div>
<div class="line"><a name="l07081"></a><span class="lineno"> 7081</span>&#160;  <span class="comment">// fcmp Pred X, -0.0 --&gt; fcmp Pred X, 0.0</span></div>
<div class="line"><a name="l07082"></a><span class="lineno"> 7082</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#ab9370b798ae530641518075b0832723a">m_AnyZeroFP</a>()) &amp;&amp; !<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#a7a371c4faf8e41f7cac98ad694f504dc">m_PosZeroFP</a>()))</div>
<div class="line"><a name="l07083"></a><span class="lineno"> 7083</span>&#160;    <span class="keywordflow">return</span> replaceOperand(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, 1, <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">ConstantFP::getNullValue</a>(OpType));</div>
<div class="line"><a name="l07084"></a><span class="lineno"> 7084</span>&#160; </div>
<div class="line"><a name="l07085"></a><span class="lineno"> 7085</span>&#160;  <span class="comment">// Ignore signbit of bitcasted int when comparing equality to FP 0.0:</span></div>
<div class="line"><a name="l07086"></a><span class="lineno"> 7086</span>&#160;  <span class="comment">// fcmp oeq/une (bitcast X), 0.0 --&gt; (and X, SignMaskC) ==/!= 0</span></div>
<div class="line"><a name="l07087"></a><span class="lineno"> 7087</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#a7a371c4faf8e41f7cac98ad694f504dc">m_PosZeroFP</a>()) &amp;&amp;</div>
<div class="line"><a name="l07088"></a><span class="lineno"> 7088</span>&#160;      <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#ac0467ca7fad871738b10db95feb40dad">m_BitCast</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>)))) &amp;&amp;</div>
<div class="line"><a name="l07089"></a><span class="lineno"> 7089</span>&#160;      <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getType()-&gt;isVectorTy() == OpType-&gt;<a class="code" href="classllvm_1_1Type.html#a1bc022868b23918efa44df511f4d5b61">isVectorTy</a>() &amp;&amp;</div>
<div class="line"><a name="l07090"></a><span class="lineno"> 7090</span>&#160;      <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getType()-&gt;getScalarSizeInBits() == OpType-&gt;<a class="code" href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>()) {</div>
<div class="line"><a name="l07091"></a><span class="lineno"> 7091</span>&#160;    <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">ICmpInst::Predicate</a> IntPred = <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba07aee43ffb66908a25c55c77ce4c0d05">ICmpInst::BAD_ICMP_PREDICATE</a>;</div>
<div class="line"><a name="l07092"></a><span class="lineno"> 7092</span>&#160;    <span class="keywordflow">if</span> (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba024db78a5ed74f64666f3ca4955e6eca">FCmpInst::FCMP_OEQ</a>)</div>
<div class="line"><a name="l07093"></a><span class="lineno"> 7093</span>&#160;      IntPred = <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a>;</div>
<div class="line"><a name="l07094"></a><span class="lineno"> 7094</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bad601460c9371d0f0ada5ae006bdba2bd">FCmpInst::FCMP_UNE</a>)</div>
<div class="line"><a name="l07095"></a><span class="lineno"> 7095</span>&#160;      IntPred = <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a>;</div>
<div class="line"><a name="l07096"></a><span class="lineno"> 7096</span>&#160; </div>
<div class="line"><a name="l07097"></a><span class="lineno"> 7097</span>&#160;    <span class="keywordflow">if</span> (IntPred != <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba07aee43ffb66908a25c55c77ce4c0d05">ICmpInst::BAD_ICMP_PREDICATE</a>) {</div>
<div class="line"><a name="l07098"></a><span class="lineno"> 7098</span>&#160;      <a class="code" href="classllvm_1_1Type.html">Type</a> *IntTy = <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getType();</div>
<div class="line"><a name="l07099"></a><span class="lineno"> 7099</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> &amp;SignMask = ~<a class="code" href="classllvm_1_1APInt.html">APInt</a>::getSignMask(IntTy-&gt;<a class="code" href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>());</div>
<div class="line"><a name="l07100"></a><span class="lineno"> 7100</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *MaskX = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAnd(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(IntTy, SignMask));</div>
<div class="line"><a name="l07101"></a><span class="lineno"> 7101</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(IntPred, MaskX, <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">ConstantInt::getNullValue</a>(IntTy));</div>
<div class="line"><a name="l07102"></a><span class="lineno"> 7102</span>&#160;    }</div>
<div class="line"><a name="l07103"></a><span class="lineno"> 7103</span>&#160;  }</div>
<div class="line"><a name="l07104"></a><span class="lineno"> 7104</span>&#160; </div>
<div class="line"><a name="l07105"></a><span class="lineno"> 7105</span>&#160;  <span class="comment">// Handle fcmp with instruction LHS and constant RHS.</span></div>
<div class="line"><a name="l07106"></a><span class="lineno"> 7106</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *LHSI;</div>
<div class="line"><a name="l07107"></a><span class="lineno"> 7107</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *RHSC;</div>
<div class="line"><a name="l07108"></a><span class="lineno"> 7108</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a04353aa48874f9bda89ff9059cd1a5a6">m_Instruction</a>(LHSI)) &amp;&amp; <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#aadd209ba7e1bfa8113a609e09a7fe62f">m_Constant</a>(RHSC))) {</div>
<div class="line"><a name="l07109"></a><span class="lineno"> 7109</span>&#160;    <span class="keywordflow">switch</span> (LHSI-&gt;<a class="code" href="classllvm_1_1Instruction.html#ab4e05d690df389b8b1477c90387b575f">getOpcode</a>()) {</div>
<div class="line"><a name="l07110"></a><span class="lineno"> 7110</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">Instruction::PHI</a>:</div>
<div class="line"><a name="l07111"></a><span class="lineno"> 7111</span>&#160;      <span class="comment">// Only fold fcmp into the PHI if the phi and fcmp are in the same</span></div>
<div class="line"><a name="l07112"></a><span class="lineno"> 7112</span>&#160;      <span class="comment">// block.  If in the same block, we&#39;re encouraging jump threading.  If</span></div>
<div class="line"><a name="l07113"></a><span class="lineno"> 7113</span>&#160;      <span class="comment">// not, we are just pessimizing the code by making an i1 phi.</span></div>
<div class="line"><a name="l07114"></a><span class="lineno"> 7114</span>&#160;      <span class="keywordflow">if</span> (LHSI-&gt;<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>() == <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getParent())</div>
<div class="line"><a name="l07115"></a><span class="lineno"> 7115</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="namespacellvm_1_1ore.html#a8f5533240c6722d987a2443cba42019d">NV</a> = foldOpIntoPhi(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, cast&lt;PHINode&gt;(LHSI)))</div>
<div class="line"><a name="l07116"></a><span class="lineno"> 7116</span>&#160;          <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1ore.html#a8f5533240c6722d987a2443cba42019d">NV</a>;</div>
<div class="line"><a name="l07117"></a><span class="lineno"> 7117</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l07118"></a><span class="lineno"> 7118</span>&#160;    <span class="keywordflow">case</span> Instruction::SIToFP:</div>
<div class="line"><a name="l07119"></a><span class="lineno"> 7119</span>&#160;    <span class="keywordflow">case</span> Instruction::UIToFP:</div>
<div class="line"><a name="l07120"></a><span class="lineno"> 7120</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="namespacellvm_1_1ore.html#a8f5533240c6722d987a2443cba42019d">NV</a> = foldFCmpIntToFPConst(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, LHSI, RHSC))</div>
<div class="line"><a name="l07121"></a><span class="lineno"> 7121</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1ore.html#a8f5533240c6722d987a2443cba42019d">NV</a>;</div>
<div class="line"><a name="l07122"></a><span class="lineno"> 7122</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l07123"></a><span class="lineno"> 7123</span>&#160;    <span class="keywordflow">case</span> Instruction::FDiv:</div>
<div class="line"><a name="l07124"></a><span class="lineno"> 7124</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="namespacellvm_1_1ore.html#a8f5533240c6722d987a2443cba42019d">NV</a> = <a class="code" href="InstCombineCompares_8cpp.html#ad60c0239275d1852d9e3b7cc06c2fbee">foldFCmpReciprocalAndZero</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, LHSI, RHSC))</div>
<div class="line"><a name="l07125"></a><span class="lineno"> 7125</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1ore.html#a8f5533240c6722d987a2443cba42019d">NV</a>;</div>
<div class="line"><a name="l07126"></a><span class="lineno"> 7126</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l07127"></a><span class="lineno"> 7127</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1SPII.html#a1c7202c6054fef862bbed45957747cdfa5069619ca8fdce305534f3fe85091a0f">Instruction::Load</a>:</div>
<div class="line"><a name="l07128"></a><span class="lineno"> 7128</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> *<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a> = dyn_cast&lt;GetElementPtrInst&gt;(LHSI-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0)))</div>
<div class="line"><a name="l07129"></a><span class="lineno"> 7129</span>&#160;        <span class="keywordflow">if</span> (<span class="keyword">auto</span> *GV = dyn_cast&lt;GlobalVariable&gt;(<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>-&gt;getOperand(0)))</div>
<div class="line"><a name="l07130"></a><span class="lineno"> 7130</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Res = foldCmpLoadFromIndexedGlobal(</div>
<div class="line"><a name="l07131"></a><span class="lineno"> 7131</span>&#160;                  cast&lt;LoadInst&gt;(LHSI), <a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>, GV, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l07132"></a><span class="lineno"> 7132</span>&#160;            <span class="keywordflow">return</span> Res;</div>
<div class="line"><a name="l07133"></a><span class="lineno"> 7133</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l07134"></a><span class="lineno"> 7134</span>&#160;  }</div>
<div class="line"><a name="l07135"></a><span class="lineno"> 7135</span>&#160;  }</div>
<div class="line"><a name="l07136"></a><span class="lineno"> 7136</span>&#160; </div>
<div class="line"><a name="l07137"></a><span class="lineno"> 7137</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *R = <a class="code" href="InstCombineCompares_8cpp.html#a2374f343a581f0096975d8a8a8d48fd6">foldFabsWithFcmpZero</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, *<span class="keyword">this</span>))</div>
<div class="line"><a name="l07138"></a><span class="lineno"> 7138</span>&#160;    <span class="keywordflow">return</span> R;</div>
<div class="line"><a name="l07139"></a><span class="lineno"> 7139</span>&#160; </div>
<div class="line"><a name="l07140"></a><span class="lineno"> 7140</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#af431ec215bba8bb9c56e7541d99920f2">m_FNeg</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>)))) {</div>
<div class="line"><a name="l07141"></a><span class="lineno"> 7141</span>&#160;    <span class="comment">// fcmp pred (fneg X), C --&gt; fcmp swap(pred) X, -C</span></div>
<div class="line"><a name="l07142"></a><span class="lineno"> 7142</span>&#160;    <a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>;</div>
<div class="line"><a name="l07143"></a><span class="lineno"> 7143</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#aadd209ba7e1bfa8113a609e09a7fe62f">m_Constant</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)))</div>
<div class="line"><a name="l07144"></a><span class="lineno"> 7144</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Constant.html">Constant</a> *NegC = <a class="code" href="namespacellvm.html#a6810c4cb05b49909862249d3b3afa2af">ConstantFoldUnaryOpOperand</a>(Instruction::FNeg, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>))</div>
<div class="line"><a name="l07145"></a><span class="lineno"> 7145</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1FCmpInst.html">FCmpInst</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getSwappedPredicate(), <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, NegC, <span class="stringliteral">&quot;&quot;</span>, &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l07146"></a><span class="lineno"> 7146</span>&#160;  }</div>
<div class="line"><a name="l07147"></a><span class="lineno"> 7147</span>&#160; </div>
<div class="line"><a name="l07148"></a><span class="lineno"> 7148</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a2997340992a508357b480467a6901c70">m_FPExt</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>)))) {</div>
<div class="line"><a name="l07149"></a><span class="lineno"> 7149</span>&#160;    <span class="comment">// fcmp (fpext X), (fpext Y) -&gt; fcmp X, Y</span></div>
<div class="line"><a name="l07150"></a><span class="lineno"> 7150</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#a2997340992a508357b480467a6901c70">m_FPExt</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>))) &amp;&amp; <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getType() == <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>-&gt;getType())</div>
<div class="line"><a name="l07151"></a><span class="lineno"> 7151</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1FCmpInst.html">FCmpInst</a>(Pred, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, <span class="stringliteral">&quot;&quot;</span>, &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l07152"></a><span class="lineno"> 7152</span>&#160; </div>
<div class="line"><a name="l07153"></a><span class="lineno"> 7153</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1APFloat.html">APFloat</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>;</div>
<div class="line"><a name="l07154"></a><span class="lineno"> 7154</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#acd794d7b3653822f61ba126e1678e03f">m_APFloat</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>))) {</div>
<div class="line"><a name="l07155"></a><span class="lineno"> 7155</span>&#160;      <span class="keyword">const</span> <a class="code" href="structllvm_1_1fltSemantics.html">fltSemantics</a> &amp;FPSem =</div>
<div class="line"><a name="l07156"></a><span class="lineno"> 7156</span>&#160;          <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getType()-&gt;getScalarType()-&gt;getFltSemantics();</div>
<div class="line"><a name="l07157"></a><span class="lineno"> 7157</span>&#160;      <span class="keywordtype">bool</span> Lossy;</div>
<div class="line"><a name="l07158"></a><span class="lineno"> 7158</span>&#160;      <a class="code" href="classllvm_1_1APFloat.html">APFloat</a> TruncC = *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>;</div>
<div class="line"><a name="l07159"></a><span class="lineno"> 7159</span>&#160;      TruncC.<a class="code" href="classllvm_1_1APFloat.html#a257e3cb529defa79ad7a9f42072f339a">convert</a>(FPSem, <a class="code" href="structllvm_1_1APFloatBase.html#a22ed74f1ed33c4d33f524a650ea536a6">APFloat::rmNearestTiesToEven</a>, &amp;Lossy);</div>
<div class="line"><a name="l07160"></a><span class="lineno"> 7160</span>&#160; </div>
<div class="line"><a name="l07161"></a><span class="lineno"> 7161</span>&#160;      <span class="keywordflow">if</span> (Lossy) {</div>
<div class="line"><a name="l07162"></a><span class="lineno"> 7162</span>&#160;        <span class="comment">// X can&#39;t possibly equal the higher-precision constant, so reduce any</span></div>
<div class="line"><a name="l07163"></a><span class="lineno"> 7163</span>&#160;        <span class="comment">// equality comparison.</span></div>
<div class="line"><a name="l07164"></a><span class="lineno"> 7164</span>&#160;        <span class="comment">// TODO: Other predicates can be handled via getFCmpCode().</span></div>
<div class="line"><a name="l07165"></a><span class="lineno"> 7165</span>&#160;        <span class="keywordflow">switch</span> (Pred) {</div>
<div class="line"><a name="l07166"></a><span class="lineno"> 7166</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba024db78a5ed74f64666f3ca4955e6eca">FCmpInst::FCMP_OEQ</a>:</div>
<div class="line"><a name="l07167"></a><span class="lineno"> 7167</span>&#160;          <span class="comment">// X is ordered and equal to an impossible constant --&gt; false</span></div>
<div class="line"><a name="l07168"></a><span class="lineno"> 7168</span>&#160;          <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1ConstantInt.html#aa7cce62ac5cc6df09cce0535874336b7">ConstantInt::getFalse</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getType()));</div>
<div class="line"><a name="l07169"></a><span class="lineno"> 7169</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba8a80b27ca29fe2076b9bbdee02c65464">FCmpInst::FCMP_ONE</a>:</div>
<div class="line"><a name="l07170"></a><span class="lineno"> 7170</span>&#160;          <span class="comment">// X is ordered and not equal to an impossible constant --&gt; ordered</span></div>
<div class="line"><a name="l07171"></a><span class="lineno"> 7171</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1FCmpInst.html">FCmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa3213b645e029aba8bb1b85213607d5e">FCmpInst::FCMP_ORD</a>, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>,</div>
<div class="line"><a name="l07172"></a><span class="lineno"> 7172</span>&#160;                              <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">ConstantFP::getNullValue</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getType()));</div>
<div class="line"><a name="l07173"></a><span class="lineno"> 7173</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba919643b83ce3c9af2e4296ed5e413a1f">FCmpInst::FCMP_UEQ</a>:</div>
<div class="line"><a name="l07174"></a><span class="lineno"> 7174</span>&#160;          <span class="comment">// X is unordered or equal to an impossible constant --&gt; unordered</span></div>
<div class="line"><a name="l07175"></a><span class="lineno"> 7175</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1FCmpInst.html">FCmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baf0159e4005258dc54f20b6fc227d19ed">FCmpInst::FCMP_UNO</a>, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>,</div>
<div class="line"><a name="l07176"></a><span class="lineno"> 7176</span>&#160;                              <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">ConstantFP::getNullValue</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getType()));</div>
<div class="line"><a name="l07177"></a><span class="lineno"> 7177</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bad601460c9371d0f0ada5ae006bdba2bd">FCmpInst::FCMP_UNE</a>:</div>
<div class="line"><a name="l07178"></a><span class="lineno"> 7178</span>&#160;          <span class="comment">// X is unordered or not equal to an impossible constant --&gt; true</span></div>
<div class="line"><a name="l07179"></a><span class="lineno"> 7179</span>&#160;          <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1ConstantInt.html#a82dbbd8e3688b0bc1eedb338864d0d0c">ConstantInt::getTrue</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getType()));</div>
<div class="line"><a name="l07180"></a><span class="lineno"> 7180</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l07181"></a><span class="lineno"> 7181</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l07182"></a><span class="lineno"> 7182</span>&#160;        }</div>
<div class="line"><a name="l07183"></a><span class="lineno"> 7183</span>&#160;      }</div>
<div class="line"><a name="l07184"></a><span class="lineno"> 7184</span>&#160; </div>
<div class="line"><a name="l07185"></a><span class="lineno"> 7185</span>&#160;      <span class="comment">// fcmp (fpext X), C -&gt; fcmp X, (fptrunc C) if fptrunc is lossless</span></div>
<div class="line"><a name="l07186"></a><span class="lineno"> 7186</span>&#160;      <span class="comment">// Avoid lossy conversions and denormals.</span></div>
<div class="line"><a name="l07187"></a><span class="lineno"> 7187</span>&#160;      <span class="comment">// Zero is a special case that&#39;s OK to convert.</span></div>
<div class="line"><a name="l07188"></a><span class="lineno"> 7188</span>&#160;      <a class="code" href="classllvm_1_1APFloat.html">APFloat</a> Fabs = TruncC;</div>
<div class="line"><a name="l07189"></a><span class="lineno"> 7189</span>&#160;      Fabs.<a class="code" href="classllvm_1_1APFloat.html#a69cb669b1adc09cca90312d39ea3021a">clearSign</a>();</div>
<div class="line"><a name="l07190"></a><span class="lineno"> 7190</span>&#160;      <span class="keywordflow">if</span> (!Lossy &amp;&amp;</div>
<div class="line"><a name="l07191"></a><span class="lineno"> 7191</span>&#160;          (Fabs.<a class="code" href="classllvm_1_1APFloat.html#a9aaed17970b55e9e1bfa906822ea7b71">isZero</a>() || !(Fabs &lt; <a class="code" href="classllvm_1_1APFloat.html#a9c568ab8748aba5d37006d52618bbcfd">APFloat::getSmallestNormalized</a>(FPSem)))) {</div>
<div class="line"><a name="l07192"></a><span class="lineno"> 7192</span>&#160;        <a class="code" href="classllvm_1_1Constant.html">Constant</a> *NewC = <a class="code" href="classllvm_1_1ConstantFP.html#a5eb8f7a5d3cfdd127ad9db2e425e14eb">ConstantFP::get</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getType(), TruncC);</div>
<div class="line"><a name="l07193"></a><span class="lineno"> 7193</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1FCmpInst.html">FCmpInst</a>(Pred, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, NewC, <span class="stringliteral">&quot;&quot;</span>, &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l07194"></a><span class="lineno"> 7194</span>&#160;      }</div>
<div class="line"><a name="l07195"></a><span class="lineno"> 7195</span>&#160;    }</div>
<div class="line"><a name="l07196"></a><span class="lineno"> 7196</span>&#160;  }</div>
<div class="line"><a name="l07197"></a><span class="lineno"> 7197</span>&#160; </div>
<div class="line"><a name="l07198"></a><span class="lineno"> 7198</span>&#160;  <span class="comment">// Convert a sign-bit test of an FP value into a cast and integer compare.</span></div>
<div class="line"><a name="l07199"></a><span class="lineno"> 7199</span>&#160;  <span class="comment">// TODO: Simplify if the copysign constant is 0.0 or NaN.</span></div>
<div class="line"><a name="l07200"></a><span class="lineno"> 7200</span>&#160;  <span class="comment">// TODO: Handle non-zero compare constants.</span></div>
<div class="line"><a name="l07201"></a><span class="lineno"> 7201</span>&#160;  <span class="comment">// TODO: Handle other predicates.</span></div>
<div class="line"><a name="l07202"></a><span class="lineno"> 7202</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1APFloat.html">APFloat</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>;</div>
<div class="line"><a name="l07203"></a><span class="lineno"> 7203</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(m_Intrinsic&lt;Intrinsic::copysign&gt;(<a class="code" href="namespacellvm_1_1PatternMatch.html#acd794d7b3653822f61ba126e1678e03f">m_APFloat</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>),</div>
<div class="line"><a name="l07204"></a><span class="lineno"> 7204</span>&#160;                                                           <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>)))) &amp;&amp;</div>
<div class="line"><a name="l07205"></a><span class="lineno"> 7205</span>&#160;      <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#ab9370b798ae530641518075b0832723a">m_AnyZeroFP</a>()) &amp;&amp; !<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;isZero() &amp;&amp; !<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;isNaN()) {</div>
<div class="line"><a name="l07206"></a><span class="lineno"> 7206</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *IntType = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getIntNTy(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getType()-&gt;getScalarSizeInBits());</div>
<div class="line"><a name="l07207"></a><span class="lineno"> 7207</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> *VecTy = dyn_cast&lt;VectorType&gt;(OpType))</div>
<div class="line"><a name="l07208"></a><span class="lineno"> 7208</span>&#160;      IntType = <a class="code" href="classllvm_1_1VectorType.html#a8c90e6c50e795b17466482a04947690e">VectorType::get</a>(IntType, VecTy-&gt;getElementCount());</div>
<div class="line"><a name="l07209"></a><span class="lineno"> 7209</span>&#160; </div>
<div class="line"><a name="l07210"></a><span class="lineno"> 7210</span>&#160;    <span class="comment">// copysign(non-zero constant, X) &lt; 0.0 --&gt; (bitcast X) &lt; 0</span></div>
<div class="line"><a name="l07211"></a><span class="lineno"> 7211</span>&#160;    <span class="keywordflow">if</span> (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba326bee0a4a424cef21c1cf8adb8b8dd8">FCmpInst::FCMP_OLT</a>) {</div>
<div class="line"><a name="l07212"></a><span class="lineno"> 7212</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a52fc06c8638074204be3a7f9a35d65b1">IntX</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBitCast(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, IntType);</div>
<div class="line"><a name="l07213"></a><span class="lineno"> 7213</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba15ae464950ac676919c2f0c7aafc706c">ICmpInst::ICMP_SLT</a>, <a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a52fc06c8638074204be3a7f9a35d65b1">IntX</a>,</div>
<div class="line"><a name="l07214"></a><span class="lineno"> 7214</span>&#160;                          <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">ConstantInt::getNullValue</a>(IntType));</div>
<div class="line"><a name="l07215"></a><span class="lineno"> 7215</span>&#160;    }</div>
<div class="line"><a name="l07216"></a><span class="lineno"> 7216</span>&#160;  }</div>
<div class="line"><a name="l07217"></a><span class="lineno"> 7217</span>&#160; </div>
<div class="line"><a name="l07218"></a><span class="lineno"> 7218</span>&#160;  {</div>
<div class="line"><a name="l07219"></a><span class="lineno"> 7219</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *CanonLHS = <span class="keyword">nullptr</span>, *CanonRHS = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l07220"></a><span class="lineno"> 7220</span>&#160;    <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, m_Intrinsic&lt;Intrinsic::canonicalize&gt;(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(CanonLHS)));</div>
<div class="line"><a name="l07221"></a><span class="lineno"> 7221</span>&#160;    <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, m_Intrinsic&lt;Intrinsic::canonicalize&gt;(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(CanonRHS)));</div>
<div class="line"><a name="l07222"></a><span class="lineno"> 7222</span>&#160; </div>
<div class="line"><a name="l07223"></a><span class="lineno"> 7223</span>&#160;    <span class="comment">// (canonicalize(x) == x) =&gt; (x == x)</span></div>
<div class="line"><a name="l07224"></a><span class="lineno"> 7224</span>&#160;    <span class="keywordflow">if</span> (CanonLHS == Op1)</div>
<div class="line"><a name="l07225"></a><span class="lineno"> 7225</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1FCmpInst.html">FCmpInst</a>(Pred, Op1, Op1, <span class="stringliteral">&quot;&quot;</span>, &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l07226"></a><span class="lineno"> 7226</span>&#160; </div>
<div class="line"><a name="l07227"></a><span class="lineno"> 7227</span>&#160;    <span class="comment">// (x == canonicalize(x)) =&gt; (x == x)</span></div>
<div class="line"><a name="l07228"></a><span class="lineno"> 7228</span>&#160;    <span class="keywordflow">if</span> (CanonRHS == Op0)</div>
<div class="line"><a name="l07229"></a><span class="lineno"> 7229</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1FCmpInst.html">FCmpInst</a>(Pred, Op0, Op0, <span class="stringliteral">&quot;&quot;</span>, &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l07230"></a><span class="lineno"> 7230</span>&#160; </div>
<div class="line"><a name="l07231"></a><span class="lineno"> 7231</span>&#160;    <span class="comment">// (canonicalize(x) == canonicalize(y)) =&gt; (x == y)</span></div>
<div class="line"><a name="l07232"></a><span class="lineno"> 7232</span>&#160;    <span class="keywordflow">if</span> (CanonLHS &amp;&amp; CanonRHS)</div>
<div class="line"><a name="l07233"></a><span class="lineno"> 7233</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1FCmpInst.html">FCmpInst</a>(Pred, CanonLHS, CanonRHS, <span class="stringliteral">&quot;&quot;</span>, &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l07234"></a><span class="lineno"> 7234</span>&#160;  }</div>
<div class="line"><a name="l07235"></a><span class="lineno"> 7235</span>&#160; </div>
<div class="line"><a name="l07236"></a><span class="lineno"> 7236</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getType()-&gt;isVectorTy())</div>
<div class="line"><a name="l07237"></a><span class="lineno"> 7237</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Res = <a class="code" href="InstCombineCompares_8cpp.html#a1f13fe408d6285f56e9635116c119108">foldVectorCmp</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>))</div>
<div class="line"><a name="l07238"></a><span class="lineno"> 7238</span>&#160;      <span class="keywordflow">return</span> Res;</div>
<div class="line"><a name="l07239"></a><span class="lineno"> 7239</span>&#160; </div>
<div class="line"><a name="l07240"></a><span class="lineno"> 7240</span>&#160;  <span class="keywordflow">return</span> Changed ? &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l07241"></a><span class="lineno"> 7241</span>&#160;}</div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="alib_2Target_2README_8txt_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">i</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2README_8txt_source.html#l00029">README.txt:29</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78ba396dda2571cd3c575f1d9cb44dc2cc09"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba396dda2571cd3c575f1d9cb44dc2cc09">llvm::CmpInst::FCMP_ULE</a></div><div class="ttdeci">@ FCMP_ULE</div><div class="ttdoc">1 1 0 1 True if unordered, less than, or equal</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00733">InstrTypes.h:733</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_ac8099bedfdef48644386b16230fef2e5"><div class="ttname"><a href="classllvm_1_1APInt.html#ac8099bedfdef48644386b16230fef2e5">llvm::APInt::isMaxSignedValue</a></div><div class="ttdeci">bool isMaxSignedValue() const</div><div class="ttdoc">Determine if this is the largest signed value.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00397">APInt.h:397</a></div></div>
<div class="ttc" id="aclassllvm_1_1Constant_html_a662be1e66a5af621d46fa1c7a8aa1004"><div class="ttname"><a href="classllvm_1_1Constant.html#a662be1e66a5af621d46fa1c7a8aa1004">llvm::Constant::isAllOnesValue</a></div><div class="ttdeci">bool isAllOnesValue() const</div><div class="ttdoc">Return true if this is the value that would be returned by getAllOnesValue.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00093">Constants.cpp:93</a></div></div>
<div class="ttc" id="aInstCombineCompares_8cpp_html_a455c6b1d87087b9e66b60afaf19e67fb"><div class="ttname"><a href="InstCombineCompares_8cpp.html#a455c6b1d87087b9e66b60afaf19e67fb">foldICmpXNegX</a></div><div class="ttdeci">static Instruction * foldICmpXNegX(ICmpInst &amp;I)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCompares_8cpp_source.html#l04096">InstCombineCompares.cpp:4096</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_ab7a6af71f539f24743081bf2e6adc0f7"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#ab7a6af71f539f24743081bf2e6adc0f7">llvm::PatternMatch::m_SIToFP</a></div><div class="ttdeci">CastClass_match&lt; OpTy, Instruction::SIToFP &gt; m_SIToFP(const OpTy &amp;Op)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01667">PatternMatch.h:1667</a></div></div>
<div class="ttc" id="anamespacellvm_1_1CodeGenOpt_html_ad7e52174abb1cfb84238ad1ac475ee36ae56b4de70fb3488b3ae4ec998c0b6303"><div class="ttname"><a href="namespacellvm_1_1CodeGenOpt.html#ad7e52174abb1cfb84238ad1ac475ee36ae56b4de70fb3488b3ae4ec998c0b6303">llvm::CodeGenOpt::Less</a></div><div class="ttdeci">@ Less</div><div class="ttdoc">-O1</div><div class="ttdef"><b>Definition:</b> <a href="CodeGen_8h_source.html#l00059">CodeGen.h:59</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_a7df35aaa0732f4b23e5458034a2c29d1"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#a7df35aaa0732f4b23e5458034a2c29d1">llvm::InstCombinerImpl::foldICmpIntrinsicWithConstant</a></div><div class="ttdeci">Instruction * foldICmpIntrinsicWithConstant(ICmpInst &amp;ICI, IntrinsicInst *II, const APInt &amp;C)</div><div class="ttdoc">Fold an icmp with LLVM intrinsic and constant operand: icmp Pred II, C.</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCompares_8cpp_source.html#l03504">InstCombineCompares.cpp:3504</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a1c0eba92185bf1962f1b627ff0a85a82"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a1c0eba92185bf1962f1b627ff0a85a82">llvm::PatternMatch::m_NonNegative</a></div><div class="ttdeci">cst_pred_ty&lt; is_nonnegative &gt; m_NonNegative()</div><div class="ttdoc">Match an integer or vector of non-negative values.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00485">PatternMatch.h:485</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a49a2d8f483ea08a3d6ea75f90c640d76"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a49a2d8f483ea08a3d6ea75f90c640d76">llvm::CmpInst::getSwappedPredicate</a></div><div class="ttdeci">Predicate getSwappedPredicate() const</div><div class="ttdoc">For example, EQ-&gt;EQ, SLE-&gt;SGE, ULT-&gt;UGT, OEQ-&gt;OEQ, ULE-&gt;UGE, OLT-&gt;OGT, etc.</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00859">InstrTypes.h:859</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_ab82eb0514d646d43f777a8b0cc83fdec"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#ab82eb0514d646d43f777a8b0cc83fdec">llvm::InstCombinerImpl::foldICmpInstWithConstant</a></div><div class="ttdeci">Instruction * foldICmpInstWithConstant(ICmpInst &amp;Cmp)</div><div class="ttdoc">Try to fold integer comparisons with a constant operand: icmp Pred X, C where X is some kind of instr...</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCompares_8cpp_source.html#l03149">InstCombineCompares.cpp:3149</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_a694293446a074c3d64270e7671bb5052"><div class="ttname"><a href="classllvm_1_1APInt.html#a694293446a074c3d64270e7671bb5052">llvm::APInt::sadd_ov</a></div><div class="ttdeci">APInt sadd_ov(const APInt &amp;RHS, bool &amp;Overflow) const</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8cpp_source.html#l01926">APInt.cpp:1926</a></div></div>
<div class="ttc" id="anamespacellvm_1_1object_html_a42e5b6ee6f67085d2115b2ea44588c47a21197b49151a350ee6714622ed988cc7"><div class="ttname"><a href="namespacellvm_1_1object.html#a42e5b6ee6f67085d2115b2ea44588c47a21197b49151a350ee6714622ed988cc7">llvm::object::Equal</a></div><div class="ttdeci">@ Equal</div><div class="ttdef"><b>Definition:</b> <a href="COFFModuleDefinition_8cpp_source.html#l00036">COFFModuleDefinition.cpp:36</a></div></div>
<div class="ttc" id="anamespacellvm_html"><div class="ttname"><a href="namespacellvm.html">llvm</a></div><div class="ttdoc">This is an optimization pass for GlobalISel generic memory operations.</div><div class="ttdef"><b>Definition:</b> <a href="AddressRanges_8h_source.html#l00018">AddressRanges.h:18</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_aa75984a442f2379de0c66018201fa628"><div class="ttname"><a href="classllvm_1_1Type.html#aa75984a442f2379de0c66018201fa628">llvm::Type::getInt1Ty</a></div><div class="ttdeci">static IntegerType * getInt1Ty(LLVMContext &amp;C)</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00238">Type.cpp:238</a></div></div>
<div class="ttc" id="alib_2Target_2X86_2README_8txt_html_ac88fe1d3a61b056a4f64fbbb156a62ff"><div class="ttname"><a href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a></div><div class="ttdeci">We currently emits eax Perhaps this is what we really should generate is Is imull three or four cycles eax eax The current instruction priority is based on pattern complexity The former is more complex because it folds a load so the latter will not be emitted Perhaps we should use AddedComplexity to give LEA32r a higher priority We should always try to match LEA first since the LEA matching code does some estimate to determine whether the match is profitable if we care more about code then imull is better It s two bytes shorter than movl leal On a Pentium M</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2X86_2README_8txt_source.html#l00252">README.txt:252</a></div></div>
<div class="ttc" id="aInstCombineCompares_8cpp_html_aaead33f71104b5e889a5cd491cd2bb56"><div class="ttname"><a href="InstCombineCompares_8cpp.html#aaead33f71104b5e889a5cd491cd2bb56">swapMayExposeCSEOpportunities</a></div><div class="ttdeci">static bool swapMayExposeCSEOpportunities(const Value *Op0, const Value *Op1)</div><div class="ttdoc">Check if the order of Op0 and Op1 as operands in an ICmpInst should be swapped.</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCompares_8cpp_source.html#l05489">InstCombineCompares.cpp:5489</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_aefea2d173494ecda5fae066b6b04eca4"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#aefea2d173494ecda5fae066b6b04eca4">llvm::InstCombinerImpl::computeOverflow</a></div><div class="ttdeci">OverflowResult computeOverflow(Instruction::BinaryOps BinaryOp, bool IsSigned, Value *LHS, Value *RHS, Instruction *CxtI) const</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCompares_8cpp_source.html#l05148">InstCombineCompares.cpp:5148</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">llvm::CmpInst::ICMP_EQ</a></div><div class="ttdeci">@ ICMP_EQ</div><div class="ttdoc">equal</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00739">InstrTypes.h:739</a></div></div>
<div class="ttc" id="aInstCombineCompares_8cpp_html_a596e1e2a1e7f415e9df16dc4550f8fd9"><div class="ttname"><a href="InstCombineCompares_8cpp.html#a596e1e2a1e7f415e9df16dc4550f8fd9">getDemandedBitsLHSMask</a></div><div class="ttdeci">static APInt getDemandedBitsLHSMask(ICmpInst &amp;I, unsigned BitWidth)</div><div class="ttdoc">When performing a comparison against a constant, it is possible that not all the bits in the LHS are ...</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCompares_8cpp_source.html#l05452">InstCombineCompares.cpp:5452</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a054bc550cc29339bf1b5c79c73aa4dac"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a054bc550cc29339bf1b5c79c73aa4dac">llvm::PatternMatch::m_TruncOrSelf</a></div><div class="ttdeci">match_combine_or&lt; CastClass_match&lt; OpTy, Instruction::Trunc &gt;, OpTy &gt; m_TruncOrSelf(const OpTy &amp;Op)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01617">PatternMatch.h:1617</a></div></div>
<div class="ttc" id="anamespacellvm_html_a7dc3069afa2ce5ea62ac2eb183e51c00"><div class="ttname"><a href="namespacellvm.html#a7dc3069afa2ce5ea62ac2eb183e51c00">llvm::none_of</a></div><div class="ttdeci">bool none_of(R &amp;&amp;Range, UnaryPredicate P)</div><div class="ttdoc">Provide wrappers to std::none_of which take ranges instead of having to pass begin/end explicitly.</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l01749">STLExtras.h:1749</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombiner_html_a0c32de3a8e64735bd308fb50fa7f1f38"><div class="ttname"><a href="classllvm_1_1InstCombiner.html#a0c32de3a8e64735bd308fb50fa7f1f38">llvm::InstCombiner::canFreelyInvertAllUsersOf</a></div><div class="ttdeci">static bool canFreelyInvertAllUsersOf(Instruction *V, Value *IgnoredUser)</div><div class="ttdoc">Given i1 V, can every user of V be freely adapted if V is changed to !V ? InstCombine's freelyInvertA...</div><div class="ttdef"><b>Definition:</b> <a href="InstCombiner_8h_source.html#l00279">InstCombiner.h:279</a></div></div>
<div class="ttc" id="anamespacellvm_html_ac0be0d93ccd89dac00411b3a5a8bef87"><div class="ttname"><a href="namespacellvm.html#ac0be0d93ccd89dac00411b3a5a8bef87">llvm::isKnownNonNegative</a></div><div class="ttdeci">bool isKnownNonNegative(const Value *V, const DataLayout &amp;DL, unsigned Depth=0, AssumptionCache *AC=nullptr, const Instruction *CxtI=nullptr, const DominatorTree *DT=nullptr, bool UseInstrInfo=true)</div><div class="ttdoc">Returns true if the give value is known to be non-negative.</div><div class="ttdef"><b>Definition:</b> <a href="ValueTracking_8cpp_source.html#l00320">ValueTracking.cpp:320</a></div></div>
<div class="ttc" id="anamespacellvm_html_a06c60fef11885eadbda4026c83ae9a13a56624a95592b438e05ab500a6a200a03"><div class="ttname"><a href="namespacellvm.html#a06c60fef11885eadbda4026c83ae9a13a56624a95592b438e05ab500a6a200a03">llvm::OverflowResult::NeverOverflows</a></div><div class="ttdeci">@ NeverOverflows</div><div class="ttdoc">Never overflows.</div></div>
<div class="ttc" id="anamespacellvm_html_a6810c4cb05b49909862249d3b3afa2af"><div class="ttname"><a href="namespacellvm.html#a6810c4cb05b49909862249d3b3afa2af">llvm::ConstantFoldUnaryOpOperand</a></div><div class="ttdeci">Constant * ConstantFoldUnaryOpOperand(unsigned Opcode, Constant *Op, const DataLayout &amp;DL)</div><div class="ttdoc">Attempt to constant fold a unary operation with the specified operand.</div><div class="ttdef"><b>Definition:</b> <a href="ConstantFolding_8cpp_source.html#l01328">ConstantFolding.cpp:1328</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantExpr_html_a5b43a866f0fca605556f0f69f70c522a"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#a5b43a866f0fca605556f0f69f70c522a">llvm::ConstantExpr::getNot</a></div><div class="ttdeci">static Constant * getNot(Constant *C)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l02651">Constants.cpp:2651</a></div></div>
<div class="ttc" id="anamespacellvm_html_aac36edd0f1ce976f0025c98e88d3830ea3a2d5fe857d8f9541136a124c2edec6c"><div class="ttname"><a href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830ea3a2d5fe857d8f9541136a124c2edec6c">llvm::RecurKind::Or</a></div><div class="ttdeci">@ Or</div><div class="ttdoc">Bitwise or logical OR of integers.</div></div>
<div class="ttc" id="astructllvm_1_1PatternMatch_1_1m__Mask_html"><div class="ttname"><a href="structllvm_1_1PatternMatch_1_1m__Mask.html">llvm::PatternMatch::m_Mask</a></div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01514">PatternMatch.h:1514</a></div></div>
<div class="ttc" id="aInstCombineCompares_8cpp_html_aedc1445e8c8e04ab10190855f6393813"><div class="ttname"><a href="InstCombineCompares_8cpp.html#aedc1445e8c8e04ab10190855f6393813">rewriteGEPAsOffset</a></div><div class="ttdeci">static Value * rewriteGEPAsOffset(Type *ElemTy, Value *Start, Value *Base, const DataLayout &amp;DL, SetVector&lt; Value * &gt; &amp;Explored)</div><div class="ttdoc">Returns a re-written value of Start as an indexed GEP using Base as a pointer.</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCompares_8cpp_source.html#l00534">InstCombineCompares.cpp:534</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_a6c028a26ae2c72e9018e5a80713ba819"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#a6c028a26ae2c72e9018e5a80713ba819">llvm::InstCombinerImpl::foldICmpWithConstant</a></div><div class="ttdeci">Instruction * foldICmpWithConstant(ICmpInst &amp;Cmp)</div><div class="ttdoc">Fold icmp Pred X, C.</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCompares_8cpp_source.html#l01348">InstCombineCompares.cpp:1348</a></div></div>
<div class="ttc" id="aCmpInstAnalysis_8h_html"><div class="ttname"><a href="CmpInstAnalysis_8h.html">CmpInstAnalysis.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_a6893db19648a2dba0912d181aaa57ec0a19de5b94f7b83900d4b296d9fa491aec"><div class="ttname"><a href="namespacellvm.html#a6893db19648a2dba0912d181aaa57ec0a19de5b94f7b83900d4b296d9fa491aec">llvm::HexPrintStyle::Upper</a></div><div class="ttdeci">@ Upper</div></div>
<div class="ttc" id="aclassllvm_1_1ConstantExpr_html_aa4f10f3d02f427b2a8ea7a6dc25f4c69"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#aa4f10f3d02f427b2a8ea7a6dc25f4c69">llvm::ConstantExpr::getZExtOrBitCast</a></div><div class="ttdeci">static Constant * getZExtOrBitCast(Constant *C, Type *Ty)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l02012">Constants.cpp:2012</a></div></div>
<div class="ttc" id="aclassllvm_1_1DataLayout_html"><div class="ttname"><a href="classllvm_1_1DataLayout.html">llvm::DataLayout</a></div><div class="ttdoc">A parsed version of the target data layout string in and methods for querying it.</div><div class="ttdef"><b>Definition:</b> <a href="DataLayout_8h_source.html#l00110">DataLayout.h:110</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_af37433fe005d86f4551e44915bd97e0b"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#af37433fe005d86f4551e44915bd97e0b">llvm::InstCombinerImpl::replacedSelectWithOperand</a></div><div class="ttdeci">bool replacedSelectWithOperand(SelectInst *SI, const ICmpInst *Icmp, const unsigned SIOpd)</div><div class="ttdoc">Try to replace select with select operand SIOpd in SI-ICmp sequence.</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCompares_8cpp_source.html#l05592">InstCombineCompares.cpp:5592</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantExpr_html_a76d6befe67c4e647ed64cc5f22114c80"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#a76d6befe67c4e647ed64cc5f22114c80">llvm::ConstantExpr::getSIToFP</a></div><div class="ttdeci">static Constant * getSIToFP(Constant *C, Type *Ty, bool OnlyIfReduced=false)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l02168">Constants.cpp:2168</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_a3a402430a1bbe70a9282dcb0e0b6a2cd"><div class="ttname"><a href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">llvm::Value::hasOneUse</a></div><div class="ttdeci">bool hasOneUse() const</div><div class="ttdoc">Return true if there is exactly one use of this value.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00434">Value.h:434</a></div></div>
<div class="ttc" id="aInstCombiner_8h_html"><div class="ttname"><a href="InstCombiner_8h.html">InstCombiner.h</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a435102a3ba336fd6223f84a475868e09"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a435102a3ba336fd6223f84a475868e09">llvm::PatternMatch::m_UAddWithOverflow</a></div><div class="ttdeci">UAddWithOverflow_match&lt; LHS_t, RHS_t, Sum_t &gt; m_UAddWithOverflow(const LHS_t &amp;L, const RHS_t &amp;R, const Sum_t &amp;S)</div><div class="ttdoc">Match an icmp instruction checking for unsigned overflow on addition.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l02017">PatternMatch.h:2017</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78b"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">llvm::CmpInst::Predicate</a></div><div class="ttdeci">Predicate</div><div class="ttdoc">This enumeration lists the possible predicates for CmpInst subclasses.</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00718">InstrTypes.h:718</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantInt_html_afe3ce7fc89f36474eb0369cbb792c05a"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#afe3ce7fc89f36474eb0369cbb792c05a">llvm::ConstantInt::getType</a></div><div class="ttdeci">IntegerType * getType() const</div><div class="ttdoc">getType - Specialize the getType() method to always return an IntegerType, which reduces the amount o...</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00172">Constants.h:172</a></div></div>
<div class="ttc" id="aAMDGPURewriteUndefForPHI_8cpp_html_a2e83cb1bc3f5e8986cbd14575755a134"><div class="ttname"><a href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">PHI</a></div><div class="ttdeci">Rewrite undef for PHI</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPURewriteUndefForPHI_8cpp_source.html#l00101">AMDGPURewriteUndefForPHI.cpp:101</a></div></div>
<div class="ttc" id="anamespacellvm_html_a24b63d7ba7f620e5f036b2d188393245"><div class="ttname"><a href="namespacellvm.html#a24b63d7ba7f620e5f036b2d188393245">llvm::computeOverflowForUnsignedMul</a></div><div class="ttdeci">OverflowResult computeOverflowForUnsignedMul(const Value *LHS, const Value *RHS, const DataLayout &amp;DL, AssumptionCache *AC, const Instruction *CxtI, const DominatorTree *DT, bool UseInstrInfo=true)</div><div class="ttdef"><b>Definition:</b> <a href="ValueTracking_8cpp_source.html#l04953">ValueTracking.cpp:4953</a></div></div>
<div class="ttc" id="aIntrinsicInst_8h_html"><div class="ttname"><a href="IntrinsicInst_8h.html">IntrinsicInst.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a3b996fbf8458aafffc86cb98a68d0a47"><div class="ttname"><a href="classllvm_1_1Type.html#a3b996fbf8458aafffc86cb98a68d0a47">llvm::Type::isPointerTy</a></div><div class="ttdeci">bool isPointerTy() const</div><div class="ttdoc">True if this is an instance of PointerType.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00249">Type.h:249</a></div></div>
<div class="ttc" id="astructllvm_1_1SimplifyQuery_html"><div class="ttname"><a href="structllvm_1_1SimplifyQuery.html">llvm::SimplifyQuery</a></div><div class="ttdef"><b>Definition:</b> <a href="InstructionSimplify_8h_source.html#l00093">InstructionSimplify.h:93</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantInt_html_ab240d0d30dfa9b392ef9d813f3f9e4be"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#ab240d0d30dfa9b392ef9d813f3f9e4be">llvm::ConstantInt::getBitWidth</a></div><div class="ttdeci">unsigned getBitWidth() const</div><div class="ttdoc">getBitWidth - Return the bitwidth of this constant.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00135">Constants.h:135</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_a10cb0815e46ca2e42c7c40205f77277a"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#a10cb0815e46ca2e42c7c40205f77277a">llvm::InstCombinerImpl::foldICmpBinOpWithConstant</a></div><div class="ttdeci">Instruction * foldICmpBinOpWithConstant(ICmpInst &amp;Cmp, BinaryOperator *BO, const APInt &amp;C)</div><div class="ttdoc">Fold an icmp with BinaryOp and constant operand: icmp Pred BO, C.</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCompares_8cpp_source.html#l03446">InstCombineCompares.cpp:3446</a></div></div>
<div class="ttc" id="astructllvm_1_1KnownBits_html_a9b35c622a902a7a7dc93b807a9fa9265"><div class="ttname"><a href="structllvm_1_1KnownBits.html#a9b35c622a902a7a7dc93b807a9fa9265">llvm::KnownBits::getMinValue</a></div><div class="ttdeci">APInt getMinValue() const</div><div class="ttdoc">Return the minimal unsigned value possible given these KnownBits.</div><div class="ttdef"><b>Definition:</b> <a href="KnownBits_8h_source.html#l00120">KnownBits.h:120</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html"><div class="ttname"><a href="classllvm_1_1Function.html">llvm::Function</a></div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00059">Function.h:59</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_aca14d9ec64ba4ab7fb2cef37c57d9ce4"><div class="ttname"><a href="classllvm_1_1APInt.html#aca14d9ec64ba4ab7fb2cef37c57d9ce4">llvm::APInt::ule</a></div><div class="ttdeci">bool ule(const APInt &amp;RHS) const</div><div class="ttdoc">Unsigned less or equal comparison.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l01128">APInt.h:1128</a></div></div>
<div class="ttc" id="aREADME-SSE_8txt_html_a63d206a063eefcdf8c318ded97b65020"><div class="ttname"><a href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a></div><div class="ttdeci">This currently compiles esp xmm0 movsd esp eax eax esp ret We should use not the dag combiner This is because dagcombine2 needs to be able to see through the X86ISD::Wrapper which DAGCombine can t really do The code for turning x load into a single vector load is target independent and should be moved to the dag combiner The code for turning x load into a vector load can only handle a direct load from a global or a direct load from the stack It should be generalized to handle any load from P</div><div class="ttdef"><b>Definition:</b> <a href="README-SSE_8txt_source.html#l00411">README-SSE.txt:411</a></div></div>
<div class="ttc" id="aclassllvm_1_1BinaryOperator_html_a4f500ae0de71695b652af4c0958d8ea8"><div class="ttname"><a href="classllvm_1_1BinaryOperator.html#a4f500ae0de71695b652af4c0958d8ea8">llvm::BinaryOperator::CreateNot</a></div><div class="ttdeci">static BinaryOperator * CreateNot(Value *Op, const Twine &amp;Name=&quot;&quot;, Instruction *InsertBefore=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l03006">Instructions.cpp:3006</a></div></div>
<div class="ttc" id="aclassllvm_1_1IntrinsicInst_html_a7ff64b3625b6f9020556ed05a5f72af4"><div class="ttname"><a href="classllvm_1_1IntrinsicInst.html#a7ff64b3625b6f9020556ed05a5f72af4">llvm::IntrinsicInst::getIntrinsicID</a></div><div class="ttdeci">Intrinsic::ID getIntrinsicID() const</div><div class="ttdoc">Return the intrinsic ID of this intrinsic.</div><div class="ttdef"><b>Definition:</b> <a href="IntrinsicInst_8h_source.html#l00054">IntrinsicInst.h:54</a></div></div>
<div class="ttc" id="astructllvm_1_1SelectPatternResult_html_a3ca9c2098248eac9051008d6eb9f321d"><div class="ttname"><a href="structllvm_1_1SelectPatternResult.html#a3ca9c2098248eac9051008d6eb9f321d">llvm::SelectPatternResult::Flavor</a></div><div class="ttdeci">SelectPatternFlavor Flavor</div><div class="ttdef"><b>Definition:</b> <a href="ValueTracking_8h_source.html#l00714">ValueTracking.h:714</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_aa08fee11e8a5ec10c0cc2a7abbbd799a"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#aa08fee11e8a5ec10c0cc2a7abbbd799a">llvm::PatternMatch::m_LShr</a></div><div class="ttdeci">BinaryOp_match&lt; LHS, RHS, Instruction::LShr &gt; m_LShr(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01117">PatternMatch.h:1117</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_ad1b0513de876d1c85cf6268ca21b2c86"><div class="ttname"><a href="classllvm_1_1APInt.html#ad1b0513de876d1c85cf6268ca21b2c86">llvm::APInt::isPowerOf2</a></div><div class="ttdeci">bool isPowerOf2() const</div><div class="ttdoc">Check if this APInt's value is a power of two greater than zero.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00432">APInt.h:432</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_a465c98f023986f46e34c395e9c891166"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#a465c98f023986f46e34c395e9c891166">llvm::InstCombinerImpl::foldGEPICmp</a></div><div class="ttdeci">Instruction * foldGEPICmp(GEPOperator *GEPLHS, Value *RHS, ICmpInst::Predicate Cond, Instruction &amp;I)</div><div class="ttdoc">Fold comparisons between a GEP instruction and something else.</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCompares_8cpp_source.html#l00726">InstCombineCompares.cpp:726</a></div></div>
<div class="ttc" id="aclassllvm_1_1SetVector_html_a18b9d328d2490f447589ba60345eba6e"><div class="ttname"><a href="classllvm_1_1SetVector.html#a18b9d328d2490f447589ba60345eba6e">llvm::SetVector::size</a></div><div class="ttdeci">size_type size() const</div><div class="ttdoc">Determine the number of elements in the SetVector.</div><div class="ttdef"><b>Definition:</b> <a href="SetVector_8h_source.html#l00077">SetVector.h:77</a></div></div>
<div class="ttc" id="astructllvm_1_1PatternMatch_1_1m__SplatOrUndefMask_html"><div class="ttname"><a href="structllvm_1_1PatternMatch_1_1m__SplatOrUndefMask.html">llvm::PatternMatch::m_SplatOrUndefMask</a></div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01535">PatternMatch.h:1535</a></div></div>
<div class="ttc" id="astructllvm_1_1KnownBits_html_ac67bca6c764da76f5e152330d92ed916"><div class="ttname"><a href="structllvm_1_1KnownBits.html#ac67bca6c764da76f5e152330d92ed916">llvm::KnownBits::Zero</a></div><div class="ttdeci">APInt Zero</div><div class="ttdef"><b>Definition:</b> <a href="KnownBits_8h_source.html#l00024">KnownBits.h:24</a></div></div>
<div class="ttc" id="alib_2Target_2README_8txt_html_a2a2df5a25b9c703e74e82b48a75d0c3d"><div class="ttname"><a href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a></div><div class="ttdeci">instcombine should handle this C2 when C1</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2README_8txt_source.html#l00263">README.txt:263</a></div></div>
<div class="ttc" id="aGetElementPtrTypeIterator_8h_html"><div class="ttname"><a href="GetElementPtrTypeIterator_8h.html">GetElementPtrTypeIterator.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a4abb39a66573f61fda80469faa5d861d"><div class="ttname"><a href="classllvm_1_1Type.html#a4abb39a66573f61fda80469faa5d861d">llvm::Type::getScalarType</a></div><div class="ttdeci">Type * getScalarType() const</div><div class="ttdoc">If this is a vector type, return the element type, otherwise return 'this'.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00341">Type.h:341</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantInt_html_a4b001d9b458035fbbfc154d52d354ee9"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#a4b001d9b458035fbbfc154d52d354ee9">llvm::ConstantInt::getValue</a></div><div class="ttdeci">const APInt &amp; getValue() const</div><div class="ttdoc">Return the constant as an APInt value reference.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00132">Constants.h:132</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVector_html"><div class="ttname"><a href="classllvm_1_1SmallVector.html">llvm::SmallVector&lt; unsigned, 4 &gt;</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombiner_html_ae1d331bc844ecb92bdeb0b706ae04396"><div class="ttname"><a href="classllvm_1_1InstCombiner.html#ae1d331bc844ecb92bdeb0b706ae04396">llvm::InstCombiner::Builder</a></div><div class="ttdeci">BuilderTy &amp; Builder</div><div class="ttdef"><b>Definition:</b> <a href="InstCombiner_8h_source.html#l00058">InstCombiner.h:58</a></div></div>
<div class="ttc" id="aStatistic_8h_html"><div class="ttname"><a href="Statistic_8h.html">Statistic.h</a></div></div>
<div class="ttc" id="anamespacellvm_1_1RISCVFenceField_html_a147be9e9780c1e33363ea572d4c7b25fa05c79fbfc58d9dd2851c467a1ef166bf"><div class="ttname"><a href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa05c79fbfc58d9dd2851c467a1ef166bf">llvm::RISCVFenceField::W</a></div><div class="ttdeci">@ W</div><div class="ttdef"><b>Definition:</b> <a href="RISCVBaseInfo_8h_source.html#l00279">RISCVBaseInfo.h:279</a></div></div>
<div class="ttc" id="astructllvm_1_1PatternMatch_1_1m__SpecificMask_html"><div class="ttname"><a href="structllvm_1_1PatternMatch_1_1m__SpecificMask.html">llvm::PatternMatch::m_SpecificMask</a></div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01529">PatternMatch.h:1529</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a944c25ac9b73b02a17a20a08a25b9b21"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a944c25ac9b73b02a17a20a08a25b9b21">llvm::PatternMatch::m_Add</a></div><div class="ttdeci">BinaryOp_match&lt; LHS, RHS, Instruction::Add &gt; m_Add(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00979">PatternMatch.h:979</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_a65a6479206acd4113b8aa1c0fbc2158c"><div class="ttname"><a href="classllvm_1_1APInt.html#a65a6479206acd4113b8aa1c0fbc2158c">llvm::APInt::getMinValue</a></div><div class="ttdeci">static APInt getMinValue(unsigned numBits)</div><div class="ttdoc">Gets minimum unsigned value of APInt for a specific bit width.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00196">APInt.h:196</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78ba8a80b27ca29fe2076b9bbdee02c65464"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba8a80b27ca29fe2076b9bbdee02c65464">llvm::CmpInst::FCMP_ONE</a></div><div class="ttdeci">@ FCMP_ONE</div><div class="ttdoc">0 1 1 0 True if ordered and operands are unequal</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00726">InstrTypes.h:726</a></div></div>
<div class="ttc" id="anamespacellvm_1_1LegacyLegalizeActions_html_ad25716c86372dafbf624b34891685078a031174d0f974cf1041a9cadb84f0dcbf"><div class="ttname"><a href="namespacellvm_1_1LegacyLegalizeActions.html#ad25716c86372dafbf624b34891685078a031174d0f974cf1041a9cadb84f0dcbf">llvm::LegacyLegalizeActions::Bitcast</a></div><div class="ttdeci">@ Bitcast</div><div class="ttdoc">Perform the operation on a different, but equivalently sized type.</div><div class="ttdef"><b>Definition:</b> <a href="LegacyLegalizerInfo_8h_source.html#l00054">LegacyLegalizerInfo.h:54</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_a331d69b5f93e47e7c596062b77dd5913"><div class="ttname"><a href="classllvm_1_1APInt.html#a331d69b5f93e47e7c596062b77dd5913">llvm::APInt::getMaxValue</a></div><div class="ttdeci">static APInt getMaxValue(unsigned numBits)</div><div class="ttdoc">Gets maximum unsigned value of APInt for specific bit width.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00186">APInt.h:186</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a4b5e1f50cb0890ec60d8c61a61241170"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a4b5e1f50cb0890ec60d8c61a61241170">llvm::CmpInst::makeCmpResultType</a></div><div class="ttdeci">static Type * makeCmpResultType(Type *opnd_type)</div><div class="ttdoc">Create a result type for fcmp/icmp.</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l01054">InstrTypes.h:1054</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_af4feec45578e32fe65d8efc59112bc8e"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#af4feec45578e32fe65d8efc59112bc8e">llvm::PatternMatch::m_CombineOr</a></div><div class="ttdeci">match_combine_or&lt; LTy, RTy &gt; m_CombineOr(const LTy &amp;L, const RTy &amp;R)</div><div class="ttdoc">Combine two pattern matchers matching L || R.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00218">PatternMatch.h:218</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a5ab2d0b0f0b8ceec3b907184e7567197"><div class="ttname"><a href="classllvm_1_1Type.html#a5ab2d0b0f0b8ceec3b907184e7567197">llvm::Type::getPointerAddressSpace</a></div><div class="ttdeci">unsigned getPointerAddressSpace() const</div><div class="ttdoc">Get the address space of this pointer or pointer vector type.</div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00729">DerivedTypes.h:729</a></div></div>
<div class="ttc" id="aclassllvm_1_1IRBuilder_html"><div class="ttname"><a href="classllvm_1_1IRBuilder.html">llvm::IRBuilder&lt;&gt;</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalVariable_html"><div class="ttname"><a href="classllvm_1_1GlobalVariable.html">llvm::GlobalVariable</a></div><div class="ttdef"><b>Definition:</b> <a href="GlobalVariable_8h_source.html#l00039">GlobalVariable.h:39</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_a8274be96f16c9dfbe1d003c5797d9644"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#a8274be96f16c9dfbe1d003c5797d9644">llvm::InstCombinerImpl::matchThreeWayIntCompare</a></div><div class="ttdeci">bool matchThreeWayIntCompare(SelectInst *SI, Value *&amp;LHS, Value *&amp;RHS, ConstantInt *&amp;Less, ConstantInt *&amp;Equal, ConstantInt *&amp;Greater)</div><div class="ttdoc">Match a select chain which produces one of three values based on whether the LHS is less than,...</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCompares_8cpp_source.html#l02894">InstCombineCompares.cpp:2894</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">llvm::CmpInst::ICMP_NE</a></div><div class="ttdeci">@ ICMP_NE</div><div class="ttdoc">not equal</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00740">InstrTypes.h:740</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_aa2a54b545d237ecfe450fd1292f7675e"><div class="ttname"><a href="classllvm_1_1CmpInst.html#aa2a54b545d237ecfe450fd1292f7675e">llvm::CmpInst::getInversePredicate</a></div><div class="ttdeci">Predicate getInversePredicate() const</div><div class="ttdoc">For example, EQ -&gt; NE, UGT -&gt; ULE, SLT -&gt; SGE, OEQ -&gt; UNE, UGT -&gt; OLE, OLT -&gt; UGE,...</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00832">InstrTypes.h:832</a></div></div>
<div class="ttc" id="anamespacellvm_html_af4a93234b99e09100376f8a8a503ca44"><div class="ttname"><a href="namespacellvm.html#af4a93234b99e09100376f8a8a503ca44">llvm::computeOverflowForUnsignedAdd</a></div><div class="ttdeci">OverflowResult computeOverflowForUnsignedAdd(const Value *LHS, const Value *RHS, const DataLayout &amp;DL, AssumptionCache *AC, const Instruction *CxtI, const DominatorTree *DT, bool UseInstrInfo=true)</div><div class="ttdef"><b>Definition:</b> <a href="ValueTracking_8cpp_source.html#l05009">ValueTracking.cpp:5009</a></div></div>
<div class="ttc" id="anamespaceR600__InstFlag_html_a23106439cc906be24dc8953eedd3940da8949a42ff4563a29d1e70e18338fd522"><div class="ttname"><a href="namespaceR600__InstFlag.html#a23106439cc906be24dc8953eedd3940da8949a42ff4563a29d1e70e18338fd522">R600_InstFlag::FC</a></div><div class="ttdeci">@ FC</div><div class="ttdef"><b>Definition:</b> <a href="R600Defines_8h_source.html#l00032">R600Defines.h:32</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_aea5f26deda5ef97e02f6afc57c0c3920"><div class="ttname"><a href="classllvm_1_1APInt.html#aea5f26deda5ef97e02f6afc57c0c3920">llvm::APInt::isOne</a></div><div class="ttdeci">bool isOne() const</div><div class="ttdoc">Determine if this is a value of 1.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00378">APInt.h:378</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_afbfe964338488078570fe14e7deb0551"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#afbfe964338488078570fe14e7deb0551">llvm::InstCombinerImpl::foldICmpBitCast</a></div><div class="ttdeci">Instruction * foldICmpBitCast(ICmpInst &amp;Cmp)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCompares_8cpp_source.html#l02999">InstCombineCompares.cpp:2999</a></div></div>
<div class="ttc" id="anamespacellvm_html_a02061a5619c04262c3a5f48c3ef8a033"><div class="ttname"><a href="namespacellvm.html#a02061a5619c04262c3a5f48c3ef8a033">llvm::isKnownPositive</a></div><div class="ttdeci">bool isKnownPositive(const Value *V, const DataLayout &amp;DL, unsigned Depth=0, AssumptionCache *AC=nullptr, const Instruction *CxtI=nullptr, const DominatorTree *DT=nullptr, bool UseInstrInfo=true)</div><div class="ttdoc">Returns true if the given value is known be positive (i.e.</div><div class="ttdef"><b>Definition:</b> <a href="ValueTracking_8cpp_source.html#l00329">ValueTracking.cpp:329</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_acd794d7b3653822f61ba126e1678e03f"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#acd794d7b3653822f61ba126e1678e03f">llvm::PatternMatch::m_APFloat</a></div><div class="ttdeci">apfloat_match m_APFloat(const APFloat *&amp;Res)</div><div class="ttdoc">Match a ConstantFP or splatted ConstantVector, binding the specified pointer to the contained APFloat...</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00295">PatternMatch.h:295</a></div></div>
<div class="ttc" id="aclassllvm_1_1APFloat_html_a9aaed17970b55e9e1bfa906822ea7b71"><div class="ttname"><a href="classllvm_1_1APFloat.html#a9aaed17970b55e9e1bfa906822ea7b71">llvm::APFloat::isZero</a></div><div class="ttdeci">bool isZero() const</div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l01255">APFloat.h:1255</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantExpr_html_a0196fe6a421b8d2fcf6448f6d55591c5"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#a0196fe6a421b8d2fcf6448f6d55591c5">llvm::ConstantExpr::getSExtOrTrunc</a></div><div class="ttdeci">static Constant * getSExtOrTrunc(Constant *C, Type *Ty)</div><div class="ttdoc">Create either an sext, trunc or nothing, depending on whether Ty is wider, narrower or the same as C-...</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l02030">Constants.cpp:2030</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a4fd27a44c5fd9958fdd9150622129cd3"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a4fd27a44c5fd9958fdd9150622129cd3">llvm::PatternMatch::m_Br</a></div><div class="ttdeci">brc_match&lt; Cond_t, bind_ty&lt; BasicBlock &gt;, bind_ty&lt; BasicBlock &gt; &gt; m_Br(const Cond_t &amp;C, BasicBlock *&amp;T, BasicBlock *&amp;F)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01731">PatternMatch.h:1731</a></div></div>
<div class="ttc" id="aclassllvm_1_1ICmpInst_html_a9d5f70171d811078c4d263811f13c121"><div class="ttname"><a href="classllvm_1_1ICmpInst.html#a9d5f70171d811078c4d263811f13c121">llvm::ICmpInst::getSignedPredicate</a></div><div class="ttdeci">Predicate getSignedPredicate() const</div><div class="ttdoc">For example, EQ-&gt;EQ, SLE-&gt;SLE, UGT-&gt;SGT, etc.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01264">Instructions.h:1264</a></div></div>
<div class="ttc" id="anamespacellvm_html_a07256e6859fcb3b9d5eb02ecea9e9a38"><div class="ttname"><a href="namespacellvm.html#a07256e6859fcb3b9d5eb02ecea9e9a38">llvm::isKnownNonZero</a></div><div class="ttdeci">bool isKnownNonZero(const Value *V, const DataLayout &amp;DL, unsigned Depth=0, AssumptionCache *AC=nullptr, const Instruction *CxtI=nullptr, const DominatorTree *DT=nullptr, bool UseInstrInfo=true)</div><div class="ttdoc">Return true if the given value is known to be non-zero when defined.</div><div class="ttdef"><b>Definition:</b> <a href="ValueTracking_8cpp_source.html#l00313">ValueTracking.cpp:313</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_aafc99bbdcf56632d353043ae3e2bca21"><div class="ttname"><a href="classllvm_1_1CmpInst.html#aafc99bbdcf56632d353043ae3e2bca21">llvm::CmpInst::getFlippedStrictnessPredicate</a></div><div class="ttdeci">Predicate getFlippedStrictnessPredicate() const</div><div class="ttdoc">For predicate of kind &quot;is X or equal to 0&quot; returns the predicate &quot;is X&quot;.</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00925">InstrTypes.h:925</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantInt_html_a31e8da5adf63afd38b4ab94bca823150"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#a31e8da5adf63afd38b4ab94bca823150">llvm::ConstantInt::getLimitedValue</a></div><div class="ttdeci">uint64_t getLimitedValue(uint64_t Limit=~0ULL) const</div><div class="ttdoc">getLimitedValue - If the value is smaller than the specified limit, return it, otherwise return the l...</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00243">Constants.h:243</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78ba720a42e85f7e981afd61e28473b0000a"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba720a42e85f7e981afd61e28473b0000a">llvm::CmpInst::ICMP_SGT</a></div><div class="ttdeci">@ ICMP_SGT</div><div class="ttdoc">signed greater than</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00745">InstrTypes.h:745</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_a562c9513409b74f02cb3a5c9bae672ea"><div class="ttname"><a href="classllvm_1_1APInt.html#a562c9513409b74f02cb3a5c9bae672ea">llvm::APInt::getSignedMaxValue</a></div><div class="ttdeci">static APInt getSignedMaxValue(unsigned numBits)</div><div class="ttdoc">Gets maximum signed value of APInt for a specific bit width.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00189">APInt.h:189</a></div></div>
<div class="ttc" id="alib_2Target_2README_8txt_html_a8db36c82f32d6f6a4d35a00e55be03a8"><div class="ttname"><a href="lib_2Target_2README_8txt.html#a8db36c82f32d6f6a4d35a00e55be03a8">Shift</a></div><div class="ttdeci">bool Shift</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2README_8txt_source.html#l00468">README.txt:468</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html"><div class="ttname"><a href="classllvm_1_1Type.html">llvm::Type</a></div><div class="ttdoc">The instances of the Type class are immutable: once they are created, they are never changed.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00045">Type.h:45</a></div></div>
<div class="ttc" id="anamespacellvm_html_a06c60fef11885eadbda4026c83ae9a13ac8cc76d76703c81c16e939be370683c1"><div class="ttname"><a href="namespacellvm.html#a06c60fef11885eadbda4026c83ae9a13ac8cc76d76703c81c16e939be370683c1">llvm::OverflowResult::AlwaysOverflowsLow</a></div><div class="ttdeci">@ AlwaysOverflowsLow</div><div class="ttdoc">Always overflows in the direction of signed/unsigned min value.</div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_a512fe2c15ea651294688eeec1341644c"><div class="ttname"><a href="classllvm_1_1APInt.html#a512fe2c15ea651294688eeec1341644c">llvm::APInt::getBitWidth</a></div><div class="ttdeci">unsigned getBitWidth() const</div><div class="ttdoc">Return the number of bits in the APInt.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l01439">APInt.h:1439</a></div></div>
<div class="ttc" id="aclassllvm_1_1ICmpInst_html_aaaeded5d0cab77f531b294638459aca5"><div class="ttname"><a href="classllvm_1_1ICmpInst.html#aaaeded5d0cab77f531b294638459aca5">llvm::ICmpInst::isEquality</a></div><div class="ttdeci">bool isEquality() const</div><div class="ttdoc">Return true if this predicate is either EQ or NE.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01292">Instructions.h:1292</a></div></div>
<div class="ttc" id="astructllvm_1_1APFloatBase_html_aa78db24ff4e5fbe0c3013bd4b9edb7fca4c1772918997b32aa846df0cf32ca5f1"><div class="ttname"><a href="structllvm_1_1APFloatBase.html#aa78db24ff4e5fbe0c3013bd4b9edb7fca4c1772918997b32aa846df0cf32ca5f1">llvm::APFloatBase::IEK_Inf</a></div><div class="ttdeci">@ IEK_Inf</div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l00259">APFloat.h:259</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a10d8839494fe8385aa1ddbca6f801d79"><div class="ttname"><a href="classllvm_1_1Instruction.html#a10d8839494fe8385aa1ddbca6f801d79">llvm::Instruction::hasNoInfs</a></div><div class="ttdeci">bool hasNoInfs() const LLVM_READONLY</div><div class="ttdoc">Determine whether the no-infs flag is set.</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8cpp_source.html#l00314">Instruction.cpp:314</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantExpr_html_aca9adeb29ed06c9f8694fc69cb2bf426"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#aca9adeb29ed06c9f8694fc69cb2bf426">llvm::ConstantExpr::getFPToSI</a></div><div class="ttdeci">static Constant * getFPToSI(Constant *C, Type *Ty, bool OnlyIfReduced=false)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l02190">Constants.cpp:2190</a></div></div>
<div class="ttc" id="aMips16ISelLowering_8cpp_html_ac16509a75e3d3fc46b9df1726be486ec"><div class="ttname"><a href="Mips16ISelLowering_8cpp.html#ac16509a75e3d3fc46b9df1726be486ec">T1</a></div><div class="ttdeci">#define T1</div><div class="ttdef"><b>Definition:</b> <a href="Mips16ISelLowering_8cpp_source.html#l00340">Mips16ISelLowering.cpp:340</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_afa5f2de80c23c28bd1a3320e8369aab2"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#afa5f2de80c23c28bd1a3320e8369aab2">llvm::InstCombinerImpl::foldICmpAndConstConst</a></div><div class="ttdeci">Instruction * foldICmpAndConstConst(ICmpInst &amp;Cmp, BinaryOperator *And, const APInt &amp;C1)</div><div class="ttdoc">Fold icmp (and X, C2), C1.</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCompares_8cpp_source.html#l01734">InstCombineCompares.cpp:1734</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_a46a7cbf3724080a5f4f4c7e7a4551e26"><div class="ttname"><a href="classllvm_1_1APInt.html#a46a7cbf3724080a5f4f4c7e7a4551e26">llvm::APInt::ugt</a></div><div class="ttdeci">bool ugt(const APInt &amp;RHS) const</div><div class="ttdoc">Unsigned greater than comparison.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l01160">APInt.h:1160</a></div></div>
<div class="ttc" id="astructllvm_1_1KnownBits_html_a1620c017d995c7ccbcb59e0212618017"><div class="ttname"><a href="structllvm_1_1KnownBits.html#a1620c017d995c7ccbcb59e0212618017">llvm::KnownBits::isZero</a></div><div class="ttdeci">bool isZero() const</div><div class="ttdoc">Returns true if value is all zero.</div><div class="ttdef"><b>Definition:</b> <a href="KnownBits_8h_source.html#l00072">KnownBits.h:72</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a43ac4fbaaf63a88eb5ac05f6d3e5649c"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a43ac4fbaaf63a88eb5ac05f6d3e5649c">llvm::PatternMatch::m_BinOp</a></div><div class="ttdeci">class_match&lt; BinaryOperator &gt; m_BinOp()</div><div class="ttdoc">Match an arbitrary binary operation and ignore it.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00084">PatternMatch.h:84</a></div></div>
<div class="ttc" id="aInstCombineCompares_8cpp_html_a841d82051da50c3373b91f4962eb98d8"><div class="ttname"><a href="InstCombineCompares_8cpp.html#a841d82051da50c3373b91f4962eb98d8">getAsConstantIndexedAddress</a></div><div class="ttdeci">static std::pair&lt; Value *, Value * &gt; getAsConstantIndexedAddress(Type *ElemTy, Value *V, const DataLayout &amp;DL)</div><div class="ttdoc">Looks through GEPs, IntToPtrInsts and PtrToIntInsts in order to express the input Value as a constant...</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCompares_8cpp_source.html#l00648">InstCombineCompares.cpp:648</a></div></div>
<div class="ttc" id="aInstCombineCompares_8cpp_html_ac8e5857b6e0d2ca06918e827da2696cb"><div class="ttname"><a href="InstCombineCompares_8cpp.html#ac8e5857b6e0d2ca06918e827da2696cb">foldICmpInvariantGroup</a></div><div class="ttdeci">static Instruction * foldICmpInvariantGroup(ICmpInst &amp;I)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCompares_8cpp_source.html#l06273">InstCombineCompares.cpp:6273</a></div></div>
<div class="ttc" id="anamespacellvm_1_1ore_html_a8f5533240c6722d987a2443cba42019d"><div class="ttname"><a href="namespacellvm_1_1ore.html#a8f5533240c6722d987a2443cba42019d">llvm::ore::NV</a></div><div class="ttdeci">DiagnosticInfoOptimizationBase::Argument NV</div><div class="ttdef"><b>Definition:</b> <a href="OptimizationRemarkEmitter_8h_source.html#l00136">OptimizationRemarkEmitter.h:136</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a64153676e101a130bbbaaf91635d253a"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a64153676e101a130bbbaaf91635d253a">llvm::PatternMatch::m_AShr</a></div><div class="ttdeci">BinaryOp_match&lt; LHS, RHS, Instruction::AShr &gt; m_AShr(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01123">PatternMatch.h:1123</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombiner_html_ab86d58ae73173328360a32cbbb0d5b14"><div class="ttname"><a href="classllvm_1_1InstCombiner.html#ab86d58ae73173328360a32cbbb0d5b14">llvm::InstCombiner::addToWorklist</a></div><div class="ttdeci">void addToWorklist(Instruction *I)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombiner_8h_source.html#l00367">InstCombiner.h:367</a></div></div>
<div class="ttc" id="anamespacellvm_1_1ARM__AM_html_a76f5f9f36bbd9f03c844c5b565f239ef"><div class="ttname"><a href="namespacellvm_1_1ARM__AM.html#a76f5f9f36bbd9f03c844c5b565f239ef">llvm::ARM_AM::ShiftOpc</a></div><div class="ttdeci">ShiftOpc</div><div class="ttdef"><b>Definition:</b> <a href="ARMAddressingModes_8h_source.html#l00027">ARMAddressingModes.h:27</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78ba2751d6136a2819749dcef65dc19a4246"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba2751d6136a2819749dcef65dc19a4246">llvm::CmpInst::ICMP_SLE</a></div><div class="ttdeci">@ ICMP_SLE</div><div class="ttdoc">signed less or equal</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00748">InstrTypes.h:748</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_a6da514c588b2668280a861a59bfc9fa5"><div class="ttname"><a href="classllvm_1_1APInt.html#a6da514c588b2668280a861a59bfc9fa5">llvm::APInt::intersects</a></div><div class="ttdeci">bool intersects(const APInt &amp;RHS) const</div><div class="ttdoc">This operation tests if there are any pairs of corresponding bits between this APInt and RHS that are...</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l01227">APInt.h:1227</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a59fb91d1691350f7d1b8e8a114e3f2a4"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a59fb91d1691350f7d1b8e8a114e3f2a4">llvm::BasicBlock::getSinglePredecessor</a></div><div class="ttdeci">const BasicBlock * getSinglePredecessor() const</div><div class="ttdoc">Return the predecessor of this block if it has a single predecessor block.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00284">BasicBlock.cpp:284</a></div></div>
<div class="ttc" id="aAMDGPURegBankSelect_8cpp_html_a14e0c000ed52e5fc187d4a885914cc1a"><div class="ttname"><a href="AMDGPURegBankSelect_8cpp.html#a14e0c000ed52e5fc187d4a885914cc1a">Select</a></div><div class="ttdeci">amdgpu AMDGPU Register Bank Select</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPURegBankSelect_8cpp_source.html#l00045">AMDGPURegBankSelect.cpp:45</a></div></div>
<div class="ttc" id="aInstCombineCompares_8cpp_html_ac8db7df93eb66c619e9f165ec4475bf8"><div class="ttname"><a href="InstCombineCompares_8cpp.html#ac8db7df93eb66c619e9f165ec4475bf8">foldReductionIdiom</a></div><div class="ttdeci">static Instruction * foldReductionIdiom(ICmpInst &amp;I, InstCombiner::BuilderTy &amp;Builder, const DataLayout &amp;DL)</div><div class="ttdoc">This function folds patterns produced by lowering of reduce idioms, such as llvm.vector....</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCompares_8cpp_source.html#l06294">InstCombineCompares.cpp:6294</a></div></div>
<div class="ttc" id="aTargetLibraryInfo_8cpp_html_aca185e6d0e9f423dbb24440206454872a52fc06c8638074204be3a7f9a35d65b1"><div class="ttname"><a href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a52fc06c8638074204be3a7f9a35d65b1">IntX</a></div><div class="ttdeci">@ IntX</div><div class="ttdef"><b>Definition:</b> <a href="TargetLibraryInfo_8cpp_source.html#l00053">TargetLibraryInfo.cpp:53</a></div></div>
<div class="ttc" id="anamespacellvm_1_1detail_html_adacdd44e0be9a1b6ebb5c4163bbe8e55"><div class="ttname"><a href="namespacellvm_1_1detail.html#adacdd44e0be9a1b6ebb5c4163bbe8e55">llvm::detail::ilogb</a></div><div class="ttdeci">int ilogb(const IEEEFloat &amp;Arg)</div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8cpp_source.html#l04695">APFloat.cpp:4695</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_af34549c39d6f741fbdaf9a795aa306e9"><div class="ttname"><a href="classllvm_1_1APInt.html#af34549c39d6f741fbdaf9a795aa306e9">llvm::APInt::lshr</a></div><div class="ttdeci">APInt lshr(unsigned shiftAmt) const</div><div class="ttdoc">Logical right-shift function.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00839">APInt.h:839</a></div></div>
<div class="ttc" id="aX86PartialReduction_8cpp_html_a87b8bfbbe9d8f7146d7f20a5fb42efd0"><div class="ttname"><a href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a></div><div class="ttdeci">Value * RHS</div><div class="ttdef"><b>Definition:</b> <a href="X86PartialReduction_8cpp_source.html#l00076">X86PartialReduction.cpp:76</a></div></div>
<div class="ttc" id="aclassllvm_1_1ArrayType_html"><div class="ttname"><a href="classllvm_1_1ArrayType.html">llvm::ArrayType</a></div><div class="ttdoc">Class to represent array types.</div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00357">DerivedTypes.h:357</a></div></div>
<div class="ttc" id="anamespacellvm_html_a7aad5a0e62a54747f455651ee2dd08ed"><div class="ttname"><a href="namespacellvm.html#a7aad5a0e62a54747f455651ee2dd08ed">llvm::matchSelectPattern</a></div><div class="ttdeci">SelectPatternResult matchSelectPattern(Value *V, Value *&amp;LHS, Value *&amp;RHS, Instruction::CastOps *CastOp=nullptr, unsigned Depth=0)</div><div class="ttdoc">Pattern match integer [SU]MIN, [SU]MAX and ABS idioms, returning the kind and providing the out param...</div><div class="ttdef"><b>Definition:</b> <a href="ValueTracking_8cpp_source.html#l06536">ValueTracking.cpp:6536</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_ae9d735be1ececf149966a4da253f0320"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#ae9d735be1ececf149966a4da253f0320">llvm::PatternMatch::m_c_And</a></div><div class="ttdeci">BinaryOp_match&lt; LHS, RHS, Instruction::And, true &gt; m_c_And(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdoc">Matches an And with LHS and RHS in either order.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l02262">PatternMatch.h:2262</a></div></div>
<div class="ttc" id="anamespacellvm_html_a6bf471c1030973649c2e426afc212097"><div class="ttname"><a href="namespacellvm.html#a6bf471c1030973649c2e426afc212097">llvm::SelectPatternFlavor</a></div><div class="ttdeci">SelectPatternFlavor</div><div class="ttdoc">Specific patterns of select instructions we can match.</div><div class="ttdef"><b>Definition:</b> <a href="ValueTracking_8h_source.html#l00690">ValueTracking.h:690</a></div></div>
<div class="ttc" id="anamespacellvm_html_aac36edd0f1ce976f0025c98e88d3830ead6bb6a2eca7d60c75e349ea45e138d74"><div class="ttname"><a href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830ead6bb6a2eca7d60c75e349ea45e138d74">llvm::RecurKind::SMin</a></div><div class="ttdeci">@ SMin</div><div class="ttdoc">Signed integer min implemented in terms of select(cmp()).</div></div>
<div class="ttc" id="aclassBaseType_html"><div class="ttname"><a href="classBaseType.html">BaseType</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_ac0467ca7fad871738b10db95feb40dad"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#ac0467ca7fad871738b10db95feb40dad">llvm::PatternMatch::m_BitCast</a></div><div class="ttdeci">CastClass_match&lt; OpTy, Instruction::BitCast &gt; m_BitCast(const OpTy &amp;Op)</div><div class="ttdoc">Matches BitCast.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01593">PatternMatch.h:1593</a></div></div>
<div class="ttc" id="anamespacellvm_1_1SPII_html_a1c7202c6054fef862bbed45957747cdfa5069619ca8fdce305534f3fe85091a0f"><div class="ttname"><a href="namespacellvm_1_1SPII.html#a1c7202c6054fef862bbed45957747cdfa5069619ca8fdce305534f3fe85091a0f">llvm::SPII::Load</a></div><div class="ttdeci">@ Load</div><div class="ttdef"><b>Definition:</b> <a href="SparcInstrInfo_8h_source.html#l00032">SparcInstrInfo.h:32</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78ba4c399f525bbcf03d72af4b303e6eeca8"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba4c399f525bbcf03d72af4b303e6eeca8">llvm::CmpInst::FCMP_OGT</a></div><div class="ttdeci">@ FCMP_OGT</div><div class="ttdoc">0 0 1 0 True if ordered and greater than</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00722">InstrTypes.h:722</a></div></div>
<div class="ttc" id="aInstCombineCompares_8cpp_html_a16fb1ef0518c86c028c57381c4bd831a"><div class="ttname"><a href="InstCombineCompares_8cpp.html#a16fb1ef0518c86c028c57381c4bd831a">canonicalizeCmpWithConstant</a></div><div class="ttdeci">static ICmpInst * canonicalizeCmpWithConstant(ICmpInst &amp;I)</div><div class="ttdoc">If we have an icmp le or icmp ge instruction with a constant operand, turn it into the appropriate ic...</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCompares_8cpp_source.html#l06009">InstCombineCompares.cpp:6009</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_a3a0519ef55bfe3d07f8fb2eafb5cdbbdafbaedde498cdead4f2780217646e9ba1"><div class="ttname"><a href="classllvm_1_1APInt.html#a3a0519ef55bfe3d07f8fb2eafb5cdbbdafbaedde498cdead4f2780217646e9ba1">llvm::APInt::Rounding::UP</a></div><div class="ttdeci">@ UP</div></div>
<div class="ttc" id="aConstantFolding_8h_html"><div class="ttname"><a href="ConstantFolding_8h.html">ConstantFolding.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_add4e37b60ea64faafbc9a5bf3e27280f"><div class="ttname"><a href="classllvm_1_1APInt.html#add4e37b60ea64faafbc9a5bf3e27280f">llvm::APInt::getZero</a></div><div class="ttdeci">static APInt getZero(unsigned numBits)</div><div class="ttdoc">Get the '0' value for the specified bit-width.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00177">APInt.h:177</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a94bf3939e0bea91b481096473d0e549f"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a94bf3939e0bea91b481096473d0e549f">llvm::PatternMatch::m_Deferred</a></div><div class="ttdeci">deferredval_ty&lt; Value &gt; m_Deferred(Value *const &amp;V)</div><div class="ttdoc">Like m_Specific(), but works if the specific value to match is determined as part of the same match()...</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00790">PatternMatch.h:790</a></div></div>
<div class="ttc" id="aMD5_8cpp_html_a96d73bbd7af15cb1fc38c3f4a3bd82e9"><div class="ttname"><a href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a></div><div class="ttdeci">#define F(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00055">MD5.cpp:55</a></div></div>
<div class="ttc" id="anamespacellvm_html_a557be4c1daf6eb2611b214f927dccee2"><div class="ttname"><a href="namespacellvm.html#a557be4c1daf6eb2611b214f927dccee2">llvm::ConstantFoldExtractValueInstruction</a></div><div class="ttdeci">Constant * ConstantFoldExtractValueInstruction(Constant *Agg, ArrayRef&lt; unsigned &gt; Idxs)</div><div class="ttdoc">Attempt to constant fold an extractvalue instruction with the specified operands and indices.</div><div class="ttdef"><b>Definition:</b> <a href="ConstantFold_8cpp_source.html#l00775">ConstantFold.cpp:775</a></div></div>
<div class="ttc" id="aKnownBits_8h_html"><div class="ttname"><a href="KnownBits_8h.html">KnownBits.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html"><div class="ttname"><a href="classllvm_1_1BasicBlock.html">llvm::BasicBlock</a></div><div class="ttdoc">LLVM Basic Block Representation.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00055">BasicBlock.h:55</a></div></div>
<div class="ttc" id="astructllvm_1_1KnownBits_html_a1eeff70353694cb360b2893553c18e7d"><div class="ttname"><a href="structllvm_1_1KnownBits.html#a1eeff70353694cb360b2893553c18e7d">llvm::KnownBits::countMinTrailingZeros</a></div><div class="ttdeci">unsigned countMinTrailingZeros() const</div><div class="ttdoc">Returns the minimum number of trailing zero bits.</div><div class="ttdef"><b>Definition:</b> <a href="KnownBits_8h_source.html#l00233">KnownBits.h:233</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AArch64PACKey_html_abf4394f452bde3f544999858d71e4b46a8a67c950f093761829058d45fbc3f522"><div class="ttname"><a href="namespacellvm_1_1AArch64PACKey.html#abf4394f452bde3f544999858d71e4b46a8a67c950f093761829058d45fbc3f522">llvm::AArch64PACKey::DB</a></div><div class="ttdeci">@ DB</div><div class="ttdef"><b>Definition:</b> <a href="AArch64BaseInfo_8h_source.html#l00794">AArch64BaseInfo.h:794</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_a4aa7e7ca8ab4093fd0dbadb223b998c0"><div class="ttname"><a href="classllvm_1_1APInt.html#a4aa7e7ca8ab4093fd0dbadb223b998c0">llvm::APInt::isSignMask</a></div><div class="ttdeci">bool isSignMask() const</div><div class="ttdoc">Check if the APInt's value is returned by getSignMask.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00454">APInt.h:454</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a3de757fc0f1dc7f8f8e9211b32ac106d"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a3de757fc0f1dc7f8f8e9211b32ac106d">llvm::PatternMatch::m_c_ICmp</a></div><div class="ttdeci">CmpClass_match&lt; LHS, RHS, ICmpInst, ICmpInst::Predicate, true &gt; m_c_ICmp(ICmpInst::Predicate &amp;Pred, const LHS &amp;L, const RHS &amp;R)</div><div class="ttdoc">Matches an ICmp with a predicate over LHS and RHS in either order.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l02234">PatternMatch.h:2234</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_aca6428e7fec51ba0b55594f469eb9691"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">llvm::PatternMatch::m_OneUse</a></div><div class="ttdeci">OneUse_match&lt; T &gt; m_OneUse(const T &amp;SubPattern)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00067">PatternMatch.h:67</a></div></div>
<div class="ttc" id="aInstCombineCompares_8cpp_html_aa0ff2e37cf366df0d46226a21431a47a"><div class="ttname"><a href="InstCombineCompares_8cpp.html#aa0ff2e37cf366df0d46226a21431a47a">canRewriteGEPAsOffset</a></div><div class="ttdeci">static bool canRewriteGEPAsOffset(Type *ElemTy, Value *Start, Value *Base, const DataLayout &amp;DL, SetVector&lt; Value * &gt; &amp;Explored)</div><div class="ttdoc">Returns true if we can rewrite Start as a GEP with pointer Base and some integer offset.</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCompares_8cpp_source.html#l00410">InstCombineCompares.cpp:410</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78ba75016d5872d90adf89cc1cbf5763f474"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba75016d5872d90adf89cc1cbf5763f474">llvm::CmpInst::FCMP_ULT</a></div><div class="ttdeci">@ FCMP_ULT</div><div class="ttdoc">1 1 0 0 True if unordered or less than</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00732">InstrTypes.h:732</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantExpr_html_a554ab77949b0a16670a83ec3307501eb"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#a554ab77949b0a16670a83ec3307501eb">llvm::ConstantExpr::getSub</a></div><div class="ttdeci">static Constant * getSub(Constant *C1, Constant *C2, bool HasNUW=false, bool HasNSW=false)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l02664">Constants.cpp:2664</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_a8a9b236a3c941e893f6eaa6ca6e4a36f"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#a8a9b236a3c941e893f6eaa6ca6e4a36f">llvm::InstCombinerImpl::eraseInstFromFunction</a></div><div class="ttdeci">Instruction * eraseInstFromFunction(Instruction &amp;I) override</div><div class="ttdoc">Combiner aware instruction erasure.</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineInternal_8h_source.html#l00408">InstCombineInternal.h:408</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_aa148a41463d0d36003033ac988b2c28d"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#aa148a41463d0d36003033ac988b2c28d">llvm::InstCombinerImpl::foldICmpAddConstant</a></div><div class="ttdeci">Instruction * foldICmpAddConstant(ICmpInst &amp;Cmp, BinaryOperator *Add, const APInt &amp;C)</div><div class="ttdoc">Fold icmp (add X, Y), C.</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCompares_8cpp_source.html#l02791">InstCombineCompares.cpp:2791</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_a676411f28657ced572f5b8030254af13"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#a676411f28657ced572f5b8030254af13">llvm::InstCombinerImpl::foldICmpInstWithConstantAllowUndef</a></div><div class="ttdeci">Instruction * foldICmpInstWithConstantAllowUndef(ICmpInst &amp;Cmp, const APInt &amp;C)</div><div class="ttdoc">Try to fold integer comparisons with a constant operand: icmp Pred X, C where X is some kind of instr...</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCompares_8cpp_source.html#l03424">InstCombineCompares.cpp:3424</a></div></div>
<div class="ttc" id="anamespacellvm_1_1BitmaskEnumDetail_html_a91efa71de05b0c2d00730a0279f58658"><div class="ttname"><a href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">llvm::BitmaskEnumDetail::Mask</a></div><div class="ttdeci">constexpr std::underlying_type_t&lt; E &gt; Mask()</div><div class="ttdoc">Get a bitmask with 1s in all places up to the high-order bit of E's largest value.</div><div class="ttdef"><b>Definition:</b> <a href="BitmaskEnum_8h_source.html#l00080">BitmaskEnum.h:80</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_aac9e78b3aa02ec087c4621358f506718"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">llvm::PatternMatch::m_APInt</a></div><div class="ttdeci">apint_match m_APInt(const APInt *&amp;Res)</div><div class="ttdoc">Match a ConstantInt or splatted ConstantVector, binding the specified pointer to the contained APInt.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00278">PatternMatch.h:278</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_a7c9fd9f2dba79c2289639f72457fcea1"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#a7c9fd9f2dba79c2289639f72457fcea1">llvm::InstCombinerImpl::foldICmpUsingBoolRange</a></div><div class="ttdeci">Instruction * foldICmpUsingBoolRange(ICmpInst &amp;I)</div><div class="ttdoc">If one operand of an icmp is effectively a bool (value range of {0,1}), then try to reduce patterns b...</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCompares_8cpp_source.html#l05868">InstCombineCompares.cpp:5868</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_a3d58c11c9787c2764e5f11bb127ced00"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#a3d58c11c9787c2764e5f11bb127ced00">llvm::InstCombinerImpl::foldICmpInstWithConstantNotInt</a></div><div class="ttdeci">Instruction * foldICmpInstWithConstantNotInt(ICmpInst &amp;Cmp)</div><div class="ttdoc">Handle icmp with constant (but not simple integer constant) RHS.</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCompares_8cpp_source.html#l03574">InstCombineCompares.cpp:3574</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_af4b1ccc0b78f9da9f3f3944e06007f1d"><div class="ttname"><a href="classllvm_1_1APInt.html#af4b1ccc0b78f9da9f3f3944e06007f1d">llvm::APInt::uge</a></div><div class="ttdeci">bool uge(const APInt &amp;RHS) const</div><div class="ttdoc">Unsigned greater or equal comparison.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l01199">APInt.h:1199</a></div></div>
<div class="ttc" id="astructllvm_1_1SimplifyQuery_html_a928ce56952772d0e0f43cab3a489a6fe"><div class="ttname"><a href="structllvm_1_1SimplifyQuery.html#a928ce56952772d0e0f43cab3a489a6fe">llvm::SimplifyQuery::AC</a></div><div class="ttdeci">AssumptionCache * AC</div><div class="ttdef"><b>Definition:</b> <a href="InstructionSimplify_8h_source.html#l00097">InstructionSimplify.h:97</a></div></div>
<div class="ttc" id="aX86PartialReduction_8cpp_html_a9e1483f7215664a2315c53c3558d9a8d"><div class="ttname"><a href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a></div><div class="ttdeci">Value * LHS</div><div class="ttdef"><b>Definition:</b> <a href="X86PartialReduction_8cpp_source.html#l00075">X86PartialReduction.cpp:75</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantInt_html"><div class="ttname"><a href="classllvm_1_1ConstantInt.html">llvm::ConstantInt</a></div><div class="ttdoc">This is the shared class of boolean and integer constants.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00078">Constants.h:78</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombiner_html_abc13043585e5845ce7fc26b858851ec9"><div class="ttname"><a href="classllvm_1_1InstCombiner.html#abc13043585e5845ce7fc26b858851ec9">llvm::InstCombiner::replaceOperand</a></div><div class="ttdeci">Instruction * replaceOperand(Instruction &amp;I, unsigned OpNum, Value *V)</div><div class="ttdoc">Replace operand of instruction and add old operand to the worklist.</div><div class="ttdef"><b>Definition:</b> <a href="InstCombiner_8h_source.html#l00442">InstCombiner.h:442</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_ab4e05d690df389b8b1477c90387b575f"><div class="ttname"><a href="classllvm_1_1Instruction.html#ab4e05d690df389b8b1477c90387b575f">llvm::Instruction::getOpcode</a></div><div class="ttdeci">unsigned getOpcode() const</div><div class="ttdoc">Returns a member of one of the enums like Instruction::Add.</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00168">Instruction.h:168</a></div></div>
<div class="ttc" id="anamespacellvm_html_a0d10fe510ced2849a8074fe81e5d04ce"><div class="ttname"><a href="namespacellvm.html#a0d10fe510ced2849a8074fe81e5d04ce">llvm::all_of</a></div><div class="ttdeci">bool all_of(R &amp;&amp;range, UnaryPredicate P)</div><div class="ttdoc">Provide wrappers to std::all_of which take ranges instead of having to pass begin/end explicitly.</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l01735">STLExtras.h:1735</a></div></div>
<div class="ttc" id="aInstCombineCompares_8cpp_html_a23bd5c3ac042286389d708b03932343a"><div class="ttname"><a href="InstCombineCompares_8cpp.html#a23bd5c3ac042286389d708b03932343a">foldICmpShlOne</a></div><div class="ttdeci">static Instruction * foldICmpShlOne(ICmpInst &amp;Cmp, Instruction *Shl, const APInt &amp;C)</div><div class="ttdoc">Fold icmp (shl 1, Y), C.</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCompares_8cpp_source.html#l02101">InstCombineCompares.cpp:2101</a></div></div>
<div class="ttc" id="anamespacellvm_html_a6bf471c1030973649c2e426afc212097aee3dafa9fac8f6fa1e1110ef463cc452"><div class="ttname"><a href="namespacellvm.html#a6bf471c1030973649c2e426afc212097aee3dafa9fac8f6fa1e1110ef463cc452">llvm::SPF_UNKNOWN</a></div><div class="ttdeci">@ SPF_UNKNOWN</div><div class="ttdef"><b>Definition:</b> <a href="ValueTracking_8h_source.html#l00691">ValueTracking.h:691</a></div></div>
<div class="ttc" id="anamespacellvm_html_a101ff77214c2a41c0b769a81311b819a"><div class="ttname"><a href="namespacellvm.html#a101ff77214c2a41c0b769a81311b819a">llvm::computeOverflowForSignedSub</a></div><div class="ttdeci">OverflowResult computeOverflowForSignedSub(const Value *LHS, const Value *RHS, const DataLayout &amp;DL, AssumptionCache *AC, const Instruction *CxtI, const DominatorTree *DT)</div><div class="ttdef"><b>Definition:</b> <a href="ValueTracking_8cpp_source.html#l05124">ValueTracking.cpp:5124</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a69cd23c0f1215087c5b006c1bf6222c4"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a69cd23c0f1215087c5b006c1bf6222c4">llvm::PatternMatch::m_LowBitMask</a></div><div class="ttdeci">cst_pred_ty&lt; is_lowbit_mask &gt; m_LowBitMask()</div><div class="ttdoc">Match an integer or vector with only the low bit(s) set.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00585">PatternMatch.h:585</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_ac47353e50683b2440ca9ad4a1fa860d0"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#ac47353e50683b2440ca9ad4a1fa860d0">llvm::PatternMatch::m_UIToFP</a></div><div class="ttdeci">CastClass_match&lt; OpTy, Instruction::UIToFP &gt; m_UIToFP(const OpTy &amp;Op)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01662">PatternMatch.h:1662</a></div></div>
<div class="ttc" id="anamespacellvm_html_a6339f2ad6701dc229c34ca4305596d3a"><div class="ttname"><a href="namespacellvm.html#a6339f2ad6701dc229c34ca4305596d3a">llvm::isSplatValue</a></div><div class="ttdeci">bool isSplatValue(const Value *V, int Index=-1, unsigned Depth=0)</div><div class="ttdoc">Return true if each element of the vector value V is poisoned or equal to every other non-poisoned el...</div><div class="ttdef"><b>Definition:</b> <a href="VectorUtils_8cpp_source.html#l00386">VectorUtils.cpp:386</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_a6804d9caf15411f55e7b9e9f397f0422"><div class="ttname"><a href="classllvm_1_1APInt.html#a6804d9caf15411f55e7b9e9f397f0422">llvm::APInt::isNegative</a></div><div class="ttdeci">bool isNegative() const</div><div class="ttdoc">Determine sign of this APInt.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00312">APInt.h:312</a></div></div>
<div class="ttc" id="aclassllvm_1_1SelectInst_html_aa55fb74dd22008fdcc26a63f44576022"><div class="ttname"><a href="classllvm_1_1SelectInst.html#aa55fb74dd22008fdcc26a63f44576022">llvm::SelectInst::Create</a></div><div class="ttdeci">static SelectInst * Create(Value *C, Value *S1, Value *S2, const Twine &amp;NameStr=&quot;&quot;, Instruction *InsertBefore=nullptr, Instruction *MDFrom=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01777">Instructions.h:1777</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_ad3f2b185fd3e7dd4d0e694e773792fb8"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#ad3f2b185fd3e7dd4d0e694e773792fb8">llvm::InstCombinerImpl::dominatesAllUses</a></div><div class="ttdeci">bool dominatesAllUses(const Instruction *DI, const Instruction *UI, const BasicBlock *DB) const</div><div class="ttdoc">True when DB dominates all uses of DI except UI.</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCompares_8cpp_source.html#l05517">InstCombineCompares.cpp:5517</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombiner_html_afe741651c79e1ff35939d1c04a3a191b"><div class="ttname"><a href="classllvm_1_1InstCombiner.html#afe741651c79e1ff35939d1c04a3a191b">llvm::InstCombiner::ComputeMaxSignificantBits</a></div><div class="ttdeci">unsigned ComputeMaxSignificantBits(const Value *Op, unsigned Depth=0, const Instruction *CxtI=nullptr) const</div><div class="ttdef"><b>Definition:</b> <a href="InstCombiner_8h_source.html#l00487">InstCombiner.h:487</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_ae31c50e938b95587c87aed0f133b1346"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#ae31c50e938b95587c87aed0f133b1346">llvm::InstCombinerImpl::visitICmpInst</a></div><div class="ttdeci">Instruction * visitICmpInst(ICmpInst &amp;I)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCompares_8cpp_source.html#l06339">InstCombineCompares.cpp:6339</a></div></div>
<div class="ttc" id="anamespacellvm_html_aac36edd0f1ce976f0025c98e88d3830eac33315685a0cba3ce53be378b3c7874b"><div class="ttname"><a href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eac33315685a0cba3ce53be378b3c7874b">llvm::RecurKind::And</a></div><div class="ttdeci">@ And</div><div class="ttdoc">Bitwise or logical AND of integers.</div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_a6e17f9e532ca4a61804f28091b10b522"><div class="ttname"><a href="classllvm_1_1APInt.html#a6e17f9e532ca4a61804f28091b10b522">llvm::APInt::eq</a></div><div class="ttdeci">bool eq(const APInt &amp;RHS) const</div><div class="ttdoc">Equality comparison.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l01057">APInt.h:1057</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_a8efbb860a56c4deccffeca4d2963fb70"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#a8efbb860a56c4deccffeca4d2963fb70">llvm::InstCombinerImpl::foldICmpDivConstant</a></div><div class="ttdeci">Instruction * foldICmpDivConstant(ICmpInst &amp;Cmp, BinaryOperator *Div, const APInt &amp;C)</div><div class="ttdoc">Fold icmp ({su}div X, Y), C.</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCompares_8cpp_source.html#l02524">InstCombineCompares.cpp:2524</a></div></div>
<div class="ttc" id="aInstCombineInternal_8h_html"><div class="ttname"><a href="InstCombineInternal_8h.html">InstCombineInternal.h</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_addb87fe3f509b7803d3f5933ee24b560"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#addb87fe3f509b7803d3f5933ee24b560">llvm::PatternMatch::m_Select</a></div><div class="ttdeci">ThreeOps_match&lt; Cond, LHS, RHS, Instruction::Select &gt; m_Select(const Cond &amp;C, const LHS &amp;L, const RHS &amp;R)</div><div class="ttdoc">Matches SelectInst.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01462">PatternMatch.h:1462</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a247b6987d634040b8aa6fb9c5887b703"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a247b6987d634040b8aa6fb9c5887b703">llvm::PatternMatch::m_ZExtOrSExt</a></div><div class="ttdeci">match_combine_or&lt; CastClass_match&lt; OpTy, Instruction::ZExt &gt;, CastClass_match&lt; OpTy, Instruction::SExt &gt; &gt; m_ZExtOrSExt(const OpTy &amp;Op)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01648">PatternMatch.h:1648</a></div></div>
<div class="ttc" id="anamespacellvm_html_a1f2af9794c01bcd5e098a24c80c8410f"><div class="ttname"><a href="namespacellvm.html#a1f2af9794c01bcd5e098a24c80c8410f">llvm::computeOverflowForSignedAdd</a></div><div class="ttdeci">OverflowResult computeOverflowForSignedAdd(const Value *LHS, const Value *RHS, const DataLayout &amp;DL, AssumptionCache *AC=nullptr, const Instruction *CxtI=nullptr, const DominatorTree *DT=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="ValueTracking_8cpp_source.html#l05603">ValueTracking.cpp:5603</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_a9175bf0e4b0c3a18e2f86bb11270ee78"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#a9175bf0e4b0c3a18e2f86bb11270ee78">llvm::InstCombinerImpl::foldICmpUDivConstant</a></div><div class="ttdeci">Instruction * foldICmpUDivConstant(ICmpInst &amp;Cmp, BinaryOperator *UDiv, const APInt &amp;C)</div><div class="ttdoc">Fold icmp (udiv X, Y), C.</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCompares_8cpp_source.html#l02491">InstCombineCompares.cpp:2491</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a25d956d9e0beadd47ce4bc255dfa811d"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">llvm::PatternMatch::match</a></div><div class="ttdeci">bool match(Val *V, const Pattern &amp;P)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00049">PatternMatch.h:49</a></div></div>
<div class="ttc" id="aLint_8cpp_html_a45005634b54e2126cb3e6ec0dbc9ade4"><div class="ttname"><a href="Lint_8cpp.html#a45005634b54e2126cb3e6ec0dbc9ade4">isZero</a></div><div class="ttdeci">static bool isZero(Value *V, const DataLayout &amp;DL, DominatorTree *DT, AssumptionCache *AC)</div><div class="ttdef"><b>Definition:</b> <a href="Lint_8cpp_source.html#l00524">Lint.cpp:524</a></div></div>
<div class="ttc" id="aclassllvm_1_1Constant_html_ae4b6abe77abf42fb02081a6cc41a0132"><div class="ttname"><a href="classllvm_1_1Constant.html#ae4b6abe77abf42fb02081a6cc41a0132">llvm::Constant::isNullValue</a></div><div class="ttdeci">bool isNullValue() const</div><div class="ttdoc">Return true if this is the value that would be returned by getNullValue.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00076">Constants.cpp:76</a></div></div>
<div class="ttc" id="alib_2Target_2X86_2README_8txt_html_af91797dc0ab1ae005fdbf19482859eaf"><div class="ttname"><a href="lib_2Target_2X86_2README_8txt.html#af91797dc0ab1ae005fdbf19482859eaf">shl</a></div><div class="ttdeci">We currently generate a but we really shouldn eax ecx xorl edx divl ecx eax divl ecx movl eax ret A similar code sequence works for division We currently compile i32 v2 eax eax jo LBB1_2 shl</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2X86_2README_8txt_source.html#l01271">README.txt:1271</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_a49cd5939942c6665aba4cae8c220dff1"><div class="ttname"><a href="classllvm_1_1APInt.html#a49cd5939942c6665aba4cae8c220dff1">llvm::APInt::isZero</a></div><div class="ttdeci">bool isZero() const</div><div class="ttdoc">Determine if this value is zero, i.e. all bits are clear.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00366">APInt.h:366</a></div></div>
<div class="ttc" id="anamespacellvm_html_a06c60fef11885eadbda4026c83ae9a13ad4d9862eafa015a05101d9f662bb153a"><div class="ttname"><a href="namespacellvm.html#a06c60fef11885eadbda4026c83ae9a13ad4d9862eafa015a05101d9f662bb153a">llvm::OverflowResult::MayOverflow</a></div><div class="ttdeci">@ MayOverflow</div><div class="ttdoc">May or may not overflow.</div></div>
<div class="ttc" id="aInstCombineCompares_8cpp_html_ab335c3e40e2c31212c57288e514ad149"><div class="ttname"><a href="InstCombineCompares_8cpp.html#ab335c3e40e2c31212c57288e514ad149">foldFCmpFNegCommonOp</a></div><div class="ttdeci">static Instruction * foldFCmpFNegCommonOp(FCmpInst &amp;I)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCompares_8cpp_source.html#l06985">InstCombineCompares.cpp:6985</a></div></div>
<div class="ttc" id="aBuiltinGCs_8cpp_html_a6742d2e0a668baf1196ec69e158d5f15"><div class="ttname"><a href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a></div><div class="ttdeci">static GCRegistry::Add&lt; CoreCLRGC &gt; E(&quot;coreclr&quot;, &quot;CoreCLR-compatible GC&quot;)</div></div>
<div class="ttc" id="aclassllvm_1_1User_html"><div class="ttname"><a href="classllvm_1_1User.html">llvm::User</a></div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00044">User.h:44</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombiner_html_a63d5f62f004af8e0903574463abc6a81"><div class="ttname"><a href="classllvm_1_1InstCombiner.html#a63d5f62f004af8e0903574463abc6a81">llvm::InstCombiner::getFlippedStrictnessPredicateAndConstant</a></div><div class="ttdeci">static std::optional&lt; std::pair&lt; CmpInst::Predicate, Constant * &gt; &gt; getFlippedStrictnessPredicateAndConstant(CmpInst::Predicate Pred, Constant *C)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCompares_8cpp_source.html#l05941">InstCombineCompares.cpp:5941</a></div></div>
<div class="ttc" id="aInstCombineCompares_8cpp_html_ae597bfbd02f7f19a21c4a506e3ba5300"><div class="ttname"><a href="InstCombineCompares_8cpp.html#ae597bfbd02f7f19a21c4a506e3ba5300">foldICmpWithTruncSignExtendedVal</a></div><div class="ttdeci">static Value * foldICmpWithTruncSignExtendedVal(ICmpInst &amp;I, InstCombiner::BuilderTy &amp;Builder)</div><div class="ttdoc">Some comparisons can be simplified.</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCompares_8cpp_source.html#l03783">InstCombineCompares.cpp:3783</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_aa4a99c313af96b3b50a9768338a54b2e"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#aa4a99c313af96b3b50a9768338a54b2e">llvm::PatternMatch::m_SpecificIntAllowUndef</a></div><div class="ttdeci">specific_intval&lt; true &gt; m_SpecificIntAllowUndef(APInt V)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00862">PatternMatch.h:862</a></div></div>
<div class="ttc" id="aREADME__ALTIVEC_8txt_html_a9aacd9146afe44bf656cd664e2a88c8c"><div class="ttname"><a href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a></div><div class="ttdeci">(vector float) vec_cmpeq(*A, *B) C</div><div class="ttdef"><b>Definition:</b> <a href="README__ALTIVEC_8txt_source.html#l00086">README_ALTIVEC.txt:86</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78bad92f160316221fd4090520bb2b3cefc5"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bad92f160316221fd4090520bb2b3cefc5">llvm::CmpInst::ICMP_ULE</a></div><div class="ttdeci">@ ICMP_ULE</div><div class="ttdoc">unsigned less or equal</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00744">InstrTypes.h:744</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantExpr_html_a02560cda155aaed54314383bed827d60"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#a02560cda155aaed54314383bed827d60">llvm::ConstantExpr::getIntToPtr</a></div><div class="ttdeci">static Constant * getIntToPtr(Constant *C, Type *Ty, bool OnlyIfReduced=false)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l02215">Constants.cpp:2215</a></div></div>
<div class="ttc" id="aclassllvm_1_1GEPOperator_html_a3e7aed6d56bdb4dfdb9faf5821d159d6"><div class="ttname"><a href="classllvm_1_1GEPOperator.html#a3e7aed6d56bdb4dfdb9faf5821d159d6">llvm::GEPOperator::getPointerOperand</a></div><div class="ttdeci">Value * getPointerOperand()</div><div class="ttdef"><b>Definition:</b> <a href="Operator_8h_source.html#l00420">Operator.h:420</a></div></div>
<div class="ttc" id="astructllvm_1_1SelectPatternResult_html_a94c732c9e96c40976f0509fe0233fe7b"><div class="ttname"><a href="structllvm_1_1SelectPatternResult.html#a94c732c9e96c40976f0509fe0233fe7b">llvm::SelectPatternResult::isMinOrMax</a></div><div class="ttdeci">static bool isMinOrMax(SelectPatternFlavor SPF)</div><div class="ttdoc">When implementing this min/max pattern as fcmp; select, does the fcmp have to be ordered?</div><div class="ttdef"><b>Definition:</b> <a href="ValueTracking_8h_source.html#l00722">ValueTracking.h:722</a></div></div>
<div class="ttc" id="astructllvm_1_1KnownBits_html_aba205f553f24c184ea47fc1a6cb56537"><div class="ttname"><a href="structllvm_1_1KnownBits.html#aba205f553f24c184ea47fc1a6cb56537">llvm::KnownBits::One</a></div><div class="ttdeci">APInt One</div><div class="ttdef"><b>Definition:</b> <a href="KnownBits_8h_source.html#l00025">KnownBits.h:25</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_a6fccc5a9bafccfbd5927bb72eb035635"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#a6fccc5a9bafccfbd5927bb72eb035635">llvm::InstCombinerImpl::foldICmpWithZero</a></div><div class="ttdeci">Instruction * foldICmpWithZero(ICmpInst &amp;Cmp)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCompares_8cpp_source.html#l01266">InstCombineCompares.cpp:1266</a></div></div>
<div class="ttc" id="aclassllvm_1_1FCmpInst_html"><div class="ttname"><a href="classllvm_1_1FCmpInst.html">llvm::FCmpInst</a></div><div class="ttdoc">This instruction compares its operands according to the predicate given to the constructor.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01371">Instructions.h:1371</a></div></div>
<div class="ttc" id="aOcamlGCPrinter_8cpp_html_afcf2f797ed287a723263583c9b1c1bce"><div class="ttname"><a href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a></div><div class="ttdeci">static GCMetadataPrinterRegistry::Add&lt; OcamlGCMetadataPrinter &gt; Y(&quot;ocaml&quot;, &quot;ocaml 3.10-compatible collector&quot;)</div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_ac457b78bde79027e427b9d2ca79bb2f1"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#ac457b78bde79027e427b9d2ca79bb2f1">llvm::InstCombinerImpl::foldICmpAndConstant</a></div><div class="ttdeci">Instruction * foldICmpAndConstant(ICmpInst &amp;Cmp, BinaryOperator *And, const APInt &amp;C)</div><div class="ttdoc">Fold icmp (and X, Y), C.</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCompares_8cpp_source.html#l01847">InstCombineCompares.cpp:1847</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a7a371c4faf8e41f7cac98ad694f504dc"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a7a371c4faf8e41f7cac98ad694f504dc">llvm::PatternMatch::m_PosZeroFP</a></div><div class="ttdeci">cstfp_pred_ty&lt; is_pos_zero_fp &gt; m_PosZeroFP()</div><div class="ttdoc">Match a floating-point positive zero.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00673">PatternMatch.h:673</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallInst_html_a850d8262cd900958b3153c4aa080b2bb"><div class="ttname"><a href="classllvm_1_1CallInst.html#a850d8262cd900958b3153c4aa080b2bb">llvm::CallInst::Create</a></div><div class="ttdeci">static CallInst * Create(FunctionType *Ty, Value *F, const Twine &amp;NameStr=&quot;&quot;, Instruction *InsertBefore=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01528">Instructions.h:1528</a></div></div>
<div class="ttc" id="aSIInstrInfo_8cpp_html_a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791"><div class="ttname"><a href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a></div><div class="ttdeci">@ SI</div><div class="ttdef"><b>Definition:</b> <a href="SIInstrInfo_8cpp_source.html#l07993">SIInstrInfo.cpp:7993</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78bae51609fc6a425f849d37c28cb9bc0344"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bae51609fc6a425f849d37c28cb9bc0344">llvm::CmpInst::FCMP_UGE</a></div><div class="ttdeci">@ FCMP_UGE</div><div class="ttdoc">1 0 1 1 True if unordered, greater than, or equal</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00731">InstrTypes.h:731</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_a071e8d814b2b30b02544fad964227b8e"><div class="ttname"><a href="classllvm_1_1APInt.html#a071e8d814b2b30b02544fad964227b8e">llvm::APInt::getAllOnes</a></div><div class="ttdeci">static APInt getAllOnes(unsigned numBits)</div><div class="ttdoc">Return an APInt of a specified width with all bits set.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00214">APInt.h:214</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_ab01d8694a759a934e01f1c558c3ce862"><div class="ttname"><a href="classllvm_1_1APInt.html#ab01d8694a759a934e01f1c558c3ce862">llvm::APInt::getLimitedValue</a></div><div class="ttdeci">uint64_t getLimitedValue(uint64_t Limit=UINT64_MAX) const</div><div class="ttdoc">If this value is smaller than the specified limit, return it, otherwise return the limit value.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00463">APInt.h:463</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a1bc022868b23918efa44df511f4d5b61"><div class="ttname"><a href="classllvm_1_1Type.html#a1bc022868b23918efa44df511f4d5b61">llvm::Type::isVectorTy</a></div><div class="ttdeci">bool isVectorTy() const</div><div class="ttdoc">True if this is an instance of VectorType.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00258">Type.h:258</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a04353aa48874f9bda89ff9059cd1a5a6"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a04353aa48874f9bda89ff9059cd1a5a6">llvm::PatternMatch::m_Instruction</a></div><div class="ttdeci">bind_ty&lt; Instruction &gt; m_Instruction(Instruction *&amp;I)</div><div class="ttdoc">Match an instruction, capturing it if we match.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00716">PatternMatch.h:716</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_aecb93439702247fe5353a9966f7cefcd"><div class="ttname"><a href="classllvm_1_1Value.html#aecb93439702247fe5353a9966f7cefcd">llvm::Value::uses</a></div><div class="ttdeci">iterator_range&lt; use_iterator &gt; uses()</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00376">Value.h:376</a></div></div>
<div class="ttc" id="astructllvm_1_1SimplifyQuery_html_a0ffb6d79f6befe2030328bd1d7110feb"><div class="ttname"><a href="structllvm_1_1SimplifyQuery.html#a0ffb6d79f6befe2030328bd1d7110feb">llvm::SimplifyQuery::DL</a></div><div class="ttdeci">const DataLayout &amp; DL</div><div class="ttdef"><b>Definition:</b> <a href="InstructionSimplify_8h_source.html#l00094">InstructionSimplify.h:94</a></div></div>
<div class="ttc" id="anamespacellvm_1_1dwarf_html_a5d3c920b66ea797d6adb243862fdf47a"><div class="ttname"><a href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">llvm::dwarf::Index</a></div><div class="ttdeci">Index</div><div class="ttdef"><b>Definition:</b> <a href="Dwarf_8h_source.html#l00550">Dwarf.h:550</a></div></div>
<div class="ttc" id="anamespacellvm_html_ae490b518ab7ca0abfd0abad2e2eabb0f"><div class="ttname"><a href="namespacellvm.html#ae490b518ab7ca0abfd0abad2e2eabb0f">llvm::simplifyFCmpInst</a></div><div class="ttdeci">Value * simplifyFCmpInst(unsigned Predicate, Value *LHS, Value *RHS, FastMathFlags FMF, const SimplifyQuery &amp;Q)</div><div class="ttdoc">Given operands for an FCmpInst, fold the result or return null.</div><div class="ttdef"><b>Definition:</b> <a href="InstructionSimplify_8cpp_source.html#l04162">InstructionSimplify.cpp:4162</a></div></div>
<div class="ttc" id="aInstCombineCompares_8cpp_html_a3bed745566338e51f330ff68e39ff4a1"><div class="ttname"><a href="InstCombineCompares_8cpp.html#a3bed745566338e51f330ff68e39ff4a1">isChainSelectCmpBranch</a></div><div class="ttdeci">static bool isChainSelectCmpBranch(const SelectInst *SI)</div><div class="ttdoc">Return true when the instruction sequence within a block is select-cmp-br.</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCompares_8cpp_source.html#l05539">InstCombineCompares.cpp:5539</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a2cbdca7c8267aac6914d674f8e81841b"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a2cbdca7c8267aac6914d674f8e81841b">llvm::PatternMatch::m_ZExt</a></div><div class="ttdeci">CastClass_match&lt; OpTy, Instruction::ZExt &gt; m_ZExt(const OpTy &amp;Op)</div><div class="ttdoc">Matches ZExt.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01629">PatternMatch.h:1629</a></div></div>
<div class="ttc" id="anamespacellvm_html_a646986783f35e0fef8988f0f28d2589f"><div class="ttname"><a href="namespacellvm.html#a646986783f35e0fef8988f0f28d2589f">llvm::Log2_32</a></div><div class="ttdeci">unsigned Log2_32(uint32_t Value)</div><div class="ttdoc">Return the floor log base 2 of the specified value, -1 if the value is zero.</div><div class="ttdef"><b>Definition:</b> <a href="MathExtras_8h_source.html#l00382">MathExtras.h:382</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_ad191220adaaedcfba833985509a17452"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#ad191220adaaedcfba833985509a17452">llvm::PatternMatch::m_c_Add</a></div><div class="ttdeci">BinaryOp_match&lt; LHS, RHS, Instruction::Add, true &gt; m_c_Add(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdoc">Matches a Add with LHS and RHS in either order.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l02248">PatternMatch.h:2248</a></div></div>
<div class="ttc" id="aBuiltinGCs_8cpp_html_a7abf5fb4071cb25dbce06dfb5ee3c937"><div class="ttname"><a href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a></div><div class="ttdeci">static GCRegistry::Add&lt; OcamlGC &gt; B(&quot;ocaml&quot;, &quot;ocaml 3.10-compatible GC&quot;)</div></div>
<div class="ttc" id="aclassllvm_1_1IntegerType_html"><div class="ttname"><a href="classllvm_1_1IntegerType.html">llvm::IntegerType</a></div><div class="ttdoc">Class to represent integer types.</div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00040">DerivedTypes.h:40</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_afa0b2fa29ba074f2b6ec9ac11163f2d9"><div class="ttname"><a href="classllvm_1_1Instruction.html#afa0b2fa29ba074f2b6ec9ac11163f2d9">llvm::Instruction::CastOps</a></div><div class="ttdeci">CastOps</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00823">Instruction.h:823</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a74a8221adbd09a9076a1ab471644b223"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a74a8221adbd09a9076a1ab471644b223">llvm::PatternMatch::m_MaxOrMin</a></div><div class="ttdeci">match_combine_or&lt; match_combine_or&lt; MaxMin_match&lt; ICmpInst, LHS, RHS, smax_pred_ty &gt;, MaxMin_match&lt; ICmpInst, LHS, RHS, smin_pred_ty &gt; &gt;, match_combine_or&lt; MaxMin_match&lt; ICmpInst, LHS, RHS, umax_pred_ty &gt;, MaxMin_match&lt; ICmpInst, LHS, RHS, umin_pred_ty &gt; &gt; &gt; m_MaxOrMin(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01882">PatternMatch.h:1882</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_af431ec215bba8bb9c56e7541d99920f2"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#af431ec215bba8bb9c56e7541d99920f2">llvm::PatternMatch::m_FNeg</a></div><div class="ttdeci">FNeg_match&lt; OpTy &gt; m_FNeg(const OpTy &amp;X)</div><div class="ttdoc">Match 'fneg X' as 'fsub -0.0, X'.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01033">PatternMatch.h:1033</a></div></div>
<div class="ttc" id="aclassllvm_1_1Constant_html_a4d51384de6e1798bb6aa875aebeea9f0"><div class="ttname"><a href="classllvm_1_1Constant.html#a4d51384de6e1798bb6aa875aebeea9f0">llvm::Constant::getAllOnesValue</a></div><div class="ttdeci">static Constant * getAllOnesValue(Type *Ty)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00403">Constants.cpp:403</a></div></div>
<div class="ttc" id="aclassllvm_1_1BinaryOperator_html_a31bf07f3f61525486633bc1d0bbaf029"><div class="ttname"><a href="classllvm_1_1BinaryOperator.html#a31bf07f3f61525486633bc1d0bbaf029">llvm::BinaryOperator::getOpcode</a></div><div class="ttdeci">BinaryOps getOpcode() const</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00391">InstrTypes.h:391</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a677ac8d99ff3c2d32a95c21de9ed372c"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a677ac8d99ff3c2d32a95c21de9ed372c">llvm::PatternMatch::m_ConstantInt</a></div><div class="ttdeci">class_match&lt; ConstantInt &gt; m_ConstantInt()</div><div class="ttdoc">Match an arbitrary ConstantInt and ignore it.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00147">PatternMatch.h:147</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78baf0159e4005258dc54f20b6fc227d19ed"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baf0159e4005258dc54f20b6fc227d19ed">llvm::CmpInst::FCMP_UNO</a></div><div class="ttdeci">@ FCMP_UNO</div><div class="ttdoc">1 0 0 0 True if unordered: isnan(X) | isnan(Y)</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00728">InstrTypes.h:728</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html"><div class="ttname"><a href="classllvm_1_1Instruction.html">llvm::Instruction</a></div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00041">Instruction.h:41</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a3d1ce4e87339c423692359ff22209b42"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a3d1ce4e87339c423692359ff22209b42">llvm::PatternMatch::m_IDiv</a></div><div class="ttdeci">BinOpPred_match&lt; LHS, RHS, is_idiv_op &gt; m_IDiv(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdoc">Matches integer division operations.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01324">PatternMatch.h:1324</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a9f382207d841377156d4c7868b66b9a5"><div class="ttname"><a href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">llvm::Type::getScalarSizeInBits</a></div><div class="ttdeci">unsigned getScalarSizeInBits() const LLVM_READONLY</div><div class="ttdoc">If this is a vector type, return the getPrimitiveSizeInBits value for the element type.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00188">Type.cpp:188</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_a423e2c491de1408d54e35f0b47d076be"><div class="ttname"><a href="classllvm_1_1APInt.html#a423e2c491de1408d54e35f0b47d076be">llvm::APInt::isAllOnes</a></div><div class="ttdeci">bool isAllOnes() const</div><div class="ttdoc">Determine if all bits are set. This is true for zero-width values.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00354">APInt.h:354</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a7af604b3a6b3a44113d4c54c5c04d031"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a7af604b3a6b3a44113d4c54c5c04d031">llvm::PatternMatch::m_c_Or</a></div><div class="ttdeci">BinaryOp_match&lt; LHS, RHS, Instruction::Or, true &gt; m_c_Or(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdoc">Matches an Or with LHS and RHS in either order.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l02269">PatternMatch.h:2269</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_a9ab27a13577b53506529f28d41aa0672"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#a9ab27a13577b53506529f28d41aa0672">llvm::InstCombinerImpl::foldICmpWithCastOp</a></div><div class="ttdeci">Instruction * foldICmpWithCastOp(ICmpInst &amp;ICmp)</div><div class="ttdoc">Handle icmp (cast x), (cast or constant).</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCompares_8cpp_source.html#l05078">InstCombineCompares.cpp:5078</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_a47a83bda096455c177d40a2fbae13de1"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#a47a83bda096455c177d40a2fbae13de1">llvm::InstCombinerImpl::foldICmpShlConstConst</a></div><div class="ttdeci">Instruction * foldICmpShlConstConst(ICmpInst &amp;I, Value *ShAmt, const APInt &amp;C1, const APInt &amp;C2)</div><div class="ttdoc">Handle &quot;(icmp eq/ne (shl AP2, A), AP1)&quot; -&gt; (icmp eq/ne A, TrailingZeros(AP1) - TrailingZeros(AP2)).</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCompares_8cpp_source.html#l01085">InstCombineCompares.cpp:1085</a></div></div>
<div class="ttc" id="aclassllvm_1_1APSInt_html"><div class="ttname"><a href="classllvm_1_1APSInt.html">llvm::APSInt</a></div><div class="ttdoc">An arbitrary precision integer that knows its signedness.</div><div class="ttdef"><b>Definition:</b> <a href="APSInt_8h_source.html#l00023">APSInt.h:23</a></div></div>
<div class="ttc" id="aInstCombineCompares_8cpp_html_a257335da07186a947a2e4d3a9dd85207"><div class="ttname"><a href="InstCombineCompares_8cpp.html#a257335da07186a947a2e4d3a9dd85207">foldICmpIntrinsicWithIntrinsic</a></div><div class="ttdeci">static Instruction * foldICmpIntrinsicWithIntrinsic(ICmpInst &amp;Cmp)</div><div class="ttdoc">Fold an icmp with LLVM intrinsics.</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCompares_8cpp_source.html#l03385">InstCombineCompares.cpp:3385</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_a217e0207d9cc8e046c2dccbf0e4bb198"><div class="ttname"><a href="classllvm_1_1APInt.html#a217e0207d9cc8e046c2dccbf0e4bb198">llvm::APInt::getZExtValue</a></div><div class="ttdeci">uint64_t getZExtValue() const</div><div class="ttdoc">Get zero extended value.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l01494">APInt.h:1494</a></div></div>
<div class="ttc" id="anamespacellvm_html_a0bf75467957937ad23ad7be19f489934"><div class="ttname"><a href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">llvm::STATISTIC</a></div><div class="ttdeci">STATISTIC(NumFunctions, &quot;Total number of functions&quot;)</div></div>
<div class="ttc" id="aclassllvm_1_1ConstantVector_html_aa3b241b35b0039b413faf1ef4e873eb7"><div class="ttname"><a href="classllvm_1_1ConstantVector.html#aa3b241b35b0039b413faf1ef4e873eb7">llvm::ConstantVector::getSplat</a></div><div class="ttdeci">static Constant * getSplat(ElementCount EC, Constant *Elt)</div><div class="ttdoc">Return a ConstantVector with the specified constant in each element.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l01399">Constants.cpp:1399</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_adcb96bd09d7c75c7669fa5f9d1190899"><div class="ttname"><a href="classllvm_1_1APInt.html#adcb96bd09d7c75c7669fa5f9d1190899">llvm::APInt::getHighBitsSet</a></div><div class="ttdeci">static APInt getHighBitsSet(unsigned numBits, unsigned hiBitsSet)</div><div class="ttdoc">Constructs an APInt value that has the top hiBitsSet bits set.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00279">APInt.h:279</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_acb575761ffbc75842def91257cc5168d"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#acb575761ffbc75842def91257cc5168d">llvm::InstCombinerImpl::foldICmpEquality</a></div><div class="ttdeci">Instruction * foldICmpEquality(ICmpInst &amp;Cmp)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCompares_8cpp_source.html#l04672">InstCombineCompares.cpp:4672</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantExpr_html_a9fe0b1e68f897c642cde7e54184f2f4e"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#a9fe0b1e68f897c642cde7e54184f2f4e">llvm::ConstantExpr::getXor</a></div><div class="ttdeci">static Constant * getXor(Constant *C1, Constant *C2)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l02686">Constants.cpp:2686</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html">llvm::InstCombinerImpl</a></div><div class="ttdef"><b>Definition:</b> <a href="InstCombineInternal_8h_source.html#l00061">InstCombineInternal.h:61</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantInt_html_a969709dd49c28865a482d8b870f87c46"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">llvm::ConstantInt::get</a></div><div class="ttdeci">static Constant * get(Type *Ty, uint64_t V, bool IsSigned=false)</div><div class="ttdoc">If Ty is a vector type, return a Constant with a splat of the given value.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00887">Constants.cpp:887</a></div></div>
<div class="ttc" id="aInstCombineCompares_8cpp_html_a2374f343a581f0096975d8a8a8d48fd6"><div class="ttname"><a href="InstCombineCompares_8cpp.html#a2374f343a581f0096975d8a8a8d48fd6">foldFabsWithFcmpZero</a></div><div class="ttdeci">static Instruction * foldFabsWithFcmpZero(FCmpInst &amp;I, InstCombinerImpl &amp;IC)</div><div class="ttdoc">Optimize fabs(X) compared with zero.</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCompares_8cpp_source.html#l06885">InstCombineCompares.cpp:6885</a></div></div>
<div class="ttc" id="anamespacellvm_html_a3b1c5788b85ffa254be0e834edf5cf8f"><div class="ttname"><a href="namespacellvm.html#a3b1c5788b85ffa254be0e834edf5cf8f">llvm::getUnderlyingObject</a></div><div class="ttdeci">const Value * getUnderlyingObject(const Value *V, unsigned MaxLookup=6)</div><div class="ttdoc">This method strips off any GEP address adjustments and pointer casts from the specified value,...</div><div class="ttdef"><b>Definition:</b> <a href="ValueTracking_8cpp_source.html#l04567">ValueTracking.cpp:4567</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78ba024db78a5ed74f64666f3ca4955e6eca"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba024db78a5ed74f64666f3ca4955e6eca">llvm::CmpInst::FCMP_OEQ</a></div><div class="ttdeci">@ FCMP_OEQ</div><div class="ttdoc">0 0 0 1 True if ordered and equal</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00721">InstrTypes.h:721</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78ba326bee0a4a424cef21c1cf8adb8b8dd8"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba326bee0a4a424cef21c1cf8adb8b8dd8">llvm::CmpInst::FCMP_OLT</a></div><div class="ttdeci">@ FCMP_OLT</div><div class="ttdoc">0 1 0 0 True if ordered and less than</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00724">InstrTypes.h:724</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_a7e8226e6453c8bcf7e5c06d28b1e207b"><div class="ttname"><a href="classllvm_1_1APInt.html#a7e8226e6453c8bcf7e5c06d28b1e207b">llvm::APInt::sle</a></div><div class="ttdeci">bool sle(const APInt &amp;RHS) const</div><div class="ttdoc">Signed less or equal comparison.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l01144">APInt.h:1144</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_ae1a04895305aaea96e5e82d95c39bbe0"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#ae1a04895305aaea96e5e82d95c39bbe0">llvm::PatternMatch::m_URem</a></div><div class="ttdeci">BinaryOp_match&lt; LHS, RHS, Instruction::URem &gt; m_URem(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01075">PatternMatch.h:1075</a></div></div>
<div class="ttc" id="aPatternMatch_8h_html"><div class="ttname"><a href="PatternMatch_8h.html">PatternMatch.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_a9a99431f0828d0222c617eb876bc5d34"><div class="ttname"><a href="classllvm_1_1APInt.html#a9a99431f0828d0222c617eb876bc5d34">llvm::APInt::countTrailingZeros</a></div><div class="ttdeci">unsigned countTrailingZeros() const</div><div class="ttdoc">Count the number of trailing zero bits.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l01591">APInt.h:1591</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a0f8629c0ff1db9c384e378b2ca860f0a"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a0f8629c0ff1db9c384e378b2ca860f0a">llvm::PatternMatch::m_APIntAllowUndef</a></div><div class="ttdeci">apint_match m_APIntAllowUndef(const APInt *&amp;Res)</div><div class="ttdoc">Match APInt while allowing undefs in splat vector constants.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00284">PatternMatch.h:284</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_a44d622af4cca05108d8d7eb9bfd79977"><div class="ttname"><a href="classllvm_1_1APInt.html#a44d622af4cca05108d8d7eb9bfd79977">llvm::APInt::usub_ov</a></div><div class="ttdeci">APInt usub_ov(const APInt &amp;RHS, bool &amp;Overflow) const</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8cpp_source.html#l01946">APInt.cpp:1946</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a13e877ef779ba7a0688081079f4f9b03"><div class="ttname"><a href="classllvm_1_1Type.html#a13e877ef779ba7a0688081079f4f9b03">llvm::Type::getIntegerBitWidth</a></div><div class="ttdeci">unsigned getIntegerBitWidth() const</div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00097">DerivedTypes.h:97</a></div></div>
<div class="ttc" id="aInstCombineCompares_8cpp_html_a2577f2e8dc0c15d16b2751424fc225d2"><div class="ttname"><a href="InstCombineCompares_8cpp.html#a2577f2e8dc0c15d16b2751424fc225d2">canonicalizeICmpBool</a></div><div class="ttdeci">static Instruction * canonicalizeICmpBool(ICmpInst &amp;I, InstCombiner::BuilderTy &amp;Builder)</div><div class="ttdoc">Integer compare with boolean values can always be turned into bitwise ops.</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCompares_8cpp_source.html#l06053">InstCombineCompares.cpp:6053</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_aaa1ec19d8da987f818acfcfd9111f480"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#aaa1ec19d8da987f818acfcfd9111f480">llvm::PatternMatch::m_c_UMax</a></div><div class="ttdeci">MaxMin_match&lt; ICmpInst, LHS, RHS, umax_pred_ty, true &gt; m_c_UMax(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdoc">Matches a UMax with LHS and RHS in either order.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l02352">PatternMatch.h:2352</a></div></div>
<div class="ttc" id="aErlangGCPrinter_8cpp_html_a74b474c0616ab55c1d9487f11fd31d26"><div class="ttname"><a href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a></div><div class="ttdeci">static GCMetadataPrinterRegistry::Add&lt; ErlangGCPrinter &gt; X(&quot;erlang&quot;, &quot;erlang-compatible garbage collector&quot;)</div></div>
<div class="ttc" id="aInstCombineCompares_8cpp_html_a21d115d23f25fa3a2eabb1acaac67444"><div class="ttname"><a href="InstCombineCompares_8cpp.html#a21d115d23f25fa3a2eabb1acaac67444">addWithOverflow</a></div><div class="ttdeci">static bool addWithOverflow(APInt &amp;Result, const APInt &amp;In1, const APInt &amp;In2, bool IsSigned=false)</div><div class="ttdoc">Compute Result = In1+In2, returning true if the result overflowed for this type.</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCompares_8cpp_source.html#l00040">InstCombineCompares.cpp:40</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_a78aa741a7874614a21b66826ffe6e5ce"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#a78aa741a7874614a21b66826ffe6e5ce">llvm::InstCombinerImpl::foldICmpBinOpEqualityWithConstant</a></div><div class="ttdeci">Instruction * foldICmpBinOpEqualityWithConstant(ICmpInst &amp;Cmp, BinaryOperator *BO, const APInt &amp;C)</div><div class="ttdoc">Fold an icmp equality instruction with binary operator LHS and constant RHS: icmp eq/ne BO,...</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCompares_8cpp_source.html#l03196">InstCombineCompares.cpp:3196</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_aebdb2700a77d10ae6f0ce115e23d9f77"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#aebdb2700a77d10ae6f0ce115e23d9f77">llvm::PatternMatch::m_One</a></div><div class="ttdeci">cst_pred_ty&lt; is_one &gt; m_One()</div><div class="ttdoc">Match an integer 1 or a vector with all elements equal to 1.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00517">PatternMatch.h:517</a></div></div>
<div class="ttc" id="anamespacellvm_html_aac36edd0f1ce976f0025c98e88d3830ea1c692ed4bf463fb08fca4d8cb8201ac0"><div class="ttname"><a href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830ea1c692ed4bf463fb08fca4d8cb8201ac0">llvm::RecurKind::UMin</a></div><div class="ttdeci">@ UMin</div><div class="ttdoc">Unisgned integer min implemented in terms of select(cmp()).</div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a55743bd32282bf6f87aeb49237b1fb68"><div class="ttname"><a href="classllvm_1_1Instruction.html#a55743bd32282bf6f87aeb49237b1fb68">llvm::Instruction::isCommutative</a></div><div class="ttdeci">bool isCommutative() const LLVM_READONLY</div><div class="ttdoc">Return true if the instruction is commutative:</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8cpp_source.html#l00816">Instruction.cpp:816</a></div></div>
<div class="ttc" id="anamespacellvm_html_a06c60fef11885eadbda4026c83ae9a13"><div class="ttname"><a href="namespacellvm.html#a06c60fef11885eadbda4026c83ae9a13">llvm::OverflowResult</a></div><div class="ttdeci">OverflowResult</div><div class="ttdef"><b>Definition:</b> <a href="ValueTracking_8h_source.html#l00500">ValueTracking.h:500</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_ab6006923d1a3139d70abc8f6552a7960"><div class="ttname"><a href="classllvm_1_1APInt.html#ab6006923d1a3139d70abc8f6552a7960">llvm::APInt::ashr</a></div><div class="ttdeci">APInt ashr(unsigned ShiftAmt) const</div><div class="ttdoc">Arithmetic right-shift function.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00815">APInt.h:815</a></div></div>
<div class="ttc" id="aADT_2tmp_8txt_html_a07ed0bfaa124c15897944fe3eaa971ab"><div class="ttname"><a href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a></div><div class="ttdeci">Class for arbitrary precision integers APInt is a functional replacement for common case unsigned integer type like unsigned long or uint64_t</div><div class="ttdef"><b>Definition:</b> <a href="ADT_2tmp_8txt_source.html#l00001">tmp.txt:1</a></div></div>
<div class="ttc" id="anamespacellvm_html_ad78da75bd1f157e72100f97d1ecdc756"><div class="ttname"><a href="namespacellvm.html#ad78da75bd1f157e72100f97d1ecdc756">llvm::all_equal</a></div><div class="ttdeci">bool all_equal(std::initializer_list&lt; T &gt; Values)</div><div class="ttdoc">Returns true if all Values in the initializer lists are equal or the list.</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l01986">STLExtras.h:1986</a></div></div>
<div class="ttc" id="anamespacellvm_html_acb22fb04083152eee862457e42e8dc31"><div class="ttname"><a href="namespacellvm.html#acb22fb04083152eee862457e42e8dc31">llvm::predecessors</a></div><div class="ttdeci">auto predecessors(const MachineBasicBlock *BB)</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l01266">MachineBasicBlock.h:1266</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_ad5e60756e331a97669d11b5c9d8691a2"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#ad5e60756e331a97669d11b5c9d8691a2">llvm::PatternMatch::m_Power2</a></div><div class="ttdeci">cst_pred_ty&lt; is_power2 &gt; m_Power2()</div><div class="ttdoc">Match an integer or vector power-of-2.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00544">PatternMatch.h:544</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html"><div class="ttname"><a href="classllvm_1_1CmpInst.html">llvm::CmpInst</a></div><div class="ttdoc">This class is the base class for the comparison instructions.</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00708">InstrTypes.h:708</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a82e2ea7f0ab67e33e22b3a2a188feaba"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a82e2ea7f0ab67e33e22b3a2a188feaba">llvm::PatternMatch::m_Xor</a></div><div class="ttdeci">BinaryOp_match&lt; LHS, RHS, Instruction::Xor &gt; m_Xor(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01105">PatternMatch.h:1105</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_ac6d28a9b11139182134a9618028a0d07"><div class="ttname"><a href="classllvm_1_1Type.html#ac6d28a9b11139182134a9618028a0d07">llvm::Type::isIntegerTy</a></div><div class="ttdeci">bool isIntegerTy() const</div><div class="ttdoc">True if this is an instance of IntegerType.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00222">Type.h:222</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_aec662ee6ab1490a4cabebf2812e5b9ca"><div class="ttname"><a href="classllvm_1_1APInt.html#aec662ee6ab1490a4cabebf2812e5b9ca">llvm::APInt::getOneBitSet</a></div><div class="ttdeci">static APInt getOneBitSet(unsigned numBits, unsigned BitNo)</div><div class="ttdoc">Return an APInt with exactly one bit set in the result.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00222">APInt.h:222</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_aa41636955199b88164376e06e5914855"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#aa41636955199b88164376e06e5914855">llvm::PatternMatch::m_Shr</a></div><div class="ttdeci">BinOpPred_match&lt; LHS, RHS, is_right_shift_op &gt; m_Shr(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdoc">Matches logical shift operations.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01303">PatternMatch.h:1303</a></div></div>
<div class="ttc" id="astructllvm_1_1SelectPatternResult_html"><div class="ttname"><a href="structllvm_1_1SelectPatternResult.html">llvm::SelectPatternResult</a></div><div class="ttdef"><b>Definition:</b> <a href="ValueTracking_8h_source.html#l00713">ValueTracking.h:713</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a3029ab4957ff8bf58c4cd361cb243c47"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a3029ab4957ff8bf58c4cd361cb243c47">llvm::PatternMatch::m_FPTrunc</a></div><div class="ttdeci">CastClass_match&lt; OpTy, Instruction::FPTrunc &gt; m_FPTrunc(const OpTy &amp;Op)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01682">PatternMatch.h:1682</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a92ad549d62e33f9f5b8c3bc4b510b365"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a92ad549d62e33f9f5b8c3bc4b510b365">llvm::PatternMatch::m_ZExtOrSelf</a></div><div class="ttdeci">match_combine_or&lt; CastClass_match&lt; OpTy, Instruction::ZExt &gt;, OpTy &gt; m_ZExtOrSelf(const OpTy &amp;Op)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01635">PatternMatch.h:1635</a></div></div>
<div class="ttc" id="aInstCombineCompares_8cpp_html_ad9cf1659d9bbb94bd12262ce66ec2ba4"><div class="ttname"><a href="InstCombineCompares_8cpp.html#ad9cf1659d9bbb94bd12262ce66ec2ba4">isNeutralValue</a></div><div class="ttdeci">static bool isNeutralValue(Instruction::BinaryOps BinaryOp, Value *RHS, bool IsSigned)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCompares_8cpp_source.html#l05134">InstCombineCompares.cpp:5134</a></div></div>
<div class="ttc" id="aVectorUtils_8h_html"><div class="ttname"><a href="VectorUtils_8h.html">VectorUtils.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantExpr_html_af238147cf5453729781a0fcc7322e1c6"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#af238147cf5453729781a0fcc7322e1c6">llvm::ConstantExpr::getTrunc</a></div><div class="ttdeci">static Constant * getTrunc(Constant *C, Type *Ty, bool OnlyIfReduced=false)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l02091">Constants.cpp:2091</a></div></div>
<div class="ttc" id="aclassllvm_1_1GEPOperator_html_a608bf9c26922fc798bc8bd85601ce94d"><div class="ttname"><a href="classllvm_1_1GEPOperator.html#a608bf9c26922fc798bc8bd85601ce94d">llvm::GEPOperator::hasAllZeroIndices</a></div><div class="ttdeci">bool hasAllZeroIndices() const</div><div class="ttdoc">Return true if all of the indices of this GEP are zeros.</div><div class="ttdef"><b>Definition:</b> <a href="Operator_8h_source.html#l00454">Operator.h:454</a></div></div>
<div class="ttc" id="aclassllvm_1_1APFloat_html"><div class="ttname"><a href="classllvm_1_1APFloat.html">llvm::APFloat</a></div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l00744">APFloat.h:744</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_adafa9575780f9246d1df0b7e2a619356"><div class="ttname"><a href="classllvm_1_1APInt.html#adafa9575780f9246d1df0b7e2a619356">llvm::APInt::slt</a></div><div class="ttdeci">bool slt(const APInt &amp;RHS) const</div><div class="ttdoc">Signed less than comparison.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l01108">APInt.h:1108</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantExpr_html_afe6a25e856a1a63ffff098f05e3f26d2"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#afe6a25e856a1a63ffff098f05e3f26d2">llvm::ConstantExpr::getCompare</a></div><div class="ttdeci">static Constant * getCompare(unsigned short pred, Constant *C1, Constant *C2, bool OnlyIfReduced=false)</div><div class="ttdoc">Return an ICmp or FCmp comparison operator constant expression.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l02419">Constants.cpp:2419</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_ad9b99a13e459cb18bb386ddd610ecf8c"><div class="ttname"><a href="classllvm_1_1Type.html#ad9b99a13e459cb18bb386ddd610ecf8c">llvm::Type::getFPMantissaWidth</a></div><div class="ttdeci">int getFPMantissaWidth() const</div><div class="ttdoc">Return the width of the mantissa of this type.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00193">Type.cpp:193</a></div></div>
<div class="ttc" id="anamespacellvm_html_a969e30a11e5b3ac2ad7ab5fcc537d495"><div class="ttname"><a href="namespacellvm.html#a969e30a11e5b3ac2ad7ab5fcc537d495">llvm::simplifyICmpInst</a></div><div class="ttdeci">Value * simplifyICmpInst(unsigned Predicate, Value *LHS, Value *RHS, const SimplifyQuery &amp;Q)</div><div class="ttdoc">Given operands for an ICmpInst, fold the result or return null.</div><div class="ttdef"><b>Definition:</b> <a href="InstructionSimplify_8cpp_source.html#l03946">InstructionSimplify.cpp:3946</a></div></div>
<div class="ttc" id="aclassllvm_1_1ICmpInst_html_af07a09f1cda33d984cc725dc9e856d40"><div class="ttname"><a href="classllvm_1_1ICmpInst.html#af07a09f1cda33d984cc725dc9e856d40">llvm::ICmpInst::getUnsignedPredicate</a></div><div class="ttdeci">Predicate getUnsignedPredicate() const</div><div class="ttdoc">For example, EQ-&gt;EQ, SLE-&gt;ULE, UGT-&gt;UGT, etc.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01276">Instructions.h:1276</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_ae77be336e228cf9aa00709a8606dfb98"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#ae77be336e228cf9aa00709a8606dfb98">llvm::PatternMatch::m_Zero</a></div><div class="ttdeci">is_zero m_Zero()</div><div class="ttdoc">Match any null constant or a vector with all elements equal to 0.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00537">PatternMatch.h:537</a></div></div>
<div class="ttc" id="aclassllvm_1_1SetVector_html_a51469ab7f147668678a486661b02ae59"><div class="ttname"><a href="classllvm_1_1SetVector.html#a51469ab7f147668678a486661b02ae59">llvm::SetVector::contains</a></div><div class="ttdeci">bool contains(const key_type &amp;key) const</div><div class="ttdoc">Check if the SetVector contains the given key.</div><div class="ttdef"><b>Definition:</b> <a href="SetVector_8h_source.html#l00202">SetVector.h:202</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalVariable_html_a0e5946885029c1bce1350d34f2539b1b"><div class="ttname"><a href="classllvm_1_1GlobalVariable.html#a0e5946885029c1bce1350d34f2539b1b">llvm::GlobalVariable::getInitializer</a></div><div class="ttdeci">const Constant * getInitializer() const</div><div class="ttdoc">getInitializer - Return the initializer for this global variable.</div><div class="ttdef"><b>Definition:</b> <a href="GlobalVariable_8h_source.html#l00135">GlobalVariable.h:135</a></div></div>
<div class="ttc" id="aclassllvm_1_1Constant_html"><div class="ttname"><a href="classllvm_1_1Constant.html">llvm::Constant</a></div><div class="ttdoc">This is an important base class in LLVM.</div><div class="ttdef"><b>Definition:</b> <a href="Constant_8h_source.html#l00041">Constant.h:41</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a350f4fdc01c770b5cf6a8be2624ae3e5"><div class="ttname"><a href="classllvm_1_1Instruction.html#a350f4fdc01c770b5cf6a8be2624ae3e5">llvm::Instruction::hasNoSignedWrap</a></div><div class="ttdeci">bool hasNoSignedWrap() const LLVM_READONLY</div><div class="ttdoc">Determine whether the no signed wrap flag is set.</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8cpp_source.html#l00177">Instruction.cpp:177</a></div></div>
<div class="ttc" id="aADT_2tmp_8txt_html_aa10ee7493bddf2c751ca6e05451ef410"><div class="ttname"><a href="ADT_2tmp_8txt.html#aa10ee7493bddf2c751ca6e05451ef410">unsigned</a></div><div class="ttdeci">Class for arbitrary precision integers APInt is a functional replacement for common case unsigned integer type like unsigned</div><div class="ttdef"><b>Definition:</b> <a href="ADT_2tmp_8txt_source.html#l00001">tmp.txt:1</a></div></div>
<div class="ttc" id="aclassllvm_1_1APFloat_html_ae4eca54fe8b71670e3bd3a2b18469d73"><div class="ttname"><a href="classllvm_1_1APFloat.html#ae4eca54fe8b71670e3bd3a2b18469d73">llvm::APFloat::roundToIntegral</a></div><div class="ttdeci">opStatus roundToIntegral(roundingMode RM)</div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l01073">APFloat.h:1073</a></div></div>
<div class="ttc" id="aclassllvm_1_1ICmpInst_html"><div class="ttname"><a href="classllvm_1_1ICmpInst.html">llvm::ICmpInst</a></div><div class="ttdoc">This instruction compares its operands according to the predicate given to the constructor.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01197">Instructions.h:1197</a></div></div>
<div class="ttc" id="aELFObjHandler_8cpp_html_aef61945034b9431b804748fc317c5548"><div class="ttname"><a href="ELFObjHandler_8cpp.html#aef61945034b9431b804748fc317c5548">Index</a></div><div class="ttdeci">uint32_t Index</div><div class="ttdef"><b>Definition:</b> <a href="ELFObjHandler_8cpp_source.html#l00083">ELFObjHandler.cpp:83</a></div></div>
<div class="ttc" id="aclassllvm_1_1Constant_html_a174c8fd19771468c53842a7fde8ddce1"><div class="ttname"><a href="classllvm_1_1Constant.html#a174c8fd19771468c53842a7fde8ddce1">llvm::Constant::replaceUndefsWith</a></div><div class="ttdeci">static Constant * replaceUndefsWith(Constant *C, Constant *Replacement)</div><div class="ttdoc">Try to replace undefined constant C or undefined elements in C with Replacement.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00755">Constants.cpp:755</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_a71f7f6e3a4774296efc7274196a74793"><div class="ttname"><a href="classllvm_1_1APInt.html#a71f7f6e3a4774296efc7274196a74793">llvm::APInt::sdiv</a></div><div class="ttdeci">APInt sdiv(const APInt &amp;RHS) const</div><div class="ttdoc">Signed division function for APInt.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8cpp_source.html#l01642">APInt.cpp:1642</a></div></div>
<div class="ttc" id="aclassllvm_1_1ExtractValueInst_html_a1cccf41f6be0351ccceed2c6447ff04a"><div class="ttname"><a href="classllvm_1_1ExtractValueInst.html#a1cccf41f6be0351ccceed2c6447ff04a">llvm::ExtractValueInst::Create</a></div><div class="ttdeci">static ExtractValueInst * Create(Value *Agg, ArrayRef&lt; unsigned &gt; Idxs, const Twine &amp;NameStr=&quot;&quot;, Instruction *InsertBefore=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02481">Instructions.h:2481</a></div></div>
<div class="ttc" id="aBuiltinGCs_8cpp_html_a9bf617fd3367180fb96cebccfaae8dfa"><div class="ttname"><a href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a></div><div class="ttdeci">static GCRegistry::Add&lt; StatepointGC &gt; D(&quot;statepoint-example&quot;, &quot;an example strategy for statepoint&quot;)</div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a100c666f9253331dd1d166a863248326"><div class="ttname"><a href="classllvm_1_1Instruction.html#a100c666f9253331dd1d166a863248326">llvm::Instruction::hasNoUnsignedWrap</a></div><div class="ttdeci">bool hasNoUnsignedWrap() const LLVM_READONLY</div><div class="ttdoc">Determine whether the no unsigned wrap flag is set.</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8cpp_source.html#l00173">Instruction.cpp:173</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombiner_html_a17baa08df1b509edb0429cb2676e1079"><div class="ttname"><a href="classllvm_1_1InstCombiner.html#a17baa08df1b509edb0429cb2676e1079">llvm::InstCombiner::isCanonicalPredicate</a></div><div class="ttdeci">static bool isCanonicalPredicate(CmpInst::Predicate Pred)</div><div class="ttdoc">Predicate canonicalization reduces the number of patterns that need to be matched by other transforms...</div><div class="ttdef"><b>Definition:</b> <a href="InstCombiner_8h_source.html#l00145">InstCombiner.h:145</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalVariable_html_aec2d700d8b1e57f830a673c39a1f30dc"><div class="ttname"><a href="classllvm_1_1GlobalVariable.html#aec2d700d8b1e57f830a673c39a1f30dc">llvm::GlobalVariable::hasDefinitiveInitializer</a></div><div class="ttdeci">bool hasDefinitiveInitializer() const</div><div class="ttdoc">hasDefinitiveInitializer - Whether the global variable has an initializer, and any other instances of...</div><div class="ttdef"><b>Definition:</b> <a href="GlobalVariable_8h_source.html#l00109">GlobalVariable.h:109</a></div></div>
<div class="ttc" id="aclassllvm_1_1TruncInst_html"><div class="ttname"><a href="classllvm_1_1TruncInst.html">llvm::TruncInst</a></div><div class="ttdoc">This class represents a truncation of integer types.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l04813">Instructions.h:4813</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_aae3b959a0a2981340fd03c29f528f2f0"><div class="ttname"><a href="classllvm_1_1APInt.html#aae3b959a0a2981340fd03c29f528f2f0">llvm::APInt::logBase2</a></div><div class="ttdeci">unsigned logBase2() const</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l01700">APInt.h:1700</a></div></div>
<div class="ttc" id="anamespacellvm_html_a9a02293c780a5f242786686646db5130"><div class="ttname"><a href="namespacellvm.html#a9a02293c780a5f242786686646db5130">llvm::computeOverflowForUnsignedSub</a></div><div class="ttdeci">OverflowResult computeOverflowForUnsignedSub(const Value *LHS, const Value *RHS, const DataLayout &amp;DL, AssumptionCache *AC, const Instruction *CxtI, const DominatorTree *DT)</div><div class="ttdef"><b>Definition:</b> <a href="ValueTracking_8cpp_source.html#l05085">ValueTracking.cpp:5085</a></div></div>
<div class="ttc" id="aclassllvm_1_1PHINode_html_a089cccb6f231efee72abc76d0f9c695f"><div class="ttname"><a href="classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">llvm::PHINode::addIncoming</a></div><div class="ttdeci">void addIncoming(Value *V, BasicBlock *BB)</div><div class="ttdoc">Add an incoming value to the end of the PHI list.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02854">Instructions.h:2854</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a42569041ddafba7d40243e126af07f42"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a42569041ddafba7d40243e126af07f42">llvm::PatternMatch::m_Or</a></div><div class="ttdeci">BinaryOp_match&lt; LHS, RHS, Instruction::Or &gt; m_Or(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01099">PatternMatch.h:1099</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_aaea0d5ebb8b57ddde2095f80e2e94bb2"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#aaea0d5ebb8b57ddde2095f80e2e94bb2">llvm::PatternMatch::m_AllOnes</a></div><div class="ttdeci">cst_pred_ty&lt; is_all_ones &gt; m_AllOnes()</div><div class="ttdoc">Match an integer or vector with all bits set.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00453">PatternMatch.h:453</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_a72fb137716cff838d389e392b9729dc9"><div class="ttname"><a href="classllvm_1_1Value.html#a72fb137716cff838d389e392b9729dc9">llvm::Value::hasNUsesOrMore</a></div><div class="ttdeci">bool hasNUsesOrMore(unsigned N) const</div><div class="ttdoc">Return true if this value has N uses or more.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00152">Value.cpp:152</a></div></div>
<div class="ttc" id="anamespacellvm_1_1numbers_html_a92f4283d4e0e2ea1776894b3ae93640f"><div class="ttname"><a href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">llvm::numbers::e</a></div><div class="ttdeci">constexpr double e</div><div class="ttdef"><b>Definition:</b> <a href="MathExtras_8h_source.html#l00031">MathExtras.h:31</a></div></div>
<div class="ttc" id="aInstCombineCompares_8cpp_html_abe6ef19bc83468345a1244362a54986e"><div class="ttname"><a href="InstCombineCompares_8cpp.html#abe6ef19bc83468345a1244362a54986e">foldICmpWithMinMax</a></div><div class="ttdeci">static Instruction * foldICmpWithMinMax(ICmpInst &amp;Cmp)</div><div class="ttdoc">Fold icmp Pred min|max(X, Y), X.</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCompares_8cpp_source.html#l04586">InstCombineCompares.cpp:4586</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_aec0ccdbde0581b3aae7f001634a34d8e"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#aec0ccdbde0581b3aae7f001634a34d8e">llvm::PatternMatch::m_ImmConstant</a></div><div class="ttdeci">match_combine_and&lt; class_match&lt; Constant &gt;, match_unless&lt; constantexpr_match &gt; &gt; m_ImmConstant()</div><div class="ttdoc">Match an arbitrary immediate Constant and ignore it.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00751">PatternMatch.h:751</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseMap_html"><div class="ttname"><a href="classllvm_1_1DenseMap.html">llvm::DenseMap</a></div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00714">DenseMap.h:714</a></div></div>
<div class="ttc" id="aInstCombineCompares_8cpp_html_ac8e72cc39ee52ef30175aa8278cd0dfc"><div class="ttname"><a href="InstCombineCompares_8cpp.html#ac8e72cc39ee52ef30175aa8278cd0dfc">setInsertionPoint</a></div><div class="ttdeci">static void setInsertionPoint(IRBuilder&lt;&gt; &amp;Builder, Value *V, bool Before=true)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCompares_8cpp_source.html#l00509">InstCombineCompares.cpp:509</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_a8376734f311508662dd7e737752e5953"><div class="ttname"><a href="classllvm_1_1APInt.html#a8376734f311508662dd7e737752e5953">llvm::APInt::negate</a></div><div class="ttdeci">void negate()</div><div class="ttdoc">Negate this APInt in place.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l01421">APInt.h:1421</a></div></div>
<div class="ttc" id="aMD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00058">MD5.cpp:58</a></div></div>
<div class="ttc" id="aclassllvm_1_1GetElementPtrInst_html"><div class="ttname"><a href="classllvm_1_1GetElementPtrInst.html">llvm::GetElementPtrInst</a></div><div class="ttdoc">an instruction for type-safe pointer arithmetic to access elements of arrays and structs</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00940">Instructions.h:940</a></div></div>
<div class="ttc" id="astructllvm_1_1DenormalMode_html"><div class="ttname"><a href="structllvm_1_1DenormalMode.html">llvm::DenormalMode</a></div><div class="ttdoc">Represent subnormal handling kind for floating point instruction inputs and outputs.</div><div class="ttdef"><b>Definition:</b> <a href="FloatingPointMode_8h_source.html#l00069">FloatingPointMode.h:69</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_a7caf9cd5dff4734b8af500d6f0f07437"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#a7caf9cd5dff4734b8af500d6f0f07437">llvm::InstCombinerImpl::foldICmpWithTrunc</a></div><div class="ttdeci">Instruction * foldICmpWithTrunc(ICmpInst &amp;Cmp)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCompares_8cpp_source.html#l04914">InstCombineCompares.cpp:4914</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_a53c2f8012aca86c3726300e27c7df693"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#a53c2f8012aca86c3726300e27c7df693">llvm::InstCombinerImpl::foldAllocaCmp</a></div><div class="ttdeci">Instruction * foldAllocaCmp(ICmpInst &amp;ICI, const AllocaInst *Alloca)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCompares_8cpp_source.html#l00900">InstCombineCompares.cpp:900</a></div></div>
<div class="ttc" id="anamespacellvm_html_a8154638df88e4eaa568b67b23d463dac"><div class="ttname"><a href="namespacellvm.html#a8154638df88e4eaa568b67b23d463dac">llvm::make_early_inc_range</a></div><div class="ttdeci">iterator_range&lt; early_inc_iterator_impl&lt; detail::IterOfRange&lt; RangeT &gt; &gt; &gt; make_early_inc_range(RangeT &amp;&amp;Range)</div><div class="ttdoc">Make a range that does early increment to allow mutation of the underlying range without disrupting i...</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l00721">STLExtras.h:721</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a7638daf70e17d093dd35f06211dc7a87"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a7638daf70e17d093dd35f06211dc7a87">llvm::PatternMatch::m_FAbs</a></div><div class="ttdeci">m_Intrinsic_Ty&lt; Opnd0 &gt;::Ty m_FAbs(const Opnd0 &amp;Op0)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l02171">PatternMatch.h:2171</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantExpr_html_adc8a4e6a8e701e1924f0293da78badb6"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#adc8a4e6a8e701e1924f0293da78badb6">llvm::ConstantExpr::getOr</a></div><div class="ttdeci">static Constant * getOr(Constant *C1, Constant *C2)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l02682">Constants.cpp:2682</a></div></div>
<div class="ttc" id="astructllvm_1_1SimplifyQuery_html_a4776fa0f5a726bd5a8a444981c283c69"><div class="ttname"><a href="structllvm_1_1SimplifyQuery.html#a4776fa0f5a726bd5a8a444981c283c69">llvm::SimplifyQuery::DT</a></div><div class="ttdeci">const DominatorTree * DT</div><div class="ttdef"><b>Definition:</b> <a href="InstructionSimplify_8h_source.html#l00096">InstructionSimplify.h:96</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a427435d4da769ae680a8e77ef89520aa"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a427435d4da769ae680a8e77ef89520aa">llvm::PatternMatch::m_And</a></div><div class="ttdeci">BinaryOp_match&lt; LHS, RHS, Instruction::And &gt; m_And(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01093">PatternMatch.h:1093</a></div></div>
<div class="ttc" id="aInstCombineCompares_8cpp_html_a4c4d096b05846dc75914e02cbe37a805"><div class="ttname"><a href="InstCombineCompares_8cpp.html#a4c4d096b05846dc75914e02cbe37a805">hasBranchUse</a></div><div class="ttdeci">static bool hasBranchUse(ICmpInst &amp;I)</div><div class="ttdoc">Given an icmp instruction, return true if any use of this comparison is a branch on sign bit comparis...</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCompares_8cpp_source.html#l00066">InstCombineCompares.cpp:66</a></div></div>
<div class="ttc" id="aclassllvm_1_1PointerType_html"><div class="ttname"><a href="classllvm_1_1PointerType.html">llvm::PointerType</a></div><div class="ttdoc">Class to represent pointers.</div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00632">DerivedTypes.h:632</a></div></div>
<div class="ttc" id="astructllvm_1_1KnownBits_html_a825476b2436eb817b735fdd34ee521c4"><div class="ttname"><a href="structllvm_1_1KnownBits.html#a825476b2436eb817b735fdd34ee521c4">llvm::KnownBits::getMaxValue</a></div><div class="ttdeci">APInt getMaxValue() const</div><div class="ttdoc">Return the maximal unsigned value possible given these KnownBits.</div><div class="ttdef"><b>Definition:</b> <a href="KnownBits_8h_source.html#l00136">KnownBits.h:136</a></div></div>
<div class="ttc" id="aclassllvm_1_1ICmpInst_html_abe8988eef2e6fc2baba032cb22afedd7"><div class="ttname"><a href="classllvm_1_1ICmpInst.html#abe8988eef2e6fc2baba032cb22afedd7">llvm::ICmpInst::isEquality</a></div><div class="ttdeci">static bool isEquality(Predicate P)</div><div class="ttdoc">Return true if this predicate is either EQ or NE.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01286">Instructions.h:1286</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_aa270db889638f96fa18c715cdce379e0"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#aa270db889638f96fa18c715cdce379e0">llvm::InstCombinerImpl::foldICmpMulConstant</a></div><div class="ttdeci">Instruction * foldICmpMulConstant(ICmpInst &amp;Cmp, BinaryOperator *Mul, const APInt &amp;C)</div><div class="ttdoc">Fold icmp (mul X, Y), C.</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCompares_8cpp_source.html#l02010">InstCombineCompares.cpp:2010</a></div></div>
<div class="ttc" id="anamespacellvm_html_a3cd3a3ec28036937ecebe767498ba55d"><div class="ttname"><a href="namespacellvm.html#a3cd3a3ec28036937ecebe767498ba55d">llvm::ConstantFoldCompareInstOperands</a></div><div class="ttdeci">Constant * ConstantFoldCompareInstOperands(unsigned Predicate, Constant *LHS, Constant *RHS, const DataLayout &amp;DL, const TargetLibraryInfo *TLI=nullptr, const Instruction *I=nullptr)</div><div class="ttdoc">Attempt to constant fold a compare instruction (icmp/fcmp) with the specified operands.</div><div class="ttdef"><b>Definition:</b> <a href="ConstantFolding_8cpp_source.html#l01216">ConstantFolding.cpp:1216</a></div></div>
<div class="ttc" id="aclassllvm_1_1details_1_1FixedOrScalableQuantity_html_a33880aaca0ad05e5f1557f079305bde5"><div class="ttname"><a href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#a33880aaca0ad05e5f1557f079305bde5">llvm::details::FixedOrScalableQuantity::getFixedValue</a></div><div class="ttdeci">constexpr ScalarTy getFixedValue() const</div><div class="ttdef"><b>Definition:</b> <a href="TypeSize_8h_source.html#l00182">TypeSize.h:182</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseMapBase_html_a0c047f127ed4380a6f383d70bec4eb94"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#a0c047f127ed4380a6f383d70bec4eb94">llvm::DenseMapBase&lt; DenseMap&lt; KeyT, ValueT, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;, KeyT, ValueT, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;::find</a></div><div class="ttdeci">iterator find(const_arg_type_t&lt; KeyT &gt; Val)</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00150">DenseMap.h:150</a></div></div>
<div class="ttc" id="anamespacellvm_html_aa1f8f0633edd8b9a1c5ec15bb9fc5640"><div class="ttname"><a href="namespacellvm.html#aa1f8f0633edd8b9a1c5ec15bb9fc5640">llvm::computeKnownBits</a></div><div class="ttdeci">void computeKnownBits(const Value *V, KnownBits &amp;Known, const DataLayout &amp;DL, unsigned Depth=0, AssumptionCache *AC=nullptr, const Instruction *CxtI=nullptr, const DominatorTree *DT=nullptr, OptimizationRemarkEmitter *ORE=nullptr, bool UseInstrInfo=true)</div><div class="ttdoc">Determine which bits of V are known to be either zero or one and return them in the KnownZero/KnownOn...</div><div class="ttdef"><b>Definition:</b> <a href="ValueTracking_8cpp_source.html#l00186">ValueTracking.cpp:186</a></div></div>
<div class="ttc" id="aSILowerControlFlow_8cpp_html_a4868c5d81c5ccc98c47aeab6244346a0"><div class="ttname"><a href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a></div><div class="ttdeci">assert(ImpDefSCC.getReg()==AMDGPU::SCC &amp;&amp;ImpDefSCC.isDef())</div></div>
<div class="ttc" id="astructllvm_1_1KnownBits_html_a2ad6370e532a52014fe2e5a54bfbaddd"><div class="ttname"><a href="structllvm_1_1KnownBits.html#a2ad6370e532a52014fe2e5a54bfbaddd">llvm::KnownBits::countMaxTrailingZeros</a></div><div class="ttdeci">unsigned countMaxTrailingZeros() const</div><div class="ttdoc">Returns the maximum number of trailing zero bits possible.</div><div class="ttdef"><b>Definition:</b> <a href="KnownBits_8h_source.html#l00273">KnownBits.h:273</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_ac3ed5602889a22db44a16e1b97fac5b8"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#ac3ed5602889a22db44a16e1b97fac5b8">llvm::PatternMatch::m_Sub</a></div><div class="ttdeci">BinaryOp_match&lt; LHS, RHS, Instruction::Sub &gt; m_Sub(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00991">PatternMatch.h:991</a></div></div>
<div class="ttc" id="anamespacestd_html_ab8424022895aee3e366fb9a32f2883cb"><div class="ttname"><a href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a></div><div class="ttdeci">void swap(llvm::BitVector &amp;LHS, llvm::BitVector &amp;RHS)</div><div class="ttdoc">Implement std::swap in terms of BitVector swap.</div><div class="ttdef"><b>Definition:</b> <a href="BitVector_8h_source.html#l00853">BitVector.h:853</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_ab60c98e34bf6a4b6b599ab93a3f12b06"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#ab60c98e34bf6a4b6b599ab93a3f12b06">llvm::InstCombinerImpl::foldICmpAndShift</a></div><div class="ttdeci">Instruction * foldICmpAndShift(ICmpInst &amp;Cmp, BinaryOperator *And, const APInt &amp;C1, const APInt &amp;C2)</div><div class="ttdoc">Fold icmp (and (sh X, Y), C2), C1.</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCompares_8cpp_source.html#l01648">InstCombineCompares.cpp:1648</a></div></div>
<div class="ttc" id="alib_2Target_2ARM_2README_8txt_html_ae2bb081d94f22e64ca6bc4bd58512a93"><div class="ttname"><a href="lib_2Target_2ARM_2README_8txt.html#ae2bb081d94f22e64ca6bc4bd58512a93">memcpy</a></div><div class="ttdeci">&lt;%struct.s * &gt; cast struct s *S to sbyte *&lt; sbyte * &gt; sbyte uint cast struct s *agg result to sbyte *&lt; sbyte * &gt; sbyte uint cast struct s *memtmp to sbyte *&lt; sbyte * &gt; sbyte uint ret void llc ends up issuing two memcpy or custom lower memcpy(of small size) to be ldmia/stmia. I think option 2 is better but the current register allocator cannot allocate a chunk of registers at a time. A feasible temporary solution is to use specific physical registers at the lowering time for small(&lt;</div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78ba541533f34077bbbcfb703a90f6d2da9b"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba541533f34077bbbcfb703a90f6d2da9b">llvm::CmpInst::FCMP_OGE</a></div><div class="ttdeci">@ FCMP_OGE</div><div class="ttdoc">0 0 1 1 True if ordered and greater than or equal</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00723">InstrTypes.h:723</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantExpr_html_a49b69843927f7cd96d866768b3aec92b"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#a49b69843927f7cd96d866768b3aec92b">llvm::ConstantExpr::getCast</a></div><div class="ttdeci">static Constant * getCast(unsigned ops, Constant *C, Type *Ty, bool OnlyIfReduced=false)</div><div class="ttdoc">Convenience function for getting a Cast operation.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l01973">Constants.cpp:1973</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78ba573bcd571c938fce863525330bbfc4b8"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba573bcd571c938fce863525330bbfc4b8">llvm::CmpInst::ICMP_UGE</a></div><div class="ttdeci">@ ICMP_UGE</div><div class="ttdoc">unsigned greater or equal</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00742">InstrTypes.h:742</a></div></div>
<div class="ttc" id="astructllvm_1_1KnownBits_html_a7f47812e8e75b0616a97d7004e5fb909"><div class="ttname"><a href="structllvm_1_1KnownBits.html#a7f47812e8e75b0616a97d7004e5fb909">llvm::KnownBits::countMinLeadingZeros</a></div><div class="ttdeci">unsigned countMinLeadingZeros() const</div><div class="ttdoc">Returns the minimum number of leading zero bits.</div><div class="ttdef"><b>Definition:</b> <a href="KnownBits_8h_source.html#l00243">KnownBits.h:243</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_a1f737dab05d29dca38561bc99b9ef5b5"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#a1f737dab05d29dca38561bc99b9ef5b5">llvm::InstCombinerImpl::foldSignBitTest</a></div><div class="ttdeci">Instruction * foldSignBitTest(ICmpInst &amp;I)</div><div class="ttdoc">Fold equality-comparison between zero and any (maybe truncated) right-shift by one-less-than-bitwidth...</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCompares_8cpp_source.html#l01235">InstCombineCompares.cpp:1235</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_af57017eaefdf5b514ffd801e9923bbca"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#af57017eaefdf5b514ffd801e9923bbca">llvm::InstCombinerImpl::foldICmpShrConstConst</a></div><div class="ttdeci">Instruction * foldICmpShrConstConst(ICmpInst &amp;I, Value *ShAmt, const APInt &amp;C1, const APInt &amp;C2)</div><div class="ttdoc">Handle &quot;(icmp eq/ne (ashr/lshr AP2, A), AP1)&quot; -&gt; (icmp eq/ne A, Log2(AP2/AP1)) -&gt; (icmp eq/ne A,...</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCompares_8cpp_source.html#l01026">InstCombineCompares.cpp:1026</a></div></div>
<div class="ttc" id="aclassllvm_1_1SelectInst_html"><div class="ttname"><a href="classllvm_1_1SelectInst.html">llvm::SelectInst</a></div><div class="ttdoc">This class represents the LLVM 'select' instruction.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01746">Instructions.h:1746</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_a39e315cb89b7144083895c083cc958e0"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#a39e315cb89b7144083895c083cc958e0">llvm::InstCombinerImpl::foldICmpSubConstant</a></div><div class="ttdeci">Instruction * foldICmpSubConstant(ICmpInst &amp;Cmp, BinaryOperator *Sub, const APInt &amp;C)</div><div class="ttdoc">Fold icmp (sub X, Y), C.</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCompares_8cpp_source.html#l02706">InstCombineCompares.cpp:2706</a></div></div>
<div class="ttc" id="astructllvm_1_1KnownBits_html_a4676f4bc7da9235ff3b6683dd670d7be"><div class="ttname"><a href="structllvm_1_1KnownBits.html#a4676f4bc7da9235ff3b6683dd670d7be">llvm::KnownBits::countMaxPopulation</a></div><div class="ttdeci">unsigned countMaxPopulation() const</div><div class="ttdoc">Returns the maximum number of bits that could be one.</div><div class="ttdef"><b>Definition:</b> <a href="KnownBits_8h_source.html#l00298">KnownBits.h:298</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78ba07aee43ffb66908a25c55c77ce4c0d05"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba07aee43ffb66908a25c55c77ce4c0d05">llvm::CmpInst::BAD_ICMP_PREDICATE</a></div><div class="ttdeci">@ BAD_ICMP_PREDICATE</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00751">InstrTypes.h:751</a></div></div>
<div class="ttc" id="aAPSInt_8h_html"><div class="ttname"><a href="APSInt_8h.html">APSInt.h</a></div></div>
<div class="ttc" id="aSIWholeQuadMode_8cpp_html_a0c198437833c48138f49e3589bd08773"><div class="ttname"><a href="SIWholeQuadMode_8cpp.html#a0c198437833c48138f49e3589bd08773">Mode</a></div><div class="ttdeci">SI Whole Quad Mode</div><div class="ttdef"><b>Definition:</b> <a href="SIWholeQuadMode_8cpp_source.html#l00262">SIWholeQuadMode.cpp:262</a></div></div>
<div class="ttc" id="astructllvm_1_1SimplifyQuery_html_aaf05c1194f5c7869a00434c13c46c228"><div class="ttname"><a href="structllvm_1_1SimplifyQuery.html#aaf05c1194f5c7869a00434c13c46c228">llvm::SimplifyQuery::getWithInstruction</a></div><div class="ttdeci">SimplifyQuery getWithInstruction(Instruction *I) const</div><div class="ttdef"><b>Definition:</b> <a href="InstructionSimplify_8h_source.html#l00120">InstructionSimplify.h:120</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_af16a6c9336ca2a17389ea709b45fe7f5"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#af16a6c9336ca2a17389ea709b45fe7f5">llvm::PatternMatch::m_SMin</a></div><div class="ttdeci">MaxMin_match&lt; ICmpInst, LHS, RHS, smin_pred_ty &gt; m_SMin(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01859">PatternMatch.h:1859</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_a8de411243dcb508d9d512006edaba1ec"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#a8de411243dcb508d9d512006edaba1ec">llvm::InstCombinerImpl::foldICmpUsingKnownBits</a></div><div class="ttdeci">Instruction * foldICmpUsingKnownBits(ICmpInst &amp;Cmp)</div><div class="ttdoc">Try to fold the comparison based on range information we can get by checking whether bits are known t...</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCompares_8cpp_source.html#l05620">InstCombineCompares.cpp:5620</a></div></div>
<div class="ttc" id="aInstCombineCompares_8cpp_html_a01d807e681c095e21d6af31fb60ede41"><div class="ttname"><a href="InstCombineCompares_8cpp.html#a01d807e681c095e21d6af31fb60ede41">processUGT_ADDCST_ADD</a></div><div class="ttdeci">static Instruction * processUGT_ADDCST_ADD(ICmpInst &amp;I, Value *A, Value *B, ConstantInt *CI2, ConstantInt *CI1, InstCombinerImpl &amp;IC)</div><div class="ttdoc">The caller has matched a pattern of the form: I = icmp ugt (add (add A, B), CI2), CI1 If this is of t...</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCompares_8cpp_source.html#l01129">InstCombineCompares.cpp:1129</a></div></div>
<div class="ttc" id="anamespacellvm_html_a5e0af1b16cab9e0efc63a6ce9de2b9cc"><div class="ttname"><a href="namespacellvm.html#a5e0af1b16cab9e0efc63a6ce9de2b9cc">llvm::simplifyAddInst</a></div><div class="ttdeci">Value * simplifyAddInst(Value *LHS, Value *RHS, bool IsNSW, bool IsNUW, const SimplifyQuery &amp;Q)</div><div class="ttdoc">Given operands for an Add, fold the result or return null.</div><div class="ttdef"><b>Definition:</b> <a href="InstructionSimplify_8cpp_source.html#l00698">InstructionSimplify.cpp:698</a></div></div>
<div class="ttc" id="aclassllvm_1_1Module_html"><div class="ttname"><a href="classllvm_1_1Module.html">llvm::Module</a></div><div class="ttdoc">A Module instance is used to store all the information related to an LLVM module.</div><div class="ttdef"><b>Definition:</b> <a href="Module_8h_source.html#l00065">Module.h:65</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_aadd209ba7e1bfa8113a609e09a7fe62f"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#aadd209ba7e1bfa8113a609e09a7fe62f">llvm::PatternMatch::m_Constant</a></div><div class="ttdeci">class_match&lt; Constant &gt; m_Constant()</div><div class="ttdoc">Match an arbitrary Constant and ignore it.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00144">PatternMatch.h:144</a></div></div>
<div class="ttc" id="aclassllvm_1_1GEPOperator_html"><div class="ttname"><a href="classllvm_1_1GEPOperator.html">llvm::GEPOperator</a></div><div class="ttdef"><b>Definition:</b> <a href="Operator_8h_source.html#l00378">Operator.h:378</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_a901cc1fd9cbb0ec57e3d7f53a70ecd09"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#a901cc1fd9cbb0ec57e3d7f53a70ecd09">llvm::InstCombinerImpl::foldFCmpIntToFPConst</a></div><div class="ttdeci">Instruction * foldFCmpIntToFPConst(FCmpInst &amp;I, Instruction *LHSI, Constant *RHSC)</div><div class="ttdoc">Fold fcmp ([us]itofp x, cst) if possible.</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCompares_8cpp_source.html#l06598">InstCombineCompares.cpp:6598</a></div></div>
<div class="ttc" id="aAssumeBundleBuilder_8cpp_html_afb136e0532bcaed86521b462e6538d62"><div class="ttname"><a href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a></div><div class="ttdeci">assume Assume Builder</div><div class="ttdef"><b>Definition:</b> <a href="AssumeBundleBuilder_8cpp_source.html#l00651">AssumeBundleBuilder.cpp:651</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_abe15d83fb0501730bbfe840143cedc08"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#abe15d83fb0501730bbfe840143cedc08">llvm::InstCombinerImpl::foldICmpShlConstant</a></div><div class="ttdeci">Instruction * foldICmpShlConstant(ICmpInst &amp;Cmp, BinaryOperator *Shl, const APInt &amp;C)</div><div class="ttdoc">Fold icmp (shl X, Y), C.</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCompares_8cpp_source.html#l02145">InstCombineCompares.cpp:2145</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a24bca8838396aa81b87de8e7ac774b19"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">llvm::PatternMatch::m_Value</a></div><div class="ttdeci">class_match&lt; Value &gt; m_Value()</div><div class="ttdoc">Match an arbitrary value and ignore it.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00076">PatternMatch.h:76</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html"><div class="ttname"><a href="classllvm_1_1APInt.html">llvm::APInt</a></div><div class="ttdoc">Class for arbitrary precision integers.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00075">APInt.h:75</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantRange_html_ad8654634aa99cb48cbd028baba36eb84"><div class="ttname"><a href="classllvm_1_1ConstantRange.html#ad8654634aa99cb48cbd028baba36eb84">llvm::ConstantRange::getSingleElement</a></div><div class="ttdeci">const APInt * getSingleElement() const</div><div class="ttdoc">If this set contains a single element, return it, otherwise return null.</div><div class="ttdef"><b>Definition:</b> <a href="ConstantRange_8h_source.html#l00246">ConstantRange.h:246</a></div></div>
<div class="ttc" id="aclassllvm_1_1User_html_a5fa9b8e1842b354f64c1ba6be0a4a17f"><div class="ttname"><a href="classllvm_1_1User.html#a5fa9b8e1842b354f64c1ba6be0a4a17f">llvm::User::setOperand</a></div><div class="ttdeci">void setOperand(unsigned i, Value *Val)</div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00174">User.h:174</a></div></div>
<div class="ttc" id="aclassllvm_1_1SetVector_html_a72d928b7fc2c5f2d56c6ac0265fd9c6e"><div class="ttname"><a href="classllvm_1_1SetVector.html#a72d928b7fc2c5f2d56c6ac0265fd9c6e">llvm::SetVector::insert</a></div><div class="ttdeci">bool insert(const value_type &amp;X)</div><div class="ttdoc">Insert a new element into the SetVector.</div><div class="ttdef"><b>Definition:</b> <a href="SetVector_8h_source.html#l00141">SetVector.h:141</a></div></div>
<div class="ttc" id="aM68kELFObjectWriter_8cpp_html_ae4a8bc3879d2282eefd72b16b12c2a37"><div class="ttname"><a href="M68kELFObjectWriter_8cpp.html#ae4a8bc3879d2282eefd72b16b12c2a37">getType</a></div><div class="ttdeci">static M68kRelType getType(unsigned Kind, MCSymbolRefExpr::VariantKind &amp;Modifier, bool &amp;IsPCRel)</div><div class="ttdef"><b>Definition:</b> <a href="M68kELFObjectWriter_8cpp_source.html#l00048">M68kELFObjectWriter.cpp:48</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78ba15ae464950ac676919c2f0c7aafc706c"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba15ae464950ac676919c2f0c7aafc706c">llvm::CmpInst::ICMP_SLT</a></div><div class="ttdeci">@ ICMP_SLT</div><div class="ttdoc">signed less than</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00747">InstrTypes.h:747</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_ad73f009e1b3b060bcdf6c2c1dd86600e"><div class="ttname"><a href="classllvm_1_1CmpInst.html#ad73f009e1b3b060bcdf6c2c1dd86600e">llvm::CmpInst::isIntPredicate</a></div><div class="ttdeci">bool isIntPredicate() const</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00826">InstrTypes.h:826</a></div></div>
<div class="ttc" id="aclassllvm_1_1GEPOperator_html_aa4d79f790f6bd3fa3234d4137979215b"><div class="ttname"><a href="classllvm_1_1GEPOperator.html#aa4d79f790f6bd3fa3234d4137979215b">llvm::GEPOperator::hasAllConstantIndices</a></div><div class="ttdeci">bool hasAllConstantIndices() const</div><div class="ttdoc">Return true if all of the indices of this GEP are constant integers.</div><div class="ttdef"><b>Definition:</b> <a href="Operator_8h_source.html#l00467">Operator.h:467</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_aaab494a433fbb23bc68393ee8bcfc5ac"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#aaab494a433fbb23bc68393ee8bcfc5ac">llvm::PatternMatch::m_SExt</a></div><div class="ttdeci">CastClass_match&lt; OpTy, Instruction::SExt &gt; m_SExt(const OpTy &amp;Op)</div><div class="ttdoc">Matches SExt.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01623">PatternMatch.h:1623</a></div></div>
<div class="ttc" id="anamespacellvm_html_aac36edd0f1ce976f0025c98e88d3830eafaa1f94cd925672925f691e7f5727a6b"><div class="ttname"><a href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eafaa1f94cd925672925f691e7f5727a6b">llvm::RecurKind::UMax</a></div><div class="ttdeci">@ UMax</div><div class="ttdoc">Unsigned integer max implemented in terms of select(cmp()).</div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a3acbd0be97863e3e03e3b85641254018"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a3acbd0be97863e3e03e3b85641254018">llvm::PatternMatch::m_SpecificInt</a></div><div class="ttdeci">specific_intval&lt; false &gt; m_SpecificInt(APInt V)</div><div class="ttdoc">Match a specific integer value or vector with all elements equal to the value.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00854">PatternMatch.h:854</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a575c2299c6f145ba3a12efa20829db43"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a575c2299c6f145ba3a12efa20829db43">llvm::PatternMatch::m_CombineAnd</a></div><div class="ttdeci">match_combine_and&lt; LTy, RTy &gt; m_CombineAnd(const LTy &amp;L, const RTy &amp;R)</div><div class="ttdoc">Combine two pattern matchers matching L &amp;&amp; R.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00224">PatternMatch.h:224</a></div></div>
<div class="ttc" id="aInstCombineCompares_8cpp_html_aa791b7ded62a6362bd34f374d37029fc"><div class="ttname"><a href="InstCombineCompares_8cpp.html#aa791b7ded62a6362bd34f374d37029fc">transformToIndexedCompare</a></div><div class="ttdeci">static Instruction * transformToIndexedCompare(GEPOperator *GEPLHS, Value *RHS, ICmpInst::Predicate Cond, const DataLayout &amp;DL)</div><div class="ttdoc">Converts (CMP GEPLHS, RHS) if this change would make RHS a constant.</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCompares_8cpp_source.html#l00689">InstCombineCompares.cpp:689</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a7580eaba3cee9cdf52c080253bd57f5d"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a7580eaba3cee9cdf52c080253bd57f5d">llvm::PatternMatch::m_NUWMul</a></div><div class="ttdeci">OverflowingBinaryOp_match&lt; LHS, RHS, Instruction::Mul, OverflowingBinaryOperator::NoUnsignedWrap &gt; m_NUWMul(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01205">PatternMatch.h:1205</a></div></div>
<div class="ttc" id="aclassllvm_1_1ArrayRef_html"><div class="ttname"><a href="classllvm_1_1ArrayRef.html">llvm::ArrayRef&lt; int &gt;</a></div></div>
<div class="ttc" id="aclassllvm_1_1BinaryOperator_html"><div class="ttname"><a href="classllvm_1_1BinaryOperator.html">llvm::BinaryOperator</a></div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00187">InstrTypes.h:187</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_ae324de5041feaf7eb8433221cdaca9aa"><div class="ttname"><a href="classllvm_1_1APInt.html#ae324de5041feaf7eb8433221cdaca9aa">llvm::APInt::ssub_ov</a></div><div class="ttdeci">APInt ssub_ov(const APInt &amp;RHS, bool &amp;Overflow) const</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8cpp_source.html#l01939">APInt.cpp:1939</a></div></div>
<div class="ttc" id="aX86PartialReduction_8cpp_html_ae0f503db91504a3f3440ab81260e4134"><div class="ttname"><a href="X86PartialReduction_8cpp.html#ae0f503db91504a3f3440ab81260e4134">Mul</a></div><div class="ttdeci">BinaryOperator * Mul</div><div class="ttdef"><b>Definition:</b> <a href="X86PartialReduction_8cpp_source.html#l00070">X86PartialReduction.cpp:70</a></div></div>
<div class="ttc" id="aDataLayout_8h_html"><div class="ttname"><a href="DataLayout_8h.html">DataLayout.h</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_abb22519fa3bf66d9e0bc6d1a733a5821"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#abb22519fa3bf66d9e0bc6d1a733a5821">llvm::PatternMatch::m_SpecificInt_ICMP</a></div><div class="ttdeci">cst_pred_ty&lt; icmp_pred_with_threshold &gt; m_SpecificInt_ICMP(ICmpInst::Predicate Predicate, const APInt &amp;Threshold)</div><div class="ttdoc">Match an integer or vector with every element comparing 'pred' (eg/ne/...) to Threshold.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00598">PatternMatch.h:598</a></div></div>
<div class="ttc" id="aclassllvm_1_1StructType_html"><div class="ttname"><a href="classllvm_1_1StructType.html">llvm::StructType</a></div><div class="ttdoc">Class to represent struct types.</div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00213">DerivedTypes.h:213</a></div></div>
<div class="ttc" id="aBasicBlockSections_8cpp_html_a5fd0741d696f28faf65b33f6c6af8fda"><div class="ttname"><a href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a></div><div class="ttdeci">SmallVector&lt; MachineOperand, 4 &gt; Cond</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlockSections_8cpp_source.html#l00137">BasicBlockSections.cpp:137</a></div></div>
<div class="ttc" id="aInstCombineCompares_8cpp_html_a60e6e6fe404897eed5f8dcc4d87f3796"><div class="ttname"><a href="InstCombineCompares_8cpp.html#a60e6e6fe404897eed5f8dcc4d87f3796">foldICmpWithHighBitMask</a></div><div class="ttdeci">static Instruction * foldICmpWithHighBitMask(ICmpInst &amp;Cmp, InstCombiner::BuilderTy &amp;Builder)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCompares_8cpp_source.html#l06132">InstCombineCompares.cpp:6132</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_adea6dc2e42baa345b97be48b0370313d"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#adea6dc2e42baa345b97be48b0370313d">llvm::PatternMatch::m_Undef</a></div><div class="ttdeci">auto m_Undef()</div><div class="ttdoc">Match an arbitrary undef constant.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00136">PatternMatch.h:136</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_a86b0437dceb8e39c8185dc7def325011"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#a86b0437dceb8e39c8185dc7def325011">llvm::InstCombinerImpl::visitFCmpInst</a></div><div class="ttdeci">Instruction * visitFCmpInst(FCmpInst &amp;I)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCompares_8cpp_source.html#l07004">InstCombineCompares.cpp:7004</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e">llvm::CmpInst::ICMP_ULT</a></div><div class="ttdeci">@ ICMP_ULT</div><div class="ttdoc">unsigned less than</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00743">InstrTypes.h:743</a></div></div>
<div class="ttc" id="aSupport_2ErrorHandling_8h_html_ace243f5c25697a1107cce46626b3dc94"><div class="ttname"><a href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a></div><div class="ttdeci">#define llvm_unreachable(msg)</div><div class="ttdoc">Marks that the current location is not supposed to be reachable.</div><div class="ttdef"><b>Definition:</b> <a href="Support_2ErrorHandling_8h_source.html#l00143">ErrorHandling.h:143</a></div></div>
<div class="ttc" id="aclassllvm_1_1Constant_html_acd530d0571f320d47d37e7ae51cf70ff"><div class="ttname"><a href="classllvm_1_1Constant.html#acd530d0571f320d47d37e7ae51cf70ff">llvm::Constant::getAggregateElement</a></div><div class="ttdeci">Constant * getAggregateElement(unsigned Elt) const</div><div class="ttdoc">For aggregates (struct/array/vector) return the constant that corresponds to the specified element if...</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00418">Constants.cpp:418</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_a6393a2d4fe7e10b28a0dcc35f881567b"><div class="ttname"><a href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">llvm::Value::getType</a></div><div class="ttdeci">Type * getType() const</div><div class="ttdoc">All values are typed, get the type of this value.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00255">Value.h:255</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantInt_html_a882d55a6aa2028e1a5ad708b275334e0"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#a882d55a6aa2028e1a5ad708b275334e0">llvm::ConstantInt::isZero</a></div><div class="ttdeci">bool isZero() const</div><div class="ttdoc">This is just a convenience method to make client code smaller for a common code.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00193">Constants.h:193</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_afd3e8a6706810fef8cdbaf1f9f40dfbd"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#afd3e8a6706810fef8cdbaf1f9f40dfbd">llvm::PatternMatch::m_Shuffle</a></div><div class="ttdeci">TwoOps_match&lt; V1_t, V2_t, Instruction::ShuffleVector &gt; m_Shuffle(const V1_t &amp;v1, const V2_t &amp;v2)</div><div class="ttdoc">Matches ShuffleVectorInst independently of mask value.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01551">PatternMatch.h:1551</a></div></div>
<div class="ttc" id="aInstCombineCompares_8cpp_html_a9ca0d2b442af6eec7e00bb32d14d44b7"><div class="ttname"><a href="InstCombineCompares_8cpp.html#a9ca0d2b442af6eec7e00bb32d14d44b7">subWithOverflow</a></div><div class="ttdeci">static bool subWithOverflow(APInt &amp;Result, const APInt &amp;In1, const APInt &amp;In2, bool IsSigned=false)</div><div class="ttdoc">Compute Result = In1-In2, returning true if the result overflowed for this type.</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCompares_8cpp_source.html#l00053">InstCombineCompares.cpp:53</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_ab3fc0225d8aaf8434026c3573f961f2c"><div class="ttname"><a href="classllvm_1_1Value.html#ab3fc0225d8aaf8434026c3573f961f2c">llvm::Value::getContext</a></div><div class="ttdeci">LLVMContext &amp; getContext() const</div><div class="ttdoc">All values hold a context through their type.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00994">Value.cpp:994</a></div></div>
<div class="ttc" id="aclassllvm_1_1IRBuilderBase_1_1InsertPointGuard_html"><div class="ttname"><a href="classllvm_1_1IRBuilderBase_1_1InsertPointGuard.html">llvm::IRBuilderBase::InsertPointGuard</a></div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l00361">IRBuilder.h:361</a></div></div>
<div class="ttc" id="aAArch64SLSHardening_8cpp_html_ad467c4ab9119043f9b7750ab986be61a"><div class="ttname"><a href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a></div><div class="ttdeci">MachineBasicBlock MachineBasicBlock::iterator DebugLoc DL</div><div class="ttdef"><b>Definition:</b> <a href="AArch64SLSHardening_8cpp_source.html#l00076">AArch64SLSHardening.cpp:76</a></div></div>
<div class="ttc" id="aConstantRange_8h_html"><div class="ttname"><a href="ConstantRange_8h.html">ConstantRange.h</a></div></div>
<div class="ttc" id="anamespacellvm_1_1APIntOps_html_a59d1e0778623481e8a1599800d892946"><div class="ttname"><a href="namespacellvm_1_1APIntOps.html#a59d1e0778623481e8a1599800d892946">llvm::APIntOps::RoundingSDiv</a></div><div class="ttdeci">APInt RoundingSDiv(const APInt &amp;A, const APInt &amp;B, APInt::Rounding RM)</div><div class="ttdoc">Return A sign-divided by B, rounded by the given rounding mode.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8cpp_source.html#l02732">APInt.cpp:2732</a></div></div>
<div class="ttc" id="astructllvm_1_1DenormalMode_html_a29b26e3ae30f3f6ec4106ff181282893a7de61db082dcdc6e8d34d1c5fd2e9757"><div class="ttname"><a href="structllvm_1_1DenormalMode.html#a29b26e3ae30f3f6ec4106ff181282893a7de61db082dcdc6e8d34d1c5fd2e9757">llvm::DenormalMode::PositiveZero</a></div><div class="ttdeci">@ PositiveZero</div><div class="ttdoc">Denormals are flushed to positive zero.</div><div class="ttdef"><b>Definition:</b> <a href="FloatingPointMode_8h_source.html#l00082">FloatingPointMode.h:82</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_a657815d57170937e7e75bee5ecf235ce"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#a657815d57170937e7e75bee5ecf235ce">llvm::InstCombinerImpl::foldMultiplicationOverflowCheck</a></div><div class="ttdeci">Value * foldMultiplicationOverflowCheck(ICmpInst &amp;Cmp)</div><div class="ttdoc">Fold (-1 u/ x) u&lt; y ((x * y) ?/ x) != y to @llvm.</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCompares_8cpp_source.html#l04025">InstCombineCompares.cpp:4025</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_af24dc3f2a89de0b400a681002927217d"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#af24dc3f2a89de0b400a681002927217d">llvm::InstCombinerImpl::foldICmpWithDominatingICmp</a></div><div class="ttdeci">Instruction * foldICmpWithDominatingICmp(ICmpInst &amp;Cmp)</div><div class="ttdoc">Canonicalize icmp instructions based on dominating conditions.</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCompares_8cpp_source.html#l01394">InstCombineCompares.cpp:1394</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_a545e8d5dfa1688acea0d0e275b03682f"><div class="ttname"><a href="classllvm_1_1APInt.html#a545e8d5dfa1688acea0d0e275b03682f">llvm::APInt::ult</a></div><div class="ttdeci">bool ult(const APInt &amp;RHS) const</div><div class="ttdoc">Unsigned less than comparison.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l01089">APInt.h:1089</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a7e85813cf9465b923f3cffba71ebb0d8"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a7e85813cf9465b923f3cffba71ebb0d8">llvm::PatternMatch::m_IRem</a></div><div class="ttdeci">BinOpPred_match&lt; LHS, RHS, is_irem_op &gt; m_IRem(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdoc">Matches integer remainder operations.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01331">PatternMatch.h:1331</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_adb5c319f5905c1d3ca9eb5df546388c5"><div class="ttname"><a href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">llvm::Value::getName</a></div><div class="ttdeci">StringRef getName() const</div><div class="ttdoc">Return a constant reference to the value's name.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00308">Value.cpp:308</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoadInst_html"><div class="ttname"><a href="classllvm_1_1LoadInst.html">llvm::LoadInst</a></div><div class="ttdoc">An instruction for reading from memory.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00177">Instructions.h:177</a></div></div>
<div class="ttc" id="anamespacellvm_html_a4c88ebe757c51044c4ad4275012e4593"><div class="ttname"><a href="namespacellvm.html#a4c88ebe757c51044c4ad4275012e4593">llvm::isKnownNeverNaN</a></div><div class="ttdeci">bool isKnownNeverNaN(const Value *V, const TargetLibraryInfo *TLI, unsigned Depth=0)</div><div class="ttdoc">Return true if the floating-point scalar value is not a NaN or if the floating-point vector value has...</div><div class="ttdef"><b>Definition:</b> <a href="ValueTracking_8cpp_source.html#l03894">ValueTracking.cpp:3894</a></div></div>
<div class="ttc" id="aclassllvm_1_1Init_html"><div class="ttname"><a href="classllvm_1_1Init.html">llvm::Init</a></div><div class="ttdef"><b>Definition:</b> <a href="Record_8h_source.html#l00282">Record.h:282</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_a05d674becc60ba4ef8cd4dd4d38ac27a"><div class="ttname"><a href="classllvm_1_1APInt.html#a05d674becc60ba4ef8cd4dd4d38ac27a">llvm::APInt::udiv</a></div><div class="ttdeci">APInt udiv(const APInt &amp;RHS) const</div><div class="ttdoc">Unsigned division operation.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8cpp_source.html#l01571">APInt.cpp:1571</a></div></div>
<div class="ttc" id="anamespacellvm_1_1Intrinsic_html_aefa39f6b622360ce4e947feb9f671b73"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#aefa39f6b622360ce4e947feb9f671b73">llvm::Intrinsic::getDeclaration</a></div><div class="ttdeci">Function * getDeclaration(Module *M, ID id, ArrayRef&lt; Type * &gt; Tys=std::nullopt)</div><div class="ttdoc">Create or insert an LLVM Function declaration for an intrinsic, and return it.</div><div class="ttdef"><b>Definition:</b> <a href="Function_8cpp_source.html#l01502">Function.cpp:1502</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_a4f55d7706c3a7a5983907b84d98ddbad"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#a4f55d7706c3a7a5983907b84d98ddbad">llvm::InstCombinerImpl::foldICmpEqIntrinsicWithConstant</a></div><div class="ttdeci">Instruction * foldICmpEqIntrinsicWithConstant(ICmpInst &amp;ICI, IntrinsicInst *II, const APInt &amp;C)</div><div class="ttdoc">Fold an equality icmp with LLVM intrinsic and constant operand.</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCompares_8cpp_source.html#l03290">InstCombineCompares.cpp:3290</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_a966eb231e7d4e572874d2cb49b18faea"><div class="ttname"><a href="classllvm_1_1Value.html#a966eb231e7d4e572874d2cb49b18faea">llvm::Value::stripPointerCasts</a></div><div class="ttdeci">const Value * stripPointerCasts() const</div><div class="ttdoc">Strip off pointer casts, all-zero GEPs and address space casts.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00685">Value.cpp:685</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantInt_html_aa7cce62ac5cc6df09cce0535874336b7"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#aa7cce62ac5cc6df09cce0535874336b7">llvm::ConstantInt::getFalse</a></div><div class="ttdeci">static ConstantInt * getFalse(LLVMContext &amp;Context)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00842">Constants.cpp:842</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_a9bbadd565d3ba2855a90a04101d8d4cf"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#a9bbadd565d3ba2855a90a04101d8d4cf">llvm::InstCombinerImpl::foldICmpTruncConstant</a></div><div class="ttdeci">Instruction * foldICmpTruncConstant(ICmpInst &amp;Cmp, TruncInst *Trunc, const APInt &amp;C)</div><div class="ttdoc">Fold icmp (trunc X), C.</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCompares_8cpp_source.html#l01471">InstCombineCompares.cpp:1471</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantInt_html_ac09a21c371a9c535cbc13e8f82503aec"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#ac09a21c371a9c535cbc13e8f82503aec">llvm::ConstantInt::getZExtValue</a></div><div class="ttdeci">uint64_t getZExtValue() const</div><div class="ttdoc">Return the constant as a 64-bit unsigned integer value after it has been zero extended as appropriate...</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00141">Constants.h:141</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombiner_html_aa00031e59684d793baa874f11ddaf189"><div class="ttname"><a href="classllvm_1_1InstCombiner.html#aa00031e59684d793baa874f11ddaf189">llvm::InstCombiner::replaceInstUsesWith</a></div><div class="ttdeci">Instruction * replaceInstUsesWith(Instruction &amp;I, Value *V)</div><div class="ttdoc">A combiner-aware RAUW-like routine.</div><div class="ttdef"><b>Definition:</b> <a href="InstCombiner_8h_source.html#l00418">InstCombiner.h:418</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_a1dc76cc8bf703e6ada68bededcbb9573"><div class="ttname"><a href="classllvm_1_1APInt.html#a1dc76cc8bf703e6ada68bededcbb9573">llvm::APInt::zext</a></div><div class="ttdeci">APInt zext(unsigned width) const</div><div class="ttdoc">Zero extend to a new width.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8cpp_source.html#l00973">APInt.cpp:973</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a39ad7ce51b0add3af5ac2577d1b45c7b"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a39ad7ce51b0add3af5ac2577d1b45c7b">llvm::PatternMatch::m_c_SMax</a></div><div class="ttdeci">MaxMin_match&lt; ICmpInst, LHS, RHS, smax_pred_ty, true &gt; m_c_SMax(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdoc">Matches an SMax with LHS and RHS in either order.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l02340">PatternMatch.h:2340</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_a0550f165f22c1b1372bf6428191f0a9e"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#a0550f165f22c1b1372bf6428191f0a9e">llvm::InstCombinerImpl::foldICmpSelectConstant</a></div><div class="ttdeci">Instruction * foldICmpSelectConstant(ICmpInst &amp;Cmp, SelectInst *Select, ConstantInt *C)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCompares_8cpp_source.html#l02948">InstCombineCompares.cpp:2948</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_a8268fbc3014081004056f6466452c904"><div class="ttname"><a href="classllvm_1_1APInt.html#a8268fbc3014081004056f6466452c904">llvm::APInt::uadd_ov</a></div><div class="ttdeci">APInt uadd_ov(const APInt &amp;RHS, bool &amp;Overflow) const</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8cpp_source.html#l01933">APInt.cpp:1933</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_a3a0519ef55bfe3d07f8fb2eafb5cdbbdac4e0e4e3118472beeb2ae75827450f1f"><div class="ttname"><a href="classllvm_1_1APInt.html#a3a0519ef55bfe3d07f8fb2eafb5cdbbdac4e0e4e3118472beeb2ae75827450f1f">llvm::APInt::Rounding::DOWN</a></div><div class="ttdeci">@ DOWN</div></div>
<div class="ttc" id="aclassllvm_1_1ConstantRange_html_a4f4790febf2bf7aa44f5283a74ddf744"><div class="ttname"><a href="classllvm_1_1ConstantRange.html#a4f4790febf2bf7aa44f5283a74ddf744">llvm::ConstantRange::difference</a></div><div class="ttdeci">ConstantRange difference(const ConstantRange &amp;CR) const</div><div class="ttdoc">Subtract the specified range from this range (aka relative complement of the sets).</div><div class="ttdef"><b>Definition:</b> <a href="ConstantRange_8cpp_source.html#l00496">ConstantRange.cpp:496</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a2997340992a508357b480467a6901c70"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a2997340992a508357b480467a6901c70">llvm::PatternMatch::m_FPExt</a></div><div class="ttdeci">CastClass_match&lt; OpTy, Instruction::FPExt &gt; m_FPExt(const OpTy &amp;Op)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01687">PatternMatch.h:1687</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78ba959268ceeae23abe5c9ad9e895669d0c"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba959268ceeae23abe5c9ad9e895669d0c">llvm::CmpInst::FCMP_UGT</a></div><div class="ttdeci">@ FCMP_UGT</div><div class="ttdoc">1 0 1 0 True if unordered or greater than</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00730">InstrTypes.h:730</a></div></div>
<div class="ttc" id="anamespacellvm_1_1NVPTX_1_1PTXLdStInstCode_html_a91119cbee2be000c528a690252aee07ca24244a27b634ef3e256ab3c64c6fecd4"><div class="ttname"><a href="namespacellvm_1_1NVPTX_1_1PTXLdStInstCode.html#a91119cbee2be000c528a690252aee07ca24244a27b634ef3e256ab3c64c6fecd4">llvm::NVPTX::PTXLdStInstCode::V2</a></div><div class="ttdeci">@ V2</div><div class="ttdef"><b>Definition:</b> <a href="NVPTX_8h_source.html#l00124">NVPTX.h:124</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_aa074b9f5a1efaa0fd8aa4522593f299a"><div class="ttname"><a href="classllvm_1_1APInt.html#aa074b9f5a1efaa0fd8aa4522593f299a">llvm::APInt::countLeadingZeros</a></div><div class="ttdeci">unsigned countLeadingZeros() const</div><div class="ttdoc">The APInt version of the countLeadingZeros functions in MathExtras.h.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l01552">APInt.h:1552</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantInt_html_a82dbbd8e3688b0bc1eedb338864d0d0c"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#a82dbbd8e3688b0bc1eedb338864d0d0c">llvm::ConstantInt::getTrue</a></div><div class="ttdeci">static ConstantInt * getTrue(LLVMContext &amp;Context)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00835">Constants.cpp:835</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_a317c64fd4cfebc88e79387b3821a629d"><div class="ttname"><a href="classllvm_1_1APInt.html#a317c64fd4cfebc88e79387b3821a629d">llvm::APInt::trunc</a></div><div class="ttdeci">APInt trunc(unsigned width) const</div><div class="ttdoc">Truncate to new width.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8cpp_source.html#l00898">APInt.cpp:898</a></div></div>
<div class="ttc" id="aclassllvm_1_1Constant_html_aa6574d526b3e38a28f688a7bb4325c2c"><div class="ttname"><a href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">llvm::Constant::getNullValue</a></div><div class="ttdeci">static Constant * getNullValue(Type *Ty)</div><div class="ttdoc">Constructor to create a '0' constant of arbitrary type.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00356">Constants.cpp:356</a></div></div>
<div class="ttc" id="astructllvm_1_1KnownBits_html"><div class="ttname"><a href="structllvm_1_1KnownBits.html">llvm::KnownBits</a></div><div class="ttdef"><b>Definition:</b> <a href="KnownBits_8h_source.html#l00023">KnownBits.h:23</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_abd9323a37d0beb24f9975b4d36994b24"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#abd9323a37d0beb24f9975b4d36994b24">llvm::PatternMatch::m_UDiv</a></div><div class="ttdeci">BinaryOp_match&lt; LHS, RHS, Instruction::UDiv &gt; m_UDiv(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01057">PatternMatch.h:1057</a></div></div>
<div class="ttc" id="anamespacellvm_html_ad4d2f143e181b60a4f70d791bbcba8b3"><div class="ttname"><a href="namespacellvm.html#ad4d2f143e181b60a4f70d791bbcba8b3">llvm::decomposeBitTestICmp</a></div><div class="ttdeci">bool decomposeBitTestICmp(Value *LHS, Value *RHS, CmpInst::Predicate &amp;Pred, Value *&amp;X, APInt &amp;Mask, bool LookThroughTrunc=true)</div><div class="ttdoc">Decompose an icmp into the form ((X &amp; Mask) pred 0) if possible.</div><div class="ttdef"><b>Definition:</b> <a href="CmpInstAnalysis_8cpp_source.html#l00076">CmpInstAnalysis.cpp:76</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_a1f04e382556a817950fd0390aeaf9b0e"><div class="ttname"><a href="classllvm_1_1APInt.html#a1f04e382556a817950fd0390aeaf9b0e">llvm::APInt::isMinSignedValue</a></div><div class="ttdeci">bool isMinSignedValue() const</div><div class="ttdoc">Determine if this is the smallest signed value.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00415">APInt.h:415</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantExpr_html_afa29f0cd072ab9b3a2630681ffe5760f"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#afa29f0cd072ab9b3a2630681ffe5760f">llvm::ConstantExpr::getNeg</a></div><div class="ttdeci">static Constant * getNeg(Constant *C, bool HasNUW=false, bool HasNSW=false)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l02644">Constants.cpp:2644</a></div></div>
<div class="ttc" id="astructllvm_1_1SimplifyQuery_html_a30647c42c8c40890c577ba5b4ab16468"><div class="ttname"><a href="structllvm_1_1SimplifyQuery.html#a30647c42c8c40890c577ba5b4ab16468">llvm::SimplifyQuery::CxtI</a></div><div class="ttdeci">const Instruction * CxtI</div><div class="ttdef"><b>Definition:</b> <a href="InstructionSimplify_8h_source.html#l00098">InstructionSimplify.h:98</a></div></div>
<div class="ttc" id="aclassllvm_1_1APFloat_html_a69cb669b1adc09cca90312d39ea3021a"><div class="ttname"><a href="classllvm_1_1APFloat.html#a69cb669b1adc09cca90312d39ea3021a">llvm::APFloat::clearSign</a></div><div class="ttdeci">void clearSign()</div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l01123">APFloat.h:1123</a></div></div>
<div class="ttc" id="astructllvm_1_1KnownBits_html_ad2ecbbccee1ca4e3ddde24cc714ec79e"><div class="ttname"><a href="structllvm_1_1KnownBits.html#ad2ecbbccee1ca4e3ddde24cc714ec79e">llvm::KnownBits::countMinPopulation</a></div><div class="ttdeci">unsigned countMinPopulation() const</div><div class="ttdoc">Returns the number of bits known to be one.</div><div class="ttdef"><b>Definition:</b> <a href="KnownBits_8h_source.html#l00293">KnownBits.h:293</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_ae64d6ae438e079f9098564d46d5bae84"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#ae64d6ae438e079f9098564d46d5bae84">llvm::InstCombinerImpl::foldSelectICmp</a></div><div class="ttdeci">Instruction * foldSelectICmp(ICmpInst::Predicate Pred, SelectInst *SI, Value *RHS, const ICmpInst &amp;I)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCompares_8cpp_source.html#l03621">InstCombineCompares.cpp:3621</a></div></div>
<div class="ttc" id="aregutils_8h_html_a1fa2460e32327ade49189c95740bc1b5"><div class="ttname"><a href="regutils_8h.html#a1fa2460e32327ade49189c95740bc1b5">NC</a></div><div class="ttdeci">#define NC</div><div class="ttdef"><b>Definition:</b> <a href="regutils_8h_source.html#l00042">regutils.h:42</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseMapBase_html_a65520b9c67759099e313d0f4e7b5ff9e"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#a65520b9c67759099e313d0f4e7b5ff9e">llvm::DenseMapBase&lt; DenseMap&lt; KeyT, ValueT, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;, KeyT, ValueT, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00084">DenseMap.h:84</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AMDGPU_1_1SendMsg_html_a8594419a4ddfad2c9a79279c490e466d"><div class="ttname"><a href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">llvm::AMDGPU::SendMsg::Op</a></div><div class="ttdeci">Op</div><div class="ttdef"><b>Definition:</b> <a href="SIDefines_8h_source.html#l00357">SIDefines.h:357</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_a90148636c6d38a9475471b8b43e93b04"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#a90148636c6d38a9475471b8b43e93b04">llvm::InstCombinerImpl::foldIRemByPowerOfTwoToBitTest</a></div><div class="ttdeci">Instruction * foldIRemByPowerOfTwoToBitTest(ICmpInst &amp;I)</div><div class="ttdoc">If we have: icmp eq/ne (urem/srem x, y), 0 iff y is a power-of-two, we can replace this with a bit te...</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCompares_8cpp_source.html#l01216">InstCombineCompares.cpp:1216</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_a36ef4128d8b08242e337bcbed0dce3c8"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#a36ef4128d8b08242e337bcbed0dce3c8">llvm::InstCombinerImpl::foldICmpBinOp</a></div><div class="ttdeci">Instruction * foldICmpBinOp(ICmpInst &amp;Cmp, const SimplifyQuery &amp;SQ)</div><div class="ttdoc">Try to fold icmp (binop), X or icmp X, (binop).</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCompares_8cpp_source.html#l04116">InstCombineCompares.cpp:4116</a></div></div>
<div class="ttc" id="aclassllvm_1_1PHINode_html_ab0ff669b12c20c07137705c38872ec63"><div class="ttname"><a href="classllvm_1_1PHINode.html#ab0ff669b12c20c07137705c38872ec63">llvm::PHINode::Create</a></div><div class="ttdeci">static PHINode * Create(Type *Ty, unsigned NumReservedValues, const Twine &amp;NameStr=&quot;&quot;, Instruction *InsertBefore=nullptr)</div><div class="ttdoc">Constructors - NumReservedValues is a hint for the number of incoming edges that this phi node will h...</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02750">Instructions.h:2750</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantInt_html_afe7d477c6022fe7123b90e3b39c58e69"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#afe7d477c6022fe7123b90e3b39c58e69">llvm::ConstantInt::getBool</a></div><div class="ttdeci">static ConstantInt * getBool(LLVMContext &amp;Context, bool V)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00849">Constants.cpp:849</a></div></div>
<div class="ttc" id="aclassllvm_1_1GEPOperator_html_a3783a9756e9b9a1fe124622d27522713"><div class="ttname"><a href="classllvm_1_1GEPOperator.html#a3783a9756e9b9a1fe124622d27522713">llvm::GEPOperator::isInBounds</a></div><div class="ttdeci">bool isInBounds() const</div><div class="ttdoc">Test whether this is an inbounds GEP, as defined by LangRef.html.</div><div class="ttdef"><b>Definition:</b> <a href="Operator_8h_source.html#l00395">Operator.h:395</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantExpr_html_ae6f1c15034bc5515033874630a8ecce6"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#ae6f1c15034bc5515033874630a8ecce6">llvm::ConstantExpr::getAdd</a></div><div class="ttdeci">static Constant * getAdd(Constant *C1, Constant *C2, bool HasNUW=false, bool HasNSW=false)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l02657">Constants.cpp:2657</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a34ee40bb2f4f5ece47ef19e5f1f57e3c"><div class="ttname"><a href="classllvm_1_1Type.html#a34ee40bb2f4f5ece47ef19e5f1f57e3c">llvm::Type::isIntOrIntVectorTy</a></div><div class="ttdeci">bool isIntOrIntVectorTy() const</div><div class="ttdoc">Return true if this is an integer type or a vector of integer types.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00228">Type.h:228</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_afd71f5991b2fcbd948c1d74e9eb7e1ee"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#afd71f5991b2fcbd948c1d74e9eb7e1ee">llvm::PatternMatch::m_c_SMin</a></div><div class="ttdeci">MaxMin_match&lt; ICmpInst, LHS, RHS, smin_pred_ty, true &gt; m_c_SMin(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdoc">Matches an SMin with LHS and RHS in either order.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l02334">PatternMatch.h:2334</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_af206a3d6f58d9e53b074460f0d1ecb86"><div class="ttname"><a href="classllvm_1_1CmpInst.html#af206a3d6f58d9e53b074460f0d1ecb86">llvm::CmpInst::isUnsigned</a></div><div class="ttdeci">bool isUnsigned() const</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00963">InstrTypes.h:963</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantFP_html_a5eb8f7a5d3cfdd127ad9db2e425e14eb"><div class="ttname"><a href="classllvm_1_1ConstantFP.html#a5eb8f7a5d3cfdd127ad9db2e425e14eb">llvm::ConstantFP::get</a></div><div class="ttdeci">static Constant * get(Type *Ty, double V)</div><div class="ttdoc">This returns a ConstantFP, or a vector containing a splat of a ConstantFP, for the specified value in...</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00934">Constants.cpp:934</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_a1b6b4785fa27be394cf040e543d9fe7c"><div class="ttname"><a href="classllvm_1_1APInt.html#a1b6b4785fa27be394cf040e543d9fe7c">llvm::APInt::isNegatedPowerOf2</a></div><div class="ttdeci">bool isNegatedPowerOf2() const</div><div class="ttdoc">Check if this APInt's negated value is a power of two greater than zero.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00441">APInt.h:441</a></div></div>
<div class="ttc" id="astructllvm_1_1fltSemantics_html"><div class="ttname"><a href="structllvm_1_1fltSemantics.html">llvm::fltSemantics</a></div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8cpp_source.html#l00097">APFloat.cpp:97</a></div></div>
<div class="ttc" id="anamespacellvm_html_abee0df5f7f703bb4462aba260ba0a60f"><div class="ttname"><a href="namespacellvm.html#abee0df5f7f703bb4462aba260ba0a60f">llvm::BitWidth</a></div><div class="ttdeci">constexpr unsigned BitWidth</div><div class="ttdef"><b>Definition:</b> <a href="BitmaskEnum_8h_source.html#l00147">BitmaskEnum.h:147</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantExpr_html_ae6d2fbefb704650e3b01a0bbcdd43ffa"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#ae6d2fbefb704650e3b01a0bbcdd43ffa">llvm::ConstantExpr::getAnd</a></div><div class="ttdeci">static Constant * getAnd(Constant *C1, Constant *C2)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l02678">Constants.cpp:2678</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a3712279d70deeec90a93db09deb12d02"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a3712279d70deeec90a93db09deb12d02">llvm::CmpInst::isSigned</a></div><div class="ttdeci">bool isSigned() const</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00957">InstrTypes.h:957</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_adc01a7457de85fc52a3bb860d7e1c6a4"><div class="ttname"><a href="classllvm_1_1Type.html#adc01a7457de85fc52a3bb860d7e1c6a4">llvm::Type::getPointerTo</a></div><div class="ttdeci">PointerType * getPointerTo(unsigned AddrSpace=0) const</div><div class="ttdoc">Return a pointer to the current type.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00776">Type.cpp:776</a></div></div>
<div class="ttc" id="anamespacellvm_1_1ARCCC_html_a9a81d9a1b379cf08150b22e81d7dd006aceb189306b941666e679bf556207c1e4"><div class="ttname"><a href="namespacellvm_1_1ARCCC.html#a9a81d9a1b379cf08150b22e81d7dd006aceb189306b941666e679bf556207c1e4">llvm::ARCCC::Z</a></div><div class="ttdeci">@ Z</div><div class="ttdef"><b>Definition:</b> <a href="ARCInfo_8h_source.html#l00041">ARCInfo.h:41</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_a1140591a375ac3efde57977192880eb0"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#a1140591a375ac3efde57977192880eb0">llvm::InstCombinerImpl::foldICmpOrConstant</a></div><div class="ttdeci">Instruction * foldICmpOrConstant(ICmpInst &amp;Cmp, BinaryOperator *Or, const APInt &amp;C)</div><div class="ttdoc">Fold icmp (or X, Y), C.</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCompares_8cpp_source.html#l01933">InstCombineCompares.cpp:1933</a></div></div>
<div class="ttc" id="anamespacellvm_html_af14335020a68db7b9f722810e4a05180a421c6b20238e6e6585270538188f15b9"><div class="ttname"><a href="namespacellvm.html#af14335020a68db7b9f722810e4a05180a421c6b20238e6e6585270538188f15b9">llvm::fltNanEncoding::AllOnes</a></div><div class="ttdeci">@ AllOnes</div></div>
<div class="ttc" id="anamespacellvm_html_a06c60fef11885eadbda4026c83ae9a13a9ac50ff0c308dad407db9f09e418363e"><div class="ttname"><a href="namespacellvm.html#a06c60fef11885eadbda4026c83ae9a13a9ac50ff0c308dad407db9f09e418363e">llvm::OverflowResult::AlwaysOverflowsHigh</a></div><div class="ttdeci">@ AlwaysOverflowsHigh</div><div class="ttdoc">Always overflows in the direction of signed/unsigned max value.</div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_abb66b7fb706f49e1966d64fa3ebeabfb"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#abb66b7fb706f49e1966d64fa3ebeabfb">llvm::InstCombinerImpl::foldICmpXorShiftConst</a></div><div class="ttdeci">Instruction * foldICmpXorShiftConst(ICmpInst &amp;Cmp, BinaryOperator *Xor, const APInt &amp;C)</div><div class="ttdoc">For power-of-2 C: ((X s&gt;&gt; ShiftC) ^ X) u&lt; C --&gt; (X + C) u&lt; (C &lt;&lt; 1) ((X s&gt;&gt; ShiftC) ^ X) u&gt; (C - 1) -...</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCompares_8cpp_source.html#l01619">InstCombineCompares.cpp:1619</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a670980c63f2e5ca39022baf96173eb9c"><div class="ttname"><a href="classllvm_1_1Type.html#a670980c63f2e5ca39022baf96173eb9c">llvm::Type::isPPC_FP128Ty</a></div><div class="ttdeci">bool isPPC_FP128Ty() const</div><div class="ttdoc">Return true if this is powerpc long double.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00166">Type.h:166</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_a392d67031c5429420ac0b46478fe893e"><div class="ttname"><a href="classllvm_1_1APInt.html#a392d67031c5429420ac0b46478fe893e">llvm::APInt::ceilLogBase2</a></div><div class="ttdeci">unsigned ceilLogBase2() const</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l01703">APInt.h:1703</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a8f3259c7db0ce698876fe79f45b80a32"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a8f3259c7db0ce698876fe79f45b80a32">llvm::PatternMatch::m_c_Mul</a></div><div class="ttdeci">BinaryOp_match&lt; LHS, RHS, Instruction::Mul, true &gt; m_c_Mul(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdoc">Matches a Mul with LHS and RHS in either order.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l02255">PatternMatch.h:2255</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a874d53817a4923de8e58af6b278c09b0"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a874d53817a4923de8e58af6b278c09b0">llvm::PatternMatch::m_ZeroInt</a></div><div class="ttdeci">cst_pred_ty&lt; is_zero_int &gt; m_ZeroInt()</div><div class="ttdoc">Match an integer 0 or a vector with all elements equal to 0.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00524">PatternMatch.h:524</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a3ffbacd388121d5e3ba1c4360b7449d0"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a3ffbacd388121d5e3ba1c4360b7449d0">llvm::PatternMatch::m_PtrToInt</a></div><div class="ttdeci">CastClass_match&lt; OpTy, Instruction::PtrToInt &gt; m_PtrToInt(const OpTy &amp;Op)</div><div class="ttdoc">Matches PtrToInt.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01599">PatternMatch.h:1599</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78bac1aa7b798ba11d2e497d5cce6ce6d3dc"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac1aa7b798ba11d2e497d5cce6ce6d3dc">llvm::CmpInst::ICMP_SGE</a></div><div class="ttdeci">@ ICMP_SGE</div><div class="ttdoc">signed greater or equal</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00746">InstrTypes.h:746</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantExpr_html_a308f804e11489de248b9b9bbc0ee8d64"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#a308f804e11489de248b9b9bbc0ee8d64">llvm::ConstantExpr::getFPToUI</a></div><div class="ttdeci">static Constant * getFPToUI(Constant *C, Type *Ty, bool OnlyIfReduced=false)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l02179">Constants.cpp:2179</a></div></div>
<div class="ttc" id="anamespacellvm_html_a0844b1df9a5ba7f45716415965966e63"><div class="ttname"><a href="namespacellvm.html#a0844b1df9a5ba7f45716415965966e63">llvm::computeOverflowForSignedMul</a></div><div class="ttdeci">OverflowResult computeOverflowForSignedMul(const Value *LHS, const Value *RHS, const DataLayout &amp;DL, AssumptionCache *AC, const Instruction *CxtI, const DominatorTree *DT, bool UseInstrInfo=true)</div><div class="ttdef"><b>Definition:</b> <a href="ValueTracking_8cpp_source.html#l04967">ValueTracking.cpp:4967</a></div></div>
<div class="ttc" id="anamespacellvm_1_1MCID_html_ab357441fcd1ea1f9b0d27c12700f6023a2b016c207343046b2bac45e69e76dcec"><div class="ttname"><a href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a2b016c207343046b2bac45e69e76dcec">llvm::MCID::Add</a></div><div class="ttdeci">@ Add</div><div class="ttdef"><b>Definition:</b> <a href="MCInstrDesc_8h_source.html#l00186">MCInstrDesc.h:186</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a50c6e9fa97e7373aca8dca86d385daa7"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a50c6e9fa97e7373aca8dca86d385daa7">llvm::PatternMatch::m_Signum</a></div><div class="ttdeci">Signum_match&lt; Val_t &gt; m_Signum(const Val_t &amp;V)</div><div class="ttdoc">Matches a signum pattern.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l02417">PatternMatch.h:2417</a></div></div>
<div class="ttc" id="astructllvm_1_1Inverse_html"><div class="ttname"><a href="structllvm_1_1Inverse.html">llvm::Inverse</a></div><div class="ttdef"><b>Definition:</b> <a href="GraphTraits_8h_source.html#l00097">GraphTraits.h:97</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_a8f877403433892e14ff0c692cbe9efdf"><div class="ttname"><a href="classllvm_1_1APInt.html#a8f877403433892e14ff0c692cbe9efdf">llvm::APInt::getSignedMinValue</a></div><div class="ttdeci">static APInt getSignedMinValue(unsigned numBits)</div><div class="ttdoc">Gets minimum signed value of APInt for a specific bit width.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00199">APInt.h:199</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantRange_html"><div class="ttname"><a href="classllvm_1_1ConstantRange.html">llvm::ConstantRange</a></div><div class="ttdoc">This class represents a range of values.</div><div class="ttdef"><b>Definition:</b> <a href="ConstantRange_8h_source.html#l00047">ConstantRange.h:47</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a5cd1934b6c8ddec3a2d161ce710d59bc"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a5cd1934b6c8ddec3a2d161ce710d59bc">llvm::PatternMatch::m_c_Xor</a></div><div class="ttdeci">BinaryOp_match&lt; LHS, RHS, Instruction::Xor, true &gt; m_c_Xor(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdoc">Matches an Xor with LHS and RHS in either order.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l02276">PatternMatch.h:2276</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a5ba8484cef2818d14b85640a903b2598"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a5ba8484cef2818d14b85640a903b2598">llvm::CmpInst::isTrueWhenEqual</a></div><div class="ttdeci">bool isTrueWhenEqual() const</div><div class="ttdoc">This is just a convenience.</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l01006">InstrTypes.h:1006</a></div></div>
<div class="ttc" id="aclassllvm_1_1IntrinsicInst_html"><div class="ttname"><a href="classllvm_1_1IntrinsicInst.html">llvm::IntrinsicInst</a></div><div class="ttdoc">A wrapper class for inspecting calls to intrinsic functions.</div><div class="ttdef"><b>Definition:</b> <a href="IntrinsicInst_8h_source.html#l00047">IntrinsicInst.h:47</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a3b4a54b076454fec43b13554b28252a9"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a3b4a54b076454fec43b13554b28252a9">llvm::CmpInst::Create</a></div><div class="ttdeci">static CmpInst * Create(OtherOps Op, Predicate predicate, Value *S1, Value *S2, const Twine &amp;Name=&quot;&quot;, Instruction *InsertBefore=nullptr)</div><div class="ttdoc">Construct a compare instruction, given the opcode, the predicate and the two operands.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l04025">Instructions.cpp:4025</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a595e5029858e33416e500bed9317d309"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a595e5029858e33416e500bed9317d309">llvm::PatternMatch::m_LogicalShift</a></div><div class="ttdeci">BinOpPred_match&lt; LHS, RHS, is_logical_shift_op &gt; m_LogicalShift(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdoc">Matches logical shift operations.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01311">PatternMatch.h:1311</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_ab9370b798ae530641518075b0832723a"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#ab9370b798ae530641518075b0832723a">llvm::PatternMatch::m_AnyZeroFP</a></div><div class="ttdeci">cstfp_pred_ty&lt; is_any_zero_fp &gt; m_AnyZeroFP()</div><div class="ttdoc">Match a floating-point negative zero or positive zero.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00664">PatternMatch.h:664</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_a38e964f0cadf077725453884734a6c99"><div class="ttname"><a href="classllvm_1_1APInt.html#a38e964f0cadf077725453884734a6c99">llvm::APInt::abs</a></div><div class="ttdeci">APInt abs() const</div><div class="ttdoc">Get the absolute value.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l01734">APInt.h:1734</a></div></div>
<div class="ttc" id="astructllvm_1_1KnownBits_html_ae0b0ab35dee6bb5d9d53098111bf5c84"><div class="ttname"><a href="structllvm_1_1KnownBits.html#ae0b0ab35dee6bb5d9d53098111bf5c84">llvm::KnownBits::getSignedMinValue</a></div><div class="ttdeci">APInt getSignedMinValue() const</div><div class="ttdoc">Return the minimal signed value possible given these KnownBits.</div><div class="ttdef"><b>Definition:</b> <a href="KnownBits_8h_source.html#l00126">KnownBits.h:126</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a2ff0f084844b189a858647d637d47eba"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a2ff0f084844b189a858647d637d47eba">llvm::PatternMatch::m_Not</a></div><div class="ttdeci">BinaryOp_match&lt; cst_pred_ty&lt; is_all_ones &gt;, ValTy, Instruction::Xor, true &gt; m_Not(const ValTy &amp;V)</div><div class="ttdoc">Matches a 'Not' as 'xor V, -1' or 'xor -1, V'.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l02302">PatternMatch.h:2302</a></div></div>
<div class="ttc" id="aInstCombineCompares_8cpp_html_ad60c0239275d1852d9e3b7cc06c2fbee"><div class="ttname"><a href="InstCombineCompares_8cpp.html#ad60c0239275d1852d9e3b7cc06c2fbee">foldFCmpReciprocalAndZero</a></div><div class="ttdeci">static Instruction * foldFCmpReciprocalAndZero(FCmpInst &amp;I, Instruction *LHSI, Constant *RHSC)</div><div class="ttdoc">Fold (C / X) &lt; 0.0 --&gt; X &lt; 0.0 if possible. Swap predicate if necessary.</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCompares_8cpp_source.html#l06838">InstCombineCompares.cpp:6838</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_ac26154a24f393f523c87cc5f8239f36c"><div class="ttname"><a href="classllvm_1_1Instruction.html#ac26154a24f393f523c87cc5f8239f36c">llvm::Instruction::BinaryOps</a></div><div class="ttdeci">BinaryOps</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00809">Instruction.h:809</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_a04d40b2885dcf7e80feed09ba6209e54"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#a04d40b2885dcf7e80feed09ba6209e54">llvm::InstCombinerImpl::foldICmpWithZextOrSext</a></div><div class="ttdeci">Instruction * foldICmpWithZextOrSext(ICmpInst &amp;ICmp)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCompares_8cpp_source.html#l04974">InstCombineCompares.cpp:4974</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_a1e6f0d8dfed0ab631b488a3e6317718e"><div class="ttname"><a href="classllvm_1_1APInt.html#a1e6f0d8dfed0ab631b488a3e6317718e">llvm::APInt::getSignMask</a></div><div class="ttdeci">static APInt getSignMask(unsigned BitWidth)</div><div class="ttdoc">Get the SignMask for a specific bit width.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00209">APInt.h:209</a></div></div>
<div class="ttc" id="aclassllvm_1_1ShuffleVectorInst_html"><div class="ttname"><a href="classllvm_1_1ShuffleVectorInst.html">llvm::ShuffleVectorInst</a></div><div class="ttdoc">This instruction constructs a fixed permutation of two input vectors.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02017">Instructions.h:2017</a></div></div>
<div class="ttc" id="anamespacellvm_html_a57d2f9ee99e9e68cff564d0d579c8163"><div class="ttname"><a href="namespacellvm.html#a57d2f9ee99e9e68cff564d0d579c8163">llvm::countr_zero</a></div><div class="ttdeci">int countr_zero(T Val)</div><div class="ttdoc">Count number of 0's from the least significant bit to the most stopping at the first 1.</div><div class="ttdef"><b>Definition:</b> <a href="bit_8h_source.html#l00179">bit.h:179</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_aa8f0b6273a443e7a98755fcb08d97f22"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#aa8f0b6273a443e7a98755fcb08d97f22">llvm::InstCombinerImpl::foldICmpXorConstant</a></div><div class="ttdeci">Instruction * foldICmpXorConstant(ICmpInst &amp;Cmp, BinaryOperator *Xor, const APInt &amp;C)</div><div class="ttdoc">Fold icmp (xor X, Y), C.</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCompares_8cpp_source.html#l01547">InstCombineCompares.cpp:1547</a></div></div>
<div class="ttc" id="astructllvm_1_1APFloatBase_html_a22ed74f1ed33c4d33f524a650ea536a6"><div class="ttname"><a href="structllvm_1_1APFloatBase.html#a22ed74f1ed33c4d33f524a650ea536a6">llvm::APFloatBase::rmNearestTiesToEven</a></div><div class="ttdeci">static constexpr roundingMode rmNearestTiesToEven</div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l00217">APFloat.h:217</a></div></div>
<div class="ttc" id="aInstCombineCompares_8cpp_html_ae5edf88ac708ed10940b4092fda1742b"><div class="ttname"><a href="InstCombineCompares_8cpp.html#ae5edf88ac708ed10940b4092fda1742b">foldICmpOfUAddOv</a></div><div class="ttdeci">static Instruction * foldICmpOfUAddOv(ICmpInst &amp;I)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCompares_8cpp_source.html#l06245">InstCombineCompares.cpp:6245</a></div></div>
<div class="ttc" id="aclassllvm_1_1APFloat_html_a257e3cb529defa79ad7a9f42072f339a"><div class="ttname"><a href="classllvm_1_1APFloat.html#a257e3cb529defa79ad7a9f42072f339a">llvm::APFloat::convert</a></div><div class="ttdeci">opStatus convert(const fltSemantics &amp;ToSemantics, roundingMode RM, bool *losesInfo)</div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8cpp_source.html#l05364">APFloat.cpp:5364</a></div></div>
<div class="ttc" id="aclassllvm_1_1Constant_html_a0154da1d06b29a1d5649607ae2dfc389"><div class="ttname"><a href="classllvm_1_1Constant.html#a0154da1d06b29a1d5649607ae2dfc389">llvm::Constant::getIntegerValue</a></div><div class="ttdeci">static Constant * getIntegerValue(Type *Ty, const APInt &amp;V)</div><div class="ttdoc">Return the value for an integer or pointer constant, or a vector thereof, with the given scalar value...</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00386">Constants.cpp:386</a></div></div>
<div class="ttc" id="aclassllvm_1_1GEPOperator_html_a58518ce0fd3570c7bfce00aa2df58e42"><div class="ttname"><a href="classllvm_1_1GEPOperator.html#a58518ce0fd3570c7bfce00aa2df58e42">llvm::GEPOperator::getSourceElementType</a></div><div class="ttdeci">Type * getSourceElementType() const</div><div class="ttdef"><b>Definition:</b> <a href="Operator_8cpp_source.html#l00054">Operator.cpp:54</a></div></div>
<div class="ttc" id="aclassllvm_1_1User_html_addec638786f763d967811b45cb662f1f"><div class="ttname"><a href="classllvm_1_1User.html#addec638786f763d967811b45cb662f1f">llvm::User::getNumOperands</a></div><div class="ttdeci">unsigned getNumOperands() const</div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00191">User.h:191</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantExpr_html_a28bf8984fbfb08fd27df435e631e6832"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#a28bf8984fbfb08fd27df435e631e6832">llvm::ConstantExpr::getPointerBitCastOrAddrSpaceCast</a></div><div class="ttdeci">static Constant * getPointerBitCastOrAddrSpaceCast(Constant *C, Type *Ty)</div><div class="ttdoc">Create a BitCast or AddrSpaceCast for a pointer type depending on the address space.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l02056">Constants.cpp:2056</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoadInst_html_a2eccc19f9061eeb7ad1e30e21f76034d"><div class="ttname"><a href="classllvm_1_1LoadInst.html#a2eccc19f9061eeb7ad1e30e21f76034d">llvm::LoadInst::isVolatile</a></div><div class="ttdeci">bool isVolatile() const</div><div class="ttdoc">Return true if this is a load from a volatile memory location.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00214">Instructions.h:214</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantRange_html_ac098fe4f07549fb029fbf950dbe78fd3"><div class="ttname"><a href="classllvm_1_1ConstantRange.html#ac098fe4f07549fb029fbf950dbe78fd3">llvm::ConstantRange::intersectWith</a></div><div class="ttdeci">ConstantRange intersectWith(const ConstantRange &amp;CR, PreferredRangeType Type=Smallest) const</div><div class="ttdoc">Return the range that results from the intersection of this range with another range.</div><div class="ttdef"><b>Definition:</b> <a href="ConstantRange_8cpp_source.html#l00520">ConstantRange.cpp:520</a></div></div>
<div class="ttc" id="anamespacellvm_html_af7f2eb961a542779e97c0b3ec7fa6623"><div class="ttname"><a href="namespacellvm.html#af7f2eb961a542779e97c0b3ec7fa6623">llvm::isImpliedCondition</a></div><div class="ttdeci">std::optional&lt; bool &gt; isImpliedCondition(const Value *LHS, const Value *RHS, const DataLayout &amp;DL, bool LHSIsTrue=true, unsigned Depth=0)</div><div class="ttdoc">Return true if RHS is known to be implied true by LHS.</div><div class="ttdef"><b>Definition:</b> <a href="ValueTracking_8cpp_source.html#l06971">ValueTracking.cpp:6971</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a2d9861feadd3a09792967a012559e7b2"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">llvm::PatternMatch::m_Specific</a></div><div class="ttdeci">specificval_ty m_Specific(const Value *V)</div><div class="ttdoc">Match if we have a specific specified value.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00772">PatternMatch.h:772</a></div></div>
<div class="ttc" id="aclassllvm_1_1Constant_html_a90b7d2d0eb9eb04c4d9e60c0fabb1efb"><div class="ttname"><a href="classllvm_1_1Constant.html#a90b7d2d0eb9eb04c4d9e60c0fabb1efb">llvm::Constant::getUniqueInteger</a></div><div class="ttdeci">const APInt &amp; getUniqueInteger() const</div><div class="ttdoc">If C is a constant integer then return its value, otherwise C must be a vector of constant integers,...</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l01690">Constants.cpp:1690</a></div></div>
<div class="ttc" id="anamespacellvm_html_acd2b6fb514f63152133c43a7e4a11b03"><div class="ttname"><a href="namespacellvm.html#acd2b6fb514f63152133c43a7e4a11b03">llvm::countLeadingZeros</a></div><div class="ttdeci">unsigned countLeadingZeros(T Val)</div><div class="ttdoc">Count number of 0's from the most significant bit to the least stopping at the first 1.</div><div class="ttdef"><b>Definition:</b> <a href="MathExtras_8h_source.html#l00085">MathExtras.h:85</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a3fe9b3ddb71b9fb53d9fc74b3a0710bf"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a3fe9b3ddb71b9fb53d9fc74b3a0710bf">llvm::PatternMatch::m_ICmp</a></div><div class="ttdeci">CmpClass_match&lt; LHS, RHS, ICmpInst, ICmpInst::Predicate &gt; m_ICmp(ICmpInst::Predicate &amp;Pred, const LHS &amp;L, const RHS &amp;R)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01394">PatternMatch.h:1394</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalVariable_html_aa859e108741fa64681b63f0c0c672512"><div class="ttname"><a href="classllvm_1_1GlobalVariable.html#aa859e108741fa64681b63f0c0c672512">llvm::GlobalVariable::isConstant</a></div><div class="ttdeci">bool isConstant() const</div><div class="ttdoc">If the value is a global constant, its value is immutable throughout the runtime execution of the pro...</div><div class="ttdef"><b>Definition:</b> <a href="GlobalVariable_8h_source.html#l00152">GlobalVariable.h:152</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78ba607cecdc5172814382033e001ed11fad"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba607cecdc5172814382033e001ed11fad">llvm::CmpInst::ICMP_UGT</a></div><div class="ttdeci">@ ICMP_UGT</div><div class="ttdoc">unsigned greater than</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00741">InstrTypes.h:741</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78bad601460c9371d0f0ada5ae006bdba2bd"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bad601460c9371d0f0ada5ae006bdba2bd">llvm::CmpInst::FCMP_UNE</a></div><div class="ttdeci">@ FCMP_UNE</div><div class="ttdoc">1 1 1 0 True if unordered or not equal</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00734">InstrTypes.h:734</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallBase_html_ab2caa29167597390ab2fc3cf30d70389"><div class="ttname"><a href="classllvm_1_1CallBase.html#ab2caa29167597390ab2fc3cf30d70389">llvm::CallBase::getArgOperand</a></div><div class="ttdeci">Value * getArgOperand(unsigned i) const</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l01351">InstrTypes.h:1351</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_ae155fc08c52bcfd6026faf4c640a2cf7"><div class="ttname"><a href="classllvm_1_1APInt.html#ae155fc08c52bcfd6026faf4c640a2cf7">llvm::APInt::countTrailingOnes</a></div><div class="ttdeci">unsigned countTrailingOnes() const</div><div class="ttdoc">Count the number of trailing one bits.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l01607">APInt.h:1607</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a1a7f07aaef6a3bee130bf0e0f0536802"><div class="ttname"><a href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">llvm::Instruction::getParent</a></div><div class="ttdeci">const BasicBlock * getParent() const</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00090">Instruction.h:90</a></div></div>
<div class="ttc" id="aInstructionSimplify_8h_html"><div class="ttname"><a href="InstructionSimplify_8h.html">InstructionSimplify.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html_a0c8ffe664a36e30d49c84d0aded2fe08"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#a0c8ffe664a36e30d49c84d0aded2fe08">llvm::SmallVectorImpl::pop_back_val</a></div><div class="ttdeci">T pop_back_val()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00677">SmallVector.h:677</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_aa7414ba9f658ff1287d22a4b8fe81bcb"><div class="ttname"><a href="classllvm_1_1CmpInst.html#aa7414ba9f658ff1287d22a4b8fe81bcb">llvm::CmpInst::getPredicate</a></div><div class="ttdeci">Predicate getPredicate() const</div><div class="ttdoc">Return the predicate for this instruction.</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00808">InstrTypes.h:808</a></div></div>
<div class="ttc" id="aclassllvm_1_1ICmpInst_html_ae955171baab3d9254f3ffb089c082206"><div class="ttname"><a href="classllvm_1_1ICmpInst.html#ae955171baab3d9254f3ffb089c082206">llvm::ICmpInst::isRelational</a></div><div class="ttdeci">bool isRelational() const</div><div class="ttdoc">Return true if the predicate is relational (not EQ or NE).</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01302">Instructions.h:1302</a></div></div>
<div class="ttc" id="aclassllvm_1_1IntegerType_html_a90b790ccb1af4ea5ccd69db4b8cd2d81"><div class="ttname"><a href="classllvm_1_1IntegerType.html#a90b790ccb1af4ea5ccd69db4b8cd2d81">llvm::IntegerType::getBitWidth</a></div><div class="ttdeci">unsigned getBitWidth() const</div><div class="ttdoc">Get the number of bits in this IntegerType.</div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00072">DerivedTypes.h:72</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_a3015474e70e59c0a3ed4f9f0e8644b75"><div class="ttname"><a href="classllvm_1_1APInt.html#a3015474e70e59c0a3ed4f9f0e8644b75">llvm::APInt::getActiveBits</a></div><div class="ttdeci">unsigned getActiveBits() const</div><div class="ttdoc">Compute the number of active bits in the value.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l01463">APInt.h:1463</a></div></div>
<div class="ttc" id="aInstCombineCompares_8cpp_html_a672a7ba358ab0b9cbd11d044d58fe842"><div class="ttname"><a href="InstCombineCompares_8cpp.html#a672a7ba358ab0b9cbd11d044d58fe842">processUMulZExtIdiom</a></div><div class="ttdeci">static Instruction * processUMulZExtIdiom(ICmpInst &amp;I, Value *MulVal, Value *OtherVal, InstCombinerImpl &amp;IC)</div><div class="ttdoc">Recognize and process idiom involving test for multiplication overflow.</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCompares_8cpp_source.html#l05235">InstCombineCompares.cpp:5235</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_a6f392d7a34855ef605496d0afcb913cd"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#a6f392d7a34855ef605496d0afcb913cd">llvm::InstCombinerImpl::canonicalizeICmpPredicate</a></div><div class="ttdeci">CmpInst * canonicalizeICmpPredicate(CmpInst &amp;I)</div><div class="ttdoc">If we have a comparison with a non-canonical predicate, if we can update all the users,...</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCompares_8cpp_source.html#l06031">InstCombineCompares.cpp:6031</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_ab50076cb704b1bd42c536d9f51c5100e"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#ab50076cb704b1bd42c536d9f51c5100e">llvm::PatternMatch::m_NSWNeg</a></div><div class="ttdeci">OverflowingBinaryOp_match&lt; cst_pred_ty&lt; is_zero_int &gt;, ValTy, Instruction::Sub, OverflowingBinaryOperator::NoSignedWrap &gt; m_NSWNeg(const ValTy &amp;V)</div><div class="ttdoc">Matches a 'Neg' as 'sub nsw 0, V'.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l02293">PatternMatch.h:2293</a></div></div>
<div class="ttc" id="aInstCombineCompares_8cpp_html_a1f13fe408d6285f56e9635116c119108"><div class="ttname"><a href="InstCombineCompares_8cpp.html#a1f13fe408d6285f56e9635116c119108">foldVectorCmp</a></div><div class="ttdeci">static Instruction * foldVectorCmp(CmpInst &amp;Cmp, InstCombiner::BuilderTy &amp;Builder)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCompares_8cpp_source.html#l06175">InstCombineCompares.cpp:6175</a></div></div>
<div class="ttc" id="aclassllvm_1_1PHINode_html"><div class="ttname"><a href="classllvm_1_1PHINode.html">llvm::PHINode</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02708">Instructions.h:2708</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a8de021e28a3c04c9216ad8decf104f02"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">llvm::BasicBlock::getTerminator</a></div><div class="ttdeci">const Instruction * getTerminator() const LLVM_READONLY</div><div class="ttdoc">Returns the terminator instruction if the block is well formed or null if the block is not well forme...</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00127">BasicBlock.h:127</a></div></div>
<div class="ttc" id="aclassllvm_1_1Constant_html_a292ffa1290b082be7ce24676c26f04d6"><div class="ttname"><a href="classllvm_1_1Constant.html#a292ffa1290b082be7ce24676c26f04d6">llvm::Constant::getSplatValue</a></div><div class="ttdeci">Constant * getSplatValue(bool AllowUndefs=false) const</div><div class="ttdoc">If all elements of the vector constant have the same value, return that value.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l01631">Constants.cpp:1631</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78ba9835cfe02fb5027680bd7203b024f77a"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba9835cfe02fb5027680bd7203b024f77a">llvm::CmpInst::FCMP_OLE</a></div><div class="ttdeci">@ FCMP_OLE</div><div class="ttdoc">0 1 0 1 True if ordered and less than or equal</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00725">InstrTypes.h:725</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantRange_html_aa89e9cec92a0b38d2f47a077bf12cc98"><div class="ttname"><a href="classllvm_1_1ConstantRange.html#aa89e9cec92a0b38d2f47a077bf12cc98">llvm::ConstantRange::makeExactICmpRegion</a></div><div class="ttdeci">static ConstantRange makeExactICmpRegion(CmpInst::Predicate Pred, const APInt &amp;Other)</div><div class="ttdoc">Produce the exact range such that all values in the returned range satisfy the given predicate with a...</div><div class="ttdef"><b>Definition:</b> <a href="ConstantRange_8cpp_source.html#l00157">ConstantRange.cpp:157</a></div></div>
<div class="ttc" id="aInstCombineCompares_8cpp_html_ab8102f1d2d3e331db1f1781055e61013"><div class="ttname"><a href="InstCombineCompares_8cpp.html#ab8102f1d2d3e331db1f1781055e61013">isSignTest</a></div><div class="ttdeci">static bool isSignTest(ICmpInst::Predicate &amp;Pred, const APInt &amp;C)</div><div class="ttdoc">Returns true if the exploded icmp can be expressed as a signed comparison to zero and updates the pre...</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCompares_8cpp_source.html#l00077">InstCombineCompares.cpp:77</a></div></div>
<div class="ttc" id="aInstCombineCompares_8cpp_html_a55797b5bbbbd581a91789a8106df8e99"><div class="ttname"><a href="InstCombineCompares_8cpp.html#a55797b5bbbbd581a91789a8106df8e99">foldShiftIntoShiftInAnotherHandOfAndInICmp</a></div><div class="ttdeci">static Value * foldShiftIntoShiftInAnotherHandOfAndInICmp(ICmpInst &amp;I, const SimplifyQuery SQ, InstCombiner::BuilderTy &amp;Builder)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCompares_8cpp_source.html#l03857">InstCombineCompares.cpp:3857</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombiner_html_ad6a655e662d683cd55d2201b5e6a6360"><div class="ttname"><a href="classllvm_1_1InstCombiner.html#ad6a655e662d683cd55d2201b5e6a6360">llvm::InstCombiner::isSignBitCheck</a></div><div class="ttdeci">static bool isSignBitCheck(ICmpInst::Predicate Pred, const APInt &amp;RHS, bool &amp;TrueIfSigned)</div><div class="ttdoc">Given an exploded icmp instruction, return true if the comparison only checks the sign bit.</div><div class="ttdef"><b>Definition:</b> <a href="InstCombiner_8h_source.html#l00165">InstCombiner.h:165</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_a3d430216d32f4363e4df154599b98055"><div class="ttname"><a href="classllvm_1_1APInt.html#a3d430216d32f4363e4df154599b98055">llvm::APInt::sgt</a></div><div class="ttdeci">bool sgt(const APInt &amp;RHS) const</div><div class="ttdoc">Signed greater than comparison.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l01179">APInt.h:1179</a></div></div>
<div class="ttc" id="astructllvm_1_1KnownBits_html_a30c829b0f51e87159f116f980af6237d"><div class="ttname"><a href="structllvm_1_1KnownBits.html#a30c829b0f51e87159f116f980af6237d">llvm::KnownBits::getSignedMaxValue</a></div><div class="ttdeci">APInt getSignedMaxValue() const</div><div class="ttdoc">Return the maximal signed value possible given these KnownBits.</div><div class="ttdef"><b>Definition:</b> <a href="KnownBits_8h_source.html#l00142">KnownBits.h:142</a></div></div>
<div class="ttc" id="anamespacellvm_html_ab9c6b351507d3c0730f4290919d43a12"><div class="ttname"><a href="namespacellvm.html#ab9c6b351507d3c0730f4290919d43a12">llvm::ArrayRef</a></div><div class="ttdeci">ArrayRef(const T &amp;OneElt) -&gt; ArrayRef&lt; T &gt;</div></div>
<div class="ttc" id="aclassllvm_1_1GlobalValue_html_a29e0b1c558b350347e2652b35b26fea8"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#a29e0b1c558b350347e2652b35b26fea8">llvm::GlobalValue::getValueType</a></div><div class="ttdeci">Type * getValueType() const</div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00292">GlobalValue.h:292</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_aa9ac71e54b01420c48c031925c854c96"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#aa9ac71e54b01420c48c031925c854c96">llvm::InstCombinerImpl::foldICmpAddOpConst</a></div><div class="ttdeci">Instruction * foldICmpAddOpConst(Value *X, const APInt &amp;C, ICmpInst::Predicate Pred)</div><div class="ttdoc">Fold &quot;icmp pred (X+C), X&quot;.</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCompares_8cpp_source.html#l00976">InstCombineCompares.cpp:976</a></div></div>
<div class="ttc" id="anamespacellvm_1_1APIntOps_html_a1c533fb6a26fce38d9cec2b51a7a90b0"><div class="ttname"><a href="namespacellvm_1_1APIntOps.html#a1c533fb6a26fce38d9cec2b51a7a90b0">llvm::APIntOps::RoundingUDiv</a></div><div class="ttdeci">APInt RoundingUDiv(const APInt &amp;A, const APInt &amp;B, APInt::Rounding RM)</div><div class="ttdoc">Return A unsign-divided by B, rounded by the given rounding mode.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8cpp_source.html#l02714">APInt.cpp:2714</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a2fed53ed2b3225752bd9e4fce4967361"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a2fed53ed2b3225752bd9e4fce4967361">llvm::PatternMatch::m_Neg</a></div><div class="ttdeci">BinaryOp_match&lt; cst_pred_ty&lt; is_zero_int &gt;, ValTy, Instruction::Sub &gt; m_Neg(const ValTy &amp;V)</div><div class="ttdoc">Matches a 'Neg' as 'sub 0, V'.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l02284">PatternMatch.h:2284</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_ad960e1ff48d25c382b6d28e7961f074e"><div class="ttname"><a href="classllvm_1_1APInt.html#ad960e1ff48d25c382b6d28e7961f074e">llvm::APInt::getLowBitsSet</a></div><div class="ttdeci">static APInt getLowBitsSet(unsigned numBits, unsigned loBitsSet)</div><div class="ttdoc">Constructs an APInt value that has the bottom loBitsSet bits set.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00289">APInt.h:289</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantRange_html_a1d29074c7a610816d4f328b7cd9b783d"><div class="ttname"><a href="classllvm_1_1ConstantRange.html#a1d29074c7a610816d4f328b7cd9b783d">llvm::ConstantRange::subtract</a></div><div class="ttdeci">ConstantRange subtract(const APInt &amp;CI) const</div><div class="ttdoc">Subtract the specified constant from the endpoints of this constant range.</div><div class="ttdef"><b>Definition:</b> <a href="ConstantRange_8cpp_source.html#l00488">ConstantRange.cpp:488</a></div></div>
<div class="ttc" id="aclassllvm_1_1IntegerType_html_a14f7b4f1aed38192fb6b7772eb506bdb"><div class="ttname"><a href="classllvm_1_1IntegerType.html#a14f7b4f1aed38192fb6b7772eb506bdb">llvm::IntegerType::get</a></div><div class="ttdeci">static IntegerType * get(LLVMContext &amp;C, unsigned NumBits)</div><div class="ttdoc">This static method is the primary way of constructing an IntegerType.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00313">Type.cpp:313</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallInst_html"><div class="ttname"><a href="classllvm_1_1CallInst.html">llvm::CallInst</a></div><div class="ttdoc">This class represents a function call, abstracting a target machine's calling convention.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01485">Instructions.h:1485</a></div></div>
<div class="ttc" id="alib_2CodeGen_2README_8txt_html_a09776db24cf586ec9f1e18f3bae14099"><div class="ttname"><a href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a></div><div class="ttdeci">Common register allocation spilling lr str ldr sxth r3 ldr mla r4 can lr mov lr str ldr sxth r3 mla r4 and then merge mul and lr str ldr sxth r3 mla r4 It also increase the likelihood the store may become dead bb27 Successors according to LLVM BB</div><div class="ttdef"><b>Definition:</b> <a href="lib_2CodeGen_2README_8txt_source.html#l00039">README.txt:39</a></div></div>
<div class="ttc" id="aHexagonCommonGEP_8cpp_html_ad532e8710e50302e0a376b61c91fa91d"><div class="ttname"><a href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a></div><div class="ttdeci">Hexagon Common GEP</div><div class="ttdef"><b>Definition:</b> <a href="HexagonCommonGEP_8cpp_source.html#l00171">HexagonCommonGEP.cpp:171</a></div></div>
<div class="ttc" id="astructllvm_1_1KnownBits_html_a4fdc09049a61f952b5d52788dbd2f69b"><div class="ttname"><a href="structllvm_1_1KnownBits.html#a4fdc09049a61f952b5d52788dbd2f69b">llvm::KnownBits::getBitWidth</a></div><div class="ttdeci">unsigned getBitWidth() const</div><div class="ttdoc">Get the bit width of this value.</div><div class="ttdef"><b>Definition:</b> <a href="KnownBits_8h_source.html#l00040">KnownBits.h:40</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_a06131a96d98381fd2b73c4ef401d416c"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#a06131a96d98381fd2b73c4ef401d416c">llvm::InstCombinerImpl::foldICmpSRemConstant</a></div><div class="ttdeci">Instruction * foldICmpSRemConstant(ICmpInst &amp;Cmp, BinaryOperator *UDiv, const APInt &amp;C)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCompares_8cpp_source.html#l02440">InstCombineCompares.cpp:2440</a></div></div>
<div class="ttc" id="anamespacellvm_html_a4036c3c75bcee1206cd199548b87f9ae"><div class="ttname"><a href="namespacellvm.html#a4036c3c75bcee1206cd199548b87f9ae">llvm::isKnownToBeAPowerOfTwo</a></div><div class="ttdeci">bool isKnownToBeAPowerOfTwo(const Value *V, const DataLayout &amp;DL, bool OrZero=false, unsigned Depth=0, AssumptionCache *AC=nullptr, const Instruction *CxtI=nullptr, const DominatorTree *DT=nullptr, bool UseInstrInfo=true)</div><div class="ttdoc">Return true if the given value is known to have exactly one bit set when defined.</div><div class="ttdef"><b>Definition:</b> <a href="ValueTracking_8cpp_source.html#l00300">ValueTracking.cpp:300</a></div></div>
<div class="ttc" id="astructllvm_1_1DenormalMode_html_a29b26e3ae30f3f6ec4106ff181282893a40bc80ae1d362a1461703637e946cbd8"><div class="ttname"><a href="structllvm_1_1DenormalMode.html#a29b26e3ae30f3f6ec4106ff181282893a40bc80ae1d362a1461703637e946cbd8">llvm::DenormalMode::PreserveSign</a></div><div class="ttdeci">@ PreserveSign</div><div class="ttdoc">The sign of a flushed-to-zero number is preserved in the sign of 0.</div><div class="ttdef"><b>Definition:</b> <a href="FloatingPointMode_8h_source.html#l00079">FloatingPointMode.h:79</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_ae855357b6c5e6e7ed1869272708a3a84"><div class="ttname"><a href="classllvm_1_1Value.html#ae855357b6c5e6e7ed1869272708a3a84">llvm::Value::takeName</a></div><div class="ttdeci">void takeName(Value *V)</div><div class="ttdoc">Transfer the name from V to this value.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00381">Value.cpp:381</a></div></div>
<div class="ttc" id="aREADME__P9_8txt_html_a1339768ca51595b3ebf5c0e69b80c9e8"><div class="ttname"><a href="README__P9_8txt.html#a1339768ca51595b3ebf5c0e69b80c9e8">lshr</a></div><div class="ttdeci">Vector Shift Left don t map to llvm shl and lshr</div><div class="ttdef"><b>Definition:</b> <a href="README__P9_8txt_source.html#l00118">README_P9.txt:118</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_aeaf22e8d92fd978a5eca9ab031994399"><div class="ttname"><a href="classllvm_1_1APInt.html#aeaf22e8d92fd978a5eca9ab031994399">llvm::APInt::getBitsSetFrom</a></div><div class="ttdeci">static APInt getBitsSetFrom(unsigned numBits, unsigned loBit)</div><div class="ttdoc">Constructs an APInt value that has a contiguous range of bits set.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00269">APInt.h:269</a></div></div>
<div class="ttc" id="aclassllvm_1_1AllocaInst_html"><div class="ttname"><a href="classllvm_1_1AllocaInst.html">llvm::AllocaInst</a></div><div class="ttdoc">an instruction to allocate memory on the stack</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00058">Instructions.h:58</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_acb9c55b6986369948507ca5241b4e411"><div class="ttname"><a href="classllvm_1_1APInt.html#acb9c55b6986369948507ca5241b4e411">llvm::APInt::shl</a></div><div class="ttdeci">APInt shl(unsigned shiftAmt) const</div><div class="ttdoc">Left-shift function.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00861">APInt.h:861</a></div></div>
<div class="ttc" id="aclassllvm_1_1User_html_abe1de1520a21f77ac57cc210bf0fb0b4"><div class="ttname"><a href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">llvm::User::getOperand</a></div><div class="ttdeci">Value * getOperand(unsigned i) const</div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00169">User.h:169</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantRange_html_a5bd6d98b4a7ecc1dcdc571e4352fcc52"><div class="ttname"><a href="classllvm_1_1ConstantRange.html#a5bd6d98b4a7ecc1dcdc571e4352fcc52">llvm::ConstantRange::isEmptySet</a></div><div class="ttdeci">bool isEmptySet() const</div><div class="ttdoc">Return true if this set contains no members.</div><div class="ttdef"><b>Definition:</b> <a href="ConstantRange_8cpp_source.html#l00367">ConstantRange.cpp:367</a></div></div>
<div class="ttc" id="aInstCombineCompares_8cpp_html_a0dc1a1e560014003d76b017e35528984"><div class="ttname"><a href="InstCombineCompares_8cpp.html#a0dc1a1e560014003d76b017e35528984">foldICmpWithLowBitMaskedVal</a></div><div class="ttdeci">static Value * foldICmpWithLowBitMaskedVal(ICmpInst &amp;I, InstCombiner::BuilderTy &amp;Builder)</div><div class="ttdoc">Some comparisons can be simplified.</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCompares_8cpp_source.html#l03689">InstCombineCompares.cpp:3689</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a5b844aada27c4c6fdb87146ac458c0d8"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a5b844aada27c4c6fdb87146ac458c0d8">llvm::PatternMatch::m_Trunc</a></div><div class="ttdeci">CastClass_match&lt; OpTy, Instruction::Trunc &gt; m_Trunc(const OpTy &amp;Op)</div><div class="ttdoc">Matches Trunc.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01611">PatternMatch.h:1611</a></div></div>
<div class="ttc" id="anamespacellvm_html_a7b03ed78a8e299bde6d26a8793cd4e06"><div class="ttname"><a href="namespacellvm.html#a7b03ed78a8e299bde6d26a8793cd4e06">llvm::NullPointerIsDefined</a></div><div class="ttdeci">bool NullPointerIsDefined(const Function *F, unsigned AS=0)</div><div class="ttdoc">Check whether null pointer dereferencing is considered undefined behavior for a given function or an ...</div><div class="ttdef"><b>Definition:</b> <a href="Function_8cpp_source.html#l02136">Function.cpp:2136</a></div></div>
<div class="ttc" id="aclassllvm_1_1SetVector_html"><div class="ttname"><a href="classllvm_1_1SetVector.html">llvm::SetVector&lt; Value * &gt;</a></div></div>
<div class="ttc" id="aclassllvm_1_1BinaryOperator_html_a02ce9966395063ac501ecbc1623deda4"><div class="ttname"><a href="classllvm_1_1BinaryOperator.html#a02ce9966395063ac501ecbc1623deda4">llvm::BinaryOperator::Create</a></div><div class="ttdeci">static BinaryOperator * Create(BinaryOps Op, Value *S1, Value *S2, const Twine &amp;Name=Twine(), Instruction *InsertBefore=nullptr)</div><div class="ttdoc">Construct a binary instruction, given the opcode and the two operands.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l02950">Instructions.cpp:2950</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantExpr_html_a894f338095f5f9abf4a3a6344a905cb3"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#a894f338095f5f9abf4a3a6344a905cb3">llvm::ConstantExpr::getNUWShl</a></div><div class="ttdeci">static Constant * getNUWShl(Constant *C1, Constant *C2)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l01108">Constants.h:1108</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_a3a2a335dd528474e41dcf609f79b0be2"><div class="ttname"><a href="classllvm_1_1APInt.html#a3a2a335dd528474e41dcf609f79b0be2">llvm::APInt::countLeadingOnes</a></div><div class="ttdeci">unsigned countLeadingOnes() const</div><div class="ttdoc">Count the number of leading one bits.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l01568">APInt.h:1568</a></div></div>
<div class="ttc" id="aCodeGenPrepare_8cpp_html_a98c59bcf49cb7343886e8f425d6d877b"><div class="ttname"><a href="CodeGenPrepare_8cpp.html#a98c59bcf49cb7343886e8f425d6d877b">foldICmpWithDominatingICmp</a></div><div class="ttdeci">static bool foldICmpWithDominatingICmp(CmpInst *Cmp, const TargetLowering &amp;TLI)</div><div class="ttdoc">For pattern like:</div><div class="ttdef"><b>Definition:</b> <a href="CodeGenPrepare_8cpp_source.html#l01760">CodeGenPrepare.cpp:1760</a></div></div>
<div class="ttc" id="anamespacellvm_html_a2816e84a08c108d18bc4665bc1817e01"><div class="ttname"><a href="namespacellvm.html#a2816e84a08c108d18bc4665bc1817e01">llvm::abs</a></div><div class="ttdeci">APFloat abs(APFloat X)</div><div class="ttdoc">Returns the absolute value of the argument.</div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l01332">APFloat.h:1332</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_ad4201fc3d0958c5d8dff30af6fa45803"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#ad4201fc3d0958c5d8dff30af6fa45803">llvm::PatternMatch::m_VecReverse</a></div><div class="ttdeci">m_Intrinsic_Ty&lt; Opnd0 &gt;::Ty m_VecReverse(const Opnd0 &amp;Op0)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l02216">PatternMatch.h:2216</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a689a03df5b4ae094d6a3a1bd13dac574"><div class="ttname"><a href="classllvm_1_1Instruction.html#a689a03df5b4ae094d6a3a1bd13dac574">llvm::Instruction::isExact</a></div><div class="ttdeci">bool isExact() const LLVM_READONLY</div><div class="ttdoc">Determine whether the exact flag is set.</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8cpp_source.html#l00245">Instruction.cpp:245</a></div></div>
<div class="ttc" id="aclassllvm_1_1APFloat_html_aaa67fe0741c2b3712630ae636f8c2c20"><div class="ttname"><a href="classllvm_1_1APFloat.html#aaa67fe0741c2b3712630ae636f8c2c20">llvm::APFloat::getLargest</a></div><div class="ttdeci">static APFloat getLargest(const fltSemantics &amp;Sem, bool Negative=false)</div><div class="ttdoc">Returns the largest finite number in the given semantics.</div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l00970">APFloat.h:970</a></div></div>
<div class="ttc" id="anamespacellvm_html_aac36edd0f1ce976f0025c98e88d3830eabccd0de85dfbe7aef83629b318a4df6e"><div class="ttname"><a href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eabccd0de85dfbe7aef83629b318a4df6e">llvm::RecurKind::SMax</a></div><div class="ttdeci">@ SMax</div><div class="ttdoc">Signed integer max implemented in terms of select(cmp()).</div></div>
<div class="ttc" id="aclassllvm_1_1Value_html"><div class="ttname"><a href="classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00074">Value.h:74</a></div></div>
<div class="ttc" id="aclassllvm_1_1APFloat_html_a9c568ab8748aba5d37006d52618bbcfd"><div class="ttname"><a href="classllvm_1_1APFloat.html#a9c568ab8748aba5d37006d52618bbcfd">llvm::APFloat::getSmallestNormalized</a></div><div class="ttdeci">static APFloat getSmallestNormalized(const fltSemantics &amp;Sem, bool Negative=false)</div><div class="ttdoc">Returns the smallest (by magnitude) normalized finite number in the given semantics.</div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l00990">APFloat.h:990</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a37668d9884c78ac77254cf9fb8a4276a"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a37668d9884c78ac77254cf9fb8a4276a">llvm::PatternMatch::m_Shl</a></div><div class="ttdeci">BinaryOp_match&lt; LHS, RHS, Instruction::Shl &gt; m_Shl(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01111">PatternMatch.h:1111</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_a037006a1d44974a6840403beb4febd30"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#a037006a1d44974a6840403beb4febd30">llvm::InstCombinerImpl::foldICmpShrConstant</a></div><div class="ttdeci">Instruction * foldICmpShrConstant(ICmpInst &amp;Cmp, BinaryOperator *Shr, const APInt &amp;C)</div><div class="ttdoc">Fold icmp ({al}shr X, Y), C.</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCompares_8cpp_source.html#l02285">InstCombineCompares.cpp:2285</a></div></div>
<div class="ttc" id="aclassllvm_1_1VectorType_html_a8c90e6c50e795b17466482a04947690e"><div class="ttname"><a href="classllvm_1_1VectorType.html#a8c90e6c50e795b17466482a04947690e">llvm::VectorType::get</a></div><div class="ttdeci">static VectorType * get(Type *ElementType, ElementCount EC)</div><div class="ttdoc">This static method is the primary way to construct an VectorType.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00670">Type.cpp:670</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_ab4e0512c7e1c7adaa56677e3155685f1"><div class="ttname"><a href="classllvm_1_1Value.html#ab4e0512c7e1c7adaa56677e3155685f1">llvm::Value::users</a></div><div class="ttdeci">iterator_range&lt; user_iterator &gt; users()</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00421">Value.h:421</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_a866883cec7ed781fcf1e9cda18b24f5b"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#a866883cec7ed781fcf1e9cda18b24f5b">llvm::InstCombinerImpl::foldCmpLoadFromIndexedGlobal</a></div><div class="ttdeci">Instruction * foldCmpLoadFromIndexedGlobal(LoadInst *LI, GetElementPtrInst *GEP, GlobalVariable *GV, CmpInst &amp;ICI, ConstantInt *AndCst=nullptr)</div><div class="ttdoc">This is called when we see this pattern: cmp pred (load (gep GV, ...)), cmpcst where GV is a global v...</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCompares_8cpp_source.html#l00107">InstCombineCompares.cpp:107</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78baa3213b645e029aba8bb1b85213607d5e"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa3213b645e029aba8bb1b85213607d5e">llvm::CmpInst::FCMP_ORD</a></div><div class="ttdeci">@ FCMP_ORD</div><div class="ttdoc">0 1 1 1 True if ordered (no nans)</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00727">InstrTypes.h:727</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a858f42cd002d944befe9675788d94ba7"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a858f42cd002d944befe9675788d94ba7">llvm::PatternMatch::m_c_UMin</a></div><div class="ttdeci">MaxMin_match&lt; ICmpInst, LHS, RHS, umin_pred_ty, true &gt; m_c_UMin(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdoc">Matches a UMin with LHS and RHS in either order.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l02346">PatternMatch.h:2346</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a971522b36bf432ad69a0083581ab4108"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a971522b36bf432ad69a0083581ab4108">llvm::PatternMatch::m_Mul</a></div><div class="ttdeci">BinaryOp_match&lt; LHS, RHS, Instruction::Mul &gt; m_Mul(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01045">PatternMatch.h:1045</a></div></div>
<div class="ttc" id="anamespacellvm_html_aac36edd0f1ce976f0025c98e88d3830ea76feb79109026728a20736a8c6504548"><div class="ttname"><a href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830ea76feb79109026728a20736a8c6504548">llvm::RecurKind::Xor</a></div><div class="ttdeci">@ Xor</div><div class="ttdoc">Bitwise or logical XOR of integers.</div></div>
<div class="ttc" id="aSetVector_8h_html"><div class="ttname"><a href="SetVector_8h.html">SetVector.h</a></div></div>
<div class="ttc" id="anamespacellvm_1_1sampleprof_html_a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41"><div class="ttname"><a href="namespacellvm_1_1sampleprof.html#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">llvm::sampleprof::Base</a></div><div class="ttdeci">@ Base</div><div class="ttdef"><b>Definition:</b> <a href="Discriminator_8h_source.html#l00058">Discriminator.h:58</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78ba919643b83ce3c9af2e4296ed5e413a1f"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba919643b83ce3c9af2e4296ed5e413a1f">llvm::CmpInst::FCMP_UEQ</a></div><div class="ttdeci">@ FCMP_UEQ</div><div class="ttdoc">1 0 0 1 True if unordered or equal</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00729">InstrTypes.h:729</a></div></div>
<div class="ttc" id="aclassllvm_1_1Use_html"><div class="ttname"><a href="classllvm_1_1Use.html">llvm::Use</a></div><div class="ttdoc">A Use represents the edge between a Value definition and its users.</div><div class="ttdef"><b>Definition:</b> <a href="Use_8h_source.html#l00043">Use.h:43</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a833daf718a49c5cd637d8c9ddeaebe07"><div class="ttname"><a href="classllvm_1_1Type.html#a833daf718a49c5cd637d8c9ddeaebe07">llvm::Type::getPrimitiveSizeInBits</a></div><div class="ttdeci">TypeSize getPrimitiveSizeInBits() const LLVM_READONLY</div><div class="ttdoc">Return the basic size of this type if it is a primitive type.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00163">Type.cpp:163</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantExpr_html_abe73ff00db626eb990d2236c20811261"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#abe73ff00db626eb990d2236c20811261">llvm::ConstantExpr::getUIToFP</a></div><div class="ttdeci">static Constant * getUIToFP(Constant *C, Type *Ty, bool OnlyIfReduced=false)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l02157">Constants.cpp:2157</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Aug 7 2023 10:23:42 for LLVM by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
